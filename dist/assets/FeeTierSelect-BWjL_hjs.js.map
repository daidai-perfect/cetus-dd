{"version":3,"file":"FeeTierSelect-BWjL_hjs.js","sources":["../../../cetus-design/src/components/common/CetusMenu.tsx","../../../cetus-design/src/components/common/FeeTierSelect.tsx"],"sourcesContent":["import useDocumentSize from '@cetus/hooks/src/useDocumentSize'\nimport { Box, Menu, MenuList, MenuListProps, MenuProps, Portal } from '@chakra-ui/react'\nimport React, { useEffect, useRef, useState } from 'react'\n\ninterface CetusMenuProps extends MenuProps {\n  children: [React.ReactNode, React.ReactNode]\n  listProps?: MenuListProps\n}\n\nfunction CetusMenu({ children, listProps = {}, isOpen, ...rest }: CetusMenuProps) {\n  const btnRef = useRef<HTMLDivElement | null>(null)\n  const [maxH, setMaxH] = useState(0)\n  const {\n    size: { h }\n  } = useDocumentSize()\n\n  useEffect(() => {\n    if (isOpen) {\n      const _bottomH = h - (btnRef.current?.getBoundingClientRect().bottom || 0) - 20\n      const _topH = (btnRef.current?.getBoundingClientRect().top || 0) - 20\n      setMaxH(_bottomH < 40 ? _topH : _bottomH)\n    }\n  }, [isOpen, h])\n\n  return (\n    <Menu isOpen={isOpen} {...rest}>\n      <Box as=\"div\" w=\"100%\" ref={btnRef}>\n        {children[0]}\n      </Box>\n      <Portal>\n        <MenuList maxH={maxH} {...listProps}>\n          {children[1]}\n        </MenuList>\n      </Portal>\n    </Menu>\n  )\n}\n\nexport default CetusMenu\n","import useDocumentSize from '@cetus/hooks/src/useDocumentSize'\nimport { Icon } from '@cetus/ui-kit'\nimport { Button, HStack, MenuButton, MenuListProps, PlacementWithLogical, Skeleton, Text, VStack } from '@chakra-ui/react'\nimport { useDeepCompareEffect } from 'ahooks'\nimport { cloneElement, useState } from 'react'\nimport CetusMenu from './CetusMenu'\nexport const defaultFeeList: FeeTier[] = [\n  {\n    feeRate: '0.1',\n    feeDisplay: '0.001%',\n    title: 'Not Created',\n    fee: '0.00001',\n    tickSpacing: '1'\n  },\n  {\n    feeRate: '1',\n    feeDisplay: '0.01%',\n    title: 'Not Created',\n    description: 'Best for very stable pairs.',\n    fee: '0.0001',\n    tickSpacing: '2'\n  },\n  {\n    feeRate: '5',\n    feeDisplay: '0.05%',\n    title: 'Not Created',\n    description: 'Best for stable pairs.',\n    fee: '0.0005',\n    tickSpacing: '10'\n  },\n  {\n    feeRate: '10',\n    feeDisplay: '0.1%',\n    title: 'Not Created',\n    fee: '0.001',\n    tickSpacing: '20'\n  },\n  {\n    feeRate: '25',\n    feeDisplay: '0.25%',\n    title: 'Not Created',\n    description: 'Best for most pairs.',\n    fee: '0.0025',\n    tickSpacing: '60'\n  },\n  {\n    feeRate: '100',\n    feeDisplay: '1%',\n    title: 'Not Created',\n    description: 'Best for exotic pairs.',\n    fee: '0.01',\n    tickSpacing: '200'\n  },\n  {\n    feeRate: '200',\n    feeDisplay: '2%',\n    title: 'Not Created',\n    fee: '0.02',\n    tickSpacing: '220'\n  }\n]\n\nexport type FeeTier = {\n  title: string\n  fee: string\n  tickSpacing: string\n  feeDisplay: string\n  feeRate: string\n  poolAddress?: string\n  description?: string\n  liquidity?: string\n  tvl?: string\n  disabled?: boolean\n}\n\nexport type FeeTierSelectProps = {\n  value?: FeeTier\n  feeTierList?: FeeTier[]\n  children: (props: any) => JSX.Element | JSX.Element\n  onChange?: (feeTier: FeeTier) => void\n  loading?: boolean\n  wrapStyle?: MenuListProps\n  placement?: PlacementWithLogical\n  disabled?: boolean\n}\n\nfunction FeeTierSelect({ value, feeTierList, children, onChange, wrapStyle = {}, placement = 'bottom' }: FeeTierSelectProps) {\n  const [list, setList] = useState<FeeTier[]>(defaultFeeList)\n  const [open, setOpen] = useState(false)\n\n  useDeepCompareEffect(() => {\n    if (feeTierList) {\n      const index = feeTierList.findIndex(ele => ele.feeDisplay === '0.001%' && !ele.poolAddress)\n      if (index !== -1) {\n        feeTierList.splice(index, 1)\n      }\n      setList(feeTierList)\n    }\n  }, [feeTierList])\n  return (\n    <CetusMenu\n      isLazy\n      isOpen={open}\n      onClose={() => setOpen(false)}\n      placement={placement}\n      listProps={{\n        p: '8px',\n        borderRadius: '12px',\n        w: '260px',\n        overflowY: 'auto',\n        ...wrapStyle\n      }}\n    >\n      {typeof children === 'function'\n        ? children({\n            isOpen: open,\n            onClick: () => setOpen(!open)\n          })\n        : cloneElement(children, {\n            isOpen: open,\n            onClick: () => setOpen(!open)\n          })}\n      <VStack w=\"100%\" gap=\"8px\" p=\"0\">\n        {list?.map(item => (\n          <HStack\n            as=\"button\"\n            w=\"100%\"\n            p=\"0 12px\"\n            h=\"52px\"\n            key={item?.feeRate}\n            justify=\"space-between\"\n            disabled={item?.disabled}\n            onClick={() => {\n              onChange?.(item)\n              setOpen(false)\n            }}\n            borderRadius=\"8px\"\n            border=\"1px solid\"\n            bg=\"bg_six\"\n            cursor={item?.disabled ? 'not-allowed' : 'pointer'}\n            borderColor={value?.feeRate === item?.feeRate ? 'primary' : 'border'}\n            sx={{\n              _hover: {\n                borderColor: 'primary_opacity.60'\n              }\n            }}\n          >\n            <Text color={value?.feeRate === item?.feeRate ? 'primary' : 'text_caption'} fontWeight=\"500\">\n              {item?.feeDisplay}\n            </Text>\n            <VStack align=\"flex-end\" gap=\"4px\">\n              <Text fontSize=\"12px\" color=\"text_caption\">\n                {item?.title}\n              </Text>\n              {item?.description && <Text fontSize=\"12px\">{item?.description}</Text>}\n            </VStack>\n          </HStack>\n        ))}\n      </VStack>\n    </CetusMenu>\n  )\n}\n\nexport default FeeTierSelect\n\nexport const FeeTierBlock = ({ value, feeTierList, onChange, loading, disabled }: Omit<FeeTierSelectProps, 'children'>) => {\n  const { size } = useDocumentSize()\n  return (\n    <FeeTierSelect value={value} feeTierList={feeTierList} onChange={onChange} placement=\"bottom-end\">\n      {({ isOpen, onClick }) => (\n        <MenuButton\n          as={Button}\n          variant=\"unstyled\"\n          isDisabled={disabled}\n          p=\"3px\"\n          borderRadius=\"12px\"\n          border=\"1px solid\"\n          borderColor=\"border\"\n          display=\"flex\"\n          justifyContent=\"space-between\"\n          h={{ base: '40px', lg: '32px' }}\n          w={{ base: '100%', lg: 'auto' }}\n          cursor=\"pointer\"\n          onClick={onClick}\n        >\n          <HStack w=\"100%\">\n            <Text pl=\"8px\" flex=\"1\" textAlign=\"start\">\n              Fee Tier\n            </Text>\n            {loading ? (\n              <Skeleton w=\"84px\" h={{ base: '32px', lg: '24px' }} />\n            ) : (\n              <HStack p=\"4px 12px\" borderRadius=\"8px\" bg=\"primary_opacity.10\" h={{ base: '32px', lg: '24px' }}>\n                <Text color=\"text_highlight\">{value?.feeDisplay || '--%'}</Text>\n                <Icon\n                  fontSize=\"12px\"\n                  xlinkHref=\"#icon-icon_arrow\"\n                  transition=\"transform 0.5s\"\n                  transform={isOpen ? 'rotate(180deg)' : 'rotate(0deg)'}\n                />\n              </HStack>\n            )}\n          </HStack>\n        </MenuButton>\n      )}\n    </FeeTierSelect>\n  )\n}\n"],"names":["CetusMenu","children","listProps","isOpen","rest","btnRef","useRef","maxH","setMaxH","useState","h","useDocumentSize","useEffect","_bottomH","_a","_topH","_b","jsxs","Menu","jsx","Box","Portal","MenuList","defaultFeeList","FeeTierSelect","value","feeTierList","onChange","wrapStyle","placement","list","setList","open","setOpen","useDeepCompareEffect","index","ele","cloneElement","VStack","item","HStack","Text","FeeTierBlock","loading","disabled","onClick","MenuButton","Button","Skeleton","Icon"],"mappings":"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"}