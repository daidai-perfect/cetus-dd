import{cn as Ds,s as E,d as e,am as hs,r as Ss,x as ws,p as U,q as as,a8 as ns}from"./index-C2McGhUQ.js";import"./vendor-BFGDaAdA.js";const x=(m,_)=>{if(!m||(m==null?void 0:m.length)<1)return _?"0%":"0";const M=m.reduce((ts,B)=>{const ds=B?String(B):"0",s=Ds(ds);return ts.add(s)},e(0));return _?e(M).gt(1e4)?">1,000,000%":E(M.mul(100).toString(),"%"):M.toString()},$=(m,_,M)=>{if(!m)return _?"0%":"0";if(m==="--")return"--";const C=Ds(m);return M&&e(C).gt(100)?">10,000%":_?E(e(C).mul(100).toString(),"%"):C},Es=m=>`${e(m).mul(100).toString()}%`,Rs=(m,_)=>{const M=Ss(m,_);return ws(M.toString(),_)},ls=m=>{const _=new Date(m).getDate();return _<10?`0${_}`:String(_)},Ts=m=>{var _;return hs((_=e(m))==null?void 0:_.mul(60*60*24).toString(),0)};function Fs(){const m=s=>{var g,r,i;const t=s==null?void 0:s.has_mining;let u=e(0);const n=[],a=[];if(t){const v=((i=(r=(g=s==null?void 0:s.object)==null?void 0:g.rewarder_manager)==null?void 0:r.fields)==null?void 0:i.rewarders)||[],P=(s==null?void 0:s.rewarder_apr)||[];v==null||v.forEach((y,D)=>{var b,l,R,F,h;const A=e((b=y==null?void 0:y.fields)==null?void 0:b.emissions_per_second).mul(as.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&e(A).gt(0)){const c=$(P[D]);u=u.add(c);const f=(h=U((F=(R=(l=y==null?void 0:y.fields)==null?void 0:l.reward_coin)==null?void 0:R.fields)==null?void 0:F.name))==null?void 0:h.source_address;n.push({coinType:f,emissionsEveryDay:Ts(A)}),a.push({coinType:f,apr:c,aprDisplay:$(c,!0)})}})}return{haveMining:t&&n.length>0,miningRewardList:n,miningAprList:a,miningAprTotal:u.toString()}},_=s=>{var l,R,F,h,c,f,S,w,d,V;const t=(s==null?void 0:s.is_forward)===!1,u=s==null?void 0:s.has_farming,n=[];let a="",g="",r="",i="",v=0,P=0,y="",D="",A=e(0),b=!1;if(u){a=(l=s==null?void 0:s.stable_farming)==null?void 0:l.stable_farming_pool;const I=(R=s==null?void 0:s.stable_farming)==null?void 0:R.stable_rewarder;I==null||I.forEach((T,q)=>{const H=e(T==null?void 0:T.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${q+1}`]&&H.gt(0)){b=!0;const j=$(T==null?void 0:T.apr);A=A==null?void 0:A.add(j),n.push({coinType:U(T.coin).source_address,emissionsEveryDay:H.mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}}),g=(F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,r=E((h=s==null?void 0:s.stable_farming)==null?void 0:h.tvl,"$"),i=E(e(A).mul(100).toString(),"%",2,!0),v=(c=s==null?void 0:s.stable_farming)==null?void 0:c.effective_tick_lower,P=(f=s==null?void 0:s.stable_farming)==null?void 0:f.effective_tick_upper;const L=ns.tickIndexToPrice(v,(S=s==null?void 0:s.coin_a)==null?void 0:S.decimals,(w=s==null?void 0:s.coin_b)==null?void 0:w.decimals).toString(),N=ns.tickIndexToPrice(P,(d=s==null?void 0:s.coin_a)==null?void 0:d.decimals,(V=s==null?void 0:s.coin_b)==null?void 0:V.decimals).toString();y=t?e(1).div(N).toString():L,D=t?e(1).div(L).toString():N}return{haveFarming:b,farmsRewarderList:n,farmsApr:A.toString(),farmingAprDisplay:i,farmsStatedTvl:g,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:P,displayFarmsEffectMinPrice:y,displayFarmsEffectMaxPrice:D,farmsPoolAddress:a}},M=(s,t=!1)=>{var es,z,G,J,K,Q,X;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",s);const u=s==null?void 0:s.object,n=(es=s==null?void 0:s.object)==null?void 0:es.index,a=s.address,g=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(G=U((z=s==null?void 0:s.coin_a)==null?void 0:z.address))==null?void 0:G.source_address},i={...s==null?void 0:s.coin_b,coin_type:(K=U((J=s==null?void 0:s.coin_b)==null?void 0:J.address))==null?void 0:K.source_address},v=g?i:r,P=g?r:i,y=`${v==null?void 0:v.symbol} - ${P==null?void 0:P.symbol}`,D=e(s.fee).mul(1e4).toString(),A=e(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,l=E(s.pure_tvl_in_usd||0),R=E(s.vol_in_usd_24h||0),F=E(s.fee_24_h||0),h=$((Q=s==null?void 0:s.apr)==null?void 0:Q.fee_apr_24h),c=$((X=s==null?void 0:s.apr)==null?void 0:X.fee_apr_24h,!0),{haveMining:f,miningRewardList:S,miningAprList:w,miningAprTotal:d}=m(s),{haveFarming:V,farmsRewarderList:I,farmsApr:L,farmingAprDisplay:N,farmsStatedTvl:T,farmsStatedTvlDisplay:q,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O}=_(s),W=x([h,d]),is=e(W).gt(1e4)?">1,000,000%":E(e(W).mul(100).toString(),"%"),cs=x([W,L]),fs=x([h,L],!0),ss=x([W,L],!0),Z=s.is_vaults,k=!Z&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":Z?"cetus":"",rs=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return t?{poolAddress:a,name:y,isReverse:g,tokenA:r,tokenB:i,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:null,miningAprList:null,haveFarming:V,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:Z,isLocalData:t,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:H,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O,tickSpacing:b,index:n,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(i==null?void 0:i.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:rs}:{poolAddress:a,name:y,isReverse:g,tokenA:r,tokenB:i,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:S,miningAprList:w,haveFarming:V,farmsRewarderList:I,farmsApr:L,farmingAprDisplay:N,feeApr:h,feeAprDisplay:c,miningAprTotal:d,feeAndMiningAprDisplay:is,totalAprDisplay:ss,fee:s.fee,feeRate:D,feeDisplay:A,tvlDisplay:l,tvl:s.pure_tvl_in_usd||0,volume24Display:R,fees24Display:F,isVaults:Z,farmsStatedTvl:T,farmsStatedTvlDisplay:q,feeAndFarmsApr:cs,feeAndFarmsAprDisplay:fs,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O,tickSpacing:b,index:n,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(i==null?void 0:i.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:rs}},C=s=>{var c,f,S,w;const{farmingRewarder:t,showReverse:u}=s;if(!t)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:n,effectiveTickUpper:a,rewarderCoins:g,tvl:r}=t,i=ns.tickIndexToPrice(n,(c=s==null?void 0:s.coinA)==null?void 0:c.decimals,(f=s==null?void 0:s.coinB)==null?void 0:f.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:281 ~ handleFarmsV2 ~ farmingRewarder:",t);const v=ns.tickIndexToPrice(a,(S=s==null?void 0:s.coinA)==null?void 0:S.decimals,(w=s==null?void 0:s.coinB)==null?void 0:w.decimals).toString(),P=u?e(1).div(v).toString():i,y=u?e(1).div(i).toString():v;let D=e(0);g.forEach(d=>{D=D.add(d==null?void 0:d.apr)});const A=D.toString(),b=E(D.mul(100).toString(),"%",2,!0),l=t.farmingPool,R=t.tvl,F=E(R,"$"),h=[];return g.forEach(d=>{e(d==null?void 0:d.emissionsPerSecond).gt(0)&&h.push({coinType:U(d==null?void 0:d.coinType).source_address,emissionsEveryDay:e(d==null?void 0:d.emissionsPerSecond).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:P,displayFarmsEffectMaxPrice:y,farmsApr:A,farmingAprDisplay:b,farmsEffectiveTickLower:n,farmsEffectiveTickUpper:a,farmsPoolAddress:l,farmsRewarderList:h,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:h.length>0}},ts=s=>{const{miningRewarders:t,showReverse:u}=s;if(!t)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let n=e(0);const a=[],g=[];return t.forEach(r=>{n=n.add(r==null?void 0:r.apr),r.display&&e(r==null?void 0:r.emissionsPerSecond).gt(0)&&(a.push({coinType:U(r==null?void 0:r.coinType).source_address,emissionsEveryDay:e(r==null?void 0:r.emissionsPerSecond).mul(10**r.decimals).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()}),g.push({coinType:U(r==null?void 0:r.coinType).source_address,apr:r==null?void 0:r.apr,aprDisplay:$(r==null?void 0:r.apr,!0)}))}),{miningAprTotal:n.toString(),miningRewardList:a,haveMining:a.length>0,miningAprList:g}},B=s=>{const{vault:t,extensions:u}=s;if(!t)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:n,id:a}=t;return{isUnstableVault:n==="haedal",isVaults:n==="cetus",vaultId:a,vaultCategory:(u==null?void 0:u.showVaults)=="1"?"":n}};return{wrapPoolData:M,wrapPoolDataV2:(s,t=!1)=>{var z,G,J,K,Q,X,us,gs,ms,vs,ys,_s,As;const{showReverse:u,feeRate:n,stats:a,tvl:g,pool:r}=s,{displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,farmingAprDisplay:P,farmsApr:y,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsPoolAddress:b,farmsRewarderList:l,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:h}=C(s),c={...s==null?void 0:s.coinA,coin_type:(G=U((z=s==null?void 0:s.coinA)==null?void 0:z.coinType))==null?void 0:G.full_address,logo_url:(J=s==null?void 0:s.coinA)==null?void 0:J.logoURL,address:(K=s==null?void 0:s.coinA)==null?void 0:K.coinType,is_trusted:(Q=s==null?void 0:s.coinA)==null?void 0:Q.isVerified},f={...s==null?void 0:s.coinB,coin_type:(us=U((X=s==null?void 0:s.coinB)==null?void 0:X.coinType))==null?void 0:us.full_address,logo_url:(gs=s==null?void 0:s.coinB)==null?void 0:gs.logoURL,address:(ms=s==null?void 0:s.coinB)==null?void 0:ms.coinType,is_trusted:(vs=s==null?void 0:s.coinB)==null?void 0:vs.isVerified},S=u?f:c,w=u?c:f,d=e(n).div(10**6).toString(),{miningAprTotal:V,miningRewardList:I,haveMining:L,miningAprList:N}=ts(s),T=(ys=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:ys.apr,q=(_s=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:_s.fee,H=x([T,y]),j=x([T,y],!0),p=x([T,V],!0),o=$(T,!0),O=$(d,!0),W=E(q,"$"),is=x([T,V]),cs=x([is,y],!0),fs=(c==null?void 0:c.isVerified)&&(f==null?void 0:f.isVerified)&&e(g).gt(1e4),{vaultCategory:ss,vaultId:Z,isVaults:k}=B(s),rs=E(s.tvl||0),es=E(((As=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:As.vol)||0);return t?{poolAddress:r,name:`${S==null?void 0:S.symbol} - ${w==null?void 0:w.symbol}`,isReverse:u,tokenA:c,tokenB:f,displayTokenA:S,displayTokenB:w,haveMining:L,miningRewardList:null,miningAprList:null,haveFarming:h,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:n,fee:s.fee,feeDisplay:O,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:k,isLocalData:t,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,farmsPoolAddress:b,haveZap:(c==null?void 0:c.is_trusted)&&(f==null?void 0:f.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:ss,vaultId:Z}:{displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,displayTokenA:S,displayTokenB:w,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsApr:y,farmingAprDisplay:P,farmsPoolAddress:b,farmsRewarderList:l,farmsStatedTvl:R,farmsStatedTvlDisplay:F,fee:d,feeApr:T,feeAprDisplay:o,feeAndFarmsApr:H,feeAndFarmsAprDisplay:j,feeAndMiningAprDisplay:p,feeDisplay:O,feeRate:e(n).div(100).toString(),haveFarming:h,haveZap:fs,isReverse:u,vaultCategory:ss,vaultId:Z,haveMining:L,miningRewardList:I,miningAprList:N,miningAprTotal:V.toString(),name:`${S==null?void 0:S.symbol} - ${w==null?void 0:w.symbol}`,poolAddress:r,tokenA:c,tokenB:f,totalAprDisplay:cs,tvl:g,tvlDisplay:rs,volume24Display:es,fees24Display:W,isVaults:k}}}}export{$ as a,x as b,Rs as c,ls as d,Es as f,Fs as u};
//# sourceMappingURL=useWrapPoolData-B49bXTZg.js.map
