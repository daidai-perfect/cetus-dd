import{bF as ts,s as w,d as e,am as is,i as cs,r as us,a0 as C,D as o,a2 as ss}from"./index-nq5C95Tz.js";import"./vendor-DYqnJE5Q.js";const gs="/v2/sui/stats_pools",_s="/v3/sui/clmm/pool_price_range",vs="/v2/sui/pool/history",hs="/v2/sui/histogram/all",ys="/v2/sui/histogram",Ds="/v3/sui/clmm/histogram",As="/v2/sui/statistics",bs="/v2/sui/statistics_pools",Ss="/market/clmm/prices",Ps="/v2/sui/current_tx",ws="/dca/quote_config",Ts="/dca/quote",Es="/v2/sui/dca/query_event_list",Fs="/v2/sui/limit_order",Ms="/router_v2/status",xs="/v3/sui/vaults/unstable/tvl/histogram",Ls="/v3/sui/vaults/unstable/pricerange/histogram",O=(t,a)=>{if(!t||(t==null?void 0:t.length)<1)return a?"0%":"0";const D=t.reduce((g,c)=>{const d=c?String(c):"0",_=ts(d);return g.add(_)},e(0));return a?e(D).gt(1e4)?">1,000,000%":w(D.mul(100).toString(),"%"):D.toString()},$=(t,a,D)=>{if(!t)return a?"0%":"0";if(t==="--")return"--";const s=ts(t);return D&&e(s).gt(100)?">10,000%":a?w(e(s).mul(100).toString(),"%"):s},Rs=t=>`${e(t).mul(100).toString()}%`,Hs=(t,a)=>{const D=cs(t,a);return us(D.toString(),a)},Us=t=>{const a=new Date(t).getDate();return a<10?`0${a}`:String(a)},fs=t=>{var a;return is((a=e(t))==null?void 0:a.mul(60*60*24).toString(),0)};function $s(){const t=s=>{var v,r,n;const g=s==null?void 0:s.has_mining;let c=e(0);const d=[],_=[];if(g){const i=((n=(r=(v=s==null?void 0:s.object)==null?void 0:v.rewarder_manager)==null?void 0:r.fields)==null?void 0:n.rewarders)||[],m=(s==null?void 0:s.rewarder_apr)||[];i==null||i.forEach((u,A)=>{var b,T,E,F,y;const f=e((b=u==null?void 0:u.fields)==null?void 0:b.emissions_per_second).mul(o.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${A+1}`]&&e(f).gt(0)){const S=$(m[A]);c=c.add(S);const P=(y=C((F=(E=(T=u==null?void 0:u.fields)==null?void 0:T.reward_coin)==null?void 0:E.fields)==null?void 0:F.name))==null?void 0:y.source_address;d.push({coinType:P,emissionsEveryDay:fs(f)}),_.push({coinType:P,apr:S,aprDisplay:$(S,!0)})}})}return{haveMining:g&&d.length>0,miningRewardList:d,miningAprList:_,miningAprTotal:c.toString()}},a=s=>{var b,T,E,F,y,S,P,k,j,x,L,V,M,q;const g=(s==null?void 0:s.is_forward)===!1,c=!!(s!=null&&s.stable_farming&&((b=s==null?void 0:s.stable_farming)!=null&&b.show_rewarder_1||(T=s==null?void 0:s.stable_farming)!=null&&T.show_rewarder_2||(E=s==null?void 0:s.stable_farming)!=null&&E.show_rewarder_3)&&((F=s==null?void 0:s.stable_farming)!=null&&F.stable_rewarder)),d=[];let _="",v="",r="",n="",i=0,m=0,u="",A="",f=e(0);if(c){_=(y=s==null?void 0:s.stable_farming)==null?void 0:y.stable_farming_pool;const R=(S=s==null?void 0:s.stable_farming)==null?void 0:S.stable_rewarder;R==null||R.forEach((h,N)=>{const U=e(h==null?void 0:h.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${N+1}`]&&U.gt(0)){const Z=$(h==null?void 0:h.apr);f=f==null?void 0:f.add(Z),d.push({coinType:C(h.coin).source_address,emissionsEveryDay:U.mul(86400).toDP(2,o.ROUND_HALF_UP).toString()})}}),v=(P=s==null?void 0:s.stable_farming)==null?void 0:P.tvl,r=w((k=s==null?void 0:s.stable_farming)==null?void 0:k.tvl,"$"),n=w(e(f).mul(100).toString(),"%",2,!0),i=(j=s==null?void 0:s.stable_farming)==null?void 0:j.effective_tick_lower,m=(x=s==null?void 0:s.stable_farming)==null?void 0:x.effective_tick_upper;const I=ss.tickIndexToPrice(i,(L=s==null?void 0:s.coin_a)==null?void 0:L.decimals,(V=s==null?void 0:s.coin_b)==null?void 0:V.decimals).toString(),H=ss.tickIndexToPrice(m,(M=s==null?void 0:s.coin_a)==null?void 0:M.decimals,(q=s==null?void 0:s.coin_b)==null?void 0:q.decimals).toString();u=g?e(1).div(H).toString():I,A=g?e(1).div(I).toString():H}return{haveFarming:c,farmsRewarderList:d,farmsApr:f.toString(),farmingAprDisplay:n,farmsStatedTvl:v,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:i,farmsEffectiveTickUpper:m,displayFarmsEffectMinPrice:u,displayFarmsEffectMaxPrice:A,farmsPoolAddress:_}};return{wrapPoolData:(s,g=!1)=>{var J,K,X,Y,B,l,p;const c=s==null?void 0:s.object,d=(J=s==null?void 0:s.object)==null?void 0:J.index,_=s.address,v=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(X=C((K=s==null?void 0:s.coin_a)==null?void 0:K.address))==null?void 0:X.source_address},n={...s==null?void 0:s.coin_b,coin_type:(B=C((Y=s==null?void 0:s.coin_b)==null?void 0:Y.address))==null?void 0:B.source_address},i=v?n:r,m=v?r:n,u=`${i==null?void 0:i.symbol} - ${m==null?void 0:m.symbol}`,A=e(s.fee).mul(1e4).toString(),f=e(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,T=w(s.pure_tvl_in_usd||0),E=w(s.vol_in_usd_24h||0),F=w(s.fee_24_h||0),y=$((l=s==null?void 0:s.apr)==null?void 0:l.fee_apr_24h),S=$((p=s==null?void 0:s.apr)==null?void 0:p.fee_apr_24h,!0),{haveMining:P,miningRewardList:k,miningAprList:j,miningAprTotal:x}=t(s),{haveFarming:L,farmsRewarderList:V,farmsApr:M,farmingAprDisplay:q,farmsStatedTvl:R,farmsStatedTvlDisplay:I,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z}=a(s),W=O([y,x]),as=e(W).gt(1e4)?">1,000,000%":w(e(W).mul(100).toString(),"%"),es=O([W,M]),rs=O([y,M],!0),ns=O([W,M],!0),Q=s.is_vaults,z=!Q&&s.vaults&&s.vaults.length>0,G=s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return g?{poolAddress:_,name:u,isReverse:v,tokenA:r,tokenB:n,displayTokenA:i,displayTokenB:m,haveMining:P,miningRewardList:null,miningAprList:null,haveFarming:L,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:A,fee:s.fee,feeDisplay:f,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:Q,isLocalData:g,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z,tickSpacing:b,index:d,object:c,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:z,vaultId:G}:{poolAddress:_,name:u,isReverse:v,tokenA:r,tokenB:n,displayTokenA:i,displayTokenB:m,haveMining:P,miningRewardList:k,miningAprList:j,haveFarming:L,farmsRewarderList:V,farmsApr:M,farmingAprDisplay:q,feeApr:y,feeAprDisplay:S,miningAprTotal:x,feeAndMiningAprDisplay:as,totalAprDisplay:ns,fee:s.fee,feeRate:A,feeDisplay:f,tvlDisplay:T,tvl:s.pure_tvl_in_usd||0,volume24Display:E,fees24Display:F,isVaults:Q,farmsStatedTvl:R,farmsStatedTvlDisplay:I,feeAndFarmsApr:es,feeAndFarmsAprDisplay:rs,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z,tickSpacing:b,index:d,object:c,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:z,vaultId:G}}}}export{Es as D,Ds as H,Fs as L,_s as P,bs as S,Ps as T,Ls as V,$ as a,O as b,Ss as c,Hs as d,ws as e,Rs as f,Ts as g,As as h,vs as i,hs as j,ys as k,Us as l,xs as m,gs as n,Ms as o,$s as u};
//# sourceMappingURL=useWrapPoolData-C6szC59e.js.map
