import{j as e,m as R,$ as O,I as V,a as $,a1 as L,b as H,H as u,g as P,V as S,T as o,bo as q,W as E,C as z,a0 as le,B as Q,aB as N,a$ as X,r as f,a3 as U,S as w,a5 as re,by as ae,d as F}from"./index-BcNGwLrK.js";import{V as oe}from"./VaultsAndFarmsTabFilter-tS8Z6EU6.js";import{N as D}from"./NoData-Dz8lPrBG.js";import{V as J,a as Z,u as ie,b as Y,c as ne,d as ce}from"./useGetVaultList-NKg0xqlL.js";import{H as B}from"./HTextLabelBox-CIlBSc6E.js";import{C as I}from"./CetusTooltip-BNvdxWOU.js";import{V as G}from"./VTextLabelBox-pJuEpe7i.js";import{C as xe}from"./CoinPairInfo-Bu8FrDH8.js";import{a as T,b as y,c as de,d as pe,e as C,T as ue}from"./tr-BLmb-ReS.js";import{u as he}from"./useTokenBalance-DfhR4t56.js";import{u as ge}from"./useAccountBalance-BrVw4-U4.js";import"./RefreshButton-DjMJiahg.js";import"./IconBg-BWNLvmW1.js";import"./SortDropBlock-BqrRuJ_i.js";import"./useGetPoolList-T54lS1Pj.js";import"./api-data-utils-CdGXOKL3.js";import"./useToken-DXKcTUhY.js";import"./AddressCopyLink-DbwV-boc.js";import"./AddressUnderline-m81qB_am.js";function ee(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:a}=l;return e.jsxs(R,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(O,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(O,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg"},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:a||(()=>{}),children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function te(l){var m,_,v,i;const{apiInfo:r,logo_url:s,balanceDisplay:a,holdCoinAmounts:t,sharePoolRate:n,rewardPerA:d,rewardPerB:c}=l,g=$(),{currentAccount:x,onWalletModal:p}=L(),{isApp:h}=H();return x?e.jsxs(R,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{g(`/vaults-detail/${r.vaultsId}`)},children:[e.jsxs(u,{gap:"15px",children:[e.jsx(P,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(S,{gap:"4px",alignItems:"start",children:[e.jsx(o,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(o,{color:"text_caption",children:`${a||"0"} LP`})]})]}),e.jsx(R,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:h?e.jsxs(e.Fragment,{children:[e.jsx(B,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(R,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(u,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(o,{color:"text_caption",children:(m=r==null?void 0:r.displayTokenA)==null?void 0:m.symbol})]}),e.jsxs(u,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(o,{color:"text_caption",children:(_=r==null?void 0:r.displayTokenB)==null?void 0:_.symbol})]})]})}),e.jsx(B,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:q(n,6)}),e.jsxs(O,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(o,{color:"primary_gray",children:"Details"}),e.jsx(E,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(z,{w:"20px",h:"20px",children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{mr:"90px",children:e.jsx(G,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(u,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(o,{color:"text_caption",mr:"8px",children:(v=r==null?void 0:r.displayTokenA)==null?void 0:v.symbol}),e.jsx(P,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(o,{color:"text_caption",children:(i=r==null?void 0:r.displayTokenB)==null?void 0:i.symbol})]})})}),e.jsx(z,{mr:"110px",children:e.jsx(G,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:q(n,6)})}),e.jsxs(u,{gap:"8px",children:[e.jsx(o,{color:"primary_gray",children:"Details"}),e.jsx(E,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(z,{w:"20px",h:"20px",children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(D,{type:"nowallet",onboard:()=>{p(!0)}})}function be({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g,currentAccount:x,totalValue:p,jumpVaultsDetail:h}){var m,_,v,i,b,j;return e.jsxs(S,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(u,{children:[e.jsx(le,{coinAIconUrl:(m=t==null?void 0:t.displayTokenA)==null?void 0:m.logo_url,coinBIconUrl:(_=t==null?void 0:t.displayTokenB)==null?void 0:_.logo_url,coinACoinType:(v=t==null?void 0:t.displayTokenA)==null?void 0:v.coin_type,coinBCoinType:(i=t==null?void 0:t.displayTokenB)==null?void 0:i.coin_type}),e.jsxs(o,{color:"text_caption",fontWeight:"500",children:[(b=t==null?void 0:t.displayTokenA)==null?void 0:b.symbol," - ",(j=t==null?void 0:t.displayTokenB)==null?void 0:j.symbol]}),e.jsx(Q,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(o,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),e.jsxs(S,{w:"100%",gap:"16px",mt:"4px",children:[e.jsx(B,{label:"TVL",value:t.vaultsTvlDisplay,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(B,{label:e.jsxs(u,{justify:"flex-end",gap:"2px",children:[e.jsx(o,{children:"APY"}),e.jsx(I,{placement:"auto-start",tooltip:e.jsx(o,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(V,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(J,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(B,{label:"Rewards",value:e.jsx(Z,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(B,{label:"Your Holdings",value:x?N(p,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(S,{w:"100%",gap:"8px",children:[e.jsx(ee,{isOpen:l,jumpVaultsDetail:()=>{h(t.vaultsId)},onExpand:r}),l&&e.jsx(te,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g})]})]})}function je({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g,currentAccount:x,totalValue:p,jumpVaultsDetail:h}){return e.jsxs(X.Fragment,{children:[e.jsxs(T,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(y,{children:e.jsx(xe,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},symbolFontSize:"15px"})}),e.jsx(y,{textAlign:"right",children:e.jsx(o,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),e.jsx(y,{textAlign:"right",children:e.jsx(J,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay})}),e.jsx(y,{textAlign:"right",children:e.jsx(Z,{rewardList:t.vaultsRewards})}),e.jsx(y,{textAlign:"right",children:e.jsx(o,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:x?N(p,2):"--"})}),e.jsx(y,{textAlign:"right",children:e.jsx(ee,{isOpen:l,jumpVaultsDetail:()=>{h(t.vaultsId)}})})]}),!l&&e.jsx(T,{h:"16px"}),e.jsx(T,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(y,{colSpan:6,children:e.jsx(E,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(te,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g})})})})]},t.vaultsId)}function se(l){const r=$(),{apiInfo:s}=l,{currentAccount:a}=L(),{fetchVaultInfoFromContract:t,fetchClmmPoolFromContract:n,lpTokenInfo:d,balanceInfo:c,sharePoolRate:g,holdCoinAmounts:x,totalValue:p}=ie(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);f.useEffect(()=>{t(s.vaultsId)},[s.vaultsId]),f.useEffect(()=>{n(s.poolAddress)},[s.poolAddress]);const{vaultStatsLoading:h}=Y(),[m,_]=f.useState(!1),v=W=>{r(`/vaults-detail/${W}`)},{rewardPerA:i,rewardPerB:b}=ne(c==null?void 0:c.balanceFormat,s),j=()=>{_(!m)},{isApp:k}=H();return k?e.jsx(be,{openExpend:m,onExpand:j,rewardPerA:i,rewardPerB:b,apiInfo:s,logo_url:d==null?void 0:d.logo_url,holdCoinAmounts:x,balanceDisplay:c==null?void 0:c.balanceDisplay,sharePoolRate:g,currentAccount:a,totalValue:p,jumpVaultsDetail:v}):e.jsx(je,{openExpend:m,onExpand:j,rewardPerA:i,rewardPerB:b,apiInfo:s,logo_url:d==null?void 0:d.logo_url,holdCoinAmounts:x,balanceDisplay:c==null?void 0:c.balanceDisplay,sharePoolRate:g,currentAccount:a,totalValue:p,jumpVaultsDetail:v})}function me({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a}){const{onWalletModal:t}=L();return!a&&!s&&l.length===0?e.jsx(D,{type:"nodata",text:"No vaults found",border:"none"}):a?e.jsx(D,{type:"nowallet",onboard:()=>t(!0),border:"none"}):s?e.jsx(ye,{itemList:[1,2,3]}):e.jsxs(S,{w:"100%",mt:"20px",children:[e.jsx(o,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),l==null?void 0:l.map(n=>e.jsx(se,{apiInfo:n},n.clmmPoolAddress))]})}function ye(l){const{itemList:r}=l;return e.jsxs(S,{w:"100%",mt:"20px",children:[e.jsx(o,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),r.map(s=>e.jsxs(S,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(u,{gap:"0",children:[e.jsx(U,{size:"9"}),e.jsx(U,{size:"9"}),e.jsxs(u,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(w,{height:"4",width:"100px"}),e.jsx(w,{height:"4",width:"60px"})]})]}),e.jsx(S,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(a=>e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(w,{height:"4",width:"100px"}),e.jsx(w,{height:"4",width:"100px"})]},a))}),e.jsxs(S,{w:"100%",gap:"8px",children:[e.jsx(w,{height:"8",width:"100%"}),e.jsx(w,{height:"8",width:"100%"})]})]},s))]})}function fe({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a}){const{onWalletModal:t}=L();return e.jsxs(de,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(pe,{children:e.jsxs(T,{children:[e.jsx(C,{children:"Vaults"}),e.jsx(C,{textAlign:"right",children:"TVL"}),e.jsx(C,{textAlign:"right",children:e.jsxs(u,{justify:"flex-end",gap:"2px",children:[e.jsx(o,{children:"APY"}),e.jsx(I,{tooltip:e.jsx(o,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(V,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(C,{textAlign:"right",children:"Rewards"}),e.jsx(C,{textAlign:"right",children:"Your Holdings"}),e.jsx(C,{textAlign:"right",children:"Action"})]})}),e.jsxs(ue,{children:[!a&&!s&&l.length===0&&e.jsx(T,{children:e.jsx(y,{colSpan:6,w:"100%",children:e.jsx(D,{type:"nodata",text:"No vaults found",border:"none"})})}),a&&e.jsx(T,{children:e.jsx(y,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(D,{type:"nowallet",onboard:()=>t(!0),border:"none"})})}),s&&e.jsx(ve,{itemList:[1,2,3]}),!s&&l.map(n=>e.jsx(se,{apiInfo:n},n.clmmPoolAddress))]})]})}function ve(l){const{itemList:r}=l;return r.map(s=>e.jsxs(X.Fragment,{children:[e.jsxs(T,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(y,{children:e.jsx(w,{w:"220px"})}),e.jsx(y,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(w,{})})}),e.jsx(y,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(w,{})})}),e.jsx(y,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(w,{})})}),e.jsx(y,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(w,{})})}),e.jsx(y,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(w,{})})})]}),e.jsx(T,{h:"16px"})]},s))}function we(l){const{fetchTokenPrices:r}=re(),{currentAccount:s,onWalletModal:a}=L(),{dataList:t,isAll:n,showSkeletonLoading:d}=l;f.useEffect(()=>{const x=[];t.forEach(p=>{x.includes(p.tokenA.coin_type)||x.push(p.tokenA.coin_type),x.includes(p.tokenB.coin_type)||x.push(p.tokenB.coin_type)}),x.length>0&&r(x)},[t.length]);const c=f.useMemo(()=>!n&&!s,[s,n]),{isApp:g}=H();return g?e.jsx(me,{...l,showNoWallet:c}):e.jsx(fe,{...l,showNoWallet:c})}function _e(l){const{isLoading:r,total_tvl:s}=l,{isApp:a}=H();return e.jsx(S,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(S,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(u,{w:"100%",justify:"space-between",children:e.jsx(o,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(o,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease. ",a&&e.jsxs(u,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(o,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(V,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!a&&e.jsxs(u,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(o,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(V,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(o,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(w,{isLoaded:!r,children:e.jsx(o,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:N(s,2)})})]})})}const K={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}};function Se(l){const{getVaultList:r,getVaultListFromCache:s}=ce(),{vaultStatsObj:a}=Y(),{getBalanceInfoFromCache:t}=he(),{tokenBalanceObj:n}=ae(),{currentAccount:d}=L(),[c,g]=f.useState([]),[x,p]=f.useState({sortRule:"desc",sortType:"tvl"}),h=f.useMemo(()=>{let i=F(0);return Object.values(a).forEach(b=>{i=i.add(b.vaultsTvl)}),i.toString()},[a]),m=async i=>{console.log("🚀 ~ fetchVaultList ~ options:",i);const b=s(i);console.log("🚀 ~ fetchVaultList ~ cacheList:",b),g(_(b,l));const j=await r(i);console.log("🚀 ~ fetchVaultList ~ list:",j),j.length>0&&g(_(j,l))},_=(i,b)=>b==="all"?i:i.filter(j=>{const k=t(K[j.clmmPoolAddress].lpToken);return!!(k&&F(k.balance).gt(0))}),v=i=>i.filter(b=>{var k;const j=t((k=K[b.poolAddress])==null?void 0:k.lpToken);return!!(j&&F(j.balance).gt(0))});return f.useEffect(()=>{d?m(x):l!=="all"&&g([])},[n]),{totalTvl:h,filterMyVaultList:v,fetchVaultList:m,vaultList:c,queryOptions:x,setQueryOptions:p}}function qe(){const{vaultBaseList:l,vaultStatsLoading:r,vaultBaseListLoading:s}=Y(),{fetchAccountBalance:a,isLoading:t}=ge(),{currentAccount:n}=L(),[d,c]=f.useState({label:"All Vaults"}),{totalTvl:g,vaultList:x,fetchVaultList:p,queryOptions:h,setQueryOptions:m,filterMyVaultList:_}=Se(d.label==="All Vaults"?"all":"my"),[v,i]=f.useState(!1),b=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[j,k]=f.useState({label:"TVL",value:"TVL"}),W=f.useMemo(()=>{const A=[],M=_([...l]);return A.push({label:"All Vaults",num:l.length>0?l.length.toString():void 0}),A.push({label:"Your Vaults",num:M.length>0&&n!==void 0?M.length.toString():void 0}),A},[l,t,n,d]);return f.useEffect(()=>{x.length===0&&i(!0),p(h)},[d.label]),f.useEffect(()=>{!r&&!s&&!t&&i(!1)},[r,s,t,l]),e.jsxs(S,{gap:"0px",w:"100%",children:[e.jsx(_e,{isLoading:v,total_tvl:g}),e.jsx(Q,{h:{base:"260px",lg:"240px"}}),e.jsx(oe,{sortByList:b,currTab:d,tabList:W,handleChangeTab:A=>{c(A)},currSortType:j,onSortByChange:A=>{h.sortType=A.value,m({...h}),k(A),p(h)},sortRule:h.sortRule,handleChangeSortRule:A=>{h.sortRule=A,m({...h}),p(h)},handleRefresh:()=>{i(!0),a()}}),e.jsx(we,{dataList:x,isAll:d.label==="All Vaults",showSkeletonLoading:v})]})}export{qe as default};
