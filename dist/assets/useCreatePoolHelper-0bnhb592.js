import{u as b}from"./usePosAdd-z7__bZBt.js";import{g as F}from"./liquidity-Dfvthq6C.js";import{u as N,b as I}from"./useGetPoolList-BTM-c6TE.js";import{d as C}from"./FeeTierSelect-Dz3jxviW.js";import{k as W,a9 as _,d as l,a5 as L,a0 as O,a1 as H}from"./index-C10POeB7.js";import{a as M}from"./vendor-BowHGuwE.js";function Z(){const n=W("clmm"),{preAdd:f}=b(),{getPoolList:a}=N();return{preAddPool:r=>{const{tickSpacing:i,price:d,minPrice:o,maxPrice:s,amount:m,amountCoinType:g,realTokenA:t,realTokenB:e,needReverse:c}=r,p=_.priceToSqrtPriceX64(l(d),t.decimals,e.decimals).toString(),P=_.priceToTickIndex(l(d),t.decimals,e.decimals).toString(),x=t.decimals,A=e.decimals;let y,T;if(o==="0"&&s==="âˆž")y=H.getMinIndex(i),T=H.getMaxIndex(i);else{const k=c?I(s):o,q=c?I(o):s,R=_.priceToTickIndex(l(k),t.decimals,e.decimals).toString();console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:103 ~ useCreatePoolHelper ~ realMintTick:",R),y=L(_.priceToTickIndex(l(k),x,A),i),T=L(_.priceToTickIndex(l(q),x,A),i)}console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:87 ~ useCreatePoolHelper ~ params:",{...r,currentSqrtPrice:p,lowerTick:y,upperTick:T,currTick:P});const h=g===(t==null?void 0:t.coin_type),B=O(m,h?x:A).toString(),w=f({amount:B,tokenA:t,tokenB:e,isTokenA:h,lowerTick:y,upperTick:T,curSqrtPrice:p,isReverse:c,roundUp:!0});return console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:128 ~ useCreatePoolHelper ~ res:",w),console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),{...w,currentSqrtPrice:p,fixAmountA:h,lowerTick:y,upperTick:T,tickSpacing:i,coinTypeA:t.coin_type,coinTypeB:e.coin_type}},fetchFeeTierList:async(r,i)=>{var d;try{if(r&&i){const o=await a({coin_type:`${r},${i}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(o&&o.list&&o.list.length>0){const s=F(o.list),m=(d=C)==null?void 0:d.map(t=>{const e=s.find(c=>c.feeRate===t.feeRate);return{...t,title:(e==null?void 0:e.title)||t.title,poolAddress:e==null?void 0:e.poolAddress,liquidity:e==null?void 0:e.liquidity,tvl:e==null?void 0:e.tvl}}),g=m.findIndex(t=>t.feeDisplay==="0.001%"&&!t.poolAddress);return m.filter((t,e)=>Number(e)!==g)}else return C.filter(s=>s.feeDisplay!=="0.001%")}}catch(o){console.log("ðŸš€ ~ fetchFeeTierList ~ fetchFeeTierList:",o)}return[...C]},getCreatePoolTxPayload:async r=>{console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:140 ~ getCreatePoolTxPayload ~ params:",r);const{tickSpacing:i,currentSqrtPrice:d,fixAmountA:o,coinAmountAOrigin:s,coinAmountBOrigin:m,lowerTick:g,upperTick:t,coinTypeA:e,coinTypeB:c}=r,p=await n.FullClient.getCoinMetadata({coinType:e}),P=await n.FullClient.getCoinMetadata({coinType:c});return await n.Pool.createPoolPayload({tick_spacing:i,initialize_sqrt_price:d,uri:"",fix_amount_a:o,amount_a:s,amount_b:m,tick_lower:g,tick_upper:t,coin_type_a:e,coin_type_b:c,metadata_a:p==null?void 0:p.id,metadata_b:P==null?void 0:P.id})}}}function j(n,f,a,u){const v=M.useMemo(()=>{if(n)return!1;try{if(f!==void 0&&a!==void 0&&u!==void 0)return l(f).lt(a)||l(f).gt(u)}catch{}return!1},[u,f,a,n]),S=M.useMemo(()=>{if(n)return!1;try{if(a!==void 0&&u!==void 0)return l(a).gt(u)}catch{}return!1},[u,a,n]);return{showInputPriceWarn:v,showPriceRangeWarn:S}}export{Z as a,j as u};
//# sourceMappingURL=useCreatePoolHelper-0bnhb592.js.map
