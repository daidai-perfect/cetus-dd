const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SourceGrid-BOhnKS2w.js","assets/vendor-DXHkIl66.js","assets/useSwapHelper-D5mvHASm.js","assets/useToken-DiTgXMKK.js","assets/index-D1te9NbD.js","assets/index-CteIxbgC.css","assets/global-By-XhsLl.js","assets/useGetPoolList-DuL5HGpv.js","assets/useWrapPoolData-DxJ_OAnP.js","assets/CheckBox-DSEkqWzu.js","assets/aggregator-DzV1ULlx.js","assets/index-BnDnujjX.js","assets/TooltipIcon-DmGsErUD.js","assets/index-Ct3YeWBa.js"])))=>i.map(i=>d[i]);
import{bK as Y,ab as Z,$ as W,I as F,a0 as Q,_ as ee}from"./index-D1te9NbD.js";import{a as l,j as e,ar as se,X as q,Y as G,Z as B,$ as J,a0 as re,a1 as U,H as A,T as j,a6 as V,v as y,V as _,a7 as te,ag as ne,ah as oe,ai as ie,u as le}from"./vendor-DXHkIl66.js";import{A as ae,a as ce}from"./aggregator-DzV1ULlx.js";import{u as de}from"./index-BnDnujjX.js";import{a as u}from"./useSwapHelper-D5mvHASm.js";import{T as ue}from"./TooltipIcon-DmGsErUD.js";import{u as xe,a as he}from"./index-Ct3YeWBa.js";function fe(i,o){return Y(i,o)}var pe=function(i,o){var t=xe(i),s=l.useRef(null),d=l.useCallback(function(){s.current&&clearTimeout(s.current)},[]);return l.useEffect(function(){if(!(!he(o)||o<0))return s.current=setTimeout(t,o),d},[o]),d};const T=i=>i.reduce((o,t)=>o+(t!=null&&t.subItems?t.subItems.length:1),0),N=(i,o)=>i.reduce((t,s)=>s!=null&&s.subItems?t+s.subItems.reduce((d,x)=>d+(o[x.id]?1:0),0):t+(o[s.id]?1:0),0);function ge(){const{providersSwitchStates:i,setProvidersSwitchStates:o}=de(),{providers:t}=Z(),[s,d]=l.useState({...i}),[x,E]=l.useState([]),[h,m]=l.useState([]);W(()=>{d({...i})},[i]),W(()=>{const n={},r=[],c=[],O={};t.filter(g=>g!==u.HAWAL).forEach(g=>{const a=ae[g];if(a){const S=i[a.id];S===void 0?O[a.id]=!0:O[a.id]=S;const k=P(g);if(k){const L=n[k.groupName]||[];L.push(a),n[k.groupName]=L}else a.type==="dex"?c.push(a):r.push(a)}});for(const[g,a]of Object.entries(n))if(a.length>0){const S=a[0],k={...S,id:S.groupId,name:g,subItems:a.sort((L,X)=>X.sort-L.sort)};S.type==="dex"?c.push(k):r.push(k)}r.sort((g,a)=>a.sort-g.sort),c.sort((g,a)=>a.sort-g.sort),E([...r]),m([...c]),o(O)},[t]);const P=n=>ce.find(r=>r.items.includes(n)),H=n=>{if(n){const r={};t.forEach(c=>r[c]=!0),t.includes(u.HAWAL)&&(r[u.HAWAL]=!0),d(r)}else{const r={};t.forEach(c=>r[c]=!1),t.includes(u.HAWAL)&&(r[u.HAWAL]=!1),d({...r,[u.CETUS]:!0})}},w=n=>{n?h.forEach(r=>{r!=null&&r.subItems?r.subItems.forEach(c=>{s[c.id]=!0}):s[r.id]=!0}):h.forEach(r=>{r.id===u.CETUS?s[r.id]=!0:r!=null&&r.subItems?r.subItems.forEach(c=>{s[c.id]=!1}):s[r.id]=!1}),d({...s})},M=n=>{x.forEach(r=>{r!=null&&r.subItems?r.subItems.forEach(c=>{s[c.id]=n}):s[r.id]=n}),t.includes(u.HAWAL)&&(s[u.HAWAL]=n),d({...s})},b=(n,r)=>{s[n]=r,n===u.HAEDAL&&t.includes(u.HAWAL)&&(s[u.HAWAL]=r),d({...s})},C=l.useMemo(()=>h.every(n=>n!=null&&n.subItems?n.subItems.every(r=>s[r.id]):s[n.id]),[JSON.stringify(h),JSON.stringify(s)]),v=l.useMemo(()=>x.every(n=>n!=null&&n.subItems?n.subItems.every(r=>s[r.id]):s[n.id]),[JSON.stringify(x),JSON.stringify(s)]),D=l.useMemo(()=>C&&v,[C,v]),f=l.useMemo(()=>(t==null?void 0:t.filter(n=>n!==u.CETUS&&!!s[n]).length)>=1,[s,t]),p=()=>{o({...s})},I=l.useMemo(()=>{var n;return(n=t==null?void 0:t.filter(r=>r!=="HAWAL"))==null?void 0:n.length},[t==null?void 0:t.length]),$=l.useMemo(()=>({checked:N(h,s),total:T(h)}),[h,s]),K=l.useMemo(()=>({checked:N(x,s),total:T(x)}),[x,s]);return{handleSelectAllProviderClick:H,handleSelectAllDexProviderClick:w,handleSelectAllOtherProviderClick:M,handleProviderClick:b,selectAllProviders:D,selectAllDexProviders:C,otherProviderList:x,selectAllOtherProviders:v,dexProviderList:h,currProvidersSwitchStates:s,providersSwitchStates:i,isOpenAggregatorMode:f,handleSaveClick:p,allSourceNum:I,dexSourceNumMap:$,otherSourceNumMap:K}}function je(i){const[o,t]=l.useState(!1),s=pe(()=>{t(!0)},300);return l.useEffect(()=>()=>s(),[]),e.jsx(se,{sx:{".chakra-switch__track":{p:"0px",transitionDuration:o?"var(--chakra-transition-duration-fast) !important":"0s"},".chakra-switch__thumb":{transitionDuration:o?"var(--chakra-transition-duration-normal) !important":"0s"}},...i})}function ve({isOpen:i,onOk:o,onClose:t}){return e.jsxs(q,{autoFocus:!1,returnFocusOnClose:!1,isOpen:i,onClose:t,isCentered:!0,children:[e.jsx(G,{}),e.jsxs(B,{children:[e.jsx(J,{children:"Tips"}),e.jsx(re,{}),e.jsx(U,{children:e.jsxs(A,{children:[e.jsx(F,{xlinkHref:"#icon-icon_tips",svgHover:"text_paragraph",cursor:"default"}),e.jsx(j,{color:"text_caption",children:"Do you want to save your changes?"})]})}),e.jsxs(V,{gap:"16px",children:[e.jsx(y,{flex:"1",onClick:o,h:"40px",borderRadius:"8px",children:"Confirm"}),e.jsx(y,{flex:"1",variant:"outline",h:"40px",borderRadius:"8px",onClick:t,children:"No"})]})]})]})}function Se({num:i,total:o}){return e.jsxs(A,{h:"16px",lineHeight:"16px",p:"2px 8px",borderRadius:"8px",bg:"aggregator_switch",gap:"0px",children:[e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"primary",children:[i,"Â "]}),o!==void 0&&e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"text_paragraph",children:["/ ",o]})]})}const z=l.lazy(()=>ee(()=>import("./SourceGrid-BOhnKS2w.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),ke=({isOpen:i,onClose:o})=>{const[t,s]=l.useState(!1),{handleSelectAllProviderClick:d,handleSelectAllDexProviderClick:x,handleSelectAllOtherProviderClick:E,handleProviderClick:h,selectAllProviders:m,selectAllDexProviders:P,otherProviderList:H,selectAllOtherProviders:w,dexProviderList:M,currProvidersSwitchStates:b,providersSwitchStates:C,handleSaveClick:v,allSourceNum:D,dexSourceNumMap:f,otherSourceNumMap:p}=ge(),I=()=>{fe(C,b)?o():s(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(q,{autoFocus:!1,returnFocusOnClose:!1,isOpen:i,onClose:I,isCentered:!0,children:[e.jsx(G,{}),e.jsxs(B,{bg:"background",w:{base:"calc(100vw - 16px)",lg:"540px"},maxW:"unset",children:[e.jsx(J,{children:e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(j,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Aggregator Settings"}),e.jsx(F,{xlinkHref:"#icon-icon_close",onClick:I})]})}),e.jsx(U,{children:e.jsxs(_,{w:"100%",gap:"24px",children:[e.jsxs(A,{w:"100%",justify:"space-between",align:"flex-end",children:[e.jsxs(_,{w:"100%",gap:"8px",align:"flex-start",children:[e.jsxs(A,{gap:"4px",children:[e.jsx(j,{fontSize:"16px",color:"text_caption",fontWeight:"500",children:"Liquidity Sources"}),e.jsx(ue,{type:"liquiditySources"})]}),e.jsx(j,{lineHeight:{base:"12px",lg:"16px"},fontSize:{base:"12px",lg:"16px"},children:"Disable/Enable Liquidity Sources"})]}),e.jsxs(_,{align:"flex-end",flex:"0 0 108px",children:[e.jsx(j,{children:"Select all"}),e.jsxs(A,{justifyContent:"flex-end",h:"16px",gap:"4px",children:[e.jsx(Se,{num:Q((f==null?void 0:f.checked)||0).plus((p==null?void 0:p.checked)||0).toNumber(),total:D}),e.jsx(je,{id:"select-all",isChecked:!!m,onChange:()=>d(!m)})]})]})]}),e.jsxs(te,{flexDir:"column",w:"100%",p:"0",gap:"20px",align:"flex-start",maxH:{base:"calc(100vh - 280px)",lg:"600px"},overflow:"hidden",children:[e.jsx(l.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(z,{title:"Dex",isAllChecked:P,onAllSelect:()=>x(!P),onItemSelect:h,list:M,checkedMap:b,totalNum:f==null?void 0:f.total,checkedNum:f==null?void 0:f.checked})}),e.jsx(ne,{orientation:"horizontal"}),e.jsx(l.Suspense,{fallback:e.jsx(R,{}),children:e.jsx(z,{title:"Other",isAllChecked:w,onAllSelect:()=>E(!w),onItemSelect:h,list:H,checkedMap:b,totalNum:p==null?void 0:p.total,checkedNum:p==null?void 0:p.checked})})]})]})}),e.jsxs(V,{gap:"16px",p:"8px 16px 16px",children:[e.jsx(y,{flex:"1",variant:"outline",p:"0 15px",onClick:o,children:"Cancel"}),e.jsx(y,{flex:"1",onClick:()=>{v(),o()},children:"Save"})]})]})]}),t&&e.jsx(ve,{isOpen:t,onClose:()=>{s(!1),o()},onOk:()=>{v(),s(!1),o()}})]})};function R(){return e.jsx(oe,{w:"100%",templateColumns:{base:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},maxH:{base:"unset",lg:"152px"},overflow:"scroll",gap:"8px",children:[1,2,3,4,5,6,7,8,9].map(i=>e.jsx(ie,{children:e.jsx(le,{w:"100%",h:"36px"})},i))})}const ye=l.memo(ke);export{ye as A,Se as N,je as a,ge as u};
//# sourceMappingURL=AggregatorModal-CVhCACyd.js.map
