<<<<<<< HEAD:dist/assets/liquidity-CtBGukfe.js.map
{"version":3,"file":"liquidity-CtBGukfe.js","sources":["../../src/utils/liquidity.ts"],"sourcesContent":["import { PoolApiInfo } from '@/types'\nimport { d, fixDown, fixRounding } from '@cetus/utils'\n\nexport const getFeeTierList = (list: Partial<PoolApiInfo>[]) => {\n  if (list?.length) {\n    const data = list?.map(item => ({\n      feeDisplay: item?.feeDisplay,\n      feeRate: item?.feeRate,\n      poolAddress: item?.poolAddress,\n      tickSpacing: item.tickSpacing,\n      fee: item.fee,\n      tvl: item?.tvl === '--' ? '0' : item?.tvl,\n      liquidity: item?.object?.liquidity === '--' ? '0' : item?.object?.liquidity\n    }))\n    const total = data?.reduce((sum, current) => d(sum).plus(current.tvl as string), d(0)).toString()\n    if (d(total).gt(0)) {\n      let rates = []\n      rates = data?.map(item => {\n        const rate = d(item?.tvl as string)\n          .div(total)\n          .mul(100)\n          .toString()\n        return rate\n      })\n      return getRates(data, rates)\n    }\n    if (data.length === 1) {\n      return data?.map((item, index) => {\n        const rateValue = '100% select'\n        return {\n          ...item,\n          title: rateValue\n        }\n      })\n    }\n\n    const liquidityTotal = data?.reduce((sum, current) => d(sum).plus((current?.liquidity || '0') as string), d(0)).toString()\n    let rates = []\n    if (d(liquidityTotal).gt(0)) {\n      rates = data?.map(item => {\n        const rate = d(item?.liquidity as string)\n          .div(liquidityTotal)\n          .mul(100)\n          .toString()\n        return rate\n      })\n      return getRates(data, rates)\n    } else {\n      rates = data?.map(item => {\n        return 0\n      })\n      return getRates(data, rates)\n    }\n  } else {\n    return []\n  }\n}\n\nconst getRates = (data: any[], rates: any[]) => {\n  const hasExtremelySmallNumber = rates?.some(item => d(item).lt(0.01) && d(item).gt(0))\n  const zeroNum = rates?.filter(item => d(item).eq(0)).length\n  let zeroCount = zeroNum\n  if (hasExtremelySmallNumber) {\n    rates = rates.map(rate => {\n      if (d(rate).gte(0.01)) {\n        return fixDown(rate, 2)\n      } else {\n        return rate\n      }\n    })\n  } else {\n    rates = rates.map(rate => {\n      return fixRounding(rate, 2)\n    })\n  }\n  if (zeroNum > 0) {\n    rates = rates.map(rate => {\n      if (d(rate).gte(0) && d(rate).lt(0.02)) {\n        return rate\n      } else {\n        if (zeroCount > 0) {\n          zeroCount--\n          return d(rate).sub('0.01').toString()\n        }\n        return rate\n      }\n    })\n  }\n  return data?.map((item, index) => {\n    const rate = rates[index]\n    console.log(rate, 'getRates')\n    const rateValue = d(rate).gte(0) && d(rate).lt(0.01) ? '<0.01 % select' : d(rate).eq(0) ? '0' : rate + '% select'\n    return {\n      ...item,\n      title: rateValue\n    }\n  })\n}\n\nexport const getRangeChartGap = (brushDomain: any) => {\n  const rangeGap = d(brushDomain[1]).minus(brushDomain[0]).abs()\n  let brushDomainGap = rangeGap\n  if (d(brushDomain[0]).lte('0')) return brushDomainGap.toString()\n  while (d(brushDomain[0]).minus(brushDomainGap).lt('0')) {\n    brushDomainGap = brushDomainGap.mul(0.8)\n    if (brushDomainGap.lte(rangeGap.div(10))) break\n  }\n\n  return brushDomainGap.toString()\n}\n"],"names":["getFeeTierList","list","data","item","_a","_b","total","sum","current","d","rates","getRates","index","liquidityTotal","hasExtremelySmallNumber","zeroNum","zeroCount","rate","fixDown","fixRounding","rateValue","getRangeChartGap","brushDomain","rangeGap","brushDomainGap"],"mappings":"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"}
=======
{"version":3,"file":"liquidity-Coufv2Ba.js","sources":["../../src/utils/liquidity.ts"],"sourcesContent":["import { PoolApiInfo } from '@/types'\nimport { d, fixDown, fixRounding } from '@cetus/utils'\n\nexport const getFeeTierList = (list: Partial<PoolApiInfo>[]) => {\n  if (list?.length) {\n    const data = list?.map(item => ({\n      feeDisplay: item?.feeDisplay,\n      feeRate: item?.feeRate,\n      poolAddress: item?.poolAddress,\n      tickSpacing: item.tickSpacing,\n      fee: item.fee,\n      tvl: item?.tvl === '--' ? '0' : item?.tvl,\n      liquidity: item?.object?.liquidity === '--' ? '0' : item?.object?.liquidity\n    }))\n    const total = data?.reduce((sum, current) => d(sum).plus(current.tvl as string), d(0)).toString()\n    if (d(total).gt(0)) {\n      let rates = []\n      rates = data?.map(item => {\n        const rate = d(item?.tvl as string)\n          .div(total)\n          .mul(100)\n          .toString()\n        return rate\n      })\n      return getRates(data, rates)\n    }\n    if (data.length === 1) {\n      return data?.map((item, index) => {\n        const rateValue = '100% select'\n        return {\n          ...item,\n          title: rateValue\n        }\n      })\n    }\n\n    const liquidityTotal = data?.reduce((sum, current) => d(sum).plus((current?.liquidity || '0') as string), d(0)).toString()\n    let rates = []\n    if (d(liquidityTotal).gt(0)) {\n      rates = data?.map(item => {\n        const rate = d(item?.liquidity as string)\n          .div(liquidityTotal)\n          .mul(100)\n          .toString()\n        return rate\n      })\n      return getRates(data, rates)\n    } else {\n      rates = data?.map(item => {\n        return 0\n      })\n      return getRates(data, rates)\n    }\n  } else {\n    return []\n  }\n}\n\nconst getRates = (data: any[], rates: any[]) => {\n  const hasExtremelySmallNumber = rates?.some(item => d(item).lt(0.01) && d(item).gt(0))\n  const zeroNum = rates?.filter(item => d(item).eq(0)).length\n  let zeroCount = zeroNum\n  if (hasExtremelySmallNumber) {\n    rates = rates.map(rate => {\n      if (d(rate).gte(0.01)) {\n        return fixDown(rate, 2)\n      } else {\n        return rate\n      }\n    })\n  } else {\n    rates = rates.map(rate => {\n      return fixRounding(rate, 2)\n    })\n  }\n  if (zeroNum > 0) {\n    rates = rates.map(rate => {\n      if (d(rate).gte(0) && d(rate).lt(0.02)) {\n        return rate\n      } else {\n        if (zeroCount > 0) {\n          zeroCount--\n          return d(rate).sub('0.01').toString()\n        }\n        return rate\n      }\n    })\n  }\n  return data?.map((item, index) => {\n    const rate = rates[index]\n    console.log(rate, 'getRates')\n    const rateValue = d(rate).gte(0) && d(rate).lt(0.01) ? '<0.01 % select' : d(rate).eq(0) ? '0' : rate + '% select'\n    return {\n      ...item,\n      title: rateValue\n    }\n  })\n}\n\nexport const getRangeChartGap = (brushDomain: any) => {\n  const rangeGap = d(brushDomain[1]).minus(brushDomain[0]).abs()\n  let brushDomainGap = rangeGap\n  if (d(brushDomain[0]).lte('0')) return brushDomainGap.toString()\n  while (d(brushDomain[0]).minus(brushDomainGap).lt('0')) {\n    brushDomainGap = brushDomainGap.mul(0.8)\n    if (brushDomainGap.lte(rangeGap.div(10))) break\n  }\n\n  return brushDomainGap.toString()\n}\n"],"names":["getFeeTierList","list","data","item","_a","_b","total","sum","current","d","rates","getRates","index","liquidityTotal","hasExtremelySmallNumber","zeroNum","zeroCount","rate","fixDown","fixRounding","rateValue","getRangeChartGap","brushDomain","rangeGap","brushDomainGap"],"mappings":"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"}
>>>>>>> 0c24c70bb8f4b262d669a2d6c2f695cdc5861cf4:dist/assets/liquidity-Coufv2Ba.js.map
