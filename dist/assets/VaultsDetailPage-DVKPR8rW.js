import{a as f,j as r,F as Q,V as P,T as v,p as H,H as j,f as R,I as at,C as ae,a9 as de,R as z,a6 as le,ap as lt,aa as ct,ar as pt,q as xt}from"./vendor-BFGDaAdA.js";import{V as dt,a as gt,g as ht,u as ut,h as mt}from"./VaultsAprBlock-BN9YfW1L.js";import{a as Ce,u as ft,b as yt,V as bt}from"./VaultsAction-1iPBUSj9.js";import{u as Ee}from"./useVaultsHoldings-BGVVhJMw.js";import{u as vt}from"./swapWidget-CZnUYlui.js";import{d as D,ap as fe,f as C,q as ye,aq as jt,a as B,u as we,ad as Ae,ar as St,as as _e,B as $,at as wt,j as Pe,au as At,O as k,V as F,Z as ve,e as _t,I as Pt,s as ke,h as Dt,X as Tt,C as Fe,k as zt,a1 as Re,v as He}from"./index-CJa1Q5Eu.js";import{B as Ot}from"./BackButton-DAKpsgxx.js";import{N as Ne}from"./NoData-DtiZhmrM.js";import{u as Ct}from"./useAccountBalance-CeUdpiKX.js";import{u as Et}from"./useInterval-BQqGpXj5.js";import{a as Ft,b as Rt,p as De,c as Ht}from"./EmptyTooltip-CBk2eu5X.js";import{A as Bt,a as Lt,T as Mt}from"./TvlChart-Ck6iJdkP.js";import{X as Te,Y as ce,R as Ke}from"./YAxis-CJfdsBer.js";import{S as Be,a as $t,b as be,L as I,c as Wt,A as kt,i as se,d as Nt,e as Ue,E as Kt,h as ne,j as Ut,k as Gt,C as Yt,l as Y,m as qt,G as Xt,n as Zt,o as Le,u as Jt,g as Qt,B as Ge,f as It,T as Ye,p as qe}from"./generateCategoricalChart-BLse9pyp.js";import{L as V,a as Vt}from"./LineChart-BnijYEMg.js";import{u as er}from"./useToken-DcLYM1a2.js";import{d as tr}from"./useWrapPoolData-6jgPzxLW.js";import{H as oe}from"./HTextLabelBox-BT9c1ibT.js";import{V as q}from"./VTextLabelBox-DTl1JdvO.js";import{S as L,A as Me}from"./SingleTokenInfo-DvfSTCmR.js";import{i as rr}from"./icon_currentprice@2x-DeObnx8l.js";import{A as ir,C as sr}from"./VaultsRewardsBlock-CGaX927I.js";import{T as nr}from"./TooltipIcon-Pt406Jfg.js";import{P as or}from"./PoweredByHaedal-Bke0Bj0w.js";import"./useGetPoolList-sKGYxkhS.js";import"./useTokenBalance-CeWcIfEX.js";import"./useFavoritePool-Bb9nHdPu.js";import"./usePriceImpact-DhEpoyWT.js";import"./global-DaL79zhi.js";import"./index-BleV78I3.js";import"./useSwapHelper-BTHj2AcR.js";import"./RefreshButton-D05mNjjf.js";import"./TradeConfirmAmountInfo-CcbHRYfi.js";import"./TotalAmount-rygmslhD.js";import"./msafe-oYBkW7LJ.js";import"./useTransaction-Cc765MUE.js";import"./useTrack-9gGG2G-b.js";import"./useSigner-B8FtJCBW.js";import"./TradeInputGroup-DATFBLnD.js";import"./_getAllKeysIn-9Vk7AOo9.js";import"./CheckBox-DKraExiP.js";import"./RemoveBlock-OIfyDiw9.js";import"./DepositRatio-DbH1JwsR.js";import"./FreshProgressV2-UCJ6Olyb.js";import"./ErrorTips-miVRYnRY.js";import"./usePositionList-B4CPJwxw.js";import"./useNotifiSubscription-B8rUUuCQ.js";import"./useNotifiAlerts-BPznGicf.js";import"./useXCetusHelper-DPbVtYc4.js";import"./index-D1m9ooSc.js";import"./debounce-B8kzHASh.js";import"./index-BLCSsYSf.js";import"./index-BltWaZyP.js";import"./usePosAdd-D0ti9xh9.js";import"./index-5XWuGyiv.js";import"./ExpendItem-C_e8gEdY.js";import"./PositionStatus-NG03D-02.js";import"./RangeValue-DSKhYm1I.js";import"./useFindBestRouting-u1qIkehW.js";import"./linear-DYpwdEgO.js";import"./CopyButton-YuSxCk7k.js";function ar(e){const{displayMaxPrice:t,displayMinPrice:s,displayPrice:i,isLoading:n}=e,[o,l]=f.useState(0),p=f.useRef(null),m=f.useMemo(()=>!(s&&t&&i),[t,s,i]);f.useEffect(()=>{const d=()=>{p.current&&l(p.current.offsetWidth)};d();const g=new ResizeObserver(d);return p.current&&g.observe(p.current),()=>{p.current&&g.unobserve(p.current)}},[m]);const x=f.useMemo(()=>{if(t==="∞")return"center";if(i&&s&&t){if(D(i).greaterThanOrEqualTo(t))return"end";if(D(s).greaterThanOrEqualTo(i))return"start"}return"center"},[i,s,t]),a=f.useMemo(()=>{if(t==="∞")return"0px";if(i&&s&&t&&D(o).gt(0)&&D(i).lessThanOrEqualTo(t)&&D(i).greaterThanOrEqualTo(s)){const d=D(i).sub(s).div(D(t).sub(D(s))).toString();return`${D(o).mul(d).toFixed(0)}px`}return"0px"},[i,s,t,o]);return r.jsx(r.Fragment,{children:m?r.jsx(Q,{h:"202px",width:"100%",align:"center",position:"relative",children:r.jsx(R,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:r.jsx(de,{})})}):r.jsxs(Q,{w:"88%",direction:"column",alignItems:x,ref:p,justifyContent:"flex-end",children:[r.jsxs(P,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",position:"absolute",left:a,top:"62px",children:[r.jsxs(P,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[r.jsx(v,{fontSize:"xs",h:"14px",children:"Current Price"}),n?r.jsx(Q,{h:"18px",align:"center",children:r.jsx(H,{})}):r.jsx(j,{children:r.jsx(v,{fontSize:"16px",color:"text_highlight",children:r.jsx(fe,{value:C(i,6,!0,ye.ROUND_DOWN)})})})]}),r.jsxs(P,{zIndex:"100",children:[r.jsx(R,{w:"2px",h:"98px",bg:"#76C8FF"}),r.jsx(at,{src:rr,w:"30px",h:"30px",mt:"-18px"})]})]}),r.jsx(ae,{zIndex:"99",position:"absolute",top:"164px",pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"90%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:r.jsx(ae,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),r.jsxs(j,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"80%"},position:"absolute","z-index":"100",bottom:"22px",children:[r.jsxs(P,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[r.jsx(v,{fontSize:"12px",children:"Min Price"}),n?r.jsx(Q,{h:"18px",align:"center",children:r.jsx(H,{})}):r.jsx(v,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:r.jsx(fe,{value:C(s,6,!0,ye.ROUND_DOWN)})})]}),r.jsxs(P,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[r.jsx(v,{fontSize:"12px",children:"Max Price"}),n?r.jsx(Q,{h:"18px",align:"center",children:r.jsx(H,{})}):r.jsx(v,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:r.jsx(fe,{value:C(t,6,!0,ye.ROUND_DOWN)})})]})]})]})})}function X(e){"@babel/helpers - typeof";return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(e)}function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cr(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Je(i.key),i)}}function pr(e,t,s){return t&&cr(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xr(e,t,s){return t=pe(t),dr(e,Xe()?Reflect.construct(t,s||[],pe(e).constructor):t.apply(e,s))}function dr(e,t){if(t&&(X(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gr(e)}function gr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xe=function(){return!!e})()}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},pe(e)}function hr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},je(e,t)}function Ze(e,t,s){return t=Je(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Je(e){var t=ur(e,"string");return X(t)=="symbol"?t:t+""}function ur(e,t){if(X(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t);if(X(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ge=function(e){function t(){return lr(this,t),xr(this,t,arguments)}return hr(t,e),pr(t,[{key:"render",value:function(){return null}}])}(z.Component);Ze(ge,"displayName","ZAxis");Ze(ge,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var mr=["option","isActive"];function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},ee.apply(this,arguments)}function fr(e,t){if(e==null)return{};var s=yr(e,t),i,n;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function yr(e,t){if(e==null)return{};var s={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;s[i]=e[i]}return s}function br(e){var t=e.option,s=e.isActive,i=fr(e,mr);return typeof t=="string"?z.createElement(Be,ee({option:z.createElement($t,ee({type:t},i)),isActive:s,shapeType:"symbols"},i)):z.createElement(Be,ee({option:t,isActive:s,shapeType:"symbols"},i))}function Z(e){"@babel/helpers - typeof";return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(e)}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},te.apply(this,arguments)}function $e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,i)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?$e(Object(s),!0).forEach(function(i){M(e,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$e(Object(s)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i))})}return e}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ie(i.key),i)}}function jr(e,t,s){return t&&We(e.prototype,t),s&&We(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sr(e,t,s){return t=xe(t),wr(e,Qe()?Reflect.construct(t,s||[],xe(e).constructor):t.apply(e,s))}function wr(e,t){if(t&&(Z(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ar(e)}function Ar(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qe=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},xe(e)}function _r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Se(e,t)}function Se(e,t){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},Se(e,t)}function M(e,t,s){return t=Ie(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ie(e){var t=Pr(e,"string");return Z(t)=="symbol"?t:t+""}function Pr(e,t){if(Z(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var i=s.call(e,t);if(Z(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var he=function(e){function t(){var s;vr(this,t);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return s=Sr(this,t,[].concat(n)),M(s,"state",{isAnimationFinished:!1}),M(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),M(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),M(s,"id",Jt("recharts-scatter-")),s}return _r(t,e),jr(t,[{key:"renderSymbolsStatically",value:function(i){var n=this,o=this.props,l=o.shape,p=o.activeShape,m=o.activeIndex,x=be(this.props,!1);return i.map(function(a,d){var g=m===d,u=g?p:l,b=E(E({},x),a);return z.createElement(I,te({className:"recharts-scatter-symbol",key:"symbol-".concat(a==null?void 0:a.cx,"-").concat(a==null?void 0:a.cy,"-").concat(a==null?void 0:a.size,"-").concat(d)},Wt(n.props,a,d),{role:"img"}),z.createElement(br,te({option:u,isActive:g,key:"symbol-".concat(d)},b)))})}},{key:"renderSymbolsWithAnimation",value:function(){var i=this,n=this.props,o=n.points,l=n.isAnimationActive,p=n.animationBegin,m=n.animationDuration,x=n.animationEasing,a=n.animationId,d=this.state.prevPoints;return z.createElement(kt,{begin:p,duration:m,isActive:l,easing:x,from:{t:0},to:{t:1},key:"pie-".concat(a),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var u=g.t,b=o.map(function(y,A){var S=d&&d[A];if(S){var _=se(S.cx,y.cx),w=se(S.cy,y.cy),O=se(S.size,y.size);return E(E({},y),{},{cx:_(u),cy:w(u),size:O(u)})}var c=se(0,y.size);return E(E({},y),{},{size:c(u)})});return z.createElement(I,null,i.renderSymbolsStatically(b))})}},{key:"renderSymbols",value:function(){var i=this.props,n=i.points,o=i.isAnimationActive,l=this.state.prevPoints;return o&&n&&n.length&&(!l||!Nt(l,n))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(n)}},{key:"renderErrorBar",value:function(){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var n=this.props,o=n.points,l=n.xAxis,p=n.yAxis,m=n.children,x=Ue(m,Kt);return x?x.map(function(a,d){var g=a.props,u=g.direction,b=g.dataKey;return z.cloneElement(a,{key:"".concat(u,"-").concat(b,"-").concat(o[d]),data:o,xAxis:l,yAxis:p,layout:u==="x"?"vertical":"horizontal",dataPointFormatter:function(A,S){return{x:A.cx,y:A.cy,value:u==="x"?+A.node.x:+A.node.y,errorVal:ne(A,S)}}})}):null}},{key:"renderLine",value:function(){var i=this.props,n=i.points,o=i.line,l=i.lineType,p=i.lineJointType,m=be(this.props,!1),x=be(o,!1),a,d;if(l==="joint")a=n.map(function(w){return{x:w.cx,y:w.cy}});else if(l==="fitting"){var g=Ut(n),u=g.xmin,b=g.xmax,y=g.a,A=g.b,S=function(O){return y*O+A};a=[{x:u,y:S(u)},{x:b,y:S(b)}]}var _=E(E(E({},m),{},{fill:"none",stroke:m&&m.fill},x),{},{points:a});return z.isValidElement(o)?d=z.cloneElement(o,_):Gt(o)?d=o(_):d=z.createElement(Yt,te({},_,{type:p})),z.createElement(I,{className:"recharts-scatter-line",key:"recharts-scatter-line"},d)}},{key:"render",value:function(){var i=this.props,n=i.hide,o=i.points,l=i.line,p=i.className,m=i.xAxis,x=i.yAxis,a=i.left,d=i.top,g=i.width,u=i.height,b=i.id,y=i.isAnimationActive;if(n||!o||!o.length)return null;var A=this.state.isAnimationFinished,S=jt("recharts-scatter",p),_=m&&m.allowDataOverflow,w=x&&x.allowDataOverflow,O=_||w,c=Y(b)?this.id:b;return z.createElement(I,{className:S,clipPath:O?"url(#clipPath-".concat(c,")"):null},_||w?z.createElement("defs",null,z.createElement("clipPath",{id:"clipPath-".concat(c)},z.createElement("rect",{x:_?a:a-g/2,y:w?d:d-u/2,width:_?g:g*2,height:w?u:u*2}))):null,l&&this.renderLine(),this.renderErrorBar(),z.createElement(I,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||A)&&qt.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(i,n){return i.animationId!==n.prevAnimationId?{prevAnimationId:i.animationId,curPoints:i.points,prevPoints:n.curPoints}:i.points!==n.curPoints?{curPoints:i.points}:null}}])}(f.PureComponent);M(he,"displayName","Scatter");M(he,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Xt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});M(he,"getComposedData",function(e){var t=e.xAxis,s=e.yAxis,i=e.zAxis,n=e.item,o=e.displayedData,l=e.xAxisTicks,p=e.yAxisTicks,m=e.offset,x=n.props.tooltipType,a=Ue(n.props.children,Zt),d=Y(t.dataKey)?n.props.dataKey:t.dataKey,g=Y(s.dataKey)?n.props.dataKey:s.dataKey,u=i&&i.dataKey,b=i?i.range:ge.defaultProps.range,y=b&&b[0],A=t.scale.bandwidth?t.scale.bandwidth():0,S=s.scale.bandwidth?s.scale.bandwidth():0,_=o.map(function(w,O){var c=ne(w,d),T=ne(w,g),h=!Y(u)&&ne(w,u)||"-",N=[{name:Y(t.dataKey)?n.props.name:t.name||t.dataKey,unit:t.unit||"",value:c,payload:w,dataKey:d,type:x},{name:Y(s.dataKey)?n.props.name:s.name||s.dataKey,unit:s.unit||"",value:T,payload:w,dataKey:g,type:x}];h!=="-"&&N.push({name:i.name||i.dataKey,unit:i.unit||"",value:h,payload:w,dataKey:u,type:x});var J=Le({axis:t,ticks:l,bandSize:A,entry:w,index:O,dataKey:d}),W=Le({axis:s,ticks:p,bandSize:S,entry:w,index:O,dataKey:g}),re=h!=="-"?i.scale(h):y,K=Math.sqrt(Math.max(re,0)/Math.PI);return E(E({},w),{},{cx:J,cy:W,x:J-K,y:W-K,xAxis:t,yAxis:s,zAxis:i,width:2*K,height:2*K,size:re,node:{x:c,y:T,z:h},tooltipPayload:N,tooltipPosition:{x:J,y:W},payload:w},a&&a[O]&&a[O].props)});return E({points:_},m)});var Dr=Qt({chartName:"ComposedChart",GraphicalChild:[V,Bt,Ge,he],axisComponents:[{axisType:"xAxis",AxisComp:Te},{axisType:"yAxis",AxisComp:ce},{axisType:"zAxis",AxisComp:ge}],formatAxisMap:It});function Tr({data:e=[],dateType:t,quoteCoin:s}){console.log("🚀🚀🚀 ~ ApyAndFeesChart.tsx:15 ~ ApyAndFeesChart ~ data:",e),console.log("🚀🚀🚀 ~ ApyAndFeesChart.tsx:15 ~ ApyAndFeesChart ~ quoteCoin:",s);const[i,n]=f.useState({apy:!1,lp_fee:!1}),o=[{value:"Cumulative Yields",type:"line",id:"lp_fee",color:"#07EBAD"},{value:"APY",type:"line",id:"apy",color:"#75C8FF"}],l=f.useMemo(()=>{if(e.length){const a=Math.min(...e.map(y=>y.apy)),d=Math.max(...e.map(y=>y.apy)),g=D(d).mul(1.05),u=D(a),b=g.sub(u).div(4);return Array.from({length:5},(y,A)=>u.add(b.mul(A)).toNumber())}return[]},[e]),p=f.useMemo(()=>{if(e.length){const a=Math.min(...e.map(y=>y.lp_fee)),d=Math.max(...e.map(y=>y.lp_fee)),g=D(d).mul(1.05),u=D(a),b=g.sub(u).div(4);return Array.from({length:5},(y,A)=>u.add(b.mul(A)).toNumber())}return[]},[e]),m=(a,d)=>{const g=new Date(d*1e3),u=g.getUTCHours(),b=g.getUTCMinutes(),y=g.getUTCDate(),A=g.getUTCMonth()+1;if(a<24||t==="24H"){const S=u>=12?"PM":"AM",_=u%12||12;return`${String(_).padStart(2,"0")}:${String(b).padStart(2,"0")} ${S}`}return`${A}/${y}`},{isApp:x}=B();return r.jsx(Ke,{width:"100%",height:"100%",children:r.jsxs(Dr,{data:e,margin:{top:0,left:10,right:28,bottom:5},children:[r.jsx(Te,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:a=>m(e.length,a),minTickGap:(e==null?void 0:e.length)>8?36:void 0,interval:(e==null?void 0:e.length)<=8?0:void 0}),r.jsx(ce,{yAxisId:"bar",xAxisId:"x",fontSize:"12px",orientation:"left",width:50,tickLine:!1,position:"insideRight",ticks:l,domain:[l[0],l[l.length-1]],tickFormatter:a=>(console.log("🚀 ~ ApyAndFeesChart 323~ value:",a),C(a,2)),tick:r.jsx(Ft,{})}),r.jsx(ce,{yAxisId:"line",orientation:"right",fontSize:"12px",tickLine:!1,ticks:p,domain:[p[0],p[p.length-1]],tick:r.jsx(Rt,{isRight:!0,isApp:x,symbol:s==null?void 0:s.symbol})}),r.jsx(Ye,{content:r.jsx(Lt,{symbol:s==null?void 0:s.symbol})}),r.jsx(qe,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:-32,right:0,fontSize:12},payload:o}),r.jsx(Ge,{yAxisId:"bar",barSize:1,dataKey:"apy",fill:"#75C8FF",isAnimationActive:!1,hide:i.apy}),r.jsx(V,{yAxisId:"line",type:"monotone",dataKey:"lp_fee",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},dot:!1,isAnimationActive:!1,hide:i.lp_fee})]})})}function zr(){const{fetchByApi:e}=we();return{getVaultApyAndFeesHistogram:async s=>{console.log("🚀 ~ getVaultHistogram ~ params:",s);const i={...s};i.dateType="hour";try{const n=De(i,Ae),o=await e(St,"GET",n);return console.log("🚀 ~ getVaultApyAndFeesHistogram ~ res:",o),o!=null&&o.list?{list:o==null?void 0:o.list.map((p,m)=>{const x=p.Timestamp*1e3,a=new Date(x),d=Number(a.toISOString().slice(5,7));return{apy:+p.value.apy*100,lp_fee:+p.value.lp_fee,date:p.Timestamp,tooltipTime:_e(x)}}),quote_type:o==null?void 0:o.quote_type}:[]}catch(n){return console.error("🚀 ~ useGetHistogramData ~ getHistogramData Error:",n),[]}}}}function Or({isRefresh:e,vaultsId:t}){const[s,i]=f.useState(!1),[n,o]=f.useState(),[l,p]=f.useState(),{isApp:m}=B(),{getTokenInfo:x}=er(),a=async u=>{if(u)try{const b=await x(u);console.log("🚀 ~ fetchToken ~ coinInfo:",u,b),b&&p(b)}catch(b){console.error("Error fetching token info:",b)}},{getVaultApyAndFeesHistogram:d}=zr(),g=async()=>{i(!0);const u=Date.now(),b=86400,y=m?2*b:7*b,A=y?String(Math.floor(u/1e3-y)):0,{list:S,quote_type:_}=await d({vaultID:t,beginTimestamp:A,endTimestamp:String(Math.floor(u/1e3))});a(_),o(S),console.log("🚀 ~ fetchPricerangeHistogram ~ tvl_res:",_,S),i(!1)};return f.useEffect(()=>{t&&g()},[t]),f.useEffect(()=>{e&&g()},[e]),r.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:m?"12px":"20px 8px 20px 20px",children:[r.jsx(j,{justify:"space-between",children:r.jsx(j,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:r.jsx(v,{fontWeight:"500",fontSize:"14px",children:"APY & Yields"})})}),r.jsx(R,{w:"100%",h:"260px",mt:"20px",children:r.jsxs(R,{w:"100%",h:"260px",position:"relative",children:[s&&r.jsx(R,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:r.jsx(de,{})}),r.jsx(Tr,{data:n,dateType:"",quoteCoin:l})]})})]})}function Cr({payload:e,label:t}){return e&&e.length&&r.jsxs(P,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[r.jsx(v,{fontSize:"12px",children:e[0].payload.tooltipTime}),r.jsxs(j,{textAlign:"left",children:[r.jsx(v,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),r.jsx(v,{color:"#68FFD8",fontSize:"12px",children:C(e[0].payload.real)})]}),r.jsxs(j,{children:[r.jsx(v,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),r.jsxs(v,{color:"#6FBCF0",fontSize:"12px",children:[C(e[0].payload.lower),"-",C(e[0].payload.upper)]})]})]})}function Er({data:e=[],dateType:t,isTabLoading:s}){const i=f.useMemo(()=>e,[e]),[n,o]=f.useState({lower:!1,upper:!1,real:!1}),l=f.useMemo(()=>{if(i.length){const x=Math.min(...i.map(b=>b.lower)),a=Math.max(...i.map(b=>b.upper)),d=D(a).mul(1.1),g=D(x).mul(.9),u=d.sub(g).div(4);return Array.from({length:5},(b,y)=>g.add(u.mul(y)).toNumber())}return[]},[i]),p=(x,a)=>{const d=new Date(a*1e3),g=d.getUTCHours(),u=d.getUTCMinutes(),b=d.getUTCDate(),y=d.getUTCMonth()+1;if(x<24||t==="24H"){const A=g>=12?"PM":"AM",S=g%12||12;return`${String(S).padStart(2,"0")}:${String(u).padStart(2,"0")} ${A}`}return`${y}/${b}`},{isApp:m}=B();return r.jsx(Ke,{width:"100%",height:"100%",children:r.jsxs(Vt,{data:i,margin:{top:0,left:10,right:28,bottom:5},children:[r.jsx(Te,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:x=>s?"":p(i.length,x),minTickGap:(i==null?void 0:i.length)>8?36:void 0,interval:(i==null?void 0:i.length)<=8?0:void 0}),r.jsx(ce,{fontSize:"12px",ticks:l,domain:[l[0],l[l.length-1]],axisLine:!1,tickLine:!1,tickFormatter:x=>C(x,4),tick:r.jsx(Ht,{})}),r.jsx(Ye,{content:r.jsx(Cr,{})}),r.jsx(qe,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:m?-8:-41,right:m?4:100,fontSize:12},formatter:x=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[x]||x}),r.jsx(V,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:n.real,dot:!1,isAnimationActive:!1}),r.jsx(V,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:n.lower,isAnimationActive:!1}),r.jsx(V,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:n.upper,isAnimationActive:!1})]})})}function Fr(){const{fetchByApi:e}=we();return{getPriceRangeData:async s=>{try{const i=De(s,Ae),n=await e(wt,"GET",i);return n!=null&&n.list?n.list.map(o=>{const l=o.Timestamp*1e3,p=new Date(l);return{lower:o.value.lower,upper:o.value.upper,real:o.value.real,date:o.Timestamp,xAxis:tr(p.toISOString().slice(0,10)),tooltipTime:_e(l),hour:p.getHours()}}):[]}catch(i){return console.error("🚀 ~ useGetPriceRangeData ~ getPriceRangeData Error:",i),[]}}}}function Rr({isRefresh:e,vaultsId:t,isReverse:s}){const[i,n]=f.useState(!1),{getPriceRangeData:o}=Fr(),[l,p]=f.useState(),m=[{label:"24H"},{label:"1W"}],[x,a]=f.useState("1W"),[d,g]=f.useState(!1),u=async y=>{const A=Date.now(),_=String(Math.floor(A/1e3-86400));try{n(!0);const O=(await o({vaultID:t,dateType:y=="24H"?"min":"hour",beginTimestamp:y=="24H"?_:"",endTimestamp:D(new Date().getTime()).toFixed(0)})).map(c=>{const T=s?D(1).div(D(c.upper)).toString():c.lower,h=s?D(1).div(D(c.lower)).toString():c.upper,N=s?D(1).div(c.real).toString():c.real;return{...c,lower:T,upper:h,real:N}});p(O),g(!1),n(!1)}catch(w){n(!1),g(!1),console.log("🚀🚀🚀 ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",w)}};f.useEffect(()=>{t&&u(x)},[t,x]),f.useEffect(()=>{e&&u(x)},[e]);const{isApp:b}=B();return r.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:b?"12px":"20px 8px 20px 20px",children:[r.jsx(j,{justify:"space-between",children:r.jsxs(j,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[r.jsx(v,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),r.jsx(Pe,{type:"outlineTab",tabList:m,currentTab:x,handleChangeTab:y=>{g(!0),a(y.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),r.jsx(R,{w:"100%",h:"260px",mt:"20px",children:r.jsxs(R,{w:"100%",h:"260px",position:"relative",children:[i&&r.jsx(R,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:r.jsx(de,{})}),r.jsx(Er,{data:l,dateType:x,isTabLoading:d})]})})]})}function Hr(){const{fetchByApi:e}=we(),t=async i=>{console.log("🚀 ~ getVaultHistogram ~ params:",i);const n={...i};n.dateType=i.type=="day"||i.type=="week"?"hour":"day",delete n.type;try{const o=De(n,Ae),l=await e(At,"GET",o);return l!=null&&l.list?l==null?void 0:l.list.map((p,m)=>{var u;const x=p.Timestamp*1e3,a=new Date(x),d=Number(a.toISOString().slice(5,7)),g=s((u=l==null?void 0:l.list)==null?void 0:u.length,a,i==null?void 0:i.type,m);return{num:+p.value,date:p.Timestamp,xAxis:g,tooltipTime:_e(x)}}):[]}catch(o){return console.error("🚀 ~ useGetHistogramData ~ getHistogramData Error:",o),[]}},s=(i,n,o="D",l)=>{const p=o=="D"||o=="day"?"D":o=="W"||o=="week"?"W":"M";console.log("🚀 ~ getXData ~ type:",o);const m=n,x=m.getUTCHours();let a=m.getUTCHours();const d=m.getUTCMinutes(),g=m.getUTCDate(),u=m.getUTCMonth()+1,b=a>=12?"PM":"AM";if(a=a%12||12,p=="D")return`${String(a).padStart(2,"0")}:${String(d).padStart(2,"0")} ${b}`;if(p=="M")return`${u}/${g}`;if(console.log("🚀 ~ getXData ~ noShowHours:",x),i<24){const y=Math.floor(i/2);if(console.log("🚀 ~ getXData ~ step:",i,l,l%y===0,y),l%y===0)return`${u}/${g}`}return i>=24&&i<120&&(x===0||x===12)?`${u}/${g}`:i>=120&&x===0&&d===0?`${u}/${g}`:""};return{getVaultHistogram:t}}function Br({isRefresh:e,vaultsId:t}){const s=[{label:"24H"},{label:"1W"},{label:"1M"}],[i,n]=f.useState(!0),[o,l]=f.useState("24H"),{getVaultHistogram:p}=Hr(),[m,x]=f.useState([]),[a,d]=f.useState(),[g,u]=f.useState(),b=async()=>{var T,h;n(!0);const S=Date.now(),_=86400,w=o=="24H"?1*_:o=="1W"?7*_:30*_,O=w?String(Math.floor(S/1e3-w)):0,c=await p({type:o=="24H"?"day":o=="1W"?"week":"month",vaultID:t,beginTimestamp:O,endTimestamp:String(Math.floor(S/1e3))});u((T=c[c.length-1])==null?void 0:T.num),d((h=c[c.length-1])==null?void 0:h.num),console.log("🚀 ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",c),x(c),n(!1)},y=S=>{console.log("🚀 ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",S),d(S?S.num:g)};f.useEffect(()=>{t&&b()},[o,t]),f.useEffect(()=>{e&&b()},[e]);const{isApp:A}=B();return r.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:A?"12px":"20px",children:[r.jsxs(j,{justify:"space-between",children:[a?r.jsxs(P,{align:"flex-start",gap:"4px",children:[r.jsx(v,{fontWeight:"500",fontSize:"12px",children:"TVL"}),r.jsx(v,{fontSize:"16px",color:"text_caption",mt:"8px",children:k(a,2)})]}):r.jsx(P,{align:"flex-start",gap:"4px"}),r.jsx(Pe,{type:"outlineTab",tabList:s,currentTab:o,handleChangeTab:S=>l(S.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),r.jsx(R,{w:"100%",h:"260px",mt:"20px",children:r.jsxs(R,{w:"100%",h:"260px",position:"relative",children:[i&&r.jsx(R,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:r.jsx(de,{})}),m.length>0&&r.jsx(Mt,{data:m,onChangeValue:y,isShowYAxis:!0,toolTipsType:"tvl"}),!i&&m.length===0&&r.jsx(Ne,{type:"nodata"})]})})]})}function Lr({balanceDisplay:e,holdCoinAmounts:t,lpTokenInfo:s,displayTokenA:i,displayTokenB:n,sharePoolRate:o,totalHolding:l,holdCoinAValue:p,holdCoinBValue:m}){const{isApp:x}=B();return r.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:r.jsxs(P,{w:"100%",gap:{base:"24px",lg:"8px"},children:[r.jsxs(j,{w:"100%",justifyContent:"space-between",children:[r.jsx(j,{children:r.jsx(v,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),r.jsxs(j,{gap:"8px",children:[r.jsx(v,{whiteSpace:"nowrap",children:"Your share of pool"}),r.jsx(v,{color:"text_highlight",fontWeight:"500",children:o?`${o}`:"-"})]})]}),x?r.jsxs(P,{w:"100%",gap:"16px",children:[r.jsx(oe,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:r.jsxs(j,{children:[r.jsx(L,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),r.jsxs(v,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[e||"-"," LP"]})]}),subValue:r.jsx(v,{children:e?l:"-"}),subValueStyle:{fontSize:"13px"}}),r.jsx(oe,{label:F(i==null?void 0:i.symbol,10),labelStyle:{fontSize:"13px"},value:r.jsxs(j,{children:[r.jsx(L,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t!=null&&t.displayCoinA?r.jsx(v,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${t!=null&&t.displayCoinA?t==null?void 0:t.displayCoinA:"-"} ${F(i==null?void 0:i.symbol,10)}`}):r.jsx(H,{w:"100px",h:"14px"})]}),subValue:p?k(p,2):r.jsx(H,{w:"80px",h:"14px"}),subValueStyle:{fontSize:"13px"}}),r.jsx(oe,{label:F(n==null?void 0:n.symbol,10),labelStyle:{fontSize:"13px"},value:r.jsxs(j,{children:[r.jsx(L,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t!=null&&t.displayCoinB?r.jsx(v,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${t!=null&&t.displayCoinB?t==null?void 0:t.displayCoinB:"-"} ${F(n==null?void 0:n.symbol,10)}`}):r.jsx(H,{w:"100px",h:"14px"})]}),subValue:m?k(m,2):r.jsx(H,{w:"80px",h:"14px"}),subValueStyle:{fontSize:"13px"}})]}):r.jsxs(r.Fragment,{children:[r.jsxs(le,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[r.jsx(v,{children:"LP Token Balance"}),r.jsxs(v,{color:"text_caption",ml:"4px",fontWeight:"500",children:[e||"-"," LP"]}),r.jsx(v,{children:e?l:"-"})]}),r.jsxs(j,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[r.jsxs(P,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[r.jsxs(j,{children:[r.jsx(L,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),r.jsx(v,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:F(i==null?void 0:i.symbol,10)})]}),r.jsx(q,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${t==null?void 0:t.displayCoinA} ${F(i==null?void 0:i.symbol,10)}`,isTitleLoading:!(t!=null&&t.displayCoinA),titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:t!=null&&t.displayCoinA?k(p||0,2):r.jsx(H,{w:"80px",h:"14px"}),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),r.jsxs(P,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[r.jsxs(j,{children:[r.jsx(v,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:F(n==null?void 0:n.symbol,10)}),r.jsx(L,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),r.jsx(q,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:t!=null&&t.displayCoinB?`${t==null?void 0:t.displayCoinB} ${F(n==null?void 0:n.symbol,10)}`:r.jsx(H,{w:"100px",h:"14px"}),titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:t!=null&&t.displayCoinB?k(m||0,2):r.jsx(H,{w:"80px",h:"14px"}),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),r.jsx($,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:r.jsxs(P,{justify:"center",gap:"4px",children:[r.jsx(L,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),r.jsx(v,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function Mr(e){const{price:t,changeSide:s}=e;return{displayPrice:f.useMemo(()=>{if(t)return s?C(ve(1).div(t).toString(),10,!0).toString():t},[t,s])}}function $r(e){const{minPrice:t,maxPrice:s,changeSide:i}=e,n=f.useMemo(()=>{if(t&&s)return i?t==="0"||t==="∞"?"0":C(ve(1).div(s).toString(),10,!0).toString():t},[t,s,i]),o=f.useMemo(()=>{if(t&&s)return i?s==="0"||s==="∞"?"∞":C(ve(1).div(t).toString(),10,!0).toString():s},[t,s,i]);return{displayMinPrice:n,displayMaxPrice:o}}function Wr({currentPrice:e,minPrice:t,maxPrice:s,displayTokenA:i,displayTokenB:n}){const[o,l]=f.useState(!1),{displayPrice:p}=Mr({price:e,changeSide:o}),{displayMaxPrice:m,displayMinPrice:x}=$r({minPrice:t,maxPrice:s,changeSide:o}),a=f.useMemo(()=>o?i:n,[i,n,o]),d=f.useMemo(()=>a!=null&&a.logo_url?a==null?void 0:a.logo_url:"",[a==null?void 0:a.logo_url]);return r.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},position:"relative",height:"290px",children:r.jsxs(P,{w:"100%",children:[r.jsxs(j,{w:"100%",justifyContent:"space-between",mb:"6px",children:[r.jsx(v,{fontSize:"16px",color:"text_caption",children:"Position Range"}),r.jsxs(j,{gap:"0px",children:[d&&r.jsx(_t,{imageUrl:d,imageStyle:{w:"20px",h:"20px"}}),r.jsxs(v,{color:"text_caption",children:[" ",a==null?void 0:a.symbol]}),r.jsxs(j,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>l(!o),children:[r.jsx(v,{fontSize:"12px",children:" Base coin"}),r.jsx(Pt,{xlinkHref:"#icon-icon_swap1"})]})]})]}),r.jsx(ar,{displayPrice:p,displayMaxPrice:m,displayMinPrice:x})]})})}function kr({displayAmountA:e,displayAmountB:t,displayPercentA:s,displayPercentB:i,displayTokenA:n,displayTokenB:o,vaultsCoinAValue:l,vaultsCoinBValue:p,depositRatio:m,hardCapUSD:x,vaultTvl:a}){const{isApp:d}=B();return r.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:r.jsxs(P,{w:"100%",gap:"0px",children:[r.jsxs(j,{w:"100%",justifyContent:"space-between",children:[r.jsx(v,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),x&&r.jsx(ir,{depositRatio:m,hardCapUSD:x,vaultTvl:a,label:"Capacity",value:ke(x,"$")})]}),r.jsxs(j,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[r.jsxs(j,{children:[r.jsx(L,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!d}),r.jsx(q,{wrapStyle:{gap:"4px"},title:F(n==null?void 0:n.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${s}%`,isLoading:!s,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),r.jsx(lt,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:Number(s),bg:Number(s)!==0&&Number(i)!==0?"quote_green":"process_bg_gray",sx:{'div[role="progressbar"]':{bg:"primary"}}}),r.jsxs(j,{children:[r.jsx(q,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:F(o==null?void 0:o.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${i}%`,isLoading:!i,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),r.jsx(L,{token:o,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),r.jsxs(j,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[r.jsx(q,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:`${C(e,6)} ${F(n==null?void 0:n.symbol,10)}`,isTitleLoading:!e,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:k(l,2),isLoading:!l,valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),r.jsx(q,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:`${C(t,6)} ${F(o==null?void 0:o.symbol,10)}`,isTitleLoading:!t,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:k(p,2),isLoading:!p,valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function Nr({apiVaultInfo:e,vaultTvl:t,performanceFee:s}){var o,l,p,m,x,a;const{isApp:i}=B(),{getExplorerUrl:n}=Dt();return r.jsxs(le,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[r.jsxs(j,{children:[r.jsx(Tt,{coinACoinType:(o=e==null?void 0:e.displayTokenA)==null?void 0:o.coin_type,coinBCoinType:(l=e==null?void 0:e.displayTokenB)==null?void 0:l.coin_type,coinAIconUrl:(p=e==null?void 0:e.displayTokenA)==null?void 0:p.logo_url,coinBIconUrl:(m=e==null?void 0:e.displayTokenB)==null?void 0:m.logo_url}),r.jsxs(P,{alignItems:"start",flexDirection:(e==null?void 0:e.category)=="haedal"?"column":"row",gap:"2px",children:[r.jsxs(j,{children:[r.jsx(v,{fontSize:"16px",color:"text_caption",children:`${((x=e==null?void 0:e.displayTokenA)==null?void 0:x.symbol)||""} - ${((a=e==null?void 0:e.displayTokenB)==null?void 0:a.symbol)||""}`}),r.jsx($,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:r.jsx(j,{children:r.jsx(v,{fontSize:"12px",color:"primary",children:e==null?void 0:e.feeDisplay})})})]}),r.jsx(j,{mt:"4px",children:(e==null?void 0:e.category)=="haedal"&&r.jsx(or,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"haedal"})})]}),!i&&r.jsxs(j,{ml:"12px",gap:"4px",children:[r.jsx(v,{fontSize:"14px",children:"Vault Address"}),r.jsx(Me,{fontSize:"14px",address:(e==null?void 0:e.vaultId)||"",onClickLink:()=>{window.open(n(e==null?void 0:e.vaultId,"poolAddress"),"_blank")}})]})]}),r.jsxs(le,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:[i&&r.jsx(oe,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:r.jsx(Me,{fontSize:"14px",color:"text_caption",address:(e==null?void 0:e.vaultId)||"",onClickLink:()=>{window.open(n(e==null?void 0:e.vaultId,"poolAddress"),"_blank")}})}),r.jsxs(P,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"6px",flexDirection:{base:"row",lg:"column"},children:[r.jsx(v,{w:"100%",fontSize:{base:"14px",lg:"12px"},textAlign:i?"left":"right",children:"APY"}),r.jsx(Fe,{placement:"bottom",tooltip:r.jsx(dt,{vaultsLstApyDisplay:e==null?void 0:e.vaultsLstApyDisplay,vaultsApyDisplay:e==null?void 0:e.vaultsApyDisplay,vaultsTotalApyDisplay:e==null?void 0:e.vaultsTotalApyDisplay,vaultsAprDisplay:e==null?void 0:e.vaultsAprDisplay,category:e==null?void 0:e.category}),children:r.jsx(ae,{children:r.jsx(v,{color:"text_highlight",h:"20px",cursor:"help",textDecoration:"underline dotted",textUnderlineOffset:"3px",lineHeight:"20px",fontWeight:"500",children:(e==null?void 0:e.category)=="cetus"?e==null?void 0:e.vaultsTotalApyDisplay:(e==null?void 0:e.vaultsApyDisplay)||"-"})})})]}),r.jsxs(P,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"6px",flexDirection:{base:"row",lg:"column"},children:[r.jsx(v,{w:"100%",fontSize:{base:"14px",lg:"12px"},textAlign:i?"left":"right",children:"Earnings"}),r.jsx(Fe,{placement:"top",tooltip:r.jsx(v,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:r.jsx(ae,{children:r.jsx(j,{justifyContent:"end",children:e==null?void 0:e.vaultsRewards.map(d=>r.jsx(sr,{coinType:d},d))})})})]}),r.jsxs(P,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"6px",flexDirection:{base:"row",lg:"column"},children:[r.jsx(v,{w:"100%",fontSize:{base:"14px",lg:"12px"},textAlign:i?"left":"right",children:"TVL"}),r.jsx(v,{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500",children:((e==null?void 0:e.category)=="haedal"?ke(t,"$"):e==null?void 0:e.vaultsTvlDisplay)||"-"})]}),(e==null?void 0:e.category)=="haedal"&&r.jsxs(P,{w:{base:"100%",lg:"unset"},justify:"space-between",align:{base:"center",lg:"flex-end"},gap:"6px",flexDirection:{base:"row",lg:"column"},children:[r.jsxs(j,{gap:"4px",children:[r.jsx(v,{w:"100%",fontSize:{base:"14px",lg:"12px"},children:"Performance Fee"}),r.jsx(nr,{type:"vaultDetailFee"})]}),r.jsx(v,{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500",children:s||"-"})]})]})]})}function Ji(){const e=ct(),{vaultId:t,category:s="cetus"}=pt(),{getCurrentVaultDetail:i}=Ce(),{currentAccount:n}=zt(),{clearVaultsActionData:o}=ft(),{currentVaultPosition:l,currentVaultPositionLoading:p,clearVaultsPositionObj:m,setCurrentVaultPosition:x,setCurrentVaultPositionLoading:a}=gt(),{vaultsPoolObj:d}=ht(),{vaultListObj:g,lpTokenInfoObj:u,vaultsList:b}=ut(),{fetchAccountBalance:y}=Ct(),{getCurrentVaultContractInfo:A}=Ce(),[S,_]=f.useState(!0),{setFromCoin:w,setToCoin:O}=vt(),c=f.useMemo(()=>d[t],[d,t]);f.useEffect(()=>{t&&i(t)},[n==null?void 0:n.address,t]);const T=f.useMemo(()=>l,[l,t]);f.useEffect(()=>{n!=null&&n.address||(m(),x({}))},[n==null?void 0:n.address]),f.useEffect(()=>{var G;if(t&&Re(g)){const ie=(G=Object.values(g))==null?void 0:G.filter(ot=>ot.vaultId==t);(ie==null?void 0:ie.length)>0?(console.log("🚀 ~ res ~ res:",ie),_(!0)):_(!1)}},[t,g]);const h=f.useMemo(()=>{if(Re(g)&&t)return g[t]},[g,t]),N=f.useMemo(()=>u[h==null?void 0:h.lpTokenType],[h==null?void 0:h.lpTokenType,JSON.stringify(u)]),J=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[W,re]=f.useState("Overview"),{holdingAmountDisplay:K,holdCoinAValue:Ve,holdCoinBValue:et}=Ee(l==null?void 0:l.displayAmountA,l==null?void 0:l.displayAmountB,l==null?void 0:l.displayCoinTypeA,l==null?void 0:l.displayCoinTypeB,s),{holdingAmount:ze,holdCoinAValue:tt,holdCoinBValue:rt}=Ee(c==null?void 0:c.displayAmountA,c==null?void 0:c.displayAmountB,c==null?void 0:c.displayCoinTypeA,c==null?void 0:c.displayCoinTypeB,s),[ue,Oe]=f.useState(!1),{getPythLastPrice:it}=mt();Et({interval:20*1e3,callback:()=>{me.current&&s=="haedal"&&it([c==null?void 0:c.displayCoinTypeA,c==null?void 0:c.displayCoinTypeB])}});const me=f.useRef(!1);f.useEffect(()=>(me.current=!0,o(),()=>{me.current=!1,o()}),[]);const st=()=>{console.log("🚀🚀🚀 ~ VaultsDetailPage.tsx:142 ~ autoRefresh ~ autoRefresh:"),y(),console.log("🚀🚀🚀 ~ VaultsDetailPage.tsx:157 ~ autoRefresh ~ currentAccount?.address:",n==null?void 0:n.address),n!=null&&n.address?i(t,!0):A(t),W!=="Overview"&&(Oe(!0),setTimeout(()=>{Oe(!1)},1e3))},U=yt(c),{isApp:nt}=B();return f.useEffect(()=>(h&&(w(h==null?void 0:h.displayTokenA),O(h==null?void 0:h.displayTokenB)),()=>{w(He.clmm_swap.from_coin),O(He.clmm_swap.to_coin)}),[h==null?void 0:h.vaultsId]),r.jsx(R,{pt:"40px",w:"100%",children:S?r.jsxs(P,{gap:"20px",w:"100%",align:"flex-start",children:[r.jsx(j,{w:"100%",justify:"space-between",children:r.jsx(Ot,{bg:"bg_six",borderColor:"border_secondary"})}),r.jsx(Nr,{apiVaultInfo:h,vaultTvl:ze,performanceFee:c==null?void 0:c.disPlayProtocolFeeRate}),r.jsxs(le,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[r.jsxs(P,{width:"100%",flex:"1",gap:"12px",children:[(h==null?void 0:h.category)=="haedal"&&r.jsx(Pe,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:J,currentTab:W,handleChangeTab:G=>{re(G==null?void 0:G.value)}}),W=="Overview"?r.jsxs(r.Fragment,{children:[r.jsx(Wr,{minPrice:c==null?void 0:c.minPrice,maxPrice:c==null?void 0:c.maxPrice,currentPrice:c==null?void 0:c.currentPrice,displayTokenB:h==null?void 0:h.displayTokenA,displayTokenA:h==null?void 0:h.displayTokenB}),r.jsx(kr,{displayAmountA:c==null?void 0:c.displayAmountA,displayAmountB:c==null?void 0:c.displayAmountB,displayPercentA:c==null?void 0:c.displayPercentA,displayPercentB:c==null?void 0:c.displayPercentB,displayTokenB:h==null?void 0:h.displayTokenB,displayTokenA:h==null?void 0:h.displayTokenA,vaultsCoinAValue:c!=null&&c.displayAmountA?tt:"",vaultsCoinBValue:c!=null&&c.displayAmountB?rt:"",depositRatio:U==null?void 0:U.depositRatio,hardCapUSD:U==null?void 0:U.hardCapUSD,vaultTvl:ze}),r.jsx(Lr,{lpTokenInfo:N,sharePoolRate:p?"":(T==null?void 0:T.shartOfPoolDisplay)||0,balanceDisplay:p?"":(T==null?void 0:T.balanceDisplay)||0,totalHolding:p?"":K||"",displayTokenB:h==null?void 0:h.displayTokenB,displayTokenA:h==null?void 0:h.displayTokenA,holdCoinAmounts:{displayCoinA:p?"":C(T==null?void 0:T.displayAmountA,6)||"--",displayCoinB:p?"":C(T==null?void 0:T.displayAmountB,6)||"--"},holdCoinAValue:Ve,holdCoinBValue:et})]}):r.jsxs(r.Fragment,{children:[r.jsx(Br,{isRefresh:ue,vaultsId:h==null?void 0:h.vaultId}),r.jsx(Or,{isRefresh:ue,vaultsId:h==null?void 0:h.vaultId}),r.jsx(Rr,{isRefresh:ue,vaultsId:h==null?void 0:h.vaultId,isReverse:h==null?void 0:h.isReverse})]})]}),r.jsx(P,{w:nt?"100%":"40%",children:r.jsx(bt,{vaultId:t,autoRefresh:st,isModal:!1})})]})]}):r.jsx(Ne,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:r.jsxs(P,{children:[r.jsx(v,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),r.jsx(xt,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{e("/vaults")},children:"Back to Vault"})]})})})}export{Ji as default};
//# sourceMappingURL=VaultsDetailPage-DVKPR8rW.js.map
