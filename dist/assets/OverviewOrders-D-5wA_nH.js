import{u as V}from"./activeOrders-B_DQ4Rr1.js";import{u as f}from"./useAccountBalance-CS3ca8rH.js";import{k as q,z as M,d as O,v as P,x as Y,p as G,j as I,R as ht,u as vt,a_ as Dt,a3 as Q,Z as yt,X,I as F,G as St,a as Ot,e as At,i as wt,B as bt,q as Z}from"./index-C9eB4n05.js";import{a as j,j as s,H as T,T as N,aq as Pt,u as tt,V as H,f as et,C as Ct,v as jt}from"./vendor-BulRdKUe.js";import{u as st}from"./useTransaction-CEDCgy0u.js";import{u as Tt}from"./RangeValue-D7b-YFqE.js";import{u as Nt}from"./useToken-CSs04qtp.js";import{P as Rt}from"./Pagination-Dd-2GMaB.js";import{H as J}from"./HTextLabelBox-CRyapKB_.js";import{N as $t}from"./NoData-fdoVeTOA.js";import{E as Lt}from"./ErrorTips-Alt-FfJI.js";function at(){const{peripherySdk:e}=q();return{dcaCloseOrderPayload:async t=>await e.Dca.dcaCloseOrderPayload(t)}}function it(){const{peripherySdk:e}=q();return{dcaWithdrawPayload:async t=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDcaClaim.ts:12 ~ params:",t),await e.Dca.withdrawAll(t))}}function Et(e){const a=Math.floor(e/2592e3);e%=2592e3;const h=Math.floor(e/604800);e%=604800;const y=Math.floor(e/86400);e%=86400;const g=Math.floor(e/3600);e%=3600;const w=Math.floor(e/60);e%=60;const A=[];return a>0&&A.push(`${a} Month${a>1?"s":""}`),h>0&&A.push(`${h} Week${h>1?"s":""}`),y>0&&A.push(`${y} Day${y>1?"s":""}`),g>0&&A.push(`${g} Hour${g>1?"s":""}`),w>0&&A.push(`${w} Minute${w>1?"s":""}`),A.join(" ")}function ct(){const{getTokenListInfo:e}=Nt(),{peripherySdk:l}=q(),{setDcaOrderListLoading:t,setDcaActiveOrderList:o,setDcaPastOrderList:u}=V(),i=async(_,x=!0)=>{var m;console.log("ðŸš€ ~ getDcaOrderList ~ walletAddress:",_);try{t(x);const p=await l.Dca.getDcaOrders(_);if(console.log("ðŸš€ ~ getDcaOrderList ~ list:",p),p&&(p!=null&&p.data)&&((m=p==null?void 0:p.data)==null?void 0:m.length)>0){const{activeResult:v,pastResult:n}=await A(p==null?void 0:p.data);console.log("ðŸš€ ~ getDcaOrderList ~ activeResult, pastResult:",{activeResult:v,pastResult:n}),o(v),u(n)}else o([]),u([])}catch(p){console.log("ðŸš€ ~ getDcaOrderList ~ error:",p),o([]),u([])}finally{t(!1)}},a=async _=>{try{const x=await e(_),m=new Map;return x==null||x.forEach((p,v)=>{const n=G.pow(10,p==null?void 0:p.decimals);m.set(v,{token:p,decimalsPow:n})}),m}catch(x){console.log("ðŸš€ ~ getTokenListDetails ~ error:",x)}},h=(_,x,m,p,v)=>{const n=O(_).div(x).div(O(p).div(m)).toString(),b=O(_).div(x).div(O(v).div(m)).toString();return{minPrice:n,maxPrice:b,minPriceResever:O(1).div(O(b)).toString(),maxPriceResever:O(1).div(O(n)).toString()}},y=_=>_.in_withdrawn>0&&_.in_withdrawn==_.in_deposited?"Close":_.in_withdrawn>0&&_.out_withdrawn>0?"PartialDeal":_.amount_left_next_cycle==0&&_.next_cycle_at==0?"AllDeal":"Active",g=(_,x,m,p,v,n,b)=>{const r=c=>c==="--"?"--":O(1).div(c).toString();switch(_){case"Close":return{currentAvgPrice:"--",currentAvgPriceResever:"--",inBalanceRatio:"0",inDepositedOut:"0"};case"PartialDeal":{const c=x.sub(m).div(n).toString(),S=x.sub(m).div(x).mul(100).toDP(2,G.ROUND_HALF_UP).toString();return console.log("ðŸš€ ~ useGetDcaOrderList ~ inDeposited:",m,x),{currentAvgPrice:c,currentAvgPriceResever:r(c),inBalanceRatio:S,inDepositedOut:x.sub(m).toString()}}case"AllDeal":{const c=x.div(n).toString();return{currentAvgPrice:c,currentAvgPriceResever:r(c),inBalanceRatio:"100",inDepositedOut:x.sub(p).toString()}}case"Active":{const c=v.gt(0)||n.gt(0)?x.sub(p).div(v.add(n)).toString():"--",S=x.sub(p).div(x).mul(100).toDP(2,G.ROUND_HALF_UP).toString();return{currentAvgPrice:c,currentAvgPriceResever:r(c),inBalanceRatio:S,inDepositedOut:x.sub(p).toString()}}default:return{currentAvgPrice:"--",currentAvgPriceResever:"--",inBalanceRatio:"0",inDepositedOut:"0"}}},w=(_,x,m,p)=>{const v=Date.now()/1e3,n=O(v).sub(_).div(x),b=m.lte(0)&&O(p).lte(0);return n.gt(3)&&b},A=async _=>{const x=[],m=[],p=new Set;_==null||_.forEach(r=>{p.add(M(r.in_coin_type,!1)),p.add(M(r.out_coin_type,!1))});const v=await a(Array.from(p));if(v)for(const r of _)try{const{token:c,decimalsPow:S}=v.get(M(r.in_coin_type,!1)),{token:B,decimalsPow:E}=v.get(M(r.out_coin_type,!1)),C=O(r.in_deposited).div(S),$=O(r.in_deposited).div(r.in_amount_per_cycle).floor().toString(),D=O(r.in_amount_per_cycle).div(S).toString(),L=O(r.in_balance).div(S),d=O(r.in_withdrawn).div(S),W=O(r.out_balance).gt(0)?O(r.out_balance).div(E):O(0),z=O(r.out_withdrawn).div(E),lt=P(C.div($).toString()),nt=L.div(D).floor().toNumber(),{minPrice:ut,maxPrice:xt,minPriceResever:rt,maxPriceResever:pt}=h(r.in_amount_per_cycle,S,E,r.max_out_amount_per_cycle,r.min_out_amount_per_cycle),k=y(r),{currentAvgPrice:U,currentAvgPriceResever:gt,inBalanceRatio:mt,inDepositedOut:ot}=g(k,C,d,L,W,z,S),_t=w(r.created_at,r.cycle_frequency,W,z),K={createAt:Y(r.created_at*1e3,"YMDHM"),cycleFrequency:r.cycle_frequency,orderID:r.id,inAmountPerCycle:D,nextCycleAt:Y(r.next_cycle_at*1e3,"YMDHM"),inDeposited:C.toString(),cycleCount:$,inDepositedOut:ot,inBalance:L.toString(),minPrice:P(ut),maxPrice:P(xt),minPriceResever:P(rt),maxPriceResever:P(pt),inCoin:c,outCoin:B,outBalance:W.toString(),inBalanceRatio:mt,outWithdraw:z.toString(),investEvery:Et(r.cycle_frequency),eachOrderSize:lt,currentAvgPrice:U==="--"?"--":P(U,B.decimals),currentAvgPriceResever:U==="--"?"--":P(gt,c.decimals),orderStatus:k,inWithdrawn:d.toString(),ofOrderLeft:nt,isShowTradeTips:_t,nextCycleAtTimeStamp:r.next_cycle_at*1e3,createdAt:r.created_at*1e3,version:r.version};k==="Active"?x.push(K):m.push(K)}catch(c){console.log("ðŸš€ ~ buildDcaOrderList ~ error:",c)}const n=x==null?void 0:x.sort((r,c)=>c.version-r.version),b=m==null?void 0:m.sort((r,c)=>c.version-r.version);return console.log("ðŸš€ ~ buildDcaOrderList ~ activeResult, pastResult:",{activeResult:x,pastResult:m}),{activeResult:n,pastResult:b}};return{getDcaOrderList:i,buildDcaOrderList:A}}function te(){const[e,l]=j.useState(!1),[t,o]=j.useState(!1),{dcaWithdrawPayload:u}=it(),{dcaCloseOrderPayload:i}=at(),{signAndExecuteTransaction:a}=st(),{fetchAccountBalance:h}=f(),{currentAccount:y}=I(),{getDcaOrderList:g}=ct(),{setDcaActiveOrderList:w}=V();return{closeAll:async x=>{o(!0);try{const m=x==null?void 0:x.map(n=>({order_id:n==null?void 0:n.orderID,in_coin_type:n==null?void 0:n.inCoin.coin_type,out_coin_type:n==null?void 0:n.outCoin.coin_type}));console.log("ðŸš€ ~ const closeOrderParams:any=pageList.map ~ closeOrderParams:",m);const p=await i(m),v=await a(p,{getShowInfo:n=>{const b={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return n==="success"&&(b.modalDescriptionText="DCA Order Closed",b.toastDescriptionContent="",b.toastTitleText="DCA Order Closed"),b}});console.log("ðŸš€ ~ closeAll ~ res:",v),v&&(w([]),setTimeout(()=>{h(),g(y==null?void 0:y.address,!0)},2e3)),o(!1)}catch(m){console.log("ðŸš€ ~ closeAll ~ error:",m),o(!1)}},claimAll:async x=>{l(!0);try{const m=x==null?void 0:x.map(n=>({order_id:n==null?void 0:n.orderID,in_coin_type:n==null?void 0:n.inCoin.coin_type,out_coin_type:n==null?void 0:n.outCoin.coin_type}));console.log("ðŸš€ ~ const claimOrderParams:any=pageList.map ~ claimOrderParams:",m);const p=await u(m),v=await a(p,{getShowInfo:n=>{const b={modalDescriptionText:"DCA Order Claimed",toastTitleText:"DCA Order Claimed"};return n==="success"&&(b.toastDescriptionContent=""),b}});console.log("ðŸš€ ~ claimAll ~ res:",v),v&&setTimeout(()=>{h(),g(y==null?void 0:y.address,!0)},2e3),l(!1)}catch(m){console.log("ðŸš€ ~ claimAll ~ error:",m),l(!1)}},isClaimAllLoading:e,isCloseAllLoading:t}}const dt=(e,l)=>({upperPriceSize:"0%",setUpperPriceSize:t=>{e(()=>({upperPriceSize:t}))},lowerPriceSize:"0%",setLowerPriceSize:t=>{e(()=>({lowerPriceSize:t}))},dcaMode:"total",setDcaMode:t=>{e(()=>({dcaMode:t}))},isDcaRefresh:!1,setIsDcaRefresh:t=>{e(()=>({isDcaRefresh:t}))},pageDirect:!1,setPageDirect:t=>{e(()=>({pageDirect:t}))},sellTotalAmount:"",setSellTotalAmount:t=>{e(()=>({sellTotalAmount:t}))},sellAmount:"",setSellAmount:t=>{e(()=>({sellAmount:t}))},buyAmount:"",setBuyAmount:t=>{e(()=>({buyAmount:t}))},sellCoin:void 0,setSellCoin:t=>{e(()=>({sellCoin:t}))},buyCoin:void 0,setBuyCoin:t=>{e(()=>({buyCoin:t}))},orderNum:"2",setOrderNum:t=>{e(()=>({orderNum:t}))},investNum:"1",setInvestNum:t=>{e(()=>({investNum:t}))},currentCoinKey:"sellCoin",setCurrentCoinKey:t=>{e(()=>({currentCoinKey:t}))},currentInvest:"Hour",setCurrentInvest:t=>{e(()=>({currentInvest:t}))},pageLoading:!0,setPageLoading:t=>{e(()=>({pageLoading:t}))},dcaConfig:{},setDcaConfig:t=>{e(()=>({dcaConfig:t}))},dcaQuote:{},setDcaQuote:t=>{e(()=>({dcaQuote:t}))},orderHistoryObj:{},setOrderHistoryObj:t=>{e(()=>({orderHistoryObj:{...l().orderHistoryObj,...t}}))},inCoinWhiteList:[],setInCoinWhiteList:t=>{e(()=>({inCoinWhiteList:t}))},outCoinWhiteList:[],setOutCoinWhiteList:t=>{e(()=>({outCoinWhiteList:t}))}}),Bt=ht(dt);function Ht(){const{fetchByApi:e}=vt(),{setOrderHistoryObj:l}=Bt();return{getDcaOrderHistory:async({orderId:o,limit:u,offset:i})=>{var h;const a=await e(Dt,"GET",{order_id:o,limit:u,offset:i});if(console.log("ðŸš€ ~ file: useGetDcaOrderHistory.ts:16 ~ useGetDcaOrderHistory ~ res:",a),a!=null&&a.list){const y={[o]:{list:((h=a==null?void 0:a.list)==null?void 0:h.map(g=>({inAmount:g==null?void 0:g.in_amount,outAmount:g==null?void 0:g.out_amount,inCoinType:g==null?void 0:g.in_coin,outCoinType:g==null?void 0:g.out_coin,time:g==null?void 0:g.execution_at,tx:g==null?void 0:g.tx})))||[],total:(a==null?void 0:a.total)||0}};return l(y),y}}}}function Wt(){const[e,l]=j.useState(!1),[t,o]=j.useState(!1),[u,i]=j.useState(!1),[a,h]=j.useState([]),[y,g]=j.useState(0),{currentAccount:w}=I(),{dcaWithdrawPayload:A}=it(),{fetchCoinBalance:_}=f(),{signAndExecuteTransaction:x}=st(),{getDcaOrderList:m}=ct(),{dcaCloseOrderPayload:p}=at(),{getDcaOrderHistory:v}=Ht();return{toClaim:async c=>{l(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",c);const S=[],B={order_id:c==null?void 0:c.orderID,in_coin_type:c==null?void 0:c.inCoin.coin_type,out_coin_type:c==null?void 0:c.outCoin.coin_type};S.push(B),console.log("ðŸš€ ~ toClaim ~ claimOrderParams:",S);const E=await A(S),C=await x(E,{getShowInfo:$=>{var L,d;const D={modalDescriptionText:`${(L=c==null?void 0:c.outCoin)==null?void 0:L.symbol} Claimed`,toastTitleText:`${(d=c==null?void 0:c.outCoin)==null?void 0:d.symbol} Claimed`};return $==="success"&&(D.toastDescriptionContent=""),D}});C&&(console.log("ðŸš€ ~ toClaim ~ res:",C),setTimeout(()=>{_(w==null?void 0:w.address,c==null?void 0:c.outCoin.coin_type),m(w==null?void 0:w.address,!0)},2e3)),l(!1)}catch(S){console.log("ðŸš€ ~ toClaim ~ error:",S),l(!1)}},closeOrderAction:async c=>{o(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",c);const S=[{order_id:c==null?void 0:c.orderID,in_coin_type:c==null?void 0:c.inCoin.coin_type,out_coin_type:c==null?void 0:c.outCoin.coin_type}];console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:280 ~ closeOrder ~ closeOrderParams:",S);const B=await p(S),E=await x(B,{getShowInfo:C=>{const $={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return C==="success"&&($.modalDescriptionText="DCA Order Closed",$.toastDescriptionContent="",$.toastTitleText="DCA Order Closed"),$}});console.log("ðŸš€ ~ closeOrder ~ res:",E),E&&setTimeout(()=>{_(),m(w==null?void 0:w.address,!0)},2e3),o(!1)}catch(S){console.log("ðŸš€ ~ closeOrder ~ error:",S),o(!1)}},isCloseLoading:t,isClaimLoading:e,total:y,orderHistoryList:a,handleGetDcaOrderHistory:async(c,S,B,E=!1)=>{var $,D,L,d;console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ loading:",E),i(E);const C=await v({orderId:c,limit:S,offset:B});console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ res?.list:",C),Q(C)&&(($=C[c])!=null&&$.list)&&h((D=C[c])==null?void 0:D.list),Q(C)&&((L=C[c])!=null&&L.total)&&g((d=C[c])==null?void 0:d.total),i(!1),console.log("ðŸš€ ~ file: TestData.tsx:170 ~ handleGetDcaOrderHistory ~ res:",C)},orderHistoryListLoading:u}}function ee({orderInfo:e}){const{inCoin:l,outCoin:t}=e;return s.jsxs(T,{children:[s.jsx(yt,{coinAIconUrl:l==null?void 0:l.logo_url,coinBIconUrl:t==null?void 0:t.logo_url,coinACoinType:l==null?void 0:l.coin_type,coinBCoinType:t==null?void 0:t.coin_type,w:"28px",h:"28px"}),s.jsxs(N,{color:"text_caption",children:[l==null?void 0:l.symbol," â†’ ",t==null?void 0:t.symbol]})]})}function se({orderInfo:e,isProfile:l}){const{inCoin:t}=e;return s.jsxs(T,{flexDirection:l?"column":"row",align:l?"flex-end":"center",gap:l?"4px":"8px",children:[s.jsxs(T,{children:[s.jsxs(N,{color:"text_caption",fontSize:l?"14px":"12px",children:[P(e==null?void 0:e.inDepositedOut)," ",t==null?void 0:t.symbol]}),s.jsxs(N,{color:l?"text_caption":"primary_gray",fontSize:l?"14px":"12px",children:["/ ",P(e==null?void 0:e.inDeposited)," ",t==null?void 0:t.symbol]})]}),s.jsxs(T,{children:[s.jsxs(N,{color:"primary_gray",fontSize:"12px",children:["(",e==null?void 0:e.inBalanceRatio,"%)"]}),s.jsx(Pt,{w:l?"40px":"50px",h:"4px",value:e==null?void 0:e.inBalanceRatio,bg:"#282828",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})]})}function ae({orderInfo:e,isProfile:l=!1,isRank:t=!1}){const o="400",u=j.useMemo(()=>({minPrice:e==null?void 0:e.minPrice,maxPrice:e==null?void 0:e.maxPrice,minPriceResever:e==null?void 0:e.minPriceResever,maxPriceResever:e==null?void 0:e.maxPriceResever}),[e]),i=j.useMemo(()=>e==null?void 0:e.outCoin,[e]),a=j.useMemo(()=>e==null?void 0:e.inCoin,[e]),[h,y]=j.useState(!0),{getTokenRank:g}=Tt();j.useEffect(()=>{if(t){const _=g(i,a);console.log("ðŸš€ ~ useEffect ~ direct:",_),y(_)}},[t,i==null?void 0:i.coin_type,a==null?void 0:a.coin_type]);const w=l?"14px":"12px",A=l?"text_paragraph":"primary_gray";return s.jsx(T,{mt:l?"0px":"3px",justify:l?"flex-end":"flex-start",children:s.jsx(tt,{isLoaded:!!(u!=null&&u.minPrice)&&!!i&&!!a,children:s.jsxs(T,{flexWrap:"wrap",gap:"4px",justify:"flex-start",align:l?"flex-end":"center",flexDirection:l?"column":"row",children:[s.jsx(N,{lineHeight:"16px",h:"16px",fontSize:w,fontWeight:o,color:"text_caption",whiteSpace:"nowrap",children:h?`${u==null?void 0:u.minPrice} - ${u==null?void 0:u.maxPrice}`:`${u==null?void 0:u.minPriceResever} - ${u==null?void 0:u.maxPriceResever}`}),s.jsxs(T,{gap:"4px",children:[s.jsxs(T,{gap:"0",children:[s.jsx(N,{fontSize:"12px",fontWeight:o,color:A,children:X(h?a==null?void 0:a.symbol:i==null?void 0:i.symbol,10)}),s.jsx(N,{fontSize:"12px",fontWeight:o,color:A,children:"Â perÂ "}),s.jsx(N,{fontSize:"12px",fontWeight:o,color:A,children:X(h?i==null?void 0:i.symbol:a==null?void 0:a.symbol,10)})]}),s.jsx(F,{xlinkHref:"#icon-icon_swap1",w:"14px",h:"14px",onClick:_=>{St(_),y(!h)}})]})]})})})}function R({label:e,value:l,direct:t,onChangeDirect:o,textAlign:u="left",showDirectIcon:i=!0,...a}){return s.jsxs(H,{align:"flex-start",flexDirection:{base:"row",lg:"column"},w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},...a,children:[e!==""&&s.jsxs(T,{h:"12px",children:[s.jsx(N,{fontSize:"12px",children:e}),o&&i&&s.jsx(F,{xlinkHref:"#icon-icon_swap1",svgW:"14px",svgH:"14px",ml:"-6px",onClick:o})]}),l!==""&&s.jsx(et,{fontSize:"12px",color:"text_caption",textAlign:u,children:l})]})}function ie({isDetail:e,currentTabVal:l,orderInfo:t,pageDirect:o}){const{isApp:u}=Ot(),{inCoin:i,outCoin:a}=t,[h,y]=j.useState(o),[g,w]=j.useState(o),A=10,[_,x]=j.useState(1),{isClaimLoading:m,toClaim:p,total:v,orderHistoryList:n,handleGetDcaOrderHistory:b,orderHistoryListLoading:r}=Wt(),[c,S]=j.useState({label:"Overview",value:"overview"}),B=j.useMemo(()=>[{label:"Overview",value:"overview"},{label:r||Number(v)===0?"Orders":`Orders (${v})`,value:"orders"}],[v]),E=D=>{S(D),t!=null&&t.orderID&&b(t==null?void 0:t.orderID,A,0,!1)};j.useEffect(()=>{e&&(t!=null&&t.orderID)&&b(t==null?void 0:t.orderID,A,0,!1)},[t,e]);const C=D=>{console.log("ðŸš€ ~ handleCurrentPage ~ page:",D);const L=(D-1)*A;b(t==null?void 0:t.orderID,A,L,!1),x(D)},{getExplorerUrl:$}=At();return s.jsxs(H,{w:"100%",gap:"20px",children:[s.jsx(wt,{type:"outlineTab",wrapStyle:{w:"100%",h:"36px",borderRadius:"8px",p:"4px",mt:"-1px",zIndex:"1"},itemStyle:{w:"50%",fontSize:"12px"},tabList:B,currentTab:c.label,handleChangeTab:E}),s.jsxs(bt,{p:"30px 8px 20px",mt:"-42px",borderRadius:"8px",zIndex:"0",bg:"bg_primary",children:[c.value=="orders"&&(r?s.jsx(tt,{height:"4",width:"100%"}):(n==null?void 0:n.length)===0?s.jsx($t,{type:"nodata",text:"No orders",noBorder:!0,p:"12px",bg:"none"}):s.jsxs(H,{w:"100%",align:"flex-start",gap:"16px",mt:"12px",children:[!u&&s.jsxs(T,{w:"100%",flexDirection:{base:"column",lg:"row"},children:[s.jsx(R,{label:"Order info",value:"",w:{base:"100%",lg:"40%"}}),s.jsx(R,{label:"Rate",value:"",w:{base:"100%",lg:"calc(32% - 16px)"},direct:g,onChangeDirect:()=>w(!g)}),s.jsx(R,{label:"Time (UTC)",value:"",w:{base:"100%",lg:"28%"},align:"flex-end",textAlign:"right"})]}),n==null?void 0:n.map(D=>{const L=Z(D.inAmount,i==null?void 0:i.decimals),d=Z(D.outAmount,a==null?void 0:a.decimals),W=O(L).div(d).toString(),z=O(1).div(W).toString();return s.jsxs(T,{w:"100%",flexDirection:{base:"column",lg:"row"},borderBottom:u?"1px solid":"none",pb:u?"16px":"0",borderColor:"border",_last:{borderBottom:"none",pb:"0"},children:[s.jsx(R,{label:u?"Order info":"",value:`${P(L)} ${i.symbol} â†’ ${P(d)} ${a.symbol}`,w:{base:"100%",lg:"40%"}}),s.jsx(R,{label:u?"Rate":"",value:g?`${P(W)} ${i.symbol} per ${a.symbol}`:`${P(z)} ${a.symbol} per ${i.symbol}`,w:{base:"100%",lg:"calc(32% - 16px)"},direct:g,showDirectIcon:!!u,onChangeDirect:()=>w(!g)}),s.jsx(R,{label:u?"Time (UTC)":"",value:s.jsxs(T,{h:"12px",children:[s.jsx(N,{fontSize:"12px",color:"text_caption",children:Y((D==null?void 0:D.time)*1e3,"YMDHM")}),s.jsx(F,{xlinkHref:"#icon-icon_link1",onClick:()=>{window.open($(D==null?void 0:D.tx,"tx"))}})]}),w:{base:"100%",lg:"28%"},align:"flex-end",textAlign:"right"})]},D==null?void 0:D.time)}),O(v).gt(A)&&s.jsx(Ct,{w:"100%",children:s.jsx(Rt,{total:v,size:A,currentPage:_,onChange:C})})]})),c.value=="overview"&&s.jsxs(H,{align:"flex-start",gap:"20px",children:[(t==null?void 0:t.isShowTradeTips)&&(t==null?void 0:t.orderStatus)=="Active"&&l=="active"&&s.jsx(Ut,{}),s.jsxs(H,{w:"100%",borderRadius:"8px",p:"12px",bg:"card_bg",gap:"12px",children:[s.jsx(J,{isLoading:!1,label:`DCA  ${i==null?void 0:i.symbol} Balance`,value:`${Mt(t)} ${i==null?void 0:i.symbol}`,skeletonStyle:{valueW:"128px"}}),s.jsxs(T,{w:"100%",justify:"space-between",children:[s.jsxs(N,{fontSize:"12px",children:["DCA ",a==null?void 0:a.symbol," Balance"]}),s.jsxs(T,{children:[s.jsxs(N,{color:"text_caption",fontSize:"12px",children:[kt(t)," ",a==null?void 0:a.symbol]}),l=="active"&&s.jsx(jt,{isLoading:m,onClick:()=>p(t),disabled:(t==null?void 0:t.outBalance)<=0||m,w:"60px",h:"20px",fontSize:"12px",borderRadius:"4px",variant:"outline",children:"Claim"})]})]}),s.jsx(J,{isLoading:!1,label:"Amount Withdrawn",value:zt(t,l=="active"),skeletonStyle:{valueW:"128px"}})]}),s.jsxs(T,{flexWrap:"wrap",p:{base:"0",lg:"0 12px"},mt:{base:"-12px",lg:"-28px"},sx:{">div":{mt:{base:"12px",lg:"28px"},w:{base:"100%",lg:"calc((100% - 66px)/3)"},"&:nth-child(3n+1)":{mr:{base:"0",lg:"50px"}}}},children:[s.jsx(R,{label:"Invest Every",value:t==null?void 0:t.investEvery}),s.jsx(R,{label:"# of Orders Left",value:t==null?void 0:t.ofOrderLeft}),s.jsx(R,{label:"Each Order Size",value:`${t==null?void 0:t.eachOrderSize} ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right"}),s.jsx(R,{label:"Minimum Price",value:h?`${t==null?void 0:t.minPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.minPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,direct:h,onChangeDirect:()=>y(!h)}),s.jsx(R,{label:"Maximum Price",value:h?`${t==null?void 0:t.maxPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.maxPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,direct:h,onChangeDirect:()=>y(!h)}),l=="active"&&s.jsx(R,{label:"Current Avg. Price",value:h?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right",direct:h,onChangeDirect:()=>y(!h)}),l!=="active"&&(t==null?void 0:t.currentAvgPrice)!=="--"&&s.jsx(R,{label:"Avg. Price",value:h?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right",direct:h,onChangeDirect:()=>y(!h)}),l=="active"&&s.jsx(R,{label:"Next Order (UTC)",value:t==null?void 0:t.nextCycleAt}),s.jsx(R,{label:"Created (UTC)",value:t==null?void 0:t.createAt,align:l=="active"||l!=="active"&&(t==null?void 0:t.currentAvgPrice)!=="--"?"flex-start":"flex-end"})]})]})]})]})}const zt=(e,l,t=!1)=>{const{inCoin:o,outCoin:u}=e;return l?`${P(e==null?void 0:e.outWithdraw,2)} ${u==null?void 0:u.symbol}`:(e==null?void 0:e.orderStatus)==="PartialDeal"||(e==null?void 0:e.orderStatus)==="Close"?O(e==null?void 0:e.outWithdraw).gt(0)?s.jsxs(s.Fragment,{children:[P(e==null?void 0:e.inWithdrawn)," ",o==null?void 0:o.symbol,t&&s.jsx(et,{as:"span",display:"inline-block",m:"0 8px",w:"1px",h:"14px",bg:"border"}),P(e==null?void 0:e.outWithdraw)," ",u==null?void 0:u.symbol]}):`${P(e==null?void 0:e.inWithdrawn)} ${o==null?void 0:o.symbol}`:`${P(e==null?void 0:e.outWithdraw)} ${u==null?void 0:u.symbol}`},Mt=e=>P(e==null?void 0:e.inBalance,2)||"0",kt=e=>(e==null?void 0:e.outBalance)>0?P(e==null?void 0:e.outBalance):e==null?void 0:e.outBalance,Ut=()=>s.jsxs(H,{p:"12px 12px 0",align:"flex-start",children:[s.jsx(T,{children:s.jsx(Lt,{tips:"The system tried to execute your order multiple times but did not get it through. This is possibly because:",type:"warning",tipsFontSize:"12px",p:"0",bg:"none",svgW:"20px",svgH:"20px"})}),s.jsx(Gt,{})]});function Gt(){return s.jsxs(H,{align:"flex-start",w:"100%",children:[s.jsx(N,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market price is not in your required price range"}),s.jsx(N,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market no longer exit"}),s.jsx(N,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market is extremely volatile"}),s.jsx(N,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",textAlign:"left",children:"This DCA will continue to be attempted and the estimated end date may be extended until your order is fully executed."})]})}export{ee as D,ie as O,ae as R,Gt as W,se as a,te as b,Bt as c,ct as d,Mt as e,kt as f,zt as g,Wt as u};
//# sourceMappingURL=OverviewOrders-D-5wA_nH.js.map
