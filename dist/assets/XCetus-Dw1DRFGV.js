import{j as e,V as x,T as s,H as p,C as y,a as m,a7 as C,v,f as O,u as G,I as $}from"./vendor-DXHkIl66.js";import{u as q,a as ne,b as re,X as oe,c as ie,C as le,d as xe}from"./useXCetus-g-ma6vvs.js";import{B as h,ar as ce,a as w,k as pe,as as I,j as U,F as de,I as ue,am as ge,O as E,d as Y,c as K,v as z,M as T,i as he}from"./index-1pql7esm.js";import{u as me}from"./useTransaction-HT-BOlou.js";import{M as fe}from"./msafe-oYBkW7LJ.js";import{u as J}from"./useAccountBalance-C2Raiu99.js";import{u as be,a as je}from"./useXCetusHelper-B8egdb_b.js";import{H as Q}from"./HTextLabelBox-BUAVAY0k.js";import{V as Z}from"./VTextLabelBox-BBP6S5GJ.js";import{u as we}from"./useToken-DQuh8vo3.js";import{u as Ce}from"./useRpcListener-ct19cNgt.js";import"./useTokenBalance-CuMCex55.js";import"./TradeInputGroup-CpiF2tC0.js";import"./_getAllKeysIn-Ds6Ic9w2.js";import"./CheckBox-C4jUOy1k.js";import"./HighlightText-BLaAjUt8.js";import"./activeOrders-DLCin0Mb.js";import"./useTrack-CtIH4d6T.js";import"./useSigner-CFmwTogF.js";import"./index-CptRizr3.js";import"./debounce-BgSgg6I6.js";import"./index-DKPh1ief.js";import"./usePreviousValue-BBpD8e7r.js";function Se({nextStartTime:n,refresh:t}){const{days:a,hours:i,minutes:o,seconds:r}=q(n*1e3,t);return e.jsxs(x,{w:"100%",gap:"16px",borderRadius:"16px",m:"-1px",p:{base:"24px 12px",lg:"24px"},sx:{backgroundImage:"url('/images/img_xcetus@2x.png')",backgroundPosition:"top center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[e.jsx(s,{fontSize:"16px",color:"text_caption",children:"Convert CETUS to xCETUS to start earning"}),e.jsx(s,{children:"Reward distribution in "}),e.jsxs(p,{children:[e.jsx(h,{borderRadius:"4px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(y,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(s,{fontSize:"16px",textColor:"text_caption",children:[a,"d"]})})}),e.jsx(s,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(h,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(y,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(s,{fontSize:"16px",textColor:"text_caption",children:[i,"h"]})})}),e.jsx(s,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(h,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(y,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(s,{fontSize:"16px",textColor:"text_caption",children:[o,"m"]})})}),e.jsx(s,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(h,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(y,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(s,{fontSize:"16px",textColor:"text_caption",children:[r,"s"]})})})]})]})}function _e(n){const{lockCetusList:t}=n;return e.jsx(h,{p:{base:"16px 8px 8px",lg:"16px"},borderRadius:"16px",children:e.jsxs(x,{w:"100%",alignItems:"start",gap:"16px",children:[e.jsx(s,{fontSize:"16px",color:"text_caption",mt:"4px",children:"Vesting"}),t.map(a=>e.jsx(ye,{info:a},a.id))]})})}function ye(n){const{info:t}=n,[a,i]=m.useState(!1),{days:o,hours:r,minutes:l,seconds:g}=q(t.locked_until_time*1e3,()=>{i(!0)},"days");m.useEffect(()=>{i(!ce.isLocked(t))},[]);const{cancelOrderLoading:c,handleCancelOrder:d}=ne(),{claimOrderLoading:u,handleClaimOrder:f}=re(),S=A=>{A?f(t.id):d(t)};return w(),e.jsx(h,{borderRadius:"12px",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(C,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:{base:"flex-start",lg:"space-between"},gap:{base:"20px",lg:"8px"},children:[e.jsxs(x,{gap:{base:"20px",lg:"8px"},alignItems:"start",children:[e.jsxs(p,{gap:"6px",children:[e.jsxs(s,{color:"primary_gray",children:["Available ",a?"":" in"," "]}),!a&&e.jsxs(s,{color:"text_caption",children:[o,"d : ",r,"h : ",l,"m : ",g,"s"]})]}),e.jsx(oe,{xcetus_amount:t==null?void 0:t.xcetus_amount,cetus_amount:t==null?void 0:t.cetus_amount})]}),e.jsx(p,{w:{base:"100%",lg:"auto"},justify:"center",children:e.jsx(v,{onClick:()=>{c||u||S(!!a)},variant:"outline",h:{base:"40px",lg:"28px"},w:{base:"168px",lg:"80px"},borderRadius:{base:"12px",lg:"8px"},fontSize:"14px",isLoading:c||u,color:a?"text_highlight":"primary_gray",bg:"button_ghost_bg",children:a?"Claim":"Cancel"})})]})})}function Re(){const{fetchAccountBalance:n}=J(),{signAndExecuteTransaction:t}=me(),{xCetusSdk:a}=pe(),{veNFT:i}=I(),[o,r]=m.useState(!1),{fetchVeNFTDividendInfo:l}=be();return{handleClaimReward:async c=>{if(i){r(!0),console.log("ðŸš€ ~ file: useXCetusClaimRewardAction.ts:23 ~ handleClaimReward ~ rewardList:",c);try{const d=a.XCetusModule.redeemDividendV3Payload(i.id,c),u=await t(d,{},{useDevInspect:!0,msafeParams:{action:fe.xCETUSClaimStakingRwewards,txbParams:{veNftId:i.id,rewardList:c}}});r(!1),u&&(n(),l(i.id))}catch(d){console.log("ðŸš€ ~ file: useXCetusClaimRewardAction.ts:40 ~ handleClaimReward ~ error:",d)}finally{r(!1)}}},claimRewardLoading:o}}function Te(n){const{myShare:t,cetusApr:a,totalRewardValue:i,summaryRewardList:o,rewardList:r}=n,{claimRewardLoading:l,handleClaimReward:g}=Re(),{currentAccount:c}=U(),{veNFTLoading:d}=I(),{isApp:u}=w();return e.jsxs(x,{w:"100%",alignItems:"start",p:{base:"4px 8px 8px",lg:"4px 16px 16px"},gap:"16px",children:[e.jsx(s,{fontSize:"16px",color:"text_caption",children:"xCETUS Staking Rewards"}),e.jsxs(C,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",justifyContent:"space-between",children:[e.jsx(h,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(p,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsxs(p,{gap:"4px",children:[e.jsx(s,{color:"primary_gray",children:"est.APR"}),e.jsx(de,{placement:u?"bottom-end":"top-start",maxW:{base:"calc(100vw - 16px)",lg:"unset"},tooltip:u?e.jsxs(O,{as:"div",lineHeight:"20px",children:[e.jsx(s,{as:"span",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders.Â "}),e.jsx(s,{as:"span",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100%Â "}),e.jsx(s,{as:"span",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}):e.jsxs(x,{alignItems:"start",children:[e.jsx(s,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders."}),e.jsx(s,{whiteSpace:"nowrap",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100%"}),e.jsx(s,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}),children:e.jsx(O,{children:e.jsx(ue,{xlinkHref:"#icon-icon_tips"})})})]}),e.jsx(G,{isLoaded:a!=="0",children:e.jsxs(s,{fontSize:"18px",color:"text_caption",children:["â‰ˆ",ge(a,2)]})})]})}),e.jsx(h,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(p,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsx(s,{color:"primary_gray",children:"Your Share"}),e.jsx(G,{isLoaded:!d,children:e.jsx(s,{fontSize:"18px",color:"text_caption",children:t!=="--"?`â‰ˆ${t}`:t})})]})})]}),"(",e.jsx(h,{borderRadius:"12px",w:"100%",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(x,{h:"100%",w:"100%",gap:{base:"20px",lg:"14px"},children:[e.jsxs(p,{w:"100%",justifyContent:"space-between",children:[e.jsx(s,{color:"primary_gray",children:"Pending Yield"}),e.jsxs(p,{justifyContent:"end",gap:"12px",children:[e.jsx(s,{fontSize:"18px",color:"text_caption",children:c?E(i,2):"--"}),!u&&o.length>0&&e.jsx(v,{onClick:()=>{l||g(r)},variant:"outline",h:"28px",w:"80px",borderRadius:"8px",fontSize:"14px",disabled:l,isLoading:l,bg:"button_ghost_bg",children:"Claim"})]})]}),o.length>0&&e.jsx(C,{w:"100%",flexDir:{base:"column",lg:"row"},align:"center",justify:{base:"center",lg:"flex-start"},gap:{base:"20px",lg:"8px"},children:o.map(f=>e.jsx(ve,{info:f},f.coin_type))}),u&&o.length>0&&e.jsx(v,{onClick:()=>{l||g(r)},variant:"outline",h:"40px",w:"168px",borderRadius:"12px",fontSize:"14px",disabled:l,isLoading:l,bg:"button_ghost_bg",children:"Claim"})]})}),")"]})}function ve(n){const{info:t}=n,{tokenInfo:a}=we(t.coin_type),{isApp:i}=w();return i?e.jsx(Q,{label:e.jsxs(p,{children:[e.jsx(K,{imageUrl:a==null?void 0:a.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(s,{children:a==null?void 0:a.symbol})]}),value:e.jsxs(x,{alignItems:"flex-end",gap:"4px",children:[e.jsx(s,{color:"text_caption",children:t.amount}),Y(t.value).gt("0")&&e.jsx(s,{children:E(t.value,2)})]})}):e.jsx(Z,{wrapStyle:{gap:"10px",flex:1,alignItems:"flex-start"},title:e.jsxs(p,{children:[e.jsx(K,{imageUrl:a==null?void 0:a.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(s,{children:a==null?void 0:a.symbol})]}),value:e.jsxs(x,{alignItems:"flex-start",gap:"4px",children:[e.jsx(s,{color:"text_caption",children:t.amount}),Y(t.value).gt("0")&&e.jsx(s,{children:E(t.value,2)})]})})}function Ae(n){const{totalAmount:t,availableAmount:a,redeemingAmount:i,isLoading:o}=n,{currentAccount:r}=U();return w(),e.jsxs(x,{w:{base:"100%",lg:"100%"},gap:{base:"20px",lg:"28px"},zIndex:"100",mt:{base:"20px",lg:"32px"},children:[e.jsxs(x,{w:"100%",h:"140px",gap:"20px",borderRadius:"20px",bg:{base:"none",lg:"center / cover no-repeat url('/images/xcetus_banner.png')"},align:"center",justify:"center",children:[e.jsxs(s,{h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_caption",children:["Manage your"," ",e.jsx(s,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_green",children:"CETUS"})," ","and"," ",e.jsx(s,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"primary",children:"xCETUS"})]}),e.jsx(v,{h:"28px",w:"132px",fontSize:"14px",fontWeight:"600",variant:"outline",bg:"transparent",borderRadius:"8px",borderColor:"text_highlight",color:"text_highlight",onClick:()=>{window.open("https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus","_blank")},children:"Learn more"})]}),e.jsxs(C,{flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"80%"},justifyContent:{base:"space-between",lg:"space-around"},align:{base:"flex-start",lg:"center"},gap:{base:"16px",lg:"40px"},children:[e.jsx(L,{isLoading:o,icon:"/images/icon_my_total_xWHALE@2x.png",title:"My total xCETUS",amount:r?z(T(t,9),9).toString():"--",w:{base:"28px",lg:"42px"},h:{base:"24px",lg:"36px"},wrapStyle:{gap:"2px"}}),e.jsx(L,{isLoading:o,icon:"/images/icon_available_xWHALE@2x.png",title:"Available xCETUS",amount:r?z(T(a,9),9).toString():"--",w:{base:"24px",lg:"36px"},h:{base:"24px",lg:"36px"}}),e.jsx(L,{isLoading:o,icon:"/images/icon_redeeming_xWHALE@2x.png",title:"Redeeming xCETUS",amount:r?z(T(i,9),9).toString():"--",w:{base:"26px",lg:"38px"},h:{base:"26px",lg:"38px"}})]})]})}function L(n){const{isLoading:t,icon:a,title:i,amount:o,w:r,h:l,wrapStyle:g={}}=n,{isApp:c}=w();return c?e.jsx(Q,{label:e.jsxs(p,{...g,children:[e.jsx($,{src:a,w:r,h:l}),e.jsx(s,{children:i})]}),value:o,isLoading:t,labelStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"14px"}}):e.jsxs(p,{gap:"6px",alignItems:"center",w:{base:"100%",lg:"auto"},...g,children:[e.jsx($,{src:a,w:r,h:l}),e.jsx(Z,{wrapStyle:{gap:"8px"},title:i,titleStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"16px",fontWeight:"500"},value:o,isLoading:t})]})}const R=[{label:"Get xCETUS",value:"Get xCETUS"},{label:"Redeem CETUS",value:"Redeem CETUS"}];function Qe(){const{currentAccount:n}=U(),{fetchOwnerVeNFT:t,fetchXCetusManager:a,fetchVeNFTDividendInfo:i,availableXCetusAmount:o,veNFT:r,veNFTLoading:l,lockCetusListLoading:g,redeemingXCetusAmount:c,fetchDividendManager:d,myShare:u,nextStartTime:f,cetusApr:S,summaryRewardList:A,totalRewardValue:ee,lockCetusList:P,rewardList:te,calculateCurrPeriod:ae}=ie(),{dividendManager:X}=I(),{fetchOwnerLockCetusList:H}=je(),[_,M]=m.useState("Get xCETUS"),{fetchAccountBalance:D}=J();Ce({onRpcChange:()=>{a(!1),d(!1),n&&(t(n.address,!0),H(n.address),D())}}),m.useEffect(()=>{n&&(t(n.address,!0),H(n.address))},[n==null?void 0:n.address]),m.useEffect(()=>{a(!1),d(!1),n!=null&&n.address&&D()},[]);const[b,V]=m.useState("#icon-a-icon_trade"),W=()=>{V("#icon-icon_swap1")},B=()=>{V("#icon-a-icon_trade")},F=()=>{var N;const j=(N=R==null?void 0:R.find(k=>(k==null?void 0:k.value)!==_))==null?void 0:N.value;j&&M(j)},{isApp:se}=w();return e.jsxs(x,{gap:"0px",w:"100%",pos:"relative",sx:se?{backgroundImage:"url('/images/xcetus_h5_bg.png')",backgroundPosition:"center 256px",backgroundRepeat:"no-repeat",backgroundSize:"375px 200px"}:{},children:[e.jsx(Ae,{totalAmount:(r==null?void 0:r.xcetus_balance)||"0",availableAmount:o,redeemingAmount:c,isLoading:g||l}),e.jsxs(C,{flexDir:{base:"column-reverse",lg:"row"},mt:{base:"118px",lg:"28px"},zIndex:100,w:"100%",gap:"16px",alignItems:"start",justifyContent:"space-between",children:[e.jsxs(x,{w:"60%",gap:"16px",minW:{base:"100%",lg:"600px"},children:[e.jsx(h,{p:"0px",borderRadius:"16px",w:"100%",children:e.jsxs(x,{w:"100%",gap:"16px",children:[e.jsx(Se,{nextStartTime:f||0,refresh:()=>{r&&i(r.id),d(!0),X&&ae(X)}}),e.jsx(Te,{myShare:u.toString(),cetusApr:S,totalRewardValue:ee,summaryRewardList:A,rewardList:te})]})}),P.length>0&&e.jsx(_e,{lockCetusList:P})]}),e.jsxs(x,{w:"40%",gap:"8px",minW:{base:"100%",lg:"380px"},children:[e.jsx(he,{type:"borderTab",wrapStyle:{w:"100%",h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:R,currentTab:_,handleChangeTab:j=>{M(j==null?void 0:j.value)}}),_==="Get xCETUS"&&e.jsx(le,{availableXCetusAmount:o,onIconClick:F,iconParams:{xlinkHref:b,svgFill:"text_caption",transform:b==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:b==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:W,onMouseLeave:B}}),_==="Redeem CETUS"&&e.jsx(xe,{availableXCetusAmount:T(o,9),onIconClick:F,iconParams:{xlinkHref:b,svgFill:"text_caption",transform:b==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:b==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:W,onMouseLeave:B}})]})]})]})}export{Qe as default};
//# sourceMappingURL=XCetus-Dw1DRFGV.js.map
