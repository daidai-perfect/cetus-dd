import{a as f,j as e,W as _e,X as Te,Y as ve,Z as ke,a7 as Re,$ as Le,a0 as Me,V as y,H as T,T as x,q as W,f as re,a1 as Ae,a2 as Ee,a3 as Ie,a4 as De,C as te,a6 as J,p as pe,I as ue}from"./vendor-BowHGuwE.js";import{u as K}from"./useTransaction-CQE1pk2O.js";import{n as X,k as Y,ax as U,y as O,d as $,E as ie,F as oe,Q as z,w as fe,j as he,B as I,aa as ce,a as q,e as G,f as V,J as ze,I as Ue,R as le,r as Pe,$ as ne,G as Oe}from"./index-CgoR1qPP.js";import{M as Q}from"./msafe-oYBkW7LJ.js";import{u as N}from"./useAccountBalance-CUv7A_t2.js";import{u as ge}from"./useTokenBalance-DEiNyNp3.js";import{u as Z,a as ee,X as me,b as be,c as Xe,d as Fe,e as Be}from"./useXCetusHelper-D-Nfel4b.js";import{T as Ce}from"./TradeInputGroup-BcVVlX5r.js";import{C as Ve}from"./CheckBox-BSexf8uX.js";import{H as We}from"./HighlightText-DJrmlQd_.js";import{H as xe}from"./HTextLabelBox-By6y981y.js";import{V as Se}from"./VTextLabelBox-Cda-xajC.js";import{u as Ne}from"./useToken-BSXfP_ez.js";import{u as He}from"./useRpcListener-DP2ip6mE.js";import"./useTrack-BBSMkN1s.js";import"./useSigner-BLLz5msp.js";import"./index-DoMH3iiU.js";import"./debounce-0tBm08Ev.js";import"./index-V0MTi46y.js";import"./_getAllKeysIn-ChSnMJ3L.js";import"./usePreviousValue-ChnvxeJQ.js";const we=(a,t,s="seconds")=>{const r=()=>{const l=a-new Date().getTime();if(l<=0)return{years:0,months:0,days:0,hours:0,minutes:0,seconds:0};const d=Math.floor(l/1e3%60),o=Math.floor(l/1e3/60%60),p=Math.floor(l/(1e3*60*60)%24),u=Math.floor(l/(1e3*60*60*24)%30),h=Math.floor(l/(1e3*60*60*24*30)%12),S=Math.floor(l/(1e3*60*60*24*365));return s==="days"?{years:0,months:0,days:u+h*30+S*365,hours:p,minutes:o,seconds:d}:s==="months"?{years:0,months:h+S*12,days:u,hours:p,minutes:o,seconds:d}:{years:S,months:h,days:u,hours:p,minutes:o,seconds:d}},[n,i]=f.useState(r());return f.useEffect(()=>{const c=setInterval(()=>{const l=r();i(l),l.years===0&&l.months===0&&l.days===0&&l.hours===0&&l.minutes===0&&l.seconds===0&&(clearInterval(c),t&&t())},1e3);return()=>clearInterval(c)},[a]),n};function Ge(){const{fetchAccountBalance:a}=N(),{fetchOwnerLockCetusList:t}=Z(),{signAndExecuteTransaction:s}=K(),{currentAccount:r}=X(),{fetchOwnerVeNFT:n}=ee(),i=Y("xcetus"),{veNFT:c}=U(),[l,d]=f.useState(""),[o,p]=f.useState(""),{balanceInfo:u}=ge(O.cetus_coin),h=b=>{d(b),p(b)},[S,w]=f.useState(!1),v=async()=>{w(!0);const b={venft_id:c==null?void 0:c.id,amount:ie(l,9).toFixed(0)},D=await i.XCetusModule.convertPayload(b),M=await s(D,{getShowInfo:k=>{const A=`Converting ${oe(l)} CETUS to ${oe(l)} xCETUS`,P={modalTitleText:"Convert",modalDescriptionText:A,toastDescriptionContent:A};if(k==="success"){const R=A.replace("Converting","Converted");P.modalDescriptionText=R,P.toastDescriptionContent=R}return P}},{msafeParams:{action:Q.xCETUSConvert,txbParams:b}});w(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ useXCetusConvertAction.ts:76 ~ handleConvertClick ~ res:",M),M&&(r&&n(r==null?void 0:r.address,!0),d(""),p(""),setTimeout(()=>{a()},2e3),t())},C=f.useMemo(()=>{const b={text:"Convert",disabled:!1};return r!=null&&r.address?+l?(+l&&$(l).gt((u==null?void 0:u.balanceFormat)||0)&&(b.disabled=!0,b.text="Insufficient CETUS Balance"),b):(b.text="Enter an amount",b.disabled=!0,b):(b.text="Connect Wallet",b.disabled=!1,b)},[u==null?void 0:u.balanceFormat,r==null?void 0:r.address,l]);return{inputAmountFrom:l,inputAmountTo:o,handleInputChange:h,balanceInfoFrom:u,convertLoading:S,btnText:C.text,btnDisabled:C.disabled,handleConvertClick:v}}function je(a){const{isOpen:t,onClose:s,onSubmitClick:r}=a,{setShowConvertModel:n}=U(),[i,c]=f.useState(!1);return e.jsxs(_e,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:s,isCentered:!0,children:[e.jsx(Te,{}),e.jsxs(ve,{children:[e.jsx(ke,{children:e.jsx(Re,{fontWeight:"500",fontSize:"16px"})}),e.jsx(Le,{}),e.jsx(Me,{textAlign:"center",p:"0px",children:e.jsxs(y,{w:"100%",gap:"20px",p:"20px",pb:"90px",pos:"relative",children:[e.jsx(We,{text_color:"text_caption",text_size:"14px",text:` Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting
              durations correspond to different redeem ratios. Learn more`,keywords:["Learn more"],onKeywordClick:()=>{window.open("https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus","_blank")}}),e.jsxs(T,{children:[e.jsx(Ve,{checked:i,onClick:()=>{c(!i)}}),e.jsx(x,{color:"text_caption",children:"Do not remind again."})]}),e.jsx(W,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{n(!i),r()},children:"Convert"})]})})]})]})}function $e(a){const{availableXCetusAmount:t,iconParams:s,onIconClick:r}=a,{currentAccount:n,onWalletModal:i}=X(),{inputAmountFrom:c,inputAmountTo:l,handleInputChange:d,balanceInfoFrom:o,btnText:p,btnDisabled:u,handleConvertClick:h,convertLoading:S}=Ge(),{showConvertModel:w}=U(),[v,C]=f.useState(!1);return e.jsxs(y,{w:"100%",gap:"8px",children:[e.jsx(Ce,{onClick:r,borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px"},title:"From",balance:(o==null?void 0:o.balanceFormat)||"",value:c,amountValue:"",loading:!1,onChange:b=>{d(b)},selectable:!1,placeholder:"0.0",token:O.cetus_coin},to:{wrapStyle:{borderRadius:"12px"},title:"To",balance:z(t,9),value:l,half:!1,max:!1,amountValue:"",onChange:b=>{d(b)},selectable:!1,placeholder:"0.0",token:O.x_cetus_coin},iconParams:s}),e.jsx(W,{w:"100%",borderRadius:"12px",h:"56px",fontSize:"20px",fontWeight:"500",disabled:u||S,isLoading:S,onClick:()=>{console.log(n,w,"showConvertModel"),n?w?C(!0):h():i(!0)},children:p}),v&&e.jsx(je,{isOpen:v,onClose:()=>{C(!1)},onSubmitClick:()=>{C(!1),h()}})]})}function Ye(a){const{fetchAccountBalance:t}=N(),{fetchOwnerLockCetusList:s}=Z(),{signAndExecuteTransaction:r}=K(),{currentAccount:n}=X(),{fetchOwnerVeNFT:i}=ee(),c=Y("xcetus"),{veNFT:l}=U(),[d,o]=f.useState(""),[p,u]=f.useState(""),[h,S]=f.useState(180),[w,v]=f.useState(""),[C,b]=f.useState(!0),{balanceInfo:D}=ge(O.cetus_coin),M=(m,E)=>{b(E),E?o(m):u(m),A(m,E,h)},k=m=>{S(m),A(C?d:p,C,m)},A=async(m,E,F)=>{if(+m){const _=ie(m,9);if(E){const L=await c.XCetusModule.redeemNum(_,F);u(z(L.amount_out,9)),v($(L.percent).mul(100).toFixed(2,fe.ROUND_DOWN))}else{const L=await c.XCetusModule.reverseRedeemNum(_,F);o(z(L.amount_out,9)),v($(L.percent).mul(100).toFixed(2,fe.ROUND_DOWN))}}else o(""),u(""),v("")},[P,R]=f.useState(!1),H=async()=>{if(!l)return;R(!0);const m={venft_id:l.id,amount:ie(d,9).toFixed(0),lock_day:h},E=c.XCetusModule.redeemLockPayload(m),F=await r(E,{getShowInfo:_=>{const L=`Redeeming ${oe(d)} xCETUS to ${oe(p)} CETUS`,g={modalTitleText:"Redeem",modalDescriptionText:L,toastDescriptionContent:L};if(_==="success"){const j=L.replace("Redeeming","Redeemed");g.modalDescriptionText=j,g.toastDescriptionContent=j}return g}},{msafeParams:{action:Q.xCETUSRedeemLock,txbParams:m}});R(!1),F&&(n&&i(n==null?void 0:n.address,!0),o(""),u(""),t(),s())},B=f.useMemo(()=>{const m={text:"Redeem",disabled:!1};return n!=null&&n.address?+d?(+d&&$(d).gt(a||0)&&(m.disabled=!0,m.text="Insufficient xCETUS Balance"),m):(m.text="Enter an amount",m.disabled=!0,m):(m.text="Connect Wallet",m.disabled=!1,m)},[a,n==null?void 0:n.address,d]);return{inputAmountFrom:d,inputAmountTo:p,handleInputChange:M,balanceInfoTo:D,convertLoading:P,btnText:B.text,btnDisabled:B.disabled,handleConvertClick:H,day:h,handleDayChange:k,percent:w}}function qe(a){const{day:t,onChange:s}=a,r=f.useMemo(()=>`${t}D`,[t]),n=[{label:"15D"},{label:"30D"},{label:"90D"},{label:"180D"}];return e.jsxs(re,{children:[e.jsxs(T,{w:"100%",justifyContent:"space-between",m:"10px 0",children:[e.jsxs(x,{fontSize:"16px",color:"text_caption",whiteSpace:"nowrap",children:[t," Days"]}),e.jsx(he,{type:"outlineTab",tabList:n,currentTab:r,handleChangeTab:i=>{i.label==="MAX"?s(100):s(i.label.replace("D",""))},wrapStyle:{flex:"1",maxW:"300px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px"}})]}),e.jsxs(Ae,{"aria-label":"slider-ex-1",min:15,max:180,focusThumbOnChange:!1,value:Number(t),onChange:i=>s(i),children:[e.jsx(Ee,{h:"8px",children:e.jsx(Ie,{h:"4px"})}),e.jsx(De,{})]})]})}function Je(a){const{availableXCetusAmount:t,iconParams:s,onIconClick:r}=a,{currentAccount:n,onWalletModal:i}=X(),{inputAmountFrom:c,inputAmountTo:l,handleInputChange:d,balanceInfoTo:o,btnText:p,btnDisabled:u,handleConvertClick:h,day:S,handleDayChange:w,percent:v,convertLoading:C}=Ye(t),{showConvertModel:b}=U(),[D,M]=f.useState(!1);return e.jsxs(y,{w:"100%",gap:"8px",children:[e.jsx(Ce,{onClick:r,borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px"},title:"From",balance:t,value:c,amountValue:"",loading:!1,onChange:k=>{d(k,!0)},selectable:!1,placeholder:"0.0",token:O.x_cetus_coin},to:{wrapStyle:{borderRadius:"12px"},title:"To",balance:(o==null?void 0:o.balanceFormat)||"",value:l,half:!1,max:!1,amountValue:"",onChange:k=>{d(k,!1)},selectable:!1,placeholder:"0.0",token:O.cetus_coin},iconParams:s}),e.jsxs(I,{borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[e.jsx(x,{mb:"16px",color:"primary_gray",children:"Vesting duration"}),e.jsx(qe,{day:S,onChange:k=>{w(Number(k))}})]}),e.jsx(I,{borderRadius:"12px",p:"0px",border:"none",children:e.jsxs(y,{w:"100%",gap:"20px",children:[e.jsx(W,{mt:"-1px",w:"100%",borderRadius:"12px",h:"56px",fontSize:"20px",fontWeight:"500",disabled:u||C,isLoading:C,onClick:()=>{n?b?M(!0):h():i(!0)},children:p}),+v&&e.jsx(T,{w:"100%",p:"34px 16px 20px",border:"1px solid",borderColor:"border",mt:"-34px",borderRadius:"12px",children:e.jsx(xe,{label:"Redeem ratio",labelStyle:{fontSize:"14px"},value:ce(v),valueStyle:{fontSize:"14px"}})})]})}),D&&e.jsx(je,{isOpen:D,onClose:()=>{M(!1)},onSubmitClick:()=>{M(!1),h()}})]})}function Ke({nextStartTime:a,refresh:t}){const{days:s,hours:r,minutes:n,seconds:i}=we(a*1e3,t);return e.jsxs(y,{w:"100%",gap:"16px",borderRadius:"16px",m:"-1px",p:{base:"24px 12px",lg:"24px"},sx:{backgroundImage:"url('/images/img_xcetus@2x.png')",backgroundPosition:"top center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:"Convert CETUS to xCETUS to start earning"}),e.jsx(x,{children:"Reward distribution in "}),e.jsxs(T,{children:[e.jsx(I,{borderRadius:"4px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[s,"d"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[r,"h"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[n,"m"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[i,"s"]})})})]})]})}function Qe(){const{fetchAccountBalance:a}=N(),{fetchOwnerLockCetusList:t}=Z(),{signAndExecuteTransaction:s}=K(),r=Y("xcetus"),{veNFT:n}=U(),{fetchOwnerVeNFT:i}=ee(),{currentAccount:c}=X(),[l,d]=f.useState(!1);return{handleCancelOrder:async p=>{if(!n)return;d(!0);const u={venft_id:n.id,lock_id:p.id},h=r.XCetusModule.cancelRedeemPayload(u),S=await s(h,{},{msafeParams:{action:Q.xCETUSCancelRedeem,txbParams:u}});d(!1),S&&(a(),t(),c&&i(c==null?void 0:c.address,!0))},cancelOrderLoading:l}}function Ze(){const{fetchAccountBalance:a}=N(),{fetchOwnerLockCetusList:t}=Z(),{signAndExecuteTransaction:s}=K(),r=Y("xcetus"),{veNFT:n}=U(),{fetchOwnerVeNFT:i}=ee(),{currentAccount:c}=X(),[l,d]=f.useState(!1);return{handleClaimOrder:async p=>{if(d(!0),!n)return;const u={lock_id:p,venft_id:n.id},h=await r.XCetusModule.redeemPayload(u),S=await s(h,{},{useDevInspect:!1,msafeParams:{action:Q.xCETUSRedeem,txbParams:u}});d(!1),S&&(a(),t(),c&&i(c==null?void 0:c.address,!0))},claimOrderLoading:l}}function et(a){const{lockCetusList:t}=a;return e.jsx(I,{p:{base:"16px 8px 8px",lg:"16px"},borderRadius:"16px",children:e.jsxs(y,{w:"100%",alignItems:"start",gap:"16px",children:[e.jsx(x,{fontSize:"16px",color:"text_caption",mt:"4px",children:"Vesting"}),t.map(s=>e.jsx(tt,{info:s},s.id))]})})}function tt(a){const{info:t}=a,[s,r]=f.useState(!1),{days:n,hours:i,minutes:c,seconds:l}=we(t.locked_until_time*1e3,()=>{r(!0)},"days");f.useEffect(()=>{r(!me.isLocked(t))},[]);const{cancelOrderLoading:d,handleCancelOrder:o}=Qe(),{claimOrderLoading:p,handleClaimOrder:u}=Ze(),h=w=>{w?u(t.id):o(t)},{isApp:S}=q();return e.jsx(I,{borderRadius:"12px",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(J,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:{base:"flex-start",lg:"space-between"},gap:{base:"20px",lg:"8px"},children:[e.jsxs(y,{gap:{base:"20px",lg:"8px"},alignItems:"start",children:[e.jsxs(T,{gap:"6px",children:[e.jsxs(x,{color:"primary_gray",children:["Available ",s?"":" in"," "]}),!s&&e.jsxs(x,{color:"text_caption",children:[n,"d : ",i,"h : ",c,"m : ",l,"s"]})]}),S?e.jsxs(y,{w:"100%",align:"center",gap:"8px",children:[e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.x_cetus_coin.logo_url,p:"4px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.xcetus_amount,9),9)," xCETUS"]})]}),e.jsx(x,{color:"text_caption",transform:"rotate(90deg)",children:"â†’"}),e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.cetus_coin.logo_url,p:"2px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.cetus_amount,9),9)," CETUS "]})]})]}):e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.x_cetus_coin.logo_url,p:"4px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.xcetus_amount,9),9)," xCETUS â†’"]}),e.jsx(G,{imageUrl:O.cetus_coin.logo_url,p:"2px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.cetus_amount,9),9)," CETUS "]})]})]}),e.jsx(T,{w:{base:"100%",lg:"auto"},justify:"center",children:e.jsx(W,{onClick:()=>{d||p||h(!!s)},variant:"outline",h:{base:"40px",lg:"28px"},w:{base:"168px",lg:"80px"},borderRadius:{base:"12px",lg:"8px"},fontSize:"14px",isLoading:d||p,color:s?"text_highlight":"primary_gray",bg:"button_ghost_bg",children:s?"Claim":"Cancel"})})]})})}function nt(){const{fetchAccountBalance:a}=N(),{signAndExecuteTransaction:t}=K(),s=Y("xcetus"),{veNFT:r}=U(),[n,i]=f.useState(!1),{fetchVeNFTDividendInfo:c}=be();return{handleClaimReward:async d=>{if(r){i(!0),console.log("ðŸš€ ~ file: useXCetusClaimRewardAction.ts:23 ~ handleClaimReward ~ rewardList:",d);try{const o=s.XCetusModule.redeemDividendV3Payload(r.id,d),p=await t(o,{},{useDevInspect:!0,msafeParams:{action:Q.xCETUSClaimStakingRwewards,txbParams:{veNftId:r.id,rewardList:d}}});i(!1),p&&(a(),c(r.id))}catch(o){console.log("ðŸš€ ~ file: useXCetusClaimRewardAction.ts:40 ~ handleClaimReward ~ error:",o)}finally{i(!1)}}},claimRewardLoading:n}}function st(a){const{myShare:t,cetusApr:s,totalRewardValue:r,summaryRewardList:n,rewardList:i}=a;console.log("ðŸš€ðŸš€ðŸš€ ~ StakeRewardSummary.tsx:25 ~ StakeRewardSummary ~ summaryRewardList:",n);const{claimRewardLoading:c,handleClaimReward:l}=nt(),{currentAccount:d}=X();console.log(s,"cetusApr");const{veNFTLoading:o}=U(),{isApp:p}=q(),u=f.useMemo(()=>{var h;return Number((h=n==null?void 0:n[0])==null?void 0:h.value)>0||n.length==0},[n]);return e.jsxs(y,{w:"100%",alignItems:"start",p:{base:"4px 8px 8px",lg:"4px 16px 16px"},gap:"16px",children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:"xCETUS Staking Rewards"}),e.jsxs(J,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",justifyContent:"space-between",children:[e.jsx(I,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(T,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsxs(T,{gap:"4px",children:[e.jsx(x,{color:"primary_gray",children:"est.APR"}),e.jsx(ze,{placement:p?"bottom-end":"top-start",maxW:{base:"calc(100vw - 16px)",lg:"unset"},tooltip:p?e.jsxs(re,{as:"div",lineHeight:"20px",children:[e.jsx(x,{as:"span",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders.Â "}),e.jsx(x,{as:"span",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100%Â "}),e.jsx(x,{as:"span",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}):e.jsxs(y,{alignItems:"start",children:[e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders."}),e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100%"}),e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}),children:e.jsx(re,{children:e.jsx(Ue,{xlinkHref:"#icon-icon_tips"})})})]}),e.jsx(pe,{isLoaded:s!=="0",children:e.jsxs(x,{fontSize:"18px",color:"text_caption",children:["â‰ˆ",ce(s,2)]})})]})}),e.jsx(I,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(T,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsx(x,{color:"primary_gray",children:"Your Share"}),e.jsx(pe,{isLoaded:!o,children:e.jsx(x,{fontSize:"18px",color:"text_caption",children:t!=="--"?`â‰ˆ${t}`:t})})]})})]}),"(",e.jsx(I,{borderRadius:"12px",w:"100%",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(y,{h:"100%",w:"100%",gap:{base:"20px",lg:"14px"},children:[e.jsxs(T,{w:"100%",justifyContent:"space-between",children:[e.jsx(x,{color:"primary_gray",children:"Pending Yield"}),e.jsxs(T,{justifyContent:"end",gap:"12px",children:[e.jsx(x,{fontSize:"18px",color:"text_caption",children:d&&u?le(r,2):"--"}),!p&&n.length>0&&e.jsx(W,{onClick:()=>{c||l(i)},variant:"outline",h:"28px",w:"80px",borderRadius:"8px",fontSize:"14px",disabled:c,isLoading:c,bg:"button_ghost_bg",children:"Claim"})]})]}),n.length>0&&e.jsx(J,{w:"100%",flexDir:{base:"column",lg:"row"},align:"center",justify:{base:"center",lg:"flex-start"},gap:{base:"20px",lg:"8px"},children:n.map(h=>e.jsx(ot,{info:h},h.coin_type))}),p&&n.length>0&&e.jsx(W,{onClick:()=>{c||l(i)},variant:"outline",h:"40px",w:"168px",borderRadius:"12px",fontSize:"14px",disabled:c,isLoading:c,bg:"button_ghost_bg",children:"Claim"})]})}),")"]})}function ot(a){const{info:t}=a,{tokenInfo:s}=Ne(t.coin_type),{isApp:r}=q();return r?e.jsx(xe,{label:e.jsxs(T,{children:[e.jsx(G,{imageUrl:s==null?void 0:s.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(x,{children:s==null?void 0:s.symbol})]}),value:e.jsxs(y,{alignItems:"flex-end",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:t.amount}),$(t.value).gt("0")&&e.jsx(x,{children:le(t.value,2)})]})}):e.jsx(Se,{wrapStyle:{gap:"10px",flex:1,alignItems:"flex-start"},title:e.jsxs(T,{children:[e.jsx(G,{imageUrl:s==null?void 0:s.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(x,{children:s==null?void 0:s.symbol})]}),value:e.jsxs(y,{alignItems:"flex-start",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:t.amount}),$(t.value).gt("0")&&e.jsx(x,{children:le(t.value,2)})]})})}function at(a){const{totalAmount:t,availableAmount:s,redeemingAmount:r,isLoading:n}=a,{currentAccount:i}=X();return q(),e.jsxs(y,{w:{base:"100%",lg:"100%"},gap:{base:"20px",lg:"28px"},zIndex:"100",mt:{base:"20px",lg:"32px"},children:[e.jsxs(y,{w:"100%",h:"140px",gap:"20px",borderRadius:"20px",bg:{base:"none",lg:"center / cover no-repeat url('/images/xcetus_banner.png')"},align:"center",justify:"center",children:[e.jsxs(x,{h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_caption",children:["Manage your"," ",e.jsx(x,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_green",children:"CETUS"})," ","and"," ",e.jsx(x,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"primary",children:"xCETUS"})]}),e.jsx(W,{h:"28px",w:"132px",fontSize:"14px",fontWeight:"600",variant:"outline",bg:"transparent",borderRadius:"8px",borderColor:"text_highlight",color:"text_highlight",onClick:()=>{window.open("https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus","_blank")},children:"Learn more"})]}),e.jsxs(J,{flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"80%"},justifyContent:{base:"space-between",lg:"space-around"},align:{base:"flex-start",lg:"center"},gap:{base:"16px",lg:"40px"},children:[e.jsx(ae,{isLoading:n,icon:"/images/icon_my_total_xWHALE@2x.png",title:"My total xCETUS",amount:i?V(z(t,9),9).toString():"--",w:{base:"28px",lg:"42px"},h:{base:"24px",lg:"36px"},wrapStyle:{gap:"2px"}}),e.jsx(ae,{isLoading:n,icon:"/images/icon_available_xWHALE@2x.png",title:"Available xCETUS",amount:i?V(z(s,9),9).toString():"--",w:{base:"24px",lg:"36px"},h:{base:"24px",lg:"36px"}}),e.jsx(ae,{isLoading:n,icon:"/images/icon_redeeming_xWHALE@2x.png",title:"Redeeming xCETUS",amount:i?V(z(r,9),9).toString():"--",w:{base:"26px",lg:"38px"},h:{base:"26px",lg:"38px"}})]})]})}function ae(a){const{isLoading:t,icon:s,title:r,amount:n,w:i,h:c,wrapStyle:l={}}=a,{isApp:d}=q();return d?e.jsx(xe,{label:e.jsxs(T,{...l,children:[e.jsx(ue,{src:s,w:i,h:c}),e.jsx(x,{children:r})]}),value:n,isLoading:t,labelStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"14px"}}):e.jsxs(T,{gap:"6px",alignItems:"center",w:{base:"100%",lg:"auto"},...l,children:[e.jsx(ue,{src:s,w:i,h:c}),e.jsx(Se,{wrapStyle:{gap:"8px"},title:r,titleStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"16px",fontWeight:"500"},value:n,isLoading:t})]})}function rt(){const a=Y("xcetus"),{currentAccount:t}=X(),{fetchAccountBalance:s}=N(),{fetchTokenPrices:r}=Pe(),{lockCetusList:n,veNFTLoading:i,lockCetusListLoading:c,clearData:l,owner:d,veNFT:o,XCetusManager:p,setXCetusManager:u,setDividendManager:h,setPhaseDividendInfoMap:S,phaseDividendInfoMap:w}=U(),{nextStartTime:v,currentPeriod:C,calculateCurrPeriod:b}=Xe(),{summaryRewardList:D,rewardList:M,totalRewardValue:k}=Fe(C),{fetchVeNFTDividendInfo:A}=be(),P=async g=>{try{const j=await a.XCetusModule.getXcetusManager(g);j&&u(j)}catch(j){console.log("ðŸš€ ~ fetchXCetusManager ~ error:",j)}},R=async g=>{try{const j=await a.XCetusModule.getPhaseDividendInfo(g.toString());if(j)S(j);else{const ye=(g-1).toString();if(!w[ye]){const de=await a.XCetusModule.getPhaseDividendInfo(g.toString());de&&S(de)}}}catch(j){console.log("ðŸš€ ~ fetchXCetusManager ~ error:",j)}},H=async g=>{try{const j=await a.XCetusModule.getDividendManager(g);j&&h(j)}catch(j){console.log("ðŸš€ ~ fetchXCetusManager ~ error:",j)}},{fetchOwnerVeNFT:B}=ee(),m=f.useMemo(()=>{if(o&&t&&!c){const g=me.getAvailableXCetus(o,n);if(ne(g).gte(0))return g}return"0"},[o==null?void 0:o.xcetus_balance,n]),E=f.useMemo(()=>{if(o){const g=ne(o.xcetus_balance).sub(m);if(g.gte(0))return g.toFixed(0)}return"0"},[o==null?void 0:o.xcetus_balance,m]),F=f.useMemo(()=>{if(p&&o){const g=ne(o.xcetus_balance).div(p.treasury).mul(100);return ne(g).lt(.01)?"<0.01%":ce(g.toString(),3)}return t!=null&&t.address?"0%":"--"},[p==null?void 0:p.treasury,o==null?void 0:o.xcetus_balance,t==null?void 0:t.address]),_=f.useMemo(()=>{if(C){let g=w[C.toString()];return g===void 0&&(g=w[(C-1).toString()]),g}},[w,C]),{cetusApr:L}=Be(_,p==null?void 0:p.treasury);return f.useEffect(()=>{if(_){const g=_.bonus_types.map(j=>Oe(j,!1));g&&(g.push("0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"),r(g))}},[_==null?void 0:_.id]),f.useEffect(()=>{C&&C>0&&R(C)},[C]),f.useEffect(()=>{o&&A(o.id)},[o==null?void 0:o.id]),{fetchOwnerVeNFT:B,fetchAccountBalance:s,fetchXCetusManager:P,fetchDividendManager:H,fetchVeNFTDividendInfo:A,veNFTLoading:i,lockCetusListLoading:c,redeemingXCetusAmount:E,availableXCetusAmount:m,veNFT:o,myShare:F,nextStartTime:v,cetusApr:L,summaryRewardList:D,rewardList:M,totalRewardValue:k,lockCetusList:n,calculateCurrPeriod:b}}const se=[{label:"Get xCETUS",value:"Get xCETUS"},{label:"Redeem CETUS",value:"Redeem CETUS"}];function Lt(){const{currentAccount:a}=X(),{fetchOwnerVeNFT:t,fetchXCetusManager:s,fetchVeNFTDividendInfo:r,availableXCetusAmount:n,veNFT:i,veNFTLoading:c,lockCetusListLoading:l,redeemingXCetusAmount:d,fetchDividendManager:o,myShare:p,nextStartTime:u,cetusApr:h,summaryRewardList:S,totalRewardValue:w,lockCetusList:v,rewardList:C,calculateCurrPeriod:b}=rt(),{dividendManager:D}=U(),{fetchOwnerLockCetusList:M}=Z(),[k,A]=f.useState("Get xCETUS"),{fetchAccountBalance:P}=N();He({onRpcChange:()=>{s(!1),o(!1),a&&(t(a.address,!0),M(a.address),P())}}),f.useEffect(()=>{a&&(t(a.address,!0),M(a.address))},[a==null?void 0:a.address]),f.useEffect(()=>{s(!1),o(!1),a!=null&&a.address&&P()},[]);const[R,H]=f.useState("#icon-a-icon_trade"),B=()=>{H("#icon-icon_swap1")},m=()=>{H("#icon-a-icon_trade")},E=()=>{var L;const _=(L=se==null?void 0:se.find(g=>(g==null?void 0:g.value)!==k))==null?void 0:L.value;_&&A(_)},{isApp:F}=q();return e.jsxs(y,{gap:"0px",w:"100%",pos:"relative",sx:F?{backgroundImage:"url('/images/xcetus_h5_bg.png')",backgroundPosition:"center 256px",backgroundRepeat:"no-repeat",backgroundSize:"375px 200px"}:{},children:[e.jsx(at,{totalAmount:(i==null?void 0:i.xcetus_balance)||"0",availableAmount:n,redeemingAmount:d,isLoading:l||c}),e.jsxs(J,{flexDir:{base:"column-reverse",lg:"row"},mt:{base:"118px",lg:"28px"},zIndex:100,w:"100%",gap:"16px",alignItems:"start",justifyContent:"space-between",children:[e.jsxs(y,{w:"60%",gap:"16px",minW:{base:"100%",lg:"600px"},children:[e.jsx(I,{p:"0px",borderRadius:"16px",w:"100%",children:e.jsxs(y,{w:"100%",gap:"16px",children:[e.jsx(Ke,{nextStartTime:u||0,refresh:()=>{i&&r(i.id),o(!0),D&&b(D)}}),e.jsx(st,{myShare:p.toString(),cetusApr:h,totalRewardValue:w,summaryRewardList:S,rewardList:C})]})}),v.length>0&&e.jsx(et,{lockCetusList:v})]}),e.jsxs(y,{w:"40%",gap:"8px",minW:{base:"100%",lg:"380px"},children:[e.jsx(he,{type:"borderTab",wrapStyle:{w:"100%",h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:se,currentTab:k,handleChangeTab:_=>{A(_==null?void 0:_.value)}}),k==="Get xCETUS"&&e.jsx($e,{availableXCetusAmount:n,onIconClick:E,iconParams:{xlinkHref:R,svgFill:"text_caption",transform:R==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:R==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:B,onMouseLeave:m}}),k==="Redeem CETUS"&&e.jsx(Je,{availableXCetusAmount:z(n,9),onIconClick:E,iconParams:{xlinkHref:R,svgFill:"text_caption",transform:R==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:R==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:B,onMouseLeave:m}})]})]})]})}export{Lt as default};
//# sourceMappingURL=XCetus-C3AUfgZt.js.map
