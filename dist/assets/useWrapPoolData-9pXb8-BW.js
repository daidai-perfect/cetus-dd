import{cn as Ds,s as b,d as e,am as hs,r as Ss,x as Ps,p as U,q as as,a8 as ns}from"./index-BPmJ2jpN.js";import"./vendor-BFGDaAdA.js";const x=(m,_)=>{if(!m||(m==null?void 0:m.length)<1)return _?"0%":"0";const M=m.reduce((ts,B)=>{const ds=B?String(B):"0",s=Ds(ds);return ts.add(s)},e(0));return _?e(M).gt(1e4)?">1,000,000%":b(M.mul(100).toString(),"%"):M.toString()},$=(m,_,M)=>{if(!m)return _?"0%":"0";if(m==="--")return"--";const Z=Ds(m);return M&&e(Z).gt(100)?">10,000%":_?b(e(Z).mul(100).toString(),"%"):Z},bs=m=>`${e(m).mul(100).toString()}%`,Es=(m,_)=>{const M=Ss(m,_);return Ps(M.toString(),_)},Fs=m=>{const _=new Date(m).getDate();return _<10?`0${_}`:String(_)},ws=m=>{var _;return hs((_=e(m))==null?void 0:_.mul(60*60*24).toString(),0)};function Rs(){const m=s=>{var g,r,i;const n=s==null?void 0:s.has_mining;let u=e(0);const t=[],a=[];if(n){const v=((i=(r=(g=s==null?void 0:s.object)==null?void 0:g.rewarder_manager)==null?void 0:r.fields)==null?void 0:i.rewarders)||[],l=(s==null?void 0:s.rewarder_apr)||[];v==null||v.forEach((y,D)=>{var T,F,E,R,h;const A=e((T=y==null?void 0:y.fields)==null?void 0:T.emissions_per_second).mul(as.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&e(A).gt(0)){const c=$(l[D]);u=u.add(c);const f=(h=U((R=(E=(F=y==null?void 0:y.fields)==null?void 0:F.reward_coin)==null?void 0:E.fields)==null?void 0:R.name))==null?void 0:h.source_address;t.push({coinType:f,emissionsEveryDay:ws(A)}),a.push({coinType:f,apr:c,aprDisplay:$(c,!0)})}})}return{haveMining:n&&t.length>0,miningRewardList:t,miningAprList:a,miningAprTotal:u.toString()}},_=s=>{var F,E,R,h,c,f,S,P,d,V;const n=(s==null?void 0:s.is_forward)===!1,u=s==null?void 0:s.has_farming,t=[];let a="",g="",r="",i="",v=0,l=0,y="",D="",A=e(0),T=!1;if(u){a=(F=s==null?void 0:s.stable_farming)==null?void 0:F.stable_farming_pool;const I=(E=s==null?void 0:s.stable_farming)==null?void 0:E.stable_rewarder;I==null||I.forEach((w,q)=>{const W=e(w==null?void 0:w.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${q+1}`]&&W.gt(0)){T=!0;const N=$(w==null?void 0:w.apr);A=A==null?void 0:A.add(N),t.push({coinType:U(w.coin).source_address,emissionsEveryDay:W.mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}}),g=(R=s==null?void 0:s.stable_farming)==null?void 0:R.tvl,r=b((h=s==null?void 0:s.stable_farming)==null?void 0:h.tvl,"$"),i=b(e(A).mul(100).toString(),"%",2,!0),v=(c=s==null?void 0:s.stable_farming)==null?void 0:c.effective_tick_lower,l=(f=s==null?void 0:s.stable_farming)==null?void 0:f.effective_tick_upper;const L=ns.tickIndexToPrice(v,(S=s==null?void 0:s.coin_a)==null?void 0:S.decimals,(P=s==null?void 0:s.coin_b)==null?void 0:P.decimals).toString(),C=ns.tickIndexToPrice(l,(d=s==null?void 0:s.coin_a)==null?void 0:d.decimals,(V=s==null?void 0:s.coin_b)==null?void 0:V.decimals).toString();y=n?e(1).div(C).toString():L,D=n?e(1).div(L).toString():C}return{haveFarming:T,farmsRewarderList:t,farmsApr:A.toString(),farmingAprDisplay:i,farmsStatedTvl:g,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:l,displayFarmsEffectMinPrice:y,displayFarmsEffectMaxPrice:D,farmsPoolAddress:a}},M=(s,n=!1)=>{var es,z,G,J,K,Q,X;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",s);const u=s==null?void 0:s.object,t=(es=s==null?void 0:s.object)==null?void 0:es.index,a=s.address,g=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(G=U((z=s==null?void 0:s.coin_a)==null?void 0:z.address))==null?void 0:G.source_address},i={...s==null?void 0:s.coin_b,coin_type:(K=U((J=s==null?void 0:s.coin_b)==null?void 0:J.address))==null?void 0:K.source_address},v=g?i:r,l=g?r:i,y=`${v==null?void 0:v.symbol} - ${l==null?void 0:l.symbol}`,D=e(s.fee).mul(1e4).toString(),A=e(s.fee).mul(100).toString()+"%",T=s==null?void 0:s.tick_spacing,F=b(s.pure_tvl_in_usd||0),E=b(s.vol_in_usd_24h||0),R=b(s.fee_24_h||0),h=$((Q=s==null?void 0:s.apr)==null?void 0:Q.fee_apr_24h),c=$((X=s==null?void 0:s.apr)==null?void 0:X.fee_apr_24h,!0),{haveMining:f,miningRewardList:S,miningAprList:P,miningAprTotal:d}=m(s),{haveFarming:V,farmsRewarderList:I,farmsApr:L,farmingAprDisplay:C,farmsStatedTvl:w,farmsStatedTvlDisplay:q,farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O}=_(s),j=x([h,d]),is=e(j).gt(1e4)?">1,000,000%":b(e(j).mul(100).toString(),"%"),cs=x([j,L]),fs=x([h,L],!0),ss=x([j,L],!0),H=s.is_vaults,k=!H&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":H?"cetus":"",rs=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return n?{poolAddress:a,name:y,isReverse:g,tokenA:r,tokenB:i,displayTokenA:v,displayTokenB:l,haveMining:f,miningRewardList:null,miningAprList:null,haveFarming:V,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:H,isLocalData:n,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O,tickSpacing:T,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(i==null?void 0:i.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:rs}:{poolAddress:a,name:y,isReverse:g,tokenA:r,tokenB:i,displayTokenA:v,displayTokenB:l,haveMining:f,miningRewardList:S,miningAprList:P,haveFarming:V,farmsRewarderList:I,farmsApr:L,farmingAprDisplay:C,feeApr:h,feeAprDisplay:c,miningAprTotal:d,feeAndMiningAprDisplay:is,totalAprDisplay:ss,fee:s.fee,feeRate:D,feeDisplay:A,tvlDisplay:F,tvl:s.pure_tvl_in_usd||0,volume24Display:E,fees24Display:R,isVaults:H,farmsStatedTvl:w,farmsStatedTvlDisplay:q,feeAndFarmsApr:cs,feeAndFarmsAprDisplay:fs,farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:p,displayFarmsEffectMaxPrice:o,farmsPoolAddress:O,tickSpacing:T,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(i==null?void 0:i.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:rs}},Z=s=>{var c,f,S,P;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:261 ~ handleFarmsV2 ~ pool:",s);const{farmingRewarder:n,showReverse:u}=s;if(!n)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:t,effectiveTickUpper:a,rewarderCoins:g,tvl:r}=n,i=ns.tickIndexToPrice(t,(c=s==null?void 0:s.coinA)==null?void 0:c.decimals,(f=s==null?void 0:s.coinB)==null?void 0:f.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:281 ~ handleFarmsV2 ~ farmingRewarder:",n);const v=ns.tickIndexToPrice(a,(S=s==null?void 0:s.coinA)==null?void 0:S.decimals,(P=s==null?void 0:s.coinB)==null?void 0:P.decimals).toString(),l=u?e(1).div(v).toString():i,y=u?e(1).div(i).toString():v;let D=e(0);g.forEach(d=>{D=D.add(d==null?void 0:d.apr)});const A=D.toString(),T=b(D.mul(100).toString(),"%",2,!0),F=n.farmingPool,E=n.tvl,R=b(E,"$"),h=[];return g.forEach(d=>{e(d==null?void 0:d.emissionsPerSecond).gt(0)&&h.push({coinType:U(d==null?void 0:d.coinType).source_address,emissionsEveryDay:e(d==null?void 0:d.emissionsPerSecond).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:l,displayFarmsEffectMaxPrice:y,farmsApr:A,farmingAprDisplay:T,farmsEffectiveTickLower:t,farmsEffectiveTickUpper:a,farmsPoolAddress:F,farmsRewarderList:h,farmsStatedTvl:E,farmsStatedTvlDisplay:R,haveFarming:h.length>0}},ts=s=>{const{miningRewarders:n,showReverse:u}=s;if(!n)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let t=e(0);const a=[],g=[];return n.forEach(r=>{t=t.add(r==null?void 0:r.apr),r.display&&e(r==null?void 0:r.emissionsPerSecond).gt(0)&&(a.push({coinType:U(r==null?void 0:r.coinType).source_address,emissionsEveryDay:e(r==null?void 0:r.emissionsPerSecond).mul(10**r.decimals).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()}),g.push({coinType:U(r==null?void 0:r.coinType).source_address,apr:r==null?void 0:r.apr,aprDisplay:$(r==null?void 0:r.apr,!0)}))}),{miningAprTotal:t.toString(),miningRewardList:a,haveMining:a.length>0,miningAprList:g}},B=s=>{const{vault:n,extensions:u}=s;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:362 ~ handleVaultsV2 ~ vault:",n),!n)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:t,id:a}=n;return{isUnstableVault:t==="haedal",isVaults:t==="cetus",vaultId:a,vaultCategory:(u==null?void 0:u.showVaults)=="1"?"":t}};return{wrapPoolData:M,wrapPoolDataV2:(s,n=!1)=>{var z,G,J,K,Q,X,us,gs,ms,vs,ys,_s,As;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:261 ~ wrapPoolDataV2 ~ pool:",s);const{showReverse:u,feeRate:t,stats:a,tvl:g,pool:r}=s;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:380 ~ wrapPoolDataV2 ~ stats:",a);const{displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,farmingAprDisplay:l,farmsApr:y,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsPoolAddress:T,farmsRewarderList:F,farmsStatedTvl:E,farmsStatedTvlDisplay:R,haveFarming:h}=Z(s),c={...s==null?void 0:s.coinA,coin_type:(G=U((z=s==null?void 0:s.coinA)==null?void 0:z.coinType))==null?void 0:G.full_address,logo_url:(J=s==null?void 0:s.coinA)==null?void 0:J.logoURL,address:(K=s==null?void 0:s.coinA)==null?void 0:K.coinType,is_trusted:(Q=s==null?void 0:s.coinA)==null?void 0:Q.isVerified},f={...s==null?void 0:s.coinB,coin_type:(us=U((X=s==null?void 0:s.coinB)==null?void 0:X.coinType))==null?void 0:us.full_address,logo_url:(gs=s==null?void 0:s.coinB)==null?void 0:gs.logoURL,address:(ms=s==null?void 0:s.coinB)==null?void 0:ms.coinType,is_trusted:(vs=s==null?void 0:s.coinB)==null?void 0:vs.isVerified},S=u?f:c,P=u?c:f,d=e(t).div(10**6).toString(),{miningAprTotal:V,miningRewardList:I,haveMining:L,miningAprList:C}=ts(s),w=(ys=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:ys.apr,q=(_s=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:_s.fee,W=x([w,y]),N=x([w,y],!0),p=x([w,V],!0),o=$(w,!0),O=$(d,!0),j=b(q,"$"),is=x([w,V]),cs=x([is,y],!0),fs=(c==null?void 0:c.isVerified)&&(f==null?void 0:f.isVerified)&&e(g).gt(1e4),{vaultCategory:ss,vaultId:H,isVaults:k}=B(s),rs=b(s.tvl||0),es=b(((As=a==null?void 0:a.filter(Y=>Y.dateType==="24H")[0])==null?void 0:As.vol)||0);return n?{poolAddress:r,name:`${S==null?void 0:S.symbol} - ${P==null?void 0:P.symbol}`,isReverse:u,tokenA:c,tokenB:f,displayTokenA:S,displayTokenB:P,haveMining:L,miningRewardList:null,miningAprList:null,haveFarming:h,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:t,fee:s.fee,feeDisplay:O,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:k,isLocalData:n,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,farmsPoolAddress:T,haveZap:(c==null?void 0:c.is_trusted)&&(f==null?void 0:f.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:ss,vaultId:H}:{displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:v,displayTokenA:S,displayTokenB:P,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsApr:y,farmingAprDisplay:l,farmsPoolAddress:T,farmsRewarderList:F,farmsStatedTvl:E,farmsStatedTvlDisplay:R,fee:d,feeApr:w,feeAprDisplay:o,feeAndFarmsApr:W,feeAndFarmsAprDisplay:N,feeAndMiningAprDisplay:p,feeDisplay:O,feeRate:e(t).div(100).toString(),haveFarming:h,haveZap:fs,isReverse:u,vaultCategory:ss,vaultId:H,haveMining:L,miningRewardList:I,miningAprList:C,miningAprTotal:V.toString(),name:`${S==null?void 0:S.symbol} - ${P==null?void 0:P.symbol}`,poolAddress:r,tokenA:c,tokenB:f,totalAprDisplay:cs,tvl:g,tvlDisplay:rs,volume24Display:es,fees24Display:j,isVaults:k}}}}export{$ as a,x as b,Es as c,Fs as d,bs as f,Rs as u};
//# sourceMappingURL=useWrapPoolData-9pXb8-BW.js.map
