import{r as m,d as C,j as t,aB as _e,V as A,T as y,S as Ke,H as v,bE as Ge,X as k,a5 as Ze,B as W,am as zt,C as ze,k as $e,b8 as L,bF as kt,a3 as Ot,b as oe,U as $,bw as Bt,aC as ee,aL as Y,l as Fe,aR as qe,c as Lt,I as Ft,u as Ve,b7 as Ie,bG as et,i as ke,ac as Ht,ad as Et,ae as Mt,af as $t,ag as Wt,ah as Nt,ai as Ut,$ as ut,Z as We,ba as dt,a0 as tt,aq as Xe,s as he,bm as Kt,e as Gt,aA as Zt,aU as Yt,a as qt,b2 as Xt}from"./index-B4jTrVt5.js";import{S as Jt}from"./Slippage-CCotiJsT.js";import{g as Qt,v as pe,h as ht,i as mt,V as ot,C as nt,j as Vt,c as It,u as er,e as tr}from"./VaultsAprBlock-BQDGrNy5.js";import{N as gt}from"./NoData-BCiQzaPZ.js";import{R as rr}from"./RefreshButton-8xUcyAlj.js";import{u as sr}from"./useAccountBalance-NfP4ArGx.js";import{H as te}from"./HTextLabelBox-CVQsWi60.js";import{V as re}from"./VTextLabelBox-3tu2lWCg.js";import{S as ie,A as it}from"./SingleTokenInfo-QSVCXKoX.js";import{u as or,Z as nr}from"./useDisplayTickPrice-CzzecuhQ.js";import{i as ir}from"./icon_currentprice@2x-DeObnx8l.js";import{a as ar,p as rt,b as lr,c as cr}from"./EmptyTooltip-Bdf36b86.js";import{X as st,Y as He,R as yt}from"./YAxis-CqQWpXC5.js";import{L as Te,a as pr}from"./LineChart-B2Z2lZ2n.js";import{S as at,a as xr,b as Ye,L as Ce,c as ur,A as dr,i as Be,d as hr,e as ft,E as mr,h as Le,j as gr,k as yr,C as fr,l as de,m as br,G as vr,n as jr,o as lt,u as Sr,g as Ar,B as bt,f as wr,T as vt,p as jt}from"./generateCategoricalChart-BL97eP-t.js";import{V as Pr,l as _r,m as Cr,n as Tr}from"./api-data-utils-CfZpV00i.js";import{A as Dr,T as Rr,a as zr}from"./TvlChart-CCs4OWJ1.js";import{T as kr}from"./TradeConfirmAmountInfo-Dva8kLtA.js";import{V as St}from"./VaultsAddResult-DFgxMavu.js";import{u as Or}from"./global-CBXYTEkO.js";import{T as At}from"./TradeInputGroup-BYuiKiXk.js";import{P as wt}from"./progress-QNmhNwHi.js";import{T as ct}from"./TooltipIcon-Bl9Wyii7.js";import{P as Br}from"./PoweredByHaedal-N8rleAFY.js";import{P as Lr}from"./RemoveBlock-hKhFRJFC.js";import"./index-Yir0s042.js";import"./useTokenBalance-BkarOyZz.js";import"./swapWidget-D1zF1AYC.js";import"./useFavoritePool-nA1REehH.js";import"./useGetPoolList-SrIdZ2bD.js";import"./useToken-gU82ezEY.js";import"./useTransaction-yLiBNLZR.js";import"./msafe-oYBkW7LJ.js";import"./useFindBestRouting-DbygTx0A.js";import"./CopyButton-BPyaDSZu.js";import"./_getAllKeysIn-MdghFlHO.js";import"./throttle-CW9IGid9.js";import"./debounce-B8tXoTXd.js";import"./linear-DYpwdEgO.js";import"./index-bU8yj5Iz.js";import"./progress.utils-DMhlHICg.js";import"./LockInput-BoLCBmfL.js";import"./usePositionList-CyJ6BYji.js";import"./useCurrentPos-Im6-4RcL.js";import"./usePosAdd-Du9y38OJ.js";import"./useInsufficientBalanceToast-BqrbPMcB.js";import"./index-BsXA-Mb3.js";import"./ExpendItem-B5MktnZm.js";import"./PriceRange-tJooXlNt.js";import"./PositionStatus-rAL29_4J.js";import"./RangeValue-C82VrFjZ.js";import"./RangeAlerts-hm_0Q28I.js";import"./useNotifiSubscription-CAnAMbfz.js";import"./useXCetusHelper-Bcnv3lsQ.js";function Fr(o){const{displayMaxPrice:r,displayMinPrice:s,displayPrice:e,isLoading:n}=o;console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:16 ~ PositionPriceRange ~ props:",o);const[i,l]=m.useState(0),p=m.useRef(null),h=m.useMemo(()=>!(s&&r&&e),[r,s,e]);m.useEffect(()=>{const u=()=>{p.current&&l(p.current.offsetWidth)};u();const x=new ResizeObserver(u);return p.current&&x.observe(p.current),()=>{p.current&&x.unobserve(p.current)}},[]);const d=m.useMemo(()=>{if(r==="âˆž")return"center";if(e&&s&&r){if(C(e).greaterThanOrEqualTo(r))return"end";if(C(s).greaterThanOrEqualTo(e))return"start"}return"center"},[e,s,r]),c=m.useMemo(()=>{if(r==="âˆž")return"0px";if(e&&s&&r&&C(e).lessThanOrEqualTo(r)&&C(e).greaterThanOrEqualTo(s)){const u=C(r).add(s).div(2),x=C(e).gt(u);let a=C(0);if(x){const f=C(u).sub(s);a=C(e).sub(u).div(f)}else{const f=C(r).sub(u);a=C(e).sub(s).div(f)}const g=C(123).div(2);return x?`${C(i).mul(a).sub(g).toFixed(0)}px`:`-${C(i).mul(C(1).sub(a)).sub(g).toFixed(0)}px`}return"0px"},[e,s,r,i]);return t.jsx(t.Fragment,{children:h?t.jsx(_e,{h:"202px",width:"100%",align:"center",position:"relative",children:t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})})}):t.jsxs(_e,{w:"90%",direction:"column",alignItems:d,children:[t.jsxs(A,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",ml:c,children:[t.jsxs(A,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[t.jsx(y,{fontSize:"xs",h:"14px",children:"Current Price"}),n?t.jsx(_e,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(v,{children:t.jsx(y,{fontSize:"16px",color:"text_highlight",children:t.jsx(Ge,{value:k(e,6,!0,Ze.ROUND_DOWN)})})})]}),t.jsxs(A,{zIndex:"100",children:[t.jsx(W,{w:"2px",h:"98px",bg:"#76C8FF"}),t.jsx(zt,{src:ir,w:"30px",h:"30px",mt:"-18px"})]})]}),t.jsx(ze,{zIndex:"99",mt:"-48px",ref:p,pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"100%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:t.jsx(ze,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),t.jsxs(v,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"90%"},children:[t.jsxs(A,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(y,{fontSize:"12px",children:"Min Price"}),n?t.jsx(_e,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(y,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(Ge,{value:k(s,6,!0,Ze.ROUND_DOWN)})})]}),t.jsxs(A,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(y,{fontSize:"12px",children:"Max Price"}),n?t.jsx(_e,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(y,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(Ge,{value:k(r,6,!0,Ze.ROUND_DOWN)})})]})]})]})})}function me(o){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},me(o)}function Hr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function Er(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Ct(e.key),e)}}function Mr(o,r,s){return r&&Er(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function $r(o,r,s){return r=Ee(r),Wr(o,Pt()?Reflect.construct(r,s||[],Ee(o).constructor):r.apply(o,s))}function Wr(o,r){if(r&&(me(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(o)}function Nr(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Pt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pt=function(){return!!o})()}function Ee(o){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ee(o)}function Ur(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&Je(o,r)}function Je(o,r){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Je(o,r)}function _t(o,r,s){return r=Ct(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Ct(o){var r=Kr(o,"string");return me(r)=="symbol"?r:r+""}function Kr(o,r){if(me(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(me(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var Ne=function(o){function r(){return Hr(this,r),$r(this,r,arguments)}return Ur(r,o),Mr(r,[{key:"render",value:function(){return null}}])}(L.Component);_t(Ne,"displayName","ZAxis");_t(Ne,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Gr=["option","isActive"];function De(){return De=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},De.apply(this,arguments)}function Zr(o,r){if(o==null)return{};var s=Yr(o,r),e,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(n=0;n<i.length;n++)e=i[n],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(s[e]=o[e])}return s}function Yr(o,r){if(o==null)return{};var s={};for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)){if(r.indexOf(e)>=0)continue;s[e]=o[e]}return s}function qr(o){var r=o.option,s=o.isActive,e=Zr(o,Gr);return typeof r=="string"?L.createElement(at,De({option:L.createElement(xr,De({type:r},e)),isActive:s,shapeType:"symbols"},e)):L.createElement(at,De({option:r,isActive:s,shapeType:"symbols"},e))}function ge(o){"@babel/helpers - typeof";return ge=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ge(o)}function Re(){return Re=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},Re.apply(this,arguments)}function pt(o,r){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),s.push.apply(s,e)}return s}function Z(o){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?pt(Object(s),!0).forEach(function(e){ae(o,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(s,e))})}return o}function Xr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function xt(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Dt(e.key),e)}}function Jr(o,r,s){return r&&xt(o.prototype,r),s&&xt(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function Qr(o,r,s){return r=Me(r),Vr(o,Tt()?Reflect.construct(r,s||[],Me(o).constructor):r.apply(o,s))}function Vr(o,r){if(r&&(ge(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(o)}function Ir(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Tt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!o})()}function Me(o){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Me(o)}function es(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&Qe(o,r)}function Qe(o,r){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Qe(o,r)}function ae(o,r,s){return r=Dt(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Dt(o){var r=ts(o,"string");return ge(r)=="symbol"?r:r+""}function ts(o,r){if(ge(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(ge(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var Ue=function(o){function r(){var s;Xr(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return s=Qr(this,r,[].concat(n)),ae(s,"state",{isAnimationFinished:!1}),ae(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),ae(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),ae(s,"id",Sr("recharts-scatter-")),s}return es(r,o),Jr(r,[{key:"renderSymbolsStatically",value:function(e){var n=this,i=this.props,l=i.shape,p=i.activeShape,h=i.activeIndex,d=Ye(this.props,!1);return e.map(function(c,u){var x=h===u,a=x?p:l,g=Z(Z({},d),c);return L.createElement(Ce,Re({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(u)},ur(n.props,c,u),{role:"img"}),L.createElement(qr,Re({option:a,isActive:x,key:"symbol-".concat(u)},g)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,n=this.props,i=n.points,l=n.isAnimationActive,p=n.animationBegin,h=n.animationDuration,d=n.animationEasing,c=n.animationId,u=this.state.prevPoints;return L.createElement(dr,{begin:p,duration:h,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var a=x.t,g=i.map(function(f,j){var b=u&&u[j];if(b){var w=Be(b.cx,f.cx),S=Be(b.cy,f.cy),_=Be(b.size,f.size);return Z(Z({},f),{},{cx:w(a),cy:S(a),size:_(a)})}var P=Be(0,f.size);return Z(Z({},f),{},{size:P(a)})});return L.createElement(Ce,null,e.renderSymbolsStatically(g))})}},{key:"renderSymbols",value:function(){var e=this.props,n=e.points,i=e.isAnimationActive,l=this.state.prevPoints;return i&&n&&n.length&&(!l||!hr(l,n))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(n)}},{key:"renderErrorBar",value:function(){var e=this.props.isAnimationActive;if(e&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.points,l=n.xAxis,p=n.yAxis,h=n.children,d=ft(h,mr);return d?d.map(function(c,u){var x=c.props,a=x.direction,g=x.dataKey;return L.cloneElement(c,{key:"".concat(a,"-").concat(g,"-").concat(i[u]),data:i,xAxis:l,yAxis:p,layout:a==="x"?"vertical":"horizontal",dataPointFormatter:function(j,b){return{x:j.cx,y:j.cy,value:a==="x"?+j.node.x:+j.node.y,errorVal:Le(j,b)}}})}):null}},{key:"renderLine",value:function(){var e=this.props,n=e.points,i=e.line,l=e.lineType,p=e.lineJointType,h=Ye(this.props,!1),d=Ye(i,!1),c,u;if(l==="joint")c=n.map(function(S){return{x:S.cx,y:S.cy}});else if(l==="fitting"){var x=gr(n),a=x.xmin,g=x.xmax,f=x.a,j=x.b,b=function(_){return f*_+j};c=[{x:a,y:b(a)},{x:g,y:b(g)}]}var w=Z(Z(Z({},h),{},{fill:"none",stroke:h&&h.fill},d),{},{points:c});return L.isValidElement(i)?u=L.cloneElement(i,w):yr(i)?u=i(w):u=L.createElement(fr,Re({},w,{type:p})),L.createElement(Ce,{className:"recharts-scatter-line",key:"recharts-scatter-line"},u)}},{key:"render",value:function(){var e=this.props,n=e.hide,i=e.points,l=e.line,p=e.className,h=e.xAxis,d=e.yAxis,c=e.left,u=e.top,x=e.width,a=e.height,g=e.id,f=e.isAnimationActive;if(n||!i||!i.length)return null;var j=this.state.isAnimationFinished,b=kt("recharts-scatter",p),w=h&&h.allowDataOverflow,S=d&&d.allowDataOverflow,_=w||S,P=de(g)?this.id:g;return L.createElement(Ce,{className:b,clipPath:_?"url(#clipPath-".concat(P,")"):null},w||S?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(P)},L.createElement("rect",{x:w?c:c-x/2,y:S?u:u-a/2,width:w?x:x*2,height:S?a:a*2}))):null,l&&this.renderLine(),this.renderErrorBar(),L.createElement(Ce,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!f||j)&&br.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return e.animationId!==n.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:n.curPoints}:e.points!==n.curPoints?{curPoints:e.points}:null}}])}(m.PureComponent);ae(Ue,"displayName","Scatter");ae(Ue,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!vr.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ae(Ue,"getComposedData",function(o){var r=o.xAxis,s=o.yAxis,e=o.zAxis,n=o.item,i=o.displayedData,l=o.xAxisTicks,p=o.yAxisTicks,h=o.offset,d=n.props.tooltipType,c=ft(n.props.children,jr),u=de(r.dataKey)?n.props.dataKey:r.dataKey,x=de(s.dataKey)?n.props.dataKey:s.dataKey,a=e&&e.dataKey,g=e?e.range:Ne.defaultProps.range,f=g&&g[0],j=r.scale.bandwidth?r.scale.bandwidth():0,b=s.scale.bandwidth?s.scale.bandwidth():0,w=i.map(function(S,_){var P=Le(S,u),O=Le(S,x),R=!de(a)&&Le(S,a)||"-",q=[{name:de(r.dataKey)?n.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:S,dataKey:u,type:d},{name:de(s.dataKey)?n.props.name:s.name||s.dataKey,unit:s.unit||"",value:O,payload:S,dataKey:x,type:d}];R!=="-"&&q.push({name:e.name||e.dataKey,unit:e.unit||"",value:R,payload:S,dataKey:a,type:d});var H=lt({axis:r,ticks:l,bandSize:j,entry:S,index:_,dataKey:u}),N=lt({axis:s,ticks:p,bandSize:b,entry:S,index:_,dataKey:x}),U=R!=="-"?e.scale(R):f,T=Math.sqrt(Math.max(U,0)/Math.PI);return Z(Z({},S),{},{cx:H,cy:N,x:H-T,y:N-T,xAxis:r,yAxis:s,zAxis:e,width:2*T,height:2*T,size:U,node:{x:P,y:O,z:R},tooltipPayload:q,tooltipPosition:{x:H,y:N},payload:S},c&&c[_]&&c[_].props)});return Z({points:w},h)});var rs=Ar({chartName:"ComposedChart",GraphicalChild:[Te,Dr,bt,Ue],axisComponents:[{axisType:"xAxis",AxisComp:st},{axisType:"yAxis",AxisComp:He},{axisType:"zAxis",AxisComp:Ne}],formatAxisMap:wr});function ss(o){const{holdCoinAmounts:r,lpTokenInfo:s,displayTokenA:e,displayTokenB:n,sharePoolRate:i,balanceInfo:l,isReverse:p,holdCoinAValue:h,holdCoinBValue:d,rewardPerA:c,rewardPerB:u}=o,x=m.useMemo(()=>p?d:h,[p,h,d]),a=m.useMemo(()=>p?h:d,[p,h,d]);Ot();const g=m.useMemo(()=>C(x).add(C(a)),[x,a,e,n]);console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayValueA:",x),console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayTokenA:",e);const{isApp:f}=oe();return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:t.jsxs(A,{w:"100%",gap:{base:"24px",lg:"8px"},children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(v,{children:t.jsx(y,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),t.jsxs(v,{gap:"8px",children:[t.jsx(y,{whiteSpace:"nowrap",children:"Your share of pool"}),t.jsxs(y,{color:"text_highlight",fontWeight:"500",children:[Bt(i,2,6),"%"]})]})]}),f?t.jsxs(A,{w:"100%",gap:"16px",children:[t.jsx(te,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ie,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsxs(y,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]})]}),subValue:t.jsx(y,{children:l!=null&&l.balanceFormat&&g?ee(g,2):"-"}),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Y(e==null?void 0:e.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ie,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(y,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(r==null?void 0:r.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`})]}),subValue:ee(x,2),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Y(n==null?void 0:n.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ie,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(y,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(r==null?void 0:r.displayCoinB,6)} ${Y(n==null?void 0:n.symbol,10)}`})]}),subValue:ee(a,2),subValueStyle:{fontSize:"13px"}})]}):t.jsxs(t.Fragment,{children:[t.jsxs(Fe,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[t.jsx(y,{children:"LP Token Balance"}),t.jsxs(y,{color:"text_caption",ml:"4px",fontWeight:"500",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]}),t.jsx(y,{children:l!=null&&l.balanceFormat?ee(g,2):"-"})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[t.jsxs(A,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[t.jsxs(v,{children:[t.jsx(ie,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsx(y,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Y(e==null?void 0:e.symbol,10)})]}),t.jsx(re,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${k(r==null?void 0:r.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(x,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsxs(A,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[t.jsxs(v,{children:[t.jsx(y,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Y(n==null?void 0:n.symbol,10)}),t.jsx(ie,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),t.jsx(re,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:`${k(r==null?void 0:r.displayCoinB,6)} ${Y(n==null?void 0:n.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(a,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsx($,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:t.jsxs(A,{justify:"center",gap:"4px",children:[t.jsx(ie,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),t.jsx(y,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function os(o){const{price:r,changeSide:s}=o;return{displayPrice:m.useMemo(()=>{if(r)return s?k(qe(1).div(r).toString(),10,!0).toString():r},[r,s])}}function ns(o){const[r,s]=m.useState(!1),{currentPrice:e,minPrice:n,maxPrice:i,displayTokenA:l,displayTokenB:p,isLoading:h,isReverse:d}=o,{displayPrice:c}=os({price:e,changeSide:d?!r:r}),{displayMaxPrice:u,displayMinPrice:x}=or({minPrice:n,maxPrice:i,changeSide:r});m.useEffect(()=>{s(d)},[d]);const a=m.useMemo(()=>r?p:l,[l,p,r]),g=m.useMemo(()=>(console.log("ðŸš€ ~ logoUrl ~ baseCoin?.logo_url:",a,a==null?void 0:a.logo_url),a!=null&&a.logo_url?a==null?void 0:a.logo_url:""),[a==null?void 0:a.logo_url]);return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(A,{w:"100%",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",mb:"6px",children:[t.jsx(y,{fontSize:"16px",color:"text_caption",children:"Position Range"}),t.jsxs(v,{gap:"0px",children:[g&&t.jsx(Lt,{imageUrl:g,imageStyle:{w:"20px",h:"20px"}}),t.jsxs(y,{color:"text_caption",children:[" ",a==null?void 0:a.symbol]}),t.jsxs(v,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>s(!r),children:[t.jsx(y,{fontSize:"12px",children:" Base coin"}),t.jsx(Ft,{xlinkHref:"#icon-icon_swap1"})]})]})]}),t.jsx(Fr,{displayPrice:c,displayMaxPrice:u,displayMinPrice:x})]})})}function is({payload:o,label:r}){return o&&o.length&&t.jsxs(A,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[t.jsx(y,{fontSize:"12px",children:o[0].payload.tooltipTime}),t.jsxs(v,{textAlign:"left",children:[t.jsx(y,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),t.jsx(y,{color:"#68FFD8",fontSize:"12px",children:k(o[0].payload.real)})]}),t.jsxs(v,{children:[t.jsx(y,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),t.jsxs(y,{color:"#6FBCF0",fontSize:"12px",children:[k(o[0].payload.lower),"-",k(o[0].payload.upper)]})]})]})}function as({data:o=[],dateType:r,isTabLoading:s}){const e=m.useMemo(()=>o,[o]),[n,i]=m.useState({lower:!1,upper:!1,real:!1}),l=m.useMemo(()=>{if(e.length){const d=Math.min(...e.map(g=>g.lower)),c=Math.max(...e.map(g=>g.upper)),u=C(c).mul(1.1),x=C(d).mul(.9),a=u.sub(x).div(4);return Array.from({length:5},(g,f)=>x.add(a.mul(f)).toNumber())}return[]},[e]),p=(d,c)=>{const u=new Date(c*1e3),x=u.getUTCHours(),a=u.getUTCMinutes(),g=u.getUTCDate(),f=u.getUTCMonth()+1;if(d<24||r==="24H"){const j=x>=12?"PM":"AM",b=x%12||12;return`${String(b).padStart(2,"0")}:${String(a).padStart(2,"0")} ${j}`}return`${f}/${g}`},{isApp:h}=oe();return t.jsx(yt,{width:"100%",height:"100%",children:t.jsxs(pr,{data:e,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(st,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:d=>s?"":p(e.length,d),minTickGap:(e==null?void 0:e.length)>8?36:void 0,interval:(e==null?void 0:e.length)<=8?0:void 0}),t.jsx(He,{fontSize:"12px",ticks:l,domain:[l[0],l[l.length-1]],axisLine:!1,tickLine:!1,tickFormatter:d=>k(d,4),tick:t.jsx(ar,{})}),t.jsx(vt,{content:t.jsx(is,{})}),t.jsx(jt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:h?-8:-41,right:h?4:100,fontSize:12},formatter:d=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[d]||d}),t.jsx(Te,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:n.real,dot:!1,isAnimationActive:!1}),t.jsx(Te,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:n.lower,isAnimationActive:!1}),t.jsx(Te,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:n.upper,isAnimationActive:!1})]})})}function ls(){const{fetchByApi:o}=Ve();return{getPriceRangeData:async s=>{try{const e=rt(s,Ie),n=await o(Pr,"GET",e);return n!=null&&n.list?n.list.map(i=>{const l=i.Timestamp*1e3,p=new Date(l);return{lower:i.value.lower,upper:i.value.upper,real:i.value.real,date:i.Timestamp,xAxis:_r(p.toISOString().slice(0,10)),tooltipTime:et(l),hour:p.getHours()}}):[]}catch(e){return console.error("ðŸš€ ~ useGetPriceRangeData ~ getPriceRangeData Error:",e),[]}}}}function cs({isRefresh:o,vaultsId:r,isReverse:s}){const[e,n]=m.useState(!1),{getPriceRangeData:i}=ls(),[l,p]=m.useState(),h=[{label:"24H"},{label:"1W"}],[d,c]=m.useState("1W"),[u,x]=m.useState(!1),a=async f=>{const j=Date.now(),w=String(Math.floor(j/1e3-86400));try{n(!0);const _=(await i({vaultID:r,dateType:f=="24H"?"min":"hour",beginTimestamp:f=="24H"?w:"",endTimestamp:C(new Date().getTime()).toFixed(0)})).map(P=>{const O=s?C(1).div(C(P.upper)).toString():P.lower,R=s?C(1).div(C(P.lower)).toString():P.upper,q=s?C(1).div(P.real).toString():P.real;return{...P,lower:O,upper:R,real:q}});p(_),x(!1),n(!1)}catch(S){n(!1),x(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",S)}};m.useEffect(()=>{r&&a(d)},[r,d]),m.useEffect(()=>{o&&a(d)},[o]);const{isApp:g}=oe();return t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:g?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsxs(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[t.jsx(y,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),t.jsx(ke,{type:"outlineTab",tabList:h,currentTab:d,handleChangeTab:f=>{x(!0),c(f.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),t.jsx(as,{data:l,dateType:d,isTabLoading:u})]})})]})}function ps(){const{fetchByApi:o}=Ve(),r=async e=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",e);const n={...e};n.dateType=e.type=="day"||e.type=="week"?"hour":"day",delete n.type;try{const i=rt(n,Ie),l=await o(Cr,"GET",i);return l!=null&&l.list?l==null?void 0:l.list.map((p,h)=>{var a;const d=p.Timestamp*1e3,c=new Date(d),u=Number(c.toISOString().slice(5,7)),x=s((a=l==null?void 0:l.list)==null?void 0:a.length,c,e==null?void 0:e.type,h);return{num:+p.value,date:p.Timestamp,xAxis:x,tooltipTime:et(d)}}):[]}catch(i){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",i),[]}},s=(e,n,i="D",l)=>{const p=i=="D"||i=="day"?"D":i=="W"||i=="week"?"W":"M";console.log("ðŸš€ ~ getXData ~ type:",i);const h=n,d=h.getUTCHours();let c=h.getUTCHours();const u=h.getUTCMinutes(),x=h.getUTCDate(),a=h.getUTCMonth()+1,g=c>=12?"PM":"AM";if(c=c%12||12,p=="D")return`${String(c).padStart(2,"0")}:${String(u).padStart(2,"0")} ${g}`;if(p=="M")return`${a}/${x}`;if(console.log("ðŸš€ ~ getXData ~ noShowHours:",d),e<24){const f=Math.floor(e/2);if(console.log("ðŸš€ ~ getXData ~ step:",e,l,l%f===0,f),l%f===0)return`${a}/${x}`}return e>=24&&e<120&&(d===0||d===12)?`${a}/${x}`:e>=120&&d===0&&u===0?`${a}/${x}`:""};return{getVaultHistogram:r}}function xs({isRefresh:o,vaultsId:r}){console.log("ðŸš€ðŸš€ðŸš€ ~ TvlChartPageBlock.tsx:11 ~ TvlChartPageBlock ~ isRefresh:",o);const s=[{label:"24H"},{label:"1W"},{label:"1M"}],[e,n]=m.useState(!0),[i,l]=m.useState("24H"),{getVaultHistogram:p}=ps(),[h,d]=m.useState([]),[c,u]=m.useState(),[x,a]=m.useState(),g=async()=>{var O,R;n(!0);const b=Date.now(),w=86400,S=i=="24H"?1*w:i=="1W"?7*w:30*w,_=S?String(Math.floor(b/1e3-S)):0,P=await p({type:i=="24H"?"day":i=="1W"?"week":"month",vaultID:r,beginTimestamp:_,endTimestamp:String(Math.floor(b/1e3))});a((O=P[P.length-1])==null?void 0:O.num),u((R=P[P.length-1])==null?void 0:R.num),console.log("ðŸš€ ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",P),d(P),n(!1)},f=b=>{console.log("ðŸš€ ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",b),u(b?b.num:x)};m.useEffect(()=>{r&&g()},[i,r]),m.useEffect(()=>{o&&g()},[o]);const{isApp:j}=oe();return t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:j?"12px":"20px",children:[t.jsxs(v,{justify:"space-between",children:[c?t.jsxs(A,{align:"flex-start",gap:"4px",children:[t.jsx(y,{fontWeight:"500",fontSize:"12px",children:"TVL"}),t.jsx(y,{fontSize:"16px",color:"text_caption",mt:"8px",children:ee(c,2)})]}):t.jsx(A,{align:"flex-start",gap:"4px"}),t.jsx(ke,{type:"outlineTab",tabList:s,currentTab:i,handleChangeTab:b=>l(b.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(W,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),h.length>0&&t.jsx(Rr,{data:h,onChangeValue:f,isShowYAxis:!0,toolTipsType:"tvl"}),!e&&h.length===0&&t.jsx(gt,{type:"nodata"})]})})]})}function us({data:o=[],dateType:r,haveMining:s=!1,quoteCoin:e}){const[n,i]=m.useState({apy:!1,lp_fee:!1}),l=m.useMemo(()=>[{value:s?"Cumulative Fees & Rewards":"Cumulative Fees",type:"line",id:"lp_fee",color:"#07EBAD"},{value:"APY",type:"line",id:"apy",color:"#75C8FF"}],[s]),p=m.useMemo(()=>{if(o.length){const c=Math.min(...o.map(f=>f.apy)),u=Math.max(...o.map(f=>f.apy)),x=C(u).mul(1.1),a=C(c).mul(.9),g=x.sub(a).div(4);return Array.from({length:5},(f,j)=>a.add(g.mul(j)).toNumber())}return[]},[o]),h=(c,u)=>{const x=new Date(u*1e3),a=x.getUTCHours(),g=x.getUTCMinutes(),f=x.getUTCDate(),j=x.getUTCMonth()+1;if(c<24||r==="24H"){const b=a>=12?"PM":"AM",w=a%12||12;return`${String(w).padStart(2,"0")}:${String(g).padStart(2,"0")} ${b}`}return`${j}/${f}`},{isApp:d}=oe();return t.jsx(yt,{width:"100%",height:"100%",children:t.jsxs(rs,{data:o,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(st,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:c=>h(o.length,c),minTickGap:(o==null?void 0:o.length)>8?36:void 0,interval:(o==null?void 0:o.length)<=8?0:void 0}),t.jsx(He,{yAxisId:"bar",xAxisId:"x",fontSize:"12px",orientation:"left",width:50,tickLine:!1,ticks:p,position:"insideRight",domain:[p[0],p[p.length-1]],tickFormatter:c=>(console.log("ðŸš€ ~ ApyAndFeesChart 323~ value:",c),k(c,2)),tick:t.jsx(lr,{})}),t.jsx(He,{yAxisId:"line",orientation:"right",fontSize:"12px",tickLine:!1,tick:t.jsx(cr,{isRight:!0,isApp:d,symbol:e==null?void 0:e.symbol})}),t.jsx(vt,{content:t.jsx(zr,{haveMining:s,symbol:e==null?void 0:e.symbol})}),t.jsx(jt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:-32,right:0,fontSize:12},payload:l}),t.jsx(bt,{yAxisId:"bar",barSize:1,dataKey:"apy",fill:"#75C8FF",isAnimationActive:!1,hide:n.apy}),t.jsx(Te,{yAxisId:"line",type:"monotone",dataKey:"lp_fee",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},dot:!1,isAnimationActive:!1,hide:n.lp_fee})]})})}function ds(){const{fetchByApi:o}=Ve();return{getVaultApyAndFeesHistogram:async s=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",s);const e={...s};e.dateType="hour";try{const n=rt(e,Ie),i=await o(Tr,"GET",n);return console.log("ðŸš€ ~ getVaultApyAndFeesHistogram ~ res:",i),i!=null&&i.list?i==null?void 0:i.list.map((l,p)=>{const h=l.Timestamp*1e3,d=new Date(h),c=Number(d.toISOString().slice(5,7));return{apy:+l.value.apy*100,lp_fee:+l.value.lp_fee,date:l.Timestamp,tooltipTime:et(h)}}):[]}catch(n){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",n),[]}}}}function hs({isRefresh:o,vaultsId:r,isReverse:s,haveMining:e,quoteCoin:n}){const[i,l]=m.useState(!1),[p,h]=m.useState(),{isApp:d}=oe(),{getVaultApyAndFeesHistogram:c}=ds(),u=async()=>{l(!0);const x=Date.now(),a=86400,g=d?2*a:7*a,f=g?String(Math.floor(x/1e3-g)):0,j=await c({vaultID:r,beginTimestamp:f,endTimestamp:String(Math.floor(x/1e3))});h(j),console.log("ðŸš€ ~ fetchPricerangeHistogram ~ tvl_res:",j),l(!1)};return m.useEffect(()=>{r&&u()},[r]),m.useEffect(()=>{o&&u()},[o]),t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:d?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsx(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:t.jsx(y,{fontWeight:"500",fontSize:"14px",children:"APY & Fees"})})}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[i&&t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),t.jsx(us,{data:p,dateType:"",haveMining:e,quoteCoin:n})]})})]})}function ms(o){const{isOpen:r,onClose:s,data:e,onSubmitClick:n,calculateLpLoading:i}=o,{feeTier:l,displayTokenA:p,displayTokenB:h,displayAmountA:d,displayAmountB:c,totalAmountValue:u,sharePool:x,lpAmountLimit:a,lpDecimals:g}=e;return t.jsxs(Ht,{autoFocus:!1,returnFocusOnClose:!1,isOpen:r,onClose:s,isCentered:!0,children:[t.jsx(Et,{}),t.jsxs(Mt,{children:[t.jsx($t,{children:t.jsx(Wt,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),t.jsx(Nt,{}),t.jsx(Ut,{textAlign:"center",p:"0px",children:t.jsxs(A,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(ut,{coinAIconUrl:p==null?void 0:p.logo_url,coinBIconUrl:h==null?void 0:h.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(y,{fontSize:"16px",color:"text_caption",children:`${p==null?void 0:p.symbol} - ${h==null?void 0:h.symbol}`})]}),t.jsx($,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:t.jsxs(v,{children:[t.jsx(y,{children:"Fee Tier"}),t.jsx(y,{color:"primary",children:l})]})})]}),t.jsx(kr,{coinA:{amount:d,...p},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:c,...h}}),t.jsx(St,{amountLimit:a,inputTotalValue:u,preCalculateLoading:!1,calculateLpLoading:i,lpRate:x,lpDecimals:g,poolName:`${p==null?void 0:p.symbol} - ${h==null?void 0:h.symbol}`}),t.jsx(W,{h:"52px"}),t.jsx(We,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{n()},children:"Deposit"})]})})]})]})}const gs="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",ys=(o,r)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${r} via ${o} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Rt(o){const{displayTokenA:r,displayTokenB:s,onSelectAssetTab:e,showAfterIcon:n=!1,label:i="Deposit Amounts",handleRefreshClick:l,refreshCount:p,isCheckedZAP:h,setIsCheckedZAP:d,assetAction:c,setAssetAction:u,isUnstableVault:x,currentActionTab:a}=o;console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:47 ~ props:",o);const{stakeProtocolName:g}=Qt(r==null?void 0:r.coin_type),[f,j]=m.useState("both"),b=m.useMemo(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:52 ~ tabList ~ displayTokenA:",r),r&&s){const _=[{label:`${r.symbol} only`,action:r.coin_type,afterIcon:h&&a=="Deposit"&&!x?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:x?a=="Deposit"?`You can add liquidity in this pool with only ${r.symbol}.`:"":gs},{label:`${s.symbol} only`,action:s.coin_type,afterIcon:h&&a=="Deposit"&&!x?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:x?a=="Deposit"?`You can add liquidity in this pool with only ${s.symbol}.`:"":ys(g,r==null?void 0:r.symbol)}];return x&&a=="Deposit"&&_.splice(1,0,{label:`${r.symbol}+${s.symbol}`,action:"both",afterIcon:h&&!x&&a=="Deposit"?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:a=="Deposit"?"You can add any value you want from both assets.":""}),_}return[]},[r,g,h]),w=m.useMemo(()=>{if(b.length!==0){if(console.log("ðŸš€ðŸš€ðŸš€ ~ currentTab ~ assetAction:",c),x){if(c===(r==null?void 0:r.coin_type))return b[0].label;if(c===(s==null?void 0:s.coin_type))return a=="Withdraw"?b[1].label:b[2].label}else{if(c===(r==null?void 0:r.coin_type))return b[0].label;if(c===(s==null?void 0:s.coin_type))return b[1].label}return b[1].label}},[c,b,h]),S=m.useMemo(()=>a=="Deposit"?x?"customDeposit":"deposit":"withdraw",[a,x]);return t.jsxs(A,{w:"100%",gap:"16px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{fontWeight:"500",children:i}),t.jsx(nr,{isCheckedZAP:h,zapText:a=="Deposit"?"Zap In":"Zap Out",tooltipType:S,zapSwitchChange:_=>{d(!h),u(_?r==null?void 0:r.coin_type:"both"),j((r==null?void 0:r.symbol)+" only")}})]}),h?t.jsx(ke,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:w,tabList:b,handleChangeTab:_=>{u(_.action),console.log("ðŸš€ðŸš€ðŸš€ ~ item.action:",_.action),e(_.action)}}):null]})}function fs(o){const{category:r}=dt();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:32 ~ VaultsAdd ~ category:",r);const{apiVaultInfo:s,tokenA:e,tokenB:n,isReverse:i,vaultsId:l,totalLp:p,feeTier:h,handleRefreshClick:d,currentActionTab:c}=o,u=pe.useVaultsAdd(r=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:35 ~ VaultsAdd ~ useVaultsAdd:",u);const x=pe.useAddButtonStatus(r=="haedal"),a=pe.useGetContractVaultInfo(r=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:29 ~ VaultsAdd ~ totalLp:",p);const[g,f]=m.useState("both"),[j,b]=m.useState(!1),{currentAccount:w,onWalletModal:S}=tt(),{fromTokenLock:_,toTokenLock:P,lpTokenInfo:O,gtAumLimit:R,hardCapUSD:q,vaultTvl:H}=a(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse),{amountInputA:N,amountInputB:U,balanceInfoA:T,balanceInfoB:B,amountValueA:ye,amountValueB:fe,preCalculateLoading:F,fixAmountA:z,inputTotalValue:X,handleAmountInputChange:le,calculateResult:D,showOnlySideTips:K,doAddAction:xe,reCalculateResult:ce,overHardtop:ne,zapNumError:J,calculateLpLoading:ue,inputTotalValueError:se}=u(g,d,l,i?n:e,i?e:n,s==null?void 0:s.isReverse,j,q,H);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:55 ~ VaultsAdd ~ overHardtop:",ne,R);const{vaultsSlippage:E}=Or();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:76 ~ VaultsAdd ~ gtAumLimit:",R);const{btnText:V,btnDisabled:be}=x(j,g,!0,N,U,i?!z:z,T==null?void 0:T.balanceFormat,B==null?void 0:B.balanceFormat,e,n,r=="haedal",J,D,ne,se);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:80 ~ VaultsAdd ~ calculateResult:",D);const{lpRate:Oe}=ht(D==null?void 0:D.ft_amount,p),{amountLimit:ve}=mt(Number(E),D==null?void 0:D.ft_amount,!1),[G,Q]=m.useState(!1),je=m.useMemo(()=>T,[T==null?void 0:T.balance,B==null?void 0:B.balance,i]),Se=m.useMemo(()=>B,[T==null?void 0:T.balance,B==null?void 0:B.balance,i]),I=m.useMemo(()=>e,[i,e,n]),M=m.useMemo(()=>n,[i,e,n]),Ae=()=>({feeTier:h||"",displayTokenA:I,displayTokenB:M,displayAmountA:N,displayAmountB:U,totalAmountValue:X,sharePool:Oe,lpAmountLimit:ve||"0",lpDecimals:O==null?void 0:O.decimals}),{isApp:we}=oe();return t.jsxs(A,{gap:"8px",w:"100%",align:"flex-start",children:[t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Rt,{showAfterIcon:!0,displayTokenB:n,displayTokenA:e,onSelectAssetTab:f,assetAction:g,isCheckedZAP:j,setIsCheckedZAP:b,setAssetAction:f,isUnstableVault:r=="haedal",currentActionTab:c,handleRefreshClick:()=>{d(),ce()}}),t.jsx(A,{mt:"16px",position:"relative",children:t.jsx(At,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:g!=="both"&&g!==(I==null?void 0:I.coin_type),balance:(je==null?void 0:je.balanceFormat)||"",value:N,amountValue:ye,loading:(i?z:!z)&&F&&!j,onChange:Pe=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:183 ~ VaultsAdd ~ value,amountInputB:",Pe,U),le(Pe,!i,!0,U)},selectable:!1,placeholder:"0.0",token:I},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:g!=="both"&&g!==(M==null?void 0:M.coin_type),balance:(Se==null?void 0:Se.balanceFormat)||"",value:U,amountValue:fe,loading:(i?!z:z)&&F&&!j,onChange:Pe=>{le(Pe,i,!0,N)},selectable:!1,placeholder:"0.0",token:M},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),t.jsx($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(A,{w:"100%",gap:"20px",children:[t.jsx(We,{m:"-1px",isLoading:F||G,w:"100%",borderRadius:"12px",h:"52px",fontSize:we&&J?"14px":"18px",fontWeight:"500",disabled:be||F||G||R||ne,onClick:()=>{w?Q(!0):S(!0)},children:V||(j?"Zap In":"Deposit")}),R?t.jsx(A,{w:"100%",pl:"16px",pr:"16px",pb:D||K?"0px":"20px",alignItems:"start",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The vault has reached its current capacity. New deposits are not accepted at this time."})}):ne?t.jsx(A,{w:"100%",pl:"16px",pr:"16px",pb:D||K?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Your deposit has gone over the vault capacity. Try reducing your deposit amount."})}):J?t.jsx(A,{w:"100%",pl:"16px",pr:"16px",pb:D||K?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,se&&t.jsx(A,{w:"100%",pl:"16px",pb:"20px",pr:"16px",alignItems:"start",children:t.jsx(y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(D||K)&&!se&&t.jsxs(A,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[g!=="both"&&K&&t.jsx(y,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:D?"20px":"0",children:K}),D&&t.jsx(St,{amountLimit:ve,inputTotalValue:X,preCalculateLoading:F,calculateLpLoading:ue,lpDecimals:O==null?void 0:O.decimals,lpRate:Oe,poolName:`${I==null?void 0:I.symbol} - ${M==null?void 0:M.symbol}`})]})]})}),G&&t.jsx(ms,{data:Ae(),isOpen:G,calculateLpLoading:ue,onClose:()=>{Q(!1)},onSubmitClick:()=>{Q(!1),xe()}})]})}function bs(o){const{depositRatio:r,hardCapUSD:s,vaultTvl:e,value:n,label:i,textStyle:l}=o;return console.log("ðŸš€ðŸš€ðŸš€ ~ AumLimit.tsx:16 ~ AumLimit ~ depositRatio:",r),t.jsxs(v,{w:"100%",justifyContent:"flex-end",children:[t.jsx(y,{whiteSpace:"nowrap",fontSize:"12px",children:i}),t.jsx(Xe,{placement:"bottom-end",tooltip:t.jsxs(A,{w:"260px",p:"4px",gap:"8px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{fontSize:"12px",color:"primary_gray",children:"Current TVL"}),t.jsx(y,{fontSize:"12px",color:"primary_gray",children:"Capacity"})]}),t.jsx(wt,{h:"4px",w:"100%",value:Number(r),bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(y,{fontSize:"12px",color:"text_caption",children:he(e,"$")}),t.jsx(y,{fontSize:"12px",color:"primary",children:Kt(r,2)})]}),t.jsxs(y,{fontSize:"12px",color:"text_caption",children:["$",k(s,2)]})]})]}),children:t.jsx(ze,{cursor:"pointer",children:t.jsx(y,{color:"text_caption",textDecoration:"underline dotted",fontSize:"12px",...l,children:n})})})]})}function vs(o){const{vaultsCoinPercent:r,displayTokenB:s,displayTokenA:e,vaultCoinAmounts:n,vaultsCoinAValue:i,vaultsCoinBValue:l,isReverse:p,depositRatio:h,hardCapUSD:d,vaultTvl:c}=o,u=m.useMemo(()=>p?l:i,[p,i,l]),x=m.useMemo(()=>p?i:l,[p,i,l]),a=m.useMemo(()=>p?r==null?void 0:r.percentB:r==null?void 0:r.percentA,[p,r]),g=m.useMemo(()=>p?r==null?void 0:r.percentA:r==null?void 0:r.percentB,[p,r]),{isApp:f}=oe();return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(A,{w:"100%",gap:"0px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),d&&t.jsx(bs,{depositRatio:h,hardCapUSD:d,vaultTvl:c,label:"Capacity",value:he(d,"$")})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[t.jsxs(v,{children:[t.jsx(ie,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!f}),t.jsx(re,{wrapStyle:{gap:"4px"},title:Y(e==null?void 0:e.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${a}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),t.jsx(wt,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:a,bg:Number(a)!==0&&Number(g)!==0?"quote_green":"process_bg_gray",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{children:[t.jsx(re,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:Y(s==null?void 0:s.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${g}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),t.jsx(ie,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[t.jsx(re,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:`${k(n==null?void 0:n.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:ee(u,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),t.jsx(re,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:`${k(n==null?void 0:n.displayCoinB,6)} ${Y(s==null?void 0:s.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:ee(x,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function js(o){var p,h,d,c,u,x;const{isApp:r}=oe(),{apiVaultInfo:s,isUnstableVault:e,vaultTvl:n,performanceFee:i}=o,{getExplorerUrl:l}=Gt();return t.jsxs(Fe,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(ut,{coinACoinType:(p=s==null?void 0:s.displayTokenA)==null?void 0:p.coin_type,coinBCoinType:(h=s==null?void 0:s.displayTokenB)==null?void 0:h.coin_type,coinAIconUrl:(d=s==null?void 0:s.displayTokenA)==null?void 0:d.logo_url,coinBIconUrl:(c=s==null?void 0:s.displayTokenB)==null?void 0:c.logo_url}),t.jsxs(A,{alignItems:"start",flexDirection:e?"column":"row",gap:"2px",children:[t.jsxs(v,{children:[t.jsx(y,{fontSize:"16px",color:"text_caption",children:(s==null?void 0:s.name)||`${(u=s==null?void 0:s.displayTokenA)==null?void 0:u.symbol} - ${(x=s==null?void 0:s.displayTokenB)==null?void 0:x.symbol}`}),t.jsx($,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:t.jsx(v,{children:t.jsx(y,{fontSize:"12px",color:"primary",children:s==null?void 0:s.feeDisplay})})})]}),t.jsx(v,{mt:"4px",children:e&&t.jsx(Br,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"Haedal"})})]}),!r&&t.jsxs(v,{ml:"12px",gap:"4px",children:[t.jsx(y,{fontSize:"14px",children:"Vault Address"}),t.jsx(it,{fontSize:"14px",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})]})]}),t.jsx(Fe,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:r?t.jsxs(t.Fragment,{children:[t.jsx(te,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:t.jsx(it,{fontSize:"14px",color:"text_caption",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"APY",labelStyle:{fontSize:"14px"},rightValueTip:t.jsx(ot,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"Earnings",labelStyle:{fontSize:"14px"},value:t.jsx(Xe,{placement:"top",tooltip:t.jsx(y,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(ze,{children:t.jsx(v,{w:"100px",justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(nt,{coinType:a},a))})})}),valueStyle:{h:"20px",lineHeight:"20px"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"TVL",labelStyle:{fontSize:"14px"},value:(e?he(n,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e&&t.jsx(te,{wrapStyle:{gap:"6px"},label:t.jsxs(v,{children:[t.jsx(y,{children:"Performance Fee"}),t.jsx(ct,{type:"vaultDetailFee"})]}),labelStyle:{fontSize:"14px"},value:he(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})]}):t.jsxs(t.Fragment,{children:[t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"APY",titleStyle:{fontSize:"12px"},valueTooltip:t.jsx(ot,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontWeight:"500"}}),t.jsx(re,{wrapStyle:{gap:"6px",alignItems:"flex-end"},title:"Earnings",titleStyle:{fontSize:"12px"},value:t.jsx(Xe,{placement:"top",tooltip:t.jsx(y,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(ze,{children:t.jsx(v,{justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(nt,{coinType:a},a))})})}),valueStyle:{h:"20px"}}),t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"TVL",titleStyle:{fontSize:"12px"},value:(e?he(n,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}}),e&&t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"2px"},title:t.jsxs(v,{children:[t.jsx(y,{fontSize:"12px",children:"Performance Fee"}),t.jsx(ct,{type:"vaultDetailFee"})]}),titleStyle:{fontSize:"12px",mt:"-4px"},value:he(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}})]})})]})}function Ss(o){const{apiVaultInfo:r,tokenA:s,tokenB:e,isReverse:n,vaultsId:i,totalLp:l,holdCoinAmounts:p,holdLpAmount:h,handleRefreshClick:d,isUnstableVault:c,currentActionTab:u}=o,x=pe.useVaultsRemove(c);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ isReverse:",n),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenB:",e),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenA:",s);const a=pe.useAddButtonStatus(c),g=pe.useGetContractVaultInfo(c),[f,j]=m.useState(!1),[b,w]=m.useState("both"),{currentAccount:S,onWalletModal:_}=tt(),{contractClmmPoolObj:P}=Vt(),O=m.useMemo(()=>{if(P&&P[r==null?void 0:r.clmmPoolAddress])return P[r==null?void 0:r.clmmPoolAddress]},[r==null?void 0:r.clmmPoolAddress,P]),{fromTokenLock:R,toTokenLock:q,lpTokenInfo:H}=g(r==null?void 0:r.vaultsId,r==null?void 0:r.clmmPoolAddress,r==null?void 0:r.tokenA,r==null?void 0:r.tokenB,r==null?void 0:r.isReverse),{amountInputA:N,amountInputB:U,availableAmountA:T,availableAmountB:B,amountValueA:ye,amountValueB:fe,preCalculateLoading:F,fixAmountA:z,inputTotalValue:X,handleAmountInputChange:le,calculateResult:D,showOnlySideTips:K,doRemoveAction:xe,handlePercentInputChange:ce,removePercent:ne,isPercentInput:J,reCalculateResult:ue,calculateAvailableLoading:se,submitLoading:E}=x(b,d,p,l,h,i,n?e:s,n?s:e,n,R,q,f,O),V=m.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",X),X&&f?qe(X).gt(0)&&qe(X).lt(1e-4):!1),[f,X]),{btnText:be,btnDisabled:Oe}=a(f,b,!1,N,U,n?!z:z,T,B,s,e,c,"",D,V);ht(D==null?void 0:D.burn_ft_amount,l);const{amountLimit:ve}=mt(0,D==null?void 0:D.burn_ft_amount,!1);m.useMemo(()=>T,[T,n]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceA ~ availableAmountA:",T),m.useMemo(()=>B,[B]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceB ~ availableAmountB:",B);const G=m.useMemo(()=>s,[n,s,e]),Q=m.useMemo(()=>e,[n,s,e]),je=m.useMemo(()=>F?J?!0:n?z:!z:!1,[F,J]),Se=m.useMemo(()=>F?J?!0:n?!z:z:!1,[F,J]),I=m.useMemo(()=>k(Zt(ve||"0",H==null?void 0:H.decimals),H==null?void 0:H.decimals),[ve,H]);return t.jsxs(A,{gap:"8px",w:"100%",align:"flex-start",children:[t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Rt,{label:"Remove Amounts",displayTokenA:s,displayTokenB:e,onSelectAssetTab:w,handleRefreshClick:()=>{d(),ue()},isCheckedZAP:f,setIsCheckedZAP:j,assetAction:b,setAssetAction:w,currentActionTab:u,isUnstableVault:c}),t.jsx(W,{w:"100%",position:"relative",mt:"16px",children:t.jsx(At,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:se,hideSelf:b!=="both"&&b!==(G==null?void 0:G.coin_type),balance:T||"",value:N,amountValue:ye,loading:je,onChange:(M,Ae,we)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:179 ~ VaultsRemove ~ value:",M),le(M,!n,Ae,we)},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:G,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:se,needRemainBalance:!1,hideSelf:b!=="both"&&b!==(Q==null?void 0:Q.coin_type),balance:B||"",value:U,amountValue:fe,loading:Se,onChange:(M,Ae,we)=>{le(M,n,Ae,we)},selectable:!1,placeholder:"0.0",token:Q},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[t.jsx(y,{color:"primary_gray",children:"Amount"}),t.jsx(Lr,{percentage:ne,onChange:M=>{se||ce(Number(M.toString().replace("%","")))}})]}),t.jsx($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(A,{w:"100%",gap:"20px",children:[t.jsx(We,{m:"-1px",isLoading:F||E,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:Oe||F||E,onClick:()=>{S?xe():_(!0)},children:be||(f?"Zap Out":"Withdraw")}),V&&t.jsx(A,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:t.jsx(y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),D&&!V&&t.jsxs(A,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[b!=="both"&&K&&t.jsx(y,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:K}),t.jsxs(A,{w:"100%",gap:"20px",children:[t.jsx(te,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:ee(X,2),valueStyle:{fontSize:"14px"},isLoading:F}),t.jsx(te,{label:"LP Burn Amount",value:`${I} ${`${G==null?void 0:G.symbol} - ${Q==null?void 0:Q.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:F})]})]})]})})]})}const As=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function Po(){const{vaultId:o,category:r}=dt(),{currentAccount:s}=tt(),{apiVaultInfo:e,getApiVaultInfo:n}=It(o),{fetchAccountBalance:i}=sr(),l=pe.useGetContractVaultInfo(r=="haedal"),{vaultStatsObj:p}=er(),[h,d]=m.useState(!0);m.useEffect(()=>{var E;if(console.log("ðŸš€ ~ VaultsDetailPage ~ vaultStatsObj:",Object.values(p),p,o),o&&Yt(p)){const V=(E=Object.values(p))==null?void 0:E.filter(be=>be.vaultsId==o);console.log("ðŸš€ ~ arr ~ arr:",V),(V==null?void 0:V.length)>0?d(!0):d(!1)}},[o,p]);const{contractVault:c,lpTokenInfo:u,minPrice:x,maxPrice:a,vaultCoinAmounts:g,vaultsCoinAValue:f,vaultsCoinBValue:j,currPrice:b,balanceInfo:w,totalValue:S,fetchClmmPoolFromContract:_,fetchVaultInfoFromContract:P,vaultsCoinPercent:O,sharePoolRate:R,holdCoinAmounts:q,holdCoinAValue:H,holdCoinBValue:N,fetchVaultBalance:U,vaultTvl:T,depositRatio:B,hardCapUSD:ye,performanceFee:fe,quoteCoin:F}=l(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:81 ~ VaultsDetailPage ~ totalValue:",S),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:61 ~ VaultsDetailPage ~ vaultTvl:",T);const[z,X]=m.useState("Deposit");m.useEffect(()=>{s!=null&&s.address&&e&&e.vaultsId&&(u!=null&&u.decimals)&&r=="haedal"&&U(s==null?void 0:s.address,e.vaultsId,u==null?void 0:u.decimals)},[s==null?void 0:s.address,e,u==null?void 0:u.decimals,r]);const{rewardPerA:le,rewardPerB:D}=tr(w==null?void 0:w.balanceFormat,e);m.useEffect(()=>{o&&(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:87 ~ useEffect ~ fetchVaultInfoFromContract:",P),P(o,!0))},[o]),m.useEffect(()=>{e&&(console.log("ðŸš€ ~ useEffect ~ apiVaultInfo:",e),_(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),m.useEffect(()=>{s!=null&&s.address&&i()},[]);const[K,xe]=m.useState(!1),ce=()=>{i(),e&&_(e.clmmPoolAddress,!0),o&&(P(o,!0),n(o,!0)),xe(!0),setTimeout(()=>{xe(!1)},1e3)},ne=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[J,ue]=m.useState("Overview"),se=qt();return t.jsx(W,{pt:"40px",w:"100%",children:h?t.jsxs(A,{gap:"20px",w:"100%",align:"flex-start",children:[t.jsx(v,{w:"100%",justify:"space-between",children:t.jsx(Xt,{bg:"bg_six",borderColor:"border_secondary"})}),t.jsx(js,{apiVaultInfo:e,isUnstableVault:r=="haedal",vaultTvl:T,performanceFee:fe}),t.jsxs(Fe,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[t.jsxs(A,{width:"100%",flex:"1",gap:"8px",children:[(e==null?void 0:e.category)=="haedal"&&t.jsx(ke,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:ne,currentTab:J,handleChangeTab:E=>{ue(E==null?void 0:E.value)}}),J=="Overview"?t.jsxs(t.Fragment,{children:[t.jsx(ns,{minPrice:x,maxPrice:a,currentPrice:e!=null&&e.isReverse?1/b:b,displayTokenB:e!=null&&e.isReverse?e==null?void 0:e.displayTokenA:e==null?void 0:e.displayTokenB,displayTokenA:e!=null&&e.isReverse?e==null?void 0:e.displayTokenB:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1}),t.jsx(vs,{vaultCoinAmounts:g,vaultsCoinAValue:f,vaultsCoinBValue:j,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsCoinPercent:O,depositRatio:B,hardCapUSD:ye,vaultTvl:T}),t.jsx(ss,{lpTokenInfo:u,sharePoolRate:R,balanceInfo:w,totalValue:S,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,holdCoinAmounts:q,holdCoinAValue:H,holdCoinBValue:N,isReverse:(e==null?void 0:e.isReverse)||!1,rewardPerA:le,rewardPerB:D})]}):t.jsxs(t.Fragment,{children:[t.jsx(xs,{isRefresh:K,vaultsId:e==null?void 0:e.vaultsId}),t.jsx(hs,{isRefresh:K,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse,haveMining:e==null?void 0:e.haveMining,quoteCoin:F}),t.jsx(cs,{isRefresh:K,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse})]})]}),t.jsxs(A,{w:{base:"100%",lg:"40%"},justifyContent:"start",gap:"8px",children:[t.jsx($,{p:"0",borderRadius:"12px",bg:"bg_six",borderColor:"border_secondary",children:t.jsxs(v,{w:"100%",p:{base:"0 8px",lg:"0 16px"},children:[t.jsx(ke,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",border:"none",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:As,currentTab:z,handleChangeTab:E=>{X(E==null?void 0:E.value)}}),t.jsxs(v,{children:[t.jsx(Jt,{slippageType:"vaults",compact:!0}),t.jsx(rr,{handleRefresh:ce,isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),z==="Deposit"&&t.jsx(fs,{apiVaultInfo:e,feeTier:e==null?void 0:e.feeDisplay,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:(c==null?void 0:c.total_supply)||(c==null?void 0:c.lp_token_treasury),isUnstableVault:r=="haedal",handleRefreshClick:ce,currentActionTab:z}),z==="Withdraw"&&t.jsx(Ss,{apiVaultInfo:e,holdCoinAmounts:q,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:c==null?void 0:c.total_supply,holdLpAmount:w==null?void 0:w.balance,isUnstableVault:r=="haedal",handleRefreshClick:ce,currentActionTab:z})]})]})]}):t.jsx(gt,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsxs(A,{children:[t.jsx(y,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),t.jsx(We,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{se("/vaults")},children:"Back to Vault"})]})})})}export{Po as default};
