{"version":3,"file":"useInsufficientBalanceToast-Dk7T_RPj.js","sources":["../../src/hooks/common/useInsufficientBalanceToast.ts"],"sourcesContent":["import { useGlobalToast } from '@cetus/design'\nimport { useAccountBalance } from '@cetus/hooks'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport { CoinType, CommonTypeInfo, ToastType } from '@cetus/types'\n\nexport default function useInsufficientBalanceToast() {\n  const { failedTsToast } = useGlobalToast()\n  const { getTokenInfo } = useGetToken()\n  const { fetchAccountBalance } = useAccountBalance()\n\n  const fetchToken = async (coinType: string) => {\n    if (!coinType) return\n    try {\n      const coinInfo = await getTokenInfo(coinType as CoinType)\n      return coinInfo\n    } catch (error) {\n      console.error('Error fetching token info:', error)\n    }\n  }\n\n  const showInsufficientBalanceToast = async (errorInfo: string) => {\n    console.log('ðŸš€ ~ showInsufficientBalanceToast ~ errorInfo:', errorInfo.toString())\n    const coinType = errorInfo.match(/0x[a-fA-F0-9]+::\\w+::\\w+/)\n    const tokenInfo = coinType ? await fetchToken(coinType[0]) : undefined\n    const info: ToastType = {\n      linkLabel: '',\n      getShowInfo: () => {\n        const info: CommonTypeInfo = {\n          toastTitleText: tokenInfo ? `Insufficient ${tokenInfo?.symbol} balance` : 'Insufficient balance'\n        }\n        return info\n      }\n    }\n    if (errorInfo.includes('Insufficient balance')) {\n      fetchAccountBalance()\n      failedTsToast(info)\n    }\n  }\n  return {\n    showInsufficientBalanceToast\n  }\n}\n"],"names":["useInsufficientBalanceToast","failedTsToast","useGlobalToast","getTokenInfo","useGetToken","fetchAccountBalance","useAccountBalance","fetchToken","coinType","error","errorInfo","tokenInfo","info"],"mappings":"+JAKA,SAAwBA,GAA8B,CAC9C,KAAA,CAAE,cAAAC,CAAc,EAAIC,EAAe,EACnC,CAAE,aAAAC,CAAa,EAAIC,EAAY,EAC/B,CAAE,oBAAAC,CAAoB,EAAIC,EAAkB,EAE5CC,EAAa,MAAOC,GAAqB,CAC7C,GAAKA,EACD,GAAA,CAEK,OADU,MAAML,EAAaK,CAAoB,QAEjDC,EAAO,CACN,QAAA,MAAM,6BAA8BA,CAAK,CAAA,CAErD,EAoBO,MAAA,CACL,6BAnBmC,MAAOC,GAAsB,CAChE,QAAQ,IAAI,iDAAkDA,EAAU,SAAA,CAAU,EAC5E,MAAAF,EAAWE,EAAU,MAAM,0BAA0B,EACrDC,EAAYH,EAAW,MAAMD,EAAWC,EAAS,CAAC,CAAC,EAAI,OACvDI,EAAkB,CACtB,UAAW,GACX,YAAa,KACkB,CAC3B,eAAgBD,EAAY,gBAAgBA,GAAA,YAAAA,EAAW,MAAM,WAAa,sBAC5E,EAGJ,EACID,EAAU,SAAS,sBAAsB,IACvBL,EAAA,EACpBJ,EAAcW,CAAI,EAEtB,CAGA,CACF"}