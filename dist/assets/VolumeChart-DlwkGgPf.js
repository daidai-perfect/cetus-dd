import{j as t,V as M,f as X,C as V,as as N,at as H,au as L,F as $,u as q,av as S,aw as Z,ax as _,ay as Q,a as Y}from"./vendor-DsVemle5.js";import{P as F}from"./Pagination-D3S2cm5E.js";import{ae as R,af as K,ag as b,u as ee,ah as te,ai as se,aj as ae}from"./index-ptnn7YYs.js";import{d as ne}from"./useWrapPoolData-Dtc_nARB.js";import{p as oe,C as re,E as ce}from"./EmptyTooltip-C9ERy4PS.js";import{X as E,Y as B,R as le}from"./YAxis-D_6_FdoJ.js";import{g as ie,B as z,f as me,T as ue}from"./generateCategoricalChart-BskwEe_D.js";function ve({dataSource:e,columns:p,itemSkeletonLength:h,skeletonLength:c=3,rowKey:a,loading:s,pagination:n,rowStyle:l,wrapStyle:m,onRowClick:o,itemHeight:x}){var T;const u=new Array(c).fill(0);return t.jsxs(M,{w:"100%",...m||{},children:[(T=e&&(e!=null&&e.length)&&!s?e:u)==null?void 0:T.map((r,i)=>t.jsxs(M,{w:"100%",children:[t.jsx(R,{data:K(p,r,i),loading:s,skeletonLength:h,onClick:()=>o==null?void 0:o(r,i),style:typeof l=="function"?l(r,i):l,itemHeight:x},s?i:typeof a=="function"?a(r):a?r[a]:i),t.jsx(X,{w:"100%",h:"1px",bg:"border",mt:"12px"})]},s?i:typeof a=="function"?a(r):a?r[a]:i)),n&&(n==null?void 0:n.total)>(n==null?void 0:n.size)&&t.jsx(V,{mt:"16px",children:t.jsx(F,{...n})})]})}function pe(e){const{rowStyle:p,minW:h,tableListLength:c,tdListLength:a,firstTd:s}=e,n=new Array(c).fill(0),l=new Array(a).fill(0);return t.jsx(N,{children:n==null?void 0:n.map((m,o)=>t.jsx(H,{sx:{td:{_last:{">div":{justifyContent:"flex-end"}}}},...typeof p=="function"?p(m,o):p,children:t.jsxs(t.Fragment,{children:[s&&t.jsx(L,{children:s}),l==null?void 0:l.map((x,u)=>t.jsx(L,{children:t.jsx($,{w:"100%",justifyContent:!s&&u==0?"flex-start":"flex-end",children:t.jsx(q,{})})},u))]})},m+`${o}`))})}function be({dataSource:e,skeletonLength:p=3,columns:h,rowKey:c,loading:a,tdBorder:s,firstTdSkeleton:n,theadConfig:l,tbodyConfig:m,rowStyle:o={},onRowClick:x,pagination:u,...T}){return t.jsxs(t.Fragment,{children:[t.jsx(S,{w:"100%",children:t.jsxs(Z,{size:"sm",...T,children:[t.jsx(_,{...l,children:t.jsx(H,{children:h.map(({title:r,key:i,thConfig:f})=>t.jsx(Q,{...f,children:typeof r=="function"?r():r},typeof i=="function"?i():i))})}),a?t.jsx(pe,{tableListLength:p,tdListLength:h.length,firstTd:typeof n=="function"?n():n,rowStyle:o}):t.jsx(N,{...m,children:e==null?void 0:e.map((r,i)=>t.jsx(H,{borderBottom:s?"1px solid":"none",borderColor:s?"border":"transparent",onClick:()=>x&&x(r,i),...typeof o=="function"?o(r,i):o,children:h.map(({render:f,key:j,tdConfig:g})=>t.jsx(L,{...g,fontWeight:"500",children:typeof f=="function"?f(r,i):f||r[j]},j))},c?typeof c=="function"?c(r):r[`${c}`]:(r==null?void 0:r.key)||i))})]})}),u&&(u==null?void 0:u.total)>(u==null?void 0:u.size)&&t.jsx(V,{mt:"16px",children:t.jsx(F,{...u})})]})}var xe=ie({chartName:"BarChart",GraphicalChild:z,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:E},{axisType:"yAxis",AxisComp:B}],formatAxisMap:me}),d=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(d||{});function Ae(){const[e,p]=Y.useState("");return{time:e,getCurrentTime:()=>{const a=b(Date.parse(new Date().toUTCString()),"YMD")||"",s=a.slice(5,7),n=d[Number(s)],l=a.slice(8,10),m=n,o=a.slice(0,4),x=m+" "+l+", "+o+" (UTC)";p(x)},getHoverTime:(a,s)=>{const n=Date.parse(a),l=new Date(n);l.setDate(l.getDate()+7);const m=new Date(n);m.setDate(m.getDate()+31);const o=l.toUTCString(),x=m.toUTCString(),u=b(Date.parse(x),"YMD")||"",T=b(Date.parse(new Date().toUTCString()),"YMD")||"",r=Date.parse(o)>Date.parse(new Date().toUTCString())?b(Date.parse(new Date().toUTCString()),"YMD")||"":b(Date.parse(o),"YMD")||"",i=T.slice(5,7),f=d[Number(i)],j=T.slice(8,10),g=f,P=T.slice(0,4),y=a.slice(5,7),U=d[Number(y)],C=a.slice(8,10),D=U,v=a.slice(0,4),w=r.slice(5,7),k=d[Number(w)],J=r.slice(8,10),W=k,G=r.slice(0,4),I=Number(y)==12?d[1]:d[Number(y)+1],O=u.slice(0,4);let A;s=="D"?A=D+" "+C+", "+v+" (UTC)":s=="W"?A=C+" "+D+"-"+J+" "+W+" , "+G+" (UTC)":A=Date.parse(x)>=Date.parse(new Date().toUTCString())?D+" 01-"+g+" "+j+", "+P+" (UTC)":D+" 01-"+I+" 01, "+O+" (UTC)",p(A)}}}function we(){const{fetchByApi:e}=ee();return{getHistogramData:async h=>{const{type:c,date_type:a="day",limit:s,address:n="all"}=h;console.log("ðŸš€ ~ getHistogramData ~ limit:",c,a,s);const l=n=="all"&&c=="vol",o={day:"day",wek:"week",mon:"month"}[a],x=Date.now(),i=s?a=="day"?s*86400:a=="wek"?s*604800:s*2592e3:void 0,f=i?String(Math.floor(x/1e3-i)):0,g=oe(l?{dataType:c,dateType:o,beginTimestamp:f}:{dataType:c,dateType:o,address:n,beginTimestamp:f},ae),y=await e(l?te:se,"GET",g);console.log("ðŸš€ ~ getHistogramData response:",y);const C=[...((y==null?void 0:y.list)||[]).map(D=>{const v=new Date(D.timestamp*1e3).toISOString().split(".")[0]+"Z",w=Number(v.slice(5,7)),k=d[w];return{num:Number(D.value),date:v,xAxis:a==="mon"?k:ne(v)}})].reverse();return console.log("ðŸš€ ~ getHistogramData ~ isPureTvl:",C),C}}}const ke=({data:e,onChangeValue:p,noXAxis:h,pageFrom:c="stats"})=>{const[a,s]=Y.useState(""),n=o=>{if(o&&o.activePayload&&o.activePayload.length){const x=o.activePayload[0].payload.date;p(o.activePayload[0].payload);const u=x.slice(5,7),T=d[Number(u)],r=x.slice(8,10),i=T,f=x.slice(0,4);s(r+" "+i+" "+f)}},l=()=>{p(null)};(e==null?void 0:e.length)>0&&Math.floor(Math.min(...e.map(o=>o.num)));const m=Math.ceil(Math.max(...e.map(o=>o.num)));return t.jsx(le,{width:"100%",height:"100%",children:t.jsxs(xe,{barCategoryGap:"25%",data:e,onMouseMove:n,onMouseLeave:l,maxBarSize:24,children:[!h&&t.jsx(E,{type:"category",dataKey:"xAxis",minTickGap:18,tickLine:!1,axisLine:!1,tick:t.jsx(re,{})}),m&&t.jsx(B,{domain:[0,m*1.05],hide:!0,axisLine:!1,tickLine:!1}),t.jsx(ue,{content:t.jsx(ce,{value:c!=="stats"?a:""}),cursor:t.jsx(he,{})}),t.jsx(z,{dataKey:"num",fill:"#75C8FF",isAnimationActive:!1})]})})};function he(e){var l,m;const{x:p,y:h,width:c,height:a,payload:s}=e;if(!s||!(s!=null&&s[0])||!((m=(l=s==null?void 0:s[0])==null?void 0:l.payload)!=null&&m.num))return;const n=c>192?c/1.2:c>96?c/1.5:c>48?c/2:c>24?c/4:c/8;return t.jsx("g",{children:t.jsx("rect",{width:c-n,height:a,x:p+n/2,fill:"rgba(118,200,255,0.5)",y:h+1})})}export{ve as H,be as T,ke as V,we as a,Ae as u};
//# sourceMappingURL=VolumeChart-DlwkGgPf.js.map
