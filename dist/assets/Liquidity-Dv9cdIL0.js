import{a as A,j as e,T as C,H as E,V as W,C as gt,q as je,a9 as Rt,f as te,a6 as be,a7 as Oe,ag as ur,p as He,ap as xr,aa as Ze,W as as,X as ls,Y as ds,Z as us,$ as or,a0 as xs,af as os,a5 as pr,aq as ft,F as gr,o as yr,I as Zt,x as mr}from"./vendor-BFGDaAdA.js";import{u as ps,S as gs}from"./usePriceImpact-C5vRlDiT.js";import{l as hr,u as ys,U as br,r as Kt,g as jr,I as Ce,a as Le,e as Ve,z as Ct,V as I,h as Lt,j as Me,c as we,d as H,W as Qt,Q as ms,M as vt,f as hs,L as Sr,k as yt,P as wt,X as bs,B as Ar,x as ct,o as js,Y as _t,Z as pe,$ as tt,a0 as lt,a1 as ue,q as fr,a2 as Yt,a3 as vr,F as Tt,C as at,a4 as wr,a5 as We,p as ze,a6 as _r,v as kt,a7 as kr,a8 as Xt,a9 as Rr}from"./index-C2McGhUQ.js";import{u as ee}from"./index-B7lL-LwV.js";import{u as ye,P as Cr,a as Lr,V as Tr}from"./PositionListLoading-D-Ei2JdT.js";import{u as Ge}from"./index-D1m9ooSc.js";import{H as Br,T as Fr}from"./Table-D0xxzm12.js";import{N as De}from"./NoData-DtiZhmrM.js";import{A as Mr}from"./CopyButton-CgX02UdF.js";import{T as qr}from"./TvlChart-BUeR7bCs.js";import{a as zr,u as Er,V as Wr}from"./VolumeChart-DDKrXi5V.js";import{u as Hr}from"./contract-helper-DrM93pl2.js";import{H as _e}from"./HTextLabelBox-CEv2cqnO.js";import{T as $r}from"./TooltipIcon-Dx43mLo6.js";import{A as Ss}from"./SingleTokenInfo-Bg-EjLFW.js";import{a as As,u as Ur}from"./usePositionList-C5YBA0hs.js";import{u as Nr}from"./useRpcListener-BsxWhR6d.js";import{A as Dr}from"./index-DwoAPM79.js";import{S as st,u as Te,a as mt,L as fs}from"./LiquidityRangeChart-D5tpwqig.js";import{u as Be,d as vs,Z as Bt,R as Or,a as ws,b as _s,c as Vr,e as ks,f as Rs,g as Cs}from"./RemoveBlock-BmXmTC9z.js";import{T as Jt}from"./TradeConfirmAmountInfo-BHyM58tI.js";import{D as Ft,W as Ls}from"./DepositRatio-YImHWzwW.js";import{T as Mt}from"./TotalAmount-U7SqMg-q.js";import{P as Gr}from"./PositionStatus-CYztvj5u.js";import{u as Zr,a as Kr}from"./useTransaction-AoGvT1nJ.js";import{u as Qr}from"./global-CIqqcgcz.js";import{f as rt,i as Ee}from"./index-DueGU3k_.js";import{c as Yr,g as dt,a as ut,u as Xr}from"./useGetPoolList-nmB6ja3n.js";import{u as Ts}from"./useAccountBalance-CA9G3Zum.js";import{u as xt}from"./useTokenBalance-B28n3DtK.js";import{u as Bs,m as St,S as Pt,a as Jr}from"./SelectTokenAndFeeConfirm-BXM63kkK.js";import{u as Pr}from"./useNotifiSubscription-DJQWIEHD.js";import{u as Ir}from"./usePosAdd-DTj0rMw8.js";import{P as It}from"./PriceInput-CYtgccTA.js";import{F as ei}from"./FarmingIcon-BSdPEIkp.js";import{u as ti}from"./VaultsAction-Dbtj1iWt.js";import{u as si,V as ri}from"./VaultsAprBlock-zPWOXvBS.js";import{E as ot}from"./ErrorTips-CJ6wasob.js";import{T as Fs}from"./TradeInputGroup-DtPuVzhy.js";import{g as ii}from"./liquidity-CFx-figo.js";import{d as es,F as ni}from"./FeeTierSelect-BI_QVZ2v.js";import{u as Ms}from"./useToken-17dggns_.js";import{u as ci,a as ai}from"./useFavoritePool-DUjePK3D.js";import{u as li}from"./swapWidget-BsEjYL0q.js";import{u as di}from"./swapWidgetConfig-DLcMuo6C.js";import{B as ui}from"./BackButton-B_ZCv8QC.js";import{R as xi}from"./RefreshButton-CwWwiUVX.js";import{C as oi}from"./CurrentPrice-DlDz2PjA.js";import{W as pi}from"./WarningTokenTipModal-DVCXEPzf.js";import"./useSwapHelper-DbcorPbH.js";import"./useInterval-BQqGpXj5.js";import"./PoweredByHaedal-Bke0Bj0w.js";import"./VTextLabelBox-Cz76BIoZ.js";import"./ExpendItem-bJhdiA_r.js";import"./msafe-oYBkW7LJ.js";import"./RangeValue-Bq6NaZIx.js";import"./debounce-B8kzHASh.js";import"./index-BLCSsYSf.js";import"./Pagination-DAMxfdkb.js";import"./EmptyTooltip-DZSjoOqF.js";import"./_getAllKeysIn-hd8uy72n.js";import"./YAxis-D9KNlcna.js";import"./generateCategoricalChart-Dl7IQ97E.js";import"./linear-DYpwdEgO.js";import"./useWrapPoolData-B49bXTZg.js";import"./usePreviousValue-DoVr3Y3V.js";import"./ActionButton-H84xbuV5.js";import"./FreshProgressV2-DhXS1XmC.js";import"./useTrack-WSK0MLtO.js";import"./useSigner-XIGBUPeg.js";import"./index-tKtpSyWJ.js";import"./CheckBox-GaCpUZnB.js";import"./Loading-yKVeoG31.js";import"./useNotifiAlerts-CS9bweV3.js";import"./useXCetusHelper-CU9LQxaI.js";import"./InputBox-Cs7zlVAb.js";import"./useFindBestRouting-B7V2EM0n.js";import"./useDocumentSize-BMa29AD3.js";var Re=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Re||{});function gi(){const t=hr("clmm"),{fetchByApi:s}=ys();return{getTransactionsHistory:async p=>{try{const x=await s(br,"GET",p);if(console.log(x,"getTransactionsHistory"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(p,x)=>{try{const l=await t.Pool.getPoolTransactionList({pool_id:p,pagination_args:x,full_rpc_url:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(l,"getTransactionsHistoryBySDK"),l)return l;throw new Error("no data")}catch(l){console.error(l,"getTransactionsHistoryBySDK ~ error")}}}}function yi(){const{getTransactionsHistoryBySDK:s}=gi(),[i,c]=A.useState(!0),[p,x]=A.useState([]),[l,j]=A.useState(1),[r,d]=A.useState(),[y,a]=A.useState(!0),{apiPoolInfo:o,manualRefresh:g,setManualRefresh:k}=ee(),{poolAddress:F}=ye();A.useEffect(()=>{x([]),j(1),d(void 0),a(!0)},[F]),A.useEffect(()=>{g&&(x([]),j(1),d(void 0),a(!0),m({cursor:void 0,limit:10}))},[F,g]);const m=async b=>{var v;try{if(!y)return;if(F){c(!0);const n=await s(F,{...b});if(console.log("ðŸš€ ~ fetchData ~ result:",n),n){const u=(v=n==null?void 0:n.data)==null?void 0:v.map(f=>{var L,T;const S=f==null?void 0:f.parsed_json,_=S!=null&&S.amount_a||S!=null&&S.atob?o==null?void 0:o.tokenA:o==null?void 0:o.tokenB,w=S!=null&&S.amount_b||S!=null&&S.atob?o==null?void 0:o.tokenB:o==null?void 0:o.tokenA;return{...f,type:(L=f.type)!=null&&L.includes("Add")?Re.add:(T=f.type)!=null&&T.includes("Remove")?Re.remove:Re.swap,items:[{amount:Kt(S!=null&&S.amount_a?S==null?void 0:S.amount_a:S==null?void 0:S.amount_in,_==null?void 0:_.decimals).toString(),address:_==null?void 0:_.coin_type,url:_==null?void 0:_.logo_url,symbol:_==null?void 0:_.symbol},{amount:Kt(S!=null&&S.amount_b?S==null?void 0:S.amount_b:S==null?void 0:S.amount_out,w==null?void 0:w.decimals).toString(),address:w==null?void 0:w.coin_type,url:w==null?void 0:w.logo_url,symbol:w==null?void 0:w.symbol}]}});console.log("ðŸš€ ~ const_data=result?.data?.map ~ _data:",u),b!=null&&b.cursor?x(f=>[...f,...u||[]]):x(u||[]),d(n==null?void 0:n.next_cursor),a(n==null?void 0:n.has_next_page),c(!1)}}}catch(n){console.log(n,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ge(()=>{m({cursor:r,limit:10})},[l,F],{wait:500,leading:!0,trailing:!1}),{isLoading:i,list:p,apiPoolInfo:o,currentPage:l,onCurrentPageChange:()=>{j(b=>b+1)},hasNextPage:y}}const it={[Re.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Re.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Re.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},mi=({type:t})=>{var s,i,c,p;return e.jsxs(E,{children:[e.jsx(Ce,{xlinkHref:(s=it[t])==null?void 0:s.icon,svgFill:(i=it[t])==null?void 0:i.color,svgHover:(c=it[t])==null?void 0:c.color}),e.jsx(C,{color:"text_caption",children:(p=it[t])==null?void 0:p.title})]})},hi=({items:t,type:s,isReverse:i})=>{var p,x;const{isApp:c}=Le();return t?s===Re.swap?c?e.jsxs(W,{align:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsxs(E,{justify:"flex-end",children:[e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]})]}):e.jsxs(E,{justify:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]}):c?e.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:i?"column-reverse":"column",children:(p=t==null?void 0:t.filter(l=>!!+l.amount))==null?void 0:p.map(l=>e.jsx(qe,{item:l},l==null?void 0:l.address))}):e.jsx(E,{justify:i?"flex-start":"flex-end",gap:"8px 16px",flexDir:i?"row-reverse":"row",children:(x=t==null?void 0:t.filter(l=>!!+l.amount))==null?void 0:x.map(l=>e.jsx(qe,{item:l},l==null?void 0:l.address))}):null},qe=({item:t})=>e.jsxs(E,{gap:"4px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(C,{color:"text_caption",children:Ct(t==null?void 0:t.amount)}),e.jsx(C,{children:I(t==null?void 0:t.symbol,10)})]}),ts=(t,s=!1)=>[{title:e.jsx(C,{children:"Event"}),key:"type",render:({type:i})=>e.jsx(mi,{type:i}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(C,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:i,type:c})=>e.jsx(hi,{items:i,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(C,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:i})=>e.jsx(Mr,{address:i,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(i,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(C,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:i})=>e.jsx(C,{color:"text_caption",children:jr(i)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function bi(){const{getExplorerUrl:t}=Lt(),{isLoading:s,list:i,apiPoolInfo:c,currentPage:p,onCurrentPageChange:x,hasNextPage:l}=yi(),{isApp:j}=Le();return e.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(E,{w:"100%",justify:"space-between",children:e.jsx(C,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(i==null?void 0:i.length)==0?e.jsx(De,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):j?e.jsx(Br,{columns:ts(t,c==null?void 0:c.isReverse),dataSource:i,loading:s&&p===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(r,d)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")}}):e.jsx(Fr,{columns:ts(t,c==null?void 0:c.isReverse),dataSource:i,skeletonLength:10,loading:s&&p===1,onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),l&&e.jsx(gt,{mt:{base:"40px",lg:"20px"},children:e.jsx(je,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:x,children:s?e.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var qt=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(qt||{}),qs=(t=>(t.volume="vol",t.tvl="tvl",t.fees="fee",t))(qs||{}),zs=(t=>(t.d="D",t.w="W",t.m="M",t))(zs||{}),Es=(t=>(t.d="day",t.w="wek",t.m="mon",t))(Es||{});const ji={D:40,W:30,M:20};function Si(){const[t,s]=A.useState("Volume"),[i,c]=A.useState("D"),[p,x]=A.useState([]),{apiPoolInfo:l}=ee(),[j,r]=A.useState(!0),[d,y]=A.useState(null),{getHistogramData:a}=zr(),{poolAddress:o}=ye(),{getHoverTime:g,time:k}=Er();A.useLayoutEffect(()=>{x([]),s("Volume"),c("D"),y(null)},[o]);const F=async()=>{if(o)try{r(!0);const u=await a({date_type:Es[i.toLowerCase()],type:qs[t.toLowerCase()],limit:ji[i],address:o});u&&u.length&&x(u)}catch(u){throw console.error(u,"res-fetchAnalyticsData"),u}finally{r(!1)}};A.useEffect(()=>{F()},[o,t,i]),A.useEffect(()=>{d!=null&&d.date&&g(d==null?void 0:d.date,i)},[d==null?void 0:d.date,i]);const m=u=>{s(u.label),u.label!==t&&x([])},h=u=>{c(u.label),u.label!==i&&x([])},b=A.useMemo(()=>{if(t==="Volume")return{value:l==null?void 0:l.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:l==null?void 0:l.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:l==null?void 0:l.fees24Display,title:"Fees (24H)"}},[t,l==null?void 0:l.volume24Display,l==null?void 0:l.tvlDisplay,l==null?void 0:l.fees24Display]),v=Object.values(qt).map(u=>({label:u})),n=Object.values(zs).map(u=>({label:u}));return{handleChartTabChange:m,handleDateTabChange:h,defaultDisplay:b,chartsTabs:v,dateTypes:n,chartLoading:j,analyticsData:p,hoverData:d,setHoverData:y,currentChartTab:t,currentDateType:i,time:k}}function Ai(){const{isApp:t}=Le(),{handleChartTabChange:s,handleDateTabChange:i,defaultDisplay:c,chartsTabs:p,dateTypes:x,chartLoading:l,analyticsData:j,hoverData:r,setHoverData:d,currentChartTab:y,currentDateType:a,time:o}=Si();return e.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(E,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(Me,{type:"outlineTab",tabList:p,currentTab:y,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:i,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(W,{w:"100%",align:"flex-start",children:[e.jsx(C,{color:"text_caption",fontSize:"24px",children:(r==null?void 0:r.num)!==void 0&&r!==null?H(Qt(r.num)).gte("0.01")||H(Qt(r.num)).equals("0")?`$${we(r==null?void 0:r.num,2)}`:"<$0.01":c==null?void 0:c.value}),e.jsx(C,{children:r!=null&&r.date?o:c==null?void 0:c.title}),t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:i,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(te,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(te,{w:"100%",h:"100%",position:"relative",children:[l&&e.jsx(te,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Rt,{})}),y===qt.tvl?e.jsx(qr,{data:j,onChangeValue:g=>d(g)}):e.jsx(Wr,{data:j,onChangeValue:g=>d(g),pageFrom:"pools"})]})})]})}const fi=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:i=>{t(()=>({tokenAPrice:i}))},tokenBPrice:void 0,setTokenBPrice:i=>{t(()=>({tokenBPrice:i}))},tokenAAmount:"",setTokenAAmount:i=>{t(()=>({tokenAAmount:i}))},tokenBAmount:"",setTokenBAmount:i=>{t(()=>({tokenBAmount:i}))},tokenAAmountUSD:"",setTokenAAmountUSD:i=>{t(()=>({tokenAAmountUSD:i}))},tokenBAmountUSD:"",setTokenBAmountUSD:i=>{t(()=>({tokenBAmountUSD:i}))},totalAmountUSD:"",setTotalAmountUSD:i=>{t(()=>({totalAmountUSD:i}))},tvlLoading:!0,setTvlLoading:i=>{t(()=>({tvlLoading:i}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ht=ms(fi);function vi(){const{getBurnPositionAmountByPool:t}=Hr(),{apiPoolInfo:s,contractPoolInfo:i}=ee(),[c,p]=A.useState("0"),[x,l]=A.useState("0"),[j,r]=A.useState("0"),[d,y]=A.useState("0"),[a,o]=A.useState(!1),{poolAddress:g}=ye(),{tokenAPrice:k,tokenBPrice:F}=ht(),m=async(h,b)=>{try{o(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:v,totalB:n}=await t(h,b);p(v),l(n),k&&r(H(v).mul(k==null?void 0:k.price).toString()),F&&y(H(n).mul(F==null?void 0:F.price).toString())}catch(v){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",v)}finally{o(!1)}};return Ge(()=>{s&&(i!=null&&i.current_sqrt_price)&&m(s,i==null?void 0:i.current_sqrt_price)},[g,i==null?void 0:i.current_sqrt_price,k==null?void 0:k.price,F==null?void 0:F.price],{wait:500}),{burnAmountA:c,burnAmountB:x,burnAmountAUSD:j,burnAmountBUSD:d,loading:a}}function wi(){const{apiPoolInfo:t}=ee(),{burnAmountA:s,burnAmountB:i,burnAmountAUSD:c,burnAmountBUSD:p,loading:x}=vi();return H(s).gt(0)||H(i).gt(0)?e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(E,{children:[e.jsx(C,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx($r,{type:"burnedLiquidity"})]}),e.jsxs(be,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(ss,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:c,loading:x}),e.jsx(ss,{token:t==null?void 0:t.tokenB,amount:i,amountUSD:p,loading:x})]})]}):null}const ss=({token:t,amount:s,amountUSD:i,loading:c})=>e.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(C,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(C,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:H(i).gt("0")?`$${hs(vt(i,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function _i(){const{tokenAAmountUSD:t,totalAmountUSD:s}=ht(),i=A.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const p=Sr(H(t).div(s).mul(100).toString(),2);return p==="NaN"?"--":p}return"--"},[t,s]),c=A.useMemo(()=>i&&i!=="--"?H(100).minus(i).toString():"--",[i]);return{tokenARatio:i,tokenBRatio:c}}const nt=t=>t==="--"?"--":`${t}%`;function ki(){var a,o,g,k,F,m;const{apiPoolInfo:t,contractPoolInfo:s}=ee(),{getExplorerUrl:i}=Lt(),{poolAddress:c}=ye(),{tokenAAmount:p,tokenBAmount:x,tokenAAmountUSD:l,tokenBAmountUSD:j,tvlLoading:r}=ht(),{tokenARatio:d,tokenBRatio:y}=_i();return e.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(E,{w:"100%",justify:"space-between",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(ur,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(_e,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(Ss,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(i(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(s==null?void 0:s.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(E,{justify:"flex-start",w:"100%",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(W,{gap:"16px",w:"100%",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:(a=t==null?void 0:t.displayTokenA)==null?void 0:a.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(o=t==null?void 0:t.displayTokenA)==null?void 0:o.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(C,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((g=t==null?void 0:t.displayTokenA)==null?void 0:g.symbol,10)}),r?e.jsx(He,{h:"12px",w:"46px"}):e.jsx(C,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(y):nt(d)})]})]}),e.jsx(te,{w:"200px",children:e.jsx(xr,{value:Number(t!=null&&t.isReverse?y:d),size:"xs",h:"4px",borderRadius:"4px",bg:[d,y].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[d,y].includes("--")?"background":"primary"}}})}),e.jsxs(E,{gap:"12px",children:[e.jsxs(W,{align:"flex-end",gap:"4px",children:[e.jsx(C,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((k=t==null?void 0:t.displayTokenB)==null?void 0:k.symbol,10)}),r?e.jsx(He,{h:"12px",w:"46px"}):e.jsx(C,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(d):nt(y)})]}),e.jsx(Ve,{imageUrl:(F=t==null?void 0:t.displayTokenB)==null?void 0:F.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(m=t==null?void 0:t.displayTokenB)==null?void 0:m.coin_type:""})]})]}),e.jsxs(W,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenA,amount:p,amountUSD:l}),e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenB,amount:x,amountUSD:j})]})]})]})]})}const rs=({token:t,amount:s,amountUSD:i,loading:c})=>{const{getExplorerUrl:p}=Lt();return t?e.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(C,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(C,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(Ss,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(p(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:i&&i!=="--"?`$${we(i)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function Ri(){return e.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(Ai,{}),e.jsx(ki,{})]}),e.jsx(wi,{}),e.jsx(bi,{})]})}function Ci(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=As(),{manualRefresh:i}=ee(),{currentAccount:c,onWalletModal:p}=yt(),{getPositionBaseList:x,getPosRelatedData:l}=Ur(),[j,r]=A.useState(""),{poolAddress:d}=ye(),y=async o=>{const g=await x(o);Array.isArray(g)&&l(g),typeof g=="string"&&r(g)};return A.useEffect(()=>{c!=null&&c.address&&y(c==null?void 0:c.address)},[c==null?void 0:c.address]),A.useEffect(()=>{i&&(c!=null&&c.address)&&y(c==null?void 0:c.address)},[i]),Nr({onRpcChange:()=>{c!=null&&c.address&&y(c==null?void 0:c.address)}}),{data:A.useMemo(()=>{if(d){const o=s[d.toLowerCase()||""];return o?o==null?void 0:o.list:[]}return[]},[d,JSON.stringify(s)]),rpcNodeErrorStr:j,posBaseListLoading:t,currentAccount:c,onWalletModal:p}}function Li(){const t=Ze(),{apiPoolInfo:s}=ee(),{currentAccount:i,posBaseListLoading:c,data:p,rpcNodeErrorStr:x,onWalletModal:l}=Ci();return e.jsx(W,{minW:{base:"100%",lg:"1024px"},children:i!=null&&i.address?c?[{},{}].map((j,r)=>e.jsx(Cr,{},r)):p&&(p==null?void 0:p.length)>0?p==null?void 0:p.map((j,r)=>e.jsx(Lr,{positionInfo:j},j==null?void 0:j.posId)):x?e.jsx(De,{type:"nodata",text:x}):e.jsx(De,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(je,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>t(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):e.jsx(De,{type:"nowallet",onboard:()=>l(!0)})})}function Ti({apiPoolInfo:t,apiPoolInfoLoading:s,tvlLoading:i,totalTvl:c}){return e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(st,{label:"Pool APR",value:e.jsx(Dr,{poolInfo:t,placement:"bottom",children:e.jsxs(E,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(C,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:t!=null&&t.haveFarming||t!=null&&t.miningAprList&&(t==null?void 0:t.miningAprList.length)>0?"help":"text",children:t==null?void 0:t.feeAndMiningAprDisplay}),(t==null?void 0:t.haveFarming)&&e.jsxs(C,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",t==null?void 0:t.farmingAprDisplay]})]})})}),e.jsx(st,{label:"TVL",value:c&&c!=="--"?`$${we(c,2)}`:"--",loading:s||i}),e.jsx(st,{label:"Volume (24H)",value:(t==null?void 0:t.volume24Display)||"",loading:s}),e.jsx(st,{label:"Fees (24H)",value:(t==null?void 0:t.fees24Display)||"",loading:s})]})}function Bi(t){var _;const{onClose:s,onSubmit:i,data:{feeTier:c,zapData:p}}=t,{fromToken:x,toToken:l,fromAmount:j,toAmount:r,totalAmount:d,percentMap:y,fromTokenLock:a,toTokenLock:o}=Be(),{lowerTickData:g,upperTickData:k}=Te(),{currentPriceData:F,apiPoolInfo:m}=ee(),{setIsChecked:h}=wt(),[b,v]=A.useState(!0),n=A.useMemo(()=>{var w;return((w=m==null?void 0:m.tokenA)==null?void 0:w.coin_type)===(x==null?void 0:x.coin_type)?!b:!!b},[m,x,l,b]),u=A.useMemo(()=>b?`${I(l==null?void 0:l.symbol,10)} per ${I(x==null?void 0:x.symbol,10)}`:`${I(x==null?void 0:x.symbol,10)} per ${I(l==null?void 0:l.symbol)}`,[b,x==null?void 0:x.symbol,l==null?void 0:l.symbol]),f=vs(()=>{i(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:S}=wt();return e.jsxs(as,{isOpen:!0,onClose:()=>{s(),h(!1)},isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{children:[e.jsx(us,{children:e.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(or,{}),e.jsx(xs,{textAlign:"center",p:"0px",children:e.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(E,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(E,{children:[e.jsx(bs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:l==null?void 0:l.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:l==null?void 0:l.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(C,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${I(x==null?void 0:x.symbol,10)} - ${I(l==null?void 0:l.symbol,10)}`})]}),e.jsx(Ar,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(E,{gap:"12px",children:[e.jsx(C,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(C,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),p?e.jsx(Jt,{coinA:{amount:p==null?void 0:p.amount,...p==null?void 0:p.token}}):e.jsx(Jt,{coinA:{amount:j,...x},coinB:{amount:r,...l}}),e.jsxs(te,{w:"100%",children:[e.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(C,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(Gr,{isActive:!a&&!o,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(W,{gap:"0",border:"1px solid",bg:"bg_secondary",borderColor:"border",borderRadius:"12px",mt:"8px",children:[e.jsxs(E,{justify:"center",h:"48px",w:"100%",gap:"4px",children:[e.jsx(C,{children:"Current Price"}),e.jsx(C,{as:"span",color:"text_caption",children:ct(n?F.reverseCurrentPrice:F==null?void 0:F.currentPrice,6)}),e.jsx(C,{children:u}),e.jsx(je,{variant:"unstyled",onClick:()=>v(!b),children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsx(te,{h:"1px",w:"calc(100% - 32px)",p:"0 12px",bg:"border"}),e.jsxs(E,{w:"100%",h:"100px",children:[e.jsx(is,{title:"Min Price",price:ct(n?k==null?void 0:k.reversePrice:g==null?void 0:g.price,6),perText:u}),e.jsx(os,{orientation:"vertical",h:"40px"}),e.jsx(is,{title:"Max Price",price:ct(n?g==null?void 0:g.reversePrice:k==null?void 0:k.price,6),perText:u})]})]})]}),p?e.jsx(Bt,{action:"Deposit",inConfirmModal:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{tokenA:x,tokenB:l,isReverse:(x==null?void 0:x.coin_type)!==((_=m==null?void 0:m.tokenA)==null?void 0:_.coin_type),type:"text",percentMap:y}),e.jsx(Mt,{loading:!1,totalAmount:d}),!a&&!o&&!((g==null?void 0:g.price)==="0"&&(k==null?void 0:k.price)==="âˆž")&&S=="authenticated"&&e.jsx(Or,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}})]}),e.jsx(je,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:f,children:"Add Liquidity"})]})})]})]})}const is=({title:t,price:s,perText:i})=>e.jsxs(W,{flex:"1",children:[e.jsx(C,{children:t}),e.jsx(C,{color:"text_caption",children:s}),e.jsx(C,{children:i})]});function Fi(t,s){const{preAdd:i,getClmmCreateAddData:c,getFarmsCreateAddData:p}=Ir(),[x,l]=A.useState(!1),{currentPriceData:j,apiPoolInfo:r,contractPoolInfo:d}=ee(),{getContractPoolInfo:y}=ws(),{lowerTickData:a,upperTickData:o}=Te(),{signAndExecuteTransaction:g,getTransactionStatus:k,transactionSuccess:F}=Zr(),{mevProtect:m,maxCapForGas:h,transactionMode:b,customGasPrice:v}=Qr(),{transactionConfirmation:n}=Kr(),{getCurrentPrice:u}=_s(),{fromAmount:f,setFromAmount:S,fromAmountValue:_,setFromAmountValue:w,toAmount:L,setToAmount:T,toAmountValue:U,setToAmountValue:q,byAmountIn:N,setByAmountIn:K,isTokenA:re,setIsTokenA:J,percentMap:xe,setPercentMap:D,isFullRange:Q,setIsFullRange:Z,fromToken:R,setFromToken:ie,toToken:M,setToToken:ne,totalAmount:B,setTotalAmount:z,fromTokenLock:$,setFromTokenLock:se,toTokenLock:ce,setToTokenLock:Y,setTokenMaxA:P,setTokenMaxB:de,tokenMaxA:G,tokenMaxB:Ke,autoStakePosition:$e,liquidityAmount:Qe,setLiquidityAmount:Ye,useZapIn:Fe,setUseZapIn:jt,confirmModalOpen:Gs,setConfirmModalOpen:zt,nftOpen:Zs,setNftOpen:Et,relatedPosId:Ks,setRelatedPosId:Wt}=Be(),{getTokenAmountValue:Xe}=js(),{getZapDepositTx:Qs,getZapDepositToastInfo:Ys,reCalculateZapData:Xs}=Vr(),{setZapAmount:Js}=ks();_t(()=>{var O,le;r&&J(((O=r==null?void 0:r.displayTokenA)==null?void 0:O.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r]);const{isWhiteQuoteToken:Ps}=Bs(),{notifiSubscription:Is}=Pr(),{isChecked:Ht}=wt();Ge(()=>{if(Q){D({percentA:"50",percentB:"50"});return}if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&typeof(d==null?void 0:d.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&j.currentSqrtPrice){if(pe(a.tick).lte(d.current_tick_index)&&pe(o.tick).gt(d.current_tick_index)){const O=Ps(r.tokenA.coin_type)?r.tokenA:r.tokenB,le=O.coin_type===r.tokenA.coin_type,ve=i({amount:tt("1",O.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0}),ge=Yr(ve.coinAmountA,ve.coinAmountB,j==null?void 0:j.currentPrice,Q);D(ge);return}if(pe(a.tick).gt(d.current_tick_index)){D({percentA:"100",percentB:"0"});return}if(pe(o.tick).lte(d.current_tick_index)){D({percentA:"0",percentB:"100"});return}}},[JSON.stringify(r),j,a==null?void 0:a.tick,o==null?void 0:o.tick,Q],{wait:300});const er=({amount:O,isTokenA:le,isFullRange:ve})=>{var ge,me,Se,he;if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&Object.keys(j).length>0&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&R&&M){let V;if(typeof(d==null?void 0:d.current_tick_index)=="number"&&pe(a==null?void 0:a.tick).lte(d==null?void 0:d.current_tick_index)&&pe(o==null?void 0:o.tick).gt(d==null?void 0:d.current_tick_index))V=i({amount:tt(O&&+O?O+"":"1",N?R==null?void 0:R.decimals:M==null?void 0:M.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0});else if($&&!ce){const ae=(M==null?void 0:M.coin_type)===((ge=r==null?void 0:r.tokenA)==null?void 0:ge.coin_type);V=i({amount:tt(O?O+"":"1",M==null?void 0:M.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else if(ce&&!$){const ae=(R==null?void 0:R.coin_type)===((me=r==null?void 0:r.tokenA)==null?void 0:me.coin_type);V=i({amount:tt(O?O+"":"1",R==null?void 0:R.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else $&&ce&&(V=le?{coinAmountA:O?O+"":"1",coinAmountB:"",tokenMaxA:O?O+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:O?O+"":"1",tokenMaxA:"",tokenMaxB:O?O+"":"1"});if(P(V==null?void 0:V.tokenMaxA),de(V==null?void 0:V.tokenMaxB),O)if(pe(O).gt("0"))if(N){const ae=(M==null?void 0:M.coin_type)===((Se=r==null?void 0:r.tokenA)==null?void 0:Se.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,oe=Xe(R==null?void 0:R.coin_type,O+""),Ae=Xe(M==null?void 0:M.coin_type,ae),fe=pe(oe).plus(Ae).toString();console.log(ae,oe,Ae,fe,"_totalAmountValue"),T(ae||""),w(oe),q(Ae),z(fe)}else{const ae=(R==null?void 0:R.coin_type)===((he=r==null?void 0:r.tokenA)==null?void 0:he.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,oe=Xe(R==null?void 0:R.coin_type,ae),Ae=Xe(M==null?void 0:M.coin_type,O+""),fe=pe(oe).plus(Ae).toString();console.log(ae,oe,Ae,fe,"_totalAmountValue"),w(oe),q(Ae),S(ae||""),z(fe)}else N?(T(""),w(""),q(""),z("")):(S(""),w(""),q(""),z(""));else S(""),T(""),w(""),q(""),z("");V&&Ye((V==null?void 0:V.liquidityAmount)||"")}};Ge(()=>{er({amount:N?f:L,isTokenA:re,isFullRange:Q})},[JSON.stringify(r),j,a==null?void 0:a.tick,o==null?void 0:o.tick,f,L,N,re,$,ce,Q],{wait:300});const tr=(O,le,ve)=>{K(le),le?S(O):T(O),J(ve!==void 0?ve:!1)},{balanceInfo:sr}=xt(R),{balanceInfo:rr}=xt(M);_t(()=>{var O,le;J(N?(R==null?void 0:R.coin_type)===((O=r==null?void 0:r.tokenA)==null?void 0:O.coin_type):(M==null?void 0:M.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r,N,R,M]),A.useEffect(()=>{(a==null?void 0:a.tick)===lt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(o==null?void 0:o.tick)===lt.getMaxIndex(Number((o==null?void 0:o.tickSpacing)||0))?Z(!0):Z(!1)},[a==null?void 0:a.tick,o==null?void 0:o.tick]),A.useEffect(()=>{(d==null?void 0:d.current_tick_index)!==void 0&&ue(a)&&ue(o)&&(pe(a==null?void 0:a.tick).gte(pe(o.tick))?(se(!0),Y(!0)):pe(a==null?void 0:a.tick).gt(d==null?void 0:d.current_tick_index)?(se(!s),Y(!!s)):pe(o.tick).lte(d==null?void 0:d.current_tick_index)?(se(!!s),Y(!s)):(se(!1),Y(!1)))},[a==null?void 0:a.tick,o==null?void 0:o.tick,d,s]);const{currentAccount:ir,onWalletModal:nr}=yt(),cr=vs(()=>{ir?zt(!0):nr(!0)},300,{leading:!0,trailing:!1}),$t=()=>{S(""),T(""),w(""),q(""),z("")},{fetchAccountBalance:ar}=Ts(),lr=async()=>{var O,le,ve;try{let ge,me,Se;if(Fe)me=Ys(),n(me),ge=await Qs(a==null?void 0:a.tick,o==null?void 0:o.tick,$e);else{const V=N?f:L,ae=N?R.decimals:M.decimals,oe=pe(V).mul(fr.pow(10,ae)).toString(),Ae=N&&(R==null?void 0:R.coin_type)===((O=r==null?void 0:r.tokenA)==null?void 0:O.coin_type)?!0:(M==null?void 0:M.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type)&&!N;let fe,Je;const Pe=a.tick,Ie=o.tick,Ue=d==null?void 0:d.current_tick_index;Pe!==void 0&&Ie!==void 0&&Ue!==void 0&&(Ue>=Pe&&Ue<=Ie?(fe=Ae?oe:G,Je=Ae?Ke:oe):Ue>Ie?(fe=0,Je=oe):Ue<Pe&&(fe=oe,Je=0));let Ut=[];if(d!=null&&d.index){const{rewarder_infos:X}=d;Ut=(X==null?void 0:X.length)>0&&(X==null?void 0:X.map(Ne=>Ne.coinAddress))||[]}const Nt={poolAddress:d==null?void 0:d.poolAddress,coinTypeA:d==null?void 0:d.coinTypeA,coinTypeB:d==null?void 0:d.coinTypeB,amountA:fe,amountB:Je,fixAmountA:Ae,lowerTick:Pe,upperTick:Ie,currentSqrtPrice:d==null?void 0:d.current_sqrt_price,rewarderCoinTypes:Ut,farmsPoolId:r==null?void 0:r.farmsPoolAddress};if(me={getShowInfo:(X,Ne)=>{const Dt="Add "+[rt(f,R==null?void 0:R.symbol),rt(L,M==null?void 0:M.symbol)].filter(Boolean).join(" and "),et={modalDescriptionText:Dt,toastTitleText:Dt};if(X==="success"){let Ot=f,Vt=L;Ne&&(Ot=Yt(Ne,R)||f,Vt=Yt(Ne,M)||L);const Gt="Add "+[rt(Ot,R==null?void 0:R.symbol),rt(Vt,M==null?void 0:M.symbol)].filter(Boolean).join(" and ");et.toastDescriptionContent=Gt,et.modalDescriptionText=Gt,et.toastTitleText="Supplied Successful"}return et}},n(me),$e){const X=await p(Nt);ge=X==null?void 0:X.tx,Se=X==null?void 0:X.msafeParams}else{const X=await c(Nt);ge=X==null?void 0:X.tx,Se=X==null?void 0:X.msafeParams}}let he=await g(ge,me,{useDevInspect:!0,useMev:m,showSuccessModal:!1,useFastMode:b==="Fast Mode",maxCapForGas:h,customGasPrice:v,msafeParams:Se});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Ht),((ve=he==null?void 0:he.events)==null?void 0:ve.length)===0&&(he=await k(he.digest));const{posId:V,farmsPosId:ae}=vr(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:V,farmsPosId:ae}),V?(Et(!0),Wt(ae||V)):F(me),Ht){const oe={subscriptionSource:"AddLiquidity",events:he.events};Is(oe)}ar(),$t(),Js(""),t()}else d&&y(d==null?void 0:d.poolAddress).then(V=>{Xs()})}catch(ge){console.error(ge,"handleSubmit ~ error");const me=String(ge).toLocaleLowerCase();if(me.includes("user")&&me.includes("reject")&&r!=null&&r.poolAddress){const Se=await y(r==null?void 0:r.poolAddress);Se&&u(Se==null?void 0:Se.current_sqrt_price,r)}throw ge}},dr=()=>{jt(!Fe)};return A.useEffect(()=>{$t()},[Fe]),{percentMap:xe,handleAmountChange:tr,fromToken:R,setFromToken:ie,toToken:M,setToToken:ne,byAmountIn:N,setByAmountIn:K,fromAmount:f,fromAmountValue:_,setFromAmount:S,toAmount:L,toAmountValue:U,setToAmount:T,liquidityAmount:Qe,fromBalanceInfo:sr,toBalanceInfo:rr,totalAmount:B,fromTokenLock:$,toTokenLock:ce,handleAdd:cr,confirmModalOpen:Gs,setConfirmModalOpen:zt,nftOpen:Zs,setNftOpen:Et,relatedPosId:Ks,handleSubmit:lr,useZapIn:Fe,handleChangeZapIn:dr}}function Mi(){const{fromAmount:t,toAmount:s,fromToken:i,toToken:c,fromTokenLock:p,toTokenLock:x,liquidityAmount:l}=Be(),{currentAccount:j}=yt(),{balanceInfo:r}=xt(i),{balanceInfo:d}=xt(c),y=A.useMemo(()=>{const a={text:"Add Liquidity",disabled:!1};return j!=null&&j.address?!p&&!x&&(!t||!s||t&&!+t||s&&!+s)||p&&!x&&(!s||s&&!+s)||x&&!p&&(!t||t&&!+t)?(a.text="Enter an amount",a.disabled=!0,a):t&&+t&&H(t).gt((r==null?void 0:r.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${I(i==null?void 0:i.symbol,10)} Balance`,a):s&&+s&&H(s).gt((d==null?void 0:d.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${I(c==null?void 0:c.symbol,10)} Balance`,a):((!p&&!x&&(!t||!s)||H(l).lte("0"))&&(a.disabled=!0),a):(a.text="Connect Wallet",a.disabled=!1,a)},[j==null?void 0:j.address,t,s,r==null?void 0:r.balanceDisplay,d==null?void 0:d.balanceDisplay,i,c,p,x,l]);return{btnText:y.text,btnDisabled:y.disabled}}function qi(){return{getLeverage:(s,i)=>s&&i&&s!=="0"&&i!=="âˆž"?hs(1/(1-Number(H(s).div(i).toNumber()**.25)),2)+"x":"1x"}}function zi({rangeTabList:t}){var U;const{apiPoolInfo:s}=ee(),{fromToken:i,toToken:c,setFromToken:p,setToToken:x,byAmountIn:l,setByAmountIn:j,setIsFarmRewardsRange:r,setAutoStakePosition:d,fromTokenLock:y,toTokenLock:a,fromAmount:o,toAmount:g,setFromAmount:k,setToAmount:F}=Be(),{lowerTickData:m,upperTickData:h}=Te(),[b,v]=A.useState(),{handleInitTickData:n}=mt(),{getLeverage:u}=qi();A.useEffect(()=>{var q;if(s){const N=(q=s==null?void 0:s.displayTokenA)==null?void 0:q.coin_type;v(N)}},[s==null?void 0:s.poolAddress]);const f=A.useMemo(()=>{var q;return b===((q=s==null?void 0:s.tokenA)==null?void 0:q.coin_type)},[b,(U=s==null?void 0:s.tokenA)==null?void 0:U.coin_type]),S=A.useMemo(()=>{var q,N,K,re;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":f?`${I((q=s==null?void 0:s.tokenB)==null?void 0:q.symbol,10)} per ${I((N=s==null?void 0:s.tokenA)==null?void 0:N.symbol,10)}`:`${I((K=s==null?void 0:s.tokenA)==null?void 0:K.symbol,10)} per ${I((re=s==null?void 0:s.tokenB)==null?void 0:re.symbol,10)}`},[f,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),_=A.useMemo(()=>{const q=m==null?void 0:m.price,N=h==null?void 0:h.price;return u(q,N)},[m==null?void 0:m.price,h==null?void 0:h.price]),w=q=>{r(q.target.checked),q.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&n(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};A.useEffect(()=>{H(m==null?void 0:m.tick).eq(H(s==null?void 0:s.farmsEffectiveTickLower))&&H(h==null?void 0:h.tick).eq(H(s==null?void 0:s.farmsEffectiveTickUpper))?r(!0):r(!1)},[m==null?void 0:m.tick,h==null?void 0:h.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const L=A.useMemo(()=>(m==null?void 0:m.price)==="0"&&(h==null?void 0:h.price)==="âˆž",[m==null?void 0:m.price,h==null?void 0:h.price]),T=q=>{var N;q&&(q!=null&&q.coin_type)?v(q==null?void 0:q.coin_type):v((N=t==null?void 0:t.find(K=>K.key!==b))==null?void 0:N.key),p(c),x(i),j(!l),l?(F(o),k("")):(k(g),F(""))};return A.useEffect(()=>{s!=null&&s.haveFarming&&d(!(y||a))},[y,a,s==null?void 0:s.haveFarming]),A.useEffect(()=>{l&&y&&!a&&(k(""),F("")),!l&&!y&&a&&(k(""),F("")),l&&!y&&a&&F(""),!l&&y&&!a&&k(""),y&&a&&(k(""),F(""))},[y,a]),{direct:f,perText:S,handleChangeIsFarmRewardsRange:w,onReverseClick:T,leverage:_,currentRangeTab:b,isFullRange:L}}function Ei({onClose:t,posId:s,tokenA:i,tokenB:c,fee:p,isReverse:x}){const l=Ze(),[j,r]=A.useState(!0),{lowerTickData:d,upperTickData:y}=Te();return A.useLayoutEffect(()=>{x&&r(!1)},[x]),e.jsxs(as,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{w:"400px",children:[e.jsx(us,{children:e.jsxs(E,{justify:"space-between",w:"100%",children:[e.jsx(C,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(je,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(Ce,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(xs,{children:e.jsxs(W,{gap:"36px",children:[e.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(bs,{coinAIconUrl:i==null?void 0:i.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:i==null?void 0:i.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),e.jsxs(C,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[I(i==null?void 0:i.symbol,10)," - ",I(c==null?void 0:c.symbol,10)]}),e.jsxs(E,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(C,{fontSize:"14px",children:"Fee tier"}),e.jsx(C,{fontSize:"14px",color:"text_highlight",children:p})]})]}),e.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(C,{color:"text_caption",whiteSpace:"nowrap",children:[j?we(d==null?void 0:d.price,6):we(y==null?void 0:y.reversePrice,6)," -Â ",j?we(y==null?void 0:y.price,6):we(d==null?void 0:d.reversePrice,6)]}),e.jsxs(E,{children:[e.jsxs(E,{gap:"0",children:[e.jsx(C,{color:"primary_gray",children:I(j?x?i==null?void 0:i.symbol:c==null?void 0:c.symbol:x?c==null?void 0:c.symbol:i==null?void 0:i.symbol,10)}),e.jsx(C,{color:"primary_gray",children:"Â perÂ "}),e.jsx(C,{color:"primary_gray",children:I(j?x?c==null?void 0:c.symbol:i==null?void 0:i.symbol:x?i==null?void 0:i.symbol:c==null?void 0:c.symbol,10)})]}),e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:a=>{Tt(a),r(!j)}})]})]})]})}),e.jsx(pr,{p:"20px 0 0",children:e.jsx(je,{flex:"1",onClick:()=>l(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function Ws({perText:t,direct:s,minPriceData:i,maxPriceData:c,isFullRange:p=!1}){const{tickDataLoading:x}=Te(),{handleAddPrice:l,handleSubPrice:j,setTickDataBasedOnPrice:r}=mt();return e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(It,{title:"Min Price",perText:t,data:i,direct:s,loading:x,handleAddPrice:l,handleSubPrice:j,setTickDataBasedOnPrice:r,isFullRange:p}),e.jsx(It,{title:"Max Price",perText:t,data:c,direct:s,loading:x,handleAddPrice:l,handleSubPrice:j,setTickDataBasedOnPrice:r,isFullRange:p})]})}const Hs=({minPrice:t,maxPrice:s,perText:i,checked:c,onChange:p,loading:x})=>e.jsxs(E,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(E,{children:[e.jsx(ei,{tooltip:e.jsxs(te,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",e.jsx(te,{as:"a",color:"primary",onClick:l=>{Tt(l),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(C,{children:"Farm rewards range"})]}),e.jsxs(E,{children:[x?e.jsx(He,{w:"120px",h:"14px"}):e.jsxs(C,{color:"primary_yellow",children:[t,"Â -Â ",s]}),e.jsx(C,{children:i})]})]}),e.jsx(ft,{isChecked:c,onChange:p})]}),$s=({disabled:t,checked:s,onChange:i})=>e.jsxs(E,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(C,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(at,{tooltip:e.jsxs(W,{gap:"4px",align:"flex-start",children:[e.jsx(C,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(C,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})}):e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})]}),Wi=(t,s)=>({priceRangeMap:null,setPriceRangeMap:i=>{t(()=>({priceRangeMap:i}))},recommendRangesInfo:null,setRecommendRangesInfo:i=>{t(()=>({recommendRangesInfo:i}))},resetDeposit:()=>{t(()=>({priceRangeMap:null,recommendRangesInfo:null}))}}),bt=ms(Wi),Hi=[{label:"24H",key:"day"},{label:"7D",key:"week"},{label:"30D",key:"month"}];function Us({direct:t,wrapStyle:s={}}){const{priceRangeMap:i}=bt(),[c,p]=A.useState({type:"30D",key:"month"}),{minPriceForDate:x,maxPriceForDate:l,setMinPriceForDate:j,setMaxPriceForDate:r}=ee();A.useEffect(()=>{var o,g;let y="",a="";if(ue(i)){const k=(o=i[c==null?void 0:c.key])==null?void 0:o[0],F=t?k:H(1).div(k).toString(),m=(g=i[c==null?void 0:c.key])==null?void 0:g[1],h=t?m:H(1).div(m).toString();y=we(F,6),a=we(h,6)}else y="-",a="-";j(y),r(a)},[t,c.key,i]);const{isApp:d}=Le();return e.jsxs(E,{w:"100%",justify:"space-between",...s,children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(E,{children:[e.jsx(gt,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(os,{w:"14px",border:"1px dashed"})}),e.jsxs(C,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),e.jsxs(C,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?x:l,"Â -Â ",t?l:x]})]}),e.jsx(Me,{type:"outlineTab",tabList:Hi,currentTab:c,handleChangeTab:y=>{p({type:y.label,key:y.key})},isActive:(y,a)=>y.key===a.key,wrapStyle:{h:d?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:d?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function $i(){const[t,s]=A.useState(""),i=(l,j)=>({default:{lower:l,upper:j,sort:3}}),c=l=>({"full range":{lower:lt.getMinIndex(l),upper:lt.getMaxIndex(l),sort:2}}),p=(l,j,r)=>{const d=H(r).mul(j==="unstable"?2:3).toNumber(),y=wr(Number(l),Number(r));return{custom:{lower:H(y).sub(d).toNumber(),upper:H(y).add(d).toNumber(),sort:1}}};return{getRecommendRangesList:async l=>{try{const j=l.farmsEffectTickLower&&l.farmsEffectTickUpper?i(l.farmsEffectTickLower,l.farmsEffectTickUpper):null,r=l.farmsEffectTickLower&&l.farmsEffectTickUpper?{ranges:{},type:""}:l==null?void 0:l.recommendRangesInfo;if(console.log(r,"recommendRangesResult"),r){s(r.type);const d=c(l.tickSpacing),y=p(l.currentTick,r.type,l.tickSpacing),a={...j,...r.ranges,...d,...y},o=Object.entries(a).map(([g,k])=>({key:g,...k})).sort((g,k)=>k.sort-g.sort);return ue(r.ranges)||ue(j)?{rangeList:o,error:!1}:{rangeList:o,error:!0}}else return{rangeList:[],error:!0}}catch(j){return console.error("Error in getRecommendRangesList:",j),{rangeList:[],error:!0}}},poolType:t}}const At=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Ui=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Ni={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Ns(t){const{getRecommendRangesList:s}=$i(),[i,c]=A.useState(),{poolAddress:p,currentTick:x,tickSpacing:l,farmsEffectTickLower:j,farmsEffectTickUpper:r}=t;Le();const{handleInitTickData:d}=mt(),{apiPoolInfo:y,currentRange:a,setCurrentRange:o}=ee(),{lowerTickData:g,upperTickData:k,setLowerTickData:F,setUpperTickData:m,setTickDataLoading:h,tickDataLoading:b}=Te(),{recommendRangesInfo:v}=bt(),n=A.useMemo(()=>({...y,tickSpacing:l}),[y,l]),u=async()=>{var f,S,_;try{a||h(!0);const{rangeList:w,error:L}=await s({...t,recommendRangesInfo:v});if(c(w),L){if(o("custom"),!a&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)){const T=w.find(U=>U.key==="custom");T&&d(T==null?void 0:T.lower,T==null?void 0:T.upper,n)}}else o((f=w[0])==null?void 0:f.key),!a&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&d((S=w[0])==null?void 0:S.lower,(_=w[0])==null?void 0:_.upper,n)}catch(w){console.error(w)}finally{h(!1)}};return Ge(()=>{p&&x!==void 0&&l!==void 0&&u()},[p,l,v],{wait:500}),A.useEffect(()=>{if(i&&i.length>0&&ue(g)&&ue(k)){const f=i==null?void 0:i.find(S=>H(S.lower).eq(H(g==null?void 0:g.tick))&&H(S.upper).eq(H(k==null?void 0:k.tick)));f?f.key!==a&&o(f.key):o("custom")}},[g==null?void 0:g.tick,k==null?void 0:k.tick,i]),e.jsx(e.Fragment,{children:e.jsx(gr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:i&&i.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:i&&i.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:i==null?void 0:i.map((f,S)=>{var _,w;return e.jsx(yr,{label:Ui(f.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:i!=null&&i.length?Ni[i.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{f.key!==a&&(o(f.key),n!=null&&n.tokenA&&(n!=null&&n.tokenB)&&d(f.lower,f.upper,n))},bg:f.key==a?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Zt,{decoding:"async",display:f.key===a?"block":"none",src:`/images/${(_=At(f.key,!0))==null?void 0:_.image}`,w:"72px",h:f.key===a?"22px":"0px",fallback:e.jsx(te,{bg:"background",w:"72px",h:f.key===a?"22px":"0px",borderRadius:"4px"})}),e.jsx(Zt,{decoding:"async",display:f.key===a?"none":"block",src:`/images/${(w=At(f.key,!1))==null?void 0:w.image}`,w:"72px",h:f.key===a?"0px":"22px",fallback:e.jsx(te,{bg:"background",w:"72px",h:f.key===a?"0px":"22px",borderRadius:"4px"})}),e.jsx(C,{color:f.key==a?"primary":"primary_gray",fontSize:"12px",children:At(f.key).name})]})},f.key)})})})}function Ds(t){const[s,i]=A.useState(!1),{displayTokenA:c,displayTokenB:p,feeDisplay:x,clmmPool:l,vaultId:j,isReverse:r,category:d}=t,{isApp:y}=Le(),{vaultListObj:a}=si(),{clearVaultsActionData:o}=ti(),g=A.useMemo(()=>a[j],[a,j]);return A.useEffect(()=>{o()},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(W,{width:y?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(E,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(C,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(E,{children:[e.jsx(_e,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(ri,{vaultsLstApyDisplay:g==null?void 0:g.vaultsLstApyDisplay,vaultsApyDisplay:g==null?void 0:g.vaultsApyDisplay,vaultsTotalApyDisplay:g==null?void 0:g.vaultsTotalApyDisplay,vaultsAprDisplay:g==null?void 0:g.vaultsAprDisplay,category:g==null?void 0:g.category}),value:(g==null?void 0:g.category)=="cetus"?g==null?void 0:g.vaultsTotalApyDisplay:(g==null?void 0:g.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(je,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>i(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(E,{w:"100%",mt:"14px",children:e.jsxs(C,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",d=="haedal"?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(Tr,{isOpen:s,setIsOpen:i,displayTokenA:c,displayTokenB:p,feeDisplay:x,clmmPool:l,vaultId:j,isReverse:r,category:d})]})}const Os=({price:t,perText:s,wrapStyle:i,loading:c})=>e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:"flex-start",...i,children:[e.jsx(C,{children:"Current Price"}),e.jsxs(E,{as:"div",h:"14px",children:[c||t==="--"?e.jsx(He,{w:"66px",h:"14px",display:"inline-block"}):e.jsx(C,{as:"span",color:"text_caption",display:"inline-block",h:"14px",lineHeight:"14px",children:t}),e.jsx(C,{as:"span",display:"inline-block",h:"14px",lineHeight:"14px",children:` ${s}`})]})]});function Di({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:c,leverage:p,direct:x,perText:l,rangeTabList:j,currentRangeTab:r,fromBalanceInfo:d,toBalanceInfo:y,fromAmountValue:a,toAmountValue:o,handleAmountChange:g,handleAdd:k,isFullRange:F,useZapIn:m,handleChangeZapIn:h}){var se,ce;const{currentPriceData:b,contractPoolInfo:v,apiPoolInfo:n,resetLiquidity:u,contractPoolInfoLoading:f,apiPoolInfoLoading:S,minPriceForDate:_,maxPriceForDate:w}=ee(),{lowerTickData:L,upperTickData:T}=Te(),{autoStakePosition:U,setAutoStakePosition:q,isFarmRewardsRange:N,fromAmount:K,toAmount:re,byAmountIn:J,percentMap:xe,fromToken:D,toToken:Q,totalAmount:Z,fromTokenLock:R,toTokenLock:ie}=Be(),{poolAddress:M}=ye(),ne=Y=>{q(Y.target.checked)},B=A.useMemo(()=>{if(b!=null&&b.currentPrice&&b.pool===M)return b==null?void 0:b.currentPrice},[b==null?void 0:b.currentPrice]),{priceImpactBasedOnMarket:z}=ps(D,Q,x?"1":We(B),x?We(B):"1",!0),$=A.useMemo(()=>{if(z&&H(z).abs().gte(30))return H(z).gte(30)?`+${H(z).toFixed(0)}%`:`${H(z).toFixed(0)}%`},[z]);return A.useMemo(()=>!!(n!=null&&n.haveFarming)&&!!(n!=null&&n.displayFarmsEffectMaxPrice)&&!!(n!=null&&n.displayFarmsEffectMinPrice),[n==null?void 0:n.haveFarming,n==null?void 0:n.displayFarmsEffectMaxPrice,n==null?void 0:n.displayFarmsEffectMinPrice]),e.jsxs(te,{w:"100%",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx(Ns,{poolAddress:M,currentTick:v==null?void 0:v.current_tick_index,tickSpacing:v==null?void 0:v.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper}),S?e.jsx(He,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(Me,{type:"outlineTab",tabList:j,currentTab:r,handleChangeTab:Y=>c(Y),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(Os,{price:We(x?b==null?void 0:b.currentPrice:b.reverseCurrentPrice,6),perText:l,loading:f,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(fs,{handleClickRefresh:()=>{},direct:x,minPriceData:x?L:T,maxPriceData:x?T:L,dashedMarkerLine:[_,w]})}),$&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${$}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",tipsFontSize:"12px"}),e.jsx(Us,{direct:x,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(Ws,{perText:l,direct:x,isFullRange:F,minPriceData:x?L:T,maxPriceData:x?T:L}),R&&ie&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"})]}),e.jsxs(W,{mb:"20px",gap:"16px",children:[e.jsx(Ls,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(C,{color:"text_caption",children:R&&ie?"--":p})}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?dt(n==null?void 0:n.displayFarmsEffectMinPrice):ut(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:x?dt(n==null?void 0:n.displayFarmsEffectMaxPrice):ut(n==null?void 0:n.displayFarmsEffectMinPrice),loading:S,perText:l,checked:N,onChange:i})]}),e.jsx(te,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:n!=null&&n.haveFarming?"1px solid":"none",borderColor:"border",children:e.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsxs(E,{children:[e.jsx(gs,{}),(n==null?void 0:n.haveZap)&&e.jsx(Rs,{action:"Deposit",value:m,onChange:h})]})]}),e.jsx(W,{w:"100%",gap:"12px",children:e.jsx(te,{w:"100%",position:"relative",children:m&&!(R&&ie)?e.jsx(Cs,{apiPoolInfo:n,action:"Deposit",currentSqrtPrice:b==null?void 0:b.currentSqrtPrice,lowerTick:L==null?void 0:L.tick,upperTick:T==null?void 0:T.tick}):e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(d==null?void 0:d.balanceFormat)||"",value:K+"",amountValue:a,loading:!1,onChange:Y=>{var P;g(Y,!0,(D==null?void 0:D.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:D,onFocusChange:Y=>{var P;Y&&+(K+"")&&!J&&g(K+"",!0,(D==null?void 0:D.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},lock:{isLock:R&&!ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(y==null?void 0:y.balanceFormat)||"",value:re+"",amountValue:o,loading:!1,onFocusChange:Y=>{var P;Y&&+(re+"")&&J&&g(re+"",!1,(Q==null?void 0:Q.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},onChange:Y=>{var P;g(Y,!1,(Q==null?void 0:Q.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:Q,lock:{isLock:!R&&ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:R&&ie,style:{h:"224px"}}})})}),!m&&!!(n!=null&&n.poolAddress)&&!(R&&ie)&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[e.jsx(Mt,{totalAmount:Z,loading:!1}),e.jsx(Ft,{type:"image",percentMap:xe,lockRatio:R&&ie,tokenA:D,tokenB:Q,isReverse:(D==null?void 0:D.coin_type)!==((se=n==null?void 0:n.tokenA)==null?void 0:se.coin_type)})]}),e.jsx(je,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:k,children:t})]}),m&&e.jsx(Bt,{action:"Deposit",isReverse:(D==null?void 0:D.coin_type)!==((ce=n==null?void 0:n.tokenA)==null?void 0:ce.coin_type)}),(n==null?void 0:n.haveFarming)&&e.jsx($s,{disabled:R||ie,checked:U,onChange:ne})]})}),n!=null&&n.vaultCategory?e.jsx(W,{mt:"16px",children:e.jsx(Ds,{displayTokenA:n==null?void 0:n.displayTokenA,displayTokenB:n==null?void 0:n.displayTokenB,feeDisplay:n==null?void 0:n.feeDisplay,clmmPool:n==null?void 0:n.poolAddress,vaultId:n==null?void 0:n.vaultId,isReverse:n==null?void 0:n.isReverse,category:n==null?void 0:n.vaultCategory})}):null]})}function ns({children:t,title:s,wrapStyle:i={}}){return e.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...i,children:[e.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(C,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Oi({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:c,leverage:p,direct:x,perText:l,rangeTabList:j,currentRangeTab:r,fromBalanceInfo:d,toBalanceInfo:y,fromAmountValue:a,toAmountValue:o,handleAmountChange:g,handleAdd:k,isFullRange:F,useZapIn:m,handleChangeZapIn:h,handleSubmit:b}){var Y,P;const{currentPriceData:v,contractPoolInfo:n,apiPoolInfo:u,resetLiquidity:f,contractPoolInfoLoading:S,apiPoolInfoLoading:_,minPriceForDate:w,maxPriceForDate:L,currentRange:T}=ee();console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ apiPoolInfo:",u),console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ contractPoolInfo:",n);const{lowerTickData:U,upperTickData:q}=Te(),{autoStakePosition:N,setAutoStakePosition:K,isFarmRewardsRange:re,fromAmount:J,toAmount:xe,byAmountIn:D,percentMap:Q,fromToken:Z,toToken:R,totalAmount:ie,fromTokenLock:M,toTokenLock:ne}=Be(),{poolAddress:B}=ye(),z=de=>{K(de.target.checked)},$=A.useMemo(()=>{if(v!=null&&v.currentPrice&&v.pool===B)return v==null?void 0:v.currentPrice},[v==null?void 0:v.currentPrice]),{priceImpactBasedOnMarket:se}=ps(Z,R,x?"1":We($),x?We($):"1",!0),ce=A.useMemo(()=>{if(se&&H(se).abs().gte(30))return H(se).gte(30)?`+${H(se).toFixed(0)}%`:`${H(se).toFixed(0)}%`},[se]);return e.jsx(e.Fragment,{children:e.jsxs(E,{gap:"12px",align:"flex-start",children:[e.jsxs(ns,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!j||!j.length?e.jsx(He,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(Me,{type:"outlineTab",tabList:j,currentTab:r,handleChangeTab:de=>c(de),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(W,{w:"100%",gap:"12px",children:[e.jsx(E,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(E,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(Os,{loading:_,price:ue(v)?We(x?v==null?void 0:v.currentPrice:v.reverseCurrentPrice,6):"--",perText:l,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(E,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(W,{gap:"20px",children:[e.jsx(gt,{h:"226px",mt:"10px",children:e.jsx(Ns,{poolAddress:B,currentTick:n==null?void 0:n.current_tick_index,tickSpacing:n==null?void 0:n.tickSpacing,farmsEffectTickLower:u==null?void 0:u.farmsEffectiveTickLower,farmsEffectTickUpper:u==null?void 0:u.farmsEffectiveTickUpper})}),ue(U)&&ue(q)&&e.jsx(e.Fragment,{children:e.jsx(Ls,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(C,{color:"text_caption",children:M&&ne?"--":p})})})]}),e.jsxs(W,{w:"100%",gap:"32px",children:[e.jsx(te,{w:"100%",h:"230px",children:e.jsx(fs,{handleClickRefresh:()=>{},direct:x,minPriceData:x?U:q,maxPriceData:x?q:U,dashedMarkerLine:[w,L],currentRange:T})}),ce&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${ce}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",tipsFontSize:"12px"}),ue(U)&&ue(q)&&e.jsx(Us,{direct:x,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(Ws,{perText:l,direct:x,isFullRange:F,minPriceData:x?U:q,maxPriceData:x?q:U}),M&&ne&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"}),(u==null?void 0:u.haveFarming)&&(u==null?void 0:u.displayFarmsEffectMaxPrice)&&(u==null?void 0:u.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?dt(u==null?void 0:u.displayFarmsEffectMinPrice):ut(u==null?void 0:u.displayFarmsEffectMaxPrice),maxPrice:x?dt(u==null?void 0:u.displayFarmsEffectMaxPrice):ut(u==null?void 0:u.displayFarmsEffectMinPrice),loading:_,perText:l,checked:re,onChange:i})]})]}),e.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(ns,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(E,{children:(u==null?void 0:u.haveZap)&&e.jsx(Rs,{action:"Deposit",value:m,onChange:h})}),e.jsx(te,{w:"100%",position:"relative",children:m&&!(M&&ne)?e.jsx(Cs,{apiPoolInfo:u,action:"Deposit",currentSqrtPrice:v==null?void 0:v.currentSqrtPrice,lowerTick:U==null?void 0:U.tick,upperTick:q==null?void 0:q.tick}):e.jsx(e.Fragment,{children:e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(d==null?void 0:d.balanceFormat)||"",value:J,amountValue:a,loading:!1,onChange:de=>{var G;g(de,!0,(Z==null?void 0:Z.coin_type)===((G=u==null?void 0:u.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:Z,onFocusChange:de=>{var G;de&&+(J+"")&&!D&&g(J+"",!0,(Z==null?void 0:Z.coin_type)===((G=u==null?void 0:u.tokenA)==null?void 0:G.coin_type))},lock:{isLock:M&&!ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(y==null?void 0:y.balanceFormat)||"",value:xe,amountValue:o,loading:!1,onFocusChange:de=>{var G;de&&+(xe+"")&&D&&g(xe+"",!1,(R==null?void 0:R.coin_type)===((G=u==null?void 0:u.tokenA)==null?void 0:G.coin_type))},onChange:de=>{var G;g(de,!1,(R==null?void 0:R.coin_type)===((G=u==null?void 0:u.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:R,lock:{isLock:!M&&ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:M&&ne,style:{h:"224px"}}})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs(W,{w:"100%",gap:"8px",children:[!m&&!!(u!=null&&u.poolAddress)&&!(M&&ne)&&e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:u!=null&&u.displayTokenA&&(u!=null&&u.displayTokenB)?"0 8px 16px":"0 16px",children:[e.jsx(je,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:s,isLoading:!1,onClick:k,children:t}),(u==null?void 0:u.displayTokenA)&&(u==null?void 0:u.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{totalAmount:ie,loading:!1,valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(Ft,{type:"image",percentMap:Q,lockRatio:M&&ne,tokenA:Z,tokenB:R,isReverse:(Z==null?void 0:Z.coin_type)!==((Y=u==null?void 0:u.tokenA)==null?void 0:Y.coin_type)})]})]}),m&&e.jsx(Bt,{action:"Deposit",isReverse:(Z==null?void 0:Z.coin_type)!==((P=u==null?void 0:u.tokenA)==null?void 0:P.coin_type)}),(u==null?void 0:u.haveFarming)&&e.jsx($s,{disabled:M||ne,checked:N,onChange:z})]}),(u==null?void 0:u.vaultCategory)&&e.jsx(Ds,{displayTokenA:u==null?void 0:u.displayTokenA,displayTokenB:u==null?void 0:u.displayTokenB,feeDisplay:u==null?void 0:u.feeDisplay,clmmPool:u==null?void 0:u.poolAddress,vaultId:u==null?void 0:u.vaultId,isReverse:u==null?void 0:u.isReverse,category:u==null?void 0:u.vaultCategory})]})]})]})})}function Vi({rangeTabList:t,currentFeeTier:s,getList:i,getPrice:c}){const{apiPoolInfo:p}=ee(),{zapAmount:x,currentZapToken:l}=ks(),{direct:j,perText:r,handleChangeIsFarmRewardsRange:d,onReverseClick:y,leverage:a,currentRangeTab:o,isFullRange:g}=zi({rangeTabList:t}),{handleAmountChange:k,fromAmountValue:F,toAmountValue:m,fromBalanceInfo:h,toBalanceInfo:b,relatedPosId:v,nftOpen:n,setNftOpen:u,handleAdd:f,handleSubmit:S,useZapIn:_,handleChangeZapIn:w,confirmModalOpen:L,setConfirmModalOpen:T}=Fi(i,j),{btnText:U,btnDisabled:q}=Mi(),{isApp:N}=Le(),K={btnText:U,btnDisabled:q,handleChangeIsFarmRewardsRange:d,onReverseClick:y,leverage:a,direct:j,perText:r,rangeTabList:t,currentRangeTab:o,fromBalanceInfo:h,toBalanceInfo:b,fromAmountValue:F,toAmountValue:m,handleAmountChange:k,handleAdd:f,isFullRange:g,useZapIn:_,handleChangeZapIn:w,handleSubmit:S};return e.jsxs(e.Fragment,{children:[N?e.jsx(Di,{...K}):e.jsx(Oi,{...K}),L&&e.jsx(Bi,{onClose:()=>T(!1),data:{feeTier:s,zapData:_?{amount:x,token:l}:void 0},onSubmit:S}),n&&v&&ue(p)&&e.jsx(Ei,{onClose:()=>u(!1),tokenA:p==null?void 0:p.displayTokenA,tokenB:p==null?void 0:p.displayTokenB,posId:v,fee:p==null?void 0:p.feeDisplay,isReverse:p==null?void 0:p.isReverse})]})}const cs=(t,s,i)=>t&&s&&i?H(t).mul(s).div(H(10).pow(i)).toString():"--";function Vs(){var f,S;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:i,setTokenBPrice:c,tokenAAmount:p,setTokenAAmount:x,tokenBAmount:l,setTokenBAmount:j,tokenAAmountUSD:r,setTokenAAmountUSD:d,tokenBAmountUSD:y,setTokenBAmountUSD:a,totalAmountUSD:o,setTotalAmountUSD:g,resetTvlInfo:k,tvlLoading:F,setTvlLoading:m}=ht(),{apiPoolInfo:h,contractPoolInfo:b}=ee(),v=async _=>{var w,L;try{const T=(w=ze(_))==null?void 0:w.full_address,U=T=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":T,{prices:q}=await _r(`${(L=kt)==null?void 0:L.cetus_api}/v3/sui/market_price?base_symbol_address=${U}`);return q==null?void 0:q[0]}catch(T){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",T),"--"}},{poolAddress:n}=ye(),u=async()=>{var _,w,L,T;m(!0);try{if((_=h==null?void 0:h.tokenA)!=null&&_.coin_type){const U=await v((w=h==null?void 0:h.tokenA)==null?void 0:w.coin_type);U&&s(U)}if((L=h==null?void 0:h.tokenB)!=null&&L.coin_type){const U=await v((T=h==null?void 0:h.tokenB)==null?void 0:T.coin_type);U&&c(U)}}catch(U){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",U)}finally{m(!1)}};return A.useEffect(()=>{k()},[n]),A.useEffect(()=>()=>{k()},[]),A.useEffect(()=>{u()},[h==null?void 0:h.tvl,(f=h==null?void 0:h.tokenA)==null?void 0:f.coin_type,(S=h==null?void 0:h.tokenB)==null?void 0:S.coin_type]),A.useEffect(()=>{b!=null&&b.coinAmountA&&x(H(b==null?void 0:b.coinAmountA).sub((b==null?void 0:b.fee_protocol_coin_a)||"0").toString())},[b==null?void 0:b.coinAmountA,b==null?void 0:b.fee_protocol_coin_a,n]),A.useEffect(()=>{b!=null&&b.coinAmountB&&j(H(b==null?void 0:b.coinAmountB).sub((b==null?void 0:b.fee_protocol_coin_b)||"0").toString())},[b==null?void 0:b.coinAmountB,b==null?void 0:b.fee_protocol_coin_b,n]),A.useEffect(()=>{p&&(t!=null&&t.price)&&(h!=null&&h.tokenA.decimals)&&!Number.isNaN(Number(h==null?void 0:h.tokenA.decimals))&&d(cs(p,t==null?void 0:t.price,h==null?void 0:h.tokenA.decimals))},[p,t]),A.useEffect(()=>{l&&(i!=null&&i.price)&&(h!=null&&h.tokenB.decimals)&&!Number.isNaN(Number(h==null?void 0:h.tokenB.decimals))&&a(cs(l,i==null?void 0:i.price,h==null?void 0:h.tokenB.decimals))},[l,i]),A.useEffect(()=>{g(r&&y&&r!=="--"&&y!=="--"?H(r).plus(y).toString():"--")},[r,y]),{tokenAPrice:t,tokenBPrice:i,tokenAAmount:p,tokenBAmount:l,tokenAAmountUSD:r,tokenBAmountUSD:y,totalAmountUSD:o,setTotalAmountUSD:g,tvlLoading:F}}function Gi(){const{fetchByApi:t}=ys(),{setPriceRangeMap:s,setRecommendRangesInfo:i}=bt();return{fetchPriceRange:async(p,x,l)=>{var j;try{const r=await t(kr,"GET",{pool:p}),d=Object.fromEntries((j=r==null?void 0:r.ranges)==null?void 0:j.map(y=>[y==null?void 0:y.dateType,[Xt.tickIndexToPrice(y==null?void 0:y.lower,x.decimals,l.decimals).toString(),Xt.tickIndexToPrice(y==null?void 0:y.upper,x.decimals,l.decimals).toString()]]));return s(d),i({ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}),{rangesWithDateTypeMap:d,recommendRanges:{ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}}}catch(r){return console.error("Error in fetchPriceRange:",r),s({}),i({ranges:{},type:""}),{rangesWithDateTypeMap:{},recommendRanges:{ranges:{},type:""}}}}}}function Zi(){const{tab:t,poolAddress:s,from:i,to:c,fee:p}=ye(),{getPoolList:x}=Xr(),[l,j]=A.useState([]),{apiPoolInfo:r,setApiPoolInfo:d,setApiPoolInfoLoading:y,setNetError:a}=ee(),o=Ze(),{fetchTokenInfo:g}=Ms(),k=async({poolAddress:F,from:m,to:h})=>{var b,v,n,u;console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:148 ~ getList ~ getList:");try{y(!0);let f,S;if(F&&F!=="undefined"){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:32 ~ getList ~ poolAddress:",F);const _=await x({pools:[F],display_all_pools:!0});console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:52 ~ getList ~ _res:",_),_&&_.list&&_.list.length?(S=_.list[0],f=await x({coin_type:`${(b=S==null?void 0:S.displayTokenA)==null?void 0:b.coin_type},${(v=S==null?void 0:S.displayTokenB)==null?void 0:v.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):r&&ue(r)?(S=r,f={list:l}):(S={poolAddress:F,displayTokenA:void 0,displayTokenB:void 0},f={list:[]}),y(!1)}else if(m&&h&&m!=="undefined"&&h!=="undefined"&&m!==h){const _=await x({coin_type:`${m},${h}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(_,"res_getPoolList"),_&&_.list&&_.list.length)if(p&&p!=="undefined"){const w=(n=_==null?void 0:_.list)==null?void 0:n.find(L=>H(L==null?void 0:L.feeRate).eq(p));if(w)o(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`);else{const L=St(_==null?void 0:_.list,T=>Number((T==null?void 0:T.tvl)||"0"));o(t?`/liquidity?tab=${t}&poolAddress=${L==null?void 0:L.poolAddress}`:`/liquidity?poolAddress=${L==null?void 0:L.poolAddress}`)}}else{let w=St(_==null?void 0:_.list,L=>Number((L==null?void 0:L.tvl)||"0"));w||(w=St(_==null?void 0:_.list,L=>{var T;return Number(((T=L==null?void 0:L.object)==null?void 0:T.liquidity)||"0")}),w||(w=_==null?void 0:_.list[0])),o(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`)}else{const w=await g([m,h].filter(Boolean)),L=w==null?void 0:w.get(m),T=w==null?void 0:w.get(h);S={poolAddress:void 0,displayTokenA:L,displayTokenB:T},f={list:[]},y(!1)}}else(!m||m==="undefined")&&h&&h!=="undefined"&&(S={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await g(h)}),(!h||h==="undefined")&&m&&m!=="undefined"&&(S={poolAddress:void 0,displayTokenA:await g(m),displayTokenB:void 0}),f={list:[]},y(!1);f&&(a(!1),j(f==null?void 0:f.list),console.log(S,"setApiPoolInfo"),S&&(S!=null&&S.poolAddress&&F?(S==null?void 0:S.poolAddress)===F&&d(S):d(S))),y(!1)}catch(f){if(f!=null&&f.list&&((u=f==null?void 0:f.list)==null?void 0:u.length)===1){a(!0);const S=f==null?void 0:f.list[0];console.log(f==null?void 0:f.list,"setApiPoolInfo"),d(S),j([]),y(!1)}}};return A.useEffect(()=>{s&&s==="undefined"||!s&&s===void 0&&!i&&!c||k({poolAddress:s,from:i,to:c})},[s,i,c]),{getList:k,relatedPoolList:l}}function Ki(){var o,g,k,F;const{poolAddress:t}=ye(),{apiPoolInfo:s,apiPoolInfoLoading:i}=ee(),{quoteWhiteTokenList:c}=Bs(),{getList:p,relatedPoolList:x}=Zi(),l=A.useMemo(()=>{var h,b;const m=ii(x);return m?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(h=es)==null?void 0:h.map(v=>{var u,f;const n=((u=m.find(S=>S.feeRate===v.feeRate))==null?void 0:u.title)||v.title;return{...v,title:n,poolAddress:(f=m.find(S=>S.feeRate===v.feeRate))==null?void 0:f.poolAddress,disabled:n==="Not Created"&&!Ee(s==null?void 0:s.tokenA,c)&&!Ee(s==null?void 0:s.tokenB,c)}}):(b=es)==null?void 0:b.map(v=>{var u,f;const n=((u=m.find(S=>S.feeRate===v.feeRate))==null?void 0:u.title)||v.title;return{...v,title:n,poolAddress:(f=m.find(S=>S.feeRate===v.feeRate))==null?void 0:f.poolAddress,disabled:!Ee(s==null?void 0:s.displayTokenA,c)&&!Ee(s==null?void 0:s.displayTokenB,c)}}):[]},[JSON.stringify(x),JSON.stringify(c),(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type,(g=s==null?void 0:s.displayTokenB)==null?void 0:g.coin_type]),j=A.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(m=>({label:m==null?void 0:m.symbol,key:m==null?void 0:m.coin_type,isToken:!0,imgInfo:{src:m==null?void 0:m.logo_url,w:"16px",h:"16px",coinType:m?m==null?void 0:m.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(k=s==null?void 0:s.displayTokenA)==null?void 0:k.symbol,(F=s==null?void 0:s.displayTokenB)==null?void 0:F.symbol]),r=A.useMemo(()=>{const m=l==null?void 0:l.find(h=>h.poolAddress===t);return m||s},[JSON.stringify(l),t,JSON.stringify(s)]),{fetchPriceRange:d}=Gi(),y=async m=>{console.log("ðŸš€ ~ setPriceRangeMap ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",m),await d(m,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB)};_t(()=>{t&&t===(s==null?void 0:s.poolAddress)&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)&&y(t)},[t,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);const a=A.useMemo(()=>{const m=[];return s!=null&&s.displayTokenA&&m.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&m.push(s==null?void 0:s.displayTokenB),m},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:p,feeTierList:l,apiPoolInfo:s,rangeTabList:j,currentFeeTier:r,apiPoolInfoLoading:i,quoteWhiteTokenList:c,warningTokenList:a}}var pt=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(pt||{});const ke=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Qi({apiPoolInfo:t}){var ie,M,ne;const{tab:s,poolAddress:i}=ye(),c=Ze(),[p,x]=A.useState(),[l,j]=A.useState(ke),[r,d]=A.useState(((ie=ke==null?void 0:ke.find(B=>B.key===s))==null?void 0:ie.key)||ke[0].key),[y,a]=A.useState(),[o,g]=A.useState(),{posBaseListGroupByPool:k}=As(),{addFavorites:F,removeFavorites:m}=ci(),{poolFavoriteIds:h}=ai(),{fromToken:b,toToken:v}=Be(),{fetchTokenPrices:n}=js(),{setFromCoin:u,setToCoin:f}=li(),{setIsOpen:S}=di(),{isSwapWidgetDisplay:_}=Rr(),w=()=>{var B,z;_?S(!0):c(`/swap/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(z=t==null?void 0:t.displayTokenB)==null?void 0:z.coin_type}`)};A.useEffect(()=>(b&&v&&(u(b),f(v)),()=>{u(kt.clmm_swap.from_coin),f(kt.clmm_swap.to_coin)}),[b,v]);const L=A.useMemo(()=>{if(i&&i!=="undefined"){const B=k[i.toLowerCase()||""];return B&&(B!=null&&B.list)&&(B==null?void 0:B.list.length)>0?B==null?void 0:B.list.length:void 0}},[JSON.stringify(k),i]);A.useEffect(()=>{j(ke==null?void 0:ke.map(B=>({...B,num:B.label==="My Positions"&&r==="positions"?L:void 0})))},[L,r]),A.useLayoutEffect(()=>{s&&s!==r&&d(s)},[s]);const T=A.useMemo(()=>h==null?void 0:h.includes(i||""),[JSON.stringify(h),i]),U=B=>{Tt(B),i&&(T?m(i):F(i))},q=A.useMemo(()=>T?{tooltip:"Remove from Watchlist",xlinkHref:"#icon-icon_star_sel",svgFill:"primary_blue",svgHover:"primary"}:{tooltip:"Add to Watchlist",xlinkHref:"#icon-icon_star",svgFill:"text_paragraph",svgHover:"text_caption"},[T]);A.useEffect(()=>{a(t==null?void 0:t.displayTokenA),g(t==null?void 0:t.displayTokenB)},[(M=t==null?void 0:t.displayTokenA)==null?void 0:M.coin_type,(ne=t==null?void 0:t.displayTokenB)==null?void 0:ne.coin_type]);const N=()=>{var B,z;c(`/create-pool/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(z=t==null?void 0:t.displayTokenB)==null?void 0:z.coin_type}/${p==null?void 0:p.feeRate}`)},K=()=>{var z;const B=[];b&&B.push(b.coin_type),v&&B.push(v.coin_type),t!=null&&t.miningRewardList&&((z=t==null?void 0:t.miningRewardList)==null||z.forEach($=>{B.push(ze($==null?void 0:$.coinType).full_address)})),B.length>0&&n(Array.from(new Set(B.filter($=>$&&$!=="undefined"))))};A.useEffect(()=>{K()},[b==null?void 0:b.coin_type,v==null?void 0:v.coin_type]);const{fetchTokenInfo:re}=Ms(),{setApiPoolInfo:J,apiPoolInfoLoading:xe,netError:D}=ee(),{setTotalAmountUSD:Q}=Vs(),Z=A.useCallback(async(B,z,$,se,ce,Y)=>{var Ke,$e,Qe,Ye,Fe;const P=Object.keys(pt).find(jt=>jt===r),de=[se,ce].filter(Boolean),G=await re(de);if($!=null&&$.coin_type||(Ke=G==null?void 0:G.get(ce||""))!=null&&Ke.coin_type)if(ze(B==null?void 0:B.coin_type).full_address===ze(($==null?void 0:$.coin_type)||(($e=G==null?void 0:G.get(ce||""))==null?void 0:$e.coin_type)||"").full_address)a(o),g(y);else{if(ze(B==null?void 0:B.coin_type).full_address===ze((z==null?void 0:z.coin_type)||((Qe=G==null?void 0:G.get(se||""))==null?void 0:Qe.coin_type)||"").full_address)return;c(Y?`/liquidity?tab=${P}&from=${B==null?void 0:B.coin_type}&to=${($==null?void 0:$.coin_type)||((Ye=G==null?void 0:G.get(ce||""))==null?void 0:Ye.coin_type)}`:`/liquidity?tab=${P}&from=${($==null?void 0:$.coin_type)||((Fe=G==null?void 0:G.get(ce||""))==null?void 0:Fe.coin_type)}&to=${B==null?void 0:B.coin_type}`),J(null),Q("")}else c(Y?`/liquidity?tab=${P}&from=${B==null?void 0:B.coin_type}`:`/liquidity?tab=${P}&to=${B==null?void 0:B.coin_type}`),J(null),Q("")},[y,o,r]),R=A.useCallback(async(B,z)=>{const $=await re(B||"");return{value:z||(B?$:void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:D,tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!z&&xe}},[D,xe]);return{currentTab:r,setCurrentTab:d,tabList:l,favoriteStyle:q,onChangeFavorites:U,selectedTokenA:y,selectedTokenB:o,setSelectedTokenA:a,setSelectedTokenB:g,onConfirm:N,feeTier:p,setFeeTier:x,refreshMarketPrice:K,onJump2Swap:w,handleSelectToken:Z,getSelectTokenProps:R}}function Yi(){const{currentAccount:t}=yt(),{apiPoolInfo:s,resetLiquidity:i,setManualRefresh:c,setCurrentPriceData:p}=ee(),{feeTierList:x,currentFeeTier:l,rangeTabList:j,getList:r,quoteWhiteTokenList:d,warningTokenList:y}=Ki(),{poolAddress:a}=ye(),{handleResetRange:o}=mt(),{resetAddLiquidity:g,setFromToken:k,setToToken:F}=Be(),{resetDeposit:m}=bt(),{fetchAccountBalance:h}=Ts(),{getContractPoolInfo:b}=ws(),{getCurrentPrice:v}=_s(),{currentTab:n,setCurrentTab:u,tabList:f,favoriteStyle:S,onChangeFavorites:_,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:T,setSelectedTokenB:U,onConfirm:q,setFeeTier:N,refreshMarketPrice:K,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}=Qi({apiPoolInfo:s});A.useEffect(()=>{ue(s)&&(k(s==null?void 0:s.displayTokenA),F(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const D=async()=>{if(a&&s&&a===(s==null?void 0:s.poolAddress)){const R=await b(a);R&&v(R==null?void 0:R.current_sqrt_price,s)}},Q=()=>{K==null||K(),D==null||D()},Z=async R=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),R&&c(!0),a&&a!=="undefined"&&await r({poolAddress:a}),t!=null&&t.address&&await h(),Q(),c(!1)};return A.useEffect(()=>(t!=null&&t.address&&h(),p({}),()=>{o(),g(),i(),m()}),[]),A.useEffect(()=>{a&&(s==null?void 0:s.poolAddress)!==a&&(o(),g(),i(),m()),a&&a===(s==null?void 0:s.poolAddress)&&D()},[a,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:l,rangeTabList:j,quoteWhiteTokenList:d,warningTokenList:y,currentTab:n,setCurrentTab:u,tabList:f,favoriteStyle:S,onChangeFavorites:_,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:T,setSelectedTokenB:U,onConfirm:q,setFeeTier:N,handleRefresh:Z,handleGetPrice:D,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}}function Ac(){const t=Ze(),{apiPoolInfo:s,apiPoolInfoLoading:i,currentPriceData:c,netError:p}=ee(),{poolAddress:x,from:l,to:j}=ye(),{feeTierList:r,currentFeeTier:d,rangeTabList:y,quoteWhiteTokenList:a,warningTokenList:o,currentTab:g,setCurrentTab:k,tabList:F,favoriteStyle:m,onChangeFavorites:h,selectedTokenA:b,selectedTokenB:v,onConfirm:n,setFeeTier:u,handleRefresh:f,handleGetPrice:S,onJump2Swap:_,handleSelectToken:w,getSelectTokenProps:L}=Yi(),{isApp:T}=Le(),{isOpen:U,onOpen:q,onClose:N}=mr(),{totalAmountUSD:K,tvlLoading:re}=Vs(),J=x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB),{tooltip:xe,xlinkHref:D,svgFill:Q,svgHover:Z}=m,[R,ie]=A.useState({}),[M,ne]=A.useState({}),B=async()=>{const z=await L(l,b),$=await L(j,v);ie(z),ne($)};return A.useEffect(()=>{B()},[l,j,b,v]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{w:"100%",mt:"20px",children:[e.jsxs(E,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(ui,{text:"Pools",onClick:()=>t("/pools")}),J&&e.jsxs(E,{gap:"8px",children:[e.jsx(at,{placement:"top",tooltip:xe,children:e.jsx(je,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:h,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:Z}}},children:e.jsx(Ce,{xlinkHref:D,svgFill:Q,svgHover:Z,fontSize:"18px"})})}),e.jsx(at,{placement:"top",tooltip:"Trade",children:e.jsx(je,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:_,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(at,{placement:"top",tooltip:"Refresh",children:e.jsx(te,{children:e.jsx(xi,{handleRefresh:f,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Pt,{onChange:z=>{w(z,b,v,l,j,!0)},...R}),e.jsx(Pt,{onChange:z=>{w(z,v,b,j,l,!1)},...M})]}),e.jsx(ni,{value:d,loading:!d&&i,feeTierList:r,disabled:p,onChange:z=>{z!=null&&z.poolAddress?t(`/liquidity?poolAddress=${z==null?void 0:z.poolAddress}`):(u(z),q())}})]}),J&&e.jsx(Ti,{apiPoolInfo:s,totalTvl:K,apiPoolInfoLoading:i,tvlLoading:re})]}),J?e.jsxs(e.Fragment,{children:[e.jsxs(be,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(Me,{type:"borderTab",tabList:F,currentTab:g,handleChangeTab:z=>{const $=Object.keys(pt).find(se=>pt[se]===z.label);x&&t(`/liquidity?tab=${$}&poolAddress=${x}`),k($)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:T?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:T?"14px":"16px",fontWeight:"500"}}),g==="deposit"&&!T&&e.jsx(te,{mt:"24px",children:e.jsx(gs,{})}),g!=="deposit"&&s&&e.jsxs(be,{w:T?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(C,{children:"Current Price"}),e.jsx(oi,{noCenter:!!T,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:ct(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:T?{w:"100%"}:{}})]})]}),e.jsx(te,{h:{base:"20px",lg:"8px"}}),g==="deposit"&&e.jsx(Vi,{rangeTabList:y,getList:f,getPrice:S,currentFeeTier:d}),g==="positions"&&e.jsx(Li,{}),g==="analytics"&&e.jsx(Ri,{})]}):e.jsx(te,{mt:"20px",children:!s&&i?e.jsx(gt,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Rt,{})}):e.jsx(De,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(W,{children:b&&v?Ee(b,a)||Ee(v,a)?e.jsxs(e.Fragment,{children:[e.jsx(C,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(C,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(je,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{N(),n()},children:"Initialized Pool"})]}):e.jsx(C,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(C,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(pi,{tokensInfo:o,waringModalCancel:z=>{t("/pools")}}),e.jsx(Jr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:U,onClose:N,onConfirm:n})]})}export{Ac as default};
//# sourceMappingURL=Liquidity-Dv9cdIL0.js.map
