import{a$ as v,b0 as Z,r as F,d as M,j as l,dw as ht,f as at,V as G,H as W,T as U,e as dt,a5 as mt,g as yt,B as vt}from"./index-BXaz1_oP.js";import{A as xt}from"./AddressCopyLink-Cb4gIROq.js";import{M as gt}from"./SwapConfirmBlock-BZ9EI2BH.js";import{T as bt}from"./TooltipIcon-DPeif3JU.js";import{R as At}from"./Ratio-BNoURxm1.js";import{X as jt,Y as ot,R as Pt}from"./YAxis-CLzqHnVJ.js";import{g as St,D as _t,P as wt,Y as Ot,L as X,f as V,C as Et,A as Dt,a as B,d as Lt,b as q,h as Tt,e as kt,j as st,u as Ct,G as Nt,k as tt,l as Rt,n as Bt,T as Wt}from"./generateCategoricalChart-DcWbRkMd.js";import"./AddressUnderline-Q5WGfH2-.js";import"./aggregator-BJTq-Qay.js";import"./useFindBestRouting-CBWTZMmi.js";import"./useToken-6jXOGzJ6.js";import"./global-BNIZ6VYu.js";import"./useGetPoolList-C83MvO5k.js";import"./api-data-utils-B3w9psxD.js";import"./useAccountBalance-Ck7NWqV0.js";import"./useTokenBalance-CG6Ic6-b.js";import"./useTransaction-C1_yaKH5.js";import"./index-BqRncGQr.js";import"./CurrentPrice-dFqRZVyr.js";import"./HighlightText-Cp3tlmUn.js";import"./HTextLabelBox-Bi89arQD.js";import"./TradeConfirmAmountInfo-D_Jg1lTx.js";import"./TradeInputGroup-DR0cHSDG.js";import"./_getAllKeysIn-DdTQwZzK.js";import"./CetusTooltip-CEyBwakd.js";import"./throttle-BJv1YCjk.js";import"./debounce-Db7qic3W.js";import"./index-BIkqHUcC.js";var Ft=["type","layout","connectNulls","ref"],$t=["key"];function D(t){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},D(t)}function et(t,r){if(t==null)return{};var n=zt(t,r),e,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)e=o[a],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function zt(t,r){if(t==null)return{};var n={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if(r.indexOf(e)>=0)continue;n[e]=t[e]}return n}function $(){return $=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},$.apply(this,arguments)}function rt(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,e)}return n}function g(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?rt(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function E(t){return Ut(t)||Vt(t)||Ht(t)||Kt()}function Kt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(t,r){if(t){if(typeof t=="string")return J(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(t,r)}}function Vt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ut(t){if(Array.isArray(t))return J(t)}function J(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function Gt(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function nt(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,ut(e.key),e)}}function Yt(t,r,n){return r&&nt(t.prototype,r),n&&nt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function It(t,r,n){return r=Y(r),Xt(t,lt()?Reflect.construct(r,n||[],Y(t).constructor):r.apply(t,n))}function Xt(t,r){if(r&&(D(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qt(t)}function qt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lt=function(){return!!t})()}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Y(t)}function Jt(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Q(t,r)}function Q(t,r){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},Q(t,r)}function A(t,r,n){return r=ut(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ut(t){var r=Qt(t,"string");return D(r)=="symbol"?r:r+""}function Qt(t,r){if(D(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var e=n.call(t,r);if(D(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var z=function(t){function r(){var n;Gt(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return n=It(this,r,[].concat(a)),A(n,"state",{isAnimationFinished:!0,totalLength:0}),A(n,"generateSimpleStrokeDasharray",function(i,s){return"".concat(s,"px ").concat(i-s,"px")}),A(n,"getStrokeDasharray",function(i,s,u){var c=u.reduce(function(j,S){return j+S});if(!c)return n.generateSimpleStrokeDasharray(s,i);for(var f=Math.floor(i/c),d=i%c,h=s-i,m=[],p=0,y=0;p<u.length;y+=u[p],++p)if(y+u[p]>d){m=[].concat(E(u.slice(0,p)),[d-y]);break}var b=m.length%2===0?[0,h]:[h];return[].concat(E(r.repeat(u,f)),E(m),b).map(function(j){return"".concat(j,"px")}).join(", ")}),A(n,"id",Ct("recharts-line-")),A(n,"pathRef",function(i){n.mainCurve=i}),A(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),A(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Jt(r,t),Yt(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(e,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,i=o.points,s=o.xAxis,u=o.yAxis,c=o.layout,f=o.children,d=wt(f,Ot);if(!d)return null;var h=function(y,b){return{x:y.x,y:y.y,value:y.value,errorVal:st(y.payload,b)}},m={clipPath:e?"url(#clipPath-".concat(a,")"):null};return v.createElement(X,m,d.map(function(p){return v.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:i,xAxis:s,yAxis:u,layout:c,dataPointFormatter:h})}))}},{key:"renderDots",value:function(e,a,o){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,u=s.dot,c=s.points,f=s.dataKey,d=V(this.props,!1),h=V(u,!0),m=c.map(function(y,b){var j=g(g(g({key:"dot-".concat(b),r:3},d),h),{},{value:y.value,dataKey:f,cx:y.x,cy:y.y,index:b,payload:y.payload});return r.renderDotItem(u,j)}),p={clipPath:e?"url(#clipPath-".concat(a?"":"dots-").concat(o,")"):null};return v.createElement(X,$({className:"recharts-line-dots",key:"dots"},p),m)}},{key:"renderCurveStatically",value:function(e,a,o,i){var s=this.props,u=s.type,c=s.layout,f=s.connectNulls;s.ref;var d=et(s,Ft),h=g(g(g({},V(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(o,")"):null,points:e},i),{},{type:u,layout:c,connectNulls:f});return v.createElement(Et,$({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,a){var o=this,i=this.props,s=i.points,u=i.strokeDasharray,c=i.isAnimationActive,f=i.animationBegin,d=i.animationDuration,h=i.animationEasing,m=i.animationId,p=i.animateNewValues,y=i.width,b=i.height,j=this.state,S=j.prevPoints,L=j.totalLength;return v.createElement(Dt,{begin:f,duration:d,isActive:c,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var P=w.t;if(S){var T=S.length/s.length,_=s.map(function(x,I){var N=Math.floor(I*T);if(S[N]){var R=S[N],O=B(R.x,x.x),pt=B(R.y,x.y);return g(g({},x),{},{x:O(P),y:pt(P)})}if(p){var ct=B(y*2,x.x),ft=B(b/2,x.y);return g(g({},x),{},{x:ct(P),y:ft(P)})}return g(g({},x),{},{x:x.x,y:x.y})});return o.renderCurveStatically(_,e,a)}var K=B(0,L),k=K(P),C;if(u){var H="".concat(u).split(/[,\s]+/gim).map(function(x){return parseFloat(x)});C=o.getStrokeDasharray(k,L,H)}else C=o.generateSimpleStrokeDasharray(L,k);return o.renderCurveStatically(s,e,a,{strokeDasharray:C})})}},{key:"renderCurve",value:function(e,a){var o=this.props,i=o.points,s=o.isAnimationActive,u=this.state,c=u.prevPoints,f=u.totalLength;return s&&i&&i.length&&(!c&&f>0||!Lt(c,i))?this.renderCurveWithAnimation(e,a):this.renderCurveStatically(i,e,a)}},{key:"render",value:function(){var e,a=this.props,o=a.hide,i=a.dot,s=a.points,u=a.className,c=a.xAxis,f=a.yAxis,d=a.top,h=a.left,m=a.width,p=a.height,y=a.isAnimationActive,b=a.id;if(o||!s||!s.length)return null;var j=this.state.isAnimationFinished,S=s.length===1,L=Z("recharts-line",u),w=c&&c.allowDataOverflow,P=f&&f.allowDataOverflow,T=w||P,_=q(b)?this.id:b,K=(e=V(i,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},k=K.r,C=k===void 0?3:k,H=K.strokeWidth,x=H===void 0?2:H,I=Tt(i)?i:{},N=I.clipDot,R=N===void 0?!0:N,O=C*2+x;return v.createElement(X,{className:L},w||P?v.createElement("defs",null,v.createElement("clipPath",{id:"clipPath-".concat(_)},v.createElement("rect",{x:w?h:h-m/2,y:P?d:d-p/2,width:w?m:m*2,height:P?p:p*2})),!R&&v.createElement("clipPath",{id:"clipPath-dots-".concat(_)},v.createElement("rect",{x:h-O/2,y:d-O/2,width:m+O,height:p+O}))):null,!S&&this.renderCurve(T,_),this.renderErrorBar(T,_),(S||i)&&this.renderDots(T,R,_),(!y||j)&&kt.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.animationId!==a.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:a.curPoints}:e.points!==a.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,a){for(var o=e.length%2!==0?[].concat(E(e),[0]):e,i=[],s=0;s<a;++s)i=[].concat(E(i),E(o));return i}},{key:"renderDotItem",value:function(e,a){var o;if(v.isValidElement(e))o=v.cloneElement(e,a);else if(St(e))o=e(a);else{var i=a.key,s=et(a,$t),u=Z("recharts-line-dot",typeof e!="boolean"?e.className:"");o=v.createElement(_t,$({key:i},s,{className:u}))}return o}}])}(F.PureComponent);A(z,"displayName","Line");A(z,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Nt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});A(z,"getComposedData",function(t){var r=t.props,n=t.xAxis,e=t.yAxis,a=t.xAxisTicks,o=t.yAxisTicks,i=t.dataKey,s=t.bandSize,u=t.displayedData,c=t.offset,f=r.layout,d=u.map(function(h,m){var p=st(h,i);return f==="horizontal"?{x:tt({axis:n,ticks:a,bandSize:s,entry:h,index:m}),y:q(p)?null:e.scale(p),value:p,payload:h}:{x:q(p)?null:n.scale(p),y:tt({axis:e,ticks:o,bandSize:s,entry:h,index:m}),value:p,payload:h}});return g({points:d,layout:f},c)});var Zt=Rt({chartName:"LineChart",GraphicalChild:z,axisComponents:[{axisType:"xAxis",AxisComp:jt},{axisType:"yAxis",AxisComp:ot}],formatAxisMap:Bt});const Mt=({active:t,payload:r,label:n})=>{var e,a;return t&&r&&r.length?l.jsxs("div",{style:{backgroundColor:"#121212",border:"1px solid #23252C",padding:"12px",borderRadius:"8px",position:"relative",left:"0px",top:"-30px",fontSize:"12px"},children:[l.jsx("p",{style:{color:"#909CA4"},children:ht.unix((a=(e=r[0])==null?void 0:e.payload)==null?void 0:a.timestamp).format("MM/DD HH:mm")}),l.jsxs("p",{style:{color:"#fff",marginTop:"8px"},children:["$",at(r[0].value)]})]}):null};function te({data:t=[]}){const r=M(Math.min(...t.map(e=>e.price))).mul(.99999).toNumber(),n=M(Math.max(...t.map(e=>e.price))).mul(1.00001).toNumber();return l.jsx(Pt,{width:"100%",height:"100%",children:l.jsxs(Zt,{width:180,height:48,data:t,margin:{top:5,right:20,left:20,bottom:5},children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"priceLine",x1:"0",y1:"0",x2:"1",y2:"0",children:[l.jsx("stop",{offset:"0%",stopColor:"rgba(117, 200, 255, 1)"}),l.jsx("stop",{offset:"100%",stopColor:"rgba(104, 255, 216, 1)"})]})}),l.jsx(ot,{hide:!0,domain:[r,n]}),l.jsx(Wt,{cursor:!1,content:l.jsx(Mt,{})}),l.jsx(z,{type:"linear",dot:!1,dataKey:"price",stroke:"url(#priceLine)",strokeWidth:2})]})})}function De({fromCoin:t,toCoin:r}){return F.useMemo(()=>[t,r].filter(Boolean).filter(e=>e==null?void 0:e.is_trusted),[t,r]).length?l.jsxs(G,{w:"100%",align:"flex-start",gap:"8px",children:[l.jsxs(W,{justify:"flex-start",h:"52px",align:"center",gap:"4px",children:[l.jsx(U,{fontSize:"14px",fontWeight:"500",color:"text_caption",h:"20px",lineHeight:"20px",children:"Price Reference"}),l.jsx(bt,{type:"priceReference"})]}),l.jsxs(G,{w:"100%",gap:"28px",children:[(t==null?void 0:t.is_trusted)&&l.jsx(it,{coin:t}),(r==null?void 0:r.is_trusted)&&l.jsx(it,{coin:r})]})]}):null}const it=({coin:t})=>{const{getExplorerUrl:r}=dt(),{getPriceKline:n,getTokenPrice:e}=mt(),[a,o]=F.useState({price:[],daily_rate:""});F.useEffect(()=>{o({price:[],daily_rate:""})},[t]);const i=e(t==null?void 0:t.coin_type),s=async(u,c)=>{try{const f=await n(u,c);o(f)}catch(f){console.log(f,"error")}};return F.useEffect(()=>{i!=null&&i.base_symbol&&s(i==null?void 0:i.base_symbol,i==null?void 0:i.market)},[i==null?void 0:i.base_symbol,i==null?void 0:i.market]),!a||a.price.length===0?l.jsx(l.Fragment,{}):l.jsxs(G,{w:"100%",gap:"12px",children:[l.jsxs(W,{w:"100%",justify:"space-between",align:"flex-start",h:"32px",children:[l.jsxs(W,{children:[l.jsx(yt,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),l.jsxs(G,{align:"flex-start",gap:"4px",children:[l.jsx(U,{fontSize:"14px",h:"16px",lineHeight:"16px",fontWeight:"600",color:"text_caption",children:t==null?void 0:t.symbol}),l.jsx(U,{fontSize:"12px",h:"12px",lineHeight:"12px",fontWeight:"500",children:t==null?void 0:t.name})]})]}),l.jsxs(W,{children:[(i==null?void 0:i.market)&&l.jsx(gt,{market:i==null?void 0:i.market}),l.jsxs(U,{color:"text_caption",fontSize:"14px",fontWeight:"500",children:["$",(i==null?void 0:i.price)!==void 0?at(i==null?void 0:i.price):"--"]}),(a==null?void 0:a.daily_rate)&&(i==null?void 0:i.price)!==void 0&&l.jsx(At,{value:a==null?void 0:a.daily_rate})]})]}),l.jsxs(W,{w:"100%",justify:"space-between",align:"flex-end",gap:"0",children:[l.jsx(xt,{address:t==null?void 0:t.coin_type,onClickLink:()=>window.open(r(t==null?void 0:t.coin_type,"coin")),wrapStyle:{border:"1px solid",borderColor:"border",h:"24px",borderRadius:"8px",p:"0 8px",bg:"bg_secondary"},fontWeight:"500"}),l.jsx(vt,{flex:"0 0 210px",h:"24px",mr:"-13px",children:(i==null?void 0:i.price)!==void 0&&(a==null?void 0:a.price.length)>0&&l.jsx(te,{data:a==null?void 0:a.price})})]})]})};export{De as default};
