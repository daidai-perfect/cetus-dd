import{a as g,ab as Qe,j as i,V as We,H as le,I as bt,T as O,R as ht,v as Te,f as Ae,a2 as St,a3 as kt,a4 as At,a5 as wt}from"./vendor-_1sPVx0S.js";import{c as Pe,e as _t,b as vt,a as Rt,f as Ct,Z as jt,R as Lt}from"./ZapSwitch-BR4sNZ03.js";import{a as qt,u as Ft}from"./useTransaction-DopuwF40.js";import{u as Be}from"./global-CG4XJcf0.js";import{a as Ne,f as zt,u as Ie,g as Mt}from"./usePositionList-DCRYUjtM.js";import{a as we,b as et}from"./useNotifiSubscription-BHSFkP5y.js";import{f as $e}from"./index-B0fjcXro.js";import{u as ft}from"./useAccountBalance-Bqky3zOE.js";import{a as Wt,k as tt,R as ye,I as Nt,B as it,y as Vt,M as Et,e as Zt,d as a,am as oe,m as Ut,r as ke,o as Gt,U as Ht,j as Je,i as Ke,W as Xt,D as Se,X as Oe,c as $t}from"./index-DZworFuu.js";import{u as Jt}from"./usePosAdd-DcGULfPv.js";import{M as fe}from"./msafe-oYBkW7LJ.js";import{v as Ye}from"./v4-C6aID195.js";import{T as Kt}from"./TradeInputGroup-BU_bV5JV.js";import{A as Ot}from"./index-OPMiavju.js";import{u as Yt,R as De}from"./ExpendItem-Bu-QAEwU.js";function Dt(t,d){return{currentApiPoolInfo:g.useMemo(()=>{if(t!=null&&t.clmmPool)return d==null?void 0:d[t==null?void 0:t.clmmPool]},[t==null?void 0:t.clmmPool,d])}}const Qt="/assets/img_farming@2x-CwRUS-3E.png";function Pt(){Wt();const{currentPosBaseInfo:t,farmsPosRewardsData:d,posPoolsRelatedData:y,posBaseListLoading:e,posPoolsOriginalData:R}=Ne(),{currentPosPoolInfo:r}=we(),{currentAccount:u}=tt(),{getCurrentPosBaseInfo:A}=et(),{getFarmsRewardsData:N}=zt(),{getClmmPosName:V}=Ie(),E=g.useMemo(()=>{var l;if(t!=null&&t.tokenName)return t==null?void 0:t.tokenName;{const n=(l=R==null?void 0:R[t==null?void 0:t.clmmPool])==null?void 0:l.index;return V(t==null?void 0:t.index,n)||""}},[t==null?void 0:t.tokenName,t==null?void 0:t.index,t==null?void 0:t.clmmPool,R]),J=y[t==null?void 0:t.posId],K=(J==null?void 0:J.currentStatus)=="Active",T=d[t==null?void 0:t.id],Z=(r==null?void 0:r.farmsRewarderList)||[],Y=T==null?void 0:T.reduce((l,n)=>l+n.display_amount_owed,0),{toStakePos:b,toUnStakePos:q,toClaimPos:D,unstakeLoading:p,claimLoading:m}=Yt(),c=Qe(),k=l=>{c(`/position-detail/${l[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{A(u==null?void 0:u.address,l[0].parsedJson.wrapped_position_id,!0)},2e3)},h=async()=>{b(t==null?void 0:t.id,r==null?void 0:r.farmsPoolAddress,E,k)},H=()=>{c(`/position-detail/${t==null?void 0:t.posId}`,{replace:!0}),setTimeout(()=>{A(u==null?void 0:u.address,t==null?void 0:t.posId,!0)},2e3)},X=async()=>{q(t==null?void 0:t.id,t==null?void 0:t.farmsPool,E,H)},ge=()=>{setTimeout(()=>{N([t])},2e3)},ee=async()=>{D(t==null?void 0:t.id,t==null?void 0:t.farmsPool,ge)},de=g.useMemo(()=>(T==null?void 0:T.length)>0?T.reduce((l,n)=>ye(l).plus(n==null?void 0:n.display_amount_owed).toString(),"0"):"0",[T,u==null?void 0:u.address,m,p]);return i.jsx(i.Fragment,{children:((r==null?void 0:r.farmsPoolAddress)||ye(de).gt(0))&&i.jsxs(We,{w:"100%",children:[i.jsxs(le,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Qt,bgSize:"100% 100%",justify:"space-between",children:[i.jsxs(We,{align:"flex-start",children:[i.jsxs(le,{children:[i.jsx(bt,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),i.jsx(O,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),i.jsx(O,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),i.jsxs(le,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[i.jsx(O,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),i.jsx(O,{color:"primary",fontSize:"12px",fontWeight:"500",children:i.jsx(Ot,{poolInfo:r,isPosition:!0,showAprSize:"12px"})}),i.jsxs(le,{gap:"4px",cursor:"pointer",onClick:()=>c("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[i.jsx(O,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),i.jsx(Nt,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),i.jsxs(it,{mt:"-20px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:"0 0 12px 12px",borderTop:"none",children:[i.jsx(O,{children:"Farming Rewards"}),i.jsx(le,{w:"100%",flexWrap:"wrap",children:(T==null?void 0:T.length)>0&&ye(de).gt(0)?T==null?void 0:T.map(l=>{var n;return i.jsx(ht.Fragment,{children:ye(l==null?void 0:l.display_amount_owed).gt(0)&&i.jsx(De,{coinType:(n=l==null?void 0:l.token)==null?void 0:n.coin_type,amount:l==null?void 0:l.display_amount_owed,tokenInfo:l==null?void 0:l.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)},l==null?void 0:l.rewarder_type)}):(Z==null?void 0:Z.length)>0?Z==null?void 0:Z.map(l=>i.jsx(De,{coinType:l==null?void 0:l.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)):i.jsx(O,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),i.jsxs(le,{w:"100%",justify:"space-between",mt:"16px",children:[(t==null?void 0:t.posType)=="farms"&&i.jsx(Te,{disabled:m||p,isLoading:p,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:X,children:"Unstake"}),(t==null?void 0:t.posType)=="clmm"&&!K&&i.jsx(Ae,{w:"50%",sx:{">button":{w:"100%"}},children:i.jsx(Vt,{placement:"top",tooltip:i.jsx(O,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:i.jsx(Ae,{w:"100%",children:i.jsx(Te,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),(t==null?void 0:t.posType)=="clmm"&&K&&i.jsx(Te,{disabled:m||p,isLoading:p,h:"40px",w:"50%",fontSize:"14px",onClick:h,children:"Stake"}),i.jsx(Te,{disabled:m||p||ye(Y).eq(0),isLoading:m,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:ee,children:"Claim rewards"})]})]})]})})}function Bt({action:t,haveZap:d,resetInputAmount:y}){const{useZapIn:e,setUseZapIn:R}=we(),{setZapAmount:r,setPreDepositeData:u}=Pe(),A=()=>{y==null||y(),R(!e),r("")};return g.useEffect(()=>{R(!1),u(void 0)},[t]),i.jsxs(le,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[i.jsx(O,{color:"primary_gray",fontSize:"14px",children:t==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),i.jsx(_t,{action:t,value:e,onChange:A})]})}function It(){const{clmmSdk:t}=Et(),{peripherySdk:d}=Zt(),{slippage:y}=Be();return{getRemoveTsPayload:async r=>{const{posId:u,poolAddress:A,coinTypeA:N,coinTypeB:V,amountA:E,amountB:J,liquidity:K,lowerTick:T,upperTick:Z,posType:Y,rewarderCoinTypes:b,farmsPoolId:q,farmsPosId:D}=r,p=a(E).mul(a(1).sub(a(y))),m=a(J.toString()).mul(a(1).sub(a(y)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",p,m),Y==="clmm"){const c={coinTypeA:N,coinTypeB:V,pool_id:A,pos_id:u,delta_liquidity:K,min_amount_a:oe(p.toString(),0)||"",min_amount_b:oe(m.toString(),0)||"",collect_fee:!0,rewarder_coin_types:b};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",c);const k=await t.Position.removeLiquidityTransactionPayload(c),h={action:fe.DecreaseLiquidity,txbParams:c};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",k,h),{tx:k,msafeParams:h}}else{const c={pool_id:q||"",coinTypeA:N,coinTypeB:V,position_nft_id:D||"",clmm_pool_id:A,min_amount_a:oe(p.toString(),0)||"",min_amount_b:oe(m.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:b,delta_liquidity:K,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",c);const k=await d.Farms.removeLiquidityPayload(c),h={action:"FarmingDecreaseLiquidity",txbParams:c};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",h,k),{tx:k,msafeParams:h}}},getCloseTsPayload:async r=>{const{posId:u,poolAddress:A,coinTypeA:N,coinTypeB:V,amountA:E,amountB:J,liquidity:K,lowerTick:T,upperTick:Z,posType:Y,rewarderCoinTypes:b,farmsPoolId:q,farmsPosId:D}=r,p=a(E).mul(a(1).sub(a(y))),m=a(J.toString()).mul(a(1).sub(a(y)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",r,p.toString(),m.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",b),Y==="clmm"){const c={coinTypeA:N,coinTypeB:V,pool_id:A,pos_id:u||"",min_amount_a:oe(p.toString(),0)||"",min_amount_b:oe(m.toString(),0)||"",rewarder_coin_types:b,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",c);const k=await t.Position.closePositionTransactionPayload(c),h={action:fe.RemoveLiquidity,txbParams:c};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",k,h),{tx:k,msafeParams:h}}else{const c={pool_id:q||"",coinTypeA:N,coinTypeB:V,position_nft_id:D||"",clmm_pool_id:A,min_amount_a:oe(p.toString(),0)||"",min_amount_b:oe(m.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:b,delta_liquidity:K,unstake:!0,close_position:!0,clmm_position_id:u};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",c);const k=await d.Farms.removeLiquidityPayload(c),h={action:fe.FarmingRemoveLiquidity,txbParams:c};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",h,k),{tx:k,msafeParams:h}}}}}function ei(){const{transactionConfirmation:t}=qt(),{getTokenAmountValue:d}=Ut(),{getCoinAmountFromLiquidity:y}=Mt(),{currentPosBaseInfo:e,posLiquidityData:R,posRewardsData:r,setPosBaseList:u,posApiPoolData:A}=Ne(),{getCurrentPosBaseInfo:N}=et(),{preAdd:V}=Jt(),{getRemoveTsPayload:E,getCloseTsPayload:J}=It(),{getTokenALock:K,getTokenBLock:T}=Ie(),{setTokenAmountAfterA:Z,setTokenAmountAfterB:Y,currentPosPoolInfo:b,currentPoolSqrtPrice:q,setIsFixedDisplayTokenA:D,slideValue:p,setSlideValue:m,isFixedDisplayTokenA:c,isPosDetailRefresh:k,currentPosDetailTab:h,useZapIn:H,curPosContractPoolInfo:X}=we(),{getZapWithdrawToastInfo:ge,getZapWithdrawTx:ee,reCalculateZapData:de}=vt("Withdraw"),{getContractPoolInfo:l}=Rt(),{preDepositeData:n,currentZapToken:F,setZapAmount:C,zapAmount:_e}=Pe(),{currentApiPoolInfo:ae}=Dt(e,A),te=r[e==null?void 0:e.posId],{mevProtect:ot,maxCapForGas:lt,transactionMode:at,customGasPrice:st}=Be(),[w,U]=g.useState(""),[_,G]=g.useState(""),[nt,pe]=g.useState(!1),[ve,Re]=g.useState(""),Q=e==null?void 0:e.displayTokenA,P=e==null?void 0:e.displayTokenB,z=R[e==null?void 0:e.posId],M=ke(z==null?void 0:z.displayCoinAmountA,void 0,!0),f=ke(z==null?void 0:z.displayCoinAmountB,void 0,!0),dt=d(Q==null?void 0:Q.coin_type,w),pt=d(P==null?void 0:P.coin_type,_);g.useEffect(()=>{if(+w||+_){const o=+w,s=+_;Z(a(+M).sub(o).toString()),Y(a(f).sub(s).toString())}else Z(""),Y("")},[w,_]);const[Ce,re]=g.useState(""),Ve=g.useRef("");g.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",Ce),Ve.current=Ce},[Ce]);const be=()=>{U(""),G(""),pe(!1),re(""),m("--")},Ee=g.useMemo(()=>K(e,X),[X==null?void 0:X.current_tick_index,e]),Ze=g.useMemo(()=>T(e,X),[X==null?void 0:X.current_tick_index,e]),je=e!=null&&e.isReverse?Ze:Ee,Le=e!=null&&e.isReverse?Ee:Ze,Ue=Gt((o,s,S)=>{var ue,ne;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",o);const v=s?(ue=e==null?void 0:e.displayTokenA)==null?void 0:ue.decimals:(ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.decimals,j=Ht(o,v),x=e==null?void 0:e.tokenA,L=e==null?void 0:e.tokenB,B=e==null?void 0:e.lowerTick,me=e==null?void 0:e.upperTick,W=e==null?void 0:e.isReverse,$={amount:j,tokenA:x,tokenB:L,isTokenA:W?!s:s,lowerTick:B,upperTick:me,curSqrtPrice:q,isReverse:W,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",$);const{displayCoinAmountA:ie,displayCoinAmountB:he,liquidityAmount:se}=V($);if(console.log("ðŸš€ ~ debouncedPreCalculate:",ie,he,$,s,S),Ve.current===S){Re(se),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",ve,se);const xe=Je(a(se).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);a(xe).gt(100)||a(xe).eq(100)?(m(100),U(M),G(f)):(m(xe),s?G(he||""):U(ie||""))}else be();pe(!1)},500),[Ge,He]=g.useState(!1),qe=()=>{if((w||_)&&Xt(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",Ge,p),p==="--")return;if(Ge||Number(p)==100)Xe(Number(p));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const o=c?w:_;if(+o){const s=Ye();re(s),Ue(o,c,s)}}}};g.useEffect(()=>{h=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",k,M,f),qe())},[M,f]);const mt=(o,s)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",o),He(!1),Re(""),!o){be();return}if(pe(!0),D(s),s){if(U(o),a(o).eq(M)){G(f),m(100),re(""),pe(!1);return}}else if(G(o),a(o).eq(f)){U(M),m(100),re(""),pe(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",o,+o),+o){const S=Ye();re(S),console.log("ðŸš€ ~ handleAmountChange ~ params:",o),Ue(o,s,S)}else pe(!1),s?G(""):U("")},Xe=o=>{var s;if(He(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",M,f,o),H){const v=((s=ae==null?void 0:ae.tokenA)==null?void 0:s.coin_type)===(F==null?void 0:F.coin_type)?ze:Me;if(o===100)C(v);else{const j=a(v).mul(a(o).div(100)).toString();C(j)}}else if(o==100)U(M),G(f);else{const S=e==null?void 0:e.tokenA,v=e==null?void 0:e.tokenB,j=ke(a(e==null?void 0:e.liquidity).mul(o).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,j);const x=e==null?void 0:e.lowerTick,L=e==null?void 0:e.upperTick,B=e==null?void 0:e.isReverse,me={tokenA:S,tokenB:v,liquidity:j,currentSqrtPrice:q,lowerTick:x,upperTick:L,roundUp:!1};try{const{amountA:W,amountB:ce}=y(me);Re(j);const $=B?ce:W,ie=B?W:ce;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",W,ce),U(a($).gt(0)?$:""),G(a(ie).gt(0)?ie:"")}catch(W){console.log("ðŸš€ ~ changeSlideFun ~ error:",W),U(""),G("")}}},{currentAccount:I}=tt(),ct=g.useMemo(()=>{const o={text:"Remove",disabled:!1};return I!=null&&I.address?!+w&&!+_?(o.text="Enter an amount",o.disabled=!0,o):!je&&w&&a(w).gt(M||0)||!Le&&_&&a(_).gt(f||0)?(o.disabled=!0,o.text="Invalid Amount",o):((e==null?void 0:e.posType)=="burn"&&(o.disabled=!0),o):(o.text="Connect Wallet",o.disabled=!1,o)},[w,_,M,f,I==null?void 0:I.address]),{signAndExecuteTransaction:gt}=Ft(),{fetchAccountBalance:rt}=ft(),[ut,Fe]=g.useState(!1),xt=Qe(),yt=async()=>{var S,v,j;Fe(!0);const o=p==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",te),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",b==null?void 0:b.miningRewardList);const s=o?!te||(te==null?void 0:te.length)==0?(S=(b==null?void 0:b.miningRewardList)||[])==null?void 0:S.reduce((x,L)=>(x.push(L.coinType),x),[]):(v=te||[])==null?void 0:v.reduce((x,L)=>(x.push(L.coin_address),x),[]):(j=te||[])==null?void 0:j.reduce((x,L)=>(a(L==null?void 0:L.amount_owed).gt(0)&&x.push(L.coin_address),x),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",s);try{let x,L,B;if(H){const W=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;B=ge(je,Le),t(B),x=await ee(W,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,s,(e==null?void 0:e.posType)=="farms")}else{const W=e!=null&&e.isReverse?a(_).mul(Se.pow(10,P.decimals)).toString():a(w).mul(Se.pow(10,Q.decimals)).toString(),ce=e!=null&&e.isReverse?a(w).mul(Se.pow(10,Q.decimals)).toString():a(_).mul(Se.pow(10,P.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",b,te,s);const $={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:W,amountB:ce,liquidity:ve,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:s};(e==null?void 0:e.posType)=="farms"&&($.farmsPoolId=e==null?void 0:e.farmsPool,$.farmsPosId=e==null?void 0:e.id),B={getShowInfo:(he,se)=>{const ue="Remove "+[$e(w,Q==null?void 0:Q.symbol),$e(_,P==null?void 0:P.symbol)].filter(Boolean).join(" and "),ne={modalDescriptionText:ue,toastTitleText:ue};if(he==="success"){let xe=w,Tt=_;se&&(xe=Oe(se,Q)||w,Tt=Oe(se,P)||_),ne.toastDescriptionContent="",ne.modalDescriptionText="",ne.toastTitleText="Remove Liquidity Successful"}return ne}},t(B),console.log("ðŸš€ ~ toAdd ~ params:",ve,o,p,$);const ie=o?await J($):await E($);x=ie.tx,L=ie.msafeParams}const me=await gt(x,B,{useMev:ot,useFastMode:at==="Fast Mode",maxCapForGas:lt,customGasPrice:st,msafeParams:L});console.log("ðŸš€ ~ toClaim ~ res:",me),me?(rt(),be(),C(""),o?(u([]),xt("/pools?tab=positions")):N(I==null?void 0:I.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&l(e==null?void 0:e.clmmPool).then(W=>{console.log("ðŸš€ ~ toClaim ~ res:",W),H?de():qe()}),Fe(!1)}catch(x){qe(),Fe(!1),console.log("ðŸš€ ~ toClaim ~ error:",x)}};g.useMemo(()=>{if(e!=null&&e.posId){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,S=e==null?void 0:e.liquidity,v=e==null?void 0:e.lowerTick,j=e==null?void 0:e.upperTick;y({tokenA:o,tokenB:s,liquidity:S,currentSqrtPrice:q,lowerTick:v,upperTick:j,roundUp:!1})}},[e==null?void 0:e.posId,q]);const{onlyAmountA:ze,onlyAmountB:Me}=g.useMemo(()=>({onlyAmountA:z==null?void 0:z.onlyAmountA,onlyAmountB:z==null?void 0:z.onlyAmountB}),[z]);return g.useEffect(()=>{var o;if(H)if(_e){const S=((o=ae==null?void 0:ae.tokenA)==null?void 0:o.coin_type)===(F==null?void 0:F.coin_type)?ze:Me;if(S){const v=Je(a(_e).div(S).mul(100).toString(),2,!0);m(v)}else m("--")}else m("--");else m("--")},[H,_e]),g.useEffect(()=>{if(h!=="increase"&&H){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",n),n!=null&&n.amount_a||n!=null&&n.amount_b){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,S=Ke(n==null?void 0:n.amount_a,o==null?void 0:o.decimals),v=Ke(n==null?void 0:n.amount_b,s==null?void 0:s.decimals);if(p==100)U(String(M)),G(String(f));else{const j=e!=null&&e.isReverse?v:S,x=e!=null&&e.isReverse?S:v;U(a(j).gt(M)?String(M):j),G(a(x).gt(f)?String(f):x)}return}U(""),G("")}},[H,n,p]),g.useEffect(()=>{U(""),G("")},[]),{tokenAmountA:w,tokenAmountB:_,resetInputAmount:be,showDisplayTokenALock:je,showDisplayTokenBLock:Le,currentPosLiquidityData:z,tokenABalance:M,tokenBBalance:f,displayTokenA:Q,displayTokenB:P,tokenAmountValueA:dt,tokenAmountValueB:pt,preRemoveLoading:nt,handleAmountChange:mt,btnStatusText:ct,changeSlideFun:Xe,toRemove:yt,isRemoveLoading:ut,onlyAmountA:ze,onlyAmountB:Me,currentApiPoolInfo:ae,currentPoolSqrtPrice:q}}function bi(){const{currentPosBaseInfo:t,posPoolsRelatedData:d,posApiPoolData:y}=Ne(),{isFixedDisplayTokenA:e,slideValue:R,setSlideValue:r,curPosContractPoolInfo:u,useZapIn:A}=we(),{tokenAmountA:N,tokenAmountB:V,tokenABalance:E,tokenBBalance:J,displayTokenA:K,displayTokenB:T,tokenAmountValueA:Z,tokenAmountValueB:Y,preRemoveLoading:b,handleAmountChange:q,changeSlideFun:D,btnStatusText:p,toRemove:m,isRemoveLoading:c,showDisplayTokenALock:k,showDisplayTokenBLock:h,resetInputAmount:H,onlyAmountA:X,onlyAmountB:ge,currentApiPoolInfo:ee,currentPoolSqrtPrice:de,currentPosLiquidityData:l}=ei();g.useEffect(()=>()=>{H()},[]);const n=C=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",C),C=="MAX"||C==100?(r(100),D(100)):(r(Number(C.split("%")[0])),D(Number(C.split("%")[0])))};g.useEffect(()=>r("--"),[]);const F=d[t==null?void 0:t.posId];return i.jsxs(We,{w:"100%",gap:"8px",children:[i.jsxs(Ae,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(ee==null?void 0:ee.haveZap)&&(t==null?void 0:t.posType)!=="burn"&&!k&&!h&&i.jsx(Bt,{action:"Withdraw",resetInputAmount:H}),A?i.jsx(Ct,{action:"Withdraw",apiPoolInfo:ee,currentSqrtPrice:de,onlyAmountA:X,onlyAmountB:ge,liquidity:t==null?void 0:t.liquidity,lowerTick:t==null?void 0:t.lowerTick,upperTick:t==null?void 0:t.upperTick,slideValue:String(R),currentPosLiquidityData:l,changeSlideValue:n}):i.jsx(i.Fragment,{children:i.jsx(Kt,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:E||"",value:N,amountValue:Z,loading:!e&&b,onChange:C=>{q(C,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:K,half:!1,lock:{isLock:t&&u&&k,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:J||"",value:V,amountValue:Y,loading:e&&b,onChange:C=>{q(C,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:T,half:!1,lock:{isLock:t&&u&&h,style:{borderRadius:"12px"}}},lock:{isLock:!t||!u||t&&(t==null?void 0:t.posType)=="burn",text:t&&(t==null?void 0:t.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(t==null?void 0:t.posType)!=="burn"&&i.jsxs(it,{borderRadius:"12px",p:"16px",mt:"8px",children:[i.jsx(O,{color:"primary_gray",children:"Amount"}),i.jsx(ii,{percentage:R,onChange:C=>n(C)})]})]}),A?i.jsx(jt,{action:"Withdraw",onClick:m,hideDepositRatio:!0,otherLoading:c}):i.jsx(Te,{isLoading:c,onClick:m,disabled:p.disabled||c,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:p.text}),(t==null?void 0:t.posType)!=="burn"&&i.jsx(Pt,{}),F&&(F==null?void 0:F.minPrice)!=="0"&&(F==null?void 0:F.maxPrice)!=="âˆž"&&i.jsx(Lt,{subscriptionSource:"PositionDetail"})]})}function ti(t){const{percentage:d,onChange:y,wrapStyle:e,textFontSize:R,selectTabStyle:r,selectTabItemStyle:u,selectTabItemTextStyle:A}=t,N=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}],V=g.useMemo(()=>d!==100?`${d}%`:"MAX",[d]);return i.jsxs(le,{w:"100%",...e,children:[i.jsxs(O,{fontSize:R,color:"text_caption",children:[d=="--"?"--":a(d).gt(0)&&Number(d)<.01?"<0.01":ke(d,2),"%"]}),i.jsx($t,{type:"outlineTab",tabList:N,currentTab:V,handleChangeTab:E=>{E.label==="MAX"?y(100):y(E.label.replace("%",""))},wrapStyle:r,itemStyle:u,selectTabItemTextStyle:A})]})}function ii(t){const{percentage:d,onChange:y}=t;return i.jsxs(Ae,{w:"100%",children:[i.jsx(ti,{percentage:d,onChange:y,wrapStyle:{justifyContent:"space-between",m:"10px 0"},selectTabStyle:{w:{base:"220px",lg:"310px"},h:"32px",p:"3px",borderRadius:"8px"},selectTabItemStyle:{flex:"1",fontSize:"14px",margin:"0px"},textFontSize:"24px"}),i.jsxs(St,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:d=="--"?0:Number(d),onChange:e=>y(e+"%"),children:[i.jsx(kt,{children:i.jsx(At,{})}),i.jsx(wt,{})]})]})}export{Pt as F,ii as P,bi as R,Bt as T,ti as a,Dt as u};
//# sourceMappingURL=RemoveBlock-D0UZazua.js.map
