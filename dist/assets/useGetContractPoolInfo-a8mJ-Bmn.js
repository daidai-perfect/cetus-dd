import{U as Ir,aQ as Tt,bc as ot,aW as $t,d as F,u as Pi,aH as $r,r as j,be as Mi,bf as en,a$ as re,j as E,bg as Ii,b as Ce,a7 as $i,ar as nn,H as zi,V as kn,aI as Zt,B as rn,l as sn,an as Bi,T as Oi,aR as On,C as qi,aa as qn,bh as ji,aO as Le}from"./index-D49RffYW.js";import{b as De,T as Xe}from"./useGetPoolList-DBJielhS.js";import{u as bn}from"./index-DDipQFQp.js";import{i as Rt,c as jn,a as Fn,b as Fi,d as Li,l as on,e as Di,s as Xi,m as Gi,f as Vi}from"./linear-Cl5vGKe1.js";import{a as Yi}from"./liquidity-C80wvFzz.js";import{u as Hi}from"./usePreviousValue-D4m5LJZe.js";import{A as Ln}from"./ActionButton-CAHJhAqM.js";import{H as Wi}from"./HTextLabelBox-DVxTk_Ir.js";import{V as Ui}from"./VTextLabelBox-hTKeBwlM.js";import{u as Ki}from"./useToken-BlS8b5ft.js";var Dn=180/Math.PI,an={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zr(t,e,n,r,i,s){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Dn,skewX:Math.atan(u)*Dn,scaleX:o,scaleY:l}}var ce;function Zi(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?an:zr(e.a,e.b,e.c,e.d,e.e,e.f)}function Qi(t){return t==null||(ce||(ce=document.createElementNS("http://www.w3.org/2000/svg","g")),ce.setAttribute("transform",t),!(t=ce.transform.baseVal.consolidate()))?an:(t=t.matrix,zr(t.a,t.b,t.c,t.d,t.e,t.f))}function Br(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function s(a,h,f,c,d,w){if(a!==f||h!==c){var v=d.push("translate(",null,e,null,n);w.push({i:v-4,x:Rt(a,f)},{i:v-2,x:Rt(h,c)})}else(f||c)&&d.push("translate("+f+e+c+n)}function o(a,h,f,c){a!==h?(a-h>180?h+=360:h-a>180&&(a+=360),c.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Rt(a,h)})):h&&f.push(i(f)+"rotate("+h+r)}function l(a,h,f,c){a!==h?c.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Rt(a,h)}):h&&f.push(i(f)+"skewX("+h+r)}function u(a,h,f,c,d,w){if(a!==f||h!==c){var v=d.push(i(d)+"scale(",null,",",null,")");w.push({i:v-4,x:Rt(a,f)},{i:v-2,x:Rt(h,c)})}else(f!==1||c!==1)&&d.push(i(d)+"scale("+f+","+c+")")}return function(a,h){var f=[],c=[];return a=t(a),h=t(h),s(a.translateX,a.translateY,h.translateX,h.translateY,f,c),o(a.rotate,h.rotate,f,c),l(a.skewX,h.skewX,f,c),u(a.scaleX,a.scaleY,h.scaleX,h.scaleY,f,c),a=h=null,function(d){for(var w=-1,v=c.length,g;++w<v;)f[(g=c[w]).i]=g.x(d);return f.join("")}}}var Ji=Br(Zi,"px, ","px)","deg)"),ts=Br(Qi,", ",")",")"),es=1e-12;function Xn(t){return((t=Math.exp(t))+1/t)/2}function ns(t){return((t=Math.exp(t))-1/t)/2}function rs(t){return((t=Math.exp(2*t))-1)/(t+1)}const is=function t(e,n,r){function i(s,o){var l=s[0],u=s[1],a=s[2],h=o[0],f=o[1],c=o[2],d=h-l,w=f-u,v=d*d+w*w,g,p;if(v<es)p=Math.log(c/a)/e,g=function(N){return[l+N*d,u+N*w,a*Math.exp(e*N*p)]};else{var _=Math.sqrt(v),y=(c*c-a*a+r*v)/(2*a*n*_),k=(c*c-a*a-r*v)/(2*c*n*_),S=Math.log(Math.sqrt(y*y+1)-y),b=Math.log(Math.sqrt(k*k+1)-k);p=(b-S)/e,g=function(N){var M=N*p,q=Xn(S),B=a/(n*_)*(q*rs(e*M+S)-ns(S));return[l+B*d,u+B*w,a*q/Xn(e*M+S)]}}return g.duration=p*1e3*e/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return t(o,l,u)},i}(Math.SQRT2,2,4),ss=(t,e)=>({lowerTickData:{},setLowerTickData:n=>{t(()=>({lowerTickData:n}))},upperTickData:{},setUpperTickData:n=>{t(()=>({upperTickData:n}))},tickDataLoading:!0,setTickDataLoading:n=>{t(()=>({tickDataLoading:n}))}}),Or=Ir(ss);function os(t,e,n){const r=Math.abs(t)%e;return r?t>0?r>e/2||n&&e<=2?t+e-r:t-r:r>e/2?t-e+r:t+r:n?t+e:t}function as(){const{lowerTickData:t,setLowerTickData:e,upperTickData:n,setUpperTickData:r}=Or(),i=(c,d,w)=>{const v=w.tokenA.decimals,g=w.tokenB.decimals;let p;Math.abs(c)==Math.abs(Tt.getMinIndex(Number(w.tickSpacing)))?p=d==="lower"?"0":"∞":p=ot.tickIndexToPrice(c,v,g).toString();const _=p==="∞"?"∞":$t(p,6),y=De(p),k=y==="∞"?"∞":$t(y,6),S={id:d,tokenA:w.tokenA,tokenB:w.tokenB,tick:c,price:p,displayPrice:_,reversePrice:y,displayReversePrice:k,tickSpacing:w.tickSpacing,pool:w.poolAddress};d==="lower"?e({...S}):r({...S})},s=(c,d,w)=>{i(c,"lower",w),i(d,"upper",w)},o=(c,d)=>{const w=c==null?void 0:c.tokenA,v=c==null?void 0:c.tokenB,g=c.tick,p=c.tickSpacing;if(!w||!v||!p)return;const _=d==="Add"?F(g).add(p).toNumber():F(g).sub(p).toNumber();if(F(_).gt(Tt.getMaxIndex(Number(c.tickSpacing)))||F(_).lt(Tt.getMinIndex(Number(c.tickSpacing))))return;const y=ot.tickIndexToPrice(_,w.decimals,v.decimals).toString(),k=y==="∞"?"∞":$t(y,6);if(k===c.displayPrice)o({...c,tick:_},d);else{const S=De(y),b=S==="∞"?"∞":$t(S,6),N={...c,tick:_,price:y,displayPrice:k,reversePrice:S,displayReversePrice:b};c.id==="lower"?e({...N}):r({...N})}};return{handleSetTickData:i,handleAddPrice:c=>{o(c,"Add")},handleSubPrice:c=>{o(c,"Sub")},handleSetFullRange:c=>{const d={...t,tick:Tt.getMinIndex(Number(c.tickSpacing)),price:"0",displayPrice:"0",reversePrice:"∞",displayReversePrice:"∞"};e(d);const w={...n,tick:Tt.getMaxIndex(Number(c.tickSpacing)),price:"∞",displayPrice:"∞",reversePrice:"0",displayReversePrice:"0"};r(w)},handleInitTickData:s,setTickDataBasedOnPrice:(c,d,w)=>{const v=c.tokenA,g=c.tokenB;if(!v||!g)return;let p,_="";if(d==="∞"||d==="Infinity")p=Tt.getMaxIndex(Number(c.tickSpacing)),_="∞";else if(F(d).equals(0))p=Tt.getMinIndex(Number(c.tickSpacing)),_="0";else if(F(d).gt(0)){const N=ot.priceToTickIndex(F(d),v.decimals,g.decimals),M=!(w&&c.id==="lower"||!w&&c.id==="upper");p=os(Number(N),Number(c.tickSpacing),typeof w=="boolean"?M:void 0),_=ot.tickIndexToPrice(Number(p),v.decimals,g.decimals).toString()}const y=_==="∞"?"∞":$t(_,6),k=De(_),S=k==="∞"?"∞":$t(k,6),b={...c,tick:p,price:_,displayPrice:y,reversePrice:k,displayReversePrice:S};c.id==="lower"?e({...b}):r({...b})},handleResetRange:()=>{e({}),r({})}}}const cs=(t,e)=>({formatPriceData:[],setFormatPriceData:n=>{t(()=>({formatPriceData:n,formatPriceDataIsLoading:!1}))},formatPriceDataIsLoading:!0,setFormatPriceDataIsLoading:n=>{t(()=>({formatPriceDataIsLoading:n}))},ticksPool:{},setTicksPool:n=>{t(()=>({ticksPool:n}))}}),Sn=Ir(cs);function Ge(t,e,n,r,i,s){var u,a,h;let o={...n},l=[];for(let f=i+(s?1:-1);s?f<r.length:f>=0;s?f++:f--){const c=Number((u=r[f])==null?void 0:u.tick),d=ot.tickIndexToPrice(c,t.decimals,e.decimals),w={liquidityActive:o.liquidityActive,tick:c,liquidityNet:BigInt(((a=r[f])==null?void 0:a.liquidityNet)??""),price0:d.toString()};s?w.liquidityActive=BigInt(F(o.liquidityActive.toString()).add(((h=r[f])==null?void 0:h.liquidityNet)??0).toString()):!s&&!F(o.liquidityNet.toString()).eq("0")&&(w.liquidityActive=BigInt(F(o.liquidityActive.toString()).sub(o.liquidityNet.toString()).toString())),l.push(w),o=w}return s||(l=l.reverse()),l}const us=(t,e)=>(t||t===0)&&e&&Xe[e]?Math.floor(t/Xe[e])*Xe[e]:void 0;function ls(){const{fetchByApi:t}=Pi(),{clmmSdk:e}=$r(),{setFormatPriceData:n,setFormatPriceDataIsLoading:r,setTicksPool:i}=Sn(),s=async a=>{var d;const{poolAddress:h,tokenA:f,tokenB:c}=a;try{const v=await t("/router_v2/ticks","GET",{address:h,orderBy:"index",limit:1e3});return{ticks:((d=v==null?void 0:v.list)==null?void 0:d.sort((_,y)=>_.index-y.index)).map(_=>({tick:_.index,sqrtPrice:_.sqrt_price,liquidityNet:_.liquidity_net,liquidityGross:_.liquidity_gross})),address:v==null?void 0:v.address,ticksPoolInfo:v==null?void 0:v.pool}}catch{const v=await e.Pool.fetchTicks({pool_id:h,coinTypeA:f.coin_type,coinTypeB:c.coin_type}),g=[];if(v&&(v==null?void 0:v.length)>0){const p=Mi(v);p==null||p.forEach(_=>{g.push({tick:Number(_.index),liquidityNet:F(_.liquidityNet.toString()).toString(),liquidityGross:_.liquidityGross.toString(),id:_.objectId})})}return{ticks:g,address:h}}},o=a=>{var L,m,T,x,A;const{poolAddress:h,tokenA:f,tokenB:c,tickSpacing:d,currentTickIndex:w,feeRate:v,ticks:g,ticksPool:p}=a;if(!v||!d)return;const _=(p==null?void 0:p.current_tick_index)||w,y=us(_,v);if(y===void 0)return;const k=JSON.parse(JSON.stringify(g)).sort((R,C)=>R-C),S=(p==null?void 0:p.liquidity)||a.liquidity;if(k.length===0)return{activeTick:y,data:[{liquidityActive:BigInt(S??0),tick:y,liquidityNet:0n,price0:ot.tickIndexToPrice(y,f.decimals,c.decimals).toString()}]};if(k.length===2&&_>((L=k[0])==null?void 0:L.tick)&&_<k[1].tick)return{activeTick:y,data:[{...k[0],liquidityActive:k[0].liquidityNet,price0:ot.tickIndexToPrice(k[0].tick,f.decimals,c.decimals).toString()},{liquidityActive:BigInt(S??0),tick:y,liquidityNet:0n,price0:ot.tickIndexToPrice(y,f.decimals,c.decimals).toString()},{...k[1],liquidityActive:k[0].liquidityNet,price0:ot.tickIndexToPrice(k[1].tick,f.decimals,c.decimals).toString()}]};const b=g.findIndex(({tick:R})=>R&&R>y)-1;if(g.findIndex(({tick:R})=>R&&R>=y),b<0){const R=Ge(f,c,{liquidityActive:BigInt(S??0),tick:y,liquidityNet:0n,price0:ot.tickIndexToPrice(y,f.decimals,c.decimals).toString()},k,-1,!0);return{activeTick:y,data:[...R]}}const N=ot.tickIndexToPrice(y,f.decimals,c.decimals),M={liquidityActive:BigInt(S??0),tick:y,liquidityNet:Number((m=g[b])==null?void 0:m.tick)===y?BigInt(((T=g[b])==null?void 0:T.liquidityNet)??0):BigInt(0),price0:N.toString()},q=Ge(f,c,M,k,b,!0),B=Ge(f,c,M,k,b,!1),$={liquidityActive:BigInt(S??0),tick:w,liquidityNet:Number((x=g[b])==null?void 0:x.tick)===y?BigInt(((A=g[b])==null?void 0:A.liquidityNet)??0):BigInt(0),price0:ot.tickIndexToPrice(w,f.decimals,c.decimals).toString()},z=Number(w)<Number(y)?B.concat($).concat(M).concat(q):B.concat(M).concat($).concat(q);return{activeTick:y,data:z}},l=a=>{if(!a||!(a!=null&&a.length))return[];const h=[];for(let f=0;f<a.length;f++){const c=a[f],d={depth:parseFloat(c.liquidityActive.toString()),price:parseFloat(c.price0)};d.depth>=0&&h.push(d)}return h},u=async a=>{const{tokenA:h,tokenB:f}=a;r(!0);try{const c=await s(a),d=o({...a,ticks:(c==null?void 0:c.ticks)||[],ticksPool:c==null?void 0:c.ticksPoolInfo}),w=l(d==null?void 0:d.data),v=c!=null&&c.ticksPoolInfo?c==null?void 0:c.ticksPoolInfo:{current_sqrt_price:"",current_tick_index:a.currentTickIndex,id:a.poolAddress,liquidity:a.liquidity},g=ot.tickIndexToPrice(v.current_tick_index,h.decimals,f.decimals).toString();v.price=g,v.reversePrice=F(1).div(g).toString(),i({...v}),n(w)}catch{i({}),n([])}};return j.useEffect(()=>()=>{r(!0),n([])},[]),{getFormattedData:u}}function fs(t){return t}var hs=3,Gn=1e-6;function ds(t){return"translate("+t+",0)"}function ps(t){return e=>+t(e)}function ms(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function gs(){return!this.__axis}function ys(t,e){var n=[],r=null,i=null,s=6,o=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,a=1,h="y",f=ds;function c(d){var w=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):fs),g=Math.max(s,0)+l,p=e.range(),_=+p[0]+u,y=+p[p.length-1]+u,k=(e.bandwidth?ms:ps)(e.copy(),u),S=d.selection?d.selection():d,b=S.selectAll(".domain").data([null]),N=S.selectAll(".tick").data(w,e).order(),M=N.exit(),q=N.enter().append("g").attr("class","tick"),B=N.select("line"),$=N.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),N=N.merge(q),B=B.merge(q.append("line").attr("stroke","currentColor").attr(h+"2",a*s)),$=$.merge(q.append("text").attr("fill","currentColor").attr(h,a*g).attr("dy","0.71em")),d!==S&&(b=b.transition(d),N=N.transition(d),B=B.transition(d),$=$.transition(d),M=M.transition(d).attr("opacity",Gn).attr("transform",function(z){return isFinite(z=k(z))?f(z+u):this.getAttribute("transform")}),q.attr("opacity",Gn).attr("transform",function(z){var L=this.parentNode.__axis;return f((L&&isFinite(L=L(z))?L:k(z))+u)})),M.remove(),b.attr("d",o?"M"+_+","+a*o+"V"+u+"H"+y+"V"+a*o:"M"+_+","+u+"H"+y),N.attr("opacity",1).attr("transform",function(z){return f(k(z)+u)}),B.attr(h+"2",a*s),$.attr(h,a*g).text(v),S.filter(gs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),S.each(function(){this.__axis=k})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),c):r&&r.slice()},c.tickFormat=function(d){return arguments.length?(i=d,c):i},c.tickSize=function(d){return arguments.length?(s=o=+d,c):s},c.tickSizeInner=function(d){return arguments.length?(s=+d,c):s},c.tickSizeOuter=function(d){return arguments.length?(o=+d,c):o},c.tickPadding=function(d){return arguments.length?(l=+d,c):l},c.offset=function(d){return arguments.length?(u=+d,c):u},c}function vs(t){return ys(hs,t)}var _s={value:()=>{}};function Pe(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new he(n)}function he(t){this._=t}function ws(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}he.prototype=Pe.prototype={constructor:he,on:function(t,e){var n=this._,r=ws(t+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(t=r[s]).type)&&(i=xs(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(i=(t=r[s]).type)n[i]=Vn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Vn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new he(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function xs(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Vn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=_s,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var cn="http://www.w3.org/1999/xhtml";const Yn={svg:"http://www.w3.org/2000/svg",xhtml:cn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Me(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Yn.hasOwnProperty(e)?{space:Yn[e],local:t}:t}function ks(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===cn&&e.documentElement.namespaceURI===cn?e.createElement(t):e.createElementNS(n,t)}}function bs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qr(t){var e=Me(t);return(e.local?bs:ks)(e)}function Ss(){}function An(t){return t==null?Ss:function(){return this.querySelector(t)}}function As(t){typeof t!="function"&&(t=An(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=new Array(o),u,a,h=0;h<o;++h)(u=s[h])&&(a=t.call(u,u.__data__,h,s))&&("__data__"in u&&(a.__data__=u.__data__),l[h]=a);return new lt(r,this._parents)}function Ns(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Es(){return[]}function jr(t){return t==null?Es:function(){return this.querySelectorAll(t)}}function Ts(t){return function(){return Ns(t.apply(this,arguments))}}function Rs(t){typeof t=="function"?t=Ts(t):t=jr(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o=e[s],l=o.length,u,a=0;a<l;++a)(u=o[a])&&(r.push(t.call(u,u.__data__,a,o)),i.push(u));return new lt(r,i)}function Fr(t){return function(){return this.matches(t)}}function Lr(t){return function(e){return e.matches(t)}}var Cs=Array.prototype.find;function Ps(t){return function(){return Cs.call(this.children,t)}}function Ms(){return this.firstElementChild}function Is(t){return this.select(t==null?Ms:Ps(typeof t=="function"?t:Lr(t)))}var $s=Array.prototype.filter;function zs(){return Array.from(this.children)}function Bs(t){return function(){return $s.call(this.children,t)}}function Os(t){return this.selectAll(t==null?zs:Bs(typeof t=="function"?t:Lr(t)))}function qs(t){typeof t!="function"&&(t=Fr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,a=0;a<o;++a)(u=s[a])&&t.call(u,u.__data__,a,s)&&l.push(u);return new lt(r,this._parents)}function Dr(t){return new Array(t.length)}function js(){return new lt(this._enter||this._groups.map(Dr),this._parents)}function xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xe.prototype={constructor:xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Fs(t){return function(){return t}}function Ls(t,e,n,r,i,s){for(var o=0,l,u=e.length,a=s.length;o<a;++o)(l=e[o])?(l.__data__=s[o],r[o]=l):n[o]=new xe(t,s[o]);for(;o<u;++o)(l=e[o])&&(i[o]=l)}function Ds(t,e,n,r,i,s,o){var l,u,a=new Map,h=e.length,f=s.length,c=new Array(h),d;for(l=0;l<h;++l)(u=e[l])&&(c[l]=d=o.call(u,u.__data__,l,e)+"",a.has(d)?i[l]=u:a.set(d,u));for(l=0;l<f;++l)d=o.call(t,s[l],l,s)+"",(u=a.get(d))?(r[l]=u,u.__data__=s[l],a.delete(d)):n[l]=new xe(t,s[l]);for(l=0;l<h;++l)(u=e[l])&&a.get(c[l])===u&&(i[l]=u)}function Xs(t){return t.__data__}function Gs(t,e){if(!arguments.length)return Array.from(this,Xs);var n=e?Ds:Ls,r=this._parents,i=this._groups;typeof t!="function"&&(t=Fs(t));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),a=0;a<s;++a){var h=r[a],f=i[a],c=f.length,d=Vs(t.call(h,h&&h.__data__,a,r)),w=d.length,v=l[a]=new Array(w),g=o[a]=new Array(w),p=u[a]=new Array(c);n(h,f,v,g,p,d,e);for(var _=0,y=0,k,S;_<w;++_)if(k=v[_]){for(_>=y&&(y=_+1);!(S=g[y])&&++y<w;);k._next=S||null}}return o=new lt(o,r),o._enter=l,o._exit=u,o}function Vs(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ys(){return new lt(this._exit||this._groups.map(Dr),this._parents)}function Hs(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ws(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var a=n[u],h=r[u],f=a.length,c=l[u]=new Array(f),d,w=0;w<f;++w)(d=a[w]||h[w])&&(c[w]=d);for(;u<i;++u)l[u]=n[u];return new lt(l,this._parents)}function Us(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Ks(t){t||(t=Zs);function e(f,c){return f&&c?t(f.__data__,c.__data__):!f-!c}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),a,h=0;h<l;++h)(a=o[h])&&(u[h]=a);u.sort(e)}return new lt(i,this._parents).order()}function Zs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Js(){return Array.from(this)}function to(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function eo(){let t=0;for(const e of this)++t;return t}function no(){return!this.node()}function ro(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&t.call(l,l.__data__,s,i);return this}function io(t){return function(){this.removeAttribute(t)}}function so(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oo(t,e){return function(){this.setAttribute(t,e)}}function ao(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function co(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function uo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function lo(t,e){var n=Me(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?so:io:typeof e=="function"?n.local?uo:co:n.local?ao:oo)(n,e))}function Xr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fo(t){return function(){this.style.removeProperty(t)}}function ho(t,e,n){return function(){this.style.setProperty(t,e,n)}}function po(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function mo(t,e,n){return arguments.length>1?this.each((e==null?fo:typeof e=="function"?po:ho)(t,e,n??"")):Ft(this.node(),t)}function Ft(t,e){return t.style.getPropertyValue(e)||Xr(t).getComputedStyle(t,null).getPropertyValue(e)}function go(t){return function(){delete this[t]}}function yo(t,e){return function(){this[t]=e}}function vo(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function _o(t,e){return arguments.length>1?this.each((e==null?go:typeof e=="function"?vo:yo)(t,e)):this.node()[t]}function Gr(t){return t.trim().split(/^|\s+/)}function Nn(t){return t.classList||new Vr(t)}function Vr(t){this._node=t,this._names=Gr(t.getAttribute("class")||"")}Vr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yr(t,e){for(var n=Nn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Hr(t,e){for(var n=Nn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function wo(t){return function(){Yr(this,t)}}function xo(t){return function(){Hr(this,t)}}function ko(t,e){return function(){(e.apply(this,arguments)?Yr:Hr)(this,t)}}function bo(t,e){var n=Gr(t+"");if(arguments.length<2){for(var r=Nn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ko:e?wo:xo)(n,e))}function So(){this.textContent=""}function Ao(t){return function(){this.textContent=t}}function No(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Eo(t){return arguments.length?this.each(t==null?So:(typeof t=="function"?No:Ao)(t)):this.node().textContent}function To(){this.innerHTML=""}function Ro(t){return function(){this.innerHTML=t}}function Co(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Po(t){return arguments.length?this.each(t==null?To:(typeof t=="function"?Co:Ro)(t)):this.node().innerHTML}function Mo(){this.nextSibling&&this.parentNode.appendChild(this)}function Io(){return this.each(Mo)}function $o(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zo(){return this.each($o)}function Bo(t){var e=typeof t=="function"?t:qr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Oo(){return null}function qo(t,e){var n=typeof t=="function"?t:qr(t),r=e==null?Oo:typeof e=="function"?e:An(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function jo(){var t=this.parentNode;t&&t.removeChild(this)}function Fo(){return this.each(jo)}function Lo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Do(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Xo(t){return this.select(t?Do:Lo)}function Go(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Vo(t){return function(e){t.call(this,e,this.__data__)}}function Yo(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ho(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Wo(t,e,n){return function(){var r=this.__on,i,s=Vo(e);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Uo(t,e,n){var r=Yo(t+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,h;u<a;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=e?Wo:Ho,i=0;i<s;++i)this.each(l(r[i],e,n));return this}function Wr(t,e,n){var r=Xr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ko(t,e){return function(){return Wr(this,t,e)}}function Zo(t,e){return function(){return Wr(this,t,e.apply(this,arguments))}}function Qo(t,e){return this.each((typeof e=="function"?Zo:Ko)(t,e))}function*Jo(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Ur=[null];function lt(t,e){this._groups=t,this._parents=e}function oe(){return new lt([[document.documentElement]],Ur)}function ta(){return this}lt.prototype=oe.prototype={constructor:lt,select:As,selectAll:Rs,selectChild:Is,selectChildren:Os,filter:qs,data:Gs,enter:js,exit:Ys,join:Hs,merge:Ws,selection:ta,order:Us,sort:Ks,call:Qs,nodes:Js,node:to,size:eo,empty:no,each:ro,attr:lo,style:mo,property:_o,classed:bo,text:Eo,html:Po,raise:Io,lower:zo,append:Bo,insert:qo,remove:Fo,clone:Xo,datum:Go,on:Uo,dispatch:Qo,[Symbol.iterator]:Jo};function Q(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Ur)}function ea(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wt(t,e){if(t=ea(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const un={capture:!0,passive:!1};function ln(t){t.preventDefault(),t.stopImmediatePropagation()}function Kr(t){var e=t.document.documentElement,n=Q(t).on("dragstart.drag",ln,un);"onselectstart"in e?n.on("selectstart.drag",ln,un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zr(t,e){var n=t.document.documentElement,r=Q(t).on("dragstart.drag",null);e&&(r.on("click.drag",ln,un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Lt=0,Qt=0,Ut=0,Qr=1e3,ke,Jt,be=0,It=0,Ie=0,ie=typeof performance=="object"&&performance.now?performance:Date,Jr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function En(){return It||(Jr(na),It=ie.now()+Ie)}function na(){It=0}function Se(){this._call=this._time=this._next=null}Se.prototype=ti.prototype={constructor:Se,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?En():+n)+(e==null?0:+e),!this._next&&Jt!==this&&(Jt?Jt._next=this:ke=this,Jt=this),this._call=t,this._time=n,fn()},stop:function(){this._call&&(this._call=null,this._time=1/0,fn())}};function ti(t,e,n){var r=new Se;return r.restart(t,e,n),r}function ra(){En(),++Lt;for(var t=ke,e;t;)(e=It-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Lt}function Hn(){It=(be=ie.now())+Ie,Lt=Qt=0;try{ra()}finally{Lt=0,sa(),It=0}}function ia(){var t=ie.now(),e=t-be;e>Qr&&(Ie-=e,be=t)}function sa(){for(var t,e=ke,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ke=n);Jt=t,fn(r)}function fn(t){if(!Lt){Qt&&(Qt=clearTimeout(Qt));var e=t-It;e>24?(t<1/0&&(Qt=setTimeout(Hn,t-ie.now()-Ie)),Ut&&(Ut=clearInterval(Ut))):(Ut||(be=ie.now(),Ut=setInterval(ia,Qr)),Lt=1,Jr(Hn))}}function Wn(t,e,n){var r=new Se;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var oa=Pe("start","end","cancel","interrupt"),aa=[],ei=0,Un=1,hn=2,de=3,Kn=4,dn=5,pe=6;function $e(t,e,n,r,i,s){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;ca(t,n,{name:e,index:r,group:i,on:oa,tween:aa,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ei})}function Tn(t,e){var n=pt(t,e);if(n.state>ei)throw new Error("too late; already scheduled");return n}function gt(t,e){var n=pt(t,e);if(n.state>de)throw new Error("too late; already running");return n}function pt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ca(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ti(s,0,n.time);function s(a){n.state=Un,n.timer.restart(o,n.delay,n.time),n.delay<=a&&o(a-n.delay)}function o(a){var h,f,c,d;if(n.state!==Un)return u();for(h in r)if(d=r[h],d.name===n.name){if(d.state===de)return Wn(o);d.state===Kn?(d.state=pe,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[h]):+h<e&&(d.state=pe,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[h])}if(Wn(function(){n.state===de&&(n.state=Kn,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=hn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===hn){for(n.state=de,i=new Array(c=n.tween.length),h=0,f=-1;h<c;++h)(d=n.tween[h].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function l(a){for(var h=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=dn,1),f=-1,c=i.length;++f<c;)i[f].call(t,h);n.state===dn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=pe,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function jt(t,e){var n=t.__transition,r,i,s=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((r=n[o]).name!==e){s=!1;continue}i=r.state>hn&&r.state<dn,r.state=pe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[o]}s&&delete t.__transition}}function ua(t){return this.each(function(){jt(this,t)})}function la(t,e){var n,r;return function(){var i=gt(this,t),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===e){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function fa(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=gt(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}s.tween=i}}function ha(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===t)return o.value;return null}return this.each((e==null?la:fa)(n,t,e))}function Rn(t,e,n){var r=t._id;return t.each(function(){var i=gt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return pt(i,r).value[e]}}function ni(t,e){var n;return(typeof e=="number"?Rt:e instanceof jn?Fn:(n=jn(e))?(e=n,Fn):Fi)(t,e)}function da(t){return function(){this.removeAttribute(t)}}function pa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ma(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttribute(t);return o===i?null:o===r?s:s=e(r=o,n)}}function ga(t,e,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(t.space,t.local);return o===i?null:o===r?s:s=e(r=o,n)}}function ya(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function va(t,e,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l)))}}function _a(t,e){var n=Me(t),r=n==="transform"?ts:ni;return this.attrTween(t,typeof e=="function"?(n.local?va:ya)(n,r,Rn(this,"attr."+t,e)):e==null?(n.local?pa:da)(n):(n.local?ga:ma)(n,r,e))}function wa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xa(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ka(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&xa(t,s)),n}return i._value=e,i}function ba(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&wa(t,s)),n}return i._value=e,i}function Sa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Me(t);return this.tween(n,(r.local?ka:ba)(r,e))}function Aa(t,e){return function(){Tn(this,t).delay=+e.apply(this,arguments)}}function Na(t,e){return e=+e,function(){Tn(this,t).delay=e}}function Ea(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Aa:Na)(e,t)):pt(this.node(),e).delay}function Ta(t,e){return function(){gt(this,t).duration=+e.apply(this,arguments)}}function Ra(t,e){return e=+e,function(){gt(this,t).duration=e}}function Ca(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ta:Ra)(e,t)):pt(this.node(),e).duration}function Pa(t,e){if(typeof e!="function")throw new Error;return function(){gt(this,t).ease=e}}function Ma(t){var e=this._id;return arguments.length?this.each(Pa(e,t)):pt(this.node(),e).ease}function Ia(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;gt(this,t).ease=n}}function $a(t){if(typeof t!="function")throw new Error;return this.each(Ia(this._id,t))}function za(t){typeof t!="function"&&(t=Fr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],o=s.length,l=r[i]=[],u,a=0;a<o;++a)(u=s[a])&&t.call(u,u.__data__,a,s)&&l.push(u);return new bt(r,this._parents,this._name,this._id)}function Ba(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=e[l],a=n[l],h=u.length,f=o[l]=new Array(h),c,d=0;d<h;++d)(c=u[d]||a[d])&&(f[d]=c);for(;l<r;++l)o[l]=e[l];return new bt(o,this._parents,this._name,this._id)}function Oa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function qa(t,e,n){var r,i,s=Oa(e)?Tn:gt;return function(){var o=s(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}function ja(t,e){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(t):this.each(qa(n,t,e))}function Fa(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function La(){return this.on("end.remove",Fa(this._id))}function Da(t){var e=this._name,n=this._id;typeof t!="function"&&(t=An(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,a=s[o]=new Array(u),h,f,c=0;c<u;++c)(h=l[c])&&(f=t.call(h,h.__data__,c,l))&&("__data__"in h&&(f.__data__=h.__data__),a[c]=f,$e(a[c],e,n,c,a,pt(h,n)));return new bt(s,this._parents,e,n)}function Xa(t){var e=this._name,n=this._id;typeof t!="function"&&(t=jr(t));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],a=u.length,h,f=0;f<a;++f)if(h=u[f]){for(var c=t.call(h,h.__data__,f,u),d,w=pt(h,n),v=0,g=c.length;v<g;++v)(d=c[v])&&$e(d,e,n,v,c,w);s.push(c),o.push(h)}return new bt(s,o,e,n)}var Ga=oe.prototype.constructor;function Va(){return new Ga(this._groups,this._parents)}function Ya(t,e){var n,r,i;return function(){var s=Ft(this,t),o=(this.style.removeProperty(t),Ft(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}function ri(t){return function(){this.style.removeProperty(t)}}function Ha(t,e,n){var r,i=n+"",s;return function(){var o=Ft(this,t);return o===i?null:o===r?s:s=e(r=o,n)}}function Wa(t,e,n){var r,i,s;return function(){var o=Ft(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Ft(this,t))),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,l))}}function Ua(t,e){var n,r,i,s="style."+e,o="end."+s,l;return function(){var u=gt(this,t),a=u.on,h=u.value[s]==null?l||(l=ri(e)):void 0;(a!==n||i!==h)&&(r=(n=a).copy()).on(o,i=h),u.on=r}}function Ka(t,e,n){var r=(t+="")=="transform"?Ji:ni;return e==null?this.styleTween(t,Ya(t,r)).on("end.style."+t,ri(t)):typeof e=="function"?this.styleTween(t,Wa(t,r,Rn(this,"style."+t,e))).each(Ua(this._id,t)):this.styleTween(t,Ha(t,r,e),n).on("end.style."+t,null)}function Za(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Qa(t,e,n){var r,i;function s(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&Za(t,o,n)),r}return s._value=e,s}function Ja(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Qa(t,e,n??""))}function tc(t){return function(){this.textContent=t}}function ec(t){return function(){var e=t(this);this.textContent=e??""}}function nc(t){return this.tween("text",typeof t=="function"?ec(Rn(this,"text",t)):tc(t==null?"":t+""))}function rc(t){return function(e){this.textContent=t.call(this,e)}}function ic(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&rc(i)),e}return r._value=t,r}function sc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ic(t))}function oc(){for(var t=this._name,e=this._id,n=ii(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,a=0;a<l;++a)if(u=o[a]){var h=pt(u,e);$e(u,t,n,a,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new bt(r,this._parents,t,n)}function ac(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var a=gt(this,r),h=a.on;h!==t&&(e=(t=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&s()})}var cc=0;function bt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ii(){return++cc}var vt=oe.prototype;bt.prototype={constructor:bt,select:Da,selectAll:Xa,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:za,merge:Ba,selection:Va,transition:oc,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:ja,attr:_a,attrTween:Sa,style:Ka,styleTween:Ja,text:nc,textTween:sc,remove:La,tween:ha,delay:Ea,duration:Ca,ease:Ma,easeVarying:$a,end:ac,[Symbol.iterator]:vt[Symbol.iterator]};function uc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var lc={time:null,delay:0,duration:250,ease:uc};function fc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function hc(t){var e,n;t instanceof bt?(e=t._id,t=t._name):(e=ii(),(n=lc).time=En(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,a=0;a<l;++a)(u=o[a])&&$e(u,t,e,a,o,n||fc(u,e));return new bt(r,this._parents,t,e)}oe.prototype.interrupt=ua;oe.prototype.transition=hc;const Ve=t=>()=>t;function dc(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function pc(t){t.stopImmediatePropagation()}function Ye(t){t.preventDefault(),t.stopImmediatePropagation()}var Zn={name:"drag"},He={name:"space"},zt={name:"handle"},Bt={name:"center"};const{abs:Qn,max:it,min:st}=Math;function Jn(t){return[+t[0],+t[1]]}function tr(t){return[Jn(t[0]),Jn(t[1])]}var me={name:"x",handles:["w","e"].map(Ae),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},We={name:"y",handles:["n","s"].map(Ae),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},_t={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},er={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},nr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},mc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},gc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ae(t){return{type:t}}function yc(t){return!t.ctrlKey&&!t.button}function vc(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function _c(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ue(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function wc(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function xc(){return kc(me)}function kc(t){var e=vc,n=yc,r=_c,i=!0,s=Pe("start","brush","end"),o=6,l;function u(g){var p=g.property("__brush",v).selectAll(".overlay").data([Ae("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_t.overlay).merge(p).each(function(){var y=Ue(this).extent;Q(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([Ae("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_t.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=g.selectAll(".handle").data(t.handles,function(y){return y.type});_.exit().remove(),_.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return _t[y.type]}),g.each(a).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(r).on("touchstart.brush",c).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,p,_){g.tween?g.on("start.brush",function(y){h(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){h(this,arguments).end(y)}).tween("brush",function(){var y=this,k=y.__brush,S=h(y,arguments),b=k.selection,N=t.input(typeof p=="function"?p.apply(this,arguments):p,k.extent),M=Li(b,N);function q(B){k.selection=B===1&&N===null?null:M(B),a.call(y),S.brush()}return b!==null&&N!==null?q:q(1)}):g.each(function(){var y=this,k=arguments,S=y.__brush,b=t.input(typeof p=="function"?p.apply(y,k):p,S.extent),N=h(y,k).beforestart();jt(y),S.selection=b===null?null:b,a.call(y),N.start(_).brush(_).end(_)})},u.clear=function(g,p){u.move(g,null,p)};function a(){var g=Q(this),p=Ue(this).selection;p?(g.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?p[1][0]-o/2:p[0][0]-o/2}).attr("y",function(_){return _.type[0]==="s"?p[1][1]-o/2:p[0][1]-o/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?p[1][0]-p[0][0]+o:o}).attr("height",function(_){return _.type==="e"||_.type==="w"?p[1][1]-p[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function h(g,p,_){var y=g.__brush.emitter;return y&&(!_||!y.clean)?y:new f(g,p,_)}function f(g,p,_){this.that=g,this.args=p,this.state=g.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,p){return this.starting?(this.starting=!1,this.emit("start",g,p)):this.emit("brush",g),this},brush:function(g,p){return this.emit("brush",g,p),this},end:function(g,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,p)),this},emit:function(g,p,_){var y=Q(this.that).datum();s.call(g,this.that,new dc(g,{sourceEvent:p,target:u,selection:t.output(this.state.selection),mode:_,dispatch:s}),y)}};function c(g){if(l&&!g.touches||!n.apply(this,arguments))return;var p=this,_=g.target.__data__.type,y=(i&&g.metaKey?_="overlay":_)==="selection"?Zn:i&&g.altKey?Bt:zt,k=t===We?null:mc[_],S=t===me?null:gc[_],b=Ue(p),N=b.extent,M=b.selection,q=N[0][0],B,$,z=N[0][1],L,m,T=N[1][0],x,A,R=N[1][1],C,I,O=0,P=0,V,G=k&&S&&i&&g.shiftKey,W,Z,Y=Array.from(g.touches||[g],D=>{const tt=D.identifier;return D=wt(D,p),D.point0=D.slice(),D.identifier=tt,D});jt(p);var K=h(p,arguments,!0).beforestart();if(_==="overlay"){M&&(V=!0);const D=[Y[0],Y[1]||Y[0]];b.selection=M=[[B=t===We?q:st(D[0][0],D[1][0]),L=t===me?z:st(D[0][1],D[1][1])],[x=t===We?T:it(D[0][0],D[1][0]),C=t===me?R:it(D[0][1],D[1][1])]],Y.length>1&&Et(g)}else B=M[0][0],L=M[0][1],x=M[1][0],C=M[1][1];$=B,m=L,A=x,I=C;var nt=Q(p).attr("pointer-events","none"),yt=nt.selectAll(".overlay").attr("cursor",_t[_]);if(g.touches)K.moved=ht,K.ended=Bn;else{var Nt=Q(g.view).on("mousemove.brush",ht,!0).on("mouseup.brush",Bn,!0);i&&Nt.on("keydown.brush",Ri,!0).on("keyup.brush",Ci,!0),Kr(g.view)}a.call(p),K.start(g,y.name);function ht(D){for(const tt of D.changedTouches||[D])for(const Wt of Y)Wt.identifier===tt.identifier&&(Wt.cur=wt(tt,p));if(G&&!W&&!Z&&Y.length===1){const tt=Y[0];Qn(tt.cur[0]-tt[0])>Qn(tt.cur[1]-tt[1])?Z=!0:W=!0}for(const tt of Y)tt.cur&&(tt[0]=tt.cur[0],tt[1]=tt.cur[1]);V=!0,Ye(D),Et(D)}function Et(D){const tt=Y[0],Wt=tt.point0;var St;switch(O=tt[0]-Wt[0],P=tt[1]-Wt[1],y){case He:case Zn:{k&&(O=it(q-B,st(T-x,O)),$=B+O,A=x+O),S&&(P=it(z-L,st(R-C,P)),m=L+P,I=C+P);break}case zt:{Y[1]?(k&&($=it(q,st(T,Y[0][0])),A=it(q,st(T,Y[1][0])),k=1),S&&(m=it(z,st(R,Y[0][1])),I=it(z,st(R,Y[1][1])),S=1)):(k<0?(O=it(q-B,st(T-B,O)),$=B+O,A=x):k>0&&(O=it(q-x,st(T-x,O)),$=B,A=x+O),S<0?(P=it(z-L,st(R-L,P)),m=L+P,I=C):S>0&&(P=it(z-C,st(R-C,P)),m=L,I=C+P));break}case Bt:{k&&($=it(q,st(T,B-O*k)),A=it(q,st(T,x+O*k))),S&&(m=it(z,st(R,L-P*S)),I=it(z,st(R,C+P*S)));break}}A<$&&(k*=-1,St=B,B=x,x=St,St=$,$=A,A=St,_ in er&&yt.attr("cursor",_t[_=er[_]])),I<m&&(S*=-1,St=L,L=C,C=St,St=m,m=I,I=St,_ in nr&&yt.attr("cursor",_t[_=nr[_]])),b.selection&&(M=b.selection),W&&($=M[0][0],A=M[1][0]),Z&&(m=M[0][1],I=M[1][1]),(M[0][0]!==$||M[0][1]!==m||M[1][0]!==A||M[1][1]!==I)&&(b.selection=[[$,m],[A,I]],a.call(p),K.brush(D,y.name))}function Bn(D){if(pc(D),D.touches){if(D.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Zr(D.view,V),Nt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);nt.attr("pointer-events","all"),yt.attr("cursor",_t.overlay),b.selection&&(M=b.selection),wc(M)&&(b.selection=null,a.call(p)),K.end(D,y.name)}function Ri(D){switch(D.keyCode){case 16:{G=k&&S;break}case 18:{y===zt&&(k&&(x=A-O*k,B=$+O*k),S&&(C=I-P*S,L=m+P*S),y=Bt,Et(D));break}case 32:{(y===zt||y===Bt)&&(k<0?x=A-O:k>0&&(B=$-O),S<0?C=I-P:S>0&&(L=m-P),y=He,yt.attr("cursor",_t.selection),Et(D));break}default:return}Ye(D)}function Ci(D){switch(D.keyCode){case 16:{G&&(W=Z=G=!1,Et(D));break}case 18:{y===Bt&&(k<0?x=A:k>0&&(B=$),S<0?C=I:S>0&&(L=m),y=zt,Et(D));break}case 32:{y===He&&(D.altKey?(k&&(x=A-O*k,B=$+O*k),S&&(C=I-P*S,L=m+P*S),y=Bt):(k<0?x=A:k>0&&(B=$),S<0?C=I:S>0&&(L=m),y=zt),yt.attr("cursor",_t[_]),Et(D));break}default:return}Ye(D)}}function d(g){h(this,arguments).moved(g)}function w(g){h(this,arguments).ended(g)}function v(){var g=this.__brush||{selection:null};return g.extent=tr(e.apply(this,arguments)),g.dim=t,g}return u.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Ve(tr(g)),u):e},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Ve(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Ve(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const ue=t=>()=>t;function bc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return t===1?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cn=new kt(1,0,0);kt.prototype;function Ke(t){t.stopImmediatePropagation()}function Kt(t){t.preventDefault(),t.stopImmediatePropagation()}function Sc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ac(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function rr(){return this.__zoom||Cn}function Nc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ec(){return navigator.maxTouchPoints||"ontouchstart"in this}function Tc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Rc(){var t=Sc,e=Ac,n=Tc,r=Nc,i=Ec,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=is,a=Pe("start","zoom","end"),h,f,c,d=500,w=150,v=0,g=10;function p(m){m.property("__zoom",rr).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(m,T,x,A){var R=m.selection?m.selection():m;R.property("__zoom",rr),m!==R?S(m,T,x,A):R.interrupt().each(function(){b(this,arguments).event(A).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},p.scaleBy=function(m,T,x,A){p.scaleTo(m,function(){var R=this.__zoom.k,C=typeof T=="function"?T.apply(this,arguments):T;return R*C},x,A)},p.scaleTo=function(m,T,x,A){p.transform(m,function(){var R=e.apply(this,arguments),C=this.__zoom,I=x==null?k(R):typeof x=="function"?x.apply(this,arguments):x,O=C.invert(I),P=typeof T=="function"?T.apply(this,arguments):T;return n(y(_(C,P),I,O),R,o)},x,A)},p.translateBy=function(m,T,x,A){p.transform(m,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),o)},null,A)},p.translateTo=function(m,T,x,A,R){p.transform(m,function(){var C=e.apply(this,arguments),I=this.__zoom,O=A==null?k(C):typeof A=="function"?A.apply(this,arguments):A;return n(Cn.translate(O[0],O[1]).scale(I.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof x=="function"?-x.apply(this,arguments):-x),C,o)},A,R)};function _(m,T){return T=Math.max(s[0],Math.min(s[1],T)),T===m.k?m:new kt(T,m.x,m.y)}function y(m,T,x){var A=T[0]-x[0]*m.k,R=T[1]-x[1]*m.k;return A===m.x&&R===m.y?m:new kt(m.k,A,R)}function k(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function S(m,T,x,A){m.on("start.zoom",function(){b(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(A).end()}).tween("zoom",function(){var R=this,C=arguments,I=b(R,C).event(A),O=e.apply(R,C),P=x==null?k(O):typeof x=="function"?x.apply(R,C):x,V=Math.max(O[1][0]-O[0][0],O[1][1]-O[0][1]),G=R.__zoom,W=typeof T=="function"?T.apply(R,C):T,Z=u(G.invert(P).concat(V/G.k),W.invert(P).concat(V/W.k));return function(Y){if(Y===1)Y=W;else{var K=Z(Y),nt=V/K[2];Y=new kt(nt,P[0]-K[0]*nt,P[1]-K[1]*nt)}I.zoom(null,Y)}})}function b(m,T,x){return!x&&m.__zooming||new N(m,T)}function N(m,T){this.that=m,this.args=T,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,T),this.taps=0}N.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,T){return this.mouse&&m!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var T=Q(this.that).datum();a.call(m,this.that,new bc(m,{sourceEvent:this.sourceEvent,target:p,type:m,transform:this.that.__zoom,dispatch:a}),T)}};function M(m,...T){if(!t.apply(this,arguments))return;var x=b(this,T).event(m),A=this.__zoom,R=Math.max(s[0],Math.min(s[1],A.k*Math.pow(2,r.apply(this,arguments)))),C=wt(m);if(x.wheel)(x.mouse[0][0]!==C[0]||x.mouse[0][1]!==C[1])&&(x.mouse[1]=A.invert(x.mouse[0]=C)),clearTimeout(x.wheel);else{if(A.k===R)return;x.mouse=[C,A.invert(C)],jt(this),x.start()}Kt(m),x.wheel=setTimeout(I,w),x.zoom("mouse",n(y(_(A,R),x.mouse[0],x.mouse[1]),x.extent,o));function I(){x.wheel=null,x.end()}}function q(m,...T){if(c||!t.apply(this,arguments))return;var x=m.currentTarget,A=b(this,T,!0).event(m),R=Q(m.view).on("mousemove.zoom",P,!0).on("mouseup.zoom",V,!0),C=wt(m,x),I=m.clientX,O=m.clientY;Kr(m.view),Ke(m),A.mouse=[C,this.__zoom.invert(C)],jt(this),A.start();function P(G){if(Kt(G),!A.moved){var W=G.clientX-I,Z=G.clientY-O;A.moved=W*W+Z*Z>v}A.event(G).zoom("mouse",n(y(A.that.__zoom,A.mouse[0]=wt(G,x),A.mouse[1]),A.extent,o))}function V(G){R.on("mousemove.zoom mouseup.zoom",null),Zr(G.view,A.moved),Kt(G),A.event(G).end()}}function B(m,...T){if(t.apply(this,arguments)){var x=this.__zoom,A=wt(m.changedTouches?m.changedTouches[0]:m,this),R=x.invert(A),C=x.k*(m.shiftKey?.5:2),I=n(y(_(x,C),A,R),e.apply(this,T),o);Kt(m),l>0?Q(this).transition().duration(l).call(S,I,A,m):Q(this).call(p.transform,I,A,m)}}function $(m,...T){if(t.apply(this,arguments)){var x=m.touches,A=x.length,R=b(this,T,m.changedTouches.length===A).event(m),C,I,O,P;for(Ke(m),I=0;I<A;++I)O=x[I],P=wt(O,this),P=[P,this.__zoom.invert(P),O.identifier],R.touch0?!R.touch1&&R.touch0[2]!==P[2]&&(R.touch1=P,R.taps=0):(R.touch0=P,C=!0,R.taps=1+!!h);h&&(h=clearTimeout(h)),C&&(R.taps<2&&(f=P[0],h=setTimeout(function(){h=null},d)),jt(this),R.start())}}function z(m,...T){if(this.__zooming){var x=b(this,T).event(m),A=m.changedTouches,R=A.length,C,I,O,P;for(Kt(m),C=0;C<R;++C)I=A[C],O=wt(I,this),x.touch0&&x.touch0[2]===I.identifier?x.touch0[0]=O:x.touch1&&x.touch1[2]===I.identifier&&(x.touch1[0]=O);if(I=x.that.__zoom,x.touch1){var V=x.touch0[0],G=x.touch0[1],W=x.touch1[0],Z=x.touch1[1],Y=(Y=W[0]-V[0])*Y+(Y=W[1]-V[1])*Y,K=(K=Z[0]-G[0])*K+(K=Z[1]-G[1])*K;I=_(I,Math.sqrt(Y/K)),O=[(V[0]+W[0])/2,(V[1]+W[1])/2],P=[(G[0]+Z[0])/2,(G[1]+Z[1])/2]}else if(x.touch0)O=x.touch0[0],P=x.touch0[1];else return;x.zoom("touch",n(y(I,O,P),x.extent,o))}}function L(m,...T){if(this.__zooming){var x=b(this,T).event(m),A=m.changedTouches,R=A.length,C,I;for(Ke(m),c&&clearTimeout(c),c=setTimeout(function(){c=null},d),C=0;C<R;++C)I=A[C],x.touch0&&x.touch0[2]===I.identifier?delete x.touch0:x.touch1&&x.touch1[2]===I.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(I=wt(I,this),Math.hypot(f[0]-I[0],f[1]-I[1])<g)){var O=Q(this).on("dblclick.zoom");O&&O.apply(this,arguments)}}}return p.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:ue(+m),p):r},p.filter=function(m){return arguments.length?(t=typeof m=="function"?m:ue(!!m),p):t},p.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:ue(!!m),p):i},p.extent=function(m){return arguments.length?(e=typeof m=="function"?m:ue([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),p):e},p.scaleExtent=function(m){return arguments.length?(s[0]=+m[0],s[1]=+m[1],p):[s[0],s[1]]},p.translateExtent=function(m){return arguments.length?(o[0][0]=+m[0][0],o[1][0]=+m[1][0],o[0][1]=+m[0][1],o[1][1]=+m[1][1],p):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},p.constrain=function(m){return arguments.length?(n=m,p):n},p.duration=function(m){return arguments.length?(l=+m,p):l},p.interpolate=function(m){return arguments.length?(u=m,p):u},p.on=function(){var m=a.on.apply(a,arguments);return m===a?p:m},p.clickDistance=function(m){return arguments.length?(v=(m=+m)*m,p):Math.sqrt(v)},p.tapDistance=function(m){return arguments.length?(g=+m,p):g},p}var pn=(t=>(t.LOWEST="100",t.LOW="500",t.MEDIUM="2500",t.HIGH="10000",t))(pn||{}),rt=(t=>(t.LOWER="LOWER",t.UPPER="UPPER",t))(rt||{});const Cc={100:{initialMin:.99,initialMax:1.01,min:1e-5,max:1.5},500:{initialMin:.8,initialMax:1.25,min:1e-5,max:1.5},2500:{initialMin:.5,initialMax:1.5,min:1e-5,max:20},1e4:{initialMin:.5,initialMax:1.5,min:1e-5,max:20}};var at=function(){return at=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},at.apply(this,arguments)};function Ne(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var U="-ms-",ee="-moz-",H="-webkit-",si="comm",ze="rule",Pn="decl",Pc="@import",oi="@keyframes",Mc="@layer",ai=Math.abs,Mn=String.fromCharCode,mn=Object.assign;function Ic(t,e){return et(t,0)^45?(((e<<2^et(t,0))<<2^et(t,1))<<2^et(t,2))<<2^et(t,3):0}function ci(t){return t.trim()}function xt(t,e){return(t=e.exec(t))?t[0]:t}function X(t,e,n){return t.replace(e,n)}function ge(t,e,n){return t.indexOf(e,n)}function et(t,e){return t.charCodeAt(e)|0}function Dt(t,e,n){return t.slice(e,n)}function mt(t){return t.length}function ui(t){return t.length}function te(t,e){return e.push(t),t}function $c(t,e){return t.map(e).join("")}function ir(t,e){return t.filter(function(n){return!xt(n,e)})}var Be=1,Xt=1,li=0,ft=0,J=0,Ht="";function Oe(t,e,n,r,i,s,o,l){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:Be,column:Xt,length:o,return:"",siblings:l}}function At(t,e){return mn(Oe("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Ot(t){for(;t.root;)t=At(t.root,{children:[t]});te(t,t.siblings)}function zc(){return J}function Bc(){return J=ft>0?et(Ht,--ft):0,Xt--,J===10&&(Xt=1,Be--),J}function dt(){return J=ft<li?et(Ht,ft++):0,Xt++,J===10&&(Xt=1,Be++),J}function Pt(){return et(Ht,ft)}function ye(){return ft}function qe(t,e){return Dt(Ht,t,e)}function gn(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Oc(t){return Be=Xt=1,li=mt(Ht=t),ft=0,[]}function qc(t){return Ht="",t}function Ze(t){return ci(qe(ft-1,yn(t===91?t+2:t===40?t+1:t)))}function jc(t){for(;(J=Pt())&&J<33;)dt();return gn(t)>2||gn(J)>3?"":" "}function Fc(t,e){for(;--e&&dt()&&!(J<48||J>102||J>57&&J<65||J>70&&J<97););return qe(t,ye()+(e<6&&Pt()==32&&dt()==32))}function yn(t){for(;dt();)switch(J){case t:return ft;case 34:case 39:t!==34&&t!==39&&yn(J);break;case 40:t===41&&yn(t);break;case 92:dt();break}return ft}function Lc(t,e){for(;dt()&&t+J!==57;)if(t+J===84&&Pt()===47)break;return"/*"+qe(e,ft-1)+"*"+Mn(t===47?t:dt())}function Dc(t){for(;!gn(Pt());)dt();return qe(t,ft)}function Xc(t){return qc(ve("",null,null,null,[""],t=Oc(t),0,[0],t))}function ve(t,e,n,r,i,s,o,l,u){for(var a=0,h=0,f=o,c=0,d=0,w=0,v=1,g=1,p=1,_=0,y="",k=i,S=s,b=r,N=y;g;)switch(w=_,_=dt()){case 40:if(w!=108&&et(N,f-1)==58){ge(N+=X(Ze(_),"&","&\f"),"&\f",ai(a?l[a-1]:0))!=-1&&(p=-1);break}case 34:case 39:case 91:N+=Ze(_);break;case 9:case 10:case 13:case 32:N+=jc(w);break;case 92:N+=Fc(ye()-1,7);continue;case 47:switch(Pt()){case 42:case 47:te(Gc(Lc(dt(),ye()),e,n,u),u);break;default:N+="/"}break;case 123*v:l[a++]=mt(N)*p;case 125*v:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+h:p==-1&&(N=X(N,/\f/g,"")),d>0&&mt(N)-f&&te(d>32?or(N+";",r,n,f-1,u):or(X(N," ","")+";",r,n,f-2,u),u);break;case 59:N+=";";default:if(te(b=sr(N,e,n,a,h,i,l,y,k=[],S=[],f,s),s),_===123)if(h===0)ve(N,e,b,b,k,s,f,l,S);else switch(c===99&&et(N,3)===110?100:c){case 100:case 108:case 109:case 115:ve(t,b,b,r&&te(sr(t,b,b,0,0,i,l,y,i,k=[],f,S),S),i,S,f,l,r?k:S);break;default:ve(N,b,b,b,[""],S,0,l,S)}}a=h=d=0,v=p=1,y=N="",f=o;break;case 58:f=1+mt(N),d=w;default:if(v<1){if(_==123)--v;else if(_==125&&v++==0&&Bc()==125)continue}switch(N+=Mn(_),_*v){case 38:p=h>0?1:(N+="\f",-1);break;case 44:l[a++]=(mt(N)-1)*p,p=1;break;case 64:Pt()===45&&(N+=Ze(dt())),c=Pt(),h=f=mt(y=N+=Dc(ye())),_++;break;case 45:w===45&&mt(N)==2&&(v=0)}}return s}function sr(t,e,n,r,i,s,o,l,u,a,h,f){for(var c=i-1,d=i===0?s:[""],w=ui(d),v=0,g=0,p=0;v<r;++v)for(var _=0,y=Dt(t,c+1,c=ai(g=o[v])),k=t;_<w;++_)(k=ci(g>0?d[_]+" "+y:X(y,/&\f/g,d[_])))&&(u[p++]=k);return Oe(t,e,n,i===0?ze:l,u,a,h,f)}function Gc(t,e,n,r){return Oe(t,e,n,si,Mn(zc()),Dt(t,2,-2),0,r)}function or(t,e,n,r,i){return Oe(t,e,n,Pn,Dt(t,0,r),Dt(t,r+1,-1),r,i)}function fi(t,e,n){switch(Ic(t,e)){case 5103:return H+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return H+t+t;case 4789:return ee+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return H+t+ee+t+U+t+t;case 5936:switch(et(t,e+11)){case 114:return H+t+U+X(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return H+t+U+X(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return H+t+U+X(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return H+t+U+t+t;case 6165:return H+t+U+"flex-"+t+t;case 5187:return H+t+X(t,/(\w+).+(:[^]+)/,H+"box-$1$2"+U+"flex-$1$2")+t;case 5443:return H+t+U+"flex-item-"+X(t,/flex-|-self/g,"")+(xt(t,/flex-|baseline/)?"":U+"grid-row-"+X(t,/flex-|-self/g,""))+t;case 4675:return H+t+U+"flex-line-pack"+X(t,/align-content|flex-|-self/g,"")+t;case 5548:return H+t+U+X(t,"shrink","negative")+t;case 5292:return H+t+U+X(t,"basis","preferred-size")+t;case 6060:return H+"box-"+X(t,"-grow","")+H+t+U+X(t,"grow","positive")+t;case 4554:return H+X(t,/([^-])(transform)/g,"$1"+H+"$2")+t;case 6187:return X(X(X(t,/(zoom-|grab)/,H+"$1"),/(image-set)/,H+"$1"),t,"")+t;case 5495:case 3959:return X(t,/(image-set\([^]*)/,H+"$1$`$1");case 4968:return X(X(t,/(.+:)(flex-)?(.*)/,H+"box-pack:$3"+U+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+H+t+t;case 4200:if(!xt(t,/flex-|baseline/))return U+"grid-column-align"+Dt(t,e)+t;break;case 2592:case 3360:return U+X(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,xt(r.props,/grid-\w+-end/)})?~ge(t+(n=n[e].value),"span",0)?t:U+X(t,"-start","")+t+U+"grid-row-span:"+(~ge(n,"span",0)?xt(n,/\d+/):+xt(n,/\d+/)-+xt(t,/\d+/))+";":U+X(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return xt(r.props,/grid-\w+-start/)})?t:U+X(X(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return X(t,/(.+)-inline(.+)/,H+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(mt(t)-1-e>6)switch(et(t,e+1)){case 109:if(et(t,e+4)!==45)break;case 102:return X(t,/(.+:)(.+)-([^]+)/,"$1"+H+"$2-$3$1"+ee+(et(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~ge(t,"stretch",0)?fi(X(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return X(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,s,o,l,u,a){return U+i+":"+s+a+(o?U+i+"-span:"+(l?u:+u-+s)+a:"")+t});case 4949:if(et(t,e+6)===121)return X(t,":",":"+H)+t;break;case 6444:switch(et(t,et(t,14)===45?18:11)){case 120:return X(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+H+(et(t,14)===45?"inline-":"")+"box$3$1"+H+"$2$3$1"+U+"$2box$3")+t;case 100:return X(t,":",":"+U)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return X(t,"scroll-","scroll-snap-")+t}return t}function Ee(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Vc(t,e,n,r){switch(t.type){case Mc:if(t.children.length)break;case Pc:case Pn:return t.return=t.return||t.value;case si:return"";case oi:return t.return=t.value+"{"+Ee(t.children,r)+"}";case ze:if(!mt(t.value=t.props.join(",")))return""}return mt(n=Ee(t.children,r))?t.return=t.value+"{"+n+"}":""}function Yc(t){var e=ui(t);return function(n,r,i,s){for(var o="",l=0;l<e;l++)o+=t[l](n,r,i,s)||"";return o}}function Hc(t){return function(e){e.root||(e=e.return)&&t(e)}}function Wc(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Pn:t.return=fi(t.value,t.length,n);return;case oi:return Ee([At(t,{value:X(t.value,"@","@"+H)})],r);case ze:if(t.length)return $c(n=t.props,function(i){switch(xt(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ot(At(t,{props:[X(i,/:(read-\w+)/,":"+ee+"$1")]})),Ot(At(t,{props:[i]})),mn(t,{props:ir(n,r)});break;case"::placeholder":Ot(At(t,{props:[X(i,/:(plac\w+)/,":"+H+"input-$1")]})),Ot(At(t,{props:[X(i,/:(plac\w+)/,":"+ee+"$1")]})),Ot(At(t,{props:[X(i,/:(plac\w+)/,U+"input-$1")]})),Ot(At(t,{props:[i]})),mn(t,{props:ir(n,r)});break}return""})}}var Uc={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ut={},Gt=typeof en<"u"&&ut!==void 0&&(ut.REACT_APP_SC_ATTR||ut.SC_ATTR)||"data-styled",hi="active",di="data-styled-version",je="6.1.13",In=`/*!sc*/
`,Te=typeof window<"u"&&"HTMLElement"in window,Kc=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof en<"u"&&ut!==void 0&&ut.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ut.REACT_APP_SC_DISABLE_SPEEDY!==""?ut.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ut.REACT_APP_SC_DISABLE_SPEEDY:typeof en<"u"&&ut!==void 0&&ut.SC_DISABLE_SPEEDY!==void 0&&ut.SC_DISABLE_SPEEDY!==""&&ut.SC_DISABLE_SPEEDY!=="false"&&ut.SC_DISABLE_SPEEDY),Fe=Object.freeze([]),Vt=Object.freeze({});function Zc(t,e,n){return n===void 0&&(n=Vt),t.theme!==n.theme&&t.theme||e||n.theme}var pi=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Qc=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Jc=/(^-|-$)/g;function ar(t){return t.replace(Qc,"-").replace(Jc,"")}var tu=/(a)(d)/gi,le=52,cr=function(t){return String.fromCharCode(t+(t>25?39:97))};function vn(t){var e,n="";for(e=Math.abs(t);e>le;e=e/le|0)n=cr(e%le)+n;return(cr(e%le)+n).replace(tu,"$1-$2")}var Qe,mi=5381,qt=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},gi=function(t){return qt(mi,t)};function eu(t){return vn(gi(t)>>>0)}function nu(t){return t.displayName||t.name||"Component"}function Je(t){return typeof t=="string"&&!0}var yi=typeof Symbol=="function"&&Symbol.for,vi=yi?Symbol.for("react.memo"):60115,ru=yi?Symbol.for("react.forward_ref"):60112,iu={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},su={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},_i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ou=((Qe={})[ru]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qe[vi]=_i,Qe);function ur(t){return("type"in(e=t)&&e.type.$$typeof)===vi?_i:"$$typeof"in t?ou[t.$$typeof]:iu;var e}var au=Object.defineProperty,cu=Object.getOwnPropertyNames,lr=Object.getOwnPropertySymbols,uu=Object.getOwnPropertyDescriptor,lu=Object.getPrototypeOf,fr=Object.prototype;function wi(t,e,n){if(typeof e!="string"){if(fr){var r=lu(e);r&&r!==fr&&wi(t,r,n)}var i=cu(e);lr&&(i=i.concat(lr(e)));for(var s=ur(t),o=ur(e),l=0;l<i.length;++l){var u=i[l];if(!(u in su||n&&n[u]||o&&u in o||s&&u in s)){var a=uu(e,u);try{au(t,u,a)}catch{}}}}return t}function Yt(t){return typeof t=="function"}function $n(t){return typeof t=="object"&&"styledComponentId"in t}function Ct(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function hr(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function se(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function _n(t,e,n){if(n===void 0&&(n=!1),!n&&!se(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=_n(t[r],e[r]);else if(se(e))for(var r in e)t[r]=_n(t[r],e[r]);return t}function zn(t,e){Object.defineProperty(t,"toString",{value:e})}function ae(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var fu=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,s=i;e>=s;)if((s<<=1)<0)throw ae(16,"".concat(e));this.groupSizes=new Uint32Array(s),this.groupSizes.set(r),this.length=s;for(var o=i;o<s;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),u=(o=0,n.length);o<u;o++)this.tag.insertRule(l,n[o])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var s=r;s<i;s++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),s=i+r,o=i;o<s;o++)n+="".concat(this.tag.getRule(o)).concat(In);return n},t}(),_e=new Map,Re=new Map,we=1,fe=function(t){if(_e.has(t))return _e.get(t);for(;Re.has(we);)we++;var e=we++;return _e.set(t,e),Re.set(e,t),e},hu=function(t,e){we=e+1,_e.set(t,e),Re.set(e,t)},du="style[".concat(Gt,"][").concat(di,'="').concat(je,'"]'),pu=new RegExp("^".concat(Gt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),mu=function(t,e,n){for(var r,i=n.split(","),s=0,o=i.length;s<o;s++)(r=i[s])&&t.registerName(e,r)},gu=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(In),i=[],s=0,o=r.length;s<o;s++){var l=r[s].trim();if(l){var u=l.match(pu);if(u){var a=0|parseInt(u[1],10),h=u[2];a!==0&&(hu(h,a),mu(t,h,u[3]),t.getTag().insertRules(a,i)),i.length=0}else i.push(l)}}},dr=function(t){for(var e=document.querySelectorAll(du),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Gt)!==hi&&(gu(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function yu(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var xi=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(Gt,"]")));return u[u.length-1]}(n),s=i!==void 0?i.nextSibling:null;r.setAttribute(Gt,hi),r.setAttribute(di,je);var o=yu();return o&&r.setAttribute("nonce",o),n.insertBefore(r,s),r},vu=function(){function t(e){this.element=xi(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,s=r.length;i<s;i++){var o=r[i];if(o.ownerNode===n)return o}throw ae(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),_u=function(){function t(e){this.element=xi(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),wu=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),pr=Te,xu={isServer:!Te,useCSSOMInjection:!Kc},ki=function(){function t(e,n,r){e===void 0&&(e=Vt),n===void 0&&(n={});var i=this;this.options=at(at({},xu),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Te&&pr&&(pr=!1,dr(this)),zn(this,function(){return function(s){for(var o=s.getTag(),l=o.length,u="",a=function(f){var c=function(p){return Re.get(p)}(f);if(c===void 0)return"continue";var d=s.names.get(c),w=o.getGroup(f);if(d===void 0||!d.size||w.length===0)return"continue";var v="".concat(Gt,".g").concat(f,'[id="').concat(c,'"]'),g="";d!==void 0&&d.forEach(function(p){p.length>0&&(g+="".concat(p,","))}),u+="".concat(w).concat(v,'{content:"').concat(g,'"}').concat(In)},h=0;h<l;h++)a(h);return u}(i)})}return t.registerId=function(e){return fe(e)},t.prototype.rehydrate=function(){!this.server&&Te&&dr(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(at(at({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new wu(i):r?new vu(i):new _u(i)}(this.options),new fu(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(fe(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(fe(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(fe(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),ku=/&/g,bu=/^\s*\/\/.*$/gm;function bi(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=bi(n.children,e)),n})}function Su(t){var e,n,r,i=Vt,s=i.options,o=s===void 0?Vt:s,l=i.plugins,u=l===void 0?Fe:l,a=function(c,d,w){return w.startsWith(n)&&w.endsWith(n)&&w.replaceAll(n,"").length>0?".".concat(e):c},h=u.slice();h.push(function(c){c.type===ze&&c.value.includes("&")&&(c.props[0]=c.props[0].replace(ku,n).replace(r,a))}),o.prefix&&h.push(Wc),h.push(Vc);var f=function(c,d,w,v){d===void 0&&(d=""),w===void 0&&(w=""),v===void 0&&(v="&"),e=v,n=d,r=new RegExp("\\".concat(n,"\\b"),"g");var g=c.replace(bu,""),p=Xc(w||d?"".concat(w," ").concat(d," { ").concat(g," }"):g);o.namespace&&(p=bi(p,o.namespace));var _=[];return Ee(p,Yc(h.concat(Hc(function(y){return _.push(y)})))),_};return f.hash=u.length?u.reduce(function(c,d){return d.name||ae(15),qt(c,d.name)},mi).toString():"",f}var Au=new ki,wn=Su(),Si=re.createContext({shouldForwardProp:void 0,styleSheet:Au,stylis:wn});Si.Consumer;re.createContext(void 0);function mr(){return j.useContext(Si)}var Nu=function(){function t(e,n){var r=this;this.inject=function(i,s){s===void 0&&(s=wn);var o=r.name+s.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,s(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,zn(this,function(){throw ae(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=wn),this.name+e.hash},t}(),Eu=function(t){return t>="A"&&t<="Z"};function gr(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;Eu(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var Ai=function(t){return t==null||t===!1||t===""},Ni=function(t){var e,n,r=[];for(var i in t){var s=t[i];t.hasOwnProperty(i)&&!Ai(s)&&(Array.isArray(s)&&s.isCss||Yt(s)?r.push("".concat(gr(i),":"),s,";"):se(s)?r.push.apply(r,Ne(Ne(["".concat(i," {")],Ni(s),!1),["}"],!1)):r.push("".concat(gr(i),": ").concat((e=i,(n=s)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Uc||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Mt(t,e,n,r){if(Ai(t))return[];if($n(t))return[".".concat(t.styledComponentId)];if(Yt(t)){if(!Yt(s=t)||s.prototype&&s.prototype.isReactComponent||!e)return[t];var i=t(e);return Mt(i,e,n,r)}var s;return t instanceof Nu?n?(t.inject(n,r),[t.getName(r)]):[t]:se(t)?Ni(t):Array.isArray(t)?Array.prototype.concat.apply(Fe,t.map(function(o){return Mt(o,e,n,r)})):[t.toString()]}function Tu(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Yt(n)&&!$n(n))return!1}return!0}var Ru=gi(je),Cu=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Tu(e),this.componentId=n,this.baseHash=qt(Ru,n),this.baseStyle=r,ki.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Ct(i,this.staticRulesId);else{var s=hr(Mt(this.rules,e,n,r)),o=vn(qt(this.baseHash,s)>>>0);if(!n.hasNameForId(this.componentId,o)){var l=r(s,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,l)}i=Ct(i,o),this.staticRulesId=o}else{for(var u=qt(this.baseHash,r.hash),a="",h=0;h<this.rules.length;h++){var f=this.rules[h];if(typeof f=="string")a+=f;else if(f){var c=hr(Mt(f,e,n,r));u=qt(u,c+h),a+=c}}if(a){var d=vn(u>>>0);n.hasNameForId(this.componentId,d)||n.insertRules(this.componentId,d,r(a,".".concat(d),void 0,this.componentId)),i=Ct(i,d)}}return i},t}(),Ei=re.createContext(void 0);Ei.Consumer;var tn={};function Pu(t,e,n){var r=$n(t),i=t,s=!Je(t),o=e.attrs,l=o===void 0?Fe:o,u=e.componentId,a=u===void 0?function(k,S){var b=typeof k!="string"?"sc":ar(k);tn[b]=(tn[b]||0)+1;var N="".concat(b,"-").concat(eu(je+b+tn[b]));return S?"".concat(S,"-").concat(N):N}(e.displayName,e.parentComponentId):u,h=e.displayName,f=h===void 0?function(k){return Je(k)?"styled.".concat(k):"Styled(".concat(nu(k),")")}(t):h,c=e.displayName&&e.componentId?"".concat(ar(e.displayName),"-").concat(e.componentId):e.componentId||a,d=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,w=e.shouldForwardProp;if(r&&i.shouldForwardProp){var v=i.shouldForwardProp;if(e.shouldForwardProp){var g=e.shouldForwardProp;w=function(k,S){return v(k,S)&&g(k,S)}}else w=v}var p=new Cu(n,c,r?i.componentStyle:void 0);function _(k,S){return function(b,N,M){var q=b.attrs,B=b.componentStyle,$=b.defaultProps,z=b.foldedComponentIds,L=b.styledComponentId,m=b.target,T=re.useContext(Ei),x=mr(),A=b.shouldForwardProp||x.shouldForwardProp,R=Zc(N,T,$)||Vt,C=function(W,Z,Y){for(var K,nt=at(at({},Z),{className:void 0,theme:Y}),yt=0;yt<W.length;yt+=1){var Nt=Yt(K=W[yt])?K(nt):K;for(var ht in Nt)nt[ht]=ht==="className"?Ct(nt[ht],Nt[ht]):ht==="style"?at(at({},nt[ht]),Nt[ht]):Nt[ht]}return Z.className&&(nt.className=Ct(nt.className,Z.className)),nt}(q,N,R),I=C.as||m,O={};for(var P in C)C[P]===void 0||P[0]==="$"||P==="as"||P==="theme"&&C.theme===R||(P==="forwardedAs"?O.as=C.forwardedAs:A&&!A(P,I)||(O[P]=C[P]));var V=function(W,Z){var Y=mr(),K=W.generateAndInjectStyles(Z,Y.styleSheet,Y.stylis);return K}(B,C),G=Ct(z,L);return V&&(G+=" "+V),C.className&&(G+=" "+C.className),O[Je(I)&&!pi.has(I)?"class":"className"]=G,O.ref=M,j.createElement(I,O)}(y,k,S)}_.displayName=f;var y=re.forwardRef(_);return y.attrs=d,y.componentStyle=p,y.displayName=f,y.shouldForwardProp=w,y.foldedComponentIds=r?Ct(i.foldedComponentIds,i.styledComponentId):"",y.styledComponentId=c,y.target=r?i.target:t,Object.defineProperty(y,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=r?function(S){for(var b=[],N=1;N<arguments.length;N++)b[N-1]=arguments[N];for(var M=0,q=b;M<q.length;M++)_n(S,q[M],!0);return S}({},i.defaultProps,k):k}}),zn(y,function(){return".".concat(y.styledComponentId)}),s&&wi(y,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),y}function yr(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var vr=function(t){return Object.assign(t,{isCss:!0})};function Mu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Yt(t)||se(t))return vr(Mt(yr(Fe,Ne([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Mt(r):vr(Mt(yr(r,e)))}function xn(t,e,n){if(n===void 0&&(n=Vt),!e)throw ae(1,e);var r=function(i){for(var s=[],o=1;o<arguments.length;o++)s[o-1]=arguments[o];return t(e,n,Mu.apply(void 0,Ne([i],s,!1)))};return r.attrs=function(i){return xn(t,e,at(at({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return xn(t,e,at(at({},n),i))},r}var Ti=function(t){return xn(Pu,t)},ct=Ti;pi.forEach(function(t){ct[t]=Ti(t)});const Iu=ct.path`
  opacity: ${({opacity:t})=>t||1}};
  stroke: ${({fill:t,theme:e})=>t??e.colors.failure};
  fill: ${({fill:t,theme:e})=>t??e.colors.failure};
`,$u=({series:t,xScale:e,yScale:n,xValue:r,yValue:i,fill:s,opacity:o})=>{const l=j.useMemo(()=>{var y,k,S,b,N,M,q,B;const u=e.domain(),a=n.domain(),h=Number(((y=t==null?void 0:t[0])==null?void 0:y.price)||0)===Number(((k=t==null?void 0:t[1])==null?void 0:k.price)||0),f=Number(((S=t==null?void 0:t[h?1:0])==null?void 0:S.price)||0)>Number(((b=t==null?void 0:t[h?2:1])==null?void 0:b.price)||0),c=[...t];(c==null?void 0:c.length)>1&&(c[t.length-1]={...c[t.length-1],depth:c[t.length-2].depth});const d=F(u[1]).add(F(u[1]).sub(u[0]).div(100)).toNumber(),w=c.findIndex(({price:$})=>f?Number($)<=d:Number($)>=d),v=F(u[1]).sub(u[0]).div(100);f?w>=0&&((N=c[w-1])!=null&&N.depth)&&c.splice(w,0,{...c[w-1],price:F(u[1]).add(v).toNumber()}):w>=0&&((M=c[w])!=null&&M.depth)&&c.splice(w,0,{...c[w],price:d});const g=F(u[0]).add(F(u[1]).sub(u[0]).div(100)).toNumber(),p=c.findIndex(({price:$})=>f?Number($)<=g:Number($)>=g);f?p>=0&&((q=c[p])!=null&&q.depth)&&c.splice(p,0,{...c[p],price:g>0?g:0}):(p-1>=0&&((B=c[p-1])!=null&&B.depth)&&c.splice(p,0,{...c[p-1],price:g>0?g:0}),p===w&&c.splice(p+1,0,{...c[p+1],price:g>0?F(g).add(F(g).div(1e6)).toNumber():0}));const _=isNaN(a[1])?on().domain([0,Math.max(...c.map($=>$.depth))]).range([200,0]):n;return Di().curve(Xi).x($=>e(r($))).y1($=>_(i($))).y0(_(0))(c.filter($=>{const z=e(r($));return _(i($)),z>=0&&z<=window.innerWidth}))??void 0},[s,t,e,r,n,i]);return j.useMemo(()=>E.jsx(Iu,{fill:s,d:l,opacity:o}),[l])},zu=ct.g`
  line {
    display: none;
  }
  text {
    transform: translateY(5px);
    font-family: 'Inter';
  }
`,Bu=({axisGenerator:t,isPosition:e})=>{const{colorMode:n}=Ii(),r=i=>{e?i&&Q(i).call(t).call(s=>s.selectAll(".tick").remove()).call(s=>s.select(".domain").attr("d","M0 0 L658 0 Z").attr("stroke","#2A3238")):i&&Q(i).call(t).call(s=>s.select(".domain").attr("d","M0 0 L658 0 Z").attr("stroke","#2A3238"))};return E.jsx("g",{ref:r,style:{color:n=="light"?"#000":"#fff",opacity:(n=="light","0.5")}})},Ou=({xScale:t,innerHeight:e,offset:n=0,isPosition:r=!1})=>j.useMemo(()=>E.jsx(zu,{transform:`translate(0, ${e+n})`,children:E.jsx(Bu,{axisGenerator:vs(t).ticks(5),isPosition:r})}),[e,n,t]),_r=t=>["M 0 0",`v ${t}`,"m 1 0","V 0","M 0 1","h 10","q 2 0, 2 2","v 22","q 0 2 -2 2","h -10","z"].join(" "),wr=()=>["m 4 8","v 12","M 0 0","m 8 8","v 12","z"].join(" "),xr=({color:t,size:e=10,margin:n=10})=>E.jsx("polygon",{points:`0 0, ${e} ${e}, 0 ${e}`,transform:` translate(${e+n}, ${n}) rotate(45) `,fill:t,stroke:t,strokeWidth:"4",strokeLinejoin:"round"}),ne={colors:{background:"var(--chakra-colors-card_bg)",secondary:"#30D4B7",leftHandle:"#30D4B7",rightHandle:"#6297EA"}},kr=ct.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 3;
  stroke: ${({color:t})=>t};
  fill: ${({color:t})=>t};
`,br=ct.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 1.5;
  stroke: #fff;
  opacity: ${ne.colors.background};
  fill: ${ne.colors.background};
`,Sr=ct.g`
  opacity: ${({visible:t})=>t?"1":"0"};
  transition: opacity 300ms;
`,Ar=ct.rect`
  fill: #192128;
`,Nr=ct.rect`
  fill: #192128;
`,Er=ct.rect`
  fill: #192128;
`,Tr=ct.text`
  text-anchor: middle;
  font-size: 13px;
  fill: #fff;
`,Rr=20,Cr=2,Pr=(t,e,n)=>{const r=t.map(s=>n(s).toFixed(11)),i=e.map(s=>n(s).toFixed(11));return r.every((s,o)=>s===i[o])},qu=({id:t,xScale:e,interactive:n,brushLabelValue:r,brushExtent:i,setBrushExtent:s,innerWidth:o,innerHeight:l,westHandleColor:u,eastHandleColor:a,readonly:h,isSorted:f,isFullRange:c})=>{const d=j.useRef(null),w=j.useRef(null),[v,g]=j.useState(i),[p,_]=j.useState(!1),[y,k]=j.useState(!1),S=Hi(i),b=j.useCallback(m=>{const{type:T,mode:x}=m;if(!(m!=null&&m.selection)){g(null);return}const R=m.selection.map(Math.round).map(e.invert);R.join("").includes("NaN")||i.join("").includes("NaN")||(T==="end"&&!Pr(i,R,e)&&s(R,x),g(R))},[e,i,s]);j.useEffect(()=>{g(i)},[i]),j.useEffect(()=>{d.current&&(w.current=xc().extent([[Math.max(0+Cr,e(0)),0],[o-Cr,l]]).handleSize(30).filter(()=>n).on("brush end",b),w.current(Q(d.current)),S&&Pr(i,S,e)&&Q(d.current).transition().call(w.current.move,i.map(e)),Q(d.current).selectAll(".selection").attr("stroke","none").attr("fill","rgba(118, 200, 255, 0.4)"))},[i,b,t,l,o,n,S,e]),j.useEffect(()=>{!d.current||!w.current||w.current.move(Q(d.current),i.map(e))},[i,e]),j.useEffect(()=>{_(!0);const m=setTimeout(()=>_(!1),1500);return()=>clearTimeout(m)},[v]);const N=v&&e(v[0])>Rr,M=v&&e(v[1])>o-Rr,q=v&&(e(v[0])<0||e(v[1])<0),B=v&&(e(v[0])>o||e(v[1])>o),$=v&&e(v[0])>=0&&e(v[0])<=o,z=v&&e(v[1])>=0&&e(v[1])<=o,{isApp:L}=Ce();return j.useMemo(()=>E.jsxs(E.Fragment,{children:[E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:`${t}-gradient-selection`,x1:"0%",y1:"100%",x2:"100%",y2:"100%",children:[E.jsx("stop",{stopColor:u}),E.jsx("stop",{stopColor:a,offset:"1"})]}),E.jsx("clipPath",{id:`${t}-brush-clip`,children:E.jsx("rect",{x:"0",y:"0",width:o,height:l})})]}),E.jsx("g",{ref:d,clipPath:`url(#${t}-brush-clip)`,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1)}),v&&E.jsxs(E.Fragment,{children:[!h&&$?E.jsxs("g",{transform:`translate(${Math.max(0,e(v[0]))}, 0), scale(${N?"-1":"1"}, 1)`,children:[E.jsxs("g",{children:[E.jsx(kr,{color:ne.colors.leftHandle,d:_r(l)}),E.jsx(br,{d:wr()})]}),E.jsxs(Sr,{transform:`translate(${L?"10 35":"50,0"}), scale(${N?"1":"-1"}, 1)`,visible:p||y,children:[E.jsx(Ar,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),f?E.jsx(Nr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}):E.jsx(Er,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),E.jsx(Tr,{transform:"scale(-1, 1)",y:"15",dominantBaseline:"middle",children:c?"0":r("w",v[0])})]})]}):null,!h&&z?E.jsxs("g",{transform:`translate(${e(v[1])}, 0), scale(${M?"-1":"1"}, 1)`,children:[E.jsxs("g",{children:[E.jsx(kr,{color:ne.colors.rightHandle,d:_r(l)}),E.jsx(br,{d:wr()})]}),E.jsxs(Sr,{transform:`translate(${L?"10 35":"50,0"}), scale(${M?"-1":"1"}, 1)`,visible:p||y,children:[E.jsx(Ar,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),f?E.jsx(Er,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}):E.jsx(Nr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),E.jsx(Tr,{y:"15",dominantBaseline:"middle",children:c?"∞":r("e",v[1])})]})]}):null,q&&E.jsx(xr,{color:u}),B&&E.jsx("g",{transform:`translate(${o}, 0) scale(-1, 1)`,children:E.jsx(xr,{color:a})})]})]}),[r,a,z,M,N,y,t,ne,l,o,v,B,p,q,u,$,e,L])},ju=ct.line`
  opacity: 0.7;
  stroke-width: 1;
  stroke: var(--chakra-colors-text_caption);
  fill: none;
`,Fu=({value:t,xScale:e,innerHeight:n})=>j.useMemo(()=>E.jsx(ju,{x1:e(t),y1:"0",x2:e(t),y2:n,strokeDasharray:"4,3"}),[t,e,n]);ct.line`
  opacity: 1;
  stroke-width: 2;
  stroke: #fff;
  fill: none;
`;const Lu=({value:t,xScale:e,innerHeight:n})=>j.useMemo(()=>E.jsxs("g",{children:[E.jsx("circle",{cx:e(Number(t)),cy:"4",fill:"#fff",r:"4"}),E.jsx("line",{x1:e(Number(t)),y1:"0",x2:e(t),y2:n,stroke:"#fff",strokeWidth:2})]}),[t,e,n]);ct.div`
  display: grid;
  grid-template-columns: repeat(${({count:t})=>t.toString()}, 1fr);
  grid-gap: 6px;

  position: absolute;
  top: -18px;
  right: 0;
`;const Du=ct.rect`
  fill: transparent;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`;function Xu({svg:t,xScale:e,setZoom:n,width:r,height:i,resetBrush:s,showResetButton:o,zoomLevels:l,isPosition:u,handleClickRefresh:a,currentRange:h}){const f=j.useRef(),[c,d,w,v]=j.useMemo(()=>[()=>{t&&f.current&&Q(t).transition().call(f.current.scaleBy,2)},()=>t&&f.current&&Q(t).transition().call(f.current.scaleBy,.5),()=>t&&f.current&&Q(t).transition().call(f.current.scaleTo,1),()=>t&&f.current&&Q(t).call(f.current.transform,Cn.translate(0,0).scale(1)).transition().call(f.current.scaleTo,1)],[t]),g=$i(n,300);return Ce(),j.useEffect(()=>{t&&(f.current=Rc().scaleExtent([0,1/0]).extent([[0,0],[r,i]]).on("zoom",({transform:p})=>{g(p)}),Q(t).call(f.current))},[i,r,n,t,f,l.max,l.min]),j.useEffect(()=>{w()},[w,l]),j.useEffect(()=>{v()},[h]),E.jsx(nn,{w:"100%",p:"0px",align:"center",sx:{"@media screen and (max-width: 960px)":{flexDirection:"column",w:"100%",alignItems:u?"flex-start":"flex-end"}},children:E.jsxs(zi,{w:"100%",justify:{base:"flex-start",lg:"flex-end"},flex:"1",position:"absolute",right:"0px",top:{base:"-70px",lg:"-30px"},flexDir:{base:"row-reverse",lg:"row"},children:[E.jsx(Ln,{type:"Add",onClick:()=>{c()}}),E.jsx(Ln,{type:"Sub",onClick:d})]})})}const Gu=t=>t.price,Mr=t=>t.depth;function Vu({id:t="liquidityChartRangeInput",data:{series:e,current:n},ticksAtLimit:r,styles:i,dimensions:{width:s,height:o},margins:l,interactive:u=!0,brushDomain:a,brushLabels:h,onBrushDomainChange:f,handleClickRefresh:c,zoomLevels:d,showZoomButtons:w=!0,isPosition:v=!1,hideBrush:g=!1,isReverse:p=!1,isSorted:_=!0,readonly:y=!1,dashedMarkerLine:k=[],currentRange:S="",constantPrice:b}){const N=j.useRef(null),[M,q]=j.useState(null),[B,$]=j.useMemo(()=>[o-l.top-l.bottom,s-l.left-l.right],[s,o,l]),{xScale:z,yScale:L}=j.useMemo(()=>{let A=[b*d.initialMin,b*d.initialMax];if(a&&String(a==null?void 0:a[0])!=="∞"&&String(a==null?void 0:a[1])!=="∞")if((a==null?void 0:a[0])===(a==null?void 0:a[1]))A=[Number(a==null?void 0:a[0])-(a==null?void 0:a[0])*.01,Number(a==null?void 0:a[0])+(a==null?void 0:a[0])*.01];else{const C=Yi(a);v?F(b).lt(a[0])?A=[F(b).minus(C).toNumber(),F(a[1]).plus(C).toNumber()]:F(b).gt(a[1])?A=[F(a[0]).minus(C).toNumber(),F(b).plus(F(C).mul(1.5)).toNumber()]:A=[F(a[0]).minus(C).toNumber(),F(a[1]).plus(C).toNumber()]:A=[F(a[0]).minus(C).toNumber(),F(a[1]).plus(C).toNumber()]}else Number(b)-b*2>0?A=[Math.max(F(0).add(F(b).div(10)).toNumber(),F(b).minus(F(b).mul(2)).toNumber()),F(b).add(F(b).mul(2)).toNumber()]:A=[0,F(b).mul(2).toNumber()];const R={xScale:on().domain(A).range([0,$]),yScale:on().domain([0,Gi(e,Mr)]).range([B,0])};if(M){const C=M.rescaleX(R.xScale);R.xScale.domain(C.domain())}return R},[b,d.initialMin,d.initialMax,$,e,B,M,a]);j.useEffect(()=>{q(null)},[d,S]),j.useEffect(()=>{a||f(z.domain(),void 0)},[a,f,z]);const[m,T]=j.useState(void 0);return j.useEffect(()=>{T(N.current)},[N.current]),E.jsxs(kn,{w:"100%",h:"100%",sx:{"@media screen and (max-width: 1000px)":{display:"block"}},children:[m&&E.jsx(Xu,{svg:m,xScale:z,setZoom:q,width:$,height:o,resetBrush:()=>{f([b*d.initialMin,b*d.initialMax],"reset")},showResetButton:!!(r[rt.LOWER]||r[rt.UPPER]),zoomLevels:d,isPosition:v,currentRange:S,handleClickRefresh:c}),E.jsxs("svg",{width:"100%",height:"245px",style:{overflow:"visible"},children:[E.jsxs("defs",{children:[E.jsxs("linearGradient",{id:"green-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[E.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),E.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]}),E.jsxs("linearGradient",{id:"red-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[E.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),E.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]})]}),E.jsxs("defs",{children:[E.jsx("clipPath",{id:`${t}-chart-clip`,children:E.jsx("rect",{x:"0",y:"0",width:$,height:o})}),a&&E.jsx("mask",{id:`${t}-chart-area-mask`,children:E.jsx("rect",{fill:"red",x:z(a[0]),y:"0",width:z(a[1])-z(a[0]),height:B})})]}),E.jsxs("g",{transform:`translate(${l.left},${l.top})`,children:[E.jsxs("g",{clipPath:`url(#${t}-chart-clip)`,children:[E.jsx($u,{series:e,xScale:z,yScale:L,xValue:Gu,yValue:Mr,opacity:1,fill:"#195780"}),E.jsx(Lu,{value:n,xScale:z,innerHeight:B}),k==null?void 0:k.map((x,A)=>E.jsx(Fu,{value:Number(Zt(x)),xScale:z,innerHeight:B},x+A)),E.jsx(Ou,{xScale:z,innerHeight:B,isPosition:v})]}),E.jsx(Du,{className:"zoom-overlay",width:$,height:o,ref:N}),E.jsx(qu,{id:t,xScale:z,interactive:u,brushLabelValue:h,brushExtent:a??z.domain(),innerWidth:$,innerHeight:B,setBrushExtent:f,westHandleColor:i.brush.handle.west,eastHandleColor:i.brush.handle.east,readonly:y,isSorted:_,isFullRange:!a})]})]})]})}const Yu="/assets/no_chart_data@2x-DOXoFnuQ.png",Hu=j.forwardRef(function({isFrom:e,isSorted:n,contractPoolInfo:r,currencyA:i,currencyB:s,feeAmount:o,ticksAtLimit:l,price:u,priceLower:a,priceUpper:h,onLeftRangeInput:f,onRightRangeInput:c,onBothRangeInput:d,handleClickRefresh:w,interactive:v,readonly:g,zoomLevel:p,isPosition:_,hideBrush:y,isReverse:k,dashedMarkerLine:S,currentRange:b},N){var I,O;const{formatPriceData:M,ticksPool:q,formatPriceDataIsLoading:B}=Sn(),$=j.useMemo(()=>!(M&&!B),[M]),z=j.useMemo(()=>{let P;return n?P=M:P=M==null?void 0:M.map(V=>{var G;return{...V,price:(G=F(1).div(V==null?void 0:V.price))==null?void 0:G.toString()}}),P},[n,M]),L=j.useMemo(()=>n?q==null?void 0:q.price:q==null?void 0:q.reversePrice,[q==null?void 0:q.id,n]),m=j.useCallback((P,V)=>{if(!V)return;const G=Number(P[0]),W=Number(P[1]),Z=(!l[n?rt.LOWER:rt.UPPER]||V==="handle"||V==="reset")&&G>=0,Y=(!l[n?rt.UPPER:rt.LOWER]||V==="reset")&&W>0&&W<1e35;if(Z&&Y){const K=parseFloat(G.toFixed(20)),nt=parseFloat(W.toFixed(20));K>=0&&nt>0&&K<nt&&d({leftTypedValue:F(G).toString(),rightTypedValue:F(W).toString()})}else Z?f(F(G).toString()):Y&&c(F(W).toString())},[n,d,f,c,l]),T=j.useMemo(()=>{const P=n?Zt(a==null?void 0:a.price):Zt(a==null?void 0:a.reversePrice),V=n?Zt(h==null?void 0:h.price):Zt(h==null?void 0:h.reversePrice);if(V!=="∞")return P&&V?[Number(P),Number(V)]:void 0},[n,a==null?void 0:a.displayPrice,h==null?void 0:h.displayPrice,u]),x=j.useCallback((P,V)=>{if(!u)return"";if(P==="w"&&(l[n?rt.LOWER:rt.UPPER]||!T))return"0";if(P==="e"&&(l[n?rt.UPPER:rt.LOWER]||!T))return"∞";const G=(V<u?-1:1)*((Math.max(V,u)-Math.min(V,u))/u)*100;return u?`${Vi(Math.abs(G)>1?".2~s":".2~f")(G)}%`:""},[n,u,l,T]),A=!i||!s||z===void 0&&!$,R=j.useRef(null),{isApp:C}=Ce();return E.jsx(kn,{w:"100%",h:"100%",flex:1,gap:"14px",position:"relative",ref:R,children:A||$||!z||!u?E.jsx(rn,{h:"100%",pt:e=="position"?"30px":"150px",children:E.jsx(sn,{})}):z.length===0?E.jsxs(nn,{bg:"bg_secondary",w:"100%",h:"100%",direction:"column",justify:"center",align:"center",borderRadius:"12px",children:[E.jsx(Bi,{src:Yu,w:"100px",h:"100px"}),E.jsx(Oi,{mt:"20px",textAlign:"center",children:"There is no liquidity data."})]}):E.jsx(nn,{w:"100%",h:"100%",position:"relative",justify:"center",align:"center",children:(I=R==null?void 0:R.current)!=null&&I.clientWidth?E.jsx(Vu,{data:{series:z,current:u},dimensions:{width:e=="position"?C?300:200:(O=R==null?void 0:R.current)==null?void 0:O.clientWidth,height:e=="position"?85:230},margins:{top:10,right:20,bottom:20,left:10},styles:{area:{selection:"var(--chakra-colors-text_caption)"},brush:{handle:{west:"#30D4B7",east:"#6297EA"}}},interactive:v&&!!(z!=null&&z.length),brushLabels:x,brushDomain:T,onBrushDomainChange:m,zoomLevels:p??Cc[o??pn.MEDIUM],ticksAtLimit:l,isPosition:e==="position",hideBrush:y,isReverse:k,isSorted:n,readonly:g,dashedMarkerLine:S,handleClickRefresh:w,currentRange:b,constantPrice:L},`${o??pn.MEDIUM}`):E.jsx(rn,{h:"100%",pt:e=="position"?"30px":"150px",children:E.jsx(sn,{})})})})}),Wu=443636,Uu=-443636,ol=j.forwardRef(function(e,n){const{handleClickRefresh:r,minPriceData:i,maxPriceData:s,direct:o,readonly:l,isFrom:u,dashedMarkerLine:a,currentRange:h}=e,{contractPoolInfo:f,apiPoolInfo:c,currentPriceData:d}=bn(),{lowerTickData:w,upperTickData:v}=Or(),{setTickDataBasedOnPrice:g}=as(),{formatPriceDataIsLoading:p}=Sn();j.useMemo(()=>f==null?void 0:f.tickSpacing,[f==null?void 0:f.tickSpacing]);const _="100",y=j.useMemo(()=>Number(_)&&(f!=null&&f.tickSpacing)?{[rt.LOWER]:ot.getInitializableTickIndex(Wu,Number(c==null?void 0:c.tickSpacing)),[rt.UPPER]:ot.getInitializableTickIndex(Uu,Number(c==null?void 0:c.tickSpacing))}:{[rt.LOWER]:void 0,[rt.UPPER]:void 0},[_]),k=j.useMemo(()=>({[rt.LOWER]:w.tick===y.LOWER,[rt.UPPER]:(v==null?void 0:v.tick)===y.UPPER}),[y,w,v,_]),S=!0,b=void 0,N=({leftTypedValue:z,rightTypedValue:L})=>{qn(z,6)!==(o?w==null?void 0:w.displayPrice:v==null?void 0:v.displayReversePrice)&&g(o?w:v,o?z:F(1).div(z).toString()),qn(L,6)!==(o?v==null?void 0:v.displayPrice:w.displayReversePrice)&&g(o?v:w,o?L:F(1).div(L).toString())},M=z=>{},q=z=>{},B=j.useRef(null);j.useImperativeHandle(n,()=>{var z;return{depthChartRefreshData:(z=B.current)==null?void 0:z.depthChartRefreshData}});const{getFormattedData:$}=ls();return j.useEffect(()=>{f!=null&&f.poolAddress&&(f==null?void 0:f.poolAddress)===(c==null?void 0:c.poolAddress)&&$({poolAddress:f==null?void 0:f.poolAddress,tokenA:c==null?void 0:c.tokenA,tokenB:c==null?void 0:c.tokenB,tickSpacing:f==null?void 0:f.tickSpacing,currentTickIndex:f==null?void 0:f.current_tick_index,liquidity:f==null?void 0:f.liquidity,feeRate:f==null?void 0:f.fee_rate})},[f==null?void 0:f.poolAddress,c==null?void 0:c.poolAddress]),E.jsxs(kn,{w:"100%",h:"100%",position:"relative",children:[l&&E.jsx(rn,{w:"100%",h:"100%",position:"absolute",left:"0px",top:"0px",bg:"rgba(0,0,0,0)",zIndex:"99999"}),!p&&On(i)&&On(s)?E.jsx(Hu,{isFrom:u,ref:B,isSorted:o,contractPoolInfo:f,currencyA:c==null?void 0:c.tokenA,currencyB:c==null?void 0:c.tokenB,feeAmount:_,ticksAtLimit:k,price:o?d.currentPrice:d.reverseCurrentPrice,priceLower:i,priceUpper:s,interactive:S,zoomLevel:b,isReverse:c==null?void 0:c.isReverse,readonly:l,dashedMarkerLine:a,onBothRangeInput:N,onLeftRangeInput:M,onRightRangeInput:q,handleClickRefresh:r,currentRange:h}):E.jsx(qi,{w:"100%",h:"100%",mt:"20px",children:E.jsx(sn,{})})]})});function al({label:t,value:e,loading:n}){const{isApp:r}=Ce();return r?E.jsx(Wi,{label:t,value:e,labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",h:"14px",fontWeight:"500"},isLoading:n,skeletonStyle:{valueW:"60px"}}):E.jsx(Ui,{wrapStyle:{gap:"8px",alignItems:"flex-end"},titleStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",fontWeight:"500"},title:t,value:e,isLoading:n,skeletonStyle:{valueW:"60px",valueH:"14px"}})}function cl(){const{setCurrentPriceData:t}=bn();return{getCurrentPrice:(n,r)=>{const i=r.tokenA.decimals,s=r.tokenB.decimals,o=ot.sqrtPriceX64ToPrice(new ji(n),i,s).toString(),l=F(1).div(o).toString(),u={currentPrice:o,reverseCurrentPrice:l,currentSqrtPrice:n,pool:r.poolAddress};t(u)}}}function ul(){const{clmmSdk:t}=$r(),{fetchTokenInfo:e}=Ki(),{contractPoolInfo:n,setContractPoolInfo:r,setContractPoolInfoLoading:i,apiPoolInfo:s,setApiPoolInfo:o}=bn(),l=async a=>{i(!0);let h=null;try{if(h=await t.Pool.getPool(a),(s==null?void 0:s.displayTokenA)===void 0){const f=await u(h);f&&o(f)}}catch{}finally{i(!1)}return n?h?(r(h),h):n:(r(h||null),h)};async function u(a){const h=await e(a.coinTypeA),f=await e(a.coinTypeB);if(h&&f){const c=`${h==null?void 0:h.symbol} - ${f==null?void 0:f.symbol}`,d=Le(a.fee_rate).div(100).toString(),w=Le(a.fee_rate).div(1e4).toString(),v=Le(d).div(100).toString()+"%";return{poolAddress:a.poolAddress,name:c,isReverse:!1,tokenA:h,tokenB:f,displayTokenA:h,displayTokenB:f,haveMining:!1,miningRewardList:null,miningAprList:null,haveFarming:!1,farmsRewarderList:null,farmsApr:"",farmingAprDisplay:"",feeApr:"",feeAprDisplay:"",miningAprTotal:"",feeAndMiningAprDisplay:"",totalAprDisplay:"",fee:w,feeRate:d,feeDisplay:v,tvlDisplay:"0",volume24Display:"0",fees24Display:"0",isVaults:!1,tickSpacing:a.tickSpacing.toString()}}}return{getContractPoolInfo:l}}export{ol as L,al as S,as as a,ul as b,cl as c,Or as u};
