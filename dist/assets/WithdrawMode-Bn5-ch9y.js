import{a,j as l,f as le,v as re,V as j,T as Z}from"./vendor-DsVemle5.js";import{c as ie,v as B,f as me,i as ne,j as de}from"./VaultsAprBlock-DYqDOull.js";import{n as ue,d as k,m as ce,P as he,Q as xe}from"./index-ptnn7YYs.js";import{H as D}from"./HTextLabelBox-BSdt2JjM.js";import{u as fe}from"./useAccountBalance-BlkjpDIb.js";import{T as be}from"./TradeInputGroup-cjeY54io.js";import"./swapWidget-BX_OS0Vd.js";import"./useWrapPoolData-Dtc_nARB.js";import"./useFavoritePool-BRmN064e.js";import"./useGetPoolList-BWUJTUb5.js";import"./useToken-D0Y8EMfE.js";import"./useTokenBalance-BmzoUDH9.js";import"./useTransaction-_40Gj-Xj.js";import"./useTrack-DUPD-CMT.js";import"./useSigner-CA1OjupR.js";import"./global-XGPon1rE.js";import"./msafe-oYBkW7LJ.js";import"./index-Cr9gqCFC.js";import"./v4-C6aID195.js";import"./useFindBestRouting-DsIA0n5P.js";import"./useSwapHelper-CkdGRiyG.js";import"./_getAllKeysIn-BPxU3Eca.js";function ke(T){const{isUnstableVault:g,displayTokenA:r,displayTokenB:i,vaultId:m,isReverse:s,assetAction:h,isCheckedZAP:v,currentActionTab:pe,apiVaultInfo:e}=T,N=B.useVaultsRemove(g),Q=B.useAddButtonStatus(g),q=B.useGetContractVaultInfo(g),{getApiVaultInfo:J}=ie(m),{currentAccount:o,isOpenWalletModal:ge,onWalletModal:K}=ue(),{fetchAccountBalance:X}=fe(),{contractVault:n,lpTokenInfo:t,balanceInfo:C,fetchClmmPoolFromContract:y,fetchVaultInfoFromContract:E,holdCoinAmounts:M,fromTokenLock:Y,toTokenLock:V,fetchVaultBalance:S,isBalanceLoading:R}=q(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse),W=()=>{var d;X(),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:57 ~ autoRefresh ~ apiVaultInfo:",e),(e==null?void 0:e.category)=="haedal"&&S(o==null?void 0:o.address,m,(d=e==null?void 0:e.tokenA)==null?void 0:d.decimals),e&&y(e.clmmPoolAddress,!0),m&&(E(m,!0),J(m,!0)),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:68 ~ autoRefresh ~ autoRefresh:",W)};console.log("ðŸš€ðŸš€ðŸš€ ~ WithdrawMode.tsx:69 ~ VaultWithdrawMode ~ holdCoinAmounts:",M);const{contractClmmPoolObj:A}=me();a.useMemo(()=>{if(A&&A[e==null?void 0:e.clmmPoolAddress])return A[e==null?void 0:e.clmmPoolAddress]},[e==null?void 0:e.clmmPoolAddress,A]);const{amountInputA:F,amountInputB:z,availableAmountA:x,availableAmountB:f,amountValueA:I,amountValueB:ee,preCalculateLoading:u,fixAmountA:b,inputTotalValue:p,handleAmountInputChange:H,calculateResult:c,showOnlySideTips:G,doRemoveAction:te,removePercent:ve,isPercentInput:w,reCalculateResult:O,calculateAvailableLoading:$}=N(h,W,M,n==null?void 0:n.lp_token_treasury,C==null?void 0:C.balance,m,s?i:r,s?r:i,s,Y,V,v,A),L=a.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",p),p&&v?k(p).gt(0)&&k(p).lt(1e-4):!1),[v,p]),{btnText:oe,btnDisabled:se}=Q(v,h,!1,F,z,s?!b:b,x,f,r,i,g,"",c,L);ne(c==null?void 0:c.burn_ft_amount,g?n==null?void 0:n.lp_token_treasury:n==null?void 0:n.total_supply);const{amountLimit:U}=de(0,c==null?void 0:c.burn_ft_amount,!1);a.useMemo(()=>s?f:x,[f,x,s]),a.useMemo(()=>s?x:f,[x,f,s]),a.useMemo(()=>u?w?!0:s?b:!b:!1,[u,w]),a.useMemo(()=>u?w?!0:s?!b:b:!1,[u,w]),a.useEffect(()=>{O()},[e==null?void 0:e.vaultsId]),a.useEffect(()=>{e&&(e!=null&&e.clmmPoolAddress)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:170 ~ useEffect ~ apiVaultInfo:",e),y(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),a.useEffect(()=>{m&&E(m)},[m]),a.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ lpTokenInfo:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ apiVaultInfo:",e),o!=null&&o.address&&(e!=null&&e.vaultsId)&&(t!=null&&t.decimals)&&(e!=null&&e.isUnstableVault)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:189 ~ useEffect ~ fetchVaultBalance:",S),S(o==null?void 0:o.address,e.vaultsId,t==null?void 0:t.decimals))},[o==null?void 0:o.address,e==null?void 0:e.vaultsId,t==null?void 0:t.decimals]),a.useEffect(()=>{O()},[x,f]);const ae=a.useMemo(()=>ce(he(U||"0",t==null?void 0:t.decimals),t==null?void 0:t.decimals),[U,t]);return l.jsxs(l.Fragment,{children:[l.jsx(le,{w:"100%",position:"relative",children:l.jsx(be,{onClick:()=>{},from:{wrapStyle:{h:"108px"},balance:x||"",value:F,amountValue:I,loading:!1,calculateAvailableLoading:R||$,hideSelf:h!=="both"&&h!==(r==null?void 0:r.coin_type),onChange:(d,P,_)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:194 ~ VaultWithdrawMode ~ value:",d),H(d,!s,P,_)},selectable:!1,placeholder:"0.0",token:r,balanceLabel:"Available",onFocusChange:d=>{}},to:{wrapStyle:{h:"108px"},balance:f||"",value:z,amountValue:ee,loading:!1,calculateAvailableLoading:R||$,onFocusChange:d=>{},onChange:(d,P,_)=>{H(d,s,P,_)},selectable:!1,hideSelf:h!=="both"&&h!==(i==null?void 0:i.coin_type),placeholder:"0.0",token:i,balanceLabel:"Available"},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})}),l.jsx(re,{width:"100%",height:"52px",borderRadius:"12px",marginBottom:"8px",fontWeight:"500",isLoading:u,disabled:se||u,onClick:()=>o!=null&&o.address?te():K(!0),children:oe||(v?"Zap Out":"Withdraw")}),L&&l.jsx(j,{w:"100%",alignItems:"start",mb:"8px",children:l.jsx(Z,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(c||G)&&!L&&l.jsxs(j,{w:"100%",gap:"20px",pb:"20px",children:[h!=="both"&&l.jsx(Z,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",children:G}),l.jsxs(j,{w:"100%",gap:"20px",children:[l.jsx(D,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:xe(p,2),valueStyle:{fontSize:"14px"},isLoading:u}),l.jsx(D,{label:"LP Burn Amount",value:`${ae} ${`${r==null?void 0:r.symbol} - ${i==null?void 0:i.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:u})]})]})]})}export{ke as default};
//# sourceMappingURL=WithdrawMode-Bn5-ch9y.js.map
