import{R as kn,aT as Rt,b9 as st,aZ as $t,d as F,u as Ci,aK as $r,r as O,bb as Mi,bc as tn,b8 as re,j as P,bd as Ii,b as Ne,a6 as $i,aB as en,H as Bi,V as An,aM as Zt,B as nn,k as rn,am as zi,T as Di,aU as qn,C as qi,a9 as On,be as Oi,aR as Fe}from"./index-BAaNMf6I.js";import{b as Le,T as je,d as Fi}from"./useGetPoolList-Ch-cSiNu.js";import{u as bn}from"./index-KuMFLApc.js";import{i as Nt,a as Fn,b as Li,c as Ln,d as ji,l as on,e as Vi,s as Xi,m as Gi,f as Yi}from"./linear-DYpwdEgO.js";import{a as Hi}from"./liquidity-CleGQ68a.js";import{u as Wi}from"./usePreviousValue-_yYeZiRa.js";import{A as jn}from"./ActionButton-B2QUfdRb.js";import{H as Ui}from"./HTextLabelBox-ByJi-I0M.js";import{V as Ki}from"./VTextLabelBox-cm99sedm.js";import{u as Zi}from"./useToken-DV8FZdgD.js";var Vn=180/Math.PI,sn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Br(t,e,n,r,i,o){var s,l,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Vn,skewX:Math.atan(u)*Vn,scaleX:s,scaleY:l}}var ce;function Ji(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?sn:Br(e.a,e.b,e.c,e.d,e.e,e.f)}function Qi(t){return t==null||(ce||(ce=document.createElementNS("http://www.w3.org/2000/svg","g")),ce.setAttribute("transform",t),!(t=ce.transform.baseVal.consolidate()))?sn:(t=t.matrix,Br(t.a,t.b,t.c,t.d,t.e,t.f))}function zr(t,e,n,r){function i(a){return a.length?a.pop()+" ":""}function o(a,d,h,c,f,w){if(a!==h||d!==c){var m=f.push("translate(",null,e,null,n);w.push({i:m-4,x:Nt(a,h)},{i:m-2,x:Nt(d,c)})}else(h||c)&&f.push("translate("+h+e+c+n)}function s(a,d,h,c){a!==d?(a-d>180?d+=360:d-a>180&&(a+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Nt(a,d)})):d&&h.push(i(h)+"rotate("+d+r)}function l(a,d,h,c){a!==d?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Nt(a,d)}):d&&h.push(i(h)+"skewX("+d+r)}function u(a,d,h,c,f,w){if(a!==h||d!==c){var m=f.push(i(f)+"scale(",null,",",null,")");w.push({i:m-4,x:Nt(a,h)},{i:m-2,x:Nt(d,c)})}else(h!==1||c!==1)&&f.push(i(f)+"scale("+h+","+c+")")}return function(a,d){var h=[],c=[];return a=t(a),d=t(d),o(a.translateX,a.translateY,d.translateX,d.translateY,h,c),s(a.rotate,d.rotate,h,c),l(a.skewX,d.skewX,h,c),u(a.scaleX,a.scaleY,d.scaleX,d.scaleY,h,c),a=d=null,function(f){for(var w=-1,m=c.length,y;++w<m;)h[(y=c[w]).i]=y.x(f);return h.join("")}}}var to=zr(Ji,"px, ","px)","deg)"),eo=zr(Qi,", ",")",")"),no=1e-12;function Xn(t){return((t=Math.exp(t))+1/t)/2}function ro(t){return((t=Math.exp(t))-1/t)/2}function io(t){return((t=Math.exp(2*t))-1)/(t+1)}const oo=function t(e,n,r){function i(o,s){var l=o[0],u=o[1],a=o[2],d=s[0],h=s[1],c=s[2],f=d-l,w=h-u,m=f*f+w*w,y,p;if(m<no)p=Math.log(c/a)/e,y=function(S){return[l+S*f,u+S*w,a*Math.exp(e*S*p)]};else{var v=Math.sqrt(m),_=(c*c-a*a+r*m)/(2*a*n*v),k=(c*c-a*a-r*m)/(2*c*n*v),A=Math.log(Math.sqrt(_*_+1)-_),b=Math.log(Math.sqrt(k*k+1)-k);p=(b-A)/e,y=function(S){var M=S*p,q=Xn(A),D=a/(n*v)*(q*io(e*M+A)-ro(A));return[l+D*f,u+D*w,a*q/Xn(e*M+A)]}}return y.duration=p*1e3*e/Math.SQRT2,y}return i.rho=function(o){var s=Math.max(.001,+o),l=s*s,u=l*l;return t(s,l,u)},i}(Math.SQRT2,2,4),so=(t,e)=>({fromAmount:"",setFromAmount:n=>{t(()=>({fromAmount:n}))},fromAmountValue:"",setFromAmountValue:n=>{t(()=>({fromAmountValue:n}))},toAmount:"",setToAmount:n=>{t(()=>({toAmount:n}))},toAmountValue:"",setToAmountValue:n=>{t(()=>({toAmountValue:n}))},liquidityAmount:"",setLiquidityAmount:n=>{t(()=>({liquidityAmount:n}))},tokenMaxA:"",setTokenMaxA:n=>{t(()=>({tokenMaxA:n}))},tokenMaxB:"",setTokenMaxB:n=>{t(()=>({tokenMaxB:n}))},byAmountIn:!0,setByAmountIn:n=>{t(()=>({byAmountIn:n}))},isTokenA:!0,setIsTokenA:n=>{t(()=>({isTokenA:n}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:n=>{t(()=>({percentMap:n}))},isFullRange:!1,setIsFullRange:n=>{t(()=>({isFullRange:n}))},fromToken:void 0,setFromToken:n=>{t(()=>({fromToken:n}))},fromTokenLock:!1,setFromTokenLock:n=>{t(()=>({fromTokenLock:n}))},toToken:void 0,setToToken:n=>{t(()=>({toToken:n}))},toTokenLock:!1,setToTokenLock:n=>{t(()=>({toTokenLock:n}))},totalAmount:void 0,setTotalAmount:n=>{t(()=>({totalAmount:n}))},autoStakePosition:!1,setAutoStakePosition:n=>{t(()=>({autoStakePosition:n}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:n=>{t(()=>({isFarmRewardsRange:n}))},resetAddLiquidity:()=>{t(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),ao=kn(so),co=(t,e)=>({lowerTickData:{},setLowerTickData:n=>{t(()=>({lowerTickData:n}))},upperTickData:{},setUpperTickData:n=>{t(()=>({upperTickData:n}))},tickDataLoading:!0,setTickDataLoading:n=>{t(()=>({tickDataLoading:n}))}}),Dr=kn(co);function uo(t,e,n){const r=Math.abs(t)%e;return r?t>0?r>e/2||n&&e<=2?t+e-r:t-r:r>e/2?t-e+r:t+r:n?t+e:t}function lo(){const{lowerTickData:t,setLowerTickData:e,upperTickData:n,setUpperTickData:r}=Dr(),i=(c,f,w)=>{const m=w.tokenA.decimals,y=w.tokenB.decimals;let p;Math.abs(c)==Math.abs(Rt.getMinIndex(Number(w.tickSpacing)))?p=f==="lower"?"0":"âˆž":p=st.tickIndexToPrice(c,m,y).toString();const v=p==="âˆž"?"âˆž":$t(p,6),_=Le(p),k=_==="âˆž"?"âˆž":$t(_,6),A={id:f,tokenA:w.tokenA,tokenB:w.tokenB,tick:c,price:p,displayPrice:v,reversePrice:_,displayReversePrice:k,tickSpacing:w.tickSpacing,pool:w.poolAddress};f==="lower"?e({...A}):r({...A})},o=(c,f,w)=>{i(c,"lower",w),i(f,"upper",w)},s=(c,f)=>{console.log("ðŸš€ ~ file: usePriceRange.ts:55 ~ handleActionPrice ~ tickData:",c),console.log("ðŸš€ ~ file: usePriceRange.ts:55 ~ handleActionPrice ~ action:",f);const w=c==null?void 0:c.tokenA,m=c==null?void 0:c.tokenB,y=c.tick,p=c.tickSpacing;if(!w||!m||!p)return;const v=f==="Add"?F(y).add(p).toNumber():F(y).sub(p).toNumber();if(F(v).gt(Rt.getMaxIndex(Number(c.tickSpacing)))||F(v).lt(Rt.getMinIndex(Number(c.tickSpacing))))return;const _=st.tickIndexToPrice(v,w.decimals,m.decimals).toString();console.log(_,"ðŸš€ ~ file: usePriceRange.ts:69 ~ handleActionPrice ~ price:");const k=_==="âˆž"?"âˆž":$t(_,6);if(console.log("ðŸš€ ~ file: usePriceRange.ts:71 ~ handleActionPrice ~ displayPrice:",c,k),k===c.displayPrice)s({...c,tick:v},f);else{const A=Le(_),b=A==="âˆž"?"âˆž":$t(A,6),S={...c,tick:v,price:_,displayPrice:k,reversePrice:A,displayReversePrice:b};c.id==="lower"?(console.log("ðŸš€ ~ file: usePriceRange.ts:55 ~ handleActionPrice ~ lower newData:",S),e({...S})):(console.log("ðŸš€ ~ file: usePriceRange.ts:55 ~ handleActionPrice ~ upper newData:",S),r({...S}))}};return{handleSetTickData:i,handleAddPrice:c=>{s(c,"Add")},handleSubPrice:c=>{s(c,"Sub")},handleSetFullRange:c=>{const f={...t,tick:Rt.getMinIndex(Number(c.tickSpacing)),price:"0",displayPrice:"0",reversePrice:"âˆž",displayReversePrice:"âˆž"};console.log("ðŸš€ ~ file: usePriceRange.ts:115 ~ handleSetFullRange ~ lowerData:",f),e(f);const w={...n,tick:Rt.getMaxIndex(Number(c.tickSpacing)),price:"âˆž",displayPrice:"âˆž",reversePrice:"0",displayReversePrice:"0"};console.log("ðŸš€ ~ file: usePriceRange.ts:115 ~ handleSetFullRange ~ upperData:",w),r(w)},handleInitTickData:o,setTickDataBasedOnPrice:(c,f,w)=>{const m=c.tokenA,y=c.tokenB;if(!m||!y)return;let p,v="";if(f==="âˆž"||f==="Infinity")p=Rt.getMaxIndex(Number(c.tickSpacing)),v="âˆž";else if(F(f).equals(0))p=Rt.getMinIndex(Number(c.tickSpacing)),v="0";else if(F(f).gt(0)){const S=st.priceToTickIndex(F(f),m.decimals,y.decimals),M=!(w&&c.id==="lower"||!w&&c.id==="upper");p=uo(Number(S),Number(c.tickSpacing),typeof w=="boolean"?M:void 0),v=st.tickIndexToPrice(Number(p),m.decimals,y.decimals).toString()}const _=v==="âˆž"?"âˆž":$t(v,6);console.log("ðŸš€ ~ setTickDataBasedOnPrice ~ displayPrice:",_);const k=Le(v),A=k==="âˆž"?"âˆž":$t(k,6),b={...c,tick:p,price:v,displayPrice:_,reversePrice:k,displayReversePrice:A};c.id==="lower"?e({...b}):r({...b})},handleResetRange:()=>{e({}),r({})}}}const fo=(t,e)=>({formatPriceData:[],setFormatPriceData:n=>{t(()=>({formatPriceData:n,formatPriceDataIsLoading:!1}))},formatPriceDataIsLoading:!0,setFormatPriceDataIsLoading:n=>{t(()=>({formatPriceDataIsLoading:n}))},ticksPool:{},setTicksPool:n=>{t(()=>({ticksPool:n}))}}),Tn=kn(fo);function Ve(t,e,n,r,i,o){var u,a,d;let s={...n},l=[];for(let h=i+(o?1:-1);o?h<r.length:h>=0;o?h++:h--){const c=Number((u=r[h])==null?void 0:u.tick),f=st.tickIndexToPrice(c,t.decimals,e.decimals),w={liquidityActive:s.liquidityActive,tick:c,liquidityNet:BigInt(((a=r[h])==null?void 0:a.liquidityNet)??""),price0:f.toString()};o?w.liquidityActive=BigInt(F(s.liquidityActive.toString()).add(((d=r[h])==null?void 0:d.liquidityNet)??0).toString()):!o&&!F(s.liquidityNet.toString()).eq("0")&&(w.liquidityActive=BigInt(F(s.liquidityActive.toString()).sub(s.liquidityNet.toString()).toString())),l.push(w),s=w}return o||(l=l.reverse()),l}const ho=(t,e)=>(t||t===0)&&e&&je[e]?Math.floor(t/je[e])*je[e]:void 0;function po(){const{fetchByApi:t}=Ci(),{clmmSdk:e}=$r(),{setFormatPriceData:n,setFormatPriceDataIsLoading:r,setTicksPool:i}=Tn(),o=async a=>{var f;const{poolAddress:d,tokenA:h,tokenB:c}=a;try{const m=await t("/router_v2/ticks","GET",{address:d,orderBy:"index",limit:1e3});console.log("ðŸš€ ~ getTicks11111 ~ res:",m);const y=(f=m==null?void 0:m.list)==null?void 0:f.sort((v,_)=>v.index-_.index);console.log("ðŸš€ ~ getTicks11111 ~ list:",y);const p=y.map(v=>({tick:v.index,sqrtPrice:v.sqrt_price,liquidityNet:v.liquidity_net,liquidityGross:v.liquidity_gross}));return console.log("ðŸš€ ~ getTicks11111 ~ tickList:",p),{ticks:p,address:m==null?void 0:m.address,ticksPoolInfo:m==null?void 0:m.pool}}catch(w){console.log("ðŸš€ ~ getTicks ~ error:",w);const m=await e.Pool.fetchTicks({pool_id:d,coinTypeA:h.coin_type,coinTypeB:c.coin_type}),y=[];if(m&&(m==null?void 0:m.length)>0){const p=Mi(m);p==null||p.forEach(v=>{y.push({tick:Number(v.index),liquidityNet:F(v.liquidityNet.toString()).toString(),liquidityGross:v.liquidityGross.toString(),id:v.objectId})})}return{ticks:y,address:d}}},s=a=>{var L,g,N,x,T,E,R;const{tokenA:d,tokenB:h,tickSpacing:c,currentTickIndex:f,feeRate:w,ticks:m,ticksPool:y}=a;if(console.log("ðŸš€ ~ getProcessedAsPrice ~ ticksPool:",y),console.log("ðŸš€ ~ getProcessedAsPrice ~ feeRate:",w),console.log("ðŸš€ ~ getProcessedAsPrice ~ tickSpacing:",c),!w||!c)return;console.log("ðŸš€ ~ getProcessedAsPrice ~ currentTickIndex:",f),console.log("ðŸš€ ~ getProcessedAsPrice ~ feeRate:",w);const p=(y==null?void 0:y.current_tick_index)||f,v=ho(p,w);if(console.log("ðŸš€ ~ getProcessedAsPrice ~ activeTick:",v),v===void 0)return;const _=JSON.parse(JSON.stringify(m)).sort((C,z)=>C-z);console.log("ðŸš€ ~ getProcessedAsPrice ~ newTicks:",_);const k=(y==null?void 0:y.liquidity)||a.liquidity;if(_.length===0)return{activeTick:v,data:[{liquidityActive:BigInt(k??0),tick:v,liquidityNet:0n,price0:st.tickIndexToPrice(v,d.decimals,h.decimals).toString()}]};if(console.log("ðŸš€ ~ getProcessedAsPrice ~ currTick:",p),console.log("ðŸš€ ~ getProcessedAsPrice ~ newTicks.length === 2:",_.length===2),console.log("ðŸš€ ~ getProcessedAsPrice ~  newTicks[0]?.tick + newTicks[1]?.tick:",((L=_[0])==null?void 0:L.tick)+((g=_[1])==null?void 0:g.tick)),_.length===2&&p>((N=_[0])==null?void 0:N.tick)&&p<_[1].tick)return console.log("ðŸš€ ~ getProcessedAsPrice ~ is full range:"),{activeTick:v,data:[{..._[0],liquidityActive:_[0].liquidityNet,price0:st.tickIndexToPrice(_[0].tick,d.decimals,h.decimals).toString()},{liquidityActive:BigInt(k??0),tick:v,liquidityNet:0n,price0:st.tickIndexToPrice(v,d.decimals,h.decimals).toString()},{..._[1],liquidityActive:_[0].liquidityNet,price0:st.tickIndexToPrice(_[1].tick,d.decimals,h.decimals).toString()}]};const A=m.findIndex(({tick:C})=>C&&C>v)-1,b=m.findIndex(({tick:C})=>C&&C>=v);if(console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ pivot:",A),console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ currentIndexPos:",b),console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ liquidity:",k),A<0){const C=Ve(d,h,{liquidityActive:BigInt(k??0),tick:v,liquidityNet:0n,price0:st.tickIndexToPrice(v,d.decimals,h.decimals).toString()},_,-1,!0);return{activeTick:v,data:[...C]}}console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ params:",a),console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ activeTick:",v),console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ ticks:",JSON.parse(JSON.stringify(m)));const S=st.tickIndexToPrice(v,d.decimals,h.decimals),M={liquidityActive:BigInt(k??0),tick:v,liquidityNet:Number((x=m[A])==null?void 0:x.tick)===v?BigInt(((T=m[A])==null?void 0:T.liquidityNet)??0):BigInt(0),price0:S.toString()};console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ activeTickProcessed:",M);const q=Ve(d,h,M,_,A,!0);console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ subsequentTicks:",q);const D=Ve(d,h,M,_,A,!1);console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ previousTicks:",D);const B={liquidityActive:BigInt(k??0),tick:f,liquidityNet:Number((E=m[A])==null?void 0:E.tick)===v?BigInt(((R=m[A])==null?void 0:R.liquidityNet)??0):BigInt(0),price0:st.tickIndexToPrice(f,d.decimals,h.decimals).toString()},$=Number(f)<Number(v)?D.concat(B).concat(M).concat(q):D.concat(M).concat(B).concat(q);return console.log("Test Depth Data###ðŸš€ ~ getProcessedAsPrice ~ ticksProcessed:",$),{activeTick:v,data:$}},l=a=>{if(!a||!(a!=null&&a.length))return[];const d=[];for(let h=0;h<a.length;h++){const c=a[h],f={depth:parseFloat(c.liquidityActive.toString()),price:parseFloat(c.price0)};f.depth>=0&&d.push(f)}return d},u=async a=>{const{tokenA:d,tokenB:h}=a;r(!0);try{console.log("Test Depth Data###ðŸš€ ~ getFormattedData ~ params:",a);const c=await o(a);console.log("Test Depth Data###ðŸš€ ~ getFormattedData ~ ticks:",c);const f=s({...a,ticks:(c==null?void 0:c.ticks)||[],ticksPool:c==null?void 0:c.ticksPoolInfo});console.log("Test Depth Data###ðŸš€ ~ getFormattedData ~ priceData:",f);const w=l(f==null?void 0:f.data);console.log("Test Depth Data###ðŸš€ ~ getFormattedData ~ formatPriceData:",w);const m=c!=null&&c.ticksPoolInfo?c==null?void 0:c.ticksPoolInfo:{current_sqrt_price:"",current_tick_index:a.currentTickIndex,id:a.poolAddress,liquidity:a.liquidity},y=st.tickIndexToPrice(m.current_tick_index,d.decimals,h.decimals).toString();m.price=y,m.reversePrice=F(1).div(y).toString(),i({...m}),n(w)}catch(c){console.log("Test Depth Data###ðŸš€ ~ getFormattedData ~ error:",c),i({}),n([])}};return O.useEffect(()=>()=>{r(!0),n([])},[]),{getFormattedData:u}}function go(t){return t}var mo=3,Gn=1e-6;function yo(t){return"translate("+t+",0)"}function vo(t){return e=>+t(e)}function wo(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function _o(){return!this.__axis}function xo(t,e){var n=[],r=null,i=null,o=6,s=6,l=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,a=1,d="y",h=yo;function c(f){var w=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):go),y=Math.max(o,0)+l,p=e.range(),v=+p[0]+u,_=+p[p.length-1]+u,k=(e.bandwidth?wo:vo)(e.copy(),u),A=f.selection?f.selection():f,b=A.selectAll(".domain").data([null]),S=A.selectAll(".tick").data(w,e).order(),M=S.exit(),q=S.enter().append("g").attr("class","tick"),D=S.select("line"),B=S.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(q),D=D.merge(q.append("line").attr("stroke","currentColor").attr(d+"2",a*o)),B=B.merge(q.append("text").attr("fill","currentColor").attr(d,a*y).attr("dy","0.71em")),f!==A&&(b=b.transition(f),S=S.transition(f),D=D.transition(f),B=B.transition(f),M=M.transition(f).attr("opacity",Gn).attr("transform",function($){return isFinite($=k($))?h($+u):this.getAttribute("transform")}),q.attr("opacity",Gn).attr("transform",function($){var L=this.parentNode.__axis;return h((L&&isFinite(L=L($))?L:k($))+u)})),M.remove(),b.attr("d",s?"M"+v+","+a*s+"V"+u+"H"+_+"V"+a*s:"M"+v+","+u+"H"+_),S.attr("opacity",1).attr("transform",function($){return h(k($)+u)}),D.attr(d+"2",a*o),B.attr(d,a*y).text(m),A.filter(_o).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),A.each(function(){this.__axis=k})}return c.scale=function(f){return arguments.length?(e=f,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(f){return arguments.length?(n=f==null?[]:Array.from(f),c):n.slice()},c.tickValues=function(f){return arguments.length?(r=f==null?null:Array.from(f),c):r&&r.slice()},c.tickFormat=function(f){return arguments.length?(i=f,c):i},c.tickSize=function(f){return arguments.length?(o=s=+f,c):o},c.tickSizeInner=function(f){return arguments.length?(o=+f,c):o},c.tickSizeOuter=function(f){return arguments.length?(s=+f,c):s},c.tickPadding=function(f){return arguments.length?(l=+f,c):l},c.offset=function(f){return arguments.length?(u=+f,c):u},c}function ko(t){return xo(mo,t)}var Ao={value:()=>{}};function Ee(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new he(n)}function he(t){this._=t}function bo(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}he.prototype=Ee.prototype={constructor:he,on:function(t,e){var n=this._,r=bo(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=To(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=Yn(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Yn(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new he(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function To(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Yn(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ao,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var an="http://www.w3.org/1999/xhtml";const Hn={svg:"http://www.w3.org/2000/svg",xhtml:an,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ce(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Hn.hasOwnProperty(e)?{space:Hn[e],local:t}:t}function So(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===an&&e.documentElement.namespaceURI===an?e.createElement(t):e.createElementNS(n,t)}}function Po(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qr(t){var e=Ce(t);return(e.local?Po:So)(e)}function Ro(){}function Sn(t){return t==null?Ro:function(){return this.querySelector(t)}}function No(t){typeof t!="function"&&(t=Sn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=new Array(s),u,a,d=0;d<s;++d)(u=o[d])&&(a=t.call(u,u.__data__,d,o))&&("__data__"in u&&(a.__data__=u.__data__),l[d]=a);return new lt(r,this._parents)}function Eo(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Co(){return[]}function Or(t){return t==null?Co:function(){return this.querySelectorAll(t)}}function Mo(t){return function(){return Eo(t.apply(this,arguments))}}function Io(t){typeof t=="function"?t=Mo(t):t=Or(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&(r.push(t.call(u,u.__data__,a,s)),i.push(u));return new lt(r,i)}function Fr(t){return function(){return this.matches(t)}}function Lr(t){return function(e){return e.matches(t)}}var $o=Array.prototype.find;function Bo(t){return function(){return $o.call(this.children,t)}}function zo(){return this.firstElementChild}function Do(t){return this.select(t==null?zo:Bo(typeof t=="function"?t:Lr(t)))}var qo=Array.prototype.filter;function Oo(){return Array.from(this.children)}function Fo(t){return function(){return qo.call(this.children,t)}}function Lo(t){return this.selectAll(t==null?Oo:Fo(typeof t=="function"?t:Lr(t)))}function jo(t){typeof t!="function"&&(t=Fr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new lt(r,this._parents)}function jr(t){return new Array(t.length)}function Vo(){return new lt(this._enter||this._groups.map(jr),this._parents)}function xe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xe.prototype={constructor:xe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Xo(t){return function(){return t}}function Go(t,e,n,r,i,o){for(var s=0,l,u=e.length,a=o.length;s<a;++s)(l=e[s])?(l.__data__=o[s],r[s]=l):n[s]=new xe(t,o[s]);for(;s<u;++s)(l=e[s])&&(i[s]=l)}function Yo(t,e,n,r,i,o,s){var l,u,a=new Map,d=e.length,h=o.length,c=new Array(d),f;for(l=0;l<d;++l)(u=e[l])&&(c[l]=f=s.call(u,u.__data__,l,e)+"",a.has(f)?i[l]=u:a.set(f,u));for(l=0;l<h;++l)f=s.call(t,o[l],l,o)+"",(u=a.get(f))?(r[l]=u,u.__data__=o[l],a.delete(f)):n[l]=new xe(t,o[l]);for(l=0;l<d;++l)(u=e[l])&&a.get(c[l])===u&&(i[l]=u)}function Ho(t){return t.__data__}function Wo(t,e){if(!arguments.length)return Array.from(this,Ho);var n=e?Yo:Go,r=this._parents,i=this._groups;typeof t!="function"&&(t=Xo(t));for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),a=0;a<o;++a){var d=r[a],h=i[a],c=h.length,f=Uo(t.call(d,d&&d.__data__,a,r)),w=f.length,m=l[a]=new Array(w),y=s[a]=new Array(w),p=u[a]=new Array(c);n(d,h,m,y,p,f,e);for(var v=0,_=0,k,A;v<w;++v)if(k=m[v]){for(v>=_&&(_=v+1);!(A=y[_])&&++_<w;);k._next=A||null}}return s=new lt(s,r),s._enter=l,s._exit=u,s}function Uo(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Ko(){return new lt(this._exit||this._groups.map(jr),this._parents)}function Zo(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Jo(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),l=new Array(i),u=0;u<s;++u)for(var a=n[u],d=r[u],h=a.length,c=l[u]=new Array(h),f,w=0;w<h;++w)(f=a[w]||d[w])&&(c[w]=f);for(;u<i;++u)l[u]=n[u];return new lt(l,this._parents)}function Qo(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function ts(t){t||(t=es);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],l=s.length,u=i[o]=new Array(l),a,d=0;d<l;++d)(a=s[d])&&(u[d]=a);u.sort(e)}return new lt(i,this._parents).order()}function es(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ns(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function rs(){return Array.from(this)}function is(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function os(){let t=0;for(const e of this)++t;return t}function ss(){return!this.node()}function as(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,l;o<s;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function cs(t){return function(){this.removeAttribute(t)}}function us(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ls(t,e){return function(){this.setAttribute(t,e)}}function fs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function hs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ds(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ps(t,e){var n=Ce(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?us:cs:typeof e=="function"?n.local?ds:hs:n.local?fs:ls)(n,e))}function Vr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function gs(t){return function(){this.style.removeProperty(t)}}function ms(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ys(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vs(t,e,n){return arguments.length>1?this.each((e==null?gs:typeof e=="function"?ys:ms)(t,e,n??"")):Ft(this.node(),t)}function Ft(t,e){return t.style.getPropertyValue(e)||Vr(t).getComputedStyle(t,null).getPropertyValue(e)}function ws(t){return function(){delete this[t]}}function _s(t,e){return function(){this[t]=e}}function xs(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ks(t,e){return arguments.length>1?this.each((e==null?ws:typeof e=="function"?xs:_s)(t,e)):this.node()[t]}function Xr(t){return t.trim().split(/^|\s+/)}function Pn(t){return t.classList||new Gr(t)}function Gr(t){this._node=t,this._names=Xr(t.getAttribute("class")||"")}Gr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yr(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Hr(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function As(t){return function(){Yr(this,t)}}function bs(t){return function(){Hr(this,t)}}function Ts(t,e){return function(){(e.apply(this,arguments)?Yr:Hr)(this,t)}}function Ss(t,e){var n=Xr(t+"");if(arguments.length<2){for(var r=Pn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ts:e?As:bs)(n,e))}function Ps(){this.textContent=""}function Rs(t){return function(){this.textContent=t}}function Ns(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Es(t){return arguments.length?this.each(t==null?Ps:(typeof t=="function"?Ns:Rs)(t)):this.node().textContent}function Cs(){this.innerHTML=""}function Ms(t){return function(){this.innerHTML=t}}function Is(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function $s(t){return arguments.length?this.each(t==null?Cs:(typeof t=="function"?Is:Ms)(t)):this.node().innerHTML}function Bs(){this.nextSibling&&this.parentNode.appendChild(this)}function zs(){return this.each(Bs)}function Ds(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qs(){return this.each(Ds)}function Os(t){var e=typeof t=="function"?t:qr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fs(){return null}function Ls(t,e){var n=typeof t=="function"?t:qr(t),r=e==null?Fs:typeof e=="function"?e:Sn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function js(){var t=this.parentNode;t&&t.removeChild(this)}function Vs(){return this.each(js)}function Xs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ys(t){return this.select(t?Gs:Xs)}function Hs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ws(t){return function(e){t.call(this,e,this.__data__)}}function Us(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ks(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Zs(t,e,n){return function(){var r=this.__on,i,o=Ws(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Js(t,e,n){var r=Us(t+""),i,o=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,a=l.length,d;u<a;++u)for(i=0,d=l[u];i<o;++i)if((s=r[i]).type===d.type&&s.name===d.name)return d.value}return}for(l=e?Zs:Ks,i=0;i<o;++i)this.each(l(r[i],e,n));return this}function Wr(t,e,n){var r=Vr(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Qs(t,e){return function(){return Wr(this,t,e)}}function ta(t,e){return function(){return Wr(this,t,e.apply(this,arguments))}}function ea(t,e){return this.each((typeof e=="function"?ta:Qs)(t,e))}function*na(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Ur=[null];function lt(t,e){this._groups=t,this._parents=e}function se(){return new lt([[document.documentElement]],Ur)}function ra(){return this}lt.prototype=se.prototype={constructor:lt,select:No,selectAll:Io,selectChild:Do,selectChildren:Lo,filter:jo,data:Wo,enter:Vo,exit:Ko,join:Zo,merge:Jo,selection:ra,order:Qo,sort:ts,call:ns,nodes:rs,node:is,size:os,empty:ss,each:as,attr:ps,style:vs,property:ks,classed:Ss,text:Es,html:$s,raise:zs,lower:qs,append:Os,insert:Ls,remove:Vs,clone:Ys,datum:Hs,on:Js,dispatch:ea,[Symbol.iterator]:na};function J(t){return typeof t=="string"?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],Ur)}function ia(t){let e;for(;e=t.sourceEvent;)t=e;return t}function _t(t,e){if(t=ia(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const cn={capture:!0,passive:!1};function un(t){t.preventDefault(),t.stopImmediatePropagation()}function Kr(t){var e=t.document.documentElement,n=J(t).on("dragstart.drag",un,cn);"onselectstart"in e?n.on("selectstart.drag",un,cn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zr(t,e){var n=t.document.documentElement,r=J(t).on("dragstart.drag",null);e&&(r.on("click.drag",un,cn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Lt=0,Jt=0,Ut=0,Jr=1e3,ke,Qt,Ae=0,It=0,Me=0,ie=typeof performance=="object"&&performance.now?performance:Date,Qr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Rn(){return It||(Qr(oa),It=ie.now()+Me)}function oa(){It=0}function be(){this._call=this._time=this._next=null}be.prototype=ti.prototype={constructor:be,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Rn():+n)+(e==null?0:+e),!this._next&&Qt!==this&&(Qt?Qt._next=this:ke=this,Qt=this),this._call=t,this._time=n,ln()},stop:function(){this._call&&(this._call=null,this._time=1/0,ln())}};function ti(t,e,n){var r=new be;return r.restart(t,e,n),r}function sa(){Rn(),++Lt;for(var t=ke,e;t;)(e=It-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Lt}function Wn(){It=(Ae=ie.now())+Me,Lt=Jt=0;try{sa()}finally{Lt=0,ca(),It=0}}function aa(){var t=ie.now(),e=t-Ae;e>Jr&&(Me-=e,Ae=t)}function ca(){for(var t,e=ke,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ke=n);Qt=t,ln(r)}function ln(t){if(!Lt){Jt&&(Jt=clearTimeout(Jt));var e=t-It;e>24?(t<1/0&&(Jt=setTimeout(Wn,t-ie.now()-Me)),Ut&&(Ut=clearInterval(Ut))):(Ut||(Ae=ie.now(),Ut=setInterval(aa,Jr)),Lt=1,Qr(Wn))}}function Un(t,e,n){var r=new be;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ua=Ee("start","end","cancel","interrupt"),la=[],ei=0,Kn=1,fn=2,de=3,Zn=4,hn=5,pe=6;function Ie(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;fa(t,n,{name:e,index:r,group:i,on:ua,tween:la,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ei})}function Nn(t,e){var n=pt(t,e);if(n.state>ei)throw new Error("too late; already scheduled");return n}function mt(t,e){var n=pt(t,e);if(n.state>de)throw new Error("too late; already running");return n}function pt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fa(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=ti(o,0,n.time);function o(a){n.state=Kn,n.timer.restart(s,n.delay,n.time),n.delay<=a&&s(a-n.delay)}function s(a){var d,h,c,f;if(n.state!==Kn)return u();for(d in r)if(f=r[d],f.name===n.name){if(f.state===de)return Un(s);f.state===Zn?(f.state=pe,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[d]):+d<e&&(f.state=pe,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[d])}if(Un(function(){n.state===de&&(n.state=Zn,n.timer.restart(l,n.delay,n.time),l(a))}),n.state=fn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===fn){for(n.state=de,i=new Array(c=n.tween.length),d=0,h=-1;d<c;++d)(f=n.tween[d].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function l(a){for(var d=a<n.duration?n.ease.call(null,a/n.duration):(n.timer.restart(u),n.state=hn,1),h=-1,c=i.length;++h<c;)i[h].call(t,d);n.state===hn&&(n.on.call("end",t,t.__data__,n.index,n.group),u())}function u(){n.state=pe,n.timer.stop(),delete r[e];for(var a in r)return;delete t.__transition}}function Ot(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>fn&&r.state<hn,r.state=pe,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function ha(t){return this.each(function(){Ot(this,t)})}function da(t,e){var n,r;return function(){var i=mt(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,l=r.length;s<l;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function pa(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=mt(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var l={name:e,value:n},u=0,a=i.length;u<a;++u)if(i[u].name===e){i[u]=l;break}u===a&&i.push(l)}o.tween=i}}function ga(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?da:pa)(n,t,e))}function En(t,e,n){var r=t._id;return t.each(function(){var i=mt(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return pt(i,r).value[e]}}function ni(t,e){var n;return(typeof e=="number"?Nt:e instanceof Ln?Fn:(n=Ln(e))?(e=n,Fn):Li)(t,e)}function ma(t){return function(){this.removeAttribute(t)}}function ya(t){return function(){this.removeAttributeNS(t.space,t.local)}}function va(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function wa(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function _a(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function xa(t,e,n){var r,i,o;return function(){var s,l=n(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),u=l+"",s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l)))}}function ka(t,e){var n=Ce(t),r=n==="transform"?eo:ni;return this.attrTween(t,typeof e=="function"?(n.local?xa:_a)(n,r,En(this,"attr."+t,e)):e==null?(n.local?ya:ma)(n):(n.local?wa:va)(n,r,e))}function Aa(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ba(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ta(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ba(t,o)),n}return i._value=e,i}function Sa(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Aa(t,o)),n}return i._value=e,i}function Pa(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Ce(t);return this.tween(n,(r.local?Ta:Sa)(r,e))}function Ra(t,e){return function(){Nn(this,t).delay=+e.apply(this,arguments)}}function Na(t,e){return e=+e,function(){Nn(this,t).delay=e}}function Ea(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ra:Na)(e,t)):pt(this.node(),e).delay}function Ca(t,e){return function(){mt(this,t).duration=+e.apply(this,arguments)}}function Ma(t,e){return e=+e,function(){mt(this,t).duration=e}}function Ia(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ca:Ma)(e,t)):pt(this.node(),e).duration}function $a(t,e){if(typeof e!="function")throw new Error;return function(){mt(this,t).ease=e}}function Ba(t){var e=this._id;return arguments.length?this.each($a(e,t)):pt(this.node(),e).ease}function za(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mt(this,t).ease=n}}function Da(t){if(typeof t!="function")throw new Error;return this.each(za(this._id,t))}function qa(t){typeof t!="function"&&(t=Fr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,l=r[i]=[],u,a=0;a<s;++a)(u=o[a])&&t.call(u,u.__data__,a,o)&&l.push(u);return new At(r,this._parents,this._name,this._id)}function Oa(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),l=0;l<o;++l)for(var u=e[l],a=n[l],d=u.length,h=s[l]=new Array(d),c,f=0;f<d;++f)(c=u[f]||a[f])&&(h[f]=c);for(;l<r;++l)s[l]=e[l];return new At(s,this._parents,this._name,this._id)}function Fa(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function La(t,e,n){var r,i,o=Fa(e)?Nn:mt;return function(){var s=o(this,t),l=s.on;l!==r&&(i=(r=l).copy()).on(e,n),s.on=i}}function ja(t,e){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(t):this.each(La(n,t,e))}function Va(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Xa(){return this.on("end.remove",Va(this._id))}function Ga(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Sn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l=r[s],u=l.length,a=o[s]=new Array(u),d,h,c=0;c<u;++c)(d=l[c])&&(h=t.call(d,d.__data__,c,l))&&("__data__"in d&&(h.__data__=d.__data__),a[c]=h,Ie(a[c],e,n,c,a,pt(d,n)));return new At(o,this._parents,e,n)}function Ya(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Or(t));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var u=r[l],a=u.length,d,h=0;h<a;++h)if(d=u[h]){for(var c=t.call(d,d.__data__,h,u),f,w=pt(d,n),m=0,y=c.length;m<y;++m)(f=c[m])&&Ie(f,e,n,m,c,w);o.push(c),s.push(d)}return new At(o,s,e,n)}var Ha=se.prototype.constructor;function Wa(){return new Ha(this._groups,this._parents)}function Ua(t,e){var n,r,i;return function(){var o=Ft(this,t),s=(this.style.removeProperty(t),Ft(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function ri(t){return function(){this.style.removeProperty(t)}}function Ka(t,e,n){var r,i=n+"",o;return function(){var s=Ft(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function Za(t,e,n){var r,i,o;return function(){var s=Ft(this,t),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Ft(this,t))),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,l))}}function Ja(t,e){var n,r,i,o="style."+e,s="end."+o,l;return function(){var u=mt(this,t),a=u.on,d=u.value[o]==null?l||(l=ri(e)):void 0;(a!==n||i!==d)&&(r=(n=a).copy()).on(s,i=d),u.on=r}}function Qa(t,e,n){var r=(t+="")=="transform"?to:ni;return e==null?this.styleTween(t,Ua(t,r)).on("end.style."+t,ri(t)):typeof e=="function"?this.styleTween(t,Za(t,r,En(this,"style."+t,e))).each(Ja(this._id,t)):this.styleTween(t,Ka(t,r,e),n).on("end.style."+t,null)}function tc(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function ec(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&tc(t,s,n)),r}return o._value=e,o}function nc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,ec(t,e,n??""))}function rc(t){return function(){this.textContent=t}}function ic(t){return function(){var e=t(this);this.textContent=e??""}}function oc(t){return this.tween("text",typeof t=="function"?ic(En(this,"text",t)):rc(t==null?"":t+""))}function sc(t){return function(e){this.textContent=t.call(this,e)}}function ac(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&sc(i)),e}return r._value=t,r}function cc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ac(t))}function uc(){for(var t=this._name,e=this._id,n=ii(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)if(u=s[a]){var d=pt(u,e);Ie(u,t,n,a,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new At(r,this._parents,t,n)}function lc(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var l={value:s},u={value:function(){--i===0&&o()}};n.each(function(){var a=mt(this,r),d=a.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),a.on=e}),i===0&&o()})}var fc=0;function At(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ii(){return++fc}var vt=se.prototype;At.prototype={constructor:At,select:Ga,selectAll:Ya,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:qa,merge:Oa,selection:Wa,transition:uc,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:ja,attr:ka,attrTween:Pa,style:Qa,styleTween:nc,text:oc,textTween:cc,remove:Xa,tween:ga,delay:Ea,duration:Ia,ease:Ba,easeVarying:Da,end:lc,[Symbol.iterator]:vt[Symbol.iterator]};function hc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var dc={time:null,delay:0,duration:250,ease:hc};function pc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function gc(t){var e,n;t instanceof At?(e=t._id,t=t._name):(e=ii(),(n=dc).time=Rn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],l=s.length,u,a=0;a<l;++a)(u=s[a])&&Ie(u,t,e,a,s,n||pc(u,e));return new At(r,this._parents,t,e)}se.prototype.interrupt=ha;se.prototype.transition=gc;const Xe=t=>()=>t;function mc(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function yc(t){t.stopImmediatePropagation()}function Ge(t){t.preventDefault(),t.stopImmediatePropagation()}var Jn={name:"drag"},Ye={name:"space"},Bt={name:"handle"},zt={name:"center"};const{abs:Qn,max:it,min:ot}=Math;function tr(t){return[+t[0],+t[1]]}function er(t){return[tr(t[0]),tr(t[1])]}var ge={name:"x",handles:["w","e"].map(dn),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},He={},wt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},nr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},rr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},vc={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},wc={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function dn(t){return{type:t}}function _c(t){return!t.ctrlKey&&!t.button}function xc(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function kc(){return navigator.maxTouchPoints||"ontouchstart"in this}function We(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ac(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function bc(){return Tc(ge)}function Tc(t){var e=xc,n=_c,r=kc,i=!0,o=Ee("start","brush","end"),s=6,l;function u(y){var p=y.property("__brush",m).selectAll(".overlay").data([dn("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",wt.overlay).merge(p).each(function(){var _=We(this).extent;J(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),y.selectAll(".selection").data([dn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",wt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=y.selectAll(".handle").data(t.handles,function(_){return _.type});v.exit().remove(),v.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return wt[_.type]}),y.each(a).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",c).filter(r).on("touchstart.brush",c).on("touchmove.brush",f).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(y,p,v){y.tween?y.on("start.brush",function(_){d(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){d(this,arguments).end(_)}).tween("brush",function(){var _=this,k=_.__brush,A=d(_,arguments),b=k.selection,S=t.input(typeof p=="function"?p.apply(this,arguments):p,k.extent),M=ji(b,S);function q(D){k.selection=D===1&&S===null?null:M(D),a.call(_),A.brush()}return b!==null&&S!==null?q:q(1)}):y.each(function(){var _=this,k=arguments,A=_.__brush,b=t.input(typeof p=="function"?p.apply(_,k):p,A.extent),S=d(_,k).beforestart();Ot(_),A.selection=b===null?null:b,a.call(_),S.start(v).brush(v).end(v)})},u.clear=function(y,p){u.move(y,null,p)};function a(){var y=J(this),p=We(this).selection;p?(y.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?p[1][0]-s/2:p[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?p[1][1]-s/2:p[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?p[1][0]-p[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?p[1][1]-p[0][1]+s:s})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(y,p,v){var _=y.__brush.emitter;return _&&(!v||!_.clean)?_:new h(y,p,v)}function h(y,p,v){this.that=y,this.args=p,this.state=y.__brush,this.active=0,this.clean=v}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,p){return this.starting?(this.starting=!1,this.emit("start",y,p)):this.emit("brush",y),this},brush:function(y,p){return this.emit("brush",y,p),this},end:function(y,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,p)),this},emit:function(y,p,v){var _=J(this.that).datum();o.call(y,this.that,new mc(y,{sourceEvent:p,target:u,selection:t.output(this.state.selection),mode:v,dispatch:o}),_)}};function c(y){if(l&&!y.touches||!n.apply(this,arguments))return;var p=this,v=y.target.__data__.type,_=(i&&y.metaKey?v="overlay":v)==="selection"?Jn:i&&y.altKey?zt:Bt,k=t===He?null:vc[v],A=t===ge?null:wc[v],b=We(p),S=b.extent,M=b.selection,q=S[0][0],D,B,$=S[0][1],L,g,N=S[1][0],x,T,E=S[1][1],R,C,z=0,I=0,G,X=k&&A&&i&&y.shiftKey,W,Z,Y=Array.from(y.touches||[y],j=>{const tt=j.identifier;return j=_t(j,p),j.point0=j.slice(),j.identifier=tt,j});Ot(p);var K=d(p,arguments,!0).beforestart();if(v==="overlay"){M&&(G=!0);const j=[Y[0],Y[1]||Y[0]];b.selection=M=[[D=t===He?q:ot(j[0][0],j[1][0]),L=t===ge?$:ot(j[0][1],j[1][1])],[x=t===He?N:it(j[0][0],j[1][0]),R=t===ge?E:it(j[0][1],j[1][1])]],Y.length>1&&Pt(y)}else D=M[0][0],L=M[0][1],x=M[1][0],R=M[1][1];B=D,g=L,T=x,C=R;var nt=J(p).attr("pointer-events","none"),yt=nt.selectAll(".overlay").attr("cursor",wt[v]);if(y.touches)K.moved=ht,K.ended=Dn;else{var St=J(y.view).on("mousemove.brush",ht,!0).on("mouseup.brush",Dn,!0);i&&St.on("keydown.brush",Ni,!0).on("keyup.brush",Ei,!0),Kr(y.view)}a.call(p),K.start(y,_.name);function ht(j){for(const tt of j.changedTouches||[j])for(const Wt of Y)Wt.identifier===tt.identifier&&(Wt.cur=_t(tt,p));if(X&&!W&&!Z&&Y.length===1){const tt=Y[0];Qn(tt.cur[0]-tt[0])>Qn(tt.cur[1]-tt[1])?Z=!0:W=!0}for(const tt of Y)tt.cur&&(tt[0]=tt.cur[0],tt[1]=tt.cur[1]);G=!0,Ge(j),Pt(j)}function Pt(j){const tt=Y[0],Wt=tt.point0;var bt;switch(z=tt[0]-Wt[0],I=tt[1]-Wt[1],_){case Ye:case Jn:{k&&(z=it(q-D,ot(N-x,z)),B=D+z,T=x+z),A&&(I=it($-L,ot(E-R,I)),g=L+I,C=R+I);break}case Bt:{Y[1]?(k&&(B=it(q,ot(N,Y[0][0])),T=it(q,ot(N,Y[1][0])),k=1),A&&(g=it($,ot(E,Y[0][1])),C=it($,ot(E,Y[1][1])),A=1)):(k<0?(z=it(q-D,ot(N-D,z)),B=D+z,T=x):k>0&&(z=it(q-x,ot(N-x,z)),B=D,T=x+z),A<0?(I=it($-L,ot(E-L,I)),g=L+I,C=R):A>0&&(I=it($-R,ot(E-R,I)),g=L,C=R+I));break}case zt:{k&&(B=it(q,ot(N,D-z*k)),T=it(q,ot(N,x+z*k))),A&&(g=it($,ot(E,L-I*A)),C=it($,ot(E,R+I*A)));break}}T<B&&(k*=-1,bt=D,D=x,x=bt,bt=B,B=T,T=bt,v in nr&&yt.attr("cursor",wt[v=nr[v]])),C<g&&(A*=-1,bt=L,L=R,R=bt,bt=g,g=C,C=bt,v in rr&&yt.attr("cursor",wt[v=rr[v]])),b.selection&&(M=b.selection),W&&(B=M[0][0],T=M[1][0]),Z&&(g=M[0][1],C=M[1][1]),(M[0][0]!==B||M[0][1]!==g||M[1][0]!==T||M[1][1]!==C)&&(b.selection=[[B,g],[T,C]],a.call(p),K.brush(j,_.name))}function Dn(j){if(yc(j),j.touches){if(j.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Zr(j.view,G),St.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);nt.attr("pointer-events","all"),yt.attr("cursor",wt.overlay),b.selection&&(M=b.selection),Ac(M)&&(b.selection=null,a.call(p)),K.end(j,_.name)}function Ni(j){switch(j.keyCode){case 16:{X=k&&A;break}case 18:{_===Bt&&(k&&(x=T-z*k,D=B+z*k),A&&(R=C-I*A,L=g+I*A),_=zt,Pt(j));break}case 32:{(_===Bt||_===zt)&&(k<0?x=T-z:k>0&&(D=B-z),A<0?R=C-I:A>0&&(L=g-I),_=Ye,yt.attr("cursor",wt.selection),Pt(j));break}default:return}Ge(j)}function Ei(j){switch(j.keyCode){case 16:{X&&(W=Z=X=!1,Pt(j));break}case 18:{_===zt&&(k<0?x=T:k>0&&(D=B),A<0?R=C:A>0&&(L=g),_=Bt,Pt(j));break}case 32:{_===Ye&&(j.altKey?(k&&(x=T-z*k,D=B+z*k),A&&(R=C-I*A,L=g+I*A),_=zt):(k<0?x=T:k>0&&(D=B),A<0?R=C:A>0&&(L=g),_=Bt),yt.attr("cursor",wt[v]),Pt(j));break}default:return}Ge(j)}}function f(y){d(this,arguments).moved(y)}function w(y){d(this,arguments).ended(y)}function m(){var y=this.__brush||{selection:null};return y.extent=er(e.apply(this,arguments)),y.dim=t,y}return u.extent=function(y){return arguments.length?(e=typeof y=="function"?y:Xe(er(y)),u):e},u.filter=function(y){return arguments.length?(n=typeof y=="function"?y:Xe(!!y),u):n},u.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:Xe(!!y),u):r},u.handleSize=function(y){return arguments.length?(s=+y,u):s},u.keyModifiers=function(y){return arguments.length?(i=!!y,u):i},u.on=function(){var y=o.on.apply(o,arguments);return y===o?u:y},u}const ue=t=>()=>t;function Sc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function kt(t,e,n){this.k=t,this.x=e,this.y=n}kt.prototype={constructor:kt,scale:function(t){return t===1?this:new kt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new kt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Cn=new kt(1,0,0);kt.prototype;function Ue(t){t.stopImmediatePropagation()}function Kt(t){t.preventDefault(),t.stopImmediatePropagation()}function Pc(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Rc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function ir(){return this.__zoom||Cn}function Nc(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ec(){return navigator.maxTouchPoints||"ontouchstart"in this}function Cc(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Mc(){var t=Pc,e=Rc,n=Cc,r=Nc,i=Ec,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,u=oo,a=Ee("start","zoom","end"),d,h,c,f=500,w=150,m=0,y=10;function p(g){g.property("__zoom",ir).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",q).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",B).on("touchmove.zoom",$).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(g,N,x,T){var E=g.selection?g.selection():g;E.property("__zoom",ir),g!==E?A(g,N,x,T):E.interrupt().each(function(){b(this,arguments).event(T).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},p.scaleBy=function(g,N,x,T){p.scaleTo(g,function(){var E=this.__zoom.k,R=typeof N=="function"?N.apply(this,arguments):N;return E*R},x,T)},p.scaleTo=function(g,N,x,T){p.transform(g,function(){var E=e.apply(this,arguments),R=this.__zoom,C=x==null?k(E):typeof x=="function"?x.apply(this,arguments):x,z=R.invert(C),I=typeof N=="function"?N.apply(this,arguments):N;return n(_(v(R,I),C,z),E,s)},x,T)},p.translateBy=function(g,N,x,T){p.transform(g,function(){return n(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof x=="function"?x.apply(this,arguments):x),e.apply(this,arguments),s)},null,T)},p.translateTo=function(g,N,x,T,E){p.transform(g,function(){var R=e.apply(this,arguments),C=this.__zoom,z=T==null?k(R):typeof T=="function"?T.apply(this,arguments):T;return n(Cn.translate(z[0],z[1]).scale(C.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof x=="function"?-x.apply(this,arguments):-x),R,s)},T,E)};function v(g,N){return N=Math.max(o[0],Math.min(o[1],N)),N===g.k?g:new kt(N,g.x,g.y)}function _(g,N,x){var T=N[0]-x[0]*g.k,E=N[1]-x[1]*g.k;return T===g.x&&E===g.y?g:new kt(g.k,T,E)}function k(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function A(g,N,x,T){g.on("start.zoom",function(){b(this,arguments).event(T).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(T).end()}).tween("zoom",function(){var E=this,R=arguments,C=b(E,R).event(T),z=e.apply(E,R),I=x==null?k(z):typeof x=="function"?x.apply(E,R):x,G=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),X=E.__zoom,W=typeof N=="function"?N.apply(E,R):N,Z=u(X.invert(I).concat(G/X.k),W.invert(I).concat(G/W.k));return function(Y){if(Y===1)Y=W;else{var K=Z(Y),nt=G/K[2];Y=new kt(nt,I[0]-K[0]*nt,I[1]-K[1]*nt)}C.zoom(null,Y)}})}function b(g,N,x){return!x&&g.__zooming||new S(g,N)}function S(g,N){this.that=g,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,N),this.taps=0}S.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,N){return this.mouse&&g!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var N=J(this.that).datum();a.call(g,this.that,new Sc(g,{sourceEvent:this.sourceEvent,target:p,transform:this.that.__zoom,dispatch:a}),N)}};function M(g,...N){if(!t.apply(this,arguments))return;var x=b(this,N).event(g),T=this.__zoom,E=Math.max(o[0],Math.min(o[1],T.k*Math.pow(2,r.apply(this,arguments)))),R=_t(g);if(x.wheel)(x.mouse[0][0]!==R[0]||x.mouse[0][1]!==R[1])&&(x.mouse[1]=T.invert(x.mouse[0]=R)),clearTimeout(x.wheel);else{if(T.k===E)return;x.mouse=[R,T.invert(R)],Ot(this),x.start()}Kt(g),x.wheel=setTimeout(C,w),x.zoom("mouse",n(_(v(T,E),x.mouse[0],x.mouse[1]),x.extent,s));function C(){x.wheel=null,x.end()}}function q(g,...N){if(c||!t.apply(this,arguments))return;var x=g.currentTarget,T=b(this,N,!0).event(g),E=J(g.view).on("mousemove.zoom",I,!0).on("mouseup.zoom",G,!0),R=_t(g,x),C=g.clientX,z=g.clientY;Kr(g.view),Ue(g),T.mouse=[R,this.__zoom.invert(R)],Ot(this),T.start();function I(X){if(Kt(X),!T.moved){var W=X.clientX-C,Z=X.clientY-z;T.moved=W*W+Z*Z>m}T.event(X).zoom("mouse",n(_(T.that.__zoom,T.mouse[0]=_t(X,x),T.mouse[1]),T.extent,s))}function G(X){E.on("mousemove.zoom mouseup.zoom",null),Zr(X.view,T.moved),Kt(X),T.event(X).end()}}function D(g,...N){if(t.apply(this,arguments)){var x=this.__zoom,T=_t(g.changedTouches?g.changedTouches[0]:g,this),E=x.invert(T),R=x.k*(g.shiftKey?.5:2),C=n(_(v(x,R),T,E),e.apply(this,N),s);Kt(g),l>0?J(this).transition().duration(l).call(A,C,T,g):J(this).call(p.transform,C,T,g)}}function B(g,...N){if(t.apply(this,arguments)){var x=g.touches,T=x.length,E=b(this,N,g.changedTouches.length===T).event(g),R,C,z,I;for(Ue(g),C=0;C<T;++C)z=x[C],I=_t(z,this),I=[I,this.__zoom.invert(I),z.identifier],E.touch0?!E.touch1&&E.touch0[2]!==I[2]&&(E.touch1=I,E.taps=0):(E.touch0=I,R=!0,E.taps=1+!!d);d&&(d=clearTimeout(d)),R&&(E.taps<2&&(h=I[0],d=setTimeout(function(){d=null},f)),Ot(this),E.start())}}function $(g,...N){if(this.__zooming){var x=b(this,N).event(g),T=g.changedTouches,E=T.length,R,C,z,I;for(Kt(g),R=0;R<E;++R)C=T[R],z=_t(C,this),x.touch0&&x.touch0[2]===C.identifier?x.touch0[0]=z:x.touch1&&x.touch1[2]===C.identifier&&(x.touch1[0]=z);if(C=x.that.__zoom,x.touch1){var G=x.touch0[0],X=x.touch0[1],W=x.touch1[0],Z=x.touch1[1],Y=(Y=W[0]-G[0])*Y+(Y=W[1]-G[1])*Y,K=(K=Z[0]-X[0])*K+(K=Z[1]-X[1])*K;C=v(C,Math.sqrt(Y/K)),z=[(G[0]+W[0])/2,(G[1]+W[1])/2],I=[(X[0]+Z[0])/2,(X[1]+Z[1])/2]}else if(x.touch0)z=x.touch0[0],I=x.touch0[1];else return;x.zoom("touch",n(_(C,z,I),x.extent,s))}}function L(g,...N){if(this.__zooming){var x=b(this,N).event(g),T=g.changedTouches,E=T.length,R,C;for(Ue(g),c&&clearTimeout(c),c=setTimeout(function(){c=null},f),R=0;R<E;++R)C=T[R],x.touch0&&x.touch0[2]===C.identifier?delete x.touch0:x.touch1&&x.touch1[2]===C.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(C=_t(C,this),Math.hypot(h[0]-C[0],h[1]-C[1])<y)){var z=J(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return p.wheelDelta=function(g){return arguments.length?(r=typeof g=="function"?g:ue(+g),p):r},p.filter=function(g){return arguments.length?(t=typeof g=="function"?g:ue(!!g),p):t},p.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:ue(!!g),p):i},p.extent=function(g){return arguments.length?(e=typeof g=="function"?g:ue([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),p):e},p.scaleExtent=function(g){return arguments.length?(o[0]=+g[0],o[1]=+g[1],p):[o[0],o[1]]},p.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(g){return arguments.length?(n=g,p):n},p.duration=function(g){return arguments.length?(l=+g,p):l},p.interpolate=function(g){return arguments.length?(u=g,p):u},p.on=function(){var g=a.on.apply(a,arguments);return g===a?p:g},p.clickDistance=function(g){return arguments.length?(m=(g=+g)*g,p):Math.sqrt(m)},p.tapDistance=function(g){return arguments.length?(y=+g,p):y},p}var pn=(t=>(t.LOWEST="100",t.LOW="500",t.MEDIUM="2500",t.HIGH="10000",t))(pn||{}),rt=(t=>(t.LOWER="LOWER",t.UPPER="UPPER",t))(rt||{});const Ic={100:{initialMin:.99,initialMax:1.01,min:1e-5,max:1.5},500:{initialMin:.8,initialMax:1.25,min:1e-5,max:1.5},2500:{initialMin:.5,initialMax:1.5,min:1e-5,max:20},1e4:{initialMin:.5,initialMax:1.5,min:1e-5,max:20}};var at=function(){return at=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},at.apply(this,arguments)};function Te(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var U="-ms-",ee="-moz-",H="-webkit-",oi="comm",$e="rule",Mn="decl",$c="@import",si="@keyframes",Bc="@layer",ai=Math.abs,In=String.fromCharCode,gn=Object.assign;function zc(t,e){return et(t,0)^45?(((e<<2^et(t,0))<<2^et(t,1))<<2^et(t,2))<<2^et(t,3):0}function ci(t){return t.trim()}function xt(t,e){return(t=e.exec(t))?t[0]:t}function V(t,e,n){return t.replace(e,n)}function me(t,e,n){return t.indexOf(e,n)}function et(t,e){return t.charCodeAt(e)|0}function jt(t,e,n){return t.slice(e,n)}function gt(t){return t.length}function ui(t){return t.length}function te(t,e){return e.push(t),t}function Dc(t,e){return t.map(e).join("")}function or(t,e){return t.filter(function(n){return!xt(n,e)})}var Be=1,Vt=1,li=0,ft=0,Q=0,Ht="";function ze(t,e,n,r,i,o,s,l){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Be,column:Vt,length:s,return:"",siblings:l}}function Tt(t,e){return gn(ze("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function Dt(t){for(;t.root;)t=Tt(t.root,{children:[t]});te(t,t.siblings)}function qc(){return Q}function Oc(){return Q=ft>0?et(Ht,--ft):0,Vt--,Q===10&&(Vt=1,Be--),Q}function dt(){return Q=ft<li?et(Ht,ft++):0,Vt++,Q===10&&(Vt=1,Be++),Q}function Ct(){return et(Ht,ft)}function ye(){return ft}function De(t,e){return jt(Ht,t,e)}function mn(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Fc(t){return Be=Vt=1,li=gt(Ht=t),ft=0,[]}function Lc(t){return Ht="",t}function Ke(t){return ci(De(ft-1,yn(t===91?t+2:t===40?t+1:t)))}function jc(t){for(;(Q=Ct())&&Q<33;)dt();return mn(t)>2||mn(Q)>3?"":" "}function Vc(t,e){for(;--e&&dt()&&!(Q<48||Q>102||Q>57&&Q<65||Q>70&&Q<97););return De(t,ye()+(e<6&&Ct()==32&&dt()==32))}function yn(t){for(;dt();)switch(Q){case t:return ft;case 34:case 39:t!==34&&t!==39&&yn(Q);break;case 40:t===41&&yn(t);break;case 92:dt();break}return ft}function Xc(t,e){for(;dt()&&t+Q!==57;)if(t+Q===84&&Ct()===47)break;return"/*"+De(e,ft-1)+"*"+In(t===47?t:dt())}function Gc(t){for(;!mn(Ct());)dt();return De(t,ft)}function Yc(t){return Lc(ve("",null,null,null,[""],t=Fc(t),0,[0],t))}function ve(t,e,n,r,i,o,s,l,u){for(var a=0,d=0,h=s,c=0,f=0,w=0,m=1,y=1,p=1,v=0,_="",k=i,A=o,b=r,S=_;y;)switch(w=v,v=dt()){case 40:if(w!=108&&et(S,h-1)==58){me(S+=V(Ke(v),"&","&\f"),"&\f",ai(a?l[a-1]:0))!=-1&&(p=-1);break}case 34:case 39:case 91:S+=Ke(v);break;case 9:case 10:case 13:case 32:S+=jc(w);break;case 92:S+=Vc(ye()-1,7);continue;case 47:switch(Ct()){case 42:case 47:te(Hc(Xc(dt(),ye()),e,n,u),u);break;default:S+="/"}break;case 123*m:l[a++]=gt(S)*p;case 125*m:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+d:p==-1&&(S=V(S,/\f/g,"")),f>0&&gt(S)-h&&te(f>32?ar(S+";",r,n,h-1,u):ar(V(S," ","")+";",r,n,h-2,u),u);break;case 59:S+=";";default:if(te(b=sr(S,e,n,a,d,i,l,_,k=[],A=[],h,o),o),v===123)if(d===0)ve(S,e,b,b,k,o,h,l,A);else switch(c===99&&et(S,3)===110?100:c){case 100:case 108:case 109:case 115:ve(t,b,b,r&&te(sr(t,b,b,0,0,i,l,_,i,k=[],h,A),A),i,A,h,l,r?k:A);break;default:ve(S,b,b,b,[""],A,0,l,A)}}a=d=f=0,m=p=1,_=S="",h=s;break;case 58:h=1+gt(S),f=w;default:if(m<1){if(v==123)--m;else if(v==125&&m++==0&&Oc()==125)continue}switch(S+=In(v),v*m){case 38:p=d>0?1:(S+="\f",-1);break;case 44:l[a++]=(gt(S)-1)*p,p=1;break;case 64:Ct()===45&&(S+=Ke(dt())),c=Ct(),d=h=gt(_=S+=Gc(ye())),v++;break;case 45:w===45&&gt(S)==2&&(m=0)}}return o}function sr(t,e,n,r,i,o,s,l,u,a,d,h){for(var c=i-1,f=i===0?o:[""],w=ui(f),m=0,y=0,p=0;m<r;++m)for(var v=0,_=jt(t,c+1,c=ai(y=s[m])),k=t;v<w;++v)(k=ci(y>0?f[v]+" "+_:V(_,/&\f/g,f[v])))&&(u[p++]=k);return ze(t,e,n,i===0?$e:l,u,a,d,h)}function Hc(t,e,n,r){return ze(t,e,n,oi,In(qc()),jt(t,2,-2),0,r)}function ar(t,e,n,r,i){return ze(t,e,n,Mn,jt(t,0,r),jt(t,r+1,-1),r,i)}function fi(t,e,n){switch(zc(t,e)){case 5103:return H+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return H+t+t;case 4789:return ee+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return H+t+ee+t+U+t+t;case 5936:switch(et(t,e+11)){case 114:return H+t+U+V(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return H+t+U+V(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return H+t+U+V(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return H+t+U+t+t;case 6165:return H+t+U+"flex-"+t+t;case 5187:return H+t+V(t,/(\w+).+(:[^]+)/,H+"box-$1$2"+U+"flex-$1$2")+t;case 5443:return H+t+U+"flex-item-"+V(t,/flex-|-self/g,"")+(xt(t,/flex-|baseline/)?"":U+"grid-row-"+V(t,/flex-|-self/g,""))+t;case 4675:return H+t+U+"flex-line-pack"+V(t,/align-content|flex-|-self/g,"")+t;case 5548:return H+t+U+V(t,"shrink","negative")+t;case 5292:return H+t+U+V(t,"basis","preferred-size")+t;case 6060:return H+"box-"+V(t,"-grow","")+H+t+U+V(t,"grow","positive")+t;case 4554:return H+V(t,/([^-])(transform)/g,"$1"+H+"$2")+t;case 6187:return V(V(V(t,/(zoom-|grab)/,H+"$1"),/(image-set)/,H+"$1"),t,"")+t;case 5495:case 3959:return V(t,/(image-set\([^]*)/,H+"$1$`$1");case 4968:return V(V(t,/(.+:)(flex-)?(.*)/,H+"box-pack:$3"+U+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+H+t+t;case 4200:if(!xt(t,/flex-|baseline/))return U+"grid-column-align"+jt(t,e)+t;break;case 2592:case 3360:return U+V(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,xt(r.props,/grid-\w+-end/)})?~me(t+(n=n[e].value),"span",0)?t:U+V(t,"-start","")+t+U+"grid-row-span:"+(~me(n,"span",0)?xt(n,/\d+/):+xt(n,/\d+/)-+xt(t,/\d+/))+";":U+V(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return xt(r.props,/grid-\w+-start/)})?t:U+V(V(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return V(t,/(.+)-inline(.+)/,H+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gt(t)-1-e>6)switch(et(t,e+1)){case 109:if(et(t,e+4)!==45)break;case 102:return V(t,/(.+:)(.+)-([^]+)/,"$1"+H+"$2-$3$1"+ee+(et(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~me(t,"stretch",0)?fi(V(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return V(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,o,s,l,u,a){return U+i+":"+o+a+(s?U+i+"-span:"+(l?u:+u-+o)+a:"")+t});case 4949:if(et(t,e+6)===121)return V(t,":",":"+H)+t;break;case 6444:switch(et(t,et(t,14)===45?18:11)){case 120:return V(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+H+(et(t,14)===45?"inline-":"")+"box$3$1"+H+"$2$3$1"+U+"$2box$3")+t;case 100:return V(t,":",":"+U)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return V(t,"scroll-","scroll-snap-")+t}return t}function Se(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Wc(t,e,n,r){switch(t.type){case Bc:if(t.children.length)break;case $c:case Mn:return t.return=t.return||t.value;case oi:return"";case si:return t.return=t.value+"{"+Se(t.children,r)+"}";case $e:if(!gt(t.value=t.props.join(",")))return""}return gt(n=Se(t.children,r))?t.return=t.value+"{"+n+"}":""}function Uc(t){var e=ui(t);return function(n,r,i,o){for(var s="",l=0;l<e;l++)s+=t[l](n,r,i,o)||"";return s}}function Kc(t){return function(e){e.root||(e=e.return)&&t(e)}}function Zc(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case Mn:t.return=fi(t.value,t.length,n);return;case si:return Se([Tt(t,{value:V(t.value,"@","@"+H)})],r);case $e:if(t.length)return Dc(n=t.props,function(i){switch(xt(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Dt(Tt(t,{props:[V(i,/:(read-\w+)/,":"+ee+"$1")]})),Dt(Tt(t,{props:[i]})),gn(t,{props:or(n,r)});break;case"::placeholder":Dt(Tt(t,{props:[V(i,/:(plac\w+)/,":"+H+"input-$1")]})),Dt(Tt(t,{props:[V(i,/:(plac\w+)/,":"+ee+"$1")]})),Dt(Tt(t,{props:[V(i,/:(plac\w+)/,U+"input-$1")]})),Dt(Tt(t,{props:[i]})),gn(t,{props:or(n,r)});break}return""})}}var Jc={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ut={},Xt=typeof tn<"u"&&ut!==void 0&&(ut.REACT_APP_SC_ATTR||ut.SC_ATTR)||"data-styled",hi="active",di="data-styled-version",qe="6.1.16",$n=`/*!sc*/
`,Pe=typeof window<"u"&&"HTMLElement"in window,Qc=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof tn<"u"&&ut!==void 0&&ut.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ut.REACT_APP_SC_DISABLE_SPEEDY!==""?ut.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ut.REACT_APP_SC_DISABLE_SPEEDY:typeof tn<"u"&&ut!==void 0&&ut.SC_DISABLE_SPEEDY!==void 0&&ut.SC_DISABLE_SPEEDY!==""&&ut.SC_DISABLE_SPEEDY!=="false"&&ut.SC_DISABLE_SPEEDY),Oe=Object.freeze([]),Gt=Object.freeze({});function tu(t,e,n){return n===void 0&&(n=Gt),t.theme!==n.theme&&t.theme||e||n.theme}var pi=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),eu=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,nu=/(^-|-$)/g;function cr(t){return t.replace(eu,"-").replace(nu,"")}var ru=/(a)(d)/gi,le=52,ur=function(t){return String.fromCharCode(t+(t>25?39:97))};function vn(t){var e,n="";for(e=Math.abs(t);e>le;e=e/le|0)n=ur(e%le)+n;return(ur(e%le)+n).replace(ru,"$1-$2")}var Ze,gi=5381,qt=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},mi=function(t){return qt(gi,t)};function iu(t){return vn(mi(t)>>>0)}function ou(t){return t.displayName||t.name||"Component"}function Je(t){return typeof t=="string"&&!0}var yi=typeof Symbol=="function"&&Symbol.for,vi=yi?Symbol.for("react.memo"):60115,su=yi?Symbol.for("react.forward_ref"):60112,au={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cu={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wi={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uu=((Ze={})[su]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ze[vi]=wi,Ze);function lr(t){return("type"in(e=t)&&e.type.$$typeof)===vi?wi:"$$typeof"in t?uu[t.$$typeof]:au;var e}var lu=Object.defineProperty,fu=Object.getOwnPropertyNames,fr=Object.getOwnPropertySymbols,hu=Object.getOwnPropertyDescriptor,du=Object.getPrototypeOf,hr=Object.prototype;function _i(t,e,n){if(typeof e!="string"){if(hr){var r=du(e);r&&r!==hr&&_i(t,r,n)}var i=fu(e);fr&&(i=i.concat(fr(e)));for(var o=lr(t),s=lr(e),l=0;l<i.length;++l){var u=i[l];if(!(u in cu||n&&n[u]||s&&u in s||o&&u in o)){var a=hu(e,u);try{lu(t,u,a)}catch{}}}}return t}function Yt(t){return typeof t=="function"}function Bn(t){return typeof t=="object"&&"styledComponentId"in t}function Et(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function dr(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function oe(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function wn(t,e,n){if(n===void 0&&(n=!1),!n&&!oe(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=wn(t[r],e[r]);else if(oe(e))for(var r in e)t[r]=wn(t[r],e[r]);return t}function zn(t,e){Object.defineProperty(t,"toString",{value:e})}function ae(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var pu=function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,o=i;e>=o;)if((o<<=1)<0)throw ae(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var s=i;s<o;s++)this.groupSizes[s]=0}for(var l=this.indexOfGroup(e+1),u=(s=0,n.length);s<u;s++)this.tag.insertRule(l,n[s])&&(this.groupSizes[e]++,l++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var o=r;o<i;o++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),o=i+r,s=i;s<o;s++)n+="".concat(this.tag.getRule(s)).concat($n);return n},t}(),we=new Map,Re=new Map,_e=1,fe=function(t){if(we.has(t))return we.get(t);for(;Re.has(_e);)_e++;var e=_e++;return we.set(t,e),Re.set(e,t),e},gu=function(t,e){_e=e+1,we.set(t,e),Re.set(e,t)},mu="style[".concat(Xt,"][").concat(di,'="').concat(qe,'"]'),yu=new RegExp("^".concat(Xt,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),vu=function(t,e,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&t.registerName(e,r)},wu=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split($n),i=[],o=0,s=r.length;o<s;o++){var l=r[o].trim();if(l){var u=l.match(yu);if(u){var a=0|parseInt(u[1],10),d=u[2];a!==0&&(gu(d,a),vu(t,d,u[3]),t.getTag().insertRules(a,i)),i.length=0}else i.push(l)}}},pr=function(t){for(var e=document.querySelectorAll(mu),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(Xt)!==hi&&(wu(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function _u(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var xi=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){var u=Array.from(l.querySelectorAll("style[".concat(Xt,"]")));return u[u.length-1]}(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(Xt,hi),r.setAttribute(di,qe);var s=_u();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},xu=function(){function t(e){this.element=xi(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,o=r.length;i<o;i++){var s=r[i];if(s.ownerNode===n)return s}throw ae(17)}(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t}(),ku=function(){function t(e){this.element=xi(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t}(),Au=function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t}(),gr=Pe,bu={isServer:!Pe,useCSSOMInjection:!Qc},ki=function(){function t(e,n,r){e===void 0&&(e=Gt),n===void 0&&(n={});var i=this;this.options=at(at({},bu),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Pe&&gr&&(gr=!1,pr(this)),zn(this,function(){return function(o){for(var s=o.getTag(),l=s.length,u="",a=function(h){var c=function(p){return Re.get(p)}(h);if(c===void 0)return"continue";var f=o.names.get(c),w=s.getGroup(h);if(f===void 0||!f.size||w.length===0)return"continue";var m="".concat(Xt,".g").concat(h,'[id="').concat(c,'"]'),y="";f!==void 0&&f.forEach(function(p){p.length>0&&(y+="".concat(p,","))}),u+="".concat(w).concat(m,'{content:"').concat(y,'"}').concat($n)},d=0;d<l;d++)a(d);return u}(i)})}return t.registerId=function(e){return fe(e)},t.prototype.rehydrate=function(){!this.server&&Pe&&pr(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(at(at({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new Au(i):r?new xu(i):new ku(i)}(this.options),new pu(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if(fe(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules(fe(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup(fe(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t}(),Tu=/&/g,Su=/^\s*\/\/.*$/gm;function Ai(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=Ai(n.children,e)),n})}function Pu(t){var e,n,r,i=Gt,o=i.options,s=o===void 0?Gt:o,l=i.plugins,u=l===void 0?Oe:l,a=function(c,f,w){return w.startsWith(n)&&w.endsWith(n)&&w.replaceAll(n,"").length>0?".".concat(e):c},d=u.slice();d.push(function(c){c.type===$e&&c.value.includes("&")&&(c.props[0]=c.props[0].replace(Tu,n).replace(r,a))}),s.prefix&&d.push(Zc),d.push(Wc);var h=function(c,f,w,m){f===void 0&&(f=""),w===void 0&&(w=""),m===void 0&&(m="&"),e=m,n=f,r=new RegExp("\\".concat(n,"\\b"),"g");var y=c.replace(Su,""),p=Yc(w||f?"".concat(w," ").concat(f," { ").concat(y," }"):y);s.namespace&&(p=Ai(p,s.namespace));var v=[];return Se(p,Uc(d.concat(Kc(function(_){return v.push(_)})))),v};return h.hash=u.length?u.reduce(function(c,f){return f.name||ae(15),qt(c,f.name)},gi).toString():"",h}var Ru=new ki,_n=Pu(),bi=re.createContext({shouldForwardProp:void 0,styleSheet:Ru,stylis:_n});bi.Consumer;re.createContext(void 0);function mr(){return O.useContext(bi)}var Nu=function(){function t(e,n){var r=this;this.inject=function(i,o){o===void 0&&(o=_n);var s=r.name+o.hash;i.hasNameForId(r.id,s)||i.insertRules(r.id,s,o(r.rules,s,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,zn(this,function(){throw ae(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=_n),this.name+e.hash},t}(),Eu=function(t){return t>="A"&&t<="Z"};function yr(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;Eu(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var Ti=function(t){return t==null||t===!1||t===""},Si=function(t){var e,n,r=[];for(var i in t){var o=t[i];t.hasOwnProperty(i)&&!Ti(o)&&(Array.isArray(o)&&o.isCss||Yt(o)?r.push("".concat(yr(i),":"),o,";"):oe(o)?r.push.apply(r,Te(Te(["".concat(i," {")],Si(o),!1),["}"],!1)):r.push("".concat(yr(i),": ").concat((e=i,(n=o)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in Jc||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Mt(t,e,n,r){if(Ti(t))return[];if(Bn(t))return[".".concat(t.styledComponentId)];if(Yt(t)){if(!Yt(o=t)||o.prototype&&o.prototype.isReactComponent||!e)return[t];var i=t(e);return Mt(i,e,n,r)}var o;return t instanceof Nu?n?(t.inject(n,r),[t.getName(r)]):[t]:oe(t)?Si(t):Array.isArray(t)?Array.prototype.concat.apply(Oe,t.map(function(s){return Mt(s,e,n,r)})):[t.toString()]}function Cu(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Yt(n)&&!Bn(n))return!1}return!0}var Mu=mi(qe),Iu=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&Cu(e),this.componentId=n,this.baseHash=qt(Mu,n),this.baseStyle=r,ki.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=Et(i,this.staticRulesId);else{var o=dr(Mt(this.rules,e,n,r)),s=vn(qt(this.baseHash,o)>>>0);if(!n.hasNameForId(this.componentId,s)){var l=r(o,".".concat(s),void 0,this.componentId);n.insertRules(this.componentId,s,l)}i=Et(i,s),this.staticRulesId=s}else{for(var u=qt(this.baseHash,r.hash),a="",d=0;d<this.rules.length;d++){var h=this.rules[d];if(typeof h=="string")a+=h;else if(h){var c=dr(Mt(h,e,n,r));u=qt(u,c+d),a+=c}}if(a){var f=vn(u>>>0);n.hasNameForId(this.componentId,f)||n.insertRules(this.componentId,f,r(a,".".concat(f),void 0,this.componentId)),i=Et(i,f)}}return i},t}(),Pi=re.createContext(void 0);Pi.Consumer;var Qe={};function $u(t,e,n){var r=Bn(t),i=t,o=!Je(t),s=e.attrs,l=s===void 0?Oe:s,u=e.componentId,a=u===void 0?function(k,A){var b=typeof k!="string"?"sc":cr(k);Qe[b]=(Qe[b]||0)+1;var S="".concat(b,"-").concat(iu(qe+b+Qe[b]));return A?"".concat(A,"-").concat(S):S}(e.displayName,e.parentComponentId):u,d=e.displayName,h=d===void 0?function(k){return Je(k)?"styled.".concat(k):"Styled(".concat(ou(k),")")}(t):d,c=e.displayName&&e.componentId?"".concat(cr(e.displayName),"-").concat(e.componentId):e.componentId||a,f=r&&i.attrs?i.attrs.concat(l).filter(Boolean):l,w=e.shouldForwardProp;if(r&&i.shouldForwardProp){var m=i.shouldForwardProp;if(e.shouldForwardProp){var y=e.shouldForwardProp;w=function(k,A){return m(k,A)&&y(k,A)}}else w=m}var p=new Iu(n,c,r?i.componentStyle:void 0);function v(k,A){return function(b,S,M){var q=b.attrs,D=b.componentStyle,B=b.defaultProps,$=b.foldedComponentIds,L=b.styledComponentId,g=b.target,N=re.useContext(Pi),x=mr(),T=b.shouldForwardProp||x.shouldForwardProp,E=tu(S,N,B)||Gt,R=function(W,Z,Y){for(var K,nt=at(at({},Z),{className:void 0,theme:Y}),yt=0;yt<W.length;yt+=1){var St=Yt(K=W[yt])?K(nt):K;for(var ht in St)nt[ht]=ht==="className"?Et(nt[ht],St[ht]):ht==="style"?at(at({},nt[ht]),St[ht]):St[ht]}return Z.className&&(nt.className=Et(nt.className,Z.className)),nt}(q,S,E),C=R.as||g,z={};for(var I in R)R[I]===void 0||I[0]==="$"||I==="as"||I==="theme"&&R.theme===E||(I==="forwardedAs"?z.as=R.forwardedAs:T&&!T(I,C)||(z[I]=R[I]));var G=function(W,Z){var Y=mr(),K=W.generateAndInjectStyles(Z,Y.styleSheet,Y.stylis);return K}(D,R),X=Et($,L);return G&&(X+=" "+G),R.className&&(X+=" "+R.className),z[Je(C)&&!pi.has(C)?"class":"className"]=X,M&&(z.ref=M),O.createElement(C,z)}(_,k,A)}v.displayName=h;var _=re.forwardRef(v);return _.attrs=f,_.componentStyle=p,_.displayName=h,_.shouldForwardProp=w,_.foldedComponentIds=r?Et(i.foldedComponentIds,i.styledComponentId):"",_.styledComponentId=c,_.target=r?i.target:t,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(k){this._foldedDefaultProps=r?function(A){for(var b=[],S=1;S<arguments.length;S++)b[S-1]=arguments[S];for(var M=0,q=b;M<q.length;M++)wn(A,q[M],!0);return A}({},i.defaultProps,k):k}}),zn(_,function(){return".".concat(_.styledComponentId)}),o&&_i(_,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function vr(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var wr=function(t){return Object.assign(t,{isCss:!0})};function Bu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Yt(t)||oe(t))return wr(Mt(vr(Oe,Te([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?Mt(r):wr(Mt(vr(r,e)))}function xn(t,e,n){if(n===void 0&&(n=Gt),!e)throw ae(1,e);var r=function(i){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return t(e,n,Bu.apply(void 0,Te([i],o,!1)))};return r.attrs=function(i){return xn(t,e,at(at({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return xn(t,e,at(at({},n),i))},r}var Ri=function(t){return xn($u,t)},ct=Ri;pi.forEach(function(t){ct[t]=Ri(t)});const zu=ct.path`
  opacity: ${({opacity:t})=>t||1}};
  stroke: ${({fill:t,theme:e})=>t??e.colors.failure};
  fill: ${({fill:t,theme:e})=>t??e.colors.failure};
`,Du=({series:t,xScale:e,yScale:n,xValue:r,yValue:i,fill:o,opacity:s})=>{const l=O.useMemo(()=>{var _,k,A,b,S,M,q,D;const u=e.domain(),a=n.domain(),d=Number(((_=t==null?void 0:t[0])==null?void 0:_.price)||0)===Number(((k=t==null?void 0:t[1])==null?void 0:k.price)||0),h=Number(((A=t==null?void 0:t[d?1:0])==null?void 0:A.price)||0)>Number(((b=t==null?void 0:t[d?2:1])==null?void 0:b.price)||0),c=[...t];(c==null?void 0:c.length)>1&&(c[t.length-1]={...c[t.length-1],depth:c[t.length-2].depth});const f=F(u[1]).add(F(u[1]).sub(u[0]).div(100)).toNumber(),w=c.findIndex(({price:B})=>h?Number(B)<=f:Number(B)>=f),m=F(u[1]).sub(u[0]).div(100);h?w>=0&&((S=c[w-1])!=null&&S.depth)&&c.splice(w,0,{...c[w-1],price:F(u[1]).add(m).toNumber()}):w>=0&&((M=c[w])!=null&&M.depth)&&c.splice(w,0,{...c[w],price:f});const y=F(u[0]).add(F(u[1]).sub(u[0]).div(100)).toNumber(),p=c.findIndex(({price:B})=>h?Number(B)<=y:Number(B)>=y);h?p>=0&&((q=c[p])!=null&&q.depth)&&c.splice(p,0,{...c[p],price:y>0?y:0}):(p-1>=0&&((D=c[p-1])!=null&&D.depth)&&c.splice(p,0,{...c[p-1],price:y>0?y:0}),p===w&&c.splice(p+1,0,{...c[p+1],price:y>0?F(y).add(F(y).div(1e6)).toNumber():0}));const v=isNaN(a[1])?on().domain([0,Math.max(...c.map(B=>B.depth))]).range([200,0]):n;return Vi().curve(Xi).x(B=>e(r(B))).y1(B=>v(i(B))).y0(v(0))(c.filter(B=>{const $=e(r(B));return v(i(B)),$>=0&&$<=window.innerWidth}))??void 0},[o,t,e,r,n,i]);return O.useMemo(()=>P.jsx(zu,{fill:o,d:l,opacity:s}),[l])},qu=ct.g`
  line {
    display: none;
  }
  text {
    transform: translateY(5px);
    font-family: 'Inter';
  }
`,Ou=({axisGenerator:t,isPosition:e})=>{const{colorMode:n}=Ii(),r=i=>{e?i&&J(i).call(t).call(o=>o.selectAll(".tick").remove()).call(o=>o.select(".domain").attr("d","M0 0 L658 0 Z").attr("stroke","#2A3238")):i&&J(i).call(t).call(o=>o.select(".domain").attr("d","M0 0 L658 0 Z").attr("stroke","#2A3238"))};return P.jsx("g",{ref:r,style:{color:n=="light"?"#000":"#fff",opacity:(n=="light","0.5")}})},Fu=({xScale:t,innerHeight:e,offset:n=0,isPosition:r=!1})=>O.useMemo(()=>P.jsx(qu,{transform:`translate(0, ${e+n})`,children:P.jsx(Ou,{axisGenerator:ko(t).ticks(5),isPosition:r})}),[e,n,t]),_r=t=>["M 0 0",`v ${t}`,"m 1 0","V 0","M 0 1","h 10","q 2 0, 2 2","v 22","q 0 2 -2 2","h -10","z"].join(" "),xr=()=>["m 4 8","v 12","M 0 0","m 8 8","v 12","z"].join(" "),kr=({color:t,size:e=10,margin:n=10})=>P.jsx("polygon",{points:`0 0, ${e} ${e}, 0 ${e}`,transform:` translate(${e+n}, ${n}) rotate(45) `,fill:t,stroke:t,strokeWidth:"4",strokeLinejoin:"round"}),ne={colors:{background:"var(--chakra-colors-card_bg)",secondary:"#30D4B7",leftHandle:"#30D4B7",rightHandle:"#6297EA"}},Ar=ct.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 3;
  stroke: ${({color:t})=>t};
  fill: ${({color:t})=>t};
`,br=ct.path`
  cursor: ew-resize;
  pointer-events: none;

  stroke-width: 1.5;
  stroke: #fff;
  opacity: ${ne.colors.background};
  fill: ${ne.colors.background};
`,Tr=ct.g`
  opacity: ${({visible:t})=>t?"1":"0"};
  transition: opacity 300ms;
`,Sr=ct.rect`
  fill: #192128;
`,Pr=ct.rect`
  fill: #192128;
`,Rr=ct.rect`
  fill: #192128;
`,Nr=ct.text`
  text-anchor: middle;
  font-size: 13px;
  fill: #fff;
`,Er=20,Cr=2,Mr=(t,e,n)=>{const r=t.map(o=>n(o).toFixed(11)),i=e.map(o=>n(o).toFixed(11));return r.every((o,s)=>o===i[s])},Lu=({id:t,xScale:e,interactive:n,brushLabelValue:r,brushExtent:i,setBrushExtent:o,innerWidth:s,innerHeight:l,westHandleColor:u,eastHandleColor:a,readonly:d,isSorted:h,isFullRange:c})=>{const f=O.useRef(null),w=O.useRef(null),[m,y]=O.useState(i),[p,v]=O.useState(!1),[_,k]=O.useState(!1),A=Wi(i),b=O.useCallback(g=>{const{type:N,mode:x}=g;if(!(g!=null&&g.selection)){y(null);return}const E=g.selection.map(Math.round).map(e.invert);E.join("").includes("NaN")||i.join("").includes("NaN")||(N==="end"&&!Mr(i,E,e)&&o(E,x),y(E))},[e,i,o]);O.useEffect(()=>{y(i)},[i]),O.useEffect(()=>{f.current&&(w.current=bc().extent([[Math.max(0+Cr,e(0)),0],[s-Cr,l]]).handleSize(30).filter(()=>n).on("brush end",b),w.current(J(f.current)),A&&Mr(i,A,e)&&J(f.current).transition().call(w.current.move,i.map(e)),J(f.current).selectAll(".selection").attr("stroke","none").attr("fill","rgba(118, 200, 255, 0.4)"))},[i,b,t,l,s,n,A,e]),O.useEffect(()=>{!f.current||!w.current||w.current.move(J(f.current),i.map(e))},[i,e]),O.useEffect(()=>{v(!0);const g=setTimeout(()=>v(!1),1500);return()=>clearTimeout(g)},[m]);const S=m&&e(m[0])>Er,M=m&&e(m[1])>s-Er,q=m&&(e(m[0])<0||e(m[1])<0),D=m&&(e(m[0])>s||e(m[1])>s),B=m&&e(m[0])>=0&&e(m[0])<=s,$=m&&e(m[1])>=0&&e(m[1])<=s,{isApp:L}=Ne();return O.useMemo(()=>P.jsxs(P.Fragment,{children:[P.jsxs("defs",{children:[P.jsxs("linearGradient",{id:`${t}-gradient-selection`,x1:"0%",y1:"100%",x2:"100%",y2:"100%",children:[P.jsx("stop",{stopColor:u}),P.jsx("stop",{stopColor:a,offset:"1"})]}),P.jsx("clipPath",{id:`${t}-brush-clip`,children:P.jsx("rect",{x:"0",y:"0",width:s,height:l})})]}),P.jsx("g",{ref:f,clipPath:`url(#${t}-brush-clip)`,onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1)}),m&&P.jsxs(P.Fragment,{children:[!d&&B?P.jsxs("g",{transform:`translate(${Math.max(0,e(m[0]))}, 0), scale(${S?"-1":"1"}, 1)`,children:[P.jsxs("g",{children:[P.jsx(Ar,{color:ne.colors.leftHandle,d:_r(l)}),P.jsx(br,{d:xr()})]}),P.jsxs(Tr,{transform:`translate(${L?"10 35":"50,0"}), scale(${S?"1":"-1"}, 1)`,visible:p||_,children:[P.jsx(Sr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),h?P.jsx(Pr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}):P.jsx(Rr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),P.jsx(Nr,{transform:"scale(-1, 1)",y:"15",dominantBaseline:"middle",children:c?"0":r("w",m[0])})]})]}):null,!d&&$?P.jsxs("g",{transform:`translate(${e(m[1])}, 0), scale(${M?"-1":"1"}, 1)`,children:[P.jsxs("g",{children:[P.jsx(Ar,{color:ne.colors.rightHandle,d:_r(l)}),P.jsx(br,{d:xr()})]}),P.jsxs(Tr,{transform:`translate(${L?"10 35":"50,0"}), scale(${M?"-1":"1"}, 1)`,visible:p||_,children:[P.jsx(Sr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),h?P.jsx(Rr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}):P.jsx(Pr,{y:"0",x:"-30",height:"28",width:"60",rx:"8"}),P.jsx(Nr,{y:"15",dominantBaseline:"middle",children:c?"âˆž":r("e",m[1])})]})]}):null,q&&P.jsx(kr,{color:u}),D&&P.jsx("g",{transform:`translate(${s}, 0) scale(-1, 1)`,children:P.jsx(kr,{color:a})})]})]}),[r,a,$,M,S,_,t,ne,l,s,m,D,p,q,u,B,e,L])},ju=ct.line`
  opacity: 0.7;
  stroke-width: 1;
  stroke: var(--chakra-colors-text_caption);
  fill: none;
`,Vu=({value:t,xScale:e,innerHeight:n})=>O.useMemo(()=>P.jsx(ju,{x1:e(t),y1:"0",x2:e(t),y2:n,strokeDasharray:"4,3"}),[t,e,n]);ct.line`
  opacity: 1;
  stroke-width: 2;
  stroke: #fff;
  fill: none;
`;const Xu=({value:t,xScale:e,innerHeight:n})=>O.useMemo(()=>P.jsxs("g",{children:[P.jsx("circle",{cx:e(Number(t)),cy:"4",fill:"#fff",r:"4"}),P.jsx("line",{x1:e(Number(t)),y1:"0",x2:e(t),y2:n,stroke:"#fff",strokeWidth:2})]}),[t,e,n]);ct.div`
  display: grid;
  grid-template-columns: repeat(${({count:t})=>t.toString()}, 1fr);
  grid-gap: 6px;

  position: absolute;
  top: -18px;
  right: 0;
`;const Gu=ct.rect`
  fill: transparent;
  cursor: grab;

  &:active {
    cursor: grabbing;
  }
`;function Yu({svg:t,xScale:e,setZoom:n,width:r,height:i,resetBrush:o,showResetButton:s,zoomLevels:l,isPosition:u,handleClickRefresh:a,currentRange:d}){const h=O.useRef(),[c,f,w,m]=O.useMemo(()=>[()=>{t&&h.current&&J(t).transition().call(h.current.scaleBy,2)},()=>t&&h.current&&J(t).transition().call(h.current.scaleBy,.5),()=>t&&h.current&&J(t).transition().call(h.current.scaleTo,1),()=>t&&h.current&&J(t).call(h.current.transform,Cn.translate(0,0).scale(1)).transition().call(h.current.scaleTo,1)],[t]),y=$i(n,300);return Ne(),O.useEffect(()=>{t&&(h.current=Mc().scaleExtent([0,1/0]).extent([[0,0],[r,i]]).on("zoom",({transform:p})=>{y(p)}),J(t).call(h.current))},[i,r,n,t,h,l.max,l.min]),O.useEffect(()=>{w()},[w,l]),O.useEffect(()=>{m()},[d]),P.jsx(en,{w:"100%",p:"0px",align:"center",sx:{"@media screen and (max-width: 960px)":{flexDirection:"column",w:"100%",alignItems:u?"flex-start":"flex-end"}},children:P.jsxs(Bi,{w:"100%",justify:{base:"flex-start",lg:"flex-end"},flex:"1",position:"absolute",right:"0px",top:{base:"-70px",lg:"-30px"},flexDir:{base:"row-reverse",lg:"row"},children:[P.jsx(jn,{type:"Add",onClick:()=>{console.log("start zoom in"),c()}}),P.jsx(jn,{type:"Sub",onClick:f})]})})}const Hu=t=>t.price,Ir=t=>t.depth;function Wu({id:t="liquidityChartRangeInput",data:{series:e,current:n},ticksAtLimit:r,styles:i,dimensions:{width:o,height:s},margins:l,interactive:u=!0,brushDomain:a,brushLabels:d,onBrushDomainChange:h,handleClickRefresh:c,zoomLevels:f,showZoomButtons:w=!0,isPosition:m=!1,hideBrush:y=!1,isReverse:p=!1,isSorted:v=!0,readonly:_=!1,dashedMarkerLine:k=[],currentRange:A="",constantPrice:b}){const S=O.useRef(null),[M,q]=O.useState(null),[D,B]=O.useMemo(()=>[s-l.top-l.bottom,o-l.left-l.right],[o,s,l]),{xScale:$,yScale:L}=O.useMemo(()=>{let T=[b*f.initialMin,b*f.initialMax];if(a&&String(a==null?void 0:a[0])!=="âˆž"&&String(a==null?void 0:a[1])!=="âˆž")if((a==null?void 0:a[0])===(a==null?void 0:a[1]))T=[Number(a==null?void 0:a[0])-(a==null?void 0:a[0])*.01,Number(a==null?void 0:a[0])+(a==null?void 0:a[0])*.01];else{const R=Hi(a);m?F(b).lt(a[0])?T=[F(b).minus(R).toNumber(),F(a[1]).plus(R).toNumber()]:F(b).gt(a[1])?T=[F(a[0]).minus(R).toNumber(),F(b).plus(F(R).mul(1.5)).toNumber()]:T=[F(a[0]).minus(R).toNumber(),F(a[1]).plus(R).toNumber()]:T=[F(a[0]).minus(R).toNumber(),F(a[1]).plus(R).toNumber()]}else Number(b)-b*2>0?T=[Math.max(F(0).add(F(b).div(10)).toNumber(),F(b).minus(F(b).mul(2)).toNumber()),F(b).add(F(b).mul(2)).toNumber()]:T=[0,F(b).mul(2).toNumber()];const E={xScale:on().domain(T).range([0,B]),yScale:on().domain([0,Gi(e,Ir)]).range([D,0])};if(M){const R=M.rescaleX(E.xScale);E.xScale.domain(R.domain())}return E},[b,f.initialMin,f.initialMax,B,e,D,M,a]);O.useEffect(()=>{q(null)},[f,A]),O.useEffect(()=>{a||h($.domain(),void 0)},[a,h,$]);const[g,N]=O.useState(void 0);return O.useEffect(()=>{N(S.current)},[S.current]),P.jsxs(An,{w:"100%",h:"100%",sx:{"@media screen and (max-width: 1000px)":{display:"block"}},children:[g&&P.jsx(Yu,{svg:g,xScale:$,setZoom:q,width:B,height:s,resetBrush:()=>{h([b*f.initialMin,b*f.initialMax],"reset")},showResetButton:!!(r[rt.LOWER]||r[rt.UPPER]),zoomLevels:f,isPosition:m,currentRange:A,handleClickRefresh:c}),P.jsxs("svg",{width:"100%",height:"245px",style:{overflow:"visible"},children:[P.jsxs("defs",{children:[P.jsxs("linearGradient",{id:"green-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[P.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),P.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]}),P.jsxs("linearGradient",{id:"red-gradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[P.jsx("stop",{offset:"5%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1}),P.jsx("stop",{offset:"100%",stopColor:"var(--chakra-colors-range_chart_bg)",stopOpacity:1})]})]}),P.jsxs("defs",{children:[P.jsx("clipPath",{id:`${t}-chart-clip`,children:P.jsx("rect",{x:"0",y:"0",width:B,height:s})}),a&&P.jsx("mask",{id:`${t}-chart-area-mask`,children:P.jsx("rect",{fill:"red",x:$(a[0]),y:"0",width:$(a[1])-$(a[0]),height:D})})]}),P.jsxs("g",{transform:`translate(${l.left},${l.top})`,children:[P.jsxs("g",{clipPath:`url(#${t}-chart-clip)`,children:[P.jsx(Du,{series:e,xScale:$,yScale:L,xValue:Hu,yValue:Ir,opacity:1,fill:"#195780"}),P.jsx(Xu,{value:n,xScale:$,innerHeight:D}),k==null?void 0:k.map((x,T)=>P.jsx(Vu,{value:Number(Zt(x)),xScale:$,innerHeight:D},x+T)),P.jsx(Fu,{xScale:$,innerHeight:D,isPosition:m})]}),P.jsx(Gu,{className:"zoom-overlay",width:B,height:s,ref:S}),P.jsx(Lu,{id:t,xScale:$,interactive:u,brushLabelValue:d,brushExtent:a??$.domain(),innerWidth:B,innerHeight:D,setBrushExtent:h,westHandleColor:i.brush.handle.west,eastHandleColor:i.brush.handle.east,readonly:_,isSorted:v,isFullRange:!a})]})]})]})}const Uu="/assets/no_chart_data@2x-DOXoFnuQ.png",Ku=O.forwardRef(function({isFrom:e,isSorted:n,contractPoolInfo:r,currencyA:i,currencyB:o,feeAmount:s,ticksAtLimit:l,price:u,priceLower:a,priceUpper:d,onLeftRangeInput:h,onRightRangeInput:c,onBothRangeInput:f,handleClickRefresh:w,interactive:m,readonly:y,zoomLevel:p,isPosition:v,hideBrush:_,isReverse:k,dashedMarkerLine:A,currentRange:b},S){var C,z;console.log("rangeChart index.tsx  ðŸš€ ~ contractPoolInfo:",r);const{formatPriceData:M,ticksPool:q,formatPriceDataIsLoading:D}=Tn(),B=O.useMemo(()=>!(M&&!D),[M]),$=O.useMemo(()=>{let I;return n?I=M:I=M==null?void 0:M.map(G=>{var X;return{...G,price:(X=F(1).div(G==null?void 0:G.price))==null?void 0:X.toString()}}),I},[n,M]),L=O.useMemo(()=>n?q==null?void 0:q.price:q==null?void 0:q.reversePrice,[q==null?void 0:q.id,n]),g=O.useCallback((I,G)=>{if(!G)return;const X=Number(I[0]),W=Number(I[1]),Z=(!l[n?rt.LOWER:rt.UPPER]||G==="handle"||G==="reset")&&X>=0,Y=(!l[n?rt.UPPER:rt.LOWER]||G==="reset")&&W>0&&W<1e35;if(Z&&Y){const K=parseFloat(X.toFixed(20)),nt=parseFloat(W.toFixed(20));K>=0&&nt>0&&K<nt&&f({leftTypedValue:F(X).toString(),rightTypedValue:F(W).toString()})}else Z?h(F(X).toString()):Y&&c(F(W).toString())},[n,f,h,c,l]),N=O.useMemo(()=>{const I=n?Zt(a==null?void 0:a.price):Zt(a==null?void 0:a.reversePrice);console.log("ðŸš€ ~ constbrushDomain:[number,number]|undefined=useMemo ~ leftPrice:",I);const G=n?Zt(d==null?void 0:d.price):Zt(d==null?void 0:d.reversePrice);if(console.log("ðŸš€ ~ constbrushDomain:[number,number]|undefined=useMemo ~ rightPrice:",G),G!=="âˆž")return I&&G?[Number(I),Number(G)]:void 0},[n,a==null?void 0:a.displayPrice,d==null?void 0:d.displayPrice,u]),x=O.useCallback((I,G)=>{if(!u)return"";if(I==="w"&&(l[n?rt.LOWER:rt.UPPER]||!N))return"0";if(I==="e"&&(l[n?rt.UPPER:rt.LOWER]||!N))return"âˆž";const X=(G<u?-1:1)*((Math.max(G,u)-Math.min(G,u))/u)*100;return u?`${Yi(Math.abs(X)>1?".2~s":".2~f")(X)}%`:""},[n,u,l,N]),T=!i||!o||$===void 0&&!B,E=O.useRef(null),{isApp:R}=Ne();return P.jsx(An,{w:"100%",h:"100%",flex:1,gap:"14px",position:"relative",ref:E,children:T||B||!$||!u?P.jsx(nn,{h:"100%",pt:e=="position"?"30px":"150px",children:P.jsx(rn,{})}):$.length===0?P.jsxs(en,{bg:"bg_secondary",w:"100%",h:"100%",direction:"column",justify:"center",align:"center",borderRadius:"12px",children:[P.jsx(zi,{src:Uu,w:"100px",h:"100px"}),P.jsx(Di,{mt:"20px",textAlign:"center",children:"There is no liquidity data."})]}):P.jsx(en,{w:"100%",h:"100%",position:"relative",justify:"center",align:"center",children:(C=E==null?void 0:E.current)!=null&&C.clientWidth?P.jsx(Wu,{data:{series:$,current:u},dimensions:{width:e=="position"?R?300:200:(z=E==null?void 0:E.current)==null?void 0:z.clientWidth,height:e=="position"?85:230},margins:{top:10,right:20,bottom:20,left:10},styles:{area:{selection:"var(--chakra-colors-text_caption)"},brush:{handle:{west:"#30D4B7",east:"#6297EA"}}},interactive:m&&!!($!=null&&$.length),brushLabels:x,brushDomain:N,onBrushDomainChange:g,zoomLevels:p??Ic[s??pn.MEDIUM],ticksAtLimit:l,isPosition:e==="position",hideBrush:_,isReverse:k,isSorted:n,readonly:y,dashedMarkerLine:A,handleClickRefresh:w,currentRange:b,constantPrice:L},`${s??pn.MEDIUM}`):P.jsx(nn,{h:"100%",pt:e=="position"?"30px":"150px",children:P.jsx(rn,{})})})})}),Zu=443636,Ju=-443636,ll=O.forwardRef(function(e,n){const{handleClickRefresh:r,minPriceData:i,maxPriceData:o,direct:s,readonly:l,isFrom:u,dashedMarkerLine:a,currentRange:d}=e,{contractPoolInfo:h,apiPoolInfo:c,currentPriceData:f}=bn(),{lowerTickData:w,upperTickData:m}=Dr(),{setTickDataBasedOnPrice:y}=lo(),{formatPriceDataIsLoading:p}=Tn();O.useMemo(()=>h==null?void 0:h.tickSpacing,[h==null?void 0:h.tickSpacing]);const v="100",_=O.useMemo(()=>Number(v)&&(h!=null&&h.tickSpacing)?{[rt.LOWER]:st.getInitializableTickIndex(Zu,Number(c==null?void 0:c.tickSpacing)),[rt.UPPER]:st.getInitializableTickIndex(Ju,Number(c==null?void 0:c.tickSpacing))}:{[rt.LOWER]:void 0,[rt.UPPER]:void 0},[v]),k=O.useMemo(()=>({[rt.LOWER]:w.tick===_.LOWER,[rt.UPPER]:(m==null?void 0:m.tick)===_.UPPER}),[_,w,m,v]),A=!0,b=void 0,S=({leftTypedValue:$,rightTypedValue:L})=>{console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:75 ~ onBothRangeInput ~ leftTypedValue:",$),console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:75 ~ onBothRangeInput ~ rightTypedValue:",L),console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:75 ~ onBothRangeInput ~ lowerTickData:",w),console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:75 ~ onBothRangeInput ~ upperTickData:",m),On($,6)!==(s?w==null?void 0:w.displayPrice:m==null?void 0:m.displayReversePrice)&&y(s?w:m,s?$:F(1).div($).toString()),On(L,6)!==(s?m==null?void 0:m.displayPrice:w.displayReversePrice)&&y(s?m:w,s?L:F(1).div(L).toString())},M=$=>{console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:88 ~ onLeftRangeInput ~ typedValue:",$)},q=$=>{console.log("ðŸš€ ~ file: LiquidityRangeChart.tsx:96 ~ onRightRangeInput ~ typedValue:",$)},D=O.useRef(null);O.useImperativeHandle(n,()=>{var $;return{depthChartRefreshData:($=D.current)==null?void 0:$.depthChartRefreshData}});const{getFormattedData:B}=po();return O.useEffect(()=>{h!=null&&h.poolAddress&&(h==null?void 0:h.poolAddress)===(c==null?void 0:c.poolAddress)&&(console.log("Test Depth Data###LiquidityRangeChart contractPoolInfo: ",h),console.log("Test Depth Data###LiquidityRangeChart apiPoolInfo1: ",c),console.log("Test Depth Data###LiquidityRangeChart contractPoolInfo?.poolAddress: ",h==null?void 0:h.poolAddress),B({poolAddress:h==null?void 0:h.poolAddress,tokenA:c==null?void 0:c.tokenA,tokenB:c==null?void 0:c.tokenB,tickSpacing:h==null?void 0:h.tickSpacing,currentTickIndex:h==null?void 0:h.current_tick_index,liquidity:h==null?void 0:h.liquidity,feeRate:h==null?void 0:h.fee_rate}))},[h==null?void 0:h.poolAddress,c==null?void 0:c.poolAddress]),P.jsxs(An,{w:"100%",h:"100%",position:"relative",children:[l&&P.jsx(nn,{w:"100%",h:"100%",position:"absolute",left:"0px",top:"0px",bg:"rgba(0,0,0,0)",zIndex:"99999"}),!p&&qn(i)&&qn(o)?P.jsx(Ku,{isFrom:u,ref:D,isSorted:s,contractPoolInfo:h,currencyA:c==null?void 0:c.tokenA,currencyB:c==null?void 0:c.tokenB,feeAmount:v,ticksAtLimit:k,price:s?f.currentPrice:f.reverseCurrentPrice,priceLower:i,priceUpper:o,interactive:A,zoomLevel:b,isReverse:c==null?void 0:c.isReverse,readonly:l,dashedMarkerLine:a,onBothRangeInput:S,onLeftRangeInput:M,onRightRangeInput:q,handleClickRefresh:r,currentRange:d}):P.jsx(qi,{w:"100%",h:"100%",mt:"20px",children:P.jsx(rn,{})})]})});function fl({label:t,value:e,loading:n}){const{isApp:r}=Ne();return r?P.jsx(Ui,{label:t,value:e,labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",h:"14px",fontWeight:"500"},isLoading:n,skeletonStyle:{valueW:"60px"}}):P.jsx(Ki,{wrapStyle:{gap:"8px",alignItems:"flex-end"},titleStyle:{fontSize:"12px"},valueStyle:{fontSize:"14px",fontWeight:"500"},title:t,value:e,isLoading:n,skeletonStyle:{valueW:"60px",valueH:"14px"}})}function Qu(){const{setCurrentPriceData:t}=bn();return{getCurrentPrice:(n,r)=>{if(r.tokenA&&r.tokenB){const i=r.tokenA.decimals,o=r.tokenB.decimals,s=st.sqrtPriceX64ToPrice(new Oi(n),i,o).toString(),l=F(1).div(s).toString(),u={currentPrice:s,reverseCurrentPrice:l,currentSqrtPrice:n,pool:r.poolAddress};t(u)}}}}function hl(){const{clmmSdk:t}=$r(),{fetchTokenInfo:e}=Zi(),{contractPoolInfo:n,setContractPoolInfo:r,setContractPoolInfoLoading:i,apiPoolInfo:o,setApiPoolInfo:s,setApiPoolInfoLoading:l}=bn(),{setFromToken:u,setToToken:a}=ao(),{getCurrentPrice:d}=Qu(),h=async f=>{i(!0);let w=null;try{if(w=await t.Pool.getPool(f),console.log("ðŸš€ ~ getContractPoolInfo ~ poolInfo:",{poolInfo:w,apiPoolInfo:o}),(o==null?void 0:o.displayTokenA)===void 0){const m=await c(w);m&&(s(m),l(!1),d(w==null?void 0:w.current_sqrt_price,m),u(m==null?void 0:m.displayTokenA),a(m==null?void 0:m.displayTokenB))}}catch(m){console.log("getContractPoolInfo ~ error:",m)}finally{i(!1)}return n?w?(r(w),w):n:(r(w||null),w)};async function c(f){const w=await e(f.coinTypeA),m=await e(f.coinTypeB);if(w&&m){const y=`${w==null?void 0:w.symbol} - ${m==null?void 0:m.symbol}`,p=Fe(f.fee_rate).div(100).toString(),v=Fe(f.fee_rate).div(1e4).toString(),_=Fe(p).div(100).toString()+"%",k=!Fi(f.coinTypeA,f.coinTypeB);return{poolAddress:f.poolAddress,name:y,isReverse:k,tokenA:w,tokenB:m,displayTokenA:k?m:w,displayTokenB:k?w:m,haveMining:!1,miningRewardList:null,miningAprList:null,haveFarming:!1,farmsRewarderList:null,farmsApr:"",farmingAprDisplay:"",feeApr:"",feeAprDisplay:"",miningAprTotal:"",feeAndMiningAprDisplay:"",totalAprDisplay:"",fee:v,feeRate:p,feeDisplay:_,tvlDisplay:"0",volume24Display:"0",fees24Display:"0",isVaults:!1,tickSpacing:f.tickSpacing.toString()}}}return{getContractPoolInfo:h}}export{ll as L,fl as S,Dr as a,lo as b,hl as c,Qu as d,ao as u};
