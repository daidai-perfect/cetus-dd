import{a as u,j as t,V as Q,W as gt,X as _t,Y as St,Z as Ct,a7 as Yt,$ as wt,a0 as jt,H as be,T as Y,f as vt,q as ke,p as ot,I as Pt,a1 as qt,aB as ft,a2 as Qt,a3 as Jt,a4 as Kt,P as Xt,h as Zt,aq as Tt,m as kt,n as es}from"./vendor-BFGDaAdA.js";import{v as Le,S as ts}from"./usePriceImpact-BcGZX8m-.js";import{Q as yt,aY as ut,l as it,o as ct,k as We,a1 as Rt,G as Ye,af as Ne,f as xe,aT as Pe,X as ss,B as Re,s as lt,d as ie,aZ as as,Z as y,t as Ke,M as Me,a_ as rt,E as _e,a$ as Xe,aI as Vt,aV as os,a as dt,C as ns,aj as ls,j as It,a9 as rs,x as nt,a2 as xt,O as us}from"./index-ChSVVHaJ.js";import{a as Ot,d as is,u as Dt,k as cs,c as ds,f as ps,h as ms,e as fs,i as pt,j as Mt,g as Lt}from"./VaultsAprBlock-9w_uOtsw.js";import{R as xs}from"./RefreshButton-pkVEdLvT.js";import{T as bs}from"./TradeConfirmAmountInfo-BVDhHIq2.js";import{T as hs}from"./TotalAmount-CKMFGbb5.js";import{H as Ze}from"./HTextLabelBox-B-nKLdqZ.js";import{u as Te}from"./global-jK9B4_lU.js";import{M as Wt}from"./msafe-oYBkW7LJ.js";import{f as we}from"./index-BmEYB-eP.js";import{u as $t}from"./useAccountBalance-xCFNREy3.js";import{u as bt}from"./useTokenBalance-D943AjPe.js";import{u as zt}from"./useTransaction-BbmVBjAH.js";import{T as Et}from"./TradeInputGroup-DXz0vdlf.js";import{C as ht}from"./CheckBox-CqHgO4KS.js";import{P as gs}from"./RemoveBlock-c7Lp9HFN.js";import{u as _s}from"./useFindBestRouting-BOYs32yR.js";const Ss=(n,a)=>({amountInputA:"",isProfileOpenVaultModal:!1,setIsProfileOpenVaultModal:e=>{n(()=>({isProfileOpenVaultModal:e}))},profilePoolInfo:{},setProfilePoolInfo:e=>{n(()=>({profilePoolInfo:e}))},amountInputB:"",setAmountInputA:e=>{n(()=>({amountInputA:e}))},profileActionTab:"Deposit",setProfileActionTab:e=>{n(()=>({profileActionTab:e}))},setAmountInputB:e=>{n(()=>({amountInputB:e}))},fromToken:{},toToken:{},setFromToken:e=>n({fromToken:e}),setToToken:e=>n({toToken:e}),calculateResult:{amount_a:"",amount_b:"",ft_amount:""},setCalculateResult:e=>n({calculateResult:e}),clearVaultsActionData:()=>n({amountInputA:"",amountInputB:"",calculateResult:{amount_a:"",amount_b:"",ft_amount:""}})}),$e=yt(Ss);function At(){const{setCurrentVaultPosition:n,vaultsPositionObj:a,setCurrentVaultPositionLoading:e,setVaultsPositionObj:c}=Ot(),{vaultClmmPoolContractInfoObj:o,setLstVaultContractInfoObj:i,setHaedalVaultContractInfoObj:_}=is(),{volatileVaultsSdk:s}=ut(),g=it("vaults"),{vaultsList:x}=Dt(),{getVaultPoolList:w}=cs(),{getVaultPosition:$}=ds(),{getVaultsContractInfo:b}=ps(),{getPythLastPrice:v}=ms(),{fetchTokenPrices:V}=ct(),{setFromToken:m,setToToken:R}=$e(),{getVaultsLpTokenList:I}=fs(),{currentAccount:W}=We(),z=u.useRef(W==null?void 0:W.address);u.useEffect(()=>{z.current=W==null?void 0:W.address},[W==null?void 0:W.address]);const te=(X,D=!1)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:61 ~ getCurrentVaultDetail ~ getCurrentVaultDetail:"),console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:44 ~ getCurrentVaultDetail ~ vaultsPositionObj:",a,z.current),Rt(a)&&a[X]&&!D){const E=a[X];if(console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:46 ~ getCurrentVaultDetail ~ currentVaultPositionData:",E),E.ownerAddress==z.current&&z.current){const{displayTokenA:L,displayTokenB:A}=E;m(L),R(A),n(E),e(!1)}else G(X,D)}else G(X,D)},O=async X=>{const D=await w();console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:66 ~ getCurrentVaultContractInfo ~ list:",D);const E=await I(D),L=D.filter(T=>T.vaultId==X)[0],{displayTokenA:A,displayTokenB:he}=L;m(A),R(he),L.category=="haedal"?v([Ye(L.displayTokenA.coin_type,!1),Ye(L.displayTokenB.coin_type,!1)]):V([Ye(L.displayTokenA.coin_type,!1),Ye(L.displayTokenB.coin_type,!1)]);const{lstVaultContractInfoObj:oe,haedalVaultContractInfoObj:ce,allClmmPoolContractInfoObj:me}=await b([L]),N=me[L.clmmPoolAddress];return{vaultContractInfo:L.category=="cetus"?oe[L.vaultId]:ce[L.vaultId],clmmContractInfo:N,vault:L,lpTokenInfoObj:E}},G=async(X,D=!1)=>{try{console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:87 ~ getCurrentVaultByVaultId ~ getCurrentVaultByVaultId:"),z.current&&!D&&e(!0);const{vaultContractInfo:E,clmmContractInfo:L,vault:A,lpTokenInfoObj:he}=await O(X);console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:92 ~ getCurrentVaultByVaultId ~ vaultContractInfo:",E),console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:93 ~ getCurrentVaultByVaultId ~ clmmContractInfo:",L),console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:99 ~ getCurrentVaultByVaultId ~ currentAcc.current:",z.current);let oe={};L&&E&&z.current?(oe=await $(A,L,E,!1,{},z.current,he),console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:101 ~ getCurrentVaultByVaultId ~ currentVaultPosition:",oe,z.current),oe[A.vaultId].ownerAddress==z.current&&z.current&&(n(oe[A.vaultId]),e(!1))):e(!1)}catch{e(!1)}};return{getCurrentVaultDetail:te,getCurrentVaultContractInfo:O,getCurrentVaultByVaultId:G,updateCurrentVaultById:async X=>{const D=x.filter(A=>A.vaultId==X)[0],E=o[D.clmmPoolAddress],L=D.category=="cetus"?await g.Vaults.getVault(D.vaultId):await s.Vaults.getPool(D.vaultId);if(D.category=="cetus"?i({[D.vaultId]:L}):_({[D.vaultId]:L}),E&&L){const A=await $(D,E,L);console.log("ðŸš€ðŸš€ðŸš€ ~ useCurrentVaultDetail.ts:100 ~ updateCurrentVaultById ~ currentVaultPosition:",A),A[D.vaultId].ownerAddress==z.current&&z.current&&(n(A[D.vaultId]),c(A))}}}}function Nt(n){const{poolName:a,amountLimit:e,lpRate:c,inputTotalValue:o,preCalculateLoading:i,labelColor:_,lpDecimals:s,calculateLpLoading:g}=n;return t.jsxs(Q,{w:"100%",gap:"20px",children:[t.jsx(hs,{totalAmount:o,loading:i}),t.jsx(Ze,{label:"Share of Pool",labelStyle:{fontSize:"14px",color:_},value:c,isLoading:g,valueStyle:{fontSize:"14px",h:"14px"}}),t.jsx(Ze,{label:"Est. Received LP",labelStyle:{fontSize:"14px",color:_},value:`${Ne(xe(Pe(e||"0",s||9)).toString(),9)} ${a}`,valueStyle:{fontSize:"14px",h:"14px"},isLoading:g})]})}function Cs(n){const{isOpen:a,onClose:e,data:c,onSubmitClick:o,calculateLpLoading:i}=n,{feeTier:_,displayTokenA:s,displayTokenB:g,displayAmountA:x,displayAmountB:w,totalAmountValue:$,sharePool:b,lpAmountLimit:v,lpDecimals:V}=c;return t.jsxs(gt,{autoFocus:!1,returnFocusOnClose:!1,isOpen:a,onClose:e,isCentered:!0,children:[t.jsx(_t,{}),t.jsxs(St,{children:[t.jsx(Ct,{children:t.jsx(Yt,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),t.jsx(wt,{}),t.jsx(jt,{textAlign:"center",p:"0px",children:t.jsxs(Q,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[t.jsxs(be,{w:"100%",justifyContent:"space-between",children:[t.jsxs(be,{children:[t.jsx(ss,{coinAIconUrl:s==null?void 0:s.logo_url,coinBIconUrl:g==null?void 0:g.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(Y,{fontSize:"16px",color:"text_caption",children:`${s==null?void 0:s.symbol} - ${g==null?void 0:g.symbol}`})]}),t.jsx(Re,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:t.jsxs(be,{children:[t.jsx(Y,{children:"Fee Tier"}),t.jsx(Y,{color:"primary",children:_})]})})]}),t.jsx(bs,{coinA:{amount:x,...s},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:w,...g}}),t.jsx(Nt,{amountLimit:v,inputTotalValue:$,preCalculateLoading:!1,calculateLpLoading:i,lpRate:b,lpDecimals:V,poolName:`${s==null?void 0:s.symbol} - ${g==null?void 0:g.symbol}`}),t.jsx(vt,{h:"52px"}),t.jsx(ke,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{o()},children:"Deposit"})]})})]})]})}function ws(n){const{getTokenAmountValueByPyth:a,getTokenPriceByPyth:e}=pt();if(n){const{hardCap:c,quoteCoinType:o,displayCoinTypeA:i,displayCoinTypeB:_,displayAmountA:s,displayAmountB:g,quoteCoin:x,baseCoin:w,baseCoinType:$}=n,b=a(o,c);if(!b)return{};const v=lt(b),V=a(i,s),m=a(_,g),R=ie(V).add(ie(m)).toString(),I=ie(R).div(ie(b)).mul(100).toString(),W=lt(I,"%"),z=e(o),te=e($),O=ie(b).sub(ie(R)).gt(0)?ie(b).sub(ie(R)).toString():"0";let G,U;return O!=="0"?(G=ie(O).div(z||"0").toString(),U=ie(O).div(te||"0").toString()):(G="0",U="0"),{hardCap:c,hardCapUSD:b,vaultTvl:R,displayHardCapUSD:v,depositRatio:I,displayDepositRatio:W,baseCoin:w,quoteCoin:x,availableCapacityWithQuoteCoin:G,availableCapacityWithBaseCoin:U,availableCapacityUSD:O}}return{}}function js(n,a){return{lpRate:u.useMemo(()=>n&&a?ie(a).eq(0)?"100%":`${as(ie(n).div(ie(n).add(a)).mul(100).toString(),2,6)}%`:"0%",[n,a])}}function Ht(n,a,e=!1){return{amountLimit:u.useMemo(()=>{if(a)return ie(a).mul(e?1+n:1-n).toString()},[a,n,e])}}function Ft(n){return{stakeProtocolName:u.useMemo(()=>{if(n){if(n.includes("HASUI"))return"Haedal";if(n.includes("AFSUI"))return"Aftermath";if(n.includes("CERT"))return"Volo"}},[n])}}function vs(n,a,e,c,o,i,_,s,g,x){const{balanceInfo:w}=bt(e),{balanceInfo:$}=bt(c),{amountInputA:b,amountInputB:v,setAmountInputA:V,setAmountInputB:m,setCalculateResult:R,calculateResult:I}=$e(),{getTokenAmountValueByPyth:W}=pt(),{getTokenAmountValue:z}=ct(),{volatileVaultsSdk:te}=ut(),O=it("vaults"),{vaultsSlippage:G}=Te(),{updateCurrentVaultById:U}=At(),{fetchAccountBalance:X}=$t(),[D,E]=u.useState(!1),{currentAccount:L}=We(),{pythPriceMap:A}=Mt(),{mevProtect:he,transactionMode:oe,maxCapForGas:ce,customGasPrice:me}=Te(),[N,Z]=u.useState(0),T=u.useRef(0);u.useEffect(()=>{T.current=N},[N]);const fe=u.useMemo(()=>a=="cetus"?z(e==null?void 0:e.coin_type,b):_&&D&&i==(e==null?void 0:e.coin_type)?y(g||"0").mul(N).div(100).toString():W(e==null?void 0:e.coin_type,b),[e==null?void 0:e.coin_type,b,A,a,_,D,N]),ee=u.useMemo(()=>a=="cetus"?z(c==null?void 0:c.coin_type,v):_&&D&&i==(c==null?void 0:c.coin_type)?y(g||"0").mul(N).div(100).toString():W(c==null?void 0:c.coin_type,v),[e==null?void 0:e.coin_type,v,A,a,_,D,N]),C=u.useMemo(()=>o?c:e,[o,e,c]),h=u.useMemo(()=>o?e:c,[o,e,c]),[k,ne]=u.useState(""),J=u.useRef("");u.useEffect(()=>{J.current=k},[k]);const[se,de]=u.useState(!1),ae=u.useRef(!1);u.useEffect(()=>{ae.current=se},[se]);const[F,je]=u.useState(!1),[le,ze]=u.useState(!1),[He,P]=u.useState(!1),K=u.useRef(""),re=u.useRef("");u.useEffect(()=>{K.current=b},[b]),u.useEffect(()=>{re.current=v},[v]);const B=u.useMemo(()=>_?i=="both"?"FlexibleBoth":i==(C==null?void 0:C.coin_type)?"OnlyCoinA":"OnlyCoinB":"FixedOneSide",[_,i,C]),pe=(r,l,d=!1)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:141 ~ wrapRes ~ res:",r),r)if(a=="haedal"){const p=y(r.deposit_amount_a).div(10**C.decimals).toString(),f=y(r.deposit_amount_b).div(10**h.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:150 ~ wrapRes ~ isSlider:",d),d?((i=="both"||i==(e==null?void 0:e.coin_type))&&(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:154 ~ wrapRes ~ setAmountInputA:",V),V(o?f:p)),(i=="both"||i==(c==null?void 0:c.coin_type))&&(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:154 ~ wrapRes ~ setAmountInputA:",m),m(o?p:f))):l?m(o?p:f):V(o?f:p)}else{const p=y(r.amount_a).div(10**C.decimals).toString(),f=y(r.amount_b).div(10**h.decimals).toString();l?m(o?p:f):V(o?f:p)}},ge=async(r,l,d,p)=>{try{P(!0);const f=(o?!l:l)?C:h,j=(o?!l:l)?h:C,M=_e(r,f.decimals).toFixed(0),H=_e(d||0,j.decimals).toFixed(0),q=o?!l:l;je(q),a=="haedal"?Se(M,l,H,q,p):Ve(M,l,q,p)}catch{}},Se=async(r,l,d,p,f)=>{let j={uuid:f,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:p,pool_id:n};_?(B==="OnlyCoinA"&&(j={uuid:f,mode:B,pool_id:n,coin_amount_a:r}),B==="OnlyCoinB"&&(j={uuid:f,mode:B,pool_id:n,coin_amount_b:r}),B=="FlexibleBoth"&&(j={uuid:f,mode:B,pool_id:n,coin_amount_a:p?r:d,coin_amount_b:p?d:r})):j={uuid:f,mode:"FixedOneSide",fixed_amount:r,fixed_coin_a:p,pool_id:n},console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:257 ~ params:",j);const M=await te.Vaults.preCalculateDepositAmount(j,{onSuccess:H=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:185 ~ uuid:",f,J.current),f==J.current&&(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?K.current||re.current:K.current&&re.current)?(R({amount_a:o?M.deposit_amount_b:M.deposit_amount_a,amount_b:o?M.deposit_amount_a:M.deposit_amount_b,ft_amount:H}),P(!1)):(P(!1),R(void 0))},onError:(H,q)=>{P(!1)}});console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:279 ~ res:",M),J.current===f&&(B=="FixedOneSide"&&(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:179 ~ haedalPreCalculate ~ res:",M),pe(M,l)),(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?K.current||re.current:K.current&&re.current)&&at(M))},Ve=async(r,l,d,p)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:214 ~ lstPreCalculate ~ uuid:",p),C&&h&&n)try{P(!0);const f={vault_id:n,fix_amount_a:d,input_amount:r,slippage:Number(G),request_id:p,side:i==="both"?Xe.Both:Xe.OneSide};console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:279 ~ lstPreCalculate ~ params:",f);const j=await O.Vaults.calculateDepositAmount(f,!0,!0);console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:204 ~ lstPreCalculate ~ res:",j),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:221 ~ lstPreCalculate ~ uuidRef.current1:",J.current===p,J.current,"-----",p),J.current===p&&(_||pe(j,l),R(j),P(!1))}catch{R(void 0)}finally{P(!1)}},Ee=Ke(ge,500),ue=async(r,l,d)=>{if(l?V(r):m(r),g=="0"&&a=="haedal")return;if(de(l),!r&&!d){Ce();return}if(i=="both"&&_&&(!+r||!+d)){P(!1),R(void 0),Z(0);return}const p=a=="haedal"?W(l?e.coin_type:c.coin_type,r):z(l?e.coin_type:c.coin_type,r),f=a=="haedal"?W(l?c.coin_type:e.coin_type,d):z(l?c.coin_type:e.coin_type,d),j=y(p).add(y(f));if(_&&(j.gt(1e4)||j.gt(0)&&j.lt(1e-4))){Z(0);return}const M=Le();ne(M),+r?Ee(r,l,d,M):_||Ce()},Ce=()=>{V(""),m(""),Z(0),ne(""),R(void 0),P(!1)},Ie=u.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:386 ~ inputTotalValue ~ amountValueA:",fe),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:387 ~ inputTotalValue ~ amountValueB:",ee),y(fe||"0").add(ee||"0").toString()),[fe,ee]),Fe=u.useMemo(()=>_?y(Ie).gt(y(1e4)):!1,[Ie,_]),Ae=u.useMemo(()=>_?y(Ie).gt(0)&&y(Ie).lt(y(1e-4)):!1,[Ie,_]),{stakeProtocolName:qe}=Ft(F?h==null?void 0:h.coin_type:C==null?void 0:C.coin_type),Ge=u.useMemo(()=>{if(a!="haedal"&&i!=="both"&&C&&h&&(+b||+v)){const r=F?b:v,l=F?C:h,d=F?h:C;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:424 ~ showOnlySideTips ~ calculateResult:",I),I&&I.swap_result){const p=Me(I.swap_result.swap_in_amount,l.decimals),f=Me(y(I.swap_result.swap_out_amount).mul(1-Number(G)).toString(),d.decimals);return rt.isSuiCoin(l.coin_type)?`By depositing ${Ne(xe(r,9).toString(),9)} SUI, ${Ne(xe(p,9).toString(),9)} SUI will be converted to ${d==null?void 0:d.symbol} via ${qe} liquid staking and added to the pool together.`:`By depositing ${Ne(xe(r,9).toString(),9)} ${l==null?void 0:l.symbol}, ${Ne(xe(p,9).toString(),9)} ${l==null?void 0:l.symbol} will be traded for ${Ne(xe(f,9).toString(),9)} ${d==null?void 0:d.symbol} and then added to the pool together.`}else if(!rt.isSuiCoin(i)){const p=z(i,r);if(y(p).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[i,I,b,v,a]),{signAndExecuteTransaction:Ue,transactionConfirmation:et,transactionRejected:tt}=zt(),Qe=()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:474 ~ reCalculateResult ~ reCalculateResult:"),g=="0"&&a=="haedal"){V(""),m(""),Z(0),P(!1),R(void 0);return}if(i=="both"&&(!+b||!+v))return;const r=Le();if(ne(r),D)De(T.current,x,s,r);else{const l=ae.current?K.current:re.current,d=se?re.current:K.current;+l&&Ee(l,se,d,r)}},De=Ke(async(r,l,d,p)=>{var j;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:470 ~ preCalculateDepositValue ~ percent:",r),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:431 ~ preCalculateDepositValue ~ coin:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:432 ~ preCalculateDepositValue ~ pythPriceMap:",A);const f=(j=A[Ye(d==null?void 0:d.coin_type,!1)])==null?void 0:j.price;if(C&&h&&n){const M=y(l).mul(r).div(100).mul(f).toString();if(M=="0"){R(void 0),V(""),m(""),Z(0),P(!1);return}console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ coin:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ coinPrice:",f),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ percent:",r),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ availableCapacityWithCoin:",l),y(l).mul(r).div(100).toString(),P(!0);const H={mode:B,pool_id:n,amount_usd:M,uuid:p};console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:472 ~ preCalculateDepositValue ~ params:",H);const q=await te.Vaults.preCalculateDepositValue(H,{onSuccess:(ve,ye)=>{ye==J.current&&(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?K.current||re.current:K.current&&re.current)?(R({amount_a:o?q.deposit_amount_b:q.deposit_amount_a,amount_b:o?q.deposit_amount_a:q.deposit_amount_b,ft_amount:ve}),P(!1)):(P(!1),R(void 0))},onError:(ve,ye)=>{console.log("ðŸš€ ~ preCalculate ~ error:",ve)}});if(p!==J.current)return;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:492 ~ preCalculateDepositValue ~ res:",q),pe(q,!0,!0)}},500),st=(r,l,d,p)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:536 ~ handlePercentInputChange ~ percent:",r),y(r).lte(0)){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:538 ~ handlePercentInputChange ~ percent11111:"),R(void 0),V(""),m(""),P(!1);return}De(r,l,d,p)},at=async r=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:503 ~ calculateDepositRatioWithAvailableCapacity ~ wrapRes:",r),C&&h){const l=Pe(r.deposit_amount_a,C==null?void 0:C.decimals),d=Pe(r.deposit_amount_b,h==null?void 0:h.decimals),p=W(C==null?void 0:C.coin_type,String(l)),f=W(h==null?void 0:h.coin_type,String(d)),j=y(p).add(y(f)).toString(),M=y(j).div(y(g)).mul(100);if(g=="0"){Z(0),V(""),m(""),R(void 0),P(!1);return}if(M.gt(100)){const H=Le();ne(H),Z(100),De(100,x,s,H)}else if(K.current||re.current){const H=xe(M.toString(),2);Z(Number(H))}}},Be=async()=>{if(n){let r;a=="haedal"?r={pool_id:n,amount_a:String(o?_e(v||0,String(C==null?void 0:C.decimals)):_e(b||0,String(C==null?void 0:C.decimals))),amount_b:String(o?_e(b||0,String(h==null?void 0:h.decimals)):_e(v||0,String(h==null?void 0:h.decimals)))}:r={vault_id:n,slippage:Number(G),deposit_result:I},console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",r);const l={getShowInfo:(d,p,f)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",f);const j="Deposit "+[we(b,o?h==null?void 0:h.symbol:C==null?void 0:C.symbol),we(v,o?C==null?void 0:C.symbol:h==null?void 0:h.symbol)].filter(Boolean).join(" and "),M={modalDescriptionText:j,toastTitleText:j};if(d==="success"){let H=b,q=v;f&&f.events.forEach(ye=>{ye.type.indexOf("::pool::DepositEvent")>-1&&C&&h&&(H=String(Pe(ye.parsedJson.amount_a,C.decimals)),q=String(Pe(ye.parsedJson.amount_b,h.decimals)))});const ve="Deposit "+[we(o?q:H,o?h==null?void 0:h.symbol:C==null?void 0:C.symbol),we(o?H:q,o?C==null?void 0:C.symbol:h==null?void 0:h.symbol)].filter(Boolean).join(" and ");M.toastDescriptionContent=ve,M.modalDescriptionText=ve,M.toastTitleText="Deposit successful"}return M}};et(l);try{const d=new Vt;d.setSender(L.address),a=="haedal"?await te.Vaults.buildDepositPayload(r,d):(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:447 ~ doAddAction ~ vaultsSdk:",O,r),await O.Vaults.deposit(r,d)),await Ue(d,l,{useMev:he,txAction:"signTransactionBlock",useFastMode:oe==="Fast Mode",maxCapForGas:ce,customGasPrice:me,msafeParams:{action:Wt.AddVaultsPosition,txbParams:r}})?(Ce(),setTimeout(()=>{X(),U(n)},2e3)):Qe()}catch(d){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:418 ~ doAddAction ~ error:",d),tt(l)}}},S=u.useMemo(()=>i==(s==null?void 0:s.coin_type)||i=="both",[i,s]);return u.useEffect(()=>()=>{J.current=""},[]),{balanceInfoA:w,balanceInfoB:$,amountValueA:fe,amountValueB:ee,handleAmountInputChange:ue,amountInputA:b,amountInputB:v,setAmountInputA:V,setAmountInputB:m,resetInputAmount:Ce,preCalculateLoading:le,isFixedDisplayTokenA:se,zapNumGtError:Fe,zapNumLtError:Ae,calculateLpLoading:He,inputTotalValue:Ie,showOnlySideTips:Ge,doAddAction:Be,reCalculateResult:Qe,percentage:N,setPercentage:Z,isSlider:D,setIsSlider:E,handlePercentInputChange:st,isQuoteCoin:S,setUuid:ne,uuidRef:J}}function Gt(n,a,e,c,o,i,_,s,g,x,w,$){const{currentAccount:b}=We(),{calculateResult:v}=$e();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsButtonStatus.ts:23 ~ calculateResult:",v);const V=u.useMemo(()=>{const m={text:void 0,disabled:!1};if(!(b!=null&&b.address))return m.text="Connect Wallet",m.disabled=!1,m;if(!o||!i)return m.disabled=!0,m;if(_==="both"){if(!+n&&!+a||$&&(!+n||!+a))return m.text="Enter an amount",m.disabled=!0,m}else{if(_==(o==null?void 0:o.coin_type)&&!+n||_==(i==null?void 0:i.coin_type)&&!+a)return m.text="Enter an amount",m.disabled=!0,m;if(w=="cetus"&&s){const R=rt.isSuiCoin(_);if(R&&_===(o==null?void 0:o.coin_type)&&y(n).lt(3)||R&&_===(i==null?void 0:i.coin_type)&&y(a).lt(3))return m.text="Minimum deposit 3 SUI",m.disabled=!0,m}}if(_=="both"){if(y(n||"0").gt(e||"0"))return m.disabled=!0,m.text=s?`Insufficient ${o==null?void 0:o.symbol} Balance`:"Invalid Amount",m;if(y(a||"0").gt(c||"0"))return m.disabled=!0,m.text=s?`Insufficient ${i==null?void 0:i.symbol} Balance`:"Invalid Amount",m}if(_!=="both"){if(y(n||"0").gt(e||"0"))return m.disabled=!0,m.text=s?`Insufficient ${o==null?void 0:o.symbol} Balance`:"Invalid Amount",m;if(y(a||"0").gt(c||"0"))return m.disabled=!0,m.text=s?`Insufficient ${i==null?void 0:i.symbol} Balance`:"Invalid Amount",m}return console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsButtonStatus.ts:111 ~ submitBtnInfo ~ zapNumGtError:",g,x),s&&g||s&&x?(m.text="Enter an amount",m.disabled=!0,m):(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsButtonStatus.ts:133 ~ submitBtnInfo ~ calculateResult:",v),(v&&v.ft_amount=="0"||v&&v.burn_ft_amount=="0"||!v)&&(m.disabled=!0,m.text="Enter an amount"),m)},[n,a,e,c,o,i,_,g,x,w,b==null?void 0:b.address,v]);return{btnText:V.text,btnDisabled:V.disabled}}const ys=(n,a)=>({isCheckedAcceptWalletObj:{},setIsCheckedAcceptWalletObj:e=>n(()=>({isCheckedAcceptWalletObj:{...a().isCheckedAcceptWalletObj,...e}})),isCheckedDontRemindWalletObj:{},setIsCheckedDontRemindWalletObj:e=>n(()=>({isCheckedDontRemindWalletObj:{...a().isCheckedDontRemindWalletObj,...e}}))}),Ut=yt(os(ys,{name:"useVaultsRiskStore",partialize:n=>{const{isCheckedAcceptWalletObj:a,isCheckedDontRemindWalletObj:e}=n;return{isCheckedAcceptWalletObj:a,isCheckedDontRemindWalletObj:e}}})),Je=({children:n})=>t.jsx(Y,{lineHeight:"20px",color:"text_caption",fontSize:"12px",position:"relative",pl:"10px",_before:{content:'""',display:"inline-block",w:"4px",h:"4px",borderRadius:"50%",bg:"primary",position:"absolute",left:"0",top:"8px"},children:n});function Rs(n){const{isOpen:a,setIsOpen:e,continueFunc:c}=n,[o,i]=u.useState(!1),[_,s]=u.useState(!1),{setIsCheckedAcceptWalletObj:g,setIsCheckedDontRemindWalletObj:x}=Ut(),{currentAccount:w}=We(),$=()=>{const v={[w==null?void 0:w.address]:o};g(v);const V={[w==null?void 0:w.address]:_};x(V),c()},{isApp:b}=dt();return t.jsxs(gt,{isCentered:!0,isOpen:a,onClose:()=>{e(!1)},children:[t.jsx(_t,{}),t.jsxs(St,{width:{base:"100%",lg:"480px"},children:[t.jsx(Ct,{children:t.jsx(Y,{fontSize:b?"14px":"16px",fontWeight:"500",color:"caption",lineHeight:b?"20px":"40px",children:"Risk Acknowledgement"})}),t.jsx(wt,{m:b?"":"12px 2px 0 0"}),t.jsxs(jt,{p:"0 16px",children:[t.jsxs(Q,{bg:"menu_item_bg",borderRadius:"8px",border:"1px solid",borderColor:"border",p:"16px 12px",gap:b?"12px":"16px",children:[t.jsx(Y,{w:"100%",textAlign:"left",fontSize:"12px",children:"Before you provide liquidity via this vault:"}),t.jsxs(Q,{gap:b?"12px":"16px",children:[t.jsx(Je,{children:"You acknowledge that this vault strategy is provided by a third party. Cetus integrates it at the UI level for user convenience but does not operate this product or take responsibility for third-party risks."}),t.jsx(Je,{children:"You acknowledge that the displayed APR and APY are based on historical data and not a guaranteed return."}),t.jsx(Je,{children:"You understand that APR and APY figures reflect past trading fees and rewards only, excluding impermanent loss and price volatility."}),t.jsx(Je,{children:"You recognize the risks associated with automated liquidity strategies, including market fluctuations and third-party operational risks."}),t.jsx(Y,{fontSize:"12px",color:"text_paragraph",lineHeight:"20px",children:"Please assess these risks carefully and proceed only if you fully understand and accept them."})]})]}),t.jsxs(Q,{bg:"menu_item_bg",borderRadius:"8px",border:"1px solid",borderColor:"border",p:b?"12px 16px":"16px",justifyContent:"flex-start",alignItems:"flex-start",m:"16px 0",userSelect:"none",gap:b?"8px":"12px",children:[t.jsxs(be,{children:[t.jsx(ht,{checked:o,onClick:()=>i(!o)}),t.jsx(Y,{fontWeight:"500",color:"text_caption",children:"I acknowledge and accept all the risks."})]}),t.jsxs(be,{children:[t.jsx(ht,{checked:_,onClick:()=>s(!_)}),t.jsx(Y,{fontSize:"12px",color:"text_paragraph",children:"Don't remind me again."})]})]}),t.jsx(ke,{w:"calc(100% + 32px)",h:"52px",bg:"primary",borderRadius:"12px",fontWeight:"600",ml:"-16px",disabled:!o,onClick:$,children:"Continue"})]})]})]})}function Vs({percentage:n,onChange:a,quoteCoin:e,availableCapacityWithQuoteCoin:c,availableCapacityUSD:o}){const i=u.useMemo(()=>!o,[o]),_={fontSize:"sm",position:"absolute",ml:"-5px",top:"50%",transform:"translateY(-50%)",zIndex:"100",borderRadius:"50%"},s=[0,25,50,75,100];return t.jsx(t.Fragment,{children:i?t.jsxs(Q,{width:"100%",maxHeight:"164px",justifyContent:"space-between",children:[t.jsx(ot,{width:"100%"}),t.jsx(ot,{width:"100%"}),t.jsx(ot,{width:"100%"})]}):t.jsxs(Q,{width:"100%",alignItems:"start",gap:"14px",children:[t.jsx(Y,{color:"text_paragraph",textAlign:"left",children:"Available Capacity"}),t.jsxs(be,{w:"100%",alignItems:"center",justifyContent:"space-between",mt:"12px",children:[t.jsx(ns,{tooltip:t.jsxs(be,{children:[t.jsx(Pt,{src:e==null?void 0:e.logo_url,w:"20px",h:"20px"},e==null?void 0:e.coin_type),t.jsx(Y,{color:"text_caption",children:xe(c,2)}),t.jsx(Y,{color:"text_caption",children:e==null?void 0:e.symbol})]}),children:t.jsx(be,{w:"100%",alignItems:"center",justifyContent:"space-between",children:t.jsx(Y,{color:"text_caption",height:"14px",textAlign:"left",fontSize:"16px",textDecoration:"underline dotted",children:lt(o,"$")})})}),t.jsxs(qt,{"aria-label":"slider-ex-6",min:0,max:100,focusThumbOnChange:!1,value:n=="--"?0:Number(n),onChange:g=>a(g),w:"242px",isDisabled:Number(o)<=0,children:[s.filter(g=>g!==Number(n)).map((g,x)=>t.jsx(ft,{..._,value:g,w:"8px",h:"8px",bg:Number(n)>=g?"primary":"#2b2e32",onClick:()=>a(g)},x)),t.jsx(ft,{value:Number(n),textAlign:"center",bg:"#1B2E3B",p:"2px 4px",borderRadius:"4px",fontSize:"12px",color:"primary",mt:"-28px",ml:"-15px",children:ls(n,2)}),t.jsx(Qt,{bg:"#2b2e32",height:"2px",borderRadius:"4px",children:t.jsx(Jt,{height:"2px",bg:"primary",borderRadius:"2px"})}),t.jsx(Kt,{p:"1px",w:"10px",h:"10px",border:"1px solid primary",position:"relative",zIndex:"100",borderRadius:"50%",_before:{content:'""',w:"6px",h:"6px",borderRadius:"50%",bg:[0,25,50,75,100].includes(Number(n))?"primary":"bg_secondary",border:"1px solid #2b2e32"}})]})]}),!i&&o==0?t.jsx(Q,{w:"100%",alignItems:"start",children:t.jsx(Y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The vault has reached its current capacity. New deposits are not accepted at this time."})}):null]})})}const Is={customDeposit:"Through Zap-In, you can deposit your liquidity in single token or with customized token ratio. Tokens will be auto converted to match the required ratio. ",deposit:"Through Zap-In, you can deposit your liquidity in single token. Tokens will be auto converted to match the required ratio.",withdraw:"Through Zap-Out, you can withdraw your liquidity in one token. The liquidity will be auto converted to one token you selected."};function Os(n){const{isCheckedZAP:a,zapText:e,tooltipType:c,zapSwitchChange:o}=n,{isApp:i}=dt();return t.jsx(Re,{padding:"6px 8px",borderRadius:"8px",width:"unset",children:t.jsxs(Xt,{isLazy:!0,trigger:i?"click":"hover",placement:"top",autoFocus:!1,returnFocusOnClose:!1,children:[t.jsx(Zt,{children:t.jsxs(be,{h:"14px",cursor:"pointer",as:"button",children:[t.jsx(Y,{fontSize:"14px",color:a?"primary":"",fontWeight:"500",children:e}),t.jsx(Tt,{isChecked:a,onChange:()=>o(!a)})]})}),t.jsx(kt,{minW:"fit-content",w:"fit-content",children:t.jsx(es,{p:"12px",lineHeight:"20px",fontSize:"12px",maxWidth:"320px",children:Is[c]})})]})})}const Ds="You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",Ms=(n,a)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${a} via ${n} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`,Oe={Deposit:"Deposit"};function Bt(n){const{displayTokenA:a,displayTokenB:e,onSelectAssetTab:c,label:o="Deposit Amounts",isCheckedZAP:i,setIsCheckedZAP:_,assetAction:s,setAssetAction:g,category:x,currentActionTab:w}=n,{stakeProtocolName:$}=Ft(a==null?void 0:a.coin_type),b=u.useMemo(()=>x==="haedal",[x]),v=()=>{if(!a||!e)return[];const I=[{label:`${a.symbol} only`,action:a.coin_type,afterIcon:i&&w===Oe.Deposit&&!b?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:b?w===Oe.Deposit?`You can add liquidity in this pool with only ${a.symbol}.`:"":Ds},{label:`${e.symbol} only`,action:e.coin_type,afterIcon:i&&w===Oe.Deposit&&!b?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:b?w===Oe.Deposit?`You can add liquidity in this pool with only ${e.symbol}.`:"":Ms($,a==null?void 0:a.symbol)}];return b&&w===Oe.Deposit&&I.splice(1,0,{label:`${a.symbol}+${e.symbol}`,action:"both",tooltip:"You can add any value you want from both assets."}),I},V=u.useMemo(v,[a,e,i,$,b,w]),m=u.useMemo(()=>{var I,W,z;if(V.length!==0)return s===(a==null?void 0:a.coin_type)?V[0].label:s===(e==null?void 0:e.coin_type)?b&&w===Oe.Deposit?(I=V[2])==null?void 0:I.label:(W=V[1])==null?void 0:W.label:(z=V[1])==null?void 0:z.label},[s,V,b,w,a==null?void 0:a.coin_type,e==null?void 0:e.coin_type]),R=u.useMemo(()=>w===Oe.Deposit?b?"customDeposit":"deposit":"withdraw",[w,b]);return t.jsxs(Q,{w:"100%",gap:"16px",children:[t.jsxs(be,{w:"100%",justifyContent:"space-between",children:[t.jsx(Y,{fontWeight:"500",children:o}),t.jsx(Os,{isCheckedZAP:i,zapText:w===Oe.Deposit?"Zap In":"Zap Out",tooltipType:R,zapSwitchChange:I=>{_(!i),g(I?(a==null?void 0:a.coin_type)??"":"both")}})]}),i&&V.length>0&&t.jsx(It,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:m,tabList:V,handleChangeTab:I=>{g(I.action),c(I.action)}})]})}function Ls(n){const{currentAccount:a,onWalletModal:e}=We(),[c,o]=u.useState("both"),[i,_]=u.useState(!1),{category:s,isReverse:g,vaultId:x,currentActionTab:w,totalSupply:$,lpTokenInfo:b,feeTier:v,isModal:V,isAutoRefresh:m}=n,{fromToken:R,toToken:I,calculateResult:W}=$e(),{vaultsPoolObj:z}=Lt(),te=u.useMemo(()=>z[x],[z,x]),O=ws(te),{balanceInfoA:G,balanceInfoB:U,amountValueA:X,amountValueB:D,handleAmountInputChange:E,amountInputA:L,amountInputB:A,resetInputAmount:he,preCalculateLoading:oe,zapNumGtError:ce,zapNumLtError:me,calculateLpLoading:N,inputTotalValue:Z,showOnlySideTips:T,doAddAction:fe,reCalculateResult:ee,percentage:C,setPercentage:h,setIsSlider:k,handlePercentInputChange:ne,isQuoteCoin:J,setUuid:se,uuidRef:de}=vs(x,s,R,I,g,c,i,O==null?void 0:O.quoteCoin,O==null?void 0:O.availableCapacityUSD,O==null?void 0:O.availableCapacityWithQuoteCoin);console.log("ðŸš€ðŸš€ðŸš€ ~ vaultsAdd.tsx:74 ~ VaultsAdd ~ calculateLpLoading:",N),u.useEffect(()=>{he()},[i,c]);const[ae,F]=u.useState(!1),{isApp:je}=dt(),{btnText:le,btnDisabled:ze}=Gt(L,A,(G==null?void 0:G.balanceFormat)||"",(U==null?void 0:U.balanceFormat)||"",R,I,c,!0,ce,me,s,i),{vaultsSlippage:He}=Te(),{lpRate:P}=js(W==null?void 0:W.ft_amount,$),{amountLimit:K}=Ht(Number(He),W==null?void 0:W.ft_amount,!1),re=()=>({feeTier:v||"",displayTokenA:R,displayTokenB:I,displayAmountA:L,displayAmountB:A,totalAmountValue:Z,sharePool:P,lpAmountLimit:K||"0",lpDecimals:b==null?void 0:b.decimals}),{pythPriceMap:B}=Mt(),pe=u.useRef(!1);u.useEffect(()=>{pe.current=!0},[]),u.useEffect(()=>{pe.current&&ee(),pe.current=!0},[B]),u.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:151 ~ VaultsAdd ~ isAutoRefresh:",m),pe.current&&ee()},[m]);const{isCheckedDontRemindWalletObj:ge}=Ut(),[Se,Ve]=u.useState(!1),Ee=u.useMemo(()=>!ge[a==null?void 0:a.address],[ge,a==null?void 0:a.address]);return u.useEffect(()=>()=>{de.current=""},[]),t.jsxs(Q,{gap:V?"8px":"12px",w:"100%",align:"flex-start",children:[t.jsxs(Re,{bg:V?"transparent":"bg_six",borderColor:V?"transparent":"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:V?"0":"16px"},w:"100%",children:[t.jsx(Bt,{displayTokenA:R,displayTokenB:I,onSelectAssetTab:ue=>{o(ue)},setIsCheckedZAP:()=>_(!i),setAssetAction:o,assetAction:c,isCheckedZAP:i,category:s,currentActionTab:w,handleRefreshClick:()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ vaultsAdd.tsx:174 ~ VaultsAdd ~ handleRefreshClick:"),ee()}}),t.jsx(Q,{mt:V?"8px":"16px",position:"relative",children:t.jsx(Et,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:c!=="both"&&c!==(R==null?void 0:R.coin_type),balance:(G==null?void 0:G.balanceFormat)||"",value:L,amountValue:L&&X,loading:!1,onChange:ue=>{s=="haedal"&&k(!1),E(ue,!0,A)},selectable:!1,placeholder:"0.0",token:R},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:c!=="both"&&c!==(I==null?void 0:I.coin_type),balance:(U==null?void 0:U.balanceFormat)||"",value:A,amountValue:A&&D,loading:!1,onChange:ue=>{s=="haedal"&&k(!1),E(ue,!1,L)},selectable:!1,placeholder:"0.0",token:I},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),s=="haedal"&&Rt(B)&&t.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"16px",children:t.jsx(Vs,{depositRatio:O.depositRatio||"",percentage:C,hardCapUSD:O.hardCapUSD||"",vaultTvl:O.vaultTvl||"",availableCapacityUSD:O.availableCapacityUSD||"",quoteCoin:O.quoteCoin,maxCapNum:O.hardCap||"",availableCapacityWithQuoteCoin:O.availableCapacityWithQuoteCoin||"",onChange:ue=>{k(!0),h(ue);const Ce=Le();se(Ce),ne(ue,J?O==null?void 0:O.availableCapacityWithQuoteCoin:O==null?void 0:O.availableCapacityWithBaseCoin,J?O.quoteCoin:O.baseCoin,Ce)}})},x),t.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(Q,{w:"100%",gap:"20px",children:[t.jsx(ke,{m:"-1px",isLoading:N||ae,w:"100%",borderRadius:"12px",h:"52px",fontSize:je?"14px":"18px",fontWeight:"500",disabled:ze||ae||N,onClick:()=>{a?Ee&&s=="haedal"?Ve(!0):F(!0):e(!0)},children:le||(i?"Zap In":"Deposit")}),ce&&(L||A)&&t.jsx(Q,{w:"100%",pl:"16px",pr:"16px",pb:W||T?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(Y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}),me&&(L||A)&&t.jsx(Q,{w:"100%",pl:"16px",pb:W||T?"0px":"20px",pr:"16px",alignItems:"start",children:t.jsx(Y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(W||T)&&(L||A)&&t.jsxs(Q,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[c!=="both"&&T&&t.jsx(Y,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:W?"20px":"0",children:T}),W&&t.jsx(Nt,{amountLimit:K,inputTotalValue:Z,preCalculateLoading:oe,calculateLpLoading:N,lpRate:P,lpDecimals:b==null?void 0:b.decimals,poolName:`${R==null?void 0:R.symbol} - ${I==null?void 0:I.symbol}`,labelColor:"primary_gray"})]})]})}),Se&&t.jsx(Rs,{isOpen:Se,setIsOpen:Ve,continueFunc:()=>{Ve(!1),F(!0)}}),ae&&t.jsx(Cs,{data:re(),isOpen:ae,calculateLpLoading:N,onClose:()=>{F(!1)},onSubmitClick:()=>{F(!1),fe()}})]})}function Ws(n,a,e,c,o,i,_,s){const{amountInputA:g,amountInputB:x,calculateResult:w,setAmountInputA:$,setAmountInputB:b,setCalculateResult:v}=$e(),{findBestRouters:V}=_s(),{vaultsSlippage:m,mevProtect:R,maxCapForGas:I,transactionMode:W,customGasPrice:z}=Te(),{getTokenAmountValue:te}=ct(),{volatileVaultsSdk:O}=ut(),G=it("vaults"),{getTokenAmountValueByPyth:U}=pt(),[X,D]=u.useState(!1),[E,L]=u.useState(!1),{fetchAccountBalance:A}=$t(),{updateCurrentVaultById:he}=At(),{providers:oe}=rs(),ce=u.useRef(E);u.useEffect(()=>{ce.current=E},[E]);const[me,N]=u.useState(!1),[Z,T]=u.useState(""),fe=u.useRef(Z);u.useEffect(()=>{fe.current=Z},[Z]);const ee=u.useRef(g),C=u.useRef(x);u.useEffect(()=>{ee.current=g},[g]),u.useEffect(()=>{C.current=x},[x]);const h=u.useMemo(()=>o?c:e,[o,e,c]),k=u.useMemo(()=>o?e:c,[o,e,c]),ne=a=="haedal"?U(e==null?void 0:e.coin_type,g||"0"):te(e==null?void 0:e.coin_type,g||"0"),J=a=="haedal"?U(c==null?void 0:c.coin_type,x||"0"):te(c==null?void 0:c.coin_type,x||"0"),[se,de]=u.useState(o?s==null?void 0:s.amountB:s==null?void 0:s.amountA),[ae,F]=u.useState(o?s==null?void 0:s.amountA:s==null?void 0:s.amountB),[je,le]=u.useState(!1),ze=async()=>{const{amountA:S,amountB:r}=s;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:97 ~ calculateAvailableAmount ~ currentVaultPosition:",s),le(!1),i==="both"){de(o?r:S),F(o?S:r);return}const l=i===(h==null?void 0:h.coin_type),d=l?r:S,p=l?S:r;a=="haedal"?He(d,p,l):P(d,p,l)},He=async(S,r,l)=>{if(y(S).gt(0)){le(!0);const d={pool_id:n,mode:Ge,burn_lp_amount:s==null?void 0:s.balance,available_lp_amount:s==null?void 0:s.balance};try{const p=await O.Vaults.preCalculateWithdrawAmount(d);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:127 ~ haedalCalculateAvailableAmount ~ res:",p),Ge=="OnlyCoinA"){const f=Me(p.receive_amount_a,h==null?void 0:h.decimals);o?F(f):de(f)}else{const f=Me(p.receive_amount_b,k==null?void 0:k.decimals);o?de(f):F(f)}le(!1)}catch(p){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",p)}}else l?de(r):F(r);le(!1)},P=async(S,r,l)=>{if(y(S).gt(0)){le(!0);const d=l?k:h;V({fromToken:d,toToken:l?h:k,amount:_e(S,d.decimals).toString(),providersKeys:oe,by_amount_in:!0,uuid:Le()}).then(f=>{f.toAmountUi&&(r=y(r).add(f.toAmountUi).toString()),l?de(r):F(r)}).finally(()=>{le(!1)})}else l?de(r):F(r)},K=u.useMemo(()=>y(ne||"0").add(J||"0").toString(),[ne,J]),re=u.useMemo(()=>_?y(K).gt(y(1e4)):!1,[K,_]),B=u.useMemo(()=>_?y(K).gt(0)&&y(K).lt(y(1e-4)):!1,[K,_]),[pe,ge]=u.useState(0),Se=()=>{$(""),b(""),ge(0),D(!1),v(void 0),T("")},Ve=(S,r,l,d)=>{var p;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:96 ~ wrapRes ~ res:",S,l,d),S){const f=y(a=="haedal"?S.receive_amount_a:S.amount_a).div(10**h.decimals).toString(),j=y(a=="haedal"?S.receive_amount_b:S.amount_b).div(10**k.decimals).toString(),M=y(((p=S.swap_result)==null?void 0:p.swap_out_amount)||"0").div(10**(r?e.decimals:c.decimals)).toString();if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:239 ~ wrapRes ~ swapOutAmount:",M,f,j),d===100&&i=="both"&&(de(o?j:f),F(o?f:j)),l)if(i=="both")$(o?j:f),b(o?f:j);else if(i==(e==null?void 0:e.coin_type)){const H=y(se).mul(d).div(100).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:264 ~ wrapRes ~ amount:",H),$(H)}else{const H=y(ae).mul(d).div(100).toString();b(H)}else{if(i!=="both")return;r?b(o?f:j):$(o?j:f)}}},Ee=async(S,r,l,d,p)=>{if(h&&k&&n){if(!p){if(l){if(y(S).gt(se)){T(""),b(""),ge(0),v(void 0),D(!1);return}}else if(y(S).gt(ae)){T(""),$(""),v(void 0),D(!1),ge(0);return}}(+ee.current||+C.current||p)&&D(!0);const f=(o?!l:l)?h:k,j=_e(S,f.decimals).toFixed(0),M=l?_e(se,f.decimals).toFixed(0):_e(ae,f.decimals).toFixed(0),H=o?!l:l,q=y(j).div(y(M)),ve=nt(q.mul(s==null?void 0:s.balance).toString(),0,!0),ye=Number(nt(q.mul(100).toString(),2));console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:324 ~ preCalculate ~ fixedCoinA:",H),L(H),a==="haedal"?ue(ve,l,d,ye,!1):Ce(ve,l,H,d,ye,!1)}},ue=async(S,r,l,d,p)=>{let f;if(i=="both")f={pool_id:n,mode:"FixedOneSide",burn_lp_amount:String(S)};else{const j=i==(h==null?void 0:h.coin_type)?"OnlyCoinA":"OnlyCoinB";f={pool_id:n,mode:j,burn_lp_amount:String(S)}}try{const j=await O.Vaults.preCalculateWithdrawAmount(f);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:386 ~ haedalPreCalculate ~ res:",j,l,fe.current),j.burn_lp_amount=="0"){D(!1),v(void 0);return}Ve(j,r,p,d),v({...j,burn_ft_amount:j.burn_lp_amount}),ge(d)}catch(j){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:388 ~ haedalPreCalculate ~ error:",j),v(void 0)}finally{D(!1)}},Ce=async(S,r,l,d,p,f)=>{const j={vault_id:n,fix_amount_a:l,input_amount:S,slippage:Number(m),request_id:d,side:i==="both"?Xe.Both:Xe.OneSide,is_ft_input:!0,max_ft_amount:s==null?void 0:s.balance};console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:275 ~ lstPreCalculate ~ params:",j);try{const M=await G.Vaults.calculateWithdrawAmount(j);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:386 ~ res:",M,p),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:215 ~ haedalPreCalculate ~ uuidRef.current:",fe.current,d),M.burn_ft_amount=="0"){D(!1),v(void 0);return}Ve(M,r,f,p),v(M),ge(p)}catch{v(void 0)}finally{D(!1)}},Ie=Ke(Ee,500),Fe=Ke(a=="cetus"?Ce:ue,500),Ae=(S,r)=>{if(S==0){Se();return}console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:218 ~ handlePercentInputChange ~ value:",S,a),N(!0),D(!0),ge(S);const l=Le();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:225 ~ handlePercentInputChange ~ uuid:",l),T(l);const d=nt(y(s==null?void 0:s.balance).mul(S/100).toString(),0,!0);console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:459 ~ handlePercentInputChange ~ removeLpAmount:",d,s==null?void 0:s.balance);const p=o?!r:r;L(p),a==="haedal"?Fe(d,r,l,S,!0):Fe(d,r,p,l,S,!0)},qe=(S,r,l,d)=>{if((d||l)&&i!=="both"&&(r?$(S):b(S)),l){Ae(100,r);return}if(d){Ae(50,r);return}if(N(!1),r?$(S):b(S),+S){const p=Le();T(p),Ie(S,!1,r,p)}else Se()},Ge=u.useMemo(()=>_?i=="both"?"FixedOneSide":i==(h==null?void 0:h.coin_type)?"OnlyCoinA":"OnlyCoinB":"FixedOneSide",[_,i,h]),Ue=()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:519 ~ reCalculateResult ~ reCalculateResult:");const S=o?!ce.current:ce.current;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:516 ~ reCalculateResult ~ isDisplayTokenA:",S),me)Ae(pe,S);else{const r=ce.current?o?C.current:ee.current:o?ee.current:C.current;qe(r,S)}},{signAndExecuteTransaction:et,transactionConfirmation:tt,transactionRejected:Qe}=zt(),[mt,De]=u.useState(!1),st=async()=>{if(n&&w&&(s!=null&&s.balance)){De(!0);let S;if(a=="haedal")S={pool_id:n,burn_lp_amount:pe==100?s==null?void 0:s.balance:w.burn_ft_amount,mode:Ge,slippage:Number(m)};else if(i==="both")S={vault_id:n,ft_amount:w==null?void 0:w.burn_ft_amount,slippage:Number(m)};else{const l=i===(h==null?void 0:h.coin_type);if(pe===100)S={vault_id:n,is_ft_input:!0,input_amount:s==null?void 0:s.balance,slippage:Number(m),max_ft_amount:s==null?void 0:s.balance,fix_amount_a:l};else{const d=_e(E?g:x,9);S={vault_id:n,is_ft_input:!1,input_amount:d.toString(),slippage:Number(m),max_ft_amount:s==null?void 0:s.balance,fix_amount_a:l}}}console.log("ðŸš€ ~ doRemoveAction ~ params:",S);const r={getShowInfo:(l,d)=>{const p="Withdraw "+[we(g,e.symbol),we(x,c.symbol)].filter(Boolean).join(" and "),f={modalDescriptionText:p,toastDescriptionContent:p};if(l==="success"){let j=g||"0",M=x||"0";console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",d,g,x),d&&(j=y(g||"0").gt(0)?xt(d,e)||g:"",M=y(x||"0").gt(0)?xt(d,c)||x:"");const H=[we(j,e.symbol),we(M,c.symbol)].filter(Boolean),q=(H&&H.length>1?"Removed ":"Withdraw ")+[we(j,e==null?void 0:e.symbol),we(M,c==null?void 0:c.symbol)].filter(Boolean).join(" and ");f.toastDescriptionContent=q,f.modalDescriptionText=q}return f}};tt(r);try{let l=new Vt;a=="haedal"?l=await O.Vaults.buildWithdrawPayload(S):await G.Vaults.withdraw(S,l),await et(l,r,{useMev:R,txAction:"signTransactionBlock",useFastMode:W==="Fast Mode",maxCapForGas:I,customGasPrice:z,msafeParams:{action:Wt.AddVaultsPosition,txbParams:S}})?(Se(),setTimeout(()=>{A(),he(n)},2e3)):Ue(),De(!1)}catch(l){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:675 ~ doRemoveAction ~ error:",l),De(!1),Qe(r)}}},at=u.useMemo(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:656 ~ showOnlySideTips ~ calculateResult:",w),w&&(w.swap_result||w.swap)&&i!=="both"&&h&&k){let S=a=="cetus"?w.swap_result.swap_in_amount:w.swap.swap_amount_in,r=a=="cetus"?w.swap_result.swap_out_amount:w.swap.swap_amount_out;const l=a=="cetus"?E:o?!E:E,d=l?g:x;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:709 ~ showOnlySideTips ~ amount:",d);const p=l?e:c;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:687 ~ showOnlySideTips ~ fixToken:",p);const f=l?c:e,j=Me(S,f.decimals),M=Me(y(r).mul(1-Number(m)).toString(),p.decimals);return`To withdraw ${xe(d,p==null?void 0:p.decimals)} ${p==null?void 0:p.symbol}, ${xe(j,f==null?void 0:f.decimals)} ${f==null?void 0:f.symbol} in the pool will be traded for ${xe(M,p==null?void 0:p.decimals)} ${p==null?void 0:p.symbol}`}},[i,w,g,x,E,a]);u.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:717 ~ availableAmountA:",se),Ue()},[se,ae]);const{currentAccount:Be}=We();return u.useEffect(()=>{Se(),setTimeout(()=>{s!=null&&s.amountA&&(s!=null&&s.amountB)&&ze()},200)},[_,i,Be==null?void 0:Be.address]),u.useEffect(()=>{ze()},[s==null?void 0:s.amountA,s==null?void 0:s.amountB]),{calculateAvailableLoading:je,availableAmountA:se,availableAmountB:ae,amountInputA:g,amountInputB:x,amountValueA:ne,amountValueB:J,zapNumGtError:re,zapNumLtError:B,handleAmountInputChange:qe,handlePercentInputChange:Ae,debouncedPercentInputChange:Fe,removePercent:pe,showOnlySideTips:at,preCalculateLoading:X,doRemoveAction:st,inputTotalValue:K,calculateResult:w,setIsSlider:N,resetInputAmount:Se,calculateAvailableAmount:ze,submitLoading:mt,isSlider:me,fixAmountA:E,reCalculateResult:Ue}}function $s(n){const{currentAccount:a,onWalletModal:e}=We(),{fromToken:c,toToken:o,calculateResult:i}=$e();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:27 ~ VaultsRemove ~ calculateResult:",i);const{currentVaultPosition:_}=Ot(),[s,g]=u.useState("both"),[x,w]=u.useState(!1),{category:$,isReverse:b,vaultId:v,currentActionTab:V,lpTokenInfo:m,isModal:R,isAutoRefresh:I}=n,W=u.useMemo(()=>_,[_]),{amountInputA:z,amountInputB:te,amountValueA:O,amountValueB:G,calculateAvailableLoading:U,availableAmountA:X,availableAmountB:D,zapNumGtError:E,zapNumLtError:L,handleAmountInputChange:A,removePercent:he,handlePercentInputChange:oe,doRemoveAction:ce,showOnlySideTips:me,preCalculateLoading:N,inputTotalValue:Z,setIsSlider:T,resetInputAmount:fe,isSlider:ee,fixAmountA:C}=Ws(v,$,c,o,b,s,x,W),{btnText:h,btnDisabled:k}=Gt(z,te,X||"",D||"",c,o,s,!1,E,L,$,x);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:72 ~ VaultsRemove ~ btnDisabled:",k,h);const{amountLimit:ne}=Ht(0,i==null?void 0:i.burn_ft_amount,!1),J=u.useMemo(()=>xe(Me(ne||"0",m==null?void 0:m.decimals),m==null?void 0:m.decimals),[ne,m]);u.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:80 ~ VaultsRemove ~ sCheckedZAP, assetAction:",x,s),fe()},[x,s]);const se=u.useMemo(()=>N?ee?!0:b?C:!C:!1,[N,ee]),de=u.useMemo(()=>N?ee?!0:b?!C:C:!1,[N,ee]),ae=u.useRef(!1);return u.useEffect(()=>{ae.current=!0},[]),t.jsxs(Q,{gap:R?"8px":"12px",w:"100%",align:"flex-start",children:[t.jsxs(Re,{bg:R?"transparent":"bg_six",borderColor:R?"transparent":"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:R?"0":"16px"},w:"100%",children:[t.jsx(Bt,{label:"Remove Amounts",displayTokenA:c,displayTokenB:o,onSelectAssetTab:F=>{g(F)},isCheckedZAP:x,setIsCheckedZAP:w,assetAction:s,setAssetAction:g,currentActionTab:V,category:$}),t.jsx(vt,{w:"100%",position:"relative",mt:R?"8px":"16px",children:t.jsx(Et,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:U,hideSelf:s!=="both"&&s!==(c==null?void 0:c.coin_type),balance:X||"",value:z,amountValue:O,loading:se,onChange:(F,je,le)=>{a!=null&&a.address&&!U&&(T(!1),A(F,!0,je,le))},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:c,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:U,needRemainBalance:!1,hideSelf:s!=="both"&&s!==(o==null?void 0:o.coin_type),balance:D||"",value:te,amountValue:G,loading:de,onChange:(F,je,le)=>{a!=null&&a.address&&!U&&(T(!1),A(F,!1,je,le))},selectable:!1,placeholder:"0.0",token:o},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),!R&&t.jsxs(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[t.jsx(Y,{color:"primary_gray",children:"Amount"}),t.jsx(gs,{percentage:he,onChange:F=>{U||(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:213 ~ VaultsRemove ~ assetAction:",s),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:214 ~ VaultsRemove ~ fromToken.address:",c.address),oe(Number(F.toString().replace("%","")),s=="both"?!0:s==c.coin_type))}})]}),t.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(Q,{w:"100%",gap:"20px",children:[t.jsx(ke,{m:"-1px",isLoading:N,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:k||N,onClick:()=>{a?ce():e(!0)},children:h||(x?"Zap Out":"Withdraw")}),E&&t.jsx(Q,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:t.jsx(Y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset withdraw can't be higher than $10,000 at a time."})}),i&&!E&&(z||te)&&t.jsxs(Q,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[s!=="both"&&me&&t.jsx(Y,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:me}),t.jsxs(Q,{w:"100%",gap:"20px",children:[t.jsx(Ze,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:us(Z,2),valueStyle:{fontSize:"14px"},skeletonStyle:{valueH:"14px"},isLoading:N}),t.jsx(Ze,{label:"LP Burn Amount",value:`${J} ${`${c==null?void 0:c.symbol} - ${o==null?void 0:o.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueH:"14px"},isLoading:N})]})]})]})})]})}const zs=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function ea({vaultId:n,autoRefresh:a,isModal:e,currentTab:c="Deposit"}){const{setAmountInputA:o,setAmountInputB:i}=$e(),{vaultListObj:_,lpTokenInfoObj:s}=Dt(),{vaultsPoolObj:g}=Lt(),x=u.useMemo(()=>_[n],[_,n]),w=u.useMemo(()=>g[n],[g]),[$,b]=u.useState(c),v=u.useMemo(()=>s[x==null?void 0:x.lpTokenType],[s,x==null?void 0:x.lpTokenType]),[V,m]=u.useState(!1),R=()=>{a(),m(I=>!I)};return t.jsxs(Q,{w:{base:"100%",lg:"100%"},justifyContent:"start",gap:e?"8px":"12px",children:[t.jsx(Re,{p:"0",borderRadius:"12px",bg:e?"transparent":"bg_six",borderColor:e?"transparent":"border_secondary",children:t.jsxs(be,{w:"100%",p:{base:"0 8px",lg:e?"0":"0 16px"},children:[t.jsx(It,{type:"borderTab",wrapStyle:{w:"100%",h:e?"54px":"60px",border:"none",bg:e?"transparent":"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:e?"14px":"16px",mr:"28px"},tabList:zs,currentTab:$,handleChangeTab:I=>{o(""),i(""),b(I==null?void 0:I.value)}}),t.jsxs(be,{children:[t.jsx(ts,{slippageType:"vaults",compact:!0}),t.jsx(xs,{handleRefresh:()=>R(),isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),$==="Deposit"&&t.jsx(Ls,{category:x==null?void 0:x.category,isReverse:x==null?void 0:x.isReverse,vaultId:x==null?void 0:x.vaultId,currentActionTab:"Deposit",totalSupply:w==null?void 0:w.totalSupply,lpTokenInfo:v,feeTier:x==null?void 0:x.feeDisplay,isModal:e,isAutoRefresh:V}),$==="Withdraw"&&t.jsx($s,{category:x==null?void 0:x.category,isReverse:x==null?void 0:x.isReverse,vaultId:x==null?void 0:x.vaultId,currentActionTab:"Withdraw",lpTokenInfo:v,isModal:e,isAutoRefresh:V})]})}export{ea as V,At as a,ws as b,$e as u};
//# sourceMappingURL=VaultsAction-BXCfoTXt.js.map
