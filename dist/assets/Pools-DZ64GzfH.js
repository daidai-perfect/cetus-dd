import{j as s,H as k,C as I,I as Ws,T as f,a as r,aa as qs,V as _,q as O,P as $s,h as Is,k as se,m as ee,n as oe,f as N,F as Ds,a9 as te,O as ne,W as ie,X as le,Y as ae,Z as re,a7 as pe,$ as ce,a0 as xe,o as de}from"./vendor-BFGDaAdA.js";import{P as Ns,M as ue,L as ge,a as he,b as fe}from"./PoolItem-ZKtV2SHs.js";import{u as js,a as Qs,b as ye,i as je,V as ve}from"./useStatistics-CbZrwNFK.js";import{u as Gs,a as vs}from"./useFavoritePool-BrmOgNO0.js";import{u as Se}from"./useGetPoolList-CUJyOk7M.js";import{C as rs,F as Ss,H as be,y as Te,J as Ae,K as Ce,a as ps,I as fs,e as as,f as Fs,L as Es,M as Pe,A as we,k as Us,o as Ys,B as is,O as Hs,j as ke,P as _e,G as Y,p as gs,d as me}from"./index-BPmJ2jpN.js";import{u as Be}from"./useRequest-CLnjZepc.js";import{H as Ve,T as ze}from"./Table-BDT1sc4z.js";import{N as ys}from"./NoData-DtiZhmrM.js";import{S as Fe}from"./SortDropBlock-Czpq_VhW.js";import{T as ls}from"./TableSortTh-D7suxDeZ.js";import{u as Ee}from"./index-ClTHUmJ_.js";import{A as He}from"./index-gLcGr8Aw.js";import{C as Me}from"./CoinPairInfo-CQyXMF--.js";import{F as We}from"./FarmingIcon-DZh3EyUm.js";import{u as qe}from"./VaultsAction-dGucgqf1.js";import{V as De,u as Os,P as Ne}from"./PositionListLoading-CCL0j2ZU.js";import{I as hs}from"./IconText-CUnr4PU4.js";import{u as Qe}from"./useToken-C2f3q8yb.js";import{u as Rs,a as bs}from"./usePositionList-CTKl_07Q.js";import{V as Ms}from"./VTextLabelBox-0gMFiLin.js";import{u as Ge}from"./contract-helper-JUlx1rqT.js";import{u as Ue}from"./useTransaction-BEZ42Yzm.js";import{u as Ye}from"./useNotifiSubscription-D3iVod4I.js";import{u as Oe}from"./useRpcListener-BOXfllsv.js";import"./CheckBox-DuDEoJH1.js";import"./RefreshButton-BOgQecBu.js";import"./SearchInputBlock-QSbA5ZWH.js";import"./index-B-57vaG1.js";import"./Loading-yKVeoG31.js";import"./SingleTokenInfo-CgvLp_Sh.js";import"./CopyButton-RUcrU_X2.js";import"./TooltipIcon-BDSnzQ8w.js";import"./PositionCurrentPrice-BAm_NRyt.js";import"./msafe-oYBkW7LJ.js";import"./activeOrders-z0A42A1h.js";import"./VaultsAprBlock-aytfep-B.js";import"./useTokenBalance-WptRK2XT.js";import"./useAccountBalance-WZgcKaPa.js";import"./HTextLabelBox-DQO0ByyL.js";import"./ExpendItem-fcr3Y3EF.js";import"./PositionStatus-2oFeK-h6.js";import"./RangeValue-BqG1z_V1.js";import"./index-7mst4o7q.js";import"./useWrapPoolData-9pXb8-BW.js";import"./VolumeChart-CmPgSFSW.js";import"./EmptyTooltip-BKCAbR9U.js";import"./_getAllKeysIn-Bbl41Vsp.js";import"./YAxis-DeK8Z48v.js";import"./generateCategoricalChart-BpewU6vn.js";import"./debounce-B8kzHASh.js";import"./linear-DYpwdEgO.js";import"./index-BLCSsYSf.js";import"./FreshProgressV2-DkooO11p.js";import"./Pagination-RR4bANG8.js";import"./PoweredByHaedal-Bke0Bj0w.js";import"./usePriceImpact-rVH3KIHM.js";import"./global-yjM38D_F.js";import"./index-Bw4SoRb3.js";import"./useSwapHelper-BFNYB1_4.js";import"./TradeConfirmAmountInfo-BT7jk6QL.js";import"./TotalAmount-D8QyRJxy.js";import"./TradeInputGroup-ZleztP1o.js";import"./RemoveBlock-D2zHbmME.js";import"./DepositRatio-DXaxgIOK.js";import"./ErrorTips-BmkBKBdG.js";import"./usePosAdd-BVvvD-k4.js";import"./useFindBestRouting-C0FiqahY.js";import"./useInterval-BQqGpXj5.js";import"./useTrack-BDPSDLeN.js";import"./useSigner-BVdami60.js";import"./useNotifiAlerts-CBJqtWYW.js";import"./useXCetusHelper-CTsvwzQJ.js";import"./index-D1m9ooSc.js";import"./usePreviousValue-DoVr3Y3V.js";const Re=()=>s.jsx(k,{w:"18px",h:"18px",onClick:t=>{Ss(t)},children:s.jsx(rs,{placement:"top",tooltip:s.jsx(f,{fontSize:"12px",children:"Mining rewards available"}),children:s.jsx(I,{children:s.jsx(Ws,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),Xe=({coinTypeA:t,coinTypeB:o})=>{const{getShowCoinTag:x}=be(),{importTokenList:l}=Te(),{verifiedTokenMap:n}=Ae(),e=r.useMemo(()=>(t||o)&&(n==null?void 0:n.size)>0?x(t)||x(o):!1,[t,o,n,l]);return s.jsx(s.Fragment,{children:e&&s.jsx(k,{w:"20px",h:"20px",onClick:a=>{Ss(a)},children:s.jsx(rs,{placement:"top",tooltip:s.jsx(f,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:s.jsx(I,{children:s.jsx(Ws,{w:"100%",h:"100%",src:Ce})})})})})};function Ke({poolInfo:t}){const o=qs(),{addFavorites:x,removeFavorites:l}=Gs(),{poolFavoriteIds:n}=vs(),{goLiquidity:e}=js(),a=r.useMemo(()=>n==null?void 0:n.includes((t==null?void 0:t.poolAddress)||""),[JSON.stringify(n),t==null?void 0:t.poolAddress]);return s.jsxs(_,{align:"flex-start",padding:"8px",children:[s.jsx(hs,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{e(`/liquidity?tab=analytics&poolAddress=${t==null?void 0:t.poolAddress}`,t)}}),s.jsx(hs,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var h,d;o(`/swap/${(h=t==null?void 0:t.displayTokenA)==null?void 0:h.coin_type}/${(d=t==null?void 0:t.displayTokenB)==null?void 0:d.coin_type}`)}}),s.jsx(hs,{text:"Add to Watchlist",xlinkHref:a?"#icon-icon_star_sel":"#icon-icon_star",svgFill:a?"primary":"text_paragraph",svgSize:"22px",svgMl:"-2px",onClick:()=>{a?l(t==null?void 0:t.poolAddress):x(t==null?void 0:t.poolAddress)}})]})}function Ze({poolInfo:t}){const{isApp:o}=ps(),{goLiquidity:x}=js(),[l,n]=r.useState(!1),[e,a]=r.useState(!1),{clearVaultsActionData:h}=qe();return r.useEffect(()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ ActionsBlock.tsx:22 ~ useEffect ~ clearVaultsActionData:"),h()},[l]),s.jsxs(k,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:o?"space-between":"flex-end",gap:"8px",children:[t.vaultCategory?s.jsx(rs,{placement:"bottom-end",tooltip:s.jsx(f,{_hover:{color:"primary"},cursor:"pointer",color:o?"primary":"text_paragraph",children:"Auto"}),showTooltip:e,children:s.jsx(I,{w:o?"calc(100%)":"unset",children:s.jsxs(O,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:o?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:d=>{d.stopPropagation(),n(!l)},onMouseMove:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[s.jsx(fs,{svgFill:o?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),o&&s.jsx(f,{color:o?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,s.jsx(O,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{x(`/liquidity?poolAddress=${t==null?void 0:t.poolAddress}`,t)},children:"Deposit"}),s.jsxs($s,{isLazy:!0,trigger:o?"click":"hover",placement:o?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[s.jsx(Is,{children:s.jsx(I,{onClick:d=>{Ss(d)},children:s.jsx(O,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:s.jsx(fs,{svgFill:o?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),s.jsx(se,{children:s.jsx(ee,{borderRadius:"12px",w:"fit-content",children:s.jsx(oe,{p:"0",fontSize:"12px",w:"fit-content",children:s.jsx(Ke,{poolInfo:t})})})})]}),l?s.jsx(De,{isOpen:l,setIsOpen:n,displayTokenA:t.displayTokenA,displayTokenB:t.displayTokenB,feeDisplay:t.feeDisplay,clmmPool:t.poolAddress,category:t.vaultCategory,vaultId:t.vaultId,isReverse:t.isReverse},t.vaultId):null]})}function Je({miningRewardList:t,farmsRewarderList:o}){const{getTokenListInfo:x}=Qe(),[l,n]=r.useState([]);return r.useEffect(()=>{(async()=>{if((t==null?void 0:t.length)>0||(o==null?void 0:o.length)>0)try{let a=[],h=[];if((t==null?void 0:t.length)>0){const d=t==null?void 0:t.map(p=>p==null?void 0:p.coinType),y=await x(d);a=t.map(p=>{const v=y==null?void 0:y.get(p==null?void 0:p.coinType);return{...p,tokenInfo:v,isMining:!0}})}if((o==null?void 0:o.length)>0){const d=o==null?void 0:o.map(p=>p==null?void 0:p.coinType),y=await x(d);h=o.map(p=>{const v=y==null?void 0:y.get(p==null?void 0:p.coinType);return{...p,tokenInfo:v,isFarming:!0}})}n(a.concat(h))}catch(a){console.error("Error processing list:",a)}})()},[t,o]),s.jsx(k,{w:"100%",justify:"flex-end",children:l.map(e=>{var a,h,d,y,p;return s.jsx(N,{onClick:v=>v.stopPropagation(),children:s.jsx(rs,{placement:"top",tooltip:s.jsxs(k,{gap:"4px",children:[s.jsx(N,{children:s.jsx(as,{imageUrl:(a=e==null?void 0:e.tokenInfo)==null?void 0:a.logo_url,w:"24px",h:"24px"})}),(e==null?void 0:e.isMining)&&s.jsxs(f,{color:"primary",display:"inline-block",children:[Fs(Es(Pe(e==null?void 0:e.emissionsEveryDay,(h=e==null?void 0:e.tokenInfo)==null?void 0:h.decimals),2))," ",(d=e==null?void 0:e.tokenInfo)==null?void 0:d.symbol," per day in Mining"]}),(e==null?void 0:e.isFarming)&&s.jsxs(f,{color:"primary",display:"inline-block",children:[Fs(Es(e==null?void 0:e.emissionsEveryDay,2))," ",(y=e==null?void 0:e.tokenInfo)==null?void 0:y.symbol," per day in Farming"]})]},e==null?void 0:e.coinType),children:s.jsx(I,{as:"button",children:s.jsx(as,{imageUrl:(p=e==null?void 0:e.tokenInfo)==null?void 0:p.logo_url,w:"24px",h:"24px"})})})},e==null?void 0:e.coinType)})})}function Le({isRefreshed:t,handleIsRefreshed:o}){var _s;const{getStatistics:x}=Qs(),{poolRefreshStatus:l,setPoolRefreshStatus:n,setPoolListLength:e,poolFavoriteIds:a,isWatchList:h,setIsWatchList:d,isIncentivizedOnly:y,setIsIncentivizedOnly:p,isAllPools:v,setIsAllPools:H,poolFavoriteIdsChange:b,setPoolFavoriteIdsChange:Q}=vs(),{getPoolList:R}=Se(),{getFavoritePoolList:T}=Gs(),{goLiquidity:Z}=js(),[X,W]=r.useState({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:20,offset:0,coin_type:"",pool:""}),A=i=>{W(g=>({...g,isListLoading:!0,...i}))},J=i=>{var g;A({offset:0}),p((g=i.target)==null?void 0:g.checked),H(!1)},L=i=>{var g;A({offset:0}),H((g=i.target)==null?void 0:g.checked),d(!1),p(!1)},G=()=>{A({offset:0}),H(!1),d(!h),Q(!1)};r.useEffect(()=>{console.log("ğŸš€ ~ useEffect ~ poolFavoriteIds:",b,a),h&&b&&(Q(!1),console.log("ğŸš€ ~ useEffect ~ isWatchList:",h),A({offset:0}),d(!0))},[a==null?void 0:a.length,b]);const m=r.useRef(null),K=()=>{console.log("ğŸš€ ~ handleRefresh ~ handleRefresh:"),o(!1),n("pending"),os(1),A({offset:0,isListLoading:!1}),m.current=setTimeout(()=>{console.log("ğŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",l),l=="pending"&&n("timeout")},1e4),x()},[V,U]=r.useState([]),c=i=>{console.log("ğŸš€ ~ onClickSelectCoinList ~ tokenInfo:",i),U(g=>[...g,i])},j=i=>{U(g=>g.filter(E=>(E==null?void 0:E.coin_type)!==(i==null?void 0:i.coin_type)))},u=20,[q,D]=r.useState(!0),[C,z]=r.useState(!0),[F,B]=r.useState("desc"),[S,Ts]=r.useState({label:"Volume (24H)",value:"vol"}),[P,ss]=r.useState([]),[As,cs]=r.useState(0),[es,os]=r.useState(1),Cs=async i=>{var ms,Bs,Vs,zs;const g=(i==null?void 0:i.isListLoading)??!0,E=h,Ls=V.length==2?`${(ms=V[0])==null?void 0:ms.coin_type},${(Bs=V[1])==null?void 0:Bs.coin_type}`:V.length==1?`${(Vs=V[0])==null?void 0:Vs.coin_type}`:"",{offset:ts=0}=i;ts==0&&os(1),Number(ts)>=u?D(!0):z(g);const us=y?["mining","farming"]:["mining","farming","noIncentives"],ns={...i,coin_type:Ls,display_all_pools:E?!0:v??!0,offset:ts,has_mining:us.includes("mining"),has_farming:us.includes("farming"),no_incentives:us.includes("noIncentives")};console.log("ğŸš€ ~ fetchDatafetchPoolsData ~ query:",ns,v);let w;try{E?(ns.pools=a,w=await T(ns)):w=await R(ns),console.log("ğŸš€ ~  ~ result:",w),w&&(console.log("ğŸš€ ~ fetchDatafetchPoolsData ~ result:",w),w!=null&&w.isLocal?(n("error"),ss(w.list),cs(w.total),e(w.total||"0"),os(1)):(Number(ts)>=u?ss(M=>M.concat(w.list)):ss(w.list),cs(w.total),e((w.total||0).toString()),n("success")),z(!1))}catch(M){console.log("ğŸš€ ~  ~ error:",M),M!=null&&M.list&&((zs=M==null?void 0:M.list)==null?void 0:zs.length)>0&&(n("error"),ss(M.list),cs(M.total),e(""),z(!1))}};Be(()=>Cs(X),{refreshDeps:[X,V,h,v,h,y],manual:!1,debounceWait:150}),r.useEffect(()=>{q&&D(!1)},[P.length]);const{failedTsToast:Xs}=we();r.useEffect(()=>{if(console.log("ğŸš€ ~ PoolsContent ~ poolRefreshStatus:",l),l!=="pending"){const i={linkLabel:"",getShowInfo:()=>({toastTitleText:l=="error"?"Request Error":l=="timeout"?"Please check the network status.":""})};(l=="success"||l=="error")&&clearTimeout(m.current),(l=="error"||l=="timeout")&&Xs(i),o(!0)}},[l]);const{isApp:xs}=ps(),Ps=i=>{if(console.log("ğŸš€ ~ clickSort ~ item:",i),xs)(i==null?void 0:i.value)!==(S==null?void 0:S.value)&&(A({offset:0,order_by:`-${i==null?void 0:i.value}`}),B("desc"),Ts(i));else if((i==null?void 0:i.value)==(S==null?void 0:S.value)){A({offset:0,order_by:F=="desc"?`${i==null?void 0:i.value}`:`-${i==null?void 0:i.value}`});const g=F=="desc"?"asc":"desc";B(g)}else A({offset:0,order_by:`-${i==null?void 0:i.value}`}),B("desc"),Ts(i)},ws=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],Ks=ws.reduce((i,g)=>(i[g.value]=g,i),{}),Zs=i=>{const g=i*u;Cs({...X,offset:g}),os(E=>E+1)},ks=r.useMemo(()=>{const i=(es-1)*u+(P==null?void 0:P.length);return l!=="error"&&Number(As)>i},[As,es,u,l,P==null?void 0:P.length]);r.useEffect(()=>(x(),m.current&&(clearTimeout(m.current),m.current=null),()=>{e(""),m.current&&(clearTimeout(m.current),m.current=null)}),[]);const Js=Ee({count:P.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),ds=r.useRef(null);r.useEffect(()=>{let i=null;return!C&&ds.current&&(i=new IntersectionObserver(g=>{const E=g[0];E&&E.isIntersecting&&ks&&!q&&(console.log("ğŸš€ ~ useEffect ~ entry:",E),Zs(es))},{threshold:.5,rootMargin:"100px"}),i.observe(ds.current)),()=>{i&&i.disconnect()}},[C,es,ks,q]);const $=$e(F,S,Ps,Ks,xs);return s.jsxs(_,{gap:"20px",w:"100%",background:"bg_primary",children:[s.jsx(Ns,{handleIsDisplayChecked:L,handleIsWatchList:G,onClickIncentiveTypes:J,handleRefresh:K,selectCoinList:V,onClickSelectCoinList:c,onDeleteSelectCoinList:j,isRefreshed:t}),s.jsx(N,{h:"1px",w:"100%",bg:"border"}),s.jsxs(_,{w:"100%",position:"relative",gap:"20px",children:[!C&&(P==null?void 0:P.length)==0?s.jsx(ys,{type:"nodata",text:"No pools found",children:s.jsx(f,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):xs?s.jsxs(_,{w:"100%",gap:"4px",children:[s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsx(f,{fontSize:"24px",color:"text_caption",children:"Pools"}),s.jsx(Fe,{sortText:"Sort by",minW:"180px",currentSort:S,sortByList:ws,onSortByChange:Ps,xlinkHref:F=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{A({offset:0,order_by:F=="desc"?`${S==null?void 0:S.value}`:`-${S==null?void 0:S.value}`});const i=F=="desc"?"asc":"desc";B(i)}})]}),s.jsx(Ve,{rowKey:"poolAddress",dataSource:P,columns:$,loading:C,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(i,g)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:i=>{Z(`/liquidity?poolAddress=${i.poolAddress}`,i)}})]}):C?s.jsx(ze,{rowKey:"poolAddress",columns:$,dataSource:P,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):s.jsxs(_,{w:"100%",gap:"0",children:[s.jsx(N,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",h:"36px",columnGap:"12px",p:"0 16px",children:$==null?void 0:$.map((i,g)=>s.jsx(Ds,{as:"div",align:"center",justify:g===0?"flex-start":"flex-end",children:i.title},i.key))}),s.jsx(N,{w:"100%",h:`${P.length*80}px`,pos:"relative",children:(_s=Js.getVirtualItems())==null?void 0:_s.map(i=>{const g=P[i.index];return s.jsx(Ie,{item:g,columns:$,virtualRow:i,goLiquidity:Z},g==null?void 0:g.poolAddress)})})]}),s.jsx(N,{ref:ds,children:q?s.jsx(te,{size:"sm",color:"text_caption"}):""})]})]})}const $e=(t,o,x,l,n)=>[{title:s.jsx(f,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:e=>{var a,h;return s.jsxs(k,{children:[s.jsx(Me,{poolInfo:e,symbolEllipsesDecimals:10}),(e==null?void 0:e.haveFarming)&&s.jsx(We,{}),(e==null?void 0:e.haveMining)&&s.jsx(Re,{}),s.jsx(Xe,{coinTypeA:(a=e==null?void 0:e.tokenA)==null?void 0:a.coin_type,coinTypeB:(h=e==null?void 0:e.tokenB)==null?void 0:h.coin_type})]})}},{title:s.jsx(ls,{labelInfo:l.tvl,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"tvlDisplay"},{title:s.jsx(ls,{labelInfo:l.vol,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"volume24Display"},{title:s.jsx(ls,{labelInfo:l.fees,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"fees24Display"},{title:s.jsx(f,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:e,farmsRewarderList:a})=>e&&(e==null?void 0:e.length)<=0&&a&&(a==null?void 0:a.length)<=0,render:({miningRewardList:e,farmsRewarderList:a})=>s.jsx(Je,{miningRewardList:e,farmsRewarderList:a})},{title:s.jsx(ls,{labelInfo:l.totalApr,sortRule:t,sortBy:o,tooltip:{type:"apr24"},clickSort:e=>x(e),justifyContent:"flex-end"}),key:"apr24h",render:e=>s.jsx(He,{poolInfo:e,placement:n?"auto-start":"top"})},{title:s.jsx(f,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:e=>s.jsx(Ze,{poolInfo:e})}],Ie=({item:t,columns:o,virtualRow:x,goLiquidity:l})=>s.jsx(N,{as:"div",pos:"absolute",top:`${x.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>l(`/liquidity?poolAddress=${t.poolAddress}`,t),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",_hover:{bg:"primary_opacity.10"},children:o==null?void 0:o.map((n,e)=>s.jsx(Ds,{align:"center",justify:e===0?"flex-start":"flex-end",children:n!=null&&n.render?n==null?void 0:n.render(t):s.jsx(f,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:t==null?void 0:t[n==null?void 0:n.key]})},n.key))}),so="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAB+5JREFUaEPVmG2IXFcZx3/n3HPv7OxmNy8mXUVL4xqq1QTBopaKH6YKvlToB0uFKPjWImgaI6I0lGZmEGtFqBQj2qpgP0i1NSjRDxU/VOgXi4gilPtBoR/WRmPTukl2kro7c495zrnnzpnZ990ZwV2Gmbl35s7/9/z/z3POjOL//E+NVf+TNuEu1RvnZ4wPwNqUV5jlB+zmPvX8uCDGA2Ct4WVmOcsNPMNZEk7zY9UaB8ToAUT8PNdxPSmf4QxdbsYAKW0eGz3EaAFE/AUOYMh4iI9xjm+SOPGgS4jTo4UYHYCI7/AaNCl/Zi/f53co9jnh3gFKmDYPjw5iNAAiHvZylRr/wXCKL3GJ45X4GCBzIG0eHA3EzgGslZDsc7IWqJEzw6M8i2a3q3iIkDgwCNLmgZ1D7AxAxL/IHrJrLarQ7Cfly3yOC5x0kRHBAUAeBwCJVQ3IaPOVnUFsH8BXfhfnqTGN4VUSuqSc5DdYDq0qXKACmMBMlHG6d/sQ2wMQ8QtMo9HMkHKODE3CGd7OH/jlgPggOjRxPXLF94N34rPbg9g6gLWaC0yRYhzANCn/viZBIvQAp1jk01VU4tiI2AAjoqX6AUrOCcTHtw6xNQARf546GYa9JCySuLE5WUboGE9juXFF40reg/h+1UHc8OtDuLX56NYgNg8QxM+6DYHhMoYrJBhSElJ+zwF+ynMYlHMgVDw0bgwhx+S53EKTx3G6ffMQmwMQ8X+nxhuQ+Mi0SfgnqYuQB8h4mA8xz2knXqoash7EisDQuGEKBYAA5/vBbzvetzmIjQGsldfIZTUvkXARTUZCjZRdaJbcM0nwvSxwvBqdccVjgQIWQwXRww5p2rx3Y4j1Abx4SajiHy4uMms0VzDscWHpA9zHt1niI05cHCF5t29SfyUROhwhORcDxHund64PsTaAF5/wNydcUUPzOhcOzSUMM2UPiAPda1uIk5xBcbhqSifY9mPjoFSY/V7w5CordQDs90abI2tDrA4QxEu7xgCSdnHAOC+8AxIoRcbneYaE11dN6YRY36QSG+eE8o+DQ7EboYmDY/EKrmjzttUhVgJ48VJpfy4AHJQGvpCQJJorxpDMvzZV524lXXqL6vVutOcmP6jqy4ZaF2rL/rvLcgpLBruUYS/vwi5OYxdnKBb2g8r6UyisCWFiVRNJ+QLITXrizSshBgFEfBtF04lXPPZHxW27NcYoajVtzF9uVly9Syl7GxQ34WFX/7N27S9gSmMvC8h1FC9fj13e43vENbQKI6O/0LktuYNp86ZBiL6AIGYY4PaFmSxbvBvV+yTW3tRXFQkcFruO9tLXATj76m6KVw7Su3QQTBp/AepvCJPSDSnxG/sQKwFUW/HkWxW3mj1ZYr+I4RjW7oVNCg5XdFDDBpXXUGrgctXLehm9i4fodQ6BKkGk8n50eBj50+oYB9V35eEggFyYlkr/dfhTGh6y2ANVqUKVh6sbV381zWtGrDzhwjoE2qvRvXSYYukGSCMAcUGpnCkazKrzgwDy7IVf7KlNLv/aot7jLi/XHRAYqS+GlLnX2fI9G/z+4K4bhEfifedVQHZpH8sX3wVq0veAVjmJajDnxa8EkE3iS0+1CkvTnR2ougURHY7FUYkrXwyTrQGjdQkx7IBUuYoK9CZYvvxuLPtzUj0gflUAOThxXiBss/qEYRcKW4IMVVxeF6q7lgkVeChheaCKUQkQASqS3Fx9R6MzN1dVfk0HwgkH0Sv8QBVhchPh1TvjY+VxueuVDsS5Hu4bZUEEViUss6PjXnCRQWmVG11vdGbvWCF+TQcqiBd/1iqUOFFChHgIjHx+ECzHQ+UDrCwRsZ4AMZRzEVk1sUBJkQReifgkN2Zt8RsCuDjNP9EqKPoQzomidENckFcV/t6JLx8PRyg0rVTfuRMJV9o74s7JvUIlKjepbnRmj65a+Q0jFH/+xPxPWoUtmnR7ZZTk80uhRfnjc1FgBSw09PA64I6XPYJy/w4iEcGyCssyLIcSH5vJdEPxm3KgitMLj7eKXq9ZrWdBeK/AStXlRHAmjlNciaryodJyUqMchAdRSZIbPdHozK1f+S05UEH89UclhPWiQ2OLM65PymMuVmFShfUkGpdlxn3WNaRSfedJntZNozN3z7qxGajJcFQ3ep49/72WLYqmmzYuMuVNms89Lxe0eGq58eqnSmhQNwXkuTuWyOE8TacanSObF7+lCMVg2Z++07K223Riu13olaJLIOtgyoau5n4p3o/GqlnFAZXoPJXMHzmx6cpvK0IDEM99yzshDix3fWtYafJo5LqRGH2UPHbTxj1w57RO8jSbanRu2br4bTsQJGXPfr1VdLtNpKFDpMKkCmtHtfWI4iMOJDJtdJ5NTzQ6t9y/5crv2IEK4renWkV32TvhIIIL0XoQRqpMG1c2iU2SZxNJo/P+B7ctfscOVBC/+mqrKLpN6QeX/3hBq/ZR5bZYxqZJ8pqZanTu2Jn4kQHIhcxTx1tWnHBrQbkuiCMD2xuNUiqvJZONztFHdlT5kUUobmzz+N0eQuIURmq01VaJyWuTWaNz9IcjET9SBwKIefQTLWuLpg17pqpUKq+nuxqde0YnfiwALk6P3NkqCtl2VPvovC5b4hNPjKzyY4nQQJy+8WG/FbdFXq/XGp0TZ0cufmwOBBD9tQ98oa5rP+/cPx7xYwfYaF81ivPDP9yM4pr/02v8F6pCzk+EsR79AAAAAElFTkSuQmCC",eo="/assets/pool_bg-DIChGQZi.png";function oo({onClose:t,currentLockItem:o}){var A,J,L,G,m,K,V,U;const{currentAccount:x}=Us(),{signAndExecuteTransaction:l}=Ue(),{getBurnTxPayload:n}=Ge(),{getPositionBaseList:e,getPosRelatedData:a}=Rs(),{posLiquidityData:h}=bs(),[d,y]=r.useState(!1),[p,v]=r.useState(""),[H,b]=r.useState(!1),Q=c=>{const u=c.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");v(u),console.log("ğŸš€ ~ inputChange ~ e:",c.target.value,c.target.value.toLowerCase()),c.target.value.toLowerCase()=="lock my liquidity forever"?b(!0):b(!1)},{getTokenAmountValue:R}=Ys(),T=h[o==null?void 0:o.posId],Z=R((A=o==null?void 0:o.displayTokenA)==null?void 0:A.coin_type,T==null?void 0:T.displayCoinAmountA,"--"),X=R((J=o==null?void 0:o.displayTokenB)==null?void 0:J.coin_type,T==null?void 0:T.displayCoinAmountB,"--"),W=async()=>{console.log("ğŸš€ ~ currentLockItem:",o),y(!0);try{const c=n(o);console.log("ğŸš€ ~ toBurn ~ tx:",c);const j=await l(c,{getShowInfo:u=>{var D,C;const q={modalDescriptionText:`${(D=o==null?void 0:o.displayTokenA)==null?void 0:D.symbol} - ${(C=o==null?void 0:o.displayTokenB)==null?void 0:C.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ğŸš€ ~ toBurn ~ status:",u),q}});if(console.log("ğŸš€ ~ toBurn ~ res:",j),j){const u=await e(x==null?void 0:x.address);a(u),t()}y(!1)}catch(c){y(!1),console.log("ğŸš€ ~ claimYieldAction ~ error:",c)}};return s.jsxs(_,{w:"100%",gap:"12px",children:[s.jsxs(_,{w:"100%",align:"flex-start",gap:"20px",children:[s.jsx(f,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),s.jsx(f,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),s.jsxs(_,{w:"100%",children:[s.jsx(ue,{posInfo:o,pageFrom:"lpBurnNext"}),s.jsx(is,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:s.jsx(is,{p:"16px 12px",borderRadius:"12px",children:s.jsxs(_,{gap:"16px",children:[s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsxs(k,{children:[s.jsx(as,{imageUrl:(L=o==null?void 0:o.displayTokenA)==null?void 0:L.logo_url,w:"20px",h:"20px",coinType:(G=o==null?void 0:o.displayTokenA)==null?void 0:G.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(f,{color:"text_caption",children:[T==null?void 0:T.displayCoinAmountA," ",(m=o==null?void 0:o.displayTokenA)==null?void 0:m.symbol]})]}),s.jsx(f,{color:"text_caption",children:Hs(Z,2)})]}),s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsxs(k,{children:[s.jsx(as,{imageUrl:(K=o==null?void 0:o.displayTokenB)==null?void 0:K.logo_url,w:"20px",h:"20px",coinType:(V=o==null?void 0:o.displayTokenB)==null?void 0:V.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(f,{color:"text_caption",children:[T==null?void 0:T.displayCoinAmountB," ",(U=o==null?void 0:o.displayTokenB)==null?void 0:U.symbol]})]}),s.jsx(f,{color:"text_caption",children:Hs(X,2)})]})]})})})]}),s.jsxs(k,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[s.jsx(fs,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),s.jsx(f,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),s.jsxs(is,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[s.jsx(f,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),s.jsx(f,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),s.jsx(is,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:s.jsx(ne,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:p,onChange:Q})})]}),s.jsxs(_,{w:"100%",gap:"8px",pb:"16px",children:[s.jsx(O,{isLoading:d,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!H||d,onClick:W,children:"Confirm"}),s.jsx(O,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:t,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function to({isOpen:t,onClose:o}){const[x,l]=r.useState(!1),[n,e]=r.useState({});r.useEffect(()=>{e({}),l(!1)},[t]);const a=d=>{(d==null?void 0:d.posId)==(n==null?void 0:n.posId)?e({}):e(d)},{isApp:h}=ps();return s.jsxs(ie,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:o,isCentered:!0,children:[s.jsx(le,{}),s.jsxs(ae,{minWidth:h?"300px":"482px",children:[s.jsx(re,{children:s.jsx(pe,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),s.jsx(ce,{}),s.jsxs(xe,{p:"16px 16px 0",textAlign:"center",children:[!x&&s.jsx(ge,{onClose:o,currentLockItem:n,onClickCheckBox:d=>a(d),onClickLock:()=>l(!0)}),x&&s.jsx(oo,{onClose:o,currentLockItem:n})]})]})]})}function no({isRefreshed:t}){var H;const{tab:o}=Os(),x=qs(),[l,n]=r.useState(!1),{statisticsData:e}=ye(),{poolListLength:a}=vs(),{showPosListLength:h}=bs(),d=r.useMemo(()=>(console.log("ğŸš€ ~ PoolsTopData ~ poolListLength:",a),[{label:"Pools",value:"pools",num:a,imgInfo:{src:je,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:h,imgInfo:{src:so,w:"22px",h:"22px"}}]),[a,h]),{isApp:y}=ps(),[p,v]=r.useState(!1);return s.jsxs(_,{w:"100%",children:[s.jsxs(k,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[s.jsxs(_,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[s.jsx(f,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),s.jsxs(_,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:eo,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[s.jsx(Ms,{wrapStyle:{alignItems:y?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(e==null?void 0:e.totalValueLocked)||"",isLoading:!e}),s.jsx(Ms,{wrapStyle:{alignItems:y?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(e==null?void 0:e.cumulativeVolume)||"",isLoading:!e})]})]}),s.jsx(N,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:s.jsx(ve,{statisticsData:e,pageFrom:"pools",isRefresh:!t})})]}),s.jsxs(k,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[s.jsx(ke,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:d,currentTab:((H=d==null?void 0:d.find(b=>(b==null?void 0:b.value)===o))==null?void 0:H.label)||"Pools",handleChangeTab:b=>{x(`/pools?tab=${b.value}`)}}),s.jsxs(k,{w:{base:"100%",lg:"unset"},children:[o=="positions"?s.jsx(de,{isOpen:p,label:s.jsx(f,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:s.jsx(O,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),onClick:()=>{v(!1),n(!0)},children:"LP Burn"})}):s.jsx(O,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>x("/create-pool"),children:"Create a new pool"}),s.jsx(O,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>x("/select-pool"),children:"Add Liquidity"})]})]}),l&&s.jsx(to,{isOpen:l,onClose:()=>n(!1)})]})}function io({isRefreshed:t,handleIsRefreshed:o}){var U;const{getStatistics:x}=Qs(),{fetchTokenPrices:l}=Ys(),{currentAccount:n,onWalletModal:e}=Us(),{getPositionBaseList:a,getPosRelatedData:h}=Rs(),{posRewardsData:d,farmsPosRewardsData:y,posBaseList:p,setShowPosListLength:v,setMyPosYieldValue:H,posBaseListLoading:b,posBaseListGroupByPool:Q}=bs(),[R,T]=r.useState([]),{getNotifiPositionTransfer:Z}=Ye(),X=()=>{console.log("ğŸš€ ~ handleRefresh ~ handleRefresh:"),o(!1),H(""),x(),V(),n!=null&&n.address&&G(n==null?void 0:n.address),setTimeout(()=>{o(!0)},1e3)};Oe({onRpcChange:()=>{n!=null&&n.address&&G(n==null?void 0:n.address)}});const[W,A]=r.useState([]),J=c=>{console.log("ğŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",c),A(j=>[...j,c])},L=c=>{console.log("ğŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",c),A(j=>j.filter(u=>(u==null?void 0:u.coin_type)!==(c==null?void 0:c.coin_type)))};r.useEffect(()=>{H(""),n!=null&&n.address?(console.log("ğŸš€ ~ useEffect ~ currentAccount?.address:",n==null?void 0:n.address),G(n==null?void 0:n.address)):v("")},[n==null?void 0:n.address]);const G=async c=>{const j=await a(c);h(j)},{notifiClient:m,notifiSources:K}=_e();r.useEffect(()=>{Z(p,m,K)},[p,m,K]),r.useEffect(()=>{var D,C,z,F;const c=(D=W[0])!=null&&D.coin_type?Y((C=W[0])==null?void 0:C.coin_type):void 0,j=(z=W[1])!=null&&z.coin_type?Y((F=W[1])==null?void 0:F.coin_type):void 0,u=Object.values(Q).filter(B=>c&&j?Y(B.tokenA.coin_type)==c&&Y(B.tokenB.coin_type)==j||Y(B.tokenA.coin_type)==j&&Y(B.tokenB.coin_type)==c:c?Y(B.tokenA.coin_type)==c||Y(B.tokenB.coin_type)==c:B);console.log("ğŸš€ ~ useEffect ~ filterArr:",Object.values(Q),u),T(u);const q=u.reduce((B,S)=>B+(S.list?S.list.length:0),0);n!=null&&n.address&&v(q.toString())},[W,Q]);const V=()=>{const c=[];if((p==null?void 0:p.length)>0){p.map(u=>{c.push(gs(u==null?void 0:u.coinTypeA).full_address),c.push(gs(u==null?void 0:u.coinTypeB).full_address);const q=d[u==null?void 0:u.posId]||[],D=y[u==null?void 0:u.id]||[],C=q.concat(D);C==null||C.map(z=>{var F;me(z==null?void 0:z.display_amount_owed).gt(0)&&c.push(gs((F=z==null?void 0:z.token)==null?void 0:F.coin_type).full_address)})});const j=Array.from(new Set(c));console.log("ğŸš€ ~ refreshTokenPrice ~ list:",p,c,j),l(j)}};return r.useEffect(()=>{V()},[p==null?void 0:p.length,d]),r.useEffect(()=>(x(),()=>{v("")}),[]),r.useEffect(()=>{b&&v("")},[b]),s.jsxs(_,{gap:"20px",w:"100%",children:[s.jsx(Ns,{isPools:!1,handleRefresh:X,selectCoinList:W,onClickSelectCoinList:J,onDeleteSelectCoinList:L}),s.jsx(N,{h:"1px",w:"100%",bg:"border"}),s.jsx(he,{}),n!=null&&n.address?b?[{},{},{},{}].map((c,j)=>s.jsx(Ne,{},j)):((U=Object.values(R))==null?void 0:U.length)>0?Object.values(R).map((c,j)=>s.jsx(fe,{poolInfo:c},j)):s.jsx(ys,{type:"nodata",text:"No liquidity positions"}):s.jsx(ys,{type:"nowallet",onboard:()=>e(!0)})]})}function _t(){const{tab:t}=Os(),[o,x]=r.useState(!0),l=n=>{x(n)};return s.jsxs(_,{gap:"20px",w:"100%",pt:"40px",children:[s.jsx(no,{isRefreshed:o}),(t=="pools"||t===void 0)&&s.jsx(Le,{isRefreshed:o,handleIsRefreshed:l}),t=="positions"&&s.jsx(io,{isRefreshed:o,handleIsRefreshed:l})]})}export{_t as default};
//# sourceMappingURL=Pools-DZ64GzfH.js.map
