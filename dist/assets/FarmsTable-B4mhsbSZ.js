import{j as e,V as R,H as V,T as p,a as y,p as M,q as N,f as G,ak as H,R as q,as as S,at as j,C as K,av as U,aw as J,ax as k,ar as Q,F as X}from"./vendor-BowHGuwE.js";import{f as Z,n as w,r as O,q as L,d as E,R as Y,K as D,I as f,a as I,z as B,$ as C,B as ss}from"./index-gsbUcTxN.js";import{N as W}from"./NoData-DwPvHKvw.js";import{u as es}from"./global-BYj4jnQG.js";import{u as z,b as ts}from"./usePositionList-DEh0XQ33.js";import{A as rs}from"./index-DkKc3htU.js";import{a as ls,E as os}from"./ExpendItem-De11Bq_6.js";import{S as ds}from"./SingleTokenInfo-Cp98kdQx.js";import{u as xs}from"./useToken-D86igCts.js";import{C as is}from"./CoinPairInfo-Bbvpvgxp.js";import{R as ns}from"./RangeValue-ClNqvZmo.js";function cs({apiInfo:s}){var o,l,n;const{tokenInfo:r}=xs((o=(s==null?void 0:s.farmsRewarderList)||[])==null?void 0:o.map(t=>t==null?void 0:t.coinType));return e.jsx(R,{align:"flex-end",children:s!=null&&s.farmsRewarderList&&((l=s==null?void 0:s.farmsRewarderList)==null?void 0:l.length)>0?(n=s==null?void 0:s.farmsRewarderList)==null?void 0:n.map(t=>{var d;return e.jsxs(V,{children:[e.jsx(ds,{token:r==null?void 0:r.get(t==null?void 0:t.coinType),imgBoxStyle:{w:"20px",h:"20px"},warningIcon:{iconW:"10px",iconH:"10px"},haveName:!1,haveSymbol:!1}),e.jsxs(p,{color:"text_caption",fontWeight:"500",children:[Z(t==null?void 0:t.emissionsEveryDay)," ",(d=r==null?void 0:r.get(t==null?void 0:t.coinType))==null?void 0:d.symbol]})]},t==null?void 0:t.coinType)}):e.jsx(p,{color:"text_caption",children:"--"})})}function as({apiInfo:s}){var A;const{currentAccount:r}=w(),{getTokenAmountValue:o}=O(),{coinPriceObj:l}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{posLiquidityData:n,posBaseListLoading:t,posBaseListGroupByPool:d}=z(),g=y.useMemo(()=>{var m,c;if(!(r!=null&&r.address)||!(s!=null&&s.poolAddress))return"--";if(!t)return(((c=(m=d[s.poolAddress])==null?void 0:m.list)==null?void 0:c.filter(i=>(i==null?void 0:i.posType)=="farms"))||[]).reduce((i,a)=>{var b,F;const u=n[a==null?void 0:a.posId],_=o((b=s==null?void 0:s.displayTokenA)==null?void 0:b.coin_type,u==null?void 0:u.displayCoinAmountA,"--"),v=o((F=s==null?void 0:s.displayTokenB)==null?void 0:F.coin_type,u==null?void 0:u.displayCoinAmountB,"--");return i=="--"||_=="--"||v=="--"?"--":E(i).plus(_).plus(v).toString()},"0")},[t,(A=Object.values(n))==null?void 0:A.length,l,r==null?void 0:r.address]),[h,P]=y.useState(""),x=y.useMemo(()=>{var c,T;const m=((T=(c=d==null?void 0:d[s==null?void 0:s.poolAddress])==null?void 0:c.list)==null?void 0:T.filter(i=>i.posType!=="burn").sort((i,a)=>Number(a.liquidity)-Number(i.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",m),m},[s==null?void 0:s.poolAddress,d]);return y.useEffect(()=>{const m=x==null?void 0:x.filter(c=>c.posType=="farms");P(m==null?void 0:m.length.toString())},[x]),e.jsx(e.Fragment,{children:r!=null&&r.address?e.jsxs(R,{align:"flex-end",children:[e.jsx(M,{isLoaded:!!g,children:e.jsx(p,{textColor:"text_caption",fontWeight:"500",textAlign:"right",lineHeight:"1",children:Y(g,2)})}),Number(h)>0&&e.jsx(M,{isLoaded:!!g,children:e.jsxs(p,{fontWeight:"500",bg:"position_farms_bg",color:"position_farms_color",fontSize:"12px",borderRadius:"8px",padding:"2px 10px",lineHeight:"1",children:[h," ",Number(h)>1?"Positions":"Position"]})})]}):e.jsx(p,{textColor:"text_caption",textAlign:"right",children:"--"})})}function $({apiInfo:s,disabled:r}){const{currentAccount:o}=w(),{posBaseListGroupByPool:l}=z(),{getPositionBaseList:n,getPosRelatedData:t}=ts(),{toClaimAllPos:d,claimLoading:g}=ls(),h=async()=>{const x=await n(o==null?void 0:o.address);t(x,!0)},P=()=>{var x;d((x=l[s==null?void 0:s.poolAddress])==null?void 0:x.list,h)};return e.jsx(N,{onClick:x=>{D(x),P()},isLoading:g,disabled:r||g,w:{base:"64px",lg:"100px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",variant:"outline",fontSize:"14px",children:"Claim"})}function gs({isOpen:s,apiInfo:r,disabled:o}){return e.jsxs(V,{justify:"flex-end",gap:"20px",children:[e.jsx($,{apiInfo:r,disabled:o}),e.jsx(N,{w:"32px",h:"90px",borderRadius:"8px",variant:"ghost",p:"0 !important",sx:{_hover:{svg:{fill:"text_caption"}}},children:e.jsx(f,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:s?"rotate(180deg)":"rotate(0deg)"})})]})}function hs({apiInfo:s,disabled:r,totalEarned:o}){const{isApp:l}=I();return e.jsxs(V,{justify:"flex-end",children:[e.jsx(M,{isLoaded:!!o,children:e.jsx(p,{textColor:"primary_yellow",textAlign:"right",fontWeight:"500",children:Y(o,2)})}),l&&e.jsx($,{apiInfo:s,disabled:r})]})}function ms({apiInfo:s}){const r=y.useMemo(()=>{if((s==null?void 0:s.displayFarmsEffectMaxPrice)!=="âˆž")return E(1).div(s==null?void 0:s.displayFarmsEffectMaxPrice).toString()},[s==null?void 0:s.displayFarmsEffectMaxPrice]),o=y.useMemo(()=>{if(E(s==null?void 0:s.displayFarmsEffectMinPrice).gt(0))return E(1).div(s==null?void 0:s.displayFarmsEffectMinPrice).toString()},[s==null?void 0:s.displayFarmsEffectMinPrice]);return e.jsxs(R,{align:"flex-start",gap:"8px",w:{base:"100%",lg:"unset"},children:[e.jsx(G,{m:"-12px 0",children:e.jsx(is,{poolInfo:{...s,poolAddress:s==null?void 0:s.farmsPoolAddress},symbolFontSize:"15px"})}),e.jsx(V,{maxW:"100%",display:"inline-block",w:{base:"100%",lg:"unset"},borderRadius:"12px",bg:"position_status_bg",p:"7px 12px",children:e.jsxs(R,{align:"flex-start",gap:"0px",w:{base:"100%",lg:"unset"},children:[e.jsx(p,{fontSize:"12px",color:"primary_gray",children:"Valid Range"}),e.jsx(ns,{symbolEllipsesDecimals:10,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,fontWeight:"500",priceInfo:{minPrice:B(s==null?void 0:s.displayFarmsEffectMinPrice).toString(),maxPrice:B(s==null?void 0:s.displayFarmsEffectMaxPrice).toString(),minPriceResever:B(r).toString(),maxPriceResever:B(o).toString()}})]})})]})}function us({apiInfo:s}){H();const{getTokenAmountValue:r}=O(),{coinPriceObj:o}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{currentAccount:l,onWalletModal:n}=w(),[t,d]=y.useState({}),{farmsPosRewardsDataLoading:g,farmsPosRewardsData:h,posBaseListLoading:P,posBaseListGroupByPool:x}=z(),A=y.useMemo(()=>{var c;if(!(l!=null&&l.address)||!(s!=null&&s.poolAddress))return"--";if(!P&&!g)return(((c=x[s.poolAddress])==null?void 0:c.list)||[]).reduce((i,a)=>{const u=h[a==null?void 0:a.id]||[];console.log("ðŸš€ ~ returnposBaseList.reduce ~ posFarmsData:",i,u);const _=u.reduce((v,b)=>{if(v==="--")return"--";const F=r(b==null?void 0:b.token.coin_type,b==null?void 0:b.display_amount_owed,"--");return F==="--"?"--":C(v).plus(F).toString()},"0");return i==="--"||_==="--"?"--":C(i).plus(_).toString()},"0")},[P,h,g,o,l==null?void 0:l.address]),m=y.useMemo(()=>{var T,i;const c=((i=(T=x==null?void 0:x[s==null?void 0:s.poolAddress])==null?void 0:T.list)==null?void 0:i.filter(a=>a.posType!=="burn").sort((a,u)=>Number(u.liquidity)-Number(a.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",c),c},[s==null?void 0:s.poolAddress,x]);return e.jsxs(q.Fragment,{children:[e.jsxs(S,{cursor:"pointer",onClick:()=>{t[s==null?void 0:s.poolAddress]?t[s==null?void 0:s.poolAddress]=!1:t[s==null?void 0:s.poolAddress]=!0,d({...t})},sx:{td:{pb:t[s==null?void 0:s.poolAddress]?"20px !important":"16px !important"}},children:[e.jsx(j,{w:"30%",children:e.jsx(ms,{apiInfo:s})}),e.jsx(j,{textAlign:"right",children:e.jsx(p,{fontWeight:"500",textColor:"text_caption",textAlign:"right",children:s==null?void 0:s.farmsStatedTvlDisplay})}),e.jsx(j,{textAlign:"right",children:e.jsx(rs,{poolInfo:s,isPosition:!0})}),e.jsx(j,{textAlign:"right",children:e.jsx(cs,{apiInfo:s})}),e.jsx(j,{textAlign:"right",children:e.jsx(as,{apiInfo:s})}),e.jsx(j,{textAlign:"right",children:e.jsx(hs,{totalEarned:A,apiInfo:s,disabled:A=="--"?!0:C(A).lte(0)})}),e.jsx(j,{textAlign:"right",children:e.jsx(gs,{isOpen:t[s==null?void 0:s.poolAddress],apiInfo:s,disabled:A=="--"?!0:C(A).lte(0)})})]}),!t[s==null?void 0:s.poolAddress]&&e.jsx(S,{h:"16px"}),e.jsx(S,{position:"relative",top:"-20px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:t[s==null?void 0:s.poolAddress]&&e.jsx(j,{colSpan:7,children:e.jsx(js,{expendList:m,apiInfo:s})})})]},s==null?void 0:s.poolAddress)}const js=({expendList:s,apiInfo:r})=>{const o=H(),{currentAccount:l,onWalletModal:n}=w(),{setBackUrl:t}=es();return e.jsxs(ss,{overflow:"hidden",bg:{base:"bg_fifth",lg:"bg_secondary"},p:{base:"0px",lg:"16px"},borderTop:{lg:"none"},borderRadius:{base:"8px",lg:" 0 0 16px 16px "},children:[e.jsx(R,{overflow:"auto",h:l!=null&&l.address&&s&&(s==null?void 0:s.length)>2?"250px":"unset",children:l!=null&&l.address?(s==null?void 0:s.length)==0?e.jsx(W,{type:"nodata",text:"No Position Found",p:{base:"16px",lg:"20px"},border:{base:"none",lg:"1px solid"},borderColor:"border !important",borderRadius:{base:"8px",lg:"12px"},children:e.jsxs(R,{gap:"4px",mt:"-4px",children:[e.jsx(p,{fontSize:"12px",w:{base:"100%",lg:"380px"},lineHeight:{base:"16px",lg:"unset"},textAlign:"center",children:"Stake liquidity position to earn farming rewards. To get the position for this pool, you should provide liquidity to this pool first."}),e.jsx(N,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"36px",fontSize:"12px",onClick:()=>{t("/farms"),o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`)},children:"Create a Position"})]})}):s==null?void 0:s.map((d,g)=>(console.log("ðŸš€ ~ expendList.map ~ item:",d),e.jsx(q.Fragment,{children:e.jsx(os,{positionInfo:d,apiInfo:r})},g))):e.jsx(W,{type:"nowallet",onboard:()=>{n(!0)}})}),(s==null?void 0:s.length)>0&&(l==null?void 0:l.address)&&e.jsx(K,{pb:{base:"12px",lg:"0"},children:e.jsx(N,{mt:{base:"12px",lg:"16px"},fontSize:"14px",onClick:d=>{t("/farms"),o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`)},h:"32px",p:"0 16px",borderRadius:"8px",variant:"outline",children:"+ Create a position"})})]})};function ws({dataList:s,showSkeletonLoading:r,currTabLabel:o}){console.log("ðŸš€ ~ FarmsTable ~ currTabLabel:",o);const{currentAccount:l,onWalletModal:n}=w();return e.jsxs(U,{variant:"simple_list",w:"100%",children:[e.jsx(J,{children:e.jsxs(S,{children:[e.jsx(k,{children:"Pools"}),e.jsx(k,{textAlign:"right",children:"Staked TVL"}),e.jsx(k,{textAlign:"right",children:"APR"}),e.jsx(k,{textAlign:"right",children:"Rewards / day"}),e.jsx(k,{textAlign:"right",children:"Your Staked"}),e.jsx(k,{textAlign:"right",children:"Your Earned"}),e.jsx(k,{textAlign:"right",children:"Actions"})]})}),e.jsx(Q,{children:o=="Your Farms"&&!(l!=null&&l.address)?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(j,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nowallet",onboard:()=>{n(!0)}})})}):r?e.jsx(bs,{itemList:[1,2,3],skeletonNum:7,skeletonW:["200px","110px","100px","100px","100px","100px","100px"]}):s.length===0?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(j,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nodata",text:"No farms found"})})}):s.map(t=>e.jsx(us,{apiInfo:t},t.poolAddress))})]})}function bs({itemList:s,skeletonNum:r,skeletonW:o,rowStyle:l}){const n=(t,d)=>Array.from({length:t}).map((g,h)=>e.jsx(j,{textAlign:"right",children:e.jsx(X,{justify:h==0?"flex-start":"flex-end",children:e.jsx(M,{w:d?d[h]:"200px"})})},h));return s.map(t=>e.jsxs(q.Fragment,{children:[e.jsx(S,{h:"90px",...l,children:n(r,o)}),e.jsx(S,{h:"16px"})]},t))}export{js as F,cs as R,as as S,hs as T,ms as V,ws as a,bs as b};
//# sourceMappingURL=FarmsTable-B4mhsbSZ.js.map
