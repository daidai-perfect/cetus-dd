import{ce as ls,s as l,d as a,aw as bs,m as Rs,z as Es,v as x,w as as,a9 as ns,aI as Fs}from"./index-CHh_ib_A.js";import"./vendor-BowHGuwE.js";const $=(y,_)=>{if(!y||(y==null?void 0:y.length)<1)return _?"0%":"0";const V=y.reduce((ts,X)=>{const ds=X?String(X):"0",s=ls(ds);return ts.add(s)},a(0));return _?a(V).gt(1e4)?">1,000,000%":l(V.mul(100).toString(),"%"):V.toString()},H=(y,_,V)=>{if(!y)return _?"0%":"0";if(y==="--")return"--";const Z=ls(y);return V&&a(Z).gt(100)?">10,000%":_?l(a(Z).mul(100).toString(),"%"):Z},Us=(y,_)=>{const V=Rs(y,_);return Es(V.toString(),_)},xs=y=>{const _=new Date(y).getDate();return _<10?`0${_}`:String(_)},Ls=y=>{var _;return bs((_=a(y))==null?void 0:_.mul(60*60*24).toString(),0)};function $s(){const y=s=>{var g,r,n;const i=s==null?void 0:s.has_mining;let u=a(0);const t=[],e=[];if(i){const v=((n=(r=(g=s==null?void 0:s.object)==null?void 0:g.rewarder_manager)==null?void 0:r.fields)==null?void 0:n.rewarders)||[],P=(s==null?void 0:s.rewarder_apr)||[];v==null||v.forEach((m,D)=>{var b,E,R,F,S;const A=a((b=m==null?void 0:m.fields)==null?void 0:b.emissions_per_second).mul(as.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&a(A).gt(0)){const c=H(P[D]);u=u.add(c);const f=(S=x((F=(R=(E=m==null?void 0:m.fields)==null?void 0:E.reward_coin)==null?void 0:R.fields)==null?void 0:F.name))==null?void 0:S.source_address;t.push({coinType:f,emissionsEveryDay:Ls(A)}),e.push({coinType:f,apr:c,aprDisplay:H(c,!0)})}})}return{haveMining:i&&t.length>0,miningRewardList:t,miningAprList:e,miningAprTotal:u.toString()}},_=s=>{var E,R,F,S,c,f,h,w,d,U;const i=(s==null?void 0:s.is_forward)===!1,u=s==null?void 0:s.has_farming,t=[];let e="",g="",r="",n="",v=0,P=0,m="",D="",A=a(0),b=!1;if(u){e=(E=s==null?void 0:s.stable_farming)==null?void 0:E.stable_farming_pool;const I=(R=s==null?void 0:s.stable_farming)==null?void 0:R.stable_rewarder;I==null||I.forEach((T,z)=>{const C=a(T==null?void 0:T.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${z+1}`]&&C.gt(0)){b=!0;const j=H(T==null?void 0:T.apr);A=A==null?void 0:A.add(j),t.push({coinType:x(T.coin).source_address,emissionsEveryDay:C.mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}}),g=(F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,r=l((S=s==null?void 0:s.stable_farming)==null?void 0:S.tvl,"$"),n=l(a(A).mul(100).toString(),"%",2,!0),v=(c=s==null?void 0:s.stable_farming)==null?void 0:c.effective_tick_lower,P=(f=s==null?void 0:s.stable_farming)==null?void 0:f.effective_tick_upper;const M=ns.tickIndexToPrice(v,(h=s==null?void 0:s.coin_a)==null?void 0:h.decimals,(w=s==null?void 0:s.coin_b)==null?void 0:w.decimals).toString(),N=ns.tickIndexToPrice(P,(d=s==null?void 0:s.coin_a)==null?void 0:d.decimals,(U=s==null?void 0:s.coin_b)==null?void 0:U.decimals).toString();m=i?a(1).div(N).toString():M,D=i?a(1).div(M).toString():N}return{haveFarming:b,farmsRewarderList:t,farmsApr:A.toString(),farmingAprDisplay:n,farmsStatedTvl:g,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:P,displayFarmsEffectMinPrice:m,displayFarmsEffectMaxPrice:D,farmsPoolAddress:e}},V=(s,i=!1)=>{var G,ss,rs,es,J,K,Q;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",s);const u=s==null?void 0:s.object,t=(G=s==null?void 0:s.object)==null?void 0:G.index,e=s.address,g=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(rs=x((ss=s==null?void 0:s.coin_a)==null?void 0:ss.address))==null?void 0:rs.source_address},n={...s==null?void 0:s.coin_b,coin_type:(J=x((es=s==null?void 0:s.coin_b)==null?void 0:es.address))==null?void 0:J.source_address},v=g?n:r,P=g?r:n,m=`${v==null?void 0:v.symbol} - ${P==null?void 0:P.symbol}`,D=a(s.fee).mul(1e4).toString(),A=a(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,E=l(s.pure_tvl_in_usd||0),R=l(s.vol_in_usd_24h||0),F=l(s.fee_24_h||0),S=H((K=s==null?void 0:s.apr)==null?void 0:K.fee_apr_24h),c=H((Q=s==null?void 0:s.apr)==null?void 0:Q.fee_apr_24h,!0),{haveMining:f,miningRewardList:h,miningAprList:w,miningAprTotal:d}=y(s),{haveFarming:U,farmsRewarderList:I,farmsApr:M,farmingAprDisplay:N,farmsStatedTvl:T,farmsStatedTvlDisplay:z,farmsEffectiveTickLower:C,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p}=_(s),W=$([S,d]),o=a(W).gt(1e4)?">1,000,000%":l(a(W).mul(100).toString(),"%"),is=$([W,M]),cs=$([S,M],!0),fs=$([W,M],!0),O=s.is_vaults,k=!O&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":O?"cetus":"",q=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return i?{poolAddress:e,name:m,isReverse:g,tokenA:r,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:null,miningAprList:null,haveFarming:U,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:O,isLocalData:i,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:C,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p,tickSpacing:b,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}:{poolAddress:e,name:m,isReverse:g,tokenA:r,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:h,miningAprList:w,haveFarming:U,farmsRewarderList:I,farmsApr:M,farmingAprDisplay:N,feeApr:S,feeAprDisplay:c,miningAprTotal:d,feeAndMiningAprDisplay:o,totalAprDisplay:fs,fee:s.fee,feeRate:D,feeDisplay:A,tvlDisplay:E,tvl:s.pure_tvl_in_usd||0,volume24Display:R,fees24Display:F,isVaults:O,farmsStatedTvl:T,farmsStatedTvlDisplay:z,feeAndFarmsApr:is,feeAndFarmsAprDisplay:cs,farmsEffectiveTickLower:C,farmsEffectiveTickUpper:j,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p,tickSpacing:b,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}},Z=s=>{var c,f,h,w;const{farmingRewarder:i,showReverse:u}=s;if(!i)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:t,effectiveTickUpper:e,rewarderCoins:g,tvl:r}=i,n=ns.tickIndexToPrice(t,(c=s==null?void 0:s.coinA)==null?void 0:c.decimals,(f=s==null?void 0:s.coinB)==null?void 0:f.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:281 ~ handleFarmsV2 ~ farmingRewarder:",i);const v=ns.tickIndexToPrice(e,(h=s==null?void 0:s.coinA)==null?void 0:h.decimals,(w=s==null?void 0:s.coinB)==null?void 0:w.decimals).toString(),P=u?a(1).div(v).toString():n,m=u?a(1).div(n).toString():v;let D=a(0);g.forEach(d=>{D=D.add(d==null?void 0:d.apr)});const A=D.toString(),b=l(D.mul(100).toString(),"%",2,!0),E=i.farmingPool,R=i.tvl,F=l(R,"$"),S=[];return g.forEach(d=>{a(d==null?void 0:d.emissionsPerSecond).gt(0)&&S.push({coinType:x(d==null?void 0:d.coinType).source_address,emissionsEveryDay:a(d==null?void 0:d.emissionsPerSecond).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:P,displayFarmsEffectMaxPrice:m,farmsApr:A,farmingAprDisplay:b,farmsEffectiveTickLower:t,farmsEffectiveTickUpper:e,farmsPoolAddress:E,farmsRewarderList:S,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:S.length>0}},ts=s=>{const{miningRewarders:i,showReverse:u}=s;if(!i)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let t=a(0);const e=[],g=[];return i.forEach(r=>{t=t.add(r==null?void 0:r.apr);const n=Fs.isSuiCoin((r==null?void 0:r.coinType)||"");r.display&&a(r==null?void 0:r.emissionsPerSecond).gt(0)&&(e.push({coinType:x(r==null?void 0:r.coinType).source_address,emissionsEveryDay:a(r==null?void 0:r.emissionsPerSecond).mul(10**r.decimals).mul(86400).toDP(2,as.ROUND_HALF_UP).toString(),sort:n?1:0}),g.push({coinType:x(r==null?void 0:r.coinType).source_address,apr:r==null?void 0:r.apr,aprDisplay:H(r==null?void 0:r.apr,!0)}))}),{miningAprTotal:t.toString(),miningRewardList:e.sort((r,n)=>r.sort-n.sort),haveMining:e.length>0,miningAprList:g}},X=s=>{const{vault:i,extensions:u}=s;if(!i)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:t,id:e}=i;return{isUnstableVault:t==="haedal",isVaults:t==="cetus",vaultId:e,vaultCategory:(u==null?void 0:u.showVaults)=="1"?"":t}};return{wrapPoolData:V,wrapPoolDataV2:(s,i=!1)=>{var J,K,Q,us,gs,vs,ms,ys,_s,As,Ds,Ss,hs,ws,Ts,Ps;const{showReverse:u,feeRate:t,stats:e,tvl:g,pool:r}=s,{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmingAprDisplay:P,farmsApr:m,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:S}=Z(s),c={...s==null?void 0:s.coinA,coin_type:(K=x((J=s==null?void 0:s.coinA)==null?void 0:J.coinType))==null?void 0:K.full_address,logo_url:(Q=s==null?void 0:s.coinA)==null?void 0:Q.logoURL,address:(us=s==null?void 0:s.coinA)==null?void 0:us.coinType,is_trusted:(gs=s==null?void 0:s.coinA)==null?void 0:gs.isVerified},f={...s==null?void 0:s.coinB,coin_type:(ms=x((vs=s==null?void 0:s.coinB)==null?void 0:vs.coinType))==null?void 0:ms.full_address,logo_url:(ys=s==null?void 0:s.coinB)==null?void 0:ys.logoURL,address:(_s=s==null?void 0:s.coinB)==null?void 0:_s.coinType,is_trusted:(As=s==null?void 0:s.coinB)==null?void 0:As.isVerified},h=u?f:c,w=u?c:f,d=a(t).div(10**6).toString(),{miningAprTotal:U,miningRewardList:I,haveMining:M,miningAprList:N}=ts(s),T=(Ds=e==null?void 0:e.filter(L=>L.dateType==="24H")[0])==null?void 0:Ds.apr,z=(Ss=e==null?void 0:e.filter(L=>L.dateType==="7D")[0])==null?void 0:Ss.apr,C=(hs=e==null?void 0:e.filter(L=>L.dateType==="7D")[0])==null?void 0:hs.apr,j=(ws=e==null?void 0:e.filter(L=>L.dateType==="30D")[0])==null?void 0:ws.fee,Y=$([T,m]),B=$([T,m],!0),p=$([T,U],!0),W=H(T,!0),o=a(d).mul(100).toString()+"%",is=l(j,"$"),cs=$([T,U]),fs=$([cs,m],!0),O=(c==null?void 0:c.isVerified)&&(f==null?void 0:f.isVerified)&&a(g).gt(1e4),{vaultCategory:k,vaultId:q,isVaults:G}=X(s),ss=l(s.tvl||0),rs=l(((Ts=e==null?void 0:e.filter(L=>L.dateType==="24H")[0])==null?void 0:Ts.vol)||0),es=l(((Ps=e==null?void 0:e.filter(L=>L.dateType==="7D")[0])==null?void 0:Ps.vol)||0);return i?{poolAddress:r,name:`${h==null?void 0:h.symbol} - ${w==null?void 0:w.symbol}`,isReverse:u,tokenA:c,tokenB:f,displayTokenA:h,displayTokenB:w,haveMining:M,miningRewardList:null,miningAprList:null,haveFarming:S,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeApr7d:"--",feeApr30d:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:t,fee:s.fee,feeDisplay:o,tvlDisplay:"--",tvl:"--",volume24Display:"--",volume7Display:"--",fees24Display:"--",isVaults:G,isLocalData:i,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmsPoolAddress:b,haveZap:(c==null?void 0:c.is_trusted)&&(f==null?void 0:f.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}:{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,displayTokenA:h,displayTokenB:w,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsApr:m,farmingAprDisplay:P,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,fee:d,feeApr:T,feeApr7d:z,feeApr30d:C,feeAprDisplay:W,feeAndFarmsApr:Y,feeAndFarmsAprDisplay:B,feeAndMiningAprDisplay:p,feeDisplay:o,feeRate:a(t).div(100).toString(),haveFarming:S,haveZap:O,isReverse:u,vaultCategory:k,vaultId:q,haveMining:M,miningRewardList:I,miningAprList:N,miningAprTotal:U.toString(),name:`${h==null?void 0:h.symbol} - ${w==null?void 0:w.symbol}`,poolAddress:r,tokenA:c,tokenB:f,totalAprDisplay:fs,tvl:g,tvlDisplay:ss,volume24Display:rs,volume7Display:es,fees24Display:is,isVaults:G}}}}export{Us as b,xs as d,$s as u};
//# sourceMappingURL=useWrapPoolData-BeW6eicH.js.map
