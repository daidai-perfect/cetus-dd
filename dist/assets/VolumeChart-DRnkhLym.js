import{J as S,j as t,O as X,P as I,V as U,b4 as $,b5 as Z,B as q,C as M,aB as Q,S as R,r as Y,b6 as b,u as K,b7 as ee}from"./index-B4jTrVt5.js";import{P as B}from"./Pagination-CfYkfort.js";import{T as V,a as P,b as L,c as te,d as se,e as ae}from"./tr--uB67hwW.js";import{H as ne,j as oe,k as re,l as ce}from"./api-data-utils-CfZpV00i.js";import{p as le,C as ie,E as me}from"./EmptyTooltip-Bdf36b86.js";import{X as E,Y as F,R as ue}from"./YAxis-CqQWpXC5.js";import{g as he,B as W,f as xe,T as fe}from"./generateCategoricalChart-BL97eP-t.js";const pe=S((e,u)=>{const{overflow:h,overflowX:n,className:a,...s}=e;return t.jsx(X.div,{ref:u,className:I("chakra-table__container",a),...s,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:h??n??"auto",overflowY:"hidden",maxWidth:"100%"}})});function ke({dataSource:e,columns:u,itemSkeletonLength:h,skeletonLength:n=3,rowKey:a,loading:s,pagination:o,rowStyle:r,wrapStyle:m,onRowClick:c,itemHeight:f}){var p;const x=new Array(n).fill(0);return t.jsxs(U,{w:"100%",...m||{},children:[(p=e&&(e!=null&&e.length)&&!s?e:x)==null?void 0:p.map((l,i)=>t.jsxs(U,{w:"100%",children:[t.jsx($,{data:Z(u,l,i),loading:s,skeletonLength:h,onClick:()=>c==null?void 0:c(l,i),style:typeof r=="function"?r(l,i):r,itemHeight:f},s?i:typeof a=="function"?a(l):a?l[a]:i),t.jsx(q,{w:"100%",h:"1px",bg:"border",mt:"12px"})]},s?i:typeof a=="function"?a(l):a?l[a]:i)),o&&(o==null?void 0:o.total)>(o==null?void 0:o.size)&&t.jsx(M,{mt:"16px",children:t.jsx(B,{...o})})]})}function Te(e){const{rowStyle:u,minW:h,tableListLength:n,tdListLength:a,firstTd:s}=e,o=new Array(n).fill(0),r=new Array(a).fill(0);return t.jsx(V,{children:o==null?void 0:o.map((m,c)=>t.jsx(P,{sx:{td:{_last:{">div":{justifyContent:"flex-end"}}}},...typeof u=="function"?u(m,c):u,children:t.jsxs(t.Fragment,{children:[s&&t.jsx(L,{children:s}),r==null?void 0:r.map((f,x)=>t.jsx(L,{children:t.jsx(Q,{w:"100%",justifyContent:!s&&x==0?"flex-start":"flex-end",children:t.jsx(R,{})})},x))]})},m+`${c}`))})}function He({dataSource:e,skeletonLength:u=3,columns:h,rowKey:n,loading:a,tdBorder:s,firstTdSkeleton:o,theadConfig:r,tbodyConfig:m,rowStyle:c={},onRowClick:f,pagination:x,...p}){return t.jsxs(t.Fragment,{children:[t.jsx(pe,{w:"100%",children:t.jsxs(te,{size:"sm",...p,children:[t.jsx(se,{...r,children:t.jsx(P,{children:h.map(({title:l,key:i,thConfig:T})=>t.jsx(ae,{...T,children:typeof l=="function"?l():l},typeof i=="function"?i():i))})}),a?t.jsx(Te,{tableListLength:u,tdListLength:h.length,firstTd:typeof o=="function"?o():o,rowStyle:c}):t.jsx(V,{...m,children:e==null?void 0:e.map((l,i)=>t.jsx(P,{borderBottom:s?"1px solid":"none",borderColor:s?"border":"transparent",onClick:()=>f&&f(l,i),...typeof c=="function"?c(l,i):c,children:h.map(({render:T,key:j,tdConfig:v})=>t.jsx(L,{...v,fontWeight:"500",children:typeof T=="function"?T(l,i):T||l[j]},j))},n?typeof n=="function"?n(l):l[`${n}`]:(l==null?void 0:l.key)||i))})]})}),x&&(x==null?void 0:x.total)>(x==null?void 0:x.size)&&t.jsx(M,{mt:"16px",children:t.jsx(B,{...x})})]})}var de=he({chartName:"BarChart",GraphicalChild:W,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:E},{axisType:"yAxis",AxisComp:F}],formatAxisMap:xe}),y=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(y||{});function Pe(){const[e,u]=Y.useState("");return{time:e,getCurrentTime:()=>{const a=b(Date.parse(new Date().toUTCString()),"YMD")||"",s=a.slice(5,7),o=y[Number(s)],r=a.slice(8,10),m=o,c=a.slice(0,4),f=m+" "+r+", "+c+" (UTC)";u(f)},getHoverTime:(a,s)=>{const o=Date.parse(a),r=new Date(o);r.setDate(r.getDate()+7);const m=new Date(o);m.setDate(m.getDate()+31);const c=r.toUTCString(),f=m.toUTCString(),x=b(Date.parse(f),"YMD")||"",p=b(Date.parse(new Date().toUTCString()),"YMD")||"",l=Date.parse(c)>Date.parse(new Date().toUTCString())?b(Date.parse(new Date().toUTCString()),"YMD")||"":b(Date.parse(c),"YMD")||"",i=p.slice(5,7),T=y[Number(i)],j=p.slice(8,10),v=T,N=p.slice(0,4),D=a.slice(5,7),w=y[Number(D)],g=a.slice(8,10),d=w,C=a.slice(0,4),k=l.slice(5,7),H=y[Number(k)],J=l.slice(8,10),_=H,z=l.slice(0,4),G=Number(D)==12?y[1]:y[Number(D)+1],O=x.slice(0,4);let A;s=="D"?A=d+" "+g+", "+C+" (UTC)":s=="W"?A=g+" "+d+"-"+J+" "+_+" , "+z+" (UTC)":A=Date.parse(f)>=Date.parse(new Date().toUTCString())?d+" 01-"+v+" "+j+", "+N+" (UTC)":d+" 01-"+G+" 01, "+O+" (UTC)",u(A)}}}function Le(){const{fetchByApi:e}=K();return{getHistogramData:async h=>{const{type:n,date_type:a="day",limit:s,address:o="all"}=h;console.log("ðŸš€ ~ getHistogramData ~ limit:",n,a,s);const r=n==="pure_tvl",c={day:"day",wek:"week",mon:"month"}[a],f=Date.now(),i=s?a=="day"?s*86400:a=="wek"?s*604800:s*2592e3:void 0,T=i?String(Math.floor(f/1e3-i)):0,j=r?{dataType:"tvl",dateType:c,address:o,beginTimestamp:T}:{typ:n,date_type:a,address:h==null?void 0:h.address};s&&!r&&(j.limit=s);const v=le(j,ee),D=await e(r?ne:s?re:oe,"GET",v);console.log("ðŸš€ ~ getHistogramData response:",D);const w=((D==null?void 0:D.list)||[]).map(d=>{const C=r?new Date(d.timestamp*1e3).toISOString().split(".")[0]+"Z":d.date,k=Number(C.slice(5,7)),H=y[k];return{num:Number(r?d.value:d.num),date:C,xAxis:a==="mon"?H:ce(C)}}),g=r?[...w].reverse():w;return console.log("ðŸš€ ~ getHistogramData ~ isPureTvl:",r,g),g}}}const Ne=({data:e,onChangeValue:u,noXAxis:h,pageFrom:n="stats"})=>{const[a,s]=Y.useState(""),o=c=>{if(c&&c.activePayload&&c.activePayload.length){const f=c.activePayload[0].payload.date;u(c.activePayload[0].payload);const x=f.slice(5,7),p=y[Number(x)],l=f.slice(8,10),i=p,T=f.slice(0,4);s(l+" "+i+" "+T)}},r=()=>{u(null)};(e==null?void 0:e.length)>0&&Math.floor(Math.min(...e.map(c=>c.num)));const m=Math.ceil(Math.max(...e.map(c=>c.num)));return t.jsx(ue,{width:"100%",height:"100%",children:t.jsxs(de,{barCategoryGap:"25%",data:e,onMouseMove:o,onMouseLeave:r,maxBarSize:24,children:[!h&&t.jsx(E,{type:"category",dataKey:"xAxis",minTickGap:18,tickLine:!1,axisLine:!1,tick:t.jsx(ie,{})}),m&&t.jsx(F,{domain:[0,m*1.05],hide:!0,axisLine:!1,tickLine:!1}),t.jsx(fe,{content:t.jsx(me,{value:n!=="stats"?a:""}),cursor:t.jsx(ye,{})}),t.jsx(W,{dataKey:"num",fill:"#75C8FF",isAnimationActive:!1})]})})};function ye(e){var r,m;const{x:u,y:h,width:n,height:a,payload:s}=e;if(!s||!(s!=null&&s[0])||!((m=(r=s==null?void 0:s[0])==null?void 0:r.payload)!=null&&m.num))return;const o=n>192?n/1.2:n>96?n/1.5:n>48?n/2:n>24?n/4:n/8;return t.jsx("g",{children:t.jsx("rect",{width:n-o,height:a,x:u+o/2,fill:"rgba(118,200,255,0.5)",y:h+1})})}export{ke as H,He as T,Ne as V,Le as a,Pe as u};
