import{cg as es,s as P,d as r,am as is,q as cs,x as fs,o as W,p as o,a8 as ss}from"./index-QNvgVKlA.js";import"./vendor-BFGDaAdA.js";const q=(e,t)=>{if(!e||(e==null?void 0:e.length)<1)return t?"0%":"0";const D=e.reduce((_,d)=>{const u=d?String(d):"0",g=es(u);return _.add(g)},r(0));return t?r(D).gt(1e4)?">1,000,000%":P(D.mul(100).toString(),"%"):D.toString()},j=(e,t,D)=>{if(!e)return t?"0%":"0";if(e==="--")return"--";const s=es(e);return D&&r(s).gt(100)?">10,000%":t?P(r(s).mul(100).toString(),"%"):s},_s=e=>`${r(e).mul(100).toString()}%`,gs=(e,t)=>{const D=cs(e,t);return fs(D.toString(),t)},vs=e=>{const t=new Date(e).getDate();return t<10?`0${t}`:String(t)},ds=e=>{var t;return is((t=r(e))==null?void 0:t.mul(60*60*24).toString(),0)};function ys(){const e=s=>{var v,n,a;const _=s==null?void 0:s.has_mining;let d=r(0);const u=[],g=[];if(_){const i=((a=(n=(v=s==null?void 0:s.object)==null?void 0:v.rewarder_manager)==null?void 0:n.fields)==null?void 0:a.rewarders)||[],m=(s==null?void 0:s.rewarder_apr)||[];i==null||i.forEach((c,S)=>{var h,T,E,F,y;const f=r((h=c==null?void 0:c.fields)==null?void 0:h.emissions_per_second).mul(o.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${S+1}`]&&r(f).gt(0)){const b=j(m[S]);d=d.add(b);const w=(y=W((F=(E=(T=c==null?void 0:c.fields)==null?void 0:T.reward_coin)==null?void 0:E.fields)==null?void 0:F.name))==null?void 0:y.source_address;u.push({coinType:w,emissionsEveryDay:ds(f)}),g.push({coinType:w,apr:b,aprDisplay:j(b,!0)})}})}return{haveMining:_&&u.length>0,miningRewardList:u,miningAprList:g,miningAprTotal:d.toString()}},t=s=>{var T,E,F,y,b,w,U,Z,x,L;const _=(s==null?void 0:s.is_forward)===!1,d=s==null?void 0:s.has_farming,u=[];let g="",v="",n="",a="",i=0,m=0,c="",S="",f=r(0),h=!1;if(d){g=(T=s==null?void 0:s.stable_farming)==null?void 0:T.stable_farming_pool;const R=(E=s==null?void 0:s.stable_farming)==null?void 0:E.stable_rewarder;R==null||R.forEach((A,C)=>{const $=r(A==null?void 0:A.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${C+1}`]&&$.gt(0)){h=!0;const N=j(A==null?void 0:A.apr);f=f==null?void 0:f.add(N),u.push({coinType:W(A.coin).source_address,emissionsEveryDay:$.mul(86400).toDP(2,o.ROUND_HALF_UP).toString()})}}),v=(F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,n=P((y=s==null?void 0:s.stable_farming)==null?void 0:y.tvl,"$"),a=P(r(f).mul(100).toString(),"%",2,!0),i=(b=s==null?void 0:s.stable_farming)==null?void 0:b.effective_tick_lower,m=(w=s==null?void 0:s.stable_farming)==null?void 0:w.effective_tick_upper;const M=ss.tickIndexToPrice(i,(U=s==null?void 0:s.coin_a)==null?void 0:U.decimals,(Z=s==null?void 0:s.coin_b)==null?void 0:Z.decimals).toString(),I=ss.tickIndexToPrice(m,(x=s==null?void 0:s.coin_a)==null?void 0:x.decimals,(L=s==null?void 0:s.coin_b)==null?void 0:L.decimals).toString();c=_?r(1).div(I).toString():M,S=_?r(1).div(M).toString():I}return{haveFarming:h,farmsRewarderList:u,farmsApr:f.toString(),farmingAprDisplay:a,farmsStatedTvl:v,farmsStatedTvlDisplay:n,farmsEffectiveTickLower:i,farmsEffectiveTickUpper:m,displayFarmsEffectMinPrice:c,displayFarmsEffectMaxPrice:S,farmsPoolAddress:g}};return{wrapPoolData:(s,_=!1)=>{var V,X,Y,O,B,l,p;const d=s==null?void 0:s.object,u=(V=s==null?void 0:s.object)==null?void 0:V.index,g=s.address,v=(s==null?void 0:s.is_forward)===!1,n={...s==null?void 0:s.coin_a,coin_type:(Y=W((X=s==null?void 0:s.coin_a)==null?void 0:X.address))==null?void 0:Y.source_address},a={...s==null?void 0:s.coin_b,coin_type:(B=W((O=s==null?void 0:s.coin_b)==null?void 0:O.address))==null?void 0:B.source_address},i=v?a:n,m=v?n:a,c=`${i==null?void 0:i.symbol} - ${m==null?void 0:m.symbol}`,S=r(s.fee).mul(1e4).toString(),f=r(s.fee).mul(100).toString()+"%",h=s==null?void 0:s.tick_spacing,T=P(s.pure_tvl_in_usd||0),E=P(s.vol_in_usd_24h||0),F=P(s.fee_24_h||0),y=j((l=s==null?void 0:s.apr)==null?void 0:l.fee_apr_24h),b=j((p=s==null?void 0:s.apr)==null?void 0:p.fee_apr_24h,!0),{haveMining:w,miningRewardList:U,miningAprList:Z,miningAprTotal:x}=e(s),{haveFarming:L,farmsRewarderList:R,farmsApr:M,farmingAprDisplay:I,farmsStatedTvl:A,farmsStatedTvlDisplay:C,farmsEffectiveTickLower:$,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:z,displayFarmsEffectMaxPrice:G,farmsPoolAddress:J}=t(s),k=q([y,x]),ts=r(k).gt(1e4)?">1,000,000%":P(r(k).mul(100).toString(),"%"),rs=q([k,M]),ns=q([y,M],!0),as=q([k,M],!0),H=s.is_vaults,K=!H&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":H?"cetus":"",Q=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return _?{poolAddress:g,name:c,isReverse:v,tokenA:n,tokenB:a,displayTokenA:i,displayTokenB:m,haveMining:w,miningRewardList:null,miningAprList:null,haveFarming:L,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:S,fee:s.fee,feeDisplay:f,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:H,isLocalData:_,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:$,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:z,displayFarmsEffectMaxPrice:G,farmsPoolAddress:J,tickSpacing:h,index:u,object:d,haveZap:(n==null?void 0:n.is_trusted)&&(a==null?void 0:a.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:K,vaultId:Q}:{poolAddress:g,name:c,isReverse:v,tokenA:n,tokenB:a,displayTokenA:i,displayTokenB:m,haveMining:w,miningRewardList:U,miningAprList:Z,haveFarming:L,farmsRewarderList:R,farmsApr:M,farmingAprDisplay:I,feeApr:y,feeAprDisplay:b,miningAprTotal:x,feeAndMiningAprDisplay:ts,totalAprDisplay:as,fee:s.fee,feeRate:S,feeDisplay:f,tvlDisplay:T,tvl:s.pure_tvl_in_usd||0,volume24Display:E,fees24Display:F,isVaults:H,farmsStatedTvl:A,farmsStatedTvlDisplay:C,feeAndFarmsApr:rs,feeAndFarmsAprDisplay:ns,farmsEffectiveTickLower:$,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:z,displayFarmsEffectMaxPrice:G,farmsPoolAddress:J,tickSpacing:h,index:u,object:d,haveZap:(n==null?void 0:n.is_trusted)&&(a==null?void 0:a.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:K,vaultId:Q}}}}export{j as a,q as b,gs as c,vs as d,_s as f,ys as u};
//# sourceMappingURL=useWrapPoolData-CHCtGZRc.js.map
