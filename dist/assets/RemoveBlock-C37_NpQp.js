import{a as p,ab as De,j as i,V as Ve,H as ae,I as ht,T as O,R as bt,v as be,f as ve,a2 as St,a3 as kt,a4 as At,a5 as wt}from"./vendor-BulRdKUe.js";import{e as Pe,f as _t,c as vt,a as Rt,g as Ct,Z as jt,R as Lt}from"./ZapSwitch-fdBixLtI.js";import{a as qt,u as Ft}from"./useTransaction-CEDCgy0u.js";import{u as Be}from"./global-DOQtmW25.js";import{a as Ee,g as ft,d as Ie,f as zt}from"./usePositionList-CM9xw-J5.js";import{u as Re}from"./detail-eWJDG1lG.js";import{f as $e}from"./index-BtIu2PeQ.js";import{u as Mt}from"./useAccountBalance-CS3ca8rH.js";import{a as Vt,j as et,a0 as he,I as Et,B as tt,F as Nt,V as Wt,k as Zt,d as a,ap as le,n as Ut,y as _e,r as Gt,a1 as Ht,v as Je,q as Ke,a3 as Xt,p as we,a4 as Oe,i as $t}from"./index-C9eB4n05.js";import{a as it}from"./useNotifiSubscription-RLaicPMr.js";import{u as Jt}from"./usePosAdd-CeKzrXH0.js";import{M as Me}from"./msafe-oYBkW7LJ.js";import{v as Ye}from"./v4-C6aID195.js";import{T as Kt}from"./TradeInputGroup-BNI7CpwJ.js";import{A as Ot}from"./index-C7XyCE3V.js";import{u as Yt,R as Qe}from"./ExpendItem-68HQIxEs.js";function Qt(t,n){return{currentApiPoolInfo:p.useMemo(()=>{if(t!=null&&t.clmmPool)return n==null?void 0:n[t==null?void 0:t.clmmPool]},[t==null?void 0:t.clmmPool,n])}}const Dt="/assets/img_farming@2x-CwRUS-3E.png";function Pt(){Vt();const{currentPosBaseInfo:t,farmsPosRewardsData:n,posPoolsRelatedData:T,posBaseListLoading:e,posPoolsOriginalData:j}=Ee(),{currentPosPoolInfo:g}=Re(),{currentAccount:u}=et(),{getCurrentPosBaseInfo:v}=it(),{getFarmsRewardsData:w}=ft(),{getClmmPosName:N}=Ie(),H=p.useMemo(()=>{var l;if(t!=null&&t.tokenName)return t==null?void 0:t.tokenName;{const d=(l=j==null?void 0:j[t==null?void 0:t.clmmPool])==null?void 0:l.index;return N(t==null?void 0:t.index,d)||""}},[t==null?void 0:t.tokenName,t==null?void 0:t.index,t==null?void 0:t.clmmPool,j]),F=T[t==null?void 0:t.posId],J=(F==null?void 0:F.currentStatus)=="Active",h=n[t==null?void 0:t.id],W=(g==null?void 0:g.farmsRewarderList)||[],Y=h==null?void 0:h.reduce((l,d)=>l+d.display_amount_owed,0),{toStakePos:_,toUnStakePos:f,toClaimPos:Q,unstakeLoading:m,claimLoading:c}=Yt(),r=De(),S=l=>{r(`/position-detail/${l[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{v(u==null?void 0:u.address,l[0].parsedJson.wrapped_position_id,!0)},2e3)},k=async()=>{_(t==null?void 0:t.id,g==null?void 0:g.farmsPoolAddress,H,S)},X=()=>{r(`/position-detail/${t==null?void 0:t.posId}`,{replace:!0}),setTimeout(()=>{v(u==null?void 0:u.address,t==null?void 0:t.posId,!0)},2e3)},Z=async()=>{f(t==null?void 0:t.id,t==null?void 0:t.farmsPool,H,X)},ge=()=>{setTimeout(()=>{w([t])},2e3)},re=async()=>{Q(t==null?void 0:t.id,t==null?void 0:t.farmsPool,ge)},I=p.useMemo(()=>(h==null?void 0:h.length)>0?h.reduce((l,d)=>he(l).plus(d==null?void 0:d.display_amount_owed).toString(),"0"):"0",[h,u==null?void 0:u.address,c,m]);return i.jsx(i.Fragment,{children:((g==null?void 0:g.farmsPoolAddress)||he(I).gt(0))&&i.jsxs(Ve,{w:"100%",children:[i.jsxs(ae,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Dt,bgSize:"100% 100%",justify:"space-between",children:[i.jsxs(Ve,{align:"flex-start",children:[i.jsxs(ae,{children:[i.jsx(ht,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),i.jsx(O,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),i.jsx(O,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),i.jsxs(ae,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[i.jsx(O,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),i.jsx(O,{color:"primary",fontSize:"12px",fontWeight:"500",children:i.jsx(Ot,{poolInfo:g,isPosition:!0,showAprSize:"12px"})}),i.jsxs(ae,{gap:"4px",cursor:"pointer",onClick:()=>r("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[i.jsx(O,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),i.jsx(Et,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),i.jsxs(tt,{mt:"-20px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:"0 0 12px 12px",borderTop:"none",children:[i.jsx(O,{children:"Farming Rewards"}),i.jsx(ae,{w:"100%",flexWrap:"wrap",children:(h==null?void 0:h.length)>0&&he(I).gt(0)?h==null?void 0:h.map(l=>{var d;return i.jsx(bt.Fragment,{children:he(l==null?void 0:l.display_amount_owed).gt(0)&&i.jsx(Qe,{coinType:(d=l==null?void 0:l.token)==null?void 0:d.coin_type,amount:l==null?void 0:l.display_amount_owed,tokenInfo:l==null?void 0:l.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)},l==null?void 0:l.rewarder_type)}):(W==null?void 0:W.length)>0?W==null?void 0:W.map(l=>i.jsx(Qe,{coinType:l==null?void 0:l.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)):i.jsx(O,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),i.jsxs(ae,{w:"100%",justify:"space-between",mt:"16px",children:[(t==null?void 0:t.posType)=="farms"&&i.jsx(be,{disabled:c||m,isLoading:m,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:Z,children:"Unstake"}),(t==null?void 0:t.posType)=="clmm"&&!J&&i.jsx(ve,{w:"50%",sx:{">button":{w:"100%"}},children:i.jsx(Nt,{placement:"top",tooltip:i.jsx(O,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:i.jsx(ve,{w:"100%",children:i.jsx(be,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),(t==null?void 0:t.posType)=="clmm"&&J&&i.jsx(be,{disabled:c||m,isLoading:m,h:"40px",w:"50%",fontSize:"14px",onClick:k,children:"Stake"}),i.jsx(be,{disabled:c||m||he(Y).eq(0),isLoading:c,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:re,children:"Claim rewards"})]})]})]})})}function Bt({action:t,haveZap:n,resetInputAmount:T}){const{useZapIn:e,setUseZapIn:j}=Re(),{setZapAmount:g,setPreDepositeData:u}=Pe(),v=()=>{T==null||T(),j(!e),g("")};return p.useEffect(()=>{j(!1),u(void 0)},[t]),i.jsxs(ae,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[i.jsx(O,{color:"primary_gray",fontSize:"14px",children:t==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),i.jsx(_t,{action:t,value:e,onChange:v})]})}function It(){const{clmmSdk:t}=Wt(),{peripherySdk:n}=Zt(),{slippage:T}=Be();return{getRemoveTsPayload:async g=>{const{posId:u,poolAddress:v,coinTypeA:w,coinTypeB:N,amountA:H,amountB:F,liquidity:J,lowerTick:h,upperTick:W,posType:Y,rewarderCoinTypes:_,farmsPoolId:f,farmsPosId:Q}=g,m=a(H).mul(a(1).sub(a(T))),c=a(F.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",m,c),Y==="clmm"){const r={coinTypeA:w,coinTypeB:N,pool_id:v,pos_id:u,delta_liquidity:J,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_fee:!0,rewarder_coin_types:_};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",r);const S=await t.Position.removeLiquidityTransactionPayload(r),k={action:Me.DecreaseLiquidity,txbParams:r};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",S,k),{tx:S,msafeParams:k}}else{const r={pool_id:f||"",coinTypeA:w,coinTypeB:N,position_nft_id:Q||"",clmm_pool_id:v,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:_,delta_liquidity:J,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",r);const S=await n.Farms.removeLiquidityPayload(r),k={action:"FarmingDecreaseLiquidity",txbParams:r};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",k,S),{tx:S,msafeParams:k}}},getCloseTsPayload:async g=>{const{posId:u,poolAddress:v,coinTypeA:w,coinTypeB:N,amountA:H,amountB:F,liquidity:J,lowerTick:h,upperTick:W,posType:Y,rewarderCoinTypes:_,farmsPoolId:f,farmsPosId:Q}=g,m=a(H).mul(a(1).sub(a(T))),c=a(F.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",g,m.toString(),c.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",_),Y==="clmm"){const r={coinTypeA:w,coinTypeB:N,pool_id:v,pos_id:u||"",min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",rewarder_coin_types:_,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",r);const S=await t.Position.closePositionTransactionPayload(r),k={action:Me.RemoveLiquidity,txbParams:r};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",S,k),{tx:S,msafeParams:k}}else{const r={pool_id:f||"",coinTypeA:w,coinTypeB:N,position_nft_id:Q||"",clmm_pool_id:v,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:_,delta_liquidity:J,unstake:!0,close_position:!0,clmm_position_id:u};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",r);const S=await n.Farms.removeLiquidityPayload(r),k={action:Me.FarmingRemoveLiquidity,txbParams:r};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",k,S),{tx:S,msafeParams:k}}}}}function ei(){const{transactionConfirmation:t}=qt(),{getTokenAmountValue:n}=Ut(),{getCoinAmountFromLiquidity:T}=zt(),{currentPosBaseInfo:e,posLiquidityData:j,posRewardsData:g,setPosBaseList:u,posApiPoolData:v}=Ee(),{getCurrentPosBaseInfo:w}=it(),{preAdd:N}=Jt(),{getRemoveTsPayload:H,getCloseTsPayload:F}=It(),{getTokenALock:J,getTokenBLock:h}=Ie(),{setTokenAmountAfterA:W,setTokenAmountAfterB:Y,currentPosPoolInfo:_,currentPoolSqrtPrice:f,setIsFixedDisplayTokenA:Q,slideValue:m,setSlideValue:c,isFixedDisplayTokenA:r,isPosDetailRefresh:S,currentPosDetailTab:k,useZapIn:X,curPosContractPoolInfo:Z}=Re(),{getZapWithdrawToastInfo:ge,getZapWithdrawTx:re,reCalculateZapData:I}=vt("Withdraw"),{getContractPoolInfo:l}=Rt(),{preDepositeData:d,currentZapToken:ee,setZapAmount:K,zapAmount:de}=Pe(),{currentApiPoolInfo:A}=Qt(e,v),ie=g[e==null?void 0:e.posId],{mevProtect:ot,maxCapForGas:lt,transactionMode:at,customGasPrice:st}=Be(),[R,U]=p.useState(""),[C,G]=p.useState(""),[nt,pe]=p.useState(!1),[Ce,je]=p.useState(""),D=e==null?void 0:e.displayTokenA,P=e==null?void 0:e.displayTokenB,z=j[e==null?void 0:e.posId],M=_e(z==null?void 0:z.displayCoinAmountA,void 0,!0),V=_e(z==null?void 0:z.displayCoinAmountB,void 0,!0),dt=n(D==null?void 0:D.coin_type,R),pt=n(P==null?void 0:P.coin_type,C);p.useEffect(()=>{if(+R||+C){const o=+R,s=+C,x=a(+M).sub(o),b=a(V).sub(s);console.log("ðŸš€ ~ useEffect ~ numA.gt(0):",x.toString(),b.toString()),W(x.gt(0)?x.toString():"0"),Y(b.gt(0)?b.toString():"0")}else W(""),Y("")},[R,C]);const[Le,ue]=p.useState(""),Ne=p.useRef("");p.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",Le),Ne.current=Le},[Le]);const xe=()=>{U(""),G(""),pe(!1),ue(""),c("--")},We=p.useMemo(()=>J(e,Z),[Z==null?void 0:Z.current_tick_index,e]),Ze=p.useMemo(()=>h(e,Z),[Z==null?void 0:Z.current_tick_index,e]),Se=e!=null&&e.isReverse?Ze:We,ke=e!=null&&e.isReverse?We:Ze;p.useEffect(()=>{xe()},[Se,ke]);const Ue=Gt((o,s,x)=>{var ye,ne;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",o);const b=s?(ye=e==null?void 0:e.displayTokenA)==null?void 0:ye.decimals:(ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.decimals,L=Ht(o,b),y=e==null?void 0:e.tokenA,q=e==null?void 0:e.tokenB,B=e==null?void 0:e.lowerTick,me=e==null?void 0:e.upperTick,E=e==null?void 0:e.isReverse,$={amount:L,tokenA:y,tokenB:q,isTokenA:E?!s:s,lowerTick:B,upperTick:me,curSqrtPrice:f,isReverse:E,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",$);const{displayCoinAmountA:oe,displayCoinAmountB:Ae,liquidityAmount:se}=N($);if(console.log("ðŸš€ ~ debouncedPreCalculate:",oe,Ae,$,s,x),Ne.current===x){je(se),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",Ce,se);const Te=Je(a(se).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);a(Te).gt(100)||a(Te).eq(100)?(c(100),U(M),G(V)):(c(Te),s?G(Ae||""):U(oe||""))}else xe();pe(!1)},500),[Ge,He]=p.useState(!1),qe=()=>{if((R||C)&&Xt(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",Ge,m),m==="--")return;if(Ge||Number(m)==100)Xe(Number(m));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const o=r?R:C;if(+o){const s=Ye();ue(s),Ue(o,r,s)}}}};p.useEffect(()=>{k=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",S,M,V),qe())},[M,V]);const mt=(o,s)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",o),He(!1),je(""),!o){xe();return}if(pe(!0),Q(s),s){if(U(o),a(o).eq(M)){G(V),c(100),ue(""),pe(!1);return}}else if(G(o),a(o).eq(V)){U(M),c(100),ue(""),pe(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",o,+o),+o){const x=Ye();ue(x),console.log("ðŸš€ ~ handleAmountChange ~ params:",o),Ue(o,s,x)}else pe(!1),s?G(""):U("")},Xe=o=>{var s;if(He(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",M,V,o),X){const b=((s=A==null?void 0:A.tokenA)==null?void 0:s.coin_type)===(ee==null?void 0:ee.coin_type)?fe:ze;if(o===100)K(b);else{const L=a(b).mul(a(o).div(100)).toString();K(L)}}else if(o==100)U(M),G(V);else{const x=e==null?void 0:e.tokenA,b=e==null?void 0:e.tokenB,L=_e(a(e==null?void 0:e.liquidity).mul(o).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,L);const y=e==null?void 0:e.lowerTick,q=e==null?void 0:e.upperTick,B=e==null?void 0:e.isReverse,me={tokenA:x,tokenB:b,liquidity:L,currentSqrtPrice:f,lowerTick:y,upperTick:q,roundUp:!1};try{const{amountA:E,amountB:ce}=T(me);je(L);const $=B?ce:E,oe=B?E:ce;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",E,ce),U(a($).gt(0)?$:""),G(a(oe).gt(0)?oe:"")}catch(E){console.log("ðŸš€ ~ changeSlideFun ~ error:",E),U(""),G("")}}},{currentAccount:te}=et(),ct=p.useMemo(()=>{const o={text:"Remove",disabled:!1};return te!=null&&te.address?!+R&&!+C?(o.text="Enter an amount",o.disabled=!0,o):!Se&&R&&a(R).gt(M||0)||!ke&&C&&a(C).gt(V||0)?(o.disabled=!0,o.text="Invalid Amount",o):((e==null?void 0:e.posType)=="burn"&&(o.disabled=!0),o):(o.text="Connect Wallet",o.disabled=!1,o)},[R,C,M,V,te==null?void 0:te.address]),{signAndExecuteTransaction:gt}=Ft(),{fetchAccountBalance:rt}=Mt(),[ut,Fe]=p.useState(!1),xt=De(),yt=async()=>{var x,b,L;Fe(!0);const o=m==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",ie),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",_==null?void 0:_.miningRewardList);const s=o?!ie||(ie==null?void 0:ie.length)==0?(x=(_==null?void 0:_.miningRewardList)||[])==null?void 0:x.reduce((y,q)=>(y.push(q.coinType),y),[]):(b=ie||[])==null?void 0:b.reduce((y,q)=>(y.push(q.coin_address),y),[]):(L=ie||[])==null?void 0:L.reduce((y,q)=>(a(q==null?void 0:q.amount_owed).gt(0)&&y.push(q.coin_address),y),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",s);try{let y,q,B;if(X){const E=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;B=ge(Se,ke),t(B),y=await re(E,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,s,(e==null?void 0:e.posType)=="farms")}else{const E=e!=null&&e.isReverse?a(C).mul(we.pow(10,P.decimals)).toString():a(R).mul(we.pow(10,D.decimals)).toString(),ce=e!=null&&e.isReverse?a(R).mul(we.pow(10,D.decimals)).toString():a(C).mul(we.pow(10,P.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",_,ie,s);const $={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:E,amountB:ce,liquidity:Ce,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:s};(e==null?void 0:e.posType)=="farms"&&($.farmsPoolId=e==null?void 0:e.farmsPool,$.farmsPosId=e==null?void 0:e.id),B={getShowInfo:(Ae,se)=>{const ye="Remove "+[$e(R,D==null?void 0:D.symbol),$e(C,P==null?void 0:P.symbol)].filter(Boolean).join(" and "),ne={modalDescriptionText:ye,toastTitleText:ye};if(Ae==="success"){let Te=R,Tt=C;se&&(Te=Oe(se,D)||R,Tt=Oe(se,P)||C),ne.toastDescriptionContent="",ne.modalDescriptionText="",ne.toastTitleText="Remove Liquidity Successful"}return ne}},t(B),console.log("ðŸš€ ~ toAdd ~ params:",Ce,o,m,$);const oe=o?await F($):await H($);y=oe.tx,q=oe.msafeParams}const me=await gt(y,B,{useMev:ot,useFastMode:at==="Fast Mode",maxCapForGas:lt,customGasPrice:st,msafeParams:q});console.log("ðŸš€ ~ toClaim ~ res:",me),me?(rt(),xe(),K(""),o?(u([]),xt("/pools?tab=positions")):w(te==null?void 0:te.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&l(e==null?void 0:e.clmmPool).then(E=>{console.log("ðŸš€ ~ toClaim ~ res:",E),X?I():qe()}),Fe(!1)}catch(y){qe(),Fe(!1),console.log("ðŸš€ ~ toClaim ~ error:",y)}};p.useMemo(()=>{if(e!=null&&e.posId){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,x=e==null?void 0:e.liquidity,b=e==null?void 0:e.lowerTick,L=e==null?void 0:e.upperTick;T({tokenA:o,tokenB:s,liquidity:x,currentSqrtPrice:f,lowerTick:b,upperTick:L,roundUp:!1})}},[e==null?void 0:e.posId,f]);const{onlyAmountA:fe,onlyAmountB:ze}=p.useMemo(()=>({onlyAmountA:z==null?void 0:z.onlyAmountA,onlyAmountB:z==null?void 0:z.onlyAmountB}),[z]);return p.useEffect(()=>{var o;if(X)if(de){const x=((o=A==null?void 0:A.tokenA)==null?void 0:o.coin_type)===(ee==null?void 0:ee.coin_type)?fe:ze;if(x){const b=Je(a(de).div(x).mul(100).toString(),2,!0);c(b)}else c("--")}else c("--");else c("--")},[X,de]),p.useEffect(()=>{if(k!=="increase"&&X){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",d),d!=null&&d.amount_a||d!=null&&d.amount_b){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,x=Ke(d==null?void 0:d.amount_a,o==null?void 0:o.decimals),b=Ke(d==null?void 0:d.amount_b,s==null?void 0:s.decimals);if(m==100)U(String(M)),G(String(V));else{const L=e!=null&&e.isReverse?b:x,y=e!=null&&e.isReverse?x:b;U(a(L).gt(M)?String(M):L),G(a(y).gt(V)?String(V):y)}return}U(""),G("")}},[X,d,m]),p.useEffect(()=>{U(""),G("")},[]),{tokenAmountA:R,tokenAmountB:C,resetInputAmount:xe,showDisplayTokenALock:Se,showDisplayTokenBLock:ke,currentPosLiquidityData:z,tokenABalance:M,tokenBBalance:V,displayTokenA:D,displayTokenB:P,tokenAmountValueA:dt,tokenAmountValueB:pt,preRemoveLoading:nt,handleAmountChange:mt,btnStatusText:ct,changeSlideFun:Xe,toRemove:yt,isRemoveLoading:ut,onlyAmountA:fe,onlyAmountB:ze,currentApiPoolInfo:A,currentPoolSqrtPrice:f}}function bi(){var de;const{currentPosBaseInfo:t,posPoolsRelatedData:n,posApiPoolData:T}=Ee(),{isFixedDisplayTokenA:e,slideValue:j,setSlideValue:g,curPosContractPoolInfo:u,useZapIn:v,currentPosPoolInfo:w}=Re(),{tokenAmountA:N,tokenAmountB:H,tokenABalance:F,tokenBBalance:J,displayTokenA:h,displayTokenB:W,tokenAmountValueA:Y,tokenAmountValueB:_,preRemoveLoading:f,handleAmountChange:Q,changeSlideFun:m,btnStatusText:c,toRemove:r,isRemoveLoading:S,showDisplayTokenALock:k,showDisplayTokenBLock:X,resetInputAmount:Z,onlyAmountA:ge,onlyAmountB:re,currentApiPoolInfo:I,currentPoolSqrtPrice:l,currentPosLiquidityData:d}=ei();p.useEffect(()=>()=>{Z()},[]);const ee=A=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",A),A=="MAX"||A==100?(g(100),m(100)):(g(Number((A+"").split("%")[0])),m(Number((A+"").split("%")[0])))};p.useEffect(()=>g("--"),[]);const K=n[t==null?void 0:t.posId];return i.jsxs(Ve,{w:"100%",gap:"8px",children:[i.jsxs(ve,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(I==null?void 0:I.haveZap)&&(t==null?void 0:t.posType)!=="burn"&&!k&&!X&&i.jsx(Bt,{action:"Withdraw",resetInputAmount:Z}),v?i.jsx(Ct,{action:"Withdraw",apiPoolInfo:I,currentSqrtPrice:l,onlyAmountA:ge,onlyAmountB:re,liquidity:t==null?void 0:t.liquidity,lowerTick:t==null?void 0:t.lowerTick,upperTick:t==null?void 0:t.upperTick,slideValue:String(j),currentPosLiquidityData:d,changeSlideValue:ee}):i.jsx(i.Fragment,{children:i.jsx(Kt,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:F||"",value:N,amountValue:Y,loading:!e&&f,onChange:A=>{Q(A,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:h,half:!1,lock:{isLock:t&&u&&k,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:J||"",value:H,amountValue:_,loading:e&&f,onChange:A=>{Q(A,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:W,half:!1,lock:{isLock:t&&u&&X,style:{borderRadius:"12px"}}},lock:{isLock:!t||!u||t&&(t==null?void 0:t.posType)=="burn",text:t&&(t==null?void 0:t.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(t==null?void 0:t.posType)!=="burn"&&i.jsxs(tt,{borderRadius:"12px",p:"16px",mt:"8px",children:[i.jsx(O,{color:"primary_gray",children:"Amount"}),i.jsx(ii,{percentage:j,onChange:A=>ee(A)})]})]}),v?i.jsx(jt,{action:"Withdraw",onClick:r,hideDepositRatio:!0,otherLoading:S,isReverse:t==null?void 0:t.isReverse}):i.jsx(be,{isLoading:S,onClick:r,disabled:c.disabled||S,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:c.text}),(t==null?void 0:t.posType)!=="burn"&&(w==null?void 0:w.farmsRewarderList)&&((de=w==null?void 0:w.farmsRewarderList)==null?void 0:de.length)>0&&i.jsx(Pt,{}),K&&(K==null?void 0:K.minPrice)!=="0"&&(K==null?void 0:K.maxPrice)!=="âˆž"&&i.jsx(Lt,{subscriptionSource:"PositionDetail"})]})}function ti(t){const{percentage:n,onChange:T,wrapStyle:e,textFontSize:j,selectTabStyle:g,selectTabItemStyle:u,selectTabItemTextStyle:v,isShowPercentageText:w=!0}=t,N=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}],H=p.useMemo(()=>n!==100?`${n}%`:"MAX",[n]);return i.jsxs(ae,{w:"100%",...e,children:[w&&i.jsxs(O,{fontSize:j,color:"text_caption",children:[n=="--"?"--":a(n).gt(0)&&Number(n)<.01?"<0.01":_e(n,2),"%"]}),i.jsx($t,{type:"outlineTab",tabList:N,currentTab:H,handleChangeTab:F=>{F.label==="MAX"?T(100):T(F.label.replace("%",""))},wrapStyle:g,itemStyle:u,selectTabItemTextStyle:v})]})}function ii(t){const{percentage:n,onChange:T}=t;return i.jsxs(ve,{w:"100%",children:[i.jsx(ti,{percentage:n,onChange:T,wrapStyle:{justifyContent:"space-between",m:"10px 0"},selectTabStyle:{w:{base:"220px",lg:"310px"},h:"32px",p:"3px",borderRadius:"8px"},selectTabItemStyle:{flex:"1",fontSize:"14px",margin:"0px"},textFontSize:"24px"}),i.jsxs(St,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:n=="--"?0:Number(n),onChange:e=>T(e+"%"),children:[i.jsx(kt,{children:i.jsx(At,{})}),i.jsx(wt,{})]})]})}export{Pt as F,ii as P,bi as R,Bt as T,Qt as u};
//# sourceMappingURL=RemoveBlock-C37_NpQp.js.map
