import{a0 as le,r as a,d as U,X as re,aA as ie,j as l,B as ne,Z as de,V as j,T as k,aC as me}from"./index-hlspwJoj.js";import{c as ue,v as B,j as ce,h as he,i as xe}from"./VaultsAprBlock-D1KqMqOJ.js";import{H as D}from"./HTextLabelBox-D71tVS5z.js";import{u as fe}from"./useAccountBalance-B2-ScmX9.js";import{T as be}from"./TradeInputGroup-BI4sllHf.js";import"./swapWidget-joD3e0iD.js";import"./api-data-utils-BYT3J20O.js";import"./useFavoritePool-DWfTfvtO.js";import"./useGetPoolList-4CwYZBg3.js";import"./useToken-DqvkEjGB.js";import"./useTokenBalance-hDBhZl2G.js";import"./useTransaction-Bdgye9e1.js";import"./global-D9vHqz1e.js";import"./msafe-oYBkW7LJ.js";import"./index-UNT2jrcH.js";import"./useFindBestRouting-1Jlwf1qv.js";import"./_getAllKeysIn-CR1AVSE9.js";function Ge(T){const{isUnstableVault:p,displayTokenA:r,displayTokenB:i,vaultId:n,isReverse:o,assetAction:h,isCheckedZAP:v,currentActionTab:ge,apiVaultInfo:e}=T,N=B.useVaultsRemove(p),X=B.useAddButtonStatus(p),q=B.useGetContractVaultInfo(p),{getApiVaultInfo:J}=ue(n),{currentAccount:s,isOpenWalletModal:pe,onWalletModal:K}=le(),{fetchAccountBalance:Q}=fe(),{contractVault:d,lpTokenInfo:t,balanceInfo:C,fetchClmmPoolFromContract:y,fetchVaultInfoFromContract:E,holdCoinAmounts:M,fromTokenLock:Y,toTokenLock:V,fetchVaultBalance:S,isBalanceLoading:R}=q(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse),W=()=>{var m;Q(),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:57 ~ autoRefresh ~ apiVaultInfo:",e),(e==null?void 0:e.category)=="haedal"&&S(s==null?void 0:s.address,n,(m=e==null?void 0:e.tokenA)==null?void 0:m.decimals),e&&y(e.clmmPoolAddress,!0),n&&(E(n,!0),J(n,!0)),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:68 ~ autoRefresh ~ autoRefresh:",W)};console.log("ðŸš€ðŸš€ðŸš€ ~ WithdrawMode.tsx:69 ~ VaultWithdrawMode ~ holdCoinAmounts:",M);const{contractClmmPoolObj:A}=ce();a.useMemo(()=>{if(A&&A[e==null?void 0:e.clmmPoolAddress])return A[e==null?void 0:e.clmmPoolAddress]},[e==null?void 0:e.clmmPoolAddress,A]);const{amountInputA:F,amountInputB:z,availableAmountA:x,availableAmountB:f,amountValueA:I,amountValueB:ee,preCalculateLoading:u,fixAmountA:b,inputTotalValue:g,handleAmountInputChange:H,calculateResult:c,showOnlySideTips:G,doRemoveAction:te,removePercent:ve,isPercentInput:w,reCalculateResult:O,calculateAvailableLoading:Z}=N(h,W,M,d==null?void 0:d.lp_token_treasury,C==null?void 0:C.balance,n,o?i:r,o?r:i,o,Y,V,v,A),L=a.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",g),g&&v?U(g).gt(0)&&U(g).lt(1e-4):!1),[v,g]),{btnText:se,btnDisabled:oe}=X(v,h,!1,F,z,o?!b:b,x,f,r,i,p,"",c,L);he(c==null?void 0:c.burn_ft_amount,p?d==null?void 0:d.lp_token_treasury:d==null?void 0:d.total_supply);const{amountLimit:$}=xe(0,c==null?void 0:c.burn_ft_amount,!1);a.useMemo(()=>o?f:x,[f,x,o]),a.useMemo(()=>o?x:f,[x,f,o]),a.useMemo(()=>u?w?!0:o?b:!b:!1,[u,w]),a.useMemo(()=>u?w?!0:o?!b:b:!1,[u,w]),a.useEffect(()=>{O()},[e==null?void 0:e.vaultsId]),a.useEffect(()=>{e&&(e!=null&&e.clmmPoolAddress)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:170 ~ useEffect ~ apiVaultInfo:",e),y(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),a.useEffect(()=>{n&&E(n)},[n]),a.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ lpTokenInfo:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ apiVaultInfo:",e),s!=null&&s.address&&(e!=null&&e.vaultsId)&&(t!=null&&t.decimals)&&(e!=null&&e.isUnstableVault)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:189 ~ useEffect ~ fetchVaultBalance:",S),S(s==null?void 0:s.address,e.vaultsId,t==null?void 0:t.decimals))},[s==null?void 0:s.address,e==null?void 0:e.vaultsId,t==null?void 0:t.decimals]),a.useEffect(()=>{O()},[x,f]);const ae=a.useMemo(()=>re(ie($||"0",t==null?void 0:t.decimals),t==null?void 0:t.decimals),[$,t]);return l.jsxs(l.Fragment,{children:[l.jsx(ne,{w:"100%",position:"relative",children:l.jsx(be,{onClick:()=>{},from:{wrapStyle:{h:"108px"},balance:x||"",value:F,amountValue:I,loading:!1,calculateAvailableLoading:R||Z,hideSelf:h!=="both"&&h!==(r==null?void 0:r.coin_type),onChange:(m,_,P)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:194 ~ VaultWithdrawMode ~ value:",m),H(m,!o,_,P)},selectable:!1,placeholder:"0.0",token:r,balanceLabel:"Available",onFocusChange:m=>{}},to:{wrapStyle:{h:"108px"},balance:f||"",value:z,amountValue:ee,loading:!1,calculateAvailableLoading:R||Z,onFocusChange:m=>{},onChange:(m,_,P)=>{H(m,o,_,P)},selectable:!1,hideSelf:h!=="both"&&h!==(i==null?void 0:i.coin_type),placeholder:"0.0",token:i,balanceLabel:"Available"},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})}),l.jsx(de,{width:"100%",height:"52px",borderRadius:"12px",marginBottom:"8px",fontWeight:"500",isLoading:u,disabled:oe||u,onClick:()=>s!=null&&s.address?te():K(!0),children:se||(v?"Zap Out":"Withdraw")}),L&&l.jsx(j,{w:"100%",alignItems:"start",mb:"8px",children:l.jsx(k,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(c||G)&&!L&&l.jsxs(j,{w:"100%",gap:"20px",pb:"20px",children:[h!=="both"&&l.jsx(k,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",children:G}),l.jsxs(j,{w:"100%",gap:"20px",children:[l.jsx(D,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:me(g,2),valueStyle:{fontSize:"14px"},isLoading:u}),l.jsx(D,{label:"LP Burn Amount",value:`${ae} ${`${r==null?void 0:r.symbol} - ${i==null?void 0:i.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:u})]})]})]})}export{Ge as default};
