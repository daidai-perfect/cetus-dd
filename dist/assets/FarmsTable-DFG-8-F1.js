import{j as e,V as R,H as V,T as A,X as U,a0 as B,a3 as H,a2 as O,r as p,d as E,S as M,aC as L,Z as N,ar as X,I as Z,b as G,B as J,a9 as C,a as Y,aR as w,b8 as q,U as K,C as Q,aB as D}from"./index-hlspwJoj.js";import{N as W}from"./NoData-DFE5asdg.js";import{a as z,b as f}from"./usePositionList-4IcszlUa.js";import{A as I}from"./index-B44iFB7_.js";import{u as ss,E as es}from"./ExpendItem-BIY9Rqnb.js";import{S as ts}from"./SingleTokenInfo-Cui52rXo.js";import{u as rs}from"./useToken-DqvkEjGB.js";import{C as ls}from"./CoinPairInfo-DiHRueQp.js";import{R as os}from"./RangeValue-B20MC24z.js";import{a as T,b as m,c as ds,d as ns,e as P,T as xs}from"./tr-DejpTztH.js";function is({apiInfo:s}){var l,x;const{getTokenInfo:r}=rs(),o=t=>{if(t)try{return r(t)}catch(d){console.error("Error fetching token info:",d)}};return e.jsx(R,{align:"flex-end",children:s!=null&&s.farmsRewarderList&&((l=s==null?void 0:s.farmsRewarderList)==null?void 0:l.length)>0?(x=s==null?void 0:s.farmsRewarderList)==null?void 0:x.map(t=>{var d;return e.jsxs(V,{children:[e.jsx(ts,{token:o(t==null?void 0:t.coinType),imgBoxStyle:{w:"20px",h:"20px"},warningIcon:{iconW:"10px",iconH:"10px"},haveName:!1,haveSymbol:!1}),e.jsxs(A,{color:"text_caption",fontWeight:"500",children:[U(t==null?void 0:t.emissionsEveryDay)," ",(d=o(t==null?void 0:t.coinType))==null?void 0:d.symbol]})]},t==null?void 0:t.coinType)}):e.jsx(A,{color:"text_caption",children:"--"})})}function cs({apiInfo:s}){var S;const{currentAccount:r}=B(),{getTokenAmountValue:o}=H(),{coinPriceObj:l}=O();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{posLiquidityData:x,posBaseListLoading:t,posBaseListGroupByPool:d}=z(),j=p.useMemo(()=>{var g,i;if(!(r!=null&&r.address)||!(s!=null&&s.poolAddress))return"--";if(!t)return(((i=(g=d[s.poolAddress])==null?void 0:g.list)==null?void 0:i.filter(n=>(n==null?void 0:n.posType)=="farms"))||[]).reduce((n,c)=>{var y,F;const h=x[c==null?void 0:c.posId],_=o((y=s==null?void 0:s.displayTokenA)==null?void 0:y.coin_type,h==null?void 0:h.displayCoinAmountA,"--"),v=o((F=s==null?void 0:s.displayTokenB)==null?void 0:F.coin_type,h==null?void 0:h.displayCoinAmountB,"--");return n=="--"||_=="--"||v=="--"?"--":E(n).plus(_).plus(v).toString()},"0")},[t,(S=Object.values(x))==null?void 0:S.length,l,r==null?void 0:r.address]),[a,b]=p.useState(""),u=p.useMemo(()=>{var i,k;const g=((k=(i=d==null?void 0:d[s==null?void 0:s.poolAddress])==null?void 0:i.list)==null?void 0:k.filter(n=>n.posType!=="burn").sort((n,c)=>Number(c.liquidity)-Number(n.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",g),g},[s==null?void 0:s.poolAddress,d]);return p.useEffect(()=>{const g=u==null?void 0:u.filter(i=>i.posType=="farms");b(g==null?void 0:g.length.toString())},[u]),e.jsx(e.Fragment,{children:r!=null&&r.address?e.jsxs(R,{align:"flex-end",children:[e.jsx(M,{isLoaded:!!j,children:e.jsx(A,{textColor:"text_caption",fontWeight:"500",textAlign:"right",lineHeight:"1",children:L(j,2)})}),Number(a)>0&&e.jsx(M,{isLoaded:!!j,children:e.jsxs(A,{fontWeight:"500",bg:"position_farms_bg",color:"position_farms_color",fontSize:"12px",borderRadius:"8px",padding:"2px 10px",lineHeight:"1",children:[a," ",Number(a)>1?"Positions":"Position"]})})]}):e.jsx(A,{textColor:"text_caption",textAlign:"right",children:"--"})})}function $({apiInfo:s,disabled:r}){const{currentAccount:o}=B(),{posBaseListGroupByPool:l}=z(),{getPositionBaseList:x}=f(),{toClaimAllPos:t,claimLoading:d}=ss(),j=async()=>{await x(o==null?void 0:o.address)},a=()=>{var b;t((b=l[s==null?void 0:s.poolAddress])==null?void 0:b.list,j)};return e.jsx(N,{onClick:b=>{X(b),a()},isLoading:d,disabled:r||d,w:{base:"64px",lg:"100px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",variant:"outline",fontSize:"14px",children:"Claim"})}function as({isOpen:s,apiInfo:r,disabled:o}){return e.jsxs(V,{justify:"flex-end",gap:"20px",children:[e.jsx($,{apiInfo:r,disabled:o}),e.jsx(N,{w:"32px",h:"90px",borderRadius:"8px",variant:"ghost",p:"0 !important",sx:{_hover:{svg:{fill:"text_caption"}}},children:e.jsx(Z,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:s?"rotate(180deg)":"rotate(0deg)"})})]})}function gs({apiInfo:s,disabled:r,totalEarned:o}){const{isApp:l}=G();return e.jsxs(V,{justify:"flex-end",children:[e.jsx(M,{isLoaded:!!o,children:e.jsx(A,{textColor:"primary_yellow",textAlign:"right",fontWeight:"500",children:L(o,2)})}),l&&e.jsx($,{apiInfo:s,disabled:r})]})}function hs({apiInfo:s}){const r=p.useMemo(()=>{if((s==null?void 0:s.displayFarmsEffectMaxPrice)!=="âˆž")return E(1).div(s==null?void 0:s.displayFarmsEffectMaxPrice).toString()},[s==null?void 0:s.displayFarmsEffectMaxPrice]),o=p.useMemo(()=>{if(E(s==null?void 0:s.displayFarmsEffectMinPrice).gt(0))return E(1).div(s==null?void 0:s.displayFarmsEffectMinPrice).toString()},[s==null?void 0:s.displayFarmsEffectMinPrice]);return e.jsxs(R,{align:"flex-start",gap:"8px",w:{base:"100%",lg:"unset"},children:[e.jsx(J,{m:"-12px 0",children:e.jsx(ls,{poolInfo:{...s,poolAddress:s==null?void 0:s.farmsPoolAddress},symbolFontSize:"15px"})}),e.jsx(V,{maxW:"100%",display:"inline-block",w:{base:"100%",lg:"unset"},borderRadius:"12px",bg:"position_status_bg",p:"7px 12px",children:e.jsxs(R,{align:"flex-start",gap:"0px",w:{base:"100%",lg:"unset"},children:[e.jsx(A,{fontSize:"12px",color:"primary_gray",children:"Valid Range"}),e.jsx(os,{symbolEllipsesDecimals:10,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,fontWeight:"500",priceInfo:{minPrice:C(s==null?void 0:s.displayFarmsEffectMinPrice).toString(),maxPrice:C(s==null?void 0:s.displayFarmsEffectMaxPrice).toString(),minPriceResever:C(r).toString(),maxPriceResever:C(o).toString()}})]})})]})}function ms({apiInfo:s}){Y();const{getTokenAmountValue:r}=H(),{coinPriceObj:o}=O();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{currentAccount:l,onWalletModal:x}=B(),[t,d]=p.useState({}),{farmsPosRewardsDataLoading:j,farmsPosRewardsData:a,posBaseListLoading:b,posBaseListGroupByPool:u}=z(),S=p.useMemo(()=>{var i;if(!(l!=null&&l.address)||!(s!=null&&s.poolAddress))return"--";if(!b&&!j)return(((i=u[s.poolAddress])==null?void 0:i.list)||[]).reduce((n,c)=>{const h=a[c==null?void 0:c.id]||[];console.log("ðŸš€ ~ returnposBaseList.reduce ~ posFarmsData:",n,h);const _=h.reduce((v,y)=>{if(v==="--")return"--";const F=r(y==null?void 0:y.token.coin_type,y==null?void 0:y.display_amount_owed,"--");return F==="--"?"--":w(v).plus(F).toString()},"0");return n==="--"||_==="--"?"--":w(n).plus(_).toString()},"0")},[b,a,j,o,l==null?void 0:l.address]),g=p.useMemo(()=>{var k,n;const i=((n=(k=u==null?void 0:u[s==null?void 0:s.poolAddress])==null?void 0:k.list)==null?void 0:n.filter(c=>c.posType!=="burn").sort((c,h)=>Number(h.liquidity)-Number(c.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",i),i},[s==null?void 0:s.poolAddress,u]);return e.jsxs(q.Fragment,{children:[e.jsxs(T,{cursor:"pointer",onClick:()=>{t[s==null?void 0:s.poolAddress]?t[s==null?void 0:s.poolAddress]=!1:t[s==null?void 0:s.poolAddress]=!0,d({...t})},sx:{td:{pb:t[s==null?void 0:s.poolAddress]?"20px !important":"16px !important"}},children:[e.jsx(m,{w:"30%",children:e.jsx(hs,{apiInfo:s})}),e.jsx(m,{textAlign:"right",children:e.jsx(A,{fontWeight:"500",textColor:"text_caption",textAlign:"right",children:s==null?void 0:s.farmsStatedTvlDisplay})}),e.jsx(m,{textAlign:"right",children:e.jsx(I,{poolInfo:s,isPosition:!0})}),e.jsx(m,{textAlign:"right",children:e.jsx(is,{apiInfo:s})}),e.jsx(m,{textAlign:"right",children:e.jsx(cs,{apiInfo:s})}),e.jsx(m,{textAlign:"right",children:e.jsx(gs,{totalEarned:S,apiInfo:s,disabled:S=="--"?!0:w(S).lte(0)})}),e.jsx(m,{textAlign:"right",children:e.jsx(as,{isOpen:t[s==null?void 0:s.poolAddress],apiInfo:s,disabled:S=="--"?!0:w(S).lte(0)})})]}),!t[s==null?void 0:s.poolAddress]&&e.jsx(T,{h:"16px"}),e.jsx(T,{position:"relative",top:"-20px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:t[s==null?void 0:s.poolAddress]&&e.jsx(m,{colSpan:7,children:e.jsx(us,{expendList:g,apiInfo:s})})})]},s==null?void 0:s.poolAddress)}const us=({expendList:s,apiInfo:r})=>{const o=Y(),{currentAccount:l,onWalletModal:x}=B();return e.jsxs(K,{overflow:"hidden",bg:{base:"bg_fifth",lg:"bg_secondary"},p:{base:"0px",lg:"16px"},borderTop:{lg:"none"},borderRadius:{base:"8px",lg:" 0 0 16px 16px "},children:[e.jsx(R,{overflow:"auto",h:l!=null&&l.address&&s&&(s==null?void 0:s.length)>2?"250px":"unset",children:l!=null&&l.address?(s==null?void 0:s.length)==0?e.jsx(W,{type:"nodata",text:"No Position Found",p:{base:"16px",lg:"20px"},border:{base:"none",lg:"1px solid"},borderColor:"border !important",borderRadius:{base:"8px",lg:"12px"},children:e.jsxs(R,{gap:"4px",mt:"-4px",children:[e.jsx(A,{fontSize:"12px",w:{base:"100%",lg:"380px"},lineHeight:{base:"16px",lg:"unset"},textAlign:"center",children:"Stake liquidity position to earn farming rewards. To get the position for this pool, you should provide liquidity to this pool first."}),e.jsx(N,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"36px",fontSize:"12px",onClick:()=>o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`),children:"Create a Position"})]})}):s==null?void 0:s.map((t,d)=>(console.log("ðŸš€ ~ expendList.map ~ item:",t),e.jsx(q.Fragment,{children:e.jsx(es,{positionInfo:t,apiInfo:r})},d))):e.jsx(W,{type:"nowallet",onboard:()=>{x(!0)}})}),(s==null?void 0:s.length)>0&&(l==null?void 0:l.address)&&e.jsx(Q,{pb:{base:"12px",lg:"0"},children:e.jsx(N,{mt:{base:"12px",lg:"16px"},fontSize:"14px",onClick:t=>{o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`)},h:"32px",p:"0 16px",borderRadius:"8px",variant:"outline",children:"+ Create a position"})})]})};function vs({dataList:s,showSkeletonLoading:r,currTabLabel:o}){console.log("ðŸš€ ~ FarmsTable ~ currTabLabel:",o);const{currentAccount:l,onWalletModal:x}=B();return e.jsxs(ds,{variant:"simple_list",w:"100%",children:[e.jsx(ns,{children:e.jsxs(T,{children:[e.jsx(P,{children:"Pools"}),e.jsx(P,{textAlign:"right",children:"Staked TVL"}),e.jsx(P,{textAlign:"right",children:"APR"}),e.jsx(P,{textAlign:"right",children:"Rewards / day"}),e.jsx(P,{textAlign:"right",children:"Your Staked"}),e.jsx(P,{textAlign:"right",children:"Your Earned"}),e.jsx(P,{textAlign:"right",children:"Actions"})]})}),e.jsx(xs,{children:o=="Your Farms"&&!(l!=null&&l.address)?e.jsx(T,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(m,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nowallet",onboard:()=>{x(!0)}})})}):r?e.jsx(js,{itemList:[1,2,3],skeletonNum:7,skeletonW:["200px","110px","100px","100px","100px","100px","100px"]}):s.length===0?e.jsx(T,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(m,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nodata",text:"No farms found"})})}):s.map(t=>e.jsx(ms,{apiInfo:t},t.poolAddress))})]})}function js({itemList:s,skeletonNum:r,skeletonW:o,rowStyle:l}){const x=(t,d)=>Array.from({length:t}).map((j,a)=>e.jsx(m,{textAlign:"right",children:e.jsx(D,{justify:a==0?"flex-start":"flex-end",children:e.jsx(M,{w:d?d[a]:"200px"})})},a));return s.map(t=>e.jsxs(q.Fragment,{children:[e.jsx(T,{h:"90px",...l,children:x(r,o)}),e.jsx(T,{h:"16px"})]},t))}export{us as F,is as R,cs as S,gs as T,hs as V,vs as a,js as b};
