import{K as O,j as t,P as X,Q,V as H,b1 as Z,b2 as q,B as R,C as L,ar as K,S as ee,aF as k,b3 as N,b4 as te,b5 as se,b6 as ne,b7 as re,b8 as oe,W as ce,r as U,b9 as v,u as ae,ba as ie}from"./index-CukE8cTn.js";import{P as Y}from"./Pagination-slMtdzdK.js";import{T as P,a as p,b as A,c as le,d as ue,e as fe}from"./tr-CHVUeJmD.js";import{H as xe,j as he,k as de}from"./api-data-utils-eX_2bT4B.js";import{a as me,g as Te}from"./_getAllKeysIn-PDQ8gqNP.js";import{X as _,Y as B,R as ye}from"./YAxis-BpYwJTxG.js";import{l as ve,B as F,n as De,T as be}from"./generateCategoricalChart-C1GzWPXj.js";const ge=O((e,c)=>{const{overflow:s,overflowX:o,className:n,...r}=e;return t.jsx(X.div,{ref:c,className:Q("chakra-table__container",n),...r,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:s??o??"auto",overflowY:"hidden",maxWidth:"100%"}})});function Ee({dataSource:e,columns:c,itemSkeletonLength:s,skeletonLength:o=3,rowKey:n,loading:r,pagination:a,rowStyle:l,wrapStyle:u,onRowClick:i,itemHeight:h}){var m;const d=new Array(o).fill(0);return t.jsxs(H,{w:"100%",...u||{},children:[(m=e&&(e!=null&&e.length)&&!r?e:d)==null?void 0:m.map((f,x)=>t.jsxs(H,{w:"100%",children:[t.jsx(Z,{data:q(c,f,x),loading:r,skeletonLength:s,onClick:()=>i==null?void 0:i(f,x),style:typeof l=="function"?l(f,x):l,itemHeight:h},r?x:typeof n=="function"?n(f):n?f[n]:x),t.jsx(R,{w:"100%",h:"1px",bg:"border",mt:"12px"})]},r?x:typeof n=="function"?n(f):n?f[n]:x)),a&&(a==null?void 0:a.total)>(a==null?void 0:a.size)&&t.jsx(L,{mt:"16px",children:t.jsx(Y,{...a})})]})}function je(e){const{rowStyle:c,minW:s,tableListLength:o,tdListLength:n,firstTd:r}=e,a=new Array(o).fill(0),l=new Array(n).fill(0);return t.jsx(P,{children:a==null?void 0:a.map((u,i)=>t.jsx(p,{sx:{td:{_last:{">div":{justifyContent:"flex-end"}}}},...typeof c=="function"?c(u,i):c,children:t.jsxs(t.Fragment,{children:[r&&t.jsx(A,{children:r}),l==null?void 0:l.map((h,d)=>t.jsx(A,{children:t.jsx(K,{w:"100%",justifyContent:!r&&d==0?"flex-start":"flex-end",children:t.jsx(ee,{})})},d))]})},u+`${i}`))})}function Me({dataSource:e,skeletonLength:c=3,columns:s,rowKey:o,loading:n,tdBorder:r,firstTdSkeleton:a,theadConfig:l,tbodyConfig:u,rowStyle:i={},onRowClick:h,pagination:d,...m}){return t.jsxs(t.Fragment,{children:[t.jsx(ge,{w:"100%",children:t.jsxs(le,{size:"sm",...m,children:[t.jsx(ue,{...l,children:t.jsx(p,{children:s.map(({title:f,key:x,thConfig:T})=>t.jsx(fe,{...T,children:typeof f=="function"?f():f},typeof x=="function"?x():x))})}),n?t.jsx(je,{tableListLength:c,tdListLength:s.length,firstTd:typeof a=="function"?a():a,rowStyle:i}):t.jsx(P,{...u,children:e==null?void 0:e.map((f,x)=>t.jsx(p,{borderBottom:r?"1px solid":"none",borderColor:r?"border":"transparent",onClick:()=>h&&h(f,x),...typeof i=="function"?i(f,x):i,children:s.map(({render:T,key:D,tdConfig:j})=>t.jsx(A,{...j,fontWeight:"500",children:typeof T=="function"?T(f,x):T||f[D]},D))},o?typeof o=="function"?o(f):f[`${o}`]:(f==null?void 0:f.key)||x))})]})}),d&&(d==null?void 0:d.total)>(d==null?void 0:d.size)&&t.jsx(L,{mt:"16px",children:t.jsx(Y,{...d})})]})}function Ce(e,c,s,o){if(!k(e))return e;c=N(c,e);for(var n=-1,r=c.length,a=r-1,l=e;l!=null&&++n<r;){var u=te(c[n]),i=s;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(n!=a){var h=l[u];i=void 0,i===void 0&&(i=k(h)?h:se(c[n+1])?[]:{})}me(l,u,i),l=l[u]}return e}function pe(e,c,s){for(var o=-1,n=c.length,r={};++o<n;){var a=c[o],l=ne(e,a);s(l,a)&&Ce(r,N(a,e),l)}return r}function Ae(e,c){if(e==null)return{};var s=re(Te(e),function(o){return[o]});return c=oe(c),pe(e,s,function(o,n){return c(o,n[0])})}var we=ve({chartName:"BarChart",GraphicalChild:F,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:_},{axisType:"yAxis",AxisComp:B}],formatAxisMap:De});const He=({x:e,y:c,payload:s})=>t.jsx("g",{transform:`translate(${e},${c})`,children:t.jsx("text",{x:0,y:0,dy:16,textAnchor:"middle",fill:"#909CA4",fontSize:12,fontFamily:"Inter",children:s.value})}),ke=({value:e})=>t.jsx(ce,{fontSize:"12px",display:e?"block":"none",p:"8px 12px",borderRadius:"12px",children:e});var y=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(y||{});function Ge(){const[e,c]=U.useState("");return{time:e,getCurrentTime:()=>{const n=v(Date.parse(new Date().toUTCString()),"YMD")||"",r=n.slice(5,7),a=y[Number(r)],l=n.slice(8,10),u=a,i=n.slice(0,4),h=u+" "+l+", "+i+" (UTC)";c(h)},getHoverTime:(n,r)=>{console.log("ðŸš€ ~ getHoverTime ~ timeDate:",Date.parse(n),n);const a=Date.parse(n),l=new Date(a);l.setDate(l.getDate()+7);const u=new Date(a);u.setDate(u.getDate()+31);const i=l.toUTCString(),h=u.toUTCString(),d=v(Date.parse(h),"YMD")||"",m=v(Date.parse(new Date().toUTCString()),"YMD")||"",f=Date.parse(i)>Date.parse(new Date().toUTCString())?v(Date.parse(new Date().toUTCString()),"YMD")||"":v(Date.parse(i),"YMD")||"",x=m.slice(5,7),T=y[Number(x)],D=m.slice(8,10),j=T,z=m.slice(0,4),C=n.slice(5,7),E=y[Number(C)],w=n.slice(8,10),b=E,M=n.slice(0,4),G=f.slice(5,7),W=y[Number(G)],I=f.slice(8,10),J=W,V=f.slice(0,4),S=Number(C)==12?y[1]:y[Number(C)+1],$=d.slice(0,4);let g;r=="D"?g=b+" "+w+", "+M+" (UTC)":r=="W"?g=w+" "+b+"-"+I+" "+J+" , "+V+" (UTC)":g=Date.parse(h)>=Date.parse(new Date().toUTCString())?b+" 01-"+j+" "+D+", "+z+" (UTC)":b+" 01-"+S+" 01, "+$+" (UTC)",c(g)}}}function We(){const{fetchByApi:e}=ae();return{getHistogramData:async s=>{const o={typ:s==null?void 0:s.type,date_type:(s==null?void 0:s.date_type)||"day",address:s==null?void 0:s.address};s!=null&&s.limit&&(o.limit=s==null?void 0:s.limit);const n=Ae(o,ie),r=await e(o!=null&&o.limit?he:xe,"GET",n);return console.log("ðŸš€ ~ file: useGetHistogramData.ts:18 ~ getHistogramData ~ res:",r),((r==null?void 0:r.list)||[]).map(u=>{const i=u.date.slice(5,7),h=y[Number(i)];return{num:Number(u.num),date:u.date,xAxis:(s==null?void 0:s.date_type)=="mon"?h:de(u.date)}})}}}const Ie=({data:e,onChangeValue:c,noXAxis:s,pageFrom:o="stats"})=>{const[n,r]=U.useState(""),a=i=>{if(i&&i.activePayload&&i.activePayload.length){const h=i.activePayload[0].payload.date;c(i.activePayload[0].payload);const d=h.slice(5,7),m=y[Number(d)],f=h.slice(8,10),x=m,T=h.slice(0,4);r(f+" "+x+" "+T)}},l=()=>{c(null)};(e==null?void 0:e.length)>0&&Math.floor(Math.min(...e.map(i=>i.num)));const u=Math.ceil(Math.max(...e.map(i=>i.num)));return t.jsx(ye,{width:"100%",height:"100%",children:t.jsxs(we,{barCategoryGap:"25%",data:e,onMouseMove:a,onMouseLeave:l,maxBarSize:24,children:[!s&&t.jsx(_,{type:"category",dataKey:"xAxis",minTickGap:18,tickLine:!1,axisLine:!1,tick:t.jsx(He,{})}),u&&t.jsx(B,{domain:[0,u*1.05],hide:!0,axisLine:!1,tickLine:!1}),t.jsx(be,{content:t.jsx(ke,{value:o!=="stats"?n:""}),cursor:t.jsx(Le,{})}),t.jsx(F,{dataKey:"num",fill:"#75C8FF",isAnimationActive:!1})]})})};function Le(e){var l,u;const{x:c,y:s,width:o,height:n,payload:r}=e;if(!r||!(r!=null&&r[0])||!((u=(l=r==null?void 0:r[0])==null?void 0:l.payload)!=null&&u.num))return;const a=o>192?o/1.2:o>96?o/1.5:o>48?o/2:o>24?o/4:o/8;return t.jsx("g",{children:t.jsx("rect",{width:o-a,height:n,x:c+a/2,fill:"rgba(118,200,255,0.5)",y:s+1})})}export{He as C,ke as E,Ee as H,Me as T,Ie as V,We as a,Ge as u};
