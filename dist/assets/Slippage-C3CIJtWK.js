import{j as e,X as K,Y as ee,Z as te,$ as re,a0 as ae,a1 as se,a as o,f as V,F as S,T as n,H as x,C as L,v as D,N as ne,O as W,Q as oe,V as R,I as ie,ar as pe}from"./vendor-DXHkIl66.js";import{u as le}from"./global-BhEQOSwv.js";import{g as U}from"./index-B79h-ghE.js";import{d,I as k,i as ce,a as xe,F as de,B as ue,G as Y}from"./index-1pql7esm.js";import{T as O}from"./TooltipIcon-C0_AzT63.js";import{u as ge}from"./useTokenBalance-CuMCex55.js";const he={coin_type:"0x2::sui::SUI",decimals:9};function be(i){const{isOpen:s,onClose:p,slippageType:r}=i;return e.jsxs(K,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:p,isCentered:!0,children:[e.jsx(ee,{className:"test-slippage-modal"}),e.jsxs(te,{children:[e.jsx(re,{fontSize:"16px",fontWeight:"500",children:"Settings"}),e.jsx(ae,{}),e.jsx(se,{pb:"16px",children:e.jsx(me,{...i})})]})]})}const me=i=>{const{isOpen:s,onClose:p,value:r,onChange:h,compact:a=!1,slippageType:c="global",isWidget:N=!1,transactionMode:f,onChangeTransctionMode:G,maxCapForGas:y,onChangeMaxCapForGas:F,mevProtect:M,onChangeMevProtect:v,customGasPrice:w,onChangeCustomGasPrice:_}=i,P=["0.1","0.5","1"],[t,l]=o.useState(""),[b,B]=o.useState(!1),{balanceInfo:j}=ge(he),[m,E]=o.useState(f),[C,A]=o.useState(y),[T,$]=o.useState(w),[u,z]=o.useState(M),Z=g=>{const J=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,2})?).*$");g.target.value=g.target.value.replace(J,"$1"),l(g.target.value)},Q=g=>{l(g)};o.useEffect(()=>{r&&l(String(r))},[r]),o.useEffect(()=>{r&&l(String(r))},[s]);const X=()=>{if(t){const g=d(t).toNumber();h(g)}m==="Fast Mode"&&(F(C),_(T)),G(m),v(u),p()},q=o.useMemo(()=>(console.log("ðŸš€ ~ btnIsDisabled ~ gasPrice:",T),m==="Fast Mode"&&(!C||Number(C)===0||Number(C)>5||!T||Number(T)===0||d(C).gt((j==null?void 0:j.balanceFormat)||"0")||d(C).lt(d(T).div(Math.pow(10,9))))||!+t?!0:c==="global"||c==="zap"?Number(t)>50||Number(t)<.01:Number(t)>1),[c,t,m,C,T,j]);return o.useEffect(()=>{m==="Fast Mode"&&z(!0)},[m]),e.jsxs(V,{w:"100%",children:[e.jsxs(V,{children:[e.jsxs(S,{align:"center",mb:"16px",children:[e.jsx(k,{xlinkHref:"#icon-icon_verticalslider",svgHover:"text_paragraph",iconCursor:"text"}),e.jsx(n,{ml:"8px",color:"text_caption",fontSize:"14px",fontWeight:"500",children:"Slippage Tolerance"})]}),e.jsxs(V,{bg:a?c==="global"||c==="zap"?Number(t)>50?"primary_red_opacity.10":"primary_yellow_opacity.10":Number(t)>1?"primary_red_opacity.10":"transparent":"transparent",borderRadius:"12px",children:[e.jsxs(x,{gap:"8px",mt:"8px",children:[e.jsx(S,{w:"100%",justifyContent:"center",alignItems:"center",borderRadius:"12px",border:"1px solid",borderColor:"border",background:"bg_secondary",h:"42px",children:P.map(g=>e.jsx(L,{flex:"1",bg:g===String(t)?"#1A1C25 !important":"transparent",cursor:"pointer",h:"calc(100% - 6px)",margin:"2px",borderRadius:"8px",onClick:()=>Q(g),children:e.jsxs(n,{color:g===String(t)?"text_highlight":"text_paragraph",children:[g,"%"]})},g))}),e.jsx(fe,{compact:!0,inputValue:t,handleChange:Z,wrapStyle:{flex:"0 0 150px",borderRadius:"12px"}})]}),t&&(c==="global"||c==="zap")&&(Number(t)>1||Number(t)<.05)?e.jsxs(S,{w:"100%",children:[Number(t)<.05?e.jsx(S,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Slippage is low. Your transaction may fail."})}):null,Number(t)<=50&&Number(t)>1?e.jsx(S,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,Number(t)>50?e.jsx(S,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null]}):null,t&&c==="vaults"&&Number(t)>1?e.jsx(S,{w:"100%",children:Number(t)>1?e.jsx(S,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null}):null]}),c!=="zap"&&e.jsx(je,{transactionMode:m,setTransactionMode:E,maxCapForGas:C,setMaxCapForGas:A,customGasPrice:T,setCustomGasPrice:$,suiBalance:(j==null?void 0:j.balanceFormat)||"0"}),c!=="zap"&&e.jsx(Ce,{mevProtect:u,setMevProtect:z,disabled:m==="Fast Mode"})]}),e.jsxs(S,{align:"center",justifyContent:"space-between",mt:"20px",gap:"16px",children:[e.jsx(D,{flex:"1",h:"42px",variant:"outline",borderRadius:"8px",onClick:p,p:"0 15px",children:"Cancel"}),e.jsx(D,{flex:"1",h:"42px",borderRadius:"8px",onClick:X,isDisabled:q,children:"Save"})]})]})},fe=({inputValue:i,handleChange:s,wrapStyle:p={},compact:r=!1})=>e.jsxs(ne,{alignItems:"center",justifyContent:"center",w:"100%",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",h:"42px",p:"12px 16px",position:"relative",...p,children:[e.jsx(n,{pr:"8px",h:"20px",lineHeight:"20px",borderRight:"1px solid",borderColor:r?"transparent":"border",children:"Custom"}),e.jsx(W,{borderRadius:"8px",h:"40px",mr:"2px",border:"none",variant:"outline",value:i,onChange:s,textAlign:"right",fontSize:"sm",placeholder:"0.0",pr:{base:"14px",lg:"8px"},pl:"0"}),e.jsx(oe,{width:"20px",height:"40px",top:"0.5px",right:{base:"12px",lg:"8px"},children:e.jsx(n,{fontSize:"sm",color:"text_caption",children:"%"})})]}),H=[{label:"Default"},{label:"Fast Mode",beforeIcon:{xlinkHref:"#icon-icon_flash",fontSize:"16px",activeColor:"#FFCA68",activeHoverColor:"#FFCA68"}}],je=i=>{const{transactionMode:s,setTransactionMode:p,maxCapForGas:r,setMaxCapForGas:h,customGasPrice:a,setCustomGasPrice:c,suiBalance:N}=i,f=o.useMemo(()=>{var t;return(t=H.filter(l=>(l==null?void 0:l.label)===s))==null?void 0:t[0]},[s,H]),G=t=>{p(t.label)},y=t=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(l,"$1"),h(t.target.value)},F=t=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(l,"$1");const b=d(t.target.value).gt(0)?d(t.target.value).div(Math.pow(10,9)).toString():"0";d(b).gt(r)&&h(b),c(t.target.value)},M=o.useMemo(()=>!r||Number(r)==0?"Please enter a value higher than 0":r&&Number(r)>5?"Only allow up to 5 SUI":d(r).gt(N)?"Insufficient SUI balance ":d(r).lt(d(a).div(Math.pow(10,9)))?"Max cap cannot be less than custom gas.":"",[r]),v=o.useMemo(()=>r&&Number(r)>0&&Number(r)<2e-6?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[r]),w=o.useMemo(()=>!a||Number(a)==0?"Please enter a value higher than 0":"",[a]),_=o.useMemo(()=>a&&Number(a)>0&&d(a).lt(750)?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[a]),P=o.useMemo(()=>!a||a==="0"?"0":d(a).div(Math.pow(10,9)).toString(),[a]);return e.jsxs(R,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"12px",children:[e.jsxs(x,{w:"100%",justify:"space-between",children:[e.jsxs(x,{children:[e.jsx(k,{xlinkHref:"#icon-icon_mode"}),e.jsx(n,{color:"text_caption",fontSize:"14px",children:"Transaction Mode"})]}),e.jsx(ce,{type:"outlineTab",tabList:H,currentTab:f==null?void 0:f.label,handleChangeTab:G,wrapStyle:{w:"206px",h:"40px",p:"4px",borderRadius:"12px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px",borderRadius:"8px"}})]}),e.jsx(n,{w:"100%",lineHeight:"20px",fontSize:"12px",children:s==="Default"?"Standard gas based on real-time network conditions":"Land your transaction earlier and avoid congestion with a higher gas price. MEV protection is on by default in Fast Mode."}),s==="Fast Mode"&&e.jsxs(R,{w:"100%",children:[e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Custom Gas Price"}),e.jsx(O,{type:"setGasPrice"})]}),e.jsxs(R,{align:"flex-end",gap:"0px",children:[e.jsxs(x,{gap:"0px",children:[e.jsx(W,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:a,onChange:F,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MIST"})]}),e.jsxs(n,{fontSize:"12px",color:"text_paragraph",children:[P," SUI"]})]})]}),w&&e.jsx(I,{text:w,type:"error"}),_&&e.jsx(I,{text:_,type:"warn"}),e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Set Max Cap for Gas"}),e.jsx(O,{type:"setMaxCapForGas"})]}),e.jsx(R,{align:"flex-end",gap:"0px",children:e.jsxs(x,{gap:"0px",children:[e.jsx(W,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:r,onChange:y,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"SUI"})]})})]}),M&&e.jsx(I,{text:M,type:"error"}),v&&e.jsx(I,{text:v,type:"warn"}),e.jsxs(x,{mt:"6px",children:[e.jsx(n,{children:"Powered by "}),e.jsx(ie,{src:"/images/icon_shio@2x.png",w:"46px",h:"14px"})]})]})]})},Ce=i=>{const{mevProtect:s,disabled:p,setMevProtect:r}=i;return e.jsxs(R,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(x,{justify:"flex-start",w:"100%",children:[e.jsx(k,{xlinkHref:"#icon-icon_mev",svgFill:"text_paragraph"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MEV Protect"})]}),e.jsxs(x,{justify:"space-between",w:"100%",children:[e.jsxs(x,{gap:"4px",children:[e.jsx(n,{fontSize:"14px",color:"text_paragraph",children:"Enable MEV Protection"}),e.jsx(O,{type:"byEnabling"})]}),e.jsx(pe,{isChecked:s,onChange:()=>r(!s),isDisabled:p})]})]})},I=i=>{const{text:s,type:p}=i;return e.jsx(L,{w:"100%",p:"4px 16px",borderRadius:"8px",bg:p==="warn"?"primary_yellow_opacity.10":"primary_red_opacity.10",children:e.jsx(n,{color:p==="warn"?"primary_yellow":"primary_red",fontSize:"12px",lineHeight:"20px",children:s})})};function Te(i){const{onClick:s,toolTipText:p}=i,{onSlippageVisible:r,showSlippage:h,isWidget:a,compact:c,settingOpen:N,onClose:f,onChange:G,slippageType:y,transactionMode:F,handleChangeTransctionMode:M,maxCapForGas:v,handleChangeMaxCapForGas:w,mevProtect:_,handleChangeMevProtect:P,customGasPrice:t,handleChangeCustomGasPrice:l}=Se(i);return e.jsxs(e.Fragment,{children:[e.jsx(de,{tooltip:p||"Settings",children:y!=="zap"?e.jsx(x,{h:"28px",p:"4px 8px",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:a?"swap_bg_secondary":"bg_secondary",cursor:"pointer",gap:"6px",onClick:b=>{Y(b),a?s&&s():r()},sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(e.Fragment,{children:[e.jsx(n,{fontWeight:"500",fontSize:"12px",children:U(h)}),e.jsx(ue,{bg:a?"swap_bg_secondary":"bg_secondary",p:"0",h:"28px",w:"28px",borderRadius:"8px",mr:"-9px",children:e.jsx(x,{align:"center",justify:"center",mt:"3px",children:e.jsx(k,{xlinkHref:"#icon-icon_verticalslider"})})})]})}):e.jsxs(x,{gap:"4px",borderBottom:"1px dashed",borderColor:"text_paragraph",pb:"2px",onClick:b=>{Y(b),a?s&&s():r()},children:[e.jsx(n,{fontWeight:"500",color:"text_caption",fontSize:"12px",children:U(h)}),e.jsx(n,{color:"text_paragraph",fontSize:"12px",children:"Slippage"})]})}),!a&&e.jsx(be,{isWidget:a,compact:c,isOpen:N,onClose:f,value:d(h).mul(100).toNumber(),onChange:G,slippageType:y,transactionMode:F,onChangeTransctionMode:M,maxCapForGas:v,onChangeMaxCapForGas:w,mevProtect:_,onChangeMevProtect:P,customGasPrice:t,onChangeCustomGasPrice:l})]})}function Se(i){const{slippageType:s="global",compact:p,isWidget:r=!1}=i,{slippage:h,vaultsSlippage:a,setVaultsSlippage:c,setSlippage:N,mevProtect:f,setMevProtect:G,setTransctionMode:y,setMaxCapForGas:F,transactionMode:M,maxCapForGas:v,customGasPrice:w,setCustomGasPrice:_,zapSlippage:P,setZapSlippage:t}=le(),[l,b]=o.useState(!1);xe();const B=()=>{b(!l)},j=()=>{b(!1)},m=u=>{console.log("Slippage ðŸš€ ~ onChange ~ value:",u),console.log("Slippage ðŸš€ ~ onChange ~ slippageType:",s);const z=d(u).div(100).toNumber();s==="vaults"?c(z):s==="zap"?(console.log("Slippage ðŸš€ ~ onChange ~ saveSlippageValue:",z),t(z)):N(z)},E=o.useMemo(()=>s==="vaults"?a:s==="zap"?P:h,[s,h,a,P]);return{onSlippageVisible:B,onClose:j,onChange:m,showSlippage:E,isWidget:r,compact:p,settingOpen:l,slippageType:s,transactionMode:M,handleChangeTransctionMode:u=>{y(u)},maxCapForGas:v,handleChangeMaxCapForGas:u=>{F(u)},mevProtect:f,handleChangeMevProtect:u=>{G(u)},customGasPrice:w,handleChangeCustomGasPrice:u=>{_(u)}}}export{Te as S,me as a,be as b,Se as u};
//# sourceMappingURL=Slippage-C3CIJtWK.js.map
