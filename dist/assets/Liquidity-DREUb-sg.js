import{aH as Ys,aI as jt,aJ as Qs,aK as Xs,u as wt,r as j,W as Ut,j as e,T as k,g as Zs,H as z,I as be,b as Ae,V as U,c as Ee,ab as Ct,aL as X,e as Rt,C as $e,Z as pe,k as Lt,i as ze,f as Se,d as $,aM as $t,B as se,R as Js,l as ye,aA as St,X as es,az as Ps,ag as Oe,aN as Is,S as Ge,a0 as ot,a as Ye,aF as At,ac as ts,ad as ss,ae as rs,af as is,ah as er,ai as ns,$ as as,U as kt,a9 as it,aO as cs,aP as Tt,a3 as ls,aQ as Ht,aR as le,aS as Ie,aT as at,aU as ie,a5 as tr,aV as Nt,aW as sr,ar as Bt,aX as rr,ap as _t,aq as nt,aY as ir,aB as nr,aD as ar,am as Vt,aZ as Ue,a_ as je,a$ as cr,a8 as vt,b0 as lr,b1 as dr,b2 as ur}from"./index-hlspwJoj.js";import{A as xr}from"./index-B44iFB7_.js";import{i as or,R as pr,C as gr}from"./api-data-utils-BYT3J20O.js";import{u as I}from"./index-pmX46Lao.js";import{u as xe,a as yr,P as mr,F as hr,V as br}from"./PositionListLoading-vKFzRNCT.js";import{u as Ke}from"./useDocumentSize-Czlt8WaN.js";import{H as fr,T as jr,a as Sr,u as Ar,V as _r}from"./VolumeChart-BRPCVUyi.js";import{N as De}from"./NoData-DFE5asdg.js";import{A as vr}from"./CopyButton-C6TKL-oQ.js";import{T as wr}from"./TvlChart-DccCsG7H.js";import{u as Cr}from"./useBurn-CqgbywmF.js";import{H as ue}from"./HTextLabelBox-D71tVS5z.js";import{T as Rr}from"./TooltipIcon-qaFUhLV9.js";import{A as ds}from"./SingleTokenInfo-Cui52rXo.js";import{P as Lr}from"./progress-x9JXkXux.js";import{a as us,b as kr}from"./usePositionList-4IcszlUa.js";import{u as Tr}from"./useRpcListener-BiMxu1ze.js";import{u as Le,a as ke,b as pt,L as xs,c as Br,d as Fr,S as et}from"./useGetContractPoolInfo-BO3-_q0g.js";import{T as Mr}from"./TradeConfirmAmountInfo-DACaMxCM.js";import{P as zr}from"./PositionStatus-CYlPlIqK.js";import{R as Er}from"./RangeAlerts-sfetqXHR.js";import{u as Wr,a as qr}from"./useTransaction-Bdgye9e1.js";import{u as Ur}from"./global-D9vHqz1e.js";import{f as tt,i as qe}from"./index-UNT2jrcH.js";import{c as $r,g as ct,a as lt,u as Hr}from"./useGetPoolList-4CwYZBg3.js";import{u as os}from"./useAccountBalance-B2-ScmX9.js";import{u as dt}from"./useTokenBalance-hDBhZl2G.js";import{u as ps,m as ht,S as Dt,a as Nr}from"./SelectTokenAndFeeConfirm-1RdAsxX5.js";import{u as Vr}from"./useNotifiSubscription-BBYhFmeR.js";import{u as Dr}from"./usePosAdd-7X_e9cdw.js";import{L as ut}from"./LockInput-DzV5dmZL.js";import{S as gs}from"./Slippage-Gi7w-c5F.js";import{P as Ot,C as ys,I as xt}from"./common-CHv6HTuz.js";import{u as Or,a as Gr,V as Kr}from"./VaultsAprBlock-D1KqMqOJ.js";import{u as ms}from"./usePriceImpact-DHxpIQ2n.js";import{T as hs}from"./TradeInputGroup-BI4sllHf.js";import{g as Yr}from"./liquidity-COhMcmFe.js";import{d as Gt,F as Qr}from"./FeeTierSelect-Cwoi8dee.js";import{u as bs}from"./useToken-DqvkEjGB.js";import{a as Xr,u as Zr}from"./useFavoritePool-DWfTfvtO.js";import{u as Jr}from"./swapWidget-joD3e0iD.js";import{u as Pr}from"./swapWidgetConfig-DsKpdmyV.js";import{R as Ir}from"./RefreshButton-DgzwbhGc.js";import{C as ei}from"./CurrentPrice-Cqq9Vr8q.js";import{W as ti}from"./WarningTokenTipModal-rqIaywtD.js";import"./PoweredByHaedal-ozFRRCEr.js";import"./useDisplayTickPrice-Ba-cNmRK.js";import"./VTextLabelBox-DowmcJ0T.js";import"./useCurrentPos-s5NHcX_D.js";import"./PriceRange-Czr_7_d9.js";import"./RangeValue-B20MC24z.js";import"./debounce-D6DIWQCR.js";import"./index-CzSGv0pg.js";import"./Pagination-BOawgqiW.js";import"./tr-DejpTztH.js";import"./EmptyTooltip-CGgDU9-B.js";import"./_getAllKeysIn-CR1AVSE9.js";import"./YAxis-DB716k2B.js";import"./throttle-IYN20wGy.js";import"./generateCategoricalChart-BqUp2-vU.js";import"./linear-DYpwdEgO.js";import"./index-BPRg3agT.js";import"./progress.utils-As5jnOmw.js";import"./usePreviousValue-DX_GJzzv.js";import"./ActionButton-MtxtE7Ze.js";import"./index-Db8bPy6T.js";import"./Loading-L5Fsz_BQ.js";import"./useXCetusHelper-Dqa6opW5.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-D_NJ41vQ.js";import"./InputBox-BKJvrUUB.js";import"./useFindBestRouting-1Jlwf1qv.js";var si=/\s/;function ri(t){for(var s=t.length;s--&&si.test(t.charAt(s)););return s}var ii=/^\s+/;function ni(t){return t&&t.slice(0,ri(t)+1).replace(ii,"")}var Kt=NaN,ai=/^[-+]0x[0-9a-f]+$/i,ci=/^0b[01]+$/i,li=/^0o[0-7]+$/i,di=parseInt;function Yt(t){if(typeof t=="number")return t;if(Ys(t))return Kt;if(jt(t)){var s=typeof t.valueOf=="function"?t.valueOf():t;t=jt(s)?s+"":s}if(typeof t!="string")return t===0?t:+t;t=ni(t);var n=ci.test(t);return n||li.test(t)?di(t.slice(2),n?2:8):ai.test(t)?Kt:+t}var bt=function(){return Qs.Date.now()},ui="Expected a function",xi=Math.max,oi=Math.min;function fs(t,s,n){var c,p,d,o,f,i,u=0,a=!1,l=!1,g=!0;if(typeof t!="function")throw new TypeError(ui);s=Yt(s)||0,jt(n)&&(a=!!n.leading,l="maxWait"in n,d=l?xi(Yt(n.maxWait)||0,s):d,g="trailing"in n?!!n.trailing:g);function A(h){var m=c,v=p;return c=p=void 0,u=h,o=t.apply(v,m),o}function C(h){return u=h,f=setTimeout(x,s),a?A(h):o}function S(h){var m=h-i,v=h-u,w=s-m;return l?oi(w,d-v):w}function R(h){var m=h-i,v=h-u;return i===void 0||m>=s||m<0||l&&v>=d}function x(){var h=bt();if(R(h))return b(h);f=setTimeout(x,S(h))}function b(h){return f=void 0,g&&c?A(h):(c=p=void 0,o)}function r(){f!==void 0&&clearTimeout(f),u=0,c=i=p=f=void 0}function y(){return f===void 0?o:b(bt())}function _(){var h=bt(),m=R(h);if(c=arguments,p=this,i=h,m){if(f===void 0)return C(i);if(l)return clearTimeout(f),f=setTimeout(x,s),A(i)}return f===void 0&&(f=setTimeout(x,s)),o}return _.cancel=r,_.flush=y,_}var Re=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Re||{});function pi(){const{clmmSdk:t}=Xs(),{fetchByApi:s}=wt();return{getTransactionsHistory:async p=>{try{const d=await s(or,"GET",p);if(console.log(d,"getTransactionsHistory"),d)return d;throw new Error("no data")}catch(d){console.error(d,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(p,d)=>{try{const o=await t.Pool.getPoolTransactionList({poolId:p,paginationArgs:d,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(o,"getTransactionsHistoryBySDK"),o)return o;throw new Error("no data")}catch(o){console.error(o,"getTransactionsHistoryBySDK ~ error")}}}}function gi(){const{getTransactionsHistoryBySDK:s}=pi(),[n,c]=j.useState(!0),[p,d]=j.useState([]),[o,f]=j.useState(1),[i,u]=j.useState(),[a,l]=j.useState(!0),{apiPoolInfo:g,manualRefresh:A,setManualRefresh:C}=I(),{poolAddress:S}=xe();j.useEffect(()=>{d([]),f(1),u(void 0),l(!0)},[S]),j.useEffect(()=>{A&&(d([]),f(1),u(void 0),l(!0),R({cursor:void 0,limit:10}))},[S,A]);const R=async b=>{var r;try{if(!a)return;if(S){c(!0);const y=await s(S,{...b});if(y){const _=(r=y==null?void 0:y.data)==null?void 0:r.map(h=>{var L,q;const m=h==null?void 0:h.parsedJson,v=m!=null&&m.amount_a||m!=null&&m.atob?g==null?void 0:g.tokenA:g==null?void 0:g.tokenB,w=m!=null&&m.amount_b||m!=null&&m.atob?g==null?void 0:g.tokenB:g==null?void 0:g.tokenA;return{...h,type:(L=h.type)!=null&&L.includes("Add")?Re.add:(q=h.type)!=null&&q.includes("Remove")?Re.remove:Re.swap,items:[{amount:Ut(m!=null&&m.amount_a?m==null?void 0:m.amount_a:m==null?void 0:m.amount_in,v==null?void 0:v.decimals).toString(),address:v==null?void 0:v.coin_type,url:v==null?void 0:v.logo_url,symbol:v==null?void 0:v.symbol},{amount:Ut(m!=null&&m.amount_b?m==null?void 0:m.amount_b:m==null?void 0:m.amount_out,w==null?void 0:w.decimals).toString(),address:w==null?void 0:w.coin_type,url:w==null?void 0:w.logo_url,symbol:w==null?void 0:w.symbol}]}});b!=null&&b.cursor?d(h=>[...h,..._||[]]):d(_||[]),u(y==null?void 0:y.nextCursor),l(y==null?void 0:y.hasNextPage),c(!1)}}}catch(y){console.log(y,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ke(()=>{R({cursor:i,limit:10})},[o,S],{wait:500,leading:!0,trailing:!1}),{isLoading:n,list:p,apiPoolInfo:g,currentPage:o,onCurrentPageChange:()=>{f(b=>b+1)},hasNextPage:a}}const st={[Re.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Re.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Re.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},yi=({type:t})=>{var s,n,c,p;return e.jsxs(z,{children:[e.jsx(be,{xlinkHref:(s=st[t])==null?void 0:s.icon,svgFill:(n=st[t])==null?void 0:n.color,svgHover:(c=st[t])==null?void 0:c.color}),e.jsx(k,{color:"text_caption",children:(p=st[t])==null?void 0:p.title})]})},mi=({items:t,type:s,isReverse:n})=>{var p,d;const{isApp:c}=Ae();return t?s===Re.swap?c?e.jsxs(U,{align:"flex-end",gap:"8px",children:[e.jsx(We,{item:t==null?void 0:t[0]}),e.jsxs(z,{justify:"flex-end",children:[e.jsx(be,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(We,{item:t==null?void 0:t[1]})]})]}):e.jsxs(z,{justify:"flex-end",gap:"8px",children:[e.jsx(We,{item:t==null?void 0:t[0]}),e.jsx(be,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(We,{item:t==null?void 0:t[1]})]}):c?e.jsx(U,{align:"flex-end",gap:"8px 16px",flexDir:n?"column-reverse":"column",children:(p=t==null?void 0:t.filter(o=>!!+o.amount))==null?void 0:p.map(o=>e.jsx(We,{item:o},o==null?void 0:o.address))}):e.jsx(z,{justify:n?"flex-start":"flex-end",gap:"8px 16px",flexDir:n?"row-reverse":"row",children:(d=t==null?void 0:t.filter(o=>!!+o.amount))==null?void 0:d.map(o=>e.jsx(We,{item:o},o==null?void 0:o.address))}):null},We=({item:t})=>e.jsxs(z,{gap:"4px",children:[e.jsx(Ee,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(k,{color:"text_caption",children:Ct(t==null?void 0:t.amount)}),e.jsx(k,{children:X(t==null?void 0:t.symbol,10)})]}),Qt=(t,s=!1)=>[{title:e.jsx(k,{children:"Event"}),key:"type",render:({type:n})=>e.jsx(yi,{type:n}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(k,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:n,type:c})=>e.jsx(mi,{items:n,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(k,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:n})=>e.jsx(vr,{address:n,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(n,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(k,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:n})=>e.jsx(k,{color:"text_caption",children:Zs(n)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function hi(){const{getExplorerUrl:t}=Rt(),{isLoading:s,list:n,apiPoolInfo:c,currentPage:p,onCurrentPageChange:d,hasNextPage:o}=gi(),{isApp:f}=Ae();return e.jsxs(U,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(k,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(n==null?void 0:n.length)==0?e.jsx(De,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):f?e.jsx(fr,{columns:Qt(t,c==null?void 0:c.isReverse),dataSource:n,loading:s&&p===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(i,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")}}):e.jsx(jr,{columns:Qt(t,c==null?void 0:c.isReverse),dataSource:n,skeletonLength:10,loading:s&&p===1,onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),o&&e.jsx($e,{mt:{base:"40px",lg:"20px"},children:e.jsx(pe,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:d,children:s?e.jsx(Lt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var Ft=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(Ft||{}),js=(t=>(t.volume="vol",t.tvl="pure_tvl",t.fees="fee",t))(js||{}),Ss=(t=>(t.d="D",t.w="W",t.m="M",t))(Ss||{}),As=(t=>(t.d="day",t.w="wek",t.m="mon",t))(As||{});const bi={D:40,W:30,M:20};function fi(){const[t,s]=j.useState("Volume"),[n,c]=j.useState("D"),[p,d]=j.useState([]),{apiPoolInfo:o}=I(),[f,i]=j.useState(!0),[u,a]=j.useState(null),{getHistogramData:l}=Sr(),{poolAddress:g}=xe(),{getHoverTime:A,time:C}=Ar();j.useLayoutEffect(()=>{d([]),s("Volume"),c("D"),a(null)},[g]);const S=async()=>{if(g)try{i(!0);const _=await l({date_type:As[n.toLowerCase()],type:js[t.toLowerCase()],limit:bi[n],address:g});_&&_.length&&d(_)}catch(_){throw console.error(_,"res-fetchAnalyticsData"),_}finally{i(!1)}};j.useEffect(()=>{S()},[g,t,n]),j.useEffect(()=>{u!=null&&u.date&&A(u==null?void 0:u.date,n)},[u==null?void 0:u.date,n]);const R=_=>{s(_.label),_.label!==t&&d([])},x=_=>{c(_.label),_.label!==n&&d([])},b=j.useMemo(()=>{if(t==="Volume")return{value:o==null?void 0:o.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:o==null?void 0:o.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:o==null?void 0:o.fees24Display,title:"Fees (24H)"}},[t,o==null?void 0:o.volume24Display,o==null?void 0:o.tvlDisplay,o==null?void 0:o.fees24Display]),r=Object.values(Ft).map(_=>({label:_})),y=Object.values(Ss).map(_=>({label:_}));return{handleChartTabChange:R,handleDateTabChange:x,defaultDisplay:b,chartsTabs:r,dateTypes:y,chartLoading:f,analyticsData:p,hoverData:u,setHoverData:a,currentChartTab:t,currentDateType:n,time:C}}function ji(){const{isApp:t}=Ae(),{handleChartTabChange:s,handleDateTabChange:n,defaultDisplay:c,chartsTabs:p,dateTypes:d,chartLoading:o,analyticsData:f,hoverData:i,setHoverData:u,currentChartTab:a,currentDateType:l,time:g}=fi();return e.jsxs(U,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(z,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(ze,{type:"outlineTab",tabList:p,currentTab:a,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(ze,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:n,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(U,{w:"100%",align:"flex-start",children:[e.jsx(k,{color:"text_caption",fontSize:"24px",children:(i==null?void 0:i.num)!==void 0&&i!==null?$($t(i.num)).gte("0.01")||$($t(i.num)).equals("0")?`$${Se(i==null?void 0:i.num,2)}`:"<$0.01":c==null?void 0:c.value}),e.jsx(k,{children:i!=null&&i.date?g:c==null?void 0:c.title}),t&&e.jsx(ze,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:n,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(se,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(se,{w:"100%",h:"100%",position:"relative",children:[o&&e.jsx(se,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Lt,{})}),a===Ft.tvl?e.jsx(wr,{data:f,onChangeValue:A=>u(A)}):e.jsx(_r,{data:f,onChangeValue:A=>u(A),pageFrom:"pools"})]})})]})}const Si=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:n=>{t(()=>({tokenAPrice:n}))},tokenBPrice:void 0,setTokenBPrice:n=>{t(()=>({tokenBPrice:n}))},tokenAAmount:"",setTokenAAmount:n=>{t(()=>({tokenAAmount:n}))},tokenBAmount:"",setTokenBAmount:n=>{t(()=>({tokenBAmount:n}))},tokenAAmountUSD:"",setTokenAAmountUSD:n=>{t(()=>({tokenAAmountUSD:n}))},tokenBAmountUSD:"",setTokenBAmountUSD:n=>{t(()=>({tokenBAmountUSD:n}))},totalAmountUSD:"",setTotalAmountUSD:n=>{t(()=>({totalAmountUSD:n}))},tvlLoading:!0,setTvlLoading:n=>{t(()=>({tvlLoading:n}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),gt=Js(Si);function Ai(){const{getBurnPositionAmountByPool:t}=Cr(),{apiPoolInfo:s,contractPoolInfo:n}=I(),[c,p]=j.useState("0"),[d,o]=j.useState("0"),[f,i]=j.useState("0"),[u,a]=j.useState("0"),[l,g]=j.useState(!1),{poolAddress:A}=xe(),{tokenAPrice:C,tokenBPrice:S}=gt(),R=async(x,b)=>{try{g(!0),console.log("🚀🚀🚀 ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:r,totalB:y}=await t(x,b);p(r),o(y),C&&i($(r).mul(C==null?void 0:C.price).toString()),S&&a($(y).mul(S==null?void 0:S.price).toString())}catch(r){console.log("🚀🚀🚀  ~ getBurnAmount ~ error:",r)}finally{g(!1)}};return Ke(()=>{s&&(n!=null&&n.current_sqrt_price)&&R(s,n==null?void 0:n.current_sqrt_price)},[A,n==null?void 0:n.current_sqrt_price,C==null?void 0:C.price,S==null?void 0:S.price],{wait:500}),{burnAmountA:c,burnAmountB:d,burnAmountAUSD:f,burnAmountBUSD:u,loading:l}}function _i(){const{apiPoolInfo:t}=I(),{burnAmountA:s,burnAmountB:n,burnAmountAUSD:c,burnAmountBUSD:p,loading:d}=Ai();return $(s).gt(0)||$(n).gt(0)?e.jsxs(ye,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(z,{children:[e.jsx(k,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx(Rr,{type:"burnedLiquidity"})]}),e.jsxs(ye,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(Xt,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:c,loading:d}),e.jsx(Xt,{token:t==null?void 0:t.tokenB,amount:n,amountUSD:p,loading:d})]})]}):null}const Xt=({token:t,amount:s,amountUSD:n,loading:c})=>e.jsxs(U,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ee,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(U,{align:"flex-start",gap:"4px",children:[e.jsx(k,{color:"text_caption",fontSize:"16px",children:X(t==null?void 0:t.symbol,10)}),e.jsx(k,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(ue,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(St(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(ue,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:$(n).gt("0")?`$${es(St(n,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function vi(){const{tokenAAmountUSD:t,totalAmountUSD:s}=gt(),n=j.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const p=Ps($(t).div(s).mul(100).toString(),2);return p==="NaN"?"--":p}return"--"},[t,s]),c=j.useMemo(()=>n&&n!=="--"?$(100).minus(n).toString():"--",[n]);return{tokenARatio:n,tokenBRatio:c}}const rt=t=>t==="--"?"--":`${t}%`;function wi(){var l,g,A,C,S,R;const{apiPoolInfo:t,contractPoolInfo:s}=I(),{getExplorerUrl:n}=Rt(),{poolAddress:c}=xe(),{tokenAAmount:p,tokenBAmount:d,tokenAAmountUSD:o,tokenBAmountUSD:f,tvlLoading:i}=gt(),{tokenARatio:u,tokenBRatio:a}=vi();return e.jsxs(U,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(U,{gap:"20px",w:"100%",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(Is,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(ue,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(ds,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(n(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(ue,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(t==null?void 0:t.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(ue,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(ue,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(U,{gap:"20px",w:"100%",children:[e.jsx(z,{justify:"flex-start",w:"100%",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(U,{gap:"16px",w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ee,{imageUrl:(l=t==null?void 0:t.displayTokenA)==null?void 0:l.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(g=t==null?void 0:t.displayTokenA)==null?void 0:g.coin_type:""}),e.jsxs(U,{align:"flex-start",gap:"4px",children:[e.jsx(k,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((A=t==null?void 0:t.displayTokenA)==null?void 0:A.symbol,10)}),i?e.jsx(Ge,{h:"12px"}):e.jsx(k,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?rt(a):rt(u)})]})]}),e.jsx(se,{w:"200px",children:e.jsx(Lr,{value:Number(t!=null&&t.isReverse?a:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,a].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,a].includes("--")?"background":"primary"}}})}),e.jsxs(z,{gap:"12px",children:[e.jsxs(U,{align:"flex-end",gap:"4px",children:[e.jsx(k,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((C=t==null?void 0:t.displayTokenB)==null?void 0:C.symbol,10)}),i?e.jsx(Ge,{h:"12px"}):e.jsx(k,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?rt(u):rt(a)})]}),e.jsx(Ee,{imageUrl:(S=t==null?void 0:t.displayTokenB)==null?void 0:S.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(R=t==null?void 0:t.displayTokenB)==null?void 0:R.coin_type:""})]})]}),e.jsxs(U,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(Zt,{loading:i,token:t==null?void 0:t.tokenA,amount:p,amountUSD:o}),e.jsx(Zt,{loading:i,token:t==null?void 0:t.tokenB,amount:d,amountUSD:f})]})]})]})]})}const Zt=({token:t,amount:s,amountUSD:n,loading:c})=>{const{getExplorerUrl:p}=Rt();return t?e.jsxs(U,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ee,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(U,{align:"flex-start",gap:"4px",children:[e.jsx(k,{color:"text_caption",fontSize:"16px",children:X(t==null?void 0:t.symbol,10)}),e.jsx(k,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(ds,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(p(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(ue,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(St(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(ue,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:n&&n!=="--"?`$${Se(n)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function Ci(){return e.jsxs(U,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(ye,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(ji,{}),e.jsx(wi,{})]}),e.jsx(_i,{}),e.jsx(hi,{})]})}function Ri(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=us(),{manualRefresh:n}=I(),{currentAccount:c,onWalletModal:p}=ot(),{getPositionBaseList:d,getPosRelatedData:o}=kr(),[f,i]=j.useState(""),{poolAddress:u}=xe(),a=async g=>{const A=await d(g);Array.isArray(A)&&o(A),typeof A=="string"&&i(A)};return j.useEffect(()=>{c!=null&&c.address&&a(c==null?void 0:c.address)},[c==null?void 0:c.address]),j.useEffect(()=>{n&&(c!=null&&c.address)&&a(c==null?void 0:c.address)},[n]),Tr({onRpcChange:()=>{c!=null&&c.address&&a(c==null?void 0:c.address)}}),{data:j.useMemo(()=>{if(u){const g=s[u.toLowerCase()||""];return g?g==null?void 0:g.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:f,posBaseListLoading:t,currentAccount:c,onWalletModal:p}}function Li(){const t=Ye(),{apiPoolInfo:s}=I(),{currentAccount:n,posBaseListLoading:c,data:p,rpcNodeErrorStr:d,onWalletModal:o}=Ri();return e.jsx(U,{minW:{base:"100%",lg:"1024px"},children:n!=null&&n.address?c?[{},{}].map((f,i)=>e.jsx(yr,{},i)):p&&(p==null?void 0:p.length)>0?p==null?void 0:p.map((f,i)=>e.jsx(mr,{positionInfo:f},f==null?void 0:f.posId)):d?e.jsx(De,{type:"nodata",text:d}):e.jsx(De,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(pe,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>t(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):e.jsx(De,{type:"nowallet",onboard:()=>o(!0)})})}function ki(t){var m,v;const{onClose:s,onSubmit:n,data:{feeTier:c}}=t,{fromToken:p,toToken:d,fromAmount:o,toAmount:f,totalAmount:i,percentMap:u,fromTokenLock:a,toTokenLock:l}=Le(),{lowerTickData:g,upperTickData:A}=ke(),{currentPriceData:C,apiPoolInfo:S}=I(),{setIsChecked:R}=At(),[x,b]=j.useState(!0),r=j.useMemo(()=>{var w;return((w=S==null?void 0:S.tokenA)==null?void 0:w.coin_type)===(p==null?void 0:p.coin_type)?!x:!!x},[S,p,d,x]),y=j.useMemo(()=>x?`${X(d==null?void 0:d.symbol,10)} per ${X(p==null?void 0:p.symbol,10)}`:`${X(p==null?void 0:p.symbol,10)} per ${X(d==null?void 0:d.symbol)}`,[x,p==null?void 0:p.symbol,d==null?void 0:d.symbol]),_=fs(()=>{n(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:h}=At();return e.jsxs(ts,{isOpen:!0,onClose:()=>{s(),R(!1)},isCentered:!0,children:[e.jsx(ss,{}),e.jsxs(rs,{children:[e.jsx(is,{children:e.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(er,{}),e.jsx(ns,{textAlign:"center",p:"0px",children:e.jsxs(U,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(z,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(z,{children:[e.jsx(as,{coinACoinType:p==null?void 0:p.coin_type,coinBCoinType:d==null?void 0:d.coin_type,coinAIconUrl:p==null?void 0:p.logo_url,coinBIconUrl:d==null?void 0:d.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(k,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${X(p==null?void 0:p.symbol,10)} - ${X(d==null?void 0:d.symbol,10)}`})]}),e.jsx(kt,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(z,{gap:"12px",children:[e.jsx(k,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(k,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),e.jsx(Mr,{coinA:{amount:o,...p},coinB:{amount:f,...d}}),e.jsxs(se,{w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(k,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(zr,{isActive:!a&&!l,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(z,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[e.jsx(k,{children:"Current Price"}),e.jsx(k,{as:"span",color:"text_caption",children:it(r?C.reverseCurrentPrice:C==null?void 0:C.currentPrice,6)}),e.jsx(k,{children:y}),e.jsx(pe,{variant:"unstyled",onClick:()=>b(!x),children:e.jsx(be,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsxs(z,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[e.jsx(Jt,{title:"Min Price",price:it(r?A==null?void 0:A.reversePrice:g==null?void 0:g.price,6),perText:y}),e.jsx(cs,{orientation:"vertical",h:"40px"}),e.jsx(Jt,{title:"Max Price",price:it(r?g==null?void 0:g.reversePrice:A==null?void 0:A.price,6),perText:y})]})]}),e.jsx(ue,{isLoading:!1,label:"Deposit Ratio",value:`${u[(p==null?void 0:p.coin_type)===((m=S==null?void 0:S.tokenA)==null?void 0:m.coin_type)?"percentA":"percentB"]}% ${X(p==null?void 0:p.symbol,10)} / ${u[(d==null?void 0:d.coin_type)===((v=S==null?void 0:S.tokenA)==null?void 0:v.coin_type)?"percentA":"percentB"]}% ${X(d==null?void 0:d.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),e.jsx(ue,{isLoading:!1,label:"Total Amount",value:i&&+i?Tt(i):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!a&&!l&&!((g==null?void 0:g.price)==="0"&&(A==null?void 0:A.price)==="∞")&&h=="authenticated"&&e.jsx(Er,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),e.jsx(pe,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:_,children:"Add Liquidity"})]})})]})]})}const Jt=({title:t,price:s,perText:n})=>e.jsxs(U,{flex:"1",children:[e.jsx(k,{children:t}),e.jsx(k,{color:"text_caption",children:s}),e.jsx(k,{children:n})]});function Ti(t,s){const{preAdd:n,getClmmCreateAddData:c,getFarmsCreateAddData:p}=Dr(),[d,o]=j.useState(!1),{currentPriceData:f,apiPoolInfo:i,contractPoolInfo:u}=I(),{lowerTickData:a,upperTickData:l}=ke(),{signAndExecuteTransaction:g,getTransactionStatus:A,transactionSuccess:C}=Wr(),{mevProtect:S,maxCapForGas:R,transactionMode:x,customGasPrice:b}=Ur(),[r,y]=j.useState(!1),[_,h]=j.useState(!1),[m,v]=j.useState(""),{transactionConfirmation:w}=qr(),{fromAmount:L,setFromAmount:q,fromAmountValue:K,setFromAmountValue:M,toAmount:V,setToAmount:Y,toAmountValue:te,setToAmountValue:Z,byAmountIn:H,setByAmountIn:G,isTokenA:B,setIsTokenA:T,percentMap:Q,setPercentMap:J,isFullRange:ne,setIsFullRange:de,fromToken:F,setFromToken:ae,toToken:E,setToToken:D,totalAmount:W,setTotalAmount:P,fromTokenLock:_e,setFromTokenLock:Qe,toTokenLock:He,setToTokenLock:Xe,setTokenMaxA:ks,setTokenMaxB:Ts,tokenMaxA:Bs,tokenMaxB:Fs,autoStakePosition:Ms,liquidityAmount:zs,setLiquidityAmount:Es}=Le(),{getTokenAmountValue:Ze}=ls();Ht(()=>{var N,ce;i&&T(((N=i==null?void 0:i.displayTokenA)==null?void 0:N.coin_type)===((ce=i==null?void 0:i.tokenA)==null?void 0:ce.coin_type))},[i]);const{isWhiteQuoteToken:Ws}=ps(),{notifiSubscription:qs}=Vr(),{isChecked:Mt}=At();Ke(()=>{if(ne){J({percentA:"50",percentB:"50"});return}if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&f.currentSqrtPrice){if(le(a.tick).lte(u.current_tick_index)&&le(l.tick).gt(u.current_tick_index)){const N=Ws(i.tokenA.coin_type)?i.tokenA:i.tokenB,ce=N.coin_type===i.tokenA.coin_type,ge=n({amount:Ie("1",N.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ce,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0}),ve=$r(ge.coinAmountA,ge.coinAmountB,f==null?void 0:f.currentPrice,ne);J(ve);return}if(le(a.tick).gt(u.current_tick_index)){J({percentA:"100",percentB:"0"});return}if(le(l.tick).lte(u.current_tick_index)){J({percentA:"0",percentB:"100"});return}}},[JSON.stringify(i),f,a==null?void 0:a.tick,l==null?void 0:l.tick,ne],{wait:300});const Us=({amount:N,isTokenA:ce,isFullRange:ge})=>{var ve,Te,Be,Fe;if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&Object.keys(f).length>0&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&F&&E){let O;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&le(a==null?void 0:a.tick).lte(u==null?void 0:u.current_tick_index)&&le(l==null?void 0:l.tick).gt(u==null?void 0:u.current_tick_index))O=n({amount:Ie(N&&+N?N+"":"1",H?F==null?void 0:F.decimals:E==null?void 0:E.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ce,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0});else if(_e&&!He){const re=(E==null?void 0:E.coin_type)===((ve=i==null?void 0:i.tokenA)==null?void 0:ve.coin_type);O=n({amount:Ie(N?N+"":"1",E==null?void 0:E.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:re,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else if(He&&!_e){const re=(F==null?void 0:F.coin_type)===((Te=i==null?void 0:i.tokenA)==null?void 0:Te.coin_type);O=n({amount:Ie(N?N+"":"1",F==null?void 0:F.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:re,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else _e&&He&&(O=ce?{coinAmountA:N?N+"":"1",coinAmountB:"",tokenMaxA:N?N+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:N?N+"":"1",tokenMaxA:"",tokenMaxB:N?N+"":"1"});if(ks(O==null?void 0:O.tokenMaxA),Ts(O==null?void 0:O.tokenMaxB),N)if(le(N).gt("0"))if(H){const re=(E==null?void 0:E.coin_type)===((Be=i==null?void 0:i.tokenA)==null?void 0:Be.coin_type)?O==null?void 0:O.coinAmountA:O==null?void 0:O.coinAmountB,me=Ze(F==null?void 0:F.coin_type,N+""),he=Ze(E==null?void 0:E.coin_type,re),we=le(me).plus(he).toString();console.log(re,me,he,we,"_totalAmountValue"),Y(re||""),M(me),Z(he),P(we)}else{const re=(F==null?void 0:F.coin_type)===((Fe=i==null?void 0:i.tokenA)==null?void 0:Fe.coin_type)?O==null?void 0:O.coinAmountA:O==null?void 0:O.coinAmountB,me=Ze(F==null?void 0:F.coin_type,re),he=Ze(E==null?void 0:E.coin_type,N+""),we=le(me).plus(he).toString();console.log(re,me,he,we,"_totalAmountValue"),M(me),Z(he),q(re||""),P(we)}else H?(Y(""),M(""),Z(""),P("")):(q(""),M(""),Z(""),P(""));else q(""),Y(""),M(""),Z(""),P("");O&&Es((O==null?void 0:O.liquidityAmount)||"")}};Ke(()=>{Us({amount:H?L:V,isTokenA:B,isFullRange:ne})},[JSON.stringify(i),f,a==null?void 0:a.tick,l==null?void 0:l.tick,L,V,H,B,_e,He,ne],{wait:300});const $s=(N,ce,ge)=>{G(ce),ce?q(N):Y(N),T(ge!==void 0?ge:!1)},{balanceInfo:Hs}=dt(F),{balanceInfo:Ns}=dt(E);Ht(()=>{var N,ce;T(H?(F==null?void 0:F.coin_type)===((N=i==null?void 0:i.tokenA)==null?void 0:N.coin_type):(E==null?void 0:E.coin_type)===((ce=i==null?void 0:i.tokenA)==null?void 0:ce.coin_type))},[i,H,F,E]),j.useEffect(()=>{(a==null?void 0:a.tick)===at.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(l==null?void 0:l.tick)===at.getMaxIndex(Number((l==null?void 0:l.tickSpacing)||0))?de(!0):de(!1)},[a==null?void 0:a.tick,l==null?void 0:l.tick]),j.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&ie(a)&&ie(l)&&(le(a==null?void 0:a.tick).gte(le(l.tick))?(Qe(!0),Xe(!0)):le(a==null?void 0:a.tick).gt(u==null?void 0:u.current_tick_index)?(Qe(!s),Xe(!!s)):le(l.tick).lte(u==null?void 0:u.current_tick_index)?(Qe(!!s),Xe(!s)):(Qe(!1),Xe(!1)))},[a==null?void 0:a.tick,l==null?void 0:l.tick,u,s]);const{currentAccount:Vs,onWalletModal:Ds}=ot(),Os=fs(()=>{Vs?y(!0):Ds(!0)},300,{leading:!0,trailing:!1}),Gs=()=>{q(""),Y(""),M(""),Z(""),P("")},{fetchAccountBalance:Ks}=os();return{percentMap:Q,handleAmountChange:$s,fromToken:F,setFromToken:ae,toToken:E,setToToken:D,byAmountIn:H,setByAmountIn:G,fromAmount:L,fromAmountValue:K,setFromAmount:q,toAmount:V,toAmountValue:te,setToAmount:Y,liquidityAmount:zs,fromBalanceInfo:Hs,toBalanceInfo:Ns,totalAmount:W,fromTokenLock:_e,toTokenLock:He,handleAdd:Os,confirmModalOpen:r,setConfirmModalOpen:y,nftOpen:_,setNftOpen:h,relatedPosId:m,handleSubmit:async()=>{var he,we,zt;const N=H?L:V,ce=H?F==null?void 0:F.decimals:E==null?void 0:E.decimals,ge=le(N).mul(tr.pow(10,ce)).toString(),ve=H&&(F==null?void 0:F.coin_type)===((he=i==null?void 0:i.tokenA)==null?void 0:he.coin_type)?!0:(E==null?void 0:E.coin_type)===((we=i==null?void 0:i.tokenA)==null?void 0:we.coin_type)&&!H;let Te,Be;const Fe=a.tick,O=l.tick,re=u==null?void 0:u.current_tick_index;Fe!==void 0&&O!==void 0&&re!==void 0&&(re>=Fe&&re<=O?(Te=ve?ge:Bs,Be=ve?Fs:ge):re>O?(Te=0,Be=ge):re<Fe&&(Te=ge,Be=0));let me=[];if(u!=null&&u.index){const{rewarder_infos:oe}=u;me=(oe==null?void 0:oe.length)>0&&(oe==null?void 0:oe.map(Ne=>Ne.coinAddress))||[]}try{const oe={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:Te,amountB:Be,fixAmountA:ve,lowerTick:Fe,upperTick:O,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:me,farmsPoolId:i==null?void 0:i.farmsPoolAddress},Ne={getShowInfo:(ee,Me)=>{const Je="Add "+[tt(L,F==null?void 0:F.symbol),tt(V,E==null?void 0:E.symbol)].filter(Boolean).join(" and "),Pe={modalDescriptionText:Je,toastTitleText:Je};if(ee==="success"){let Et=L,Wt=V;Me&&(Et=Nt(Me,F)||L,Wt=Nt(Me,E)||V);const qt="Add "+[tt(Et,F==null?void 0:F.symbol),tt(Wt,E==null?void 0:E.symbol)].filter(Boolean).join(" and ");Pe.toastDescriptionContent=qt,Pe.modalDescriptionText=qt,Pe.toastTitleText="Supplied Successful"}return Pe}};w(Ne);let yt,mt;if(Ms){const ee=await p(oe);yt=ee==null?void 0:ee.tx,mt=ee==null?void 0:ee.msafeParams}else{const ee=await c(oe);yt=ee==null?void 0:ee.tx,mt=ee==null?void 0:ee.msafeParams}let fe=await g(yt,Ne,{useDevInspect:!0,useMev:S,showSuccessModal:!1,useFastMode:x==="Fast Mode",maxCapForGas:R,customGasPrice:b,msafeParams:mt});if(fe){console.log("🚀🚀🚀 ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",fe),console.log("🚀🚀🚀 ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Mt),((zt=fe==null?void 0:fe.events)==null?void 0:zt.length)===0&&(fe=await A(fe.digest));const{posId:ee,farmsPosId:Me}=sr(fe);if(console.log("🚀 ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:ee,farmsPosId:Me}),ee?(h(!0),v(Me||ee)):C(Ne),Mt){const Je={subscriptionSource:"AddLiquidity",events:fe.events};qs(Je)}Ks(),Gs(),t()}}catch(oe){throw console.error(oe,"handleSubmit ~ error"),new Error(oe)}}}}function Bi(){const{fromAmount:t,toAmount:s,fromToken:n,toToken:c,fromTokenLock:p,toTokenLock:d,liquidityAmount:o}=Le(),{currentAccount:f}=ot(),{balanceInfo:i}=dt(n),{balanceInfo:u}=dt(c),a=j.useMemo(()=>{const l={text:"Add Liquidity",disabled:!1};return f!=null&&f.address?!p&&!d&&(!t||!s||t&&!+t||s&&!+s)||p&&!d&&(!s||s&&!+s)||d&&!p&&(!t||t&&!+t)?(l.text="Enter an amount",l.disabled=!0,l):t&&+t&&$(t).gt((i==null?void 0:i.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(n==null?void 0:n.symbol,10)} Balance`,l):s&&+s&&$(s).gt((u==null?void 0:u.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(c==null?void 0:c.symbol,10)} Balance`,l):((!p&&!d&&(!t||!s)||$(o).lte("0"))&&(l.disabled=!0),l):(l.text="Connect Wallet",l.disabled=!1,l)},[f==null?void 0:f.address,t,s,i==null?void 0:i.balanceDisplay,u==null?void 0:u.balanceDisplay,n,c,p,d,o]);return{btnText:a.text,btnDisabled:a.disabled}}function Fi(){return{getLeverage:(s,n)=>s&&n&&s!=="0"&&n!=="∞"?es(1/(1-Number($(s).div(n).toNumber()**.25)),2)+"x":"1x"}}function Mi({rangeTabList:t}){var K;const{apiPoolInfo:s}=I(),{fromToken:n,toToken:c,setFromToken:p,setToToken:d,byAmountIn:o,setByAmountIn:f,setIsFarmRewardsRange:i,setAutoStakePosition:u,fromTokenLock:a,toTokenLock:l,fromAmount:g,toAmount:A,setFromAmount:C,setToAmount:S}=Le(),{lowerTickData:R,upperTickData:x}=ke(),[b,r]=j.useState(),{handleInitTickData:y}=pt(),{getLeverage:_}=Fi();j.useEffect(()=>{var M;s&&r((M=s==null?void 0:s.displayTokenA)==null?void 0:M.coin_type)},[s==null?void 0:s.poolAddress]);const h=j.useMemo(()=>{var M;return b===((M=s==null?void 0:s.tokenA)==null?void 0:M.coin_type)},[b,(K=s==null?void 0:s.tokenA)==null?void 0:K.coin_type]),m=j.useMemo(()=>{var M,V,Y,te;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":h?`${X((M=s==null?void 0:s.tokenB)==null?void 0:M.symbol,10)} per ${X((V=s==null?void 0:s.tokenA)==null?void 0:V.symbol,10)}`:`${X((Y=s==null?void 0:s.tokenA)==null?void 0:Y.symbol,10)} per ${X((te=s==null?void 0:s.tokenB)==null?void 0:te.symbol,10)}`},[h,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),v=j.useMemo(()=>{const M=R==null?void 0:R.price,V=x==null?void 0:x.price;return _(M,V)},[R==null?void 0:R.price,x==null?void 0:x.price]),w=M=>{i(M.target.checked),M.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&y(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};j.useEffect(()=>{$(R==null?void 0:R.tick).eq($(s==null?void 0:s.farmsEffectiveTickLower))&&$(x==null?void 0:x.tick).eq($(s==null?void 0:s.farmsEffectiveTickUpper))?i(!0):i(!1)},[R==null?void 0:R.tick,x==null?void 0:x.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const L=j.useMemo(()=>(R==null?void 0:R.price)==="0"&&(x==null?void 0:x.price)==="∞",[R==null?void 0:R.price,x==null?void 0:x.price]),q=M=>{var V;M&&(M!=null&&M.coin_type)?r(M==null?void 0:M.coin_type):r((V=t==null?void 0:t.find(Y=>Y.key!==b))==null?void 0:V.key),p(c),d(n),f(!o),o?(S(g),C("")):(C(A),S(""))};return j.useEffect(()=>{s!=null&&s.haveFarming&&u(!(a||l))},[a,l,s==null?void 0:s.haveFarming]),j.useEffect(()=>{o&&a&&!l&&(C(""),S("")),!o&&!a&&l&&(C(""),S("")),o&&!a&&l&&S(""),!o&&a&&!l&&C(""),a&&l&&(C(""),S(""))},[a,l]),{direct:h,perText:m,handleChangeIsFarmRewardsRange:w,onReverseClick:q,leverage:v,currentRangeTab:b,isFullRange:L}}function zi({onClose:t,posId:s,tokenA:n,tokenB:c,fee:p,isReverse:d}){const o=Ye(),[f,i]=j.useState(!0),{lowerTickData:u,upperTickData:a}=ke();return j.useLayoutEffect(()=>{d&&i(!1)},[d]),e.jsxs(ts,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ss,{}),e.jsxs(rs,{w:"400px",children:[e.jsx(is,{children:e.jsxs(z,{justify:"space-between",w:"100%",children:[e.jsx(k,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(pe,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(be,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(ns,{children:e.jsxs(U,{gap:"36px",children:[e.jsxs(U,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(as,{coinAIconUrl:n==null?void 0:n.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:n==null?void 0:n.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),e.jsxs(k,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[X(n==null?void 0:n.symbol,10)," - ",X(c==null?void 0:c.symbol,10)]}),e.jsxs(z,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(k,{fontSize:"14px",children:"Fee tier"}),e.jsx(k,{fontSize:"14px",color:"text_highlight",children:p})]})]}),e.jsxs(U,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(k,{color:"text_caption",whiteSpace:"nowrap",children:[f?Se(u==null?void 0:u.price,6):Se(a==null?void 0:a.reversePrice,6)," - ",f?Se(a==null?void 0:a.price,6):Se(u==null?void 0:u.reversePrice,6)]}),e.jsxs(z,{children:[e.jsxs(z,{gap:"0",children:[e.jsx(k,{color:"primary_gray",children:X(f?d?n==null?void 0:n.symbol:c==null?void 0:c.symbol:d?c==null?void 0:c.symbol:n==null?void 0:n.symbol,10)}),e.jsx(k,{color:"primary_gray",children:" per "}),e.jsx(k,{color:"primary_gray",children:X(f?d?c==null?void 0:c.symbol:n==null?void 0:n.symbol:d?n==null?void 0:n.symbol:c==null?void 0:c.symbol,10)})]}),e.jsx(be,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:l=>{Bt(l),i(!f)}})]})]})]})}),e.jsx(rr,{p:"20px 0 0",children:e.jsx(pe,{flex:"1",onClick:()=>o(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function _s({perText:t,direct:s,minPriceData:n,maxPriceData:c,isFullRange:p=!1}){const{tickDataLoading:d}=ke(),{handleAddPrice:o,handleSubPrice:f,setTickDataBasedOnPrice:i}=pt();return e.jsxs(ye,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(Ot,{title:"Min Price",perText:t,data:n,direct:s,loading:d,handleAddPrice:o,handleSubPrice:f,setTickDataBasedOnPrice:i,isFullRange:p}),e.jsx(Ot,{title:"Max Price",perText:t,data:c,direct:s,loading:d,handleAddPrice:o,handleSubPrice:f,setTickDataBasedOnPrice:i,isFullRange:p})]})}const vs=({minPrice:t,maxPrice:s,perText:n,checked:c,onChange:p,loading:d})=>e.jsxs(z,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(ye,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(z,{children:[e.jsx(hr,{tooltip:e.jsxs(se,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool.  ",e.jsx(se,{as:"a",color:"primary",onClick:o=>{Bt(o),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(k,{children:"Farm rewards range"})]}),e.jsxs(z,{children:[d?e.jsx(Ge,{w:"120px",h:"14px"}):e.jsxs(k,{color:"primary_yellow",children:[t," - ",s]}),e.jsx(k,{children:n})]})]}),e.jsx(_t,{isChecked:c,onChange:p})]}),ws=({disabled:t,checked:s,onChange:n})=>e.jsxs(z,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(k,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(nt,{tooltip:e.jsxs(U,{gap:"4px",align:"flex-start",children:[e.jsx(k,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(k,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(_t,{isChecked:s,disabled:t,maxW:"24px",onChange:n})}):e.jsx(_t,{isChecked:s,disabled:t,maxW:"24px",onChange:n})]}),Ei=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function Cs({direct:t,rangeMap:s,wrapStyle:n={}}){const[c,p]=j.useState({type:"30D",key:"30_d"}),{minPriceForDate:d,maxPriceForDate:o,setMinPriceForDate:f,setMaxPriceForDate:i}=I();j.useEffect(()=>{let a="";if(ie(s)){const g=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],A=t?g:$(1).div(g).toString();a=Se(A,6)}else a="-";f(a);let l="";if(ie(s)){const g=s[`before_${c==null?void 0:c.key}_contract_price_highest`],A=t?g:$(1).div(g).toString();l=Se(A,6)}else l="-";i(l)},[t,c.key,s]);const{isApp:u}=Ae();return e.jsxs(z,{w:"100%",justify:"space-between",...n,children:[e.jsxs(ye,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{children:[e.jsx($e,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(cs,{w:"14px",border:"1px dashed"})}),e.jsxs(k,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type," Price Range"]})]}),e.jsxs(k,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?d:o," - ",t?o:d]})]}),e.jsx(ze,{type:"outlineTab",tabList:Ei,currentTab:c,handleChangeTab:a=>{p({type:a.label,key:a.key})},isActive:(a,l)=>a.key===l.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function Wi(){const{fetchByApi:t}=wt(),[s,n]=j.useState(""),c=async i=>{var u,a,l,g;try{const C=await t(pr,"GET",{pool:i}),S=((a=(u=C==null?void 0:C.list)==null?void 0:u[0])==null?void 0:a.recommend_ranges)||{},R=((g=(l=C==null?void 0:C.list)==null?void 0:l[0])==null?void 0:g.type)||"";console.log("🚀🚀🚀 ~ getRecommendRanges ~ type:",R);const x={};if(S)for(const b in S){const r=S[b];(r!=null&&r.lower||r!=null&&r.upper)&&(x[b]={lower:r.lower,upper:r.upper})}return{ranges:x,type:R}}catch(A){return console.error("Error in getRecommendRanges:",A),{ranges:{},type:""}}},p=(i,u)=>({default:{lower:i,upper:u,sort:3}}),d=i=>({"full range":{lower:at.getMinIndex(i),upper:at.getMaxIndex(i),sort:2}}),o=(i,u,a)=>{const l=$(a).mul(u==="unstable"?2:3).toNumber(),g=ir(Number(i),Number(a));return{custom:{lower:$(g).sub(l).toNumber(),upper:$(g).add(l).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async i=>{try{const u=i.farmsEffectTickLower&&i.farmsEffectTickUpper?p(i.farmsEffectTickLower,i.farmsEffectTickUpper):null,a=i.farmsEffectTickLower&&i.farmsEffectTickUpper?{ranges:{},type:""}:await c(i.poolAddress);n(a.type);const l=d(i.tickSpacing),g=o(i.currentTick,a.type,i.tickSpacing),A={...u,...a.ranges,...l,...g},C=Object.entries(A).map(([S,R])=>({key:S,...R})).sort((S,R)=>R.sort-S.sort);return ie(a.ranges)||ie(u)?{rangeList:C,error:!1}:{rangeList:C,error:!0}}catch(u){return console.error("Error in getRecommendRangesList:",u),{rangeList:[],error:!0}}},poolType:s}}const ft=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},qi=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Ui={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Rs(t){const{getRecommendRangesList:s}=Wi(),[n,c]=j.useState(),{poolAddress:p,currentTick:d,tickSpacing:o,farmsEffectTickLower:f,farmsEffectTickUpper:i}=t;Ae();const{handleInitTickData:u}=pt(),{apiPoolInfo:a,currentRange:l,setCurrentRange:g}=I(),{lowerTickData:A,upperTickData:C,setLowerTickData:S,setUpperTickData:R,setTickDataLoading:x,tickDataLoading:b}=ke(),r=async()=>{var y,_,h;try{l||x(!0);const{rangeList:m,error:v}=await s(t);if(c(m),v){if(g("custom"),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)){const w=m.find(L=>L.key==="custom");w&&u(w==null?void 0:w.lower,w==null?void 0:w.upper,a)}}else g((y=m[0])==null?void 0:y.key),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)&&u((_=m[0])==null?void 0:_.lower,(h=m[0])==null?void 0:h.upper,a)}catch(m){console.error(m)}finally{x(!1)}};return Ke(()=>{p&&d!==void 0&&o!==void 0&&r()},[p,o],{wait:500}),j.useEffect(()=>{if(n&&n.length>0&&ie(A)&&ie(C)){const y=n==null?void 0:n.find(_=>$(_.lower).eq($(A==null?void 0:A.tick))&&$(_.upper).eq($(C==null?void 0:C.tick)));y?y.key!==l&&g(y.key):g("custom")}},[A==null?void 0:A.tick,C==null?void 0:C.tick,n]),e.jsx(e.Fragment,{children:e.jsx(nr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:n&&n.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:n&&n.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:n==null?void 0:n.map((y,_)=>{var h,m;return e.jsx(ar,{label:qi(y.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(U,{cursor:"pointer",textAlign:"center",width:{base:n!=null&&n.length?Ui[n.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{y.key!==l&&(g(y.key),a!=null&&a.tokenA&&(a!=null&&a.tokenB)&&u(y.lower,y.upper,a))},bg:y.key==l?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Vt,{decoding:"async",display:y.key===l?"block":"none",src:`/images/${(h=ft(y.key,!0))==null?void 0:h.image}`,w:"72px",h:y.key===l?"22px":"0px",fallback:e.jsx(se,{bg:"background",w:"72px",h:y.key===l?"22px":"0px",borderRadius:"4px"})}),e.jsx(Vt,{decoding:"async",display:y.key===l?"none":"block",src:`/images/${(m=ft(y.key,!1))==null?void 0:m.image}`,w:"72px",h:y.key===l?"0px":"22px",fallback:e.jsx(se,{bg:"background",w:"72px",h:y.key===l?"0px":"22px",borderRadius:"4px"})}),e.jsx(k,{color:y.key==l?"primary":"primary_gray",fontSize:"12px",children:ft(y.key).name})]})},y.key)})})})}function Ls(t){var S,R,x,b,r;const[s,n]=j.useState(!1),{displayTokenA:c,displayTokenB:p,feeDisplay:d,clmmPool:o,vaultId:f,isReverse:i,isUnstableVault:u}=t,[a,l]=j.useState(""),{vaultStatsObj:g}=Or(),{getVaultsStats:A}=Gr();j.useEffect(()=>{if(ie(g)&&g[o]){const y=g[o];l(y.category=="cetus"?y.vaultsTotalApyDisplay:y.vaultsApyDisplay)}else A()},[g,o]);const{isApp:C}=Ae();return e.jsxs(e.Fragment,{children:[e.jsxs(U,{width:C?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(z,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(k,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(z,{children:[e.jsx(ue,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(Kr,{vaultsLstApyDisplay:((S=g[o])==null?void 0:S.vaultsLstApyDisplay)||"",vaultsApyDisplay:((R=g[o])==null?void 0:R.vaultsApyDisplay)||"",vaultsTotalApyDisplay:((x=g[o])==null?void 0:x.vaultsTotalApyDisplay)||"",vaultsAprDisplay:(b=g[o])==null?void 0:b.vaultsAprDisplay,category:(r=g[o])==null?void 0:r.category}),value:a||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(pe,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>n(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(z,{w:"100%",mt:"14px",children:e.jsxs(k,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",u?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(br,{isOpen:s,setIsOpen:n,displayTokenA:c,displayTokenB:p,feeDisplay:d,clmmPool:o,vaultId:f,isReverse:i,isUnstableVault:u})]})}function $i({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:n,onReverseClick:c,leverage:p,direct:d,perText:o,rangeTabList:f,currentRangeTab:i,addressHistTokensMap:u,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:g,toAmountValue:A,handleAmountChange:C,handleAdd:S,isFullRange:R}){var E;const{currentPriceData:x,contractPoolInfo:b,apiPoolInfo:r,resetLiquidity:y,contractPoolInfoLoading:_,apiPoolInfoLoading:h,minPriceForDate:m,maxPriceForDate:v}=I(),{lowerTickData:w,upperTickData:L}=ke(),{autoStakePosition:q,setAutoStakePosition:K,isFarmRewardsRange:M,fromAmount:V,toAmount:Y,byAmountIn:te,percentMap:Z,fromToken:H,toToken:G,totalAmount:B,fromTokenLock:T,toTokenLock:Q}=Le(),{poolAddress:J}=xe(),ne=D=>{K(D.target.checked)},de=j.useMemo(()=>{if(x!=null&&x.currentPrice&&x.pool===J)return x==null?void 0:x.currentPrice},[x==null?void 0:x.currentPrice]),{priceImpactBasedOnMarket:F}=ms(H,G,d?"1":Ue(de),d?Ue(de):"1",!0),ae=j.useMemo(()=>{if(F&&$(F).abs().gte(30))return $(F).gte(30)?`+${$(F).toFixed(0)}%`:`${$(F).toFixed(0)}%`},[F]);return j.useMemo(()=>!!(r!=null&&r.haveFarming)&&!!(r!=null&&r.displayFarmsEffectMaxPrice)&&!!(r!=null&&r.displayFarmsEffectMinPrice),[r==null?void 0:r.haveFarming,r==null?void 0:r.displayFarmsEffectMaxPrice,r==null?void 0:r.displayFarmsEffectMinPrice]),e.jsxs(se,{w:"100%",children:[e.jsx(Oe,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx(Rs,{poolAddress:J,currentTick:b==null?void 0:b.current_tick_index,tickSpacing:b==null?void 0:b.tickSpacing,farmsEffectTickLower:r==null?void 0:r.farmsEffectiveTickLower,farmsEffectTickUpper:r==null?void 0:r.farmsEffectiveTickUpper}),h?e.jsx(Ge,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(ze,{type:"outlineTab",tabList:f,currentTab:i,handleChangeTab:D=>c(D),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(ys,{price:Ue(d?x==null?void 0:x.currentPrice:x.reverseCurrentPrice,6),perText:o,loading:_,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(U,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(xs,{handleClickRefresh:()=>{},direct:d,minPriceData:d?w:L,maxPriceData:d?L:w,dashedMarkerLine:[m,v]})}),ae&&e.jsx(kt,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",children:e.jsxs(z,{children:[e.jsx(be,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),e.jsx(k,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${ae}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),e.jsx(Cs,{direct:d,rangeMap:u,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(U,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(_s,{perText:o,direct:d,isFullRange:R,minPriceData:d?w:L,maxPriceData:d?L:w}),T&&Q&&e.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),e.jsxs(U,{mb:"20px",gap:"16px",children:[e.jsx(xt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(k,{color:"text_caption",children:T&&Q?"--":p})}),(r==null?void 0:r.haveFarming)&&(r==null?void 0:r.displayFarmsEffectMaxPrice)&&(r==null?void 0:r.displayFarmsEffectMinPrice)&&e.jsx(vs,{minPrice:d?ct(r==null?void 0:r.displayFarmsEffectMinPrice):lt(r==null?void 0:r.displayFarmsEffectMaxPrice),maxPrice:d?ct(r==null?void 0:r.displayFarmsEffectMaxPrice):lt(r==null?void 0:r.displayFarmsEffectMinPrice),loading:h,perText:o,checked:M,onChange:n})]}),e.jsx(se,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:e.jsxs(U,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsx(Oe,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsx(z,{children:e.jsx(gs,{})})]}),e.jsxs(U,{w:"100%",gap:"12px",children:[e.jsxs(se,{w:"100%",position:"relative",children:[e.jsx(hs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:V+"",amountValue:g,loading:!1,onChange:D=>{var W;C(D,!0,(H==null?void 0:H.coin_type)===((W=r==null?void 0:r.tokenA)==null?void 0:W.coin_type))},selectable:!1,placeholder:"0.0",token:H,onFocusChange:D=>{var W;D&&+(V+"")&&!te&&C(V+"",!0,(H==null?void 0:H.coin_type)===((W=r==null?void 0:r.tokenA)==null?void 0:W.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:Y+"",amountValue:A,loading:!1,onFocusChange:D=>{var W;D&&+(Y+"")&&te&&C(Y+"",!1,(G==null?void 0:G.coin_type)===((W=r==null?void 0:r.tokenA)==null?void 0:W.coin_type))},onChange:D=>{var W;C(D,!1,(G==null?void 0:G.coin_type)===((W=r==null?void 0:r.tokenA)==null?void 0:W.coin_type))},selectable:!1,placeholder:"0.0",token:G},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),T&&Q&&e.jsx(ut,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((E=[T,Q].filter(Boolean))==null?void 0:E.length)===1&&e.jsx(ut,{position:"absolute",top:T?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(r!=null&&r.poolAddress)&&e.jsx(e.Fragment,{children:e.jsxs(U,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"12px 8px",children:[e.jsx(ue,{isLoading:!1,label:"Total Amount",value:B&&+B?Tt(B):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),e.jsx(xt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:e.jsx(U,{justify:"flex-end",gap:"4px",children:[H,G].filter(Boolean).map((D,W)=>{var P;return e.jsxs(z,{gap:"4px",justify:"flex-end",w:"100%",children:[e.jsx(Ee,{imageUrl:D==null?void 0:D.logo_url,coinType:D==null?void 0:D.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),e.jsxs(k,{color:W===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(D==null?void 0:D.symbol,10)," ",T&&Q?"--":Z[(D==null?void 0:D.coin_type)===((P=r==null?void 0:r.tokenA)==null?void 0:P.coin_type)?"percentA":"percentB"],"%"]})]},D==null?void 0:D.coin_type)})})}),(r==null?void 0:r.haveFarming)&&e.jsx(ws,{disabled:T||Q,checked:q,onChange:ne})]})})]}),!!(r!=null&&r.poolAddress)&&e.jsx(pe,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:S,children:t})]})}),((r==null?void 0:r.isVaults)||(r==null?void 0:r.isUnstableVault))&&e.jsx(U,{mt:"16px",children:e.jsx(Ls,{displayTokenA:r==null?void 0:r.displayTokenA,displayTokenB:r==null?void 0:r.displayTokenB,feeDisplay:r==null?void 0:r.feeDisplay,clmmPool:r==null?void 0:r.poolAddress,vaultId:r==null?void 0:r.vaultId,isReverse:r==null?void 0:r.isReverse,isUnstableVault:r==null?void 0:r.isUnstableVault})})]})}function Pt({children:t,title:s,wrapStyle:n={}}){return e.jsxs(U,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...n,children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(k,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Hi({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:n,onReverseClick:c,leverage:p,direct:d,perText:o,rangeTabList:f,currentRangeTab:i,addressHistTokensMap:u,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:g,toAmountValue:A,handleAmountChange:C,handleAdd:S,isFullRange:R}){var D;const{currentPriceData:x,contractPoolInfo:b,apiPoolInfo:r,resetLiquidity:y,contractPoolInfoLoading:_,apiPoolInfoLoading:h,minPriceForDate:m,maxPriceForDate:v,currentRange:w}=I();console.log("🚀🚀🚀 ~ PC.tsx:53 ~ apiPoolInfo:",r);const{lowerTickData:L,upperTickData:q}=ke(),{autoStakePosition:K,setAutoStakePosition:M,isFarmRewardsRange:V,fromAmount:Y,toAmount:te,byAmountIn:Z,percentMap:H,fromToken:G,toToken:B,totalAmount:T,fromTokenLock:Q,toTokenLock:J}=Le(),{poolAddress:ne}=xe(),de=W=>{M(W.target.checked)},F=j.useMemo(()=>{if(x!=null&&x.currentPrice&&x.pool===ne)return x==null?void 0:x.currentPrice},[x==null?void 0:x.currentPrice]),{priceImpactBasedOnMarket:ae}=ms(G,B,d?"1":Ue(F),d?Ue(F):"1",!0),E=j.useMemo(()=>{if(ae&&$(ae).abs().gte(30))return $(ae).gte(30)?`+${$(ae).toFixed(0)}%`:`${$(ae).toFixed(0)}%`},[ae]);return e.jsx(e.Fragment,{children:e.jsxs(z,{gap:"12px",align:"flex-start",children:[e.jsxs(Pt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!f||!f.length?e.jsx(Ge,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(ze,{type:"outlineTab",tabList:f,currentTab:i,handleChangeTab:W=>c(W),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(U,{w:"100%",gap:"12px",children:[e.jsx(z,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(U,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(z,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(ys,{loading:h,price:ie(x)?Ue(d?x==null?void 0:x.currentPrice:x.reverseCurrentPrice,6):"--",perText:o,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(z,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(U,{gap:"20px",children:[e.jsx($e,{h:"226px",mt:"10px",children:e.jsx(Rs,{poolAddress:ne,currentTick:b==null?void 0:b.current_tick_index,tickSpacing:b==null?void 0:b.tickSpacing,farmsEffectTickLower:r==null?void 0:r.farmsEffectiveTickLower,farmsEffectTickUpper:r==null?void 0:r.farmsEffectiveTickUpper})}),ie(L)&&ie(q)&&e.jsx(e.Fragment,{children:e.jsx(xt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(k,{color:"text_caption",children:Q&&J?"--":p})})})]}),e.jsxs(U,{w:"100%",gap:"32px",children:[e.jsx(se,{w:"100%",h:"230px",children:e.jsx(xs,{handleClickRefresh:()=>{},direct:d,minPriceData:d?L:q,maxPriceData:d?q:L,dashedMarkerLine:[m,v],currentRange:w})}),E&&e.jsx(kt,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",children:e.jsxs(z,{children:[e.jsx(be,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),e.jsx(k,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${E}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),ie(L)&&ie(q)&&e.jsx(Cs,{direct:d,rangeMap:u,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(_s,{perText:o,direct:d,isFullRange:R,minPriceData:d?L:q,maxPriceData:d?q:L}),Q&&J&&e.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(r==null?void 0:r.haveFarming)&&(r==null?void 0:r.displayFarmsEffectMaxPrice)&&(r==null?void 0:r.displayFarmsEffectMinPrice)&&e.jsx(vs,{minPrice:d?ct(r==null?void 0:r.displayFarmsEffectMinPrice):lt(r==null?void 0:r.displayFarmsEffectMaxPrice),maxPrice:d?ct(r==null?void 0:r.displayFarmsEffectMaxPrice):lt(r==null?void 0:r.displayFarmsEffectMinPrice),loading:h,perText:o,checked:V,onChange:n})]})]}),e.jsxs(U,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(Pt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(z,{children:e.jsx(gs,{})}),e.jsxs(se,{w:"100%",position:"relative",children:[e.jsx(hs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:Y,amountValue:g,loading:!1,onChange:W=>{var P;C(W,!0,(G==null?void 0:G.coin_type)===((P=r==null?void 0:r.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:G,onFocusChange:W=>{var P;W&&+(Y+"")&&!Z&&C(Y+"",!0,(G==null?void 0:G.coin_type)===((P=r==null?void 0:r.tokenA)==null?void 0:P.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:te,amountValue:A,loading:!1,onFocusChange:W=>{var P;W&&+(te+"")&&Z&&C(te+"",!1,(B==null?void 0:B.coin_type)===((P=r==null?void 0:r.tokenA)==null?void 0:P.coin_type))},onChange:W=>{var P;C(W,!1,(B==null?void 0:B.coin_type)===((P=r==null?void 0:r.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:B},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),Q&&J&&e.jsx(ut,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((D=[Q,J].filter(Boolean))==null?void 0:D.length)===1&&e.jsx(ut,{position:"absolute",top:Q?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),e.jsxs(e.Fragment,{children:[e.jsx(U,{w:"100%",gap:"8px",children:!!(r!=null&&r.poolAddress)&&(!Q||!J)&&e.jsxs(U,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:r!=null&&r.displayTokenA&&(r!=null&&r.displayTokenB)?"0 8px 8px":"0 16px",children:[e.jsx(pe,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:S,children:t}),(r==null?void 0:r.displayTokenA)&&(r==null?void 0:r.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{isLoading:!1,label:"Total Amount",value:T&&+T?Tt(T):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),e.jsx(xt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:e.jsx(z,{gap:"12px",children:[G,B].filter(Boolean).map((W,P)=>{var _e;return e.jsxs(z,{gap:"4px",children:[e.jsx(Ee,{imageUrl:W==null?void 0:W.logo_url,coinType:W?W==null?void 0:W.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),e.jsxs(k,{color:P===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(W==null?void 0:W.symbol,10)," ",Q&&J?"--":H[(W==null?void 0:W.coin_type)===((_e=r==null?void 0:r.tokenA)==null?void 0:_e.coin_type)?"percentA":"percentB"],"%"]})]},W==null?void 0:W.coin_type)})})}),(r==null?void 0:r.haveFarming)&&e.jsx(ws,{disabled:Q||J,checked:K,onChange:de})]})]})}),((r==null?void 0:r.isVaults)||(r==null?void 0:r.isUnstableVault))&&e.jsx(Ls,{displayTokenA:r==null?void 0:r.displayTokenA,displayTokenB:r==null?void 0:r.displayTokenB,feeDisplay:r==null?void 0:r.feeDisplay,clmmPool:r==null?void 0:r.poolAddress,vaultId:r==null?void 0:r.vaultId,isReverse:r==null?void 0:r.isReverse,isUnstableVault:r==null?void 0:r.isUnstableVault})]})]})]})})}function Ni({rangeTabList:t,currentFeeTier:s,addressHistTokensMap:n,getList:c,getPrice:p}){const{apiPoolInfo:d}=I(),{direct:o,perText:f,handleChangeIsFarmRewardsRange:i,onReverseClick:u,leverage:a,currentRangeTab:l,isFullRange:g}=Mi({rangeTabList:t}),{handleAmountChange:A,fromAmountValue:C,toAmountValue:S,fromBalanceInfo:R,toBalanceInfo:x,confirmModalOpen:b,setConfirmModalOpen:r,relatedPosId:y,nftOpen:_,setNftOpen:h,handleAdd:m,handleSubmit:v}=Ti(c,o),{btnText:w,btnDisabled:L}=Bi(),{isApp:q}=Ae(),K={btnText:w,btnDisabled:L,handleChangeIsFarmRewardsRange:i,onReverseClick:u,leverage:a,direct:o,perText:f,rangeTabList:t,currentRangeTab:l,addressHistTokensMap:n,fromBalanceInfo:R,toBalanceInfo:x,fromAmountValue:C,toAmountValue:S,handleAmountChange:A,handleAdd:m,isFullRange:g};return e.jsxs(e.Fragment,{children:[q?e.jsx($i,{...K}):e.jsx(Hi,{...K}),b&&e.jsx(ki,{onClose:()=>r(!1),data:{feeTier:s},onSubmit:v}),_&&y&&ie(d)&&e.jsx(zi,{onClose:()=>h(!1),tokenA:d==null?void 0:d.displayTokenA,tokenB:d==null?void 0:d.displayTokenB,posId:y,fee:d==null?void 0:d.feeDisplay,isReverse:d==null?void 0:d.isReverse})]})}const It=(t,s,n)=>t&&s&&n?$(t).mul(s).div($(10).pow(n)).toString():"--";function Vi(){var h,m;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:n,setTokenBPrice:c,tokenAAmount:p,setTokenAAmount:d,tokenBAmount:o,setTokenBAmount:f,tokenAAmountUSD:i,setTokenAAmountUSD:u,tokenBAmountUSD:a,setTokenBAmountUSD:l,totalAmountUSD:g,setTotalAmountUSD:A,resetTvlInfo:C,tvlLoading:S,setTvlLoading:R}=gt(),{apiPoolInfo:x,contractPoolInfo:b}=I(),r=async v=>{var w,L;try{const q=(w=je(v))==null?void 0:w.full_address,K=q=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":q,{prices:M}=await cr(`${(L=vt)==null?void 0:L.cetus_api}/v2/sui/price?base_symbol_address=${K}`);return M==null?void 0:M[0]}catch(q){return console.log("🚀🚀🚀 ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",q),"--"}},{poolAddress:y}=xe(),_=async()=>{var v,w,L,q;R(!0);try{if((v=x==null?void 0:x.tokenA)!=null&&v.coin_type){const K=await r((w=x==null?void 0:x.tokenA)==null?void 0:w.coin_type);K&&s(K)}if((L=x==null?void 0:x.tokenB)!=null&&L.coin_type){const K=await r((q=x==null?void 0:x.tokenB)==null?void 0:q.coin_type);K&&c(K)}}catch(K){console.log("🚀 ~ PoolInfo ~ handleRefresh:",K)}finally{R(!1)}};return j.useEffect(()=>{C()},[y]),j.useEffect(()=>()=>{C()},[]),j.useEffect(()=>{_()},[x==null?void 0:x.tvl,(h=x==null?void 0:x.tokenA)==null?void 0:h.coin_type,(m=x==null?void 0:x.tokenB)==null?void 0:m.coin_type]),j.useEffect(()=>{b!=null&&b.coinAmountA&&d($(b==null?void 0:b.coinAmountA).sub((b==null?void 0:b.fee_protocol_coin_a)||"0").toString())},[b==null?void 0:b.coinAmountA,b==null?void 0:b.fee_protocol_coin_a]),j.useEffect(()=>{b!=null&&b.coinAmountB&&f($(b==null?void 0:b.coinAmountB).sub((b==null?void 0:b.fee_protocol_coin_b)||"0").toString())},[b==null?void 0:b.coinAmountB,b==null?void 0:b.fee_protocol_coin_b]),j.useEffect(()=>{p&&(t!=null&&t.price)&&(x!=null&&x.tokenA.decimals)&&!Number.isNaN(Number(x==null?void 0:x.tokenA.decimals))&&u(It(p,t==null?void 0:t.price,x==null?void 0:x.tokenA.decimals))},[p,t]),j.useEffect(()=>{o&&(n!=null&&n.price)&&(x!=null&&x.tokenB.decimals)&&!Number.isNaN(Number(x==null?void 0:x.tokenB.decimals))&&l(It(o,n==null?void 0:n.price,x==null?void 0:x.tokenB.decimals))},[o,n]),j.useEffect(()=>{A(i&&a&&i!=="--"&&a!=="--"?$(i).plus(a).toString():"--")},[i,a]),{tokenAPrice:t,tokenBPrice:n,tokenAAmount:p,tokenBAmount:o,tokenAAmountUSD:i,tokenBAmountUSD:a,totalAmountUSD:g,setTotalAmountUSD:A,tvlLoading:S}}function Di(){const{tab:t,poolAddress:s,from:n,to:c,fee:p}=xe(),{getPoolList:d}=Hr(),[o,f]=j.useState([]),{apiPoolInfo:i,setApiPoolInfo:u,setApiPoolInfoLoading:a,setNetError:l}=I(),g=Ye(),{fetchTokenInfo:A}=bs(),C=async({poolAddress:S,from:R,to:x})=>{var b,r,y,_;try{a(!0);let h,m;if(S&&S!=="undefined"){const v=await d({pool:S});v&&v.list&&v.list.length?(m=v.list[0],h=await d({coin_type:`${(b=m==null?void 0:m.displayTokenA)==null?void 0:b.coin_type},${(r=m==null?void 0:m.displayTokenB)==null?void 0:r.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):i&&ie(i)?(m=i,h={list:o}):(m={poolAddress:S,displayTokenA:void 0,displayTokenB:void 0},h={list:[]}),a(!1)}else if(R&&x&&R!=="undefined"&&x!=="undefined"&&R!==x){const v=await d({coin_type:`${R},${x}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(v,"res_getPoolList"),v&&v.list&&v.list.length)if(p&&p!=="undefined"){const w=(y=v==null?void 0:v.list)==null?void 0:y.find(L=>$(L==null?void 0:L.feeRate).eq(p));if(w)g(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`);else{const L=ht(v==null?void 0:v.list,q=>Number((q==null?void 0:q.tvl)||"0"));g(t?`/liquidity?tab=${t}&poolAddress=${L==null?void 0:L.poolAddress}`:`/liquidity?poolAddress=${L==null?void 0:L.poolAddress}`)}}else{let w=ht(v==null?void 0:v.list,L=>Number((L==null?void 0:L.tvl)||"0"));w||(w=ht(v==null?void 0:v.list,L=>{var q;return Number(((q=L==null?void 0:L.object)==null?void 0:q.liquidity)||"0")}),w||(w=v==null?void 0:v.list[0])),g(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`)}else{const w=await A(R),L=await A(x);m={poolAddress:void 0,displayTokenA:w,displayTokenB:L},h={list:[]},a(!1)}}else(!R||R==="undefined")&&x&&x!=="undefined"&&(m={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await A(x)}),(!x||x==="undefined")&&R&&R!=="undefined"&&(m={poolAddress:void 0,displayTokenA:await A(R),displayTokenB:void 0}),h={list:[]},a(!1);h&&(l(!1),f(h==null?void 0:h.list),console.log(m,"setApiPoolInfo"),m&&(m!=null&&m.poolAddress&&S?(m==null?void 0:m.poolAddress)===S&&u(m):u(m))),a(!1)}catch(h){if(h!=null&&h.list&&((_=h==null?void 0:h.list)==null?void 0:_.length)===1){l(!0);const m=h==null?void 0:h.list[0];console.log(h==null?void 0:h.list,"setApiPoolInfo"),u(m),f([]),a(!1)}}};return j.useEffect(()=>{s&&s==="undefined"||C({poolAddress:s,from:n,to:c})},[s,n,c]),{getList:C,relatedPoolList:o}}function Oi(){var S,R,x,b;const{poolAddress:t}=xe(),{apiPoolInfo:s,apiPoolInfoLoading:n}=I(),[c,p]=j.useState(),{fetchByApi:d}=wt(),{quoteWhiteTokenList:o}=ps(),{getList:f,relatedPoolList:i}=Di(),u=j.useMemo(()=>{var y,_;const r=Yr(i);return r?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(y=Gt)==null?void 0:y.map(h=>{var v,w;const m=((v=r.find(L=>L.feeRate===h.feeRate))==null?void 0:v.title)||h.title;return{...h,title:m,poolAddress:(w=r.find(L=>L.feeRate===h.feeRate))==null?void 0:w.poolAddress,disabled:m==="Not Created"&&!qe(s==null?void 0:s.tokenA,o)&&!qe(s==null?void 0:s.tokenB,o)}}):(_=Gt)==null?void 0:_.map(h=>{var v,w;const m=((v=r.find(L=>L.feeRate===h.feeRate))==null?void 0:v.title)||h.title;return{...h,title:m,poolAddress:(w=r.find(L=>L.feeRate===h.feeRate))==null?void 0:w.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,o)&&!qe(s==null?void 0:s.displayTokenB,o)}}):[]},[JSON.stringify(i),JSON.stringify(o),(S=s==null?void 0:s.displayTokenA)==null?void 0:S.coin_type,(R=s==null?void 0:s.displayTokenB)==null?void 0:R.coin_type]),a=j.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(r=>({label:r==null?void 0:r.symbol,key:r==null?void 0:r.coin_type,isToken:!0,imgInfo:{src:r==null?void 0:r.logo_url,w:"16px",h:"16px",coinType:r?r==null?void 0:r.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(x=s==null?void 0:s.displayTokenA)==null?void 0:x.symbol,(b=s==null?void 0:s.displayTokenB)==null?void 0:b.symbol]),l=j.useMemo(()=>{const r=u==null?void 0:u.find(y=>y.poolAddress===t);return r||s},[JSON.stringify(u),t,JSON.stringify(s)]),g=async r=>{console.log("🚀 ~ setAddressHistTokens ~ this.addressHistTokens:🚀 ~ getContractPrices ~ address:",r);let y=[];const _=await d(gr,"GET",{pool:r});console.log(_,"resVal"),y=Object.fromEntries(_.list.map(h=>[h.swap_account,h])),p(y)};j.useEffect(()=>{t&&g(t)},[t]);const A=j.useMemo(()=>{var r,y,_;return c&&t&&((r=c==null?void 0:c[t])!=null&&r.data)?Object.fromEntries((_=(y=c==null?void 0:c[t])==null?void 0:y.data)==null?void 0:_.map(h=>[h.key,h.value])):{}},[JSON.stringify(c)]),C=j.useMemo(()=>{const r=[];return s!=null&&s.displayTokenA&&r.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&r.push(s==null?void 0:s.displayTokenB),r},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:f,feeTierList:u,apiPoolInfo:s,rangeTabList:a,currentFeeTier:l,addressHistTokensMap:A,apiPoolInfoLoading:n,quoteWhiteTokenList:o,warningTokenList:C}}var Ve=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(Ve||{});const Ce=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Gi({apiPoolInfo:t}){var Z,H,G;const{tab:s,poolAddress:n}=xe(),c=Ye(),[p,d]=j.useState(),[o,f]=j.useState(Ce),[i,u]=j.useState(((Z=Ce==null?void 0:Ce.find(B=>B.key===s))==null?void 0:Z.key)||Ce[0].key),[a,l]=j.useState(),[g,A]=j.useState(),{posBaseListGroupByPool:C}=us(),{addFavorites:S,removeFavorites:R}=Xr(),{poolFavoriteIds:x}=Zr(),{fromToken:b,toToken:r}=Le(),{fetchTokenPrices:y}=ls();Ae();const{setFromCoin:_,setToCoin:h,fromCoin:m,toCoin:v}=Jr(),{setIsOpen:w}=Pr(),{isSwapWidgetDisplay:L}=lr(),q=()=>{var B,T;L?w(!0):c(`/swap/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(T=t==null?void 0:t.displayTokenB)==null?void 0:T.coin_type}`)};j.useEffect(()=>(b&&r&&(_(b),h(r)),()=>{_(vt.clmm_swap.from_coin),h(vt.clmm_swap.to_coin)}),[b,r]);const K=j.useMemo(()=>{if(n&&n!=="undefined"){const B=C[n.toLowerCase()||""];return B&&(B!=null&&B.list)&&(B==null?void 0:B.list.length)>0?B==null?void 0:B.list.length:void 0}},[JSON.stringify(C),n]);j.useEffect(()=>{f(Ce==null?void 0:Ce.map(B=>({...B,num:B.label==="My Positions"&&i==="positions"?K:void 0})))},[K,i]),j.useLayoutEffect(()=>{s&&s!==i&&u(s)},[s]);const M=j.useMemo(()=>x==null?void 0:x.includes(n||""),[JSON.stringify(x),n]),V=B=>{Bt(B),n&&(M?R(n):S(n))};j.useEffect(()=>{l(t==null?void 0:t.displayTokenA),A(t==null?void 0:t.displayTokenB)},[(H=t==null?void 0:t.displayTokenA)==null?void 0:H.coin_type,(G=t==null?void 0:t.displayTokenB)==null?void 0:G.coin_type]);const Y=()=>{var B,T;c(`/create-pool/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(T=t==null?void 0:t.displayTokenB)==null?void 0:T.coin_type}/${p==null?void 0:p.feeRate}`)},te=()=>{const B=[];b&&B.push(b.coin_type),r&&B.push(r.coin_type),B.length>0&&y(B)};return j.useEffect(()=>{te()},[b==null?void 0:b.coin_type,r==null?void 0:r.coin_type]),{currentTab:i,setCurrentTab:u,tabList:o,isFavoritePool:M,onChangeFavorites:V,selectedTokenA:a,selectedTokenB:g,setSelectedTokenA:l,setSelectedTokenB:A,onConfirm:Y,feeTier:p,setFeeTier:d,refreshMarketPrice:te,onJump2Swap:q}}function Ki(){const{currentAccount:t}=ot(),{apiPoolInfo:s,resetLiquidity:n,setManualRefresh:c,setCurrentPriceData:p}=I(),{feeTierList:d,currentFeeTier:o,rangeTabList:f,addressHistTokensMap:i,getList:u,quoteWhiteTokenList:a,warningTokenList:l}=Oi(),{poolAddress:g}=xe(),{handleResetRange:A}=pt(),{resetAddLiquidity:C,setFromToken:S,setToToken:R}=Le(),{fetchAccountBalance:x}=os(),{getContractPoolInfo:b}=Br(),{getCurrentPrice:r}=Fr(),{currentTab:y,setCurrentTab:_,tabList:h,isFavoritePool:m,onChangeFavorites:v,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:q,setSelectedTokenB:K,onConfirm:M,setFeeTier:V,refreshMarketPrice:Y,onJump2Swap:te}=Gi({apiPoolInfo:s});j.useEffect(()=>{ie(s)&&(S(s==null?void 0:s.displayTokenA),R(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const Z=async()=>{if(g&&s&&g===(s==null?void 0:s.poolAddress)){const B=await b(g);B&&r(B==null?void 0:B.current_sqrt_price,s)}},H=()=>{Y==null||Y(),Z==null||Z()},G=async B=>{console.log("🚀 ~ handleRefresh ~ handleRefresh111:"),B&&c(!0),g&&g!=="undefined"&&await u({poolAddress:g}),t!=null&&t.address&&await x(),H(),c(!1)};return j.useEffect(()=>(t!=null&&t.address&&x(),p({}),()=>{A(),C(),n()}),[]),j.useEffect(()=>{g&&(s==null?void 0:s.poolAddress)!==g&&(A(),C(),n()),g&&g===(s==null?void 0:s.poolAddress)&&Z()},[g,s==null?void 0:s.poolAddress]),{feeTierList:d,currentFeeTier:o,rangeTabList:f,addressHistTokensMap:i,quoteWhiteTokenList:a,warningTokenList:l,currentTab:y,setCurrentTab:_,tabList:h,isFavoritePool:m,onChangeFavorites:v,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:q,setSelectedTokenB:K,onConfirm:M,setFeeTier:V,handleRefresh:G,handleGetPrice:Z,onJump2Swap:te}}function pa(){const t=Ye(),{apiPoolInfo:s,apiPoolInfoLoading:n,currentPriceData:c,setApiPoolInfo:p,netError:d}=I(),{poolAddress:o,from:f,to:i}=xe(),{feeTierList:u,currentFeeTier:a,rangeTabList:l,addressHistTokensMap:g,quoteWhiteTokenList:A,warningTokenList:C,currentTab:S,setCurrentTab:R,tabList:x,isFavoritePool:b,onChangeFavorites:r,selectedTokenA:y,selectedTokenB:_,setSelectedTokenA:h,setSelectedTokenB:m,onConfirm:v,setFeeTier:w,handleRefresh:L,handleGetPrice:q,onJump2Swap:K}=Ki(),{getTokenInfo:M}=bs(),{isApp:V}=Ae(),{isOpen:Y,onOpen:te,onClose:Z}=dr(),{totalAmountUSD:H,tvlLoading:G,setTotalAmountUSD:B}=Vi();return e.jsxs(e.Fragment,{children:[e.jsxs(se,{w:"100%",mt:"20px",children:[e.jsxs(z,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(ur,{text:"Pools",onClick:()=>t("/pools")}),o&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&e.jsxs(z,{gap:"8px",children:[e.jsx(nt,{placement:"top",tooltip:b?"Remove from Watchlist":"Add to Watchlist",children:e.jsx(pe,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:r,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:b?"primary":"text_caption"}}},children:e.jsx(be,{xlinkHref:b?"#icon-icon_star_sel":"#icon-icon_star",svgFill:b?"primary_blue":"text_paragraph",svgHover:b?"primary":"text_caption",fontSize:"18px"})})}),e.jsx(nt,{placement:"top",tooltip:"Trade",children:e.jsx(pe,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:K,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(be,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(nt,{placement:"top",tooltip:"Refresh",children:e.jsx(se,{children:e.jsx(Ir,{handleRefresh:L,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},o)})})]})]}),e.jsxs(ye,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(ye,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Dt,{value:y||(f?M(f):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:T=>{var J,ne,de,F;const Q=Object.keys(Ve).find(ae=>ae===S);if(_!=null&&_.coin_type||(J=M(i))!=null&&J.coin_type)if(je(T==null?void 0:T.coin_type).full_address===je((_==null?void 0:_.coin_type)||((ne=M(i))==null?void 0:ne.coin_type)||"").full_address)h(_),m(y);else{if(je(T==null?void 0:T.coin_type).full_address===je((y==null?void 0:y.coin_type)||((de=M(f))==null?void 0:de.coin_type)||"").full_address)return;t(`/liquidity?tab=${Q}&from=${T==null?void 0:T.coin_type}&to=${(_==null?void 0:_.coin_type)||((F=M(i))==null?void 0:F.coin_type)}`),p(null),B("")}else t(`/liquidity?tab=${Q}&from=${T==null?void 0:T.coin_type}`),p(null),B("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!y&&n}),e.jsx(Dt,{value:_||(i?M(i):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:T=>{var J,ne,de,F;const Q=Object.keys(Ve).find(ae=>ae===S);if(y!=null&&y.coin_type||(J=M(f))!=null&&J.coin_type)if(je(T==null?void 0:T.coin_type).full_address===je((y==null?void 0:y.coin_type)||((ne=M(f))==null?void 0:ne.coin_type)||"").full_address)h(_),m(y);else{if(je(T==null?void 0:T.coin_type).full_address===je((_==null?void 0:_.coin_type)||((de=M(i))==null?void 0:de.coin_type)||"").full_address)return;t(`/liquidity?tab=${Q}&from=${(y==null?void 0:y.coin_type)||((F=M(f))==null?void 0:F.coin_type)}&to=${T==null?void 0:T.coin_type}`),p(null),B("")}else t(`/liquidity?tab=${Q}&to=${T==null?void 0:T.coin_type}`),p(null),B("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!_&&n})]}),e.jsx(Qr,{value:a,loading:!a&&n,feeTierList:u,disabled:d,onChange:T=>{T!=null&&T.poolAddress?t(`/liquidity?poolAddress=${T==null?void 0:T.poolAddress}`):(w(T),te())}})]}),o&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&e.jsxs(ye,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(et,{label:"Pool APR",value:e.jsx(xr,{poolInfo:s,placement:"bottom",children:e.jsxs(z,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(k,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&e.jsxs(k,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),e.jsx(et,{label:"TVL",value:H&&H!=="--"?`$${Se(H,2)}`:"--",loading:n||G}),e.jsx(et,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:n}),e.jsx(et,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:n})]})]}),o&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?e.jsxs(e.Fragment,{children:[e.jsxs(ye,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(ze,{type:"borderTab",tabList:x,currentTab:S,handleChangeTab:T=>{const Q=Object.keys(Ve).find(J=>Ve[J]===T.label);o&&t(`/liquidity?tab=${Q}&poolAddress=${o}`),R(Q)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:V?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:V?"14px":"16px",fontWeight:"500"}}),S!=="deposit"&&s&&e.jsxs(ye,{w:V?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(k,{children:"Current Price"}),e.jsx(ei,{noCenter:!!V,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:it(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:V?{w:"100%"}:{}})]})]}),e.jsx(se,{h:{base:"20px",lg:"8px"}}),S==="deposit"&&e.jsx(Ni,{rangeTabList:l,getList:L,getPrice:q,currentFeeTier:a,addressHistTokensMap:g}),S==="positions"&&e.jsx(Li,{}),S==="analytics"&&e.jsx(Ci,{})]}):e.jsx(se,{mt:"20px",children:!s&&n?e.jsx($e,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Lt,{})}):e.jsx(De,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(U,{children:y&&_?qe(y,A)||qe(_,A)?e.jsxs(e.Fragment,{children:[e.jsx(k,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(k,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(pe,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{Z(),v()},children:"Initialized Pool"})]}):e.jsx(k,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(k,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(ti,{tokensInfo:C,waringModalCancel:T=>{t("/pools")}}),e.jsx(Nr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:Y,onClose:Z,onConfirm:v})]})}export{pa as default};
