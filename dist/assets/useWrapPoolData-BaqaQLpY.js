import{ce as Ts,s as T,d as a,aw as bs,m as Rs,z as Es,v as x,w as as,a9 as ns,aI as Fs}from"./index-C2ps9-Dy.js";import"./vendor-BowHGuwE.js";const $=(y,_)=>{if(!y||(y==null?void 0:y.length)<1)return _?"0%":"0";const V=y.reduce((ts,X)=>{const ds=X?String(X):"0",s=Ts(ds);return ts.add(s)},a(0));return _?a(V).gt(1e4)?">1,000,000%":T(V.mul(100).toString(),"%"):V.toString()},C=(y,_,V)=>{if(!y)return _?"0%":"0";if(y==="--")return"--";const H=Ts(y);return V&&a(H).gt(100)?">10,000%":_?T(a(H).mul(100).toString(),"%"):H},Us=(y,_)=>{const V=Rs(y,_);return Es(V.toString(),_)},xs=y=>{const _=new Date(y).getDate();return _<10?`0${_}`:String(_)},Ls=y=>{var _;return bs((_=a(y))==null?void 0:_.mul(60*60*24).toString(),0)};function $s(){const y=s=>{var g,e,n;const t=s==null?void 0:s.has_mining;let u=a(0);const i=[],r=[];if(t){const v=((n=(e=(g=s==null?void 0:s.object)==null?void 0:g.rewarder_manager)==null?void 0:e.fields)==null?void 0:n.rewarders)||[],P=(s==null?void 0:s.rewarder_apr)||[];v==null||v.forEach((m,D)=>{var b,E,R,F,h;const A=a((b=m==null?void 0:m.fields)==null?void 0:b.emissions_per_second).mul(as.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&a(A).gt(0)){const c=C(P[D]);u=u.add(c);const f=(h=x((F=(R=(E=m==null?void 0:m.fields)==null?void 0:E.reward_coin)==null?void 0:R.fields)==null?void 0:F.name))==null?void 0:h.source_address;i.push({coinType:f,emissionsEveryDay:Ls(A)}),r.push({coinType:f,apr:c,aprDisplay:C(c,!0)})}})}return{haveMining:t&&i.length>0,miningRewardList:i,miningAprList:r,miningAprTotal:u.toString()}},_=s=>{var E,R,F,h,c,f,S,l,d,U;const t=(s==null?void 0:s.is_forward)===!1,u=s==null?void 0:s.has_farming,i=[];let r="",g="",e="",n="",v=0,P=0,m="",D="",A=a(0),b=!1;if(u){r=(E=s==null?void 0:s.stable_farming)==null?void 0:E.stable_farming_pool;const I=(R=s==null?void 0:s.stable_farming)==null?void 0:R.stable_rewarder;I==null||I.forEach((w,z)=>{const W=a(w==null?void 0:w.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${z+1}`]&&W.gt(0)){b=!0;const N=C(w==null?void 0:w.apr);A=A==null?void 0:A.add(N),i.push({coinType:x(w.coin).source_address,emissionsEveryDay:W.mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}}),g=(F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,e=T((h=s==null?void 0:s.stable_farming)==null?void 0:h.tvl,"$"),n=T(a(A).mul(100).toString(),"%",2,!0),v=(c=s==null?void 0:s.stable_farming)==null?void 0:c.effective_tick_lower,P=(f=s==null?void 0:s.stable_farming)==null?void 0:f.effective_tick_upper;const M=ns.tickIndexToPrice(v,(S=s==null?void 0:s.coin_a)==null?void 0:S.decimals,(l=s==null?void 0:s.coin_b)==null?void 0:l.decimals).toString(),Z=ns.tickIndexToPrice(P,(d=s==null?void 0:s.coin_a)==null?void 0:d.decimals,(U=s==null?void 0:s.coin_b)==null?void 0:U.decimals).toString();m=t?a(1).div(Z).toString():M,D=t?a(1).div(M).toString():Z}return{haveFarming:b,farmsRewarderList:i,farmsApr:A.toString(),farmingAprDisplay:n,farmsStatedTvl:g,farmsStatedTvlDisplay:e,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:P,displayFarmsEffectMinPrice:m,displayFarmsEffectMaxPrice:D,farmsPoolAddress:r}},V=(s,t=!1)=>{var G,ss,es,rs,J,K,Q;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",s);const u=s==null?void 0:s.object,i=(G=s==null?void 0:s.object)==null?void 0:G.index,r=s.address,g=(s==null?void 0:s.is_forward)===!1,e={...s==null?void 0:s.coin_a,coin_type:(es=x((ss=s==null?void 0:s.coin_a)==null?void 0:ss.address))==null?void 0:es.source_address},n={...s==null?void 0:s.coin_b,coin_type:(J=x((rs=s==null?void 0:s.coin_b)==null?void 0:rs.address))==null?void 0:J.source_address},v=g?n:e,P=g?e:n,m=`${v==null?void 0:v.symbol} - ${P==null?void 0:P.symbol}`,D=a(s.fee).mul(1e4).toString(),A=a(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,E=T(s.pure_tvl_in_usd||0),R=T(s.vol_in_usd_24h||0),F=T(s.fee_24_h||0),h=C((K=s==null?void 0:s.apr)==null?void 0:K.fee_apr_24h),c=C((Q=s==null?void 0:s.apr)==null?void 0:Q.fee_apr_24h,!0),{haveMining:f,miningRewardList:S,miningAprList:l,miningAprTotal:d}=y(s),{haveFarming:U,farmsRewarderList:I,farmsApr:M,farmingAprDisplay:Z,farmsStatedTvl:w,farmsStatedTvlDisplay:z,farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p}=_(s),j=$([h,d]),o=a(j).gt(1e4)?">1,000,000%":T(a(j).mul(100).toString(),"%"),is=$([j,M]),cs=$([h,M],!0),fs=$([j,M],!0),O=s.is_vaults,k=!O&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":O?"cetus":"",q=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return t?{poolAddress:r,name:m,isReverse:g,tokenA:e,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:null,miningAprList:null,haveFarming:U,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:O,isLocalData:t,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p,tickSpacing:b,index:i,object:u,haveZap:(e==null?void 0:e.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}:{poolAddress:r,name:m,isReverse:g,tokenA:e,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:S,miningAprList:l,haveFarming:U,farmsRewarderList:I,farmsApr:M,farmingAprDisplay:Z,feeApr:h,feeAprDisplay:c,miningAprTotal:d,feeAndMiningAprDisplay:o,totalAprDisplay:fs,fee:s.fee,feeRate:D,feeDisplay:A,tvlDisplay:E,tvl:s.pure_tvl_in_usd||0,volume24Display:R,fees24Display:F,isVaults:O,farmsStatedTvl:w,farmsStatedTvlDisplay:z,feeAndFarmsApr:is,feeAndFarmsAprDisplay:cs,farmsEffectiveTickLower:W,farmsEffectiveTickUpper:N,displayFarmsEffectMinPrice:Y,displayFarmsEffectMaxPrice:B,farmsPoolAddress:p,tickSpacing:b,index:i,object:u,haveZap:(e==null?void 0:e.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}},H=s=>{var c,f,S,l;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:261 ~ handleFarmsV2 ~ pool:",s);const{farmingRewarder:t,showReverse:u}=s;if(!t)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:i,effectiveTickUpper:r,rewarderCoins:g,tvl:e}=t,n=ns.tickIndexToPrice(i,(c=s==null?void 0:s.coinA)==null?void 0:c.decimals,(f=s==null?void 0:s.coinB)==null?void 0:f.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:281 ~ handleFarmsV2 ~ farmingRewarder:",t);const v=ns.tickIndexToPrice(r,(S=s==null?void 0:s.coinA)==null?void 0:S.decimals,(l=s==null?void 0:s.coinB)==null?void 0:l.decimals).toString(),P=u?a(1).div(v).toString():n,m=u?a(1).div(n).toString():v;let D=a(0);g.forEach(d=>{D=D.add(d==null?void 0:d.apr)});const A=D.toString(),b=T(D.mul(100).toString(),"%",2,!0),E=t.farmingPool,R=t.tvl,F=T(R,"$"),h=[];return g.forEach(d=>{a(d==null?void 0:d.emissionsPerSecond).gt(0)&&h.push({coinType:x(d==null?void 0:d.coinType).source_address,emissionsEveryDay:a(d==null?void 0:d.emissionsPerSecond).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:P,displayFarmsEffectMaxPrice:m,farmsApr:A,farmingAprDisplay:b,farmsEffectiveTickLower:i,farmsEffectiveTickUpper:r,farmsPoolAddress:E,farmsRewarderList:h,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:h.length>0}},ts=s=>{const{miningRewarders:t,showReverse:u}=s;if(!t)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let i=a(0);const r=[],g=[];return t.forEach(e=>{i=i.add(e==null?void 0:e.apr);const n=Fs.isSuiCoin((e==null?void 0:e.coinType)||"");e.display&&a(e==null?void 0:e.emissionsPerSecond).gt(0)&&(r.push({coinType:x(e==null?void 0:e.coinType).source_address,emissionsEveryDay:a(e==null?void 0:e.emissionsPerSecond).mul(10**e.decimals).mul(86400).toDP(2,as.ROUND_HALF_UP).toString(),sort:n?1:0}),g.push({coinType:x(e==null?void 0:e.coinType).source_address,apr:e==null?void 0:e.apr,aprDisplay:C(e==null?void 0:e.apr,!0)}))}),{miningAprTotal:i.toString(),miningRewardList:r.sort((e,n)=>e.sort-n.sort),haveMining:r.length>0,miningAprList:g}},X=s=>{const{vault:t,extensions:u}=s;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:362 ~ handleVaultsV2 ~ vault:",t),!t)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:i,id:r}=t;return{isUnstableVault:i==="haedal",isVaults:i==="cetus",vaultId:r,vaultCategory:(u==null?void 0:u.showVaults)=="1"?"":i}};return{wrapPoolData:V,wrapPoolDataV2:(s,t=!1)=>{var J,K,Q,us,gs,vs,ms,ys,_s,As,Ds,hs,Ss,ls,ws,Ps;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:261 ~ wrapPoolDataV2 ~ pool:",s);const{showReverse:u,feeRate:i,stats:r,tvl:g,pool:e}=s;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:380 ~ wrapPoolDataV2 ~ stats:",r);const{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmingAprDisplay:P,farmsApr:m,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:h}=H(s),c={...s==null?void 0:s.coinA,coin_type:(K=x((J=s==null?void 0:s.coinA)==null?void 0:J.coinType))==null?void 0:K.full_address,logo_url:(Q=s==null?void 0:s.coinA)==null?void 0:Q.logoURL,address:(us=s==null?void 0:s.coinA)==null?void 0:us.coinType,is_trusted:(gs=s==null?void 0:s.coinA)==null?void 0:gs.isVerified},f={...s==null?void 0:s.coinB,coin_type:(ms=x((vs=s==null?void 0:s.coinB)==null?void 0:vs.coinType))==null?void 0:ms.full_address,logo_url:(ys=s==null?void 0:s.coinB)==null?void 0:ys.logoURL,address:(_s=s==null?void 0:s.coinB)==null?void 0:_s.coinType,is_trusted:(As=s==null?void 0:s.coinB)==null?void 0:As.isVerified},S=u?f:c,l=u?c:f,d=a(i).div(10**6).toString(),{miningAprTotal:U,miningRewardList:I,haveMining:M,miningAprList:Z}=ts(s),w=(Ds=r==null?void 0:r.filter(L=>L.dateType==="24H")[0])==null?void 0:Ds.apr,z=(hs=r==null?void 0:r.filter(L=>L.dateType==="7D")[0])==null?void 0:hs.apr,W=(Ss=r==null?void 0:r.filter(L=>L.dateType==="7D")[0])==null?void 0:Ss.apr,N=(ls=r==null?void 0:r.filter(L=>L.dateType==="30D")[0])==null?void 0:ls.fee,Y=$([w,m]),B=$([w,m],!0),p=$([w,U],!0),j=C(w,!0),o=a(d).mul(100).toString()+"%",is=T(N,"$"),cs=$([w,U]),fs=$([cs,m],!0),O=(c==null?void 0:c.isVerified)&&(f==null?void 0:f.isVerified)&&a(g).gt(1e4),{vaultCategory:k,vaultId:q,isVaults:G}=X(s),ss=T(s.tvl||0),es=T(((ws=r==null?void 0:r.filter(L=>L.dateType==="24H")[0])==null?void 0:ws.vol)||0),rs=T(((Ps=r==null?void 0:r.filter(L=>L.dateType==="7D")[0])==null?void 0:Ps.vol)||0);return t?{poolAddress:e,name:`${S==null?void 0:S.symbol} - ${l==null?void 0:l.symbol}`,isReverse:u,tokenA:c,tokenB:f,displayTokenA:S,displayTokenB:l,haveMining:M,miningRewardList:null,miningAprList:null,haveFarming:h,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeApr7d:"--",feeApr30d:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:i,fee:s.fee,feeDisplay:o,tvlDisplay:"--",tvl:"--",volume24Display:"--",volume7Display:"--",fees24Display:"--",isVaults:G,isLocalData:t,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmsPoolAddress:b,haveZap:(c==null?void 0:c.is_trusted)&&(f==null?void 0:f.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:k,vaultId:q}:{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,displayTokenA:S,displayTokenB:l,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsApr:m,farmingAprDisplay:P,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,fee:d,feeApr:w,feeApr7d:z,feeApr30d:W,feeAprDisplay:j,feeAndFarmsApr:Y,feeAndFarmsAprDisplay:B,feeAndMiningAprDisplay:p,feeDisplay:o,feeRate:a(i).div(100).toString(),haveFarming:h,haveZap:O,isReverse:u,vaultCategory:k,vaultId:q,haveMining:M,miningRewardList:I,miningAprList:Z,miningAprTotal:U.toString(),name:`${S==null?void 0:S.symbol} - ${l==null?void 0:l.symbol}`,poolAddress:e,tokenA:c,tokenB:f,totalAprDisplay:fs,tvl:g,tvlDisplay:ss,volume24Display:es,volume7Display:rs,fees24Display:is,isVaults:G}}}}export{Us as b,xs as d,$s as u};
//# sourceMappingURL=useWrapPoolData-BaqaQLpY.js.map
