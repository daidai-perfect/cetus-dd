import{a as M,b as K,p as ie,l as be}from"./api-data-utils-jJIF69QV.js";import{bw as _e,d as u,az as Y,aQ as Z,ab as ue,aX as D,s as E,a7 as p,bb as ee,u as ge,dr as ce}from"./index-DxlrRVJO.js";const xe={100:2,500:10,1e3:20,2500:60,1e4:200,2e4:220},ae=Object.values(xe),de=["0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_usdc_coin::CELER_USDC_COIN","0xcf72ec52c0f8ddead746252481fb44ff6e8485a39b803825bde6b00d77cdb0bb::coin::COIN","0xe32d3ebafa42e6011b87ef1087bbc6053b499bf6f095807b9013aff5a6ecd7bb::coin::COIN","0xc3f8927de33d3deb52c282a836082a413bc73c6ee0bd4d7ec7e3b6b4c28e9abf::coin::COIN","0x909cba62ce96d54de25bec9502de5ca7b4f28901747bbf96b76c2e63ec5f1cba::coin::COIN","0xb231fcda8bbddb31f2ef02e6161444aec64a514e2c89279584ac9806ce9cf037::coin::COIN","0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN","0x2053d08c1e2bd02791056171aab0fd12bd7cd7efad2ab8f6b9c8902f14df2ff2::ausd::AUSD","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_usdt_coin::CELER_USDT_COIN","0xf16e6b723f242ec745dfd7634ad072c42d5c1d9ac9d62a39c381303eaa57693a::fdusd::FDUSD","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_dai_coin::CELER_DAI_COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_wsteth_coin::CELER_WSTETH_COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_frax_coin::CELER_FRAX_COIN","0xce7ff77a83ea0cb6fd39bd8748e2ec89a3f41e8efdc3f4eb123e0ca37b184db2::buck::BUCK","0x2::sui::SUI","0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","0x7016aae72cfc67f2fadf55769c0a7dd54291a583b63051a5ed71081cce836ac6::sca::SCA","0x5ca17430c1d046fae9edeaa8fd76c7b4193a00d764a0ecfa9418d733ad27bc1e::scallop_sca::SCALLOP_SCA","0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_weth_coin::CELER_WETH_COIN","0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_wbtc_coin::CELER_WBTC_COIN","0xb7844e289a8410e50fb3ca48d69eb9cf29e27d223ef90353fe1bd8e27ff8f3f8::coin::COIN","0xb848cce11ef3a8f62eccea6eb5b35a12c4c2b1ee1af7755d02d7bd6218e8226f::coin::COIN","0xdbe380b13a6d0f5cdedd58de8f04625263f113b3f9db32b3e1983f49e2841676::coin::COIN","0x1e8b532cca6569cab9f9b9ebc73f8c13885012ade714729aa3b450e0339ac766::coin::COIN","0x6081300950a4f1e2081580e919c210436a1bed49080502834950d31ee55a2396::coin::COIN","0xa198f3be41cda8c07b3bf3fee02263526e535d682499806979a111e88a5a8d0f::coin::COIN","0x66f87084e49c38f76502d17f87d17f943f183bb94117561eb573e075fdc5ff75::coin::COIN","0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0xe4239cd951f6c53d9c41e25270d80d31f925ad1655e5ba5b543843d4a66975ee::SUIP::SUIP","0x1d58e26e85fbf9ee8596872686da75544342487f95b1773be3c9a49ab1061b19::suia_token::SUIA_TOKEN","0x3a5143bb1196e3bcdfab6203d1683ae29edd26294fc8bfeafe4aaa9d2704df37::coin::COIN","0x202591744d54ee4f4af736ef3b8508f3d46d982c36747d9587032bd549122179::luck::LUCK","0xd2013e206f7983f06132d5b61f7c577638ff63171221f4f600a98863febdfb47::toce::TOCE","0x934692a74595c4f5a0c026130eb2143eea6fc313742f5d7dd9e45fd6ddbb00f1::suime::SUIME","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_fxs_coin::CELER_FXS_COIN","0x6907963ca849faff0957b9a8269a7a07065e3def2eef49cc33b50ab946ea5a9f::coin::COIN","0x361dd589b98e8fcda9a7ee53b85efabef3569d00416640d2faa516e3801d7ffc::TOKEN::TOKEN","0x9a7ca7b6de5b6e9a4dadec42fada7cd84068aebd7adbd1faeb713622c4628ca9::meadow::MEADOW","0x32d5056aaac1be1f9ae44c1d0728792255a05f1475d458287ee463cc26806ca0::mover_usd::MOVER_USD","0x9fe1780ac27ec50c9c441fb31822f5c148f841f09ee455c6a0daf7c634a30a27::aifrens::AIFRENS","0xbff8dc60d3f714f678cd4490ff08cabbea95d308c6de47a150c79cc875e0c7c6::sbox::SBOX","0x9a5502414b5d51d01c8b5641db7436d789fa15a245694b24aa37c25c2a6ce001::scb::SCB","0x4e56b39acd75721999cf833062dfb77b1d51e749b02d90f049a5688e21919a64::prl::PRL","0x76cb819b01abed502bee8a702b4c2d547532c12f25001c9dea795a5e631c26f1::fud::FUD","0xc44d97a4bc4e5a33ca847b72b123172c88a6328196b71414f32c3070233604b2::slp::SLP","0x8f16fb4ed30b4ff29cec3ddf82ed2ecae3836d20dbd31c8ba9e85d1ef6bfc172::sbbg::SBBG","0xb6baa75577e4bbffba70207651824606e51d38ae23aa94fb9fb700e0ecf50064::kimchi::KIMCHI","0x9c6d76eb273e6b5ba2ec8d708b7fa336a5531f6be59f326b5be8d4d8b12348a4::coin::COIN"];function we(t,b){const x=de.indexOf(t),e=de.indexOf(b);return x===-1&&e===-1?!0:x!==-1&&e===-1?!1:x===-1&&e!==-1?!0:x>e}const Pe=(t,b,x,e)=>{if(e)return{percentA:"50",percentB:"50"};if(u(t).eq(0)&&u(b).eq(0))return{percentA:"0",percentB:"0"};const l=u(b).plus(u(t).mul(x)),C=u(b).div(l).mul(100),c=u(100).sub(C),g=c.lt(.01)&&c.gt(0)?"<0.01":Y(c.toString(),2),f=C.lt(.01)&&C.gt(0)?"<0.01":Y(C.toString(),2);return{percentA:g,percentB:f}},le=t=>{var e;if(!t)return"";const b=t==null?void 0:t.split(",");return(e=b==null?void 0:b.map(l=>_e(l,!1)))==null?void 0:e.join(",")},Ce=t=>t==="0"||!t?"∞":t==="∞"?"0":u(1).div(t).toString(),Ae=t=>t==="∞"?"∞":ue(t,6),Ie=t=>Ae(Ce(t)),se=(t,b)=>{for(let x=0;x<ae.length;x++){const e=ae[x];if(b==="min"){if(t==Z.getMinIndex(e))return!0}else if(t==Z.getMaxIndex(e))return!0}return!1},ve=(t,b)=>{const x=se(t,"min"),e=se(b,"max");return!!(x&&e)};function ye(){const t=e=>{var f,r,n;const l=!!(e!=null&&e.is_display_rewarder&&(e!=null&&e.rewarder_display1||e!=null&&e.rewarder_display2||e!=null&&e.rewarder_display3));let C=u(0);const c=[],g=[];if(l){const d=((n=(r=(f=e==null?void 0:e.object)==null?void 0:f.rewarder_manager)==null?void 0:r.fields)==null?void 0:n.rewarders)||[],s=(e==null?void 0:e.rewarder_apr)||[];d==null||d.forEach((i,y)=>{var a,_,w,P,S;const A=u((a=i==null?void 0:i.fields)==null?void 0:a.emissions_per_second).mul(p.pow(2,-64)).toString();if(e!=null&&e[`rewarder_display${y+1}`]&&u(A).gt(0)){const L=M(s[y]);C=C.add(L);const v=(S=D((P=(w=(_=i==null?void 0:i.fields)==null?void 0:_.reward_coin)==null?void 0:w.fields)==null?void 0:P.name))==null?void 0:S.source_address;c.push({coinType:v,emissionsEveryDay:ie(A)}),g.push({coinType:v,apr:L,aprDisplay:M(L,!0)})}})}return{haveMining:l&&c.length>0,miningRewardList:c,miningAprList:g,miningAprTotal:C.toString()}},b=e=>{var a,_,w,P,S,L,v,k,F,O,T,m,h,o;const l=(e==null?void 0:e.is_forward)===!1,C=!!(e!=null&&e.stable_farming&&((a=e==null?void 0:e.stable_farming)!=null&&a.show_rewarder_1||(_=e==null?void 0:e.stable_farming)!=null&&_.show_rewarder_2||(w=e==null?void 0:e.stable_farming)!=null&&w.show_rewarder_3)&&((P=e==null?void 0:e.stable_farming)!=null&&P.stable_rewarder)),c=[];let g="",f="",r="",n="",d=0,s=0,i="",y="",A=u(0);if(C){g=(S=e==null?void 0:e.stable_farming)==null?void 0:S.stable_farming_pool;const N=(L=e==null?void 0:e.stable_farming)==null?void 0:L.stable_rewarder;N==null||N.forEach((I,B)=>{const U=u(I==null?void 0:I.amount_second);if(e!=null&&e.stable_farming[`show_rewarder_${B+1}`]&&U.gt(0)){const j=M(I==null?void 0:I.apr);A=A==null?void 0:A.add(j),c.push({coinType:D(I.coin).source_address,emissionsEveryDay:U.mul(86400).toDP(2,p.ROUND_HALF_UP).toString()})}}),f=(v=e==null?void 0:e.stable_farming)==null?void 0:v.tvl,r=E((k=e==null?void 0:e.stable_farming)==null?void 0:k.tvl,"$"),n=E(u(A).mul(100).toString(),"%"),d=(F=e==null?void 0:e.stable_farming)==null?void 0:F.effective_tick_lower,s=(O=e==null?void 0:e.stable_farming)==null?void 0:O.effective_tick_upper;const $=ee.tickIndexToPrice(d,(T=e==null?void 0:e.coin_a)==null?void 0:T.decimals,(m=e==null?void 0:e.coin_b)==null?void 0:m.decimals).toString(),R=ee.tickIndexToPrice(s,(h=e==null?void 0:e.coin_a)==null?void 0:h.decimals,(o=e==null?void 0:e.coin_b)==null?void 0:o.decimals).toString();i=l?u(1).div(R).toString():$,y=l?u(1).div($).toString():R}return{haveFarming:C,farmsRewarderList:c,farmsApr:A.toString(),farmingAprDisplay:n,farmsStatedTvl:f,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:d,farmsEffectiveTickUpper:s,displayFarmsEffectMinPrice:i,displayFarmsEffectMaxPrice:y,farmsPoolAddress:g}};return{wrapPoolData:(e,l=!1)=>{var W,H,X,q,z,V,Q;const C=e==null?void 0:e.object,c=(W=e==null?void 0:e.object)==null?void 0:W.index,g=e.address,f=(e==null?void 0:e.is_forward)===!1,r={...e==null?void 0:e.coin_a,coin_type:(X=D((H=e==null?void 0:e.coin_a)==null?void 0:H.address))==null?void 0:X.source_address},n={...e==null?void 0:e.coin_b,coin_type:(z=D((q=e==null?void 0:e.coin_b)==null?void 0:q.address))==null?void 0:z.source_address},d=f?n:r,s=f?r:n,i=`${d==null?void 0:d.symbol} - ${s==null?void 0:s.symbol}`,y=u(e.fee).mul(1e4).toString(),A=u(e.fee).mul(100).toString()+"%",a=e==null?void 0:e.tick_spacing,_=E(e.pure_tvl_in_usd||0),w=E(e.vol_in_usd_24h||0),P=E(e.fee_24_h||0),S=M((V=e==null?void 0:e.apr)==null?void 0:V.fee_apr_24h),L=M((Q=e==null?void 0:e.apr)==null?void 0:Q.fee_apr_24h,!0),{haveMining:v,miningRewardList:k,miningAprList:F,miningAprTotal:O}=t(e),{haveFarming:T,farmsRewarderList:m,farmsApr:h,farmingAprDisplay:o,farmsStatedTvl:N,farmsStatedTvlDisplay:$,farmsEffectiveTickLower:R,farmsEffectiveTickUpper:I,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:U,farmsPoolAddress:j}=b(e),J=K([S,O]),te=u(J).gt(1e4)?">1,000,000%":E(u(J).mul(100).toString(),"%"),fe=K([J,h]),ne=K([S,h],!0),re=K([J,h],!0),G=e.is_vaults;return l?{poolAddress:g,name:i,isReverse:f,tokenA:r,tokenB:n,displayTokenA:d,displayTokenB:s,haveMining:v,miningRewardList:null,miningAprList:null,haveFarming:T,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:y,fee:e.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:G,isLocalData:l,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:R,farmsEffectiveTickUpper:I,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:U,farmsPoolAddress:j,tickSpacing:a,index:c,object:C}:{poolAddress:g,name:i,isReverse:f,tokenA:r,tokenB:n,displayTokenA:d,displayTokenB:s,haveMining:v,miningRewardList:k,miningAprList:F,haveFarming:T,farmsRewarderList:m,farmsApr:h,farmingAprDisplay:o,feeApr:S,feeAprDisplay:L,miningAprTotal:O,feeAndMiningAprDisplay:te,totalAprDisplay:re,fee:e.fee,feeRate:y,feeDisplay:A,tvlDisplay:_,tvl:e.pure_tvl_in_usd||0,volume24Display:w,fees24Display:P,isVaults:G,farmsStatedTvl:N,farmsStatedTvlDisplay:$,feeAndFarmsApr:fe,feeAndFarmsAprDisplay:ne,farmsEffectiveTickLower:R,farmsEffectiveTickUpper:I,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:U,farmsPoolAddress:j,tickSpacing:a,index:c,object:C}}}}function he(){const{fetchByApi:t}=ge(),{wrapPoolData:b}=ye(),x=async c=>{var g;try{const f={...c},r=le(c==null?void 0:c.coin_type);r&&(f.coin_type=r);const n=await t(be,"GET",f);if(n!=null&&n.lp_list){const d=(g=n==null?void 0:n.lp_list)==null?void 0:g.map(s=>b(s));return console.log("🚀 ~ file: useGetPoolList.ts:42 ~ poolList ~ poolList:",d),{list:d,total:n==null?void 0:n.total}}}catch(f){return console.log("🚀 ~ useGetPoolList ~ error:",f),await e(c)}return{list:[],total:0}},e=async c=>{var g,f,r,n;try{const d=await fetch("/data/pools.json").then(s=>s.json());if(console.log(d,"getLocalJsonPoolList"),(g=d==null?void 0:d.data)!=null&&g.lp_list){const s=(f=d==null?void 0:d.data)==null?void 0:f.lp_list;let i=s;if(c!=null&&c.pool&&(i=s==null?void 0:s.filter(a=>{var _;return((_=c==null?void 0:c.pool)==null?void 0:_.toLocaleLowerCase())==(a==null?void 0:a.address.toLocaleLowerCase())})),c!=null&&c.coin_type){const a=(n=(r=c==null?void 0:c.coin_type)==null?void 0:r.split(","))==null?void 0:n.map(_=>D(_).source_address);i=s==null?void 0:s.filter(_=>{var S,L;const w=D((S=_==null?void 0:_.coin_a)==null?void 0:S.address).source_address,P=D((L=_==null?void 0:_.coin_b)==null?void 0:L.address).source_address;return(a==null?void 0:a.length)>1&&a.includes(w)&&a.includes(P)?!0:!!((a==null?void 0:a.length)===1&&(a.includes(w)||a.includes(P)))})}c!=null&&c.is_vaults&&(i=s==null?void 0:s.filter(a=>a==null?void 0:a.is_vaults)),c!=null&&c.has_farming&&!(c!=null&&c.is_vaults)&&!(c!=null&&c.has_mining)&&!(c!=null&&c.no_incentives)&&(i=s==null?void 0:s.filter(a=>a==null?void 0:a.has_farming));const y=i.splice(0,40);return{list:y==null?void 0:y.map(a=>b(a,!0)),total:(i==null?void 0:i.length)||0}}}catch(d){console.error("getLocalJsonPoolList Error:",d)}return{list:[],total:0}},l=c=>ce(c)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":ce(c);return{getPoolList:x,getLocalJsonPoolList:e,getLocalJsonPoolAddress:async(c,g)=>{try{const f=l(c),r=l(g),n=await fetch("/data/all-pools.json").then(d=>d.json());if(n){const d=n[`${f.toLocaleLowerCase()}-${r.toLocaleLowerCase()}`]||n[`${r.toLocaleLowerCase()}-${f.toLocaleLowerCase()}`];return console.log("🚀 --------------------------------------------------🚀"),console.log("🚀 ~ getLocalJsonPoolAddress ~ poolList:",d,`${f.toLocaleLowerCase()}-${r.toLocaleLowerCase()}`,`${r.toLocaleLowerCase()}-${f.toLocaleLowerCase()}`),console.log("🚀 --------------------------------------------------🚀"),d}}catch(f){console.error("getLocalJsonPoolAddress Error:",f)}return[]}}}export{xe as T,Ie as a,Ce as b,Pe as c,ye as d,ve as e,se as f,Ae as g,we as h,he as u};
