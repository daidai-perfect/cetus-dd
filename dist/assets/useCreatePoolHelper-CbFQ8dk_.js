import{u as F}from"./usePosAdd-Cwsk1h8o.js";import{g as N}from"./liquidity-DyH6iKLr.js";import{u as W,b as M}from"./useGetPoolList-BblWMV2P.js";import{d as h}from"./FeeTierSelect-CrZ-uStk.js";import{aK as K,b9 as A,d as l,aY as B,aS as O,aT as H,r as I}from"./index-BcaxaUt8.js";function X(){const{clmmSdk:s}=K(),{preAdd:g}=F(),{getPoolList:n}=W(),a=.05;return{preAddPool:c=>{const{tickSpacing:r,price:u,minPrice:o,maxPrice:d,amount:p,amountCoinType:e,realTokenA:t,realTokenB:i,needReverse:m}=c,f=A.priceToSqrtPriceX64(l(u),t.decimals,i.decimals).toString(),P=A.priceToTickIndex(l(u),t.decimals,i.decimals).toString(),C=t.decimals,S=i.decimals;let T,y;if(o==="0"&&d==="âˆž")T=H.getMinIndex(r),y=H.getMaxIndex(r);else{const L=m?M(d):o,R=m?M(o):d,b=A.priceToTickIndex(l(L),t.decimals,i.decimals).toString();console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:103 ~ useCreatePoolHelper ~ realMintTick:",b),T=B(A.priceToTickIndex(l(L),C,S),r),y=B(A.priceToTickIndex(l(R),C,S),r)}console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:87 ~ useCreatePoolHelper ~ params:",{...c,currentSqrtPrice:f,lowerTick:T,upperTick:y,currTick:P});const _=e===(t==null?void 0:t.coin_type),q=O(p,_?C:S).toString(),w=g({amount:q,tokenA:t,tokenB:i,isTokenA:_,lowerTick:T,upperTick:y,curSqrtPrice:f,isReverse:m,roundUp:!0});return console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:128 ~ useCreatePoolHelper ~ res:",w),console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),{...w,currentSqrtPrice:f,fixAmountA:_,lowerTick:T,upperTick:y,tickSpacing:r,coinTypeA:t.coin_type,coinTypeB:i.coin_type}},fetchFeeTierList:async(c,r)=>{var u;try{if(c&&r){const o=await n({coin_type:`${c},${r}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(o&&o.list&&o.list.length>0){const d=N(o.list);return(u=h)==null?void 0:u.map(p=>{const e=d.find(t=>t.feeRate===p.feeRate);return{...p,title:(e==null?void 0:e.title)||p.title,poolAddress:e==null?void 0:e.poolAddress,liquidity:e==null?void 0:e.liquidity,tvl:e==null?void 0:e.tvl}})}else return[...h]}}catch(o){console.log("ðŸš€ ~ fetchFeeTierList ~ fetchFeeTierList:",o)}return[...h]},getCreatePoolTxPayload:async c=>{console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:140 ~ getCreatePoolTxPayload ~ params:",c);const{tickSpacing:r,currentSqrtPrice:u,fixAmountA:o,coinAmountAOrigin:d,coinAmountBOrigin:p,lowerTick:e,upperTick:t,coinTypeA:i,coinTypeB:m}=c,f=await s.fullClient.getCoinMetadata({coinType:i}),P=await s.fullClient.getCoinMetadata({coinType:m});return await s.Pool.createPoolTransactionPayload({tick_spacing:r,initialize_sqrt_price:u,uri:"",fix_amount_a:o,amount_a:d,amount_b:p,slippage:a,tick_lower:e,tick_upper:t,coinTypeA:i,coinTypeB:m,metadata_a:f==null?void 0:f.id,metadata_b:P==null?void 0:P.id})}}}function Y(s,g,n,a){const x=I.useMemo(()=>{if(s)return!1;try{if(g!==void 0&&n!==void 0&&a!==void 0)return l(g).lt(n)||l(g).gt(a)}catch{}return!1},[a,g,n,s]),v=I.useMemo(()=>{if(s)return!1;try{if(n!==void 0&&a!==void 0)return l(n).gt(a)}catch{}return!1},[a,n,s]);return{showInputPriceWarn:x,showPriceRangeWarn:v}}export{X as a,Y as u};
