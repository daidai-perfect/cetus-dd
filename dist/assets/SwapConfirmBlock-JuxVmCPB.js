import{A as O}from"./aggregator-BQ4v6oGq.js";import{u as fs}from"./useTransaction-B0xyNeQf.js";import{u as Ee}from"./global-Bo5w7aOL.js";import{i as gs,u as bs}from"./index-BS_lQreI.js";import{u as ms}from"./useAccountBalance-Bh-NvyHs.js";import{m as js,M as ws,q as $e,bm as We,o as ys,p as _s,bn as ue,aM as Ss,w as W,X as Te,bo as vs,k as Rs,R as Oe,O as De,y as As,I as q,d as zs,a as fe,S as I,b as Is,C as Ce,z as Hs,j as Ps,D as $s}from"./index-WWPS4_2e.js";import{a as x,az as Ws,ab as Ts,j as e,H as d,T as u,C as k,u as _,V as S,f as v,P as Ne,h as Ve,k as Ge,m as Ke,n as ke,ag as Ms,S as z,X as Fs,Y as Ls,Z as Us,$ as Bs,a0 as Es,a1 as Os,v as ie}from"./vendor-DYqnJE5Q.js";import{u as ge}from"./useToken-DKo5fk0k.js";import{u as Me}from"./useTokenBalance-L-7JdNBo.js";import{u as Ds}from"./useFindBestRouting-CBVbnGqc.js";import{b as qe,A as he,c as Cs}from"./useSwapHelper-C0YC34Fy.js";import{v as Fe}from"./v4-C6aID195.js";import{M as Ns,a as Vs,u as Ye}from"./usePriceImpact-Dn-go9TS.js";import{C as be}from"./CurrentPrice-B8SB9U4y.js";import{H as Gs}from"./HighlightText-OSLpY7EK.js";import{g as oe}from"./index-BQdM0Oaf.js";import{A as Le}from"./SingleTokenInfo-BmePh6gD.js";import{H as Ue}from"./HTextLabelBox-CabGGlmQ.js";import{T as Ks}from"./TradeConfirmAmountInfo-DQFQ5-2N.js";import{b as ks}from"./TradeInputGroup-BIsIP9JC.js";var qs=1,Ys=4;function Xs(t){return ks(t,qs|Ys)}function Be(t){const[c,r]=x.useState(),s=async l=>{if(l.is_trusted)return!1;try{const i=await gs(l.coin_type);return console.log("ðŸš€ ~ file: useCheckTokenScamsAlert.ts:24 ~ checkIsScamsCoin ~ isScamsCoin:",i),i}catch(i){console.log("ðŸš€ ~ file: useCheckTokenScamsAlert.ts:19 ~ checkTokenScams ~ error:",i)}return!1};return x.useEffect(()=>{r(void 0),t&&s(t).then(l=>{r(l)})},[t==null?void 0:t.coin_type]),{isScamsCoin:c}}const Js="0xeb863165a109f7791a3182be08aff1438ab2a429314fc135ae19d953afe1edd6";function Rr(t,c){const{fromCoin:r,toCoin:s,setFromCoin:l,setToCoin:i,setToAmount:p,fromAmount:h,toAmount:o,setFromAmount:a,routerData:f,setFindRouterLoading:g,setRouterData:w,setByAmountIn:b,byAmountIn:A}=t,{from:R,to:y}=Ws(),{findBestRouters:ne,checkProvidersKeys:ce}=Ds(),{fetchTokenPrices:pe,getTokenAmountValue:Y}=js(),{slippage:X,mevProtect:T,maxCapForGas:F,transactionMode:J,customGasPrice:le}=Ee(),{aggregatorSDK:Z}=ws(),m=Ts(),{fetchTokenInfo:Q}=ge(),[ae,ee]=x.useState(!1),{signAndExecuteTransaction:Qe,transactionConfirmation:es}=fs(),{providersSwitchStates:me,supportOrderSplit:rr}=bs(),{fetchAccountBalance:ss}=ms(),{balanceInfo:rs}=Me(r),{balanceInfo:ts}=Me(s),is=Y(r==null?void 0:r.coin_type,h),os=Y(s==null?void 0:s.coin_type,o),[je,we]=x.useState(""),ye=x.useRef(""),se=x.useRef(!0),D=x.useRef(""),C=x.useRef(""),N=x.useRef(),V=x.useRef(),_e=x.useRef([]);x.useEffect(()=>{N.current=r},[r]),x.useEffect(()=>{V.current=s},[s]),x.useEffect(()=>{ye.current=je},[je]),x.useEffect(()=>{se.current=A},[A]),x.useEffect(()=>{D.current=h},[h]),x.useEffect(()=>{C.current=o},[o]);const ns=x.useMemo(()=>String(y)+String(R),[R,y]);x.useEffect(()=>{c||cs()},[ns]);const cs=x.useCallback(()=>{!R&&!y?(l($e.clmm_swap.from_coin),i($e.clmm_swap.to_coin),m("/swap")):(R&&We(R)?Q(R).then(n=>{n?(n==null?void 0:n.coin_type)!==(r==null?void 0:r.coin_type)&&l(n):m(`/swap/${r==null?void 0:r.coin_type}/${s==null?void 0:s.coin_type}`)}).catch(()=>{m(`/swap/${r==null?void 0:r.coin_type}/${s==null?void 0:s.coin_type}`)}):l(void 0),y&&We(y)?Q(y).then(n=>{n?(n==null?void 0:n.coin_type)!==(s==null?void 0:s.coin_type)&&i(n):m(`/swap/${r==null?void 0:r.coin_type}/${s==null?void 0:s.coin_type}`)}).catch(()=>{m(`/swap/${r==null?void 0:r.coin_type}/${s==null?void 0:s.coin_type}`)}):i(void 0))},[R,y]),Se=ys(async(n,j,H)=>{if(N.current&&V.current&&+n){const M=c?Object.entries(O).map(([$,B])=>$):Object.entries(me).filter(([$,B])=>B===!0).map(([$,B])=>$);(+D.current||+C.current)&&g(!0);const U=await ce(M),Re=_s(n,j?N.current.decimals:V.current.decimals),P=await ne({fromToken:N.current,toToken:V.current,amount:Re.toString(),providersKeys:U,by_amount_in:j,uuid:H});g(!1),ye.current===H&&(_e.current=U,j?+D.current?(p(P.toAmountUi||""),w(P)):p(""):+C.current?(a(P.fromAmountUi||"ÃŸ"),w(P)):a(""))}else G(!j)},500),ps=(n,j,H=!1)=>{if(b(j),j?(a(n),H&&p("")):(p(n),H&&a("")),+n){const M=Fe();we(M),Se(n,j,M)}else g(!1),w(void 0),n!=="0"?G():j?p(""):a("")},L=()=>{const n=se.current?D.current:C.current;if(console.log("ðŸš€ ~ file: useSwap.ts:273 ~ reCalculateRouteData ~ amount:",n,se.current,D.current,C.current),+n){const j=Fe();we(j),Se(n,se.current,j)}};x.useEffect(()=>{L()},[JSON.stringify(me)]);const ls=x.useCallback((n,j=!0)=>{G(),c?j?(n&&(n==null?void 0:n.coin_type)===(s==null?void 0:s.coin_type)&&i(r),l(n)):(n&&(n==null?void 0:n.coin_type)===(r==null?void 0:r.coin_type)&&l(s),i(n)):j?n&&(n==null?void 0:n.coin_type)===(s==null?void 0:s.coin_type)?m(`/swap/${n==null?void 0:n.coin_type}/${r==null?void 0:r.coin_type}`):m(`/swap/${n==null?void 0:n.coin_type}/${s==null?void 0:s.coin_type}`):n&&(n==null?void 0:n.coin_type)===(r==null?void 0:r.coin_type)?m(`/swap/${s==null?void 0:s.coin_type}/${n==null?void 0:n.coin_type}`):m(`/swap/${r==null?void 0:r.coin_type}/${n==null?void 0:n.coin_type}`)},[r==null?void 0:r.coin_type,s==null?void 0:s.coin_type]),{amountLimit:as}=qe(X,f),G=n=>{n===void 0?(a(""),p("")):n?a(""):p(""),g(!1),w(void 0)};x.useEffect(()=>{ve()},[r==null?void 0:r.coin_type,s==null?void 0:s.coin_type]);const ve=()=>{const n=[];r&&n.push(r.coin_type),s&&n.push(s.coin_type),n.length>0&&pe(n)},xs=()=>({...f}),ds=async n=>{var H,M;let j;try{const{routerData:U,byAmountIn:Re,fromAmountUi:P,toAmountUi:$}=n,B=new Ss,E={routers:U,partner:Js,txb:B,slippage:Number(X),refreshAllCoins:!0};ee(!1),console.log("ðŸš€ ~ file: useSwap.ts:261 ~ doSwapAction ~ params:",E),j={isSwapWidget:c,actionType:"swap",getShowInfo:(ze,xe)=>{const de=`Swapping ${W(P)} ${r==null?void 0:r.symbol} for ${W($)} ${s==null?void 0:s.symbol}`,K={modalDescriptionText:de,toastTitleText:de};if(ze==="success"){let Ie=P,He=$;xe&&(Ie=Te(xe,r)||P,He=Te(xe,s)||$);const Pe=`Swapped ${W(Ie)} ${r==null?void 0:r.symbol} for ${W(He)} ${s==null?void 0:s.symbol}`;K.toastDescriptionContent=Pe,K.modalDescriptionText=Pe,K.toastTitleText="Swap Successful"}return ze==="rejected"&&(K.toastTitleText=de.replace("Swapping","Swap")),K}},c||es(j);const Ae=await Qe(async()=>(await Z.fastRouterSwap(E),B),j,{useMev:T,useFastMode:J==="Fast Mode",maxCapForGas:F,customGasPrice:le,msafeParams:{action:"AggregatorSwap",txbParams:{...E,routers:vs(E==null?void 0:E.routers)}},otherParams:{routerData:t.routerData,providerKey:_e.current,from:(H=N.current)==null?void 0:H.coin_type,to:(M=V.current)==null?void 0:M.coin_type}});return console.log("ðŸš€ ~ file: useSwap.ts:272 ~ doSwapAction ~ res:",Ae),Ae?(G(),ss(),!0):(L(),!1)}catch(U){console.log("ðŸš€ ~ doSwapAction ~ error text:",U)}},{isScamsCoin:re}=Be(r),{isScamsCoin:te}=Be(s),us=x.useMemo(()=>{if(!(!re&&!te)){if(re&&te&&(r!=null&&r.symbol)&&(s!=null&&s.symbol))return`${r==null?void 0:r.symbol} and ${s==null?void 0:s.symbol} are`;if(re&&(r!=null&&r.symbol))return`${r==null?void 0:r.symbol} token is `;if(te&&(s!=null&&s.symbol))return`${s==null?void 0:s.symbol} token is `}},[re,te,r==null?void 0:r.coin_type,s==null?void 0:s.coin_type]),hs=async n=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useSwap.ts:491 ~ onReverseClick ~ isOpenAggregatorMode:",n),n?(c?(l(s),i(r)):(l(s),i(r),m(`/swap/${s==null?void 0:s.coin_type}/${r==null?void 0:r.coin_type}`)),a(o),p(""),b(!0),await ue(200),L()):A?(c?(l(s),i(r)):m(`/swap/${s==null?void 0:s.coin_type}/${r==null?void 0:r.coin_type}`),a(""),p(h),b(!1),await ue(200),L()):(c?(l(s),i(r)):m(`/swap/${r==null?void 0:r.coin_type}/${s==null?void 0:s.coin_type}`),a(o),p(""),b(!0),await ue(200),L())};return x.useEffect(()=>()=>{c||(l(void 0),i(void 0)),a(""),p("")},[]),{handleSelectToken:ls,handleAmountChange:ps,fromAmount:h,toAmount:o,fromAmountValue:is,toAmountValue:os,amountLimit:as,getSwapSecondaryData:xs,reCalculateRouteData:L,fromBalanceInfo:rs,toBalanceInfo:ts,doSwapAction:ds,scamsText:us,refreshMarketPrice:ve,isOpenConfirmModel:ae,setIsOpenConfirmModel:ee,resetInputAmount:G,onReverseClick:hs}}function Ar(t,c,r,s,l,i){const{currentAccount:p}=Rs(),h=x.useMemo(()=>{const o={text:"Swap",disabled:!1};if(!(p!=null&&p.address))return o.text="Connect Wallet",o.disabled=!1,o;if(!s||!l)return o.text="Select a token",o.disabled=!0,o;if(!+t&&!+c)return o.text="Enter an amount",o.disabled=!0,o;if(i&&i.errorCode){if(i.errorCode===he.InsufficientLiquidity)return o.text="Insufficient liquidity for this trade",o.disabled=!0,o;if(i.errorCode===he.NoRouter||i.errorCode===he.HoneyPot)return o.text="No Available Route",o.disabled=!0,o}return+t&&Oe(t).gt(r||0)?(o.disabled=!0,o.text=`Insufficient ${De(s==null?void 0:s.symbol,10)} Balance`,o):((!+t||!+c)&&(o.disabled=!0),o)},[p==null?void 0:p.address,t,c,r,i==null?void 0:i.errorCode,s,l]);return{btnText:h.text,btnDisabled:h.disabled}}function Xe(t){const{fromToken:c,toToken:r,marketPrice:s,priceImpact:l,sources:i=[],isWidget:p=!1,isLoading:h}=t;return e.jsxs(d,{justify:"space-between",w:"100%",gap:"4px",flexWrap:"wrap",children:[e.jsxs(d,{w:"132px",alignItems:"end",gap:"4px",children:[e.jsx(u,{whiteSpace:"nowrap",fontSize:p?"12px":"14px",h:"20px",lineHeight:"20px",fontWeight:"500",children:"Price Difference"}),e.jsx(As,{tooltip:e.jsx(Zs,{marketPrice:s,sources:i,fromToken:c,toToken:r}),children:e.jsx(k,{children:e.jsx(q,{xlinkHref:"#icon-icon_tips",svgW:"20px",svgH:"20px"})})})]}),e.jsx(_,{isLoaded:!h,h:"20px",children:e.jsxs(d,{justify:"flex-end",children:[e.jsx(u,{maxW:p?`calc(90vw - 56px - ${24*((i==null?void 0:i.length)||0)}px)`:"unset",flex:"1",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:l==null?void 0:l.textColor,fontWeight:"500",fontSize:p?"12px":"14px",children:l!=null&&l.priceImpactText?l==null?void 0:l.priceImpactText:"Incalculable"}),i==null?void 0:i.map(o=>e.jsx(Ns,{market:o},o))]})})]})}function Zs(t){const{marketPrice:c,sources:r,fromToken:s,toToken:l}=t;return e.jsxs(S,{className:"no-close-widget-flag",w:"100%",align:"flex-start",gap:"12px",children:[e.jsx(u,{color:"content_text",fontSize:"12px",lineHeight:"20px",textAlign:"start",children:"The difference between the market price and estimated price due to trade size."}),e.jsxs(S,{w:"100%",align:"flex-start",children:[e.jsx(u,{fontSize:"12px",color:"text_caption",children:"Market price sources:"}),c?e.jsx(be,{fontSize:"12px",fromToken:s,toToken:l,fromValue:"1",toValue:c,color:"text_caption"}):e.jsx(u,{color:"primary_yellow",fontSize:"12px",children:"Price is unknown"})]}),c&&e.jsxs(d,{w:"100%",children:[e.jsx(u,{color:"content_text",fontSize:"12px",mt:"5px",whiteSpace:"pre",children:"Market price sources:"}),e.jsx(u,{color:"content_text",fontSize:"12px",mt:"5px",whiteSpace:"pre",children:r.map(i=>Vs[i]+"  ")})]})]})}function zr(t){const{fromCoin:c,toCoin:r,findRouterLoading:s,isWidget:l=!1,routerData:i,bg:p="primary_opacity.10"}=t,{marketPrice:h,priceImpact:o,sources:a,priceImpactTextInfo:f,hideShowPriceImpact:g}=Ye(c,r,i==null?void 0:i.fromAmountUi,i==null?void 0:i.toAmountUi);return e.jsxs(S,{w:"100%",p:"8px",gap:"8px",bg:p,borderRadius:"12px",align:"flex-start",children:[e.jsx(be,{fromToken:c,toToken:r,fromValue:i==null?void 0:i.fromAmountUi,toValue:i==null?void 0:i.toAmountUi,isLoading:s,color:"text_caption",fontSize:l?"12px":"14px"}),!g&&zs(o).lte(-30)&&e.jsxs(d,{w:"100%",justify:"flex-start",children:[e.jsx(q,{xlinkHref:"#icon-warning",svgFill:"primary_red",svgHover:"primary_red",fontSize:"16px"}),e.jsx(u,{color:"primary_red",fontSize:"12px",lineHeight:"20px",fontWeight:"500",children:"High price difference. Be cautious before submitting your order."})]}),!g&&e.jsx(Xe,{fromToken:c,isWidget:l,toToken:r,marketPrice:h,priceImpact:f,isLoading:s,sources:a})]})}function Ir({scamsText:t}){return e.jsxs(S,{borderRadius:"8px",border:"1px solid",borderColor:"border",pt:"12px",maxW:"480px",children:[e.jsxs(d,{children:[e.jsx(q,{xlinkHref:"#icon-icon_priceupdated",svgFill:"primary_yellow",svgHover:"primary_yellow",svgW:"20px",svgH:"20px"}),e.jsx(u,{color:"primary_yellow",children:"Alert"})]}),e.jsx(v,{bg:"card_bg",borderRadius:"8px",p:"11px",children:e.jsx(Gs,{text:`${t}  detected to have Deny List feature. It's an optional feature on Sui designed for regulated coins (learn more). However, it could be misused by HoneyPot scams, which may restrict users from selling the tokens after buying. Please be cautious.`,keywords:["learn more"],onKeywordClick:()=>{window.open("https://docs.sui.io/guides/developer/coin/regulated","_blank")}})})]})}const Je=({data:t,children:c,loading:r,isSwapWidget:s})=>{var p,h,o;const{getTokenInfo:l}=ge(),{isApp:i}=fe();return(t==null?void 0:t.providers)&&e.jsx(_,{isLoaded:!r,minW:"128px",minH:"20px",lineHeight:"20px",children:e.jsxs(d,{w:"100%",gap:"4px",align:"center",justify:"flex-end",wrap:"wrap",children:[(t==null?void 0:t.router_summery)!=="1 Streams"?e.jsx(u,{color:"text_caption",fontSize:s?"12px":"14px",fontWeight:"500",overflowWrap:"break-word",children:t==null?void 0:t.router_summery}):e.jsx(e.Fragment,{children:e.jsx(u,{color:"text_caption",fontSize:s?"12px":"14px",fontWeight:"500",textAlign:"right",overflowWrap:"break-word",children:(h=(p=t==null?void 0:t.routers[0])==null?void 0:p.paths)==null?void 0:h.map((a,f)=>{var g,w,b;return f===0?`${(g=l(a==null?void 0:a.from_type))==null?void 0:g.symbol} > ${(w=l(a==null?void 0:a.to_type))==null?void 0:w.symbol}`:(b=l(a==null?void 0:a.to_type))==null?void 0:b.symbol}).join(" > ")})}),(o=t==null?void 0:t.providers)==null?void 0:o.map(a=>i&&c?e.jsx(I,{w:"16px",h:"16px",imageUrl:O[a].logo}):e.jsxs(Ne,{isLazy:!0,trigger:i?"click":"hover",children:[e.jsx(Ve,{children:e.jsx(v,{children:e.jsx(I,{w:"16px",h:"16px",imageUrl:O[a].logo})})}),e.jsx(Ge,{children:e.jsx(Ke,{w:"unset",children:e.jsx(ke,{fontSize:"12px",children:O[a].name})})})]},a)),c]})})};function Ze({children:t,fromToken:c,toToken:r,poolAddress:s}){const{isApp:l}=fe(),{getExplorerUrl:i}=Is();return e.jsxs(Ne,{isLazy:!0,trigger:l?"click":"hover",children:[e.jsx(Ve,{children:t}),e.jsx(Ge,{children:e.jsx(Ke,{w:"unset",minW:"unset",children:e.jsx(ke,{p:"12px",children:e.jsxs(S,{w:"100%",gap:"12px",className:"no-close-widget-flag",children:[s&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{w:"100%",justify:"space-between",h:"20px",p:"0",children:[e.jsx(d,{children:e.jsx(u,{fontSize:"12px",color:"text_caption",children:"Pool"})}),e.jsx(Le,{address:s,color:"text_caption",showLink:!!l,onClickLink:()=>{window.open(i(s,"poolAddress"),"_blank")}})]}),e.jsx(Ms,{orientation:"horizontal",borderColor:"border"})]}),[c,r].map(p=>e.jsxs(d,{w:"100%",justify:"space-between",gap:"12px",children:[e.jsxs(d,{children:[e.jsx(I,{imageUrl:p==null?void 0:p.logo_url,w:"24px",h:"24px",coinType:p?p==null?void 0:p.coin_type:"",showTagWidth:"10px",showTagHeight:"10px"}),e.jsx(S,{align:"flex-start",gap:"0px",children:e.jsx(u,{fontSize:"12px",color:"text_caption",fontWeight:"500",children:De((p==null?void 0:p.symbol)||"",10)})})]}),e.jsx(Le,{color:"primary_gray",showLink:!!l,address:p==null?void 0:p.coin_type,onClickLink:()=>window.open(i(p==null?void 0:p.coin_type,"coin"))})]},p==null?void 0:p.coin_type))]})})})})]})}const Qs=({fromToken:t,toToken:c,fromAmount:r,toAmount:s,routes:l,loading:i})=>e.jsxs(S,{w:"100%",align:"center",p:"20px 0 8px",children:[e.jsx(d,{children:i?e.jsxs(e.Fragment,{children:[e.jsx(z,{w:"28px",h:"28px"}),e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t==null?void 0:t.coin_type,showTagWidth:"12px",showTagHeight:"12px"}),e.jsx(u,{color:"text_caption",children:W(r||"0")}),e.jsx(u,{children:t==null?void 0:t.symbol})]})}),e.jsx(v,{w:"100%",bg:"bg_secondary",p:"20px 8px",borderRadius:"8px",sx:{position:"relative",_before:{content:'""',position:"absolute",top:"0",left:"50%",width:"0",height:"20px",borderLeft:"1px dashed",borderColor:"border"},_after:{content:'""',position:"absolute",bottom:"0",left:"50%",width:"0",height:"20px",borderLeft:"1px dashed",borderColor:"border"}},children:e.jsx(S,{gap:i?"56px":"16px",border:"1px dashed",borderColor:"border",borderRadius:"8px",p:i?"36px 0":"16px 0",children:l==null?void 0:l.map((p,h)=>e.jsxs(d,{w:"100%",gap:"0",justify:"space-between",sx:{position:"relative",_before:{content:'""',position:"absolute",top:"50%",left:"0",width:"100%",height:"1px",borderTop:"1px dashed",borderColor:"border",zIndex:1}},children:[!i&&e.jsx(k,{borderRadius:"12px",h:"24px",bg:"h5_router_percentage_bg",p:"6px 12px",ml:"20px",zIndex:2,children:e.jsx(u,{color:"primary",fontSize:"12px",lineHeight:"12px",fontWeight:"500",children:oe(p.percentage)})}),e.jsx(S,{w:"100%",align:"center",sx:p.paths.length>1&&!i?{position:"relative",_before:{content:'""',backgroundColor:"bg_secondary",position:"absolute",top:"20px",right:"16px",width:"calc(100% - 32px)",height:"calc(100% - 40px)",border:"1px dashed",borderColor:"border",borderRadius:"8px",zIndex:2}}:{},children:i?e.jsx(e.Fragment,{children:e.jsxs(d,{gap:"8px",position:"absolute",h:"40px",top:"-20px",borderRadius:"20px",p:"8px",bg:"card_bg",zIndex:2,children:[e.jsxs(d,{gap:"0",children:[e.jsx(z,{w:"24px",h:"24px"}),e.jsx(z,{w:"24px",h:"24px"})]}),e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]})]})}):p.paths.map(o=>{var a,f,g;return e.jsx(Ze,{fromToken:o==null?void 0:o.fromToken,toToken:o==null?void 0:o.toToken,poolAddress:o==null?void 0:o.pool_address,children:e.jsxs(d,{borderRadius:"20px",p:"8px",bg:"card_bg",zIndex:3,children:[e.jsx(Ce,{coinAIconUrl:(a=o.fromToken)==null?void 0:a.logo_url,coinBIconUrl:(f=o.toToken)==null?void 0:f.logo_url,w:"24px",h:"24px",imageStyle:{decoding:"async"}}),e.jsx(u,{fontSize:"12px",color:"text_caption",lineHeight:"12px",fontWeight:"500",children:(g=O[o.provider])==null?void 0:g.name}),!!+o.fee_rate&&e.jsx(k,{p:"6px 8px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:e.jsx(u,{fontSize:"12px",color:"text_caption",lineHeight:"12px",fontWeight:"500",children:oe(o.fee_rate)})})]},o.to_type)},o.to_type)})})]},h))})}),e.jsx(d,{children:i?e.jsxs(e.Fragment,{children:[e.jsx(z,{w:"28px",h:"28px"}),e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{imageUrl:c==null?void 0:c.logo_url,w:"28px",h:"28px",coinType:c==null?void 0:c.coin_type,showTagWidth:"12px",showTagHeight:"12px"}),e.jsx(u,{color:"text_caption",children:W(s||"0")}),e.jsx(u,{children:c==null?void 0:c.symbol})]})})]}),er=({fromToken:t,toToken:c,fromAmount:r,toAmount:s,routes:l,loading:i})=>{var p;return e.jsxs(S,{w:"100%",gap:"12px",children:[e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(d,{borderRadius:"14px",h:"28px",p:"0 12px 0 0 ",children:i?e.jsxs(e.Fragment,{children:[e.jsx(z,{w:"28px",h:"28px"}),e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t==null?void 0:t.coin_type,showTagWidth:"12px",showTagHeight:"12px"}),e.jsx(u,{color:"text_caption",children:W(r||"0")}),e.jsx(u,{children:t==null?void 0:t.symbol})]})}),e.jsx(d,{borderRadius:"14px",h:"28px",p:"0 0 0 12px",children:i?e.jsxs(e.Fragment,{children:[e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]}),e.jsx(z,{w:"28px",h:"28px"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{color:"text_caption",children:W(s||"0")}),e.jsx(u,{children:c==null?void 0:c.symbol}),e.jsx(I,{imageUrl:c==null?void 0:c.logo_url,w:"28px",h:"28px",coinType:c==null?void 0:c.coin_type,showTagWidth:"12px",showTagHeight:"12px"})]})})]}),e.jsxs(v,{w:"100%",bg:"bg_secondary",p:"32px 24px",borderRadius:"12px",position:"relative",children:[e.jsx(v,{position:"absolute",left:"0",p:"8px",top:"calc(50% - 20px)",bg:"background",borderRadius:"0px 100px 100px 0px",zIndex:2,children:i?e.jsx(z,{w:"24px",h:"24px"}):e.jsx(I,{imageUrl:t==null?void 0:t.logo_url,w:"24px",h:"24px",coinType:t==null?void 0:t.coin_type,showTagWidth:"10px",showTagHeight:"10px"})}),e.jsx(v,{position:"absolute",right:"0",p:"8px",top:"calc(50% - 20px)",bg:"background",borderRadius:"100px 0px 0px 100px",zIndex:2,children:i?e.jsx(z,{w:"24px",h:"24px"}):e.jsx(I,{imageUrl:c==null?void 0:c.logo_url,w:"24px",h:"24px",coinType:c==null?void 0:c.coin_type,showTagWidth:"10px",showTagHeight:"10px"})}),e.jsx(S,{gap:"32px",border:"1px dashed",borderBottom:((p=l||[])==null?void 0:p.length)>1?"1px dashed":"none",borderColor:"border",borderRadius:"8px",children:l==null?void 0:l.map((h,o)=>e.jsxs(d,{mt:o===0?"-20px":0,mb:o===l.length-1?"-20px":0,w:"100%",justify:"space-between",gap:"0",sx:o>0&&o<l.length-1?{position:"relative",_before:{content:'""',position:"absolute",top:"50%",left:"0",width:"100%",height:"1px",borderTop:"1px dashed",borderColor:"border",zIndex:1}}:{position:"relative"},children:[!i&&e.jsx(k,{borderRadius:"12px",h:"24px",bg:"card_bg",p:"8px 12px",ml:"40px",zIndex:2,position:"absolute",children:e.jsx(u,{color:"primary",fontSize:"12px",lineHeight:"12px",fontWeight:"500",children:oe(h.percentage)})}),e.jsx(d,{h:"40px",w:"100%",justify:"center",zIndex:2,children:i?e.jsx(e.Fragment,{children:e.jsxs(d,{gap:"8px",position:"absolute",h:"40px",borderRadius:"20px",p:"8px",bg:"card_bg",children:[e.jsxs(d,{gap:"0",children:[e.jsx(z,{w:"24px",h:"24px"}),e.jsx(z,{w:"24px",h:"24px"})]}),e.jsxs(v,{pos:"relative",w:"100px",h:"14px",children:[e.jsx(_,{pos:"absolute",left:"0",w:"50%",borderRadius:"4px",h:"14px",endColor:"skeleton_light"}),e.jsx(_,{pos:"absolute",right:"0",w:"100%",h:"14px"})]})]})}):h.paths.map(a=>{var f,g,w;return e.jsx(Ze,{fromToken:a==null?void 0:a.fromToken,toToken:a==null?void 0:a.toToken,poolAddress:a==null?void 0:a.pool_address,children:e.jsxs(d,{borderRadius:"20px",p:"8px",bg:"card_bg",children:[e.jsx(Ce,{coinAIconUrl:(f=a.fromToken)==null?void 0:f.logo_url,coinBIconUrl:(g=a.toToken)==null?void 0:g.logo_url,variant:"",p:"0px",w:"24px",h:"24px",imageStyle:{decoding:"async"}}),e.jsx(u,{fontSize:"12px",color:"text_caption",lineHeight:"12px",fontWeight:"500",children:(w=O[a.provider])==null?void 0:w.name}),!!+a.fee_rate&&e.jsx(k,{p:"6px 8px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:e.jsx(u,{fontSize:"12px",color:"text_caption",lineHeight:"12px",fontWeight:"500",children:oe(a.fee_rate)})})]})},a.to_type)})})]},o))})]})]})},sr=({isOpen:t,onClose:c,data:r,fromCoin:s,toCoin:l,fromAmount:i,toAmount:p})=>{var A;const{isApp:h}=fe(),{getTokenInfo:o}=ge(),a=(A=r==null?void 0:r.routers)==null?void 0:A.map(R=>({...R,paths:R.paths.map(y=>({...y,fromToken:o(y.from_type),toToken:o(y.to_type)}))})),f={fromToken:s,toToken:l,fromAmount:i,toAmount:p,routes:a},[g,w]=x.useState(!0),b=x.useRef(null);return x.useEffect(()=>(b.current&&(clearTimeout(b.current),b.current=null),b.current=setTimeout(()=>{w(!1)},200),()=>{b.current&&(clearTimeout(b.current),b.current=null)}),[]),e.jsxs(Fs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:c,isCentered:!0,children:[e.jsx(Ls,{}),e.jsxs(Us,{maxW:"1200px",w:h?"calc(100vw - 32px)":"880px",children:[e.jsx(Bs,{mr:"-10px",children:e.jsxs(d,{w:"100%",gap:"24px",justify:"space-between",align:"center",children:[e.jsx(u,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Route"}),e.jsxs(d,{gap:"0",align:"center",children:[e.jsx(Je,{data:r}),e.jsx(Es,{mt:"0",position:"static"})]})]})}),e.jsx(Os,{p:{base:"8px 16px",lg:"16px"},children:h?e.jsx(Qs,{...f,loading:g}):e.jsx(er,{...f,loading:g})})]})]})};function Hr(t){const{formatSwapRouter:c,findRouterLoading:r,fromAmount:s,toAmount:l,fromCoin:i,toCoin:p,isSwapWidget:h=!1,handleSwapWidgetRouterClick:o}=t,[a,f]=x.useState(!1);return console.log(c,"formatSwapRouter"),e.jsxs(e.Fragment,{children:[e.jsxs(d,{w:"100%",justify:"space-between",p:"0 8px",children:[e.jsx(u,{fontSize:h?"12px":"14px",fontWeight:"500",whiteSpace:"nowrap",children:"Auto Router"}),e.jsx(v,{onClick:g=>{Hs(g),h?o&&o():f(!a)},cursor:"pointer",children:e.jsx(Je,{data:c,loading:r,isSwapWidget:h,children:e.jsx(q,{xlinkHref:"#icon-icon_spread",fontSize:"16px"})})})]}),a&&!h&&e.jsx(sr,{isOpen:a,onClose:()=>f(!1),fromCoin:i,toCoin:p,data:c,fromAmount:s,toAmount:l})]})}function Pr(t){const{lastRouterData:c,fromCoin:r,toCoin:s,onClose:l,data:i,onSubmitClick:p,isWidget:h}=t,{slippage:o}=Ee(),a=x.useRef(!1),[f,g]=x.useState(i),{fromAmountUi:w,toAmountUi:b,byAmountIn:A}=f,{amountLimit:R}=qe(o,f),[y,ne]=x.useState(!1),{priceImpactTextInfo:ce,marketPrice:pe,sources:Y,showPriceImpactTips:X,showPriceImpactWarn:T}=Ye(r,s,w,b),{priceAcceptRouterData:F}=Cs(f,c),[J,le]=x.useState(!1),Z=x.useMemo(()=>F!==void 0,[F]),m=x.useMemo(()=>A?s:r,[A]),Q=()=>{if(F){if(a.current)return;a.current=!0;const ee=Xs(F);g(ee),setTimeout(()=>{a.current=!1},300)}},ae=x.useMemo(()=>y?!1:!!T,[y,T]);return e.jsxs(S,{textAlign:"center",p:"0px",w:"100%",children:[e.jsxs(S,{w:"100%",gap:"16px",pl:"16px",pr:"16px",pb:"16px",children:[e.jsx(Ks,{bg:h?"swap_bg_primary":"bg_primary",coinA:{amount:w||"0",...r},iconParams:{xlinkHref:"#icon-a-icon_trade",svgFill:"text_caption",fontSize:"12px"},coinB:{amount:b||"0",...s}}),e.jsx(d,{w:"100%",minH:"48px",bg:h?"swap_bg_primary":"bg_primary",borderRadius:"8px",border:"1px solid",borderColor:"border",justifyContent:"center",zIndex:"100",children:e.jsx(be,{fromToken:r,toToken:s,fromValue:w,toValue:b,color:"text_caption"})}),X&&e.jsx(d,{zIndex:"99",w:"100%",mt:"-26px",bg:T?"primary_red_opacity.10":"primary_yellow_opacity.10",borderRadius:"12px",border:"1px solid",borderColor:"border",justifyContent:"center",p:"18px 16px 10px",children:e.jsx(u,{color:T?"primary_red":"primary_yellow",fontSize:"12px",lineHeight:"20px",textAlign:"start",fontWeight:"500",children:"High price difference. Be cautious before submitting your order."})}),e.jsx(Ue,{wrapStyle:{h:"20px",lineHeight:"20px"},label:"Slippage Tolerance",labelStyle:{fontSize:"14px"},value:`${Oe(o).mul(100)}%`,valueStyle:{fontSize:"14px"}}),e.jsx(Ue,{wrapStyle:{h:"20px",lineHeight:"20px"},label:A?"Minimum Received":"Maximum Input",labelStyle:{fontSize:"14px"},value:`${Ps(R||0,m==null?void 0:m.decimals,!1,$s.ROUND_DOWN).toString()} ${m==null?void 0:m.symbol}`,valueStyle:{fontSize:"14px"}}),e.jsx(Xe,{fromToken:r,toToken:s,sources:Y,marketPrice:pe,priceImpact:ce}),T&&e.jsxs(S,{w:"100%",gap:"8px",children:[e.jsx(d,{w:"100%",bg:"primary_red_opacity.10",borderRadius:"12px",border:"1px solid",borderColor:"border",justifyContent:"start",p:"10px 16px",children:e.jsx(u,{color:"primary_red",fontSize:"12px",lineHeight:"20px",textAlign:"start",children:"The exchange rate of this order deviates from the market price by a large percentage. Are you sure you want to continue the swap?"})}),e.jsxs(d,{w:"100%",justifyContent:"space-between",gap:"16px",children:[e.jsx(ie,{variant:"outline",w:"100%",color:"text_highlight",fontSize:"14px",borderColor:y?"text_highlight":"button_outline_border",onClick:()=>{ne(!0)},children:"Yes, please continue."}),e.jsx(ie,{variant:"outline",w:"100%",color:"text_highlight",fontSize:"14px",borderColor:"button_outline_border",onClick:l,children:"No,cancel it."})]})]}),Z&&e.jsxs(d,{w:"100%",justifyContent:"space-between",children:[e.jsxs(d,{children:[e.jsx(q,{xlinkHref:"#icon-icon_priceupdated1",svgW:"20px",svgH:"20px"}),e.jsx(u,{color:"text_caption",fontWeight:"500",fontSize:"14px",children:"Price updated"})]}),e.jsx(ie,{onClick:Q,h:"40px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",p:"0 42px",children:"Accept"})]})]}),!Z&&e.jsx(ie,{disabled:ae,isLoading:J,mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{J||(le(!0),p(f))},children:"Confirm Swap"})]})}export{Qs as H,Je as O,zr as P,Ir as S,Ar as a,Hr as b,Pr as c,Rr as u};
//# sourceMappingURL=SwapConfirmBlock-JuxVmCPB.js.map
