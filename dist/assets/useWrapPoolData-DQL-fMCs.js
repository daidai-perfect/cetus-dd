import{c5 as es,s as P,d as r,ap as is,q as cs,y as fs,Q as Z,p as o,aa as ss}from"./index-BnmCMmyx.js";import"./vendor-BulRdKUe.js";const W=(e,t)=>{if(!e||(e==null?void 0:e.length)<1)return t?"0%":"0";const D=e.reduce((_,c)=>{const u=c?String(c):"0",g=es(u);return _.add(g)},r(0));return t?r(D).gt(1e4)?">1,000,000%":P(D.mul(100).toString(),"%"):D.toString()},R=(e,t,D)=>{if(!e)return t?"0%":"0";if(e==="--")return"--";const s=es(e);return D&&r(s).gt(100)?">10,000%":t?P(r(s).mul(100).toString(),"%"):s},_s=e=>`${r(e).mul(100).toString()}%`,gs=(e,t)=>{const D=cs(e,t);return fs(D.toString(),t)},vs=e=>{const t=new Date(e).getDate();return t<10?`0${t}`:String(t)},ds=e=>{var t;return is((t=r(e))==null?void 0:t.mul(60*60*24).toString(),0)};function ys(){const e=s=>{var v,n,a;const _=s==null?void 0:s.has_mining;let c=r(0);const u=[],g=[];if(_){const i=((a=(n=(v=s==null?void 0:s.object)==null?void 0:v.rewarder_manager)==null?void 0:n.fields)==null?void 0:a.rewarders)||[],m=(s==null?void 0:s.rewarder_apr)||[];i==null||i.forEach((f,S)=>{var h,T,E,F,y;const d=r((h=f==null?void 0:f.fields)==null?void 0:h.emissions_per_second).mul(o.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${S+1}`]&&r(d).gt(0)){const b=R(m[S]);c=c.add(b);const w=(y=Z((F=(E=(T=f==null?void 0:f.fields)==null?void 0:T.reward_coin)==null?void 0:E.fields)==null?void 0:F.name))==null?void 0:y.source_address;u.push({coinType:w,emissionsEveryDay:ds(d)}),g.push({coinType:w,apr:b,aprDisplay:R(b,!0)})}})}return{haveMining:_&&u.length>0,miningRewardList:u,miningAprList:g,miningAprTotal:c.toString()}},t=s=>{var h,T,E,F,y,b,w,$,U,L;const _=(s==null?void 0:s.is_forward)===!1,c=s==null?void 0:s.has_farming,u=[];let g="",v="",n="",a="",i=0,m=0,f="",S="",d=r(0);if(c){g=(h=s==null?void 0:s.stable_farming)==null?void 0:h.stable_farming_pool;const x=(T=s==null?void 0:s.stable_farming)==null?void 0:T.stable_rewarder;x==null||x.forEach((A,q)=>{const k=r(A==null?void 0:A.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${q+1}`]&&k.gt(0)){const I=R(A==null?void 0:A.apr);d=d==null?void 0:d.add(I),u.push({coinType:Z(A.coin).source_address,emissionsEveryDay:k.mul(86400).toDP(2,o.ROUND_HALF_UP).toString()})}}),v=(E=s==null?void 0:s.stable_farming)==null?void 0:E.tvl,n=P((F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,"$"),a=P(r(d).mul(100).toString(),"%",2,!0),i=(y=s==null?void 0:s.stable_farming)==null?void 0:y.effective_tick_lower,m=(b=s==null?void 0:s.stable_farming)==null?void 0:b.effective_tick_upper;const j=ss.tickIndexToPrice(i,(w=s==null?void 0:s.coin_a)==null?void 0:w.decimals,($=s==null?void 0:s.coin_b)==null?void 0:$.decimals).toString(),M=ss.tickIndexToPrice(m,(U=s==null?void 0:s.coin_a)==null?void 0:U.decimals,(L=s==null?void 0:s.coin_b)==null?void 0:L.decimals).toString();f=_?r(1).div(M).toString():j,S=_?r(1).div(j).toString():M}return{haveFarming:c,farmsRewarderList:u,farmsApr:d.toString(),farmingAprDisplay:a,farmsStatedTvl:v,farmsStatedTvlDisplay:n,farmsEffectiveTickLower:i,farmsEffectiveTickUpper:m,displayFarmsEffectMinPrice:f,displayFarmsEffectMaxPrice:S,farmsPoolAddress:g}};return{wrapPoolData:(s,_=!1)=>{var K,X,Y,O,B,l,p;const c=s==null?void 0:s.object,u=(K=s==null?void 0:s.object)==null?void 0:K.index,g=s.address,v=(s==null?void 0:s.is_forward)===!1,n={...s==null?void 0:s.coin_a,coin_type:(Y=Z((X=s==null?void 0:s.coin_a)==null?void 0:X.address))==null?void 0:Y.source_address},a={...s==null?void 0:s.coin_b,coin_type:(B=Z((O=s==null?void 0:s.coin_b)==null?void 0:O.address))==null?void 0:B.source_address},i=v?a:n,m=v?n:a,f=`${i==null?void 0:i.symbol} - ${m==null?void 0:m.symbol}`,S=r(s.fee).mul(1e4).toString(),d=r(s.fee).mul(100).toString()+"%",h=s==null?void 0:s.tick_spacing,T=P(s.pure_tvl_in_usd||0),E=P(s.vol_in_usd_24h||0),F=P(s.fee_24_h||0),y=R((l=s==null?void 0:s.apr)==null?void 0:l.fee_apr_24h),b=R((p=s==null?void 0:s.apr)==null?void 0:p.fee_apr_24h,!0),{haveMining:w,miningRewardList:$,miningAprList:U,miningAprTotal:L}=e(s),{haveFarming:x,farmsRewarderList:j,farmsApr:M,farmingAprDisplay:A,farmsStatedTvl:q,farmsStatedTvlDisplay:k,farmsEffectiveTickLower:I,farmsEffectiveTickUpper:Q,displayFarmsEffectMinPrice:V,displayFarmsEffectMaxPrice:z,farmsPoolAddress:C}=t(s),N=W([y,L]),ts=r(N).gt(1e4)?">1,000,000%":P(r(N).mul(100).toString(),"%"),rs=W([N,M]),ns=W([y,M],!0),as=W([N,M],!0),H=s.is_vaults,G=!H&&s.vaults&&s.vaults.length>0&&s.show_vaults,J=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return _?{poolAddress:g,name:f,isReverse:v,tokenA:n,tokenB:a,displayTokenA:i,displayTokenB:m,haveMining:w,miningRewardList:null,miningAprList:null,haveFarming:x,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:S,fee:s.fee,feeDisplay:d,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:H,isLocalData:_,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:I,farmsEffectiveTickUpper:Q,displayFarmsEffectMinPrice:V,displayFarmsEffectMaxPrice:z,farmsPoolAddress:C,tickSpacing:h,index:u,object:c,haveZap:(n==null?void 0:n.is_trusted)&&(a==null?void 0:a.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:G,vaultId:J}:{poolAddress:g,name:f,isReverse:v,tokenA:n,tokenB:a,displayTokenA:i,displayTokenB:m,haveMining:w,miningRewardList:$,miningAprList:U,haveFarming:x,farmsRewarderList:j,farmsApr:M,farmingAprDisplay:A,feeApr:y,feeAprDisplay:b,miningAprTotal:L,feeAndMiningAprDisplay:ts,totalAprDisplay:as,fee:s.fee,feeRate:S,feeDisplay:d,tvlDisplay:T,tvl:s.pure_tvl_in_usd||0,volume24Display:E,fees24Display:F,isVaults:H,farmsStatedTvl:q,farmsStatedTvlDisplay:k,feeAndFarmsApr:rs,feeAndFarmsAprDisplay:ns,farmsEffectiveTickLower:I,farmsEffectiveTickUpper:Q,displayFarmsEffectMinPrice:V,displayFarmsEffectMaxPrice:z,farmsPoolAddress:C,tickSpacing:h,index:u,object:c,haveZap:(n==null?void 0:n.is_trusted)&&(a==null?void 0:a.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:G,vaultId:J}}}}export{R as a,W as b,gs as c,vs as d,_s as f,ys as u};
//# sourceMappingURL=useWrapPoolData-DQL-fMCs.js.map
