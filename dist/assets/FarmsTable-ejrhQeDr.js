import{j as e,V as R,H as V,T as A,a as y,p as M,q as N,f as G,aa as z,R as q,at as S,au as u,C as Z,av as J,aw as K,ax as k,ay as Q,F as U}from"./vendor-BFGDaAdA.js";import{f as X,k as w,o as H,n as L,d as E,O as Y,F as D,I as f,a as I,x as B,Z as C,B as ss}from"./index-C2McGhUQ.js";import{N as W}from"./NoData-DtiZhmrM.js";import{a as O,u as es}from"./usePositionList-C5YBA0hs.js";import{A as ts}from"./index-DwoAPM79.js";import{u as rs,E as ls}from"./ExpendItem-bJhdiA_r.js";import{S as os}from"./SingleTokenInfo-Bg-EjLFW.js";import{u as ds}from"./useToken-17dggns_.js";import{C as xs}from"./CoinPairInfo-BY0tnnXH.js";import{R as is}from"./RangeValue-Bq6NaZIx.js";function ns({apiInfo:s}){var o,l,n;const{tokenInfo:r}=ds((o=(s==null?void 0:s.farmsRewarderList)||[])==null?void 0:o.map(t=>t==null?void 0:t.coinType));return e.jsx(R,{align:"flex-end",children:s!=null&&s.farmsRewarderList&&((l=s==null?void 0:s.farmsRewarderList)==null?void 0:l.length)>0?(n=s==null?void 0:s.farmsRewarderList)==null?void 0:n.map(t=>{var d;return e.jsxs(V,{children:[e.jsx(os,{token:r==null?void 0:r.get(t==null?void 0:t.coinType),imgBoxStyle:{w:"20px",h:"20px"},warningIcon:{iconW:"10px",iconH:"10px"},haveName:!1,haveSymbol:!1}),e.jsxs(A,{color:"text_caption",fontWeight:"500",children:[X(t==null?void 0:t.emissionsEveryDay)," ",(d=r==null?void 0:r.get(t==null?void 0:t.coinType))==null?void 0:d.symbol]})]},t==null?void 0:t.coinType)}):e.jsx(A,{color:"text_caption",children:"--"})})}function cs({apiInfo:s}){var p;const{currentAccount:r}=w(),{getTokenAmountValue:o}=H(),{coinPriceObj:l}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{posLiquidityData:n,posBaseListLoading:t,posBaseListGroupByPool:d}=O(),j=y.useMemo(()=>{var h,c;if(!(r!=null&&r.address)||!(s!=null&&s.poolAddress))return"--";if(!t)return(((c=(h=d[s.poolAddress])==null?void 0:h.list)==null?void 0:c.filter(i=>(i==null?void 0:i.posType)=="farms"))||[]).reduce((i,a)=>{var b,v;const m=n[a==null?void 0:a.posId],F=o((b=s==null?void 0:s.displayTokenA)==null?void 0:b.coin_type,m==null?void 0:m.displayCoinAmountA,"--"),_=o((v=s==null?void 0:s.displayTokenB)==null?void 0:v.coin_type,m==null?void 0:m.displayCoinAmountB,"--");return i=="--"||F=="--"||_=="--"?"--":E(i).plus(F).plus(_).toString()},"0")},[t,(p=Object.values(n))==null?void 0:p.length,l,r==null?void 0:r.address]),[g,P]=y.useState(""),x=y.useMemo(()=>{var c,T;const h=((T=(c=d==null?void 0:d[s==null?void 0:s.poolAddress])==null?void 0:c.list)==null?void 0:T.filter(i=>i.posType!=="burn").sort((i,a)=>Number(a.liquidity)-Number(i.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",h),h},[s==null?void 0:s.poolAddress,d]);return y.useEffect(()=>{const h=x==null?void 0:x.filter(c=>c.posType=="farms");P(h==null?void 0:h.length.toString())},[x]),e.jsx(e.Fragment,{children:r!=null&&r.address?e.jsxs(R,{align:"flex-end",children:[e.jsx(M,{isLoaded:!!j,children:e.jsx(A,{textColor:"text_caption",fontWeight:"500",textAlign:"right",lineHeight:"1",children:Y(j,2)})}),Number(g)>0&&e.jsx(M,{isLoaded:!!j,children:e.jsxs(A,{fontWeight:"500",bg:"position_farms_bg",color:"position_farms_color",fontSize:"12px",borderRadius:"8px",padding:"2px 10px",lineHeight:"1",children:[g," ",Number(g)>1?"Positions":"Position"]})})]}):e.jsx(A,{textColor:"text_caption",textAlign:"right",children:"--"})})}function $({apiInfo:s,disabled:r}){const{currentAccount:o}=w(),{posBaseListGroupByPool:l}=O(),{getPositionBaseList:n,getPosRelatedData:t}=es(),{toClaimAllPos:d,claimLoading:j}=rs(),g=async()=>{const x=await n(o==null?void 0:o.address);t(x,!0)},P=()=>{var x;d((x=l[s==null?void 0:s.poolAddress])==null?void 0:x.list,g)};return e.jsx(N,{onClick:x=>{D(x),P()},isLoading:j,disabled:r||j,w:{base:"64px",lg:"100px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",variant:"outline",fontSize:"14px",children:"Claim"})}function as({isOpen:s,apiInfo:r,disabled:o}){return e.jsxs(V,{justify:"flex-end",gap:"20px",children:[e.jsx($,{apiInfo:r,disabled:o}),e.jsx(N,{w:"32px",h:"90px",borderRadius:"8px",variant:"ghost",p:"0 !important",sx:{_hover:{svg:{fill:"text_caption"}}},children:e.jsx(f,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:s?"rotate(180deg)":"rotate(0deg)"})})]})}function gs({apiInfo:s,disabled:r,totalEarned:o}){const{isApp:l}=I();return e.jsxs(V,{justify:"flex-end",children:[e.jsx(M,{isLoaded:!!o,children:e.jsx(A,{textColor:"primary_yellow",textAlign:"right",fontWeight:"500",children:Y(o,2)})}),l&&e.jsx($,{apiInfo:s,disabled:r})]})}function hs({apiInfo:s}){const r=y.useMemo(()=>{if((s==null?void 0:s.displayFarmsEffectMaxPrice)!=="âˆž")return E(1).div(s==null?void 0:s.displayFarmsEffectMaxPrice).toString()},[s==null?void 0:s.displayFarmsEffectMaxPrice]),o=y.useMemo(()=>{if(E(s==null?void 0:s.displayFarmsEffectMinPrice).gt(0))return E(1).div(s==null?void 0:s.displayFarmsEffectMinPrice).toString()},[s==null?void 0:s.displayFarmsEffectMinPrice]);return e.jsxs(R,{align:"flex-start",gap:"8px",w:{base:"100%",lg:"unset"},children:[e.jsx(G,{m:"-12px 0",children:e.jsx(xs,{poolInfo:{...s,poolAddress:s==null?void 0:s.farmsPoolAddress},symbolFontSize:"15px"})}),e.jsx(V,{maxW:"100%",display:"inline-block",w:{base:"100%",lg:"unset"},borderRadius:"12px",bg:"position_status_bg",p:"7px 12px",children:e.jsxs(R,{align:"flex-start",gap:"0px",w:{base:"100%",lg:"unset"},children:[e.jsx(A,{fontSize:"12px",color:"primary_gray",children:"Valid Range"}),e.jsx(is,{symbolEllipsesDecimals:10,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,fontWeight:"500",priceInfo:{minPrice:B(s==null?void 0:s.displayFarmsEffectMinPrice).toString(),maxPrice:B(s==null?void 0:s.displayFarmsEffectMaxPrice).toString(),minPriceResever:B(r).toString(),maxPriceResever:B(o).toString()}})]})})]})}function ms({apiInfo:s}){z();const{getTokenAmountValue:r}=H(),{coinPriceObj:o}=L();console.log("ðŸš€ ~ FarmsTableItem ~ apiInfo:",s);const{currentAccount:l,onWalletModal:n}=w(),[t,d]=y.useState({}),{farmsPosRewardsDataLoading:j,farmsPosRewardsData:g,posBaseListLoading:P,posBaseListGroupByPool:x}=O(),p=y.useMemo(()=>{var c;if(!(l!=null&&l.address)||!(s!=null&&s.poolAddress))return"--";if(!P&&!j)return(((c=x[s.poolAddress])==null?void 0:c.list)||[]).reduce((i,a)=>{const m=g[a==null?void 0:a.id]||[];console.log("ðŸš€ ~ returnposBaseList.reduce ~ posFarmsData:",i,m);const F=m.reduce((_,b)=>{if(_==="--")return"--";const v=r(b==null?void 0:b.token.coin_type,b==null?void 0:b.display_amount_owed,"--");return v==="--"?"--":C(_).plus(v).toString()},"0");return i==="--"||F==="--"?"--":C(i).plus(F).toString()},"0")},[P,g,j,o,l==null?void 0:l.address]),h=y.useMemo(()=>{var T,i;const c=((i=(T=x==null?void 0:x[s==null?void 0:s.poolAddress])==null?void 0:T.list)==null?void 0:i.filter(a=>a.posType!=="burn").sort((a,m)=>Number(m.liquidity)-Number(a.liquidity)))||[];return console.log("ðŸš€ ~ expendList ~ list:",c),c},[s==null?void 0:s.poolAddress,x]);return e.jsxs(q.Fragment,{children:[e.jsxs(S,{cursor:"pointer",onClick:()=>{t[s==null?void 0:s.poolAddress]?t[s==null?void 0:s.poolAddress]=!1:t[s==null?void 0:s.poolAddress]=!0,d({...t})},sx:{td:{pb:t[s==null?void 0:s.poolAddress]?"20px !important":"16px !important"}},children:[e.jsx(u,{w:"30%",children:e.jsx(hs,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(A,{fontWeight:"500",textColor:"text_caption",textAlign:"right",children:s==null?void 0:s.farmsStatedTvlDisplay})}),e.jsx(u,{textAlign:"right",children:e.jsx(ts,{poolInfo:s,isPosition:!0})}),e.jsx(u,{textAlign:"right",children:e.jsx(ns,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(cs,{apiInfo:s})}),e.jsx(u,{textAlign:"right",children:e.jsx(gs,{totalEarned:p,apiInfo:s,disabled:p=="--"?!0:C(p).lte(0)})}),e.jsx(u,{textAlign:"right",children:e.jsx(as,{isOpen:t[s==null?void 0:s.poolAddress],apiInfo:s,disabled:p=="--"?!0:C(p).lte(0)})})]}),!t[s==null?void 0:s.poolAddress]&&e.jsx(S,{h:"16px"}),e.jsx(S,{position:"relative",top:"-20px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:t[s==null?void 0:s.poolAddress]&&e.jsx(u,{colSpan:7,children:e.jsx(us,{expendList:h,apiInfo:s})})})]},s==null?void 0:s.poolAddress)}const us=({expendList:s,apiInfo:r})=>{const o=z(),{currentAccount:l,onWalletModal:n}=w();return e.jsxs(ss,{overflow:"hidden",bg:{base:"bg_fifth",lg:"bg_secondary"},p:{base:"0px",lg:"16px"},borderTop:{lg:"none"},borderRadius:{base:"8px",lg:" 0 0 16px 16px "},children:[e.jsx(R,{overflow:"auto",h:l!=null&&l.address&&s&&(s==null?void 0:s.length)>2?"250px":"unset",children:l!=null&&l.address?(s==null?void 0:s.length)==0?e.jsx(W,{type:"nodata",text:"No Position Found",p:{base:"16px",lg:"20px"},border:{base:"none",lg:"1px solid"},borderColor:"border !important",borderRadius:{base:"8px",lg:"12px"},children:e.jsxs(R,{gap:"4px",mt:"-4px",children:[e.jsx(A,{fontSize:"12px",w:{base:"100%",lg:"380px"},lineHeight:{base:"16px",lg:"unset"},textAlign:"center",children:"Stake liquidity position to earn farming rewards. To get the position for this pool, you should provide liquidity to this pool first."}),e.jsx(N,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"36px",fontSize:"12px",onClick:()=>o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`),children:"Create a Position"})]})}):s==null?void 0:s.map((t,d)=>(console.log("ðŸš€ ~ expendList.map ~ item:",t),e.jsx(q.Fragment,{children:e.jsx(ls,{positionInfo:t,apiInfo:r})},d))):e.jsx(W,{type:"nowallet",onboard:()=>{n(!0)}})}),(s==null?void 0:s.length)>0&&(l==null?void 0:l.address)&&e.jsx(Z,{pb:{base:"12px",lg:"0"},children:e.jsx(N,{mt:{base:"12px",lg:"16px"},fontSize:"14px",onClick:t=>{o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`)},h:"32px",p:"0 16px",borderRadius:"8px",variant:"outline",children:"+ Create a position"})})]})};function _s({dataList:s,showSkeletonLoading:r,currTabLabel:o}){console.log("ðŸš€ ~ FarmsTable ~ currTabLabel:",o);const{currentAccount:l,onWalletModal:n}=w();return e.jsxs(J,{variant:"simple_list",w:"100%",children:[e.jsx(K,{children:e.jsxs(S,{children:[e.jsx(k,{children:"Pools"}),e.jsx(k,{textAlign:"right",children:"Staked TVL"}),e.jsx(k,{textAlign:"right",children:"APR"}),e.jsx(k,{textAlign:"right",children:"Rewards / day"}),e.jsx(k,{textAlign:"right",children:"Your Staked"}),e.jsx(k,{textAlign:"right",children:"Your Earned"}),e.jsx(k,{textAlign:"right",children:"Actions"})]})}),e.jsx(Q,{children:o=="Your Farms"&&!(l!=null&&l.address)?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(u,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nowallet",onboard:()=>{n(!0)}})})}):r?e.jsx(js,{itemList:[1,2,3],skeletonNum:7,skeletonW:["200px","110px","100px","100px","100px","100px","100px"]}):s.length===0?e.jsx(S,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(u,{colSpan:7,w:"100%",children:e.jsx(W,{type:"nodata",text:"No farms found"})})}):s.map(t=>e.jsx(ms,{apiInfo:t},t.poolAddress))})]})}function js({itemList:s,skeletonNum:r,skeletonW:o,rowStyle:l}){const n=(t,d)=>Array.from({length:t}).map((j,g)=>e.jsx(u,{textAlign:"right",children:e.jsx(U,{justify:g==0?"flex-start":"flex-end",children:e.jsx(M,{w:d?d[g]:"200px"})})},g));return s.map(t=>e.jsxs(q.Fragment,{children:[e.jsx(S,{h:"90px",...l,children:n(r,o)}),e.jsx(S,{h:"16px"})]},t))}export{us as F,ns as R,cs as S,gs as T,hs as V,_s as a,js as b};
//# sourceMappingURL=FarmsTable-ejrhQeDr.js.map
