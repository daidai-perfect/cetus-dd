import{u as me}from"./swapWidget-Copa3PU5.js";import{h as ce,aF as ne,u as be,L as J0,aG as ie,R as y0,s as de,j as h0,q as re,e as z0,m as N0,k as Z0,aH as ge,a2 as j0,aD as Q0,ai as I0,G as s0,D as te,r as W0,d as f,an as ye,aI as _e,aa as Se,o as B0,aJ as q0,ac as E0,p as U0,aK as $0,X as G0,S as ve,y as xe}from"./index-fbeVIhEM.js";import{a as i,j as V0,V as se,H as ue,C as he,T as Te}from"./vendor-DYqnJE5Q.js";import{a as Y0}from"./useWrapPoolData-MI-bkLDt.js";import{a as Ve}from"./useFavoritePool-DihHB75h.js";import{c as fe}from"./useGetPoolList-BbPXt71I.js";import{u as A0}from"./useToken-DDjE5wHP.js";import{u as X0}from"./useTokenBalance-8BL0zBEe.js";import{u as k0}from"./useTransaction-C8ePpdpE.js";import{u as ee}from"./global-C1pBzQJD.js";import{M as ae}from"./msafe-oYBkW7LJ.js";import{f as S0}from"./index-CLeAvPox.js";import{v as O0}from"./v4-C6aID195.js";import{u as Ce}from"./useFindBestRouting-CjnolFfe.js";import{H as M0}from"./HTextLabelBox-Bp3D8ySr.js";const we=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:e=>{s(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{s(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{s(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{s(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const a=l().contractVaultObj;a[e.id]=e,s(()=>({contractVaultObj:{...a}}))},setContractVaultObjLoading:e=>{s(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{s(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const a=l().contractClmmPoolObj;a[e.poolAddress]=e,s(()=>({contractClmmPoolObj:{...a}}))},setHoldTotalValue:(e,a)=>{const o=l().holdTotalValue;o[e]=a,s(()=>({holdTotalValue:{...o}}))},setDetailRefreshCount:e=>{s(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{s(()=>({lpTokenInfo:{...l().lpTokenInfo,...e}}))}}),H0=ce(ne(we,{name:"useVaultsStore2",partialize:s=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:o,lpTokenInfo:y}=s;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:o,lpTokenInfo:y}}}));function De(s,l){return{...s,vaultsTvl:(l==null?void 0:l.vaultsTvl)||"--",vaultsTvlDisplay:(l==null?void 0:l.vaultsTvlDisplay)||"--",vaultsApy:(l==null?void 0:l.vaultsApy)||"--",vaultsApyDisplay:(l==null?void 0:l.vaultsApyDisplay)||"--",vaultsTotalApy:(l==null?void 0:l.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(l==null?void 0:l.vaultsTotalApyDisplay)||"--",vaultsLstApy:(l==null?void 0:l.vaultsLstApy)||"--",vaultsLstApyDisplay:(l==null?void 0:l.vaultsLstApyDisplay)||"--",vaultsApr:(l==null?void 0:l.vaultsApr)||"--",vaultsAprDisplay:(l==null?void 0:l.vaultsAprDisplay)||"--",vaultsId:(l==null?void 0:l.vaultsId)||"",clmmPoolAddress:(l==null?void 0:l.clmmPoolAddress)||"",amountPerLpA:(l==null?void 0:l.amountPerLpA)||"0",amountPerLpB:(l==null?void 0:l.amountPerLpB)||"0",category:(l==null?void 0:l.category)||"",hardCapUSD:(l==null?void 0:l.hardCapUSD)||"--",depositRatioDisplay:(l==null?void 0:l.depositRatioDisplay)||"--",depositRatio:(l==null?void 0:l.depositRatio)||0,lpTokentype:(l==null?void 0:l.lpTokentype)||""}}const pa={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},Pe=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function Ue(){const{fetchByApi:s}=be(),{getFavoritePoolList:l}=Ve(),{setVaultStatsObj:e,setVaultBaseList:a,vaultBaseList:o,vaultStatsObj:y,setVaultStatsLoading:t,setVaultBaseListLoading:u}=H0(),n=async(M=!0,_,L)=>{try{M&&u(!0);const c=await l({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:_});console.log("🚀🚀🚀 ~ useGetVaultList.ts:35 ~ getVaultBaseList ~ res:",c);const p=c==null?void 0:c.list.map(r=>{var V,D,Z,Y,E;const J=[J0((V=r==null?void 0:r.tokenA)==null?void 0:V.coin_type),J0((D=r==null?void 0:r.tokenB)==null?void 0:D.coin_type)],g=r.isReverse?J.reverse():J,T=(Z=r==null?void 0:r.miningRewardList)==null?void 0:Z.map(F=>J0(F==null?void 0:F.coinType)),A=(Y=r==null?void 0:r.miningRewardList)==null?void 0:Y.map(F=>J0(F==null?void 0:F.coinType)),v=Array.from(new Set([...g,...T,...A]));return{...r,vaultsRewards:v,category:(E=L[r.poolAddress])==null?void 0:E.category}});return console.log("🚀 ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",p),p.length>0&&a(p),p}catch(c){console.log("getVaultBaseList Error:",c)}finally{u(!1)}return[]},U=async()=>{var M;try{t(!0);const _=await s("/v3/sui/vaults/pools","GET"),L={};if(_!=null&&_.list)return(M=_==null?void 0:_.list)==null||M.forEach(c=>{var p,r;if(c.display||!ie){const J=c==null?void 0:c.clmm_pool,g=c==null?void 0:c.id,T=c.category=="cetus"?y0(c==null?void 0:c.apy).add(y0(c.lst_apy)).toString():y0(c.apr).add(y0(c.apy)).toString(),A=Y0(T,!0,!0),v=c==null?void 0:c.apy,V=Y0(v,!0),D=c==null?void 0:c.lst_apy,Z=Y0(D,!0),Y=c==null?void 0:c.tvl,E=de(Y,"$"),F=c==null?void 0:c.apr,a0=Y0(F,!0),o0=c==null?void 0:c.hard_cap_usd,$=y0(Y).div(y0(o0)).mul(100),H=h0($,2);L[J]={vaultsApy:v,vaultsApyDisplay:V,vaultsTotalApy:T,vaultsTotalApyDisplay:A,vaultsLstApy:D,vaultsLstApyDisplay:Z,vaultsApr:F,vaultsAprDisplay:a0,clmmPoolAddress:J,vaultsId:g,vaultsTvl:Y,vaultsTvlDisplay:E,amountPerLpA:(p=c==null?void 0:c.reward_per_lp)==null?void 0:p.amount_a_per_lp,amountPerLpB:(r=c==null?void 0:c.reward_per_lp)==null?void 0:r.amount_b_per_lp,category:c.category,hardCapUSD:o0,depositRatio:$,depositRatioDisplay:H,lpTokentype:c==null?void 0:c.lp_type}}}),console.log("🚀🚀🚀 ~ useGetVaultList.ts:228 ~ getVaultsStats ~ vaultsStatsObj:",L),e(L),{vaultsStatsObj:L,vaultsList:_==null?void 0:_.list.filter(c=>c.display||!ie)}}catch(_){return console.log("🚀🚀🚀 ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",_),y}finally{t(!1)}return{}},t0=async M=>{try{const{vaultsStatsObj:_,vaultsList:L}=await U(),c=L.map(r=>r.clmm_pool);console.log("🚀🚀🚀 ~ useGetVaultList.ts:139 ~ getVaultList ~ statsObj:",_);const p=await n(!0,c,_);return console.log("🚀 ~ getVaultList ~ baseList:",p),b(M,p,_)}catch(_){return console.error("getVaultList Error:",_),k(M)}},k=M=>{try{const _=o,L=y;if(_&&_.length>0)return b(M,_,L);throw Error("Cache is null")}catch(_){return console.error("getVaultListFromCache Error:",_),Pe}},b=(M,_,L)=>{const{sortRule:c,sortType:p}=M,r=_==null?void 0:_.map(g=>{const T=L==null?void 0:L[g.poolAddress];return De(g,T)}),J=r==null?void 0:r.sort((g,T)=>{var A,v,V,D;return p==="apr"?c==="desc"?((A=T.vaultsTotalApy)==null?void 0:A.replace("%",""))-((v=g.vaultsTotalApy)==null?void 0:v.replace("%","")):((V=g.vaultsTotalApy)==null?void 0:V.replace("%",""))-((D=T.vaultsTotalApy)==null?void 0:D.replace("%","")):c==="desc"?T.vaultsTvl-g.vaultsTvl:g.vaultsTvl-T.vaultsTvl});return console.log("🚀🚀🚀 ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",JSON.stringify(J)),J};return{getVaultBaseList:n,getVaultsStats:U,getVaultListFromCache:k,getVaultList:t0}}function Le(s){const{getVaultList:l,getVaultListFromCache:e}=Ue(),[a,o]=i.useState(void 0),[y,t]=i.useState(!1),{setFromCoin:u,setToCoin:n}=me(),U=async(k,b)=>{var L;(a===void 0||b)&&t(!0);const M=await l({sortRule:"desc",sortType:"apr"}),_=((L=M==null?void 0:M.filter(c=>c.vaultsId===k))==null?void 0:L[0])||null;return t(!0),_&&o(_),_},t0=k=>{var _;const b=e({sortRule:"desc",sortType:"apr"});return((_=b==null?void 0:b.filter(L=>L.vaultsId===k))==null?void 0:_[0])||null};return i.useEffect(()=>{if(s){const k=t0(s);k&&o(k),U(s,!1)}},[s]),i.useEffect(()=>(a&&(u(a==null?void 0:a.displayTokenA),n(a==null?void 0:a.displayTokenB)),()=>{u(re.clmm_swap.from_coin),n(re.clmm_swap.to_coin)}),[a==null?void 0:a.vaultsId]),{vaultInfoLoading:y,apiVaultInfo:a,getApiVaultInfo:U}}const Ee=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},setVaultStatsObj:e=>{s(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{s(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{s(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{s(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const a=l().contractVaultObj;a[e.id]=e,s(()=>({contractVaultObj:{...a}}))},setContractVaultObjLoading:e=>{s(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{s(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const a=l().contractClmmPoolObj;a[e.poolAddress]=e,s(()=>({contractClmmPoolObj:{...a}}))},setHoldTotalValue:(e,a)=>{const o=l().holdTotalValue;o[e]=a,s(()=>({holdTotalValue:{...o}}))},setDetailRefreshCount:e=>{s(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{const a=l().lpTokenInfo;s(()=>({lpTokenInfo:{...a,[e.coin_type]:e}}))}}),K0=ce(ne(Ee,{name:"useUnstableVaultsListStore",partialize:s=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:o}=s;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:o}}}));function Re(s){const{contractVaultObj:l}=K0();return{contractVault:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function je(s){const{contractClmmPoolObj:l}=K0();return{contractClmmInfo:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function Oe(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function Fe(s,l,e,a,o=!1){var z;const{volatileVaultsSdk:y}=z0(),{getTokenAmountValue:t}=N0(),{currentAccount:u}=Z0(),{getTokenInfo:n}=A0(),{setContractVaultObjLoading:U,setContractVaultObj:t0,setContractClmmPoolObj:k,setContractClmmPoolObjLoading:b,setHoldTotalValue:M,holdTotalValue:_,setLpTokenInfo:L}=K0(),c=async(m,h=!1)=>{U(!0);try{const R=await y.Vaults.getPool(m,h);R&&t0(R)}catch(R){console.error("fetchVaultInfoFromContract error:",R)}finally{U(!1)}},p=async(m,h=!1)=>{b(!0);try{const R=await y.CetusClmmSDK.Pool.getPool(m,h);R&&k(R)}catch(R){console.error("fetchClmmPoolFromContract error:",R)}finally{b(!1)}},{contractVault:r}=Re(s),{tokenInfo:J}=A0(r==null?void 0:r.lp_token_type),[g,T]=i.useState(),[A,v]=i.useState(!1),[V,D]=i.useState(),Z=async(m,h,R)=>{v(!0);try{const B=await y.Vaults.getOwnerVaultsBalance(m,h);if(B){const l0=s0(B.lp_token_balance,R).toString();T({balance:B.lp_token_balance,balanceFormat:l0,balanceDisplay:h0(l0,void 0,void 0,te.ROUND_DOWN).toString()}),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:98 ~ fetchVaultBalance ~ res:",B),D(B)}}catch(B){console.error("fetchVaultBalance error:",B)}finally{v(!1)}},Y=i.useMemo(()=>r&&g&&y0(g.balance).gt(0)?y0(g.balance).div(r.lp_token_treasury).mul(100).toString():"0",[r,g]),{contractClmmInfo:E}=je(l),F=m=>{if(console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:119 ~ getHoldCoinAmounts ~ accountBalanceInfo:",m),m&&e&&a&&o!==void 0){const h=I0(m.amount_a.toString(),e.decimals).toString(),R=I0(m.amount_b.toString(),a.decimals).toString(),B=o?R:h,l0=o?h:R;return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:131 ~ getHoldCoinAmounts ~ coinAmountA",h,R,B,l0),{coinAmountA:h,coinAmountB:R,displayCoinA:B,displayCoinB:l0}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[a0,o0]=i.useState();i.useEffect(()=>{V&&o0(F(V))},[V==null?void 0:V.amount_a,V==null?void 0:V.amount_b,e==null?void 0:e.decimals,a==null?void 0:a.decimals,o]);const $=i.useMemo(()=>{if(r&&E&&e&&a){const m=ge("",r.lp_token_treasury,r,E);return F(m)}},[r,E,e,a,o]),H=i.useMemo(()=>{if(E&&e&&a)return j0.sqrtPriceX64ToPrice(new Q0(E.current_sqrt_price),e.decimals,a.decimals).toString()},[E==null?void 0:E.current_sqrt_price,e==null?void 0:e.decimals]),O=i.useMemo(()=>{if(r&&e&&a)return j0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_lower_index,e.decimals,a.decimals).toString()},[(z=r==null?void 0:r.clmm_vault)==null?void 0:z.wrapped_position.tick_lower_index,e==null?void 0:e.decimals]),v0=i.useMemo(()=>{if(r&&e&&a)return j0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_upper_index,e.decimals,a.decimals).toString()},[r==null?void 0:r.clmm_vault.wrapped_position.tick_upper_index,e==null?void 0:e.decimals]),e0=t(e==null?void 0:e.coin_type,a0==null?void 0:a0.coinAmountA),i0=t(a==null?void 0:a.coin_type,a0==null?void 0:a0.coinAmountB),u0=t(e==null?void 0:e.coin_type,$==null?void 0:$.coinAmountA),d0=t(a==null?void 0:a.coin_type,$==null?void 0:$.coinAmountB),w0=i.useMemo(()=>{if(H&&$)return fe($.coinAmountA,$.coinAmountB,H,!1)},[H,$]),Q=i.useMemo(()=>y0(u0).add(d0).toString(),[u0,d0]);i.useEffect(()=>{s&&e0&&i0&&M(s,y0(e0).add(i0).toString())},[e0,i0,s]);const n0=i.useMemo(()=>{if(s)return _[s]},[_,s]),f0=i.useMemo(()=>{if(r&&r.hard_cap&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&a){let m;r.quote_type?m=r.quote_type==(e==null?void 0:e.address)?e:a:m=n("0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC");const h=I0(r.hard_cap,m.decimals).toString();return t(m==null?void 0:m.coin_type,h)}return""},[r==null?void 0:r.hard_cap,e,a]),x0=i.useMemo(()=>{if(u0&&d0&&(r!=null&&r.hard_cap)&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&a){const m=r.quote_type==(e==null?void 0:e.address)?e:a,h=I0(r.hard_cap,m.decimals).toString(),R=t(m==null?void 0:m.coin_type,h);if(y0(u0).add(d0).gt(R))return!0}return!1},[u0,d0,r==null?void 0:r.hard_cap,e,a]);i.useEffect(()=>{u!=null&&u.address||(T(void 0),D(void 0))},[u]);const R0=i.useMemo(()=>{if(f0&&Q)return y0(Q).div(f0).mul(100).toString()},[f0,Q]),D0=i.useMemo(()=>r&&y0(r.protocol_fee_rate).gt(0)?y0(r.protocol_fee_rate).div(1e4).mul(100).toString():"0",[r]);return{fetchVaultInfoFromContract:c,contractVault:r,lpTokenInfo:J,balanceInfo:g,sharePoolRate:Y,fetchClmmPoolFromContract:p,holdCoinAmounts:a0,totalValue:n0,maxPrice:v0,currPrice:H,minPrice:O,vaultCoinAmounts:$,vaultsCoinAValue:u0,vaultsCoinBValue:d0,vaultsCoinPercent:w0,holdCoinAValue:e0,holdCoinBValue:i0,fetchVaultBalance:Z,isBalanceLoading:A,vaultTvl:Q,hardCapUSD:f0,gtAumLimit:x0,depositRatio:R0,performanceFee:D0}}function ma(s,l){return{lpRate:i.useMemo(()=>s&&l?f(l).eq(0)?"100%":`${ye(f(s).div(f(s).add(l)).mul(100).toString(),2,6)}%`:"0%",[s,l])}}function ba(s,l,e=!1){return{amountLimit:i.useMemo(()=>{if(l)return f(l).mul(e?1+s:1-s).toString()},[l,s,e])}}function Me(s){const{contractVaultObj:l}=H0();return{contractVault:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function Ie(s){const{contractClmmPoolObj:l}=H0();return{contractClmmInfo:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function $e(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function ga(s,l){const e=i.useMemo(()=>{if(l&&s)return`${W0(f(l.amountPerLpA).mul(s).toFixed(18,te.ROUND_DOWN),l.displayTokenA.decimals)}  ${l==null?void 0:l.displayTokenA.symbol}`},[l==null?void 0:l.amountPerLpA,s]),a=i.useMemo(()=>{if(l&&s)return`${W0(f(l.amountPerLpB).mul(s).toFixed(18,te.ROUND_DOWN),l.displayTokenB.decimals)}  ${l==null?void 0:l.displayTokenB.symbol}`},[l==null?void 0:l.amountPerLpB,s]);return{rewardPerA:e,rewardPerB:a}}function qe(s,l,e,a,o=!1){const{vaultsSdk:y}=z0(),{getTokenAmountValue:t}=N0(),{setContractVaultObjLoading:u,setContractVaultObj:n,setContractClmmPoolObj:U,setContractClmmPoolObjLoading:t0,setHoldTotalValue:k,holdTotalValue:b,setLpTokenInfo:M}=H0(),_=async(O,v0=!1)=>{u(!0);const e0=await y.Vaults.getVault(O,v0);console.log("🚀 ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",e0),e0&&n(e0),u(!1)},L=async(O,v0=!1)=>{t0(!0);const e0=await y.Pool.getPool(O,v0);console.log("🚀 ~ file: useGetVaultInfo.ts:33 ~ fetchClmmPoolFromContract ~ info:",e0),e0&&U(e0),t0(!1)},{contractVault:c}=Me(s);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:71 ~ contractVault:",c);const{tokenInfo:p}=A0(c==null?void 0:c.lp_token_type),{balanceInfo:r}=X0(p),J=i.useMemo(()=>c&&r?y0(r.balance).div(c.total_supply).mul(100).toString():"0",[c,r]),{contractClmmInfo:g}=Ie(l),T=O=>{if(c&&g&&e&&a&&o!==void 0){const v0=new Q0(g.current_sqrt_price),e0=j0.tickIndexToSqrtPriceX64(c.position.tick_lower_index),i0=j0.tickIndexToSqrtPriceX64(c.position.tick_upper_index),u0=Se.getCoinAmountFromLiquidity(new Q0(O),v0,e0,i0,!1),d0=s0(u0.coinA.toString(),e.decimals).toString(),w0=s0(u0.coinB.toString(),a.decimals).toString();return{coinAmountA:d0,coinAmountB:w0,displayCoinA:o?w0:d0,displayCoinB:o?d0:w0}}},A=i.useMemo(()=>{if(c&&r&&g){const O=_e.get_share_liquidity_by_amount(c,r.balance),v0=T(O);if(v0)return v0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[r==null?void 0:r.balance,g==null?void 0:g.current_sqrt_price]),v=i.useMemo(()=>{if(c&&g){const O=T(c.liquidity);if(O)return O}},[c==null?void 0:c.liquidity,g==null?void 0:g.current_sqrt_price]),V=i.useMemo(()=>{if(g&&e&&a)return j0.sqrtPriceX64ToPrice(new Q0(g.current_sqrt_price),e.decimals,a.decimals).toString()},[g==null?void 0:g.current_sqrt_price,e==null?void 0:e.decimals]),D=i.useMemo(()=>{if(c&&e&&a)return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",j0.tickIndexToPrice(c.position.tick_lower_index,e.decimals,a.decimals).toString()),j0.tickIndexToPrice(c.position.tick_lower_index,e.decimals,a.decimals).toString()},[c==null?void 0:c.position.tick_lower_index,e==null?void 0:e.decimals]),Z=i.useMemo(()=>{if(c&&e&&a)return j0.tickIndexToPrice(c.position.tick_upper_index,e.decimals,a.decimals).toString()},[c==null?void 0:c.position.tick_upper_index,e==null?void 0:e.decimals]),Y=t(e==null?void 0:e.coin_type,A.coinAmountA),E=t(a==null?void 0:a.coin_type,A.coinAmountB),F=t(e==null?void 0:e.coin_type,v==null?void 0:v.coinAmountA),a0=t(a==null?void 0:a.coin_type,v==null?void 0:v.coinAmountB),o0=i.useMemo(()=>{if(V&&v)return fe(v.coinAmountA,v.coinAmountB,V,!1)},[V,v]),$=i.useMemo(()=>de(y0(F).add(a0).toString(),"$"),[F,a0]);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",$),i.useEffect(()=>{s&&k(s,y0(Y).add(E).toString())},[Y,E,s]);const H=i.useMemo(()=>{if(s)return b[s]},[b,s]);return{fetchVaultInfoFromContract:_,contractVault:c,lpTokenInfo:p,balanceInfo:r,sharePoolRate:J,fetchClmmPoolFromContract:L,holdCoinAmounts:A,totalValue:H,maxPrice:Z,currPrice:V,minPrice:D,vaultCoinAmounts:v,vaultsCoinAValue:F,vaultsCoinBValue:a0,vaultsCoinPercent:o0,holdCoinAValue:Y,holdCoinBValue:E,calculateCoinAmounts:T,vaultTvl:$}}function Ge(s,l,e,a,o,y,t,u,n){const{vaultsSlippage:U,mevProtect:t0,maxCapForGas:k,transactionMode:b,customGasPrice:M}=ee(),{fetchTokenPrices:_,getTokenAmountValue:L}=N0(),{setDetailRefreshCount:c}=K0(),{volatileVaultsSdk:p}=z0(),[r,J]=i.useState(""),[g,T]=i.useState(""),[A,v]=i.useState(!0),[V,D]=i.useState(""),Z=i.useRef(""),Y=i.useRef(!0),E=i.useRef(""),F=i.useRef("");i.useEffect(()=>{Z.current=V},[V]),i.useEffect(()=>{Y.current=A},[A]),i.useEffect(()=>{E.current=r},[r,y,g]),i.useEffect(()=>{F.current=g},[g,y,r]),i.useEffect(()=>{C()},[t]),i.useEffect(()=>{const W=[];a&&o&&(W.push(a.coin_type),W.push(o.coin_type)),W.length>0&&_(W)},[a==null?void 0:a.coin_type,o==null?void 0:o.coin_type]);const{balanceInfo:a0}=X0(y?o:a),{balanceInfo:o0}=X0(y?a:o),$=L(y?o==null?void 0:o.coin_type:a==null?void 0:a.coin_type,r),H=L(y?a==null?void 0:a.coin_type:o==null?void 0:o.coin_type,g),O=i.useMemo(()=>f($||"0").add(H||"0").toString(),[$,H]),v0=i.useMemo(()=>{if(t)return f(O).gt(f(1e4))},[O,t]),e0=i.useMemo(()=>!!(u&&O&&f(u).gt(0)&&f(O).add(f(n)).gt(u)),[u,O,n]),[i0,u0]=i.useState(!1),[d0,w0]=i.useState(!1),[Q,n0]=i.useState(void 0),x0=B0(async(W,q,G,p0=!1,m0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",G),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",W,m0),a&&o&&e)try{w0(!0),c(0);const P0=q?a:o,x=q?o:a,j=U0(W,P0.decimals).toFixed(0),P=U0(m0||0,x.decimals).toFixed(0);let N;t?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:107 ~ preCalculate ~ assetAction:",s),N=s=="both"?"FlexibleBoth":s==(a==null?void 0:a.coin_type)?"OnlyCoinA":"OnlyCoinB"):N="FixedOneSide";let I={uuid:G,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:e};t?(N==="OnlyCoinB"&&(I={uuid:G,mode:"OnlyCoinB",pool_id:e,coin_amount_b:j}),N==="OnlyCoinA"&&(I={uuid:G,mode:"OnlyCoinA",pool_id:e,coin_amount_a:j}),N=="FlexibleBoth"&&(I={uuid:G,mode:"FlexibleBoth",pool_id:e,coin_amount_a:q?j:P,coin_amount_b:q?P:j})):I={uuid:G,mode:"FixedOneSide",fixed_amount:j,fixed_coin_a:q,pool_id:e};const d=await p.Vaults.preCalculateDepositAmount(I,{onSuccess:(S,X)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:171 ~ onSuccess ~ receive_lp_amount, uuid:",S),X==I.uuid&&(n0({amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:S}),w0(!1))},onError:(S,X)=>{console.log("🚀 ~ preCalculate ~ error:",S)}});console.log("🚀 ~ preCalculate ~ res:",{...d,uuid:G,assetAction:s,"+amountInputARef.current":+E.current});const w={amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:d.receive_lp_amount};if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:204 ~ preCalculate ~ wrapRes:",w),w.ft_amount=="0"){n0(void 0);return}if(Z.current!==G)return;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:162 ~ preCalculate ~ assetAction:",s),t){n0(w);return}if(s==="both"){const S=p0?!q:q;console.log("🚀🚀🚀 ~ useVaultsAdd.ts:164 ~ preCalculate ~ fix_amount_a_page:",S),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:168 ~ preCalculate ~ +amountInputARef.current:",+E.current),S?+E.current?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:173 ~ preCalculate ~ setAmountInputB:",T),T(s0(w.amount_b.toString(),p0?a==null?void 0:a.decimals:o==null?void 0:o.decimals).toString())):T(""):+F.current?J(s0(w.amount_a.toString(),p0?o==null?void 0:o.decimals:a==null?void 0:a.decimals).toString()):J("")}(s!=="both"||!t)&&n0(w)}catch(P0){console.log("🚀🚀🚀 ~ useVaultsAdd.ts:202 ~ preCalculate ~ error:",P0),String(P0).indexOf("has reached hardCap")>-1,console.log("🚀 ~ preCalculate ~ error:",P0),n0(void 0)}finally{}},500),R0=(W,q,G=!0,p0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:210 ~ handleAmountInputChange ~ amount:",W,p0),v(q),!W&&!p0){n0(void 0),J(""),T("");return}if((y?!q:q)?(J(W),G&&!t&&T("")):(T(W),G&&!t&&J("")),+W){if(t&&s=="both"&&(!W||!p0)){n0(void 0);return}const m0=O0();console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ amount:",W),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ other_amount:",p0),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:255 ~ handleAmountInputChange ~ uuid:",m0),D(m0),x0(W,q,m0,y,p0)}else t?s=="both"?n0(void 0):(s==(a==null?void 0:a.coin_type)||s==(o==null?void 0:o.coin_type))&&C():C()},D0=()=>{const W=Y.current?y?F.current:E.current:y?E.current:F.current,q=Y.current?y?E.current:F.current:y?F.current:E.current;if(!(t&&s=="both"&&(!W||!q))){if(+W){const G=O0();D(G),x0(W,Y.current,G,y,q)}console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",q),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",W)}};i.useEffect(()=>{C()},[s]);const[z,m]=i.useState(!1),{signAndExecuteTransaction:h,transactionConfirmation:R,transactionRejected:B}=k0(),l0=async()=>{if(e){m(!0);const W={pool_id:e,amount_a:String(y?U0(g||0,String(a==null?void 0:a.decimals)):U0(r||0,String(a==null?void 0:a.decimals))),amount_b:String(y?U0(r||0,String(o==null?void 0:o.decimals)):U0(g||0,String(o==null?void 0:o.decimals)))};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",W);const q={getShowInfo:(G,p0,m0)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",m0);const P0="Deposit "+[S0(r,y?o==null?void 0:o.symbol:a==null?void 0:a.symbol),S0(g,y?a==null?void 0:a.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and "),x={modalDescriptionText:P0,toastTitleText:P0};if(G==="success"){let j=r,P=g;m0&&m0.events.forEach(I=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",I),I.type.indexOf("::pool::DepositEvent")>-1&&a&&o&&(j=String(I0(I.parsedJson.amount_a,a.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",j),P=String(I0(I.parsedJson.amount_b,o.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",P))});const N="Deposit "+[S0(y?P:j,y?o==null?void 0:o.symbol:a==null?void 0:a.symbol),S0(y?j:P,y?a==null?void 0:a.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and ");x.toastDescriptionContent=N,x.modalDescriptionText=N,x.toastTitleText="Deposit successful"}return x}};R(q);try{const G=await p.Vaults.buildDepositPayload(W);await h(G,q,{useMev:t0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:M,msafeParams:{action:ae.AddVaultsPosition,txbParams:W}})?(C(),l()):D0()}catch{B(q)}}},C=()=>{J(""),T(""),n0(void 0),D("")},{stakeProtocolName:_0}=Oe(Y.current?o==null?void 0:o.coin_type:a==null?void 0:a.coin_type),F0=i.useMemo(()=>{if(s!=="both"&&a&&o){const W=Y.current?r:g,q=Y.current?a:o,G=Y.current?o:a;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:381 ~ showOnlySideTips ~ calculateResult:",Q),Q&&Q.swap_result){const p0=s0(Q.swap_result.swap_in_amount,q.decimals),m0=s0(f(Q.swap_result.swap_out_amount).mul(1-Number(U)).toString(),G.decimals);return q0.isSuiCoin(q.coin_type)?`By depositing ${E0(h0(W,9).toString(),9)} SUI, ${E0(h0(p0,9).toString(),9)} SUI will be converted to ${G==null?void 0:G.symbol} via ${_0} liquid staking and added to the pool together.`:`By depositing ${E0(h0(W,9).toString(),9)} ${q==null?void 0:q.symbol}, ${E0(h0(p0,9).toString(),9)} ${q==null?void 0:q.symbol} will be traded for ${E0(h0(m0,9).toString(),9)} ${G==null?void 0:G.symbol} and then added to the pool together.`}}},[s,Q,r,g]),L0=i.useMemo(()=>(console.log("🚀🚀🚀 ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",O,t),O&&t?f(O).gt(0)&&f(O).lt(1e-4):!1),[t,O]);return{handleAmountInputChange:R0,fixAmountA:A,amountInputA:r,amountInputB:g,balanceInfoA:a0,balanceInfoB:o0,amountValueA:$,amountValueB:H,preCalculateLoading:i0,inputTotalValue:O,calculateResult:Q,showOnlySideTips:F0,doAddAction:l0,reCalculateResult:D0,overHardtop:e0,zapNumError:v0,calculateLpLoading:d0,inputTotalValueError:L0}}function ze(s,l,e,a,o){const{fetchTokenPrices:y,getTokenAmountValue:t}=N0(),{setDetailRefreshCount:u}=H0(),{vaultsSdk:n}=z0(),{vaultsSlippage:U,mevProtect:t0,maxCapForGas:k,transactionMode:b,customGasPrice:M}=ee(),[_,L]=i.useState(""),[c,p]=i.useState(""),[r,J]=i.useState(!0),[g,T]=i.useState(""),A=i.useRef(""),v=i.useRef(!0),V=i.useRef(""),D=i.useRef("");i.useEffect(()=>{A.current=g},[g]),i.useEffect(()=>{v.current=r},[r]),i.useEffect(()=>{V.current=_},[_]),i.useEffect(()=>{D.current=c},[c]),i.useEffect(()=>{const z=[];a&&o&&(z.push(a.coin_type),z.push(o.coin_type)),z.length>0&&y(z)},[a==null?void 0:a.coin_type,o==null?void 0:o.coin_type]);const{balanceInfo:Z}=X0(a),{balanceInfo:Y}=X0(o),E=t(a==null?void 0:a.coin_type,_),F=t(o==null?void 0:o.coin_type,c),a0=i.useMemo(()=>f(E||"0").add(F||"0").toString(),[E,F]),[o0,$]=i.useState(!1),[H,O]=i.useState(void 0),e0=B0(async(z,m,h)=>{if(a&&o&&e)try{$(!0),u(0);const B=U0(z,(m?a:o).decimals).toFixed(0),l0={vault_id:e,fix_amount_a:m,input_amount:B,slippage:Number(U),request_id:h,side:s==="both"?$0.Both:$0.OneSide};console.log("🚀 ~ preCalculate ~ params:",l0,h);const C=await n.Vaults.calculateDepositAmount(l0,!1,!0);console.log("🚀 ~ preCalculate ~ res:",{...C,uuid:h,assetAction:s,"+amountInputARef.current":+V.current}),A.current===h&&(s==="both"&&(m?+V.current?(p(s0(C.amount_b.toString(),o.decimals).toString()),O(C)):p(""):+D.current?(L(s0(C.amount_a.toString(),a.decimals).toString()),O(C)):L("")),s!=="both"&&O(C))}catch(R){console.log("🚀 ~ preCalculate ~ error:",R),O(void 0)}finally{$(!1)}},500),i0=(z,m,h=!0)=>{if(J(m),m?(L(z),h&&p("")):(p(z),h&&L("")),+z){const R=q0.isSuiCoin(s);if(R&&f(z).lt(3)){T(""),O(void 0),$(!1);return}if(!R){const l0=t(s,z);if(f(l0).gt(1e4)){T(""),O(void 0),$(!1);return}}const B=O0();T(B),s==="both"&&$(!0),e0(z,m,B)}else x0()},u0=()=>{const z=v.current?V.current:D.current;if(+z){const m=O0();T(m),e0(z,v.current,m)}};i.useEffect(()=>{x0()},[s]);const[d0,w0]=i.useState(!1),{signAndExecuteTransaction:Q,transactionRejected:n0}=k0(),f0=async()=>{if(e){w0(!0);const z=U0(r?_:c,9),m={vault_id:e,side:s==="both"?$0.Both:$0.OneSide,fix_amount_a:r,input_amount:z.toString(),slippage:Number(U)};console.log("🚀 ~ doAddAction ~ params:",m);const h={getShowInfo:(R,B)=>{const l0="Deposit "+[S0(_,a==null?void 0:a.symbol),S0(c,o==null?void 0:o.symbol)].filter(Boolean).join(" and "),C={modalDescriptionText:l0,toastTitleText:l0};if(R==="success"){let _0=_,F0=c;B&&(_0=f(_).gt(0)?G0(B,a)||_:"",F0=f(c).gt(0)?G0(B,o)||c:"");const L0="Deposit "+[S0(_0,a==null?void 0:a.symbol),S0(F0,o==null?void 0:o.symbol)].filter(Boolean).join(" and ");C.toastDescriptionContent=L0,C.modalDescriptionText=L0,C.toastTitleText="Deposit successful"}return C}};try{await Q(async()=>await n.Vaults.deposit(m),h,{useMev:t0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:M,msafeParams:{action:ae.AddVaultsPosition,txbParams:m}})?(x0(),l()):u0()}catch(R){console.log("🚀 ~ doAddAction ~ error:",R),n0(h)}}},x0=()=>{L(""),p(""),$(!1),O(void 0),T("")},{stakeProtocolName:R0}=$e(v.current?o==null?void 0:o.coin_type:a==null?void 0:a.coin_type),D0=i.useMemo(()=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",s),s!=="both"&&a&&o){const z=v.current?_:c,m=v.current?a:o,h=v.current?o:a;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",H),H&&H.swap_result){const R=s0(H.swap_result.swap_in_amount,m.decimals),B=s0(f(H.swap_result.swap_out_amount).mul(1-Number(U)).toString(),h.decimals);return q0.isSuiCoin(m.coin_type)?`By depositing ${E0(h0(z,9).toString(),9)} SUI, ${E0(h0(R,9).toString(),9)} SUI will be converted to ${h==null?void 0:h.symbol} via ${R0} liquid staking and added to the pool together.`:`By depositing ${E0(h0(z,9).toString(),9)} ${m==null?void 0:m.symbol}, ${E0(h0(R,9).toString(),9)} ${m==null?void 0:m.symbol} will be traded for ${E0(h0(B,9).toString(),9)} ${h==null?void 0:h.symbol} and then added to the pool together.`}else if(!q0.isSuiCoin(s)){const R=t(s,z);if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",R),f(R).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[s,H,_,c]);return{handleAmountInputChange:i0,fixAmountA:r,amountInputA:_,amountInputB:c,balanceInfoA:Z,balanceInfoB:Y,amountValueA:E,amountValueB:F,preCalculateLoading:o0,inputTotalValue:a0,calculateResult:H,showOnlySideTips:D0,doAddAction:f0,reCalculateResult:u0}}function Ne(s,l,e,a,o,y,t,u,n,U,t0,k,b,M,_){const{currentAccount:L}=Z0(),c=i.useMemo(()=>{const p={text:void 0,disabled:!1};if(!(L!=null&&L.address))return p.text="Connect Wallet",p.disabled=!1,p;if(!n||!U)return p.disabled=!0,p;if(l==="both"&&(!+a&&!+o||s&&(!+a||!+o)))return p.text="Enter an amount",p.disabled=!0,p;if(l!=="both"){if(!(+a||+o))return p.text="Enter an amount",p.disabled=!0,p;if(e&&!t0){const r=q0.isSuiCoin(l);if(r&&l===(n==null?void 0:n.coin_type)&&f(a).lt(3)||r&&l===(U==null?void 0:U.coin_type)&&f(o).lt(3))return p.text="Minimum deposit 3 SUI",p.disabled=!0,p}}if(e&&k&&!M||!e&&M||e&&s&&_)return p.text="Enter an amount",p.disabled=!0,p;if(l==="both"){if(f(a).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(f(o).gt(u||"0"))return p.disabled=!0,p.text=e?`Insufficient ${U==null?void 0:U.symbol} Balance`:"Invalid Amount",p}if(l!=="both"){if(y&&f(a).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(!y&&f(o).gt(u||"0"))return p.disabled=!0,p.text=e?`Insufficient ${U==null?void 0:U.symbol} Balance`:"Invalid Amount",p}return(b&&b.ft_amount=="0"||b&&b.burn_ft_amount=="0"||!b)&&(p.disabled=!0,p.text="Enter an amount"),p},[L==null?void 0:L.address,l,a,o,t,u,b,e,k]);return{btnText:c.text,btnDisabled:c.disabled}}function He(s,l,e,a,o,y,t,u,n,U){const{currentAccount:t0}=Z0(),k=i.useMemo(()=>{const b={text:void 0,disabled:!1};if(!(t0!=null&&t0.address))return b.text="Connect Wallet",b.disabled=!1,b;if(!n||!U)return b.disabled=!0,b;if(l==="both"&&!+a&&!+o)return b.text="Enter an amount",b.disabled=!0,b;if(l!=="both"){if(!(+a||+o))return b.text="Enter an amount",b.disabled=!0,b;if(e){const M=q0.isSuiCoin(l);if(M&&l===(n==null?void 0:n.coin_type)&&f(a).lt(3)||M&&l===(U==null?void 0:U.coin_type)&&f(o).lt(3))return b.text="Minimum deposit 3 SUI",b.disabled=!0,b}}if(l==="both"){if(f(a).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(f(o).gt(u||"0"))return b.disabled=!0,b.text=e?`Insufficient ${U==null?void 0:U.symbol} Balance`:"Invalid Amount",b}if(l!=="both"){if(y&&f(a).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(!y&&f(o).gt(u||"0"))return b.disabled=!0,b.text=e?`Insufficient ${U==null?void 0:U.symbol} Balance`:"Invalid Amount",b}return s&&l!=="both"?(b.text=e?"Zap In":"Zap Out",b):(console.log("🚀🚀🚀 ~ submitBtnInfo ~ btnInfo:",b),b)},[t0==null?void 0:t0.address,l,a,o,t,u]);return{btnText:k.text,btnDisabled:k.disabled}}function We(s,l,e,a,o,y,t,u,n,U,t0,k,b){const{vaultsSlippage:M,mevProtect:_,maxCapForGas:L,transactionMode:c,customGasPrice:p}=ee(),{currentAccount:r}=Z0(),{setDetailRefreshCount:J}=K0(),{fetchTokenPrices:g,getTokenAmountValue:T}=N0(),{volatileVaultsSdk:A}=z0(),[v,V]=i.useState(""),[D,Z]=i.useState(""),[Y,E]=i.useState(!0),[F,a0]=i.useState(""),[o0,$]=i.useState(!1),[H,O]=i.useState(0),v0=i.useRef(F),e0=i.useRef(Y),i0=i.useRef(v),u0=i.useRef(D),d0=i.useRef(o0),w0=i.useRef(H);i.useEffect(()=>{w0.current=H},[H]),i.useEffect(()=>{d0.current=o0},[o0]),i.useEffect(()=>{v0.current=F},[F]),i.useEffect(()=>{e0.current=Y},[Y]),i.useEffect(()=>{i0.current=v},[v,n,D]),i.useEffect(()=>{u0.current=D},[D,n,v]),i.useEffect(()=>{const d=[];t&&u&&(d.push(t.coin_type),d.push(u.coin_type)),d.length>0&&g(d)},[t==null?void 0:t.coin_type,u==null?void 0:u.coin_type]);const[Q,n0]=i.useState("0"),[f0,x0]=i.useState("0"),[R0,D0]=i.useState(!1);i.useEffect(()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ holdCoinAmounts:",e),e&&(e!=null&&e.coinAmountA)&&(e!=null&&e.coinAmountB)&&z()},[e==null?void 0:e.coinAmountA,e==null?void 0:e.coinAmountB]),i.useEffect(()=>{G()},[b==null?void 0:b.current_sqrt_price]);const z=async()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:d,coinAmountB:w}=e;if(D0(!1),s==="both"||U||t0){n0(n?w:d),x0(n?d:w);return}const S=s===(t==null?void 0:t.coin_type),X=S?w:d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:121 ~ calculateAvailableAmount ~ fromAmount:",X);const r0=S?d:w;if(f(X).gt(0)){D0(!0);const K=O0();a0(K);const b0=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",s);const g0={pool_id:y,mode:b0,burn_lp_amount:o,available_lp_amount:o};console.log("🚀🚀🚀 ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",g0);try{const T0=await A.Vaults.preCalculateWithdrawAmount(g0);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",T0),b0=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const c0=s0(T0.receive_amount_a,t==null?void 0:t.decimals);n?x0(c0):n0(c0)}else{if((u==null?void 0:u.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const c0=s0(T0.receive_amount_b,u==null?void 0:u.decimals);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",c0),n?n0(c0):x0(c0)}D0(!1)}catch(T0){console.log("🚀🚀🚀 ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",T0)}}else S?n0(r0):x0(r0)},m=T(n?u==null?void 0:u.coin_type:t==null?void 0:t.coin_type,v),h=T(n?t==null?void 0:t.coin_type:u==null?void 0:u.coin_type,D),R=i.useMemo(()=>f(m||"0").add(h||"0").toString(),[m,h]);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",h),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",m);const[B,l0]=i.useState(!1),[C,_0]=i.useState(void 0),L0=B0(async(d,w,S,X,r0,K)=>{if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:210 ~ removePercent:",r0),f(r0).gt(100)){a0(""),_0(void 0),l0(!1);return}if(t&&u&&y&&o){if(!r0){if(S){if(f(d).gt(n?f0:Q)){a0(""),_0(void 0),l0(!1);return}}else if(f(d).gt(n?Q:f0)){a0(""),_0(void 0),l0(!1);return}}J(0),(+i0.current||+u0.current||r0)&&l0(!0);const g0=w?W0(d,0,!0):U0(d,(S?t:u).decimals).toFixed(0);let T0;if(s=="both")T0={pool_id:y,mode:"FixedOneSide",burn_lp_amount:String(g0)};else{const c0=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";T0={pool_id:y,mode:c0,burn_lp_amount:String(g0)}}console.log("🚀 ~ preCalculate ~ params:",T0,X,r0);try{const c0=await A.Vaults.preCalculateWithdrawAmount(T0);console.log("🚀 ~ preCalculate ~ res:",{...c0,uuid:X,assetAction:s});const C0={amount_a:n?c0.receive_amount_b:c0.receive_amount_a,amount_b:n?c0.receive_amount_a:c0.receive_amount_b,burn_ft_amount:c0.burn_lp_amount,swap:c0.swap};if(C0.burn_ft_amount=="0"){l0(!1),_0(void 0);return}const pe=s0(C0.amount_a.toString(),n?u.decimals:t.decimals).toString();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const le=s0(C0.amount_b.toString(),n?t.decimals:u.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",pe,t.decimals,le,u==null?void 0:u.decimals),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",le),s==="both"&&(w&&!K?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",w),(n?!S:S)?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+i0.current),+i0.current?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),Z(s0(C0.amount_b.toString(),n?t==null?void 0:t.decimals:u==null?void 0:u.decimals).toString()),_0(C0)):Z("")):+u0.current?(V(s0(C0.amount_a.toString(),n?u==null?void 0:u.decimals:t==null?void 0:t.decimals).toString()),_0(C0)):V("")):_0(C0)),s!=="both"){if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",r0),r0){const oe=s0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?u.decimals:t.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",oe),n?!S:S)r0===100&&(C0.burn_ft_amount=o);else{const Ze=s0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?t.decimals:u.decimals).toString();r0===100&&(C0.burn_ft_amount=o)}}_0(C0)}}catch(c0){console.log("🚀 ~ preCalculate ~ error:",c0),_0(void 0)}finally{l0(!1)}}},500),W=(d,w,S=!1,X=!1,r0=!0)=>{if(S){q(100);return}if(X){q(50);return}E(w),$(!1),(n?!w:w)?(V(d),r0?Z(""):G()):(Z(d),r0?V(""):G());let K,b0;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:462 ~ availableAmountA:",Q),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ availableAmountB:",f0),(n?!w:w)?(b0=f(d).div(Q),K=W0(f(o).mul(b0).toString(),0,!0)):(b0=f(d).div(f0),K=W0(f(o).mul(b0).toString(),0,!0)),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ removeLpAmount:",K),+K){const g0=O0();a0(g0),L0(String(K),!0,w,g0,b0.mul(100).toNumber(),b0.gte(100))}else N()},q=d=>{if($(!0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",d),O(d),o&&+o){if(d===0)N();else{const w=s===(t==null?void 0:t.coin_type);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",w),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",f0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",Q),E(w),s=="both"?(V(f(Q).mul(f(d).div(100)).toString()),Z(f(f0).mul(f(d).div(100)).toString())):s===(t==null?void 0:t.coin_type)?n?Z(f(f0).mul(f(d).div(100)).toString()):V(f(Q).mul(f(d).div(100)).toString()):n?V(f(Q).mul(f(d).div(100)).toString()):Z(f(f0).mul(f(d).div(100)).toString()),d===100||s==="both"){const S=O0();a0(S);const X=d===100?o:f(o).mul(d).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",X),L0(X,!0,w,S,d,!0)}else{E(w),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",s),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const S=f(o).mul(d).div(100).toFixed();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",S),L0(S,!0,w,F,d,!0)}}console.log("🚀🚀🚀 ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",Q)}},G=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:o0,removePercent:H}),o0)q(H);else{const d=e0.current?n?u0.current:i0.current:n?i0.current:u0.current;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",d),W(d,e0.current)}};i.useEffect(()=>{if(!o0)if(C&&o&&+o){let d=Number(f(C.burn_ft_amount).div(o).mul(100));d>100&&(d=100),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",d),O(d)}else O(0)},[C==null?void 0:C.burn_ft_amount,o0]);const[p0,m0]=i.useState(!1),{signAndExecuteTransaction:P0,transactionConfirmation:x,transactionRejected:j}=k0(),P=async()=>{if(y&&C&&o){m0(!0);let d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",C),s==="both"?d={pool_id:y,burn_lp_amount:C.burn_ft_amount,mode:"FixedOneSide",slippage:Number(M)}:(t==null||t.coin_type,H===100?d={pool_id:y,burn_lp_amount:o,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(M)}:d={pool_id:y,burn_lp_amount:C.burn_ft_amount,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(M)}),console.log("🚀 ~ doRemoveAction ~ params:",JSON.stringify(d));const w={getShowInfo:(S,X)=>{const r0="Withdraw "+[S0(v,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(D,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean).join(" and "),K={modalDescriptionText:r0,toastDescriptionContent:r0};if(S==="success"){let b0=v,g0=D;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",X),X&&(b0=f(v).gt(0)?G0(X,n?u:t)||v:"",g0=f(D).gt(0)?G0(X,n?t:u)||D:""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",b0,g0);const T0=[S0(n?g0:b0,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(n?b0:g0,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean),c0=(T0&&T0.length>1?"Removed ":"Withdraw ")+[S0(b0,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(g0,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean).join(" and ");K.toastDescriptionContent=c0,K.modalDescriptionText=c0}return K}};x(w);try{const S=await A.Vaults.buildWithdrawPayload(d);await P0(S,w,{useMev:_,txAction:"signTransactionBlock",useFastMode:c==="Fast Mode",maxCapForGas:L,customGasPrice:p,msafeParams:{action:ae.AddVaultsPosition,txbParams:d}})?(N(),l()):G(),m0(!1)}catch(S){console.log("🚀 ~ doAddAction ~ error:",S),m0(!1),j(w)}}},N=()=>{V(""),Z(""),i0.current="",u0.current="",O(0),l0(!1),_0(void 0),a0(""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},I=i.useMemo(()=>{var d;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",C),C&&(C!=null&&C.swap)&&s!=="both"&&t&&u){const w=Y?n?D:v:n?v:D;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",w);const S=e0.current?t:u;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",S);const X=e0.current?u:t;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",X);const r0=s0((d=C==null?void 0:C.swap)==null?void 0:d.swap_amount_in,X.decimals),K=h0(s0(f(C.swap.swap_amount_out).mul(1-Number(M)).toString(),S.decimals),S.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:M,calculateResult:C,swapOutAmount:K}),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${w} ${S==null?void 0:S.symbol}, ${r0} ${X==null?void 0:X.symbol} in the pool will be traded for ${K} ${S==null?void 0:S.symbol}`),`To withdraw ${h0(w)} ${S==null?void 0:S.symbol}, ${h0(r0)} ${X==null?void 0:X.symbol} in the pool will be traded for ${K} ${S==null?void 0:S.symbol}`}},[s,C,v,D]);return i.useEffect(()=>{G()},[Q,f0]),i.useEffect(()=>{N(),setTimeout(()=>{z()},200)},[k,s,r==null?void 0:r.address]),{handleAmountInputChange:W,fixAmountA:Y,amountInputA:v,amountInputB:D,availableAmountA:Q,availableAmountB:f0,amountValueA:m,amountValueB:h,preCalculateLoading:B,inputTotalValue:R,calculateResult:C,showOnlySideTips:I,doRemoveAction:P,handlePercentInputChange:q,isPercentInput:o0,removePercent:H,reCalculateResult:G,calculateAvailableLoading:R0,submitLoading:p0}}function Xe(s,l,e,a,o,y,t,u){const{setDetailRefreshCount:n}=H0(),{fetchTokenPrices:U,getTokenAmountValue:t0}=N0(),{vaultsSdk:k}=z0(),{vaultsSlippage:b,mevProtect:M,maxCapForGas:_,transactionMode:L,customGasPrice:c}=ee(),{findBestRouters:p}=Ce(),[r,J]=i.useState(""),[g,T]=i.useState(""),[A,v]=i.useState(!0),[V,D]=i.useState(""),[Z,Y]=i.useState(!1),[E,F]=i.useState(0),a0=i.useRef(V),o0=i.useRef(A),$=i.useRef(r),H=i.useRef(g),O=i.useRef(Z),v0=i.useRef(E);i.useEffect(()=>{v0.current=E},[E]),i.useEffect(()=>{O.current=Z},[Z]),i.useEffect(()=>{a0.current=V},[V]),i.useEffect(()=>{o0.current=A},[A]),i.useEffect(()=>{$.current=r},[r]),i.useEffect(()=>{H.current=g},[g]),i.useEffect(()=>{const x=[];t&&u&&(x.push(t.coin_type),x.push(u.coin_type)),x.length>0&&U(x)},[t==null?void 0:t.coin_type,u==null?void 0:u.coin_type]);const[e0,i0]=i.useState("0"),[u0,d0]=i.useState("0"),[w0,Q]=i.useState(!1);i.useEffect(()=>{m0(),n0()},[s]),i.useEffect(()=>{n0()},[e.coinAmountA]);const n0=()=>{const{coinAmountA:x,coinAmountB:j}=e;if(console.log("🚀 ~ useEffect ~ holdCoinAmounts:",e),Q(!1),s==="both"){i0(x),d0(j);return}const P=s===(t==null?void 0:t.coin_type),N=P?j:x;let I=P?x:j;const d=P?u:t,w=P?t:u;f(N).gt(0)?(Q(!0),i0("0"),d0("0"),p({fromToken:d,toToken:w,amount:U0(N,d.decimals).toString(),providersKeys:k.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:V}).then(S=>{console.log("🚀 ~ calculateAvailableAmount ~ uuid:",{result:S}),S.toAmountUi&&(I=f(I).add(S.toAmountUi).toString()),P?i0(I):d0(I)}).finally(()=>{Q(!1)})):P?i0(I):d0(I)},f0=t0(t==null?void 0:t.coin_type,r),x0=t0(u==null?void 0:u.coin_type,g),R0=i.useMemo(()=>f(f0||"0").add(x0||"0").toString(),[f0,x0]),[D0,z]=i.useState(!1),[m,h]=i.useState(void 0),B=B0(async(x,j,P,N,I)=>{var d,w;if(t&&u&&y&&o){if(!I){if(P){if(f(x).gt(e0)){D(""),h(void 0),z(!1);return}}else if(f(x).gt(u0)){D(""),h(void 0),z(!1);return}}n(0),(+$.current||+H.current||I)&&z(!0);const X=j?x:U0(x,(P?t:u).decimals).toFixed(0),r0={vault_id:y,fix_amount_a:P,input_amount:X,slippage:Number(b),request_id:N,side:s==="both"?$0.Both:$0.OneSide,is_ft_input:j,max_ft_amount:o};console.log("🚀 ~ preCalculate ~ params:",r0,N,I);try{const K=await k.Vaults.calculateWithdrawAmount(r0);if(console.log("🚀 ~ preCalculate ~ res:",{...K,uuid:N,assetAction:s}),a0.current===N){const b0=s0(K.amount_a.toString(),t.decimals).toString(),g0=s0(K.amount_b.toString(),u.decimals).toString();if(s==="both"&&(j?(T(g0),J(b0),I===100&&(i0(b0),d0(g0)),h(K)):P?+$.current?(T(g0),h(K)):T(""):+H.current?(J(b0),h(K)):J("")),s!=="both"){if(I){const T0=s0(f(K.amount_a).add(((d=K.swap_result)==null?void 0:d.swap_out_amount)||"0").toString(),t.decimals).toString();if(P)J(T0),T(""),I===100&&(K.burn_ft_amount=o,i0(T0));else{const c0=s0(f(K.amount_b).add(((w=K.swap_result)==null?void 0:w.swap_out_amount)||"0").toString(),u.decimals).toString();J(""),T(c0),I===100&&(K.burn_ft_amount=o,d0(c0))}}h(K)}}}catch(K){console.log("🚀 ~ preCalculate ~ error:",K),h(void 0)}finally{z(!1)}}},500),l0=(x,j,P=!1,N=!1,I=!0)=>{if(P){C(100);return}if(N){C(50);return}if(v(j),Y(!1),j?(J(x),I&&T("")):(T(x),I&&J("")),+x){const d=O0();D(d),B(x,!1,j,d)}else m0()},C=x=>{if(Y(!0),F(x),o&&+o)if(x===0)m0();else{const j=s===(t==null?void 0:t.coin_type);if(v(j),x===100||s==="both"){const P=O0();D(P);const N=x===100?o:f(o).mul(x).div(100).toFixed(0);B(N,!0,j,P,x)}else{v(j);const P=f(s===(t==null?void 0:t.coin_type)?e0:u0).mul(x).div(100).toFixed();B(P,!1,j,V,x)}}},_0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:Z,removePercent:E}),Z)C(E);else{const x=o0.current?$.current:H.current;l0(x,o0.current)}};i.useEffect(()=>{if(!Z)if(m&&o&&+o){let x=Number(f(m.burn_ft_amount).div(o).mul(100));x>100&&(x=100),F(x)}else F(0)},[m==null?void 0:m.burn_ft_amount]);const[F0,L0]=i.useState(!1),{signAndExecuteTransaction:W,transactionConfirmation:q,transactionRejected:G}=k0(),p0=async()=>{if(y&&m&&o){L0(!0);let x;if(s==="both")x={vault_id:y,ft_amount:m==null?void 0:m.burn_ft_amount,slippage:Number(b)};else{const P=s===(t==null?void 0:t.coin_type);if(E===100)x={vault_id:y,is_ft_input:!0,input_amount:o,slippage:Number(b),max_ft_amount:o,fix_amount_a:P};else{const N=U0(A?r:g,9);x={vault_id:y,is_ft_input:!1,input_amount:N.toString(),slippage:Number(b),max_ft_amount:o,fix_amount_a:P}}}console.log("🚀 ~ doRemoveAction ~ params:",x);const j={getShowInfo:(P,N)=>{const I="Withdraw "+[S0(r,t==null?void 0:t.symbol),S0(g,u==null?void 0:u.symbol)].filter(Boolean).join(" and "),d={modalDescriptionText:I,toastDescriptionContent:I};if(P==="success"){let w=r,S=g;N&&(w=f(r).gt(0)?G0(N,t)||r:"",S=f(g).gt(0)?G0(N,u)||g:"");const X="Removed "+[S0(w,t==null?void 0:t.symbol),S0(S,u==null?void 0:u.symbol)].filter(Boolean).join(" and ");d.toastDescriptionContent=X,d.modalDescriptionText=X}return d}};q(j);try{const P=await k.Vaults.withdraw(x);await W(P,j,{useMev:M,txAction:"signTransactionBlock",useFastMode:L==="Fast Mode",maxCapForGas:_,customGasPrice:c,msafeParams:{action:ae.RemoveVaultsPosition,txbParams:x}})?m0():_0(),l()}catch(P){console.log("🚀 ~ doAddAction ~ error:",P),G(j)}}},m0=()=>{J(""),T(""),F(0),z(!1),h(void 0),D("")},P0=i.useMemo(()=>{if(m&&m.swap_result&&s!=="both"&&t&&u){const x=A?r:g,j=o0.current?t:u,P=o0.current?u:t,N=s0(m.swap_result.swap_in_amount,j.decimals),I=s0(f(m.swap_result.swap_out_amount).mul(1-Number(b)).toString(),P.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:b,calculateResult:m,swapOutAmount:I}),`To withdraw ${h0(x)} ${j==null?void 0:j.symbol}, ${h0(N)} ${P==null?void 0:P.symbol} in the pool will be traded for ${I} ${j==null?void 0:j.symbol}`}},[s,m,r,g]);return{handleAmountInputChange:l0,fixAmountA:A,amountInputA:r,amountInputB:g,availableAmountA:e0,availableAmountB:u0,amountValueA:f0,amountValueB:x0,preCalculateLoading:D0,inputTotalValue:R0,calculateResult:m,showOnlySideTips:P0,doRemoveAction:p0,handlePercentInputChange:C,isPercentInput:Z,removePercent:E,reCalculateResult:_0,calculateAvailableAmount:n0,calculateAvailableLoading:w0}}const Ke=s=>s?Fe:qe,Je=s=>s?Ge:ze,Ye=s=>s?Ne:He,Qe=s=>s?We:Xe,ya={useGetApiVaultInfo:Le,useGetContractVaultInfo:Ke,useVaultsAdd:Je,useAddButtonStatus:Ye,useVaultsRemove:Qe};function _a({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:a,vaultsAprDisplay:o}){return V0.jsx(xe,{tooltip:V0.jsx(Ae,{vaultsApyDisplay:l,vaultsLstApyDisplay:s,vaultsTotalApyDisplay:e,vaultsAprDisplay:o,category:a}),children:V0.jsx(Te,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:a=="cetus"?e:l})})}const Ae=({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:a,vaultsAprDisplay:o})=>V0.jsx(se,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:a=="cetus"?V0.jsxs(se,{children:[V0.jsx(M0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),V0.jsx(ue,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:s,valueStyle:{fontSize:"12px"}})]}):V0.jsxs(se,{children:[V0.jsx(M0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:o}),V0.jsx(ue,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function Sa({coinType:s}){const{tokenInfo:l}=A0(s);return V0.jsx(he,{children:V0.jsx(ve,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"})})}export{Sa as C,Ae as V,Ue as a,Oe as b,Le as c,_a as d,ga as e,pa as f,$e as g,ma as h,ba as i,K0 as j,H0 as u,ya as v};
//# sourceMappingURL=VaultsAprBlock-C9l-wSMY.js.map
