import{a as S,j as e,T as L,H as E,V as W,C as gt,q as je,a9 as Rt,f as te,a6 as be,a7 as Oe,ag as ur,p as He,ap as xr,aa as Ze,W as as,X as ls,Y as ds,Z as us,$ as or,a0 as xs,af as os,a5 as pr,aq as ft,F as gr,o as yr,I as Zt,x as mr}from"./vendor-BFGDaAdA.js";import{u as ps,S as gs}from"./usePriceImpact-DJ--uX3c.js";import{k as hr,u as ys,U as br,q as Kt,g as jr,I as Ce,a as Le,c as Ve,z as Ct,V as I,e as Lt,i as Me,f as we,d as H,W as Qt,Q as ms,M as vt,t as hs,L as Ar,j as yt,P as wt,X as bs,B as Sr,x as ct,n as js,Y as _t,Z as pe,$ as tt,a0 as lt,a1 as ue,p as fr,a2 as Yt,a3 as vr,F as Tt,C as at,a4 as wr,a5 as We,o as ze,a6 as _r,v as kt,a7 as kr,a8 as Xt,a9 as Rr}from"./index-QNvgVKlA.js";import{u as ee}from"./index-CfStmzq_.js";import{u as ye,P as Cr,a as Lr,V as Tr}from"./PositionListLoading-zBwW5_W7.js";import{u as Ge}from"./index-D1m9ooSc.js";import{H as Br,T as Fr}from"./Table-BtGnvT0c.js";import{N as De}from"./NoData-DtiZhmrM.js";import{A as Mr}from"./CopyButton-CMMk2izN.js";import{T as qr}from"./TvlChart-CF7NO8fR.js";import{a as zr,u as Er,V as Wr}from"./VolumeChart-DYssfZac.js";import{u as Hr}from"./contract-helper-VzIAinmS.js";import{H as _e}from"./HTextLabelBox-BtA_IlNt.js";import{T as $r}from"./TooltipIcon-Bmng7kBJ.js";import{A as As}from"./SingleTokenInfo-Ce6-xjca.js";import{a as Ss,u as Ur}from"./usePositionList-BaYucLl_.js";import{u as Nr}from"./useRpcListener-BgulSPEI.js";import{A as Dr}from"./index-DpoGqmhj.js";import{S as st,u as Te,a as mt,L as fs}from"./LiquidityRangeChart-DJCBvokU.js";import{u as Be,d as vs,Z as Bt,R as Or,a as ws,b as _s,c as Vr,e as ks,f as Rs,g as Cs}from"./RemoveBlock-C66QWwES.js";import{T as Jt}from"./TradeConfirmAmountInfo-CT2s8_lq.js";import{D as Ft,W as Ls}from"./DepositRatio-CzFcBpXy.js";import{T as Mt}from"./TotalAmount-CuHzhAl9.js";import{P as Gr}from"./PositionStatus-DAHDqPot.js";import{u as Zr,a as Kr}from"./useTransaction-D8x8EhDP.js";import{u as Qr}from"./global-B2mCTGzM.js";import{f as rt,i as Ee}from"./index-DTh9ITUf.js";import{c as Yr,g as dt,a as ut,u as Xr}from"./useGetPoolList-ByJZGCUe.js";import{u as Ts}from"./useAccountBalance-dpDaMlfe.js";import{u as xt}from"./useTokenBalance-Bb797F7L.js";import{u as Bs,m as At,S as Pt,a as Jr}from"./SelectTokenAndFeeConfirm-DbFyoQrG.js";import{u as Pr}from"./useNotifiSubscription-Bnf-_NzT.js";import{u as Ir}from"./usePosAdd-DT_ux7ir.js";import{P as It}from"./PriceInput-B0u94jQF.js";import{F as ei}from"./FarmingIcon-C2U_6sff.js";import{u as ti}from"./VaultsAction-BNCRfsCf.js";import{u as si,V as ri}from"./VaultsAprBlock-D1GuVHob.js";import{E as ot}from"./ErrorTips-BY_r0Z3E.js";import{T as Fs}from"./TradeInputGroup-CgK4vFNA.js";import{g as ii}from"./liquidity-Cf2o1EUS.js";import{d as es,F as ni}from"./FeeTierSelect-CGZKxJFe.js";import{u as Ms}from"./useToken-DOpzZ4jY.js";import{u as ci,a as ai}from"./useFavoritePool-DqHLM_4q.js";import{u as li}from"./swapWidget-D-fCuMti.js";import{u as di}from"./swapWidgetConfig-__0qX46r.js";import{B as ui}from"./BackButton-Ds-74tfb.js";import{R as xi}from"./RefreshButton-Bqj6ePwp.js";import{C as oi}from"./CurrentPrice-AgSetjqo.js";import{W as pi}from"./WarningTokenTipModal-DBk9ETnG.js";import"./useSwapHelper-Q9vgMLY5.js";import"./useInterval-BQqGpXj5.js";import"./PoweredByHaedal-BDxnuz9-.js";import"./VTextLabelBox-BtYRI_Uk.js";import"./ExpendItem-CQyEc2RF.js";import"./msafe-oYBkW7LJ.js";import"./RangeValue-CHhwkfJm.js";import"./debounce-B8kzHASh.js";import"./index-BLCSsYSf.js";import"./Pagination-CEkqmVuP.js";import"./EmptyTooltip-BC-TTPDM.js";import"./_getAllKeysIn-CBD6ibod.js";import"./YAxis-WIugf5AU.js";import"./generateCategoricalChart-LXJSFw_w.js";import"./linear-DYpwdEgO.js";import"./useWrapPoolData-CHCtGZRc.js";import"./usePreviousValue-DoVr3Y3V.js";import"./ActionButton-DszcWgou.js";import"./FreshProgressV2-Bvea63St.js";import"./useTrack-DgiixkZ_.js";import"./useSigner-NhmhdGMF.js";import"./index-CHhxlT8k.js";import"./CheckBox-BA2PcE7i.js";import"./Loading-yKVeoG31.js";import"./useNotifiAlerts-CoirGj-9.js";import"./useXCetusHelper-BEFW1sMX.js";import"./InputBox-Cs7zlVAb.js";import"./useFindBestRouting-YU1qGFi4.js";import"./useDocumentSize-BMa29AD3.js";var Re=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Re||{});function gi(){const t=hr("clmm"),{fetchByApi:s}=ys();return{getTransactionsHistory:async g=>{try{const x=await s(br,"GET",g);if(console.log(x,"getTransactionsHistory"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(g,x)=>{try{const d=await t.Pool.getPoolTransactionList({pool_id:g,pagination_args:x,full_rpc_url:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(d,"getTransactionsHistoryBySDK"),d)return d;throw new Error("no data")}catch(d){console.error(d,"getTransactionsHistoryBySDK ~ error")}}}}function yi(){const{getTransactionsHistoryBySDK:s}=gi(),[i,n]=S.useState(!0),[g,x]=S.useState([]),[d,j]=S.useState(1),[r,u]=S.useState(),[p,a]=S.useState(!0),{apiPoolInfo:o,manualRefresh:y,setManualRefresh:k}=ee(),{poolAddress:B}=ye();S.useEffect(()=>{x([]),j(1),u(void 0),a(!0)},[B]),S.useEffect(()=>{y&&(x([]),j(1),u(void 0),a(!0),m({cursor:void 0,limit:10}))},[B,y]);const m=async b=>{var f;try{if(!p)return;if(B){n(!0);const l=await s(B,{...b});if(console.log("ðŸš€ ~ fetchData ~ result:",l),l){const c=(f=l==null?void 0:l.data)==null?void 0:f.map(w=>{var R,F;const A=w==null?void 0:w.parsed_json,v=A!=null&&A.amount_a||A!=null&&A.atob?o==null?void 0:o.tokenA:o==null?void 0:o.tokenB,_=A!=null&&A.amount_b||A!=null&&A.atob?o==null?void 0:o.tokenB:o==null?void 0:o.tokenA;return{...w,type:(R=w.type)!=null&&R.includes("Add")?Re.add:(F=w.type)!=null&&F.includes("Remove")?Re.remove:Re.swap,items:[{amount:Kt(A!=null&&A.amount_a?A==null?void 0:A.amount_a:A==null?void 0:A.amount_in,v==null?void 0:v.decimals).toString(),address:v==null?void 0:v.coin_type,url:v==null?void 0:v.logo_url,symbol:v==null?void 0:v.symbol},{amount:Kt(A!=null&&A.amount_b?A==null?void 0:A.amount_b:A==null?void 0:A.amount_out,_==null?void 0:_.decimals).toString(),address:_==null?void 0:_.coin_type,url:_==null?void 0:_.logo_url,symbol:_==null?void 0:_.symbol}]}});console.log("ðŸš€ ~ const_data=result?.data?.map ~ _data:",c),b!=null&&b.cursor?x(w=>[...w,...c||[]]):x(c||[]),u(l==null?void 0:l.next_cursor),a(l==null?void 0:l.has_next_page),n(!1)}}}catch(l){console.log(l,"getTransactionsHistoryBySDK-error"),n(!1)}finally{n(!1)}};return Ge(()=>{m({cursor:r,limit:10})},[d,B],{wait:500,leading:!0,trailing:!1}),{isLoading:i,list:g,apiPoolInfo:o,currentPage:d,onCurrentPageChange:()=>{j(b=>b+1)},hasNextPage:p}}const it={[Re.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Re.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Re.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},mi=({type:t})=>{var s,i,n,g;return e.jsxs(E,{children:[e.jsx(Ce,{xlinkHref:(s=it[t])==null?void 0:s.icon,svgFill:(i=it[t])==null?void 0:i.color,svgHover:(n=it[t])==null?void 0:n.color}),e.jsx(L,{color:"text_caption",children:(g=it[t])==null?void 0:g.title})]})},hi=({items:t,type:s,isReverse:i})=>{var g,x;const{isApp:n}=Le();return t?s===Re.swap?n?e.jsxs(W,{align:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsxs(E,{justify:"flex-end",children:[e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]})]}):e.jsxs(E,{justify:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]}):n?e.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:i?"column-reverse":"column",children:(g=t==null?void 0:t.filter(d=>!!+d.amount))==null?void 0:g.map(d=>e.jsx(qe,{item:d},d==null?void 0:d.address))}):e.jsx(E,{justify:i?"flex-start":"flex-end",gap:"8px 16px",flexDir:i?"row-reverse":"row",children:(x=t==null?void 0:t.filter(d=>!!+d.amount))==null?void 0:x.map(d=>e.jsx(qe,{item:d},d==null?void 0:d.address))}):null},qe=({item:t})=>e.jsxs(E,{gap:"4px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(L,{color:"text_caption",children:Ct(t==null?void 0:t.amount)}),e.jsx(L,{children:I(t==null?void 0:t.symbol,10)})]}),ts=(t,s=!1)=>[{title:e.jsx(L,{children:"Event"}),key:"type",render:({type:i})=>e.jsx(mi,{type:i}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(L,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:i,type:n})=>e.jsx(hi,{items:i,type:n,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(L,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:i})=>e.jsx(Mr,{address:i,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(i,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(L,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:i})=>e.jsx(L,{color:"text_caption",children:jr(i)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function bi(){const{getExplorerUrl:t}=Lt(),{isLoading:s,list:i,apiPoolInfo:n,currentPage:g,onCurrentPageChange:x,hasNextPage:d}=yi(),{isApp:j}=Le();return e.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(E,{w:"100%",justify:"space-between",children:e.jsx(L,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(i==null?void 0:i.length)==0?e.jsx(De,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):j?e.jsx(Br,{columns:ts(t,n==null?void 0:n.isReverse),dataSource:i,loading:s&&g===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(r,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")}}):e.jsx(Fr,{columns:ts(t,n==null?void 0:n.isReverse),dataSource:i,skeletonLength:10,loading:s&&g===1,onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),d&&e.jsx(gt,{mt:{base:"40px",lg:"20px"},children:e.jsx(je,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:x,children:s?e.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var qt=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(qt||{}),qs=(t=>(t.volume="vol",t.tvl="tvl",t.fees="fee",t))(qs||{}),zs=(t=>(t.d="D",t.w="W",t.m="M",t))(zs||{}),Es=(t=>(t.d="day",t.w="wek",t.m="mon",t))(Es||{});const ji={D:40,W:30,M:20};function Ai(){const[t,s]=S.useState("Volume"),[i,n]=S.useState("D"),[g,x]=S.useState([]),{apiPoolInfo:d}=ee(),[j,r]=S.useState(!0),[u,p]=S.useState(null),{getHistogramData:a}=zr(),{poolAddress:o}=ye(),{getHoverTime:y,time:k}=Er();S.useLayoutEffect(()=>{x([]),s("Volume"),n("D"),p(null)},[o]);const B=async()=>{if(o)try{r(!0);const c=await a({date_type:Es[i.toLowerCase()],type:qs[t.toLowerCase()],limit:ji[i],address:o});c&&c.length&&x(c)}catch(c){throw console.error(c,"res-fetchAnalyticsData"),c}finally{r(!1)}};S.useEffect(()=>{B()},[o,t,i]),S.useEffect(()=>{u!=null&&u.date&&y(u==null?void 0:u.date,i)},[u==null?void 0:u.date,i]);const m=c=>{s(c.label),c.label!==t&&x([])},h=c=>{n(c.label),c.label!==i&&x([])},b=S.useMemo(()=>{if(t==="Volume")return{value:d==null?void 0:d.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:d==null?void 0:d.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:d==null?void 0:d.fees24Display,title:"Fees (24H)"}},[t,d==null?void 0:d.volume24Display,d==null?void 0:d.tvlDisplay,d==null?void 0:d.fees24Display]),f=Object.values(qt).map(c=>({label:c})),l=Object.values(zs).map(c=>({label:c}));return{handleChartTabChange:m,handleDateTabChange:h,defaultDisplay:b,chartsTabs:f,dateTypes:l,chartLoading:j,analyticsData:g,hoverData:u,setHoverData:p,currentChartTab:t,currentDateType:i,time:k}}function Si(){const{isApp:t}=Le(),{handleChartTabChange:s,handleDateTabChange:i,defaultDisplay:n,chartsTabs:g,dateTypes:x,chartLoading:d,analyticsData:j,hoverData:r,setHoverData:u,currentChartTab:p,currentDateType:a,time:o}=Ai();return e.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(E,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(Me,{type:"outlineTab",tabList:g,currentTab:p,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:i,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(W,{w:"100%",align:"flex-start",children:[e.jsx(L,{color:"text_caption",fontSize:"24px",children:(r==null?void 0:r.num)!==void 0&&r!==null?H(Qt(r.num)).gte("0.01")||H(Qt(r.num)).equals("0")?`$${we(r==null?void 0:r.num,2)}`:"<$0.01":n==null?void 0:n.value}),e.jsx(L,{children:r!=null&&r.date?o:n==null?void 0:n.title}),t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:i,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(te,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(te,{w:"100%",h:"100%",position:"relative",children:[d&&e.jsx(te,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Rt,{})}),p===qt.tvl?e.jsx(qr,{data:j,onChangeValue:y=>u(y)}):e.jsx(Wr,{data:j,onChangeValue:y=>u(y),pageFrom:"pools"})]})})]})}const fi=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:i=>{t(()=>({tokenAPrice:i}))},tokenBPrice:void 0,setTokenBPrice:i=>{t(()=>({tokenBPrice:i}))},tokenAAmount:"",setTokenAAmount:i=>{t(()=>({tokenAAmount:i}))},tokenBAmount:"",setTokenBAmount:i=>{t(()=>({tokenBAmount:i}))},tokenAAmountUSD:"",setTokenAAmountUSD:i=>{t(()=>({tokenAAmountUSD:i}))},tokenBAmountUSD:"",setTokenBAmountUSD:i=>{t(()=>({tokenBAmountUSD:i}))},totalAmountUSD:"",setTotalAmountUSD:i=>{t(()=>({totalAmountUSD:i}))},tvlLoading:!0,setTvlLoading:i=>{t(()=>({tvlLoading:i}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ht=ms(fi);function vi(){const{getBurnPositionAmountByPool:t}=Hr(),{apiPoolInfo:s,contractPoolInfo:i}=ee(),[n,g]=S.useState("0"),[x,d]=S.useState("0"),[j,r]=S.useState("0"),[u,p]=S.useState("0"),[a,o]=S.useState(!1),{poolAddress:y}=ye(),{tokenAPrice:k,tokenBPrice:B}=ht(),m=async(h,b)=>{try{o(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:f,totalB:l}=await t(h,b);g(f),d(l),k&&r(H(f).mul(k==null?void 0:k.price).toString()),B&&p(H(l).mul(B==null?void 0:B.price).toString())}catch(f){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",f)}finally{o(!1)}};return Ge(()=>{s&&(i!=null&&i.current_sqrt_price)&&m(s,i==null?void 0:i.current_sqrt_price)},[y,i==null?void 0:i.current_sqrt_price,k==null?void 0:k.price,B==null?void 0:B.price],{wait:500}),{burnAmountA:n,burnAmountB:x,burnAmountAUSD:j,burnAmountBUSD:u,loading:a}}function wi(){const{apiPoolInfo:t}=ee(),{burnAmountA:s,burnAmountB:i,burnAmountAUSD:n,burnAmountBUSD:g,loading:x}=vi();return H(s).gt(0)||H(i).gt(0)?e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(E,{children:[e.jsx(L,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx($r,{type:"burnedLiquidity"})]}),e.jsxs(be,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(ss,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:n,loading:x}),e.jsx(ss,{token:t==null?void 0:t.tokenB,amount:i,amountUSD:g,loading:x})]})]}):null}const ss=({token:t,amount:s,amountUSD:i,loading:n})=>e.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(L,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(L,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:H(i).gt("0")?`$${hs(vt(i,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function _i(){const{tokenAAmountUSD:t,totalAmountUSD:s}=ht(),i=S.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const g=Ar(H(t).div(s).mul(100).toString(),2);return g==="NaN"?"--":g}return"--"},[t,s]),n=S.useMemo(()=>i&&i!=="--"?H(100).minus(i).toString():"--",[i]);return{tokenARatio:i,tokenBRatio:n}}const nt=t=>t==="--"?"--":`${t}%`;function ki(){var a,o,y,k,B,m;const{apiPoolInfo:t,contractPoolInfo:s}=ee(),{getExplorerUrl:i}=Lt(),{poolAddress:n}=ye(),{tokenAAmount:g,tokenBAmount:x,tokenAAmountUSD:d,tokenBAmountUSD:j,tvlLoading:r}=ht(),{tokenARatio:u,tokenBRatio:p}=_i();return e.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(E,{w:"100%",justify:"space-between",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(ur,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(_e,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(As,{address:n||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(i(n,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(t==null?void 0:t.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(E,{justify:"flex-start",w:"100%",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(W,{gap:"16px",w:"100%",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:(a=t==null?void 0:t.displayTokenA)==null?void 0:a.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(o=t==null?void 0:t.displayTokenA)==null?void 0:o.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((y=t==null?void 0:t.displayTokenA)==null?void 0:y.symbol,10)}),r?e.jsx(He,{h:"12px",w:"46px"}):e.jsx(L,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(p):nt(u)})]})]}),e.jsx(te,{w:"200px",children:e.jsx(xr,{value:Number(t!=null&&t.isReverse?p:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,p].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,p].includes("--")?"background":"primary"}}})}),e.jsxs(E,{gap:"12px",children:[e.jsxs(W,{align:"flex-end",gap:"4px",children:[e.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((k=t==null?void 0:t.displayTokenB)==null?void 0:k.symbol,10)}),r?e.jsx(He,{h:"12px",w:"46px"}):e.jsx(L,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(u):nt(p)})]}),e.jsx(Ve,{imageUrl:(B=t==null?void 0:t.displayTokenB)==null?void 0:B.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(m=t==null?void 0:t.displayTokenB)==null?void 0:m.coin_type:""})]})]}),e.jsxs(W,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenA,amount:g,amountUSD:d}),e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenB,amount:x,amountUSD:j})]})]})]})]})}const rs=({token:t,amount:s,amountUSD:i,loading:n})=>{const{getExplorerUrl:g}=Lt();return t?e.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(L,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(L,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(As,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(g(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:i&&i!=="--"?`$${we(i)}`:"--",valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function Ri(){return e.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(Si,{}),e.jsx(ki,{})]}),e.jsx(wi,{}),e.jsx(bi,{})]})}function Ci(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=Ss(),{manualRefresh:i}=ee(),{currentAccount:n,onWalletModal:g}=yt(),{getPositionBaseList:x,getPosRelatedData:d}=Ur(),[j,r]=S.useState(""),{poolAddress:u}=ye(),p=async o=>{const y=await x(o);Array.isArray(y)&&d(y),typeof y=="string"&&r(y)};return S.useEffect(()=>{n!=null&&n.address&&p(n==null?void 0:n.address)},[n==null?void 0:n.address]),S.useEffect(()=>{i&&(n!=null&&n.address)&&p(n==null?void 0:n.address)},[i]),Nr({onRpcChange:()=>{n!=null&&n.address&&p(n==null?void 0:n.address)}}),{data:S.useMemo(()=>{if(u){const o=s[u.toLowerCase()||""];return o?o==null?void 0:o.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:j,posBaseListLoading:t,currentAccount:n,onWalletModal:g}}function Li(){const t=Ze(),{apiPoolInfo:s}=ee(),{currentAccount:i,posBaseListLoading:n,data:g,rpcNodeErrorStr:x,onWalletModal:d}=Ci();return e.jsx(W,{minW:{base:"100%",lg:"1024px"},children:i!=null&&i.address?n?[{},{}].map((j,r)=>e.jsx(Cr,{},r)):g&&(g==null?void 0:g.length)>0?g==null?void 0:g.map((j,r)=>e.jsx(Lr,{positionInfo:j},j==null?void 0:j.posId)):x?e.jsx(De,{type:"nodata",text:x}):e.jsx(De,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(je,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>t(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):e.jsx(De,{type:"nowallet",onboard:()=>d(!0)})})}function Ti({apiPoolInfo:t,apiPoolInfoLoading:s,tvlLoading:i,totalTvl:n}){return e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(st,{label:"Pool APR",value:e.jsx(Dr,{poolInfo:t,placement:"bottom",children:e.jsxs(E,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(L,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:t!=null&&t.farmingAprDisplay||t!=null&&t.miningAprList&&(t==null?void 0:t.miningAprList.length)>0?"help":"text",children:t==null?void 0:t.feeAndMiningAprDisplay}),(t==null?void 0:t.haveFarming)&&e.jsxs(L,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",t==null?void 0:t.farmingAprDisplay]})]})})}),e.jsx(st,{label:"TVL",value:n&&n!=="--"?`$${we(n,2)}`:"--",loading:s||i}),e.jsx(st,{label:"Volume (24H)",value:(t==null?void 0:t.volume24Display)||"",loading:s}),e.jsx(st,{label:"Fees (24H)",value:(t==null?void 0:t.fees24Display)||"",loading:s})]})}function Bi(t){var v;const{onClose:s,onSubmit:i,data:{feeTier:n,zapData:g}}=t,{fromToken:x,toToken:d,fromAmount:j,toAmount:r,totalAmount:u,percentMap:p,fromTokenLock:a,toTokenLock:o}=Be(),{lowerTickData:y,upperTickData:k}=Te(),{currentPriceData:B,apiPoolInfo:m}=ee(),{setIsChecked:h}=wt(),[b,f]=S.useState(!0),l=S.useMemo(()=>{var _;return((_=m==null?void 0:m.tokenA)==null?void 0:_.coin_type)===(x==null?void 0:x.coin_type)?!b:!!b},[m,x,d,b]),c=S.useMemo(()=>b?`${I(d==null?void 0:d.symbol,10)} per ${I(x==null?void 0:x.symbol,10)}`:`${I(x==null?void 0:x.symbol,10)} per ${I(d==null?void 0:d.symbol)}`,[b,x==null?void 0:x.symbol,d==null?void 0:d.symbol]),w=vs(()=>{i(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:A}=wt();return e.jsxs(as,{isOpen:!0,onClose:()=>{s(),h(!1)},isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{children:[e.jsx(us,{children:e.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(or,{}),e.jsx(xs,{textAlign:"center",p:"0px",children:e.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(E,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(E,{children:[e.jsx(bs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:d==null?void 0:d.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:d==null?void 0:d.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(L,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${I(x==null?void 0:x.symbol,10)} - ${I(d==null?void 0:d.symbol,10)}`})]}),e.jsx(Sr,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(E,{gap:"12px",children:[e.jsx(L,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(L,{color:"primary",children:n==null?void 0:n.feeDisplay})]})})]}),g?e.jsx(Jt,{coinA:{amount:g==null?void 0:g.amount,...g==null?void 0:g.token}}):e.jsx(Jt,{coinA:{amount:j,...x},coinB:{amount:r,...d}}),e.jsxs(te,{w:"100%",children:[e.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(Gr,{isActive:!a&&!o,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(W,{gap:"0",border:"1px solid",bg:"bg_secondary",borderColor:"border",borderRadius:"12px",mt:"8px",children:[e.jsxs(E,{justify:"center",h:"48px",w:"100%",gap:"4px",children:[e.jsx(L,{children:"Current Price"}),e.jsx(L,{as:"span",color:"text_caption",children:ct(l?B.reverseCurrentPrice:B==null?void 0:B.currentPrice,6)}),e.jsx(L,{children:c}),e.jsx(je,{variant:"unstyled",onClick:()=>f(!b),children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsx(te,{h:"1px",w:"calc(100% - 32px)",p:"0 12px",bg:"border"}),e.jsxs(E,{w:"100%",h:"100px",children:[e.jsx(is,{title:"Min Price",price:ct(l?k==null?void 0:k.reversePrice:y==null?void 0:y.price,6),perText:c}),e.jsx(os,{orientation:"vertical",h:"40px"}),e.jsx(is,{title:"Max Price",price:ct(l?y==null?void 0:y.reversePrice:k==null?void 0:k.price,6),perText:c})]})]})]}),g?e.jsx(Bt,{action:"Deposit",inConfirmModal:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{tokenA:x,tokenB:d,isReverse:(x==null?void 0:x.coin_type)!==((v=m==null?void 0:m.tokenA)==null?void 0:v.coin_type),type:"text",percentMap:p}),e.jsx(Mt,{loading:!1,totalAmount:u}),!a&&!o&&!((y==null?void 0:y.price)==="0"&&(k==null?void 0:k.price)==="âˆž")&&A=="authenticated"&&e.jsx(Or,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}})]}),e.jsx(je,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:w,children:"Add Liquidity"})]})})]})]})}const is=({title:t,price:s,perText:i})=>e.jsxs(W,{flex:"1",children:[e.jsx(L,{children:t}),e.jsx(L,{color:"text_caption",children:s}),e.jsx(L,{children:i})]});function Fi(t,s){const{preAdd:i,getClmmCreateAddData:n,getFarmsCreateAddData:g}=Ir(),[x,d]=S.useState(!1),{currentPriceData:j,apiPoolInfo:r,contractPoolInfo:u}=ee(),{getContractPoolInfo:p}=ws(),{lowerTickData:a,upperTickData:o}=Te(),{signAndExecuteTransaction:y,getTransactionStatus:k,transactionSuccess:B}=Zr(),{mevProtect:m,maxCapForGas:h,transactionMode:b,customGasPrice:f}=Qr(),{transactionConfirmation:l}=Kr(),{getCurrentPrice:c}=_s(),{fromAmount:w,setFromAmount:A,fromAmountValue:v,setFromAmountValue:_,toAmount:R,setToAmount:F,toAmountValue:N,setToAmountValue:q,byAmountIn:U,setByAmountIn:K,isTokenA:re,setIsTokenA:J,percentMap:xe,setPercentMap:D,isFullRange:Q,setIsFullRange:Z,fromToken:C,setFromToken:ie,toToken:M,setToToken:ne,totalAmount:T,setTotalAmount:z,fromTokenLock:$,setFromTokenLock:se,toTokenLock:ce,setToTokenLock:Y,setTokenMaxA:P,setTokenMaxB:de,tokenMaxA:G,tokenMaxB:Ke,autoStakePosition:$e,liquidityAmount:Qe,setLiquidityAmount:Ye,useZapIn:Fe,setUseZapIn:jt,confirmModalOpen:Gs,setConfirmModalOpen:zt,nftOpen:Zs,setNftOpen:Et,relatedPosId:Ks,setRelatedPosId:Wt}=Be(),{getTokenAmountValue:Xe}=js(),{getZapDepositTx:Qs,getZapDepositToastInfo:Ys,reCalculateZapData:Xs}=Vr(),{setZapAmount:Js}=ks();_t(()=>{var O,le;r&&J(((O=r==null?void 0:r.displayTokenA)==null?void 0:O.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r]);const{isWhiteQuoteToken:Ps}=Bs(),{notifiSubscription:Is}=Pr(),{isChecked:Ht}=wt();Ge(()=>{if(Q){D({percentA:"50",percentB:"50"});return}if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&j.currentSqrtPrice){if(pe(a.tick).lte(u.current_tick_index)&&pe(o.tick).gt(u.current_tick_index)){const O=Ps(r.tokenA.coin_type)?r.tokenA:r.tokenB,le=O.coin_type===r.tokenA.coin_type,ve=i({amount:tt("1",O.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0}),ge=Yr(ve.coinAmountA,ve.coinAmountB,j==null?void 0:j.currentPrice,Q);D(ge);return}if(pe(a.tick).gt(u.current_tick_index)){D({percentA:"100",percentB:"0"});return}if(pe(o.tick).lte(u.current_tick_index)){D({percentA:"0",percentB:"100"});return}}},[JSON.stringify(r),j,a==null?void 0:a.tick,o==null?void 0:o.tick,Q],{wait:300});const er=({amount:O,isTokenA:le,isFullRange:ve})=>{var ge,me,Ae,he;if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&Object.keys(j).length>0&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&C&&M){let V;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&pe(a==null?void 0:a.tick).lte(u==null?void 0:u.current_tick_index)&&pe(o==null?void 0:o.tick).gt(u==null?void 0:u.current_tick_index))V=i({amount:tt(O&&+O?O+"":"1",U?C==null?void 0:C.decimals:M==null?void 0:M.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0});else if($&&!ce){const ae=(M==null?void 0:M.coin_type)===((ge=r==null?void 0:r.tokenA)==null?void 0:ge.coin_type);V=i({amount:tt(O?O+"":"1",M==null?void 0:M.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else if(ce&&!$){const ae=(C==null?void 0:C.coin_type)===((me=r==null?void 0:r.tokenA)==null?void 0:me.coin_type);V=i({amount:tt(O?O+"":"1",C==null?void 0:C.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:j.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else $&&ce&&(V=le?{coinAmountA:O?O+"":"1",coinAmountB:"",tokenMaxA:O?O+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:O?O+"":"1",tokenMaxA:"",tokenMaxB:O?O+"":"1"});if(P(V==null?void 0:V.tokenMaxA),de(V==null?void 0:V.tokenMaxB),O)if(pe(O).gt("0"))if(U){const ae=(M==null?void 0:M.coin_type)===((Ae=r==null?void 0:r.tokenA)==null?void 0:Ae.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,O+""),Se=Xe(M==null?void 0:M.coin_type,ae),fe=pe(oe).plus(Se).toString();console.log(ae,oe,Se,fe,"_totalAmountValue"),F(ae||""),_(oe),q(Se),z(fe)}else{const ae=(C==null?void 0:C.coin_type)===((he=r==null?void 0:r.tokenA)==null?void 0:he.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,ae),Se=Xe(M==null?void 0:M.coin_type,O+""),fe=pe(oe).plus(Se).toString();console.log(ae,oe,Se,fe,"_totalAmountValue"),_(oe),q(Se),A(ae||""),z(fe)}else U?(F(""),_(""),q(""),z("")):(A(""),_(""),q(""),z(""));else A(""),F(""),_(""),q(""),z("");V&&Ye((V==null?void 0:V.liquidityAmount)||"")}};Ge(()=>{er({amount:U?w:R,isTokenA:re,isFullRange:Q})},[JSON.stringify(r),j,a==null?void 0:a.tick,o==null?void 0:o.tick,w,R,U,re,$,ce,Q],{wait:300});const tr=(O,le,ve)=>{K(le),le?A(O):F(O),J(ve!==void 0?ve:!1)},{balanceInfo:sr}=xt(C),{balanceInfo:rr}=xt(M);_t(()=>{var O,le;J(U?(C==null?void 0:C.coin_type)===((O=r==null?void 0:r.tokenA)==null?void 0:O.coin_type):(M==null?void 0:M.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r,U,C,M]),S.useEffect(()=>{(a==null?void 0:a.tick)===lt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(o==null?void 0:o.tick)===lt.getMaxIndex(Number((o==null?void 0:o.tickSpacing)||0))?Z(!0):Z(!1)},[a==null?void 0:a.tick,o==null?void 0:o.tick]),S.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&ue(a)&&ue(o)&&(pe(a==null?void 0:a.tick).gte(pe(o.tick))?(se(!0),Y(!0)):pe(a==null?void 0:a.tick).gt(u==null?void 0:u.current_tick_index)?(se(!s),Y(!!s)):pe(o.tick).lte(u==null?void 0:u.current_tick_index)?(se(!!s),Y(!s)):(se(!1),Y(!1)))},[a==null?void 0:a.tick,o==null?void 0:o.tick,u,s]);const{currentAccount:ir,onWalletModal:nr}=yt(),cr=vs(()=>{ir?zt(!0):nr(!0)},300,{leading:!0,trailing:!1}),$t=()=>{A(""),F(""),_(""),q(""),z("")},{fetchAccountBalance:ar}=Ts(),lr=async()=>{var O,le,ve;try{let ge,me,Ae;if(Fe)me=Ys(),l(me),ge=await Qs(a==null?void 0:a.tick,o==null?void 0:o.tick,$e);else{const V=U?w:R,ae=U?C.decimals:M.decimals,oe=pe(V).mul(fr.pow(10,ae)).toString(),Se=U&&(C==null?void 0:C.coin_type)===((O=r==null?void 0:r.tokenA)==null?void 0:O.coin_type)?!0:(M==null?void 0:M.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type)&&!U;let fe,Je;const Pe=a.tick,Ie=o.tick,Ue=u==null?void 0:u.current_tick_index;Pe!==void 0&&Ie!==void 0&&Ue!==void 0&&(Ue>=Pe&&Ue<=Ie?(fe=Se?oe:G,Je=Se?Ke:oe):Ue>Ie?(fe=0,Je=oe):Ue<Pe&&(fe=oe,Je=0));let Ut=[];if(u!=null&&u.index){const{rewarder_infos:X}=u;Ut=(X==null?void 0:X.length)>0&&(X==null?void 0:X.map(Ne=>Ne.coinAddress))||[]}const Nt={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:fe,amountB:Je,fixAmountA:Se,lowerTick:Pe,upperTick:Ie,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:Ut,farmsPoolId:r==null?void 0:r.farmsPoolAddress};if(me={getShowInfo:(X,Ne)=>{const Dt="Add "+[rt(w,C==null?void 0:C.symbol),rt(R,M==null?void 0:M.symbol)].filter(Boolean).join(" and "),et={modalDescriptionText:Dt,toastTitleText:Dt};if(X==="success"){let Ot=w,Vt=R;Ne&&(Ot=Yt(Ne,C)||w,Vt=Yt(Ne,M)||R);const Gt="Add "+[rt(Ot,C==null?void 0:C.symbol),rt(Vt,M==null?void 0:M.symbol)].filter(Boolean).join(" and ");et.toastDescriptionContent=Gt,et.modalDescriptionText=Gt,et.toastTitleText="Supplied Successful"}return et}},l(me),$e){const X=await g(Nt);ge=X==null?void 0:X.tx,Ae=X==null?void 0:X.msafeParams}else{const X=await n(Nt);ge=X==null?void 0:X.tx,Ae=X==null?void 0:X.msafeParams}}let he=await y(ge,me,{useDevInspect:!0,useMev:m,showSuccessModal:!1,useFastMode:b==="Fast Mode",maxCapForGas:h,customGasPrice:f,msafeParams:Ae});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Ht),((ve=he==null?void 0:he.events)==null?void 0:ve.length)===0&&(he=await k(he.digest));const{posId:V,farmsPosId:ae}=vr(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:V,farmsPosId:ae}),V?(Et(!0),Wt(ae||V)):B(me),Ht){const oe={subscriptionSource:"AddLiquidity",events:he.events};Is(oe)}ar(),$t(),Js(""),t()}else u&&p(u==null?void 0:u.poolAddress).then(V=>{Xs()})}catch(ge){console.error(ge,"handleSubmit ~ error");const me=String(ge).toLocaleLowerCase();if(me.includes("user")&&me.includes("reject")&&r!=null&&r.poolAddress){const Ae=await p(r==null?void 0:r.poolAddress);Ae&&c(Ae==null?void 0:Ae.current_sqrt_price,r)}throw ge}},dr=()=>{jt(!Fe)};return S.useEffect(()=>{$t()},[Fe]),{percentMap:xe,handleAmountChange:tr,fromToken:C,setFromToken:ie,toToken:M,setToToken:ne,byAmountIn:U,setByAmountIn:K,fromAmount:w,fromAmountValue:v,setFromAmount:A,toAmount:R,toAmountValue:N,setToAmount:F,liquidityAmount:Qe,fromBalanceInfo:sr,toBalanceInfo:rr,totalAmount:T,fromTokenLock:$,toTokenLock:ce,handleAdd:cr,confirmModalOpen:Gs,setConfirmModalOpen:zt,nftOpen:Zs,setNftOpen:Et,relatedPosId:Ks,handleSubmit:lr,useZapIn:Fe,handleChangeZapIn:dr}}function Mi(){const{fromAmount:t,toAmount:s,fromToken:i,toToken:n,fromTokenLock:g,toTokenLock:x,liquidityAmount:d}=Be(),{currentAccount:j}=yt(),{balanceInfo:r}=xt(i),{balanceInfo:u}=xt(n),p=S.useMemo(()=>{const a={text:"Add Liquidity",disabled:!1};return j!=null&&j.address?!g&&!x&&(!t||!s||t&&!+t||s&&!+s)||g&&!x&&(!s||s&&!+s)||x&&!g&&(!t||t&&!+t)?(a.text="Enter an amount",a.disabled=!0,a):t&&+t&&H(t).gt((r==null?void 0:r.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${I(i==null?void 0:i.symbol,10)} Balance`,a):s&&+s&&H(s).gt((u==null?void 0:u.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${I(n==null?void 0:n.symbol,10)} Balance`,a):((!g&&!x&&(!t||!s)||H(d).lte("0"))&&(a.disabled=!0),a):(a.text="Connect Wallet",a.disabled=!1,a)},[j==null?void 0:j.address,t,s,r==null?void 0:r.balanceDisplay,u==null?void 0:u.balanceDisplay,i,n,g,x,d]);return{btnText:p.text,btnDisabled:p.disabled}}function qi(){return{getLeverage:(s,i)=>s&&i&&s!=="0"&&i!=="âˆž"?hs(1/(1-Number(H(s).div(i).toNumber()**.25)),2)+"x":"1x"}}function zi({rangeTabList:t}){var N;const{apiPoolInfo:s}=ee(),{fromToken:i,toToken:n,setFromToken:g,setToToken:x,byAmountIn:d,setByAmountIn:j,setIsFarmRewardsRange:r,setAutoStakePosition:u,fromTokenLock:p,toTokenLock:a,fromAmount:o,toAmount:y,setFromAmount:k,setToAmount:B}=Be(),{lowerTickData:m,upperTickData:h}=Te(),[b,f]=S.useState(),{handleInitTickData:l}=mt(),{getLeverage:c}=qi();S.useEffect(()=>{var q;if(s){const U=(q=s==null?void 0:s.displayTokenA)==null?void 0:q.coin_type;f(U)}},[s==null?void 0:s.poolAddress]);const w=S.useMemo(()=>{var q;return b===((q=s==null?void 0:s.tokenA)==null?void 0:q.coin_type)},[b,(N=s==null?void 0:s.tokenA)==null?void 0:N.coin_type]),A=S.useMemo(()=>{var q,U,K,re;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":w?`${I((q=s==null?void 0:s.tokenB)==null?void 0:q.symbol,10)} per ${I((U=s==null?void 0:s.tokenA)==null?void 0:U.symbol,10)}`:`${I((K=s==null?void 0:s.tokenA)==null?void 0:K.symbol,10)} per ${I((re=s==null?void 0:s.tokenB)==null?void 0:re.symbol,10)}`},[w,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),v=S.useMemo(()=>{const q=m==null?void 0:m.price,U=h==null?void 0:h.price;return c(q,U)},[m==null?void 0:m.price,h==null?void 0:h.price]),_=q=>{r(q.target.checked),q.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&l(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};S.useEffect(()=>{H(m==null?void 0:m.tick).eq(H(s==null?void 0:s.farmsEffectiveTickLower))&&H(h==null?void 0:h.tick).eq(H(s==null?void 0:s.farmsEffectiveTickUpper))?r(!0):r(!1)},[m==null?void 0:m.tick,h==null?void 0:h.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const R=S.useMemo(()=>(m==null?void 0:m.price)==="0"&&(h==null?void 0:h.price)==="âˆž",[m==null?void 0:m.price,h==null?void 0:h.price]),F=q=>{var U;q&&(q!=null&&q.coin_type)?f(q==null?void 0:q.coin_type):f((U=t==null?void 0:t.find(K=>K.key!==b))==null?void 0:U.key),g(n),x(i),j(!d),d?(B(o),k("")):(k(y),B(""))};return S.useEffect(()=>{s!=null&&s.haveFarming&&u(!(p||a))},[p,a,s==null?void 0:s.haveFarming]),S.useEffect(()=>{d&&p&&!a&&(k(""),B("")),!d&&!p&&a&&(k(""),B("")),d&&!p&&a&&B(""),!d&&p&&!a&&k(""),p&&a&&(k(""),B(""))},[p,a]),{direct:w,perText:A,handleChangeIsFarmRewardsRange:_,onReverseClick:F,leverage:v,currentRangeTab:b,isFullRange:R}}function Ei({onClose:t,posId:s,tokenA:i,tokenB:n,fee:g,isReverse:x}){const d=Ze(),[j,r]=S.useState(!0),{lowerTickData:u,upperTickData:p}=Te();return S.useLayoutEffect(()=>{x&&r(!1)},[x]),e.jsxs(as,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{w:"400px",children:[e.jsx(us,{children:e.jsxs(E,{justify:"space-between",w:"100%",children:[e.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(je,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(Ce,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(xs,{children:e.jsxs(W,{gap:"36px",children:[e.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(bs,{coinAIconUrl:i==null?void 0:i.logo_url,coinBIconUrl:n==null?void 0:n.logo_url,coinACoinType:i==null?void 0:i.coin_type,coinBCoinType:n==null?void 0:n.coin_type,w:"48px",h:"48px"}),e.jsxs(L,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[I(i==null?void 0:i.symbol,10)," - ",I(n==null?void 0:n.symbol,10)]}),e.jsxs(E,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(L,{fontSize:"14px",children:"Fee tier"}),e.jsx(L,{fontSize:"14px",color:"text_highlight",children:g})]})]}),e.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(L,{color:"text_caption",whiteSpace:"nowrap",children:[j?we(u==null?void 0:u.price,6):we(p==null?void 0:p.reversePrice,6)," -Â ",j?we(p==null?void 0:p.price,6):we(u==null?void 0:u.reversePrice,6)]}),e.jsxs(E,{children:[e.jsxs(E,{gap:"0",children:[e.jsx(L,{color:"primary_gray",children:I(j?x?i==null?void 0:i.symbol:n==null?void 0:n.symbol:x?n==null?void 0:n.symbol:i==null?void 0:i.symbol,10)}),e.jsx(L,{color:"primary_gray",children:"Â perÂ "}),e.jsx(L,{color:"primary_gray",children:I(j?x?n==null?void 0:n.symbol:i==null?void 0:i.symbol:x?i==null?void 0:i.symbol:n==null?void 0:n.symbol,10)})]}),e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:a=>{Tt(a),r(!j)}})]})]})]})}),e.jsx(pr,{p:"20px 0 0",children:e.jsx(je,{flex:"1",onClick:()=>d(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function Ws({perText:t,direct:s,minPriceData:i,maxPriceData:n,isFullRange:g=!1}){const{tickDataLoading:x}=Te(),{handleAddPrice:d,handleSubPrice:j,setTickDataBasedOnPrice:r}=mt();return e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(It,{title:"Min Price",perText:t,data:i,direct:s,loading:x,handleAddPrice:d,handleSubPrice:j,setTickDataBasedOnPrice:r,isFullRange:g}),e.jsx(It,{title:"Max Price",perText:t,data:n,direct:s,loading:x,handleAddPrice:d,handleSubPrice:j,setTickDataBasedOnPrice:r,isFullRange:g})]})}const Hs=({minPrice:t,maxPrice:s,perText:i,checked:n,onChange:g,loading:x})=>e.jsxs(E,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(E,{children:[e.jsx(ei,{tooltip:e.jsxs(te,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",e.jsx(te,{as:"a",color:"primary",onClick:d=>{Tt(d),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(L,{children:"Farm rewards range"})]}),e.jsxs(E,{children:[x?e.jsx(He,{w:"120px",h:"14px"}):e.jsxs(L,{color:"primary_yellow",children:[t,"Â -Â ",s]}),e.jsx(L,{children:i})]})]}),e.jsx(ft,{isChecked:n,onChange:g})]}),$s=({disabled:t,checked:s,onChange:i})=>e.jsxs(E,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(L,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(at,{tooltip:e.jsxs(W,{gap:"4px",align:"flex-start",children:[e.jsx(L,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(L,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})}):e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})]}),Wi=(t,s)=>({priceRangeMap:null,setPriceRangeMap:i=>{t(()=>({priceRangeMap:i}))},recommendRangesInfo:null,setRecommendRangesInfo:i=>{t(()=>({recommendRangesInfo:i}))},resetDeposit:()=>{t(()=>({priceRangeMap:null,recommendRangesInfo:null}))}}),bt=ms(Wi),Hi=[{label:"24H",key:"day"},{label:"7D",key:"week"},{label:"30D",key:"month"}];function Us({direct:t,wrapStyle:s={}}){const{priceRangeMap:i}=bt(),[n,g]=S.useState({type:"30D",key:"month"}),{minPriceForDate:x,maxPriceForDate:d,setMinPriceForDate:j,setMaxPriceForDate:r}=ee();S.useEffect(()=>{var o,y;let p="",a="";if(ue(i)){const k=(o=i[n==null?void 0:n.key])==null?void 0:o[0],B=t?k:H(1).div(k).toString(),m=(y=i[n==null?void 0:n.key])==null?void 0:y[1],h=t?m:H(1).div(m).toString();p=we(B,6),a=we(h,6)}else p="-",a="-";j(p),r(a)},[t,n.key,i]);const{isApp:u}=Le();return e.jsxs(E,{w:"100%",justify:"space-between",...s,children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(E,{children:[e.jsx(gt,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(os,{w:"14px",border:"1px dashed"})}),e.jsxs(L,{fontSize:"12px",whiteSpace:"nowrap",children:[n==null?void 0:n.type,"Â Price Range"]})]}),e.jsxs(L,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?x:d,"Â -Â ",t?d:x]})]}),e.jsx(Me,{type:"outlineTab",tabList:Hi,currentTab:n,handleChangeTab:p=>{g({type:p.label,key:p.key})},isActive:(p,a)=>p.key===a.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function $i(){const[t,s]=S.useState(""),i=(d,j)=>({default:{lower:d,upper:j,sort:3}}),n=d=>({"full range":{lower:lt.getMinIndex(d),upper:lt.getMaxIndex(d),sort:2}}),g=(d,j,r)=>{const u=H(r).mul(j==="unstable"?2:3).toNumber(),p=wr(Number(d),Number(r));return{custom:{lower:H(p).sub(u).toNumber(),upper:H(p).add(u).toNumber(),sort:1}}};return{getRecommendRangesList:async d=>{try{const j=d.farmsEffectTickLower&&d.farmsEffectTickUpper?i(d.farmsEffectTickLower,d.farmsEffectTickUpper):null,r=d.farmsEffectTickLower&&d.farmsEffectTickUpper?{ranges:{},type:""}:d==null?void 0:d.recommendRangesInfo;if(console.log(r,"recommendRangesResult"),r){s(r.type);const u=n(d.tickSpacing),p=g(d.currentTick,r.type,d.tickSpacing),a={...j,...r.ranges,...u,...p},o=Object.entries(a).map(([y,k])=>({key:y,...k})).sort((y,k)=>k.sort-y.sort);return ue(r.ranges)||ue(j)?{rangeList:o,error:!1}:{rangeList:o,error:!0}}else return{rangeList:[],error:!0}}catch(j){return console.error("Error in getRecommendRangesList:",j),{rangeList:[],error:!0}}},poolType:t}}const St=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Ui=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Ni={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Ns(t){const{getRecommendRangesList:s}=$i(),[i,n]=S.useState(),{poolAddress:g,currentTick:x,tickSpacing:d,farmsEffectTickLower:j,farmsEffectTickUpper:r}=t;Le();const{handleInitTickData:u}=mt(),{apiPoolInfo:p,currentRange:a,setCurrentRange:o}=ee(),{lowerTickData:y,upperTickData:k,setLowerTickData:B,setUpperTickData:m,setTickDataLoading:h,tickDataLoading:b}=Te(),{recommendRangesInfo:f}=bt(),l=async()=>{var c,w,A;try{a||h(!0);const{rangeList:v,error:_}=await s({...t,recommendRangesInfo:f});if(n(v),_){if(o("custom"),!a&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)){const R=v.find(F=>F.key==="custom");R&&u(R==null?void 0:R.lower,R==null?void 0:R.upper,p)}}else o((c=v[0])==null?void 0:c.key),!a&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)&&u((w=v[0])==null?void 0:w.lower,(A=v[0])==null?void 0:A.upper,p)}catch(v){console.error(v)}finally{h(!1)}};return Ge(()=>{g&&x!==void 0&&d!==void 0&&l()},[g,d,f],{wait:500}),S.useEffect(()=>{if(i&&i.length>0&&ue(y)&&ue(k)){const c=i==null?void 0:i.find(w=>H(w.lower).eq(H(y==null?void 0:y.tick))&&H(w.upper).eq(H(k==null?void 0:k.tick)));c?c.key!==a&&o(c.key):o("custom")}},[y==null?void 0:y.tick,k==null?void 0:k.tick,i]),e.jsx(e.Fragment,{children:e.jsx(gr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:i&&i.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:i&&i.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:i==null?void 0:i.map((c,w)=>{var A,v;return e.jsx(yr,{label:Ui(c.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:i!=null&&i.length?Ni[i.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{c.key!==a&&(o(c.key),p!=null&&p.tokenA&&(p!=null&&p.tokenB)&&u(c.lower,c.upper,p))},bg:c.key==a?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Zt,{decoding:"async",display:c.key===a?"block":"none",src:`/images/${(A=St(c.key,!0))==null?void 0:A.image}`,w:"72px",h:c.key===a?"22px":"0px",fallback:e.jsx(te,{bg:"background",w:"72px",h:c.key===a?"22px":"0px",borderRadius:"4px"})}),e.jsx(Zt,{decoding:"async",display:c.key===a?"none":"block",src:`/images/${(v=St(c.key,!1))==null?void 0:v.image}`,w:"72px",h:c.key===a?"0px":"22px",fallback:e.jsx(te,{bg:"background",w:"72px",h:c.key===a?"0px":"22px",borderRadius:"4px"})}),e.jsx(L,{color:c.key==a?"primary":"primary_gray",fontSize:"12px",children:St(c.key).name})]})},c.key)})})})}function Ds(t){const[s,i]=S.useState(!1),{displayTokenA:n,displayTokenB:g,feeDisplay:x,clmmPool:d,vaultId:j,isReverse:r,category:u}=t,{isApp:p}=Le(),{vaultListObj:a}=si(),{clearVaultsActionData:o}=ti(),y=S.useMemo(()=>a[j],[a,j]);return S.useEffect(()=>{o()},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(W,{width:p?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(E,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(L,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(E,{children:[e.jsx(_e,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(ri,{vaultsLstApyDisplay:y==null?void 0:y.vaultsLstApyDisplay,vaultsApyDisplay:y==null?void 0:y.vaultsApyDisplay,vaultsTotalApyDisplay:y==null?void 0:y.vaultsTotalApyDisplay,vaultsAprDisplay:y==null?void 0:y.vaultsAprDisplay,category:y==null?void 0:y.category}),value:(y==null?void 0:y.category)=="cetus"?y==null?void 0:y.vaultsTotalApyDisplay:(y==null?void 0:y.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(je,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>i(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(E,{w:"100%",mt:"14px",children:e.jsxs(L,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",u=="haedal"?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(Tr,{isOpen:s,setIsOpen:i,displayTokenA:n,displayTokenB:g,feeDisplay:x,clmmPool:d,vaultId:j,isReverse:r,category:u})]})}const Os=({price:t,perText:s,wrapStyle:i,loading:n})=>e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:"flex-start",...i,children:[e.jsx(L,{children:"Current Price"}),e.jsxs(E,{as:"div",h:"14px",children:[n||t==="--"?e.jsx(He,{w:"66px",h:"14px",display:"inline-block"}):e.jsx(L,{as:"span",color:"text_caption",display:"inline-block",h:"14px",lineHeight:"14px",children:t}),e.jsx(L,{as:"span",display:"inline-block",h:"14px",lineHeight:"14px",children:` ${s}`})]})]});function Di({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:n,leverage:g,direct:x,perText:d,rangeTabList:j,currentRangeTab:r,fromBalanceInfo:u,toBalanceInfo:p,fromAmountValue:a,toAmountValue:o,handleAmountChange:y,handleAdd:k,isFullRange:B,useZapIn:m,handleChangeZapIn:h}){var se,ce;const{currentPriceData:b,contractPoolInfo:f,apiPoolInfo:l,resetLiquidity:c,contractPoolInfoLoading:w,apiPoolInfoLoading:A,minPriceForDate:v,maxPriceForDate:_}=ee(),{lowerTickData:R,upperTickData:F}=Te(),{autoStakePosition:N,setAutoStakePosition:q,isFarmRewardsRange:U,fromAmount:K,toAmount:re,byAmountIn:J,percentMap:xe,fromToken:D,toToken:Q,totalAmount:Z,fromTokenLock:C,toTokenLock:ie}=Be(),{poolAddress:M}=ye(),ne=Y=>{q(Y.target.checked)},T=S.useMemo(()=>{if(b!=null&&b.currentPrice&&b.pool===M)return b==null?void 0:b.currentPrice},[b==null?void 0:b.currentPrice]),{priceImpactBasedOnMarket:z}=ps(D,Q,x?"1":We(T),x?We(T):"1",!0),$=S.useMemo(()=>{if(z&&H(z).abs().gte(30))return H(z).gte(30)?`+${H(z).toFixed(0)}%`:`${H(z).toFixed(0)}%`},[z]);return S.useMemo(()=>!!(l!=null&&l.haveFarming)&&!!(l!=null&&l.displayFarmsEffectMaxPrice)&&!!(l!=null&&l.displayFarmsEffectMinPrice),[l==null?void 0:l.haveFarming,l==null?void 0:l.displayFarmsEffectMaxPrice,l==null?void 0:l.displayFarmsEffectMinPrice]),e.jsxs(te,{w:"100%",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx(Ns,{poolAddress:M,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:l==null?void 0:l.farmsEffectiveTickLower,farmsEffectTickUpper:l==null?void 0:l.farmsEffectiveTickUpper}),A?e.jsx(He,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(Me,{type:"outlineTab",tabList:j,currentTab:r,handleChangeTab:Y=>n(Y),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(Os,{price:We(x?b==null?void 0:b.currentPrice:b.reverseCurrentPrice,6),perText:d,loading:w,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(fs,{handleClickRefresh:()=>{},direct:x,minPriceData:x?R:F,maxPriceData:x?F:R,dashedMarkerLine:[v,_]})}),$&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${$}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",tipsFontSize:"12px"}),e.jsx(Us,{direct:x,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(Ws,{perText:d,direct:x,isFullRange:B,minPriceData:x?R:F,maxPriceData:x?F:R}),C&&ie&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"})]}),e.jsxs(W,{mb:"20px",gap:"16px",children:[e.jsx(Ls,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(L,{color:"text_caption",children:C&&ie?"--":g})}),(l==null?void 0:l.haveFarming)&&(l==null?void 0:l.displayFarmsEffectMaxPrice)&&(l==null?void 0:l.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?dt(l==null?void 0:l.displayFarmsEffectMinPrice):ut(l==null?void 0:l.displayFarmsEffectMaxPrice),maxPrice:x?dt(l==null?void 0:l.displayFarmsEffectMaxPrice):ut(l==null?void 0:l.displayFarmsEffectMinPrice),loading:A,perText:d,checked:U,onChange:i})]}),e.jsx(te,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:l!=null&&l.haveFarming?"1px solid":"none",borderColor:"border",children:e.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(E,{w:"100%",justify:"space-between",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsxs(E,{children:[e.jsx(gs,{}),(l==null?void 0:l.haveZap)&&e.jsx(Rs,{action:"Deposit",value:m,onChange:h})]})]}),e.jsx(W,{w:"100%",gap:"12px",children:e.jsx(te,{w:"100%",position:"relative",children:m&&!(C&&ie)?e.jsx(Cs,{apiPoolInfo:l,action:"Deposit",currentSqrtPrice:b==null?void 0:b.currentSqrtPrice,lowerTick:R==null?void 0:R.tick,upperTick:F==null?void 0:F.tick}):e.jsx(Fs,{onClick:n,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:K+"",amountValue:a,loading:!1,onChange:Y=>{var P;y(Y,!0,(D==null?void 0:D.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:D,onFocusChange:Y=>{var P;Y&&+(K+"")&&!J&&y(K+"",!0,(D==null?void 0:D.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},lock:{isLock:C&&!ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:re+"",amountValue:o,loading:!1,onFocusChange:Y=>{var P;Y&&+(re+"")&&J&&y(re+"",!1,(Q==null?void 0:Q.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},onChange:Y=>{var P;y(Y,!1,(Q==null?void 0:Q.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:Q,lock:{isLock:!C&&ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:C&&ie,style:{h:"224px"}}})})}),!m&&!!(l!=null&&l.poolAddress)&&!(C&&ie)&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[e.jsx(Mt,{totalAmount:Z,loading:!1}),e.jsx(Ft,{type:"image",percentMap:xe,lockRatio:C&&ie,tokenA:D,tokenB:Q,isReverse:(D==null?void 0:D.coin_type)!==((se=l==null?void 0:l.tokenA)==null?void 0:se.coin_type)})]}),e.jsx(je,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:k,children:t})]}),m&&e.jsx(Bt,{action:"Deposit",isReverse:(D==null?void 0:D.coin_type)!==((ce=l==null?void 0:l.tokenA)==null?void 0:ce.coin_type)}),(l==null?void 0:l.haveFarming)&&e.jsx($s,{disabled:C||ie,checked:N,onChange:ne})]})}),l!=null&&l.vaultCategory?e.jsx(W,{mt:"16px",children:e.jsx(Ds,{displayTokenA:l==null?void 0:l.displayTokenA,displayTokenB:l==null?void 0:l.displayTokenB,feeDisplay:l==null?void 0:l.feeDisplay,clmmPool:l==null?void 0:l.poolAddress,vaultId:l==null?void 0:l.vaultId,isReverse:l==null?void 0:l.isReverse,category:l==null?void 0:l.vaultCategory})}):null]})}function ns({children:t,title:s,wrapStyle:i={}}){return e.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...i,children:[e.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Oi({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:n,leverage:g,direct:x,perText:d,rangeTabList:j,currentRangeTab:r,fromBalanceInfo:u,toBalanceInfo:p,fromAmountValue:a,toAmountValue:o,handleAmountChange:y,handleAdd:k,isFullRange:B,useZapIn:m,handleChangeZapIn:h,handleSubmit:b}){var Y,P;const{currentPriceData:f,contractPoolInfo:l,apiPoolInfo:c,resetLiquidity:w,contractPoolInfoLoading:A,apiPoolInfoLoading:v,minPriceForDate:_,maxPriceForDate:R,currentRange:F}=ee();console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ apiPoolInfo:",c),console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ contractPoolInfo:",l);const{lowerTickData:N,upperTickData:q}=Te(),{autoStakePosition:U,setAutoStakePosition:K,isFarmRewardsRange:re,fromAmount:J,toAmount:xe,byAmountIn:D,percentMap:Q,fromToken:Z,toToken:C,totalAmount:ie,fromTokenLock:M,toTokenLock:ne}=Be(),{poolAddress:T}=ye(),z=de=>{K(de.target.checked)},$=S.useMemo(()=>{if(f!=null&&f.currentPrice&&f.pool===T)return f==null?void 0:f.currentPrice},[f==null?void 0:f.currentPrice]),{priceImpactBasedOnMarket:se}=ps(Z,C,x?"1":We($),x?We($):"1",!0),ce=S.useMemo(()=>{if(se&&H(se).abs().gte(30))return H(se).gte(30)?`+${H(se).toFixed(0)}%`:`${H(se).toFixed(0)}%`},[se]);return e.jsx(e.Fragment,{children:e.jsxs(E,{gap:"12px",align:"flex-start",children:[e.jsxs(ns,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!j||!j.length?e.jsx(He,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(Me,{type:"outlineTab",tabList:j,currentTab:r,handleChangeTab:de=>n(de),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(W,{w:"100%",gap:"12px",children:[e.jsx(E,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(E,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(Os,{loading:v,price:ue(f)?We(x?f==null?void 0:f.currentPrice:f.reverseCurrentPrice,6):"--",perText:d,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(E,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(W,{gap:"20px",children:[e.jsx(gt,{h:"226px",mt:"10px",children:e.jsx(Ns,{poolAddress:T,currentTick:l==null?void 0:l.current_tick_index,tickSpacing:l==null?void 0:l.tickSpacing,farmsEffectTickLower:c==null?void 0:c.farmsEffectiveTickLower,farmsEffectTickUpper:c==null?void 0:c.farmsEffectiveTickUpper})}),ue(N)&&ue(q)&&e.jsx(e.Fragment,{children:e.jsx(Ls,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(L,{color:"text_caption",children:M&&ne?"--":g})})})]}),e.jsxs(W,{w:"100%",gap:"32px",children:[e.jsx(te,{w:"100%",h:"230px",children:e.jsx(fs,{handleClickRefresh:()=>{},direct:x,minPriceData:x?N:q,maxPriceData:x?q:N,dashedMarkerLine:[_,R],currentRange:F})}),ce&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${ce}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",tipsFontSize:"12px"}),ue(N)&&ue(q)&&e.jsx(Us,{direct:x,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(Ws,{perText:d,direct:x,isFullRange:B,minPriceData:x?N:q,maxPriceData:x?q:N}),M&&ne&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"}),(c==null?void 0:c.haveFarming)&&(c==null?void 0:c.displayFarmsEffectMaxPrice)&&(c==null?void 0:c.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?dt(c==null?void 0:c.displayFarmsEffectMinPrice):ut(c==null?void 0:c.displayFarmsEffectMaxPrice),maxPrice:x?dt(c==null?void 0:c.displayFarmsEffectMaxPrice):ut(c==null?void 0:c.displayFarmsEffectMinPrice),loading:v,perText:d,checked:re,onChange:i})]})]}),e.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(ns,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(E,{children:(c==null?void 0:c.haveZap)&&e.jsx(Rs,{action:"Deposit",value:m,onChange:h})}),e.jsx(te,{w:"100%",position:"relative",children:m&&!(M&&ne)?e.jsx(Cs,{apiPoolInfo:c,action:"Deposit",currentSqrtPrice:f==null?void 0:f.currentSqrtPrice,lowerTick:N==null?void 0:N.tick,upperTick:q==null?void 0:q.tick}):e.jsx(e.Fragment,{children:e.jsx(Fs,{onClick:n,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:J,amountValue:a,loading:!1,onChange:de=>{var G;y(de,!0,(Z==null?void 0:Z.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:Z,onFocusChange:de=>{var G;de&&+(J+"")&&!D&&y(J+"",!0,(Z==null?void 0:Z.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},lock:{isLock:M&&!ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:xe,amountValue:o,loading:!1,onFocusChange:de=>{var G;de&&+(xe+"")&&D&&y(xe+"",!1,(C==null?void 0:C.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},onChange:de=>{var G;y(de,!1,(C==null?void 0:C.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:C,lock:{isLock:!M&&ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:M&&ne,style:{h:"224px"}}})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs(W,{w:"100%",gap:"8px",children:[!m&&!!(c!=null&&c.poolAddress)&&!(M&&ne)&&e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:c!=null&&c.displayTokenA&&(c!=null&&c.displayTokenB)?"0 8px 16px":"0 16px",children:[e.jsx(je,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:s,isLoading:!1,onClick:k,children:t}),(c==null?void 0:c.displayTokenA)&&(c==null?void 0:c.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{totalAmount:ie,loading:!1,valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(Ft,{type:"image",percentMap:Q,lockRatio:M&&ne,tokenA:Z,tokenB:C,isReverse:(Z==null?void 0:Z.coin_type)!==((Y=c==null?void 0:c.tokenA)==null?void 0:Y.coin_type)})]})]}),m&&e.jsx(Bt,{action:"Deposit",isReverse:(Z==null?void 0:Z.coin_type)!==((P=c==null?void 0:c.tokenA)==null?void 0:P.coin_type)}),(c==null?void 0:c.haveFarming)&&e.jsx($s,{disabled:M||ne,checked:U,onChange:z})]}),(c==null?void 0:c.vaultCategory)&&e.jsx(Ds,{displayTokenA:c==null?void 0:c.displayTokenA,displayTokenB:c==null?void 0:c.displayTokenB,feeDisplay:c==null?void 0:c.feeDisplay,clmmPool:c==null?void 0:c.poolAddress,vaultId:c==null?void 0:c.vaultId,isReverse:c==null?void 0:c.isReverse,category:c==null?void 0:c.vaultCategory})]})]})]})})}function Vi({rangeTabList:t,currentFeeTier:s,getList:i,getPrice:n}){const{apiPoolInfo:g}=ee(),{zapAmount:x,currentZapToken:d}=ks(),{direct:j,perText:r,handleChangeIsFarmRewardsRange:u,onReverseClick:p,leverage:a,currentRangeTab:o,isFullRange:y}=zi({rangeTabList:t}),{handleAmountChange:k,fromAmountValue:B,toAmountValue:m,fromBalanceInfo:h,toBalanceInfo:b,relatedPosId:f,nftOpen:l,setNftOpen:c,handleAdd:w,handleSubmit:A,useZapIn:v,handleChangeZapIn:_,confirmModalOpen:R,setConfirmModalOpen:F}=Fi(i,j),{btnText:N,btnDisabled:q}=Mi(),{isApp:U}=Le(),K={btnText:N,btnDisabled:q,handleChangeIsFarmRewardsRange:u,onReverseClick:p,leverage:a,direct:j,perText:r,rangeTabList:t,currentRangeTab:o,fromBalanceInfo:h,toBalanceInfo:b,fromAmountValue:B,toAmountValue:m,handleAmountChange:k,handleAdd:w,isFullRange:y,useZapIn:v,handleChangeZapIn:_,handleSubmit:A};return e.jsxs(e.Fragment,{children:[U?e.jsx(Di,{...K}):e.jsx(Oi,{...K}),R&&e.jsx(Bi,{onClose:()=>F(!1),data:{feeTier:s,zapData:v?{amount:x,token:d}:void 0},onSubmit:A}),l&&f&&ue(g)&&e.jsx(Ei,{onClose:()=>c(!1),tokenA:g==null?void 0:g.displayTokenA,tokenB:g==null?void 0:g.displayTokenB,posId:f,fee:g==null?void 0:g.feeDisplay,isReverse:g==null?void 0:g.isReverse})]})}const cs=(t,s,i)=>t&&s&&i?H(t).mul(s).div(H(10).pow(i)).toString():"--";function Vs(){var w,A;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:i,setTokenBPrice:n,tokenAAmount:g,setTokenAAmount:x,tokenBAmount:d,setTokenBAmount:j,tokenAAmountUSD:r,setTokenAAmountUSD:u,tokenBAmountUSD:p,setTokenBAmountUSD:a,totalAmountUSD:o,setTotalAmountUSD:y,resetTvlInfo:k,tvlLoading:B,setTvlLoading:m}=ht(),{apiPoolInfo:h,contractPoolInfo:b}=ee(),f=async v=>{var _,R;try{const F=(_=ze(v))==null?void 0:_.full_address,N=F=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":F,{prices:q}=await _r(`${(R=kt)==null?void 0:R.cetus_api}/v2/sui/price?base_symbol_address=${N}`);return q==null?void 0:q[0]}catch(F){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",F),"--"}},{poolAddress:l}=ye(),c=async()=>{var v,_,R,F;m(!0);try{if((v=h==null?void 0:h.tokenA)!=null&&v.coin_type){const N=await f((_=h==null?void 0:h.tokenA)==null?void 0:_.coin_type);N&&s(N)}if((R=h==null?void 0:h.tokenB)!=null&&R.coin_type){const N=await f((F=h==null?void 0:h.tokenB)==null?void 0:F.coin_type);N&&n(N)}}catch(N){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",N)}finally{m(!1)}};return S.useEffect(()=>{k()},[l]),S.useEffect(()=>()=>{k()},[]),S.useEffect(()=>{c()},[h==null?void 0:h.tvl,(w=h==null?void 0:h.tokenA)==null?void 0:w.coin_type,(A=h==null?void 0:h.tokenB)==null?void 0:A.coin_type]),S.useEffect(()=>{b!=null&&b.coinAmountA&&x(H(b==null?void 0:b.coinAmountA).sub((b==null?void 0:b.fee_protocol_coin_a)||"0").toString())},[b==null?void 0:b.coinAmountA,b==null?void 0:b.fee_protocol_coin_a,l]),S.useEffect(()=>{b!=null&&b.coinAmountB&&j(H(b==null?void 0:b.coinAmountB).sub((b==null?void 0:b.fee_protocol_coin_b)||"0").toString())},[b==null?void 0:b.coinAmountB,b==null?void 0:b.fee_protocol_coin_b,l]),S.useEffect(()=>{g&&(t!=null&&t.price)&&(h!=null&&h.tokenA.decimals)&&!Number.isNaN(Number(h==null?void 0:h.tokenA.decimals))&&u(cs(g,t==null?void 0:t.price,h==null?void 0:h.tokenA.decimals))},[g,t]),S.useEffect(()=>{d&&(i!=null&&i.price)&&(h!=null&&h.tokenB.decimals)&&!Number.isNaN(Number(h==null?void 0:h.tokenB.decimals))&&a(cs(d,i==null?void 0:i.price,h==null?void 0:h.tokenB.decimals))},[d,i]),S.useEffect(()=>{y(r&&p&&r!=="--"&&p!=="--"?H(r).plus(p).toString():"--")},[r,p]),{tokenAPrice:t,tokenBPrice:i,tokenAAmount:g,tokenBAmount:d,tokenAAmountUSD:r,tokenBAmountUSD:p,totalAmountUSD:o,setTotalAmountUSD:y,tvlLoading:B}}function Gi(){const{fetchByApi:t}=ys(),{setPriceRangeMap:s,setRecommendRangesInfo:i}=bt();return{fetchPriceRange:async(g,x,d)=>{var j;try{const r=await t(kr,"GET",{pool:g}),u=Object.fromEntries((j=r==null?void 0:r.ranges)==null?void 0:j.map(p=>[p==null?void 0:p.dateType,[Xt.tickIndexToPrice(p==null?void 0:p.lower,x.decimals,d.decimals).toString(),Xt.tickIndexToPrice(p==null?void 0:p.upper,x.decimals,d.decimals).toString()]]));return s(u),i({ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}),{rangesWithDateTypeMap:u,recommendRanges:{ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}}}catch(r){return console.error("Error in fetchPriceRange:",r),s({}),i({ranges:{},type:""}),{rangesWithDateTypeMap:{},recommendRanges:{ranges:{},type:""}}}}}}function Zi(){const{tab:t,poolAddress:s,from:i,to:n,fee:g}=ye(),{getPoolList:x}=Xr(),[d,j]=S.useState([]),{apiPoolInfo:r,setApiPoolInfo:u,setApiPoolInfoLoading:p,setNetError:a}=ee(),o=Ze(),{fetchTokenInfo:y}=Ms(),k=async({poolAddress:B,from:m,to:h})=>{var b,f,l,c;try{p(!0);let w,A;if(B&&B!=="undefined"){const v=await x({pool:B});v&&v.list&&v.list.length?(A=v.list[0],w=await x({coin_type:`${(b=A==null?void 0:A.displayTokenA)==null?void 0:b.coin_type},${(f=A==null?void 0:A.displayTokenB)==null?void 0:f.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):r&&ue(r)?(A=r,w={list:d}):(A={poolAddress:B,displayTokenA:void 0,displayTokenB:void 0},w={list:[]}),p(!1)}else if(m&&h&&m!=="undefined"&&h!=="undefined"&&m!==h){const v=await x({coin_type:`${m},${h}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(v,"res_getPoolList"),v&&v.list&&v.list.length)if(g&&g!=="undefined"){const _=(l=v==null?void 0:v.list)==null?void 0:l.find(R=>H(R==null?void 0:R.feeRate).eq(g));if(_)o(t?`/liquidity?tab=${t}&poolAddress=${_==null?void 0:_.poolAddress}`:`/liquidity?poolAddress=${_==null?void 0:_.poolAddress}`);else{const R=At(v==null?void 0:v.list,F=>Number((F==null?void 0:F.tvl)||"0"));o(t?`/liquidity?tab=${t}&poolAddress=${R==null?void 0:R.poolAddress}`:`/liquidity?poolAddress=${R==null?void 0:R.poolAddress}`)}}else{let _=At(v==null?void 0:v.list,R=>Number((R==null?void 0:R.tvl)||"0"));_||(_=At(v==null?void 0:v.list,R=>{var F;return Number(((F=R==null?void 0:R.object)==null?void 0:F.liquidity)||"0")}),_||(_=v==null?void 0:v.list[0])),o(t?`/liquidity?tab=${t}&poolAddress=${_==null?void 0:_.poolAddress}`:`/liquidity?poolAddress=${_==null?void 0:_.poolAddress}`)}else{const _=await y([m,h].filter(Boolean)),R=_==null?void 0:_.get(m),F=_==null?void 0:_.get(h);A={poolAddress:void 0,displayTokenA:R,displayTokenB:F},w={list:[]},p(!1)}}else(!m||m==="undefined")&&h&&h!=="undefined"&&(A={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await y(h)}),(!h||h==="undefined")&&m&&m!=="undefined"&&(A={poolAddress:void 0,displayTokenA:await y(m),displayTokenB:void 0}),w={list:[]},p(!1);w&&(a(!1),j(w==null?void 0:w.list),console.log(A,"setApiPoolInfo"),A&&(A!=null&&A.poolAddress&&B?(A==null?void 0:A.poolAddress)===B&&u(A):u(A))),p(!1)}catch(w){if(w!=null&&w.list&&((c=w==null?void 0:w.list)==null?void 0:c.length)===1){a(!0);const A=w==null?void 0:w.list[0];console.log(w==null?void 0:w.list,"setApiPoolInfo"),u(A),j([]),p(!1)}}};return S.useEffect(()=>{s&&s==="undefined"||k({poolAddress:s,from:i,to:n})},[s,i,n]),{getList:k,relatedPoolList:d}}function Ki(){var o,y,k,B;const{poolAddress:t}=ye(),{apiPoolInfo:s,apiPoolInfoLoading:i}=ee(),{quoteWhiteTokenList:n}=Bs(),{getList:g,relatedPoolList:x}=Zi(),d=S.useMemo(()=>{var h,b;const m=ii(x);return m?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(h=es)==null?void 0:h.map(f=>{var c,w;const l=((c=m.find(A=>A.feeRate===f.feeRate))==null?void 0:c.title)||f.title;return{...f,title:l,poolAddress:(w=m.find(A=>A.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:l==="Not Created"&&!Ee(s==null?void 0:s.tokenA,n)&&!Ee(s==null?void 0:s.tokenB,n)}}):(b=es)==null?void 0:b.map(f=>{var c,w;const l=((c=m.find(A=>A.feeRate===f.feeRate))==null?void 0:c.title)||f.title;return{...f,title:l,poolAddress:(w=m.find(A=>A.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:!Ee(s==null?void 0:s.displayTokenA,n)&&!Ee(s==null?void 0:s.displayTokenB,n)}}):[]},[JSON.stringify(x),JSON.stringify(n),(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type,(y=s==null?void 0:s.displayTokenB)==null?void 0:y.coin_type]),j=S.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(m=>({label:m==null?void 0:m.symbol,key:m==null?void 0:m.coin_type,isToken:!0,imgInfo:{src:m==null?void 0:m.logo_url,w:"16px",h:"16px",coinType:m?m==null?void 0:m.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(k=s==null?void 0:s.displayTokenA)==null?void 0:k.symbol,(B=s==null?void 0:s.displayTokenB)==null?void 0:B.symbol]),r=S.useMemo(()=>{const m=d==null?void 0:d.find(h=>h.poolAddress===t);return m||s},[JSON.stringify(d),t,JSON.stringify(s)]),{fetchPriceRange:u}=Gi(),p=async m=>{console.log("ðŸš€ ~ setPriceRangeMap ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",m),await u(m,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB)};_t(()=>{t&&t===(s==null?void 0:s.poolAddress)&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)&&p(t)},[t,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);const a=S.useMemo(()=>{const m=[];return s!=null&&s.displayTokenA&&m.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&m.push(s==null?void 0:s.displayTokenB),m},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:g,feeTierList:d,apiPoolInfo:s,rangeTabList:j,currentFeeTier:r,apiPoolInfoLoading:i,quoteWhiteTokenList:n,warningTokenList:a}}var pt=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(pt||{});const ke=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Qi({apiPoolInfo:t}){var ie,M,ne;const{tab:s,poolAddress:i}=ye(),n=Ze(),[g,x]=S.useState(),[d,j]=S.useState(ke),[r,u]=S.useState(((ie=ke==null?void 0:ke.find(T=>T.key===s))==null?void 0:ie.key)||ke[0].key),[p,a]=S.useState(),[o,y]=S.useState(),{posBaseListGroupByPool:k}=Ss(),{addFavorites:B,removeFavorites:m}=ci(),{poolFavoriteIds:h}=ai(),{fromToken:b,toToken:f}=Be(),{fetchTokenPrices:l}=js(),{setFromCoin:c,setToCoin:w}=li(),{setIsOpen:A}=di(),{isSwapWidgetDisplay:v}=Rr(),_=()=>{var T,z;v?A(!0):n(`/swap/${(T=t==null?void 0:t.displayTokenA)==null?void 0:T.coin_type}/${(z=t==null?void 0:t.displayTokenB)==null?void 0:z.coin_type}`)};S.useEffect(()=>(b&&f&&(c(b),w(f)),()=>{c(kt.clmm_swap.from_coin),w(kt.clmm_swap.to_coin)}),[b,f]);const R=S.useMemo(()=>{if(i&&i!=="undefined"){const T=k[i.toLowerCase()||""];return T&&(T!=null&&T.list)&&(T==null?void 0:T.list.length)>0?T==null?void 0:T.list.length:void 0}},[JSON.stringify(k),i]);S.useEffect(()=>{j(ke==null?void 0:ke.map(T=>({...T,num:T.label==="My Positions"&&r==="positions"?R:void 0})))},[R,r]),S.useLayoutEffect(()=>{s&&s!==r&&u(s)},[s]);const F=S.useMemo(()=>h==null?void 0:h.includes(i||""),[JSON.stringify(h),i]),N=T=>{Tt(T),i&&(F?m(i):B(i))},q=S.useMemo(()=>F?{tooltip:"Remove from Watchlist",xlinkHref:"#icon-icon_star_sel",svgFill:"primary_blue",svgHover:"primary"}:{tooltip:"Add to Watchlist",xlinkHref:"#icon-icon_star",svgFill:"text_paragraph",svgHover:"text_caption"},[F]);S.useEffect(()=>{a(t==null?void 0:t.displayTokenA),y(t==null?void 0:t.displayTokenB)},[(M=t==null?void 0:t.displayTokenA)==null?void 0:M.coin_type,(ne=t==null?void 0:t.displayTokenB)==null?void 0:ne.coin_type]);const U=()=>{var T,z;n(`/create-pool/${(T=t==null?void 0:t.displayTokenA)==null?void 0:T.coin_type}/${(z=t==null?void 0:t.displayTokenB)==null?void 0:z.coin_type}/${g==null?void 0:g.feeRate}`)},K=()=>{var z;const T=[];b&&T.push(b.coin_type),f&&T.push(f.coin_type),t!=null&&t.miningRewardList&&((z=t==null?void 0:t.miningRewardList)==null||z.forEach($=>{T.push(ze($==null?void 0:$.coinType).full_address)})),T.length>0&&l(Array.from(new Set(T.filter($=>$&&$!=="undefined"))))};S.useEffect(()=>{K()},[b==null?void 0:b.coin_type,f==null?void 0:f.coin_type]);const{fetchTokenInfo:re}=Ms(),{setApiPoolInfo:J,apiPoolInfoLoading:xe,netError:D}=ee(),{setTotalAmountUSD:Q}=Vs(),Z=S.useCallback(async(T,z,$,se,ce,Y)=>{var Ke,$e,Qe,Ye,Fe;const P=Object.keys(pt).find(jt=>jt===r),de=[se,ce].filter(Boolean),G=await re(de);if($!=null&&$.coin_type||(Ke=G==null?void 0:G.get(ce||""))!=null&&Ke.coin_type)if(ze(T==null?void 0:T.coin_type).full_address===ze(($==null?void 0:$.coin_type)||(($e=G==null?void 0:G.get(ce||""))==null?void 0:$e.coin_type)||"").full_address)a(o),y(p);else{if(ze(T==null?void 0:T.coin_type).full_address===ze((z==null?void 0:z.coin_type)||((Qe=G==null?void 0:G.get(se||""))==null?void 0:Qe.coin_type)||"").full_address)return;n(Y?`/liquidity?tab=${P}&from=${T==null?void 0:T.coin_type}&to=${($==null?void 0:$.coin_type)||((Ye=G==null?void 0:G.get(ce||""))==null?void 0:Ye.coin_type)}`:`/liquidity?tab=${P}&from=${($==null?void 0:$.coin_type)||((Fe=G==null?void 0:G.get(ce||""))==null?void 0:Fe.coin_type)}&to=${T==null?void 0:T.coin_type}`),J(null),Q("")}else n(Y?`/liquidity?tab=${P}&from=${T==null?void 0:T.coin_type}`:`/liquidity?tab=${P}&to=${T==null?void 0:T.coin_type}`),J(null),Q("")},[p,o,r]),C=S.useCallback(async(T,z)=>{const $=await re(T||"");return{value:z||(T?$:void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:D,tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!z&&xe}},[D,xe]);return{currentTab:r,setCurrentTab:u,tabList:d,favoriteStyle:q,onChangeFavorites:N,selectedTokenA:p,selectedTokenB:o,setSelectedTokenA:a,setSelectedTokenB:y,onConfirm:U,feeTier:g,setFeeTier:x,refreshMarketPrice:K,onJump2Swap:_,handleSelectToken:Z,getSelectTokenProps:C}}function Yi(){const{currentAccount:t}=yt(),{apiPoolInfo:s,resetLiquidity:i,setManualRefresh:n,setCurrentPriceData:g}=ee(),{feeTierList:x,currentFeeTier:d,rangeTabList:j,getList:r,quoteWhiteTokenList:u,warningTokenList:p}=Ki(),{poolAddress:a}=ye(),{handleResetRange:o}=mt(),{resetAddLiquidity:y,setFromToken:k,setToToken:B}=Be(),{resetDeposit:m}=bt(),{fetchAccountBalance:h}=Ts(),{getContractPoolInfo:b}=ws(),{getCurrentPrice:f}=_s(),{currentTab:l,setCurrentTab:c,tabList:w,favoriteStyle:A,onChangeFavorites:v,selectedTokenA:_,selectedTokenB:R,setSelectedTokenA:F,setSelectedTokenB:N,onConfirm:q,setFeeTier:U,refreshMarketPrice:K,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}=Qi({apiPoolInfo:s});S.useEffect(()=>{ue(s)&&(k(s==null?void 0:s.displayTokenA),B(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const D=async()=>{if(a&&s&&a===(s==null?void 0:s.poolAddress)){const C=await b(a);C&&f(C==null?void 0:C.current_sqrt_price,s)}},Q=()=>{K==null||K(),D==null||D()},Z=async C=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),C&&n(!0),a&&a!=="undefined"&&await r({poolAddress:a}),t!=null&&t.address&&await h(),Q(),n(!1)};return S.useEffect(()=>(t!=null&&t.address&&h(),g({}),()=>{o(),y(),i(),m()}),[]),S.useEffect(()=>{a&&(s==null?void 0:s.poolAddress)!==a&&(o(),y(),i(),m()),a&&a===(s==null?void 0:s.poolAddress)&&D()},[a,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:d,rangeTabList:j,quoteWhiteTokenList:u,warningTokenList:p,currentTab:l,setCurrentTab:c,tabList:w,favoriteStyle:A,onChangeFavorites:v,selectedTokenA:_,selectedTokenB:R,setSelectedTokenA:F,setSelectedTokenB:N,onConfirm:q,setFeeTier:U,handleRefresh:Z,handleGetPrice:D,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}}function Sc(){const t=Ze(),{apiPoolInfo:s,apiPoolInfoLoading:i,currentPriceData:n,netError:g}=ee(),{poolAddress:x,from:d,to:j}=ye(),{feeTierList:r,currentFeeTier:u,rangeTabList:p,quoteWhiteTokenList:a,warningTokenList:o,currentTab:y,setCurrentTab:k,tabList:B,favoriteStyle:m,onChangeFavorites:h,selectedTokenA:b,selectedTokenB:f,onConfirm:l,setFeeTier:c,handleRefresh:w,handleGetPrice:A,onJump2Swap:v,handleSelectToken:_,getSelectTokenProps:R}=Yi(),{isApp:F}=Le(),{isOpen:N,onOpen:q,onClose:U}=mr(),{totalAmountUSD:K,tvlLoading:re}=Vs(),J=x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB),{tooltip:xe,xlinkHref:D,svgFill:Q,svgHover:Z}=m,[C,ie]=S.useState({}),[M,ne]=S.useState({}),T=async()=>{const z=await R(d,b),$=await R(j,f);ie(z),ne($)};return S.useEffect(()=>{T()},[d,j,b,f]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{w:"100%",mt:"20px",children:[e.jsxs(E,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(ui,{text:"Pools",onClick:()=>t("/pools")}),J&&e.jsxs(E,{gap:"8px",children:[e.jsx(at,{placement:"top",tooltip:xe,children:e.jsx(je,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:h,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:Z}}},children:e.jsx(Ce,{xlinkHref:D,svgFill:Q,svgHover:Z,fontSize:"18px"})})}),e.jsx(at,{placement:"top",tooltip:"Trade",children:e.jsx(je,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:v,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(at,{placement:"top",tooltip:"Refresh",children:e.jsx(te,{children:e.jsx(xi,{handleRefresh:w,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(E,{gap:"12px",children:[e.jsx(Pt,{onChange:z=>{_(z,b,f,d,j,!0)},...C}),e.jsx(Pt,{onChange:z=>{_(z,f,b,j,d,!1)},...M})]}),e.jsx(ni,{value:u,loading:!u&&i,feeTierList:r,disabled:g,onChange:z=>{z!=null&&z.poolAddress?t(`/liquidity?poolAddress=${z==null?void 0:z.poolAddress}`):(c(z),q())}})]}),J&&e.jsx(Ti,{apiPoolInfo:s,totalTvl:K,apiPoolInfoLoading:i,tvlLoading:re})]}),J?e.jsxs(e.Fragment,{children:[e.jsxs(be,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(Me,{type:"borderTab",tabList:B,currentTab:y,handleChangeTab:z=>{const $=Object.keys(pt).find(se=>pt[se]===z.label);x&&t(`/liquidity?tab=${$}&poolAddress=${x}`),k($)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:F?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:F?"14px":"16px",fontWeight:"500"}}),y==="deposit"&&!F&&e.jsx(te,{mt:"24px",children:e.jsx(gs,{})}),y!=="deposit"&&s&&e.jsxs(be,{w:F?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(L,{children:"Current Price"}),e.jsx(oi,{noCenter:!!F,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:ct(s!=null&&s.isReverse?n==null?void 0:n.reverseCurrentPrice:n==null?void 0:n.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:F?{w:"100%"}:{}})]})]}),e.jsx(te,{h:{base:"20px",lg:"8px"}}),y==="deposit"&&e.jsx(Vi,{rangeTabList:p,getList:w,getPrice:A,currentFeeTier:u}),y==="positions"&&e.jsx(Li,{}),y==="analytics"&&e.jsx(Ri,{})]}):e.jsx(te,{mt:"20px",children:!s&&i?e.jsx(gt,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Rt,{})}):e.jsx(De,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(W,{children:b&&f?Ee(b,a)||Ee(f,a)?e.jsxs(e.Fragment,{children:[e.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(L,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(je,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{U(),l()},children:"Initialized Pool"})]}):e.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(pi,{tokensInfo:o,waringModalCancel:z=>{t("/pools")}}),e.jsx(Jr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:N,onClose:U,onConfirm:l})]})}export{Sc as default};
//# sourceMappingURL=Liquidity-C4JMOWRA.js.map
