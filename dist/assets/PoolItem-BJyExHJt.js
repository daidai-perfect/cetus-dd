import{j as e,H as r,T as i,ar as Se,a as _,f as J,P as Me,h as Ye,C as Ve,I as Ue,k as qe,m as $e,n as Ge,V as S,v as M,S as Ee,u as ee,X as xs,Y as ds,Z as cs,$ as ps,a8 as gs,a0 as us,a1 as hs,O as js,a7 as Ke,ab as bs}from"./vendor-DXHkIl66.js";import{a as ys}from"./useFavoritePool-DE7_4UZt.js";import{a as re,B as N,I as $,G as ke,O as z,v as Q,j as oe,n as Ce,m as ve,d as T,aK as le}from"./index-1pql7esm.js";import{C as Re}from"./CheckBox-C4jUOy1k.js";import{R as We}from"./RefreshButton-BHZks4q0.js";import{S as ms}from"./SearchInputBlock-CxfIwtLG.js";import{u as ws,a as Ze,P as _s}from"./PositionCurrentPrice-A2W_iwn3.js";import{a as O,d as Ss,u as ks}from"./usePositionList-BulHo-5f.js";import{u as fs}from"./activeOrders-DLCin0Mb.js";import{u as Cs}from"./useTransaction-HT-BOlou.js";import{N as fe}from"./NoData-CqJO7NcS.js";import{u as vs}from"./useAccountBalance-C2Raiu99.js";import{S as I}from"./SingleTokenInfo-CIUspzmb.js";import{P as Xe}from"./CoinPairInfo-18SnxIQd.js";import{L as Rs}from"./PriceRange-C09QLmLc.js";import{a as Ts}from"./PositionListLoading-pe9FaJCF.js";function Xs({handleIsWatchList:s=()=>{},handleIsDisplayChecked:c=()=>{},onClickIncentiveTypes:g,handleRefresh:b,selectCoinList:u,onClickSelectCoinList:d,onDeleteSelectCoinList:p,isPools:C=!0,isProfile:o=!1,isRefreshed:m}){const{isWatchList:w,isAllPools:f,isIncentivizedOnly:k}=ys(),{isApp:a,windowWidth:n}=re();return e.jsxs(r,{w:o?"unset":"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(r,{w:{base:"100%",lg:C||o?"unset":"100%"},justify:"space-between",sx:{">button":{">div":{h:o?"32px":"40px",borderRadius:o?"8px":"12px"}}},children:[e.jsx(ms,{selectCoinList:u,onClickSelectCoinList:d,onDeleteSelectCoinList:p}),!o&&(a||!C)&&e.jsx(We,{handleRefresh:b,isRefreshed:C?m:void 0})]}),C&&e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(N,{w:{base:n<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:n<=350?e.jsx(r,{h:"38px",justify:"center",align:"center",children:e.jsx($,{xlinkHref:"#icon-icon_star",svgFill:w?"primary":"text_paragraph"})}):e.jsxs(r,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(Re,{checked:w,onClick:()=>{}}),e.jsx(i,{color:w?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx(N,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:a?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",gap:a?"4px":"8px",children:[e.jsx(i,{color:k?"text_caption":"text_paragraph",children:a?"Incentivized":"Incentivized Only"}),e.jsx(Se,{isChecked:k,onChange:g})]})}),e.jsx(N,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:a?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",children:[e.jsxs(i,{color:f?"text_caption":"text_paragraph",children:[" ",a?"All":"All pools"]}),e.jsx(Se,{isChecked:f,onChange:c})]})})]}),!o&&!a&&e.jsx(We,{handleRefresh:b,isRefreshed:m})]})]})}const As=({posInfo:s})=>{var p,C,o,m,w,f,k,a;const[c,g]=_.useState(!1),{posApiPoolData:b}=O(),u=(p=b[s==null?void 0:s.clmmPool])==null?void 0:p.haveMining,d=(C=b[s==null?void 0:s.clmmPool])==null?void 0:C.haveFarming;return e.jsx(J,{p:"12px 0",onClick:n=>ke(n),onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:e.jsxs(Me,{isLazy:!0,isOpen:c,children:[e.jsx(Ye,{children:e.jsxs(Ve,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:[u&&e.jsx(Ue,{w:"14px",h:"14px",src:"/images/icon_mining.png",mr:"4px"}),d&&e.jsx(Ue,{w:"14px",h:"14px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(i,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:z(s==null?void 0:s.totalRewardUsd,2)})]})}),c&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(qe,{children:e.jsx($e,{zIndex:"2",w:"fit-content",children:e.jsx(Ge,{children:e.jsxs(S,{align:"flex-start",minW:"300px",children:[((o=s==null?void 0:s.pendingFeesList)==null?void 0:o.length)>0&&e.jsxs(S,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(i,{fontSize:"12px",children:"Fees"}),e.jsxs(i,{color:"primary",children:[" ",z(s==null?void 0:s.feeOwedUsd,2)]})]}),(m=s==null?void 0:s.pendingFeesList)==null?void 0:m.map(n=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",n),e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(I,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(S,{align:"flex-end",gap:"4px",children:[e.jsx(i,{fontSize:"12px",color:"text_caption",children:Q(n==null?void 0:n.amount,6)}),e.jsx(i,{fontSize:"12px",children:z(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address)))]}),((w=s==null?void 0:s.pendingRewarderList)==null?void 0:w.length)>0&&e.jsxs(S,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(i,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(i,{color:"primary",children:[" ",z(s==null?void 0:s.rewarderUsd,2)]})]}),(f=s==null?void 0:s.pendingRewarderList)==null?void 0:f.map(n=>e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(I,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(S,{align:"flex-end",gap:"4px",children:[e.jsx(i,{fontSize:"12px",color:"text_caption",children:Q(n==null?void 0:n.amount,6)}),e.jsx(i,{fontSize:"12px",children:z(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address))]}),((k=s==null?void 0:s.pendingFarmsList)==null?void 0:k.length)>0&&e.jsxs(S,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(i,{fontSize:"12px",children:"Farming rewards"}),e.jsxs(i,{color:"primary",children:[" ",z(s==null?void 0:s.farmsUsd,2)]})]}),(a=s==null?void 0:s.pendingFarmsList)==null?void 0:a.map(n=>{var A;return e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(I,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(S,{align:"flex-end",gap:"4px",children:[e.jsx(i,{fontSize:"12px",color:"text_caption",children:Q(n==null?void 0:n.amount,6)}),e.jsx(i,{fontSize:"12px",children:z(n==null?void 0:n.amountUSD,2)})]})]},(A=n==null?void 0:n.token)==null?void 0:A.coin_type)})]})]})})})})]})})};function Je({posInfo:s,onClickCheckBox:c,checked:g,pageFrom:b,cursor:u="pointer"}){var w;const{getClmmPosName:d}=Ss(),{posPoolsOriginalData:p}=O(),C=_.useMemo(()=>{var f;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const k=(f=p==null?void 0:p[s==null?void 0:s.clmmPool])==null?void 0:f.index;return d(s==null?void 0:s.index,k)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,p]),{posPoolsRelatedData:o}=O(),m=((w=o[s==null?void 0:s.posId])==null?void 0:w.displayFee)+"%";return e.jsxs(N,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(S,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Xe,{poolInfo:{...s,feeDisplay:m},symbolEllipsesDecimals:10}),e.jsx(i,{fontSize:"12px",color:"primary_gray",children:C})]}),c&&e.jsx(Re,{cursor:u,checked:g||!1,onClick:()=>c(s)})]}),b=="pendingYieldModal"?e.jsxs(r,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(i,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(As,{posInfo:s})]}):e.jsxs(r,{justify:"space-between",p:"0 16px",children:[e.jsx(i,{color:"primary_gray",children:"Liquidity"}),e.jsx(Rs,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:b!="lpBurnNext"})]})]})}function Js({onClose:s,onClickLock:c,currentLockItem:g,onClickCheckBox:b}){const{currentAccount:u,onWalletModal:d}=oe(),{fullRangePosBaseList:p,fullRangePosBaseListLoading:C}=O();return e.jsxs(S,{w:"100%",gap:"20px",children:[e.jsxs(S,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(i,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(i,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(i,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(S,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:u!=null&&u.address?C?[{},{}].map((o,m)=>e.jsx(Qe,{},m)):(p==null?void 0:p.length)>0?p==null?void 0:p.map(o=>e.jsx(Je,{posInfo:o,checked:(o==null?void 0:o.posId)==(g==null?void 0:g.posId),onClickCheckBox:m=>b(m),pageFrom:"lpBurnPrev"},o==null?void 0:o.posId)):e.jsxs(N,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(fe,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(i,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(fe,{type:"nowallet",onboard:()=>d(!0),bg:"none",border:"none"})}),e.jsxs(S,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(M,{disabled:Object.values(g).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:c,children:"Lock Liquidity"}),e.jsx(M,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Qe=()=>e.jsxs(N,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(r,{gap:"0",children:[e.jsx(Ee,{size:"9"}),e.jsx(Ee,{size:"9"}),e.jsx(S,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(ee,{height:"4",width:"100px"})})]})}),e.jsx(J,{w:"100%",p:"16px",children:e.jsx(ee,{height:"5",width:"250px"})})]}),zs="/assets/tvl_bg-D80TUrdU.png",Ps="/assets/yield_bg-CcCC1tTK.png";function Ls(){const{isAutoRefresh:s}=fs(),{currentAccount:c}=oe(),{posBaseList:g,posLiquidityData:b,posBaseListLoading:u,posLiquidityDataLoading:d}=O(),{getTokenAmountValue:p}=Ce(),{coinPriceObj:C}=ve(),o=_.useMemo(()=>{let f=0,k=0;if(s||!u&&!d)return(g==null?void 0:g.length)>0&&(c!=null&&c.address)?(g.forEach(a=>{var P,U;const n=b[a==null?void 0:a.posId],A=p((P=a==null?void 0:a.displayTokenA)==null?void 0:P.coin_type,n==null?void 0:n.displayCoinAmountA),se=p((U=a==null?void 0:a.displayTokenB)==null?void 0:U.coin_type,n==null?void 0:n.displayCoinAmountB);f=T(f).plus(A).plus(se).toString(),k=T(k).plus((n==null?void 0:n.displayCoinAmountA)||0).plus((n==null?void 0:n.displayCoinAmountB)||0).toString()}),console.log("ðŸš€ ~ clmmTotalTvl ~ total:",k,f),T(f).lte(0)&&T(k).gt(0)?"--":f):"0"},[s,g,u,b,d,c==null?void 0:c.address,C]),m=_.useMemo(()=>"0",[]),w=_.useMemo(()=>o=="--"||m=="--"?"--":T(o).plus(m).toString(),[o,m]);return{clmmTotalTvl:o,vaultTotalTvl:m,liquidityTotalTvl:w}}function Bs({isOpen:s,claimLoading:c,onClose:g,changeClaimLoading:b}){const[u,d]=_.useState(!1),{coinPriceObj:p}=ve(),{getPosRelatedData:C,getPositionBaseList:o}=ks(),{signAndExecuteTransaction:m}=Cs(),{currentAccount:w}=oe(),{getBatchHarvestFeeAndRewardsTxPayload:f}=ws(),{getTokenAmountValue:k}=Ce(),[a,n]=_.useState([]),[A,se]=_.useState(!0),[P,U]=_.useState(!0),[E,W]=_.useState(.01),[G,xe]=_.useState([]),[R,H]=_.useState([]),[ne,B]=_.useState(""),[de,Te]=_.useState(""),[Y,Ae]=_.useState([]),{myPosYieldValue:Ie,posBaseList:K,posBaseListLoading:ce,posFeeDataLoading:pe,posRewardsDataLoading:ge,farmsPosRewardsDataLoading:ue,posFeeData:te,posRewardsData:ae,farmsPosRewardsData:ie}=O(),es=t=>{const j=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(j,"$1"),W(t.target.value)},ss=()=>{(!E||E<.01)&&W(.01)},ns=ce||pe||ge||ue;_.useEffect(()=>{const t=[];let j="0";const y=[];if((K==null?void 0:K.length)>0&&!ce&&!pe&&!ge&&!ue){K.forEach((x,ze)=>{var Pe,Le,Be,Ne,Fe,Oe,He;let he="0",je="0",be="0",Z="0",V="0",q="0";const ye=[],me=[],we=[];if(((Pe=Object.values(te))==null?void 0:Pe.length)>0){const h=te[x==null?void 0:x.posId],l=k((Le=x==null?void 0:x.displayTokenA)==null?void 0:Le.coin_type,h==null?void 0:h.displayFeeOwedA,"--"),F=k((Be=x==null?void 0:x.displayTokenB)==null?void 0:Be.coin_type,h==null?void 0:h.displayFeeOwedB,"--");he=T(he).plus((h==null?void 0:h.displayFeeOwedA)||0).plus((h==null?void 0:h.displayFeeOwedB)||0).toString(),l!=="--"&&F!=="--"&&(Z=T(l).plus(F).toString()),me.push({coin_address:le((Ne=x==null?void 0:x.displayTokenA)==null?void 0:Ne.coin_type,!1),amount:h==null?void 0:h.displayFeeOwedA,amountUSD:l,token:x==null?void 0:x.displayTokenA},{coin_address:le((Fe=x==null?void 0:x.displayTokenB)==null?void 0:Fe.coin_type,!1),amount:h==null?void 0:h.displayFeeOwedB,amountUSD:F,token:x==null?void 0:x.displayTokenB})}if(((Oe=Object.values(ae))==null?void 0:Oe.length)>0){const h=ae[x==null?void 0:x.posId];(h==null?void 0:h.length)>0&&h.forEach(l=>{var F;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",l),je=T(je).plus(l.display_amount_owed||0).toString(),Number(l==null?void 0:l.display_amount_owed)>0){const D=k(l==null?void 0:l.token.coin_type,l.display_amount_owed);D!=="--"&&(V=T(V).plus(D).toString()),ye.push({coin_address:le((F=l==null?void 0:l.token)==null?void 0:F.coin_type,!1),amount:l.display_amount_owed,amountUSD:D,token:l==null?void 0:l.token})}})}if(((He=Object.values(ie))==null?void 0:He.length)>0){const h=ie[x==null?void 0:x.id];(h==null?void 0:h.length)>0&&h.forEach(l=>{var F;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",l),be=T(be).plus(l.display_amount_owed||0).toString(),Number(l==null?void 0:l.display_amount_owed)>0){const D=k(l==null?void 0:l.token.coin_type,l.display_amount_owed);D!=="--"&&(q=T(q).plus(D).toString()),we.push({coin_address:le((F=l==null?void 0:l.token)==null?void 0:F.coin_type,!1),amount:l.display_amount_owed,amountUSD:D,token:l==null?void 0:l.token})}})}const _e=T(V).plus(Z).plus(q).toString(),X=(T(he).gt(0)||T(je).gt(0)||T(be).gt(0))&&Number(_e)==0?"--":_e;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",_e,X),j=T(j).plus(V).plus(Z).plus(q).toString(),Number(X)!==0&&y.push(x),P&&Number(X)>Number(E)&&t.push({...x,totalRewardUsd:X,pendingRewarderList:ye,pendingFeesList:me,pendingFarmsList:we,rewarderUsd:V,feeOwedUsd:Z,farmsUsd:q}),P||t.push({...x,totalRewardUsd:X,pendingRewarderList:ye,pendingFeesList:me,pendingFarmsList:we,rewarderUsd:V,feeOwedUsd:Z,farmsUsd:q})}),xe(y);const v=t.filter(x=>Number(x.totalRewardUsd)!==0);H(v),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",v,R),P?(v==null?void 0:v.length)!==t.length?B(""):B("all"):(v==null?void 0:v.length)!==y.length?B(""):B("all");const L=t.sort((x,ze)=>ze.totalRewardUsd-x.totalRewardUsd);n(L),se(!1)}},[E,K,P,ce,pe,ge,ue,p]);const{calculatePendingYield:ts}=Ze();_.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",R),(R==null?void 0:R.length)>0){const{total:t,rewardAndFeeList:j}=ts(R,te,ae,ie);console.log("ðŸš€ ~ useEffect ~ total:",R,t,j),Te(t),Ae(j)}else Te(""),Ae([])},[R==null?void 0:R.length,te,ae,ie]);const as=t=>{if(console.log("ðŸš€ ~ selectItem ~ item:",t),Number(t==null?void 0:t.totalRewardUsd)<=0)return;const j=R,y=(j==null?void 0:j.filter(v=>(v==null?void 0:v.posId)!==(t==null?void 0:t.posId)))||[];j!=null&&j.some(v=>(v==null?void 0:v.posId)===(t==null?void 0:t.posId))||y.push(t),console.log("ðŸš€ ~ selectItem ~ updatedList:",y),H(y),P?(y==null?void 0:y.length)!==(a==null?void 0:a.length)?B(""):B("all"):(y==null?void 0:y.length)!==(G==null?void 0:G.length)?B(""):B("all")};_.useEffect(()=>{W(.01),d(!1),U(!0)},[s]);const is=()=>{if(ne=="all")B(""),H([]);else{B("all");const t=R,j=Object.fromEntries(R.map(y=>[y==null?void 0:y.posId,y]));a.forEach(y=>{!j[y==null?void 0:y.posId]&&Number(y.totalRewardUsd)!==0&&t.push(y)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",j,t),H(t)}},{fetchAccountBalance:ls}=vs(),rs=async()=>{b(!0);try{const t=Object.fromEntries(R.map(L=>[L==null?void 0:L.posId,L==null?void 0:L.pendingRewarderList])),{tx:j,txb:y}=await f(R,t,w==null?void 0:w.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",j);const v=await m(y,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});if(console.log("ðŸš€ ~ toClaimYield ~ res:",v),v){ls();const L=await o(w==null?void 0:w.address);C(L)}b(!1)}catch(t){b(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",t)}finally{g()}},{isApp:os}=re();return e.jsxs(xs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:g,isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(cs,{minWidth:os?"300px":"446px",children:[e.jsx(ps,{children:e.jsx(gs,{fontWeight:"500",fontSize:"16px",children:u?"Claim Yield":"Details"})}),e.jsx(us,{}),e.jsx(hs,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(J,{children:[e.jsxs(S,{w:"100%",children:[e.jsx(J,{w:"100%",p:"0 16px",children:e.jsx(S,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(ee,{isLoaded:!ns,children:e.jsxs(S,{gap:"4px",align:"center",children:[e.jsx(i,{color:"primary_gray",children:u?"Total Claim":"Pending Yield"}),e.jsx(i,{color:"primary",fontSize:"20px",fontWeight:"500",children:z(u?de:Ie,2)})]})})})}),!u&&e.jsxs(r,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(i,{color:"text_caption",children:"Position"}),e.jsxs(r,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(Se,{isChecked:P,onChange:()=>U(!P)}),e.jsx(i,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(N,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(js,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${E}`,onChange:es,onBlur:ss})})]})]}),e.jsx(S,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(a==null?void 0:a.length)>2?"16px":"20px",mr:"-4px",children:u?Y==null?void 0:Y.map(t=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",t),e.jsx(N,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(r,{w:"100%",justify:"space-between",children:[e.jsx(I,{token:t==null?void 0:t.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(S,{align:"flex-end",gap:"4px",children:[e.jsx(i,{color:"text_caption",children:Q(t==null?void 0:t.amount,6)}),e.jsxs(i,{children:["(",z(t==null?void 0:t.amountUSD,2),")"]})]})]})},t==null?void 0:t.coin_address))):(a==null?void 0:a.length)>0?a==null?void 0:a.map(t=>e.jsx(Je,{posInfo:t,onClickCheckBox:j=>as(j),pageFrom:"pendingYieldModal",cursor:Number(t==null?void 0:t.totalRewardUsd)<=0?"not-allowed":"pointer",checked:R.some(j=>(j==null?void 0:j.posId)===(t==null?void 0:t.posId))},t==null?void 0:t.posId)):A?[{},{}].map((t,j)=>e.jsx(Qe,{},j)):e.jsx(fe,{type:"nodata"})}),u?e.jsx(r,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(N,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>d(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(r,{justify:"center",gap:"4px",children:[e.jsx($,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(i,{children:"Back"})]})})}):e.jsx(J,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(r,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(S,{gap:"4px",align:"flex-start",children:[e.jsx(i,{color:"primary_gray",children:"Amount selected"}),e.jsx(i,{color:"primary",fontSize:"18px",fontWeight:"500",children:z(de,2)})]}),e.jsxs(r,{children:[e.jsx(i,{color:"text_caption",children:"Select All"}),e.jsx(Re,{checked:ne=="all",onClick:is})]})]})})]}),u?e.jsx(M,{isLoading:c,disabled:(Y==null?void 0:Y.length)==0||c,w:"100%",h:"52px",fontWeight:"500",onClick:rs,children:"Confirm"}):e.jsx(M,{disabled:Number(de)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>d(!0),children:"Claim Yield"})]})})]})]})}const De=({yieldList:s})=>{const[c,g]=_.useState(!1),{myPosYieldValue:b}=O(),{isApp:u}=re();return e.jsx(S,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:u?()=>g(!c):()=>g(!1),onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:e.jsxs(Me,{isLazy:!0,isOpen:c,placement:"bottom-end",children:[e.jsx(Ye,{children:e.jsx(Ve,{as:"button",children:e.jsx(i,{cursor:Number(b)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(b)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:z(b,2)})})}),c&&Number(b)>0&&(s==null?void 0:s.length)>0&&e.jsx(qe,{children:e.jsx($e,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(Ge,{p:"0px",children:e.jsx(S,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(d=>{var p;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",d),e.jsxs(r,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(I,{token:d==null?void 0:d.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{gap:"4px",children:[e.jsx(i,{fontSize:"12px",color:"text_caption",children:Q(d==null?void 0:d.amount,6)}),e.jsxs(i,{fontSize:"12px",children:["(",z(d==null?void 0:d.amountUSD,2),")"]})]})]},(p=d==null?void 0:d.token)==null?void 0:p.coin_type)})})})})})]})})};function Qs(){const{currentAccount:s}=oe(),[c,g]=_.useState(!1),[b,u]=_.useState(!1),[d,p]=_.useState([]);Ce();const{coinPriceObj:C}=ve(),{myPosYieldValue:o,setMyPosYieldValue:m,posFeeDataLoading:w,posRewardsDataLoading:f,farmsPosRewardsDataLoading:k,posBaseList:a,posLiquidityData:n,posBaseListLoading:A,posLiquidityDataLoading:se,posFeeData:P,posRewardsData:U,farmsPosRewardsData:E}=O(),{clmmTotalTvl:W}=Ls();s!=null&&s.address;const{calculatePendingYield:G}=Ze();_.useEffect(()=>{if(!(s!=null&&s.address))m(""),p([]);else if(!A&&(a==null?void 0:a.length)<=0&&(m("0"),p([])),(a==null?void 0:a.length)>0&&(s!=null&&s.address)&&!A&&!w&&!f&&!k){const{total:H,rewardAndFeeList:ne}=G(a,P,U,E);m(H),p(ne)}},[a,A,w,f,k,s,C]);const xe=s!=null&&s.address?!o:!1,{isApp:R}=re();return e.jsxs(Ke,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(r,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:zs,backgroundSize:"100% 100%",children:[e.jsx(i,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(ee,{isLoaded:!!W,children:e.jsx(i,{fontSize:"20px",color:"primary",children:"$"+W=="--"?"--":z(W,2)})})]}),e.jsxs(r,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Ps,backgroundSize:"100% 100%",children:[e.jsx(i,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(ee,{isLoaded:!xe,children:R?e.jsxs(r,{gap:"20px",children:[e.jsxs(S,{align:"flex-end",children:[e.jsx(De,{yieldList:d}),e.jsx(M,{isLoading:c,disabled:Number(o)<=0||c,w:"100px",h:"24px",onClick:()=>u(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(o)>0&&e.jsx($,{xlinkHref:"#icon-icon_spread",onClick:()=>u(!0)})]}):e.jsxs(r,{onClick:()=>u(!0),children:[e.jsx(De,{yieldList:d}),Number(o)>0&&e.jsx($,{xlinkHref:"#icon-icon_spread"}),e.jsx(M,{isLoading:c,disabled:Number(o)<=0||c,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(Bs,{isOpen:b,claimLoading:c,onClose:()=>u(!1),changeClaimLoading:H=>g(H)})]})}function Is({poolInfo:s}){var o,m,w,f,k,a;const c=bs(),{posPoolsRelatedData:g,posApiPoolData:b}=O(),u=(o=b[s==null?void 0:s.clmmPoolAddress])==null?void 0:o.haveFarming,d=(((w=g[(m=s==null?void 0:s.list[0])==null?void 0:m.posId])==null?void 0:w.displayFee)||"--")+"%",[p,C]=_.useState(!0);return e.jsxs(S,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(Ke,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>C(!p),children:[e.jsx(Xe,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:d,...s},haveName:!0}),e.jsxs(r,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(i,{color:"primary_gray",children:"Current Price"}),e.jsx(_s,{symbolEllipsesDecimals:10,posId:(f=s==null?void 0:s.list[0])==null?void 0:f.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),u&&e.jsxs(r,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:n=>{ke(n),c("/farms")},border:"1px solid",borderColor:"transparent",cursor:"pointer",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(i,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx($,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx(M,{onClick:n=>{ke(n),c(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(N,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(r,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(i,{fontSize:"12px",color:"primary",children:[(k=s==null?void 0:s.list)==null?void 0:k.length," ",((a=s==null?void 0:s.list)==null?void 0:a.length)>1?"Positions":"Position"]}),e.jsx($,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:p?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),p&&e.jsx(S,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((n,A)=>e.jsx(Ts,{positionInfo:n},A))})]})}export{Js as L,Je as M,Xs as P,Qs as a,Is as b,Ls as u};
//# sourceMappingURL=PoolItem-BJyExHJt.js.map
