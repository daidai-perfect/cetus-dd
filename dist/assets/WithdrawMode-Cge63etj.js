import{a,j as l,f as se,v as ae,V as P,T as k}from"./vendor-_1sPVx0S.js";import{d as le,v as _,k as re,i as ie,j as ne}from"./VaultsAprBlock-BxZ39L3w.js";import{k as me,d as U,j as de,G as ue,H as ce}from"./index-DZworFuu.js";import{H as Z}from"./HTextLabelBox-DBHn66eq.js";import{u as he}from"./useAccountBalance-Bqky3zOE.js";import{T as xe}from"./TradeInputGroup-BU_bV5JV.js";import"./swapWidget-BCFJQoyC.js";import"./useWrapPoolData-CDrg47b6.js";import"./useFavoritePool-C-y3K2CF.js";import"./useGetPoolList-CsB88aY2.js";import"./useToken-BWHB2fhl.js";import"./useTokenBalance-Bm-sJqFs.js";import"./useTransaction-DopuwF40.js";import"./useSigner-CskzV9L0.js";import"./global-CG4XJcf0.js";import"./msafe-oYBkW7LJ.js";import"./index-B0fjcXro.js";import"./v4-C6aID195.js";import"./useFindBestRouting-Lj4RLbMT.js";import"./useSwapHelper-5Q8nfW7L.js";import"./_getAllKeysIn-BnIExAEt.js";function Ze(D){const{isUnstableVault:A,displayTokenA:r,displayTokenB:i,vaultId:n,isReverse:s,assetAction:c,isCheckedZAP:g,currentActionTab:fe,apiVaultInfo:e}=D,N=_.useVaultsRemove(A),q=_.useAddButtonStatus(A),J=_.useGetContractVaultInfo(A),{getApiVaultInfo:K}=le(n),{currentAccount:o,isOpenWalletModal:be,onWalletModal:Q}=me(),{fetchAccountBalance:T}=he(),{contractVault:f,lpTokenInfo:t,balanceInfo:ge,fetchClmmPoolFromContract:B,fetchVaultInfoFromContract:M,holdCoinAmounts:y,fromTokenLock:pe,toTokenLock:ve,fetchVaultBalance:C,isBalanceLoading:E,holdLpAmount:X}=J(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse),R=()=>{var m;T(),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:57 ~ autoRefresh ~ apiVaultInfo:",e),(e==null?void 0:e.category)=="haedal"&&C(o==null?void 0:o.address,n,(m=e==null?void 0:e.tokenA)==null?void 0:m.decimals),e&&B(e.clmmPoolAddress,!0),n&&(M(n,!0),K(n,!0)),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:68 ~ autoRefresh ~ autoRefresh:",R)};console.log("ðŸš€ðŸš€ðŸš€ ~ WithdrawMode.tsx:69 ~ VaultWithdrawMode ~ holdCoinAmounts:",y);const{contractClmmPoolObj:p}=re();a.useMemo(()=>{if(p&&p[e==null?void 0:e.clmmPoolAddress])return p[e==null?void 0:e.clmmPoolAddress]},[e==null?void 0:e.clmmPoolAddress,p]);const{amountInputA:W,amountInputB:F,availableAmountA:h,availableAmountB:x,amountValueA:Y,amountValueB:V,preCalculateLoading:d,fixAmountA:b,inputTotalValue:v,handleAmountInputChange:H,calculateResult:u,showOnlySideTips:z,doRemoveAction:I,removePercent:Ae,isPercentInput:w,reCalculateResult:G,calculateAvailableLoading:O}=N(c,R,y,X,n,s?i:r,s?r:i,s,g,p),S=a.useMemo(()=>v&&g?U(v).gt(0)&&U(v).lt(1e-4):!1,[g,v]),{btnText:ee,btnDisabled:te}=q(g,c,!1,W,F,s?!b:b,h,x,r,i,"",u,S);ie(u==null?void 0:u.burn_ft_amount,A?f==null?void 0:f.lp_token_treasury:f==null?void 0:f.total_supply);const{amountLimit:$}=ne(0,u==null?void 0:u.burn_ft_amount,!1);a.useMemo(()=>s?x:h,[x,h,s]),a.useMemo(()=>s?h:x,[h,x,s]),a.useMemo(()=>d?w?!0:s?b:!b:!1,[d,w]),a.useMemo(()=>d?w?!0:s?!b:b:!1,[d,w]),a.useEffect(()=>{G()},[e==null?void 0:e.vaultsId]),a.useEffect(()=>{e&&(e!=null&&e.clmmPoolAddress)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:170 ~ useEffect ~ apiVaultInfo:",e),B(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),a.useEffect(()=>{n&&M(n)},[n]),a.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ lpTokenInfo:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ apiVaultInfo:",e),o!=null&&o.address&&(e!=null&&e.vaultsId)&&(t!=null&&t.decimals)&&(e!=null&&e.isUnstableVault)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:189 ~ useEffect ~ fetchVaultBalance:",C),C(o==null?void 0:o.address,e.vaultsId,t==null?void 0:t.decimals))},[o==null?void 0:o.address,e==null?void 0:e.vaultsId,t==null?void 0:t.decimals]),a.useEffect(()=>{G()},[h,x]);const oe=a.useMemo(()=>de(ue($||"0",t==null?void 0:t.decimals),t==null?void 0:t.decimals),[$,t]);return l.jsxs(l.Fragment,{children:[l.jsx(se,{w:"100%",position:"relative",children:l.jsx(xe,{onClick:()=>{},from:{wrapStyle:{h:"108px"},balance:h||"",value:W,amountValue:Y,loading:!1,calculateAvailableLoading:E||O,hideSelf:c!=="both"&&c!==(r==null?void 0:r.coin_type),onChange:(m,L,j)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:194 ~ VaultWithdrawMode ~ value:",m),H(m,!s,L,j)},selectable:!1,placeholder:"0.0",token:r,balanceLabel:"Available",onFocusChange:m=>{}},to:{wrapStyle:{h:"108px"},balance:x||"",value:F,amountValue:V,loading:!1,calculateAvailableLoading:E||O,onFocusChange:m=>{},onChange:(m,L,j)=>{H(m,s,L,j)},selectable:!1,hideSelf:c!=="both"&&c!==(i==null?void 0:i.coin_type),placeholder:"0.0",token:i,balanceLabel:"Available"},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})}),l.jsx(ae,{width:"100%",height:"52px",borderRadius:"12px",marginBottom:"8px",fontWeight:"500",isLoading:d,disabled:te||d,onClick:()=>o!=null&&o.address?I():Q(!0),children:ee||(g?"Zap Out":"Withdraw")}),S&&l.jsx(P,{w:"100%",alignItems:"start",mb:"8px",children:l.jsx(k,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(u||z)&&!S&&l.jsxs(P,{w:"100%",gap:"20px",pb:"20px",children:[c!=="both"&&l.jsx(k,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",children:z}),l.jsxs(P,{w:"100%",gap:"20px",children:[l.jsx(Z,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:ce(v,2),valueStyle:{fontSize:"14px"},isLoading:d}),l.jsx(Z,{label:"LP Burn Amount",value:`${oe} ${`${r==null?void 0:r.symbol} - ${i==null?void 0:i.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:d})]})]})]})}export{Ze as default};
//# sourceMappingURL=WithdrawMode-Cge63etj.js.map
