import{a as w,j as _,F as C,T as H}from"./vendor-BFGDaAdA.js";import{u as M}from"./useVaultsHoldings-DCgYhjl3.js";import{a as m,u as E,i as F,g as J,v as R}from"./VaultsAprBlock-D1GuVHob.js";import{j as D,a1 as v,n as W,G as i,Z as Y}from"./index-QNvgVKlA.js";import{u as Z}from"./useToken-DOpzZ4jY.js";function X({vaultId:T,category:f,color:g="text_caption"}){const{currentAccount:d}=D(),{vaultsPositionObj:y}=m(),a=w.useMemo(()=>{if(v(y))return y[T]},[y,T]),{holdingAmountDisplay:k}=M(a==null?void 0:a.displayAmountA,a==null?void 0:a.displayAmountB,a==null?void 0:a.displayCoinTypeA,a==null?void 0:a.displayCoinTypeB,f);return _.jsx(C,{justifyContent:"flex-end",children:_.jsx(H,{textColor:g,textAlign:"right",fontWeight:"500",children:!(d!=null&&d.address)||!v(y)?"--":k})})}function $(){const{fetchTokenPrices:T}=W(),{setVaultListLoading:f,setVaultsTokenList:g,lpTokenInfoObj:d,setLpTokenInfoObj:y,vaultsList:a,setVaultPageList:k}=E(),{getVaultPoolList:j}=F(),{fetchTokenInfo:x,getTokenListInfo:B}=Z(),{vaultsPositionObj:b}=m(),{getPythLastPrice:G}=J(),h=(t,e=a,s=!1)=>{console.log("ðŸš€ ~ filterVaultList ~ originList:",e);const{currentTab:n,isYourHoldings:r,selectCoinList:o,sortOptions:u}=t;let c=[],p=[];(o==null?void 0:o.length)>0?p=S(e,o):p=e,n==="all"?c=p:c=p.filter(N=>N.category==n);let l;return r?l=L(u,O(c)):l=L(u,c),s||(k(l),f(!1)),l},L=(t,e)=>{console.log("ðŸš€ ~ sortVaultList ~ options:",t);const{sortRule:s,sortType:n}=t;return e==null?void 0:e.sort((o,u)=>n==="apr"?s==="desc"?u.vaultsTotalApy-o.vaultsTotalApy:o.vaultsTotalApy-u.vaultsTotalApy:s==="desc"?u.vaultsTvl-o.vaultsTvl:o.vaultsTvl-u.vaultsTvl)},P=async(t,e=!0)=>{console.log("ðŸš€ ~ fetchVaultList ~ fetchVaultList:",t),e&&f(!0);const s=await j();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:59 ~ fetchVaultList ~ list:",s),A(s),V(s);const n=h(t,JSON.parse(JSON.stringify(s)));return console.log("ðŸš€ ~ fetchVaultList ~ result:",n),f(!1),k(n),s},A=async t=>{if(!t||t.length===0)return;const e=[],s=[];for(let o=0;o<t.length;o++)e.includes(t[o].displayTokenA.coin_type)||e.push(t[o].displayTokenA.coin_type),e.includes(t[o].displayTokenB.coin_type)||e.push(t[o].displayTokenB.coin_type),t[o].category=="haedal"&&!s.includes(i(t[o].displayTokenA.coin_type))&&s.push(i(t[o].displayTokenA.coin_type,!1)),t[o].category=="haedal"&&!s.includes(i(t[o].displayTokenB.coin_type))&&s.push(i(t[o].displayTokenB.coin_type,!1)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:96 ~ getVaultsTokenList ~ haedalTokenList:",s);G(s),e.length>0&&T(e);const n=await B(e),r=Array.from(n.values());g(r)},V=async t=>{var s;const e={};for(let n=0;n<t.length;n++){const r=t[n],o=r==null?void 0:r.lpTokenType;e[o]=r.category==="cetus"?(s=R[r.clmmPoolAddress])==null?void 0:s.lpToken:await x(o)}y(e)},S=(t,e)=>{var o,u,c,p;const s=(o=e[0])!=null&&o.coin_type?i((u=e[0])==null?void 0:u.coin_type):void 0,n=(c=e[1])!=null&&c.coin_type?i((p=e[1])==null?void 0:p.coin_type):void 0;return t==null?void 0:t.filter(l=>s&&n?i(l.displayTokenA.coin_type)==s&&i(l.displayTokenB.coin_type)==n||i(l.displayTokenA.coin_type)==n&&i(l.displayTokenB.coin_type)==s:s?i(l.displayTokenA.coin_type)==s||i(l.displayTokenB.coin_type)==s:l)},O=t=>t.filter(e=>{const s=b[e.vaultId];return!!(s&&Y(s.balance).gt(0))});return{getVaultsLpTokenList:V,getVaultsTokenList:A,filterVaultList:h,sortVaultList:L,fetchVaultList:P,getCurrentTabNum:t=>{let e=h(t,a,!0);return String(e&&e.length||"")}}}export{X as V,$ as u};
//# sourceMappingURL=useVaultList-a-4c-vVC.js.map
