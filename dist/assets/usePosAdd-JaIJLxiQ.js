import{u as F}from"./global-BdG6Ba89.js";import{M as f}from"./msafe-oYBkW7LJ.js";import{V as I,k as L,aI as T,aL as D,d as k,q as g}from"./index-z4pUiXVL.js";import"./vendor-DXHkIl66.js";function U(){const{clmmSdk:C}=I(),{peripherySdk:x}=L(),{slippage:_}=F(),b=t=>{console.log("ðŸš€ ~ usePosAdd ~ params:",t);const{amount:r,tokenA:s,tokenB:d,isTokenA:m,lowerTick:c,upperTick:u,curSqrtPrice:l,isReverse:p,roundUp:P}=t,S=new T(r);console.log("ðŸš€ ~ usePosAdd ~ coinAmount:",_,l,S.toString());const{coinAmountA:i,coinAmountB:n,tokenMaxA:A,tokenMaxB:y,liquidityAmount:a}=D.estLiquidityAndcoinAmountFromOneAmounts(c,u,S,m,P,k(_).toNumber(),new T(l));console.log("ðŸš€ ~ usePosAdd ~ coinAmountA:",i.toString()),console.log("ðŸš€ ~ usePosAdd ~ coinAmountB:",n.toString());const e=s.decimals,o=d.decimals;return{coinAmountAOrigin:i.toString(),coinAmountBOrigin:n.toString(),displayCoinAmountA:p?g(n.toString(),o):g(i.toString(),e),displayCoinAmountB:p?g(i.toString(),e):g(n.toString(),o),coinAmountA:g(i.toString(),e),coinAmountB:g(n.toString(),o),tokenMaxA:A.toString(),tokenMaxB:y.toString(),liquidityAmount:a.toString()}},w=async t=>{const{poolAddress:r,coinTypeA:s,coinTypeB:d,fixAmountA:m,amountA:c,amountB:u,lowerTick:l,upperTick:p,currentSqrtPrice:P,posType:S,rewarderCoinTypes:i,posIndex:n,posId:A,farmsPoolId:y}=t,a={coinTypeA:s,coinTypeB:d,amount_a:c,amount_b:u,pool_id:r,fix_amount_a:m,slippage:k(_).toNumber(),is_open:!n,tick_lower:l,tick_upper:p,collect_fee:!!n,rewarder_coin_types:i,pos_id:A||""},e={slippage:k(_).toNumber(),curSqrtPrice:new T(P)},o=await C.Position.createAddLiquidityFixTokenPayload(a,e),B={action:n?f.IncreaseLiquidity:f.OpenAndAddLiquidity,txbParams:{parameter:a,gasEstimateArg:e}};return console.log("ðŸš€ ~ getClmmCreateAddData ~ msafeParams:",B,o),{tx:o,msafeParams:B}},q=async t=>{const{poolAddress:r,coinTypeA:s,coinTypeB:d,fixAmountA:m,amountA:c,amountB:u,lowerTick:l,upperTick:p,currentSqrtPrice:P,posType:S,rewarderCoinTypes:i,posIndex:n,posId:A,farmsPoolId:y}=t;let a,e;if(A){const o={pool_id:y||"",coinTypeA:s,coinTypeB:d,position_nft_id:A,clmm_pool_id:r,amount_a:c,amount_b:u,collect_fee:!0,collect_rewarder:!1,fix_amount_a:m,clmm_rewarder_types:i};console.log("ðŸš€ ~ getFarmsCreateAddData ~ parameter:",o),a=await x.Farms.addLiquidityFixCoinPayload(o),e={action:f.FarmingIncreaseLiquidity,txbParams:o}}else{const o={pool_id:y||"",coinTypeA:s,coinTypeB:d,clmm_pool_id:r,amount_a:c,amount_b:u,fix_amount_a:m,tick_lower:l,tick_upper:p};a=await x.Farms.openPositionAddLiquidityStakePaylod(o),e={action:f.FarmingOpenAndAddLiquidity,txbParams:o}}return console.log("ðŸš€ ~ getFarmsCreateAddData ~ msafeParams:",e,a),{tx:a,msafeParams:e}};return{preAdd:b,getAddTsPayload:t=>{console.log("ðŸš€ ~ getAddTsPayload ~ params:",t);const{posType:r}=t;return r==="clmm"?w(t):q(t)},getClmmCreateAddData:w,getFarmsCreateAddData:q}}export{U as u};
//# sourceMappingURL=usePosAdd-JaIJLxiQ.js.map
