{"version":3,"file":"FreshProgressV2-Ck3raufO.js","sources":["../../../../node_modules/.pnpm/ahooks@3.8.4_react@18.3.1/node_modules/ahooks/es/utils/index.js","../../../../node_modules/.pnpm/ahooks@3.8.4_react@18.3.1/node_modules/ahooks/es/useMemoizedFn/index.js","../../../../node_modules/.pnpm/ahooks@3.8.4_react@18.3.1/node_modules/ahooks/es/useInterval/index.js","../../src/components/swap/FreshProgressV2.tsx"],"sourcesContent":["export var isObject = function (value) {\n  return value !== null && typeof value === 'object';\n};\nexport var isFunction = function (value) {\n  return typeof value === 'function';\n};\nexport var isString = function (value) {\n  return typeof value === 'string';\n};\nexport var isBoolean = function (value) {\n  return typeof value === 'boolean';\n};\nexport var isNumber = function (value) {\n  return typeof value === 'number';\n};\nexport var isUndef = function (value) {\n  return typeof value === 'undefined';\n};","import { useMemo, useRef } from 'react';\nimport { isFunction } from '../utils';\nimport isDev from '../utils/isDev';\nfunction useMemoizedFn(fn) {\n  if (isDev) {\n    if (!isFunction(fn)) {\n      console.error(\"useMemoizedFn expected parameter is a function, got \".concat(typeof fn));\n    }\n  }\n  var fnRef = useRef(fn);\n  // why not write `fnRef.current = fn`?\n  // https://github.com/alibaba/hooks/issues/728\n  fnRef.current = useMemo(function () {\n    return fn;\n  }, [fn]);\n  var memoizedFn = useRef();\n  if (!memoizedFn.current) {\n    memoizedFn.current = function () {\n      var args = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n      return fnRef.current.apply(this, args);\n    };\n  }\n  return memoizedFn.current;\n}\nexport default useMemoizedFn;","import { useCallback, useEffect, useRef } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport { isNumber } from '../utils';\nvar useInterval = function (fn, delay, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var timerCallback = useMemoizedFn(fn);\n  var timerRef = useRef(null);\n  var clear = useCallback(function () {\n    if (timerRef.current) {\n      clearInterval(timerRef.current);\n    }\n  }, []);\n  useEffect(function () {\n    if (!isNumber(delay) || delay < 0) {\n      return;\n    }\n    if (options.immediate) {\n      timerCallback();\n    }\n    timerRef.current = setInterval(timerCallback, delay);\n    return clear;\n  }, [delay, options.immediate]);\n  return clear;\n};\nexport default useInterval;","import { cancelBubble } from '@cetus/utils'\nimport {\n  Center,\n  CircularProgress,\n  CircularProgressProps,\n  HTMLChakraProps,\n  Popover,\n  PopoverBody,\n  PopoverContent,\n  PopoverTrigger\n} from '@chakra-ui/react'\nimport { useInterval } from 'ahooks'\nimport { forwardRef, useEffect, useImperativeHandle, useState } from 'react'\n\ninterface FreshProgressProps extends HTMLChakraProps<'div'> {\n  callbackInterval?: number\n  min: number\n  max: number\n  onClick: () => void\n  size?: string\n  noBg?: boolean\n  thickness?: CircularProgressProps['thickness']\n}\n\nexport interface FreshProgressRef {\n  reset: () => void\n}\n\nconst FreshProgressV2 = forwardRef<FreshProgressRef, FreshProgressProps>(\n  ({ callbackInterval = 20, min, max, onClick, size = '18px', noBg, thickness = '10px', ...rest }, ref) => {\n    const [refreshCount, setRefreshCount] = useState<number>(0)\n\n    // Expose reset method to parent via ref\n    useImperativeHandle(ref, () => ({\n      reset: () => setRefreshCount(0)\n    }))\n\n    // Interval for auto-increment\n\n    const clear = useInterval(() => {\n      setRefreshCount(prev => {\n        const newCount = prev + 1\n        if (newCount >= callbackInterval) {\n          onClick()\n          return 0 // Reset after calling onClick\n        }\n        return newCount\n      })\n    }, 1000)\n\n    useEffect(() => {\n      return () => {\n        clear()\n      }\n    }, [])\n\n    return (\n      <>\n        {noBg ? (\n          <Center\n            p=\"2px\"\n            cursor=\"pointer\"\n            onClick={e => {\n              cancelBubble(e)\n              setRefreshCount(0) // Reset on manual click\n              onClick()\n            }}\n          >\n            <CircularProgress\n              min={min}\n              max={max}\n              value={refreshCount}\n              size={size}\n              color=\"text_highlight\"\n              trackColor=\"circle_progress_track_color\"\n              thickness={thickness}\n            />\n          </Center>\n        ) : (\n          <Popover isLazy trigger=\"hover\" autoFocus={false} returnFocusOnClose={false} gutter={4}>\n            <PopoverTrigger>\n              <Center\n                w=\"28px\"\n                h=\"28px\"\n                border=\"1px solid\"\n                borderColor=\"border\"\n                borderRadius=\"8px\"\n                bg=\"bg_secondary\"\n                cursor=\"pointer\"\n                {...rest}\n                onClick={() => {\n                  setRefreshCount(0) // Reset on manual click\n                  onClick()\n                }}\n              >\n                <CircularProgress\n                  min={min}\n                  max={max}\n                  value={callbackInterval == 5 ? 0 : refreshCount}\n                  size={size}\n                  color=\"text_highlight\"\n                  trackColor=\"circle_progress_track_color\"\n                />\n              </Center>\n            </PopoverTrigger>\n            <PopoverContent>\n              <PopoverBody p=\"12px\" lineHeight=\"20px\" fontSize=\"12px\">\n                Auto refresh in {callbackInterval} seconds, you can click to update manually.\n              </PopoverBody>\n            </PopoverContent>\n          </Popover>\n        )}\n      </>\n    )\n  }\n)\n\nexport default FreshProgressV2\n"],"names":["isFunction","value","isNumber","useMemoizedFn","fn","fnRef","useRef","useMemo","memoizedFn","args","_i","useInterval","delay","options","timerCallback","timerRef","clear","useCallback","useEffect","FreshProgressV2","forwardRef","callbackInterval","min","max","onClick","size","noBg","thickness","rest","ref","refreshCount","setRefreshCount","useState","useImperativeHandle","prev","newCount","jsx","Center","e","cancelBubble","CircularProgress","jsxs","Popover","PopoverTrigger","PopoverContent","PopoverBody"],"mappings":"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","x_google_ignoreList":[0,1,2]}