import{a as h,j as t,F as we,V as P,T as b,u as Ye,H as v,f as $,I as Mt,C as Fe,aa as $e,R as O,a7 as Le,X as Ht,Y as Et,Z as $t,$ as Wt,a8 as Nt,a0 as Ut,a1 as Kt,v as We,az as ft,am as Gt,ab as Zt}from"./vendor-_1sPVx0S.js";import{S as Yt}from"./Slippage-Bya5o8Ip.js";import{h as qt,v as Re,i as yt,j as bt,V as lt,C as ct,k as Xt,d as Jt,u as Qt,f as Vt}from"./VaultsAprBlock-BxZ39L3w.js";import{d as C,ar as qe,j as k,D as Xe,as as It,a as ie,B as L,an as er,H as ee,O as Y,R as Qe,S as tr,I as rr,u as et,a7 as tt,at as rt,c as ze,C as vt,k as st,s as _e,b as sr,y as pt,G as or,W as ir}from"./index-DZworFuu.js";import{B as nr}from"./BackButton-B-V1aFoz.js";import{N as jt}from"./NoData-CxevJSkT.js";import{R as ar}from"./RefreshButton-C6wipRYR.js";import{u as lr}from"./useAccountBalance-Bqky3zOE.js";import{u as cr}from"./useInterval-DnUakcwK.js";import{H as te}from"./HTextLabelBox-DBHn66eq.js";import{V as re}from"./VTextLabelBox-DHB1LJ9o.js";import{S as pe,A as xt}from"./SingleTokenInfo-BOld9qyS.js";import{u as pr,Z as xr}from"./useDisplayTickPrice-LfrxNp3s.js";import{i as ur}from"./icon_currentprice@2x-DeObnx8l.js";import{a as dr,p as ot,b as mr,c as hr}from"./EmptyTooltip-BhJBp7Zn.js";import{X as it,Y as Me,R as St}from"./YAxis-Guk_ToQn.js";import{L as Ce,a as gr}from"./LineChart-CBYEI3FY.js";import{S as ut,a as fr,b as Je,L as Pe,c as yr,A as br,i as ke,d as vr,e as At,E as jr,h as Be,j as Sr,k as Ar,C as wr,l as fe,m as Pr,G as _r,n as Cr,o as dt,u as Tr,g as Dr,B as wt,f as Rr,T as Pt,p as _t}from"./generateCategoricalChart-CoTjeZqw.js";import{V as zr,l as Or,m as kr,n as Br}from"./useWrapPoolData-CDrg47b6.js";import{A as Fr,T as Lr,a as Mr}from"./TvlChart-BWAUNIQd.js";import{T as Hr}from"./TradeConfirmAmountInfo-BPifKUfb.js";import{V as Ct,A as Er}from"./AvailableCapacity-BBS2n6da.js";import{u as $r}from"./global-CG4XJcf0.js";import{T as Tt}from"./TradeInputGroup-BU_bV5JV.js";import{v as Wr}from"./v4-C6aID195.js";import{A as Nr}from"./AumLimit-uxwTIz_y.js";import{T as mt}from"./TooltipIcon-2k0oF2Ae.js";import{P as Ur}from"./PoweredByHaedal-BByOfacs.js";import{P as Kr}from"./RemoveBlock-D0UZazua.js";import"./index-B0fjcXro.js";import"./useTokenBalance-Bm-sJqFs.js";import"./swapWidget-BCFJQoyC.js";import"./useFavoritePool-C-y3K2CF.js";import"./useGetPoolList-CsB88aY2.js";import"./useToken-BWHB2fhl.js";import"./useTransaction-DopuwF40.js";import"./useSigner-CskzV9L0.js";import"./msafe-oYBkW7LJ.js";import"./useFindBestRouting-Lj4RLbMT.js";import"./useSwapHelper-5Q8nfW7L.js";import"./CopyButton-Dh94jbmg.js";import"./_getAllKeysIn-BnIExAEt.js";import"./debounce-CO6GbXy5.js";import"./linear-DYpwdEgO.js";import"./TotalAmount-DdbTdVds.js";import"./ZapSwitch-BR4sNZ03.js";import"./DepositRatio-LVV2d-h7.js";import"./FreshProgressV2-B_THDS6m.js";import"./usePriceImpact-tW62EcgX.js";import"./ErrorTips-DTGb4xHZ.js";import"./useNotifiSubscription-BHSFkP5y.js";import"./useNotifiAlerts-CYozFF1D.js";import"./useXCetusHelper-BJnw5ZCZ.js";import"./usePositionList-DCRYUjtM.js";import"./index-cNVIru_O.js";import"./usePosAdd-DcGULfPv.js";import"./index-OPMiavju.js";import"./ExpendItem-Bu-QAEwU.js";import"./PriceRange-BlxARJmW.js";import"./PositionStatus-C0rs2j01.js";import"./RangeValue-CZfdgmR_.js";function Gr(o){const{displayMaxPrice:s,displayMinPrice:r,displayPrice:e,isLoading:i}=o,[a,l]=h.useState(0),u=h.useRef(null),m=h.useMemo(()=>!(r&&s&&e),[s,r,e]);h.useEffect(()=>{const x=()=>{u.current&&l(u.current.offsetWidth)};x();const p=new ResizeObserver(x);return u.current&&p.observe(u.current),()=>{u.current&&p.unobserve(u.current)}},[]);const d=h.useMemo(()=>{if(s==="∞")return"center";if(e&&r&&s){if(C(e).greaterThanOrEqualTo(s))return"end";if(C(r).greaterThanOrEqualTo(e))return"start"}return"center"},[e,r,s]),c=h.useMemo(()=>{if(s==="∞")return"0px";if(e&&r&&s&&C(e).lessThanOrEqualTo(s)&&C(e).greaterThanOrEqualTo(r)){const x=C(s).add(r).div(2),p=C(e).gt(x);let n=C(0);if(p){const g=C(x).sub(r);n=C(e).sub(x).div(g)}else{const g=C(s).sub(x);n=C(e).sub(r).div(g)}const f=C(123).div(2);return p?`${C(a).mul(n).sub(f).toFixed(0)}px`:`-${C(a).mul(C(1).sub(n)).sub(f).toFixed(0)}px`}return"0px"},[e,r,s,a]);return t.jsx(t.Fragment,{children:m?t.jsx(we,{h:"202px",width:"100%",align:"center",position:"relative",children:t.jsx($,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})})}):t.jsxs(we,{w:"90%",direction:"column",alignItems:d,children:[t.jsxs(P,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",ml:c,children:[t.jsxs(P,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[t.jsx(b,{fontSize:"xs",h:"14px",children:"Current Price"}),i?t.jsx(we,{h:"18px",align:"center",children:t.jsx(Ye,{})}):t.jsx(v,{children:t.jsx(b,{fontSize:"16px",color:"text_highlight",children:t.jsx(qe,{value:k(e,6,!0,Xe.ROUND_DOWN)})})})]}),t.jsxs(P,{zIndex:"100",children:[t.jsx($,{w:"2px",h:"98px",bg:"#76C8FF"}),t.jsx(Mt,{src:ur,w:"30px",h:"30px",mt:"-18px"})]})]}),t.jsx(Fe,{zIndex:"99",mt:"-48px",ref:u,pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"100%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:t.jsx(Fe,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),t.jsxs(v,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"90%"},children:[t.jsxs(P,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(b,{fontSize:"12px",children:"Min Price"}),i?t.jsx(we,{h:"18px",align:"center",children:t.jsx(Ye,{})}):t.jsx(b,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(qe,{value:k(r,6,!0,Xe.ROUND_DOWN)})})]}),t.jsxs(P,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(b,{fontSize:"12px",children:"Max Price"}),i?t.jsx(we,{h:"18px",align:"center",children:t.jsx(Ye,{})}):t.jsx(b,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(qe,{value:k(s,6,!0,Xe.ROUND_DOWN)})})]})]})]})})}function ye(o){"@babel/helpers - typeof";return ye=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},ye(o)}function Zr(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Yr(o,s){for(var r=0;r<s.length;r++){var e=s[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,zt(e.key),e)}}function qr(o,s,r){return s&&Yr(o.prototype,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function Xr(o,s,r){return s=He(s),Jr(o,Dt()?Reflect.construct(s,r||[],He(o).constructor):s.apply(o,r))}function Jr(o,s){if(s&&(ye(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qr(o)}function Qr(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Dt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dt=function(){return!!o})()}function He(o){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},He(o)}function Vr(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&Ve(o,s)}function Ve(o,s){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Ve(o,s)}function Rt(o,s,r){return s=zt(s),s in o?Object.defineProperty(o,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[s]=r,o}function zt(o){var s=Ir(o,"string");return ye(s)=="symbol"?s:s+""}function Ir(o,s){if(ye(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var e=r.call(o,s);if(ye(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(o)}var Ne=function(o){function s(){return Zr(this,s),Xr(this,s,arguments)}return Vr(s,o),qr(s,[{key:"render",value:function(){return null}}])}(O.Component);Rt(Ne,"displayName","ZAxis");Rt(Ne,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var es=["option","isActive"];function Te(){return Te=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e])}return o},Te.apply(this,arguments)}function ts(o,s){if(o==null)return{};var r=rs(o,s),e,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);for(i=0;i<a.length;i++)e=a[i],!(s.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(r[e]=o[e])}return r}function rs(o,s){if(o==null)return{};var r={};for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)){if(s.indexOf(e)>=0)continue;r[e]=o[e]}return r}function ss(o){var s=o.option,r=o.isActive,e=ts(o,es);return typeof s=="string"?O.createElement(ut,Te({option:O.createElement(fr,Te({type:s},e)),isActive:r,shapeType:"symbols"},e)):O.createElement(ut,Te({option:s,isActive:r,shapeType:"symbols"},e))}function be(o){"@babel/helpers - typeof";return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},be(o)}function De(){return De=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e])}return o},De.apply(this,arguments)}function ht(o,s){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);s&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),r.push.apply(r,e)}return r}function Z(o){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?ht(Object(r),!0).forEach(function(e){xe(o,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(r,e))})}return o}function os(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function gt(o,s){for(var r=0;r<s.length;r++){var e=s[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,kt(e.key),e)}}function is(o,s,r){return s&&gt(o.prototype,s),r&&gt(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function ns(o,s,r){return s=Ee(s),as(o,Ot()?Reflect.construct(s,r||[],Ee(o).constructor):s.apply(o,r))}function as(o,s){if(s&&(be(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(o)}function ls(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Ot(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ot=function(){return!!o})()}function Ee(o){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ee(o)}function cs(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&Ie(o,s)}function Ie(o,s){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},Ie(o,s)}function xe(o,s,r){return s=kt(s),s in o?Object.defineProperty(o,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[s]=r,o}function kt(o){var s=ps(o,"string");return be(s)=="symbol"?s:s+""}function ps(o,s){if(be(o)!="object"||!o)return o;var r=o[Symbol.toPrimitive];if(r!==void 0){var e=r.call(o,s);if(be(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(o)}var Ue=function(o){function s(){var r;os(this,s);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return r=ns(this,s,[].concat(i)),xe(r,"state",{isAnimationFinished:!1}),xe(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),xe(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),xe(r,"id",Tr("recharts-scatter-")),r}return cs(s,o),is(s,[{key:"renderSymbolsStatically",value:function(e){var i=this,a=this.props,l=a.shape,u=a.activeShape,m=a.activeIndex,d=Je(this.props,!1);return e.map(function(c,x){var p=m===x,n=p?u:l,f=Z(Z({},d),c);return O.createElement(Pe,De({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(x)},yr(i.props,c,x),{role:"img"}),O.createElement(ss,De({option:n,isActive:p,key:"symbol-".concat(x)},f)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,i=this.props,a=i.points,l=i.isAnimationActive,u=i.animationBegin,m=i.animationDuration,d=i.animationEasing,c=i.animationId,x=this.state.prevPoints;return O.createElement(br,{begin:u,duration:m,isActive:l,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var n=p.t,f=a.map(function(g,w){var y=x&&x[w];if(y){var S=ke(y.cx,g.cx),A=ke(y.cy,g.cy),_=ke(y.size,g.size);return Z(Z({},g),{},{cx:S(n),cy:A(n),size:_(n)})}var j=ke(0,g.size);return Z(Z({},g),{},{size:j(n)})});return O.createElement(Pe,null,e.renderSymbolsStatically(f))})}},{key:"renderSymbols",value:function(){var e=this.props,i=e.points,a=e.isAnimationActive,l=this.state.prevPoints;return a&&i&&i.length&&(!l||!vr(l,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var e=this.props.isAnimationActive;if(e&&!this.state.isAnimationFinished)return null;var i=this.props,a=i.points,l=i.xAxis,u=i.yAxis,m=i.children,d=At(m,jr);return d?d.map(function(c,x){var p=c.props,n=p.direction,f=p.dataKey;return O.cloneElement(c,{key:"".concat(n,"-").concat(f,"-").concat(a[x]),data:a,xAxis:l,yAxis:u,layout:n==="x"?"vertical":"horizontal",dataPointFormatter:function(w,y){return{x:w.cx,y:w.cy,value:n==="x"?+w.node.x:+w.node.y,errorVal:Be(w,y)}}})}):null}},{key:"renderLine",value:function(){var e=this.props,i=e.points,a=e.line,l=e.lineType,u=e.lineJointType,m=Je(this.props,!1),d=Je(a,!1),c,x;if(l==="joint")c=i.map(function(A){return{x:A.cx,y:A.cy}});else if(l==="fitting"){var p=Sr(i),n=p.xmin,f=p.xmax,g=p.a,w=p.b,y=function(_){return g*_+w};c=[{x:n,y:y(n)},{x:f,y:y(f)}]}var S=Z(Z(Z({},m),{},{fill:"none",stroke:m&&m.fill},d),{},{points:c});return O.isValidElement(a)?x=O.cloneElement(a,S):Ar(a)?x=a(S):x=O.createElement(wr,De({},S,{type:u})),O.createElement(Pe,{className:"recharts-scatter-line",key:"recharts-scatter-line"},x)}},{key:"render",value:function(){var e=this.props,i=e.hide,a=e.points,l=e.line,u=e.className,m=e.xAxis,d=e.yAxis,c=e.left,x=e.top,p=e.width,n=e.height,f=e.id,g=e.isAnimationActive;if(i||!a||!a.length)return null;var w=this.state.isAnimationFinished,y=It("recharts-scatter",u),S=m&&m.allowDataOverflow,A=d&&d.allowDataOverflow,_=S||A,j=fe(f)?this.id:f;return O.createElement(Pe,{className:y,clipPath:_?"url(#clipPath-".concat(j,")"):null},S||A?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(j)},O.createElement("rect",{x:S?c:c-p/2,y:A?x:x-n/2,width:S?p:p*2,height:A?n:n*2}))):null,l&&this.renderLine(),this.renderErrorBar(),O.createElement(Pe,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||w)&&Pr.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(e,i){return e.animationId!==i.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:i.curPoints}:e.points!==i.curPoints?{curPoints:e.points}:null}}])}(h.PureComponent);xe(Ue,"displayName","Scatter");xe(Ue,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!_r.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});xe(Ue,"getComposedData",function(o){var s=o.xAxis,r=o.yAxis,e=o.zAxis,i=o.item,a=o.displayedData,l=o.xAxisTicks,u=o.yAxisTicks,m=o.offset,d=i.props.tooltipType,c=At(i.props.children,Cr),x=fe(s.dataKey)?i.props.dataKey:s.dataKey,p=fe(r.dataKey)?i.props.dataKey:r.dataKey,n=e&&e.dataKey,f=e?e.range:Ne.defaultProps.range,g=f&&f[0],w=s.scale.bandwidth?s.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0,S=a.map(function(A,_){var j=Be(A,x),H=Be(A,p),T=!fe(n)&&Be(A,n)||"-",K=[{name:fe(s.dataKey)?i.props.name:s.name||s.dataKey,unit:s.unit||"",value:j,payload:A,dataKey:x,type:d},{name:fe(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:H,payload:A,dataKey:p,type:d}];T!=="-"&&K.push({name:e.name||e.dataKey,unit:e.unit||"",value:T,payload:A,dataKey:n,type:d});var B=dt({axis:s,ticks:l,bandSize:w,entry:A,index:_,dataKey:x}),W=dt({axis:r,ticks:u,bandSize:y,entry:A,index:_,dataKey:p}),N=T!=="-"?e.scale(T):g,z=Math.sqrt(Math.max(N,0)/Math.PI);return Z(Z({},A),{},{cx:B,cy:W,x:B-z,y:W-z,xAxis:s,yAxis:r,zAxis:e,width:2*z,height:2*z,size:N,node:{x:j,y:H,z:T},tooltipPayload:K,tooltipPosition:{x:B,y:W},payload:A},c&&c[_]&&c[_].props)});return Z({points:S},m)});var xs=Dr({chartName:"ComposedChart",GraphicalChild:[Ce,Fr,wt,Ue],axisComponents:[{axisType:"xAxis",AxisComp:it},{axisType:"yAxis",AxisComp:Me},{axisType:"zAxis",AxisComp:Ne}],formatAxisMap:Rr});function us(o){const{holdCoinAmounts:s,lpTokenInfo:r,displayTokenA:e,displayTokenB:i,sharePoolRate:a,balanceInfo:l,isReverse:u,holdCoinAValue:m,holdCoinBValue:d,rewardPerA:c,rewardPerB:x}=o,p=h.useMemo(()=>u?d:m,[u,m,d]),n=h.useMemo(()=>u?m:d,[u,m,d]),f=h.useMemo(()=>C(p).add(C(n)),[p,n,e,i]),{isApp:g}=ie();return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:t.jsxs(P,{w:"100%",gap:{base:"24px",lg:"8px"},children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(v,{children:t.jsx(b,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),t.jsxs(v,{gap:"8px",children:[t.jsx(b,{whiteSpace:"nowrap",children:"Your share of pool"}),t.jsxs(b,{color:"text_highlight",fontWeight:"500",children:[er(a,2,6),"%"]})]})]}),g?t.jsxs(P,{w:"100%",gap:"16px",children:[t.jsx(te,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(pe,{token:r,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsxs(b,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]})]}),subValue:t.jsx(b,{children:l!=null&&l.balanceFormat&&f?ee(f,2):"-"}),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Y(e==null?void 0:e.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(pe,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(b,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(s==null?void 0:s.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`})]}),subValue:ee(p,2),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Y(i==null?void 0:i.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(pe,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(b,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(s==null?void 0:s.displayCoinB,6)} ${Y(i==null?void 0:i.symbol,10)}`})]}),subValue:ee(n,2),subValueStyle:{fontSize:"13px"}})]}):t.jsxs(t.Fragment,{children:[t.jsxs(Le,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[t.jsx(b,{children:"LP Token Balance"}),t.jsxs(b,{color:"text_caption",ml:"4px",fontWeight:"500",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]}),t.jsx(b,{children:l!=null&&l.balanceFormat?ee(f,2):"-"})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[t.jsxs(P,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[t.jsxs(v,{children:[t.jsx(pe,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsx(b,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Y(e==null?void 0:e.symbol,10)})]}),t.jsx(re,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${k(s==null?void 0:s.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(p,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsxs(P,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[t.jsxs(v,{children:[t.jsx(b,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Y(i==null?void 0:i.symbol,10)}),t.jsx(pe,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),t.jsx(re,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:`${k(s==null?void 0:s.displayCoinB,6)} ${Y(i==null?void 0:i.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(n,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsx(L,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:t.jsxs(P,{justify:"center",gap:"4px",children:[t.jsx(pe,{token:r,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),t.jsx(b,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function ds(o){const{price:s,changeSide:r}=o;return{displayPrice:h.useMemo(()=>{if(s)return r?k(Qe(1).div(s).toString(),10,!0).toString():s},[s,r])}}function ms(o){const[s,r]=h.useState(!1),{currentPrice:e,minPrice:i,maxPrice:a,displayTokenA:l,displayTokenB:u,isLoading:m,isReverse:d}=o,{displayPrice:c}=ds({price:e,changeSide:d?!s:s}),{displayMaxPrice:x,displayMinPrice:p}=pr({minPrice:i,maxPrice:a,changeSide:s});h.useEffect(()=>{r(d)},[d]);const n=h.useMemo(()=>s?u:l,[l,u,s]),f=h.useMemo(()=>n!=null&&n.logo_url?n==null?void 0:n.logo_url:"",[n==null?void 0:n.logo_url]);return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(P,{w:"100%",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",mb:"6px",children:[t.jsx(b,{fontSize:"16px",color:"text_caption",children:"Position Range"}),t.jsxs(v,{gap:"0px",children:[f&&t.jsx(tr,{imageUrl:f,imageStyle:{w:"20px",h:"20px"}}),t.jsxs(b,{color:"text_caption",children:[" ",n==null?void 0:n.symbol]}),t.jsxs(v,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>r(!s),children:[t.jsx(b,{fontSize:"12px",children:" Base coin"}),t.jsx(rr,{xlinkHref:"#icon-icon_swap1"})]})]})]}),t.jsx(Gr,{displayPrice:c,displayMaxPrice:x,displayMinPrice:p})]})})}function hs({payload:o,label:s}){return o&&o.length&&t.jsxs(P,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[t.jsx(b,{fontSize:"12px",children:o[0].payload.tooltipTime}),t.jsxs(v,{textAlign:"left",children:[t.jsx(b,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),t.jsx(b,{color:"#68FFD8",fontSize:"12px",children:k(o[0].payload.real)})]}),t.jsxs(v,{children:[t.jsx(b,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),t.jsxs(b,{color:"#6FBCF0",fontSize:"12px",children:[k(o[0].payload.lower),"-",k(o[0].payload.upper)]})]})]})}function gs({data:o=[],dateType:s,isTabLoading:r}){const e=h.useMemo(()=>o,[o]),[i,a]=h.useState({lower:!1,upper:!1,real:!1}),l=h.useMemo(()=>{if(e.length){const d=Math.min(...e.map(f=>f.lower)),c=Math.max(...e.map(f=>f.upper)),x=C(c).mul(1.1),p=C(d).mul(.9),n=x.sub(p).div(4);return Array.from({length:5},(f,g)=>p.add(n.mul(g)).toNumber())}return[]},[e]),u=(d,c)=>{const x=new Date(c*1e3),p=x.getUTCHours(),n=x.getUTCMinutes(),f=x.getUTCDate(),g=x.getUTCMonth()+1;if(d<24||s==="24H"){const w=p>=12?"PM":"AM",y=p%12||12;return`${String(y).padStart(2,"0")}:${String(n).padStart(2,"0")} ${w}`}return`${g}/${f}`},{isApp:m}=ie();return t.jsx(St,{width:"100%",height:"100%",children:t.jsxs(gr,{data:e,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(it,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:d=>r?"":u(e.length,d),minTickGap:(e==null?void 0:e.length)>8?36:void 0,interval:(e==null?void 0:e.length)<=8?0:void 0}),t.jsx(Me,{fontSize:"12px",ticks:l,domain:[l[0],l[l.length-1]],axisLine:!1,tickLine:!1,tickFormatter:d=>k(d,4),tick:t.jsx(dr,{})}),t.jsx(Pt,{content:t.jsx(hs,{})}),t.jsx(_t,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:m?-8:-41,right:m?4:100,fontSize:12},formatter:d=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[d]||d}),t.jsx(Ce,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:i.real,dot:!1,isAnimationActive:!1}),t.jsx(Ce,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:i.lower,isAnimationActive:!1}),t.jsx(Ce,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:i.upper,isAnimationActive:!1})]})})}function fs(){const{fetchByApi:o}=et();return{getPriceRangeData:async r=>{try{const e=ot(r,tt),i=await o(zr,"GET",e);return i!=null&&i.list?i.list.map(a=>{const l=a.Timestamp*1e3,u=new Date(l);return{lower:a.value.lower,upper:a.value.upper,real:a.value.real,date:a.Timestamp,xAxis:Or(u.toISOString().slice(0,10)),tooltipTime:rt(l),hour:u.getHours()}}):[]}catch(e){return console.error("🚀 ~ useGetPriceRangeData ~ getPriceRangeData Error:",e),[]}}}}function ys({isRefresh:o,vaultsId:s,isReverse:r}){const[e,i]=h.useState(!1),{getPriceRangeData:a}=fs(),[l,u]=h.useState(),m=[{label:"24H"},{label:"1W"}],[d,c]=h.useState("1W"),[x,p]=h.useState(!1),n=async g=>{const w=Date.now(),S=String(Math.floor(w/1e3-86400));try{i(!0);const _=(await a({vaultID:s,dateType:g=="24H"?"min":"hour",beginTimestamp:g=="24H"?S:"",endTimestamp:C(new Date().getTime()).toFixed(0)})).map(j=>{const H=r?C(1).div(C(j.upper)).toString():j.lower,T=r?C(1).div(C(j.lower)).toString():j.upper,K=r?C(1).div(j.real).toString():j.real;return{...j,lower:H,upper:T,real:K}});u(_),p(!1),i(!1)}catch(A){i(!1),p(!1),console.log("🚀🚀🚀 ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",A)}};h.useEffect(()=>{s&&n(d)},[s,d]),h.useEffect(()=>{o&&n(d)},[o]);const{isApp:f}=ie();return t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:f?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsxs(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[t.jsx(b,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),t.jsx(ze,{type:"outlineTab",tabList:m,currentTab:d,handleChangeTab:g=>{p(!0),c(g.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),t.jsx($,{w:"100%",h:"260px",mt:"20px",children:t.jsxs($,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx($,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),t.jsx(gs,{data:l,dateType:d,isTabLoading:x})]})})]})}function bs(){const{fetchByApi:o}=et(),s=async e=>{console.log("🚀 ~ getVaultHistogram ~ params:",e);const i={...e};i.dateType=e.type=="day"||e.type=="week"?"hour":"day",delete i.type;try{const a=ot(i,tt),l=await o(kr,"GET",a);return l!=null&&l.list?l==null?void 0:l.list.map((u,m)=>{var n;const d=u.Timestamp*1e3,c=new Date(d),x=Number(c.toISOString().slice(5,7)),p=r((n=l==null?void 0:l.list)==null?void 0:n.length,c,e==null?void 0:e.type,m);return{num:+u.value,date:u.Timestamp,xAxis:p,tooltipTime:rt(d)}}):[]}catch(a){return console.error("🚀 ~ useGetHistogramData ~ getHistogramData Error:",a),[]}},r=(e,i,a="D",l)=>{const u=a=="D"||a=="day"?"D":a=="W"||a=="week"?"W":"M";console.log("🚀 ~ getXData ~ type:",a);const m=i,d=m.getUTCHours();let c=m.getUTCHours();const x=m.getUTCMinutes(),p=m.getUTCDate(),n=m.getUTCMonth()+1,f=c>=12?"PM":"AM";if(c=c%12||12,u=="D")return`${String(c).padStart(2,"0")}:${String(x).padStart(2,"0")} ${f}`;if(u=="M")return`${n}/${p}`;if(console.log("🚀 ~ getXData ~ noShowHours:",d),e<24){const g=Math.floor(e/2);if(console.log("🚀 ~ getXData ~ step:",e,l,l%g===0,g),l%g===0)return`${n}/${p}`}return e>=24&&e<120&&(d===0||d===12)?`${n}/${p}`:e>=120&&d===0&&x===0?`${n}/${p}`:""};return{getVaultHistogram:s}}function vs({isRefresh:o,vaultsId:s}){console.log("🚀🚀🚀 ~ TvlChartPageBlock.tsx:11 ~ TvlChartPageBlock ~ isRefresh:",o);const r=[{label:"24H"},{label:"1W"},{label:"1M"}],[e,i]=h.useState(!0),[a,l]=h.useState("24H"),{getVaultHistogram:u}=bs(),[m,d]=h.useState([]),[c,x]=h.useState(),[p,n]=h.useState(),f=async()=>{var H,T;i(!0);const y=Date.now(),S=86400,A=a=="24H"?1*S:a=="1W"?7*S:30*S,_=A?String(Math.floor(y/1e3-A)):0,j=await u({type:a=="24H"?"day":a=="1W"?"week":"month",vaultID:s,beginTimestamp:_,endTimestamp:String(Math.floor(y/1e3))});n((H=j[j.length-1])==null?void 0:H.num),x((T=j[j.length-1])==null?void 0:T.num),console.log("🚀 ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",j),d(j),i(!1)},g=y=>{console.log("🚀 ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",y),x(y?y.num:p)};h.useEffect(()=>{s&&f()},[a,s]),h.useEffect(()=>{o&&f()},[o]);const{isApp:w}=ie();return t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:w?"12px":"20px",children:[t.jsxs(v,{justify:"space-between",children:[c?t.jsxs(P,{align:"flex-start",gap:"4px",children:[t.jsx(b,{fontWeight:"500",fontSize:"12px",children:"TVL"}),t.jsx(b,{fontSize:"16px",color:"text_caption",mt:"8px",children:ee(c,2)})]}):t.jsx(P,{align:"flex-start",gap:"4px"}),t.jsx(ze,{type:"outlineTab",tabList:r,currentTab:a,handleChangeTab:y=>l(y.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsx($,{w:"100%",h:"260px",mt:"20px",children:t.jsxs($,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx($,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),m.length>0&&t.jsx(Lr,{data:m,onChangeValue:g,isShowYAxis:!0,toolTipsType:"tvl"}),!e&&m.length===0&&t.jsx(jt,{type:"nodata"})]})})]})}function js({data:o=[],dateType:s,quoteCoin:r}){const[e,i]=h.useState({apy:!1,lp_fee:!1}),a=[{value:"Cumulative Yields",type:"line",id:"lp_fee",color:"#07EBAD"},{value:"APY",type:"line",id:"apy",color:"#75C8FF"}],l=h.useMemo(()=>{if(o.length){const c=Math.min(...o.map(g=>g.apy)),x=Math.max(...o.map(g=>g.apy)),p=C(x).mul(1.05),n=C(c),f=p.sub(n).div(4);return Array.from({length:5},(g,w)=>n.add(f.mul(w)).toNumber())}return[]},[o]),u=h.useMemo(()=>{if(o.length){const c=Math.min(...o.map(g=>g.lp_fee)),x=Math.max(...o.map(g=>g.lp_fee)),p=C(x).mul(1.05),n=C(c),f=p.sub(n).div(4);return Array.from({length:5},(g,w)=>n.add(f.mul(w)).toNumber())}return[]},[o]),m=(c,x)=>{const p=new Date(x*1e3),n=p.getUTCHours(),f=p.getUTCMinutes(),g=p.getUTCDate(),w=p.getUTCMonth()+1;if(c<24||s==="24H"){const y=n>=12?"PM":"AM",S=n%12||12;return`${String(S).padStart(2,"0")}:${String(f).padStart(2,"0")} ${y}`}return`${w}/${g}`},{isApp:d}=ie();return t.jsx(St,{width:"100%",height:"100%",children:t.jsxs(xs,{data:o,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(it,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:c=>m(o.length,c),minTickGap:(o==null?void 0:o.length)>8?36:void 0,interval:(o==null?void 0:o.length)<=8?0:void 0}),t.jsx(Me,{yAxisId:"bar",xAxisId:"x",fontSize:"12px",orientation:"left",width:50,tickLine:!1,position:"insideRight",ticks:l,domain:[l[0],l[l.length-1]],tickFormatter:c=>(console.log("🚀 ~ ApyAndFeesChart 323~ value:",c),k(c,2)),tick:t.jsx(mr,{})}),t.jsx(Me,{yAxisId:"line",orientation:"right",fontSize:"12px",tickLine:!1,ticks:u,domain:[u[0],u[u.length-1]],tick:t.jsx(hr,{isRight:!0,isApp:d,symbol:r==null?void 0:r.symbol})}),t.jsx(Pt,{content:t.jsx(Mr,{symbol:r==null?void 0:r.symbol})}),t.jsx(_t,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:-32,right:0,fontSize:12},payload:a}),t.jsx(wt,{yAxisId:"bar",barSize:1,dataKey:"apy",fill:"#75C8FF",isAnimationActive:!1,hide:e.apy}),t.jsx(Ce,{yAxisId:"line",type:"monotone",dataKey:"lp_fee",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},dot:!1,isAnimationActive:!1,hide:e.lp_fee})]})})}function Ss(){const{fetchByApi:o}=et();return{getVaultApyAndFeesHistogram:async r=>{console.log("🚀 ~ getVaultHistogram ~ params:",r);const e={...r};e.dateType="hour";try{const i=ot(e,tt),a=await o(Br,"GET",i);return console.log("🚀 ~ getVaultApyAndFeesHistogram ~ res:",a),a!=null&&a.list?a==null?void 0:a.list.map((l,u)=>{const m=l.Timestamp*1e3,d=new Date(m),c=Number(d.toISOString().slice(5,7));return{apy:+l.value.apy*100,lp_fee:+l.value.lp_fee,date:l.Timestamp,tooltipTime:rt(m)}}):[]}catch(i){return console.error("🚀 ~ useGetHistogramData ~ getHistogramData Error:",i),[]}}}}function As({isRefresh:o,vaultsId:s,isReverse:r,quoteCoin:e}){const[i,a]=h.useState(!1),[l,u]=h.useState(),{isApp:m}=ie(),{getVaultApyAndFeesHistogram:d}=Ss(),c=async()=>{a(!0);const x=Date.now(),p=86400,n=m?2*p:7*p,f=n?String(Math.floor(x/1e3-n)):0,g=await d({vaultID:s,beginTimestamp:f,endTimestamp:String(Math.floor(x/1e3))});u(g),console.log("🚀 ~ fetchPricerangeHistogram ~ tvl_res:",g),a(!1)};return h.useEffect(()=>{s&&c()},[s]),h.useEffect(()=>{o&&c()},[o]),t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:m?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsx(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:t.jsx(b,{fontWeight:"500",fontSize:"14px",children:"APY & Yields"})})}),t.jsx($,{w:"100%",h:"260px",mt:"20px",children:t.jsxs($,{w:"100%",h:"260px",position:"relative",children:[i&&t.jsx($,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx($e,{})}),t.jsx(js,{data:l,dateType:"",quoteCoin:e})]})})]})}function ws(o){const{isOpen:s,onClose:r,data:e,onSubmitClick:i,calculateLpLoading:a}=o,{feeTier:l,displayTokenA:u,displayTokenB:m,displayAmountA:d,displayAmountB:c,totalAmountValue:x,sharePool:p,lpAmountLimit:n,lpDecimals:f}=e;return t.jsxs(Ht,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:r,isCentered:!0,children:[t.jsx(Et,{}),t.jsxs($t,{children:[t.jsx(Wt,{children:t.jsx(Nt,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),t.jsx(Ut,{}),t.jsx(Kt,{textAlign:"center",p:"0px",children:t.jsxs(P,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(vt,{coinAIconUrl:u==null?void 0:u.logo_url,coinBIconUrl:m==null?void 0:m.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(b,{fontSize:"16px",color:"text_caption",children:`${u==null?void 0:u.symbol} - ${m==null?void 0:m.symbol}`})]}),t.jsx(L,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:t.jsxs(v,{children:[t.jsx(b,{children:"Fee Tier"}),t.jsx(b,{color:"primary",children:l})]})})]}),t.jsx(Hr,{coinA:{amount:d,...u},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:c,...m}}),t.jsx(Ct,{amountLimit:n,inputTotalValue:x,preCalculateLoading:!1,calculateLpLoading:a,lpRate:p,lpDecimals:f,poolName:`${u==null?void 0:u.symbol} - ${m==null?void 0:m.symbol}`}),t.jsx($,{h:"52px"}),t.jsx(We,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{i()},children:"Deposit"})]})})]})]})}const Ps="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",_s=(o,s)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${s} via ${o} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Bt(o){const{displayTokenA:s,displayTokenB:r,onSelectAssetTab:e,showAfterIcon:i=!1,label:a="Deposit Amounts",handleRefreshClick:l,refreshCount:u,isCheckedZAP:m,setIsCheckedZAP:d,assetAction:c,setAssetAction:x,isUnstableVault:p,currentActionTab:n}=o,{stakeProtocolName:f}=qt(s==null?void 0:s.coin_type),[g,w]=h.useState("both"),y=h.useMemo(()=>{if(s&&r){const _=[{label:`${s.symbol} only`,action:s.coin_type,afterIcon:m&&n=="Deposit"&&!p?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:p?n=="Deposit"?`You can add liquidity in this pool with only ${s.symbol}.`:"":Ps},{label:`${r.symbol} only`,action:r.coin_type,afterIcon:m&&n=="Deposit"&&!p?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:p?n=="Deposit"?`You can add liquidity in this pool with only ${r.symbol}.`:"":_s(f,s==null?void 0:s.symbol)}];return p&&n=="Deposit"&&_.splice(1,0,{label:`${s.symbol}+${r.symbol}`,action:"both",afterIcon:m&&!p&&n=="Deposit"?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:n=="Deposit"?"You can add any value you want from both assets.":""}),_}return[]},[s,f,m]),S=h.useMemo(()=>{if(y.length!==0){if(p){if(c===(s==null?void 0:s.coin_type))return y[0].label;if(c===(r==null?void 0:r.coin_type))return n=="Withdraw"?y[1].label:y[2].label}else{if(c===(s==null?void 0:s.coin_type))return y[0].label;if(c===(r==null?void 0:r.coin_type))return y[1].label}return y[1].label}},[c,y,m]),A=h.useMemo(()=>n=="Deposit"?p?"customDeposit":"deposit":"withdraw",[n,p]);return t.jsxs(P,{w:"100%",gap:"16px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(b,{fontWeight:"500",children:a}),t.jsx(xr,{isCheckedZAP:m,zapText:n=="Deposit"?"Zap In":"Zap Out",tooltipType:A,zapSwitchChange:_=>{d(!m),x(_?s==null?void 0:s.coin_type:"both"),w((s==null?void 0:s.symbol)+" only")}})]}),m?t.jsx(ze,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:S,tabList:y,handleChangeTab:_=>{x(_.action),console.log("🚀🚀🚀 ~ item.action:",_.action),e(_.action)}}):null]})}function Cs(o){const{category:s}=ft(),{apiVaultInfo:r,tokenA:e,tokenB:i,isReverse:a,vaultsId:l,totalLp:u,feeTier:m,handleRefreshClick:d,currentActionTab:c,hardCapUSD:x,vaultTvl:p,lpTokenInfo:n,depositRatio:f,gtAumLimit:g,quoteCoin:w,maxCapNum:y,isRefresh:S}=o,A=Re.useVaultsAdd(s=="haedal"),_=Re.useAddButtonStatus(s=="haedal"),[j,H]=h.useState("both"),[T,K]=h.useState(!1),{currentAccount:B,onWalletModal:W}=st(),{amountInputA:N,amountInputB:z,balanceInfoA:D,balanceInfoB:R,amountValueA:se,amountValueB:me,preCalculateLoading:F,fixAmountA:q,inputTotalValue:he,handleAmountInputChange:V,calculateResult:M,showOnlySideTips:X,doAddAction:ve,reCalculateResult:oe,overHardtop:ne,zapNumError:J,calculateLpLoading:ge,inputTotalValueError:ae,debouncedPreCalculateDepositValue:ue,percentage:U,setPercentage:G,setIsSlider:je,isSlider:E,setUuid:de}=A(j,d,l,a?i:e,a?e:i,r==null?void 0:r.isReverse,T,x,p,g),{vaultsSlippage:I}=$r(),{btnText:Se,btnDisabled:Ae}=_(T,j,!0,N,z,q,D==null?void 0:D.balanceFormat,R==null?void 0:R.balanceFormat,e,i,J,M,ne,ae),{lpRate:nt}=yt(M==null?void 0:M.ft_amount,u),{amountLimit:at}=bt(Number(I),M==null?void 0:M.ft_amount,!1),[Oe,Ke]=h.useState(!1),Ge=h.useMemo(()=>D,[D==null?void 0:D.balance,R==null?void 0:R.balance,a]),Ze=h.useMemo(()=>R,[D==null?void 0:D.balance,R==null?void 0:R.balance,a]),le=h.useMemo(()=>e,[a,e,i]),ce=h.useMemo(()=>i,[a,e,i]),Ft=()=>({feeTier:m||"",displayTokenA:le,displayTokenB:ce,displayAmountA:N,displayAmountB:z,totalAmountValue:he,sharePool:nt,lpAmountLimit:at||"0",lpDecimals:n==null?void 0:n.decimals}),{isApp:Lt}=ie();return h.useEffect(()=>{if(E){const Q=Wr();de(Q),ue(U,Q)}},[S]),t.jsxs(P,{gap:"12px",w:"100%",align:"flex-start",children:[t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Bt,{showAfterIcon:!0,displayTokenB:i,displayTokenA:e,onSelectAssetTab:H,assetAction:j,isCheckedZAP:T,setIsCheckedZAP:K,setAssetAction:H,isUnstableVault:s=="haedal",currentActionTab:c,handleRefreshClick:()=>{d(),oe()}}),t.jsx(P,{mt:"16px",position:"relative",children:t.jsx(Tt,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:j!=="both"&&j!==(le==null?void 0:le.coin_type),balance:(Ge==null?void 0:Ge.balanceFormat)||"",value:N,amountValue:N&&se,loading:(a?q:!q)&&F&&!T,onChange:Q=>{console.log("🚀🚀🚀 ~ VaultsAdd.tsx:183 ~ VaultsAdd ~ value,amountInputB:",Q,z),V(Q,!a,!0,z)},selectable:!1,placeholder:"0.0",token:le},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:j!=="both"&&j!==(ce==null?void 0:ce.coin_type),balance:(Ze==null?void 0:Ze.balanceFormat)||"",value:z,amountValue:z&&me,loading:(a?!q:q)&&F&&!T,onChange:Q=>{V(Q,a,!0,N)},selectable:!1,placeholder:"0.0",token:ce},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),(r==null?void 0:r.category)=="haedal"&&t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"16px",children:t.jsx(Er,{depositRatio:f,percentage:U,hardCapUSD:x,vaultTvl:p,gtAumLimit:g,quoteCoin:w,maxCapNum:y,onChange:Q=>{je(!0),G(Q),ue(Q)}})}),t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(P,{w:"100%",gap:"20px",children:[t.jsx(We,{m:"-1px",isLoading:F||Oe,w:"100%",borderRadius:"12px",h:"52px",fontSize:Lt&&J?"14px":"18px",fontWeight:"500",disabled:Ae||F||Oe||(B==null?void 0:B.address)&&(g||ne),onClick:()=>{B?Ke(!0):W(!0)},children:Se||(T?"Zap In":"Deposit")}),J&&U>0&&(N||z)?t.jsx(P,{w:"100%",pl:"16px",pr:"16px",pb:M||X?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(b,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,ae&&t.jsx(P,{w:"100%",pl:"16px",pb:"20px",pr:"16px",alignItems:"start",children:t.jsx(b,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(M||X)&&!ae&&t.jsxs(P,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[j!=="both"&&X&&t.jsx(b,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:M?"20px":"0",children:X}),M&&t.jsx(Ct,{amountLimit:at,inputTotalValue:he,preCalculateLoading:F,calculateLpLoading:ge,lpDecimals:n==null?void 0:n.decimals,lpRate:nt,poolName:`${le==null?void 0:le.symbol} - ${ce==null?void 0:ce.symbol}`})]})]})}),Oe&&t.jsx(ws,{data:Ft(),isOpen:Oe,calculateLpLoading:ge,onClose:()=>{Ke(!1)},onSubmitClick:()=>{Ke(!1),ve()}})]})}function Ts(o){const{vaultsCoinPercent:s,displayTokenB:r,displayTokenA:e,vaultCoinAmounts:i,vaultsCoinAValue:a,vaultsCoinBValue:l,isReverse:u,depositRatio:m,hardCapUSD:d,vaultTvl:c}=o,x=h.useMemo(()=>u?l:a,[u,a,l]),p=h.useMemo(()=>u?a:l,[u,a,l]),n=h.useMemo(()=>u?s==null?void 0:s.percentB:s==null?void 0:s.percentA,[u,s]),f=h.useMemo(()=>u?s==null?void 0:s.percentA:s==null?void 0:s.percentB,[u,s]),{isApp:g}=ie();return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(P,{w:"100%",gap:"0px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(b,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),d&&t.jsx(Nr,{depositRatio:m,hardCapUSD:d,vaultTvl:c,label:"Capacity",value:_e(d,"$")})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[t.jsxs(v,{children:[t.jsx(pe,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!g}),t.jsx(re,{wrapStyle:{gap:"4px"},title:Y(e==null?void 0:e.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${n}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),t.jsx(Gt,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:n,bg:Number(n)!==0&&Number(f)!==0?"quote_green":"process_bg_gray",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{children:[t.jsx(re,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:Y(r==null?void 0:r.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${f}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),t.jsx(pe,{token:r,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[t.jsx(re,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:`${k(i==null?void 0:i.displayCoinA,6)} ${Y(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:ee(x,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),t.jsx(re,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:`${k(i==null?void 0:i.displayCoinB,6)} ${Y(r==null?void 0:r.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:ee(p,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function Ds(o){var u,m,d,c,x,p;const{isApp:s}=ie(),{apiVaultInfo:r,isUnstableVault:e,vaultTvl:i,performanceFee:a}=o,{getExplorerUrl:l}=sr();return t.jsxs(Le,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(vt,{coinACoinType:(u=r==null?void 0:r.displayTokenA)==null?void 0:u.coin_type,coinBCoinType:(m=r==null?void 0:r.displayTokenB)==null?void 0:m.coin_type,coinAIconUrl:(d=r==null?void 0:r.displayTokenA)==null?void 0:d.logo_url,coinBIconUrl:(c=r==null?void 0:r.displayTokenB)==null?void 0:c.logo_url}),t.jsxs(P,{alignItems:"start",flexDirection:e?"column":"row",gap:"2px",children:[t.jsxs(v,{children:[t.jsx(b,{fontSize:"16px",color:"text_caption",children:(r==null?void 0:r.name)||`${(x=r==null?void 0:r.displayTokenA)==null?void 0:x.symbol} - ${(p=r==null?void 0:r.displayTokenB)==null?void 0:p.symbol}`}),t.jsx(L,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:t.jsx(v,{children:t.jsx(b,{fontSize:"12px",color:"primary",children:r==null?void 0:r.feeDisplay})})})]}),t.jsx(v,{mt:"4px",children:e&&t.jsx(Ur,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"Haedal"})})]}),!s&&t.jsxs(v,{ml:"12px",gap:"4px",children:[t.jsx(b,{fontSize:"14px",children:"Vault Address"}),t.jsx(xt,{fontSize:"14px",address:(r==null?void 0:r.vaultsId)||"",onClickLink:()=>{window.open(l(r==null?void 0:r.vaultsId,"poolAddress"),"_blank")}})]})]}),t.jsx(Le,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:s?t.jsxs(t.Fragment,{children:[t.jsx(te,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:t.jsx(xt,{fontSize:"14px",color:"text_caption",address:(r==null?void 0:r.vaultsId)||"",onClickLink:()=>{window.open(l(r==null?void 0:r.vaultsId,"poolAddress"),"_blank")}})}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"APY",labelStyle:{fontSize:"14px"},rightValueTip:t.jsx(lt,{vaultsLstApyDisplay:r==null?void 0:r.vaultsLstApyDisplay,vaultsApyDisplay:r==null?void 0:r.vaultsApyDisplay,vaultsTotalApyDisplay:r==null?void 0:r.vaultsTotalApyDisplay,vaultsAprDisplay:r==null?void 0:r.vaultsAprDisplay,category:r==null?void 0:r.category}),value:(r==null?void 0:r.category)=="cetus"?r==null?void 0:r.vaultsTotalApyDisplay:(r==null?void 0:r.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"Earnings",labelStyle:{fontSize:"14px"},value:t.jsx(pt,{placement:"top",tooltip:t.jsx(b,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Fe,{children:t.jsx(v,{w:"100px",justifyContent:"end",children:r==null?void 0:r.vaultsRewards.map(n=>t.jsx(ct,{coinType:n},n))})})}),valueStyle:{h:"20px",lineHeight:"20px"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"TVL",labelStyle:{fontSize:"14px"},value:(e?_e(i,"$"):r==null?void 0:r.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e&&t.jsx(te,{wrapStyle:{gap:"6px"},label:t.jsxs(v,{children:[t.jsx(b,{children:"Performance Fee"}),t.jsx(mt,{type:"vaultDetailFee"})]}),labelStyle:{fontSize:"14px"},value:_e(a,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})]}):t.jsxs(t.Fragment,{children:[t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"APY",titleStyle:{fontSize:"12px"},valueTooltip:t.jsx(lt,{vaultsLstApyDisplay:r==null?void 0:r.vaultsLstApyDisplay,vaultsApyDisplay:r==null?void 0:r.vaultsApyDisplay,vaultsTotalApyDisplay:r==null?void 0:r.vaultsTotalApyDisplay,vaultsAprDisplay:r==null?void 0:r.vaultsAprDisplay,category:r==null?void 0:r.category}),value:(r==null?void 0:r.category)=="cetus"?r==null?void 0:r.vaultsTotalApyDisplay:(r==null?void 0:r.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontWeight:"500"}}),t.jsx(re,{wrapStyle:{gap:"6px",alignItems:"flex-end"},title:"Earnings",titleStyle:{fontSize:"12px"},value:t.jsx(pt,{placement:"top",tooltip:t.jsx(b,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Fe,{children:t.jsx(v,{justifyContent:"end",children:r==null?void 0:r.vaultsRewards.map(n=>t.jsx(ct,{coinType:n},n))})})}),valueStyle:{h:"20px"}}),t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"TVL",titleStyle:{fontSize:"12px"},value:(e?_e(i,"$"):r==null?void 0:r.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}}),e&&t.jsx(re,{wrapStyle:{alignItems:"flex-end",gap:"2px"},title:t.jsxs(v,{children:[t.jsx(b,{fontSize:"12px",children:"Performance Fee"}),t.jsx(mt,{type:"vaultDetailFee"})]}),titleStyle:{fontSize:"12px",mt:"-4px"},value:_e(a,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}})]})})]})}function Rs(o){const{apiVaultInfo:s,tokenA:r,tokenB:e,isReverse:i,vaultsId:a,totalLp:l,holdCoinAmounts:u,holdLpAmount:m,handleRefreshClick:d,isUnstableVault:c,currentActionTab:x,lpTokenInfo:p}=o,n=Re.useVaultsRemove(c),f=Re.useAddButtonStatus(c),[g,w]=h.useState(!1),[y,S]=h.useState("both"),{currentAccount:A,onWalletModal:_}=st(),{contractClmmPoolObj:j}=Xt(),H=h.useMemo(()=>{if(j&&j[s==null?void 0:s.clmmPoolAddress])return j[s==null?void 0:s.clmmPoolAddress]},[s==null?void 0:s.clmmPoolAddress,j]),{amountInputA:T,amountInputB:K,availableAmountA:B,availableAmountB:W,amountValueA:N,amountValueB:z,preCalculateLoading:D,fixAmountA:R,inputTotalValue:se,handleAmountInputChange:me,calculateResult:F,showOnlySideTips:q,doRemoveAction:he,handlePercentInputChange:V,removePercent:M,isPercentInput:X,reCalculateResult:ve,calculateAvailableLoading:oe,submitLoading:ne}=n(y,d,u,m,a,i?e:r,i?r:e,i,g,H),J=h.useMemo(()=>se&&g?Qe(se).gt(0)&&Qe(se).lt(1e-4):!1,[g,se]),{btnText:ge,btnDisabled:ae}=f(g,y,!1,T,K,i?!R:R,B,W,r,e,"",F,J);yt(F==null?void 0:F.burn_ft_amount,l);const{amountLimit:ue}=bt(0,F==null?void 0:F.burn_ft_amount,!1);h.useMemo(()=>B,[B,i]),console.log("🚀🚀🚀 ~ VaultsRemove.tsx:85 ~ balanceA ~ availableAmountA:",B),h.useMemo(()=>W,[W]),console.log("🚀🚀🚀 ~ VaultsRemove.tsx:85 ~ balanceB ~ availableAmountB:",W);const U=h.useMemo(()=>r,[i,r,e]),G=h.useMemo(()=>e,[i,r,e]),je=h.useMemo(()=>D?X?!0:i?R:!R:!1,[D,X]),E=h.useMemo(()=>D?X?!0:i?!R:R:!1,[D,X]),de=h.useMemo(()=>k(or(ue||"0",p==null?void 0:p.decimals),p==null?void 0:p.decimals),[ue,p]);return t.jsxs(P,{gap:"12px",w:"100%",align:"flex-start",children:[t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Bt,{label:"Remove Amounts",displayTokenA:r,displayTokenB:e,onSelectAssetTab:S,handleRefreshClick:()=>{d(),ve()},isCheckedZAP:g,setIsCheckedZAP:w,assetAction:y,setAssetAction:S,currentActionTab:x,isUnstableVault:c}),t.jsx($,{w:"100%",position:"relative",mt:"16px",children:t.jsx(Tt,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:oe,hideSelf:y!=="both"&&y!==(U==null?void 0:U.coin_type),balance:B||"",value:T,amountValue:N,loading:je,onChange:(I,Se,Ae)=>{console.log("🚀🚀🚀 ~ VaultsRemove.tsx:179 ~ VaultsRemove ~ value:",I),me(I,!i,Se,Ae)},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:U,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:oe,needRemainBalance:!1,hideSelf:y!=="both"&&y!==(G==null?void 0:G.coin_type),balance:W||"",value:K,amountValue:z,loading:E,onChange:(I,Se,Ae)=>{me(I,i,Se,Ae)},selectable:!1,placeholder:"0.0",token:G},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[t.jsx(b,{color:"primary_gray",children:"Amount"}),t.jsx(Kr,{percentage:M,onChange:I=>{oe||V(Number(I.toString().replace("%","")))}})]}),t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(P,{w:"100%",gap:"20px",children:[t.jsx(We,{m:"-1px",isLoading:D||ne,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:ae||D||ne,onClick:()=>{A?he():_(!0)},children:ge||(g?"Zap Out":"Withdraw")}),J&&t.jsx(P,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:t.jsx(b,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),F&&!J&&t.jsxs(P,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[y!=="both"&&q&&t.jsx(b,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:q}),t.jsxs(P,{w:"100%",gap:"20px",children:[t.jsx(te,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:ee(se,2),valueStyle:{fontSize:"14px"},isLoading:D}),t.jsx(te,{label:"LP Burn Amount",value:`${de} ${`${U==null?void 0:U.symbol} - ${G==null?void 0:G.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:D})]})]})]})})]})}const zs=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function $o(){const{vaultId:o,category:s}=ft(),{currentAccount:r}=st(),{apiVaultInfo:e,getApiVaultInfo:i}=Jt(o),{fetchAccountBalance:a}=lr(),l=Re.useGetContractVaultInfo(s=="haedal"),{vaultStatsObj:u}=Qt(),[m,d]=h.useState(!0);h.useEffect(()=>{var E;if(o&&ir(u)){const de=(E=Object.values(u))==null?void 0:E.filter(I=>I.vaultsId==o);(de==null?void 0:de.length)>0?d(!0):d(!1)}},[o,u]);const{contractVault:c,lpTokenInfo:x,minPrice:p,maxPrice:n,vaultCoinAmounts:f,vaultsCoinAValue:g,vaultsCoinBValue:w,currPrice:y,balanceInfo:S,totalValue:A,fetchClmmPoolFromContract:_,fetchVaultInfoFromContract:j,vaultsCoinPercent:H,sharePoolRate:T,holdCoinAmounts:K,holdCoinAValue:B,holdCoinBValue:W,fetchVaultBalance:N,vaultTvl:z,depositRatio:D,hardCapUSD:R,performanceFee:se,gtAumLimit:me,refreshPythPrice:F,quoteCoin:q,maxCapNum:he}=l(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse,!0);console.log("🚀🚀🚀 ~ VaultsDetailPage.tsx:82 ~ VaultsDetailPage ~ contractVault:",c);const[V,M]=h.useState("Deposit");h.useEffect(()=>{r!=null&&r.address&&e&&e.vaultsId&&(x!=null&&x.decimals)&&s=="haedal"&&N(r==null?void 0:r.address,e.vaultsId,x==null?void 0:x.decimals)},[r==null?void 0:r.address,e,x==null?void 0:x.decimals,s]);const{rewardPerA:X,rewardPerB:ve}=Vt(S==null?void 0:S.balanceFormat,e);h.useEffect(()=>{o&&j(o,!0)},[o]),h.useEffect(()=>{e&&(console.log("🚀 ~ useEffect ~ apiVaultInfo:",e),_(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),h.useEffect(()=>{r!=null&&r.address&&a()},[]);const[oe,ne]=h.useState(!1),J=()=>{a(),e&&_(e.clmmPoolAddress,!0),o&&(j(o,!0),i(o,!0)),ne(!0),setTimeout(()=>{ne(!1)},1e3)},ge=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[ae,ue]=h.useState("Overview"),U=Zt(),[G,je]=h.useState(!1);return cr({interval:10*1e3,callback:()=>{F(),je(!G)}}),t.jsx($,{pt:"40px",w:"100%",children:m?t.jsxs(P,{gap:"20px",w:"100%",align:"flex-start",children:[t.jsx(v,{w:"100%",justify:"space-between",children:t.jsx(nr,{bg:"bg_six",borderColor:"border_secondary"})}),t.jsx(Ds,{apiVaultInfo:e,isUnstableVault:s=="haedal",vaultTvl:z,performanceFee:se}),t.jsxs(Le,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[t.jsxs(P,{width:"100%",flex:"1",gap:"12px",children:[(e==null?void 0:e.category)=="haedal"&&t.jsx(ze,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:ge,currentTab:ae,handleChangeTab:E=>{ue(E==null?void 0:E.value)}}),ae=="Overview"?t.jsxs(t.Fragment,{children:[t.jsx(ms,{minPrice:p,maxPrice:n,currentPrice:e!=null&&e.isReverse?1/y:y,displayTokenB:e!=null&&e.isReverse?e==null?void 0:e.displayTokenA:e==null?void 0:e.displayTokenB,displayTokenA:e!=null&&e.isReverse?e==null?void 0:e.displayTokenB:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1}),t.jsx(Ts,{vaultCoinAmounts:f,vaultsCoinAValue:g,vaultsCoinBValue:w,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsCoinPercent:H,depositRatio:D,hardCapUSD:R,vaultTvl:z}),t.jsx(us,{lpTokenInfo:x,sharePoolRate:T,balanceInfo:S,totalValue:A,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,holdCoinAmounts:K,holdCoinAValue:B,holdCoinBValue:W,isReverse:(e==null?void 0:e.isReverse)||!1,rewardPerA:X,rewardPerB:ve})]}):t.jsxs(t.Fragment,{children:[t.jsx(vs,{isRefresh:oe,vaultsId:e==null?void 0:e.vaultsId}),t.jsx(As,{isRefresh:oe,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse,haveMining:e==null?void 0:e.haveMining,quoteCoin:q}),t.jsx(ys,{isRefresh:oe,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse})]})]}),t.jsxs(P,{w:{base:"100%",lg:"40%"},justifyContent:"start",gap:"12px",children:[t.jsx(L,{p:"0",borderRadius:"12px",bg:"bg_six",borderColor:"border_secondary",children:t.jsxs(v,{w:"100%",p:{base:"0 8px",lg:"0 16px"},children:[t.jsx(ze,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",border:"none",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:zs,currentTab:V,handleChangeTab:E=>{M(E==null?void 0:E.value)}}),t.jsxs(v,{children:[t.jsx(Yt,{slippageType:"vaults",compact:!0}),t.jsx(ar,{handleRefresh:J,isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),V==="Deposit"&&t.jsx(Cs,{apiVaultInfo:e,feeTier:e==null?void 0:e.feeDisplay,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:(c==null?void 0:c.total_supply)||(c==null?void 0:c.lp_token_treasury),isUnstableVault:s=="haedal",handleRefreshClick:J,currentActionTab:V,hardCapUSD:R,vaultTvl:z,lpTokenInfo:x,depositRatio:D,gtAumLimit:me,quoteCoin:q,maxCapNum:he,isRefresh:G}),V==="Withdraw"&&t.jsx(Rs,{apiVaultInfo:e,holdCoinAmounts:K,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:c==null?void 0:c.total_supply,holdLpAmount:S==null?void 0:S.balance,isUnstableVault:s=="haedal",handleRefreshClick:J,currentActionTab:V,lpTokenInfo:x})]})]})]}):t.jsx(jt,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsxs(P,{children:[t.jsx(b,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),t.jsx(We,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{U("/vaults")},children:"Back to Vault"})]})})})}export{$o as default};
//# sourceMappingURL=VaultsDetailPage-BH2JFgIA.js.map
