import{a as u,ab as Qe,j as t,V as Ne,H as le,I as hi,T as K,R as bi,v as Te,f as Se,a2 as ki,a3 as Ai,a4 as Si,a5 as wi}from"./vendor-DYqnJE5Q.js";import{c as Pe,e as _i,b as vi,a as Ri,f as Ci,Z as ji,R as Li}from"./ZapSwitch-CnQbWFBt.js";import{a as qi,u as Fi}from"./useTransaction-C8ePpdpE.js";import{u as Be}from"./global-C1pBzQJD.js";import{a as We,e as Mi,u as Ie,f as fi}from"./usePositionList-D05K6WzV.js";import{a as we,b as ei}from"./useNotifiSubscription-QRXlC0b7.js";import{f as $e}from"./index-CLeAvPox.js";import{u as zi}from"./useAccountBalance-CDBGOyMu.js";import{a as Ni,k as ii,R as ye,I as Wi,B as ti,y as Vi,M as Ei,e as Zi,d as a,am as oe,m as Ui,r as Ae,o as Gi,U as Hi,j as Je,i as Ke,W as Xi,D as ke,X as Oe,c as $i}from"./index-fbeVIhEM.js";import{u as Ji}from"./usePosAdd-CZIWh6RK.js";import{M as ze}from"./msafe-oYBkW7LJ.js";import{v as Ye}from"./v4-C6aID195.js";import{T as Ki}from"./TradeInputGroup-06Fthxj6.js";import{A as Oi}from"./index-H1G6gTNM.js";import{u as Yi,R as De}from"./ExpendItem-CzuBMiYv.js";function Di(i,p){return{currentApiPoolInfo:u.useMemo(()=>{if(i!=null&&i.clmmPool)return p==null?void 0:p[i==null?void 0:i.clmmPool]},[i==null?void 0:i.clmmPool,p])}}const Qi="/assets/img_farming@2x-CwRUS-3E.png";function Pi(){Ni();const{currentPosBaseInfo:i,farmsPosRewardsData:p,posPoolsRelatedData:T,posBaseListLoading:e,posPoolsOriginalData:v}=We(),{currentPosPoolInfo:n}=we(),{currentAccount:r}=ii(),{getCurrentPosBaseInfo:R}=ei(),{getFarmsRewardsData:H}=Mi(),{getClmmPosName:X}=Ie(),O=u.useMemo(()=>{var l;if(i!=null&&i.tokenName)return i==null?void 0:i.tokenName;{const d=(l=v==null?void 0:v[i==null?void 0:i.clmmPool])==null?void 0:l.index;return X(i==null?void 0:i.index,d)||""}},[i==null?void 0:i.tokenName,i==null?void 0:i.index,i==null?void 0:i.clmmPool,v]),$=T[i==null?void 0:i.posId],J=($==null?void 0:$.currentStatus)=="Active",y=p[i==null?void 0:i.id],W=(n==null?void 0:n.farmsRewarderList)||[],Y=y==null?void 0:y.reduce((l,d)=>l+d.display_amount_owed,0),{toStakePos:h,toUnStakePos:q,toClaimPos:D,unstakeLoading:m,claimLoading:c}=Yi(),g=Qe(),A=l=>{g(`/position-detail/${l[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{R(r==null?void 0:r.address,l[0].parsedJson.wrapped_position_id,!0)},2e3)},b=async()=>{h(i==null?void 0:i.id,n==null?void 0:n.farmsPoolAddress,O,A)},Z=()=>{g(`/position-detail/${i==null?void 0:i.posId}`,{replace:!0}),setTimeout(()=>{R(r==null?void 0:r.address,i==null?void 0:i.posId,!0)},2e3)},U=async()=>{q(i==null?void 0:i.id,i==null?void 0:i.farmsPool,O,Z)},ge=()=>{setTimeout(()=>{H([i])},2e3)},ee=async()=>{D(i==null?void 0:i.id,i==null?void 0:i.farmsPool,ge)},de=u.useMemo(()=>(y==null?void 0:y.length)>0?y.reduce((l,d)=>ye(l).plus(d==null?void 0:d.display_amount_owed).toString(),"0"):"0",[y,r==null?void 0:r.address,c,m]);return t.jsx(t.Fragment,{children:((n==null?void 0:n.farmsPoolAddress)||ye(de).gt(0))&&t.jsxs(Ne,{w:"100%",children:[t.jsxs(le,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Qi,bgSize:"100% 100%",justify:"space-between",children:[t.jsxs(Ne,{align:"flex-start",children:[t.jsxs(le,{children:[t.jsx(hi,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),t.jsx(K,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),t.jsx(K,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),t.jsxs(le,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:t.jsx(Oi,{poolInfo:n,isPosition:!0,showAprSize:"12px"})}),t.jsxs(le,{gap:"4px",cursor:"pointer",onClick:()=>g("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[t.jsx(K,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),t.jsx(Wi,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),t.jsxs(ti,{mt:"-20px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:"0 0 12px 12px",borderTop:"none",children:[t.jsx(K,{children:"Farming Rewards"}),t.jsx(le,{w:"100%",flexWrap:"wrap",children:(y==null?void 0:y.length)>0&&ye(de).gt(0)?y==null?void 0:y.map(l=>{var d;return t.jsx(bi.Fragment,{children:ye(l==null?void 0:l.display_amount_owed).gt(0)&&t.jsx(De,{coinType:(d=l==null?void 0:l.token)==null?void 0:d.coin_type,amount:l==null?void 0:l.display_amount_owed,tokenInfo:l==null?void 0:l.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)},l==null?void 0:l.rewarder_type)}):(W==null?void 0:W.length)>0?W==null?void 0:W.map(l=>t.jsx(De,{coinType:l==null?void 0:l.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)):t.jsx(K,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),t.jsxs(le,{w:"100%",justify:"space-between",mt:"16px",children:[(i==null?void 0:i.posType)=="farms"&&t.jsx(Te,{disabled:c||m,isLoading:m,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:U,children:"Unstake"}),(i==null?void 0:i.posType)=="clmm"&&!J&&t.jsx(Se,{w:"50%",sx:{">button":{w:"100%"}},children:t.jsx(Vi,{placement:"top",tooltip:t.jsx(K,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:t.jsx(Se,{w:"100%",children:t.jsx(Te,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),(i==null?void 0:i.posType)=="clmm"&&J&&t.jsx(Te,{disabled:c||m,isLoading:m,h:"40px",w:"50%",fontSize:"14px",onClick:b,children:"Stake"}),t.jsx(Te,{disabled:c||m||ye(Y).eq(0),isLoading:c,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:ee,children:"Claim rewards"})]})]})]})})}function Bi({action:i,haveZap:p,resetInputAmount:T}){const{useZapIn:e,setUseZapIn:v}=we(),{setZapAmount:n,setPreDepositeData:r}=Pe(),R=()=>{T==null||T(),v(!e),n("")};return u.useEffect(()=>{v(!1),r(void 0)},[i]),t.jsxs(le,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[t.jsx(K,{color:"primary_gray",fontSize:"14px",children:i==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),t.jsx(_i,{action:i,value:e,onChange:R})]})}function Ii(){const{clmmSdk:i}=Ei(),{peripherySdk:p}=Zi(),{slippage:T}=Be();return{getRemoveTsPayload:async n=>{const{posId:r,poolAddress:R,coinTypeA:H,coinTypeB:X,amountA:O,amountB:$,liquidity:J,lowerTick:y,upperTick:W,posType:Y,rewarderCoinTypes:h,farmsPoolId:q,farmsPosId:D}=n,m=a(O).mul(a(1).sub(a(T))),c=a($.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",m,c),Y==="clmm"){const g={coinTypeA:H,coinTypeB:X,pool_id:R,pos_id:r,delta_liquidity:J,min_amount_a:oe(m.toString(),0)||"",min_amount_b:oe(c.toString(),0)||"",collect_fee:!0,rewarder_coin_types:h};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",g);const A=await i.Position.removeLiquidityTransactionPayload(g),b={action:ze.DecreaseLiquidity,txbParams:g};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",A,b),{tx:A,msafeParams:b}}else{const g={pool_id:q||"",coinTypeA:H,coinTypeB:X,position_nft_id:D||"",clmm_pool_id:R,min_amount_a:oe(m.toString(),0)||"",min_amount_b:oe(c.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:h,delta_liquidity:J,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",g);const A=await p.Farms.removeLiquidityPayload(g),b={action:"FarmingDecreaseLiquidity",txbParams:g};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",b,A),{tx:A,msafeParams:b}}},getCloseTsPayload:async n=>{const{posId:r,poolAddress:R,coinTypeA:H,coinTypeB:X,amountA:O,amountB:$,liquidity:J,lowerTick:y,upperTick:W,posType:Y,rewarderCoinTypes:h,farmsPoolId:q,farmsPosId:D}=n,m=a(O).mul(a(1).sub(a(T))),c=a($.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",n,m.toString(),c.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",h),Y==="clmm"){const g={coinTypeA:H,coinTypeB:X,pool_id:R,pos_id:r||"",min_amount_a:oe(m.toString(),0)||"",min_amount_b:oe(c.toString(),0)||"",rewarder_coin_types:h,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",g);const A=await i.Position.closePositionTransactionPayload(g),b={action:ze.RemoveLiquidity,txbParams:g};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",A,b),{tx:A,msafeParams:b}}else{const g={pool_id:q||"",coinTypeA:H,coinTypeB:X,position_nft_id:D||"",clmm_pool_id:R,min_amount_a:oe(m.toString(),0)||"",min_amount_b:oe(c.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:h,delta_liquidity:J,unstake:!0,close_position:!0,clmm_position_id:r};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",g);const A=await p.Farms.removeLiquidityPayload(g),b={action:ze.FarmingRemoveLiquidity,txbParams:g};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",b,A),{tx:A,msafeParams:b}}}}}function et(){const{transactionConfirmation:i}=qi(),{getTokenAmountValue:p}=Ui(),{getCoinAmountFromLiquidity:T}=fi(),{currentPosBaseInfo:e,posLiquidityData:v,posRewardsData:n,setPosBaseList:r,posApiPoolData:R}=We(),{getCurrentPosBaseInfo:H}=ei(),{preAdd:X}=Ji(),{getRemoveTsPayload:O,getCloseTsPayload:$}=Ii(),{getTokenALock:J,getTokenBLock:y}=Ie(),{setTokenAmountAfterA:W,setTokenAmountAfterB:Y,currentPosPoolInfo:h,currentPoolSqrtPrice:q,setIsFixedDisplayTokenA:D,slideValue:m,setSlideValue:c,isFixedDisplayTokenA:g,isPosDetailRefresh:A,currentPosDetailTab:b,useZapIn:Z,curPosContractPoolInfo:U}=we(),{getZapWithdrawToastInfo:ge,getZapWithdrawTx:ee,reCalculateZapData:de}=vi("Withdraw"),{getContractPoolInfo:l}=Ri(),{preDepositeData:d,currentZapToken:F,setZapAmount:C,zapAmount:_e}=Pe(),{currentApiPoolInfo:ae}=Di(e,R),ie=n[e==null?void 0:e.posId],{mevProtect:oi,maxCapForGas:li,transactionMode:ai,customGasPrice:si}=Be(),[S,V]=u.useState(""),[w,E]=u.useState(""),[ni,pe]=u.useState(!1),[ve,Re]=u.useState(""),Q=e==null?void 0:e.displayTokenA,P=e==null?void 0:e.displayTokenB,M=v[e==null?void 0:e.posId],f=Ae(M==null?void 0:M.displayCoinAmountA,void 0,!0),z=Ae(M==null?void 0:M.displayCoinAmountB,void 0,!0),di=p(Q==null?void 0:Q.coin_type,S),pi=p(P==null?void 0:P.coin_type,w);u.useEffect(()=>{if(+S||+w){const o=+S,s=+w;W(a(+f).sub(o).toString()),Y(a(z).sub(s).toString())}else W(""),Y("")},[S,w]);const[Ce,ue]=u.useState(""),Ve=u.useRef("");u.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",Ce),Ve.current=Ce},[Ce]);const he=()=>{V(""),E(""),pe(!1),ue(""),c("--")},Ee=u.useMemo(()=>J(e,U),[U==null?void 0:U.current_tick_index,e]),Ze=u.useMemo(()=>y(e,U),[U==null?void 0:U.current_tick_index,e]),je=e!=null&&e.isReverse?Ze:Ee,Le=e!=null&&e.isReverse?Ee:Ze,Ue=Gi((o,s,k)=>{var re,ne;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",o);const _=s?(re=e==null?void 0:e.displayTokenA)==null?void 0:re.decimals:(ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.decimals,j=Hi(o,_),x=e==null?void 0:e.tokenA,L=e==null?void 0:e.tokenB,B=e==null?void 0:e.lowerTick,me=e==null?void 0:e.upperTick,N=e==null?void 0:e.isReverse,G={amount:j,tokenA:x,tokenB:L,isTokenA:N?!s:s,lowerTick:B,upperTick:me,curSqrtPrice:q,isReverse:N,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",G);const{displayCoinAmountA:te,displayCoinAmountB:be,liquidityAmount:se}=X(G);if(console.log("ðŸš€ ~ debouncedPreCalculate:",te,be,G,s,k),Ve.current===k){Re(se),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",ve,se);const xe=Je(a(se).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);a(xe).gt(100)||a(xe).eq(100)?(c(100),V(f),E(z)):(c(xe),s?E(be||""):V(te||""))}else he();pe(!1)},500),[Ge,He]=u.useState(!1),qe=()=>{if((S||w)&&Xi(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",Ge,m),m==="--")return;if(Ge||Number(m)==100)Xe(Number(m));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const o=g?S:w;if(+o){const s=Ye();ue(s),Ue(o,g,s)}}}};u.useEffect(()=>{b=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",A,f,z),qe())},[f,z]);const mi=(o,s)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",o),He(!1),Re(""),!o){he();return}if(pe(!0),D(s),s){if(V(o),a(o).eq(f)){E(z),c(100),ue(""),pe(!1);return}}else if(E(o),a(o).eq(z)){V(f),c(100),ue(""),pe(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",o,+o),+o){const k=Ye();ue(k),console.log("ðŸš€ ~ handleAmountChange ~ params:",o),Ue(o,s,k)}else pe(!1),s?E(""):V("")},Xe=o=>{var s;if(He(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",f,z,o),Z){const _=((s=ae==null?void 0:ae.tokenA)==null?void 0:s.coin_type)===(F==null?void 0:F.coin_type)?Me:fe;if(o===100)C(_);else{const j=a(_).mul(a(o).div(100)).toString();C(j)}}else if(o==100)V(f),E(z);else{const k=e==null?void 0:e.tokenA,_=e==null?void 0:e.tokenB,j=Ae(a(e==null?void 0:e.liquidity).mul(o).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,j);const x=e==null?void 0:e.lowerTick,L=e==null?void 0:e.upperTick,B=e==null?void 0:e.isReverse,me={tokenA:k,tokenB:_,liquidity:j,currentSqrtPrice:q,lowerTick:x,upperTick:L,roundUp:!1};try{const{amountA:N,amountB:ce}=T(me);Re(j);const G=B?ce:N,te=B?N:ce;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",N,ce),V(a(G).gt(0)?G:""),E(a(te).gt(0)?te:"")}catch(N){console.log("ðŸš€ ~ changeSlideFun ~ error:",N),V(""),E("")}}},{currentAccount:I}=ii(),ci=u.useMemo(()=>{const o={text:"Remove",disabled:!1};return I!=null&&I.address?!+S&&!+w?(o.text="Enter an amount",o.disabled=!0,o):!je&&S&&a(S).gt(f||0)||!Le&&w&&a(w).gt(z||0)?(o.disabled=!0,o.text="Invalid Amount",o):((e==null?void 0:e.posType)=="burn"&&(o.disabled=!0),o):(o.text="Connect Wallet",o.disabled=!1,o)},[S,w,f,z,I==null?void 0:I.address]),{signAndExecuteTransaction:gi}=Fi(),{fetchAccountBalance:ui}=zi(),[ri,Fe]=u.useState(!1),xi=Qe(),yi=async()=>{var k,_,j;Fe(!0);const o=m==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",ie),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",h==null?void 0:h.miningRewardList);const s=o?!ie||(ie==null?void 0:ie.length)==0?(k=(h==null?void 0:h.miningRewardList)||[])==null?void 0:k.reduce((x,L)=>(x.push(L.coinType),x),[]):(_=ie||[])==null?void 0:_.reduce((x,L)=>(x.push(L.coin_address),x),[]):(j=ie||[])==null?void 0:j.reduce((x,L)=>(a(L==null?void 0:L.amount_owed).gt(0)&&x.push(L.coin_address),x),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",s);try{let x,L,B;if(Z){const N=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;B=ge(je,Le),i(B),x=await ee(N,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,s,(e==null?void 0:e.posType)=="farms")}else{const N=e!=null&&e.isReverse?a(w).mul(ke.pow(10,P.decimals)).toString():a(S).mul(ke.pow(10,Q.decimals)).toString(),ce=e!=null&&e.isReverse?a(S).mul(ke.pow(10,Q.decimals)).toString():a(w).mul(ke.pow(10,P.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",h,ie,s);const G={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:N,amountB:ce,liquidity:ve,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:s};(e==null?void 0:e.posType)=="farms"&&(G.farmsPoolId=e==null?void 0:e.farmsPool,G.farmsPosId=e==null?void 0:e.id),B={getShowInfo:(be,se)=>{const re="Remove "+[$e(S,Q==null?void 0:Q.symbol),$e(w,P==null?void 0:P.symbol)].filter(Boolean).join(" and "),ne={modalDescriptionText:re,toastTitleText:re};if(be==="success"){let xe=S,Ti=w;se&&(xe=Oe(se,Q)||S,Ti=Oe(se,P)||w),ne.toastDescriptionContent="",ne.modalDescriptionText="",ne.toastTitleText="Remove Liquidity Successful"}return ne}},i(B),console.log("ðŸš€ ~ toAdd ~ params:",ve,o,m,G);const te=o?await $(G):await O(G);x=te.tx,L=te.msafeParams}const me=await gi(x,B,{useMev:oi,useFastMode:ai==="Fast Mode",maxCapForGas:li,customGasPrice:si,msafeParams:L});console.log("ðŸš€ ~ toClaim ~ res:",me),me?(ui(),he(),C(""),o?(r([]),xi("/pools?tab=positions")):H(I==null?void 0:I.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&l(e==null?void 0:e.clmmPool).then(N=>{console.log("ðŸš€ ~ toClaim ~ res:",N),Z?de():qe()}),Fe(!1)}catch(x){qe(),Fe(!1),console.log("ðŸš€ ~ toClaim ~ error:",x)}};u.useMemo(()=>{if(e!=null&&e.posId){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,k=e==null?void 0:e.liquidity,_=e==null?void 0:e.lowerTick,j=e==null?void 0:e.upperTick;T({tokenA:o,tokenB:s,liquidity:k,currentSqrtPrice:q,lowerTick:_,upperTick:j,roundUp:!1})}},[e==null?void 0:e.posId,q]);const{onlyAmountA:Me,onlyAmountB:fe}=u.useMemo(()=>({onlyAmountA:M==null?void 0:M.onlyAmountA,onlyAmountB:M==null?void 0:M.onlyAmountB}),[M]);return u.useEffect(()=>{var o;if(Z)if(_e){const k=((o=ae==null?void 0:ae.tokenA)==null?void 0:o.coin_type)===(F==null?void 0:F.coin_type)?Me:fe;if(k){const _=Je(a(_e).div(k).mul(100).toString(),2,!0);c(_)}else c("--")}else c("--");else c("--")},[Z,_e]),u.useEffect(()=>{if(b!=="increase"&&Z){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",d),d!=null&&d.amount_a||d!=null&&d.amount_b){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,k=Ke(d==null?void 0:d.amount_a,o==null?void 0:o.decimals),_=Ke(d==null?void 0:d.amount_b,s==null?void 0:s.decimals);if(m==100)V(String(f)),E(String(z));else{const j=e!=null&&e.isReverse?_:k,x=e!=null&&e.isReverse?k:_;V(a(j).gt(f)?String(f):j),E(a(x).gt(z)?String(z):x)}return}V(""),E("")}},[Z,d,m]),u.useEffect(()=>{V(""),E("")},[]),{tokenAmountA:S,tokenAmountB:w,resetInputAmount:he,showDisplayTokenALock:je,showDisplayTokenBLock:Le,currentPosLiquidityData:M,tokenABalance:f,tokenBBalance:z,displayTokenA:Q,displayTokenB:P,tokenAmountValueA:di,tokenAmountValueB:pi,preRemoveLoading:ni,handleAmountChange:mi,btnStatusText:ci,changeSlideFun:Xe,toRemove:yi,isRemoveLoading:ri,onlyAmountA:Me,onlyAmountB:fe,currentApiPoolInfo:ae,currentPoolSqrtPrice:q}}function Tt(){const{currentPosBaseInfo:i,posPoolsRelatedData:p,posApiPoolData:T}=We(),{isFixedDisplayTokenA:e,slideValue:v,setSlideValue:n,curPosContractPoolInfo:r,useZapIn:R}=we(),{tokenAmountA:H,tokenAmountB:X,tokenABalance:O,tokenBBalance:$,displayTokenA:J,displayTokenB:y,tokenAmountValueA:W,tokenAmountValueB:Y,preRemoveLoading:h,handleAmountChange:q,changeSlideFun:D,btnStatusText:m,toRemove:c,isRemoveLoading:g,showDisplayTokenALock:A,showDisplayTokenBLock:b,resetInputAmount:Z,onlyAmountA:U,onlyAmountB:ge,currentApiPoolInfo:ee,currentPoolSqrtPrice:de,currentPosLiquidityData:l}=et();u.useEffect(()=>()=>{Z()},[]);const d=C=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",C),C=="MAX"||C==100?(n(100),D(100)):(n(Number(C.split("%")[0])),D(Number(C.split("%")[0])))};u.useEffect(()=>n("--"),[]);const F=p[i==null?void 0:i.posId];return t.jsxs(Ne,{w:"100%",gap:"8px",children:[t.jsxs(Se,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(ee==null?void 0:ee.haveZap)&&(i==null?void 0:i.posType)!=="burn"&&!A&&!b&&t.jsx(Bi,{action:"Withdraw",resetInputAmount:Z}),R?t.jsx(Ci,{action:"Withdraw",apiPoolInfo:ee,currentSqrtPrice:de,onlyAmountA:U,onlyAmountB:ge,liquidity:i==null?void 0:i.liquidity,lowerTick:i==null?void 0:i.lowerTick,upperTick:i==null?void 0:i.upperTick,slideValue:String(v),currentPosLiquidityData:l,changeSlideValue:d}):t.jsx(t.Fragment,{children:t.jsx(Ki,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:O||"",value:H,amountValue:W,loading:!e&&h,onChange:C=>{q(C,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:J,half:!1,lock:{isLock:i&&r&&A,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:$||"",value:X,amountValue:Y,loading:e&&h,onChange:C=>{q(C,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:y,half:!1,lock:{isLock:i&&r&&b,style:{borderRadius:"12px"}}},lock:{isLock:!i||!r||i&&(i==null?void 0:i.posType)=="burn",text:i&&(i==null?void 0:i.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(i==null?void 0:i.posType)!=="burn"&&t.jsxs(ti,{borderRadius:"12px",p:"16px",mt:"8px",children:[t.jsx(K,{color:"primary_gray",children:"Amount"}),t.jsx(it,{percentage:v,onChange:C=>d(C)})]})]}),R?t.jsx(ji,{action:"Withdraw",onClick:c,hideDepositRatio:!0,otherLoading:g}):t.jsx(Te,{isLoading:g,onClick:c,disabled:m.disabled||g,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:m.text}),(i==null?void 0:i.posType)!=="burn"&&t.jsx(Pi,{}),F&&(F==null?void 0:F.minPrice)!=="0"&&(F==null?void 0:F.maxPrice)!=="âˆž"&&t.jsx(Li,{subscriptionSource:"PositionDetail"})]})}function it(i){const{percentage:p,onChange:T}=i,e=u.useMemo(()=>(console.log("ðŸš€ ~ PositionSlider ~ percentage:",p),Number(p)!==100?`${p}%`:"MAX"),[p]),v=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}];return t.jsxs(Se,{children:[t.jsxs(le,{w:"100%",justifyContent:"space-between",m:"10px 0",children:[t.jsxs(K,{w:"84px",fontSize:"24px",color:"text_caption",children:[p=="--"?"--":a(p).gt(0)&&Number(p)<.01?"<0.01":Ae(p,2),"%"]}),t.jsx($i,{type:"outlineTab",tabList:v,currentTab:e,handleChangeTab:n=>{n.label==="MAX"?T(100):T(n.label.replace("%",""))},wrapStyle:{w:{base:"220px",lg:"300px"},h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsxs(ki,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:p=="--"?0:Number(p),onChange:n=>T(n+"%"),children:[t.jsx(Ai,{children:t.jsx(Si,{})}),t.jsx(wi,{})]})]})}export{Pi as F,it as P,Tt as R,Bi as T,Di as u};
//# sourceMappingURL=RemoveBlock-B-2lkBrv.js.map
