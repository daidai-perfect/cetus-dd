import{aE as Ds,aF as ft,aG as Gs,aH as Ks,u as _t,r as j,X as Mt,j as t,T as L,h as Qs,H as $,I as ye,b as we,V as W,g as Me,ac as vt,as as Y,e as wt,C as Ue,$ as me,l as Rt,k as Be,d as U,aI as zt,f as be,B as se,U as Yt,m as ge,aJ as jt,Y as Zt,aK as Xs,ah as Ve,aL as Ys,S as De,a1 as dt,a as Ke,aD as At,ad as Jt,ae as Pt,af as It,ag as es,ai as Zs,aj as ts,a0 as ss,W as Ct,aa as tt,aM as rs,aN as kt,a4 as is,az as Et,aO as ce,aP as Je,aQ as rt,aR as re,a6 as Js,aS as $t,aT as Ps,c as Lt,aU as Is,aV as er,ar as tr,aB as sr,an as qt,aW as We,aX as he,aY as rr,a9 as ir,aZ as nr,a_ as ar}from"./index-D49RffYW.js";import{A as cr}from"./index-BVFwDyvF.js";import{i as lr,R as dr,C as ur}from"./api-data-utils-D656F-wl.js";import{u as I}from"./index-DDipQFQp.js";import{u as de,a as or,P as xr,F as ns}from"./PositionListLoading-CCoJVjbJ.js";import{u as Ge}from"./useDocumentSize-Dm5SO9Fm.js";import{H as pr,T as gr,a as mr,u as yr,V as hr}from"./VolumeChart-DuZkwLxg.js";import{N as Oe}from"./NoData-MWQZy93S.js";import{A as br}from"./AddressUnderline-CPGiMg8E.js";import{T as fr}from"./TvlChart-CTm2RgYR.js";import{u as jr}from"./useBurn-BlABJCgq.js";import{H as xe}from"./HTextLabelBox-DVxTk_Ir.js";import{T as Ar}from"./TooltipIcon-BGEWyiwk.js";import{A as as}from"./AddressCopyLink-BnCAac35.js";import{P as Sr}from"./progress-C8tpxWAq.js";import{c as cs,d as _r,a as vr,u as wr}from"./usePositionList-CyCzZNts.js";import{u as Rr}from"./useRpcListener-D8tK2rVa.js";import{u as Re,a as ut,L as ls,b as Cr,c as kr,S as Pe}from"./useGetContractPoolInfo-a8mJ-Bmn.js";import{T as Lr}from"./TradeConfirmAmountInfo-BVFeG-79.js";import{P as Tr}from"./PositionStatus-Cy2qCSNc.js";import{R as Fr}from"./RangeAlerts-CxanDQq5.js";import{u as Br}from"./global-iZ7St_zm.js";import{c as Mr,g as it,a as nt,u as zr}from"./useGetPoolList-DBJielhS.js";import{u as ds}from"./useAccountBalance-D-weOZgA.js";import{u as at}from"./useTokenBalance-Cc02jFZo.js";import{u as Er,a as $r}from"./useTransaction-i5gFyneH.js";import{u as us,m as yt,S as Wt,a as qr}from"./SelectTokenAndFeeConfirm-DRca-sN7.js";import{u as Wr}from"./useNotifiSubscription-CuqMrTBs.js";import{u as Ur}from"./usePosAdd-vnaoQeks.js";import{L as ct}from"./LockInput-D8hYvbJh.js";import{S as os}from"./Slippage-C-5lq2_6.js";import{P as Ut,C as xs,I as lt}from"./common-Cb0tCgZ_.js";import{C as st}from"./CetusTooltip-7TnGbJNH.js";import{S as St}from"./switch-Dw_sCPfe.js";import{u as ps}from"./usePriceImpact-BMryGRgg.js";import{T as gs}from"./TradeInputGroup-C7m7R_Tz.js";import{i as qe}from"./index-BzKWeyUu.js";import{g as Hr}from"./liquidity-C80wvFzz.js";import{d as Ht,F as Nr}from"./FeeTierSelect-D2y7F8IR.js";import{u as ms}from"./useToken-BlS8b5ft.js";import{u as Or,a as Vr}from"./swapWidget-Bwyv3wuC.js";import{R as Dr}from"./RefreshButton-C1kwCG7k.js";import{C as Gr}from"./CurrentPrice-bArlFA15.js";import{W as Kr}from"./WarningTokenTipModal-Ffw8adfe.js";import"./useCurrentPos-CwMCqO3d.js";import"./PriceRange-BFhvNGCl.js";import"./SingleTokenInfo-Cvcahm1q.js";import"./RangeValue-B6IVaqEN.js";import"./debounce-B0JWIAw5.js";import"./index-CosTxpEh.js";import"./Pagination-DqVMPT3W.js";import"./tr-ChzXWjY-.js";import"./_getAllKeysIn-Caqnu8Ck.js";import"./YAxis-DLMNWJev.js";import"./throttle-DfDFquvd.js";import"./generateCategoricalChart-DoslVYNB.js";import"./linear-Cl5vGKe1.js";import"./index-Dmmexf3M.js";import"./progress.utils-4THQPte7.js";import"./usePreviousValue-D4m5LJZe.js";import"./ActionButton-CAHJhAqM.js";import"./VTextLabelBox-hTKeBwlM.js";import"./index-drVjB88T.js";import"./Loading-DBRuHM4S.js";import"./useXCetusHelper-wuRv4yeo.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-oZJ3kO4O.js";import"./icon_lock@2x-OdzkPjmc.js";import"./InputBox-cvzQCj0g.js";import"./useSwapHelper-CKwapxYx.js";var Qr=/\s/;function Xr(e){for(var s=e.length;s--&&Qr.test(e.charAt(s)););return s}var Yr=/^\s+/;function Zr(e){return e&&e.slice(0,Xr(e)+1).replace(Yr,"")}var Nt=NaN,Jr=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,Ir=/^0o[0-7]+$/i,ei=parseInt;function Ot(e){if(typeof e=="number")return e;if(Ds(e))return Nt;if(ft(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ft(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Zr(e);var r=Pr.test(e);return r||Ir.test(e)?ei(e.slice(2),r?2:8):Jr.test(e)?Nt:+e}var ht=function(){return Gs.Date.now()},ti="Expected a function",si=Math.max,ri=Math.min;function ys(e,s,r){var c,x,l,i,o,a,d=0,p=!1,g=!1,m=!0;if(typeof e!="function")throw new TypeError(ti);s=Ot(s)||0,ft(r)&&(p=!!r.leading,g="maxWait"in r,l=g?si(Ot(r.maxWait)||0,s):l,m="trailing"in r?!!r.trailing:m);function _(f){var y=c,A=x;return c=x=void 0,d=f,i=e.apply(A,y),i}function R(f){return d=f,o=setTimeout(u,s),p?_(f):i}function v(f){var y=f-a,A=f-d,S=s-y;return g?ri(S,l-A):S}function C(f){var y=f-a,A=f-d;return a===void 0||y>=s||y<0||g&&A>=l}function u(){var f=ht();if(C(f))return h(f);o=setTimeout(u,v(f))}function h(f){return o=void 0,m&&c?_(f):(c=x=void 0,i)}function n(){o!==void 0&&clearTimeout(o),d=0,c=a=x=o=void 0}function b(){return o===void 0?i:h(ht())}function w(){var f=ht(),y=C(f);if(c=arguments,x=this,a=f,y){if(o===void 0)return R(a);if(g)return clearTimeout(o),o=setTimeout(u,s),_(a)}return o===void 0&&(o=setTimeout(u,s)),i}return w.cancel=n,w.flush=b,w}var ve=(e=>(e.add="add_liquidity_event",e.remove="remove_liquidity_event",e.swap="swap_event",e))(ve||{});function ii(){const{clmmSdk:e}=Ks(),{fetchByApi:s}=_t();return{getTransactionsHistory:async x=>{try{const l=await s(lr,"GET",x);if(l)return l;throw new Error("no data")}catch(l){console.error(l,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(x,l)=>{try{const i=await e.Pool.getPoolTransactionList({poolId:x,paginationArgs:l,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(i)return i;throw new Error("no data")}catch(i){console.error(i,"getTransactionsHistoryBySDK ~ error")}}}}function ni(){const{getTransactionsHistoryBySDK:s}=ii(),[r,c]=j.useState(!0),[x,l]=j.useState([]),[i,o]=j.useState(1),[a,d]=j.useState(),[p,g]=j.useState(!0),{apiPoolInfo:m,manualRefresh:_,setManualRefresh:R}=I(),{poolAddress:v}=de();j.useEffect(()=>{l([]),o(1),d(void 0),g(!0)},[v]),j.useEffect(()=>{_&&(l([]),o(1),d(void 0),g(!0),C({cursor:void 0,limit:10}))},[v,_]);const C=async h=>{var n;try{if(!p)return;if(v){c(!0);const b=await s(v,{...h});if(b){const w=(n=b==null?void 0:b.data)==null?void 0:n.map(f=>{var k,q;const y=f==null?void 0:f.parsedJson,A=y!=null&&y.amount_a||y!=null&&y.atob?m==null?void 0:m.tokenA:m==null?void 0:m.tokenB,S=y!=null&&y.amount_b||y!=null&&y.atob?m==null?void 0:m.tokenB:m==null?void 0:m.tokenA;return{...f,type:(k=f.type)!=null&&k.includes("Add")?ve.add:(q=f.type)!=null&&q.includes("Remove")?ve.remove:ve.swap,items:[{amount:Mt(y!=null&&y.amount_a?y==null?void 0:y.amount_a:y==null?void 0:y.amount_in,A==null?void 0:A.decimals).toString(),address:A==null?void 0:A.coin_type,url:A==null?void 0:A.logo_url,symbol:A==null?void 0:A.symbol},{amount:Mt(y!=null&&y.amount_b?y==null?void 0:y.amount_b:y==null?void 0:y.amount_out,S==null?void 0:S.decimals).toString(),address:S==null?void 0:S.coin_type,url:S==null?void 0:S.logo_url,symbol:S==null?void 0:S.symbol}]}});h!=null&&h.cursor?l(f=>[...f,...w||[]]):l(w||[]),d(b==null?void 0:b.nextCursor),g(b==null?void 0:b.hasNextPage),c(!1)}}}catch{c(!1)}finally{c(!1)}};return Ge(()=>{C({cursor:a,limit:10})},[i,v],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:x,apiPoolInfo:m,currentPage:i,onCurrentPageChange:()=>{o(h=>h+1)},hasNextPage:p}}const Ie={[ve.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[ve.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[ve.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},ai=({type:e})=>{var s,r,c,x;return t.jsxs($,{children:[t.jsx(ye,{xlinkHref:(s=Ie[e])==null?void 0:s.icon,svgFill:(r=Ie[e])==null?void 0:r.color,svgHover:(c=Ie[e])==null?void 0:c.color}),t.jsx(L,{color:"text_caption",children:(x=Ie[e])==null?void 0:x.title})]})},ci=({items:e,type:s,isReverse:r})=>{var x,l;const{isApp:c}=we();return e?s===ve.swap?c?t.jsxs(W,{align:"flex-end",gap:"8px",children:[t.jsx($e,{item:e==null?void 0:e[0]}),t.jsxs($,{justify:"flex-end",children:[t.jsx(ye,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx($e,{item:e==null?void 0:e[1]})]})]}):t.jsxs($,{justify:"flex-end",gap:"8px",children:[t.jsx($e,{item:e==null?void 0:e[0]}),t.jsx(ye,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx($e,{item:e==null?void 0:e[1]})]}):c?t.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(x=e==null?void 0:e.filter(i=>!!+i.amount))==null?void 0:x.map(i=>t.jsx($e,{item:i},i==null?void 0:i.address))}):t.jsx($,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(l=e==null?void 0:e.filter(i=>!!+i.amount))==null?void 0:l.map(i=>t.jsx($e,{item:i},i==null?void 0:i.address))}):null},$e=({item:e})=>t.jsxs($,{gap:"4px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.url,w:"20px",h:"20px"}),t.jsx(L,{color:"text_caption",children:vt(e==null?void 0:e.amount)}),t.jsx(L,{children:Y(e==null?void 0:e.symbol,10)})]}),Vt=(e,s=!1)=>[{title:t.jsx(L,{children:"Event"}),key:"type",render:({type:r})=>t.jsx(ai,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>t.jsx(ci,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>t.jsx(br,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(e(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>t.jsx(L,{color:"text_caption",children:Qs(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function li(){const{getExplorerUrl:e}=wt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:x,onCurrentPageChange:l,hasNextPage:i}=ni(),{isApp:o}=we();return t.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[t.jsx($,{w:"100%",justify:"space-between",children:t.jsx(L,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?t.jsx(Oe,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):o?t.jsx(pr,{columns:Vt(e,c==null?void 0:c.isReverse),dataSource:r,loading:s&&x===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(a,d)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:a=>{window.open(e(a==null?void 0:a.tx,"tx"),"_blank")}}):t.jsx(gr,{columns:Vt(e,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&x===1,onRowClick:a=>{window.open(e(a==null?void 0:a.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),i&&t.jsx(Ue,{mt:{base:"40px",lg:"20px"},children:t.jsx(me,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:l,children:s?t.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var Tt=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(Tt||{}),hs=(e=>(e.volume="vol",e.tvl="pure_tvl",e.fees="fee",e))(hs||{}),bs=(e=>(e.d="D",e.w="W",e.m="M",e))(bs||{}),fs=(e=>(e.d="day",e.w="wek",e.m="mon",e))(fs||{});const di={D:40,W:30,M:20};function ui(){const[e,s]=j.useState("Volume"),[r,c]=j.useState("D"),[x,l]=j.useState([]),{apiPoolInfo:i}=I(),[o,a]=j.useState(!0),[d,p]=j.useState(null),{getHistogramData:g}=mr(),{poolAddress:m}=de(),{getHoverTime:_,time:R}=yr();j.useLayoutEffect(()=>{l([]),s("Volume"),c("D"),p(null)},[m]);const v=async()=>{if(m)try{a(!0);const w=await g({date_type:fs[r.toLowerCase()],type:hs[e.toLowerCase()],limit:di[r],address:m});w&&w.length&&l(w)}catch(w){throw console.error(w,"res-fetchAnalyticsData"),w}finally{a(!1)}};j.useEffect(()=>{v()},[m,e,r]),j.useEffect(()=>{d!=null&&d.date&&_(d==null?void 0:d.date,r)},[d==null?void 0:d.date,r]);const C=w=>{s(w.label),w.label!==e&&l([])},u=w=>{c(w.label),w.label!==r&&l([])},h=j.useMemo(()=>{if(e==="Volume")return{value:i==null?void 0:i.volume24Display,title:"Volume (24H)"};if(e==="TVL")return{value:i==null?void 0:i.tvlDisplay,title:"TVL"};if(e==="Fees")return{value:i==null?void 0:i.fees24Display,title:"Fees (24H)"}},[e,i==null?void 0:i.volume24Display,i==null?void 0:i.tvlDisplay,i==null?void 0:i.fees24Display]),n=Object.values(Tt).map(w=>({label:w})),b=Object.values(bs).map(w=>({label:w}));return{handleChartTabChange:C,handleDateTabChange:u,defaultDisplay:h,chartsTabs:n,dateTypes:b,chartLoading:o,analyticsData:x,hoverData:d,setHoverData:p,currentChartTab:e,currentDateType:r,time:R}}function oi(){const{isApp:e}=we(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:x,dateTypes:l,chartLoading:i,analyticsData:o,hoverData:a,setHoverData:d,currentChartTab:p,currentDateType:g,time:m}=ui();return t.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[t.jsxs($,{w:"100%",justify:{base:"center",lg:"space-between"},children:[t.jsx(Be,{type:"outlineTab",tabList:x,currentTab:p,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!e&&t.jsx(Be,{type:"outlineTab",tabList:l,currentTab:g,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsxs(W,{w:"100%",align:"flex-start",children:[t.jsx(L,{color:"text_caption",fontSize:"24px",children:(a==null?void 0:a.num)!==void 0&&a!==null?U(zt(a.num)).gte("0.01")||U(zt(a.num)).equals("0")?`$${be(a==null?void 0:a.num,2)}`:"<$0.01":c==null?void 0:c.value}),t.jsx(L,{children:a!=null&&a.date?m:c==null?void 0:c.title}),e&&t.jsx(Be,{type:"outlineTab",tabList:l,currentTab:g,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsx(se,{w:"100%",h:"340px",mt:"20px",children:t.jsxs(se,{w:"100%",h:"100%",position:"relative",children:[i&&t.jsx(se,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Rt,{})}),p===Tt.tvl?t.jsx(fr,{data:o,onChangeValue:_=>d(_)}):t.jsx(hr,{data:o,onChangeValue:_=>d(_),pageFrom:"pools"})]})})]})}const xi=(e,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{e(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{e(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{e(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{e(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{e(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{e(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{e(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{e(()=>({tvlLoading:r}))},resetTvlInfo:()=>{e(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ot=Yt(xi);function pi(){const{getBurnPositionAmountByPool:e}=jr(),{apiPoolInfo:s,contractPoolInfo:r}=I(),[c,x]=j.useState("0"),[l,i]=j.useState("0"),[o,a]=j.useState("0"),[d,p]=j.useState("0"),[g,m]=j.useState(!1),{poolAddress:_}=de(),{tokenAPrice:R,tokenBPrice:v}=ot(),C=async(u,h)=>{try{m(!0);const{totalA:n,totalB:b}=await e(u,h);x(n),i(b),R&&a(U(n).mul(R==null?void 0:R.price).toString()),v&&p(U(b).mul(v==null?void 0:v.price).toString())}catch{}finally{m(!1)}};return Ge(()=>{s&&(r!=null&&r.current_sqrt_price)&&C(s,r==null?void 0:r.current_sqrt_price)},[_,r==null?void 0:r.current_sqrt_price,R==null?void 0:R.price,v==null?void 0:v.price],{wait:500}),{burnAmountA:c,burnAmountB:l,burnAmountAUSD:o,burnAmountBUSD:d,loading:g}}function gi(){const{apiPoolInfo:e}=I(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:x,loading:l}=pi();return U(s).gt(0)||U(r).gt(0)?t.jsxs(ge,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[t.jsxs($,{children:[t.jsx(L,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),t.jsx(Ar,{type:"burnedLiquidity"})]}),t.jsxs(ge,{gap:"16px",flexDir:{base:e!=null&&e.isReverse?"column-reverse":"column",lg:e!=null&&e.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[t.jsx(Dt,{token:e==null?void 0:e.tokenA,amount:s,amountUSD:c,loading:l}),t.jsx(Dt,{token:e==null?void 0:e.tokenB,amount:r,amountUSD:x,loading:l})]})]}):null}const Dt=({token:e,amount:s,amountUSD:r,loading:c})=>t.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px"}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{color:"text_caption",fontSize:"16px",children:Y(e==null?void 0:e.symbol,10)}),t.jsx(L,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(xe,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(jt(s,e==null?void 0:e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(xe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:U(r).gt("0")?`$${Zt(jt(r,e==null?void 0:e.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function mi(){const{tokenAAmountUSD:e,totalAmountUSD:s}=ot(),r=j.useMemo(()=>{if(e&&s&&e!=="--"&&s!=="--"){const x=Xs(U(e).div(s).mul(100).toString(),2);return x==="NaN"?"--":x}return"--"},[e,s]),c=j.useMemo(()=>r&&r!=="--"?U(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const et=e=>e==="--"?"--":`${e}%`;function yi(){var g,m,_,R,v,C;const{apiPoolInfo:e,contractPoolInfo:s}=I(),{getExplorerUrl:r}=wt(),{poolAddress:c}=de(),{tokenAAmount:x,tokenBAmount:l,tokenAAmountUSD:i,tokenBAmountUSD:o,tvlLoading:a}=ot(),{tokenARatio:d,tokenBRatio:p}=mi();return t.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx($,{w:"100%",justify:"space-between",children:t.jsx(Ve,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),t.jsxs(Ys,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[t.jsx(xe,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:t.jsx(as,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),t.jsx(xe,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(e==null?void 0:e.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),t.jsx(xe,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||e!=null&&e.index?`#${(s==null?void 0:s.index)||(e==null?void 0:e.index)}`:"--",valueStyle:{fontSize:"14px"}}),t.jsx(xe,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${e==null?void 0:e.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx($,{justify:"flex-start",w:"100%",children:t.jsx(Ve,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),t.jsxs(W,{gap:"16px",w:"100%",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Me,{imageUrl:(g=e==null?void 0:e.displayTokenA)==null?void 0:g.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenA?(m=e==null?void 0:e.displayTokenA)==null?void 0:m.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:Y((_=e==null?void 0:e.displayTokenA)==null?void 0:_.symbol,10)}),a?t.jsx(De,{h:"12px"}):t.jsx(L,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(p):et(d)})]})]}),t.jsx(se,{w:"200px",children:t.jsx(Sr,{value:Number(e!=null&&e.isReverse?p:d),size:"xs",h:"4px",borderRadius:"4px",bg:[d,p].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[d,p].includes("--")?"background":"primary"}}})}),t.jsxs($,{gap:"12px",children:[t.jsxs(W,{align:"flex-end",gap:"4px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:Y((R=e==null?void 0:e.displayTokenB)==null?void 0:R.symbol,10)}),a?t.jsx(De,{h:"12px"}):t.jsx(L,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(d):et(p)})]}),t.jsx(Me,{imageUrl:(v=e==null?void 0:e.displayTokenB)==null?void 0:v.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenB?(C=e==null?void 0:e.displayTokenB)==null?void 0:C.coin_type:""})]})]}),t.jsxs(W,{w:"100%",flexDir:e!=null&&e.isReverse?"column-reverse":"column",gap:"16px",children:[t.jsx(Gt,{loading:a,token:e==null?void 0:e.tokenA,amount:x,amountUSD:i}),t.jsx(Gt,{loading:a,token:e==null?void 0:e.tokenB,amount:l,amountUSD:o})]})]})]})]})}const Gt=({token:e,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:x}=wt();return e?t.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px",coinType:e?e==null?void 0:e.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{color:"text_caption",fontSize:"16px",children:Y(e==null?void 0:e.symbol,10)}),t.jsx(L,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(as,{address:(e==null?void 0:e.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(x(e==null?void 0:e.coin_type,"coin"))})]}),t.jsx(xe,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(jt(s||"0",e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(xe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${be(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function hi(){return t.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[t.jsxs(ge,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[t.jsx(oi,{}),t.jsx(yi,{})]}),t.jsx(gi,{}),t.jsx(li,{})]})}function bi(){const{posBaseListLoading:e,posBaseListGroupByPool:s}=cs(),{manualRefresh:r}=I(),{currentAccount:c,onWalletModal:x}=dt(),{getPositionBaseList:l,getPosRelatedData:i}=_r(),[o,a]=j.useState(""),{poolAddress:d}=de(),p=async m=>{const _=await l(m);Array.isArray(_)&&i(_),typeof _=="string"&&a(_)};return j.useEffect(()=>{c!=null&&c.address&&p(c==null?void 0:c.address)},[c==null?void 0:c.address]),j.useEffect(()=>{r&&(c!=null&&c.address)&&p(c==null?void 0:c.address)},[r]),Rr({onRpcChange:()=>{c!=null&&c.address&&p(c==null?void 0:c.address)}}),{data:j.useMemo(()=>{if(d){const m=s[d.toLowerCase()||""];return m?m==null?void 0:m.list:[]}return[]},[d,JSON.stringify(s)]),rpcNodeErrorStr:o,posBaseListLoading:e,currentAccount:c,onWalletModal:x}}function fi(){const e=Ke(),{apiPoolInfo:s}=I(),{currentAccount:r,posBaseListLoading:c,data:x,rpcNodeErrorStr:l,onWalletModal:i}=bi();return t.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((o,a)=>t.jsx(or,{},a)):x&&(x==null?void 0:x.length)>0?x==null?void 0:x.map((o,a)=>t.jsx(xr,{positionInfo:o},o==null?void 0:o.posId)):l?t.jsx(Oe,{type:"nodata",text:l}):t.jsx(Oe,{type:"nodata",text:"You don't have positions for this pool",children:t.jsx(me,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>e(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):t.jsx(Oe,{type:"nowallet",onboard:()=>i(!0)})})}const ji=(e,s)=>({fromAmount:"",setFromAmount:r=>{e(()=>({fromAmount:r}))},fromAmountValue:"",setFromAmountValue:r=>{e(()=>({fromAmountValue:r}))},toAmount:"",setToAmount:r=>{e(()=>({toAmount:r}))},toAmountValue:"",setToAmountValue:r=>{e(()=>({toAmountValue:r}))},liquidityAmount:"",setLiquidityAmount:r=>{e(()=>({liquidityAmount:r}))},tokenMaxA:"",setTokenMaxA:r=>{e(()=>({tokenMaxA:r}))},tokenMaxB:"",setTokenMaxB:r=>{e(()=>({tokenMaxB:r}))},byAmountIn:!0,setByAmountIn:r=>{e(()=>({byAmountIn:r}))},isTokenA:!0,setIsTokenA:r=>{e(()=>({isTokenA:r}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:r=>{e(()=>({percentMap:r}))},isFullRange:!1,setIsFullRange:r=>{e(()=>({isFullRange:r}))},fromToken:void 0,setFromToken:r=>{e(()=>({fromToken:r}))},fromTokenLock:!1,setFromTokenLock:r=>{e(()=>({fromTokenLock:r}))},toToken:void 0,setToToken:r=>{e(()=>({toToken:r}))},toTokenLock:!1,setToTokenLock:r=>{e(()=>({toTokenLock:r}))},totalAmount:void 0,setTotalAmount:r=>{e(()=>({totalAmount:r}))},autoStakePosition:!1,setAutoStakePosition:r=>{e(()=>({autoStakePosition:r}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:r=>{e(()=>({isFarmRewardsRange:r}))},resetAddLiquidity:()=>{e(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),Ce=Yt(ji);function Ai(e){var y,A;const{onClose:s,onSubmit:r,data:{feeTier:c}}=e,{fromToken:x,toToken:l,fromAmount:i,toAmount:o,totalAmount:a,percentMap:d,fromTokenLock:p,toTokenLock:g}=Ce(),{lowerTickData:m,upperTickData:_}=Re(),{currentPriceData:R,apiPoolInfo:v}=I(),{setIsChecked:C}=At(),[u,h]=j.useState(!0),n=j.useMemo(()=>{var S;return((S=v==null?void 0:v.tokenA)==null?void 0:S.coin_type)===(x==null?void 0:x.coin_type)?!u:!!u},[v,x,l,u]),b=j.useMemo(()=>u?`${Y(l==null?void 0:l.symbol,10)} per ${Y(x==null?void 0:x.symbol,10)}`:`${Y(x==null?void 0:x.symbol,10)} per ${Y(l==null?void 0:l.symbol)}`,[u,x==null?void 0:x.symbol,l==null?void 0:l.symbol]),w=ys(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:f}=At();return t.jsxs(Jt,{isOpen:!0,onClose:()=>{s(),C(!1)},isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{children:[t.jsx(es,{children:t.jsx(Ve,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),t.jsx(Zs,{}),t.jsx(ts,{textAlign:"center",p:"0px",children:t.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[t.jsxs($,{w:"100%",justifyContent:"space-between",h:"40px",children:[t.jsxs($,{children:[t.jsx(ss,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:l==null?void 0:l.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:l==null?void 0:l.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(L,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${Y(x==null?void 0:x.symbol,10)} - ${Y(l==null?void 0:l.symbol,10)}`})]}),t.jsx(Ct,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:t.jsxs($,{gap:"12px",children:[t.jsx(L,{whiteSpace:"nowrap",children:"Fee Tier"}),t.jsx(L,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),t.jsx(Lr,{coinA:{amount:i,...x},coinB:{amount:o,...l}}),t.jsxs(se,{w:"100%",children:[t.jsxs($,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),t.jsx(Tr,{isActive:!p&&!g,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),t.jsxs($,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[t.jsx(L,{children:"Current Price"}),t.jsx(L,{as:"span",color:"text_caption",children:tt(n?R.reverseCurrentPrice:R==null?void 0:R.currentPrice,6)}),t.jsx(L,{children:b}),t.jsx(me,{variant:"unstyled",onClick:()=>h(!u),children:t.jsx(ye,{xlinkHref:"#icon-icon_swap1"})})]}),t.jsxs($,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[t.jsx(Kt,{title:"Min Price",price:tt(n?_==null?void 0:_.reversePrice:m==null?void 0:m.price,6),perText:b}),t.jsx(rs,{orientation:"vertical",h:"40px"}),t.jsx(Kt,{title:"Max Price",price:tt(n?m==null?void 0:m.reversePrice:_==null?void 0:_.price,6),perText:b})]})]}),t.jsx(xe,{isLoading:!1,label:"Deposit Ratio",value:`${d[(x==null?void 0:x.coin_type)===((y=v==null?void 0:v.tokenA)==null?void 0:y.coin_type)?"percentA":"percentB"]}% ${Y(x==null?void 0:x.symbol,10)} / ${d[(l==null?void 0:l.coin_type)===((A=v==null?void 0:v.tokenA)==null?void 0:A.coin_type)?"percentA":"percentB"]}% ${Y(l==null?void 0:l.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),t.jsx(xe,{isLoading:!1,label:"Total Amount",value:a&&+a?kt(a):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!p&&!g&&!((m==null?void 0:m.price)==="0"&&(_==null?void 0:_.price)==="∞")&&f=="authenticated"&&t.jsx(Fr,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),t.jsx(me,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:w,children:"Add Liquidity"})]})})]})]})}const Kt=({title:e,price:s,perText:r})=>t.jsxs(W,{flex:"1",children:[t.jsx(L,{children:e}),t.jsx(L,{color:"text_caption",children:s}),t.jsx(L,{children:r})]});function Si(e,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:x}=Ur();j.useState(!1);const{currentPriceData:l,apiPoolInfo:i,contractPoolInfo:o}=I(),{lowerTickData:a,upperTickData:d}=Re(),{signAndExecuteTransaction:p,getTransactionStatus:g,transactionSuccess:m}=Er(),{mevProtect:_,maxCapForGas:R,transactionMode:v,customGasPrice:C}=Br(),[u,h]=j.useState(!1),[n,b]=j.useState(!1),[w,f]=j.useState(""),{transactionConfirmation:y}=$r(),{fromAmount:A,setFromAmount:S,fromAmountValue:k,setFromAmountValue:q,toAmount:N,setToAmount:E,toAmountValue:X,setToAmountValue:Q,byAmountIn:K,setByAmountIn:ee,isTokenA:Z,setIsTokenA:V,percentMap:B,setPercentMap:F,isFullRange:G,setIsFullRange:J,fromToken:M,setFromToken:ue,toToken:T,setToToken:ie,totalAmount:ke,setTotalAmount:H,fromTokenLock:z,setFromTokenLock:P,toTokenLock:le,setToTokenLock:Qe,setTokenMaxA:ws,setTokenMaxB:Rs,tokenMaxA:Cs,tokenMaxB:ks,autoStakePosition:Ls,liquidityAmount:Ts,setLiquidityAmount:Fs}=Ce(),{getTokenAmountValue:Xe}=is();Et(()=>{var O,ne;i&&V(((O=i==null?void 0:i.displayTokenA)==null?void 0:O.coin_type)===((ne=i==null?void 0:i.tokenA)==null?void 0:ne.coin_type))},[i]);const{isWhiteQuoteToken:Bs}=us(),{notifiSubscription:Ms}=Wr(),{isChecked:zs}=At();Ge(()=>{if(G){F({percentA:"50",percentB:"50"});return}if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&typeof(o==null?void 0:o.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(d==null?void 0:d.tick)!==void 0&&l.currentSqrtPrice){if(ce(a.tick).lte(o.current_tick_index)&&ce(d.tick).gt(o.current_tick_index)){const O=Bs(i.tokenA.coin_type)?i.tokenA:i.tokenB,ne=O.coin_type===i.tokenA.coin_type,pe=r({amount:Je("1",O.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ne,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0}),fe=Mr(pe.coinAmountA,pe.coinAmountB,l==null?void 0:l.currentPrice,G);F(fe);return}if(ce(a.tick).gt(o.current_tick_index)){F({percentA:"100",percentB:"0"});return}if(ce(d.tick).lte(o.current_tick_index)){F({percentA:"0",percentB:"100"});return}}},[JSON.stringify(i),l,a==null?void 0:a.tick,d==null?void 0:d.tick,G],{wait:300});const Es=({amount:O,isTokenA:ne,isFullRange:pe})=>{var fe,Le,Te,Fe;if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&Object.keys(l).length>0&&(a==null?void 0:a.tick)!==void 0&&(d==null?void 0:d.tick)!==void 0&&M&&T){let D;if(typeof(o==null?void 0:o.current_tick_index)=="number"&&ce(a==null?void 0:a.tick).lte(o==null?void 0:o.current_tick_index)&&ce(d==null?void 0:d.tick).gt(o==null?void 0:o.current_tick_index))D=r({amount:Je(O&&+O?O+"":"1",K?M==null?void 0:M.decimals:T==null?void 0:T.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ne,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0});else if(z&&!le){const ae=(T==null?void 0:T.coin_type)===((fe=i==null?void 0:i.tokenA)==null?void 0:fe.coin_type);D=r({amount:Je(O?O+"":"1",T==null?void 0:T.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else if(le&&!z){const ae=(M==null?void 0:M.coin_type)===((Le=i==null?void 0:i.tokenA)==null?void 0:Le.coin_type);D=r({amount:Je(O?O+"":"1",M==null?void 0:M.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else z&&le&&(D=ne?{coinAmountA:O?O+"":"1",coinAmountB:"",tokenMaxA:O?O+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:O?O+"":"1",tokenMaxA:"",tokenMaxB:O?O+"":"1"});if(ws(D==null?void 0:D.tokenMaxA),Rs(D==null?void 0:D.tokenMaxB),O)if(ce(O).gt("0"))if(K){const ae=(T==null?void 0:T.coin_type)===((Te=i==null?void 0:i.tokenA)==null?void 0:Te.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,je=Xe(M==null?void 0:M.coin_type,O+""),Ae=Xe(T==null?void 0:T.coin_type,ae),ze=ce(je).plus(Ae).toString();E(ae||""),q(je),Q(Ae),H(ze)}else{const ae=(M==null?void 0:M.coin_type)===((Fe=i==null?void 0:i.tokenA)==null?void 0:Fe.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,je=Xe(M==null?void 0:M.coin_type,ae),Ae=Xe(T==null?void 0:T.coin_type,O+""),ze=ce(je).plus(Ae).toString();q(je),Q(Ae),S(ae||""),H(ze)}else K?(E(""),q(""),Q(""),H("")):(S(""),q(""),Q(""),H(""));else S(""),E(""),q(""),Q(""),H("");D&&Fs((D==null?void 0:D.liquidityAmount)||"")}};Ge(()=>{Es({amount:K?A:N,isTokenA:Z,isFullRange:G})},[JSON.stringify(i),l,a==null?void 0:a.tick,d==null?void 0:d.tick,A,N,K,Z,z,le,G],{wait:300});const $s=(O,ne,pe)=>{ee(ne),ne?S(O):E(O),V(pe!==void 0?pe:!1)},{balanceInfo:qs}=at(M),{balanceInfo:Ws}=at(T);Et(()=>{var O,ne;V(K?(M==null?void 0:M.coin_type)===((O=i==null?void 0:i.tokenA)==null?void 0:O.coin_type):(T==null?void 0:T.coin_type)===((ne=i==null?void 0:i.tokenA)==null?void 0:ne.coin_type))},[i,K,M,T]),j.useEffect(()=>{(a==null?void 0:a.tick)===rt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(d==null?void 0:d.tick)===rt.getMaxIndex(Number((d==null?void 0:d.tickSpacing)||0))?J(!0):J(!1)},[a==null?void 0:a.tick,d==null?void 0:d.tick]),j.useEffect(()=>{(o==null?void 0:o.current_tick_index)!==void 0&&re(a)&&re(d)&&(ce(a==null?void 0:a.tick).gte(ce(d.tick))?(P(!0),Qe(!0)):ce(a==null?void 0:a.tick).gt(o==null?void 0:o.current_tick_index)?(P(!s),Qe(!!s)):ce(d.tick).lte(o==null?void 0:o.current_tick_index)?(P(!!s),Qe(!s)):(P(!1),Qe(!1)))},[a==null?void 0:a.tick,d==null?void 0:d.tick,o,s]);const{currentAccount:Us,onWalletModal:Hs}=dt(),Ns=ys(()=>{Us?h(!0):Hs(!0)},300,{leading:!0,trailing:!1}),Os=()=>{S(""),E(""),q(""),Q(""),H("")},{fetchAccountBalance:Vs}=ds();return{percentMap:B,handleAmountChange:$s,fromToken:M,setFromToken:ue,toToken:T,setToToken:ie,byAmountIn:K,setByAmountIn:ee,fromAmount:A,fromAmountValue:k,setFromAmount:S,toAmount:N,toAmountValue:X,setToAmount:E,liquidityAmount:Ts,fromBalanceInfo:qs,toBalanceInfo:Ws,totalAmount:ke,fromTokenLock:z,toTokenLock:le,handleAdd:Ns,confirmModalOpen:u,setConfirmModalOpen:h,nftOpen:n,setNftOpen:b,relatedPosId:w,handleSubmit:async()=>{var Ae,ze,Ft;const O=K?A:N,ne=K?M==null?void 0:M.decimals:T==null?void 0:T.decimals,pe=ce(O).mul(Js.pow(10,ne)).toString(),fe=K&&(M==null?void 0:M.coin_type)===((Ae=i==null?void 0:i.tokenA)==null?void 0:Ae.coin_type)?!0:(T==null?void 0:T.coin_type)===((ze=i==null?void 0:i.tokenA)==null?void 0:ze.coin_type)&&!K;let Le,Te;const Fe=a.tick,D=d.tick,ae=o==null?void 0:o.current_tick_index;Fe!==void 0&&D!==void 0&&ae!==void 0&&(ae>=Fe&&ae<=D?(Le=fe?pe:Cs,Te=fe?ks:pe):ae>D?(Le=0,Te=pe):ae<Fe&&(Le=pe,Te=0));let je=[];if(o!=null&&o.index){const{rewarder_infos:oe}=o;je=(oe==null?void 0:oe.length)>0&&(oe==null?void 0:oe.map(He=>He.coinAddress))||[]}try{const oe={poolAddress:o==null?void 0:o.poolAddress,coinTypeA:o==null?void 0:o.coinTypeA,coinTypeB:o==null?void 0:o.coinTypeB,amountA:Le,amountB:Te,fixAmountA:fe,lowerTick:Fe,upperTick:D,currentSqrtPrice:o==null?void 0:o.current_sqrt_price,rewarderCoinTypes:je,farmsPoolId:i==null?void 0:i.farmsPoolAddress},He={getShowInfo:(te,Ee)=>{const Ye=!z&&!le?`Add ${A} ${M==null?void 0:M.symbol} and ${N} ${T==null?void 0:T.symbol}`:le?z?"Add Liquidity":`Add ${A} ${M==null?void 0:M.symbol}`:`Add ${N} ${T==null?void 0:T.symbol}`,Ze={modalDescriptionText:Ye,toastTitleText:Ye};if(te==="success"){let gt=A,mt=N;Ee&&(gt=$t(Ee,M)||A,mt=$t(Ee,T)||N);const Bt=!z&&!le?`Add ${gt} ${M==null?void 0:M.symbol} and ${mt} ${T==null?void 0:T.symbol}`:!z&&le?`Add ${gt} ${M==null?void 0:M.symbol}`:!le&&z?`Add ${mt} ${T==null?void 0:T.symbol}`:"Add Liquidity";Ze.toastDescriptionContent=Bt,Ze.modalDescriptionText=Bt,Ze.toastTitleText="Supplied Successful"}return Ze}};y(He);let xt,pt;if(Ls){const te=await x(oe);xt=te==null?void 0:te.tx,pt=te==null?void 0:te.msafeParams}else{const te=await c(oe);xt=te==null?void 0:te.tx,pt=te==null?void 0:te.msafeParams}let Se=await p(xt,He,{useDevInspect:!0,useMev:_,showSuccessModal:!1,useFastMode:v==="Fast Mode",maxCapForGas:R,customGasPrice:C,msafeParams:pt});if(Se){((Ft=Se==null?void 0:Se.events)==null?void 0:Ft.length)===0&&(Se=await g(Se.digest));const{posId:te,farmsPosId:Ee}=Ps(Se);if(te?(b(!0),f(Ee||te)):m(He),zs){const Ye={subscriptionSource:"AddLiquidity",events:Se.events};Ms(Ye)}Vs(),Os(),e()}}catch(oe){throw console.error(oe,"handleSubmit ~ error"),new Error(oe)}}}}function _i(){const{fromAmount:e,toAmount:s,fromToken:r,toToken:c,fromTokenLock:x,toTokenLock:l,liquidityAmount:i}=Ce(),{currentAccount:o}=dt(),{balanceInfo:a}=at(r),{balanceInfo:d}=at(c),p=j.useMemo(()=>{const g={text:"Add Liquidity",disabled:!1};return o!=null&&o.address?!x&&!l&&(!e||!s||e&&!+e||s&&!+s)||x&&!l&&(!s||s&&!+s)||l&&!x&&(!e||e&&!+e)?(g.text="Enter an amount",g.disabled=!0,g):e&&+e&&U(e).gt((a==null?void 0:a.balanceFormat)||0)?(g.disabled=!0,g.text=`Insufficient ${Y(r==null?void 0:r.symbol,10)} Balance`,g):s&&+s&&U(s).gt((d==null?void 0:d.balanceFormat)||0)?(g.disabled=!0,g.text=`Insufficient ${Y(c==null?void 0:c.symbol,10)} Balance`,g):((!x&&!l&&(!e||!s)||U(i).lte("0"))&&(g.disabled=!0),g):(g.text="Connect Wallet",g.disabled=!1,g)},[o==null?void 0:o.address,e,s,a==null?void 0:a.balanceDisplay,d==null?void 0:d.balanceDisplay,r,c,x,l,i]);return{btnText:p.text,btnDisabled:p.disabled}}function vi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="∞"?Zt(1/(1-Number(U(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function wi({rangeTabList:e}){var N;const{apiPoolInfo:s}=I(),{fromToken:r,toToken:c,setFromToken:x,setToToken:l,byAmountIn:i,setByAmountIn:o,setIsFarmRewardsRange:a,setAutoStakePosition:d,fromTokenLock:p,toTokenLock:g,fromAmount:m,toAmount:_,setFromAmount:R,setToAmount:v}=Ce(),{lowerTickData:C,upperTickData:u}=Re(),[h,n]=j.useState(),{handleInitTickData:b}=ut(),{getLeverage:w}=vi();j.useEffect(()=>{var E;s&&n((E=s==null?void 0:s.displayTokenA)==null?void 0:E.coin_type)},[s==null?void 0:s.poolAddress]);const f=j.useMemo(()=>{var E;return h===((E=s==null?void 0:s.tokenA)==null?void 0:E.coin_type)},[h,(N=s==null?void 0:s.tokenA)==null?void 0:N.coin_type]),y=j.useMemo(()=>{var E,X,Q,K;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":f?`${Y((E=s==null?void 0:s.tokenB)==null?void 0:E.symbol,10)} per ${Y((X=s==null?void 0:s.tokenA)==null?void 0:X.symbol,10)}`:`${Y((Q=s==null?void 0:s.tokenA)==null?void 0:Q.symbol,10)} per ${Y((K=s==null?void 0:s.tokenB)==null?void 0:K.symbol,10)}`},[f,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),A=j.useMemo(()=>{const E=C==null?void 0:C.price,X=u==null?void 0:u.price;return w(E,X)},[C==null?void 0:C.price,u==null?void 0:u.price]),S=E=>{a(E.target.checked),E.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&b(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};j.useEffect(()=>{U(C==null?void 0:C.tick).eq(U(s==null?void 0:s.farmsEffectiveTickLower))&&U(u==null?void 0:u.tick).eq(U(s==null?void 0:s.farmsEffectiveTickUpper))?a(!0):a(!1)},[C==null?void 0:C.tick,u==null?void 0:u.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const k=j.useMemo(()=>(C==null?void 0:C.price)==="0"&&(u==null?void 0:u.price)==="∞",[C==null?void 0:C.price,u==null?void 0:u.price]),q=E=>{var X;E&&(E!=null&&E.coin_type)?n(E==null?void 0:E.coin_type):n((X=e==null?void 0:e.find(Q=>Q.key!==h))==null?void 0:X.key),x(c),l(r),o(!i),i?(v(m),R("")):(R(_),v(""))};return j.useEffect(()=>{s!=null&&s.haveFarming&&d(!(p||g))},[p,g,s==null?void 0:s.haveFarming]),j.useEffect(()=>{i&&p&&!g&&(R(""),v("")),!i&&!p&&g&&(R(""),v("")),i&&!p&&g&&v(""),!i&&p&&!g&&R(""),p&&g&&(R(""),v(""))},[p,g]),{direct:f,perText:y,handleChangeIsFarmRewardsRange:S,onReverseClick:q,leverage:A,currentRangeTab:h,isFullRange:k}}function Ri({onClose:e,posId:s,tokenA:r,tokenB:c,fee:x,isReverse:l}){const i=Ke(),[o,a]=j.useState(!0),{lowerTickData:d,upperTickData:p}=Re();return j.useLayoutEffect(()=>{l&&a(!1)},[l]),t.jsxs(Jt,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:e,isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{w:"400px",children:[t.jsx(es,{children:t.jsxs($,{justify:"space-between",w:"100%",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),t.jsx(me,{onClick:e,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:t.jsx(ye,{xlinkHref:"#icon-icon_close"})})]})}),t.jsx(ts,{children:t.jsxs(W,{gap:"36px",children:[t.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[t.jsx(ss,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),t.jsxs(L,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[Y(r==null?void 0:r.symbol,10)," - ",Y(c==null?void 0:c.symbol,10)]}),t.jsxs($,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[t.jsx(L,{fontSize:"14px",children:"Fee tier"}),t.jsx(L,{fontSize:"14px",color:"text_highlight",children:x})]})]}),t.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[t.jsxs(L,{color:"text_caption",whiteSpace:"nowrap",children:[o?be(d==null?void 0:d.price,6):be(p==null?void 0:p.reversePrice,6)," - ",o?be(p==null?void 0:p.price,6):be(d==null?void 0:d.reversePrice,6)]}),t.jsxs($,{children:[t.jsxs($,{gap:"0",children:[t.jsx(L,{color:"primary_gray",children:Y(o?l?r==null?void 0:r.symbol:c==null?void 0:c.symbol:l?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),t.jsx(L,{color:"primary_gray",children:" per "}),t.jsx(L,{color:"primary_gray",children:Y(o?l?c==null?void 0:c.symbol:r==null?void 0:r.symbol:l?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),t.jsx(ye,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:g=>{Lt(g),a(!o)}})]})]})]})}),t.jsx(Is,{p:"20px 0 0",children:t.jsx(me,{flex:"1",onClick:()=>i(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function js({perText:e,direct:s,minPriceData:r,maxPriceData:c,isFullRange:x=!1}){const{tickDataLoading:l}=Re(),{handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a}=ut();return t.jsxs(ge,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[t.jsx(Ut,{title:"Min Price",perText:e,data:r,direct:s,loading:l,handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a,isFullRange:x}),t.jsx(Ut,{title:"Max Price",perText:e,data:c,direct:s,loading:l,handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a,isFullRange:x})]})}const As=({minPrice:e,maxPrice:s,perText:r,checked:c,onChange:x,loading:l})=>t.jsxs($,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[t.jsxs(ge,{flexDir:{base:"column",lg:"row"},children:[t.jsxs($,{children:[t.jsx(ns,{tooltip:t.jsxs(se,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool.  ",t.jsx(se,{as:"a",color:"primary",onClick:i=>{Lt(i),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),t.jsx(L,{children:"Farm rewards range"})]}),t.jsxs($,{children:[l?t.jsx(De,{w:"120px",h:"14px"}):t.jsxs(L,{color:"primary_yellow",children:[e," - ",s]}),t.jsx(L,{children:r})]})]}),t.jsx(St,{isChecked:c,onChange:x})]}),Ss=({disabled:e,checked:s,onChange:r})=>t.jsxs($,{p:{base:"20px 8px",lg:"24px 24px 24px 16px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"0 0 20px 20px",lg:"20px"},bg:"bg_six",gap:"12px",children:[t.jsx(ns,{flex:"0 0 24px",h:"24px"}),t.jsx(L,{lineHeight:"20px",color:"text_caption",children:"Automatically stake your position into the farm to enjoy higher yield."}),e?t.jsx(st,{tooltip:t.jsxs(W,{gap:"4px",align:"flex-start",children:[t.jsx(L,{fontSize:"12px",children:"Farming rewards only available"}),t.jsx(L,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:t.jsx(St,{isChecked:s,disabled:e,onChange:r})}):t.jsx(St,{isChecked:s,disabled:e,onChange:r})]}),Ci=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function _s({direct:e,rangeMap:s,wrapStyle:r={}}){const[c,x]=j.useState({type:"30D",key:"30_d"}),{minPriceForDate:l,maxPriceForDate:i,setMinPriceForDate:o,setMaxPriceForDate:a}=I();j.useEffect(()=>{let p="";if(re(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],_=e?m:U(1).div(m).toString();p=be(_,6)}else p="-";o(p);let g="";if(re(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_highest`],_=e?m:U(1).div(m).toString();g=be(_,6)}else g="-";a(g)},[e,c.key,s]);const{isApp:d}=we();return t.jsxs($,{w:"100%",justify:"space-between",...r,children:[t.jsxs(ge,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[t.jsxs($,{children:[t.jsx(Ue,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:t.jsx(rs,{w:"14px",border:"1px dashed"})}),t.jsxs(L,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type," Price Range"]})]}),t.jsxs(L,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[e?l:i," - ",e?i:l]})]}),t.jsx(Be,{type:"outlineTab",tabList:Ci,currentTab:c,handleChangeTab:p=>{x({type:p.label,key:p.key})},isActive:(p,g)=>p.key===g.key,wrapStyle:{h:d?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:d?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function ki(){const{fetchByApi:e}=_t(),[s,r]=j.useState(""),c=async a=>{var d,p,g,m;try{const R=await e(dr,"GET",{pool:a}),v=((p=(d=R==null?void 0:R.list)==null?void 0:d[0])==null?void 0:p.recommend_ranges)||{},C=((m=(g=R==null?void 0:R.list)==null?void 0:g[0])==null?void 0:m.type)||"",u={};if(v)for(const h in v){const n=v[h];(n!=null&&n.lower||n!=null&&n.upper)&&(u[h]={lower:n.lower,upper:n.upper})}return{ranges:u,type:C}}catch(_){return console.error("Error in getRecommendRanges:",_),{ranges:{},type:""}}},x=(a,d)=>({default:{lower:a,upper:d,sort:3}}),l=a=>({"full range":{lower:rt.getMinIndex(a),upper:rt.getMaxIndex(a),sort:2}}),i=(a,d,p)=>{const g=U(p).mul(d==="unstable"?2:3).toNumber(),m=er(Number(a),Number(p));return{custom:{lower:U(m).sub(g).toNumber(),upper:U(m).add(g).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async a=>{try{const d=a.farmsEffectTickLower&&a.farmsEffectTickUpper?x(a.farmsEffectTickLower,a.farmsEffectTickUpper):null,p=a.farmsEffectTickLower&&a.farmsEffectTickUpper?{ranges:{},type:""}:await c(a.poolAddress);r(p.type);const g=l(a.tickSpacing),m=i(a.currentTick,p.type,a.tickSpacing),_={...d,...p.ranges,...g,...m},R=Object.entries(_).map(([v,C])=>({key:v,...C})).sort((v,C)=>C.sort-v.sort);return re(p.ranges)||re(d)?{rangeList:R,error:!1}:{rangeList:R,error:!0}}catch(d){return console.error("Error in getRecommendRangesList:",d),{rangeList:[],error:!0}}},poolType:s}}const bt=(e,s=!1)=>{switch(e){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Li=e=>{switch(e){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Ti={1:"100%",2:"50%",3:"33.33%",4:"50%"};function vs(e){const{getRecommendRangesList:s}=ki(),[r,c]=j.useState(),{poolAddress:x,currentTick:l,tickSpacing:i,farmsEffectTickLower:o,farmsEffectTickUpper:a}=e;we();const{handleInitTickData:d}=ut(),{apiPoolInfo:p,currentRange:g,setCurrentRange:m}=I(),{lowerTickData:_,upperTickData:R,setLowerTickData:v,setUpperTickData:C,setTickDataLoading:u,tickDataLoading:h}=Re(),n=async()=>{var b,w,f;try{g||u(!0);const{rangeList:y,error:A}=await s(e);if(c(y),A){if(m("custom"),!g&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)){const S=y.find(k=>k.key==="custom");S&&d(S==null?void 0:S.lower,S==null?void 0:S.upper,p)}}else m((b=y[0])==null?void 0:b.key),!g&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)&&d((w=y[0])==null?void 0:w.lower,(f=y[0])==null?void 0:f.upper,p)}catch(y){console.error(y)}finally{u(!1)}};return Ge(()=>{x&&l!==void 0&&i!==void 0&&n()},[x,i],{wait:500}),j.useEffect(()=>{if(r&&r.length>0&&re(_)&&re(R)){const b=r==null?void 0:r.find(w=>U(w.lower).eq(U(_==null?void 0:_.tick))&&U(w.upper).eq(U(R==null?void 0:R.tick)));b?b.key!==g&&m(b.key):m("custom")}},[_==null?void 0:_.tick,R==null?void 0:R.tick,r]),t.jsx(t.Fragment,{children:t.jsx(tr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((b,w)=>{var f,y;return t.jsx(sr,{label:Li(b.key),lineHeight:"1.5",placement:"top",gutter:-4,children:t.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Ti[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{b.key!==g&&(m(b.key),p!=null&&p.tokenA&&(p!=null&&p.tokenB)&&d(b.lower,b.upper,p))},bg:b.key==g?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[t.jsx(qt,{decoding:"async",display:b.key===g?"block":"none",src:`/images/${(f=bt(b.key,!0))==null?void 0:f.image}`,w:"72px",h:b.key===g?"22px":"0px",fallback:t.jsx(se,{bg:"background",w:"72px",h:b.key===g?"22px":"0px",borderRadius:"4px"})}),t.jsx(qt,{decoding:"async",display:b.key===g?"none":"block",src:`/images/${(y=bt(b.key,!1))==null?void 0:y.image}`,w:"72px",h:b.key===g?"0px":"22px",fallback:t.jsx(se,{bg:"background",w:"72px",h:b.key===g?"0px":"22px",borderRadius:"4px"})}),t.jsx(L,{color:b.key==g?"primary":"primary_gray",fontSize:"12px",children:bt(b.key).name})]})},b.key)})})})}function Fi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:l,perText:i,rangeTabList:o,currentRangeTab:a,addressHistTokensMap:d,fromBalanceInfo:p,toBalanceInfo:g,fromAmountValue:m,toAmountValue:_,handleAmountChange:R,handleAdd:v,isFullRange:C}){var ke;const{currentPriceData:u,contractPoolInfo:h,apiPoolInfo:n,resetLiquidity:b,contractPoolInfoLoading:w,apiPoolInfoLoading:f,minPriceForDate:y,maxPriceForDate:A}=I(),{lowerTickData:S,upperTickData:k}=Re(),{autoStakePosition:q,setAutoStakePosition:N,isFarmRewardsRange:E,fromAmount:X,toAmount:Q,byAmountIn:K,percentMap:ee,fromToken:Z,toToken:V,totalAmount:B,fromTokenLock:F,toTokenLock:G}=Ce(),{poolAddress:J}=de(),M=H=>{N(H.target.checked)},ue=j.useMemo(()=>{if(u!=null&&u.currentPrice&&u.pool===J)return u==null?void 0:u.currentPrice},[u==null?void 0:u.currentPrice]),{priceImpactBasedOnMarket:T}=ps(Z,V,l?"1":We(ue),l?We(ue):"1",!0),ie=j.useMemo(()=>{if(T&&U(T).abs().gte(30))return U(T).gte(30)?`+${U(T).toFixed(0)}%`:`${U(T).toFixed(0)}%`},[T]);return j.useMemo(()=>!!(n!=null&&n.haveFarming)&&!!(n!=null&&n.displayFarmsEffectMaxPrice)&&!!(n!=null&&n.displayFarmsEffectMinPrice),[n==null?void 0:n.haveFarming,n==null?void 0:n.displayFarmsEffectMaxPrice,n==null?void 0:n.displayFarmsEffectMinPrice]),t.jsxs(se,{w:"100%",children:[t.jsx(Ve,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),t.jsx(vs,{poolAddress:J,currentTick:h==null?void 0:h.current_tick_index,tickSpacing:h==null?void 0:h.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper}),f?t.jsx(De,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):t.jsx(Be,{type:"outlineTab",tabList:o,currentTab:a,handleChangeTab:H=>c(H),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),t.jsx(xs,{price:We(l?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6),perText:i,loading:w,wrapStyle:{mt:"28px",gap:"12px"}}),t.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:t.jsx(ls,{handleClickRefresh:()=>{},direct:l,minPriceData:l?S:k,maxPriceData:l?k:S,dashedMarkerLine:[y,A]})}),ie&&t.jsx(Ct,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",children:t.jsxs($,{children:[t.jsx(ye,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(L,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${ie}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),t.jsx(_s,{direct:l,rangeMap:d,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),t.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[t.jsx(js,{perText:i,direct:l,isFullRange:C,minPriceData:l?S:k,maxPriceData:l?k:S}),F&&G&&t.jsx(Ue,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),t.jsxs(W,{mb:"20px",gap:"16px",children:[t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:t.jsx(L,{color:"text_caption",children:F&&G?"--":x})}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&t.jsx(As,{minPrice:l?it(n==null?void 0:n.displayFarmsEffectMinPrice):nt(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:l?it(n==null?void 0:n.displayFarmsEffectMaxPrice):nt(n==null?void 0:n.displayFarmsEffectMinPrice),loading:f,perText:i,checked:E,onChange:r})]}),t.jsxs(se,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:[t.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsx(Ve,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),t.jsx($,{children:t.jsx(os,{})})]}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsxs(se,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:X+"",amountValue:m,loading:!1,onChange:H=>{var z;R(H,!0,(Z==null?void 0:Z.coin_type)===((z=n==null?void 0:n.tokenA)==null?void 0:z.coin_type))},selectable:!1,placeholder:"0.0",token:Z,onFocusChange:H=>{var z;H&&+(X+"")&&!K&&R(X+"",!0,(Z==null?void 0:Z.coin_type)===((z=n==null?void 0:n.tokenA)==null?void 0:z.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(g==null?void 0:g.balanceFormat)||"",value:Q+"",amountValue:_,loading:!1,onFocusChange:H=>{var z;H&&+(Q+"")&&K&&R(Q+"",!1,(V==null?void 0:V.coin_type)===((z=n==null?void 0:n.tokenA)==null?void 0:z.coin_type))},onChange:H=>{var z;R(H,!1,(V==null?void 0:V.coin_type)===((z=n==null?void 0:n.tokenA)==null?void 0:z.coin_type))},selectable:!1,placeholder:"0.0",token:V},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),F&&G&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((ke=[F,G].filter(Boolean))==null?void 0:ke.length)===1&&t.jsx(ct,{position:"absolute",top:F?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(n!=null&&n.poolAddress)&&t.jsx(t.Fragment,{children:t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[t.jsx(xe,{isLoading:!1,label:"Total Amount",value:B&&+B?kt(B):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:t.jsx(W,{justify:"flex-end",gap:"4px",children:[Z,V].filter(Boolean).map((H,z)=>{var P;return t.jsxs($,{gap:"4px",justify:"flex-end",w:"100%",children:[t.jsx(Me,{imageUrl:H==null?void 0:H.logo_url,coinType:H==null?void 0:H.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(L,{color:z===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[Y(H==null?void 0:H.symbol,10)," ",F&&G?"--":ee[(H==null?void 0:H.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type)?"percentA":"percentB"],"%"]})]},H==null?void 0:H.coin_type)})})})]})})]}),!!(n!=null&&n.poolAddress)&&t.jsx(me,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:v,children:e})]}),(n==null?void 0:n.haveFarming)&&t.jsx(Ss,{disabled:F||G,checked:q,onChange:M})]})]})}function Qt({children:e,title:s,wrapStyle:r={}}){return t.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[t.jsxs($,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),e==null?void 0:e[0]]}),e==null?void 0:e[1]]})}function Bi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:l,perText:i,rangeTabList:o,currentRangeTab:a,addressHistTokensMap:d,fromBalanceInfo:p,toBalanceInfo:g,fromAmountValue:m,toAmountValue:_,handleAmountChange:R,handleAdd:v,isFullRange:C}){var H;const{currentPriceData:u,contractPoolInfo:h,apiPoolInfo:n,resetLiquidity:b,contractPoolInfoLoading:w,apiPoolInfoLoading:f,minPriceForDate:y,maxPriceForDate:A,currentRange:S}=I(),{lowerTickData:k,upperTickData:q}=Re(),{autoStakePosition:N,setAutoStakePosition:E,isFarmRewardsRange:X,fromAmount:Q,toAmount:K,byAmountIn:ee,percentMap:Z,fromToken:V,toToken:B,totalAmount:F,fromTokenLock:G,toTokenLock:J}=Ce(),{poolAddress:M}=de(),ue=z=>{E(z.target.checked)},T=j.useMemo(()=>{if(u!=null&&u.currentPrice&&u.pool===M)return u==null?void 0:u.currentPrice},[u==null?void 0:u.currentPrice]),{priceImpactBasedOnMarket:ie}=ps(V,B,l?"1":We(T),l?We(T):"1",!0),ke=j.useMemo(()=>{if(ie&&U(ie).abs().gte(30))return U(ie).gte(30)?`+${U(ie).toFixed(0)}%`:`${U(ie).toFixed(0)}%`},[ie]);return t.jsx(t.Fragment,{children:t.jsxs($,{gap:"12px",align:"flex-start",children:[t.jsxs(Qt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!o||!o.length?t.jsx(De,{h:"32px",borderRadius:"8px",w:"180px"}):t.jsx(Be,{type:"outlineTab",tabList:o,currentTab:a,handleChangeTab:z=>c(z),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsx($,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:t.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[t.jsx($,{w:"100%",h:"24px",justify:"flex-start",children:t.jsx(xs,{loading:f,price:re(u)?We(l?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6):"--",perText:i,wrapStyle:{ml:"156px",zIndex:99}})}),t.jsxs($,{w:"100%",gap:"32px",alignItems:"start",children:[t.jsxs(W,{gap:"20px",children:[t.jsx(Ue,{h:"226px",mt:"10px",children:t.jsx(vs,{poolAddress:M,currentTick:h==null?void 0:h.current_tick_index,tickSpacing:h==null?void 0:h.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper})}),re(k)&&re(q)&&t.jsx(t.Fragment,{children:t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:t.jsx(L,{color:"text_caption",children:G&&J?"--":x})})})]}),t.jsxs(W,{w:"100%",gap:"32px",children:[t.jsx(se,{w:"100%",h:"230px",children:t.jsx(ls,{handleClickRefresh:()=>{},direct:l,minPriceData:l?k:q,maxPriceData:l?q:k,dashedMarkerLine:[y,A],currentRange:S})}),ke&&t.jsx(Ct,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",children:t.jsxs($,{children:[t.jsx(ye,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(L,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${ke}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),re(k)&&re(q)&&t.jsx(_s,{direct:l,rangeMap:d,wrapStyle:{w:"100%"}})]})]})]})}),t.jsx(js,{perText:i,direct:l,isFullRange:C,minPriceData:l?k:q,maxPriceData:l?q:k}),G&&J&&t.jsx(Ue,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&t.jsx(As,{minPrice:l?it(n==null?void 0:n.displayFarmsEffectMinPrice):nt(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:l?it(n==null?void 0:n.displayFarmsEffectMaxPrice):nt(n==null?void 0:n.displayFarmsEffectMinPrice),loading:f,perText:i,checked:X,onChange:r})]})]}),t.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[t.jsxs(Qt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[t.jsx($,{children:t.jsx(os,{})}),t.jsxs(se,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:Q,amountValue:m,loading:!1,onChange:z=>{var P;R(z,!0,(V==null?void 0:V.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:V,onFocusChange:z=>{var P;z&&+(Q+"")&&!ee&&R(Q+"",!0,(V==null?void 0:V.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(g==null?void 0:g.balanceFormat)||"",value:K,amountValue:_,loading:!1,onFocusChange:z=>{var P;z&&+(K+"")&&ee&&R(K+"",!1,(B==null?void 0:B.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},onChange:z=>{var P;R(z,!1,(B==null?void 0:B.coin_type)===((P=n==null?void 0:n.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:B},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),G&&J&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((H=[G,J].filter(Boolean))==null?void 0:H.length)===1&&t.jsx(ct,{position:"absolute",top:G?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),t.jsxs(t.Fragment,{children:[t.jsx(W,{w:"100%",gap:"8px",children:!!(n!=null&&n.poolAddress)&&(!G||!J)&&t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:n!=null&&n.displayTokenA&&(n!=null&&n.displayTokenB)?"0 16px 16px":"0 16px",children:[t.jsx(me,{w:"calc(100% + 34px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:v,children:e}),(n==null?void 0:n.displayTokenA)&&(n==null?void 0:n.displayTokenB)&&t.jsxs(t.Fragment,{children:[t.jsx(xe,{isLoading:!1,label:"Total Amount",value:F&&+F?kt(F):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:t.jsx($,{gap:"12px",children:[V,B].filter(Boolean).map((z,P)=>{var le;return t.jsxs($,{gap:"4px",children:[t.jsx(Me,{imageUrl:z==null?void 0:z.logo_url,coinType:z?z==null?void 0:z.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(L,{color:P===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[Y(z==null?void 0:z.symbol,10)," ",G&&J?"--":Z[(z==null?void 0:z.coin_type)===((le=n==null?void 0:n.tokenA)==null?void 0:le.coin_type)?"percentA":"percentB"],"%"]})]},z==null?void 0:z.coin_type)})})})]})]})}),(n==null?void 0:n.haveFarming)&&t.jsx(Ss,{disabled:G||J,checked:N,onChange:ue})]})]})]})})}function Mi({rangeTabList:e,currentFeeTier:s,addressHistTokensMap:r,getList:c,getPrice:x}){const{apiPoolInfo:l}=I(),{direct:i,perText:o,handleChangeIsFarmRewardsRange:a,onReverseClick:d,leverage:p,currentRangeTab:g,isFullRange:m}=wi({rangeTabList:e}),{handleAmountChange:_,fromAmountValue:R,toAmountValue:v,fromBalanceInfo:C,toBalanceInfo:u,confirmModalOpen:h,setConfirmModalOpen:n,relatedPosId:b,nftOpen:w,setNftOpen:f,handleAdd:y,handleSubmit:A}=Si(c,i),{btnText:S,btnDisabled:k}=_i(),{isApp:q}=we(),N={btnText:S,btnDisabled:k,handleChangeIsFarmRewardsRange:a,onReverseClick:d,leverage:p,direct:i,perText:o,rangeTabList:e,currentRangeTab:g,addressHistTokensMap:r,fromBalanceInfo:C,toBalanceInfo:u,fromAmountValue:R,toAmountValue:v,handleAmountChange:_,handleAdd:y,isFullRange:m};return t.jsxs(t.Fragment,{children:[q?t.jsx(Fi,{...N}):t.jsx(Bi,{...N}),h&&t.jsx(Ai,{onClose:()=>n(!1),data:{feeTier:s},onSubmit:A}),w&&b&&re(l)&&t.jsx(Ri,{onClose:()=>f(!1),tokenA:l==null?void 0:l.displayTokenA,tokenB:l==null?void 0:l.displayTokenB,posId:b,fee:l==null?void 0:l.feeDisplay,isReverse:l==null?void 0:l.isReverse})]})}const Xt=(e,s,r)=>e&&s&&r?U(e).mul(s).div(U(10).pow(r)).toString():"--";function zi(){var f,y;const{tokenAPrice:e,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:x,setTokenAAmount:l,tokenBAmount:i,setTokenBAmount:o,tokenAAmountUSD:a,setTokenAAmountUSD:d,tokenBAmountUSD:p,setTokenBAmountUSD:g,totalAmountUSD:m,setTotalAmountUSD:_,resetTvlInfo:R,tvlLoading:v,setTvlLoading:C}=ot(),{apiPoolInfo:u,contractPoolInfo:h}=I(),n=async A=>{var S,k;try{const q=(S=he(A))==null?void 0:S.full_address,N=q=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":q,{prices:E}=await rr(`${(k=ir)==null?void 0:k.cetus_api}/v2/sui/price?base_symbol_address=${N}`);return E==null?void 0:E[0]}catch{return"--"}},{poolAddress:b}=de(),w=async()=>{var A,S,k,q;C(!0);try{if((A=u==null?void 0:u.tokenA)!=null&&A.coin_type){const N=await n((S=u==null?void 0:u.tokenA)==null?void 0:S.coin_type);N&&s(N)}if((k=u==null?void 0:u.tokenB)!=null&&k.coin_type){const N=await n((q=u==null?void 0:u.tokenB)==null?void 0:q.coin_type);N&&c(N)}}catch{}finally{C(!1)}};return j.useEffect(()=>{R()},[b]),j.useEffect(()=>()=>{R()},[]),j.useEffect(()=>{w()},[u==null?void 0:u.tvl,(f=u==null?void 0:u.tokenA)==null?void 0:f.coin_type,(y=u==null?void 0:u.tokenB)==null?void 0:y.coin_type]),j.useEffect(()=>{h!=null&&h.coinAmountA&&l(U(h==null?void 0:h.coinAmountA).sub((h==null?void 0:h.fee_protocol_coin_a)||"0").toString())},[h==null?void 0:h.coinAmountA,h==null?void 0:h.fee_protocol_coin_a]),j.useEffect(()=>{h!=null&&h.coinAmountB&&o(U(h==null?void 0:h.coinAmountB).sub((h==null?void 0:h.fee_protocol_coin_b)||"0").toString())},[h==null?void 0:h.coinAmountB,h==null?void 0:h.fee_protocol_coin_b]),j.useEffect(()=>{x&&(e!=null&&e.price)&&(u!=null&&u.tokenA.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenA.decimals))&&d(Xt(x,e==null?void 0:e.price,u==null?void 0:u.tokenA.decimals))},[x,e]),j.useEffect(()=>{i&&(r!=null&&r.price)&&(u!=null&&u.tokenB.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenB.decimals))&&g(Xt(i,r==null?void 0:r.price,u==null?void 0:u.tokenB.decimals))},[i,r]),j.useEffect(()=>{_(a&&p&&a!=="--"&&p!=="--"?U(a).plus(p).toString():"--")},[a,p]),{tokenAPrice:e,tokenBPrice:r,tokenAAmount:x,tokenBAmount:i,tokenAAmountUSD:a,tokenBAmountUSD:p,totalAmountUSD:m,setTotalAmountUSD:_,tvlLoading:v}}function Ei(){const{tab:e,poolAddress:s,from:r,to:c,fee:x}=de(),{getPoolList:l}=zr(),[i,o]=j.useState([]),{apiPoolInfo:a,setApiPoolInfo:d,setApiPoolInfoLoading:p,setNetError:g}=I(),m=Ke(),{fetchTokenInfo:_}=ms(),R=async({poolAddress:v,from:C,to:u})=>{var h,n,b,w;try{p(!0);let f,y;if(v&&v!=="undefined"){const A=await l({pool:v});A&&A.list&&A.list.length?(y=A.list[0],f=await l({coin_type:`${(h=y==null?void 0:y.displayTokenA)==null?void 0:h.coin_type},${(n=y==null?void 0:y.displayTokenB)==null?void 0:n.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):a&&re(a)?(y=a,f={list:i}):(y={poolAddress:v,displayTokenA:void 0,displayTokenB:void 0},f={list:[]}),p(!1)}else if(C&&u&&C!=="undefined"&&u!=="undefined"&&C!==u){const A=await l({coin_type:`${C},${u}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(A&&A.list&&A.list.length)if(x&&x!=="undefined"){const S=(b=A==null?void 0:A.list)==null?void 0:b.find(k=>U(k==null?void 0:k.feeRate).eq(x));if(S)m(e?`/liquidity?tab=${e}&poolAddress=${S==null?void 0:S.poolAddress}`:`/liquidity?poolAddress=${S==null?void 0:S.poolAddress}`);else{const k=yt(A==null?void 0:A.list,q=>Number((q==null?void 0:q.tvl)||"0"));m(e?`/liquidity?tab=${e}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}}else{let S=yt(A==null?void 0:A.list,k=>Number((k==null?void 0:k.tvl)||"0"));S||(S=yt(A==null?void 0:A.list,k=>{var q;return Number(((q=k==null?void 0:k.object)==null?void 0:q.liquidity)||"0")}),S||(S=A==null?void 0:A.list[0])),m(e?`/liquidity?tab=${e}&poolAddress=${S==null?void 0:S.poolAddress}`:`/liquidity?poolAddress=${S==null?void 0:S.poolAddress}`)}else{const S=await _(C),k=await _(u);y={poolAddress:void 0,displayTokenA:S,displayTokenB:k},f={list:[]},p(!1)}}else(!C||C==="undefined")&&u&&u!=="undefined"&&(y={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await _(u)}),(!u||u==="undefined")&&C&&C!=="undefined"&&(y={poolAddress:void 0,displayTokenA:await _(C),displayTokenB:void 0}),f={list:[]},p(!1);f&&(g(!1),o(f==null?void 0:f.list),y&&(y!=null&&y.poolAddress&&v?(y==null?void 0:y.poolAddress)===v&&d(y):d(y))),p(!1)}catch(f){if(f!=null&&f.list&&((w=f==null?void 0:f.list)==null?void 0:w.length)===1){g(!0);const y=f==null?void 0:f.list[0];d(y),o([]),p(!1)}}};return j.useEffect(()=>{s&&s==="undefined"||R({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:R,relatedPoolList:i}}function $i(){var v,C,u,h;const{poolAddress:e}=de(),{apiPoolInfo:s,apiPoolInfoLoading:r}=I(),[c,x]=j.useState(),{fetchByApi:l}=_t(),{quoteWhiteTokenList:i}=us(),{getList:o,relatedPoolList:a}=Ei(),d=j.useMemo(()=>{var b,w;const n=Hr(a);return n?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(b=Ht)==null?void 0:b.map(f=>{var A,S;const y=((A=n.find(k=>k.feeRate===f.feeRate))==null?void 0:A.title)||f.title;return{...f,title:y,poolAddress:(S=n.find(k=>k.feeRate===f.feeRate))==null?void 0:S.poolAddress,disabled:y==="Not Created"&&!qe(s==null?void 0:s.tokenA,i)&&!qe(s==null?void 0:s.tokenB,i)}}):(w=Ht)==null?void 0:w.map(f=>{var A,S;const y=((A=n.find(k=>k.feeRate===f.feeRate))==null?void 0:A.title)||f.title;return{...f,title:y,poolAddress:(S=n.find(k=>k.feeRate===f.feeRate))==null?void 0:S.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,i)&&!qe(s==null?void 0:s.displayTokenB,i)}}):[]},[JSON.stringify(a),JSON.stringify(i),(v=s==null?void 0:s.displayTokenA)==null?void 0:v.coin_type,(C=s==null?void 0:s.displayTokenB)==null?void 0:C.coin_type]),p=j.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(n=>({label:n==null?void 0:n.symbol,key:n==null?void 0:n.coin_type,isToken:!0,imgInfo:{src:n==null?void 0:n.logo_url,w:"16px",h:"16px",coinType:n?n==null?void 0:n.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(u=s==null?void 0:s.displayTokenA)==null?void 0:u.symbol,(h=s==null?void 0:s.displayTokenB)==null?void 0:h.symbol]),g=j.useMemo(()=>{const n=d==null?void 0:d.find(b=>b.poolAddress===e);return n||s},[JSON.stringify(d),e,JSON.stringify(s)]),m=async n=>{let b=[];const w=await l(ur,"GET",{pool:n});b=Object.fromEntries(w.list.map(f=>[f.swap_account,f])),x(b)};j.useEffect(()=>{e&&m(e)},[e]);const _=j.useMemo(()=>{var n,b,w;return c&&e&&((n=c==null?void 0:c[e])!=null&&n.data)?Object.fromEntries((w=(b=c==null?void 0:c[e])==null?void 0:b.data)==null?void 0:w.map(f=>[f.key,f.value])):{}},[JSON.stringify(c)]),R=j.useMemo(()=>{const n=[];return s!=null&&s.displayTokenA&&n.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&n.push(s==null?void 0:s.displayTokenB),n},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:o,feeTierList:d,apiPoolInfo:s,rangeTabList:p,currentFeeTier:g,addressHistTokensMap:_,apiPoolInfoLoading:r,quoteWhiteTokenList:i,warningTokenList:R}}var Ne=(e=>(e.deposit="Provide Liquidity",e.positions="My Positions",e.analytics="Analytics",e))(Ne||{});const _e=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function qi({apiPoolInfo:e}){var ee,Z,V;const{tab:s,poolAddress:r}=de(),c=Ke(),[x,l]=j.useState(),[i,o]=j.useState(_e),[a,d]=j.useState(((ee=_e==null?void 0:_e.find(B=>B.key===s))==null?void 0:ee.key)||_e[0].key),[p,g]=j.useState(),[m,_]=j.useState(),{posBaseListGroupByPool:R}=cs(),{addFavorites:v,removeFavorites:C}=vr(),{poolFavoriteIds:u}=wr(),{fromToken:h,toToken:n}=Ce(),{fetchTokenPrices:b}=is(),{isApp:w}=we(),{setFromCoin:f,setToCoin:y,fromCoin:A,toCoin:S}=Or(),{setIsOpen:k}=Vr(),q=()=>{var B,F;w?c(`/swap/${(B=e==null?void 0:e.displayTokenA)==null?void 0:B.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}`):k(!0)};j.useEffect(()=>{h&&n&&(f(h),y(n))},[h,n]);const N=j.useMemo(()=>{if(r&&r!=="undefined"){const B=R[r.toLowerCase()||""];return B&&(B!=null&&B.list)&&(B==null?void 0:B.list.length)>0?B==null?void 0:B.list.length:void 0}},[JSON.stringify(R),r]);j.useEffect(()=>{o(_e==null?void 0:_e.map(B=>({...B,num:B.label==="My Positions"&&a==="positions"?N:void 0})))},[N,a]),j.useLayoutEffect(()=>{s&&s!==a&&d(s)},[s]);const E=j.useMemo(()=>u==null?void 0:u.includes(r||""),[JSON.stringify(u),r]),X=B=>{Lt(B),r&&(E?C(r):v(r))};j.useEffect(()=>{g(e==null?void 0:e.displayTokenA),_(e==null?void 0:e.displayTokenB)},[(Z=e==null?void 0:e.displayTokenA)==null?void 0:Z.coin_type,(V=e==null?void 0:e.displayTokenB)==null?void 0:V.coin_type]);const Q=()=>{var B,F;c(`/create-pool/${(B=e==null?void 0:e.displayTokenA)==null?void 0:B.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}/${x==null?void 0:x.feeRate}`)},K=()=>{const B=[];h&&B.push(h.coin_type),n&&B.push(n.coin_type),B.length>0&&b(B)};return j.useEffect(()=>{K()},[h==null?void 0:h.coin_type,n==null?void 0:n.coin_type]),{currentTab:a,setCurrentTab:d,tabList:i,isFavoritePool:E,onChangeFavorites:X,selectedTokenA:p,selectedTokenB:m,setSelectedTokenA:g,setSelectedTokenB:_,onConfirm:Q,feeTier:x,setFeeTier:l,refreshMarketPrice:K,onJump2Swap:q}}function Wi(){const{currentAccount:e}=dt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c,setCurrentPriceData:x}=I(),{feeTierList:l,currentFeeTier:i,rangeTabList:o,addressHistTokensMap:a,getList:d,quoteWhiteTokenList:p,warningTokenList:g}=$i(),{poolAddress:m}=de(),{handleResetRange:_}=ut(),{resetAddLiquidity:R,setFromToken:v,setToToken:C}=Ce(),{fetchAccountBalance:u}=ds(),{getContractPoolInfo:h}=Cr(),{getCurrentPrice:n}=kr(),{currentTab:b,setCurrentTab:w,tabList:f,isFavoritePool:y,onChangeFavorites:A,selectedTokenA:S,selectedTokenB:k,setSelectedTokenA:q,setSelectedTokenB:N,onConfirm:E,setFeeTier:X,refreshMarketPrice:Q,onJump2Swap:K}=qi({apiPoolInfo:s});j.useEffect(()=>{re(s)&&(v(s==null?void 0:s.displayTokenA),C(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const ee=async()=>{if(m&&s&&m===(s==null?void 0:s.poolAddress)){const B=await h(m);B&&n(B==null?void 0:B.current_sqrt_price,s)}},Z=()=>{Q==null||Q(),ee==null||ee()},V=async B=>{B&&c(!0),m&&m!=="undefined"&&await d({poolAddress:m}),e!=null&&e.address&&await u(),Z(),c(!1)};return j.useEffect(()=>(e!=null&&e.address&&u(),x({}),()=>{_(),R(),r()}),[]),j.useEffect(()=>{m&&(s==null?void 0:s.poolAddress)!==m&&(_(),R(),r()),m&&m===(s==null?void 0:s.poolAddress)&&ee()},[m,s==null?void 0:s.poolAddress]),{feeTierList:l,currentFeeTier:i,rangeTabList:o,addressHistTokensMap:a,quoteWhiteTokenList:p,warningTokenList:g,currentTab:b,setCurrentTab:w,tabList:f,isFavoritePool:y,onChangeFavorites:A,selectedTokenA:S,selectedTokenB:k,setSelectedTokenA:q,setSelectedTokenB:N,onConfirm:E,setFeeTier:X,handleRefresh:V,handleGetPrice:ee,onJump2Swap:K}}function ra(){const e=Ke(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,setApiPoolInfo:x,netError:l}=I(),{poolAddress:i,from:o,to:a}=de(),{feeTierList:d,currentFeeTier:p,rangeTabList:g,addressHistTokensMap:m,quoteWhiteTokenList:_,warningTokenList:R,currentTab:v,setCurrentTab:C,tabList:u,isFavoritePool:h,onChangeFavorites:n,selectedTokenA:b,selectedTokenB:w,setSelectedTokenA:f,setSelectedTokenB:y,onConfirm:A,setFeeTier:S,handleRefresh:k,handleGetPrice:q,onJump2Swap:N}=Wi(),{getTokenInfo:E}=ms(),{isApp:X}=we(),{isOpen:Q,onOpen:K,onClose:ee}=nr(),{totalAmountUSD:Z,tvlLoading:V,setTotalAmountUSD:B}=zi();return t.jsxs(t.Fragment,{children:[t.jsxs(se,{w:"100%",mt:"20px",children:[t.jsxs($,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[t.jsx(ar,{text:"Pools",onClick:()=>e("/pools")}),i&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs($,{gap:"8px",children:[t.jsx(st,{placement:"top",tooltip:h?"Remove from Watchlist":"Add to Watchlist",children:t.jsx(me,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:n,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:h?"primary":"text_caption"}}},children:t.jsx(ye,{xlinkHref:h?"#icon-icon_star_sel":"#icon-icon_star",svgFill:h?"primary_blue":"text_paragraph",svgHover:h?"primary":"text_caption",fontSize:"18px"})})}),t.jsx(st,{placement:"top",tooltip:"Trade",children:t.jsx(me,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:N,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:t.jsx(ye,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),t.jsx(st,{placement:"top",tooltip:"Refresh",children:t.jsx(se,{children:t.jsx(Dr,{handleRefresh:k,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},i)})})]})]}),t.jsxs(ge,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[t.jsxs(ge,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[t.jsxs($,{gap:"12px",children:[t.jsx(Wt,{value:b||(o?E(o):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:l,onChange:F=>{var J,M,ue,T;const G=Object.keys(Ne).find(ie=>ie===v);if(w!=null&&w.coin_type||(J=E(a))!=null&&J.coin_type)if(he(F==null?void 0:F.coin_type).full_address===he((w==null?void 0:w.coin_type)||((M=E(a))==null?void 0:M.coin_type)||"").full_address)f(w),y(b);else{if(he(F==null?void 0:F.coin_type).full_address===he((b==null?void 0:b.coin_type)||((ue=E(o))==null?void 0:ue.coin_type)||"").full_address)return;e(`/liquidity?tab=${G}&from=${F==null?void 0:F.coin_type}&to=${(w==null?void 0:w.coin_type)||((T=E(a))==null?void 0:T.coin_type)}`),x(null),B("")}else e(`/liquidity?tab=${G}&from=${F==null?void 0:F.coin_type}`),x(null),B("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!b&&r}),t.jsx(Wt,{value:w||(a?E(a):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:l,onChange:F=>{var J,M,ue,T;const G=Object.keys(Ne).find(ie=>ie===v);if(b!=null&&b.coin_type||(J=E(o))!=null&&J.coin_type)if(he(F==null?void 0:F.coin_type).full_address===he((b==null?void 0:b.coin_type)||((M=E(o))==null?void 0:M.coin_type)||"").full_address)f(w),y(b);else{if(he(F==null?void 0:F.coin_type).full_address===he((w==null?void 0:w.coin_type)||((ue=E(a))==null?void 0:ue.coin_type)||"").full_address)return;e(`/liquidity?tab=${G}&from=${(b==null?void 0:b.coin_type)||((T=E(o))==null?void 0:T.coin_type)}&to=${F==null?void 0:F.coin_type}`),x(null),B("")}else e(`/liquidity?tab=${G}&to=${F==null?void 0:F.coin_type}`),x(null),B("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!w&&r})]}),t.jsx(Nr,{value:p,loading:!p&&r,feeTierList:d,disabled:l,onChange:F=>{F!=null&&F.poolAddress?e(`/liquidity?poolAddress=${F==null?void 0:F.poolAddress}`):(S(F),K())}})]}),i&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(ge,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[t.jsx(Pe,{label:"Pool APR",value:t.jsx(cr,{poolInfo:s,placement:"bottom",children:t.jsxs($,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[t.jsx(L,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&t.jsxs(L,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),t.jsx(Pe,{label:"TVL",value:Z&&Z!=="--"?`$${be(Z,2)}`:"--",loading:r||V}),t.jsx(Pe,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:r}),t.jsx(Pe,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:r})]})]}),i&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?t.jsxs(t.Fragment,{children:[t.jsxs(ge,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[t.jsx(Be,{type:"borderTab",tabList:u,currentTab:v,handleChangeTab:F=>{const G=Object.keys(Ne).find(J=>Ne[J]===F.label);i&&e(`/liquidity?tab=${G}&poolAddress=${i}`),C(G)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:X?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:X?"14px":"16px",fontWeight:"500"}}),v!=="deposit"&&s&&t.jsxs(ge,{w:X?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[t.jsx(L,{children:"Current Price"}),t.jsx(Gr,{noCenter:!!X,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:tt(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:X?{w:"100%"}:{}})]})]}),t.jsx(se,{h:{base:"20px",lg:"8px"}}),v==="deposit"&&t.jsx(Mi,{rangeTabList:g,getList:k,getPrice:q,currentFeeTier:p,addressHistTokensMap:m}),v==="positions"&&t.jsx(fi,{}),v==="analytics"&&t.jsx(hi,{})]}):t.jsx(se,{mt:"20px",children:!s&&r?t.jsx(Ue,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:t.jsx(Rt,{})}):t.jsx(Oe,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsx(W,{children:b&&w?qe(b,_)||qe(w,_)?t.jsxs(t.Fragment,{children:[t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),t.jsx(L,{fontSize:"14px",children:"Do you want to initialize it?"}),t.jsx(me,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{ee(),A()},children:"Initialized Pool"})]}):t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&t.jsx(Kr,{tokensInfo:R,waringModalCancel:F=>{e("/pools")}}),t.jsx(qr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:Q,onClose:ee,onConfirm:A})]})}export{ra as default};
