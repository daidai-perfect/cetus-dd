import{a as g,aE as y,aF as w,W as j,aL as Te,_ as Pe,aM as ue,j as a,X as Ae,Y as Ce,Z as Fe,$ as We,a8 as Oe,a0 as Ee,a1 as He,u as Le,H as _,P as Me,h as ke,aN as Be,aO as De,ar as ze,m as Ne,n as Ve,v as le,aP as M,V as W,T as k,f as J,C as $e}from"./vendor-DsVemle5.js";import{u as ce,A as Ge}from"./AggregatorModal-DvqOUCop.js";import{c as Ue,u as Ye,a as Ke,S as qe,P as Je,b as Xe}from"./SwapConfirmBlock-BVsKx4LV.js";import{u as Ze}from"./useSwapHelper-BOLbfc9y.js";import{u as Qe}from"./global-CXwwb5OW.js";import{u as de}from"./swap-DfglqfWy.js";import{u as Ie,ad as et,bC as tt,a1 as rt,I as nt,d as se,bD as at,f as fe,e as st,r as it,c as ot,n as ut,a as lt,J as ct,m as dt,w as ft}from"./index-DIvDX_Yh.js";import{H as pt}from"./HTextLabelBox-C4-LQHuG.js";import{I as ht}from"./IconBg-trGOVJ4E.js";import{u as gt}from"./useAccountBalance-CBRzIpkZ.js";import{T as vt}from"./TradeInputGroup-CW7tw1iX.js";import{W as mt}from"./WarningTokenTipModal-Bwp0YzSD.js";import{S as xt}from"./Slippage-DGLr6udB.js";import{b as X,a as Z,u as bt}from"./index-BzFku5sE.js";import{d as yt}from"./debounce-Bdyap_Ai.js";import{t as wt,T as jt}from"./generateCategoricalChart-vNDd3BKX.js";import{i as St,u as H,F as Rt}from"./FreshProgressV2-ZPylifaE.js";import{A as _t}from"./SingleTokenInfo-CBKDT-57.js";import{M as Tt}from"./usePriceImpact-DY73T9z-.js";import{T as Pt}from"./TooltipIcon-DEf7niQQ.js";import{R as At}from"./Ratio-CSt8cMPH.js";import{R as Ct,Y as Ft}from"./YAxis-3Nr8gcNe.js";import{L as Wt,a as Ot}from"./LineChart-CRka4f0t.js";import"./aggregator-Boz3QPO-.js";import"./index-Bbyfw4ff.js";import"./useTransaction-CjlygSkT.js";import"./useTrack-DRz2Qk0R.js";import"./useSigner-Brm2Toqu.js";import"./useToken-YYj-bY2H.js";import"./useTokenBalance-Dt87YmUP.js";import"./useFindBestRouting-H-sky85D.js";import"./v4-C6aID195.js";import"./CurrentPrice-D7FuB-2I.js";import"./HighlightText-D28Vg5Uh.js";import"./index-D6pLRAs4.js";import"./TradeConfirmAmountInfo-K6F_j3dB.js";import"./useGetPoolList-CqBccx4u.js";import"./useWrapPoolData-D5Mp0awk.js";import"./_getAllKeysIn-BgIYPgua.js";import"./CheckBox-D8E1JnSg.js";import"./linear-DYpwdEgO.js";import"./CopyButton-D-DvrQ9Z.js";var pe=function(t,e){var r=e.manual,n=e.ready,s=n===void 0?!0:n,o=e.defaultParams,i=o===void 0?[]:o,p=e.refreshDeps,f=p===void 0?[]:p,u=e.refreshDepsAction,h=g.useRef(!1);return h.current=!1,X(function(){!r&&s&&(h.current=!0,t.run.apply(t,y([],w(i),!1)))},[s]),X(function(){h.current||r||(h.current=!0,u?u():t.refresh())},y([],w(f),!1)),{onBefore:function(){if(!s)return{stopNow:!0}}}};pe.onInit=function(t){var e=t.ready,r=e===void 0?!0:e,n=t.manual;return{loading:!n&&r}};function Et(t,e){if(t===e)return!0;for(var r=0;r<t.length;r++)if(!Object.is(t[r],e[r]))return!1;return!0}function he(t,e){var r=g.useRef({deps:e,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!Et(r.deps,e))&&(r.deps=e,r.obj=t(),r.initialized=!0),r.obj}var N=new Map,Ht=function(t,e,r){var n=N.get(t);n!=null&&n.timer&&clearTimeout(n.timer);var s=void 0;e>-1&&(s=setTimeout(function(){N.delete(t)},e)),N.set(t,j(j({},r),{timer:s}))},Lt=function(t){return N.get(t)},V=new Map,Mt=function(t){return V.get(t)},kt=function(t,e){V.set(t,e),e.then(function(r){return V.delete(t),r}).catch(function(){V.delete(t)})},F={},Bt=function(t,e){F[t]&&F[t].forEach(function(r){return r(e)})},q=function(t,e){return F[t]||(F[t]=[]),F[t].push(e),function(){var n=F[t].indexOf(e);F[t].splice(n,1)}},Dt=function(t,e){var r=e.cacheKey,n=e.cacheTime,s=n===void 0?5*60*1e3:n,o=e.staleTime,i=o===void 0?0:o,p=e.setCache,f=e.getCache,u=g.useRef(),h=g.useRef(),c=function(d,l){p?p(l):Ht(d,s,l),Bt(d,l.data)},v=function(d,l){return l===void 0&&(l=[]),f?f(l):Lt(d)};return he(function(){if(r){var d=v(r);d&&Object.hasOwnProperty.call(d,"data")&&(t.state.data=d.data,t.state.params=d.params,(i===-1||new Date().getTime()-d.time<=i)&&(t.state.loading=!1)),u.current=q(r,function(l){t.setState({data:l})})}},[]),Z(function(){var d;(d=u.current)===null||d===void 0||d.call(u)}),r?{onBefore:function(d){var l=v(r,d);return!l||!Object.hasOwnProperty.call(l,"data")?{}:i===-1||new Date().getTime()-l.time<=i?{loading:!1,data:l==null?void 0:l.data,error:void 0,returnNow:!0}:{data:l==null?void 0:l.data,error:void 0}},onRequest:function(d,l){var m=Mt(r);return m&&m!==h.current?{servicePromise:m}:(m=d.apply(void 0,y([],w(l),!1)),h.current=m,kt(r,m),{servicePromise:m})},onSuccess:function(d,l){var m;r&&((m=u.current)===null||m===void 0||m.call(u),c(r,{data:d,params:l,time:new Date().getTime()}),u.current=q(r,function(S){t.setState({data:S})}))},onMutate:function(d){var l;r&&((l=u.current)===null||l===void 0||l.call(u),c(r,{data:d,params:t.state.params,time:new Date().getTime()}),u.current=q(r,function(m){t.setState({data:m})}))}}:{}},zt=function(t,e){var r=e.debounceWait,n=e.debounceLeading,s=e.debounceTrailing,o=e.debounceMaxWait,i=g.useRef(),p=g.useMemo(function(){var f={};return n!==void 0&&(f.leading=n),s!==void 0&&(f.trailing=s),o!==void 0&&(f.maxWait=o),f},[n,s,o]);return g.useEffect(function(){if(r){var f=t.runAsync.bind(t);return i.current=yt(function(u){u()},r,p),t.runAsync=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return new Promise(function(c,v){var d;(d=i.current)===null||d===void 0||d.call(i,function(){f.apply(void 0,y([],w(u),!1)).then(c).catch(v)})})},function(){var u;(u=i.current)===null||u===void 0||u.cancel(),t.runAsync=f}}},[r,p]),r?{onCancel:function(){var f;(f=i.current)===null||f===void 0||f.cancel()}}:{}},Nt=function(t,e){var r=e.loadingDelay,n=e.ready,s=g.useRef();if(!r)return{};var o=function(){s.current&&clearTimeout(s.current)};return{onBefore:function(){return o(),n!==!1&&(s.current=setTimeout(function(){t.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){o()},onCancel:function(){o()}}},$=!!(typeof window<"u"&&window.document&&window.document.createElement);function Q(){return $?document.visibilityState!=="hidden":!0}var B=[];function Vt(t){return B.push(t),function(){var r=B.indexOf(t);B.splice(r,1)}}if($){var $t=function(){if(Q())for(var t=0;t<B.length;t++){var e=B[t];e()}};window.addEventListener("visibilitychange",$t,!1)}var Gt=function(t,e){var r=e.pollingInterval,n=e.pollingWhenHidden,s=n===void 0?!0:n,o=e.pollingErrorRetryCount,i=o===void 0?-1:o,p=g.useRef(),f=g.useRef(),u=g.useRef(0),h=function(){var c;p.current&&clearTimeout(p.current),(c=f.current)===null||c===void 0||c.call(f)};return X(function(){r||h()},[r]),r?{onBefore:function(){h()},onError:function(){u.current+=1},onSuccess:function(){u.current=0},onFinally:function(){i===-1||i!==-1&&u.current<=i?p.current=setTimeout(function(){!s&&!Q()?f.current=Vt(function(){t.refresh()}):t.refresh()},r):u.current=0},onCancel:function(){h()}}:{}};function Ut(t,e){var r=!1;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];r||(r=!0,t.apply(void 0,y([],w(n),!1)),setTimeout(function(){r=!1},e))}}function Yt(){return $&&typeof navigator.onLine<"u"?navigator.onLine:!0}var D=[];function Kt(t){return D.push(t),function(){var r=D.indexOf(t);r>-1&&D.splice(r,1)}}if($){var ie=function(){if(!(!Q()||!Yt()))for(var t=0;t<D.length;t++){var e=D[t];e()}};window.addEventListener("visibilitychange",ie,!1),window.addEventListener("focus",ie,!1)}var qt=function(t,e){var r=e.refreshOnWindowFocus,n=e.focusTimespan,s=n===void 0?5e3:n,o=g.useRef(),i=function(){var p;(p=o.current)===null||p===void 0||p.call(o)};return g.useEffect(function(){if(r){var p=Ut(t.refresh.bind(t),s);o.current=Kt(function(){p()})}return function(){i()}},[r,s]),Z(function(){i()}),{}},Jt=function(t,e){var r=e.retryInterval,n=e.retryCount,s=g.useRef(),o=g.useRef(0),i=g.useRef(!1);return n?{onBefore:function(){i.current||(o.current=0),i.current=!1,s.current&&clearTimeout(s.current)},onSuccess:function(){o.current=0},onError:function(){if(o.current+=1,n===-1||o.current<=n){var p=r??Math.min(1e3*Math.pow(2,o.current),3e4);s.current=setTimeout(function(){i.current=!0,t.refresh()},p)}else o.current=0},onCancel:function(){o.current=0,s.current&&clearTimeout(s.current)}}:{}},Xt=function(t,e){var r=e.throttleWait,n=e.throttleLeading,s=e.throttleTrailing,o=g.useRef(),i={};return n!==void 0&&(i.leading=n),s!==void 0&&(i.trailing=s),g.useEffect(function(){if(r){var p=t.runAsync.bind(t);return o.current=wt(function(f){f()},r,i),t.runAsync=function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return new Promise(function(h,c){var v;(v=o.current)===null||v===void 0||v.call(o,function(){p.apply(void 0,y([],w(f),!1)).then(h).catch(c)})})},function(){var f;t.runAsync=p,(f=o.current)===null||f===void 0||f.cancel()}}},[r,n,s]),r?{onCancel:function(){var p;(p=o.current)===null||p===void 0||p.cancel()}}:{}},Zt=function(t){g.useEffect(function(){t==null||t()},[])},Qt=function(){var t=w(g.useState({}),2),e=t[1];return g.useCallback(function(){return e({})},[])},It=function(){function t(e,r,n,s){s===void 0&&(s={}),this.serviceRef=e,this.options=r,this.subscribe=n,this.initState=s,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=j(j(j({},this.state),{loading:!r.manual}),s)}return t.prototype.setState=function(e){e===void 0&&(e={}),this.state=j(j({},this.state),e),this.subscribe()},t.prototype.runPluginHandler=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var s=this.pluginImpls.map(function(o){var i;return(i=o[e])===null||i===void 0?void 0:i.call.apply(i,y([o],w(r),!1))}).filter(Boolean);return Object.assign.apply(Object,y([{}],w(s),!1))},t.prototype.runAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Te(this,void 0,void 0,function(){var n,s,o,i,p,f,u,h,c,v,d,l,m,S,b,R,T,O,P,A,E;return Pe(this,function(C){switch(C.label){case 0:if(this.count+=1,n=this.count,s=this.runPluginHandler("onBefore",e),o=s.stopNow,i=o===void 0?!1:o,p=s.returnNow,f=p===void 0?!1:p,u=ue(s,["stopNow","returnNow"]),i)return[2,new Promise(function(){})];if(this.setState(j({loading:!0,params:e},u)),f)return[2,Promise.resolve(u.data)];(m=(l=this.options).onBefore)===null||m===void 0||m.call(l,e),C.label=1;case 1:return C.trys.push([1,3,,4]),h=this.runPluginHandler("onRequest",this.serviceRef.current,e).servicePromise,h||(h=(d=this.serviceRef).current.apply(d,y([],w(e),!1))),[4,h];case 2:return c=C.sent(),n!==this.count?[2,new Promise(function(){})]:(this.setState({data:c,error:void 0,loading:!1}),(b=(S=this.options).onSuccess)===null||b===void 0||b.call(S,c,e),this.runPluginHandler("onSuccess",c,e),(T=(R=this.options).onFinally)===null||T===void 0||T.call(R,e,c,void 0),n===this.count&&this.runPluginHandler("onFinally",e,c,void 0),[2,c]);case 3:if(v=C.sent(),n!==this.count)return[2,new Promise(function(){})];throw this.setState({error:v,loading:!1}),(P=(O=this.options).onError)===null||P===void 0||P.call(O,v,e),this.runPluginHandler("onError",v,e),(E=(A=this.options).onFinally)===null||E===void 0||E.call(A,e,void 0,v),n===this.count&&this.runPluginHandler("onFinally",e,void 0,v),v;case 4:return[2]}})})},t.prototype.run=function(){for(var e=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this.runAsync.apply(this,y([],w(r),!1)).catch(function(s){e.options.onError||console.error(s)})},t.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},t.prototype.refresh=function(){this.run.apply(this,y([],w(this.state.params||[]),!1))},t.prototype.refreshAsync=function(){return this.runAsync.apply(this,y([],w(this.state.params||[]),!1))},t.prototype.mutate=function(e){var r=St(e)?e(this.state.data):e;this.runPluginHandler("onMutate",r),this.setState({data:r})},t}();function er(t,e,r){e===void 0&&(e={}),r===void 0&&(r=[]);var n=e.manual,s=n===void 0?!1:n,o=e.ready,i=o===void 0?!0:o,p=ue(e,["manual","ready"]),f=j({manual:s,ready:i},p),u=bt(t),h=Qt(),c=he(function(){var v=r.map(function(d){var l;return(l=d==null?void 0:d.onInit)===null||l===void 0?void 0:l.call(d,f)}).filter(Boolean);return new It(u,f,h,Object.assign.apply(Object,y([{}],w(v),!1)))},[]);return c.options=f,c.pluginImpls=r.map(function(v){return v(c,f)}),Zt(function(){if(!s&&i){var v=c.state.params||e.defaultParams||[];c.run.apply(c,y([],w(v),!1))}}),Z(function(){c.cancel()}),{loading:c.state.loading,data:c.state.data,error:c.state.error,params:c.state.params||[],cancel:H(c.cancel.bind(c)),refresh:H(c.refresh.bind(c)),refreshAsync:H(c.refreshAsync.bind(c)),run:H(c.run.bind(c)),runAsync:H(c.runAsync.bind(c)),mutate:H(c.mutate.bind(c))}}function tr(t,e,r){return er(t,e,y(y([],w([]),!1),[zt,Nt,Gt,qt,Xt,pe,Dt,Jt],!1))}function rr(t){const{isOpen:e,onClose:r,data:n,onSubmitClick:s}=t,{fromCoin:o,toCoin:i,routerData:p}=de();return a.jsxs(Ae,{autoFocus:!1,returnFocusOnClose:!1,trapFocus:!1,isOpen:e,onClose:r,isCentered:!0,children:[a.jsx(Ce,{}),a.jsxs(Fe,{children:[a.jsx(We,{children:a.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Swap"})}),a.jsx(Ee,{}),a.jsx(He,{textAlign:"center",p:"0px",children:a.jsx(Ue,{onSubmitClick:s,onClose:r,data:n,lastRouterData:p,fromCoin:o,toCoin:i,isWidget:!1})})]})]})}function nr(){const{fetchByApi:t}=Ie(),{setProviders:e}=et();return{fetchRouterConfig:async()=>{try{const n=await t(tt,"GET"),{providers:s}=n;s&&s.length>0&&e(s),console.log("🚀 ~ file: useGetRouterConfig.ts:13 ~ fetchRouterConfig ~ res:",n)}catch(n){console.log("🚀 ~ file: useGetRouterConfig.ts:18 ~ fetchRouterConfig ~ error:",n)}}}}function ar(){const[t,e]=g.useState(!1),r=g.useRef(null),n=()=>{e(!1)},{fetchRouterConfig:s}=nr(),{loading:o}=tr(s),{handleSelectAllProviderClick:i,handleSaveClick:p,currProvidersSwitchStates:f,isOpenAggregatorMode:u}=ce(),h=()=>{u||c(),i(!u)};rt(()=>{p()},[f]);const c=()=>{var A;const v=window.innerWidth,d=window.innerHeight,l=(A=r.current)==null?void 0:A.getBoundingClientRect(),m=l==null?void 0:l.left,S=l==null?void 0:l.top,b=2,R=M.shapeFromText({text:"🟢",scalar:b}),T=M.shapeFromText({text:"🔵",scalar:b}),O=M.shapeFromText({text:"💚",scalar:b}),P=M.shapeFromText({text:"💙",scalar:b});M({particleCount:40,spread:60,shapes:[R,T,O,P],scalar:b,origin:{x:m/v,y:S*1.2/d}})};return a.jsxs(a.Fragment,{children:[a.jsx(Le,{isLoaded:!o,w:"178px",h:"28px",children:a.jsxs(_,{border:"1px solid",borderColor:"border",borderRadius:"8px",h:"28px",bg:"bg_secondary",gap:"8px",children:[a.jsxs(Me,{isLazy:!0,trigger:"hover",autoFocus:!1,returnFocusOnClose:!1,children:[a.jsx(ke,{children:a.jsxs(Be,{display:"flex",alignItems:"center",pl:"8px",children:[a.jsx(De,{htmlFor:"aggregator-mode",mb:"0",bg:"plus_mode_color",textFillColor:"transparent",backgroundClip:"text",h:"18px",lineHeight:"18px",fontSize:"12px",fontWeight:"500",fontStyle:"normal",mr:"8px",children:"Aggregator Mode"}),a.jsx(ze,{ref:r,id:"aggregator-mode",isChecked:u,onChange:h})]})}),a.jsx(Ne,{children:a.jsx(Ve,{p:"12px",lineHeight:"20px",fontSize:"12px",children:"The Aggregator Mode will aggregate external liquidity sources"})})]}),a.jsx(le,{variant:"unstyled",mr:"-1px",minW:"20px",w:"20px",p:"7px 4px",h:"28px",bg:"border",borderRadius:"0 8px 8px 0",onClick:()=>e(!t),_hover:{svg:{fill:"text_caption"}},children:a.jsx(nt,{xlinkHref:"#icon-icon_list_token",fontSize:"12px"})})]})}),t&&a.jsx(Ge,{isOpen:t,onClose:n})]})}const sr=({active:t,payload:e,label:r})=>{var n,s;return t&&e&&e.length?a.jsxs("div",{style:{backgroundColor:"#121212",border:"1px solid border_secondary",padding:"12px",borderRadius:"8px",position:"relative",left:"0px",top:"-30px",fontSize:"12px"},children:[a.jsx("p",{style:{color:"#909CA4"},children:at.unix((s=(n=e[0])==null?void 0:n.payload)==null?void 0:s.timestamp).format("MM/DD HH:mm")}),a.jsxs("p",{style:{color:"#fff",marginTop:"8px"},children:["$",fe(e[0].value)]})]}):null};function ir({data:t=[]}){const e=se(Math.min(...t.map(n=>n.price))).mul(.99999).toNumber(),r=se(Math.max(...t.map(n=>n.price))).mul(1.00001).toNumber();return a.jsx(Ct,{width:"100%",height:"100%",children:a.jsxs(Wt,{width:180,height:48,data:t,margin:{top:5,right:20,left:20,bottom:5},children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"priceLine",x1:"0",y1:"0",x2:"1",y2:"0",children:[a.jsx("stop",{offset:"0%",stopColor:"rgba(117, 200, 255, 1)"}),a.jsx("stop",{offset:"100%",stopColor:"rgba(104, 255, 216, 1)"})]})}),a.jsx(Ft,{hide:!0,domain:[e,r]}),a.jsx(jt,{cursor:!1,content:a.jsx(sr,{})}),a.jsx(Ot,{type:"linear",dot:!1,dataKey:"price",stroke:"url(#priceLine)",strokeWidth:2})]})})}function or({fromCoin:t,toCoin:e}){return g.useMemo(()=>[t,e].filter(Boolean).filter(n=>!!((n==null?void 0:n.is_verified)===void 0?n!=null&&n.is_trusted:n!=null&&n.is_verified)),[t,e]).length?a.jsxs(W,{w:"100%",align:"flex-start",gap:"8px",children:[a.jsxs(_,{justify:"flex-start",h:"52px",align:"center",gap:"4px",children:[a.jsx(k,{fontSize:"14px",fontWeight:"500",color:"text_caption",h:"20px",lineHeight:"20px",children:"Price Reference"}),a.jsx(Pt,{type:"priceReference"})]}),a.jsxs(W,{w:"100%",gap:"28px",children:[((t==null?void 0:t.is_verified)===void 0?t==null?void 0:t.is_trusted:t==null?void 0:t.is_verified)&&a.jsx(oe,{coin:t}),((e==null?void 0:e.is_verified)===void 0?e==null?void 0:e.is_trusted:e==null?void 0:e.is_verified)&&a.jsx(oe,{coin:e})]})]}):null}const oe=({coin:t})=>{const{getExplorerUrl:e}=st(),{getPriceKline:r,getTokenPrice:n}=it(),[s,o]=g.useState({price:[],daily_rate:""});g.useEffect(()=>{o({price:[],daily_rate:""})},[t]);const i=n(t==null?void 0:t.coin_type),p=async(f,u)=>{try{const h=await r(f,u);o(h)}catch(h){console.log(h,"error")}};return g.useEffect(()=>{i!=null&&i.base_symbol&&p(i==null?void 0:i.base_symbol,i==null?void 0:i.market)},[i==null?void 0:i.base_symbol,i==null?void 0:i.market,t==null?void 0:t.coin_type]),!s||s.price.length===0?a.jsx(a.Fragment,{}):a.jsxs(W,{w:"100%",gap:"12px",children:[a.jsxs(_,{w:"100%",justify:"space-between",align:"flex-start",h:"32px",children:[a.jsxs(_,{children:[a.jsx(ot,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),a.jsxs(W,{align:"flex-start",gap:"4px",children:[a.jsx(k,{fontSize:"14px",h:"16px",lineHeight:"16px",fontWeight:"600",color:"text_caption",children:t==null?void 0:t.symbol}),a.jsx(k,{fontSize:"12px",h:"12px",lineHeight:"12px",fontWeight:"500",children:t==null?void 0:t.name})]})]}),a.jsxs(_,{children:[(i==null?void 0:i.market)&&a.jsx(Tt,{market:i==null?void 0:i.market}),a.jsxs(k,{color:"text_caption",fontSize:"14px",fontWeight:"500",children:["$",(i==null?void 0:i.price)!==void 0?fe(i==null?void 0:i.price):"--"]}),(s==null?void 0:s.daily_rate)&&(i==null?void 0:i.price)!==void 0&&a.jsx(At,{value:s==null?void 0:s.daily_rate})]})]}),a.jsxs(_,{w:"100%",justify:"space-between",align:"flex-end",gap:"0",children:[a.jsx(_t,{address:t==null?void 0:t.coin_type,onClickLink:()=>window.open(e(t==null?void 0:t.coin_type,"coin")),wrapStyle:{border:"1px solid",borderColor:"border",h:"24px",borderRadius:"8px",p:"0 8px",bg:"bg_secondary"},fontWeight:"500"}),a.jsx(J,{flex:"0 0 210px",h:"24px",mr:"-13px",children:(i==null?void 0:i.price)!==void 0&&(s==null?void 0:s.price.length)>0&&a.jsx(ir,{data:s==null?void 0:s.price})})]})]})};function Ir(){const t=de(),{fromCoin:e,toCoin:r,setFromCoin:n,setToCoin:s,byAmountIn:o,setFromAmount:i,setToAmount:p,setByAmountIn:f,findRouterLoading:u,routerData:h}=t,{handleSelectToken:c,handleAmountChange:v,fromAmount:d,toAmount:l,fromAmountValue:m,toAmountValue:S,fromBalanceInfo:b,toBalanceInfo:R,amountLimit:T,getSwapSecondaryData:O,doSwapAction:P,reCalculateRouteData:A,scamsText:E,refreshMarketPrice:C,isOpenConfirmModel:G,setIsOpenConfirmModel:I,resetInputAmount:ge,onReverseClick:ve}=Ye(t,!1),{currentAccount:z,onWalletModal:me}=ut(),{fetchAccountBalance:ee}=gt();g.useEffect(()=>{z!=null&&z.address&&ee()},[]);const{btnText:xe,btnDisabled:be}=Ke(d,l,b==null?void 0:b.balanceFormat,e,r,h),te=g.useRef(null),{formatSwapRouter:ye}=Ze(h),{isOpenAggregatorMode:U}=ce(),we=()=>{var x;(x=te.current)==null||x.reset()},re=()=>{A(),ee(),C()};g.useEffect(()=>{we()},[l,d,e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]),g.useEffect(()=>{o||re()},[l,e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]),g.useEffect(()=>{ge()},[U]);const je=g.useMemo(()=>{const x=[];return e&&x.push(e),r&&x.push(r),x},[e,r]),[Y,ne]=g.useState("#icon-a-icon_trade"),Se=()=>{ne("#icon-icon_swap1")},Re=()=>{ne("#icon-a-icon_trade")},{isApp:ae}=lt(),{isShowTradeChart:L,setIsShowTradeChart:_e,isShowTradeOrders:ur,setIsShowTradeOrders:lr}=Qe();return a.jsx(a.Fragment,{children:a.jsxs(W,{gap:{base:"16px",lg:"8px"},w:{base:"100%",lg:"470px"},children:[a.jsxs(_,{w:"100%",justify:"space-between",children:[a.jsx(ar,{}),a.jsxs(_,{children:[a.jsx(xt,{}),a.jsx(ct,{showTooltip:!ae,placement:"bottom-end",tooltip:a.jsx(k,{fontSize:"12px",children:L?"Hide reference price":"View reference price"}),children:a.jsx($e,{children:a.jsx(ht,{w:"28px",h:"28px",borderRadius:"8px",variant:"",xlinkHref:"#icon-icon_kline",svgFill:L?"primary":"",svgHover:L?"primary":ae?"text_paragraph":"text_caption",onClick:()=>_e(!L)})})}),a.jsx(Rt,{callbackInterval:G?5:10,ref:te,min:0,max:10,onClick:re})]})]}),a.jsxs(J,{w:"100%",children:[a.jsx(vt,{wrapStyle:{gap:{base:"16px",lg:"8px"},mt:{base:"0px",lg:"4px"}},onClick:()=>ve(U),from:{title:"You Pay",balance:(b==null?void 0:b.balanceFormat)||"",value:d,amountValue:m,loading:!o&&u,onChange:x=>{v(x,!0)},selectable:!0,placeholder:"0.0",token:e,onFocusChange:x=>{x&&+d&&!o&&v(d,!0)},onTokenChange:x=>{c(x,!0)}},to:{title:"You Receive",balance:(R==null?void 0:R.balanceFormat)||"",value:l,amountValue:S,loading:o&&u,onFocusChange:x=>{x&&+l&&o&&v(l,!1)},onTokenChange:x=>{c(x,!1)},inputAllowed:!U,onChange:x=>{v(x,!1)},selectable:!0,placeholder:"0.0",token:r,half:!1,max:!1},iconParams:{xlinkHref:Y,svgFill:"text_caption",transform:Y==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:Y==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:Se,onMouseLeave:Re}}),E&&a.jsx(J,{mt:"-32px",p:"48px 16px 16px",borderRadius:"20px",bg:"bg_secondary",border:"1px solid",borderColor:"border",children:a.jsx(qe,{scamsText:E})})]}),(e||r)&&a.jsx(mt,{addToken:!0,tokensInfo:je,waringModalCancel:x=>{x.forEach(K=>{(K.coin_type===(e==null?void 0:e.coin_type)||K.coin_type===(r==null?void 0:r.coin_type))&&c(void 0,K.coin_type===(e==null?void 0:e.coin_type))})}}),a.jsxs(W,{p:+d&&+l?"0 8px 12px":"0 8px",w:"100%",gap:"8px",border:"1px solid",borderColor:"border",borderRadius:"20px",bg:"bg_secondary",children:[a.jsx(le,{w:"calc(100% + 18px)",h:"52px",margin:"-1px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:u||be,isLoading:u,onClick:()=>{z?I(!0):me(!0)},children:[e,r].filter(Boolean).length<2?"Select a token":xe}),!!+d&&!!+l&&a.jsxs(W,{w:"100%",gap:"12px",children:[a.jsx(Je,{findRouterLoading:u,routerData:h,fromCoin:e,toCoin:r}),a.jsx(pt,{isLoading:u,label:o?"Minimum Received":"Maximum Sold",value:`${dt(T,o?r==null?void 0:r.decimals:e==null?void 0:e.decimals,!1,ft.ROUND_DOWN)} ${o?r==null?void 0:r.symbol:e==null?void 0:e.symbol}`,labelStyle:{fontWeight:500,whiteSpace:"nowrap",fontSize:"14px"},valueStyle:{fontWeight:500,fontSize:"14px"},skeletonStyle:{valueW:"128px"},wrapStyle:{p:"0 8px",minH:"20px"}}),a.jsx(Xe,{formatSwapRouter:ye,findRouterLoading:u,fromAmount:d,toAmount:l,fromCoin:e,toCoin:r})]})]}),!L&&a.jsx(or,{fromCoin:e,toCoin:r}),G&&a.jsx(rr,{data:O(),isOpen:G,onSubmitClick:P,onClose:()=>{I(!1)}})]})})}export{Ir as default};
//# sourceMappingURL=Swap-DsqdazQP.js.map
