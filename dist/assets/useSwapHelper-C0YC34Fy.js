import{u as V}from"./useToken-DKo5fk0k.js";import{R as i,a0 as E}from"./index-WWPS4_2e.js";import{a as h}from"./vendor-DYqnJE5Q.js";import{u as b}from"./global-Bo5w7aOL.js";import{u as H}from"./useGetPoolList-CMRSGTVw.js";var O=(t=>(t.CETUS="CETUS",t.KRIYA="KRIYA",t.KRIYAV3="KRIYAV3",t.FLOWX="FLOWX",t.FLOWXV3="FLOWXV3",t.AFTERMATH="AFTERMATH",t.METASTABLE="METASTABLE",t.HAEDAL="HAEDAL",t.VOLO="VOLO",t.AFSUI="AFSUI",t.DEEPBOOKV3="DEEPBOOKV3",t.SCALLOP="SCALLOP",t.BLUEMOVE="BLUEMOVE",t.TURBOS="TURBOS",t.SPRINGSUI="SPRINGSUI",t.BLUEFIN="BLUEFIN",t.HAEDALPMM="HAEDALPMM",t.ALPHAFI="ALPHAFI",t.STEAMM="STEAMM",t.OBRIC="OBRIC",t.HAWAL="HAWAL",t))(O||{}),G=(t=>(t[t.CalculateError=1e4]="CalculateError",t[t.NumberTooLarge=10001]="NumberTooLarge",t[t.NoRouter=10002]="NoRouter",t[t.InsufficientLiquidity=10003]="InsufficientLiquidity",t[t.HoneyPot=10004]="HoneyPot",t))(G||{}),$=(t=>(t.TradeInputPage="TradeInput",t.TradeStatus="TradeStatus",t.SelectTokenPage="SelectToken",t.TradeConfirmPage="TradeConfirm",t.RoutePage="Route",t.TradeSetting="TradeSetting",t.SlippageSetting="SlippageSetting",t))($||{});function K(t=!0){const{poolApiMap:s,setPoolApiMap:f}=b(),{getPoolList:c,getLocalJsonPoolList:m,getLocalJsonPoolAddress:T}=H();return{getPoolListByCoinType:async(u,l)=>{if(u&&l){const L=[u,l].sort(),o=`${L[0]}_${L[1]}`,y=s[o];if(y)return y;const d={coin_type:`${u},${l}`,display_all_pools:!0,offset:0,limit:100,order_by:"-tvl",no_incentives:!0,has_farming:!0,has_mining:!0};let e=t?await m(d):void 0;(e===void 0||e.list.length===0)&&(e=await c(d));const n=e.list;if(n.length>0)return s[o]=n,f(o,n),n}return[]},getPoolAddressByCoinType:async(u,l)=>{if(u&&l){const L=[u,l].sort(),o=`${L[0]}_${L[1]}`;if(t){const e=await T(u,l);if(!e||e.length===0){const n=s[o];if(n)return n.map(p=>p.poolAddress)}else return e}const y={coin_type:`${u},${l}`,display_all_pools:!0,offset:0,limit:100,order_by:"-tvl",no_incentives:!0,has_farming:!0,has_mining:!0},d=await c(y);if(d){const e=d.list;if(e.length>0)return s[o]=e,f(o,e),e.map(n=>n.poolAddress)}}return[]}}}function q(t,s){return{priceAcceptRouterData:h.useMemo(()=>{if(s&&t){if(t.byAmountIn){if(!i(t.toAmountUi).eq(s.toAmountUi||"0"))return s}else if(!i(t.fromAmountUi).eq(s.fromAmountUi||"0"))return s;return}},[s,t])}}function Y(t,s){return{amountLimit:h.useMemo(()=>{if(s&&s.routerData){const{byAmountIn:c,fromAmountUi:m,toAmountUi:T}=s;return c?i(T).mul(i(1).sub(i(t))).toString():i(m).mul(i(1).add(i(t))).toString()}},[t,s])}}function J(t){const{fetchTokenInfo:s}=V(),[f,c]=h.useState({});console.log(t,"routerData");const m=async()=>{var T,R,_;if(t&&t.routerData){const u=[],l=t.byAmountIn?t.routerData.amountIn.toString():t.routerData.amountOut.toString(),L=[],o=[];let y=i(0);const d=((T=t==null?void 0:t.routerData)==null?void 0:T.routes)||[];for(let n=0;n<d.length;n++){const p=d[n],A={},M=t.byAmountIn?p.amountIn.toString():p.amountOut.toString();n===t.routerData.routes.length-1?A.percentage=i(1).sub(y).toFixed(2):A.percentage=i(M).div(l).toFixed(2),y=i(y).add(A.percentage);const r=[];for(let F=0;F<((R=p==null?void 0:p.path)==null?void 0:R.length);F++){const a=(_=p==null?void 0:p.path)==null?void 0:_[F];u.includes(a.provider)||u.push(a.provider);const I=E(a.from).full_address,S=E(a.target).full_address,B=await s(I),U=await s(S);B||o.includes(I)&&o.push(I),U||o.includes(S)&&o.push(S);const P=a.provider===O.SCALLOP||a.provider===O.FLOWX||a.provider===O.FLOWXV3;r.push({from_type:I,to_type:S,pool_address:P?"":a.id,fee_rate:a.feeRate,provider:a.provider})}A.paths=r,L.push(A)}if(o.length>0)for(const n in o)s(n);const e={router_summery:`${t.routerData.routes.length} Streams`,providers:u,routers:L};c(e);return}c(void 0)};return h.useEffect(()=>{m()},[t]),{formatSwapRouter:f}}function W(){const{getPoolAddressByCoinType:t}=K(!0);return{getSwapPoolAddress:async(f,c)=>{if(f&&c){const m=await t(f.coin_type,c.coin_type);return console.log("ðŸš€ ~ getSwapPoolAddress ~ list:",m),m}return[]}}}function j(t,s){return h.useMemo(()=>t&&s&&+t&&+s?i(s).div(t).toString():"0",[t,s])}export{G as A,$ as S,O as a,Y as b,q as c,j as d,W as e,J as u};
//# sourceMappingURL=useSwapHelper-C0YC34Fy.js.map
