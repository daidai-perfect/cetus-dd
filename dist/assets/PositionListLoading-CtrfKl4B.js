import{b1 as V,r as m,a as F,b as y,j as e,H as i,c as v,T as r,C as L,an as N,a4 as T,aA as o,d as P,V as c,B as _,ap as D,aq as R,S as d,ay as W,at as M,au as E,Y as z,a3 as $,e as f,W as U,$ as H,I as O,a2 as C}from"./index-CHLr8WBT.js";import{C as q}from"./CetusTooltip-D6K7ROoy.js";import{c as A,b as Q}from"./usePositionList-COSCP2-2.js";import{u as Y}from"./useCurrentPos-hcsN5k1R.js";import{A as G}from"./AddressCopyLink-CQIa6RW4.js";import{P as J,L as K}from"./PriceRange-DrurIzCw.js";import{S as B}from"./SingleTokenInfo-DSlHFcJf.js";function re(){const{search:s}=V(),[p,g]=m.useState({});return m.useLayoutEffect(()=>{const u=new URLSearchParams(s);g(Object.fromEntries(u.entries()))},[s]),p}const ce=({tooltip:s,...p})=>{const g=F(),{isApp:u}=y();return e.jsx(i,{w:"20px",h:"20px",onClick:j=>{v(j),u||g("/farms")},...p,children:e.jsx(q,{placement:"top",tooltip:s||e.jsx(r,{fontSize:"12px",children:"Farm rewards available"}),children:e.jsx(L,{children:e.jsx(N,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_farms.png"})})})})},X=({positionInfo:s})=>{var w,a;const[p,g]=m.useState(!1),{getTokenAmountValue:u}=T(),{posFeeData:j,posFeeDataLoading:S}=A(),x=j[s==null?void 0:s.posId],t=u((w=s==null?void 0:s.displayTokenA)==null?void 0:w.coin_type,x==null?void 0:x.displayFeeOwedA,"--"),l=u((a=s==null?void 0:s.displayTokenB)==null?void 0:a.coin_type,x==null?void 0:x.displayFeeOwedB,"--"),h=m.useMemo(()=>t!=="--"&&l!=="--"?o(P(t).plus(l).toString(),2):"$--",[t,l]),{isApp:b}=y();return e.jsxs(c,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:"flex-start",flexDirection:{base:"row",lg:"column"},children:[e.jsx(r,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending Fees"}),e.jsx(_,{p:"12px 0",onClick:n=>v(n),onMouseEnter:Number(t)==0&&Number(l)==0?()=>{}:()=>g(!0),onMouseLeave:()=>g(!1),children:e.jsxs(D,{isLazy:!0,trigger:b?"click":"hover",placement:"top-start",children:[e.jsx(R,{children:e.jsx(L,{as:"button",cursor:Number(t)==0&&Number(l)==0?"default":"help",children:e.jsx(d,{isLoaded:!!h,children:e.jsx(r,{color:"text_caption",textDecoration:Number(t)==0&&Number(l)==0?"none":"underline dotted",textUnderlineOffset:"3px",borderColor:"text_caption",children:h})})})}),p&&h!=="--"&&e.jsx(W,{children:e.jsx(M,{zIndex:"2",w:"fit-content",p:"4px ",children:e.jsx(E,{p:"8px",children:e.jsxs(c,{align:"flex-start",minW:"200px",children:[e.jsxs(i,{w:"100%",justify:"space-between",borderBottom:"1px solid",borderColor:"border",pb:"8px",sx:{_last:{borderBottom:"none",pb:"0px"}},children:[e.jsx(B,{token:s==null?void 0:s.displayTokenA,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(c,{align:"flex-end",gap:"4px",children:[e.jsx(r,{fontSize:"12px",color:"text_caption",children:z(x==null?void 0:x.displayFeeOwedA)}),e.jsx(r,{fontSize:"12px",children:o(t,2)})]})]}),e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsx(B,{token:s==null?void 0:s.displayTokenB,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(c,{align:"flex-end",gap:"4px",children:[e.jsx(r,{fontSize:"12px",color:"text_caption",children:z(x==null?void 0:x.displayFeeOwedB)}),e.jsx(r,{fontSize:"12px",children:o(l,2)})]})]})]})})})})]})})]})},Z=({positionInfo:s})=>{var w;const{getTokenAmountValue:p}=T(),{coinPriceObj:g}=$(),{posRewardsData:u,posRewardsDataLoading:j,posApiPoolData:S}=A(),x=(w=S[s==null?void 0:s.clmmPool])==null?void 0:w.haveMining,t=u[s==null?void 0:s.posId],l=m.useMemo(()=>{const a=t==null?void 0:t.map(n=>{const k=p(n==null?void 0:n.coin_address,n==null?void 0:n.display_amount_owed,"--");return{...n,amountUSD:k}});return a&&a.length>0?a.filter(n=>P(n.display_amount_owed).gt(0)):[]},[s,t,g]),h=m.useMemo(()=>{let a;return(l==null?void 0:l.length)>0?(l.forEach(n=>{const k=n==null?void 0:n.amountUSD;a=k=="--"||a=="--"?"--":P(a).plus(k).toString()}),a=="--"?"$--":o(a,2)):"$0"},[l]),{isApp:b}=y();return e.jsx(e.Fragment,{children:((l==null?void 0:l.length)>0||x)&&e.jsxs(c,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:{base:"flex-start",lg:"flex-end"},flexDirection:{base:"row",lg:"column"},children:[e.jsx(r,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending Rewards"}),e.jsx(_,{p:"12px 0",onClick:a=>v(a),children:e.jsxs(D,{isLazy:!0,trigger:b?"click":"hover",placement:"top-start",children:[e.jsx(R,{children:e.jsxs(L,{as:"button",cursor:h=="$0"?"text":"help",children:[e.jsx(N,{w:"18px",h:"18px",src:"/images/icon_mining.png",mr:"4px"}),e.jsx(d,{isLoaded:!!h&&!j,children:e.jsx(r,{color:"text_caption",textDecoration:h=="$0"?"none":"underline dotted",textUnderlineOffset:"3px",children:h})})]})}),h!=="$0"&&e.jsx(W,{children:e.jsx(M,{zIndex:"2",w:"fit-content",p:"4px",children:e.jsx(E,{borderRadius:"12px",p:"8px",children:e.jsxs(c,{align:"flex-start",children:[e.jsx(r,{fontSize:"12px",color:"text_caption",children:"Mining Rewards"}),l==null?void 0:l.map(a=>e.jsxs(i,{minW:"200px",justify:"space-between",borderBottom:"1px solid",borderColor:"border",pb:"8px",sx:{_last:{borderBottom:"none",pb:"0px"}},children:[e.jsx(B,{token:a==null?void 0:a.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(c,{align:"flex-end",gap:"4px",children:[e.jsx(r,{fontSize:"12px",color:"text_caption",children:z(a==null?void 0:a.display_amount_owed)}),e.jsxs(r,{fontSize:"12px",children:[" ",o(a==null?void 0:a.amountUSD,2)]})]})]},a==null?void 0:a.coin_address))]})})})})]})})]})})};function ne({positionInfo:s}){const{isApp:p}=y(),{getExplorerUrl:g}=f(),{getClmmPosName:u}=Q(),j=F(),{setCurrentPosDetailTab:S}=Y(),{posPoolsOriginalData:x}=A(),t=m.useMemo(()=>{var h;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const b=(h=x==null?void 0:x[s==null?void 0:s.clmmPool])==null?void 0:h.index;return u(Number(s==null?void 0:s.index),b)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,x]),l=()=>{console.log("ðŸš€ ~ PoolItem ~ poolInfo:",s),S("increase"),j(`/position-detail/${s==null?void 0:s.id}`)};return e.jsx(U,{w:"100%",p:{base:"16px 8px 12px",lg:"12px"},borderRadius:"16px",onClick:l,children:e.jsxs(i,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(c,{w:{base:"100%",lg:"calc(100% - 100px)"},align:"flex-start",children:[e.jsxs(i,{flexDirection:{base:"column",lg:"row"},w:{base:"100%",lg:"unset"},children:[e.jsxs(i,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},children:[e.jsx(r,{fontSize:{base:"14px",lg:"12px"},children:"NFT ID"}),e.jsx(d,{isLoaded:!!t,children:e.jsx(r,{fontWeight:"500",fontSize:{base:"14px",lg:"12px"},color:"text_caption",children:t==null?void 0:t.split("|")[1]})})]}),e.jsxs(i,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},children:[e.jsx(r,{fontSize:{base:"14px",lg:"12px"},ml:{base:"0",lg:"8px"},children:"Address"}),e.jsx(G,{fontWeight:"500",color:"text_caption",address:s==null?void 0:s.id,showLink:!1,fontSize:{base:"14px",lg:"12px"},onClickLink:()=>{window.open(g(s==null?void 0:s.id,"nftAddress"),"_blank")}})]})]}),e.jsxs(i,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},gap:{base:"0",lg:"8px"},children:[p&&e.jsx(_,{h:"4px"}),e.jsx(J,{positionInfo:s,symbolEllipsesDecimals:10,labelInfo:{text:"Price Range"}}),p&&e.jsx(_,{h:"4px"}),e.jsxs(c,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:"flex-start",flexDirection:{base:"row",lg:"column"},children:[e.jsx(r,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Liquidity"}),e.jsx(K,{positionInfo:s,fontSize:"14px"})]}),e.jsx(X,{positionInfo:s}),e.jsx(Z,{positionInfo:s})]})]}),e.jsxs(H,{w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"90px"},borderRadius:"8px",variant:"ghost",p:"0 !important",_hover:{svg:{fill:"text_caption"}},children:[p&&e.jsx(r,{children:"Manage"}),e.jsx(O,{xlinkHref:"#icon-icon_list_token",w:"14px",h:"14px"})]})]})})}function de(){const{isApp:s}=y();return e.jsxs(c,{w:"100%",bg:"card_bg",p:"16px",borderRadius:"16px",gap:"20px",align:"flex-start",children:[e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsxs(i,{gap:"0",children:[e.jsx(C,{size:"9"}),e.jsx(C,{size:"9"}),e.jsxs(c,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(d,{height:"4",width:"100px"}),e.jsx(d,{height:"4",width:"150px"})]})]}),e.jsx(d,{height:"5",width:"250px"})]}),e.jsx(U,{w:"100%",p:"12px",borderRadius:"16px",children:e.jsxs(c,{w:{base:"100%",lg:"calc(100% - 100px)"},align:"flex-start",children:[e.jsx(d,{height:"4",width:"200px",mt:"8px"}),e.jsxs(i,{w:"100%",justify:"space-between",children:[e.jsxs(c,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(d,{height:"4",width:"100px"}),e.jsx(d,{height:"4",width:"100px"})]}),e.jsxs(c,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(d,{height:"4",width:"100px"}),e.jsx(d,{height:"4",width:"100px"})]}),!s&&e.jsxs(c,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(d,{height:"4",width:"100px"}),e.jsx(d,{height:"4",width:"100px"})]}),!s&&e.jsxs(c,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(d,{height:"4",width:"100px"}),e.jsx(d,{height:"4",width:"100px"})]})]})]})})]})}export{ce as F,ne as P,de as a,re as u};
