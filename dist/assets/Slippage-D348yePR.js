import{j as e,ad as J,ae as K,af as Q,ag as X,ai as Z,aj as ee,r as p,d as x,B as E,ar as C,I as k,T as n,H as c,C as U,$ as B,bl as te,ak as V,cT as re,V as I,k as ae,an as se,c as ne,W as oe,b as ie}from"./index-CHLr8WBT.js";import{u as pe}from"./global-kaoaUtz_.js";import{g as le}from"./index-DSOg8pVB.js";import{C as ce}from"./CetusTooltip-D6K7ROoy.js";import{T as W}from"./TooltipIcon--IGZm1TS.js";import{u as xe}from"./useTokenBalance-ByvkZNF0.js";import{S as de}from"./switch-BiiHAgyb.js";const ue={id:"0x9258181f5ceac8dbffb7030890243caed69a9599d2886d957a9cb7656af3bdb3",coin_type:"0x2::sui::SUI",decimals:9,description:"",name:"Sui",symbol:"SUI",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",is_trusted:!0,extensions:{rank:"880"}};function ge(o){const{isOpen:s,onClose:i}=o;return e.jsxs(J,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:i,isCentered:!0,children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(X,{fontSize:"16px",fontWeight:"500",children:"Settings"}),e.jsx(Z,{}),e.jsx(ee,{pb:"16px",children:e.jsx(he,{...o})})]})]})}const he=o=>{const{isOpen:s,onClose:i,value:r,onChange:d,compact:a=!1,slippageType:b="global",isWidget:F=!1,transactionMode:m,onChangeTransctionMode:y,maxCapForGas:P,onChangeMaxCapForGas:T,mevProtect:S,onChangeMevProtect:M,customGasPrice:v,onChangeCustomGasPrice:w}=o,G=["0.1","0.5","1"],[t,l]=p.useState("");p.useState(!1);const{balanceInfo:g}=xe(ue),[f,z]=p.useState(m),[j,O]=p.useState(P),[_,A]=p.useState(v),[h,R]=p.useState(S),$=u=>{const q=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,2})?).*$");u.target.value=u.target.value.replace(q,"$1"),l(u.target.value)},D=u=>{l(u)};p.useEffect(()=>{r&&l(String(r))},[r]),p.useEffect(()=>{r&&l(String(r))},[s]);const L=()=>{if(t){const u=x(t).toNumber();d(u)}f==="Fast Mode"&&(T(j),w(_)),y(f),M(h),i()},Y=p.useMemo(()=>(console.log("ğŸš€ ~ btnIsDisabled ~ gasPrice:",_),f==="Fast Mode"&&(!j||Number(j)===0||Number(j)>5||!_||Number(_)===0||x(j).gt((g==null?void 0:g.balanceFormat)||"0")||x(j).lt(x(_).div(Math.pow(10,9))))||!+t?!0:b==="global"?Number(t)>50||Number(t)<.01:Number(t)>1),[b,t,f,j,_,g]);return p.useEffect(()=>{f==="Fast Mode"&&R(!0)},[f]),e.jsxs(E,{w:"100%",children:[e.jsxs(E,{children:[e.jsxs(C,{align:"center",mb:"16px",children:[e.jsx(k,{xlinkHref:"#icon-icon_verticalslider",svgHover:"text_paragraph",iconCursor:"text"}),e.jsx(n,{ml:"8px",color:"text_caption",fontSize:"14px",fontWeight:"500",children:"Slippage Tolerance"})]}),e.jsxs(E,{bg:a?b==="global"?Number(t)>50?"primary_red_opacity.10":"primary_yellow_opacity.10":Number(t)>1?"primary_red_opacity.10":"transparent":"transparent",borderRadius:"12px",children:[e.jsxs(c,{gap:"8px",mt:"8px",children:[e.jsx(C,{w:"100%",justifyContent:"center",alignItems:"center",borderRadius:"12px",border:"1px solid",borderColor:"border",background:"bg_secondary",h:"42px",children:G.map(u=>e.jsx(U,{flex:"1",bg:u===String(t)?"#1A1C25 !important":"transparent",cursor:"pointer",h:"calc(100% - 6px)",margin:"2px",borderRadius:"8px",onClick:()=>D(u),children:e.jsxs(n,{color:u===String(t)?"text_highlight":"text_paragraph",children:[u,"%"]})},u))}),e.jsx(be,{compact:!0,inputValue:t,handleChange:$,wrapStyle:{flex:"0 0 150px",borderRadius:"12px"}})]}),t&&b==="global"&&(Number(t)>1||Number(t)<.05)?e.jsxs(C,{w:"100%",children:[Number(t)<.05?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Slippage is low. Your transaction may fail."})}):null,Number(t)<=50&&Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,Number(t)>50?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null]}):null,t&&b==="vaults"&&Number(t)>1?e.jsx(C,{w:"100%",children:Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null}):null]}),e.jsx(me,{transactionMode:f,setTransactionMode:z,maxCapForGas:j,setMaxCapForGas:O,customGasPrice:_,setCustomGasPrice:A,suiBalance:(g==null?void 0:g.balanceFormat)||"0"}),e.jsx(fe,{mevProtect:h,setMevProtect:R,disabled:f==="Fast Mode"})]}),e.jsxs(C,{align:"center",justifyContent:"space-between",mt:"20px",gap:"16px",children:[e.jsx(B,{flex:"1",h:"42px",variant:"outline",borderRadius:"8px",onClick:i,p:"0 15px",children:"Cancel"}),e.jsx(B,{flex:"1",h:"42px",borderRadius:"8px",onClick:L,isDisabled:Y,children:"Save"})]})]})},be=({inputValue:o,handleChange:s,wrapStyle:i={},compact:r=!1})=>e.jsxs(te,{alignItems:"center",justifyContent:"center",w:"100%",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",h:"42px",p:"12px 16px",position:"relative",...i,children:[e.jsx(n,{pr:"8px",h:"20px",lineHeight:"20px",borderRight:"1px solid",borderColor:r?"transparent":"border",children:"Custom"}),e.jsx(V,{borderRadius:"8px",h:"40px",mr:"2px",border:"none",variant:"outline",value:o,onChange:s,textAlign:"right",fontSize:"sm",placeholder:"0.0",pr:{base:"14px",lg:"8px"},pl:"0"}),e.jsx(re,{width:"20px",height:"40px",top:"0.5px",right:{base:"12px",lg:"8px"},children:e.jsx(n,{fontSize:"sm",color:"text_caption",children:"%"})})]}),H=[{label:"Default"},{label:"Fast Mode",beforeIcon:{xlinkHref:"#icon-icon_flash",fontSize:"16px",activeColor:"#FFCA68",activeHoverColor:"#FFCA68"}}],me=o=>{const{transactionMode:s,setTransactionMode:i,maxCapForGas:r,setMaxCapForGas:d,customGasPrice:a,setCustomGasPrice:b,suiBalance:F}=o,m=p.useMemo(()=>{var t;return(t=H.filter(l=>(l==null?void 0:l.label)===s))==null?void 0:t[0]},[s,H]),y=t=>{i(t.label)},P=t=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(l,"$1"),d(t.target.value)},T=t=>{const l=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(l,"$1");const g=x(t.target.value).gt(0)?x(t.target.value).div(Math.pow(10,9)).toString():"0";x(g).gt(r)&&d(g),b(t.target.value)},S=p.useMemo(()=>!r||Number(r)==0?"Please enter a value higher than 0":r&&Number(r)>5?"Only allow up to 5 SUI":x(r).gt(F)?"Insufficient SUI balance ":x(r).lt(x(a).div(Math.pow(10,9)))?"Max cap cannot be less than custom gas.":"",[r]),M=p.useMemo(()=>r&&Number(r)>0&&Number(r)<2e-6?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[r]),v=p.useMemo(()=>!a||Number(a)==0?"Please enter a value higher than 0":"",[a]),w=p.useMemo(()=>a&&Number(a)>0&&x(a).lt(750)?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[a]),G=p.useMemo(()=>!a||a==="0"?"0":x(a).div(Math.pow(10,9)).toString(),[a]);return e.jsxs(I,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"12px",children:[e.jsxs(c,{w:"100%",justify:"space-between",children:[e.jsxs(c,{children:[e.jsx(k,{xlinkHref:"#icon-icon_mode"}),e.jsx(n,{color:"text_caption",fontSize:"14px",children:"Transaction Mode"})]}),e.jsx(ae,{type:"outlineTab",tabList:H,currentTab:m==null?void 0:m.label,handleChangeTab:y,wrapStyle:{w:"206px",h:"40px",p:"4px",borderRadius:"12px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px",borderRadius:"8px"}})]}),e.jsx(n,{w:"100%",lineHeight:"20px",fontSize:"12px",children:s==="Default"?"Standard gas based on real-time network conditions":"Land your transaction earlier and avoid congestion with a higher gas price. MEV protection is on by default in Fast Mode."}),s==="Fast Mode"&&e.jsxs(I,{w:"100%",children:[e.jsxs(c,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(c,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Custom Gas Price"}),e.jsx(W,{type:"setGasPrice"})]}),e.jsxs(I,{align:"flex-end",gap:"0px",children:[e.jsxs(c,{gap:"0px",children:[e.jsx(V,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:a,onChange:T,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MIST"})]}),e.jsxs(n,{fontSize:"12px",color:"text_paragraph",children:[G," SUI"]})]})]}),v&&e.jsx(N,{text:v,type:"error"}),w&&e.jsx(N,{text:w,type:"warn"}),e.jsxs(c,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(c,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Set Max Cap for Gas"}),e.jsx(W,{type:"setMaxCapForGas"})]}),e.jsx(I,{align:"flex-end",gap:"0px",children:e.jsxs(c,{gap:"0px",children:[e.jsx(V,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:r,onChange:P,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"SUI"})]})})]}),S&&e.jsx(N,{text:S,type:"error"}),M&&e.jsx(N,{text:M,type:"warn"})]}),e.jsxs(c,{mt:"6px",children:[e.jsx(n,{children:"Powered by "}),e.jsx(se,{src:"/images/icon_shio@2x.png",w:"46px",h:"14px"})]})]})},fe=o=>{const{mevProtect:s,disabled:i,setMevProtect:r}=o;return e.jsxs(I,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(c,{justify:"flex-start",w:"100%",children:[e.jsx(k,{xlinkHref:"#icon-icon_mev",svgFill:"text_paragraph"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MEV Protect"})]}),e.jsxs(c,{justify:"space-between",w:"100%",children:[e.jsxs(c,{gap:"4px",children:[e.jsx(n,{fontSize:"14px",color:"text_paragraph",children:"Enable MEV Protection"}),e.jsx(W,{type:"byEnabling"})]}),e.jsx(de,{isChecked:s,onChange:()=>r(!s),isDisabled:i})]})]})},N=o=>{const{text:s,type:i}=o;return e.jsx(U,{w:"100%",p:"4px 16px",borderRadius:"8px",bg:i==="warn"?"primary_yellow_opacity.10":"primary_red_opacity.10",children:e.jsx(n,{color:i==="warn"?"primary_yellow":"primary_red",fontSize:"12px",lineHeight:"20px",children:s})})};function Pe(o){const{onClick:s}=o,{onSlippageVisible:i,showSlippage:r,isWidget:d,compact:a,settingOpen:b,onClose:F,onChange:m,slippageType:y,transactionMode:P,handleChangeTransctionMode:T,maxCapForGas:S,handleChangeMaxCapForGas:M,mevProtect:v,handleChangeMevProtect:w,customGasPrice:G,handleChangeCustomGasPrice:t}=je(o);return e.jsxs(e.Fragment,{children:[e.jsx(ce,{tooltip:"Settings",children:e.jsxs(c,{h:"28px",p:"4px 8px",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:d?"swap_bg_secondary":"bg_secondary",cursor:"pointer",gap:"6px",onClick:l=>{ne(l),d?s&&s():i()},sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[e.jsx(n,{fontWeight:"500",fontSize:"12px",children:le(r)}),e.jsx(oe,{bg:d?"swap_bg_secondary":"bg_secondary",p:"0",h:"28px",w:"28px",borderRadius:"8px",mr:"-9px",children:e.jsx(c,{align:"center",justify:"center",mt:"3px",children:e.jsx(k,{xlinkHref:"#icon-icon_verticalslider"})})})]})}),!d&&e.jsx(ge,{isWidget:d,compact:a,isOpen:b,onClose:F,value:x(r).mul(100).toNumber(),onChange:m,slippageType:y,transactionMode:P,onChangeTransctionMode:T,maxCapForGas:S,onChangeMaxCapForGas:M,mevProtect:v,onChangeMevProtect:w,customGasPrice:G,onChangeCustomGasPrice:t})]})}function je(o){const{slippageType:s="global",compact:i,isWidget:r=!1}=o,{slippage:d,vaultsSlippage:a,setVaultsSlippage:b,setSlippage:F,settingOpen:m,setSettingOpen:y,mevProtect:P,setMevProtect:T,setTransctionMode:S,setMaxCapForGas:M,transactionMode:v,maxCapForGas:w,customGasPrice:G,setCustomGasPrice:t}=pe();ie();const l=()=>{y(!m)},g=()=>{y(!1)},f=h=>{const R=x(h).div(100).toNumber();s==="vaults"?b(R):F(R)},z=p.useMemo(()=>s==="vaults"?a:d,[s,d,a]);return{onSlippageVisible:l,onClose:g,onChange:f,showSlippage:z,isWidget:r,compact:i,settingOpen:m,slippageType:s,transactionMode:v,handleChangeTransctionMode:h=>{S(h)},maxCapForGas:w,handleChangeMaxCapForGas:h=>{M(h)},mevProtect:P,handleChangeMevProtect:h=>{T(h)},customGasPrice:G,handleChangeCustomGasPrice:h=>{t(h)}}}export{Pe as S,he as a,ge as b,je as u};
