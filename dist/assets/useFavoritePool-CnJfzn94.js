import{m as T,u as _}from"./useWrapPoolData-C8NJOF2n.js";import"./vendor-DYqnJE5Q.js";import{h as O,aS as a,aT as I,aU as d,aV as u,aW as v,u as W,x as w}from"./index-WWPS4_2e.js";import{u as x}from"./useGetPoolList-CMRSGTVw.js";const y=(t,c)=>({poolListLength:"",setPoolListLength:o=>{t(()=>({poolListLength:o}))},poolRefreshStatus:"pending",setPoolRefreshStatus:o=>{t(()=>({poolRefreshStatus:o}))},isWatchList:void 0,setIsWatchList:o=>{t(()=>({isWatchList:o})),a.setItem(v,o)},isAllPools:!1,setIsAllPools:o=>{t(()=>({isAllPools:o})),a.setItem(u,o)},isIncentivizedOnly:!1,setIsIncentivizedOnly:o=>{t(()=>({isIncentivizedOnly:o})),a.setItem(d,o)},poolFavoriteIds:[],setPoolFavoriteId:o=>{const l=[...c().poolFavoriteIds,o];t(()=>({poolFavoriteIds:l})),a.setItem(I,l)},setPoolFavoriteIds:o=>{t(()=>({poolFavoriteIds:o})),a.setItem(I,o)},poolFavoriteIdsChange:!1,setPoolFavoriteIdsChange:o=>{t(()=>({poolFavoriteIdsChange:o}))}}),i=O(y);a.getItem(I).then(t=>{console.log("ðŸš€ ~ file: store/pool/index.ts.ts ~ savedPoolFavoriteList:",t),(t==null?void 0:t.length)>0&&i.getState().setPoolFavoriteIds(t)});a.getItem(v).then(t=>{console.log("ðŸš€ ~ LocalStorageService isWatchList:",t),typeof t=="boolean"?i.getState().setIsWatchList(t):i.getState().setIsWatchList(!1)});a.getItem(u).then(t=>{console.log("ðŸš€ ~ LocalStorageService isAllPools:",t),typeof t=="boolean"&&i.getState().setIsAllPools(t)});a.getItem(d).then(t=>{console.log("ðŸš€ ~ LocalStorageService isIncentivizedOnly:",t),typeof t=="boolean"&&i.getState().setIsIncentivizedOnly(t)});function k(){const{fetchByApi:t}=W(),{getLocalJsonPoolList:c}=x(),{wrapPoolData:o}=_(),{poolFavoriteIds:l,setPoolFavoriteId:P,setPoolFavoriteIds:p,setPoolFavoriteIdsChange:g}=i(),{successTsToast:f,failedTsToast:F}=w();return{addFavorites:s=>{const n={linkLabel:"",getShowInfo:()=>({toastTitleText:l.length>=100?"Watchlist exceeds the maximum limit":"Added to Watchlist"})};l.length>=100?F(n):(P(s),g(!0),f(n))},removeFavorites:s=>{const n=l==null?void 0:l.filter(r=>r!==s);p(n),g(!0),f({linkLabel:"",getShowInfo:()=>({toastTitleText:"Removed from Watchlist"})})},getFavoritePoolList:async s=>{var r,L,S;const{needLocalData:n=!0}=s;if(((s==null?void 0:s.pools)||[]).length>0)try{const e=await t(T,"POST",s);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useFavoritePool.ts:61 ~ getFavoritePoolList ~ res:",e),e!=null&&e.data)return console.log("ðŸš€ ~ getFavoritePoolList ~ res?.data:",e==null?void 0:e.data),{list:(L=(r=e==null?void 0:e.data)==null?void 0:r.lp_list)==null?void 0:L.map(m=>o(m)),total:(S=e==null?void 0:e.data)==null?void 0:S.total}}catch(e){if(console.log("ðŸš€ ~ getFavoritePoolList ~ error:",e),n)return await c(s)}return{list:[],total:0}}}}export{k as a,i as u};
//# sourceMappingURL=useFavoritePool-CnJfzn94.js.map
