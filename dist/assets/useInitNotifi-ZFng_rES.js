import{P as y,j as U}from"./index-BnmCMmyx.js";import{aL as j}from"./vendor-BulRdKUe.js";import{u as k}from"./useSigner-BUnTeKmJ.js";import{a as v,u as x}from"./useNotifiAlerts-DeTkDOJQ.js";function F(){const N="cetus",d="Production",a="SUI",{setNotifiClient:m,notifiClient:o,setNotifiStatus:r,setNotifiAccountAddress:c,setDefaultTargetGroup:I,setNotifiSourceGroups:p,setNotifiSources:S,setNotifiLoginLoading:n,setTelegramTarget:L,setEmailTarget:T,setSmsTarget:G}=y(),{signUserMessage:h}=k(),{currentAccount:e}=U(),{ensureTargetGroup:A,getNotifiTargetGroups:f}=v(),{getNotifiAlerts:u}=x(),C=async s=>{const t=j(N,{walletBlockchain:a,walletPublicKey:s,accountAddress:s},d),i=await t.initialize();m(t),r(i.status),(i==null?void 0:i.status)==="authenticated"?(f(t),u(t),c(s)):w()},M=async s=>{try{n(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:63 ~ notifiLogin ~ notifiClient:",o);const t=await o.logIn({walletBlockchain:a,signMessage:async g=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:63 ~ signMessage: ~ message:",g);try{return(await h(g)).signature}catch(l){console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:67 ~ signMessage: ~ error:",l)}}});console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:67 ~ notifiLogin ~ notifiClient:",o);const{status:i}=o.userState;r(i),i==="authenticated"&&(e!=null&&e.address)&&(u(),f(),c(e.address)),console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:75 ~ notifiLogin ~ loginResult:",t),t&&(await A(s),n(!1))}catch(t){console.log("ðŸš€ðŸš€ðŸš€ ~ useInitNotifi.ts:91 ~ notifiLogin ~ error:",t),n(!1)}},w=()=>{I([]),p([]),S([]),T({}),L({}),G({})};return{initNotifi:C,notifiLogin:M}}export{F as u};
//# sourceMappingURL=useInitNotifi-ZFng_rES.js.map
