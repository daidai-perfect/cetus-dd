import{j as e,a7 as le,v as xe,ab as me,H as d,V as v,T as a,C as X,f as ce,am as be,R as ve,at as F,au as L,a as j,S as de,u as D,aw as Ae,ax as Le,ay as G,as as Ve}from"./vendor-_1sPVx0S.js";import{I as O,k as M,a as te,S as Q,an as ue,B as Z,j as he,y as I,C as De,H as pe,m as Re,c as Be,d as ge,W as Pe,L as E}from"./index-DZworFuu.js";import{N as ee}from"./NoData-CxevJSkT.js";import{e as fe,v as He,f as ze,a as We,u as Ee,g as ne}from"./VaultsAprBlock-BxZ39L3w.js";import{H as J}from"./HTextLabelBox-DBHn66eq.js";import{A as we}from"./AumLimit-uxwTIz_y.js";import{P as Ue}from"./PoweredByHaedal-BByOfacs.js";import{V as ye}from"./VTextLabelBox-DHB1LJ9o.js";import{u as Se}from"./useToken-BWHB2fhl.js";import{C as Ye}from"./CoinPairInfo-B7zOIt9d.js";import{S as Fe}from"./SearchInputBlock-dAQt6w9u.js";import{C as je}from"./CheckBox-BlDWS91y.js";import{R as Me}from"./RefreshButton-C6wipRYR.js";import{S as Ne}from"./SortDropBlock-DnkWErfb.js";import{u as Oe}from"./useTokenBalance-Bm-sJqFs.js";import{u as $e}from"./useAccountBalance-Bqky3zOE.js";import{u as qe}from"./useInterval-DnUakcwK.js";import"./swapWidget-BCFJQoyC.js";import"./useWrapPoolData-CDrg47b6.js";import"./useFavoritePool-C-y3K2CF.js";import"./useGetPoolList-CsB88aY2.js";import"./useTransaction-DopuwF40.js";import"./useSigner-CskzV9L0.js";import"./global-CG4XJcf0.js";import"./msafe-oYBkW7LJ.js";import"./index-B0fjcXro.js";import"./v4-C6aID195.js";import"./useFindBestRouting-Lj4RLbMT.js";import"./useSwapHelper-5Q8nfW7L.js";import"./SingleTokenInfo-BOld9qyS.js";import"./CopyButton-Dh94jbmg.js";import"./index-D-Yvrqk2.js";import"./Loading-DX22m4d0.js";import"./TooltipIcon-2k0oF2Ae.js";function Te(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:i}=l;return e.jsxs(le,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(xe,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(xe,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg",svg:{fill:"text_caption"}},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:i||(()=>{}),children:e.jsx(O,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function _e(l){var f,S,_,V;const{apiInfo:r,logo_url:s,balanceDisplay:i,holdCoinAmounts:t,sharePoolRate:b,rewardPerA:g,rewardPerB:w}=l,n=me(),{currentAccount:o,onWalletModal:y}=M(),{isApp:c}=te();return o?e.jsxs(le,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{n(`/vaults-detail/${r.vaultsId}/${r.category}`)},children:[e.jsxs(d,{gap:"15px",children:[e.jsx(Q,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(v,{gap:"4px",alignItems:"start",children:[e.jsx(a,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(a,{color:"text_caption",children:`${i||"0"} LP`})]})]}),e.jsx(le,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:c?e.jsxs(e.Fragment,{children:[e.jsx(J,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(le,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(a,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(a,{color:"text_caption",children:(f=r==null?void 0:r.displayTokenA)==null?void 0:f.symbol})]}),e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(a,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(a,{color:"text_caption",children:(S=r==null?void 0:r.displayTokenB)==null?void 0:S.symbol})]})]})}),e.jsx(J,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:`${ue(b,2,6)}%`}),e.jsxs(xe,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(a,{color:"primary_gray",children:"Details"}),e.jsx(Z,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(X,{w:"20px",h:"20px",children:e.jsx(O,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{mr:"90px",children:e.jsx(ye,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(a,{color:"text_caption",children:he(t==null?void 0:t.displayCoinA)}),e.jsx(a,{color:"text_caption",mr:"8px",children:(_=r==null?void 0:r.displayTokenA)==null?void 0:_.symbol}),e.jsx(Q,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(a,{color:"text_caption",children:he(t==null?void 0:t.displayCoinB)}),e.jsx(a,{color:"text_caption",children:(V=r==null?void 0:r.displayTokenB)==null?void 0:V.symbol})]})})}),e.jsx(X,{mr:"110px",children:e.jsx(ye,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:`${ue(b,2,6)}%`})}),e.jsxs(d,{gap:"8px",children:[e.jsx(a,{color:"primary_gray",children:"Details"}),e.jsx(Z,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(X,{w:"20px",h:"20px",children:e.jsx(O,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(ee,{type:"nowallet",onboard:()=>{y(!0)}})}function ke({rewardList:l}){return e.jsx(I,{tooltip:e.jsx(a,{fontSize:"12px",lineHeight:"20px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(d,{justifyContent:"end",gap:"4px",children:l==null?void 0:l.map(r=>e.jsx(Ge,{coinType:r},r))})})}function Ge({coinType:l}){const{tokenInfo:r}=Se(l);return e.jsx(X,{children:e.jsx(Q,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"})})}function Qe({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:w,sharePoolRate:n,currentAccount:o,totalValue:y,jumpVaultsDetail:c,isShowPowered:f,isShowAprTips:S}){var _,V,B,k,m,P;return e.jsxs(v,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(d,{children:[e.jsx(De,{coinAIconUrl:(_=t==null?void 0:t.displayTokenA)==null?void 0:_.logo_url,coinBIconUrl:(V=t==null?void 0:t.displayTokenB)==null?void 0:V.logo_url,coinACoinType:(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type,coinBCoinType:(k=t==null?void 0:t.displayTokenB)==null?void 0:k.coin_type,w:"40px",h:"40px"}),e.jsxs(v,{children:[e.jsxs(d,{children:[e.jsxs(a,{color:"text_caption",fontWeight:"500",children:[(m=t==null?void 0:t.displayTokenA)==null?void 0:m.symbol," - ",(P=t==null?void 0:t.displayTokenB)==null?void 0:P.symbol]}),e.jsx(ce,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(a,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),(t==null?void 0:t.category)=="haedal"&&f&&e.jsx(Ue,{category:"Haedal"})]})]}),e.jsxs(v,{w:"100%",gap:"16px",mt:"4px",children:[e.jsx(J,{label:"TVL",value:e.jsx(v,{alignItems:"flex-end",children:t.hardCapUSD==0?e.jsx(I,{tooltip:" No capacity limit ",children:e.jsxs(v,{gap:"4px",children:[e.jsx(a,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(a,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"âˆž"})]})}):e.jsx(we,{depositRatio:t.depositRatio,hardCapUSD:t.hardCapUSD,vaultTvl:t.vaultsTvl,textStyle:{textDecoration:"none"},value:e.jsxs(v,{alignItems:"flex-end",children:[e.jsx(a,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(be,{h:"4px",w:"80px",value:t.depositRatio,bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(J,{label:e.jsxs(d,{justify:"flex-end",gap:"2px",children:[e.jsx(a,{children:"APY"}),e.jsx(I,{placement:"auto-start",tooltip:e.jsx(a,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(O,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(fe,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(J,{label:"Rewards",value:e.jsx(ke,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(J,{label:"Your Holdings",value:o?pe(y,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(v,{w:"100%",gap:"8px",children:[e.jsx(Te,{isOpen:l,jumpVaultsDetail:()=>{c(t.vaultsId)},onExpand:r}),l&&e.jsx(_e,{rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:w,sharePoolRate:n})]})]})}function Je({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:w,sharePoolRate:n,currentAccount:o,totalValue:y,jumpVaultsDetail:c,isShowPowered:f}){return console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItemPC.tsx:122 ~ apiInfo:",t),e.jsxs(ve.Fragment,{children:[e.jsxs(F,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(L,{children:e.jsx(Ye,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},isShowPowered:f,symbolFontSize:"15px"})}),e.jsx(L,{textAlign:"right",children:t.hardCapUSD==0?e.jsx(I,{tooltip:" No capacity limit ",children:e.jsxs(v,{gap:"4px",children:[e.jsx(a,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(a,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"âˆž"})]})}):e.jsx(we,{depositRatio:t.depositRatio,hardCapUSD:t.hardCapUSD,vaultTvl:t.vaultsTvl,textStyle:{textDecoration:"none"},value:e.jsxs(v,{alignItems:"flex-end",children:[e.jsx(a,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(be,{h:"4px",w:"80px",value:t.depositRatio,bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}),e.jsx(L,{textAlign:"right",w:"13%",children:e.jsx(fe,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category})}),e.jsx(L,{textAlign:"right",w:"13%",children:e.jsx(ke,{rewardList:t.vaultsRewards})}),e.jsx(L,{textAlign:"right",children:e.jsx(a,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:o?pe(y,2):"--"})}),e.jsx(L,{textAlign:"right",children:e.jsx(Te,{isOpen:l,jumpVaultsDetail:()=>{c(t.vaultsId)}})})]}),!l&&e.jsx(F,{h:"16px"}),e.jsx(F,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(L,{colSpan:6,children:e.jsx(Z,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(_e,{rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:w,sharePoolRate:n})})})})]},t.vaultsId)}function Ce(l){const r=me(),{apiInfo:s,isShowPowered:i}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:14 ~ VaultsListItem ~ apiInfo:",s);const{currentAccount:t}=M(),b=He.useGetContractVaultInfo((s==null?void 0:s.category)=="haedal"),{fetchVaultInfoFromContract:g,fetchClmmPoolFromContract:w,lpTokenInfo:n,balanceInfo:o,sharePoolRate:y,holdCoinAmounts:c,totalValue:f,fetchVaultBalance:S}=b(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:26 ~ VaultsListItem ~ balanceInfo:",o),j.useEffect(()=>{g(s.vaultsId)},[s.vaultsId]),j.useEffect(()=>{w(s.poolAddress)},[s.poolAddress]),j.useEffect(()=>{t!=null&&t.address&&s.vaultsId&&(n!=null&&n.decimals)&&(s==null?void 0:s.category)=="haedal"&&S(t==null?void 0:t.address,s.vaultsId,n==null?void 0:n.decimals)},[t==null?void 0:t.address,s.vaultsId,n==null?void 0:n.decimals,s==null?void 0:s.category]);const[_,V]=j.useState(!1),B=q=>{r(`/vaults-detail/${q}/${s==null?void 0:s.category}`)},{rewardPerA:k,rewardPerB:m}=ze(o==null?void 0:o.balanceFormat,s),P=()=>{V(!_)},{isApp:$}=te();return $?e.jsx(Qe,{openExpend:_,onExpand:P,rewardPerA:k,rewardPerB:m,apiInfo:s,logo_url:n==null?void 0:n.logo_url,holdCoinAmounts:c,balanceDisplay:o==null?void 0:o.balanceDisplay,sharePoolRate:y,currentAccount:t,totalValue:f,jumpVaultsDetail:B,isShowPowered:i}):e.jsx(Je,{openExpend:_,onExpand:P,rewardPerA:k,rewardPerB:m,apiInfo:s,logo_url:n==null?void 0:n.logo_url,holdCoinAmounts:c,balanceDisplay:o==null?void 0:o.balanceDisplay,sharePoolRate:y,currentAccount:t,totalValue:f,jumpVaultsDetail:B,isShowPowered:i})}function Ke({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:i,isShowPowered:t}){const{onWalletModal:b}=M();return!i&&!s&&l.length===0?e.jsx(ee,{type:"nodata",text:"No vaults found",border:"none"}):i?e.jsx(ee,{type:"nowallet",onboard:()=>b(!0),border:"none"}):s?e.jsx(Xe,{itemList:[1,2,3]}):e.jsx(v,{w:"100%",mt:"20px",children:l==null?void 0:l.map(g=>e.jsx(Ce,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))})}function Xe(l){const{itemList:r}=l;return e.jsx(v,{w:"100%",mt:"20px",children:r.map(s=>e.jsxs(v,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(d,{gap:"0",children:[e.jsx(de,{size:"9"}),e.jsx(de,{size:"9"}),e.jsxs(d,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(D,{height:"4",width:"100px"}),e.jsx(D,{height:"4",width:"60px"})]})]}),e.jsx(v,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(i=>e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(D,{height:"4",width:"100px"}),e.jsx(D,{height:"4",width:"100px"})]},i))}),e.jsxs(v,{w:"100%",gap:"8px",children:[e.jsx(D,{height:"8",width:"100%"}),e.jsx(D,{height:"8",width:"100%"})]})]},s))})}function Ze({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:i,isShowPowered:t}){const{onWalletModal:b}=M();return e.jsxs(Ae,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(Le,{children:e.jsxs(F,{children:[e.jsx(G,{children:"Vaults"}),e.jsx(G,{textAlign:"right",children:"TVL"}),e.jsx(G,{textAlign:"right",children:e.jsxs(d,{justify:"flex-end",gap:"2px",children:[e.jsx(a,{children:"APY"}),e.jsx(I,{tooltip:e.jsx(a,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(O,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(G,{textAlign:"right",children:"Earnings"}),e.jsx(G,{textAlign:"right",children:"Your Holdings"}),e.jsx(G,{textAlign:"right",children:"Action"})]})}),e.jsxs(Ve,{children:[!i&&!s&&l.length===0&&e.jsx(F,{children:e.jsx(L,{colSpan:6,w:"100%",children:e.jsx(ee,{type:"nodata",text:"No vaults found",border:"none"})})}),i&&e.jsx(F,{children:e.jsx(L,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(ee,{type:"nowallet",onboard:()=>b(!0),border:"none"})})}),s&&e.jsx(Ie,{itemList:[1,2,3]}),!s&&l.map(g=>e.jsx(Ce,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))]})]})}function Ie(l){const{itemList:r}=l;return r.map(s=>e.jsxs(ve.Fragment,{children:[e.jsxs(F,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(L,{children:e.jsx(D,{w:"220px"})}),e.jsx(L,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(D,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(D,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(D,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(D,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(D,{})})})]}),e.jsx(F,{h:"16px"})]},s))}function et(l){const{fetchTokenPrices:r}=Re(),{currentAccount:s,onWalletModal:i}=M(),{dataList:t,isAll:b,showSkeletonLoading:g,isShowPowered:w}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:13 ~ VaultsList ~ isShowPowered:",w),j.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:18 ~ useEffect ~ dataList:",t),t&&(t==null?void 0:t.length)==0)return;const o=[];t.forEach(y=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:35 ~ useEffect ~ data:",y),y&&(o.includes(y.tokenA.coin_type)||o.push(y.tokenA.coin_type),o.includes(y.tokenB.coin_type)||o.push(y.tokenB.coin_type))}),o.length>0&&r(o)},[t==null?void 0:t.length]);const{isApp:n}=te();return n?e.jsx(Ke,{...l}):e.jsx(Ze,{...l})}function tt(l){const{sortByList:r,currTab:s,tabList:i,handleChangeTab:t,currSortType:b,onSortByChange:g,sortRule:w,handleRefresh:n,handleChangeSortRule:o,selectCoinList:y,onClickSelectCoinList:c,onDeleteSelectCoinList:f,isYourHoldings:S,onClickIsYourHoldings:_,whiteTokenList:V,showSkeletonLoading:B}=l,{isApp:k}=te(),{currentAccount:m}=M();return e.jsxs(v,{w:"100%",mt:{base:"20px",lg:"40px"},justify:"space-between",children:[e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(Be,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"415px"},h:"46px",borderRadius:{base:"8px",lg:"12px"}},itemStyle:{w:"50%",fontSize:"16px"},tabList:i,currentTab:s.label,handleChangeTab:t}),!k&&(m==null?void 0:m.address)&&e.jsx(Z,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(d,{h:"100%",justify:"space-between",children:[e.jsx(je,{checked:S,onClick:_}),e.jsx(a,{color:S?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]}),e.jsxs(d,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsx(ce,{w:{base:"100%",lg:"292px"},sx:{"> button":{minW:"100% !important"}},children:e.jsx(Fe,{selectCoinList:y,onClickSelectCoinList:c,onDeleteSelectCoinList:f,whiteTokenList:V})}),e.jsxs(d,{children:[e.jsx(Ne,{sortText:"Sort by",xlinkHref:w=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{o(w==="asc"?"desc":"asc")},minW:k?"calc(100vw - 126px)":"120px",currentSort:b,sortByList:r,onSortByChange:g,wrapStyle:{borderRadius:{base:"8px",lg:"12px"}}}),e.jsx(Me,{handleRefresh:()=>{B||n()},borderRadius:{base:"8px",lg:"12px"}})]})]}),k&&e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(a,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),(m==null?void 0:m.address)&&e.jsx(Z,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(d,{h:"100%",justify:"space-between",children:[e.jsx(je,{checked:S,onClick:_}),e.jsx(a,{color:S?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]})]})}function st(l){const{isLoading:r,total_tvl:s}=l,{isApp:i}=te();return e.jsx(v,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(v,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(d,{w:"100%",justify:"space-between",children:e.jsx(a,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(a,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease.Â ",i&&e.jsxs(d,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(a,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(O,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!i&&e.jsxs(d,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(a,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(O,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(a,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(D,{isLoaded:!!s,children:e.jsx(a,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:pe(s,2)})})]})})}function lt(){const{getVaultList:l,getVaultListFromCache:r}=We(),{vaultStatsObj:s,lpTokenInfo:i,setLpTokenInfo:t}=Ee(),{getBalanceInfoFromCache:b}=Oe(),{currentAccount:g}=M(),[w,n]=j.useState(!0),[o,y]=j.useState([]),[c,f]=j.useState([]),{getTokenInfo:S,fetchTokenInfo:_}=Se(),V=u=>{f(x=>[...x,u])},B=u=>{f(x=>x.filter(h=>(h==null?void 0:h.coin_type)!==(u==null?void 0:u.coin_type)))},[k,m]=j.useState([]),[P,$]=j.useState([]),[q,re]=j.useState({sortRule:"desc",sortType:"tvl"}),oe=j.useMemo(()=>{let u=ge(0);return Object.values(s).forEach(x=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:28 ~ Object.values ~ vaultStatItem:",x),u=u.add((x==null?void 0:x.vaultsTvl)||"0")}),u.toString()},[s]),ie=async(u,x="all",h=!1)=>{var C,H,U;const T=r(u);m(K(T,x,h));const p=await l(u);if((p==null?void 0:p.length)>0){if(!Pe(i)||Object.values(i).length!==p.length){const A={};for(let W=0;W<p.length;W++){const Y=p[W],ae=(Y==null?void 0:Y.lpTokentype)||((H=(C=ne[Y.clmmPoolAddress])==null?void 0:C.lpToken)==null?void 0:H.coin_type);typeof ae=="string"&&(A[ae]=Y.category=="haedal"?await _(ae):(U=ne[Y.clmmPoolAddress])==null?void 0:U.lpToken)}t(A)}const R=new Map(p.flatMap(A=>[A==null?void 0:A.displayTokenA,A==null?void 0:A.displayTokenB]).filter(Boolean).map(A=>{const W=E(A.coin_type),Y=S(A.coin_type);return[W,{...Y,coin_type:W}]}));y([...R.values()])}$(p),console.log("ðŸš€ ~ fetchVaultList ~ list:",p),p.length>0&&m(K(p,x,h)),n(!1)},se=u=>{var p,C,H,U;const x=(p=c[0])!=null&&p.coin_type?E((C=c[0])==null?void 0:C.coin_type):void 0,h=(H=c[1])!=null&&H.coin_type?E((U=c[1])==null?void 0:U.coin_type):void 0;return u==null?void 0:u.filter(R=>x&&h?E(R.displayTokenA.coin_type)==x&&E(R.displayTokenB.coin_type)==h||E(R.displayTokenA.coin_type)==h&&E(R.displayTokenB.coin_type)==x:x?E(R.displayTokenA.coin_type)==x||E(R.displayTokenB.coin_type)==x:R)},K=(u,x="all",h=!1)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:142 ~ filterVaultList ~ filterVaultList:");let T=[],p=[];return(c==null?void 0:c.length)>0?p=se(u):p=u,x==="all"&&(T=p),x=="cetus"&&(T=p.filter(C=>C.category=="cetus")),x=="haedal"&&(T=p.filter(C=>C.category=="haedal")),h&&(g!=null&&g.address)?N(T):T},N=u=>u.filter(x=>{var p;const h=i[x.lpTokentype]||((p=ne[x.clmmPoolAddress])==null?void 0:p.lpToken),T=b(h);return!!(T&&ge(T.balance).gt(0))});return{totalTvl:oe,filterMyVaultList:N,fetchVaultList:ie,vaultList:k,queryOptions:q,setQueryOptions:re,allVaultList:P,getCurrentTabNum:(u,x=!1)=>{let h;const T=se(P);return u=="all"?h=T:u=="cetus"?h=T.filter(p=>p.category=="cetus"):h=T.filter(p=>p.category=="haedal"),x&&(g!=null&&g.address)&&h&&h.length?String(N(h).length):String(h&&h.length||"")},selectCoinList:c,onClickSelectCoinList:V,onDeleteSelectCoinList:B,whiteTokenList:o,showSkeletonLoading:w,setShowSkeletonLoading:n,filterVaultList:K,setVaultList:m,sortVaultList:(u,x)=>{const{sortRule:h,sortType:T}=u;return x==null?void 0:x.sort((C,H)=>{var U,R,A,W;return T==="apr"?h==="desc"?((U=H.vaultsTotalApy)==null?void 0:U.replace("%",""))-((R=C.vaultsTotalApy)==null?void 0:R.replace("%","")):((A=C.vaultsTotalApy)==null?void 0:A.replace("%",""))-((W=H.vaultsTotalApy)==null?void 0:W.replace("%","")):h==="desc"?H.vaultsTvl-C.vaultsTvl:C.vaultsTvl-H.vaultsTvl})}}}function Ut(){const[l,r]=j.useState(!1),{fetchAccountBalance:s}=$e(),{currentAccount:i}=M(),[t,b]=j.useState({label:"All Vaults",value:"all"}),{totalTvl:g,vaultList:w,fetchVaultList:n,queryOptions:o,setQueryOptions:y,allVaultList:c,getCurrentTabNum:f,selectCoinList:S,onClickSelectCoinList:_,onDeleteSelectCoinList:V,whiteTokenList:B,showSkeletonLoading:k,setShowSkeletonLoading:m,filterVaultList:P,setVaultList:$,sortVaultList:q}=lt(),re=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[oe,ie]=j.useState({label:"TVL",value:"TVL"}),se=j.useMemo(()=>[{label:"All Vaults",value:"all",num:f("all",l)},{label:"Cetus",value:"cetus",num:f("cetus",l)},{label:"Haedal",value:"haedal",num:f("haedal",l)}],[c,l,S]),[K,N]=j.useState(6e4);return qe({interval:K,callback:()=>{n(o,t.value,l)}}),j.useEffect(()=>{c&&c.length>0&&$(P(c,t.value,l))},[l,t.value,c]),j.useEffect(()=>{n(o,t.value)},[]),j.useEffect(()=>{i!=null&&i.address||r(!1)},[i==null?void 0:i.address]),j.useEffect(()=>{S&&c&&c.length>0&&$(P(c,t.value,l))},[S,t.value,l]),e.jsxs(v,{gap:"0px",w:"100%",children:[e.jsx(st,{isLoading:k,total_tvl:g}),e.jsx(ce,{h:{base:"260px",lg:"240px"}}),e.jsx(tt,{sortByList:re,currTab:t,tabList:se,whiteTokenList:B,selectCoinList:S,onClickSelectCoinList:_,onDeleteSelectCoinList:V,showSkeletonLoading:k,handleChangeTab:z=>{t.value!==z.value&&(b(z),m(!0),setTimeout(()=>{m(!1)},200))},currSortType:oe,onSortByChange:z=>{o.sortType=z.value,y({...o}),ie(z),q({...o},w),N(6e4)},sortRule:o.sortRule,handleChangeSortRule:z=>{o.sortRule=z,y({...o}),q({...o},w),N(6e4)},handleRefresh:()=>{m(!0),s(),N(6e4),n(o,t.value,l)},isYourHoldings:l,onClickIsYourHoldings:()=>{r(!l)}}),e.jsx(et,{isShowPowered:t.label!=="Haedal",dataList:w,showSkeletonLoading:k})]})}export{Ut as default};
//# sourceMappingURL=Vaults-BSuSLdeX.js.map
