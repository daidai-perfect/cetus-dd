import{j as e,H as j,T as c,ar as ss,C as we,I as Qe,a as p,ab as Xe,V as C,v as Z,P as ns,h as ts,k as os,m as is,n as ls,f as ee,F as js,aa as Hs,O as ys,S as xs,u as We,X as fs,Y as bs,Z as Ss,$ as ws,a8 as vs,a0 as Cs,a1 as _s,t as Ws,a7 as ks}from"./vendor-DsVemle5.js";import{u as Ke,a as Ts}from"./useFavoritePool-BJLivj5m.js";import{a as he,B as se,I as pe,J as Ze,K as ve,L as Ns,F as Vs,M as Us,O as Ms,c as Ge,m as Se,P as ds,Q as Ds,H as Os,R as K,n as Ne,r as Je,i as Ys,q as As,d as Q,U as qe,V as qs,E as ue,W as Ie}from"./index-DIvDX_Yh.js";import{C as as}from"./CheckBox-D8E1JnSg.js";import{R as gs}from"./RefreshButton-DvOwcCPC.js";import{S as Ls}from"./SearchInputBlock-C1FbuQPb.js";import{u as rs,a as ms,b as Qs,i as Gs,V as Xs}from"./useStatistics-Bb3dlp6N.js";import{u as Ks}from"./useGetPoolList-CqBccx4u.js";import{u as Zs}from"./index-CB7ViKlR.js";import{H as Js,T as $s}from"./VolumeChart-Id-e3Nay.js";import{N as ke}from"./NoData-HfG491EP.js";import{S as Is}from"./SortDropBlock-BOOtx8Pl.js";import{T as Le}from"./TableSortTh-hlXjwRor.js";import{u as en}from"./index-DrXQ9_Ns.js";import{A as sn}from"./index-Cy9bHcqq.js";import{C as nn,P as Ps}from"./CoinPairInfo-CkfLTRmv.js";import{V as tn,F as on,u as zs,P as ln,a as an}from"./PositionListLoading-rP-RZ-Ji.js";import{u as rn}from"./useToken-YYj-bY2H.js";import{u as le,a as cn,b as cs}from"./usePositionList-DMAeOMoO.js";import{V as us}from"./VTextLabelBox-BJc5Qo4D.js";import{u as pn}from"./useBurn-CEpl1TJm.js";import{u as Bs}from"./useTransaction-CjlygSkT.js";import{S as He}from"./SingleTokenInfo-CBKDT-57.js";import{L as xn}from"./PriceRange-Cn5wVyeV.js";import{u as dn}from"./useNotifiSubscription-rM7Fm_-w.js";import{u as gn}from"./useRpcListener-BP45ghaH.js";import{u as un,a as Fs,P as hn}from"./PositionCurrentPrice-DM5OTcOh.js";import{u as jn}from"./useAccountBalance-CBRzIpkZ.js";import"./useWrapPoolData-D5Mp0awk.js";import"./index-CuczU6uB.js";import"./Loading-CQth9VKL.js";import"./TooltipIcon-DEf7niQQ.js";import"./index-DnKQwi__.js";import"./debounce-Bdyap_Ai.js";import"./index-BzFku5sE.js";import"./Pagination-CG5bXf-5.js";import"./EmptyTooltip-CGQ5-v3Q.js";import"./_getAllKeysIn-BgIYPgua.js";import"./YAxis-3Nr8gcNe.js";import"./generateCategoricalChart-vNDd3BKX.js";import"./linear-DYpwdEgO.js";import"./PoweredByHaedal-CSYJZkP0.js";import"./VaultsAprBlock-D43jDeN7.js";import"./swapWidget-xhK2LVCn.js";import"./useTokenBalance-Dt87YmUP.js";import"./global-CXwwb5OW.js";import"./msafe-oYBkW7LJ.js";import"./index-D6pLRAs4.js";import"./v4-C6aID195.js";import"./useFindBestRouting-H-sky85D.js";import"./useSwapHelper-BOLbfc9y.js";import"./HTextLabelBox-C4-LQHuG.js";import"./Slippage-DGLr6udB.js";import"./useInterval-DHQ0XTt3.js";import"./useDisplayTickPrice-_OOraB1q.js";import"./useTrack-DRz2Qk0R.js";import"./useSigner-Brm2Toqu.js";import"./CopyButton-D-DvrQ9Z.js";import"./PositionStatus-Z20d5_GT.js";import"./RangeValue-BR10AKaI.js";import"./useNotifiAlerts-BvO73E9q.js";import"./useXCetusHelper-CgocXtBx.js";import"./usePreviousValue-CMQTRdbk.js";function Rs({handleIsWatchList:s=()=>{},handleIsDisplayChecked:t=()=>{},onClickIncentiveTypes:x,handleRefresh:l,selectCoinList:o,onClickSelectCoinList:n,onDeleteSelectCoinList:i,isPools:h=!0,isRefreshed:u}){const{isWatchList:b,isAllPools:d,isIncentivizedOnly:_}=Ke(),{isApp:T,windowWidth:S}=he();return e.jsxs(j,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(j,{w:{base:"100%",lg:h?"unset":"100%"},justify:"space-between",children:[e.jsx(Ls,{selectCoinList:o,onClickSelectCoinList:n,onDeleteSelectCoinList:i}),(T||!h)&&e.jsx(gs,{handleRefresh:l,isRefreshed:h?u:void 0})]}),h&&e.jsxs(j,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(se,{w:{base:S<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:S<=350?e.jsx(j,{h:"38px",justify:"center",align:"center",children:e.jsx(pe,{xlinkHref:"#icon-icon_star",svgFill:b?"primary":"text_paragraph"})}):e.jsxs(j,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(as,{checked:b,onClick:()=>{}}),e.jsx(c,{color:b?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[e.jsx(se,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:T?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(j,{h:"100%",justify:"space-between",gap:T?"4px":"8px",children:[e.jsx(c,{color:_?"text_caption":"text_paragraph",children:T?"Incentivized":"Incentivized Only"}),e.jsx(ss,{isChecked:_,onChange:x})]})}),e.jsx(se,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:T?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(j,{h:"100%",justify:"space-between",children:[e.jsxs(c,{color:d?"text_caption":"text_paragraph",children:[" ",T?"All":"All pools"]}),e.jsx(ss,{isChecked:d,onChange:t})]})})]}),!T&&e.jsx(gs,{handleRefresh:l,isRefreshed:u})]})]})}const yn=()=>e.jsx(j,{w:"18px",h:"18px",onClick:s=>{ve(s)},children:e.jsx(Ze,{placement:"top",tooltip:e.jsx(c,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(we,{children:e.jsx(Qe,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),fn=({coinTypeA:s,coinTypeB:t})=>{const{getShowCoinTag:x}=Ns(),{importTokenList:l}=Vs(),{verifiedTokenMap:o}=Us(),n=p.useMemo(()=>(s||t)&&(o==null?void 0:o.size)>0?x(s)||x(t):!1,[s,t,o,l]);return e.jsx(e.Fragment,{children:n&&e.jsx(j,{w:"20px",h:"20px",onClick:i=>{ve(i)},children:e.jsx(Ze,{placement:"top",tooltip:e.jsx(c,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(we,{children:e.jsx(Qe,{w:"100%",h:"100%",src:Ms})})})})})};function bn({poolInfo:s}){const t=Xe(),{addFavorites:x,removeFavorites:l}=Ts(),{poolFavoriteIds:o}=Ke(),{goLiquidity:n}=rs(),i=p.useMemo(()=>o==null?void 0:o.includes((s==null?void 0:s.poolAddress)||""),[JSON.stringify(o),s==null?void 0:s.poolAddress]);return e.jsxs(C,{align:"flex-start",padding:"8px",children:[e.jsx(es,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{n(`/liquidity?tab=analytics&poolAddress=${s==null?void 0:s.poolAddress}`,s)}}),e.jsx(es,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var h,u;t(`/swap/${(h=s==null?void 0:s.displayTokenA)==null?void 0:h.coin_type}/${(u=s==null?void 0:s.displayTokenB)==null?void 0:u.coin_type}`)}}),e.jsx(es,{text:"Add to Watchlist",xlinkHref:i?"#icon-icon_star_sel":"#icon-icon_star",svgFill:i?"primary":"text_paragraph",onClick:()=>{i?l(s==null?void 0:s.poolAddress):x(s==null?void 0:s.poolAddress)}})]})}const es=({text:s,xlinkHref:t,svgFill:x="text_paragraph",onClick:l})=>e.jsxs(j,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:o=>{ve(o),l()},children:[e.jsx(pe,{svgFill:x,xlinkHref:t,svgHover:"primary",svgW:s=="Add to Watchlist"?"22px":"20px",svgH:s=="Add to Watchlist"?"22px":"20px",minW:s=="Add to Watchlist"?"22px":"20px",minH:s=="Add to Watchlist"?"22px":"20px",ml:s=="Add to Watchlist"?"-2px":"0px"}),e.jsx(c,{fontSize:"13px",children:s})]});function Sn({poolInfo:s}){const{isApp:t}=he(),{goLiquidity:x}=rs(),[l,o]=p.useState(!1),[n,i]=p.useState(!1);return e.jsxs(j,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:t?"space-between":"flex-end",gap:"8px",children:[s.isVaults||s.isUnstableVault?e.jsx(Ze,{placement:"bottom-end",tooltip:e.jsx(c,{_hover:{color:"primary"},cursor:"pointer",color:t?"primary":"text_paragraph",children:"Auto"}),showTooltip:n,children:e.jsx(we,{w:t?"calc(100%)":"unset",children:e.jsxs(Z,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:t?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:h=>{h.stopPropagation(),o(!l)},onMouseMove:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:[e.jsx(pe,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),t&&e.jsx(c,{color:t?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,e.jsx(Z,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{x(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(ns,{isLazy:!0,trigger:t?"click":"hover",placement:t?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(ts,{children:e.jsx(we,{onClick:h=>{ve(h)},children:e.jsx(Z,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(pe,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(os,{children:e.jsx(is,{borderRadius:"12px",w:"fit-content",children:e.jsx(ls,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsx(bn,{poolInfo:s})})})})]}),l?e.jsx(tn,{isOpen:l,setIsOpen:o,displayTokenA:s.displayTokenA,displayTokenB:s.displayTokenB,feeDisplay:s.feeDisplay,clmmPool:s.poolAddress,isUnstableVault:s.isUnstableVault,vaultId:s.vaultId,isReverse:s.isReverse}):null]})}function wn({miningRewardList:s,farmsRewarderList:t}){const{getTokenListInfo:x}=rn(),[l,o]=p.useState([]);return p.useEffect(()=>{(async()=>{if((s==null?void 0:s.length)>0||(t==null?void 0:t.length)>0)try{let i=[],h=[];if((s==null?void 0:s.length)>0){const u=s==null?void 0:s.map(d=>d==null?void 0:d.coinType),b=await x(u);i=s.map(d=>{const _=b==null?void 0:b.get(d==null?void 0:d.coinType);return{...d,tokenInfo:_,isMining:!0}})}if((t==null?void 0:t.length)>0){const u=t==null?void 0:t.map(d=>d==null?void 0:d.coinType),b=await x(u);h=t.map(d=>{const _=b==null?void 0:b.get(d==null?void 0:d.coinType);return{...d,tokenInfo:_,isFarming:!0}})}o(i.concat(h))}catch(i){console.error("Error processing list:",i)}})()},[s,t]),e.jsx(j,{w:"100%",justify:"flex-end",children:l.map(n=>{var i,h,u,b,d;return e.jsx(ee,{onClick:_=>_.stopPropagation(),children:e.jsx(Ze,{placement:"top",tooltip:e.jsxs(j,{gap:"4px",children:[e.jsx(ee,{children:e.jsx(Ge,{imageUrl:(i=n==null?void 0:n.tokenInfo)==null?void 0:i.logo_url,w:"24px",h:"24px"})}),(n==null?void 0:n.isMining)&&e.jsxs(c,{color:"primary",display:"inline-block",children:[Se(ds(Ds(n==null?void 0:n.emissionsEveryDay,(h=n==null?void 0:n.tokenInfo)==null?void 0:h.decimals),2))," ",(u=n==null?void 0:n.tokenInfo)==null?void 0:u.symbol," per day in Mining"]}),(n==null?void 0:n.isFarming)&&e.jsxs(c,{color:"primary",display:"inline-block",children:[Se(ds(n==null?void 0:n.emissionsEveryDay,2))," ",(b=n==null?void 0:n.tokenInfo)==null?void 0:b.symbol," per day in Farming"]})]},n==null?void 0:n.coinType),children:e.jsx(we,{as:"button",children:e.jsx(Ge,{imageUrl:(d=n==null?void 0:n.tokenInfo)==null?void 0:d.logo_url,w:"24px",h:"24px"})})})},n==null?void 0:n.coinType)})})}function vn({isRefreshed:s,handleIsRefreshed:t}){var me;const{getStatistics:x}=ms(),{poolRefreshStatus:l,setPoolRefreshStatus:o,setPoolListLength:n,poolFavoriteIds:i,isWatchList:h,setIsWatchList:u,isIncentivizedOnly:b,setIsIncentivizedOnly:d,isAllPools:_,setIsAllPools:T,poolFavoriteIdsChange:S,setPoolFavoriteIdsChange:r}=Ke(),{getPoolList:Y}=Ks(),{getFavoritePoolList:E}=Ts(),{goLiquidity:G}=rs(),[J,O]=p.useState(["mining","farming","noIncentives"]),ne=()=>{d(!b),T(!1)},te=()=>{T(!_),u(!1),d(!1)};p.useEffect(()=>{O(b?["mining","farming"]:["mining","farming","noIncentives"])},[b]);const ae=()=>{T(!1),u(!h),r(!1)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",S,i),h&&S&&(r(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",h),ce({offset:0,isWatchList:h}))},[h,i==null?void 0:i.length,S]);const A=p.useRef(null),$=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),o("pending"),Te(1),W(!0),ce({offset:0,isListLoading:!1}),A.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",l),l=="pending"&&o("timeout")},1e4),x()},[D,F]=p.useState([]),q=a=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",a),F(R=>[...R,a])},y=a=>{F(R=>R.filter(L=>(L==null?void 0:L.coin_type)!==(a==null?void 0:a.coin_type)))};Zs(()=>{console.log("ðŸš€ ~ PoolsContent ~ selectCoinList:",h,J,D),typeof h=="boolean"&&ce({offset:0})},[h,J,D,_],{wait:150});const f=20,[k,oe]=p.useState(!0),[H,W]=p.useState(!0),[N,I]=p.useState("desc"),[m,re]=p.useState({label:"Volume (24H)",value:"vol"}),[M,xe]=p.useState([]),[Ve,Ue]=p.useState(0),[Ce,Te]=p.useState(1),ce=async a=>{var Re,Ee,P,v;const R=(a==null?void 0:a.isListLoading)??!0,L=(a==null?void 0:a.isWatchList)??h;console.log("ðŸš€ ~  ~ params:",a,L);const je=D.length==2?`${(Re=D[0])==null?void 0:Re.coin_type},${(Ee=D[1])==null?void 0:Ee.coin_type}`:D.length==1?`${(P=D[0])==null?void 0:P.coin_type}`:"",{is_vaults:de=!1,display_all_pools:ge=L?!0:_??!0,has_mining:Pe=J.includes("mining"),has_farming:ze=J.includes("farming"),no_incentives:Be=J.includes("noIncentives"),order_by:Fe=N=="desc"?`-${m==null?void 0:m.value}`:`${m==null?void 0:m.value}`,limit:ye=f,offset:fe=0,coin_type:Oe=je,pool:Ye=""}=a;fe==0&&Te(1),Number(fe)>=f?oe(!0):W(R);const _e={is_vaults:de,display_all_pools:ge,has_mining:Pe,has_farming:ze,no_incentives:Be,order_by:Fe,limit:ye,offset:fe,coin_type:Oe,pool:Ye};let ie;try{L?(_e.pools=i,ie=await E(_e)):ie=await Y(_e),console.log("ðŸš€ ~  ~ result:",ie),ie&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",ie),Number(fe)>=f?xe(U=>U.concat(ie.list)):xe(ie.list),Ue(ie.total),n((ie.total||0).toString()),W(!1),o("success"))}catch(U){console.log("ðŸš€ ~  ~ error:",U),U!=null&&U.list&&((v=U==null?void 0:U.list)==null?void 0:v.length)>0&&(o("error"),xe(U.list),Ue(U.total),n(""),W(!1))}};p.useEffect(()=>{k&&oe(!1)},[M.length]);const{failedTsToast:$e}=Os();p.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",l),l!=="pending"){const a={linkLabel:"",getShowInfo:()=>({toastTitleText:l=="error"?"Request Error":l=="timeout"?"Please check the network status.":""})};(l=="success"||l=="error")&&clearTimeout(A.current),(l=="error"||l=="timeout")&&$e(a),t(!0)}},[l]);const{isApp:Ae}=he(),Me=a=>{if(console.log("ðŸš€ ~ clickSort ~ item:",a),Ae)(a==null?void 0:a.value)!==(m==null?void 0:m.value)&&(ce({offset:0,order_by:`-${a==null?void 0:a.value}`}),I("desc"),re(a));else if((a==null?void 0:a.value)==(m==null?void 0:m.value)){ce({offset:0,order_by:N=="desc"?`${a==null?void 0:a.value}`:`-${a==null?void 0:a.value}`});const R=N=="desc"?"asc":"desc";I(R)}else ce({offset:0,order_by:`-${a==null?void 0:a.value}`}),I("desc"),re(a)},De=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],g=De.reduce((a,R)=>(a[R.value]=R,a),{}),z=a=>{const R=a*f;ce({offset:R}),Te(L=>L+1)};Xe();const B=p.useMemo(()=>{const a=(Ce-1)*f+(M==null?void 0:M.length);return l!=="error"&&Number(Ve)>a},[Ve,Ce,f,l,M==null?void 0:M.length]);p.useEffect(()=>(x(),A.current&&(clearTimeout(A.current),A.current=null),()=>{n(""),A.current&&(clearTimeout(A.current),A.current=null)}),[]);const V=en({count:M.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),X=p.useRef(null);p.useEffect(()=>{let a=null;return!H&&X.current&&(a=new IntersectionObserver(R=>{const L=R[0];L&&L.isIntersecting&&B&&!k&&(console.log("ðŸš€ ~ useEffect ~ entry:",L),z(Ce))},{threshold:.5,rootMargin:"100px"}),a.observe(X.current)),()=>{a&&a.disconnect()}},[H,Ce,B,k]);const w=Cn(N,m,Me,g,Ae);return e.jsxs(C,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(Rs,{handleIsDisplayChecked:te,handleIsWatchList:ae,onClickIncentiveTypes:ne,handleRefresh:$,selectCoinList:D,onClickSelectCoinList:q,onDeleteSelectCoinList:y,isRefreshed:s}),e.jsx(ee,{h:"1px",w:"100%",bg:"border"}),e.jsxs(C,{w:"100%",position:"relative",gap:"20px",children:[!H&&(M==null?void 0:M.length)==0?e.jsx(ke,{type:"nodata",text:"No pools found",children:e.jsx(c,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):Ae?e.jsxs(C,{w:"100%",gap:"4px",children:[e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsx(c,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Is,{sortText:"Sort by",minW:"180px",currentSort:m,sortByList:De,onSortByChange:Me,xlinkHref:N=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{ce({offset:0,order_by:N=="desc"?`${m==null?void 0:m.value}`:`-${m==null?void 0:m.value}`});const a=N=="desc"?"asc":"desc";I(a)}})]}),e.jsx(Js,{rowKey:"poolAddress",dataSource:M,columns:w,loading:H,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(a,R)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:a=>{G(`/liquidity?poolAddress=${a.poolAddress}`,a)}})]}):H?e.jsx($s,{rowKey:"poolAddress",columns:w,dataSource:M,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):e.jsxs(C,{w:"100%",gap:"0",children:[e.jsx(ee,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",h:"36px",columnGap:"12px",p:"0 16px",children:w==null?void 0:w.map((a,R)=>e.jsx(js,{as:"div",align:"center",justify:R===0?"flex-start":"flex-end",children:a.title},a.key))}),e.jsx(ee,{w:"100%",h:`${M.length*80}px`,pos:"relative",children:(me=V.getVirtualItems())==null?void 0:me.map(a=>{const R=M[a.index];return e.jsx(_n,{item:R,columns:w,virtualRow:a,goLiquidity:G},R==null?void 0:R.poolAddress)})})]}),e.jsx(ee,{ref:X,children:k?e.jsx(Hs,{size:"sm",color:"text_caption"}):""})]})]})}const Cn=(s,t,x,l,o)=>[{title:e.jsx(c,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:n=>{var i,h;return e.jsxs(j,{children:[e.jsx(nn,{poolInfo:n,symbolEllipsesDecimals:10}),(n==null?void 0:n.haveFarming)&&e.jsx(on,{}),(n==null?void 0:n.haveMining)&&e.jsx(yn,{}),e.jsx(fn,{coinTypeA:(i=n==null?void 0:n.tokenA)==null?void 0:i.coin_type,coinTypeB:(h=n==null?void 0:n.tokenB)==null?void 0:h.coin_type})]})}},{title:e.jsx(Le,{labelInfo:l.tvl,sortRule:s,sortBy:t,clickSort:n=>x(n)}),key:"tvlDisplay"},{title:e.jsx(Le,{labelInfo:l.vol,sortRule:s,sortBy:t,clickSort:n=>x(n)}),key:"volume24Display"},{title:e.jsx(Le,{labelInfo:l.fees,sortRule:s,sortBy:t,clickSort:n=>x(n)}),key:"fees24Display"},{title:e.jsx(c,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:n,farmsRewarderList:i})=>n&&(n==null?void 0:n.length)<=0&&i&&(i==null?void 0:i.length)<=0,render:({miningRewardList:n,farmsRewarderList:i})=>e.jsx(wn,{miningRewardList:n,farmsRewarderList:i})},{title:e.jsx(Le,{labelInfo:l.totalApr,sortRule:s,sortBy:t,tooltip:{type:"apr24"},clickSort:n=>x(n),justifyContent:"flex-end"}),key:"apr24h",render:n=>e.jsx(sn,{poolInfo:n,placement:o?"auto-start":"top"})},{title:e.jsx(c,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:n=>e.jsx(Sn,{poolInfo:n})}],_n=({item:s,columns:t,virtualRow:x,goLiquidity:l})=>e.jsx(ee,{as:"div",pos:"absolute",top:`${x.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>l(`/liquidity?poolAddress=${s.poolAddress}`,s),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",_hover:{bg:"primary_opacity.10"},children:t==null?void 0:t.map((o,n)=>e.jsx(js,{align:"center",justify:n===0?"flex-start":"flex-end",children:o!=null&&o.render?o==null?void 0:o.render(s):e.jsx(c,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:s==null?void 0:s[o==null?void 0:o.key]})},o.key))}),kn="data:image/png;base64,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",Tn="/assets/pool_bg-DIChGQZi.png",An=({posInfo:s})=>{var i,h,u,b,d,_,T,S;const[t,x]=p.useState(!1),{posApiPoolData:l}=le(),o=(i=l[s==null?void 0:s.clmmPool])==null?void 0:i.haveMining,n=(h=l[s==null?void 0:s.clmmPool])==null?void 0:h.haveFarming;return e.jsx(ee,{p:"12px 0",onClick:r=>ve(r),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(ns,{isLazy:!0,isOpen:t,children:[e.jsx(ts,{children:e.jsxs(we,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:[o&&e.jsx(Qe,{w:"14px",h:"14px",src:"/images/icon_mining.png",mr:"4px"}),n&&e.jsx(Qe,{w:"14px",h:"14px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(c,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:K(s==null?void 0:s.totalRewardUsd,2)})]})}),t&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(os,{children:e.jsx(is,{zIndex:"2",w:"fit-content",children:e.jsx(ls,{children:e.jsxs(C,{align:"flex-start",minW:"300px",children:[((u=s==null?void 0:s.pendingFeesList)==null?void 0:u.length)>0&&e.jsxs(C,{align:"flex-start",minW:"100%",children:[e.jsxs(j,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(c,{fontSize:"12px",children:"Fees"}),e.jsxs(c,{color:"primary",children:[" ",K(s==null?void 0:s.feeOwedUsd,2)]})]}),(b=s==null?void 0:s.pendingFeesList)==null?void 0:b.map(r=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",r),e.jsxs(j,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(He,{token:r.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(C,{align:"flex-end",gap:"4px",children:[e.jsx(c,{fontSize:"12px",color:"text_caption",children:Se(r==null?void 0:r.amount,6)}),e.jsx(c,{fontSize:"12px",children:K(r==null?void 0:r.amountUSD,2)})]})]},r==null?void 0:r.coin_address)))]}),((d=s==null?void 0:s.pendingRewarderList)==null?void 0:d.length)>0&&e.jsxs(C,{align:"flex-start",minW:"100%",children:[e.jsxs(j,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(c,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(c,{color:"primary",children:[" ",K(s==null?void 0:s.rewarderUsd,2)]})]}),(_=s==null?void 0:s.pendingRewarderList)==null?void 0:_.map(r=>e.jsxs(j,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(He,{token:r.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(C,{align:"flex-end",gap:"4px",children:[e.jsx(c,{fontSize:"12px",color:"text_caption",children:Se(r==null?void 0:r.amount,6)}),e.jsx(c,{fontSize:"12px",children:K(r==null?void 0:r.amountUSD,2)})]})]},r==null?void 0:r.coin_address))]}),((T=s==null?void 0:s.pendingFarmsList)==null?void 0:T.length)>0&&e.jsxs(C,{align:"flex-start",minW:"100%",children:[e.jsxs(j,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(c,{fontSize:"12px",children:"Farming rewards"}),e.jsxs(c,{color:"primary",children:[" ",K(s==null?void 0:s.farmsUsd,2)]})]}),(S=s==null?void 0:s.pendingFarmsList)==null?void 0:S.map(r=>{var Y;return e.jsxs(j,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(He,{token:r.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(C,{align:"flex-end",gap:"4px",children:[e.jsx(c,{fontSize:"12px",color:"text_caption",children:Se(r==null?void 0:r.amount,6)}),e.jsx(c,{fontSize:"12px",children:K(r==null?void 0:r.amountUSD,2)})]})]},(Y=r==null?void 0:r.token)==null?void 0:Y.coin_type)})]})]})})})})]})})};function ps({posInfo:s,onClickCheckBox:t,checked:x,pageFrom:l,cursor:o="pointer"}){var d;const{getClmmPosName:n}=cn(),{posPoolsOriginalData:i}=le(),h=p.useMemo(()=>{var _;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const T=(_=i==null?void 0:i[s==null?void 0:s.clmmPool])==null?void 0:_.index;return n(s==null?void 0:s.index,T)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,i]),{posPoolsRelatedData:u}=le(),b=((d=u[s==null?void 0:s.posId])==null?void 0:d.displayFee)+"%";return e.jsxs(se,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(j,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(C,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Ps,{poolInfo:{...s,feeDisplay:b},symbolEllipsesDecimals:10}),e.jsx(c,{fontSize:"12px",color:"primary_gray",children:h})]}),t&&e.jsx(as,{cursor:o,checked:x||!1,onClick:()=>t(s)})]}),l=="pendingYieldModal"?e.jsxs(j,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(c,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(An,{posInfo:s})]}):e.jsxs(j,{justify:"space-between",p:"0 16px",children:[e.jsx(c,{color:"primary_gray",children:"Liquidity"}),e.jsx(xn,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:l!="lpBurnNext"})]})]})}function mn({onClose:s,currentLockItem:t}){var ne,te,ae,A,$,D,F,q;const{currentAccount:x}=Ne(),{signAndExecuteTransaction:l}=Bs(),{getBurnTxPayload:o}=pn(),{getPositionBaseList:n,getPosRelatedData:i}=cs(),{posLiquidityData:h}=le(),[u,b]=p.useState(!1),[d,_]=p.useState(""),[T,S]=p.useState(!1),r=y=>{const k=y.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");_(k),console.log("ðŸš€ ~ inputChange ~ e:",y.target.value,y.target.value.toLowerCase()),y.target.value.toLowerCase()=="lock my liquidity forever"?S(!0):S(!1)},{getTokenAmountValue:Y}=Je(),E=h[t==null?void 0:t.posId],G=Y((ne=t==null?void 0:t.displayTokenA)==null?void 0:ne.coin_type,E==null?void 0:E.displayCoinAmountA,"--"),J=Y((te=t==null?void 0:t.displayTokenB)==null?void 0:te.coin_type,E==null?void 0:E.displayCoinAmountB,"--"),O=async()=>{console.log("ðŸš€ ~ currentLockItem:",t),b(!0);try{const y=o(t);console.log("ðŸš€ ~ toBurn ~ tx:",y);const f=await l(y,{getShowInfo:k=>{var H,W;const oe={modalDescriptionText:`${(H=t==null?void 0:t.displayTokenA)==null?void 0:H.symbol} - ${(W=t==null?void 0:t.displayTokenB)==null?void 0:W.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",k),oe}});if(console.log("ðŸš€ ~ toBurn ~ res:",f),f){const k=await n(x==null?void 0:x.address);i(k),s()}b(!1)}catch(y){b(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",y)}};return e.jsxs(C,{w:"100%",gap:"12px",children:[e.jsxs(C,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(c,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(c,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(C,{w:"100%",children:[e.jsx(ps,{posInfo:t,pageFrom:"lpBurnNext"}),e.jsx(se,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(se,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(C,{gap:"16px",children:[e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsxs(j,{children:[e.jsx(Ge,{imageUrl:(ae=t==null?void 0:t.displayTokenA)==null?void 0:ae.logo_url,w:"20px",h:"20px",coinType:(A=t==null?void 0:t.displayTokenA)==null?void 0:A.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(c,{color:"text_caption",children:[E==null?void 0:E.displayCoinAmountA," ",($=t==null?void 0:t.displayTokenA)==null?void 0:$.symbol]})]}),e.jsx(c,{color:"text_caption",children:K(G,2)})]}),e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsxs(j,{children:[e.jsx(Ge,{imageUrl:(D=t==null?void 0:t.displayTokenB)==null?void 0:D.logo_url,w:"20px",h:"20px",coinType:(F=t==null?void 0:t.displayTokenB)==null?void 0:F.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(c,{color:"text_caption",children:[E==null?void 0:E.displayCoinAmountB," ",(q=t==null?void 0:t.displayTokenB)==null?void 0:q.symbol]})]}),e.jsx(c,{color:"text_caption",children:K(J,2)})]})]})})})]}),e.jsxs(j,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(pe,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(c,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(se,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(c,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(c,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(se,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(ys,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:d,onChange:r})})]}),e.jsxs(C,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx(Z,{isLoading:u,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!T||u,onClick:O,children:"Confirm"}),e.jsx(Z,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function Pn({onClose:s,onClickLock:t,currentLockItem:x,onClickCheckBox:l}){const{currentAccount:o,onWalletModal:n}=Ne(),{fullRangePosBaseList:i,fullRangePosBaseListLoading:h}=le();return e.jsxs(C,{w:"100%",gap:"20px",children:[e.jsxs(C,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(c,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(c,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(c,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(C,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:o!=null&&o.address?h?[{},{}].map((u,b)=>e.jsx(Es,{},b)):(i==null?void 0:i.length)>0?i==null?void 0:i.map(u=>e.jsx(ps,{posInfo:u,checked:(u==null?void 0:u.posId)==(x==null?void 0:x.posId),onClickCheckBox:b=>l(b),pageFrom:"lpBurnPrev"},u==null?void 0:u.posId)):e.jsxs(se,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ke,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(c,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ke,{type:"nowallet",onboard:()=>n(!0),bg:"none",border:"none"})}),e.jsxs(C,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(Z,{disabled:Object.values(x).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:t,children:"Lock Liquidity"}),e.jsx(Z,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Es=()=>e.jsxs(se,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(j,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(j,{gap:"0",children:[e.jsx(xs,{size:"9"}),e.jsx(xs,{size:"9"}),e.jsx(C,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(We,{height:"4",width:"100px"})})]})}),e.jsx(ee,{w:"100%",p:"16px",children:e.jsx(We,{height:"5",width:"250px"})})]});function zn({isOpen:s,onClose:t}){const[x,l]=p.useState(!1),[o,n]=p.useState({});p.useEffect(()=>{n({}),l(!1)},[s]);const i=u=>{(u==null?void 0:u.posId)==(o==null?void 0:o.posId)?n({}):n(u)},{isApp:h}=he();return e.jsxs(fs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:t,isCentered:!0,children:[e.jsx(bs,{}),e.jsxs(Ss,{minWidth:h?"300px":"482px",children:[e.jsx(ws,{children:e.jsx(vs,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(Cs,{}),e.jsxs(_s,{p:"16px 16px 0",textAlign:"center",children:[!x&&e.jsx(Pn,{onClose:t,currentLockItem:o,onClickCheckBox:u=>i(u),onClickLock:()=>l(!0)}),x&&e.jsx(mn,{onClose:t,currentLockItem:o})]})]})]})}function Bn({isRefreshed:s}){var T;const{tab:t}=zs(),x=Xe(),[l,o]=p.useState(!1),{statisticsData:n}=Qs(),{poolListLength:i}=Ke(),{showPosListLength:h}=le(),u=p.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",i),[{label:"Pools",value:"pools",num:i,imgInfo:{src:Gs,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:h,imgInfo:{src:kn,w:"22px",h:"22px"}}]),[i,h]),{isApp:b}=he(),[d,_]=p.useState(!1);return e.jsxs(C,{w:"100%",children:[e.jsxs(j,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(C,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(c,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(C,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:Tn,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(us,{wrapStyle:{alignItems:b?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(n==null?void 0:n.totalValueLocked)||"",isLoading:!n}),e.jsx(us,{wrapStyle:{alignItems:b?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(n==null?void 0:n.cumulativeVolume)||"",isLoading:!n})]})]}),e.jsx(ee,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(Xs,{statisticsData:n,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(j,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Ys,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:u,currentTab:((T=u==null?void 0:u.find(S=>(S==null?void 0:S.value)===t))==null?void 0:T.label)||"Pools",handleChangeTab:S=>{x(`/pools?tab=${S.value}`)}}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[t=="positions"?e.jsx(Ws,{isOpen:d,label:e.jsx(c,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx(Z,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onClick:()=>{_(!1),o(!0)},children:"LP Burn"})}):e.jsx(Z,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>x("/create-pool"),children:"Create a new pool"}),e.jsx(Z,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>x("/select-pool"),children:"Add Liquidity"})]})]}),l&&e.jsx(zn,{isOpen:l,onClose:()=>o(!1)})]})}const Fn="/assets/tvl_bg-D80TUrdU.png",Rn="/assets/yield_bg-CcCC1tTK.png";function En({isOpen:s,claimLoading:t,onClose:x,changeClaimLoading:l}){const[o,n]=p.useState(!1),{coinPriceObj:i}=As(),{getPosRelatedData:h,getPositionBaseList:u}=cs(),{signAndExecuteTransaction:b}=Bs(),{currentAccount:d}=Ne(),{getBatchHarvestFeeAndRewardsTxPayload:_}=un(),{getTokenAmountValue:T}=Je(),[S,r]=p.useState([]),[Y,E]=p.useState(!0),[G,J]=p.useState(!0),[O,ne]=p.useState(.01),[te,ae]=p.useState([]),[A,$]=p.useState([]),[D,F]=p.useState(""),[q,y]=p.useState(""),[f,k]=p.useState([]),{myPosYieldValue:oe,posBaseList:H,posBaseListLoading:W,posFeeDataLoading:N,posRewardsDataLoading:I,farmsPosRewardsDataLoading:m,posFeeData:re,posRewardsData:M,farmsPosRewardsData:xe}=le(),Ve=g=>{const z=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");g.target.value=g.target.value.replace(z,"$1"),ne(g.target.value)},Ue=()=>{(!O||O<.01)&&ne(.01)},Ce=W||N||I||m;p.useEffect(()=>{const g=[];let z="0";const B=[];if((H==null?void 0:H.length)>0&&!W&&!N&&!I&&!m){H.forEach((w,me)=>{var fe,Oe,Ye,_e,ie,Re,Ee;let a="0",R="0",L="0",je="0",de="0",ge="0";const Pe=[],ze=[],Be=[];if(((fe=Object.values(re))==null?void 0:fe.length)>0){const P=re[w==null?void 0:w.posId],v=T((Oe=w==null?void 0:w.displayTokenA)==null?void 0:Oe.coin_type,P==null?void 0:P.displayFeeOwedA,"--"),U=T((Ye=w==null?void 0:w.displayTokenB)==null?void 0:Ye.coin_type,P==null?void 0:P.displayFeeOwedB,"--");a=Q(a).plus((P==null?void 0:P.displayFeeOwedA)||0).plus((P==null?void 0:P.displayFeeOwedB)||0).toString(),v!=="--"&&U!=="--"&&(je=Q(v).plus(U).toString()),ze.push({coin_address:qe((_e=w==null?void 0:w.displayTokenA)==null?void 0:_e.coin_type,!1),amount:P==null?void 0:P.displayFeeOwedA,amountUSD:v,token:w==null?void 0:w.displayTokenA},{coin_address:qe((ie=w==null?void 0:w.displayTokenB)==null?void 0:ie.coin_type,!1),amount:P==null?void 0:P.displayFeeOwedB,amountUSD:U,token:w==null?void 0:w.displayTokenB})}if(((Re=Object.values(M))==null?void 0:Re.length)>0){const P=M[w==null?void 0:w.posId];(P==null?void 0:P.length)>0&&P.forEach(v=>{var U;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",v),R=Q(R).plus(v.display_amount_owed||0).toString(),Number(v==null?void 0:v.display_amount_owed)>0){const be=T(v==null?void 0:v.token.coin_type,v.display_amount_owed);be!=="--"&&(de=Q(de).plus(be).toString()),Pe.push({coin_address:qe((U=v==null?void 0:v.token)==null?void 0:U.coin_type,!1),amount:v.display_amount_owed,amountUSD:be,token:v==null?void 0:v.token})}})}if(((Ee=Object.values(xe))==null?void 0:Ee.length)>0){const P=xe[w==null?void 0:w.id];(P==null?void 0:P.length)>0&&P.forEach(v=>{var U;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",v),L=Q(L).plus(v.display_amount_owed||0).toString(),Number(v==null?void 0:v.display_amount_owed)>0){const be=T(v==null?void 0:v.token.coin_type,v.display_amount_owed);be!=="--"&&(ge=Q(ge).plus(be).toString()),Be.push({coin_address:qe((U=v==null?void 0:v.token)==null?void 0:U.coin_type,!1),amount:v.display_amount_owed,amountUSD:be,token:v==null?void 0:v.token})}})}const Fe=Q(de).plus(je).plus(ge).toString(),ye=(Q(a).gt(0)||Q(R).gt(0)||Q(L).gt(0))&&Number(Fe)==0?"--":Fe;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Fe,ye),z=Q(z).plus(de).plus(je).plus(ge).toString(),Number(ye)!==0&&B.push(w),G&&Number(ye)>Number(O)&&g.push({...w,totalRewardUsd:ye,pendingRewarderList:Pe,pendingFeesList:ze,pendingFarmsList:Be,rewarderUsd:de,feeOwedUsd:je,farmsUsd:ge}),G||g.push({...w,totalRewardUsd:ye,pendingRewarderList:Pe,pendingFeesList:ze,pendingFarmsList:Be,rewarderUsd:de,feeOwedUsd:je,farmsUsd:ge})}),ae(B);const V=g.filter(w=>Number(w.totalRewardUsd)!==0);$(V),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",V,A),G?(V==null?void 0:V.length)!==g.length?F(""):F("all"):(V==null?void 0:V.length)!==B.length?F(""):F("all");const X=g.sort((w,me)=>me.totalRewardUsd-w.totalRewardUsd);r(X),E(!1)}},[O,H,G,W,N,I,m,i]);const{calculatePendingYield:Te}=Fs();p.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",A),(A==null?void 0:A.length)>0){const{total:g,rewardAndFeeList:z}=Te(A,re,M,xe);console.log("ðŸš€ ~ useEffect ~ total:",A,g,z),y(g),k(z)}else y(""),k([])},[A==null?void 0:A.length,re,M,xe]);const ce=g=>{if(console.log("ðŸš€ ~ selectItem ~ item:",g),Number(g==null?void 0:g.totalRewardUsd)<=0)return;const z=A,B=(z==null?void 0:z.filter(V=>(V==null?void 0:V.posId)!==(g==null?void 0:g.posId)))||[];z!=null&&z.some(V=>(V==null?void 0:V.posId)===(g==null?void 0:g.posId))||B.push(g),console.log("ðŸš€ ~ selectItem ~ updatedList:",B),$(B),G?(B==null?void 0:B.length)!==(S==null?void 0:S.length)?F(""):F("all"):(B==null?void 0:B.length)!==(te==null?void 0:te.length)?F(""):F("all")};p.useEffect(()=>{ne(.01),n(!1),J(!0)},[s]);const $e=()=>{if(D=="all")F(""),$([]);else{F("all");const g=A,z=Object.fromEntries(A.map(B=>[B==null?void 0:B.posId,B]));S.forEach(B=>{!z[B==null?void 0:B.posId]&&Number(B.totalRewardUsd)!==0&&g.push(B)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",z,g),$(g)}},{fetchAccountBalance:Ae}=jn(),Me=async()=>{l(!0);try{const g=Object.fromEntries(A.map(X=>[X==null?void 0:X.posId,X==null?void 0:X.pendingRewarderList])),{tx:z,txb:B}=await _(A,g,d==null?void 0:d.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",z);const V=await b(B,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});if(console.log("ðŸš€ ~ toClaimYield ~ res:",V),V){Ae();const X=await u(d==null?void 0:d.address);h(X)}l(!1)}catch(g){l(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",g)}finally{x()}},{isApp:De}=he();return e.jsxs(fs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:x,isCentered:!0,children:[e.jsx(bs,{}),e.jsxs(Ss,{minWidth:De?"300px":"446px",children:[e.jsx(ws,{children:e.jsx(vs,{fontWeight:"500",fontSize:"16px",children:o?"Claim Yield":"Details"})}),e.jsx(Cs,{}),e.jsx(_s,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(ee,{children:[e.jsxs(C,{w:"100%",children:[e.jsx(ee,{w:"100%",p:"0 16px",children:e.jsx(C,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(We,{isLoaded:!Ce,children:e.jsxs(C,{gap:"4px",align:"center",children:[e.jsx(c,{color:"primary_gray",children:o?"Total Claim":"Pending Yield"}),e.jsx(c,{color:"primary",fontSize:"20px",fontWeight:"500",children:K(o?q:oe,2)})]})})})}),!o&&e.jsxs(j,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(c,{color:"text_caption",children:"Position"}),e.jsxs(j,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(ss,{isChecked:G,onChange:()=>J(!G)}),e.jsx(c,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(se,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(ys,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${O}`,onChange:Ve,onBlur:Ue})})]})]}),e.jsx(C,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(S==null?void 0:S.length)>2?"16px":"20px",mr:"-4px",children:o?f==null?void 0:f.map(g=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",g),e.jsx(se,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsx(He,{token:g==null?void 0:g.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(C,{align:"flex-end",gap:"4px",children:[e.jsx(c,{color:"text_caption",children:Se(g==null?void 0:g.amount,6)}),e.jsxs(c,{children:["(",K(g==null?void 0:g.amountUSD,2),")"]})]})]})},g==null?void 0:g.coin_address))):(S==null?void 0:S.length)>0?S==null?void 0:S.map(g=>e.jsx(ps,{posInfo:g,onClickCheckBox:z=>ce(z),pageFrom:"pendingYieldModal",cursor:Number(g==null?void 0:g.totalRewardUsd)<=0?"not-allowed":"pointer",checked:A.some(z=>(z==null?void 0:z.posId)===(g==null?void 0:g.posId))},g==null?void 0:g.posId)):Y?[{},{}].map((g,z)=>e.jsx(Es,{},z)):e.jsx(ke,{type:"nodata"})}),o?e.jsx(j,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(se,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>n(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(j,{justify:"center",gap:"4px",children:[e.jsx(pe,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(c,{children:"Back"})]})})}):e.jsx(ee,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(j,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(C,{gap:"4px",align:"flex-start",children:[e.jsx(c,{color:"primary_gray",children:"Amount selected"}),e.jsx(c,{color:"primary",fontSize:"18px",fontWeight:"500",children:K(q,2)})]}),e.jsxs(j,{children:[e.jsx(c,{color:"text_caption",children:"Select All"}),e.jsx(as,{checked:D=="all",onClick:$e})]})]})})]}),o?e.jsx(Z,{isLoading:t,disabled:(f==null?void 0:f.length)==0||t,w:"100%",h:"52px",fontWeight:"500",onClick:Me,children:"Confirm"}):e.jsx(Z,{disabled:Number(q)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>n(!0),children:"Claim Yield"})]})})]})]})}const hs=({yieldList:s})=>{const[t,x]=p.useState(!1),{myPosYieldValue:l}=le(),{isApp:o}=he();return e.jsx(C,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:o?()=>x(!t):()=>x(!1),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(ns,{isLazy:!0,isOpen:t,placement:"bottom-end",children:[e.jsx(ts,{children:e.jsx(we,{as:"button",children:e.jsx(c,{cursor:Number(l)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(l)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:K(l,2)})})}),t&&Number(l)>0&&(s==null?void 0:s.length)>0&&e.jsx(os,{children:e.jsx(is,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(ls,{p:"0px",children:e.jsx(C,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(n=>{var i;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",n),e.jsxs(j,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(He,{token:n==null?void 0:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(j,{gap:"4px",children:[e.jsx(c,{fontSize:"12px",color:"text_caption",children:Se(n==null?void 0:n.amount,6)}),e.jsxs(c,{fontSize:"12px",children:["(",K(n==null?void 0:n.amountUSD,2),")"]})]})]},(i=n==null?void 0:n.token)==null?void 0:i.coin_type)})})})})})]})})};function Hn(){const{currentAccount:s}=Ne(),[t,x]=p.useState(!1),[l,o]=p.useState(!1),[n,i]=p.useState([]),{getTokenAmountValue:h}=Je(),{coinPriceObj:u}=As(),{myPosYieldValue:b,setMyPosYieldValue:d,posFeeDataLoading:_,posRewardsDataLoading:T,farmsPosRewardsDataLoading:S,posBaseList:r,posLiquidityData:Y,posBaseListLoading:E,posLiquidityDataLoading:G,posFeeData:J,posRewardsData:O,farmsPosRewardsData:ne}=le(),te=p.useMemo(()=>{let F=0,q=0;return(r==null?void 0:r.length)>0&&(s!=null&&s.address)?(r.forEach(y=>{var H,W;const f=Y[y==null?void 0:y.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",f);const k=h((H=y==null?void 0:y.displayTokenA)==null?void 0:H.coin_type,f==null?void 0:f.displayCoinAmountA),oe=h((W=y==null?void 0:y.displayTokenB)==null?void 0:W.coin_type,f==null?void 0:f.displayCoinAmountB);F=Q(F).plus(k).plus(oe).toString(),q=Q(q).plus((f==null?void 0:f.displayCoinAmountA)||0).plus((f==null?void 0:f.displayCoinAmountB)||0).toString()}),Q(F).lte(0)&&Q(q).gt(0)?"$--":K(F,2)):"$0"},[r,Y,s,u]),ae=s!=null&&s.address?E:!1,{calculatePendingYield:A}=Fs();p.useEffect(()=>{if(!(s!=null&&s.address))d(""),i([]);else if(!E&&(r==null?void 0:r.length)<=0&&(d("0"),i([])),(r==null?void 0:r.length)>0&&(s!=null&&s.address)&&!E&&!_&&!T&&!S){const{total:F,rewardAndFeeList:q}=A(r,J,O,ne);d(F),i(q)}},[r,E,_,T,S,s,u]);const $=s!=null&&s.address?!b:!1,{isApp:D}=he();return e.jsxs(ks,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(j,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Fn,backgroundSize:"100% 100%",children:[e.jsx(c,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(We,{isLoaded:!ae,children:e.jsx(c,{fontSize:"20px",color:"primary",children:te})})]}),e.jsxs(j,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Rn,backgroundSize:"100% 100%",children:[e.jsx(c,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(We,{isLoaded:!$,children:D?e.jsxs(j,{gap:"20px",children:[e.jsxs(C,{align:"flex-end",children:[e.jsx(hs,{yieldList:n}),e.jsx(Z,{isLoading:t,disabled:Number(b)<=0||t,w:"100px",h:"24px",onClick:()=>o(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(b)>0&&e.jsx(pe,{xlinkHref:"#icon-icon_spread",onClick:()=>o(!0)})]}):e.jsxs(j,{onClick:()=>o(!0),children:[e.jsx(hs,{yieldList:n}),Number(b)>0&&e.jsx(pe,{xlinkHref:"#icon-icon_spread"}),e.jsx(Z,{isLoading:t,disabled:Number(b)<=0||t,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(En,{isOpen:l,claimLoading:t,onClose:()=>o(!1),changeClaimLoading:F=>x(F)})]})}function Wn({poolInfo:s}){var u,b,d,_,T,S;const t=Xe(),{posPoolsRelatedData:x,posApiPoolData:l}=le(),o=(u=l[s==null?void 0:s.clmmPoolAddress])==null?void 0:u.haveFarming,n=(((d=x[(b=s==null?void 0:s.list[0])==null?void 0:b.posId])==null?void 0:d.displayFee)||"--")+"%",[i,h]=p.useState(!0);return e.jsxs(C,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(ks,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>h(!i),children:[e.jsx(Ps,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:n,...s},haveName:!0}),e.jsxs(j,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(j,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(c,{color:"primary_gray",children:"Current Price"}),e.jsx(hn,{symbolEllipsesDecimals:10,posId:(_=s==null?void 0:s.list[0])==null?void 0:_.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),o&&e.jsxs(j,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:r=>{ve(r),t("/farms")},border:"1px solid",borderColor:"transparent",cursor:"pointer",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(c,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(pe,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[e.jsx(Z,{onClick:r=>{ve(r),t(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(se,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(j,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(c,{fontSize:"12px",color:"primary",children:[(T=s==null?void 0:s.list)==null?void 0:T.length," ",((S=s==null?void 0:s.list)==null?void 0:S.length)>1?"Positions":"Position"]}),e.jsx(pe,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:i?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),i&&e.jsx(C,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((r,Y)=>e.jsx(ln,{positionInfo:r},Y))})]})}function Nn({isRefreshed:s,handleIsRefreshed:t}){var q;const{getStatistics:x}=ms(),{fetchTokenPrices:l}=Je(),{currentAccount:o,onWalletModal:n}=Ne(),{getPositionBaseList:i,getPosRelatedData:h}=cs(),{posRewardsData:u,farmsPosRewardsData:b,posBaseList:d,setShowPosListLength:_,setMyPosYieldValue:T,posBaseListLoading:S,posBaseListGroupByPool:r}=le(),[Y,E]=p.useState([]),{getNotifiPositionTransfer:G}=dn(),J=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),T(""),x(),F(),o!=null&&o.address&&A(o==null?void 0:o.address),setTimeout(()=>{t(!0)},1e3)};gn({onRpcChange:()=>{o!=null&&o.address&&A(o==null?void 0:o.address)}});const[O,ne]=p.useState([]),te=y=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",y),ne(f=>[...f,y])},ae=y=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",y),ne(f=>f.filter(k=>(k==null?void 0:k.coin_type)!==(y==null?void 0:y.coin_type)))};p.useEffect(()=>{T(""),o!=null&&o.address?(console.log("ðŸš€ ~ useEffect ~ currentAccount?.address:",o==null?void 0:o.address),A(o==null?void 0:o.address)):_("")},[o==null?void 0:o.address]);const A=async y=>{const f=await i(y);h(f)},{notifiClient:$,notifiSources:D}=qs();p.useEffect(()=>{G(d,$,D)},[d,$,D]),p.useEffect(()=>{var H,W,N,I;const y=(H=O[0])!=null&&H.coin_type?ue((W=O[0])==null?void 0:W.coin_type):void 0,f=(N=O[1])!=null&&N.coin_type?ue((I=O[1])==null?void 0:I.coin_type):void 0,k=Object.values(r).filter(m=>y&&f?ue(m.tokenA.coin_type)==y&&ue(m.tokenB.coin_type)==f||ue(m.tokenA.coin_type)==f&&ue(m.tokenB.coin_type)==y:y?ue(m.tokenA.coin_type)==y||ue(m.tokenB.coin_type)==y:m);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(r),k),E(k);const oe=k.reduce((m,re)=>m+(re.list?re.list.length:0),0);o!=null&&o.address&&_(oe.toString())},[O,r]);const F=()=>{const y=[];if((d==null?void 0:d.length)>0){d.map(k=>{y.push(Ie(k==null?void 0:k.coinTypeA).full_address),y.push(Ie(k==null?void 0:k.coinTypeB).full_address);const oe=u[k==null?void 0:k.posId]||[],H=b[k==null?void 0:k.id]||[],W=oe.concat(H);W==null||W.map(N=>{var I;Q(N==null?void 0:N.display_amount_owed).gt(0)&&y.push(Ie((I=N==null?void 0:N.token)==null?void 0:I.coin_type).full_address)})});const f=Array.from(new Set(y));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",d,y,f),l(f)}};return p.useEffect(()=>{F()},[d==null?void 0:d.length,u]),p.useEffect(()=>(x(),()=>{_("")}),[]),p.useEffect(()=>{S&&_("")},[S]),e.jsxs(C,{gap:"20px",w:"100%",children:[e.jsx(Rs,{isPools:!1,handleRefresh:J,selectCoinList:O,onClickSelectCoinList:te,onDeleteSelectCoinList:ae}),e.jsx(ee,{h:"1px",w:"100%",bg:"border"}),e.jsx(Hn,{}),o!=null&&o.address?S?[{},{},{},{}].map((y,f)=>e.jsx(an,{},f)):((q=Object.values(Y))==null?void 0:q.length)>0?Object.values(Y).map((y,f)=>e.jsx(Wn,{poolInfo:y},f)):e.jsx(ke,{type:"nodata",text:"No liquidity positions"}):e.jsx(ke,{type:"nowallet",onboard:()=>n(!0)})]})}function Gt(){const{tab:s}=zs(),[t,x]=p.useState(!0),l=o=>{x(o)};return e.jsxs(C,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(Bn,{isRefreshed:t}),(s=="pools"||s===void 0)&&e.jsx(vn,{isRefreshed:t,handleIsRefreshed:l}),s=="positions"&&e.jsx(Nn,{isRefreshed:t,handleIsRefreshed:l})]})}export{Gt as default};
//# sourceMappingURL=Pools-D_C43PZl.js.map
