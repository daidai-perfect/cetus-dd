import{j as e,ae as J,af as K,ag as Q,ah as X,aj as Z,ak as ee,r as l,d as c,B as E,ar as C,I as k,T as s,H as x,C as B,$ as A,bk as te,al as V,cU as re,V as I,k as ae,c as ne,W as se,b as oe}from"./index-RYgVkSoi.js";import{u as ie}from"./global-hPecm-D1.js";import{g as le}from"./index-RVl6_p59.js";import{C as pe}from"./CetusTooltip-BD_tZI8A.js";import{T as W}from"./TooltipIcon-Ckj39sjl.js";import{u as ce}from"./useTokenBalance-vtY7zrJ1.js";import{S as xe}from"./switch-CbVkSV-9.js";const de={id:"0x9258181f5ceac8dbffb7030890243caed69a9599d2886d957a9cb7656af3bdb3",coin_type:"0x2::sui::SUI",decimals:9,description:"",name:"Sui",symbol:"SUI",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",is_trusted:!0,extensions:{rank:"880"}};function ue(o){const{isOpen:n,onClose:i}=o;return e.jsxs(J,{autoFocus:!1,returnFocusOnClose:!1,isOpen:n,onClose:i,isCentered:!0,children:[e.jsx(K,{}),e.jsxs(Q,{children:[e.jsx(X,{fontSize:"16px",fontWeight:"500",children:"Settings"}),e.jsx(Z,{}),e.jsx(ee,{pb:"16px",children:e.jsx(ge,{...o})})]})]})}const ge=o=>{const{isOpen:n,onClose:i,value:r,onChange:d,compact:a=!1,slippageType:b="global",isWidget:F=!1,transactionMode:m,onChangeTransctionMode:y,maxCapForGas:P,onChangeMaxCapForGas:G,mevProtect:S,onChangeMevProtect:M,customGasPrice:v,onChangeCustomGasPrice:w}=o,T=["0.1","0.5","1"],[t,p]=l.useState("");l.useState(!1);const{balanceInfo:g}=ce(de),[f,z]=l.useState(m),[j,O]=l.useState(P),[_,U]=l.useState(v),[h,R]=l.useState(S),$=u=>{const q=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,2})?).*$");u.target.value=u.target.value.replace(q,"$1"),p(u.target.value)},D=u=>{p(u)};l.useEffect(()=>{r&&p(String(r))},[r]),l.useEffect(()=>{r&&p(String(r))},[n]);const Y=()=>{if(t){const u=c(t).toNumber();d(u)}f==="Fast Mode"&&(G(j),w(_)),y(f),M(h),i()},L=l.useMemo(()=>(console.log("ðŸš€ ~ btnIsDisabled ~ gasPrice:",_),f==="Fast Mode"&&(!j||Number(j)===0||Number(j)>5||!_||Number(_)===0||c(j).gt((g==null?void 0:g.balanceFormat)||"0")||c(j).lt(c(_).div(Math.pow(10,9))))||!+t?!0:b==="global"?Number(t)>50||Number(t)<.01:Number(t)>1),[b,t,f,j,_,g]);return l.useEffect(()=>{f==="Fast Mode"&&R(!0)},[f]),e.jsxs(E,{w:"100%",children:[e.jsxs(E,{children:[e.jsxs(C,{align:"center",mb:"16px",children:[e.jsx(k,{xlinkHref:"#icon-icon_verticalslider",svgHover:"text_paragraph",iconCursor:"text"}),e.jsx(s,{ml:"8px",color:"text_caption",fontSize:"14px",fontWeight:"500",children:"Slippage Tolerance"})]}),e.jsxs(E,{bg:a?b==="global"?Number(t)>50?"primary_red_opacity.10":"primary_yellow_opacity.10":Number(t)>1?"primary_red_opacity.10":"transparent":"transparent",borderRadius:"12px",children:[e.jsxs(x,{gap:"8px",mt:"8px",children:[e.jsx(C,{w:"100%",justifyContent:"center",alignItems:"center",borderRadius:"12px",border:"1px solid",borderColor:"border",background:"bg_secondary",h:"42px",children:T.map(u=>e.jsx(B,{flex:"1",bg:u===String(t)?"#1A1C25 !important":"transparent",cursor:"pointer",h:"calc(100% - 6px)",margin:"2px",borderRadius:"8px",onClick:()=>D(u),children:e.jsxs(s,{color:u===String(t)?"text_highlight":"text_paragraph",children:[u,"%"]})},u))}),e.jsx(he,{compact:!0,inputValue:t,handleChange:$,wrapStyle:{flex:"0 0 150px",borderRadius:"12px"}})]}),t&&b==="global"&&(Number(t)>1||Number(t)<.05)?e.jsxs(C,{w:"100%",children:[Number(t)<.05?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(s,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Slippage is low. Your transaction may fail."})}):null,Number(t)<=50&&Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(s,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,Number(t)>50?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(s,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null]}):null,t&&b==="vaults"&&Number(t)>1?e.jsx(C,{w:"100%",children:Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(s,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null}):null]}),e.jsx(be,{transactionMode:f,setTransactionMode:z,maxCapForGas:j,setMaxCapForGas:O,customGasPrice:_,setCustomGasPrice:U,suiBalance:(g==null?void 0:g.balanceFormat)||"0"}),e.jsx(me,{mevProtect:h,setMevProtect:R,disabled:f==="Fast Mode"})]}),e.jsxs(C,{align:"center",justifyContent:"space-between",mt:"20px",gap:"16px",children:[e.jsx(A,{flex:"1",h:"42px",variant:"outline",borderRadius:"8px",onClick:i,p:"0 15px",children:"Cancel"}),e.jsx(A,{flex:"1",h:"42px",borderRadius:"8px",onClick:Y,isDisabled:L,children:"Save"})]})]})},he=({inputValue:o,handleChange:n,wrapStyle:i={},compact:r=!1})=>e.jsxs(te,{alignItems:"center",justifyContent:"center",w:"100%",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",h:"42px",p:"12px 16px",position:"relative",...i,children:[e.jsx(s,{pr:"8px",h:"20px",lineHeight:"20px",borderRight:"1px solid",borderColor:r?"transparent":"border",children:"Custom"}),e.jsx(V,{borderRadius:"8px",h:"40px",mr:"2px",border:"none",variant:"outline",value:o,onChange:n,textAlign:"right",fontSize:"sm",placeholder:"0.0",pr:{base:"14px",lg:"8px"},pl:"0"}),e.jsx(re,{width:"20px",height:"40px",top:"0.5px",right:{base:"12px",lg:"8px"},children:e.jsx(s,{fontSize:"sm",color:"text_caption",children:"%"})})]}),H=[{label:"Default"},{label:"Fast Mode",beforeIcon:{xlinkHref:"#icon-icon_flash",fontSize:"16px",activeColor:"#FFCA68",activeHoverColor:"#FFCA68"}}],be=o=>{const{transactionMode:n,setTransactionMode:i,maxCapForGas:r,setMaxCapForGas:d,customGasPrice:a,setCustomGasPrice:b,suiBalance:F}=o,m=l.useMemo(()=>{var t;return(t=H.filter(p=>(p==null?void 0:p.label)===n))==null?void 0:t[0]},[n,H]),y=t=>{i(t.label)},P=t=>{const p=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(p,"$1"),d(t.target.value)},G=t=>{const p=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(p,"$1");const g=c(t.target.value).gt(0)?c(t.target.value).div(Math.pow(10,9)).toString():"0";c(g).gt(r)&&d(g),b(t.target.value)},S=l.useMemo(()=>!r||Number(r)==0?"Please enter a value higher than 0":r&&Number(r)>5?"Only allow up to 5 SUI":c(r).gt(F)?"Insufficient SUI balance ":c(r).lt(c(a).div(Math.pow(10,9)))?"Max cap cannot be less than custom gas.":"",[r]),M=l.useMemo(()=>r&&Number(r)>0&&Number(r)<2e-6?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[r]),v=l.useMemo(()=>!a||Number(a)==0?"Please enter a value higher than 0":"",[a]),w=l.useMemo(()=>a&&Number(a)>0&&c(a).lt(750)?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[a]),T=l.useMemo(()=>!a||a==="0"?"0":c(a).div(Math.pow(10,9)).toString(),[a]);return e.jsxs(I,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"12px",children:[e.jsxs(x,{w:"100%",justify:"space-between",children:[e.jsxs(x,{children:[e.jsx(k,{xlinkHref:"#icon-icon_mode"}),e.jsx(s,{color:"text_caption",fontSize:"14px",children:"Transaction Mode"})]}),e.jsx(ae,{type:"outlineTab",tabList:H,currentTab:m==null?void 0:m.label,handleChangeTab:y,wrapStyle:{w:"206px",h:"40px",p:"4px",borderRadius:"12px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px",borderRadius:"8px"}})]}),e.jsx(s,{w:"100%",lineHeight:"20px",fontSize:"12px",children:n==="Default"?"Standard gas based on real-time network conditions":"Optimize the landing rate of your transaction. In Fast Mode, MEV protection will be automatically turned on."}),n==="Fast Mode"&&e.jsxs(I,{w:"100%",children:[e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(s,{whiteSpace:"nowrap",children:"Custom Gas Price"}),e.jsx(W,{type:"setGasPrice"})]}),e.jsxs(I,{align:"flex-end",gap:"0px",children:[e.jsxs(x,{gap:"0px",children:[e.jsx(V,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:a,onChange:G,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(s,{fontSize:"14px",color:"text_caption",children:"MIST"})]}),e.jsxs(s,{fontSize:"12px",color:"text_paragraph",children:[T," SUI"]})]})]}),v&&e.jsx(N,{text:v,type:"error"}),w&&e.jsx(N,{text:w,type:"warn"}),e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(s,{whiteSpace:"nowrap",children:"Set Max Cap for Gas"}),e.jsx(W,{type:"setMaxCapForGas"})]}),e.jsx(I,{align:"flex-end",gap:"0px",children:e.jsxs(x,{gap:"0px",children:[e.jsx(V,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:r,onChange:P,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(s,{fontSize:"14px",color:"text_caption",children:"SUI"})]})})]}),S&&e.jsx(N,{text:S,type:"error"}),M&&e.jsx(N,{text:M,type:"warn"})]})]})},me=o=>{const{mevProtect:n,disabled:i,setMevProtect:r}=o;return e.jsxs(I,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(x,{justify:"flex-start",w:"100%",children:[e.jsx(k,{xlinkHref:"#icon-icon_mev",svgFill:"text_paragraph"}),e.jsx(s,{fontSize:"14px",color:"text_caption",children:"MEV Protect"})]}),e.jsxs(x,{justify:"space-between",w:"100%",children:[e.jsxs(x,{gap:"4px",children:[e.jsx(s,{fontSize:"14px",color:"text_paragraph",children:"Enable MEV Protection"}),e.jsx(W,{type:"byEnabling"})]}),e.jsx(xe,{isChecked:n,onChange:()=>r(!n),isDisabled:i})]})]})},N=o=>{const{text:n,type:i}=o;return e.jsx(B,{w:"100%",p:"4px 16px",borderRadius:"8px",bg:i==="warn"?"primary_yellow_opacity.10":"primary_red_opacity.10",children:e.jsx(s,{color:i==="warn"?"primary_yellow":"primary_red",fontSize:"12px",lineHeight:"20px",children:n})})};function _e(o){const{onClick:n}=o,{onSlippageVisible:i,showSlippage:r,isWidget:d,compact:a,settingOpen:b,onClose:F,onChange:m,slippageType:y,transactionMode:P,handleChangeTransctionMode:G,maxCapForGas:S,handleChangeMaxCapForGas:M,mevProtect:v,handleChangeMevProtect:w,customGasPrice:T,handleChangeCustomGasPrice:t}=fe(o);return e.jsxs(e.Fragment,{children:[e.jsx(pe,{tooltip:"Settings",children:e.jsxs(x,{h:"28px",p:"4px 8px",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:d?"swap_bg_secondary":"bg_secondary",cursor:"pointer",gap:"6px",onClick:p=>{ne(p),d?n&&n():i()},sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[e.jsx(s,{fontWeight:"500",fontSize:"12px",children:le(r)}),e.jsx(se,{bg:d?"swap_bg_secondary":"bg_secondary",p:"0",h:"28px",w:"28px",borderRadius:"8px",mr:"-9px",children:e.jsx(x,{align:"center",justify:"center",mt:"3px",children:e.jsx(k,{xlinkHref:"#icon-icon_verticalslider"})})})]})}),!d&&e.jsx(ue,{isWidget:d,compact:a,isOpen:b,onClose:F,value:c(r).mul(100).toNumber(),onChange:m,slippageType:y,transactionMode:P,onChangeTransctionMode:G,maxCapForGas:S,onChangeMaxCapForGas:M,mevProtect:v,onChangeMevProtect:w,customGasPrice:T,onChangeCustomGasPrice:t})]})}function fe(o){const{slippageType:n="global",compact:i,isWidget:r=!1}=o,{slippage:d,vaultsSlippage:a,setVaultsSlippage:b,setSlippage:F,settingOpen:m,setSettingOpen:y,mevProtect:P,setMevProtect:G,setTransctionMode:S,setMaxCapForGas:M,transactionMode:v,maxCapForGas:w,customGasPrice:T,setCustomGasPrice:t}=ie();oe();const p=()=>{y(!m)},g=()=>{y(!1)},f=h=>{const R=c(h).div(100).toNumber();n==="vaults"?b(R):F(R)},z=l.useMemo(()=>n==="vaults"?a:d,[n,d,a]);return{onSlippageVisible:p,onClose:g,onChange:f,showSlippage:z,isWidget:r,compact:i,settingOpen:m,slippageType:n,transactionMode:v,handleChangeTransctionMode:h=>{S(h)},maxCapForGas:w,handleChangeMaxCapForGas:h=>{M(h)},mevProtect:P,handleChangeMevProtect:h=>{G(h)},customGasPrice:T,handleChangeCustomGasPrice:h=>{t(h)}}}export{_e as S,ge as a,ue as b,fe as u};
