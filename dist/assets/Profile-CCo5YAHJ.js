import{a as d,j as e,H as O,T as b,V as H,q as $,C as Z,f as q,a9 as Qe,W as Ye,X as Je,Y as Ze,Z as Ie,$ as et,a0 as tt,x as ge,I as st,p as he,N as bt,az as mt,O as jt,Q as yt,aq as $e,aa as nt,F as wt}from"./vendor-BFGDaAdA.js";import{a as me,u as He,e as ze,i as Ct,j as _t,f as vt,c as St,k as Tt}from"./VaultsAprBlock-BgLyPn1g.js";import{a as re,d as kt,u as Pt,g as Lt,e as Ot,f as Dt,h as Rt,c as At,b as Ft}from"./usePositionList-BajI2m9G.js";import{a as X,j as je,k as G,n as Se,o as le,a2 as Ht,d as V,s as zt,C as ce,e as fe,f as Q,O as oe,G as ee,B as J,h as ot,r as Ne,aE as ve,I as N,F as Bt,aF as Ut,R as it,M as ae,q as Vt,W as Et,c as at,ak as Mt,v as Y,ap as I,ao as be,l as ie,aG as Wt,aH as Xe,p as _e,aI as $t,aJ as Nt,aj as Xt,aK as Gt,$ as qt,aL as Kt,aM as Ge,aN as qe,P as Qt}from"./index-R0MuIW_z.js";import{a as Yt,b as Jt,P as Zt,u as It}from"./PoolItem-FvwI_s0B.js";import{u as K}from"./activeOrders-D4Chz1hv.js";import{N as se}from"./NoData-DtiZhmrM.js";import{P as es,V as ts,H as te}from"./PositionListLoading-CeHUgrPw.js";import{C as ss}from"./CoinPairInfo-CsoK-LTr.js";import{u as rt}from"./VaultsAction-DmQGawm7.js";import{V as ns}from"./VaultsHoldings-BrSsAeTY.js";import{H as Te,T as ke}from"./Table-BP10886M.js";import{S as lt}from"./SortDropBlock-CrPCDOIS.js";import{T as xe}from"./TableSortTh-B9JGORK5.js";import{u as ct,D as pt,g as os,e as is,f as as,W as rs,b as ls,R as cs,a as ps,d as ds}from"./OverviewOrders-CknTvp5S.js";import{I as Re}from"./IconText-CXKmhDaq.js";import{u as us}from"./RangeValue-D-e6K8Ax.js";import{D as Pe}from"./Drawer-EtlaKnAi.js";import{H as ne}from"./HTextLabelBox-JIjBEFGX.js";import{P as Le}from"./Pagination-B-VU1CeM.js";import{u as xs}from"./useRpcListener-DT7n7Bg3.js";import{b as gs,u as ye,c as hs,C as fs,P as bs,F as ms,E as js,S as ys,O as ws,a as Cs}from"./useGetLimitOrderHistory-75NdmZGk.js";import{u as _s}from"./global-B2eJZQzs.js";import{R as vs}from"./RefreshButton-zZWmIqq1.js";import{u as Ss,A as Ts,R as ks}from"./RecentTransactions-DpW-vX0s.js";import{A as Ps}from"./AccountSwitchDrawer-qgMUvfql.js";import{u as Ls}from"./useAccountBalance-BLVXJ9S1.js";import{u as dt}from"./useToken-Cy6l2Y45.js";import{f as Be,a as Os,b as Ds,u as Rs,X as As,c as Fs,C as Hs,e as zs,d as Bs,g as Us}from"./useXCetus-BSjp4Ge8.js";import{S as ut}from"./SingleTokenInfo-CaAfAkey.js";import{u as Vs}from"./useTokenBalance-CkowllrJ.js";import{X as Es,a as Ms,b as Ws,c as $s}from"./useXCetusHelper-Lpo_-Cu4.js";import"./useGetPoolList-DklYUAWQ.js";import"./useWrapPoolData-B-0Mi5Cv.js";import"./useFavoritePool-Ci6fokX7.js";import"./CheckBox-CGZOoh6g.js";import"./SearchInputBlock-BrmsYCOG.js";import"./index-bcNhF6tP.js";import"./Loading-yKVeoG31.js";import"./TooltipIcon-CPeK-I1O.js";import"./PositionCurrentPrice-CJDs-X_z.js";import"./contract-helper-BD38x6Qf.js";import"./msafe-oYBkW7LJ.js";import"./useTransaction-Dzcjo88k.js";import"./useTrack-Cg4F8W9L.js";import"./useSigner-CrC4cCP7.js";import"./ExpendItem-Dt-E5F21.js";import"./PositionStatus-ZUhgJvVY.js";import"./useInterval-BQqGpXj5.js";import"./PoweredByHaedal-Bke0Bj0w.js";import"./VTextLabelBox-ap6UcssJ.js";import"./useNotifiSubscription-CPPflfat.js";import"./useNotifiAlerts-DUmox4I7.js";import"./usePriceImpact-DGA1WTrg.js";import"./index-BmVevvN6.js";import"./useSwapHelper-Hb-SEUl8.js";import"./TradeConfirmAmountInfo-BFijNKbd.js";import"./TotalAmount-DTKhBL6s.js";import"./TradeInputGroup-Dj5SquFr.js";import"./_getAllKeysIn-D2_Uojay.js";import"./RemoveBlock-c5jXZQJH.js";import"./DepositRatio-D9K-TmLK.js";import"./FreshProgressV2-cyb3yJEv.js";import"./ErrorTips-emRPeAuF.js";import"./index-oIJgodw4.js";import"./usePosAdd-onRHvIVG.js";import"./index-BVrJo1Yc.js";import"./useFindBestRouting-BfaRpLi_.js";import"./useVaultsHoldings-DuzFvAnS.js";import"./usePreviousValue-DoVr3Y3V.js";import"./CopyButton-DL2qFeNz.js";import"./HighlightText-fkyigc44.js";import"./index-D1m9ooSc.js";import"./debounce-B8kzHASh.js";import"./index-BLCSsYSf.js";function Ns(t=100){const o=d.useRef([]),s=d.useRef(!1),r=d.useRef(void 0),l=d.useCallback(async()=>{if(!s.current){for(s.current=!0;o.current.length>0;){const i=o.current.shift();if(!i)continue;const{id:c,run:p,onStart:u,onSuccess:h,onError:_}=i;if(i._cancelled){console.log(`[task:${i.id}] skipped (cancelled)`);continue}try{console.log(`[task:${c}] start`),u==null||u(c);const f=await p(r.current,c);r.current=f,console.log(`[task:${c}] success`,f),h==null||h(f,c)}catch(f){console.error(`[task:${c}] failed`,f),_==null||_(f,c)}await new Promise(f=>setTimeout(f,t))}s.current=!1}},[t]),a=i=>{o.current.push(i),l()},n=i=>{const c=o.current.find(p=>p.id===i);c&&(c._cancelled=!0),o.current=o.current.filter(p=>p.id!==i)};return d.useEffect(()=>()=>{o.current=[],s.current=!1,r.current=void 0},[]),{addTask:a,removeTask:n}}function Ue(t){const{type:o,children:s,wrapStyle:r,menuHeight:l="60px",haveActiveLine:a=!0,textStyle:n={fontSize:"16px"}}=t,i=(c,p)=>"title"in t?!1:t!=null&&t.isActive?t==null?void 0:t.isActive(c,p):c===p.value;return X(),e.jsxs(O,{justify:"space-between",w:"100%",h:l,...r,sx:{">div":{p:{"&:before":{bg:a?"primary":"none"}}}},children:["title"in t?e.jsx(b,{color:"text_caption",...n,children:t==null?void 0:t.title}):e.jsx(je,{type:"borderTab",tabList:t.tabs,currentTab:t.currentTab,handleChangeTab:t.onTabChange,isActive:(c,p)=>i(c,p),wrapStyle:{h:l,border:"none",gap:"38px",...r},itemStyle:n}),s]})}function Xs({showPosListGroupByPool:t=[]}){var a;const{currentAccount:o,onWalletModal:s}=G(),{posBaseListLoading:r}=re(),{isAutoRefresh:l}=K();return e.jsxs(H,{w:"100%",children:[e.jsx(Yt,{isProfile:!0}),o!=null&&o.address?!l&&r?[{},{},{},{}].map((n,i)=>e.jsx(es,{},i)):((a=Object.values(t))==null?void 0:a.length)>0?Object.values(t).map((n,i)=>e.jsx(Jt,{poolInfo:n,isProfile:!0},i)):e.jsx(se,{type:"nodata",text:"No liquidity positions",noBorder:!0}):e.jsx(se,{type:"nowallet",onboard:()=>s(!0),noBorder:!0})]})}function Gs({poolInfo:t}){const{setProfileActionTab:o,isProfileOpenVaultModal:s,setIsProfileOpenVaultModal:r,clearVaultsActionData:l,setProfilePoolInfo:a}=rt();return d.useEffect(()=>{l()},[s]),e.jsx(e.Fragment,{children:e.jsxs(O,{justify:"flex-end",flexDirection:{base:"row-reverse",lg:"row"},w:{base:"100%",lg:"unset"},children:[e.jsx($,{onClick:()=>{o("Deposit"),r(!0),a(t)},h:"32px",fontSize:"12px",borderRadius:"8px",fontWeight:"500",p:"0 8px",w:{base:"calc(50vw - 26px)",lg:"unset"},children:"Deposit"}),e.jsx($,{onClick:()=>{o("Withdraw"),r(!0),a(t)},variant:"outline",h:"32px",fontSize:"12px",borderRadius:"8px",fontWeight:"500",p:"0 8px",w:{base:"calc(50vw - 26px)",lg:"unset"},children:"Withdraw"})]})})}function qs({selectCoinList:t=[]}){const{vaultsPositionObj:o}=me(),{vaultPageList:s,vaultListLoading:r,setVaultListLoading:l}=He(),{filterVaultList:a,getCurrentTabNum:n}=ze(),{profileActionTab:i,isProfileOpenVaultModal:c,setIsProfileOpenVaultModal:p,profilePoolInfo:u}=rt(),{coinPriceObj:h}=Se(),{getTokenAmountValue:_}=le(),{getTokenAmountValueByPyth:f}=Ct(),{pythPriceMap:x}=_t(),{isAutoRefresh:k}=K(),{isApp:P}=X(),[z,T]=d.useState([]),[g,m]=d.useState("desc"),[j,L]=d.useState({label:"",value:""}),[R,F]=d.useState("all"),y=!0,D={sortRule:"desc",sortType:"tvl"},v=[{label:"Your Holdings",value:"holdings"},{label:"Share of Pool",value:"shareOfPool"}],C=Object.fromEntries(v.map(w=>[w.value,w])),A=(w,U,W)=>w.category==="haedal"?f(U,W):_(U,W,"--"),M=d.useMemo(()=>["all","cetus","haedal"].map(w=>({label:w[0].toUpperCase()+w.slice(1),value:w,num:n({sortOptions:D,currentTab:w,isYourHoldings:y,selectCoinList:t})||""})),[JSON.stringify(z),y,JSON.stringify(t)]);d.useEffect(()=>{j.value||T(s)},[s]),d.useEffect(()=>{Ht(o)&&a({sortOptions:D,currentTab:R,isYourHoldings:y,selectCoinList:t})},[o,t]),d.useEffect(()=>{if((s==null?void 0:s.length)>0&&j.value){const w=s.map(U=>{const W=o[U==null?void 0:U.vaultId]||{},pe=A(U,W.displayCoinTypeA,W.displayAmountA),de=A(U,W.displayCoinTypeB,W.displayAmountB),ue=pe==="--"||de==="--"?"0":V(pe).plus(de||0).toString();return{...U,sharePoolRate:W==null?void 0:W.sharePoolRate,holdingAmount:parseFloat(ue||"0"),holdingAmountDisplay:zt(ue,"$")}}).sort((U,W)=>g==="asc"?j.value==="holdings"?U.holdingAmount-W.holdingAmount:U.sharePoolRate-W.sharePoolRate:j.value==="holdings"?W.holdingAmount-U.holdingAmount:W.sharePoolRate-U.sharePoolRate);T(w)}},[s.length,j.value,g,h,x]);const B=w=>{w!==R&&!r&&(F(w),a({sortOptions:D,currentTab:w,isYourHoldings:y,selectCoinList:t}),l(!0),setTimeout(()=>l(!1),200))},E=w=>{(w==null?void 0:w.value)!==(j==null?void 0:j.value)?(L(w),m("desc")):P||m(U=>U==="desc"?"asc":"desc")},S=Ks({isShowPowered:R!=="haedal",vaultsPositionObj:o,getAmountValue:A,sortRule:g,sortBy:j,sortByObject:C,clickSort:E});return e.jsxs(H,{w:"100%",align:"flex-start",children:[P&&e.jsx(lt,{sortText:"Sort by",minW:"calc(100vw - 76px)",boxHeight:"32px",currentSort:j,sortByList:v,onSortByChange:E,xlinkHref:g==="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>m(w=>w==="desc"?"asc":"desc"),wrapStyle:{height:"30px"}}),e.jsx(je,{type:"outlineTab",tabList:M,currentTab:R,handleChangeTab:w=>B(w.value),isActive:(w,U)=>w===U.value,wrapStyle:{border:"none",h:"32px",gap:"8px",bg:"none"},itemStyle:{fontSize:"14px",borderRadius:"8px",p:"0 8px"}}),e.jsx(H,{w:"100%",gap:"20px",children:(k||!r)&&z.length===0?e.jsx(se,{type:"nodata",text:"No vaults found",noBorder:!0}):P?e.jsx(Te,{rowKey:"clmmPoolAddress",columns:S,dataSource:z,loading:!k&&r,itemSkeletonLength:5,itemHeight:"30px",haveDividingLine:!1,rowStyle:()=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(ke,{rowKey:"clmmPoolAddress",columns:S,dataSource:z,loading:!k&&r,rowStyle:{h:"80px",cursor:"pointer"}})}),c&&e.jsx(ts,{isOpen:c,setIsOpen:p,...u,currentTab:i},u.vaultId)]})}const Ks=({isShowPowered:t,vaultsPositionObj:o,getAmountValue:s,sortRule:r,sortBy:l,sortByObject:a,clickSort:n})=>[{title:e.jsx(b,{children:"Pools"}),key:"pools",thConfig:{pl:"0px !important"},render:i=>e.jsx(ss,{poolInfo:{...i,poolAddress:i==null?void 0:i.vaultId},isShowPowered:t,symbolFontSize:"15px"})},{title:e.jsx(xe,{labelInfo:a.holdings,sortBy:l,sortRule:r,clickSort:i=>n(i)}),key:"holdings",render:i=>{var h,_,f,x,k,P;const c=o[i==null?void 0:i.vaultId]||{},p=s(i,(h=i==null?void 0:i.displayTokenA)==null?void 0:h.coin_type,c==null?void 0:c.displayAmountA),u=s(i,(_=i==null?void 0:i.displayTokenB)==null?void 0:_.coin_type,c==null?void 0:c.displayAmountB);return e.jsx(ce,{placement:"top",tooltip:e.jsxs(H,{gap:"8px",align:"flex-start",minW:"200px",children:[e.jsxs(O,{w:"100%",gap:"12px",justify:"space-between",children:[e.jsxs(O,{children:[e.jsx(fe,{imageUrl:(f=i==null?void 0:i.displayTokenA)==null?void 0:f.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(b,{color:"text_caption",fontSize:"12px",children:(x=i==null?void 0:i.displayTokenA)==null?void 0:x.symbol})]}),e.jsx(te,{children:e.jsxs(H,{align:"flex-end",children:[e.jsx(b,{color:"text_caption",fontSize:"12px",children:Q(c==null?void 0:c.displayAmountA)}),e.jsx(b,{fontSize:"12px",children:!p||p=="--"?"$--":oe(p,2)})]})})]}),e.jsx(q,{w:"100%",height:"1px",bg:"border"}),e.jsxs(O,{w:"100%",gap:"12px",justify:"space-between",children:[e.jsxs(O,{children:[e.jsx(fe,{imageUrl:(k=i==null?void 0:i.displayTokenB)==null?void 0:k.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(b,{color:"text_caption",fontSize:"12px",children:(P=i==null?void 0:i.displayTokenB)==null?void 0:P.symbol})]}),e.jsx(te,{children:e.jsxs(H,{align:"flex-end",children:[e.jsx(b,{color:"text_caption",fontSize:"12px",children:Q(c==null?void 0:c.displayAmountB)}),e.jsx(b,{fontSize:"12px",children:!u||u=="--"?"$--":oe(u,2)})]})})]})]}),children:e.jsx(Z,{as:"button",ml:"4px",children:e.jsx(te,{children:e.jsxs(O,{justifyContent:"flex-end",gap:"0",children:[e.jsx(b,{color:"text_caption",mr:"2px",textDecoration:"underline dotted",textUnderlineOffset:"3px",children:`${(c==null?void 0:c.balanceDisplay)||"0"} LP`}),e.jsx(b,{children:"("}),e.jsx(ns,{color:"text_paragraph",vaultId:i.vaultId,category:i.category}),e.jsx(b,{children:")"})]})})})})}},{title:e.jsx(xe,{labelInfo:a.shareOfPool,sortBy:l,sortRule:r,clickSort:i=>n(i)}),key:"shareOfPool",render:i=>{const c=o[i==null?void 0:i.vaultId]||{};return console.log("🚀 ~ vaultsPositionObj:",o,c),e.jsx(O,{justify:"flex-end",children:e.jsx(te,{children:e.jsxs(b,{color:"text_caption",children:[" ",c==null?void 0:c.shartOfPoolDisplay]})})})}},{title:e.jsx(b,{textAlign:"right",children:"Actions"}),key:"actions",showLabel:!1,render:i=>e.jsx(Gs,{poolInfo:i})}];function Qs(){const{currentAccount:t}=G(),{vaultsPositionObj:o}=me(),{showPosListLength:s,posBaseListLoading:r,setShowPosListLength:l,posBaseListGroupByPool:a}=re(),{getCurrentTabNum:n}=ze(),[i,c]=d.useState([]),p=g=>{console.log("🚀 ~ onClickIncentiveTypes ~ tokenInfo:",g),c(m=>[...m,g])},u=g=>{console.log("🚀 ~ onClickIncentiveTypes ~ tokenInfo:",g),c(m=>m.filter(j=>(j==null?void 0:j.coin_type)!==(g==null?void 0:g.coin_type)))};d.useEffect(()=>{t!=null&&t.address||l("")},[t==null?void 0:t.address]),d.useEffect(()=>()=>{l("")},[]);const[h,_]=d.useState("positions"),f={sortRule:"desc",sortType:"tvl"},x=!0,k=d.useMemo(()=>{const g=h=="positions"?[]:i;return[{label:"Positions",value:"positions",num:r?"":Number(s)},{label:"Vaults",value:"vaults",num:n({sortOptions:f,currentTab:"all",isYourHoldings:x,selectCoinList:g})||""}]},[r,s,i,o]),[P,z]=d.useState([]);d.useEffect(()=>{var F,y,D,v;const g=h=="vaults"?[]:i,m=(F=g[0])!=null&&F.coin_type?ee((y=g[0])==null?void 0:y.coin_type):void 0,j=(D=g[1])!=null&&D.coin_type?ee((v=g[1])==null?void 0:v.coin_type):void 0,L=Object.values(a).filter(C=>m&&j?ee(C.tokenA.coin_type)==m&&ee(C.tokenB.coin_type)==j||ee(C.tokenA.coin_type)==j&&ee(C.tokenB.coin_type)==m:m?ee(C.tokenA.coin_type)==m||ee(C.tokenB.coin_type)==m:C);console.log("🚀 ~ useEffect ~ filterArr:",Object.values(a),L),z(L);const R=L.reduce((C,A)=>C+(A.list?A.list.length:0),0);t!=null&&t.address&&l(R.toString())},[i,a]);const{isApp:T}=X();return e.jsx(J,{borderRadius:"16px",p:{base:"0",lg:"0px 16px 16px"},bg:{base:"none",lg:"bg_primary_opacity.90"},backdropFilter:{base:"none",lg:"blur(20px)"},border:"none",children:e.jsxs(H,{gap:{base:"8px",lg:"16px"},w:"100%",children:[e.jsxs(O,{w:"100%",gap:"12px",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsx(Ue,{type:"tab",currentTab:h,tabs:k,menuHeight:T?"20px":"60px",haveActiveLine:!1,onTabChange:g=>{c([]),_(g.value)},textStyle:{fontSize:"16px"},wrapStyle:{bg:"none"}}),e.jsx(Zt,{isProfile:!0,isPools:!1,handleRefresh:()=>{},selectCoinList:i,onClickSelectCoinList:p,onDeleteSelectCoinList:u})]}),!T&&e.jsx(q,{h:"1px",w:"100%",bg:"border",mt:"-16px"}),h==="positions"&&e.jsx(Xs,{showPosListGroupByPool:P}),h==="vaults"&&e.jsx(qs,{selectCoinList:i})]})})}function Ys({orderInfo:t,isActiveOrder:o,pageDirect:s}){const{inCoin:r,outCoin:l}=t,{orderHistoryList:a,handleGetDcaOrderHistory:n,orderHistoryListLoading:i}=ct();d.useEffect(()=>{t!=null&&t.orderID&&n(t==null?void 0:t.orderID,9999,0,!0)},[t==null?void 0:t.orderID]);const{getExplorerUrl:c}=ot(),[p,u]=d.useState(s),h=142,_=(a==null?void 0:a.length)||0,f=(a==null?void 0:a.length)==0?"0px":(a==null?void 0:a.length)<=1?`${h*_+8}px`:`${h*_+(_-1)*32+8}px`;return e.jsxs(H,{pb:"16px",align:"flex-start",w:"100%",gap:"32px",position:"relative",h:(a==null?void 0:a.length)>=3?"460px":"unset",overflowY:"auto",children:[!i&&e.jsx(q,{w:"0px",h:f,borderRight:"1px dashed",borderColor:"border",position:"absolute",left:"6px",top:"8px"}),i?e.jsx(O,{h:"100px",w:"100%",justify:"center",children:e.jsx(Qe,{})}):(a==null?void 0:a.length)===0?e.jsx(se,{type:"nodata",text:"No orders",p:"12px",bg:"none"}):a.map(x=>{const k=Ne(x.inAmount,r==null?void 0:r.decimals),P=Ne(x.outAmount,l==null?void 0:l.decimals),z=V(k).div(P).toString(),T=V(1).div(z).toString();return e.jsxs(H,{pl:"20px",align:"flex-start",w:"100%",children:[e.jsxs(O,{w:"100%",gap:"16px",justifyContent:"space-between",position:"relative",children:[e.jsxs(b,{h:"20px",lineHeight:"20px",children:[ve((x==null?void 0:x.time)*1e3)," (UTC)"]}),e.jsx(N,{xlinkHref:"#icon-icon_link1",onClick:()=>{window.open(c(x==null?void 0:x.tx,"tx"))}}),e.jsx(O,{justify:"center",h:"12px",w:"12px",bg:"primary_opacity.20",position:"absolute",left:"-20px",top:"4px",zIndex:"99999",borderRadius:"50%",children:e.jsx(q,{h:"6px",w:"6px",bg:"primary",borderRadius:"50%"})})]}),e.jsx(J,{p:"16px",borderRadius:"12px",children:e.jsxs(H,{align:"flex-start",gap:"20px",children:[e.jsxs(H,{gap:"0px",align:"flex-start",children:[e.jsx(b,{whiteSpace:"nowrap",color:"text_caption",fontSize:"16px",h:"20px",lineHeight:"20px",children:p?`${Q(z)} `:`${Q(T)} `}),e.jsxs(O,{children:[e.jsxs(b,{whiteSpace:"nowrap",h:"20px",fontSize:"12px",lineHeight:"20px",children:["Rate(",p?` ${r.symbol} per ${l.symbol}`:` ${l.symbol} per ${r.symbol}`,")"]}),e.jsx(N,{xlinkHref:"#icon-icon_swap1",svgW:"14px",svgH:"14px",ml:"-6px",onClick:()=>u(!p)})]})]}),e.jsxs(O,{w:"100%",gap:"4px",children:[e.jsx(fe,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"}),e.jsx(b,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${Q(k)}`}),e.jsx(b,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:` ${r.symbol}`}),e.jsx(b,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:" → "}),e.jsx(fe,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"}),e.jsx(b,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${Q(P)}`}),e.jsx(b,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:`${l.symbol}`})]})]})})]},x==null?void 0:x.tx)})]})}function Js({orderInfo:t,isActiveOrder:o,pageDirect:s,isClaimLoading:r=!1,toClaim:l}){const{inCoin:a,outCoin:n}=t;return e.jsxs(H,{pb:"24px",children:[(t==null?void 0:t.isShowTradeTips)&&(t==null?void 0:t.orderStatus)=="Active"&&o&&e.jsx(Zs,{}),e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsx(pt,{orderInfo:t}),o&&l&&e.jsx($,{isLoading:r,onClick:()=>l(t),disabled:(t==null?void 0:t.outBalance)<=0||r,h:"32px",fontSize:"12px",borderRadius:"8px",lineHeight:"32px",p:"0 8px",fontWeight:"500",children:"Claim"})]}),e.jsx(b,{fontSize:"16px",color:"text_caption",children:os(t,o,!0)}),e.jsx(b,{fontSize:"12px",children:"Amount Withdrawn"}),e.jsxs(O,{w:"100%",justify:"space-around",children:[e.jsxs(H,{children:[e.jsx(b,{fontSize:"16px",color:"text_caption",children:is(t)}),e.jsxs(b,{fontSize:"12px",children:["DCA ",a==null?void 0:a.symbol," Balance"]})]}),e.jsx(q,{as:"span",display:"inline-block",w:"1px",h:"20px",bg:"border"}),e.jsxs(H,{children:[e.jsx(b,{color:"text_caption",fontSize:"16px",children:as(t)}),e.jsxs(b,{fontSize:"12px",children:["DCA ",n==null?void 0:n.symbol," Balance "]})]})]}),e.jsxs(H,{mt:"28px",w:"100%",gap:"20px",children:[e.jsx(ne,{label:"Invest Every",value:t==null?void 0:t.investEvery}),V(t==null?void 0:t.ofOrderLeft).gt("0")&&e.jsx(ne,{label:"Orders Left",value:t==null?void 0:t.ofOrderLeft}),e.jsx(ne,{label:"Each Order Size",value:`${t==null?void 0:t.eachOrderSize} ${a==null?void 0:a.symbol}`}),o&&((t==null?void 0:t.currentAvgPrice)&&(t==null?void 0:t.currentAvgPrice)!=="--"||(t==null?void 0:t.currentAvgPriceResever)&&(t==null?void 0:t.currentAvgPriceResever)!=="--")&&e.jsx(ne,{label:"Current Avg. Price",value:s?`${t==null?void 0:t.currentAvgPrice} ${a==null?void 0:a.symbol} per ${n==null?void 0:n.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${n==null?void 0:n.symbol} per ${a==null?void 0:a.symbol}`}),!o&&(t==null?void 0:t.currentAvgPrice)!=="--"&&e.jsx(ne,{label:"Avg. Price",value:s?`${t==null?void 0:t.currentAvgPrice} ${a==null?void 0:a.symbol} per ${n==null?void 0:n.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${n==null?void 0:n.symbol} per ${a==null?void 0:a.symbol}`}),o&&e.jsx(ne,{label:"Next Order (UTC)",value:ve(t==null?void 0:t.nextCycleAtTimeStamp)||""}),e.jsx(ne,{label:"Created (UTC)",value:ve(t==null?void 0:t.createAt)||""})]})]})}const Zs=()=>{const[t,o]=d.useState(!1);return e.jsxs(H,{p:"12px",align:"flex-start",bg:"primary_yellow_opacity.10",borderRadius:"8px",children:[e.jsxs(O,{align:"center",w:"100%",cursor:"pointer",onClick:()=>o(!t),children:[e.jsx(b,{fontSize:"12px",color:"primary_yellow",lineHeight:"20px",textAlign:"left",children:"The system tried to execute your order multiple times but did not get it through. This is possibly because:"}),e.jsx(N,{transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.5s",svgW:"12px",svgH:"12px",variant:"warning",xlinkHref:"#icon-icon_arrow"})]}),t&&e.jsxs(H,{align:"flex-start",w:"100%",children:[e.jsx(q,{w:"100%",h:"1px",bg:"primary_yellow_opacity.10",m:"4px 0"}),e.jsx(rs,{})]})]})};function Is({isOpen:t,onClose:o,orderInfo:s,isActiveOrder:r,isClaimLoading:l=!1,toClaim:a}){const{isApp:n}=X(),[i,c]=d.useState("overview"),{inCoin:p,outCoin:u}=s||{},h=[{label:"Overview",value:"overview"},{label:"Orders",value:"orders"}],[_,f]=d.useState(!1),{getTokenRank:x}=us();d.useEffect(()=>{if(p!=null&&p.coin_type&&(u!=null&&u.coin_type)){const z=x(p,u);console.log("🚀 ~ TokenRank:",u,p,z),f(!z)}},[p==null?void 0:p.coin_type,u==null?void 0:u.coin_type]);const k=e.jsx(q,{w:"100%",borderBottom:"1px solid",borderColor:"border",children:e.jsx(Ue,{type:"tab",currentTab:i,tabs:h,onTabChange:z=>c(z.value),textStyle:{fontSize:"16px"},wrapStyle:{bg:"none",mt:"-12px",mb:"-4px"}})}),P=e.jsxs(e.Fragment,{children:[i==="overview"&&e.jsx(Js,{orderInfo:s,isActiveOrder:r,pageDirect:_,isClaimLoading:l,toClaim:a}),i==="orders"&&e.jsx(Ys,{orderInfo:s,isActiveOrder:r,pageDirect:_})]});return n?e.jsx(en,{isOpen:t,onClose:o,renderTabs:k,renderContent:P}):e.jsxs(Ye,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:o,isCentered:!0,children:[e.jsx(Je,{}),e.jsxs(Ze,{minWidth:"482px",children:[e.jsx(Ie,{children:k}),e.jsx(et,{}),e.jsx(tt,{p:"0 16px 0px",textAlign:"center",children:P})]})]})}function en({isOpen:t,onClose:o,renderTabs:s,renderContent:r}){return console.log("DetailDrawer rendered",t),e.jsxs(Pe,{isOpen:t,onClose:o,placement:"bottom",haveCloseButton:!0,children:[s,e.jsx(q,{h:"20px"}),r]})}function tn({orderInfo:t,isActiveOrder:o=!0}){const{isApp:s}=X(),[r,l]=d.useState(!1),{getExplorerUrl:a}=ot(),{isClaimLoading:n,toClaim:i,closeOrderAction:c,isCloseLoading:p}=ct(),{isOpen:u,onOpen:h,onClose:_}=ge(),f=()=>l(!0),x=()=>{p||c(t)},k=(t==null?void 0:t.outBalance)<=0||n;return e.jsxs(e.Fragment,{children:[e.jsx(O,{justify:"flex-end",children:o?e.jsxs(e.Fragment,{children:[e.jsx($,{isLoading:n,onClick:()=>i(t),disabled:k,h:"32px",fontSize:"12px",borderRadius:"8px",fontWeight:"500",p:"0 8px",w:{base:"calc(100vw - 84px)",lg:"unset"},children:"Claim"}),e.jsx(ce,{placement:"bottom-end",showTooltip:!s,tooltip:e.jsx(xt,{getExplorerUrl:a,orderInfo:t,closeOrderAction:x,handleOpenDetail:f}),children:e.jsx(Z,{children:e.jsx($,{variant:"outline",w:"32px",h:"32px",p:"0",borderRadius:"8px",onClick:s?h:void 0,sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(N,{svgFill:s?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{w:{base:"calc(100vw - 84px)",lg:"unset"},onClick:f,h:"32px",fontSize:"12px",variant:"outline",borderRadius:"8px",fontWeight:"500",p:"0 8px",children:"Details"}),e.jsx($,{onClick:P=>{Bt(P),window.open(a(t.orderID,"poolAddress"))},w:"32px",p:"0",h:"32px",fontSize:"12px",borderRadius:"8px",variant:"outline",_hover:{svg:{fill:"primary"}},children:e.jsx(N,{svgW:"20px",xlinkHref:"#icon-icon_link1"})})]})}),r&&e.jsx(Is,{isOpen:r,onClose:()=>l(!1),orderInfo:t,isActiveOrder:o,isClaimLoading:n,toClaim:i}),e.jsx(sn,{isOpen:u,onClose:_,getExplorerUrl:a,orderInfo:t,closeOrderAction:x,handleOpenDetail:f})]})}function xt({getExplorerUrl:t,orderInfo:o,closeOrderAction:s,handleOpenDetail:r}){return e.jsxs(H,{align:"flex-start",children:[e.jsx(Re,{text:"View Details",onClick:r}),e.jsx(Re,{text:"View on Explorer",onClick:()=>{window.open(t(o.orderID,"poolAddress"))}}),e.jsx(Re,{text:(o==null?void 0:o.outBalance)<=0?"Close":"Close and Withdraw",onClick:s})]})}function sn({isOpen:t,onClose:o,getExplorerUrl:s,orderInfo:r,closeOrderAction:l,handleOpenDetail:a}){return e.jsx(Pe,{isOpen:t,onClose:o,placement:"bottom",children:e.jsx(H,{align:"flex-start",sx:{">div":{w:"100%",">div":{justifyContent:"center",background:"none",p:{color:"text_caption",fontSize:"16px"}}}},children:e.jsx(xt,{getExplorerUrl:s,orderInfo:r,closeOrderAction:l,handleOpenDetail:a})})})}function nn(){const{isAutoRefresh:t,dcaOrderListLoading:o,dcaActiveOrderList:s,dcaPastOrderList:r}=K(),[l,a]=d.useState("activeDCAs"),n=l==="activeDCAs",i=10,c=d.useMemo(()=>[{label:"Active DCAs",value:"activeDCAs",num:!t&&o?"":s==null?void 0:s.length},{label:"Past DCAs",value:"pastDCAs",num:!t&&o?"":r==null?void 0:r.length}],[t,o,s,r]),p=d.useMemo(()=>n?s:r,[n,s,r]),{isApp:u}=X(),{closeAll:h,claimAll:_,isClaimAllLoading:f,isCloseAllLoading:x}=ls(),{isOpen:k,onOpen:P,onClose:z}=ge(),[T,g]=d.useState([]),[m,j]=d.useState(0),[L,R]=d.useState(1),F=d.useMemo(()=>!n||!(p!=null&&p.length)?"0":p.reduce((C,A)=>V(C).plus((A==null?void 0:A.outBalance)||0),V(0)).toString(),[n,p]),y=V(F).isZero()||f,D=!(p!=null&&p.length)||x,v=d.useMemo(()=>on(n),[n]);return d.useEffect(()=>{const C=(p==null?void 0:p.length)||0,A=(L-1)*i,M=A+i;C>0?C<=A?R(1):(j(C),g(p.slice(A,M))):(g([]),j(0))},[p,L]),e.jsxs(H,{w:"100%",children:[e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsx(je,{type:"outlineTab",tabList:c,currentTab:l,handleChangeTab:C=>a(C==null?void 0:C.value),isActive:(C,A)=>C===A.value,wrapStyle:{border:"none",h:"32px",gap:"8px",bg:"none"},itemStyle:{fontSize:"14px",borderRadius:"8px",p:"0 8px"}}),n&&(p==null?void 0:p.length)>1&&(u?e.jsx($,{bg:"card_bg",variant:"outline",w:"32px",h:"32px",p:"0",borderRadius:"8px",onClick:P,sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(N,{svgFill:"primary",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})}):e.jsx(gt,{isClaimAllLoading:f,claimDisabled:y,claimAll:()=>_(p),isCloseAllLoading:x,closeDisabled:D,closeAll:()=>h(p)}))]}),e.jsxs(H,{w:"100%",position:"relative",gap:"20px",children:[(t||!o)&&(p==null?void 0:p.length)===0?e.jsx(se,{type:"nodata",text:n?"No active DCAs":"No past DCAs",noBorder:!0,style:{padding:"60px 0"}}):u?e.jsx(Te,{rowKey:"orderID",columns:v,dataSource:T,loading:!t&&o,itemSkeletonLength:3,itemHeight:"30px",haveDividingLine:!1,rowStyle:()=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(ke,{rowKey:"orderID",columns:v,dataSource:T,loading:!t&&o,rowStyle:{h:"80px",cursor:"pointer"}}),(p==null?void 0:p.length)>i&&e.jsx(Z,{children:e.jsx(Le,{total:m,size:i,currentPage:L,onChange:R})})]}),e.jsx(an,{isOpen:k,onClose:z,isClaimAllLoading:f,claimDisabled:y,claimAll:()=>_(p),isCloseAllLoading:x,closeDisabled:D,closeAll:()=>h(p)})]})}const on=t=>[{title:e.jsx(b,{children:"Orders"}),key:"order",thConfig:{w:"18%"},render:s=>e.jsx(pt,{orderInfo:s})},{title:e.jsx(b,{textAlign:"right",children:"Price Range"}),key:"price",thConfig:{w:"20%"},render:s=>e.jsx(cs,{orderInfo:s,isProfile:!0,isRank:!0})},{title:e.jsx(b,{textAlign:"right",children:"Filled Size"}),key:"completed",thConfig:{w:"15%"},render:s=>e.jsx(ps,{orderInfo:s,isProfile:!0})},t&&{title:e.jsx(b,{textAlign:"right",children:"Next Order (UTC)"}),key:"nextOrder",thConfig:{w:"20%"},render:({nextCycleAtTimeStamp:s})=>e.jsx(b,{color:"text_caption",children:ve(s)})},{title:e.jsx(b,{textAlign:"right",children:"Actions"}),key:"actions",showLabel:!1,thConfig:{w:"15%"},render:s=>e.jsx(tn,{orderInfo:s,isActiveOrder:t})}].filter(Boolean);function gt({isClaimAllLoading:t,claimDisabled:o,claimAll:s,isCloseAllLoading:r,closeDisabled:l,closeAll:a}){return e.jsxs(O,{children:[e.jsx($,{h:"32px",p:"8px",fontSize:"12px",fontWeight:"500",borderRadius:"8px",isLoading:t,disabled:o,onClick:s,children:"Claim All"}),e.jsx($,{h:"32px",p:"8px",fontSize:"12px",fontWeight:"400",variant:"ghost",isLoading:r,disabled:l,onClick:a,children:"Close All"})]})}function an({isOpen:t,onClose:o,isClaimAllLoading:s,claimDisabled:r,claimAll:l,isCloseAllLoading:a,closeDisabled:n,closeAll:i}){return e.jsx(Pe,{isOpen:t,onClose:o,placement:"bottom",children:e.jsx(H,{align:"flex-start",sx:{">div":{w:"100%",flexDirection:"column",button:{w:"100%",bg:"none !important",border:"none !important",color:"text_caption",fontSize:"16px","&:disabled":{bg:"none !important","&:hover":{bg:"none !important"}},"&:hover":{bg:"none !important"}}}},children:e.jsx(gt,{isClaimAllLoading:s,claimDisabled:r,claimAll:l,isCloseAllLoading:a,closeDisabled:n,closeAll:i})})})}function rn(t,o,s){const r=t.length,l=(s-1)*o,a=l+o,n=r>l?t.slice(l,a):[];return{total:r,paginated:n}}function ln(){const{currentAccount:t}=G(),{getLimitOrderHistory:o,historyOrderList:s,historyOrderLoading:r}=gs(),{myOrderList:l,orderListLoading:a}=ye(),{isAutoRefresh:n,autoRefreshCount:i}=K(),{isApp:c}=X(),{handleCancelOrder:p,cancelOrderLoading:u}=hs(),{isOpen:h,onOpen:_,onClose:f}=ge(),[x,k]=d.useState("openOrders"),[P,z]=d.useState(1),T=10,g=d.useMemo(()=>x==="openOrders"?l:s,[x,l,s]),m=d.useMemo(()=>x==="openOrders"?a:r,[x,a,r]),{total:j,paginated:L}=rn(g||[],T,P);d.useEffect(()=>{const v=(P-1)*T;g.length<=v&&z(1)},[g,P]);const R=v=>{t!=null&&t.address&&o(t.address,v)};d.useEffect(()=>{i>0&&R(!0)},[i]),d.useEffect(()=>{R(!1)},[x,t]),xs({onRpcChange:()=>R(!0)});const F=(v,C)=>(n||!v)&&C.length===0?0:!n&&v?"":C.length,y=d.useMemo(()=>[{label:"Open Orders",value:"openOrders",num:F(a,l)},{label:"Orders History",value:"ordersHistory",num:F(r,s)}],[n,a,r,l,s]),D=d.useMemo(()=>cn(x==="openOrders"),[x]);return e.jsxs(H,{w:"100%",children:[e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsx(je,{type:"outlineTab",tabList:y,currentTab:x,handleChangeTab:v=>k(v==null?void 0:v.value),isActive:(v,C)=>v===C.value,wrapStyle:{border:"none",h:"32px",gap:"8px",bg:"none"},itemStyle:{fontSize:"14px",borderRadius:"8px",p:"0 8px"}}),x==="openOrders"&&g.length>1&&(c?e.jsx($,{variant:"outline",w:"32px",h:"32px",p:"0",bg:"card_bg",borderRadius:"8px",onClick:_,sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(N,{svgFill:"primary",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})}):e.jsx(ht,{cancelOrderLoading:u,handleCancelOrder:()=>p(l)}))]}),e.jsxs(H,{w:"100%",position:"relative",gap:"20px",children:[(n||!m)&&g.length===0?e.jsx(se,{type:"nodata",text:x==="openOrders"?"No open orders":"No history orders",noBorder:!0}):c?e.jsx(Te,{rowKey:"order_id",columns:D,dataSource:L,loading:!n&&m,itemSkeletonLength:4,itemHeight:"30px",haveDividingLine:!1,rowStyle:(v,C)=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(ke,{rowKey:"order_id",columns:D,dataSource:L,loading:!n&&m,rowStyle:{h:"80px",cursor:"pointer"}}),j>T&&e.jsx(Z,{children:e.jsx(Le,{total:j,size:T,currentPage:P,onChange:z})})]}),e.jsx(pn,{isOpen:h,onClose:f,cancelOrderLoading:u,handleCancelOrder:()=>p(l)})]})}function cn(t){return[{title:e.jsx(b,{children:"Order"}),key:"order",thConfig:{w:"20%"},render:s=>e.jsx(fs,{imgSize:"28px",info:s,isProfile:!0})},{title:e.jsx(b,{textAlign:"right",children:"Limit Price"}),key:"price",thConfig:{w:"20%"},render:s=>e.jsx(bs,{info:s,isProfile:!0})},{title:e.jsx(b,{textAlign:"right",children:"Filled Size"}),key:"completed",thConfig:{w:"12%"},render:s=>e.jsx(ms,{info:s,isProfile:!0})},{title:e.jsx(b,{textAlign:"right",children:"Expiry"}),key:"expiry",thConfig:{w:"16%"},render:s=>e.jsx(js,{info:s,isProfile:!0})},!t&&{title:e.jsx(b,{textAlign:"right",children:"Status"}),key:"status",thConfig:{w:"8%"},render:s=>e.jsx(ys,{historyInfo:s,openExpendItemObj:void 0,isProfile:!0})},{title:e.jsx(b,{textAlign:"right",children:"Actions"}),key:"actions",showLabel:!1,thConfig:{w:"8%"},render:s=>e.jsx(ws,{orderInfo:s,isProfile:!0,isOpenOrder:t})}].filter(Boolean)}function ht({cancelOrderLoading:t,handleCancelOrder:o}){return e.jsx($,{h:"32px",p:{base:"4px",lg:"8px"},fontSize:"12px",fontWeight:"400",variant:"ghost",isLoading:t,onClick:o,children:"Cancel All"})}function pn({isOpen:t,onClose:o,cancelOrderLoading:s,handleCancelOrder:r}){return e.jsx(Pe,{isOpen:t,onClose:o,placement:"bottom",children:e.jsx(H,{align:"flex-start",sx:{button:{w:"100%",bg:"none !important",border:"none !important",color:"text_caption",fontSize:"16px","&:disabled":{bg:"none !important","&:hover":{bg:"none !important"}},"&:hover":{bg:"none !important"}}},children:e.jsx(ht,{cancelOrderLoading:s,handleCancelOrder:r})})})}function dn(){const t=[{label:"Limit Orders",value:"limitOrders"},{label:"DCA",value:"dca"}],[o,s]=d.useState("limitOrders"),{isApp:r}=X();return e.jsx(J,{borderRadius:"16px",p:{base:"0",lg:"0px 16px 16px"},bg:{base:"none",lg:"bg_primary_opacity.90"},backdropFilter:{base:"none",lg:"blur(20px)"},border:"none",children:e.jsxs(H,{align:"flex-start",gap:{base:"12px",lg:"20px"},children:[e.jsx(q,{w:"100%",borderBottom:"1px solid",borderColor:{base:"transparent",lg:"border"},children:e.jsx(Ue,{type:"tab",currentTab:o,tabs:t,onTabChange:l=>s(l.value),menuHeight:r?"20px":"60px",haveActiveLine:!1,textStyle:{fontSize:"16px"},wrapStyle:{bg:"none"}})}),o==="limitOrders"&&e.jsx(ln,{}),o==="dca"&&e.jsx(nn,{})]})})}const un=t=>(t==null?void 0:t.length)>16?(t==null?void 0:t.substring(0,6))+"..."+(t==null?void 0:t.substring((t==null?void 0:t.length)-10)):t;function xn({handleRefresh:t,totalValue:o,isLoading:s}){const{isApp:r}=X(),{currentAccount:l,accounts:a,accountServiceNameObj:n}=G(),{isShowProfileAssets:i,setIsShowProfileAssets:c}=_s(),[p,u]=d.useState(!1),{onClose:h}=ge(),{isOpen:_,onClose:f,onToggle:x}=ge(),{getServiceNames:k}=Ss(),P=d.useCallback(()=>{_||k(a),x()},[_,a]);return e.jsxs(H,{w:"100%",align:"flex-start",gap:"12px",children:[e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsxs(O,{gap:"12px",children:[e.jsx(st,{src:"/images/img_profile@2x.png",w:"72px",h:"72px"}),r?e.jsx(gn,{isApp:r,isShowProfileAssets:i,currentAccount:l,handleClick:P,accountServiceNameObj:n,changeProfileAssets:()=>c(!i),changeOpenRecentTrans:()=>u(!p)}):e.jsx(Ts,{currentAccount:l,accounts:a,onClose:h,isProfile:!0})]}),e.jsxs(O,{children:[!r&&e.jsxs(O,{p:"6px 5px 6px 3px",h:"32px",justify:"center",align:"center",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",borderRadius:"8px",border:"1px solid",borderColor:"border",cursor:"pointer",gap:"2px",_hover:{svg:{fill:"text_caption"},p:{color:"text_caption"}},onClick:()=>{u(!0)},children:[e.jsx(N,{xlinkHref:"#icon-transactions",svgW:"20px",svgH:"20px"}),e.jsx(b,{children:"Transactions"})]}),!r&&e.jsx(O,{p:"6px 5px",h:"32px",justify:"center",align:"center",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",borderRadius:"8px",border:"1px solid",borderColor:"border",cursor:"pointer",gap:"2px",_hover:{svg:{fill:"text_caption"}},onClick:()=>c(!i),children:e.jsx(ce,{showTooltip:!r,placement:"top",tooltip:e.jsx(b,{fontSize:"12px",children:i?"Hide Value":"Show Value"}),children:e.jsx(Z,{children:e.jsx(N,{xlinkHref:i?"#icon-hide_eyes":"#icon-show_eyes"})})})}),e.jsx(vs,{handleRefresh:t,bg:"block_color_opacity.50",backdropFilter:"blur(20px)",w:"32px",h:"32px",isAutoRefresh:!0,refreshInterval:30,innerStyle:{bg:"transparent"}})]})]}),r&&e.jsx(Ps,{isOpen:_,onClose:f}),p&&e.jsx(ks,{isOpen:p,onClose:()=>u(!1)})]})}const gn=({isApp:t,isShowProfileAssets:o,currentAccount:s,handleClick:r,accountServiceNameObj:l,changeProfileAssets:a,changeOpenRecentTrans:n})=>e.jsxs(H,{align:"flex-start",children:[e.jsxs(O,{children:[e.jsxs(O,{gap:"4px",cursor:"pointer",onClick:r,children:[e.jsxs(H,{align:"flex-start",children:[(s==null?void 0:s.label)&&e.jsx(b,{fontSize:"14px",lineHeight:"14px",children:un(s==null?void 0:s.label)}),e.jsx(b,{color:"text_caption",fontSize:"16px",fontWeight:"500",lineHeight:"14px",children:(l==null?void 0:l[s==null?void 0:s.address])||Ut(s==null?void 0:s.address)})]}),e.jsx(N,{xlinkHref:"#icon-icon_descending_nor",svgFill:"text_caption",svgW:"20px",svgH:"20px",transform:"rotate(0deg)",transition:"transform 0.3s"})]}),e.jsx(ce,{showTooltip:!t,placement:"bottom-end",tooltip:e.jsx(b,{fontSize:"12px",children:o?"Hide Value":"Show Value"}),children:e.jsx(Z,{children:e.jsx(N,{xlinkHref:o?"#icon-hide_eyes":"#icon-show_eyes",svgFill:"text_caption",onClick:a})})})]}),e.jsxs(O,{h:"16px",align:"center",gap:"0",cursor:"pointer",onClick:n,children:[e.jsx(b,{h:"16px",lineHeight:"16px",children:"Transactions"}),e.jsx(N,{xlinkHref:"#icon-icon_ascending",fontSize:"16px",transform:"rotate(90deg)"})]})]});function hn({tabList:t,activeTab:o,tabData:s,onClickTab:r}){const{isApp:l}=X();return e.jsx(O,{w:"100%",flexWrap:"wrap",mb:{base:"12px",lg:"0px"},mt:{base:"0px",lg:"12px"},gap:{base:"8px",lg:"12px"},children:t.map(a=>{var n,i;return e.jsxs(J,{w:{base:"calc(50% - 4px)",lg:"calc(25% - 9px)"},p:{base:"12px 8px",lg:"24px 16px"},bgImage:o===a.value?"url(/images/tab_active.png)":"none",bgSize:"100% 100%",borderRadius:{base:"8px",lg:"16px"},display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",bg:"bg_secondary",backdropFilter:"blur(20px)",borderColor:o===a.value?"primary":"transparent",onClick:()=>r(a.value),_hover:{bgImage:l?"none":"url(/images/tab_active.png)",bgSize:"100% 100%",borderColor:"primary",img:{opacity:"0.8"}},children:[e.jsxs(H,{align:"flex-start",gap:{base:"4px",lg:"10px"},children:[e.jsx(b,{fontSize:{base:"12px",lg:"14px"},color:"primary_gray",children:a.title}),e.jsx(O,{h:"22px",children:e.jsx(te,{size:"l",children:e.jsx(ce,{placement:"top",tooltip:e.jsx(b,{fontSize:"12px",lineHeight:"20px",color:"text_caption",children:a.tooltip}),showTooltip:a.showTooltip,children:e.jsx(Z,{as:"button",children:e.jsx(he,{isLoaded:!((n=s[a.value])!=null&&n.isLoading),children:e.jsx(b,{fontSize:{base:"16px",lg:"20px"},fontWeight:"500",color:"text_caption",children:(i=s[a.value])==null?void 0:i.totalValue})})})})})})]}),e.jsx(st,{w:{base:"24px",lg:"38px"},h:{base:"24px",lg:"38px"},src:a.activeImgUrl,opacity:(o===a.value,"0.8"),position:{base:"fixed",lg:"unset"},right:"8px"})]},a.value)})})}const fn=(t,o)=>({coinHoldingList:[],isCoinHoldingLoading:!0,setIsCoinHoldingLoading:s=>t({isCoinHoldingLoading:s}),setCoinHoldingList:s=>t({coinHoldingList:s}),isCoinPriceLoading:!0,setIsCoinPriceLoading:s=>t({isCoinPriceLoading:s}),holdingsTotalUsd:"0",setHoldingsTotalUsd:s=>t({holdingsTotalUsd:s}),unknownCoinCount:0,setUnknownCoinCount:s=>t({unknownCoinCount:s})}),Oe=it(fn);function ft(){const{currentAccount:t}=G(),{fetchAccountBalance:o}=Ls(),{coinHoldingList:s,setCoinHoldingList:r,setIsCoinHoldingLoading:l,setIsCoinPriceLoading:a,setHoldingsTotalUsd:n,isCoinPriceLoading:i,setUnknownCoinCount:c}=Oe(),{getTokenListInfo:p}=dt(),{getTokenPrice:u}=le(),{refreshCoinPriceInfo:h}=Be(),_=d.useRef(t==null?void 0:t.address);d.useEffect(()=>{_.current=t==null?void 0:t.address},[t==null?void 0:t.address]);const f=async()=>{const T=_.current;if(T){l(!0);const g=await o(T,!0);if(g){const m=await p(g.filter(L=>V(L.totalBalance).gt(0)).map(L=>L.coinType));if(!m)throw l(!1),r([]),new Error("get token list info error");const j=[];return g.forEach(L=>{const R=m.get(L.coinType);if(R){const F=L.totalBalance,y=ae(F,R.decimals).toString(),D=Q(y,void 0,void 0,Vt.ROUND_DOWN).toString(),v={balance:F,balance_format:y,balance_display:D,balance_usd:void 0,coin:R,coin_type:R==null?void 0:R.coin_type,price:"",price_diff_24:""};j.push(v)}}),k(j),console.log("🚀 ~ fetchCoinHoldingList ~ owner:",T),console.log("🚀 ~ fetchCoinHoldingList ~ currentAccountRef.current:",_.current),T===_.current&&(r(j),x([...j])),l(!1),j}}else l(!1),r([]);return[]},x=async T=>{a(!0);try{await h(T.map(g=>g.coin.coin_type),!0)}catch(g){console.error("fetch coin price info error",g)}finally{a(!1)}},k=T=>{T.map(g=>{const{coin:m}=g,j=u(m.coin_type);j&&(g.price=j.price,g.price_diff_24=j.price_change||"",g.balance_usd=V(g.balance_format).mul(j.price).toString())})},P=async T=>{if(console.log("🚀 ~ getFilterCoinHoldingList ~ filter:",{filter:T,coinHoldingList:s,currentAccount:t}),t){const{search:g,current_sort:m,current_sort_order:j,is_show_unknown:L=!1,is_hide_small_balance:R=!0}=T;let F=[];if(L?F.push(...s):F=s.filter(D=>D.coin.is_verified),g){const D=g.toLowerCase();F=F.filter(v=>v.coin.coin_type.toLowerCase().includes(D)||v.coin.symbol.toLowerCase().includes(D)||v.coin.name.toLowerCase().includes(D))}k(F),R&&!i&&(F=F.filter(D=>V(D.balance_usd).gt(.01))),F.sort((D,v)=>{if(m==="balance"){const C=V(D.balance_format).cmp(V(v.balance_format));if(C!==0)return j==="desc"?-C:C}if(m==="value"){const C=V(D.balance_usd).cmp(V(v.balance_usd));return C!==0?j==="desc"?-C:C:V(v.balance_format).cmp(V(D.balance_format))}if(m==="price"){const C=V(D.price||"0").cmp(V(v.price||"0"));return C!==0?j==="desc"?-C:C:V(v.balance_format).cmp(V(D.balance_format))}return 0}),console.log("🚀 ~ getFilterCoinHoldingList ~ tempList:",F);const y=F.filter(D=>!D.coin.is_verified);return c(y==null?void 0:y.length),F}return[]};return d.useEffect(()=>{k(s);const T=s.reduce((g,m)=>g+Number(m.balance_usd||0),0);n(T.toString())},[s,i]),{getFilterCoinHoldingList:P,fetchCoinHoldingList:f,resetUserData:()=>{r([]),n("0"),c(0)}}}function bn({inputValue:t,changeInputValue:o}){const s=d.useRef(null),[r,l]=d.useState(!1),{isApp:a}=X();return e.jsxs(bt,{w:a?"100%":r?"203px":"32px",h:"32px",transition:"width 0.1s ease",border:"1px solid",borderColor:"border",borderRadius:"8px",children:[e.jsx(mt,{top:"calc(50% - 10px)",left:"5px",children:e.jsx(N,{xlinkHref:"#icon-icon_search",svgHover:"text_paragraph",onClick:n=>{var i;(i=s.current)==null||i.focus(),l(!0)}})}),e.jsx(jt,{bg:{base:"bg_secondary",lg:"background"},ref:s,h:"30px",variant:"unstyled",outline:"none",borderRadius:"8px",value:t,onChange:n=>{o(n.target.value)},onFocus:()=>{l(!0)},onBlur:()=>{o(""),l(!1)},fontWeight:"500",textAlign:"left",fontSize:"12px",placeholder:a?"Search by token or address":"",pr:r||a?"28px":"8px",pl:r||a?"28px":"8px"}),t?e.jsx(yt,{right:"5px",children:e.jsx(N,{xlinkHref:"#icon-icon_close",onMouseDown:n=>n.preventDefault(),onClick:n=>{o(""),setTimeout(()=>{var i;(i=s.current)==null||i.focus()},0)}})}):null]})}function mn({inputValue:t,changeInputValue:o,isShowUnknownCoin:s,handleIsShowUnknownCoin:r,isHideLowAsset:l,handleIsHideLowAsset:a,unknownCoinCount:n}){const{isApp:i}=X();return e.jsxs(O,{w:{base:"100%",lg:"unset"},gap:"8px",flexDirection:{base:"column",lg:"row"},children:[e.jsx(bn,{inputValue:t,changeInputValue:o}),e.jsxs(O,{w:{base:"100%",lg:"unset"},justify:"space-between",children:[e.jsx(J,{w:{base:"50%",lg:"unset"},borderRadius:"8px",p:{base:"0 4px",lg:"0px 8px"},h:"32px",onClick:i?()=>r(!s):()=>{},bg:i?s?"card_bg":"bg_secondary":"background",children:e.jsxs(O,{h:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsxs(b,{whiteSpace:"nowrap",fontSize:"12px",color:i&&s?"primary":"text_caption",children:["Show Unknown Coin (",n,")"]}),!i&&e.jsx($e,{isChecked:s,onChange:r})]})}),e.jsx(J,{w:{base:"50%",lg:"unset"},borderRadius:"8px",p:"0px 8px",h:"32px",onClick:i?()=>a(!l):()=>{},bg:i?l?"card_bg":"bg_secondary":"background",children:e.jsxs(O,{h:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(b,{whiteSpace:"nowrap",fontSize:"12px",color:i&&l?"primary":"text_caption",children:"Hide Low Asset"}),!i&&e.jsx($e,{isChecked:l,onChange:a})]})})]})]})}function jn(){const{isApp:t}=X(),{getFilterCoinHoldingList:o}=ft(),{isCoinHoldingLoading:s,isCoinPriceLoading:r,unknownCoinCount:l}=Oe(),{isAutoRefresh:a}=K(),[n,i]=d.useState([]),[c,p]=d.useState({current_sort:"value",current_sort_order:"desc",search:"",is_show_unknown:!1,is_hide_small_balance:!0}),[u,h]=d.useState(!1),[_,f]=d.useState(!0),[x,k]=d.useState("desc"),[P,z]=d.useState(Fe[2]),T=S=>{console.log("🚀 ~ applyFilter ~ nextFilter:",S),a||C(1),p(S),o(S).then(i)},g=S=>{T({...c,search:S})},m=S=>{const w=(S==null?void 0:S.value)===(P==null?void 0:P.value),U=t||!w?"desc":x==="desc"?"asc":"desc";console.log("🚀 ~ handleSortClick ~ item:",U,S),z(S),k(U),T({...c,current_sort:S.value,current_sort_order:U})};d.useEffect(()=>{console.log("🚀 ~ useEffect ~ isCoinHoldingLoading:",s,r,n),!s&&!r&&T(c)},[s,r]);const j=nt(),L=S=>{j(`/swap/${S}/''`)},[R,F]=d.useState([]),[y,D]=d.useState(0),[v,C]=d.useState(1),A=10;d.useEffect(()=>{if((n==null?void 0:n.length)>0){const S=(v-1)*A;(n==null?void 0:n.length)<=S&&C(1)}},[n]),d.useEffect(()=>{if((n==null?void 0:n.length)>0){D(n==null?void 0:n.length);const S=(v-1)*A,w=S+A;console.log("🚀 ~ useEffect ~ start:",v,n.slice(0,w),S,w),(n==null?void 0:n.length)>S&&F(n.slice(S,w))}else F([])},[v,n]);const M=(S,w)=>{S==="is_show_unknown"&&h(w),S==="is_hide_small_balance"&&f(w)},B=S=>{let w;typeof S=="boolean"?w=S:w=S.target.checked,M("is_show_unknown",w),w||T({...c,is_show_unknown:!1}),w&&!u&&(M("is_hide_small_balance",!1),T({...c,is_show_unknown:!0,is_hide_small_balance:!1}))},E=S=>{let w;typeof S=="boolean"?w=S:w=S.target.checked,M("is_hide_small_balance",w),T({...c,is_hide_small_balance:w})};return e.jsx(J,{width:"100%",p:{base:"0",lg:"14px 16px 16px"},bg:{base:"none",lg:"bg_primary_opacity.90"},backdropFilter:{base:"none",lg:"blur(20px)"},border:"none",children:e.jsxs(H,{w:"100%",align:"flex-start",gap:{base:"8px",lg:"16px"},children:[e.jsxs(O,{w:"100%",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsx(b,{fontSize:"16px",color:"text_caption",children:"Wallet Holdings"}),t&&e.jsx(lt,{sortText:"Sort by",minW:"148px",boxHeight:"32px",currentSort:P,sortByList:Fe,onSortByChange:m,xlinkHref:x==="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{T({...c,current_sort:P.value,current_sort_order:x==="desc"?"asc":"desc"}),k(S=>S==="desc"?"asc":"desc")},wrapStyle:{height:"30px"}})]}),e.jsx(mn,{unknownCoinCount:l,inputValue:c.search||"",changeInputValue:g,isShowUnknownCoin:u,handleIsShowUnknownCoin:B,isHideLowAsset:_,handleIsHideLowAsset:E})]}),!t&&e.jsx(q,{h:"1px",w:"100%",bg:"border",mt:"-2px"}),e.jsxs(H,{w:"100%",position:"relative",gap:"20px",children:[(!s&&!r||a)&&(n==null?void 0:n.length)===0?e.jsx(se,{type:"nodata",text:"No tokens found",noBorder:!0}):t?e.jsx(Te,{rowKey:"coin_type",columns:Ke(x,P,m,L,!a&&r,n==null?void 0:n.length),dataSource:R,loading:!a&&(s||r),itemSkeletonLength:4,haveDividingLine:!1,onRowClick:S=>{L(S==null?void 0:S.coin_type)},itemHeight:"30px",rowStyle:(S,w)=>({borderRadius:"12px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"12px 8px"})}):e.jsx(ke,{rowKey:"coin_type",columns:Ke(x,P,m,L,!a&&r,n==null?void 0:n.length),dataSource:R,skeletonLength:5,loading:!a&&(s||r),rowStyle:{h:"72px",cursor:"pointer"},onRowClick:S=>{L(S==null?void 0:S.coin_type)}}),(n==null?void 0:n.length)>A&&e.jsx(Z,{children:e.jsx(Le,{total:y,size:A,currentPage:v,onChange:S=>{C(S)}})})]})]})})}const Fe=[{label:"Balance",value:"balance"},{label:"Price",value:"price"},{label:"Value",value:"value"}],Ae=Object.fromEntries(Fe.map(t=>[t.value,t])),Ke=(t,o,s,r,l,a)=>[{title:e.jsxs(b,{children:["Token(",a,")"]}),key:"pool",thConfig:{w:"20%"},showLabel:!1,render:({coin:n})=>e.jsx(ut,{haveTooltip:!0,token:n,warningIcon:{iconW:"14px",iconH:"14px"}})},{title:e.jsx(xe,{labelInfo:Ae.balance,sortRule:t,sortBy:o,clickSort:s}),key:"balance",thConfig:{w:"25%"},render:({coin:n,balance_display:i})=>e.jsx(O,{justify:"flex-end",children:e.jsx(te,{children:e.jsxs(b,{color:"text_caption",children:[i," ",Et(n==null?void 0:n.symbol,10)]})})})},{title:e.jsx(xe,{labelInfo:Ae.price,sortRule:t,sortBy:o,clickSort:s}),key:"price",thConfig:{w:"25%"},render:({price:n,price_diff_24:i})=>{const c=V(i).gt(0);return e.jsx(O,{justify:"flex-end",children:e.jsx(he,{isLoaded:!l,children:e.jsx(O,{gap:"2px",children:n===void 0||n===""?e.jsx(b,{color:"text_caption",children:"--"}):e.jsxs(e.Fragment,{children:[e.jsxs(b,{color:"text_caption",children:["$",at(n)]}),e.jsxs(b,{color:Number(i)===0?"text_caption":c?"primary_green":"primary_red",children:["(",c?"+":V(i).gt(-1e-4)&&V(i).lt(0)?"-":"",V(i).gt(-1e-4)&&V(i).lt(1e-4)?"0%":Mt(V(i).mul(100).toString(),2,!1,!1),")"]})]})})})})}},{title:e.jsx(xe,{labelInfo:Ae.value,sortRule:t,sortBy:o,clickSort:s}),key:"balance_usd",thConfig:{w:"15%"},render:({balance_usd:n})=>(console.log(n,"balance_usd"),e.jsx(O,{justify:"flex-end",children:e.jsx(he,{isLoaded:!l,children:e.jsx(te,{children:e.jsx(b,{color:"text_caption",children:n===void 0?"--":oe(n,2)})})})}))},{title:e.jsx(b,{textAlign:"right",children:"Action"}),showLabel:!1,thConfig:{w:"15%"},key:"actions",render:n=>e.jsx($,{w:{base:"calc(100vw - 48px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",variant:"outline",fontWeight:"500",onClick:()=>{r(n==null?void 0:n.coin_type)},children:"Swap"})}],yn=(t,o)=>({isXCetusModalOpen:!1,setIsXCetusModalOpen:s=>t({isXCetusModalOpen:s}),isXCetusLoading:!1,setIsXCetusLoading:s=>t({isXCetusLoading:s}),currentXCetusTab:"Get xCETUS",setCurrentXCetusTab:s=>t({currentXCetusTab:s})}),De=it(yn),wn={cetus:{title:"CETUS Holdings",imgUrl:Y.cetus_coin.logo_url,bgUrl:"/images/bg_cetus.png"},xcetus:{title:"Available xCETUS",imgUrl:Y.x_cetus_coin.logo_url,bgUrl:"/images/bg_xcetus.png"},rewards:{title:"xCETUS Rewards",imgUrl:"/images/icon_rewards.png",bgUrl:"/images/bg_rewards.png"}};function Ve({type:t,amount:o,amountUSD:s,isLoading:r,children:l}){const{title:a,imgUrl:n,bgUrl:i}=wn[t];return e.jsx(J,{border:"none",flex:"1",bg:`center / cover no-repeat url(${i})`,p:{base:"12px",lg:"20px"},borderRadius:"16px",backdropFilter:"blur(50px)",children:e.jsxs(H,{w:"100%",align:"flex-start",h:"88px",gap:"22px",children:[e.jsxs(O,{children:[e.jsx(fe,{imageUrl:n,imgBoxStyle:{w:"20px",h:"20px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsx(b,{children:a})]}),e.jsxs(O,{w:"100%",justify:"space-between",children:[e.jsx(te,{children:e.jsxs(H,{align:"flex-start",w:"100%",gap:"4px",children:[e.jsx(he,{isLoaded:!r,h:"24px",children:e.jsx(b,{color:"text_caption",h:"24px",lineHeight:"24px",fontSize:"20px",children:o})}),s!==void 0&&e.jsx(he,{isLoaded:!r,h:"17px",children:e.jsxs(b,{h:"17px",lineHeight:"17px",fontSize:"14px",children:["$",at(s,2)]})})]})}),l]})]})})}function Cn(){const{currentAccount:t}=G(),{balanceInfo:o}=Vs(Y.cetus_coin),{getTokenAmountValue:s}=le(),{coinPriceObj:r}=Se(),l=d.useMemo(()=>s(Y.cetus_coin.coin_type,ae((o==null?void 0:o.balance)||"0",Y.cetus_coin.decimals)).toString(),[o==null?void 0:o.balance,t==null?void 0:t.address,r]),{setCurrentXCetusTab:a,setIsXCetusModalOpen:n}=De(),i=()=>{n(!0),a("Get xCETUS")},{veNFT:c,veNFTLoading:p,lockCetusListLoading:u}=I();return e.jsx(Ve,{type:"cetus",amount:t?(o==null?void 0:o.balanceFormat)||"0":"--",amountUSD:l,isLoading:(u||p)&&c!==void 0,children:e.jsx($,{onClick:i,variant:"outline",color:"primary",flex:"0 0 120px",h:"32px",lineHeight:"32px",w:{base:"122px",lg:"unset"},borderRadius:"8px",fontSize:{base:"12px",lg:"14px"},fontWeight:"500",children:"Convert to xCETUS"})})}function _n(){const{lockCetusList:t,lockCetusListLoading:o}=I(),[s,r]=d.useState([]),[l,a]=d.useState(0),[n,i]=d.useState(1),c=10;return d.useEffect(()=>{if((t==null?void 0:t.length)>0){const p=(n-1)*c;(t==null?void 0:t.length)<=p&&i(1)}},[t]),d.useEffect(()=>{if((t==null?void 0:t.length)>0){a(t==null?void 0:t.length);const p=(n-1)*c,u=p+c;console.log("🚀 ~ useEffect ~ start:",n,t.slice(0,u),p,u),(t==null?void 0:t.length)>p&&r(t.slice(p,u))}},[n,t]),t&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(q,{w:"100%",h:"1px",bg:"border"}),e.jsxs(H,{w:"100%",align:"flex-start",gap:"12px",children:[e.jsx(b,{fontWeight:"500",fontSize:"14px",color:"text_caption",children:"Vesting"}),e.jsx(H,{w:"100%",gap:"12px",children:s==null?void 0:s.map(p=>e.jsx(vn,{order:p},p==null?void 0:p.id))}),(t==null?void 0:t.length)>c&&e.jsx(Z,{w:"100%",children:e.jsx(Le,{total:l,size:c,currentPage:n,onChange:p=>{i(p)}})})]})]})}const vn=({order:t})=>{const[o,s]=d.useState(!be.isLocked(t));d.useEffect(()=>{s(!be.isLocked(t))},[t==null?void 0:t.id]);const{cancelOrderLoading:r,handleCancelOrder:l}=Os(),{claimOrderLoading:a,handleClaimOrder:n}=Ds(),{days:i,hours:c,minutes:p,seconds:u}=Rs(t.locked_until_time*1e3,()=>{s(!0)},"days"),h=_=>{_?n(t.id):l(t)};return e.jsxs(O,{flexDirection:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},justify:"space-between",w:"100%",h:{base:"unset",lg:"80px"},p:{base:"12px",lg:"0 20px"},bg:{base:"bg_seven",lg:"bg_nine"},borderRadius:"12px",children:[o?e.jsxs(O,{p:"8px 12px 8px 8px",borderRadius:"8px",bg:"primary_opacity.10",children:[e.jsx(N,{xlinkHref:"#icon-icon_check",svgFill:"primary",fontSize:"20px"}),e.jsx(b,{color:"primary",fontSize:"13px",children:"Available"})]}):e.jsxs(O,{p:"8px",borderRadius:"8px",bg:"text_paragraph_opacity.10",children:[e.jsx(N,{xlinkHref:"#icon-icon_time",svgFill:"text_paragraph",fontSize:"20px"}),e.jsxs(q,{as:"div",children:[e.jsxs(b,{as:"span",color:"text_paragraph",fontSize:"13px",children:["Available in"," "]}),e.jsxs(b,{as:"span",color:"text_caption",fontSize:"13px",children:[i,"d : ",c,"h : ",p,"m : ",u,"s"]})]})]}),e.jsxs(O,{flexDirection:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},w:{base:"100%",lg:"unset"},gap:"12px",children:[e.jsx(As,{xcetus_amount:t.xcetus_amount,cetus_amount:t.cetus_amount,imageSize:"20px"}),e.jsx($,{onClick:()=>{r||a||h(o)},variant:"unstyled",border:"none",h:"28px",w:{base:"100%",lg:"80px"},borderRadius:"8px",fontSize:"12px",display:"flex",justifyContent:"center",alignItems:"center",isLoading:r||a,color:o?"background":"primary_gray",bg:o?"primary":"card_bg",_hover:{bg:o?"primary_hover":"button_ghost_hov_bg",color:o?"background":"text_caption"},children:o?"Claim":"Cancel"})]})]})};function Sn({totalRewardValue:t,rewardList:o,summaryRewardList:s}){const{currentAccount:r}=G(),{veNFTLoading:l}=I(),{claimRewardLoading:a,handleClaimReward:n}=Fs(),i=()=>{a||n(o)};return X(),e.jsx(Ve,{type:"rewards",amount:r?V(t).gt("0")?e.jsx(ce,{tooltip:e.jsx(H,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(c=>e.jsxs(O,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(ut,{coinType:c.coin_type,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(O,{gap:"4px",children:[e.jsx(b,{fontSize:"12px",color:"text_caption",children:Q(c==null?void 0:c.amount,6)}),e.jsxs(b,{fontSize:"12px",children:["(",oe(c==null?void 0:c.value,2),")"]})]})]},c.coin_type))}),children:e.jsx(b,{textDecoration:"underline dotted",textUnderlineOffset:"3px",textDecorationColor:"text_paragraph",cursor:"pointer",color:"text_caption",h:"24px",lineHeight:"24px",fontSize:"20px",children:oe(t,2)})}):e.jsx(b,{textUnderlineOffset:"3px",textDecorationColor:"text_paragraph",color:"text_caption",h:"24px",lineHeight:"24px",fontSize:"20px",children:oe(t,2)}):"--",isLoading:l,children:s.length>0&&e.jsx($,{onClick:i,variant:"unstyled",bg:"primary",border:"none",color:"background",flex:"0 0 120px",fontSize:{base:"12px",lg:"14px"},fontWeight:"500",h:"32px",lineHeight:"32px",w:{base:"122px",lg:"unset"},borderRadius:"8px",children:"Claim"})})}function Tn({availableXCetusAmount:t}){const{currentAccount:o}=G(),{veNFT:s,veNFTLoading:r,lockCetusListLoading:l}=I(),{getTokenAmountValue:a}=le(),{coinPriceObj:n}=Se(),i=d.useMemo(()=>a(Y.cetus_coin.coin_type,ae(t||"0",Y.x_cetus_coin.decimals)).toString(),[t,o==null?void 0:o.address,n]),{setCurrentXCetusTab:c,setIsXCetusModalOpen:p}=De(),u=()=>{p(!0),c("Redeem CETUS")},h=(l||r)&&s!==void 0;return e.jsx(Ve,{type:"xcetus",amount:o?Q(ae(t||"0",9),9).toString():"--",amountUSD:i,isLoading:h,children:e.jsx($,{onClick:u,variant:"outline",color:"primary",flex:"0 0 120px",h:"32px",lineHeight:"32px",w:{base:"122px",lg:"unset"},borderRadius:"8px",fontSize:{base:"12px",lg:"14px"},fontWeight:"500",children:"Redeem"})})}const we=[{label:"Get xCETUS",value:"Get xCETUS"},{label:"Redeem CETUS",value:"Redeem CETUS"}];function kn({isOpen:t,onClose:o,availableXCetusAmount:s}){const{currentXCetusTab:r,setCurrentXCetusTab:l}=De(),[a,n]=d.useState("#icon-a-icon_trade"),i=()=>{n("#icon-icon_swap1")},c=()=>{n("#icon-a-icon_trade")},p=()=>{var h;const u=(h=we==null?void 0:we.find(_=>(_==null?void 0:_.value)!==r))==null?void 0:h.value;u&&l(u)};return e.jsxs(Ye,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:o,isCentered:!0,children:[e.jsx(Je,{}),e.jsxs(Ze,{children:[e.jsx(Ie,{p:"0 16px",children:e.jsx(q,{borderBottom:"1px solid",borderColor:"border",children:e.jsx(je,{type:"borderTab",wrapStyle:{w:"fix-content",border:"none",h:"58px",background:"transparent",gap:"40px"},itemStyle:{w:"auto",fontSize:"16px"},tabList:we,currentTab:r,handleChangeTab:u=>{l(u==null?void 0:u.value)}})})}),e.jsx(et,{}),e.jsxs(tt,{p:"20px 16px 16px",children:[r==="Get xCETUS"&&e.jsx(Hs,{onClose:o,availableXCetusAmount:s,onIconClick:p,iconParams:{xlinkHref:a,svgFill:"text_caption",transform:a==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:a==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:i,onMouseLeave:c}}),r==="Redeem CETUS"&&e.jsx(zs,{onClose:o,availableXCetusAmount:ae(s,9),onIconClick:p,iconParams:{xlinkHref:a,svgFill:"text_caption",transform:a==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:a==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:i,onMouseLeave:c}})]})]})]})}function Pn(){const{isXCetusModalOpen:t,setIsXCetusModalOpen:o}=De(),{availableXCetusAmount:s,totalRewardValue:r,rewardList:l,summaryRewardList:a}=Bs();return e.jsx(J,{p:{base:"8px",lg:"20px"},border:"none",w:"100%",bg:"bg_primary_opacity.90",backdropFilter:"blur(20px)",children:e.jsxs(H,{w:"100%",gap:"16px",children:[e.jsxs(O,{w:"100%",gap:"10px",flexDirection:{base:"column",lg:"row"},children:[e.jsx(Tn,{availableXCetusAmount:s}),e.jsx(Cn,{}),e.jsx(Sn,{totalRewardValue:r,rewardList:l,summaryRewardList:a})]}),e.jsx(_n,{}),t&&e.jsx(kn,{isOpen:t,onClose:()=>o(!1),availableXCetusAmount:s})]})})}function Ln(){const{currentAccount:t}=G(),{orderListLoading:o,myOrderList:s}=ye(),{isAutoRefresh:r,dcaOrderListLoading:l,dcaActiveOrderList:a}=K(),{getTokenAmountValue:n,coinPriceObj:i}=le(),c=d.useMemo(()=>{let h=V(0);if(r||!o)return(s==null?void 0:s.length)>0&&(t!=null&&t.address)?(s.forEach(_=>{const{pay_coin:f,target_coin:x,un_claimed_amount:k,remaining_amount:P}=_,z=n(f.coin_type,P),T=n(x.coin_type,k);h=V(h).plus(z).plus(T),console.log("🚀 ~ myOrderList.forEach ~ limitTotalTvl:",h.toString())}),h.toString()):"0"},[r,s,t==null?void 0:t.address,o,i]),p=d.useMemo(()=>{let h=V(0);if(r||!l)return(a==null?void 0:a.length)>0&&(t!=null&&t.address)?(a.forEach(_=>{const{inBalance:f,inCoin:x,outBalance:k,outCoin:P}=_,z=n(x.coin_type,f),T=n(P.coin_type,k);h=V(h).plus(z).plus(T),console.log("🚀 ~ dcaActiveOrderList.forEach ~ total:",h.toString())}),h):"0"},[r,a,t==null?void 0:t.address,l,i]),u=d.useMemo(()=>{if(console.log("🚀 ~ useGetActivityTvl ~ dcaTotalTvl, limitTotalTvl:",p,c),p&&c){let h=V(0);return h=V(h).plus(p).plus(c),h.toString()}return"--"},[p,c]);return{limitTotalTvl:c,dcaTotalTvl:p,orderTotalTvl:u}}function On(){const{currentAccount:t}=G(),{isAutoRefresh:o}=K(),{veNFT:s,veNFTLoading:r,lockCetusListLoading:l}=I(),{getTokenAmountValue:a}=le(),{coinPriceObj:n}=Se();return{xCetusTotalTvl:d.useMemo(()=>{if(o||!r&&!l)return t!=null&&t.address&&s?a(Y.cetus_coin.coin_type,ae(s==null?void 0:s.xcetus_balance,Y.cetus_coin.decimals)).toString():"0"},[o,s==null?void 0:s.xcetus_balance,l,r,t==null?void 0:t.address,n])}}const Dn="fetch-coin-holding-list",Rn="fetch-owner-nft",An="fetch-active-order-list",Fn="fetch-xcetus-base-info",Hn="fetch-vaults-position-list";function zn(){const{currentAccount:t}=G(),{getTokenListInfo:o}=dt(),{getLimitUserIndexer:s,getDcaUserIndexer:r}=Us(),{setOrderListLoading:l,setMyOrderList:a}=ye(),{setDcaOrderListLoading:n,setDcaActiveOrderList:i,setDcaPastOrderList:c}=K(),{refreshCoinPriceInfo:p}=Be(),{buildDcaOrderList:u}=ds(),h=ie("limit"),_=ie("dca"),{formatLimitOrderList:f}=Cs(),x=d.useRef(t==null?void 0:t.address);d.useEffect(()=>{x.current=t==null?void 0:t.address},[t==null?void 0:t.address]);const k=async()=>{if(t){l(!0);const g=await s(t.address);if(console.log("🚀 ~ fetchUserLimitOrderIds ~ indexer:",g),g)try{return(await h.FullClient.getDynamicFieldsByPage(g)).data.map(L=>L.name.value)}catch(m){console.log("🚀 ~ fetchUserLimitOrderIds ~ error:",m)}}return[]},P=async()=>{if(t){n(!0);const g=await r(t.address);if(console.log("🚀 ~ fetchUserDacOrderIds ~ indexer:",g),g)try{return(await _.FullClient.getDynamicFieldsByPage(g)).data.map(L=>L.name.value)}catch(m){console.log("🚀 ~ fetchUserDacOrderIds ~ error:",m)}}return[]};return{fetchActiveOrderList:async()=>{try{const g=await k(),m=await P(),j=await h.FullClient.batchGetObjects([...g,...m],{showType:!0,showContent:!0}),L=j.filter(B=>{var E,S;return(S=(E=B.data)==null?void 0:E.type)==null?void 0:S.includes("limit_order::LimitOrder")}),R=j.filter(B=>{var E,S;return(S=(E=B.data)==null?void 0:E.type)==null?void 0:S.includes("order::Order")}),y=L.map(B=>Wt.buildLimitOrderInfo(B)).filter(B=>B!==void 0).filter(B=>B.status===Xe.PartialCompleted||B.status===Xe.Running),D=R.map(B=>{var U,W,pe,de,ue,Ee,Me,We;const E=_e(((U=B.data)==null?void 0:U.type)||""),S=E.type_arguments[0],w=E.type_arguments[1];return{in_coin_type:S,out_coin_type:w,...(pe=(W=B.data)==null?void 0:W.content)==null?void 0:pe.fields,id:(Me=(Ee=(ue=(de=B.data)==null?void 0:de.content)==null?void 0:ue.fields)==null?void 0:Ee.id)==null?void 0:Me.id,version:(We=B.data)==null?void 0:We.version}}),v=new Set;for(const B of y)v.add(B.pay_coin_type),v.add(B.target_coin_type);for(const B of D)v.add(B.in_coin_type),v.add(B.out_coin_type);await o(Array.from(v));const C=await f(y);a(C);const{activeResult:A,pastResult:M}=await u(D);x.current===(t==null?void 0:t.address)&&(i(A),c(M),console.log("🚀 ~ fetchActiveOrderList ~ limitOrderList:",C),console.log("🚀 ~ fetchActiveOrderList ~ dcaOrderList:",D)),p(Array.from(v))}catch(g){console.log("🚀 ~ fetchActiveOrderList ~ error:",g)}finally{l(!1),n(!1)}},resetUserData:()=>{console.log("🚀 ~ resetUserData ~ resetUserData"),a([]),i([]),c([])}}}function Bn(){const{currentAccount:t}=G(),o=ie("clmm"),s=ie("xcetus"),{buildFarmsPositionType:r,buildBurnPositionType:l}=kt(),{setPosBaseList:a,setFullRangePosBaseList:n,setPosBaseListLoading:i}=re(),{setVeNFT:c,setVeNFTLoading:p,setLockCetusList:u,clearData:h,setLockCetusListLoading:_,setAvailableXCetusAmount:f}=I(),{formatPosBaseList:x}=Pt(),k=d.useRef(t==null?void 0:t.address);return d.useEffect(()=>{k.current=t==null?void 0:t.address},[t==null?void 0:t.address]),{fetchOwnerNFT:async()=>{try{const T=k.current;if(T){i(!0),p(!0);const g=await o.FullClient.getOwnedObjectsByPage(T,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{MatchAny:[{Package:$t.clmm_pool.package_id},{StructType:r},{StructType:l},{StructType:Es},{StructType:Ms}]}});let m=await x(g);a(m),i(!1),(m==null?void 0:m.length)==0&&n([]);const j=Ws(g.data);if(j&&T===k.current){c(j,T);const L=await $s(g.data,s);L.sort((R,F)=>R.locked_until_time-F.locked_until_time),console.log("🚀 ~ fetchOwnerLockCetusList ~ lockList1:",{lockList:L,veNFT:j,availableXCetusAmount:be.getAvailableXCetus(j,L)}),u(L),f(be.getAvailableXCetus(j,L))}else _(!1);return{veNFT:j,posBaseList:m}}}catch(T){console.error("🚀 ~ fetchOwnerNFT ~ error:",T),T instanceof TypeError&&(i(!1),a([]))}finally{i(!1),_(!1),p(!1)}return{veNFT:void 0,posBaseList:[]}},resetUserData:()=>{a([]),h()}}}function Un(){const t=ie("farms"),o=ie("clmm"),{getPosApiPoolData:s}=Lt(),{getPosPoolsOriginalObj:r,getPosPoolsRelatedData:l}=Ot(),{getPosLiquidityData:a}=Dt(),{setPosLiquidityData:n,setFarmsPosRewardsData:i,setFarmsPosRewardsDataLoading:c,setPosRewardsData:p,setPosRewardsDataLoading:u,setPosFeeData:h,setPosFeeDataLoading:_}=re(),{formatFarmsRewardsData:f}=Rt(),{formatPosRewardsData:x}=At(),{formatPosFeeData:k}=Ft(),{refreshCoinPriceInfo:P}=Be(),z=async m=>{var F;const j=m.filter(y=>y.posType==="farms"&&y.farmsPool),L=await r(m);if(l(m,L),((F=Object.keys(L))==null?void 0:F.length)===0)throw n({}),new Error("No pool data found");s(m),a(m,L);const R=new Nt;j.length>0&&j.forEach(y=>{t.Farms.buildCalculateFarmingReward({pool_id:y.farmsPool,position_nft_id:y.id},R)}),m.forEach(y=>{o.Position.buildFetchPosFee({pool_id:y.clmmPool,position_id:y.posId,coin_type_a:y.coinTypeA,coin_type_b:y.coinTypeB},R)}),m.filter(y=>y.posType!=="farms").forEach(y=>{var v;const D=L[y.clmmPool];o.Rewarder.buildFetchPosReward({pool_id:y.clmmPool,position_id:y.posId,coin_type_a:y.coinTypeA,coin_type_b:y.coinTypeB,rewarder_types:(v=D.rewarder_infos)==null?void 0:v.map(C=>C.coinAddress)},R)});try{c(!0),u(!0),_(!0);const y=await o.FullClient.devInspectTransactionBlock({transactionBlock:R,sender:Xt("0x0")}),D=t.Farms.parsedPosRewardData(y),v=o.Rewarder.parsedPosRewardData(y),C=o.Position.parsedPosFeeData(y);console.log("🚀 ~ fetchPosRelatedData ~ parsedPosRewardData:",{farmsRewardData:D,clmmRewardData:v,clmmFeeData:C});const A=await f(D);i(A);const M=await x(Object.values(v).map(E=>{const S=L[m.find(w=>w.posId===E.position_id).clmmPool];return{poolAddress:S.pool_address,positionId:E.position_id,rewarderAmountOwed:E.rewarder_amount.map((w,U)=>({coin_address:S.rewarder_infos[U].coinAddress,amount_owed:new Gt(w)}))}}));p(M);const B=await k(Object.values(C).map(E=>({position_id:E.position_id,fee_owned_a:E.fee_owned_a,fee_owned_b:E.fee_owned_b})),m);h(B),console.log("🚀 ~ fetchPosRelatedData ~ posFeeData:",{posFeeData:B,posRewardsData:M,posFarmsRewardsObj:A}),T(m,M,A)}catch(y){console.error("🚀 ~ fetchPosRelatedData ~ error:",y)}finally{c(!1),u(!1),_(!1)}},T=async(m,j,L)=>{console.log("🚀 ~ fetchTokenPrice ~ posRewardsData:",m,j);const R=[];if(m.length>0){m.map(y=>{R.push(_e(y==null?void 0:y.coinTypeA).full_address),R.push(_e(y==null?void 0:y.coinTypeB).full_address);const D=j[y==null?void 0:y.posId]||[],v=L[y==null?void 0:y.id]||[],C=D.concat(v);C==null||C.map(A=>{var M;qt(A==null?void 0:A.display_amount_owed).gt(0)&&R.push(_e((M=A==null?void 0:A.token)==null?void 0:M.coin_type).full_address)})}),console.log("🚀 ~ fetchTokenPrice ~  Array.from(new Set(list)):",Array.from(new Set(R)));const F=Array.from(new Set(R));console.log("🚀 ~ refreshTokenPrice ~ list:",F),P(F)}};return{fetchPosRelatedData:z,resetUserData:()=>{n({}),i({}),p({}),h({})}}}function Vn(){const{getVaultsTokenList:t,getVaultsLpTokenList:o}=ze(),{getVaultsContractInfo:s}=vt(),{getVaultsPosition:r}=St(),{setVaultsPositionLoading:l,clearVaultsPositionObj:a}=me(),{setVaultListLoading:n}=He(),{getVaultPoolList:i}=Tt();return{fetchVaultsPositionList:async()=>{l(!0),n(!0);const u=await i();console.log("🚀 ~ fetchVaultsPositionList ~ vaultsList:",u),t(u),o(u);const{lstVaultContractInfoObj:h,haedalVaultContractInfoObj:_,allClmmPoolContractInfoObj:f}=await s(u);r(u,h,_,f,!0)},resetUserData:()=>{console.log("🚀🚀🚀 ~ useProfileVaults.ts:39 ~ resetUserData ~ clearVaultsPositionObj:",a),a()}}}function En(){const{currentAccount:t}=G(),{setXCetusManager:o,setDividendManager:s}=I(),r=ie("xcetus");return{fetchXCetusBaseInfo:async a=>{try{const{xcetus:n,xcetus_dividends:i}=Kt,{dividend_manager_id:c}=Ge(i),{xcetus_manager_id:p}=Ge(n),u=await r.FullClient.batchGetObjects([p,c],{showType:!0,showContent:!0}),h=u.find(f=>{var x,k;return(k=(x=f.data)==null?void 0:x.type)==null?void 0:k.includes("xcetus::XcetusManager")});if(h){const f=qe(h),x={id:f.id.id,index:Number(f.index),has_venft:{handle:f.has_venft.fields.id.id,size:f.has_venft.fields.size},nfts:{handle:f.nfts.fields.id.id,size:f.nfts.fields.size},total_locked:f.total_locked,treasury:f.treasury.fields.total_supply.fields.value};console.log("🚀 ~ fetchXCetusBaseInfo ~ xCetusManager:",x),o(x)}const _=u.find(f=>{var x,k;return(k=(x=f.data)==null?void 0:x.type)==null?void 0:k.includes("dividend::DividendManager")});if(_){const f=qe(_),x=be.buildDividendManager(f);console.log("🚀 ~ fetchXCetusBaseInfo ~ dividendManager:",x),r.updateCache(`${c}_getDividendManager`,x),s(x)}}catch(n){console.log("🚀 ~ fetchXCetusBaseInfo ~ error:",n)}}}}function Mn(t){const{currentAccount:o}=G(),{fetchCoinHoldingList:s,resetUserData:r}=ft(),{fetchPosRelatedData:l,resetUserData:a}=Un(),{fetchActiveOrderList:n,resetUserData:i}=zn(),{fetchVaultsPositionList:c,resetUserData:p}=Vn(),{setAutoRefreshCount:u,setDcaOrderListLoading:h}=K(),{fetchOwnerNFT:_,resetUserData:f}=Bn(),{fetchXCetusBaseInfo:x}=En(),{addTask:k,removeTask:P}=Ns(),[z,T]=d.useState([]),g=d.useRef(o),{setOrderListLoading:m}=ye(),{setLockCetusListLoading:j}=I(),{setPosBaseListLoading:L}=re(),{setIsCoinHoldingLoading:R}=Oe(),{setVaultListLoading:F}=He(),{setVaultsPositionLoading:y}=me(),D=()=>{r(),a(),i(),f(),p()};d.useEffect(()=>{var w,U;o?((w=g.current)!=null&&w.address&&((U=g.current)==null?void 0:U.address)!==(o==null?void 0:o.address)&&(u(!1),D(),z.forEach(W=>{P(W.id)})),E()):(D(),z.forEach(W=>{P(W.id)})),g.current=o},[o==null?void 0:o.address]);const v={id:Dn,run:s},C={id:Rn,run:_,onSuccess:w=>{const{posBaseList:U}=w;l(U)}},A={id:Fn,run:x},M={id:An,run:n},B={id:Hn,run:c},E=()=>{const w=[];m(!0),j(!0),L(!0),R(!0),y(!0),F(!0),h(!0),t==="wallet"?w.push(v,C,B,M,A):t==="liquidity"?w.push(C,B,v,M,A):t==="orders"?w.push(M,v,C,B,A):w.push(C,B,A,v,M),T(w),w.forEach(U=>{k(U)})};return{refreshTask:()=>{o&&(z.forEach(w=>{P(w.id)}),E())}}}const Ce=t=>t?oe(t,2):"$--",Wn=(...t)=>t.reduce((o,s)=>o.plus(s&&+s?s:0),V(0)).toString();function di(){const{tab:t,tabDetail:o}=Qt(),{currentAccount:s,onWalletModal:r}=G(),l=nt(),{posBaseListLoading:a,posLiquidityDataLoading:n}=re(),{holdingsTotalUsd:i,isCoinPriceLoading:c,isCoinHoldingLoading:p}=Oe(),{liquidityTotalTvl:u}=It(),{orderTotalTvl:h}=Ln(),{orderListLoading:_}=ye(),{isAutoRefresh:f,dcaOrderListLoading:x,setAutoRefreshCount:k,resetAutoRefreshCount:P}=K(),{xCetusTotalTvl:z}=On(),{vaultsPositionLoading:T}=me(),{lockCetusListLoading:g,veNFTLoading:m}=I(),j=d.useMemo(()=>t,[t]),{refreshTask:L}=Mn(j),R=!f&&(p||c),F=!f&&(a||n||c||T),y=!f&&(_||x||c),D=!f&&(g||m||c),v=d.useMemo(()=>({wallet:{totalValue:Ce(i),isLoading:R},liquidity:{totalValue:Ce(u),isLoading:F},orders:{totalValue:Ce(h),isLoading:y},xCetus:{totalValue:Ce(z),isLoading:D}}),[i,u,h,z,R,F,y,D]),C=[{title:"Wallet Holdings",value:"wallet",route:"/portfolio?tab=wallet",activeImgUrl:"/images/wallet_tab.png",showTooltip:!1},{title:"Liquidity",value:"liquidity",route:"/portfolio?tab=liquidity",activeImgUrl:"/images/liquidity_tab.png",showTooltip:!1},{title:"Orders",value:"orders",route:"/portfolio?tab=orders",activeImgUrl:"/images/order_tab.png",showTooltip:!0,tooltip:" Total amount of active orders (Limit & DCA)"},{title:"xCETUS",value:"xCetus",route:"/portfolio?tab=xCetus",activeImgUrl:"/images/xCetus_tab.png",showTooltip:!1}],A=d.useMemo(()=>Wn(z,u,h,i),[z,u,h,i]);d.useEffect(()=>P(!1),[]);const[M,B]=d.useState(!1);return d.useEffect(()=>{B(!0)},[]),X(),e.jsx(H,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 0px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"12px",alignItems:"start",children:M?s!=null&&s.address?e.jsxs(H,{w:"100%",gap:"12px",alignItems:"start",children:[e.jsx(xn,{handleRefresh:E=>{k(!E),L()},totalValue:A,isLoading:!f&&(m||a||_||x)}),e.jsx(hn,{tabList:C,activeTab:j,tabData:v,onClickTab:E=>l(`/portfolio?tab=${E}`)}),j==="wallet"&&e.jsx(jn,{}),j==="liquidity"&&e.jsx(Qs,{}),j==="orders"&&e.jsx(dn,{}),j==="xCetus"&&e.jsx(Pn,{})]}):e.jsx(se,{type:"nowallet",mt:"20px",imgSize:"120px",imgUrl:"/images/img_wallet@2x.png",nowalletText:"Please connect your wallet to view profile page ",onboard:()=>r(!0)}):e.jsx(wt,{h:"300px",w:"100%",justifyContent:"center",alignItems:"center",children:e.jsx(Qe,{})})})}export{di as default};
//# sourceMappingURL=Profile-CCo5YAHJ.js.map
