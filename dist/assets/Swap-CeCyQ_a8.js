import{a as m,aE as y,aF as w,W as j,aL as Te,_ as Pe,aM as ue,j as n,X as _e,Y as Ae,Z as Fe,$ as We,a8 as Oe,a0 as Ee,a1 as He,u as Le,H as C,P as ke,h as Me,aN as Be,aO as De,ar as ze,m as Ne,n as Ve,v as le,aP as k,V as W,T as M,f as Q,C as $e}from"./vendor-DYqnJE5Q.js";import{u as ce,A as Ge}from"./AggregatorModal-Dc0hK5FO.js";import{c as Ue,u as Ye,a as Ke,S as qe,P as Qe,b as Xe}from"./SwapConfirmBlock-JuxVmCPB.js";import{u as Ze}from"./useSwapHelper-C0YC34Fy.js";import{u as Je}from"./global-Bo5w7aOL.js";import{u as de}from"./swap-BgHzuS3-.js";import{u as Ie,a3 as et,Q as tt,I as rt,d as ie,bk as nt,f as fe,b as at,m as it,S as ot,k as st,a as ut,y as lt,j as ct,D as dt}from"./index-WWPS4_2e.js";import{H as ft}from"./HTextLabelBox-CabGGlmQ.js";import{I as pt}from"./IconBg-S9HfKlGO.js";import{u as ht}from"./useAccountBalance-Bh-NvyHs.js";import{T as mt}from"./TradeInputGroup-BIsIP9JC.js";import{W as gt}from"./WarningTokenTipModal-CWha6y_d.js";import{S as vt}from"./Slippage-_d8xq0BF.js";import{n as xt}from"./useWrapPoolData-C8NJOF2n.js";import{b as X,a as Z,u as bt}from"./index-BIWFnSOP.js";import{d as yt}from"./debounce-BomGZdvA.js";import{t as wt,T as jt}from"./generateCategoricalChart-D7UZ2x2M.js";import{i as St,u as H,F as Rt}from"./FreshProgressV2-NKYDd-xy.js";import{A as Ct}from"./SingleTokenInfo-BmePh6gD.js";import{M as Tt}from"./usePriceImpact-Dn-go9TS.js";import{T as Pt}from"./TooltipIcon-BfDJpR5R.js";import{R as _t}from"./Ratio-DBM9XpL1.js";import{R as At,Y as Ft}from"./YAxis-CfXFyO_H.js";import{L as Wt,a as Ot}from"./LineChart-Dmhw6Pb_.js";import"./aggregator-BQ4v6oGq.js";import"./index-BS_lQreI.js";import"./useTransaction-B0xyNeQf.js";import"./useSigner-rKW8msZz.js";import"./useToken-DKo5fk0k.js";import"./useTokenBalance-L-7JdNBo.js";import"./useFindBestRouting-CBVbnGqc.js";import"./v4-C6aID195.js";import"./CurrentPrice-B8SB9U4y.js";import"./HighlightText-OSLpY7EK.js";import"./index-BQdM0Oaf.js";import"./TradeConfirmAmountInfo-DQFQ5-2N.js";import"./useGetPoolList-CMRSGTVw.js";import"./_getAllKeysIn-DOxZoQuX.js";import"./CheckBox-BBIm-qq8.js";import"./linear-DYpwdEgO.js";import"./CopyButton-D1sHEEd7.js";var pe=function(t,e){var r=e.manual,a=e.ready,i=a===void 0?!0:a,s=e.defaultParams,o=s===void 0?[]:s,p=e.refreshDeps,f=p===void 0?[]:p,u=e.refreshDepsAction,h=m.useRef(!1);return h.current=!1,X(function(){!r&&i&&(h.current=!0,t.run.apply(t,y([],w(o),!1)))},[i]),X(function(){h.current||r||(h.current=!0,u?u():t.refresh())},y([],w(f),!1)),{onBefore:function(){if(!i)return{stopNow:!0}}}};pe.onInit=function(t){var e=t.ready,r=e===void 0?!0:e,a=t.manual;return{loading:!a&&r}};function Et(t,e){if(t===e)return!0;for(var r=0;r<t.length;r++)if(!Object.is(t[r],e[r]))return!1;return!0}function he(t,e){var r=m.useRef({deps:e,obj:void 0,initialized:!1}).current;return(r.initialized===!1||!Et(r.deps,e))&&(r.deps=e,r.obj=t(),r.initialized=!0),r.obj}var N=new Map,Ht=function(t,e,r){var a=N.get(t);a!=null&&a.timer&&clearTimeout(a.timer);var i=void 0;e>-1&&(i=setTimeout(function(){N.delete(t)},e)),N.set(t,j(j({},r),{timer:i}))},Lt=function(t){return N.get(t)},V=new Map,kt=function(t){return V.get(t)},Mt=function(t,e){V.set(t,e),e.then(function(r){return V.delete(t),r}).catch(function(){V.delete(t)})},F={},Bt=function(t,e){F[t]&&F[t].forEach(function(r){return r(e)})},q=function(t,e){return F[t]||(F[t]=[]),F[t].push(e),function(){var a=F[t].indexOf(e);F[t].splice(a,1)}},Dt=function(t,e){var r=e.cacheKey,a=e.cacheTime,i=a===void 0?5*60*1e3:a,s=e.staleTime,o=s===void 0?0:s,p=e.setCache,f=e.getCache,u=m.useRef(),h=m.useRef(),c=function(d,l){p?p(l):Ht(d,i,l),Bt(d,l.data)},g=function(d,l){return l===void 0&&(l=[]),f?f(l):Lt(d)};return he(function(){if(r){var d=g(r);d&&Object.hasOwnProperty.call(d,"data")&&(t.state.data=d.data,t.state.params=d.params,(o===-1||new Date().getTime()-d.time<=o)&&(t.state.loading=!1)),u.current=q(r,function(l){t.setState({data:l})})}},[]),Z(function(){var d;(d=u.current)===null||d===void 0||d.call(u)}),r?{onBefore:function(d){var l=g(r,d);return!l||!Object.hasOwnProperty.call(l,"data")?{}:o===-1||new Date().getTime()-l.time<=o?{loading:!1,data:l==null?void 0:l.data,error:void 0,returnNow:!0}:{data:l==null?void 0:l.data,error:void 0}},onRequest:function(d,l){var v=kt(r);return v&&v!==h.current?{servicePromise:v}:(v=d.apply(void 0,y([],w(l),!1)),h.current=v,Mt(r,v),{servicePromise:v})},onSuccess:function(d,l){var v;r&&((v=u.current)===null||v===void 0||v.call(u),c(r,{data:d,params:l,time:new Date().getTime()}),u.current=q(r,function(S){t.setState({data:S})}))},onMutate:function(d){var l;r&&((l=u.current)===null||l===void 0||l.call(u),c(r,{data:d,params:t.state.params,time:new Date().getTime()}),u.current=q(r,function(v){t.setState({data:v})}))}}:{}},zt=function(t,e){var r=e.debounceWait,a=e.debounceLeading,i=e.debounceTrailing,s=e.debounceMaxWait,o=m.useRef(),p=m.useMemo(function(){var f={};return a!==void 0&&(f.leading=a),i!==void 0&&(f.trailing=i),s!==void 0&&(f.maxWait=s),f},[a,i,s]);return m.useEffect(function(){if(r){var f=t.runAsync.bind(t);return o.current=yt(function(u){u()},r,p),t.runAsync=function(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return new Promise(function(c,g){var d;(d=o.current)===null||d===void 0||d.call(o,function(){f.apply(void 0,y([],w(u),!1)).then(c).catch(g)})})},function(){var u;(u=o.current)===null||u===void 0||u.cancel(),t.runAsync=f}}},[r,p]),r?{onCancel:function(){var f;(f=o.current)===null||f===void 0||f.cancel()}}:{}},Nt=function(t,e){var r=e.loadingDelay,a=e.ready,i=m.useRef();if(!r)return{};var s=function(){i.current&&clearTimeout(i.current)};return{onBefore:function(){return s(),a!==!1&&(i.current=setTimeout(function(){t.setState({loading:!0})},r)),{loading:!1}},onFinally:function(){s()},onCancel:function(){s()}}},$=!!(typeof window<"u"&&window.document&&window.document.createElement);function J(){return $?document.visibilityState!=="hidden":!0}var B=[];function Vt(t){return B.push(t),function(){var r=B.indexOf(t);B.splice(r,1)}}if($){var $t=function(){if(J())for(var t=0;t<B.length;t++){var e=B[t];e()}};window.addEventListener("visibilitychange",$t,!1)}var Gt=function(t,e){var r=e.pollingInterval,a=e.pollingWhenHidden,i=a===void 0?!0:a,s=e.pollingErrorRetryCount,o=s===void 0?-1:s,p=m.useRef(),f=m.useRef(),u=m.useRef(0),h=function(){var c;p.current&&clearTimeout(p.current),(c=f.current)===null||c===void 0||c.call(f)};return X(function(){r||h()},[r]),r?{onBefore:function(){h()},onError:function(){u.current+=1},onSuccess:function(){u.current=0},onFinally:function(){o===-1||o!==-1&&u.current<=o?p.current=setTimeout(function(){!i&&!J()?f.current=Vt(function(){t.refresh()}):t.refresh()},r):u.current=0},onCancel:function(){h()}}:{}};function Ut(t,e){var r=!1;return function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];r||(r=!0,t.apply(void 0,y([],w(a),!1)),setTimeout(function(){r=!1},e))}}function Yt(){return $&&typeof navigator.onLine<"u"?navigator.onLine:!0}var D=[];function Kt(t){return D.push(t),function(){var r=D.indexOf(t);r>-1&&D.splice(r,1)}}if($){var oe=function(){if(!(!J()||!Yt()))for(var t=0;t<D.length;t++){var e=D[t];e()}};window.addEventListener("visibilitychange",oe,!1),window.addEventListener("focus",oe,!1)}var qt=function(t,e){var r=e.refreshOnWindowFocus,a=e.focusTimespan,i=a===void 0?5e3:a,s=m.useRef(),o=function(){var p;(p=s.current)===null||p===void 0||p.call(s)};return m.useEffect(function(){if(r){var p=Ut(t.refresh.bind(t),i);s.current=Kt(function(){p()})}return function(){o()}},[r,i]),Z(function(){o()}),{}},Qt=function(t,e){var r=e.retryInterval,a=e.retryCount,i=m.useRef(),s=m.useRef(0),o=m.useRef(!1);return a?{onBefore:function(){o.current||(s.current=0),o.current=!1,i.current&&clearTimeout(i.current)},onSuccess:function(){s.current=0},onError:function(){if(s.current+=1,a===-1||s.current<=a){var p=r??Math.min(1e3*Math.pow(2,s.current),3e4);i.current=setTimeout(function(){o.current=!0,t.refresh()},p)}else s.current=0},onCancel:function(){s.current=0,i.current&&clearTimeout(i.current)}}:{}},Xt=function(t,e){var r=e.throttleWait,a=e.throttleLeading,i=e.throttleTrailing,s=m.useRef(),o={};return a!==void 0&&(o.leading=a),i!==void 0&&(o.trailing=i),m.useEffect(function(){if(r){var p=t.runAsync.bind(t);return s.current=wt(function(f){f()},r,o),t.runAsync=function(){for(var f=[],u=0;u<arguments.length;u++)f[u]=arguments[u];return new Promise(function(h,c){var g;(g=s.current)===null||g===void 0||g.call(s,function(){p.apply(void 0,y([],w(f),!1)).then(h).catch(c)})})},function(){var f;t.runAsync=p,(f=s.current)===null||f===void 0||f.cancel()}}},[r,a,i]),r?{onCancel:function(){var p;(p=s.current)===null||p===void 0||p.cancel()}}:{}},Zt=function(t){m.useEffect(function(){t==null||t()},[])},Jt=function(){var t=w(m.useState({}),2),e=t[1];return m.useCallback(function(){return e({})},[])},It=function(){function t(e,r,a,i){i===void 0&&(i={}),this.serviceRef=e,this.options=r,this.subscribe=a,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=j(j(j({},this.state),{loading:!r.manual}),i)}return t.prototype.setState=function(e){e===void 0&&(e={}),this.state=j(j({},this.state),e),this.subscribe()},t.prototype.runPluginHandler=function(e){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var i=this.pluginImpls.map(function(s){var o;return(o=s[e])===null||o===void 0?void 0:o.call.apply(o,y([s],w(r),!1))}).filter(Boolean);return Object.assign.apply(Object,y([{}],w(i),!1))},t.prototype.runAsync=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return Te(this,void 0,void 0,function(){var a,i,s,o,p,f,u,h,c,g,d,l,v,S,b,R,T,O,P,_,E;return Pe(this,function(A){switch(A.label){case 0:if(this.count+=1,a=this.count,i=this.runPluginHandler("onBefore",e),s=i.stopNow,o=s===void 0?!1:s,p=i.returnNow,f=p===void 0?!1:p,u=ue(i,["stopNow","returnNow"]),o)return[2,new Promise(function(){})];if(this.setState(j({loading:!0,params:e},u)),f)return[2,Promise.resolve(u.data)];(v=(l=this.options).onBefore)===null||v===void 0||v.call(l,e),A.label=1;case 1:return A.trys.push([1,3,,4]),h=this.runPluginHandler("onRequest",this.serviceRef.current,e).servicePromise,h||(h=(d=this.serviceRef).current.apply(d,y([],w(e),!1))),[4,h];case 2:return c=A.sent(),a!==this.count?[2,new Promise(function(){})]:(this.setState({data:c,error:void 0,loading:!1}),(b=(S=this.options).onSuccess)===null||b===void 0||b.call(S,c,e),this.runPluginHandler("onSuccess",c,e),(T=(R=this.options).onFinally)===null||T===void 0||T.call(R,e,c,void 0),a===this.count&&this.runPluginHandler("onFinally",e,c,void 0),[2,c]);case 3:if(g=A.sent(),a!==this.count)return[2,new Promise(function(){})];throw this.setState({error:g,loading:!1}),(P=(O=this.options).onError)===null||P===void 0||P.call(O,g,e),this.runPluginHandler("onError",g,e),(E=(_=this.options).onFinally)===null||E===void 0||E.call(_,e,void 0,g),a===this.count&&this.runPluginHandler("onFinally",e,void 0,g),g;case 4:return[2]}})})},t.prototype.run=function(){for(var e=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];this.runAsync.apply(this,y([],w(r),!1)).catch(function(i){e.options.onError||console.error(i)})},t.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},t.prototype.refresh=function(){this.run.apply(this,y([],w(this.state.params||[]),!1))},t.prototype.refreshAsync=function(){return this.runAsync.apply(this,y([],w(this.state.params||[]),!1))},t.prototype.mutate=function(e){var r=St(e)?e(this.state.data):e;this.runPluginHandler("onMutate",r),this.setState({data:r})},t}();function er(t,e,r){e===void 0&&(e={}),r===void 0&&(r=[]);var a=e.manual,i=a===void 0?!1:a,s=e.ready,o=s===void 0?!0:s,p=ue(e,["manual","ready"]),f=j({manual:i,ready:o},p),u=bt(t),h=Jt(),c=he(function(){var g=r.map(function(d){var l;return(l=d==null?void 0:d.onInit)===null||l===void 0?void 0:l.call(d,f)}).filter(Boolean);return new It(u,f,h,Object.assign.apply(Object,y([{}],w(g),!1)))},[]);return c.options=f,c.pluginImpls=r.map(function(g){return g(c,f)}),Zt(function(){if(!i&&o){var g=c.state.params||e.defaultParams||[];c.run.apply(c,y([],w(g),!1))}}),Z(function(){c.cancel()}),{loading:c.state.loading,data:c.state.data,error:c.state.error,params:c.state.params||[],cancel:H(c.cancel.bind(c)),refresh:H(c.refresh.bind(c)),refreshAsync:H(c.refreshAsync.bind(c)),run:H(c.run.bind(c)),runAsync:H(c.runAsync.bind(c)),mutate:H(c.mutate.bind(c))}}function tr(t,e,r){return er(t,e,y(y([],w([]),!1),[zt,Nt,Gt,qt,Xt,pe,Dt,Qt],!1))}function rr(t){const{isOpen:e,onClose:r,data:a,onSubmitClick:i}=t,{fromCoin:s,toCoin:o,routerData:p}=de();return n.jsxs(_e,{autoFocus:!1,returnFocusOnClose:!1,trapFocus:!1,isOpen:e,onClose:r,isCentered:!0,children:[n.jsx(Ae,{}),n.jsxs(Fe,{children:[n.jsx(We,{children:n.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Swap"})}),n.jsx(Ee,{}),n.jsx(He,{textAlign:"center",p:"0px",children:n.jsx(Ue,{onSubmitClick:i,onClose:r,data:a,lastRouterData:p,fromCoin:s,toCoin:o,isWidget:!1})})]})]})}function nr(){const{fetchByApi:t}=Ie(),{setProviders:e}=et();return{fetchRouterConfig:async()=>{try{const a=await t(xt,"GET"),{providers:i}=a;i&&i.length>0&&e(i),console.log("🚀 ~ file: useGetRouterConfig.ts:13 ~ fetchRouterConfig ~ res:",a)}catch(a){console.log("🚀 ~ file: useGetRouterConfig.ts:18 ~ fetchRouterConfig ~ error:",a)}}}}function ar(){const[t,e]=m.useState(!1),r=m.useRef(null),a=()=>{e(!1)},{fetchRouterConfig:i}=nr(),{loading:s}=tr(i),{handleSelectAllProviderClick:o,handleSaveClick:p,currProvidersSwitchStates:f,isOpenAggregatorMode:u}=ce(),h=()=>{u||c(),o(!u)};tt(()=>{p()},[f]);const c=()=>{var _;const g=window.innerWidth,d=window.innerHeight,l=(_=r.current)==null?void 0:_.getBoundingClientRect(),v=l==null?void 0:l.left,S=l==null?void 0:l.top,b=2,R=k.shapeFromText({text:"🟢",scalar:b}),T=k.shapeFromText({text:"🔵",scalar:b}),O=k.shapeFromText({text:"💚",scalar:b}),P=k.shapeFromText({text:"💙",scalar:b});k({particleCount:40,spread:60,shapes:[R,T,O,P],scalar:b,origin:{x:v/g,y:S*1.2/d}})};return n.jsxs(n.Fragment,{children:[n.jsx(Le,{isLoaded:!s,w:"178px",h:"28px",children:n.jsxs(C,{border:"1px solid",borderColor:"border",borderRadius:"8px",h:"28px",bg:"bg_secondary",gap:"8px",children:[n.jsxs(ke,{isLazy:!0,trigger:"hover",autoFocus:!1,returnFocusOnClose:!1,children:[n.jsx(Me,{children:n.jsxs(Be,{display:"flex",alignItems:"center",pl:"8px",children:[n.jsx(De,{htmlFor:"aggregator-mode",mb:"0",bg:"plus_mode_color",textFillColor:"transparent",backgroundClip:"text",h:"18px",lineHeight:"18px",fontSize:"12px",fontWeight:"500",fontStyle:"normal",mr:"8px",children:"Aggregator Mode"}),n.jsx(ze,{ref:r,id:"aggregator-mode",isChecked:u,onChange:h})]})}),n.jsx(Ne,{children:n.jsx(Ve,{p:"12px",lineHeight:"20px",fontSize:"12px",children:"The Aggregator Mode will aggregate external liquidity sources"})})]}),n.jsx(le,{variant:"unstyled",mr:"-1px",minW:"20px",w:"20px",p:"7px 4px",h:"28px",bg:"border",borderRadius:"0 8px 8px 0",onClick:()=>e(!t),_hover:{svg:{fill:"text_caption"}},children:n.jsx(rt,{xlinkHref:"#icon-icon_list_token",fontSize:"12px"})})]})}),t&&n.jsx(Ge,{isOpen:t,onClose:a})]})}const ir=({active:t,payload:e,label:r})=>{var a,i;return t&&e&&e.length?n.jsxs("div",{style:{backgroundColor:"#121212",border:"1px solid border_secondary",padding:"12px",borderRadius:"8px",position:"relative",left:"0px",top:"-30px",fontSize:"12px"},children:[n.jsx("p",{style:{color:"#909CA4"},children:nt.unix((i=(a=e[0])==null?void 0:a.payload)==null?void 0:i.timestamp).format("MM/DD HH:mm")}),n.jsxs("p",{style:{color:"#fff",marginTop:"8px"},children:["$",fe(e[0].value)]})]}):null};function or({data:t=[]}){const e=ie(Math.min(...t.map(a=>a.price))).mul(.99999).toNumber(),r=ie(Math.max(...t.map(a=>a.price))).mul(1.00001).toNumber();return n.jsx(At,{width:"100%",height:"100%",children:n.jsxs(Wt,{width:180,height:48,data:t,margin:{top:5,right:20,left:20,bottom:5},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"priceLine",x1:"0",y1:"0",x2:"1",y2:"0",children:[n.jsx("stop",{offset:"0%",stopColor:"rgba(117, 200, 255, 1)"}),n.jsx("stop",{offset:"100%",stopColor:"rgba(104, 255, 216, 1)"})]})}),n.jsx(Ft,{hide:!0,domain:[e,r]}),n.jsx(jt,{cursor:!1,content:n.jsx(ir,{})}),n.jsx(Ot,{type:"linear",dot:!1,dataKey:"price",stroke:"url(#priceLine)",strokeWidth:2})]})})}function sr({fromCoin:t,toCoin:e}){return m.useMemo(()=>[t,e].filter(Boolean).filter(a=>a==null?void 0:a.is_trusted),[t,e]).length?n.jsxs(W,{w:"100%",align:"flex-start",gap:"8px",children:[n.jsxs(C,{justify:"flex-start",h:"52px",align:"center",gap:"4px",children:[n.jsx(M,{fontSize:"14px",fontWeight:"500",color:"text_caption",h:"20px",lineHeight:"20px",children:"Price Reference"}),n.jsx(Pt,{type:"priceReference"})]}),n.jsxs(W,{w:"100%",gap:"28px",children:[(t==null?void 0:t.is_trusted)&&n.jsx(se,{coin:t}),(e==null?void 0:e.is_trusted)&&n.jsx(se,{coin:e})]})]}):null}const se=({coin:t})=>{const{getExplorerUrl:e}=at(),{getPriceKline:r,getTokenPrice:a}=it(),[i,s]=m.useState({price:[],daily_rate:""});m.useEffect(()=>{s({price:[],daily_rate:""})},[t]);const o=a(t==null?void 0:t.coin_type),p=async(f,u)=>{try{const h=await r(f,u);s(h)}catch(h){console.log(h,"error")}};return m.useEffect(()=>{o!=null&&o.base_symbol&&p(o==null?void 0:o.base_symbol,o==null?void 0:o.market)},[o==null?void 0:o.base_symbol,o==null?void 0:o.market]),!i||i.price.length===0?n.jsx(n.Fragment,{}):n.jsxs(W,{w:"100%",gap:"12px",children:[n.jsxs(C,{w:"100%",justify:"space-between",align:"flex-start",h:"32px",children:[n.jsxs(C,{children:[n.jsx(ot,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),n.jsxs(W,{align:"flex-start",gap:"4px",children:[n.jsx(M,{fontSize:"14px",h:"16px",lineHeight:"16px",fontWeight:"600",color:"text_caption",children:t==null?void 0:t.symbol}),n.jsx(M,{fontSize:"12px",h:"12px",lineHeight:"12px",fontWeight:"500",children:t==null?void 0:t.name})]})]}),n.jsxs(C,{children:[(o==null?void 0:o.market)&&n.jsx(Tt,{market:o==null?void 0:o.market}),n.jsxs(M,{color:"text_caption",fontSize:"14px",fontWeight:"500",children:["$",(o==null?void 0:o.price)!==void 0?fe(o==null?void 0:o.price):"--"]}),(i==null?void 0:i.daily_rate)&&(o==null?void 0:o.price)!==void 0&&n.jsx(_t,{value:i==null?void 0:i.daily_rate})]})]}),n.jsxs(C,{w:"100%",justify:"space-between",align:"flex-end",gap:"0",children:[n.jsx(Ct,{address:t==null?void 0:t.coin_type,onClickLink:()=>window.open(e(t==null?void 0:t.coin_type,"coin")),wrapStyle:{border:"1px solid",borderColor:"border",h:"24px",borderRadius:"8px",p:"0 8px",bg:"bg_secondary"},fontWeight:"500"}),n.jsx(Q,{flex:"0 0 210px",h:"24px",mr:"-13px",children:(o==null?void 0:o.price)!==void 0&&(i==null?void 0:i.price.length)>0&&n.jsx(or,{data:i==null?void 0:i.price})})]})]})};function Jr(){const t=de(),{fromCoin:e,toCoin:r,setFromCoin:a,setToCoin:i,byAmountIn:s,setFromAmount:o,setToAmount:p,setByAmountIn:f,findRouterLoading:u,routerData:h}=t,{handleSelectToken:c,handleAmountChange:g,fromAmount:d,toAmount:l,fromAmountValue:v,toAmountValue:S,fromBalanceInfo:b,toBalanceInfo:R,amountLimit:T,getSwapSecondaryData:O,doSwapAction:P,reCalculateRouteData:_,scamsText:E,refreshMarketPrice:A,isOpenConfirmModel:G,setIsOpenConfirmModel:I,resetInputAmount:me,onReverseClick:ge}=Ye(t,!1),{currentAccount:z,onWalletModal:ve}=st(),{fetchAccountBalance:ee}=ht();m.useEffect(()=>{z!=null&&z.address&&ee()},[]);const{btnText:xe,btnDisabled:be}=Ke(d,l,b==null?void 0:b.balanceFormat,e,r,h),te=m.useRef(null),{formatSwapRouter:ye}=Ze(h),{isOpenAggregatorMode:U}=ce(),we=()=>{var x;(x=te.current)==null||x.reset()},re=()=>{_(),ee(),A()};m.useEffect(()=>{we()},[l,d,e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]),m.useEffect(()=>{s||re()},[l,e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]),m.useEffect(()=>{me()},[U]);const je=m.useMemo(()=>{const x=[];return e&&x.push(e),r&&x.push(r),x},[e,r]),[Y,ne]=m.useState("#icon-a-icon_trade"),Se=()=>{ne("#icon-icon_swap1")},Re=()=>{ne("#icon-a-icon_trade")},{isApp:ae}=ut(),{isShowTradeChart:L,setIsShowTradeChart:Ce,isShowTradeOrders:ur,setIsShowTradeOrders:lr}=Je();return n.jsx(n.Fragment,{children:n.jsxs(W,{gap:{base:"16px",lg:"8px"},w:{base:"100%",lg:"470px"},children:[n.jsxs(C,{w:"100%",justify:"space-between",children:[n.jsx(ar,{}),n.jsxs(C,{children:[n.jsx(vt,{}),n.jsx(lt,{showTooltip:!ae,placement:"bottom-end",tooltip:n.jsx(M,{fontSize:"12px",children:L?"Hide reference price":"View reference price"}),children:n.jsx($e,{children:n.jsx(pt,{w:"28px",h:"28px",borderRadius:"8px",variant:"",xlinkHref:"#icon-icon_kline",svgFill:L?"primary":"",svgHover:L?"primary":ae?"text_paragraph":"text_caption",onClick:()=>Ce(!L)})})}),n.jsx(Rt,{callbackInterval:G?5:10,ref:te,min:0,max:10,onClick:re})]})]}),n.jsxs(Q,{w:"100%",children:[n.jsx(mt,{wrapStyle:{gap:{base:"16px",lg:"8px"},mt:{base:"0px",lg:"4px"}},onClick:()=>ge(U),from:{title:"You Pay",balance:(b==null?void 0:b.balanceFormat)||"",value:d,amountValue:v,loading:!s&&u,onChange:x=>{g(x,!0)},selectable:!0,placeholder:"0.0",token:e,onFocusChange:x=>{x&&+d&&!s&&g(d,!0)},onTokenChange:x=>{c(x,!0)}},to:{title:"You Receive",balance:(R==null?void 0:R.balanceFormat)||"",value:l,amountValue:S,loading:s&&u,onFocusChange:x=>{x&&+l&&s&&g(l,!1)},onTokenChange:x=>{c(x,!1)},inputAllowed:!U,onChange:x=>{g(x,!1)},selectable:!0,placeholder:"0.0",token:r,half:!1,max:!1},iconParams:{xlinkHref:Y,svgFill:"text_caption",transform:Y==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:Y==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:Se,onMouseLeave:Re}}),E&&n.jsx(Q,{mt:"-32px",p:"48px 16px 16px",borderRadius:"20px",bg:"bg_secondary",border:"1px solid",borderColor:"border",children:n.jsx(qe,{scamsText:E})})]}),(e||r)&&n.jsx(gt,{addToken:!0,tokensInfo:je,waringModalCancel:x=>{x.forEach(K=>{(K.coin_type===(e==null?void 0:e.coin_type)||K.coin_type===(r==null?void 0:r.coin_type))&&c(void 0,K.coin_type===(e==null?void 0:e.coin_type))})}}),n.jsxs(W,{p:+d&&+l?"0 8px 12px":"0 8px",w:"100%",gap:"8px",border:"1px solid",borderColor:"border",borderRadius:"20px",bg:"bg_secondary",children:[n.jsx(le,{w:"calc(100% + 18px)",h:"52px",margin:"-1px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:u||be,isLoading:u,onClick:()=>{z?I(!0):ve(!0)},children:[e,r].filter(Boolean).length<2?"Select a token":xe}),!!+d&&!!+l&&n.jsxs(W,{w:"100%",gap:"12px",children:[n.jsx(Qe,{findRouterLoading:u,routerData:h,fromCoin:e,toCoin:r}),n.jsx(ft,{isLoading:u,label:s?"Minimum Received":"Maximum Sold",value:`${ct(T,s?r==null?void 0:r.decimals:e==null?void 0:e.decimals,!1,dt.ROUND_DOWN)} ${s?r==null?void 0:r.symbol:e==null?void 0:e.symbol}`,labelStyle:{fontWeight:500,whiteSpace:"nowrap",fontSize:"14px"},valueStyle:{fontWeight:500,fontSize:"14px"},skeletonStyle:{valueW:"128px"},wrapStyle:{p:"0 8px",minH:"20px"}}),n.jsx(Xe,{formatSwapRouter:ye,findRouterLoading:u,fromAmount:d,toAmount:l,fromCoin:e,toCoin:r})]})]}),!L&&n.jsx(sr,{fromCoin:e,toCoin:r}),G&&n.jsx(rr,{data:O(),isOpen:G,onSubmitClick:P,onClose:()=>{I(!1)}})]})})}export{Jr as default};
//# sourceMappingURL=Swap-CeCyQ_a8.js.map
