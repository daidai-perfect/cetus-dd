import{Q as F,aY as Y,b3 as K,aV as ge,s as I,O as re,d as R,G as k,u as _e,b4 as Pe,l as oe,a8 as H,Z as D,aJ as le,aQ as Ve,M as q,k as xe,b5 as Le,b6 as ke,p as ne,aZ as he,f as Se,q as ve,o as je,a1 as ce,C as Ae}from"./index-BPmJ2jpN.js";import{c as Oe}from"./useGetPoolList-CUJyOk7M.js";import{a as M,j as w,V as J,H as ie,T as we}from"./vendor-BFGDaAdA.js";import{u as Ce}from"./useTokenBalance-WptRK2XT.js";import{u as Be}from"./useToken-C2f3q8yb.js";import{u as De}from"./useFavoritePool-BrmOgNO0.js";import{H as G}from"./HTextLabelBox-DQO0ByyL.js";const de=F(o=>({pythPriceMap:{},setPythPriceMap:e=>o({pythPriceMap:e})}));function Ie(){const{volatileVaultsSdk:o}=Y(),{setPythPriceMap:e}=de();return{getPythLastPrice:async c=>{const T=c.map(y=>K(y));console.log("ðŸš€ðŸš€ðŸš€ ~ useGetPythLastPrice.ts:12 ~ getPythLastPrice ~ list:",T);try{const y=await o.PythPrice.getLatestPrice(T);return e(y),y}catch(y){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetPythLastPrice.ts:16 ~ getPythLastPrice ~ error:",y)}}}}const Ne=(o,e)=>({vaultsList:[],setVaultList:t=>o({vaultsList:t}),vaultPageList:[],setVaultPageList:t=>o({vaultPageList:t}),vaultListObj:{},setVaultListObj:t=>o({vaultListObj:t}),vaultListLoading:!0,setVaultListLoading:t=>o({vaultListLoading:t}),vaultsTokenList:[],setVaultsTokenList:t=>o({vaultsTokenList:t}),lpTokenInfoObj:{},setLpTokenInfoObj:t=>o({lpTokenInfoObj:t}),vaultsTotalTvlDisplay:"",setVaultTotalTvlDisplay:t=>o({vaultsTotalTvlDisplay:t})}),Z=F(ge(Ne,{name:"useVaultsStoreV2",partialize:o=>{const{vaultsList:e,vaultsTokenList:t,lpTokenInfoObj:c}=o;return{vaultsList:e,vaultsTokenList:t,lpTokenInfoObj:c}}})),Re=F((o,e)=>({lstVaultContractInfoObj:{},haedalVaultContractInfoObj:{},vaultClmmPoolContractInfoObj:{},setLstVaultContractInfoObj:t=>{const c=e().lstVaultContractInfoObj;o(()=>({lstVaultContractInfoObj:{...c,...t}}))},setHaedalVaultContractInfoObj:t=>{const c=e().haedalVaultContractInfoObj;o(()=>({haedalVaultContractInfoObj:{...c,...t}}))},setVaultClmmPoolContractInfoObj:t=>{const c=e().vaultClmmPoolContractInfoObj;o(()=>({vaultClmmPoolContractInfoObj:{...c,...t}}))}})),ue=F(o=>({vaultsPositionObj:{},setVaultsPositionObj:e=>o(t=>({vaultsPositionObj:{...t.vaultsPositionObj,...e}})),clearVaultsPositionObj:()=>o(()=>({vaultsPositionObj:{}})),currentVaultPosition:{},setCurrentVaultPosition:e=>o(()=>({currentVaultPosition:e})),currentVaultPositionLoading:!0,setCurrentVaultPositionLoading:e=>o(()=>({currentVaultPositionLoading:e})),vaultsPositionLoading:!1,setVaultsPositionLoading:e=>o(()=>({vaultsPositionLoading:e})),vaultsTotalTvl:"",setVaultsTotalTvl:e=>o(()=>({vaultsTotalTvl:e}))})),Q={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}},"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105":{vaults_id:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmm_pool:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",lpToken:{name:"SUI-USDC Haedal Vault LP Token",symbol:"SUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/TZD49BnoQJTbSIsGi_qfnzfN0MuCE17hYMeOWaMqpEs",project_url:"",coin_type:"0x2f46a040b9bc3a584a3be4d7bfbb02a5fb479da17a04c6d2860ed61d95e97f3f::lpcoin::LPCOIN",description:""}},"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2":{vaults_id:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmm_pool:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",lpToken:{name:"DEEP-SUI Haedal Vault LP Token",symbol:"DEEP-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/NVpcEHcDm71AOiNdu5BjfZ5RoXwROnKMUE3PEwDOKM4",project_url:"",coin_type:"0xd418945e16ef3db737df093d0827f5ce387b36f089523e13c16e50dec6bd2524::lpcoin::LPCOIN",description:""}},"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17":{vaults_id:"0x12ac7deea4b92b3e2c16687e2d2695fa8c045ec0a52844db7b2fc3876c9552aa",clmm_pool:"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}},"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b":{vaults_id:"0x99db9a7d3320d31fe6e4dc4122b948162010e331c41dc279636ca75567b93497",clmm_pool:"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b",lpToken:{name:"haSUI-USDC Haedal Vault LP Token",symbol:"haSUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/uPsVdR-uVDtGW-FMwvSm4PV123RnHBzAYb2S9nO923E",project_url:"",coin_type:"0x0484a9162669957e1c1883fc2da59e3cce9afdc1eec3c72c983898dbc9e92b91::lpcoin::LPCOIN",description:""}},"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88":{vaults_id:"0xedfb22d1bbe5045fd1888bb8bc1c4bc1823ab24d40f5a4bea9f6eb9758a4b820",clmm_pool:"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88",lpToken:{name:"ETH-USDC Haedal Vault LP Token",symbol:"ETH-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/AsgmYwj4r2jNmfjHBktWEPJP1pLaamS-SMICcmFZQIc",project_url:"",coin_type:"0x8275bc774497b319db110bb97a4812a19859ab6f19dc1574746097f06103c0f9::lpcoin::LPCOIN",description:""}},"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded":{vaults_id:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmm_pool:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",lpToken:{name:"CETUS-SUI Haedal Vault LP Token",symbol:"CETUS-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/wDk5NmfNJXk2yT_ocfN3UuYtAltpTjGGr-MQzPNl9E0",project_url:"",coin_type:"0x242ddc526b9cb75513bee2fc629e01d5b7dc6da4c02d39cdab0160794635334f::lpcoin::LPCOIN",description:""}},"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e":{vaults_id:"0xbd6252e0d56ae5eaabf055fd6c518ee5f66c1114287ca957cc698a17c3d25b16",clmm_pool:"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e",lpToken:{name:"LBTC-SUI Haedal Vault LP Token",symbol:"LBTC-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/-CIyJycPqRHU1xnI0eJLtccVFr3PJDX_Ahz7Mlh8Pvo",project_url:"",coin_type:"0xb2d502d4ef89395934de020b195ded323bfa86d7f40b65ed5b15d6b66c722a3d::lpcoin::LPCOIN",description:""}},"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1":{vaults_id:"0x5525f5a70fffd93f616c39b59f3abdd2054fc2d19f09c8a4d94950d611a43b74",clmm_pool:"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}}};function ze(){return{wrapVaultsPoolData:(e,t,c=!1)=>{var C,N,z,U;const{category:T,hard_cap_usd:y,tvl:A}=e;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapVaultsPoolData.ts:8 ~ wrapVaultsPoolData ~ vaultsPool:",e);const{displayTokenA:h,displayTokenB:S,feeDisplay:m,isReverse:d,tokenA:s,tokenB:i}=c?e:t,p=I(e.tvl||0),u=I(T=="cetus"?e.apr*100:e.apy*100,"%"),f=I(e.lst_apy*100,"%"),g=I(e.apr*100,"%"),_=I(A,"$"),P=re(y,2),b=e.category=="cetus"?R(e==null?void 0:e.apy).add(R(e.lst_apy)).mul(100).toString():R(e.apy).mul(100).toString(),a=I(b,"%"),n=[k(h==null?void 0:h.coin_type,!1),k(S==null?void 0:S.coin_type,!1)],r=((C=t==null?void 0:t.farmsRewarderList)==null?void 0:C.map(B=>k(B==null?void 0:B.coinType,!1)))||[],V=((N=t==null?void 0:t.miningRewardList)==null?void 0:N.map(B=>k(B==null?void 0:B.coinType,!1)))||[],v=Array.from(new Set([...n,...r,...V])),l=R(y).gt(0)?I(R(A).div(y).mul(100).toString(),""):0,x=I(l||0,"%"),j=c?e.clmmPoolAddress:t.poolAddress,O=e.category=="cetus"?(U=(z=Q[j])==null?void 0:z.lpToken)==null?void 0:U.coin_type:e.lp_type||e.lpTokenType,L=e==null?void 0:e.hard_cap_usd;return{tokenA:s,tokenB:i,displayTokenA:h,displayTokenB:S,feeDisplay:m,vaultsTvl:c?"--":A,tvlDisplay:c?"--":p,vaultsTvlDisplay:c?"--":_,vaultsApyDisplay:c?"--":u,vaultsAprDisplay:c?"--":g,vaultsLstApyDisplay:c?"--":f,vaultsTotalApy:c?"--":b,vaultsTotalApyDisplay:c?"--":a,vaultsRewards:c?e.vaultsRewards:v,category:T,depositRatio:l,depositRatioDisplay:x,vaultId:c?e.vaultId:e.id,clmmPoolAddress:j,hardCapUsdDisplay:P,lpTokenType:O,hardCapUSD:L,isReverse:d}}}}function Ue(){const{fetchByApi:o}=_e(),{wrapVaultsPoolData:e}=ze(),{getFavoritePoolList:t}=De(),{vaultsList:c,setVaultList:T,setVaultTotalTvlDisplay:y,setVaultListObj:A}=Z(),h=async()=>{try{const m=await o(Pe,"GET");if(m.list){const d=m.list.map(i=>i.clmm_pool),s=await t({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:d});if(s!=null&&s.list){const i=Object.fromEntries(s==null?void 0:s.list.map(u=>[u.poolAddress,u])),p=m.list.map(u=>e(u,i[u.clmm_pool]));return T(p),A(p.reduce((u,f)=>(u[f.vaultId]=f,u),{})),y(re(m==null?void 0:m.total_tvl,2)),p}}}catch(m){return console.log("ðŸš€ðŸš€ðŸš€ ~ getVaultPoolList ~ error:",m),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:48 ~ getVaultPoolList ~ vaultsList:",c),S()}},S=async()=>{const d=(await fetch(`/data/vault-pools.json?timestamp=${new Date().getTime()}`).then(s=>s.json())).map(s=>e(s,{},!0));return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:57 ~ poolList ~ poolList:",d),T(d),A(d.reduce((s,i)=>(s[i.vaultId]=i,s),{})),y("--"),d};return{getVaultPoolList:h}}const Ge=F(o=>({vaultsPoolObj:{},setVaultsPoolObj:e=>o(t=>({vaultsPoolObj:{...t.vaultsPoolObj,...e}}))}));function Ke(){const{volatileVaultsSdk:o}=Y();oe("clmm");const e=oe("vaults"),{setLstVaultContractInfoObj:t,setHaedalVaultContractInfoObj:c,setVaultClmmPoolContractInfoObj:T}=Re(),{setVaultsPoolObj:y}=Ge(),A=async m=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsContract.ts:19 ~ getVaultsContractInfo ~ getVaultsContractInfo:");const d=[],s=[],i=[];m.forEach(b=>{b.category=="cetus"?d.push(b.vaultId):s.push(b.vaultId),i.push(b.clmmPoolAddress)});const{data:p}=await e.Vaults.getVaultList(),u=p.reduce((b,a)=>(b[a.id]=a,b),{});t(u);const{data:f}=await o.Vaults.getPoolList(),g=f.reduce((b,a)=>(b[a.id]=a,b),{});c(g);const P=(await o.CetusClmmSDK.Pool.getAssignPools(i)).reduce((b,a)=>(b[a.id]=a,b),{});return T(P),h(m,P,u,g),{lstVaultContractInfoObj:u,haedalVaultContractInfoObj:g,allClmmPoolContractInfoObj:P}},h=(m,d,s,i)=>{for(let p=0;p<m.length;p++){const u=m[p],f=u.category=="cetus"?s[u.vaultId]:i[u.vaultId],g=d[u.clmmPoolAddress],_=S(u,g,f);y(_)}},S=(m,d,s)=>{const{tokenA:i,tokenB:p,category:u,isReverse:f,vaultId:g}=m,_=u=="haedal"?s.clmm_vault.wrapped_position.tick_lower_index:s.position.tick_lower_index,P=u=="haedal"?s.clmm_vault.wrapped_position.tick_upper_index:s.position.tick_upper_index,b=H.tickIndexToPrice(_,i.decimals,p.decimals).toString(),a=H.tickIndexToPrice(P,i.decimals,p.decimals).toString(),n=u=="haedal"?s.clmm_vault.wrapped_position.liquidity:s.position.liquidity,r=D(1).div(D(a)).toString(),V=D(1).div(D(b)).toString(),v=new le(d.current_sqrt_price),l=H.sqrtPriceX64ToPrice(v,i.decimals,p.decimals).toString(),x=D(1).div(D(l)).toString(),j=H.tickIndexToSqrtPriceX64(_),O=H.tickIndexToSqrtPriceX64(P),L=Ve.getCoinAmountFromLiquidity(new le(n),v,j,O,!1),C=q(L.coin_amount_a.toString(),i.decimals).toString(),N=q(L.coin_amount_b.toString(),p.decimals).toString(),z=f?N:C,U=f?C:N,{percentA:B,percentB:$}=Oe(C,N,l,!1),pe=f?$:B,be=f?B:$,fe=I(D(s.protocol_fee_rate).div(1e4).mul(100).toString(),"%"),ee=k(i.coin_type,!1),te=k(p.coin_type,!1),ye=f?te:ee,me=f?ee:te;let W,E,ae,X,se;u=="haedal"&&(W=s==null?void 0:s.quote_type,E=k(W,!1)==k(i.coin_type,!1)?i:p,ae=D(s==null?void 0:s.hard_cap).div(10**(E==null?void 0:E.decimals)).toString(),X=W==i.coin_type?p:i,se=X.coin_type);const Te=u=="cetus"?s==null?void 0:s.total_supply:s==null?void 0:s.lp_token_treasury;return{[g]:{minPrice:f?r:b,minPriceResever:f?b:r,maxPrice:f?V:a,maxPriceResever:f?a:V,liquidity:n,displayAmountA:z,displayAmountB:U,displayPercentA:pe,displayPercentB:be,currentPrice:f?x:l,currentPriceReverse:f?l:x,disPlayProtocolFeeRate:fe,displayCoinTypeA:ye,displayCoinTypeB:me,hardCap:ae,quoteCoinType:W,quoteCoin:E,baseCoin:X,baseCoinType:se,totalSupply:Te}}};return{getVaultsContractInfo:A,getVaultPool:h,wrapVaultPoolContractInfo:S}}function Qe(){const{lpTokenInfoObj:o}=Z(),{volatileVaultsSdk:e}=Y(),{currentAccount:t}=xe(),{setVaultsPositionObj:c,setVaultsPositionLoading:T}=ue();Ce();const y=M.useRef(t==null?void 0:t.address);M.useEffect(()=>{y.current=t==null?void 0:t.address},[t==null?void 0:t.address]);const A=async(d,s,i,p)=>{T(!0);const f=(await e.FullClient.getAllBalances({owner:t==null?void 0:t.address})).reduce((g,_)=>(g[_.coinType.toLowerCase()]=_,g),{});for(let g=0;g<d.length;g++){const _=d[g],P=_.category=="cetus"?s[_.vaultId]:i[_.vaultId],b=p[_.clmmPoolAddress],a=f[_.lpTokenType.toLowerCase()];h(_,b,P,a)}T(!1)},h=async(d,s,i,p,u=t==null?void 0:t.address,f)=>{try{const{category:g}=d;let _,P;p?P=p:(P=await e.FullClient.getBalance({owner:u,coinType:d.lpTokenType}),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:45 ~ getVaultPosition ~ balance:",P)),g=="cetus"?_=Le.buildVaultBalance(u,i,P,s):_=ke(u,P.totalBalance,i,s);const b=S({..._,ownerAddress:y.current==u?u:void 0},d,i,f);return c(b),b}catch(g){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:59 ~ getVaultPosition ~ error:",g)}},S=(d,s,i,p=o)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:74 ~ wrapVaultPosition ~ tokenInfoObj:",p);const u=p[s.lpTokenType],{amount_a:f,amount_b:g,ownerAddress:_}=d,{isReverse:P,tokenA:b,tokenB:a,category:n}=s,r=q(f,b.decimals).toString(),V=q(g,a.decimals).toString(),v=d.clmm_pool_id,l=d.liquidity,x=d.vault_id,j=ne(d.coin_type_a).full_address,O=ne(d.coin_type_b).full_address,L=m(u,d.lp_token_balance),C=n=="cetus"?R(L.balance).div(i.total_supply).mul(100).toString():R(L.balance).div(i.lp_token_treasury).mul(100).toString(),N=`${he(C,2,6)}%`,z=P?a:b,U=P?b:a;return{[x]:{...L,amountA:r,amountB:V,displayAmountA:P?V:r,displayAmountB:P?r:V,coinTypeA:j,coinTypeB:O,displayCoinTypeA:P?O:j,displayCoinTypeB:P?j:O,liquidity:l,clmmPool:v,vaultId:x,shartOfPoolDisplay:N,tokenA:b,tokenB:a,displayTokenA:z,displayTokenB:U,ownerAddress:_}}},m=(d,s)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:99 ~ getVaultBalance ~ tokenInfo:",d);const i=q(s,d==null?void 0:d.decimals).toString();return{balance:s,balanceFormat:i,balanceDisplay:Se(i,void 0,!1,ve.ROUND_DOWN).toString()}};return{getVaultPosition:h,getVaultsPosition:A}}function Ye(){const{fetchTokenPrices:o}=je(),{setVaultListLoading:e,setVaultsTokenList:t,lpTokenInfoObj:c,setLpTokenInfoObj:T,vaultsList:y,setVaultPageList:A}=Z(),{getVaultPoolList:h}=Ue(),{fetchTokenInfo:S,getTokenListInfo:m}=Be(),{vaultsPositionObj:d}=ue(),{getPythLastPrice:s}=Ie(),i=(a,n=y,r=!1)=>{console.log("ðŸš€ ~ filterVaultList ~ originList:",n);const{currentTab:V,isYourHoldings:v,selectCoinList:l,sortOptions:x}=a;let j=[],O=[];(l==null?void 0:l.length)>0?O=_(n,l):O=n,V==="all"?j=O:j=O.filter(C=>C.category==V);let L;return v?L=p(x,P(j)):L=p(x,j),r||(A(L),e(!1)),L},p=(a,n)=>{console.log("ðŸš€ ~ sortVaultList ~ options:",a);const{sortRule:r,sortType:V}=a;return n==null?void 0:n.sort((l,x)=>V==="apr"?r==="desc"?x.vaultsTotalApy-l.vaultsTotalApy:l.vaultsTotalApy-x.vaultsTotalApy:r==="desc"?x.vaultsTvl-l.vaultsTvl:l.vaultsTvl-x.vaultsTvl)},u=async(a,n=!0)=>{console.log("ðŸš€ ~ fetchVaultList ~ fetchVaultList:",a),n&&e(!0);const r=await h();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:59 ~ fetchVaultList ~ list:",r),f(r),g(r);const V=i(a,JSON.parse(JSON.stringify(r)));return console.log("ðŸš€ ~ fetchVaultList ~ result:",V),e(!1),A(V),r},f=async a=>{if(!a||a.length===0)return;const n=[],r=[];for(let l=0;l<a.length;l++)n.includes(a[l].displayTokenA.coin_type)||n.push(a[l].displayTokenA.coin_type),n.includes(a[l].displayTokenB.coin_type)||n.push(a[l].displayTokenB.coin_type),a[l].category=="haedal"&&!r.includes(k(a[l].displayTokenA.coin_type))&&r.push(k(a[l].displayTokenA.coin_type,!1)),a[l].category=="haedal"&&!r.includes(k(a[l].displayTokenB.coin_type))&&r.push(k(a[l].displayTokenB.coin_type,!1)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:96 ~ getVaultsTokenList ~ haedalTokenList:",r);s(r),n.length>0&&o(n);const V=await m(n),v=Array.from(V.values());t(v)},g=async a=>{var r,V;const n={};for(let v=0;v<a.length;v++){const l=a[v];console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:118 ~ getVaultsLpTokenList ~ vault:",l);const x=l==null?void 0:l.lpTokenType;(r=Q[l.clmmPoolAddress])!=null&&r.lpToken?n[x]=(V=Q[l.clmmPoolAddress])==null?void 0:V.lpToken:c[x]?n[x]=c[x]:n[x]=await S(x)}return console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:122 ~ getVaultsLpTokenList ~ lpTokenInfoObj:",JSON.stringify(c)),T(n),n},_=(a,n)=>{var l,x,j,O;const r=(l=n[0])!=null&&l.coin_type?k((x=n[0])==null?void 0:x.coin_type):void 0,V=(j=n[1])!=null&&j.coin_type?k((O=n[1])==null?void 0:O.coin_type):void 0;return a==null?void 0:a.filter(L=>r&&V?k(L.displayTokenA.coin_type)==r&&k(L.displayTokenB.coin_type)==V||k(L.displayTokenA.coin_type)==V&&k(L.displayTokenB.coin_type)==r:r?k(L.displayTokenA.coin_type)==r||k(L.displayTokenB.coin_type)==r:L)},P=a=>a.filter(n=>{const r=d[n.vaultId];return!!(r&&D(r.balance).gt(0))});return{getVaultsLpTokenList:g,getVaultsTokenList:f,filterVaultList:i,sortVaultList:p,fetchVaultList:u,getCurrentTabNum:a=>{let n=i(a,y,!0);return String(n&&n.length||"")}}}function Ze(){const{pythPriceMap:o}=de(),e=M.useMemo(()=>o,[o]),t=M.useCallback((T,y,A)=>{var S;const h=Number(y)==0?"0":A;if(y&&T&&+y&&ce(e)){const m=(S=e[K(T)])==null?void 0:S.price;if(m)return D(y).mul(m).toString()}return h},[e]),c=M.useCallback(T=>{var y;return T&&ce(e)?(y=e[K(T)])==null?void 0:y.price:0},[e]);return{getTokenAmountValueByPyth:t,getTokenPriceByPyth:c}}function $e({vaultsLstApyDisplay:o,vaultsApyDisplay:e,vaultsTotalApyDisplay:t,category:c,vaultsAprDisplay:T}){return w.jsx(Ae,{tooltip:w.jsx(Ee,{vaultsApyDisplay:e,vaultsLstApyDisplay:o,vaultsTotalApyDisplay:t,vaultsAprDisplay:T,category:c}),children:w.jsx(we,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:c=="cetus"?t:e})})}const Ee=({vaultsLstApyDisplay:o,vaultsApyDisplay:e,vaultsTotalApyDisplay:t,category:c,vaultsAprDisplay:T})=>w.jsx(J,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:c=="cetus"?w.jsxs(J,{children:[w.jsx(G,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:t}),w.jsx(ie,{h:"1px",w:"100%",backgroundColor:"border"}),w.jsx(G,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:e}),w.jsx(G,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:o,valueStyle:{fontSize:"12px"}})]}):w.jsxs(J,{children:[w.jsx(G,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:T}),w.jsx(ie,{h:"1px",w:"100%",backgroundColor:"border"}),w.jsx(G,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),w.jsx(G,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});export{Ee as V,ue as a,$e as b,Qe as c,Re as d,Ye as e,Ke as f,Ge as g,Ie as h,Ze as i,Ue as j,de as k,Z as u};
//# sourceMappingURL=VaultsAprBlock-aytfep-B.js.map
