import{L as $,j as n,P as X,Q as Z,V as N,b2 as q,b3 as Q,B as R,C as Y,ar as K,S as ee,aF as U,b4 as B,b5 as te,b6 as se,b7 as ne,b8 as re,b9 as ae,W as oe,r as F,ba as C,u as ce,bb as ie}from"./index-CHLr8WBT.js";import{P as _}from"./Pagination-E7PViZOx.js";import{T as z,a as P,b as L,c as le,d as ue,e as me}from"./tr-B2OMVv02.js";import{j as fe,H as xe,k as de,l as he}from"./api-data-utils-C7YZCm61.js";import{a as pe,g as Te}from"./_getAllKeysIn-BdX03Ct2.js";import{X as E,Y as W,R as ye}from"./YAxis-BR7Ttjva.js";import{l as ve,B as I,n as ge,T as De}from"./generateCategoricalChart-BHc4pvO9.js";const be=$((e,c)=>{const{overflow:u,overflowX:a,className:t,...s}=e;return n.jsx(X.div,{ref:c,className:Z("chakra-table__container",t),...s,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:u??a??"auto",overflowY:"hidden",maxWidth:"100%"}})});function Ee({dataSource:e,columns:c,itemSkeletonLength:u,skeletonLength:a=3,rowKey:t,loading:s,pagination:o,rowStyle:r,wrapStyle:m,onRowClick:i,itemHeight:x}){var h;const d=new Array(a).fill(0);return n.jsxs(N,{w:"100%",...m||{},children:[(h=e&&(e!=null&&e.length)&&!s?e:d)==null?void 0:h.map((l,f)=>n.jsxs(N,{w:"100%",children:[n.jsx(q,{data:Q(c,l,f),loading:s,skeletonLength:u,onClick:()=>i==null?void 0:i(l,f),style:typeof r=="function"?r(l,f):r,itemHeight:x},s?f:typeof t=="function"?t(l):t?l[t]:f),n.jsx(R,{w:"100%",h:"1px",bg:"border",mt:"12px"})]},s?f:typeof t=="function"?t(l):t?l[t]:f)),o&&(o==null?void 0:o.total)>(o==null?void 0:o.size)&&n.jsx(Y,{mt:"16px",children:n.jsx(_,{...o})})]})}function je(e){const{rowStyle:c,minW:u,tableListLength:a,tdListLength:t,firstTd:s}=e,o=new Array(a).fill(0),r=new Array(t).fill(0);return n.jsx(z,{children:o==null?void 0:o.map((m,i)=>n.jsx(P,{sx:{td:{_last:{">div":{justifyContent:"flex-end"}}}},...typeof c=="function"?c(m,i):c,children:n.jsxs(n.Fragment,{children:[s&&n.jsx(L,{children:s}),r==null?void 0:r.map((x,d)=>n.jsx(L,{children:n.jsx(K,{w:"100%",justifyContent:!s&&d==0?"flex-start":"flex-end",children:n.jsx(ee,{})})},d))]})},m+`${i}`))})}function We({dataSource:e,skeletonLength:c=3,columns:u,rowKey:a,loading:t,tdBorder:s,firstTdSkeleton:o,theadConfig:r,tbodyConfig:m,rowStyle:i={},onRowClick:x,pagination:d,...h}){return n.jsxs(n.Fragment,{children:[n.jsx(be,{w:"100%",children:n.jsxs(le,{size:"sm",...h,children:[n.jsx(ue,{...r,children:n.jsx(P,{children:u.map(({title:l,key:f,thConfig:p})=>n.jsx(me,{...p,children:typeof l=="function"?l():l},typeof f=="function"?f():f))})}),t?n.jsx(je,{tableListLength:c,tdListLength:u.length,firstTd:typeof o=="function"?o():o,rowStyle:i}):n.jsx(z,{...m,children:e==null?void 0:e.map((l,f)=>n.jsx(P,{borderBottom:s?"1px solid":"none",borderColor:s?"border":"transparent",onClick:()=>x&&x(l,f),...typeof i=="function"?i(l,f):i,children:u.map(({render:p,key:g,tdConfig:D})=>n.jsx(L,{...D,fontWeight:"500",children:typeof p=="function"?p(l,f):p||l[g]},g))},a?typeof a=="function"?a(l):l[`${a}`]:(l==null?void 0:l.key)||f))})]})}),d&&(d==null?void 0:d.total)>(d==null?void 0:d.size)&&n.jsx(Y,{mt:"16px",children:n.jsx(_,{...d})})]})}function Ce(e,c,u,a){if(!U(e))return e;c=B(c,e);for(var t=-1,s=c.length,o=s-1,r=e;r!=null&&++t<s;){var m=te(c[t]),i=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return e;if(t!=o){var x=r[m];i=void 0,i===void 0&&(i=U(x)?x:se(c[t+1])?[]:{})}pe(r,m,i),r=r[m]}return e}function we(e,c,u){for(var a=-1,t=c.length,s={};++a<t;){var o=c[a],r=ne(e,o);u(r,o)&&Ce(s,B(o,e),r)}return s}function Ae(e,c){if(e==null)return{};var u=re(Te(e),function(a){return[a]});return c=ae(c),we(e,u,function(a,t){return c(a,t[0])})}var ke=ve({chartName:"BarChart",GraphicalChild:I,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:E},{axisType:"yAxis",AxisComp:W}],formatAxisMap:ge});const He=({x:e,y:c,payload:u})=>n.jsx("g",{transform:`translate(${e},${c})`,children:n.jsx("text",{x:0,y:0,dy:16,textAnchor:"middle",fill:"#909CA4",fontSize:12,fontFamily:"Inter",children:u.value})}),Pe=({value:e})=>n.jsx(oe,{fontSize:"12px",display:e?"block":"none",p:"8px 12px",borderRadius:"12px",children:e});var y=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(y||{});function Ie(){const[e,c]=F.useState("");return{time:e,getCurrentTime:()=>{const t=C(Date.parse(new Date().toUTCString()),"YMD")||"",s=t.slice(5,7),o=y[Number(s)],r=t.slice(8,10),m=o,i=t.slice(0,4),x=m+" "+r+", "+i+" (UTC)";c(x)},getHoverTime:(t,s)=>{console.log("ðŸš€ ~ getHoverTime ~ timeDate:",Date.parse(t),t);const o=Date.parse(t),r=new Date(o);r.setDate(r.getDate()+7);const m=new Date(o);m.setDate(m.getDate()+31);const i=r.toUTCString(),x=m.toUTCString(),d=C(Date.parse(x),"YMD")||"",h=C(Date.parse(new Date().toUTCString()),"YMD")||"",l=Date.parse(i)>Date.parse(new Date().toUTCString())?C(Date.parse(new Date().toUTCString()),"YMD")||"":C(Date.parse(i),"YMD")||"",f=h.slice(5,7),p=y[Number(f)],g=h.slice(8,10),D=p,M=h.slice(0,4),v=t.slice(5,7),w=y[Number(v)],b=t.slice(8,10),T=w,j=t.slice(0,4),k=l.slice(5,7),H=y[Number(k)],S=l.slice(8,10),V=H,G=l.slice(0,4),J=Number(v)==12?y[1]:y[Number(v)+1],O=d.slice(0,4);let A;s=="D"?A=T+" "+b+", "+j+" (UTC)":s=="W"?A=b+" "+T+"-"+S+" "+V+" , "+G+" (UTC)":A=Date.parse(x)>=Date.parse(new Date().toUTCString())?T+" 01-"+D+" "+g+", "+M+" (UTC)":T+" 01-"+J+" 01, "+O+" (UTC)",c(A)}}}function Se(){const{fetchByApi:e}=ce();return{getHistogramData:async u=>{const{type:a,date_type:t="day",limit:s,address:o="all"}=u;console.log("ðŸš€ ~ getHistogramData ~ limit:",a,t,s);const r=a==="pure_tvl",i={day:"day",wek:"week",mon:"month"}[t],x=Date.now(),f=s?t=="day"?s*86400:t=="wek"?s*604800:s*2592e3:void 0,p=f?String(Math.floor(x/1e3-f)):0,g=r?{dataType:"tvl",dateType:i,address:o,beginTimestamp:p}:{typ:a,date_type:t,address:u==null?void 0:u.address};s&&!r&&(g.limit=s);const D=Ae(g,ie),v=await e(r?xe:s?he:de,"GET",D);console.log("ðŸš€ ~ getHistogramData response:",v);const w=((v==null?void 0:v.list)||[]).map(T=>{const j=r?new Date(T.timestamp*1e3).toISOString().split(".")[0]+"Z":T.date,k=Number(j.slice(5,7)),H=y[k];return{num:Number(r?T.value:T.num),date:j,xAxis:t==="mon"?H:fe(j)}}),b=r?[...w].reverse():w;return console.log("ðŸš€ ~ getHistogramData ~ isPureTvl:",r,b),b}}}const Ve=({data:e,onChangeValue:c,noXAxis:u,pageFrom:a="stats"})=>{const[t,s]=F.useState(""),o=i=>{if(i&&i.activePayload&&i.activePayload.length){const x=i.activePayload[0].payload.date;c(i.activePayload[0].payload);const d=x.slice(5,7),h=y[Number(d)],l=x.slice(8,10),f=h,p=x.slice(0,4);s(l+" "+f+" "+p)}},r=()=>{c(null)};(e==null?void 0:e.length)>0&&Math.floor(Math.min(...e.map(i=>i.num)));const m=Math.ceil(Math.max(...e.map(i=>i.num)));return n.jsx(ye,{width:"100%",height:"100%",children:n.jsxs(ke,{barCategoryGap:"25%",data:e,onMouseMove:o,onMouseLeave:r,maxBarSize:24,children:[!u&&n.jsx(E,{type:"category",dataKey:"xAxis",minTickGap:18,tickLine:!1,axisLine:!1,tick:n.jsx(He,{})}),m&&n.jsx(W,{domain:[0,m*1.05],hide:!0,axisLine:!1,tickLine:!1}),n.jsx(De,{content:n.jsx(Pe,{value:a!=="stats"?t:""}),cursor:n.jsx(Le,{})}),n.jsx(I,{dataKey:"num",fill:"#75C8FF",isAnimationActive:!1})]})})};function Le(e){var r,m;const{x:c,y:u,width:a,height:t,payload:s}=e;if(!s||!(s!=null&&s[0])||!((m=(r=s==null?void 0:s[0])==null?void 0:r.payload)!=null&&m.num))return;const o=a>192?a/1.2:a>96?a/1.5:a>48?a/2:a>24?a/4:a/8;return n.jsx("g",{children:n.jsx("rect",{width:a-o,height:t,x:c+o/2,fill:"rgba(118,200,255,0.5)",y:u+1})})}export{He as C,Pe as E,Ee as H,We as T,Ve as V,Se as a,Ie as u};
