const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CollectListBox-BYCJagDY.js","assets/vendor-BulRdKUe.js","assets/SingleTokenInfo-DE7hohck.js","assets/useToken-C6RDHu0O.js","assets/CopyButton-X3XSnFok.js","assets/TokenList-VwAu4B46.js","assets/Loading-CEW9oCbv.js","assets/NoData-fdoVeTOA.js","assets/useTokenBalance-C8D__ujF.js","assets/useAccountBalance-CkzRtCV9.js","assets/BackButton-BZBisMg2.js","assets/TokenGoplusCard-0h1wKQ1a.js","assets/HTextLabelBox-Cm4iyfcJ.js","assets/index-XJqYoN8U.js","assets/index-DWO-tGuU.js","assets/useNotifiAlerts-CwSFgh98.js","assets/useInitNotifi-DIsg-Xjv.js","assets/useSigner-DmDAENCK.js","assets/ConnectButton-D2zVZWsX.js","assets/RecentTransactions-DV_ilduY.js","assets/useTrack-UOAsFmDY.js","assets/CheckBox-DEjfBJst.js","assets/useInterval-uVBrvd8F.js","assets/CetusLayout-CFPNehgW.js","assets/swapWidgetConfig-C-pYqeD6.js","assets/useSwapHelper-BktZRZdS.js","assets/global-BP8qcqCm.js","assets/useGetPoolList-Dh8HSIIJ.js","assets/useWrapPoolData-35hWjNLH.js","assets/swapWidget-BAWNj_Tg.js","assets/SwapConfirmBlock-D3RLO3Uz.js","assets/aggregator-cstJe73A.js","assets/useTransaction-CVBHtbet.js","assets/index-Cfr9bgtl.js","assets/useFindBestRouting-DceIwBp_.js","assets/v4-C6aID195.js","assets/usePriceImpact-B4zH2lK7.js","assets/CurrentPrice-ZerwH9L_.js","assets/HighlightText-Uv5QOqtT.js","assets/index-BqXw8KfL.js","assets/TradeConfirmAmountInfo-C9a02NPL.js","assets/TradeInputGroup-CMMa6Hm6.js","assets/_getAllKeysIn-CAQS-7Xc.js","assets/RefreshButton-B21oRwwW.js","assets/Slippage-DWIz51zt.js","assets/TooltipIcon-DJpGTAw-.js","assets/useDocumentSize-BX8xcEoA.js","assets/index-4kM3JsjZ.js","assets/debounce-Cta0IZrB.js","assets/index-e8NcK24v.js","assets/Stats-DzROUUCh.js","assets/useStatistics-BlQzeC2g.js","assets/index-BOCXUQAf.js","assets/VolumeChart-D8lPctJJ.js","assets/EmptyTooltip-BOZREt79.js","assets/YAxis-BEOLENx3.js","assets/generateCategoricalChart-B_M_XU4G.js","assets/linear-DYpwdEgO.js","assets/Table-ppXX8QkD.js","assets/Pagination-D5pmnzoQ.js","assets/SortDropBlock-CRZiUIj8.js","assets/TableSortTh-BjvNioGe.js","assets/index-CnxSl-eg.js","assets/CoinPairInfo-yIRqAJcv.js","assets/PoweredByHaedal-DgLgYLeQ.js","assets/TvlChart-CorIFWCR.js","assets/Swap-_9HNp1pm.js","assets/TradeTab-C0NTOpFm.js","assets/swap-pjKQ5MEN.js","assets/Dca-DdnLntqL.js","assets/MenuDropBlock-tpxhDYYJ.js","assets/IconBg-C2SNETNc.js","assets/OverviewOrders-DGfrSwSm.js","assets/activeOrders-CUl1j4Wl.js","assets/RangeValue-CE6g6VtT.js","assets/ErrorTips-DtkspbtX.js","assets/useInsufficientBalanceToast-BsshLBBj.js","assets/icon_currentprice@2x-DeObnx8l.js","assets/WarningTokenTipModal-D3imlwre.js","assets/InputBox-2tXuXH7i.js","assets/LimitPriceChart-BDk3XGAS.js","assets/useRpcListener-lMT5IaM-.js","assets/usePreviousValue-DJR5Z5zU.js","assets/Pools-D8A3BBJe.js","assets/PoolItem-CY23bzHL.js","assets/useFavoritePool-C0cNTGCL.js","assets/SearchInputBlock-Bggw6EEc.js","assets/index-CzQMpcEQ.js","assets/PositionCurrentPrice-BQflLr3I.js","assets/useBurn-ChOgUIWU.js","assets/msafe-oYBkW7LJ.js","assets/usePositionList-_KFcUc_Y.js","assets/PriceRange-BJu9loWx.js","assets/PositionStatus-Bpfq9Hf4.js","assets/PositionListLoading-D0J6Bg0O.js","assets/detail-DLwGSqNg.js","assets/useRequest-BWV1dMjY.js","assets/index-BYrW2Tah.js","assets/index-D0WGwBpk.js","assets/VaultsAprBlock-B-y44EVN.js","assets/useDisplayTickPrice-CiwgNSG8.js","assets/VTextLabelBox-CB_NicRG.js","assets/IconText-D32N8mqD.js","assets/useNotifiSubscription-CPMb-3JU.js","assets/useXCetusHelper-D5-Z9PzN.js","assets/Liquidity-CtoqCtDz.js","assets/LiquidityRangeChart-B2dOZsWe.js","assets/liquidity-D3_hBFpQ.js","assets/ActionButton-B4LuRynz.js","assets/ZapSwitch-tU5bHjNO.js","assets/DepositRatio-Dz_82bS9.js","assets/FreshProgressV2-CRfOEZz5.js","assets/TotalAmount-Dog-JHyo.js","assets/SelectTokenAndFeeConfirm-BoFNkFfS.js","assets/FeeTierSelect-DBJGxTbI.js","assets/usePosAdd-B4T9atYo.js","assets/PriceInput-NjS2zKiG.js","assets/PositionDetail-KctHtrdF.js","assets/RemoveBlock-Dhxlg3qJ.js","assets/ExpendItem-41A9_ASc.js","assets/Farms-6HB31QDH.js","assets/FarmsTable-BZCEn8mf.js","assets/CreatePool-DERnTznC.js","assets/useCreatePoolHelper-DvHXAOGL.js","assets/Limit-ChWuEG7s.js","assets/useGetLimitOrderHistory-D9_Mj9lZ.js","assets/AggregatorModal-Blk8VCBr.js","assets/SelectForLiquidity-5J4eJOxS.js","assets/Vaults-CPCZH0a0.js","assets/useGetPythLastPrice-CI6hN_JY.js","assets/AumLimit-BSQX8USk.js","assets/XCetus-DspgX3ec.js","assets/useXCetus-DWNZHR10.js","assets/VaultsDetailPage-BauCts9M.js","assets/LineChart-DaCO_V0Q.js","assets/AvailableCapacity-DO6xVxNu.js","assets/Profile-DQPmyeVJ.js","assets/AccountSwitchDrawer-BAeRrXWS.js","assets/Drawer-Cc85-wz0.js","assets/404-peUMPe_j.js","assets/Error-DoRdu_x7.js","assets/TestCoin-s6pqeqeU.js","assets/TestNotifi-DBxzlLAh.js"])))=>i.map(i=>d[i]);
var wo=Object.defineProperty;var Ja=t=>{throw TypeError(t)};var $o=(t,e,n)=>e in t?wo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Or=(t,e,n)=>$o(t,typeof e!="symbol"?e+"":e,n),Pa=(t,e,n)=>e.has(t)||Ja("Cannot "+n);var br=(t,e,n)=>(Pa(t,e,"read from private field"),n?n.call(t):e.get(t)),Nr=(t,e,n)=>e.has(t)?Ja("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Pr=(t,e,n,i)=>(Pa(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Mr=(t,e,n)=>(Pa(t,e,"access private method"),n);var Fs=(t,e,n,i)=>({set _(s){Pr(t,e,s,n)},get _(){return br(t,e,i)}});import{r as reactDomExports,a as reactExports,j as jsxRuntimeExports,g as getDefaultExportFromCjs$2,R as React$2,l as localforage,b as getAugmentedNamespace,d as dist,c as commonjsGlobal$1,_ as __generator$1,B as Buffer$1,e as global,C as Center,f as Box,i as isEqual,P as Popover,h as PopoverTrigger,k as Portal,m as PopoverContent,n as PopoverBody,o as require_typeof,p as interopRequireDefaultExports,q as requireAsyncToGenerator,s as requireDefineProperty,F as Flex,I as Image$1,H as HStack,T as Text$1,t as Tooltip,V as VStack,S as SkeletonCircle,u as Skeleton,v as Button$1,w as Tag,x as keyframes,y as defineStyleConfig$1,z as cssVar,A as extendTheme,D as useDisclosure,E as useLocation,G as useToast,J as commonjsRequire$1,K as ChakraProvider,L as Link,M as Link$1,N as InputGroup,O as Input,Q as InputRightElement,U as __extends$1,W as __assign,X as Modal,Y as ModalOverlay,Z as ModalContent,$ as ModalHeader,a0 as ModalCloseButton,a1 as ModalBody,a2 as Slider,a3 as SliderTrack,a4 as SliderFilledTrack,a5 as SliderThumb,a6 as ModalFooter,a7 as Stack$2,a8 as Heading$1,a9 as InputRightAddon,aa as Spinner$1,ab as useNavigate,ac as Menu,ad as MenuButton,ae as MenuList,af as MenuItem,ag as Divider$1,ah as Grid,ai as GridItem,aj as createBrowserRouter,ak as Navigate,al as RouterProvider}from"./vendor-BulRdKUe.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var client$1={},m$3=reactDomExports;client$1.createRoot=m$3.createRoot,client$1.hydrateRoot=m$3.hydrateRoot;const GeneralLoading=()=>{const t=reactExports.useRef(null);return reactExports.useEffect(()=>{if(t.current){const e=t.current.style;e.setProperty("--size-loader","50px"),e.setProperty("--size-orbe","10px")}},[]),jsxRuntimeExports.jsx("div",{style:{width:"100vw",height:"100vh",background:"#161616",position:"relative"},children:jsxRuntimeExports.jsx("div",{ref:t,style:{width:"100px",height:"100px",position:"absolute",top:"50%",left:"50%",marginTop:"-50px",marginLeft:"-50px"},children:jsxRuntimeExports.jsx("img",{src:"/images/img-bg-loading.gif",alt:"icon",style:{width:"100px",height:"100px"}})})})};function setRef(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function composeRefs(...t){return e=>{let n=!1;const i=t.map(s=>{const a=setRef(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<i.length;s++){const a=i[s];typeof a=="function"?a():setRef(t[s],null)}}}}function createSlot(t){const e=createSlotClone(t),n=reactExports.forwardRef((i,s)=>{const{children:a,...l}=i,f=reactExports.Children.toArray(a),p=f.find(isSlottable);if(p){const C=p.props.children,B=f.map(N=>N===p?reactExports.Children.count(C)>1?reactExports.Children.only(null):reactExports.isValidElement(C)?C.props.children:null:N);return jsxRuntimeExports.jsx(e,{...l,ref:s,children:reactExports.isValidElement(C)?reactExports.cloneElement(C,void 0,B):null})}return jsxRuntimeExports.jsx(e,{...l,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var Slot=createSlot("Slot");function createSlotClone(t){const e=reactExports.forwardRef((n,i)=>{const{children:s,...a}=n;if(reactExports.isValidElement(s)){const l=getElementRef(s),f=mergeProps(a,s.props);return s.type!==reactExports.Fragment&&(f.ref=i?composeRefs(i,l):l),reactExports.cloneElement(s,f)}return reactExports.Children.count(s)>1?reactExports.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(t){return reactExports.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(t,e){const n={...e};for(const i in e){const s=t[i],a=e[i];/^on[A-Z]/.test(i)?s&&a?n[i]=(...f)=>{a(...f),s(...f)}:s&&(n[i]=s):i==="style"?n[i]={...s,...a}:i==="className"&&(n[i]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function getElementRef(t){var i,s;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function r$2(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=r$2(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function clsx(){for(var t,e,n=0,i="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=r$2(t))&&(i&&(i+=" "),i+=e);return i}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$2(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function isArrayOf(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function afn(t){if(typeof t!="function")throw new Error("function expected");return!0}function astr(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function anumber$1(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function aArr(t){if(!Array.isArray(t))throw new Error("array expected")}function astrArr(t,e){if(!isArrayOf(!0,e))throw new Error(`${t}: array of strings expected`)}function anumArr(t,e){if(!isArrayOf(!1,e))throw new Error(`${t}: array of numbers expected`)}function chain(...t){const e=a=>a,n=(a,l)=>f=>a(l(f)),i=t.map(a=>a.encode).reduceRight(n,e),s=t.map(a=>a.decode).reduce(n,e);return{encode:i,decode:s}}function alphabet(t){const e=typeof t=="string"?t.split(""):t,n=e.length;astrArr("alphabet",e);const i=new Map(e.map((s,a)=>[s,a]));return{encode:s=>(aArr(s),s.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${t}`);return e[a]})),decode:s=>(aArr(s),s.map(a=>{astr("alphabet.decode",a);const l=i.get(a);if(l===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${t}`);return l}))}}function join(t=""){return astr("join",t),{encode:e=>(astrArr("join.decode",e),e.join(t)),decode:e=>(astr("join.decode",e),e.split(t))}}function convertRadix(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(aArr(t),!t.length)return[];let i=0;const s=[],a=Array.from(t,f=>{if(anumber$1(f),f<0||f>=e)throw new Error(`invalid integer: ${f}`);return f}),l=a.length;for(;;){let f=0,p=!0;for(let C=i;C<l;C++){const B=a[C],N=e*f,le=N+B;if(!Number.isSafeInteger(le)||N/e!==f||le-B!==N)throw new Error("convertRadix: carry overflow");const Ee=le/n;f=le%n;const Ue=Math.floor(Ee);if(a[C]=Ue,!Number.isSafeInteger(Ue)||Ue*n+f!==le)throw new Error("convertRadix: carry overflow");if(p)Ue?p=!1:i=C;else continue}if(s.push(f),p)break}for(let f=0;f<t.length-1&&t[f]===0;f++)s.push(0);return s.reverse()}const gcd=(t,e)=>e===0?t:gcd(e,t%e),radix2carry=(t,e)=>t+(e-gcd(t,e)),powers$1=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function convertRadix2(t,e,n,i){if(aArr(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(radix2carry(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${radix2carry(e,n)}`);let s=0,a=0;const l=powers$1[e],f=powers$1[n]-1,p=[];for(const C of t){if(anumber$1(C),C>=l)throw new Error(`convertRadix2: invalid data word=${C} from=${e}`);if(s=s<<e|C,a+e>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${e}`);for(a+=e;a>=n;a-=n)p.push((s>>a-n&f)>>>0);const B=powers$1[a];if(B===void 0)throw new Error("invalid carry");s&=B-1}if(s=s<<n-a&f,!i&&a>=e)throw new Error("Excess padding");if(!i&&s>0)throw new Error(`Non-zero padding: ${s}`);return i&&a>0&&p.push(s>>>0),p}function radix(t){anumber$1(t);const e=2**8;return{encode:n=>{if(!isBytes$2(n))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(n),e,t)},decode:n=>(anumArr("radix.decode",n),Uint8Array.from(convertRadix(n,t,e)))}}function radix2(t,e=!1){if(anumber$1(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,t)>32||radix2carry(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!isBytes$2(n))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(n),8,t,!e)},decode:n=>(anumArr("radix2.decode",n),Uint8Array.from(convertRadix2(n,t,8,e)))}}function unsafeWrapper(t){return afn(t),function(...e){try{return t.apply(null,e)}catch{}}}const genBase58=t=>chain(radix(58),alphabet(t),join("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(t){const e=t>>25;let n=(t&33554431)<<5;for(let i=0;i<POLYMOD_GENERATORS.length;i++)(e>>i&1)===1&&(n^=POLYMOD_GENERATORS[i]);return n}function bechChecksum(t,e,n=1){const i=t.length;let s=1;for(let a=0;a<i;a++){const l=t.charCodeAt(a);if(l<33||l>126)throw new Error(`Invalid prefix (${t})`);s=bech32Polymod(s)^l>>5}s=bech32Polymod(s);for(let a=0;a<i;a++)s=bech32Polymod(s)^t.charCodeAt(a)&31;for(let a of e)s=bech32Polymod(s)^a;for(let a=0;a<6;a++)s=bech32Polymod(s);return s^=n,BECH_ALPHABET.encode(convertRadix2([s%powers$1[30]],30,5,!1))}function genBech32(t){const e=t==="bech32"?1:734539939,n=radix2(5),i=n.decode,s=n.encode,a=unsafeWrapper(i);function l(N,le,Ee=90){astr("bech32.encode prefix",N),isBytes$2(le)&&(le=Array.from(le)),anumArr("bech32.encode",le);const Ue=N.length;if(Ue===0)throw new TypeError(`Invalid prefix length ${Ue}`);const ze=Ue+7+le.length;if(Ee!==!1&&ze>Ee)throw new TypeError(`Length ${ze} exceeds limit ${Ee}`);const Ze=N.toLowerCase(),Qe=bechChecksum(Ze,le,e);return`${Ze}1${BECH_ALPHABET.encode(le)}${Qe}`}function f(N,le=90){astr("bech32.decode input",N);const Ee=N.length;if(Ee<8||le!==!1&&Ee>le)throw new TypeError(`invalid string length: ${Ee} (${N}). Expected (8..${le})`);const Ue=N.toLowerCase();if(N!==Ue&&N!==N.toUpperCase())throw new Error("String must be lowercase or uppercase");const ze=Ue.lastIndexOf("1");if(ze===0||ze===-1)throw new Error('Letter "1" must be present between prefix and data only');const Ze=Ue.slice(0,ze),Qe=Ue.slice(ze+1);if(Qe.length<6)throw new Error("Data must be at least 6 characters long");const ct=BECH_ALPHABET.decode(Qe).slice(0,-6),wt=bechChecksum(Ze,ct,e);if(!Qe.endsWith(wt))throw new Error(`Invalid checksum in ${N}: expected "${wt}"`);return{prefix:Ze,words:ct}}const p=unsafeWrapper(f);function C(N){const{prefix:le,words:Ee}=f(N,!1);return{prefix:le,words:Ee,bytes:i(Ee)}}function B(N,le){return l(N,s(le))}return{encode:l,decode:f,encodeFromBytes:B,decodeToBytes:C,decodeUnsafe:p,fromWords:i,fromWordsUnsafe:a,toWords:s}}const bech32=genBech32("bech32"),toBase58=t=>base58.encode(t),fromBase58=t=>base58.decode(t),toB58=toBase58,fromB58=fromBase58;function fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const CHUNK_SIZE=8192;function toBase64(t){if(t.length<CHUNK_SIZE)return btoa(String.fromCharCode(...t));let e="";for(var n=0;n<t.length;n+=CHUNK_SIZE){const i=t.slice(n,n+CHUNK_SIZE);e+=String.fromCharCode(...i)}return btoa(e)}const toB64=toBase64,fromB64=fromBase64;function fromHex(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=e.length%2===0?e:`0${e}`,i=((s=n.match(/[0-9a-fA-F]{2}/g))==null?void 0:s.map(a=>parseInt(a,16)))??[];if(i.length!==n.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(i)}function toHex$1(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}const toHEX=toHex$1,fromHEX=fromHex;function ulebEncode(t){let e=[],n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function ulebDecode(t){let e=0,n=0,i=0;for(;;){let s=t[i];if(i+=1,e|=(s&127)<<n,!(s&128))break;n+=7}return{value:e,length:i}}class BcsReader{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),i=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+i).toString(10)}read128(){let e=BigInt(this.read64()),i=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+i).toString(10)}read256(){let e=BigInt(this.read128()),i=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+i).toString(10)}readBytes(e){let n=this.bytePosition+this.dataView.byteOffset,i=new Uint8Array(this.dataView.buffer,n,e);return this.shift(e),i}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e),{value:i,length:s}=ulebDecode(n);return this.shift(s),i}readVec(e){let n=this.readULEB(),i=[];for(let s=0;s<n;s++)i.push(e(this,s,n));return i}}function encodeStr(t,e){switch(e){case"base58":return toBase58(t);case"base64":return toBase64(t);case"hex":return toHex$1(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function decodeStr(t,e){switch(e){case"base58":return fromBase58(t);case"base64":return fromBase64(t);case"hex":return fromHex(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function splitGenericParameters(t,e=["<",">"]){const[n,i]=e,s=[];let a="",l=0;for(let f=0;f<t.length;f++){const p=t[f];if(p===n&&l++,p===i&&l--,l===0&&p===","){s.push(a.trim()),a="";continue}a+=p}return s.push(a.trim()),s}class BcsWriter{constructor({initialSize:e=1024,maxSize:n=1/0,allocateSize:i=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=n,this.allocateSize=i,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const n=this.bytePosition+e;if(n>this.size){const i=Math.min(this.maxSize,this.size+this.allocateSize);if(n>i)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=i;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return toLittleEndian(BigInt(e),8).forEach(n=>this.write8(n)),this}write128(e){return toLittleEndian(BigInt(e),16).forEach(n=>this.write8(n)),this}write256(e){return toLittleEndian(BigInt(e),32).forEach(n=>this.write8(n)),this}writeULEB(e){return ulebEncode(e).forEach(n=>this.write8(n)),this}writeVec(e,n){return this.writeULEB(e.length),Array.from(e).forEach((i,s)=>n(this,i,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return encodeStr(this.toBytes(),e)}}function toLittleEndian(t,e){let n=new Uint8Array(e),i=0;for(;t>0;)n[i]=Number(t%BigInt(256)),t=t/BigInt(256),i+=1;return n}var __typeError$i=t=>{throw TypeError(t)},__accessCheck$i=(t,e,n)=>e.has(t)||__typeError$i("Cannot "+n),__privateGet$i=(t,e,n)=>(__accessCheck$i(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$i=(t,e,n)=>e.has(t)?__typeError$i("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$h=(t,e,n,i)=>(__accessCheck$i(t,e,"write to private field"),e.set(t,n),n),_write,_serialize,_schema,_bytes;const _BcsType=class fo{constructor(e){__privateAdd$i(this,_write),__privateAdd$i(this,_serialize),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),__privateSet$h(this,_write,e.write),__privateSet$h(this,_serialize,e.serialize??((n,i)=>{const s=new BcsWriter({initialSize:this.serializedSize(n)??void 0,...i});return __privateGet$i(this,_write).call(this,n,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,n){this.validate(e),__privateGet$i(this,_write).call(this,e,n)}serialize(e,n){return this.validate(e),new SerializedBcs(this,__privateGet$i(this,_serialize).call(this,e,n))}parse(e){const n=new BcsReader(e);return this.read(n)}fromHex(e){return this.parse(fromHex(e))}fromBase58(e){return this.parse(fromBase58(e))}fromBase64(e){return this.parse(fromBase64(e))}transform({name:e,input:n,output:i,validate:s}){return new fo({name:e??this.name,read:a=>i?i(this.read(a)):this.read(a),write:(a,l)=>__privateGet$i(this,_write).call(this,n?n(a):a,l),serializedSize:a=>this.serializedSize(n?n(a):a),serialize:(a,l)=>__privateGet$i(this,_serialize).call(this,n?n(a):a,l),validate:a=>{s==null||s(a),this.validate(n?n(a):a)}})}};_write=new WeakMap;_serialize=new WeakMap;let BcsType=_BcsType;const SERIALIZED_BCS_BRAND=Symbol.for("@mysten/serialized-bcs");function isSerializedBcs(t){return!!t&&typeof t=="object"&&t[SERIALIZED_BCS_BRAND]===!0}class SerializedBcs{constructor(e,n){__privateAdd$i(this,_schema),__privateAdd$i(this,_bytes),__privateSet$h(this,_schema,e),__privateSet$h(this,_bytes,n)}get[SERIALIZED_BCS_BRAND](){return!0}toBytes(){return __privateGet$i(this,_bytes)}toHex(){return toHex$1(__privateGet$i(this,_bytes))}toBase64(){return toBase64(__privateGet$i(this,_bytes))}toBase58(){return toBase58(__privateGet$i(this,_bytes))}parse(){return __privateGet$i(this,_schema).parse(__privateGet$i(this,_bytes))}}_schema=new WeakMap;_bytes=new WeakMap;function fixedSizeBcsType({size:t,...e}){return new BcsType({...e,serializedSize:()=>t})}function uIntBcsType({readMethod:t,writeMethod:e,...n}){return fixedSizeBcsType({...n,read:i=>i[t](),write:(i,s)=>s[e](i),validate:i=>{var s;if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,i)}})}function bigUIntBcsType({readMethod:t,writeMethod:e,...n}){return fixedSizeBcsType({...n,read:i=>i[t](),write:(i,s)=>s[e](BigInt(i)),validate:i=>{var a;const s=BigInt(i);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(a=n.validate)==null||a.call(n,s)}})}function dynamicSizeBcsType({serialize:t,...e}){const n=new BcsType({...e,serialize:t,write:(i,s)=>{for(const a of n.serialize(i).toBytes())s.write8(a)}});return n}function stringLikeBcsType({toBytes:t,fromBytes:e,...n}){return new BcsType({...n,read:i=>{const s=i.readULEB(),a=i.readBytes(s);return e(a)},write:(i,s)=>{const a=t(i);s.writeULEB(a.length);for(let l=0;l<a.length;l++)s.write8(a[l])},serialize:i=>{const s=t(i),a=ulebEncode(s.length),l=new Uint8Array(a.length+s.length);return l.set(a,0),l.set(s,a.length),l},validate:i=>{var s;if(typeof i!="string")throw new TypeError(`Invalid ${n.name} value: ${i}. Expected string`);(s=n.validate)==null||s.call(n,i)}})}function lazyBcsType(t){let e=null;function n(){return e||(e=t()),e}return new BcsType({name:"lazy",read:i=>n().read(i),serializedSize:i=>n().serializedSize(i),write:(i,s)=>n().write(i,s),serialize:(i,s)=>n().serialize(i,s).toBytes()})}const bcs$2={u8(t){return uIntBcsType({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return uIntBcsType({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return uIntBcsType({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return bigUIntBcsType({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return bigUIntBcsType({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return bigUIntBcsType({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return fixedSizeBcsType({name:"bool",size:1,read:e=>e.read8()===1,write:(e,n)=>n.write8(e?1:0),...t,validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return dynamicSizeBcsType({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(ulebEncode(e)),...t})},bytes(t,e){return fixedSizeBcsType({name:`bytes[${t}]`,size:t,read:n=>n.readBytes(t),write:(n,i)=>{const s=new Uint8Array(n);for(let a=0;a<t;a++)i.write8(s[a]??0)},...e,validate:n=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},byteVector(t){return new BcsType({name:"bytesVector",read:e=>{const n=e.readULEB();return e.readBytes(n)},write:(e,n)=>{const i=new Uint8Array(e);n.writeULEB(i.length);for(let s=0;s<i.length;s++)n.write8(i[s]??0)},...t,serializedSize:e=>{const n="length"in e?e.length:null;return n==null?null:ulebEncode(n).length+n},validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return stringLikeBcsType({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,n){return new BcsType({name:`${e.name}[${t}]`,read:i=>{const s=new Array(t);for(let a=0;a<t;a++)s[a]=e.read(i);return s},write:(i,s)=>{for(const a of i)e.write(a,s)},...n,validate:i=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,i),!i||typeof i!="object"||!("length"in i))throw new TypeError(`Expected array, found ${typeof i}`);if(i.length!==t)throw new TypeError(`Expected array of length ${t}, found ${i.length}`)}})},option(t){return bcs$2.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new BcsType({name:`vector<${t.name}>`,read:n=>{const i=n.readULEB(),s=new Array(i);for(let a=0;a<i;a++)s[a]=t.read(n);return s},write:(n,i)=>{i.writeULEB(n.length);for(const s of n)t.write(s,i)},...e,validate:n=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(t,e){return new BcsType({name:`(${t.map(n=>n.name).join(", ")})`,serializedSize:n=>{let i=0;for(let s=0;s<t.length;s++){const a=t[s].serializedSize(n[s]);if(a==null)return null;i+=a}return i},read:n=>{const i=[];for(const s of t)i.push(s.read(n));return i},write:(n,i)=>{for(let s=0;s<t.length;s++)t[s].write(n[s],i)},...e,validate:n=>{var i;if((i=e==null?void 0:e.validate)==null||i.call(e,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${n.length}`)}})},struct(t,e,n){const i=Object.entries(e);return new BcsType({name:t,serializedSize:s=>{let a=0;for(const[l,f]of i){const p=f.serializedSize(s[l]);if(p==null)return null;a+=p}return a},read:s=>{const a={};for(const[l,f]of i)a[l]=f.read(s);return a},write:(s,a)=>{for(const[l,f]of i)f.write(s[l],a)},...n,validate:s=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,n){const i=Object.entries(e);return new BcsType({name:t,read:s=>{const a=s.readULEB(),l=i[a];if(!l)throw new TypeError(`Unknown value ${a} for enum ${t}`);const[f,p]=l;return{[f]:(p==null?void 0:p.read(s))??!0,$kind:f}},write:(s,a)=>{const[l,f]=Object.entries(s).filter(([p])=>Object.hasOwn(e,p))[0];for(let p=0;p<i.length;p++){const[C,B]=i[p];if(C===l){a.writeULEB(p),B==null||B.write(f,a);return}}},...n,validate:s=>{var f;if((f=n==null?void 0:n.validate)==null||f.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const a=Object.keys(s).filter(p=>s[p]!==void 0&&Object.hasOwn(e,p));if(a.length!==1)throw new TypeError(`Expected object with one key, but found ${a.length} for type ${t}}`);const[l]=a;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)}})},map(t,e){return bcs$2.vector(bcs$2.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n=>[...n.entries()],output:n=>{const i=new Map;for(const[s,a]of n)i.set(s,a);return i}})},lazy(t){return lazyBcsType(t)}},esm=Object.freeze(Object.defineProperty({__proto__:null,BcsReader,BcsType,BcsWriter,SerializedBcs,bcs:bcs$2,decodeStr,encodeStr,fromB58,fromB64,fromBase58,fromBase64,fromHEX,fromHex,isSerializedBcs,splitGenericParameters,toB58,toB64,toBase58,toBase64,toHEX,toHex:toHex$1},Symbol.toStringTag,{value:"Module"})),SUI_NS_NAME_REGEX$3=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,SUI_NS_DOMAIN_REGEX$3=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,MAX_SUI_NS_NAME_LENGTH$3=235;function isValidSuiNSName$3(t){return t.length>MAX_SUI_NS_NAME_LENGTH$3?!1:t.includes("@")?SUI_NS_NAME_REGEX$3.test(t):SUI_NS_DOMAIN_REGEX$3.test(t)}function normalizeSuiNSName$3(t,e="at"){const n=t.toLowerCase();let i;if(n.includes("@")){if(!SUI_NS_NAME_REGEX$3.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,a]=n.split("@");i=[...s?s.split("."):[],a]}else{if(!SUI_NS_DOMAIN_REGEX$3.test(n))throw new Error(`Invalid SuiNS name ${t}`);i=n.split(".").slice(0,-1)}return e==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const NAME_PATTERN$3=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,VERSION_REGEX$3=/^\d+$/,MAX_APP_SIZE$3=64,NAME_SEPARATOR$3="/",isValidNamedPackage$3=t=>{const e=t.split(NAME_SEPARATOR$3);if(e.length<2||e.length>3)return!1;const[n,i,s]=e;return s!==void 0&&!VERSION_REGEX$3.test(s)||!isValidSuiNSName$3(n)?!1:NAME_PATTERN$3.test(i)&&i.length<MAX_APP_SIZE$3},TX_DIGEST_LENGTH$3=32;function isValidTransactionDigest$3(t){try{return fromBase58(t).length===TX_DIGEST_LENGTH$3}catch{return!1}}const SUI_ADDRESS_LENGTH$3=32;function isValidSuiAddress$3(t){return isHex$5(t)&&getHexByteLength$3(t)===SUI_ADDRESS_LENGTH$3}function isValidSuiObjectId$3(t){return isValidSuiAddress$3(t)}function parseTypeTag$3(t){return t.includes("::")?parseStructTag$3(t):t}function parseStructTag$3(t){const[e,n]=t.split("::"),i=isValidNamedPackage$3(e),s=t.slice(e.length+n.length+4),a=s.includes("<")?s.slice(0,s.indexOf("<")):s,l=s.includes("<")?splitGenericParameters(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(f=>parseTypeTag$3(f.trim())):[];return{address:i?e:normalizeSuiAddress$3(e),module:n,name:a,typeParams:l}}function normalizeStructTag$3(t){const{address:e,module:n,name:i,typeParams:s}=typeof t=="string"?parseStructTag$3(t):t,a=(s==null?void 0:s.length)>0?`<${s.map(l=>typeof l=="string"?l:normalizeStructTag$3(l)).join(",")}>`:"";return`${e}::${n}::${i}${a}`}function normalizeSuiAddress$3(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(SUI_ADDRESS_LENGTH$3*2,"0")}`}function normalizeSuiObjectId$3(t,e=!1){return normalizeSuiAddress$3(t,e)}function isHex$5(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function getHexByteLength$3(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}BigInt(1e9);const MOVE_STDLIB_ADDRESS$3="0x1",SUI_FRAMEWORK_ADDRESS$3="0x2";normalizeSuiObjectId$3("0x6");const SUI_TYPE_ARG$3=`${SUI_FRAMEWORK_ADDRESS$3}::sui::SUI`;normalizeSuiObjectId$3("0x5");function anumber(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function isBytes$1(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function abytes$1(t,...e){if(!isBytes$1(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ahash(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber(t.outputLen),anumber(t.blockLen)}function aexists(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aoutput(t,e){abytes$1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function u32(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function createView(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function byteSwap(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const byteSwapIfBE=isLE?t=>t:t=>byteSwap(t);function byteSwap32(t){for(let e=0;e<t.length;e++)t[e]=byteSwap(t[e])}const hasHexBuiltin$1=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes$1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(t){if(abytes$1(t),hasHexBuiltin$1)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=hexes$1[t[n]];return e}function utf8ToBytes(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function toBytes(t){return typeof t=="string"&&(t=utf8ToBytes(t)),abytes$1(t),t}let Hash$1=class{clone(){return this._cloneInto()}};function checkOpts(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function wrapConstructor(t){const e=i=>t().update(toBytes(i)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function wrapConstructorWithOpts(t){const e=(i,s)=>t(s).update(toBytes(i)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=i=>t(i),e}function randomBytes(t=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(t));if(crypto$2&&typeof crypto$2.randomBytes=="function")return Uint8Array.from(crypto$2.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const SIGMA$1=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);class BLAKE extends Hash$1{constructor(e,n,i={},s,a,l){if(super(),this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,anumber(e),anumber(n),anumber(s),n<0||n>s)throw new Error("outputLen bigger than keyLen");if(i.key!==void 0&&(i.key.length<1||i.key.length>s))throw new Error("key length must be undefined or 1.."+s);if(i.salt!==void 0&&i.salt.length!==a)throw new Error("salt must be undefined or "+a);if(i.personalization!==void 0&&i.personalization.length!==l)throw new Error("personalization must be undefined or "+l);this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=u32(this.buffer)}update(e){aexists(this);const{blockLen:n,buffer:i,buffer32:s}=this;e=toBytes(e);const a=e.length,l=e.byteOffset,f=e.buffer;for(let p=0;p<a;){this.pos===n&&(isLE||byteSwap32(s),this.compress(s,0,!1),isLE||byteSwap32(s),this.pos=0);const C=Math.min(n-this.pos,a-p),B=l+p;if(C===n&&!(B%4)&&p+C<a){const N=new Uint32Array(f,B,Math.floor((a-p)/4));isLE||byteSwap32(N);for(let le=0;p+n<a;le+=s.length,p+=n)this.length+=n,this.compress(N,le,!1);isLE||byteSwap32(N);continue}i.set(e.subarray(p,p+C),this.pos),this.pos+=C,this.length+=C,p+=C}return this}digestInto(e){aexists(this),aoutput(e,this);const{pos:n,buffer32:i}=this;this.finished=!0,this.buffer.subarray(n).fill(0),isLE||byteSwap32(i),this.compress(i,0,!0),isLE||byteSwap32(i);const s=u32(e);this.get().forEach((a,l)=>s[l]=byteSwapIfBE(a))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const i=e.slice(0,n);return this.destroy(),i}_cloneInto(e){const{buffer:n,length:i,finished:s,destroyed:a,outputLen:l,pos:f}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.length=i,e.finished=s,e.destroyed=a,e.outputLen=l,e.buffer.set(n),e.pos=f,e}}const U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(t,e=!1){return e?{h:Number(t&U32_MASK64),l:Number(t>>_32n&U32_MASK64)}:{h:Number(t>>_32n&U32_MASK64)|0,l:Number(t&U32_MASK64)|0}}function split(t,e=!1){let n=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:a,l}=fromBig(t[s],e);[n[s],i[s]]=[a,l]}return[n,i]}const toBig=(t,e)=>BigInt(t>>>0)<<_32n|BigInt(e>>>0),shrSH=(t,e,n)=>t>>>n,shrSL=(t,e,n)=>t<<32-n|e>>>n,rotrSH=(t,e,n)=>t>>>n|e<<32-n,rotrSL=(t,e,n)=>t<<32-n|e>>>n,rotrBH=(t,e,n)=>t<<64-n|e>>>n-32,rotrBL=(t,e,n)=>t>>>n-32|e<<64-n,rotr32H=(t,e)=>e,rotr32L=(t,e)=>t,rotlSH=(t,e,n)=>t<<n|e>>>32-n,rotlSL=(t,e,n)=>e<<n|t>>>32-n,rotlBH=(t,e,n)=>e<<n-32|t>>>64-n,rotlBL=(t,e,n)=>t<<n-32|e>>>64-n;function add$3(t,e,n,i){const s=(e>>>0)+(i>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const add3L=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),add3H=(t,e,n,i)=>e+n+i+(t/2**32|0)|0,add4L=(t,e,n,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),add4H=(t,e,n,i,s)=>e+n+i+s+(t/2**32|0)|0,add5L=(t,e,n,i,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0)+(s>>>0),add5H=(t,e,n,i,s,a)=>e+n+i+s+a+(t/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add:add$3,add3L,add3H,add4L,add4H,add5H,add5L},B2B_IV=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),BBUF=new Uint32Array(32);function G1b(t,e,n,i,s,a){const l=s[a],f=s[a+1];let p=BBUF[2*t],C=BBUF[2*t+1],B=BBUF[2*e],N=BBUF[2*e+1],le=BBUF[2*n],Ee=BBUF[2*n+1],Ue=BBUF[2*i],ze=BBUF[2*i+1],Ze=u64.add3L(p,B,l);C=u64.add3H(Ze,C,N,f),p=Ze|0,{Dh:ze,Dl:Ue}={Dh:ze^C,Dl:Ue^p},{Dh:ze,Dl:Ue}={Dh:u64.rotr32H(ze,Ue),Dl:u64.rotr32L(ze,Ue)},{h:Ee,l:le}=u64.add(Ee,le,ze,Ue),{Bh:N,Bl:B}={Bh:N^Ee,Bl:B^le},{Bh:N,Bl:B}={Bh:u64.rotrSH(N,B,24),Bl:u64.rotrSL(N,B,24)},BBUF[2*t]=p,BBUF[2*t+1]=C,BBUF[2*e]=B,BBUF[2*e+1]=N,BBUF[2*n]=le,BBUF[2*n+1]=Ee,BBUF[2*i]=Ue,BBUF[2*i+1]=ze}function G2b(t,e,n,i,s,a){const l=s[a],f=s[a+1];let p=BBUF[2*t],C=BBUF[2*t+1],B=BBUF[2*e],N=BBUF[2*e+1],le=BBUF[2*n],Ee=BBUF[2*n+1],Ue=BBUF[2*i],ze=BBUF[2*i+1],Ze=u64.add3L(p,B,l);C=u64.add3H(Ze,C,N,f),p=Ze|0,{Dh:ze,Dl:Ue}={Dh:ze^C,Dl:Ue^p},{Dh:ze,Dl:Ue}={Dh:u64.rotrSH(ze,Ue,16),Dl:u64.rotrSL(ze,Ue,16)},{h:Ee,l:le}=u64.add(Ee,le,ze,Ue),{Bh:N,Bl:B}={Bh:N^Ee,Bl:B^le},{Bh:N,Bl:B}={Bh:u64.rotrBH(N,B,63),Bl:u64.rotrBL(N,B,63)},BBUF[2*t]=p,BBUF[2*t+1]=C,BBUF[2*e]=B,BBUF[2*e+1]=N,BBUF[2*n]=le,BBUF[2*n+1]=Ee,BBUF[2*i]=Ue,BBUF[2*i+1]=ze}class BLAKE2b extends BLAKE{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=B2B_IV[0]|0,this.v0h=B2B_IV[1]|0,this.v1l=B2B_IV[2]|0,this.v1h=B2B_IV[3]|0,this.v2l=B2B_IV[4]|0,this.v2h=B2B_IV[5]|0,this.v3l=B2B_IV[6]|0,this.v3h=B2B_IV[7]|0,this.v4l=B2B_IV[8]|0,this.v4h=B2B_IV[9]|0,this.v5l=B2B_IV[10]|0,this.v5h=B2B_IV[11]|0,this.v6l=B2B_IV[12]|0,this.v6h=B2B_IV[13]|0,this.v7l=B2B_IV[14]|0,this.v7h=B2B_IV[15]|0;const n=e.key?e.key.length:0;if(this.v0l^=this.outputLen|n<<8|65536|1<<24,e.salt){const i=u32(toBytes(e.salt));this.v4l^=byteSwapIfBE(i[0]),this.v4h^=byteSwapIfBE(i[1]),this.v5l^=byteSwapIfBE(i[2]),this.v5h^=byteSwapIfBE(i[3])}if(e.personalization){const i=u32(toBytes(e.personalization));this.v6l^=byteSwapIfBE(i[0]),this.v6h^=byteSwapIfBE(i[1]),this.v7l^=byteSwapIfBE(i[2]),this.v7h^=byteSwapIfBE(i[3])}if(e.key){const i=new Uint8Array(this.blockLen);i.set(toBytes(e.key)),this.update(i)}}get(){let{v0l:e,v0h:n,v1l:i,v1h:s,v2l:a,v2h:l,v3l:f,v3h:p,v4l:C,v4h:B,v5l:N,v5h:le,v6l:Ee,v6h:Ue,v7l:ze,v7h:Ze}=this;return[e,n,i,s,a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze]}set(e,n,i,s,a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze){this.v0l=e|0,this.v0h=n|0,this.v1l=i|0,this.v1h=s|0,this.v2l=a|0,this.v2h=l|0,this.v3l=f|0,this.v3h=p|0,this.v4l=C|0,this.v4h=B|0,this.v5l=N|0,this.v5h=le|0,this.v6l=Ee|0,this.v6h=Ue|0,this.v7l=ze|0,this.v7h=Ze|0}compress(e,n,i){this.get().forEach((p,C)=>BBUF[C]=p),BBUF.set(B2B_IV,16);let{h:s,l:a}=u64.fromBig(BigInt(this.length));BBUF[24]=B2B_IV[8]^a,BBUF[25]=B2B_IV[9]^s,i&&(BBUF[28]=~BBUF[28],BBUF[29]=~BBUF[29]);let l=0;const f=SIGMA$1;for(let p=0;p<12;p++)G1b(0,4,8,12,e,n+2*f[l++]),G2b(0,4,8,12,e,n+2*f[l++]),G1b(1,5,9,13,e,n+2*f[l++]),G2b(1,5,9,13,e,n+2*f[l++]),G1b(2,6,10,14,e,n+2*f[l++]),G2b(2,6,10,14,e,n+2*f[l++]),G1b(3,7,11,15,e,n+2*f[l++]),G2b(3,7,11,15,e,n+2*f[l++]),G1b(0,5,10,15,e,n+2*f[l++]),G2b(0,5,10,15,e,n+2*f[l++]),G1b(1,6,11,12,e,n+2*f[l++]),G2b(1,6,11,12,e,n+2*f[l++]),G1b(2,7,8,13,e,n+2*f[l++]),G2b(2,7,8,13,e,n+2*f[l++]),G1b(3,4,9,14,e,n+2*f[l++]),G2b(3,4,9,14,e,n+2*f[l++]);this.v0l^=BBUF[0]^BBUF[16],this.v0h^=BBUF[1]^BBUF[17],this.v1l^=BBUF[2]^BBUF[18],this.v1h^=BBUF[3]^BBUF[19],this.v2l^=BBUF[4]^BBUF[20],this.v2h^=BBUF[5]^BBUF[21],this.v3l^=BBUF[6]^BBUF[22],this.v3h^=BBUF[7]^BBUF[23],this.v4l^=BBUF[8]^BBUF[24],this.v4h^=BBUF[9]^BBUF[25],this.v5l^=BBUF[10]^BBUF[26],this.v5h^=BBUF[11]^BBUF[27],this.v6l^=BBUF[12]^BBUF[28],this.v6h^=BBUF[13]^BBUF[29],this.v7l^=BBUF[14]^BBUF[30],this.v7h^=BBUF[15]^BBUF[31],BBUF.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const blake2b$1=wrapConstructorWithOpts(t=>new BLAKE2b(t)),blake2b$2=Object.freeze(Object.defineProperty({__proto__:null,BLAKE2b,blake2b:blake2b$1},Symbol.toStringTag,{value:"Module"})),VECTOR_REGEX$3=/^vector<(.+)>$/,STRUCT_REGEX$3=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let TypeTagSerializer$3=class Ys{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(VECTOR_REGEX$3);if(i)return{vector:Ys.parseFromStr(i[1],n)};const s=e.match(STRUCT_REGEX$3);if(s)return{struct:{address:n?normalizeSuiAddress$3(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Ys.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return splitGenericParameters(e).map(i=>Ys.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Ys.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(Ys.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};function unsafe_u64$3(t){return bcs$2.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function optionEnum$3(t){return bcs$2.enum("Option",{None:null,Some:t})}const Address$3=bcs$2.bytes(SUI_ADDRESS_LENGTH$3).transform({validate:t=>{const e=typeof t=="string"?t:toHex$1(t);if(!e||!isValidSuiAddress$3(normalizeSuiAddress$3(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?fromHex(normalizeSuiAddress$3(t)):t,output:t=>normalizeSuiAddress$3(toHex$1(t))}),ObjectDigest$3=bcs$2.vector(bcs$2.u8()).transform({name:"ObjectDigest",input:t=>fromBase58(t),output:t=>toBase58(new Uint8Array(t)),validate:t=>{if(fromBase58(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),SuiObjectRef$3=bcs$2.struct("SuiObjectRef",{objectId:Address$3,version:bcs$2.u64(),digest:ObjectDigest$3}),SharedObjectRef$3=bcs$2.struct("SharedObjectRef",{objectId:Address$3,initialSharedVersion:bcs$2.u64(),mutable:bcs$2.bool()}),ObjectArg$c=bcs$2.enum("ObjectArg",{ImmOrOwnedObject:SuiObjectRef$3,SharedObject:SharedObjectRef$3,Receiving:SuiObjectRef$3}),Owner$3=bcs$2.enum("Owner",{AddressOwner:Address$3,ObjectOwner:Address$3,Shared:bcs$2.struct("Shared",{initialSharedVersion:bcs$2.u64()}),Immutable:null,ConsensusV2:bcs$2.struct("ConsensusV2",{authenticator:bcs$2.enum("Authenticator",{SingleOwner:Address$3}),startVersion:bcs$2.u64()})}),CallArg$9=bcs$2.enum("CallArg",{Pure:bcs$2.struct("Pure",{bytes:bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})}),Object:ObjectArg$c}),InnerTypeTag$3=bcs$2.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:bcs$2.lazy(()=>InnerTypeTag$3),struct:bcs$2.lazy(()=>StructTag$6),u16:null,u32:null,u256:null}),TypeTag$6=InnerTypeTag$3.transform({input:t=>typeof t=="string"?TypeTagSerializer$3.parseFromStr(t,!0):t,output:t=>TypeTagSerializer$3.tagToString(t)}),Argument$9=bcs$2.enum("Argument",{GasCoin:null,Input:bcs$2.u16(),Result:bcs$2.u16(),NestedResult:bcs$2.tuple([bcs$2.u16(),bcs$2.u16()])}),ProgrammableMoveCall$9=bcs$2.struct("ProgrammableMoveCall",{package:Address$3,module:bcs$2.string(),function:bcs$2.string(),typeArguments:bcs$2.vector(TypeTag$6),arguments:bcs$2.vector(Argument$9)}),Command$9=bcs$2.enum("Command",{MoveCall:ProgrammableMoveCall$9,TransferObjects:bcs$2.struct("TransferObjects",{objects:bcs$2.vector(Argument$9),address:Argument$9}),SplitCoins:bcs$2.struct("SplitCoins",{coin:Argument$9,amounts:bcs$2.vector(Argument$9)}),MergeCoins:bcs$2.struct("MergeCoins",{destination:Argument$9,sources:bcs$2.vector(Argument$9)}),Publish:bcs$2.struct("Publish",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$3)}),MakeMoveVec:bcs$2.struct("MakeMoveVec",{type:optionEnum$3(TypeTag$6).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:bcs$2.vector(Argument$9)}),Upgrade:bcs$2.struct("Upgrade",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$3),package:Address$3,ticket:Argument$9})}),ProgrammableTransaction$3=bcs$2.struct("ProgrammableTransaction",{inputs:bcs$2.vector(CallArg$9),commands:bcs$2.vector(Command$9)}),TransactionKind$3=bcs$2.enum("TransactionKind",{ProgrammableTransaction:ProgrammableTransaction$3,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),TransactionExpiration$c=bcs$2.enum("TransactionExpiration",{None:null,Epoch:unsafe_u64$3()}),StructTag$6=bcs$2.struct("StructTag",{address:Address$3,module:bcs$2.string(),name:bcs$2.string(),typeParams:bcs$2.vector(InnerTypeTag$3)}),GasData$9=bcs$2.struct("GasData",{payment:bcs$2.vector(SuiObjectRef$3),owner:Address$3,price:bcs$2.u64(),budget:bcs$2.u64()}),TransactionDataV1$3=bcs$2.struct("TransactionDataV1",{kind:TransactionKind$3,sender:Address$3,gasData:GasData$9,expiration:TransactionExpiration$c}),TransactionData$6=bcs$2.enum("TransactionData",{V1:TransactionDataV1$3}),IntentScope$3=bcs$2.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),IntentVersion$3=bcs$2.enum("IntentVersion",{V0:null}),AppId$3=bcs$2.enum("AppId",{Sui:null}),Intent$3=bcs$2.struct("Intent",{scope:IntentScope$3,version:IntentVersion$3,appId:AppId$3});function IntentMessage$3(t){return bcs$2.struct(`IntentMessage<${t.name}>`,{intent:Intent$3,value:t})}const CompressedSignature$3=bcs$2.enum("CompressedSignature",{ED25519:bcs$2.fixedArray(64,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(64,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(64,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),PublicKey$4=bcs$2.enum("PublicKey",{ED25519:bcs$2.fixedArray(32,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(33,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(33,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),MultiSigPkMap$3=bcs$2.struct("MultiSigPkMap",{pubKey:PublicKey$4,weight:bcs$2.u8()}),MultiSigPublicKey$3=bcs$2.struct("MultiSigPublicKey",{pk_map:bcs$2.vector(MultiSigPkMap$3),threshold:bcs$2.u16()}),MultiSig$3=bcs$2.struct("MultiSig",{sigs:bcs$2.vector(CompressedSignature$3),bitmap:bcs$2.u16(),multisig_pk:MultiSigPublicKey$3}),base64String$3=bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))}),SenderSignedTransaction$3=bcs$2.struct("SenderSignedTransaction",{intentMessage:IntentMessage$3(TransactionData$6),txSignatures:bcs$2.vector(base64String$3)}),SenderSignedData$3=bcs$2.vector(SenderSignedTransaction$3,{name:"SenderSignedData"}),PasskeyAuthenticator$3=bcs$2.struct("PasskeyAuthenticator",{authenticatorData:bcs$2.vector(bcs$2.u8()),clientDataJson:bcs$2.string(),userSignature:bcs$2.vector(bcs$2.u8())}),PackageUpgradeError$3=bcs$2.enum("PackageUpgradeError",{UnableToFetchPackage:bcs$2.struct("UnableToFetchPackage",{packageId:Address$3}),NotAPackage:bcs$2.struct("NotAPackage",{objectId:Address$3}),IncompatibleUpgrade:null,DigestDoesNotMatch:bcs$2.struct("DigestDoesNotMatch",{digest:bcs$2.vector(bcs$2.u8())}),UnknownUpgradePolicy:bcs$2.struct("UnknownUpgradePolicy",{policy:bcs$2.u8()}),PackageIDDoesNotMatch:bcs$2.struct("PackageIDDoesNotMatch",{packageId:Address$3,ticketId:Address$3})}),ModuleId$3=bcs$2.struct("ModuleId",{address:Address$3,name:bcs$2.string()}),MoveLocation$3=bcs$2.struct("MoveLocation",{module:ModuleId$3,function:bcs$2.u16(),instruction:bcs$2.u16(),functionName:bcs$2.option(bcs$2.string())}),CommandArgumentError$3=bcs$2.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:bcs$2.struct("IndexOutOfBounds",{idx:bcs$2.u16()}),SecondaryIndexOutOfBounds:bcs$2.struct("SecondaryIndexOutOfBounds",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidResultArity:bcs$2.struct("InvalidResultArity",{resultIdx:bcs$2.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),TypeArgumentError$3=bcs$2.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),ExecutionFailureStatus$3=bcs$2.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:bcs$2.struct("MoveObjectTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),MovePackageTooBig:bcs$2.struct("MovePackageTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),CircularObjectOwnership:bcs$2.struct("CircularObjectOwnership",{object:Address$3}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:bcs$2.option(MoveLocation$3),MoveAbort:bcs$2.tuple([MoveLocation$3,bcs$2.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:bcs$2.struct("CommandArgumentError",{argIdx:bcs$2.u16(),kind:CommandArgumentError$3}),TypeArgumentError:bcs$2.struct("TypeArgumentError",{argumentIdx:bcs$2.u16(),kind:TypeArgumentError$3}),UnusedValueWithoutDrop:bcs$2.struct("UnusedValueWithoutDrop",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidPublicFunctionReturnType:bcs$2.struct("InvalidPublicFunctionReturnType",{idx:bcs$2.u16()}),InvalidTransferObject:null,EffectsTooLarge:bcs$2.struct("EffectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:bcs$2.struct("PackageUpgradeError",{upgradeError:PackageUpgradeError$3}),WrittenObjectsTooLarge:bcs$2.struct("WrittenObjectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:bcs$2.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:bcs$2.vector(Address$3)}),AddressDeniedForCoin:bcs$2.struct("AddressDeniedForCoin",{address:Address$3,coinType:bcs$2.string()}),CoinTypeGlobalPause:bcs$2.struct("CoinTypeGlobalPause",{coinType:bcs$2.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ExecutionStatus$3=bcs$2.enum("ExecutionStatus",{Success:null,Failed:bcs$2.struct("ExecutionFailed",{error:ExecutionFailureStatus$3,command:bcs$2.option(bcs$2.u64())})}),GasCostSummary$3=bcs$2.struct("GasCostSummary",{computationCost:bcs$2.u64(),storageCost:bcs$2.u64(),storageRebate:bcs$2.u64(),nonRefundableStorageFee:bcs$2.u64()}),TransactionEffectsV1$3=bcs$2.struct("TransactionEffectsV1",{status:ExecutionStatus$3,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$3,modifiedAtVersions:bcs$2.vector(bcs$2.tuple([Address$3,bcs$2.u64()])),sharedObjects:bcs$2.vector(SuiObjectRef$3),transactionDigest:ObjectDigest$3,created:bcs$2.vector(bcs$2.tuple([SuiObjectRef$3,Owner$3])),mutated:bcs$2.vector(bcs$2.tuple([SuiObjectRef$3,Owner$3])),unwrapped:bcs$2.vector(bcs$2.tuple([SuiObjectRef$3,Owner$3])),deleted:bcs$2.vector(SuiObjectRef$3),unwrappedThenDeleted:bcs$2.vector(SuiObjectRef$3),wrapped:bcs$2.vector(SuiObjectRef$3),gasObject:bcs$2.tuple([SuiObjectRef$3,Owner$3]),eventsDigest:bcs$2.option(ObjectDigest$3),dependencies:bcs$2.vector(ObjectDigest$3)}),VersionDigest$3=bcs$2.tuple([bcs$2.u64(),ObjectDigest$3]),ObjectIn$3=bcs$2.enum("ObjectIn",{NotExist:null,Exist:bcs$2.tuple([VersionDigest$3,Owner$3])}),ObjectOut$3=bcs$2.enum("ObjectOut",{NotExist:null,ObjectWrite:bcs$2.tuple([ObjectDigest$3,Owner$3]),PackageWrite:VersionDigest$3}),IDOperation$3=bcs$2.enum("IDOperation",{None:null,Created:null,Deleted:null}),EffectsObjectChange$3=bcs$2.struct("EffectsObjectChange",{inputState:ObjectIn$3,outputState:ObjectOut$3,idOperation:IDOperation$3}),UnchangedSharedKind$3=bcs$2.enum("UnchangedSharedKind",{ReadOnlyRoot:VersionDigest$3,MutateDeleted:bcs$2.u64(),ReadDeleted:bcs$2.u64(),Cancelled:bcs$2.u64(),PerEpochConfig:null}),TransactionEffectsV2$3=bcs$2.struct("TransactionEffectsV2",{status:ExecutionStatus$3,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$3,transactionDigest:ObjectDigest$3,gasObjectIndex:bcs$2.option(bcs$2.u32()),eventsDigest:bcs$2.option(ObjectDigest$3),dependencies:bcs$2.vector(ObjectDigest$3),lamportVersion:bcs$2.u64(),changedObjects:bcs$2.vector(bcs$2.tuple([Address$3,EffectsObjectChange$3])),unchangedSharedObjects:bcs$2.vector(bcs$2.tuple([Address$3,UnchangedSharedKind$3])),auxDataDigest:bcs$2.option(ObjectDigest$3)}),TransactionEffects$3=bcs$2.enum("TransactionEffects",{V1:TransactionEffectsV1$3,V2:TransactionEffectsV2$3});function pureBcsSchemaFromTypeName$3(t){switch(t){case"u8":return bcs$2.u8();case"u16":return bcs$2.u16();case"u32":return bcs$2.u32();case"u64":return bcs$2.u64();case"u128":return bcs$2.u128();case"u256":return bcs$2.u256();case"bool":return bcs$2.bool();case"string":return bcs$2.string();case"id":case"address":return Address$3}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,i]=e.slice(1);return n==="vector"?bcs$2.vector(pureBcsSchemaFromTypeName$3(i)):bcs$2.option(pureBcsSchemaFromTypeName$3(i))}throw new Error(`Invalid Pure type name: ${t}`)}const suiBcs$3={...bcs$2,U8:bcs$2.u8(),U16:bcs$2.u16(),U32:bcs$2.u32(),U64:bcs$2.u64(),U128:bcs$2.u128(),U256:bcs$2.u256(),ULEB128:bcs$2.uleb128(),Bool:bcs$2.bool(),String:bcs$2.string(),Address:Address$3,AppId:AppId$3,Argument:Argument$9,CallArg:CallArg$9,Command:Command$9,CompressedSignature:CompressedSignature$3,GasData:GasData$9,Intent:Intent$3,IntentMessage:IntentMessage$3,IntentScope:IntentScope$3,IntentVersion:IntentVersion$3,MultiSig:MultiSig$3,MultiSigPkMap:MultiSigPkMap$3,MultiSigPublicKey:MultiSigPublicKey$3,ObjectArg:ObjectArg$c,ObjectDigest:ObjectDigest$3,Owner:Owner$3,PasskeyAuthenticator:PasskeyAuthenticator$3,ProgrammableMoveCall:ProgrammableMoveCall$9,ProgrammableTransaction:ProgrammableTransaction$3,PublicKey:PublicKey$4,SenderSignedData:SenderSignedData$3,SenderSignedTransaction:SenderSignedTransaction$3,SharedObjectRef:SharedObjectRef$3,StructTag:StructTag$6,SuiObjectRef:SuiObjectRef$3,TransactionData:TransactionData$6,TransactionDataV1:TransactionDataV1$3,TransactionEffects:TransactionEffects$3,TransactionExpiration:TransactionExpiration$c,TransactionKind:TransactionKind$3,TypeTag:TypeTag$6};function deriveDynamicFieldID$3(t,e,n){const i=suiBcs$3.Address.serialize(t).toBytes(),s=suiBcs$3.TypeTag.serialize(e).toBytes(),a=suiBcs$3.u64().serialize(n.length).toBytes(),l=blake2b$1.create({dkLen:32});return l.update(new Uint8Array([240])),l.update(i),l.update(a),l.update(n),l.update(s),`0x${toHex$1(l.digest().slice(0,32))}`}var __classPrivateFieldGet$1=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},__classPrivateFieldSet$1=function(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},_AppReadyEvent_detail;let wallets;const registeredWalletsSet=new Set;function addRegisteredWallet(t){cachedWalletsArray=void 0,registeredWalletsSet.add(t)}function removeRegisteredWallet(t){cachedWalletsArray=void 0,registeredWalletsSet.delete(t)}const listeners={};function getWallets(){if(wallets||(wallets=Object.freeze({register,get:get$3,on}),typeof window>"u"))return wallets;const t=Object.freeze({register});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new AppReadyEvent(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return wallets}function register(...t){var e;return t=t.filter(n=>!registeredWalletsSet.has(n)),t.length?(t.forEach(n=>addRegisteredWallet(n)),(e=listeners.register)==null||e.forEach(n=>guard(()=>n(...t))),function(){var i;t.forEach(s=>removeRegisteredWallet(s)),(i=listeners.unregister)==null||i.forEach(s=>guard(()=>s(...t)))}):()=>{}}let cachedWalletsArray;function get$3(){return cachedWalletsArray||(cachedWalletsArray=[...registeredWalletsSet]),cachedWalletsArray}function on(t,e){var n;return(n=listeners[t])!=null&&n.push(e)||(listeners[t]=[e]),function(){var s;listeners[t]=(s=listeners[t])==null?void 0:s.filter(a=>e!==a)}}function guard(t){try{t()}catch(e){console.error(e)}}class AppReadyEvent extends Event{get detail(){return __classPrivateFieldGet$1(this,_AppReadyEvent_detail,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),_AppReadyEvent_detail.set(this,void 0),__classPrivateFieldSet$1(this,_AppReadyEvent_detail,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}_AppReadyEvent_detail=new WeakMap;var __classPrivateFieldGet=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},__classPrivateFieldSet=function(t,e,n,i,s){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},_ReadonlyWalletAccount_address,_ReadonlyWalletAccount_publicKey,_ReadonlyWalletAccount_chains,_ReadonlyWalletAccount_features,_ReadonlyWalletAccount_label,_ReadonlyWalletAccount_icon;class ReadonlyWalletAccount{get address(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_address,"f")}get publicKey(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_publicKey,"f").slice()}get chains(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_chains,"f").slice()}get features(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_features,"f").slice()}get label(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_label,"f")}get icon(){return __classPrivateFieldGet(this,_ReadonlyWalletAccount_icon,"f")}constructor(e){_ReadonlyWalletAccount_address.set(this,void 0),_ReadonlyWalletAccount_publicKey.set(this,void 0),_ReadonlyWalletAccount_chains.set(this,void 0),_ReadonlyWalletAccount_features.set(this,void 0),_ReadonlyWalletAccount_label.set(this,void 0),_ReadonlyWalletAccount_icon.set(this,void 0),new.target===ReadonlyWalletAccount&&Object.freeze(this),__classPrivateFieldSet(this,_ReadonlyWalletAccount_address,e.address,"f"),__classPrivateFieldSet(this,_ReadonlyWalletAccount_publicKey,e.publicKey.slice(),"f"),__classPrivateFieldSet(this,_ReadonlyWalletAccount_chains,e.chains.slice(),"f"),__classPrivateFieldSet(this,_ReadonlyWalletAccount_features,e.features.slice(),"f"),__classPrivateFieldSet(this,_ReadonlyWalletAccount_label,e.label,"f"),__classPrivateFieldSet(this,_ReadonlyWalletAccount_icon,e.icon,"f")}}_ReadonlyWalletAccount_address=new WeakMap,_ReadonlyWalletAccount_publicKey=new WeakMap,_ReadonlyWalletAccount_chains=new WeakMap,_ReadonlyWalletAccount_features=new WeakMap,_ReadonlyWalletAccount_label=new WeakMap,_ReadonlyWalletAccount_icon=new WeakMap;const OBJECT_MODULE_NAME$2="object",ID_STRUCT_NAME$2="ID",STD_ASCII_MODULE_NAME$2="ascii",STD_ASCII_STRUCT_NAME$2="String",STD_UTF8_MODULE_NAME$2="string",STD_UTF8_STRUCT_NAME$2="String",STD_OPTION_MODULE_NAME$2="option",STD_OPTION_STRUCT_NAME$2="Option";function isTxContext$2(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&normalizeSuiAddress$3(e.package)===normalizeSuiAddress$3("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function getPureBcsSchema$2(t){if(typeof t=="string")switch(t){case"address":return suiBcs$3.Address;case"bool":return suiBcs$3.Bool;case"u8":return suiBcs$3.U8;case"u16":return suiBcs$3.U16;case"u32":return suiBcs$3.U32;case"u64":return suiBcs$3.U64;case"u128":return suiBcs$3.U128;case"u256":return suiBcs$3.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return suiBcs$3.vector(suiBcs$3.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=getPureBcsSchema$2(t.vector);return e?suiBcs$3.vector(e):null}if("datatype"in t){const e=normalizeSuiAddress$3(t.datatype.package);if(e===normalizeSuiAddress$3(MOVE_STDLIB_ADDRESS$3)){if(t.datatype.module===STD_ASCII_MODULE_NAME$2&&t.datatype.type===STD_ASCII_STRUCT_NAME$2||t.datatype.module===STD_UTF8_MODULE_NAME$2&&t.datatype.type===STD_UTF8_STRUCT_NAME$2)return suiBcs$3.String;if(t.datatype.module===STD_OPTION_MODULE_NAME$2&&t.datatype.type===STD_OPTION_STRUCT_NAME$2){const n=getPureBcsSchema$2(t.datatype.typeParameters[0]);return n?suiBcs$3.vector(n):null}}if(e===normalizeSuiAddress$3(SUI_FRAMEWORK_ADDRESS$3)&&t.datatype.module===OBJECT_MODULE_NAME$2&&t.datatype.type===ID_STRUCT_NAME$2)return suiBcs$3.Address}return null}function normalizedTypeToMoveTypeSignature$2(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:normalizedTypeToMoveTypeSignatureBody$2(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:normalizedTypeToMoveTypeSignatureBody$2(t.MutableReference)}:{ref:null,body:normalizedTypeToMoveTypeSignatureBody$2(t)}}function normalizedTypeToMoveTypeSignatureBody$2(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:normalizedTypeToMoveTypeSignatureBody$2(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(normalizedTypeToMoveTypeSignatureBody$2)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function Pure$2(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?toBase64(t):t.toBase64()}}}const Inputs$2={Pure:Pure$2,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:normalizeSuiAddress$3(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:normalizeSuiAddress$3(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:normalizeSuiAddress$3(t)}}}}};var UUID_REGEX=/^[\da-f]{8}(?:-[\da-f]{4}){3}-[\da-f]{12}$/iu,store$e;function getGlobalConfig(t){return{lang:(t==null?void 0:t.lang)??(store$e==null?void 0:store$e.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(store$e==null?void 0:store$e.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(store$e==null?void 0:store$e.abortPipeEarly)}}var store2;function getGlobalMessage(t){return store2==null?void 0:store2.get(t)}var store3;function getSchemaMessage(t){return store3==null?void 0:store3.get(t)}var store4;function getSpecificMessage(t,e){var n;return(n=store4==null?void 0:store4.get(t))==null?void 0:n.get(e)}function _stringify(t){var n,i;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((i=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor)==null?void 0:i.name))??"null":e}function _addIssue(t,e,n,i,s){const a=s&&"input"in s?s.input:n.value,l=(s==null?void 0:s.expected)??t.expects??null,f=(s==null?void 0:s.received)??_stringify(a),p={kind:t.kind,type:t.type,input:a,expected:l,received:f,message:`Invalid ${e}: ${l?`Expected ${l} but r`:"R"}eceived ${f}`,requirement:t.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:i.lang,abortEarly:i.abortEarly,abortPipeEarly:i.abortPipeEarly},C=t.kind==="schema",B=(s==null?void 0:s.message)??t.message??getSpecificMessage(t.reference,p.lang)??(C?getSchemaMessage(p.lang):null)??i.message??getGlobalMessage(p.lang);B&&(p.message=typeof B=="function"?B(p):B),C&&(n.typed=!1),n.issues?n.issues.push(p):n.issues=[p]}function _isValidObjectKey(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var ValiError=class extends Error{constructor(e){super(e[0].message);Or(this,"issues");this.name="ValiError",this.issues=e}};function check(t,e){return{kind:"validation",type:"check",reference:check,async:!1,expects:null,requirement:t,message:e,_run(n,i){return n.typed&&!this.requirement(n.value)&&_addIssue(this,"input",n,i),n}}}function integer(t){return{kind:"validation",type:"integer",reference:integer,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,n){return e.typed&&!this.requirement(e.value)&&_addIssue(this,"integer",e,n),e}}}function transform$1(t){return{kind:"transformation",type:"transform",reference:transform$1,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function uuid(t){return{kind:"validation",type:"uuid",reference:uuid,async:!1,expects:null,requirement:UUID_REGEX,message:t,_run(e,n){return e.typed&&!this.requirement.test(e.value)&&_addIssue(this,"UUID",e,n),e}}}function getDefault(t,e,n){return typeof t.default=="function"?t.default(e,n):t.default}function is$2(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function array(t,e){return{kind:"schema",type:"array",reference:array,expects:"Array",async:!1,item:t,message:e,_run(n,i){var a;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let l=0;l<s.length;l++){const f=s[l],p=this.item._run({typed:!1,value:f},i);if(p.issues){const C={type:"array",origin:"value",input:s,key:l,value:f};for(const B of p.issues)B.path?B.path.unshift(C):B.path=[C],(a=n.issues)==null||a.push(B);if(n.issues||(n.issues=p.issues),i.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),n.value.push(p.value)}}else _addIssue(this,"type",n,i);return n}}}function bigint(t){return{kind:"schema",type:"bigint",reference:bigint,expects:"bigint",async:!1,message:t,_run(e,n){return typeof e.value=="bigint"?e.typed=!0:_addIssue(this,"type",e,n),e}}}function boolean(t){return{kind:"schema",type:"boolean",reference:boolean,expects:"boolean",async:!1,message:t,_run(e,n){return typeof e.value=="boolean"?e.typed=!0:_addIssue(this,"type",e,n),e}}}function lazy(t){return{kind:"schema",type:"lazy",reference:lazy,expects:"unknown",async:!1,getter:t,_run(e,n){return this.getter(e.value)._run(e,n)}}}function literal(t,e){return{kind:"schema",type:"literal",reference:literal,expects:_stringify(t),async:!1,literal:t,message:e,_run(n,i){return n.value===this.literal?n.typed=!0:_addIssue(this,"type",n,i),n}}}function nullable(t,...e){const n={kind:"schema",type:"nullable",reference:nullable,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(i,s){return i.value===null&&("default"in this&&(i.value=getDefault(this,i,s)),i.value===null)?(i.typed=!0,i):this.wrapped._run(i,s)}};return 0 in e&&(n.default=e[0]),n}function nullish(t,...e){const n={kind:"schema",type:"nullish",reference:nullish,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(i,s){return(i.value===null||i.value===void 0)&&("default"in this&&(i.value=getDefault(this,i,s)),i.value===null||i.value===void 0)?(i.typed=!0,i):this.wrapped._run(i,s)}};return 0 in e&&(n.default=e[0]),n}function number(t){return{kind:"schema",type:"number",reference:number,expects:"number",async:!1,message:t,_run(e,n){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:_addIssue(this,"type",e,n),e}}}function object$1(t,e){return{kind:"schema",type:"object",reference:object$1,expects:"Object",async:!1,entries:t,message:e,_run(n,i){var a;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const l in this.entries){const f=s[l],p=this.entries[l]._run({typed:!1,value:f},i);if(p.issues){const C={type:"object",origin:"value",input:s,key:l,value:f};for(const B of p.issues)B.path?B.path.unshift(C):B.path=[C],(a=n.issues)==null||a.push(B);if(n.issues||(n.issues=p.issues),i.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),(p.value!==void 0||l in s)&&(n.value[l]=p.value)}}else _addIssue(this,"type",n,i);return n}}}function optional(t,...e){const n={kind:"schema",type:"optional",reference:optional,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(i,s){return i.value===void 0&&("default"in this&&(i.value=getDefault(this,i,s)),i.value===void 0)?(i.typed=!0,i):this.wrapped._run(i,s)}};return 0 in e&&(n.default=e[0]),n}function record(t,e,n){return{kind:"schema",type:"record",reference:record,expects:"Object",async:!1,key:t,value:e,message:n,_run(i,s){var l,f;const a=i.value;if(a&&typeof a=="object"){i.typed=!0,i.value={};for(const p in a)if(_isValidObjectKey(a,p)){const C=a[p],B=this.key._run({typed:!1,value:p},s);if(B.issues){const le={type:"object",origin:"key",input:a,key:p,value:C};for(const Ee of B.issues)Ee.path=[le],(l=i.issues)==null||l.push(Ee);if(i.issues||(i.issues=B.issues),s.abortEarly){i.typed=!1;break}}const N=this.value._run({typed:!1,value:C},s);if(N.issues){const le={type:"object",origin:"value",input:a,key:p,value:C};for(const Ee of N.issues)Ee.path?Ee.path.unshift(le):Ee.path=[le],(f=i.issues)==null||f.push(Ee);if(i.issues||(i.issues=N.issues),s.abortEarly){i.typed=!1;break}}(!B.typed||!N.typed)&&(i.typed=!1),B.typed&&(i.value[B.value]=N.value)}}else _addIssue(this,"type",i,s);return i}}}function string(t){return{kind:"schema",type:"string",reference:string,expects:"string",async:!1,message:t,_run(e,n){return typeof e.value=="string"?e.typed=!0:_addIssue(this,"type",e,n),e}}}function tuple(t,e){return{kind:"schema",type:"tuple",reference:tuple,expects:"Array",async:!1,items:t,message:e,_run(n,i){var a;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let l=0;l<this.items.length;l++){const f=s[l],p=this.items[l]._run({typed:!1,value:f},i);if(p.issues){const C={type:"array",origin:"value",input:s,key:l,value:f};for(const B of p.issues)B.path?B.path.unshift(C):B.path=[C],(a=n.issues)==null||a.push(B);if(n.issues||(n.issues=p.issues),i.abortEarly){n.typed=!1;break}}p.typed||(n.typed=!1),n.value.push(p.value)}}else _addIssue(this,"type",n,i);return n}}}function _subIssues(t){let e;if(t)for(const n of t)e?e.push(...n.issues):e=n.issues;return e}function union(t,e){return{kind:"schema",type:"union",reference:union,expects:[...new Set(t.map(n=>n.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(n,i){let s,a,l;for(const f of this.options){const p=f._run({typed:!1,value:n.value},i);if(p.typed)if(p.issues)a?a.push(p):a=[p];else{s=p;break}else l?l.push(p):l=[p]}if(s)return s;if(a){if(a.length===1)return a[0];_addIssue(this,"type",n,i,{issues:_subIssues(a)}),n.typed=!0}else{if((l==null?void 0:l.length)===1)return l[0];_addIssue(this,"type",n,i,{issues:_subIssues(l)})}return n}}}function unknown(){return{kind:"schema",type:"unknown",reference:unknown,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function _discriminators(t,e,n=new Set){for(const i of e)i.type==="variant"?_discriminators(t,i.options,n):n.add(i.entries[t].expects);return n}function variant(t,e,n){let i;return{kind:"schema",type:"variant",reference:variant,expects:"Object",async:!1,key:t,options:e,message:n,_run(s,a){const l=s.value;if(l&&typeof l=="object"){const f=l[this.key];if(this.key in l){let p;for(const C of this.options)if(C.type==="variant"||!C.entries[this.key]._run({typed:!1,value:f},a).issues){const B=C._run({typed:!1,value:l},a);if(!B.issues)return B;(!p||!p.typed&&B.typed)&&(p=B)}if(p)return p}i||(i=[..._discriminators(this.key,this.options)].join(" | ")||"never"),_addIssue(this,"type",s,a,{input:f,expected:i,path:[{type:"object",origin:"value",input:l,key:this.key,value:f}]})}else _addIssue(this,"type",s,a);return s}}}function parse(t,e,n){const i=t._run({typed:!1,value:e},getGlobalConfig(n));if(i.issues)throw new ValiError(i.issues);return i.value}function pipe(...t){return{...t[0],pipe:t,_run(e,n){for(let i=0;i<t.length;i++){if(e.issues&&(t[i].kind==="schema"||t[i].kind==="transformation")){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=t[i]._run(e,n))}return e}}}function safeParse(t,e,n){const i=t._run({typed:!1,value:e},getGlobalConfig(n));return{typed:i.typed,success:!i.issues,output:i.value,issues:i.issues}}function safeEnum$2(t){const e=Object.entries(t).map(([n,i])=>object$1({[n]:i}));return pipe(union(e),transform$1(n=>({...n,$kind:Object.keys(n)[0]})))}const SuiAddress$2=pipe(string(),transform$1(t=>normalizeSuiAddress$3(t)),check(isValidSuiAddress$3)),ObjectID$2=SuiAddress$2,BCSBytes$2=string(),JsonU64$2=pipe(union([string(),pipe(number(),integer())]),check(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),ObjectRef$5=object$1({objectId:SuiAddress$2,version:JsonU64$2,digest:string()}),Argument$8=pipe(union([object$1({GasCoin:literal(!0)}),object$1({Input:pipe(number(),integer()),type:optional(literal("pure"))}),object$1({Input:pipe(number(),integer()),type:optional(literal("object"))}),object$1({Result:pipe(number(),integer())}),object$1({NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])})]),transform$1(t=>({...t,$kind:Object.keys(t)[0]}))),GasData$8=object$1({budget:nullable(JsonU64$2),price:nullable(JsonU64$2),owner:nullable(SuiAddress$2),payment:nullable(array(ObjectRef$5))}),OpenMoveTypeSignatureBody$2=union([literal("address"),literal("bool"),literal("u8"),literal("u16"),literal("u32"),literal("u64"),literal("u128"),literal("u256"),object$1({vector:lazy(()=>OpenMoveTypeSignatureBody$2)}),object$1({datatype:object$1({package:string(),module:string(),type:string(),typeParameters:array(lazy(()=>OpenMoveTypeSignatureBody$2))})}),object$1({typeParameter:pipe(number(),integer())})]),OpenMoveTypeSignature$2=object$1({ref:nullable(union([literal("&"),literal("&mut")])),body:OpenMoveTypeSignatureBody$2}),ProgrammableMoveCall$8=object$1({package:ObjectID$2,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$8),_argumentTypes:optional(nullable(array(OpenMoveTypeSignature$2)))}),$Intent$5=object$1({name:string(),inputs:record(string(),union([Argument$8,array(Argument$8)])),data:record(string(),unknown())}),Command$8=safeEnum$2({MoveCall:ProgrammableMoveCall$8,TransferObjects:object$1({objects:array(Argument$8),address:Argument$8}),SplitCoins:object$1({coin:Argument$8,amounts:array(Argument$8)}),MergeCoins:object$1({destination:Argument$8,sources:array(Argument$8)}),Publish:object$1({modules:array(BCSBytes$2),dependencies:array(ObjectID$2)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$8)}),Upgrade:object$1({modules:array(BCSBytes$2),dependencies:array(ObjectID$2),package:ObjectID$2,ticket:Argument$8}),$Intent:$Intent$5}),ObjectArg$b=safeEnum$2({ImmOrOwnedObject:ObjectRef$5,SharedObject:object$1({objectId:ObjectID$2,initialSharedVersion:JsonU64$2,mutable:boolean()}),Receiving:ObjectRef$5}),CallArg$8=safeEnum$2({Object:ObjectArg$b,Pure:object$1({bytes:BCSBytes$2}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID$2,version:optional(nullable(JsonU64$2)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64$2))})}),NormalizedCallArg$5=safeEnum$2({Object:ObjectArg$b,Pure:object$1({bytes:BCSBytes$2})}),TransactionExpiration$b=safeEnum$2({None:literal(!0),Epoch:JsonU64$2}),TransactionData$5=object$1({version:literal(2),sender:nullish(SuiAddress$2),expiration:nullish(TransactionExpiration$b),gasData:GasData$8,inputs:array(CallArg$8),commands:array(Command$8)}),Commands$2={MoveCall(t){const[e,n="",i=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:i,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>parse(Argument$8,n)),address:parse(Argument$8,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:parse(Argument$8,t),amounts:e.map(n=>parse(Argument$8,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:parse(Argument$8,t),sources:e.map(n=>parse(Argument$8,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:toBase64(new Uint8Array(n))),dependencies:e.map(n=>normalizeSuiObjectId$3(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:toBase64(new Uint8Array(s))),dependencies:e.map(s=>normalizeSuiObjectId$3(s)),package:n,ticket:parse(Argument$8,i)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>parse(Argument$8,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([i,s])=>[i,Array.isArray(s)?s.map(a=>parse(Argument$8,a)):parse(Argument$8,s)])),data:n}}}},ObjectRef$4=object$1({digest:string(),objectId:string(),version:union([pipe(number(),integer()),string(),bigint()])}),ObjectArg$a=safeEnum$2({ImmOrOwned:ObjectRef$4,Shared:object$1({objectId:ObjectID$2,initialSharedVersion:JsonU64$2,mutable:boolean()}),Receiving:ObjectRef$4}),NormalizedCallArg$4=safeEnum$2({Object:ObjectArg$a,Pure:array(pipe(number(),integer()))}),TransactionInput$2=union([object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:optional(literal("object"))}),object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:literal("pure")})]),TransactionExpiration$a=union([object$1({Epoch:pipe(number(),integer())}),object$1({None:nullable(literal(!0))})]),StringEncodedBigint$2=pipe(union([number(),string(),bigint()]),check(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),TypeTag$5=union([object$1({bool:nullable(literal(!0))}),object$1({u8:nullable(literal(!0))}),object$1({u64:nullable(literal(!0))}),object$1({u128:nullable(literal(!0))}),object$1({address:nullable(literal(!0))}),object$1({signer:nullable(literal(!0))}),object$1({vector:lazy(()=>TypeTag$5)}),object$1({struct:lazy(()=>StructTag$5)}),object$1({u16:nullable(literal(!0))}),object$1({u32:nullable(literal(!0))}),object$1({u256:nullable(literal(!0))})]),StructTag$5=object$1({address:string(),module:string(),name:string(),typeParams:array(TypeTag$5)}),GasConfig$2=object$1({budget:optional(StringEncodedBigint$2),price:optional(StringEncodedBigint$2),payment:optional(array(ObjectRef$4)),owner:optional(string())}),TransactionArgumentTypes$2=[TransactionInput$2,object$1({kind:literal("GasCoin")}),object$1({kind:literal("Result"),index:pipe(number(),integer())}),object$1({kind:literal("NestedResult"),index:pipe(number(),integer()),resultIndex:pipe(number(),integer())})],TransactionArgument$2=union([...TransactionArgumentTypes$2]),MoveCallTransaction$2=object$1({kind:literal("MoveCall"),target:pipe(string(),check(t=>t.split("::").length===3)),typeArguments:array(string()),arguments:array(TransactionArgument$2)}),TransferObjectsTransaction$2=object$1({kind:literal("TransferObjects"),objects:array(TransactionArgument$2),address:TransactionArgument$2}),SplitCoinsTransaction$2=object$1({kind:literal("SplitCoins"),coin:TransactionArgument$2,amounts:array(TransactionArgument$2)}),MergeCoinsTransaction$2=object$1({kind:literal("MergeCoins"),destination:TransactionArgument$2,sources:array(TransactionArgument$2)}),MakeMoveVecTransaction$2=object$1({kind:literal("MakeMoveVec"),type:union([object$1({Some:TypeTag$5}),object$1({None:nullable(literal(!0))})]),objects:array(TransactionArgument$2)}),PublishTransaction$2=object$1({kind:literal("Publish"),modules:array(array(pipe(number(),integer()))),dependencies:array(string())}),UpgradeTransaction$2=object$1({kind:literal("Upgrade"),modules:array(array(pipe(number(),integer()))),dependencies:array(string()),packageId:string(),ticket:TransactionArgument$2}),TransactionTypes$2=[MoveCallTransaction$2,TransferObjectsTransaction$2,SplitCoinsTransaction$2,MergeCoinsTransaction$2,PublishTransaction$2,UpgradeTransaction$2,MakeMoveVecTransaction$2],TransactionType$2=union([...TransactionTypes$2]);object$1({version:literal(1),sender:optional(string()),expiration:nullish(TransactionExpiration$a),gasConfig:GasConfig$2,inputs:array(TransactionInput$2),transactions:array(TransactionType$2)});function serializeV1TransactionData$2(t){var n;const e=t.inputs.map((i,s)=>{if(i.Object)return{kind:"Input",index:s,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(fromBase64(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:TypeTagSerializer$3.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(s=>convertTransactionArgument$2(s,e))};if(i.MergeCoins)return{kind:"MergeCoins",destination:convertTransactionArgument$2(i.MergeCoins.destination,e),sources:i.MergeCoins.sources.map(s=>convertTransactionArgument$2(s,e))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(s=>convertTransactionArgument$2(s,e))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:convertTransactionArgument$2(i.SplitCoins.coin,e),amounts:i.SplitCoins.amounts.map(s=>convertTransactionArgument$2(s,e))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(s=>convertTransactionArgument$2(s,e)),address:convertTransactionArgument$2(i.TransferObjects.address,e)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:convertTransactionArgument$2(i.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function convertTransactionArgument$2(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function transactionDataFromV1$2(t){var e,n,i;return parse(TransactionData$5,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=t.gasConfig.payment)==null?void 0:i.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(is$2(NormalizedCallArg$4,s.value)){const a=parse(NormalizedCallArg$4,s.value);if(a.Object){if(a.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:a.Object.ImmOrOwned.objectId,version:String(a.Object.ImmOrOwned.version),digest:a.Object.ImmOrOwned.digest}}};if(a.Object.Shared)return{Object:{SharedObject:{mutable:a.Object.Shared.mutable??null,initialSharedVersion:a.Object.Shared.initialSharedVersion,objectId:a.Object.Shared.objectId}}};if(a.Object.Receiving)return{Object:{Receiving:{digest:a.Object.Receiving.digest,version:String(a.Object.Receiving.version),objectId:a.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:toBase64(new Uint8Array(a.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?TypeTagSerializer$3.tagToString(s.type.Some):null,elements:s.objects.map(a=>parseV1TransactionArgument$2(a))}};case"MergeCoins":return{MergeCoins:{destination:parseV1TransactionArgument$2(s.destination),sources:s.sources.map(a=>parseV1TransactionArgument$2(a))}};case"MoveCall":{const[a,l,f]=s.target.split("::");return{MoveCall:{package:a,module:l,function:f,typeArguments:s.typeArguments,arguments:s.arguments.map(p=>parseV1TransactionArgument$2(p))}}}case"Publish":return{Publish:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:parseV1TransactionArgument$2(s.coin),amounts:s.amounts.map(a=>parseV1TransactionArgument$2(a))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(a=>parseV1TransactionArgument$2(a)),address:parseV1TransactionArgument$2(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies,package:s.packageId,ticket:parseV1TransactionArgument$2(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function parseV1TransactionArgument$2(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function enumUnion$2(t){return union(Object.entries(t).map(([e,n])=>object$1({[e]:n})))}const Argument$7=enumUnion$2({GasCoin:literal(!0),Input:pipe(number(),integer()),Result:pipe(number(),integer()),NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])}),GasData$7=object$1({budget:nullable(JsonU64$2),price:nullable(JsonU64$2),owner:nullable(SuiAddress$2),payment:nullable(array(ObjectRef$5))}),ProgrammableMoveCall$7=object$1({package:ObjectID$2,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$7)}),$Intent$4=object$1({name:string(),inputs:record(string(),union([Argument$7,array(Argument$7)])),data:record(string(),unknown())}),Command$7=enumUnion$2({MoveCall:ProgrammableMoveCall$7,TransferObjects:object$1({objects:array(Argument$7),address:Argument$7}),SplitCoins:object$1({coin:Argument$7,amounts:array(Argument$7)}),MergeCoins:object$1({destination:Argument$7,sources:array(Argument$7)}),Publish:object$1({modules:array(BCSBytes$2),dependencies:array(ObjectID$2)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$7)}),Upgrade:object$1({modules:array(BCSBytes$2),dependencies:array(ObjectID$2),package:ObjectID$2,ticket:Argument$7}),$Intent:$Intent$4}),ObjectArg$9=enumUnion$2({ImmOrOwnedObject:ObjectRef$5,SharedObject:object$1({objectId:ObjectID$2,initialSharedVersion:JsonU64$2,mutable:boolean()}),Receiving:ObjectRef$5}),CallArg$7=enumUnion$2({Object:ObjectArg$9,Pure:object$1({bytes:BCSBytes$2}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID$2,version:optional(nullable(JsonU64$2)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64$2))})}),TransactionExpiration$9=enumUnion$2({None:literal(!0),Epoch:JsonU64$2}),SerializedTransactionDataV2$2=object$1({version:literal(2),sender:nullish(SuiAddress$2),expiration:nullish(TransactionExpiration$9),gasData:GasData$7,inputs:array(CallArg$7),commands:array(Command$7)});function chunk$1(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,i)=>t.slice(i*e,(i+1)*e))}function promiseWithResolvers(){let t,e;return{promise:new Promise((i,s)=>{t=i,e=s}),resolve:t,reject:e}}const MAX_OBJECTS_PER_FETCH$2=50,GAS_SAFE_OVERHEAD$2=1000n,MAX_GAS$2=5e10;async function resolveTransactionData$2(t,e,n){return await normalizeInputs$2(t,e),await resolveObjectReferences$2(t,e),e.onlyTransactionKind||(await setGasPrice$2(t,e),await setGasBudget$2(t,e),await setGasPayment$2(t,e)),await validate$2(t),await n()}async function setGasPrice$2(t,e){t.gasConfig.price||(t.gasConfig.price=String(await getClient$2(e).getReferenceGasPrice()))}async function setGasBudget$2(t,e){if(t.gasConfig.budget)return;const n=await getClient$2(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(MAX_GAS$2),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=GAS_SAFE_OVERHEAD$2*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+i,a=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(a>s?a:s)}async function setGasPayment$2(t,e){if(!t.gasConfig.payment){const i=(await getClient$2(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:SUI_TYPE_ARG$3})).data.filter(s=>!t.inputs.find(l=>{var f;return(f=l.Object)!=null&&f.ImmOrOwnedObject?s.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=i.map(s=>parse(ObjectRef$5,s))}}async function resolveObjectReferences$2(t,e){const n=t.inputs.filter(B=>{var N;return B.UnresolvedObject&&!(B.UnresolvedObject.version||(N=B.UnresolvedObject)!=null&&N.initialSharedVersion)}),i=[...new Set(n.map(B=>normalizeSuiObjectId$3(B.UnresolvedObject.objectId)))],s=i.length?chunk$1(i,MAX_OBJECTS_PER_FETCH$2):[],a=(await Promise.all(s.map(B=>getClient$2(e).multiGetObjects({ids:B,options:{showOwner:!0}})))).flat(),l=new Map(i.map((B,N)=>[B,a[N]])),f=Array.from(l).filter(([B,N])=>N.error).map(([B,N])=>JSON.stringify(N.error));if(f.length)throw new Error(`The following input objects are invalid: ${f.join(", ")}`);const p=a.map(B=>{if(B.error||!B.data)throw new Error(`Failed to fetch object: ${B.error}`);const N=B.data.owner,le=N&&typeof N=="object"&&"Shared"in N?N.Shared.initial_shared_version:null;return{objectId:B.data.objectId,digest:B.data.digest,version:B.data.version,initialSharedVersion:le}}),C=new Map(i.map((B,N)=>[B,p[N]]));for(const[B,N]of t.inputs.entries()){if(!N.UnresolvedObject)continue;let le;const Ee=normalizeSuiAddress$3(N.UnresolvedObject.objectId),Ue=C.get(Ee);N.UnresolvedObject.initialSharedVersion??(Ue==null?void 0:Ue.initialSharedVersion)?le=Inputs$2.SharedObjectRef({objectId:Ee,initialSharedVersion:N.UnresolvedObject.initialSharedVersion||(Ue==null?void 0:Ue.initialSharedVersion),mutable:isUsedAsMutable$2(t,B)}):isUsedAsReceiving$2(t,B)&&(le=Inputs$2.ReceivingRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})),t.inputs[t.inputs.indexOf(N)]=le??Inputs$2.ObjectRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})}}async function normalizeInputs$2(t,e){const{inputs:n,commands:i}=t,s=[],a=new Set;i.forEach(f=>{if(f.MoveCall){if(f.MoveCall._argumentTypes)return;if(f.MoveCall.arguments.map(B=>B.$kind==="Input"?t.inputs[B.Input]:null).some(B=>(B==null?void 0:B.UnresolvedPure)||(B==null?void 0:B.UnresolvedObject))){const B=`${f.MoveCall.package}::${f.MoveCall.module}::${f.MoveCall.function}`;a.add(B),s.push(f.MoveCall)}}switch(f.$kind){case"SplitCoins":f.SplitCoins.amounts.forEach(p=>{normalizeRawArgument$2(p,suiBcs$3.U64,t)});break;case"TransferObjects":normalizeRawArgument$2(f.TransferObjects.address,suiBcs$3.Address,t);break}});const l=new Map;if(a.size>0){const f=getClient$2(e);await Promise.all([...a].map(async p=>{const[C,B,N]=p.split("::"),le=await f.getNormalizedMoveFunction({package:C,module:B,function:N});l.set(p,le.parameters.map(Ee=>normalizedTypeToMoveTypeSignature$2(Ee)))}))}s.length&&await Promise.all(s.map(async f=>{const p=l.get(`${f.package}::${f.module}::${f.function}`);if(!p)return;const B=p.length>0&&isTxContext$2(p.at(-1))?p.slice(0,p.length-1):p;f._argumentTypes=B})),i.forEach(f=>{if(!f.MoveCall)return;const p=f.MoveCall,C=`${p.package}::${p.module}::${p.function}`,B=p._argumentTypes;if(B){if(B.length!==f.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${C}`);B.forEach((N,le)=>{var ct,wt;const Ee=p.arguments[le];if(Ee.$kind!=="Input")return;const Ue=n[Ee.Input];if(!Ue.UnresolvedPure&&!Ue.UnresolvedObject)return;const ze=((ct=Ue.UnresolvedPure)==null?void 0:ct.value)??((wt=Ue.UnresolvedObject)==null?void 0:wt.objectId),Ze=getPureBcsSchema$2(N.body);if(Ze){Ee.type="pure",n[n.indexOf(Ue)]=Inputs$2.Pure(Ze.serialize(ze));return}if(typeof ze!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(ze,null,2)}`);Ee.type="object";const Qe=Ue.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ze}}:Ue;n[Ee.Input]=Qe})}})}function validate$2(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function normalizeRawArgument$2(t,e,n){if(t.$kind!=="Input")return;const i=n.inputs[t.Input];i.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=Inputs$2.Pure(e.serialize(i.UnresolvedPure.value)))}function isUsedAsMutable$2(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=s.MoveCall._argumentTypes[a].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(n=!0)}),n}function isUsedAsReceiving$2(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=isReceivingType$2(s.MoveCall._argumentTypes[a])||n}}),n}function isReceivingType$2(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function getClient$2(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function createObjectMethods$2(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:i})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${i===null?"none":"some"}`,arguments:i===null?[]:[s.object(i)]}),e}function createPure$2(t){function e(n,i){if(typeof n=="string")return t(pureBcsSchemaFromTypeName$3(n).serialize(i));if(n instanceof Uint8Array||isSerializedBcs(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(suiBcs$3.U8.serialize(n)),e.u16=n=>t(suiBcs$3.U16.serialize(n)),e.u32=n=>t(suiBcs$3.U32.serialize(n)),e.u64=n=>t(suiBcs$3.U64.serialize(n)),e.u128=n=>t(suiBcs$3.U128.serialize(n)),e.u256=n=>t(suiBcs$3.U256.serialize(n)),e.bool=n=>t(suiBcs$3.Bool.serialize(n)),e.string=n=>t(suiBcs$3.String.serialize(n)),e.address=n=>t(suiBcs$3.Address.serialize(n)),e.id=e.address,e.vector=(n,i)=>t(suiBcs$3.vector(pureBcsSchemaFromTypeName$3(n)).serialize(i)),e.option=(n,i)=>t(suiBcs$3.option(pureBcsSchemaFromTypeName$3(n)).serialize(i)),e}function hashTypedData$2(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),i=new Uint8Array(n.length+e.length);return i.set(n),i.set(e,n.length),blake2b$1(i,{dkLen:32})}function prepareSuiAddress$2(t){return normalizeSuiAddress$3(t).replace("0x","")}let TransactionDataBuilder$2=class Qs{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const i=suiBcs$3.TransactionKind.parse(e).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return Qs.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(e){const n=suiBcs$3.TransactionData.parse(e),i=n==null?void 0:n.V1,s=i.kind.ProgrammableTransaction;if(!i||!s)throw new Error("Unable to deserialize from bytes.");return Qs.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new Qs(parse(TransactionData$5,e)):new Qs(parse(TransactionData$5,transactionDataFromV1$2(e)))}static getDigestFromBytes(e){const n=hashTypedData$2("TransactionData",e);return toBase58(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:i}={}){const s=this.inputs,a=this.commands,l={ProgrammableTransaction:{inputs:s,commands:a}};if(i)return suiBcs$3.TransactionKind.serialize(l,{maxSize:e}).toBytes();const f=(n==null?void 0:n.expiration)??this.expiration,p=(n==null?void 0:n.sender)??this.sender,C={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!p)throw new Error("Missing transaction sender");if(!C.budget)throw new Error("Missing gas budget");if(!C.payment)throw new Error("Missing gas payment");if(!C.price)throw new Error("Missing gas price");const B={sender:prepareSuiAddress$2(p),expiration:f||{None:!0},gasData:{payment:C.payment,owner:prepareSuiAddress$2(this.gasData.owner??p),price:BigInt(C.price),budget:BigInt(C.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:a}}};return suiBcs$3.TransactionData.serialize({V1:B},{maxSize:e}).toBytes()}addInput(e,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((i,s)=>(i.$kind==="Input"&&i.Input===e&&n(i,s),i))}mapArguments(e){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(s=>e(s,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(s=>e(s,n)),n.TransferObjects.address=e(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=e(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(s=>e(s,n));break;case"MergeCoins":n.MergeCoins.destination=e(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(s=>e(s,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(s=>e(s,n));break;case"Upgrade":n.Upgrade.ticket=e(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[s,a]of Object.entries(i))n.$Intent.inputs[s]=Array.isArray(a)?a.map(l=>e(l,n)):e(a,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(e,n){if(!Array.isArray(n)){this.commands[e]=n;return}const i=n.length-1;this.commands.splice(e,1,...n),i!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Qs.getDigestFromBytes(e)}snapshot(){return parse(TransactionData$5,this)}};function getIdFromCallArg$2(t){if(typeof t=="string")return normalizeSuiAddress$3(t);if(t.Object)return t.Object.ImmOrOwnedObject?normalizeSuiAddress$3(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?normalizeSuiAddress$3(t.Object.Receiving.objectId):normalizeSuiAddress$3(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return normalizeSuiAddress$3(t.UnresolvedObject.objectId)}var __typeError$h=t=>{throw TypeError(t)},__accessCheck$h=(t,e,n)=>e.has(t)||__typeError$h("Cannot "+n),__privateGet$h=(t,e,n)=>(__accessCheck$h(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$h=(t,e,n)=>e.has(t)?__typeError$h("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$g=(t,e,n,i)=>(__accessCheck$h(t,e,"write to private field"),e.set(t,n),n),__privateMethod$a=(t,e,n)=>(__accessCheck$h(t,e,"access private method"),n),_serializationPlugins$2,_buildPlugins$2,_intentResolvers$2,_data$2,_Transaction_instances$2,normalizeTransactionArgument_fn$2,resolveArgument_fn$2,prepareBuild_fn$2,runPlugins_fn$2;function createTransactionResult$2(t,e=1/0){const n={$kind:"Result",Result:t},i=[],s=a=>i[a]??(i[a]={$kind:"NestedResult",NestedResult:[t,a]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(a,l){if(l in a)return Reflect.get(a,l);if(l===Symbol.iterator)return function*(){let p=0;for(;p<e;)yield s(p),p++};if(typeof l=="symbol")return;const f=parseInt(l,10);if(!(Number.isNaN(f)||f<0))return s(f)}})}const TRANSACTION_BRAND$2=Symbol.for("@mysten/transaction");function isTransaction$2(t){return!!t&&typeof t=="object"&&t[TRANSACTION_BRAND$2]===!0}const modulePluginRegistry$2={buildPlugins:new Map,serializationPlugins:new Map},TRANSACTION_REGISTRY_KEY$2=Symbol.for("@mysten/transaction/registry");function getGlobalPluginRegistry$2(){try{const t=globalThis;return t[TRANSACTION_REGISTRY_KEY$2]||(t[TRANSACTION_REGISTRY_KEY$2]=modulePluginRegistry$2),t[TRANSACTION_REGISTRY_KEY$2]}catch{return modulePluginRegistry$2}}const _Transaction$2=class ja{constructor(){__privateAdd$h(this,_Transaction_instances$2),__privateAdd$h(this,_serializationPlugins$2),__privateAdd$h(this,_buildPlugins$2),__privateAdd$h(this,_intentResolvers$2,new Map),__privateAdd$h(this,_data$2),this.object=createObjectMethods$2(n=>{var a,l;if(typeof n=="function")return this.object(n(this));if(typeof n=="object"&&is$2(Argument$8,n))return n;const i=getIdFromCallArg$2(n),s=__privateGet$h(this,_data$2).inputs.find(f=>i===getIdFromCallArg$2(f));return(a=s==null?void 0:s.Object)!=null&&a.SharedObject&&typeof n=="object"&&((l=n.Object)!=null&&l.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:__privateGet$h(this,_data$2).inputs.indexOf(s),type:"object"}:__privateGet$h(this,_data$2).addInput("object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:normalizeSuiAddress$3(n)}}:n)});const e=getGlobalPluginRegistry$2();__privateSet$g(this,_data$2,new TransactionDataBuilder$2),__privateSet$g(this,_buildPlugins$2,[...e.buildPlugins.values()]),__privateSet$g(this,_serializationPlugins$2,[...e.serializationPlugins.values()])}static fromKind(e){const n=new ja;return __privateSet$g(n,_data$2,TransactionDataBuilder$2.fromKindBytes(typeof e=="string"?fromBase64(e):e)),n}static from(e){const n=new ja;return isTransaction$2(e)?__privateSet$g(n,_data$2,new TransactionDataBuilder$2(e.getData())):typeof e!="string"||!e.startsWith("{")?__privateSet$g(n,_data$2,TransactionDataBuilder$2.fromBytes(typeof e=="string"?fromBase64(e):e)):__privateSet$g(n,_data$2,TransactionDataBuilder$2.restore(JSON.parse(e))),n}static registerGlobalSerializationPlugin(e,n){getGlobalPluginRegistry$2().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){getGlobalPluginRegistry$2().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){getGlobalPluginRegistry$2().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){getGlobalPluginRegistry$2().buildPlugins.delete(e)}addSerializationPlugin(e){__privateGet$h(this,_serializationPlugins$2).push(e)}addBuildPlugin(e){__privateGet$h(this,_buildPlugins$2).push(e)}addIntentResolver(e,n){if(__privateGet$h(this,_intentResolvers$2).has(e)&&__privateGet$h(this,_intentResolvers$2).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);__privateGet$h(this,_intentResolvers$2).set(e,n)}setSender(e){__privateGet$h(this,_data$2).sender=e}setSenderIfNotSet(e){__privateGet$h(this,_data$2).sender||(__privateGet$h(this,_data$2).sender=e)}setExpiration(e){__privateGet$h(this,_data$2).expiration=e?parse(TransactionExpiration$b,e):null}setGasPrice(e){__privateGet$h(this,_data$2).gasConfig.price=String(e)}setGasBudget(e){__privateGet$h(this,_data$2).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){__privateGet$h(this,_data$2).gasData.budget==null&&(__privateGet$h(this,_data$2).gasConfig.budget=String(e))}setGasOwner(e){__privateGet$h(this,_data$2).gasConfig.owner=e}setGasPayment(e){__privateGet$h(this,_data$2).gasConfig.payment=e.map(n=>parse(ObjectRef$5,n))}get blockData(){return serializeV1TransactionData$2(__privateGet$h(this,_data$2).snapshot())}getData(){return __privateGet$h(this,_data$2).snapshot()}get[TRANSACTION_BRAND$2](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:createPure$2(e=>isSerializedBcs(e)?__privateGet$h(this,_data$2).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):__privateGet$h(this,_data$2).addInput("pure",is$2(NormalizedCallArg$5,e)?parse(NormalizedCallArg$5,e):e instanceof Uint8Array?Inputs$2.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Inputs$2.ObjectRef(...e))}receivingRef(...e){return this.object(Inputs$2.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Inputs$2.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const n=__privateGet$h(this,_data$2).commands.push(e);return createTransactionResult$2(n-1)}splitCoins(e,n){const i=Commands$2.SplitCoins(typeof e=="string"?this.object(e):__privateMethod$a(this,_Transaction_instances$2,resolveArgument_fn$2).call(this,e),n.map(a=>typeof a=="number"||typeof a=="bigint"||typeof a=="string"?this.pure.u64(a):__privateMethod$a(this,_Transaction_instances$2,normalizeTransactionArgument_fn$2).call(this,a))),s=__privateGet$h(this,_data$2).commands.push(i);return createTransactionResult$2(s-1,n.length)}mergeCoins(e,n){return this.add(Commands$2.MergeCoins(this.object(e),n.map(i=>this.object(i))))}publish({modules:e,dependencies:n}){return this.add(Commands$2.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:i,ticket:s}){return this.add(Commands$2.Upgrade({modules:e,dependencies:n,package:i,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(Commands$2.MoveCall({...n,arguments:e==null?void 0:e.map(i=>__privateMethod$a(this,_Transaction_instances$2,normalizeTransactionArgument_fn$2).call(this,i))}))}transferObjects(e,n){return this.add(Commands$2.TransferObjects(e.map(i=>this.object(i)),typeof n=="string"?this.pure.address(n):__privateMethod$a(this,_Transaction_instances$2,normalizeTransactionArgument_fn$2).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Commands$2.MakeMoveVec({type:e,elements:n.map(i=>this.object(i))}))}serialize(){return JSON.stringify(serializeV1TransactionData$2(__privateGet$h(this,_data$2).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(parse(SerializedTransactionDataV2$2,__privateGet$h(this,_data$2).snapshot()),(n,i)=>typeof i=="bigint"?i.toString():i,2)}async sign(e){const{signer:n,...i}=e,s=await this.build(i);return n.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await __privateMethod$a(this,_Transaction_instances$2,prepareBuild_fn$2).call(this,e),__privateGet$h(this,_data$2).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await __privateMethod$a(this,_Transaction_instances$2,prepareBuild_fn$2).call(this,e),__privateGet$h(this,_data$2).getDigest()}async prepareForSerialization(e){var s;const n=new Set;for(const a of __privateGet$h(this,_data$2).commands)a.$Intent&&n.add(a.$Intent.name);const i=[...__privateGet$h(this,_serializationPlugins$2)];for(const a of n)if(!((s=e.supportedIntents)!=null&&s.includes(a))){if(!__privateGet$h(this,_intentResolvers$2).has(a))throw new Error(`Missing intent resolver for ${a}`);i.push(__privateGet$h(this,_intentResolvers$2).get(a))}await __privateMethod$a(this,_Transaction_instances$2,runPlugins_fn$2).call(this,i,e)}};_serializationPlugins$2=new WeakMap;_buildPlugins$2=new WeakMap;_intentResolvers$2=new WeakMap;_data$2=new WeakMap;_Transaction_instances$2=new WeakSet;normalizeTransactionArgument_fn$2=function(t){return isSerializedBcs(t)?this.pure(t):__privateMethod$a(this,_Transaction_instances$2,resolveArgument_fn$2).call(this,t)};resolveArgument_fn$2=function(t){return typeof t=="function"?parse(Argument$8,t(this)):parse(Argument$8,t)};prepareBuild_fn$2=async function(t){if(!t.onlyTransactionKind&&!__privateGet$h(this,_data$2).sender)throw new Error("Missing transaction sender");await __privateMethod$a(this,_Transaction_instances$2,runPlugins_fn$2).call(this,[...__privateGet$h(this,_buildPlugins$2),resolveTransactionData$2],t)};runPlugins_fn$2=async function(t,e){const n=i=>{if(i>=t.length)return()=>{};const s=t[i];return async()=>{const a=n(i+1);let l=!1,f=!1;if(await s(__privateGet$h(this,_data$2),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);l=!0,await a(),f=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!f)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let Transaction$2=_Transaction$2;const COIN_WITH_BALANCE$1="CoinWithBalance",SUI_TYPE$1=normalizeStructTag$3("0x2::sui::SUI");function coinWithBalance$1({type:t=SUI_TYPE$1,balance:e,useGasCoin:n=!0}){let i=null;return s=>{if(i)return i;s.addIntentResolver(COIN_WITH_BALANCE$1,resolveCoinBalance$1);const a=t==="gas"?t:normalizeStructTag$3(t);return i=s.add(Commands$2.Intent({name:COIN_WITH_BALANCE$1,inputs:{},data:{type:a===SUI_TYPE$1&&n?"gas":a,balance:BigInt(e)}})),i}}const CoinWithBalanceData$1=object$1({type:string(),balance:bigint()});async function resolveCoinBalance$1(t,e,n){var C,B;const i=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const N of t.commands)if(N.$kind==="$Intent"&&N.$Intent.name===COIN_WITH_BALANCE$1){const{type:le,balance:Ee}=parse(CoinWithBalanceData$1,N.$Intent.data);le!=="gas"&&Ee>0n&&i.add(le),s.set(le,(s.get(le)??0n)+Ee)}const a=new Set;for(const N of t.inputs)(C=N.Object)!=null&&C.ImmOrOwnedObject&&a.add(N.Object.ImmOrOwnedObject.objectId),(B=N.UnresolvedObject)!=null&&B.objectId&&a.add(N.UnresolvedObject.objectId);const l=new Map,f=getClient$2(e);await Promise.all([...i].map(async N=>{l.set(N,await getCoinsOfType$1({coinType:N,balance:s.get(N),client:f,owner:t.sender,usedIds:a}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[N,le]of t.commands.entries()){if(le.$kind!=="$Intent"||le.$Intent.name!==COIN_WITH_BALANCE$1)continue;const{type:Ee,balance:Ue}=le.$Intent.data;if(Ue===0n&&Ee!=="gas"){t.replaceCommand(N,Commands$2.MoveCall({target:"0x2::coin::zero",typeArguments:[Ee]}));continue}const ze=[];if(!p.has(Ee)){const[Ze,...Qe]=l.get(Ee).map(ct=>t.addInput("object",Inputs$2.ObjectRef({objectId:ct.coinObjectId,digest:ct.digest,version:ct.version})));Qe.length>0&&ze.push(Commands$2.MergeCoins(Ze,Qe)),p.set(Ee,Ze)}ze.push(Commands$2.SplitCoins(p.get(Ee),[t.addInput("pure",Inputs$2.Pure(suiBcs$3.u64().serialize(Ue)))])),t.replaceCommand(N,ze),t.mapArguments(Ze=>Ze.$kind==="Result"&&Ze.Result===N?{$kind:"NestedResult",NestedResult:[N+ze.length-1,0]}:Ze)}return n()}async function getCoinsOfType$1({coinType:t,balance:e,client:n,owner:i,usedIds:s}){let a=e;const l=[];return f();async function f(p=null){const{data:C,hasNextPage:B,nextCursor:N}=await n.getCoins({owner:i,coinType:t,cursor:p}),le=C.sort((Ee,Ue)=>Number(BigInt(Ue.balance)-BigInt(Ee.balance)));for(const Ee of le){if(s.has(Ee.coinObjectId))continue;const Ue=BigInt(Ee.balance);if(l.push(Ee),a-=Ue,a<=0)return l}if(B)return f(N);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}function batch$2(t,e){const n=[];for(let i=0;i<t.length;i+=e)n.push(t.slice(i,i+e));return n}async function signTransaction(t,e){if(t.features["sui:signTransaction"])return t.features["sui:signTransaction"].signTransaction(e);if(!t.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${t.name}) does not support the signTransaction feature.`);const{signTransactionBlock:n}=t.features["sui:signTransactionBlock"],i=Transaction$2.from(await e.transaction.toJSON()),{transactionBlockBytes:s,signature:a}=await n({transactionBlock:i,account:e.account,chain:e.chain});return{bytes:s,signature:a}}const REQUIRED_FEATURES=["standard:connect","standard:events"];function isWalletWithRequiredFeatureSet(t,e=[]){return[...REQUIRED_FEATURES,...e].every(n=>n in t.features)}const SUI_DEVNET_CHAIN$1="sui:devnet",SUI_TESTNET_CHAIN$1="sui:testnet",SUI_LOCALNET_CHAIN$1="sui:localnet",SUI_MAINNET_CHAIN$1="sui:mainnet",SUI_CHAINS$1=[SUI_DEVNET_CHAIN$1,SUI_TESTNET_CHAIN$1,SUI_LOCALNET_CHAIN$1,SUI_MAINNET_CHAIN$1];function mitt(t){return{all:t=t||new Map,on:function(e,n){var i=t.get(e);i?i.push(n):t.set(e,[n])},off:function(e,n){var i=t.get(e);i&&(n?i.splice(i.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var i=t.get(e);i&&i.slice().map(function(s){s(n)}),(i=t.get("*"))&&i.slice().map(function(s){s(e,n)})}}}new TextEncoder;const decoder=new TextDecoder;function decodeBase64(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);const e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}function decode$1(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:decoder.decode(t),{alphabet:"base64url"});let e=t;e instanceof Uint8Array&&(e=decoder.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return decodeBase64(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}class JOSEError extends Error{constructor(n,i){var s;super(n,i);Or(this,"code","ERR_JOSE_GENERIC");this.name=this.constructor.name,(s=Error.captureStackTrace)==null||s.call(Error,this,this.constructor)}}Or(JOSEError,"code","ERR_JOSE_GENERIC");class JWTInvalid extends JOSEError{constructor(){super(...arguments);Or(this,"code","ERR_JWT_INVALID")}}Or(JWTInvalid,"code","ERR_JWT_INVALID");function isObjectLike$1(t){return typeof t=="object"&&t!==null}const isObject$3=t=>{if(!isObjectLike$1(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function decodeJwt(t){if(typeof t!="string")throw new JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:n}=t.split(".");if(n===5)throw new JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new JWTInvalid("Invalid JWT");if(!e)throw new JWTInvalid("JWTs must contain a payload");let i;try{i=decode$1(e)}catch{throw new JWTInvalid("Failed to base64url decode the payload")}let s;try{s=JSON.parse(decoder.decode(i))}catch{throw new JWTInvalid("Failed to parse the decoded payload as JSON")}if(!isObject$3(s))throw new JWTInvalid("Invalid JWT Claims Set");return s}const AccountSchema=object$1({address:string(),publicKey:string()}),JwtSessionSchema=object$1({exp:number(),iat:number(),iss:string(),aud:string(),payload:object$1({accounts:array(AccountSchema)})});function decodeJwtSession(t){const e=decodeJwt(t);return parse(JwtSessionSchema,e)}const ResponseData=variant("type",[object$1({type:literal("connect"),session:string("`session` is required")}),object$1({type:literal("sign-transaction"),bytes:string(),signature:string()}),object$1({type:literal("sign-and-execute-transaction"),bytes:string(),signature:string(),digest:string(),effects:string()}),object$1({type:literal("sign-personal-message"),bytes:string(),signature:string()})]),ResponsePayload=variant("type",[object$1({type:literal("reject"),reason:optional(string("`reason` must be a string"))}),object$1({type:literal("resolve"),data:ResponseData})]),Response$1=object$1({id:pipe(string(),uuid()),source:literal("web-wallet-channel"),payload:ResponsePayload,version:literal("1")});function getClientMetadata(){return{version:"1",originUrl:window.location.href,userAgent:navigator.userAgent,screenResolution:`${window.screen.width}x${window.screen.height}`,language:navigator.language,platform:navigator.platform,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,timestamp:Date.now()}}var __typeError$g=t=>{throw TypeError(t)},__accessCheck$g=(t,e,n)=>e.has(t)||__typeError$g("Cannot "+n),__privateGet$g=(t,e,n)=>(__accessCheck$g(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$g=(t,e,n)=>e.has(t)?__typeError$g("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$f=(t,e,n,i)=>(__accessCheck$g(t,e,"write to private field"),e.set(t,n),n),__privateMethod$9=(t,e,n)=>(__accessCheck$g(t,e,"access private method"),n),_popup,_version,_id$1,_hostOrigin,_hostPathname,_appName,_extraRequestOptions,_promise,_resolve,_reject,_interval,_isSendCalled,_listener,_DappPostMessageChannel_instances,cleanup_fn;class DappPostMessageChannel{constructor({appName:e,hostOrigin:n,hostPathname:i="dapp-request",extraRequestOptions:s}){__privateAdd$g(this,_DappPostMessageChannel_instances),__privateAdd$g(this,_popup),__privateAdd$g(this,_version,"1"),__privateAdd$g(this,_id$1),__privateAdd$g(this,_hostOrigin),__privateAdd$g(this,_hostPathname),__privateAdd$g(this,_appName),__privateAdd$g(this,_extraRequestOptions),__privateAdd$g(this,_promise),__privateAdd$g(this,_resolve),__privateAdd$g(this,_reject),__privateAdd$g(this,_interval,null),__privateAdd$g(this,_isSendCalled,!1),__privateAdd$g(this,_listener,C=>{if(C.origin!==__privateGet$g(this,_hostOrigin))return;const{success:B,output:N}=safeParse(Response$1,C.data);!B||N.id!==__privateGet$g(this,_id$1)||(__privateMethod$9(this,_DappPostMessageChannel_instances,cleanup_fn).call(this),N.payload.type==="reject"?__privateGet$g(this,_reject).call(this,new Error("User rejected the request")):N.payload.type==="resolve"&&__privateGet$g(this,_resolve).call(this,N.payload.data))});const a=window.open("about:blank","_blank");if(!a)throw new Error("Failed to open new window");__privateSet$f(this,_id$1,crypto.randomUUID()),__privateSet$f(this,_popup,a),__privateSet$f(this,_hostOrigin,n),__privateSet$f(this,_hostPathname,i),__privateSet$f(this,_appName,e);const{promise:l,resolve:f,reject:p}=promiseWithResolvers();__privateSet$f(this,_promise,l),__privateSet$f(this,_resolve,f),__privateSet$f(this,_reject,p),__privateSet$f(this,_extraRequestOptions,s),__privateSet$f(this,_interval,setInterval(()=>{try{__privateGet$g(this,_popup).closed&&(__privateMethod$9(this,_DappPostMessageChannel_instances,cleanup_fn).call(this),p(new Error("User closed the wallet window")))}catch{}},1e3))}send({type:e,...n}){if(__privateGet$g(this,_popup).closed)throw new Error("User closed the wallet window");if(__privateGet$g(this,_isSendCalled))throw new Error("send() can only be called once");__privateSet$f(this,_isSendCalled,!0),window.addEventListener("message",__privateGet$g(this,_listener));const i={version:__privateGet$g(this,_version),requestId:__privateGet$g(this,_id$1),appUrl:window.location.href.split("#")[0],appName:__privateGet$g(this,_appName),payload:{type:e,...n},metadata:getClientMetadata(),extraRequestOptions:__privateGet$g(this,_extraRequestOptions)},s=encodeURIComponent(btoa(JSON.stringify(i)));return __privateGet$g(this,_popup).location.assign(`${__privateGet$g(this,_hostOrigin)}/${__privateGet$g(this,_hostPathname)}#${s}`),__privateGet$g(this,_promise)}close(){__privateMethod$9(this,_DappPostMessageChannel_instances,cleanup_fn).call(this),__privateGet$g(this,_popup).close()}}_popup=new WeakMap;_version=new WeakMap;_id$1=new WeakMap;_hostOrigin=new WeakMap;_hostPathname=new WeakMap;_appName=new WeakMap;_extraRequestOptions=new WeakMap;_promise=new WeakMap;_resolve=new WeakMap;_reject=new WeakMap;_interval=new WeakMap;_isSendCalled=new WeakMap;_listener=new WeakMap;_DappPostMessageChannel_instances=new WeakSet;cleanup_fn=function(){__privateGet$g(this,_interval)&&(clearInterval(__privateGet$g(this,_interval)),__privateSet$f(this,_interval,null)),window.removeEventListener("message",__privateGet$g(this,_listener))};var __typeError$f=t=>{throw TypeError(t)},__accessCheck$f=(t,e,n)=>e.has(t)||__typeError$f("Cannot "+n),__privateGet$f=(t,e,n)=>(__accessCheck$f(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$f=(t,e,n)=>e.has(t)?__typeError$f("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$e=(t,e,n,i)=>(__accessCheck$f(t,e,"write to private field"),e.set(t,n),n),__privateMethod$8=(t,e,n)=>(__accessCheck$f(t,e,"access private method"),n),_id,_events,_accounts,_origin,_walletName,_icon,_name,_signTransactionBlock,_signTransaction,_signAndExecuteTransaction,_signPersonalMessage,_on,_SlushWallet_instances,setAccounts_fn,_connect,_disconnect,getNewPopupChannel_fn;const DEFAULT_SLUSH_ORIGIN="https://my.slush.app",SLUSH_SESSION_KEY="slush:session",SLUSH_WALLET_NAME="Slush",SUI_WALLET_EXTENSION_ID="com.mystenlabs.suiwallet",METADATA_API_URL="https://api.slush.app/api/wallet/metadata",WalletMetadataSchema=object$1({id:string("Wallet ID is required"),walletName:string("Wallet name is required"),icon:string("Icon must be a valid wallet icon format"),enabled:boolean("Enabled is required")});function setSessionToStorage(t){localStorage.setItem(SLUSH_SESSION_KEY,t)}function getSessionFromStorage(){const t=localStorage.getItem(SLUSH_SESSION_KEY);if(!t)throw new Error("No session found");return t}const walletAccountFeatures=["sui:signTransaction","sui:signAndExecuteTransaction","sui:signPersonalMessage","sui:signTransactionBlock","sui:signAndExecuteTransactionBlock"];async function getAccountsFromSession(t){const{payload:e}=await decodeJwtSession(t);return e.accounts.map(n=>new ReadonlyWalletAccount({address:n.address,chains:SUI_CHAINS$1,features:walletAccountFeatures,publicKey:fromBase64(n.publicKey)}))}class SlushWallet{constructor({name:e,origin:n,metadata:i}){__privateAdd$f(this,_SlushWallet_instances),__privateAdd$f(this,_id),__privateAdd$f(this,_events),__privateAdd$f(this,_accounts),__privateAdd$f(this,_origin),__privateAdd$f(this,_walletName),__privateAdd$f(this,_icon),__privateAdd$f(this,_name),__privateAdd$f(this,_signTransactionBlock,async({transactionBlock:s,account:a,chain:l})=>{const f=await s.toJSON(),C=await __privateMethod$8(this,_SlushWallet_instances,getNewPopupChannel_fn).call(this).send({type:"sign-transaction",transaction:f,address:a.address,chain:l,session:getSessionFromStorage()});return{transactionBlockBytes:C.bytes,signature:C.signature}}),__privateAdd$f(this,_signTransaction,async({transaction:s,account:a,chain:l})=>{const f=__privateMethod$8(this,_SlushWallet_instances,getNewPopupChannel_fn).call(this),p=await s.toJSON(),C=await f.send({type:"sign-transaction",transaction:p,address:a.address,chain:l,session:getSessionFromStorage()});return{bytes:C.bytes,signature:C.signature}}),__privateAdd$f(this,_signAndExecuteTransaction,async({transaction:s,account:a,chain:l})=>{const f=__privateMethod$8(this,_SlushWallet_instances,getNewPopupChannel_fn).call(this),p=await s.toJSON(),C=await f.send({type:"sign-and-execute-transaction",transaction:p,address:a.address,chain:l,session:getSessionFromStorage()});return{bytes:C.bytes,signature:C.signature,digest:C.digest,effects:C.effects}}),__privateAdd$f(this,_signPersonalMessage,async({message:s,account:a})=>{const f=await __privateMethod$8(this,_SlushWallet_instances,getNewPopupChannel_fn).call(this).send({type:"sign-personal-message",message:toBase64(s),address:a.address,session:getSessionFromStorage(),chain:a.chains[0]});return{bytes:f.bytes,signature:f.signature}}),__privateAdd$f(this,_on,(s,a)=>(__privateGet$f(this,_events).on(s,a),()=>__privateGet$f(this,_events).off(s,a))),__privateAdd$f(this,_connect,async s=>{if(s!=null&&s.silent){try{const f=await getAccountsFromSession(getSessionFromStorage());f.length&&__privateMethod$8(this,_SlushWallet_instances,setAccounts_fn).call(this,f)}catch{}return{accounts:this.accounts}}const l=await __privateMethod$8(this,_SlushWallet_instances,getNewPopupChannel_fn).call(this).send({type:"connect"});return setSessionToStorage(l.session),__privateMethod$8(this,_SlushWallet_instances,setAccounts_fn).call(this,await getAccountsFromSession(l.session)),{accounts:this.accounts}}),__privateAdd$f(this,_disconnect,async()=>{localStorage.removeItem(SLUSH_SESSION_KEY),__privateMethod$8(this,_SlushWallet_instances,setAccounts_fn).call(this,[])}),__privateSet$e(this,_id,i.id),__privateSet$e(this,_accounts,[]),__privateSet$e(this,_events,mitt()),__privateSet$e(this,_origin,n||DEFAULT_SLUSH_ORIGIN),__privateSet$e(this,_name,e),__privateSet$e(this,_walletName,i.walletName),__privateSet$e(this,_icon,i.icon)}get name(){return __privateGet$f(this,_walletName)}get id(){return __privateGet$f(this,_id)}get icon(){return __privateGet$f(this,_icon)}get version(){return"1.0.0"}get chains(){return SUI_CHAINS$1}get accounts(){return __privateGet$f(this,_accounts)}get features(){return{"standard:connect":{version:"1.0.0",connect:__privateGet$f(this,_connect)},"standard:disconnect":{version:"1.0.0",disconnect:__privateGet$f(this,_disconnect)},"standard:events":{version:"1.0.0",on:__privateGet$f(this,_on)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:__privateGet$f(this,_signTransactionBlock)},"sui:signTransaction":{version:"2.0.0",signTransaction:__privateGet$f(this,_signTransaction)},"sui:signPersonalMessage":{version:"1.1.0",signPersonalMessage:__privateGet$f(this,_signPersonalMessage)},"sui:signAndExecuteTransaction":{version:"2.0.0",signAndExecuteTransaction:__privateGet$f(this,_signAndExecuteTransaction)}}}}_id=new WeakMap;_events=new WeakMap;_accounts=new WeakMap;_origin=new WeakMap;_walletName=new WeakMap;_icon=new WeakMap;_name=new WeakMap;_signTransactionBlock=new WeakMap;_signTransaction=new WeakMap;_signAndExecuteTransaction=new WeakMap;_signPersonalMessage=new WeakMap;_on=new WeakMap;_SlushWallet_instances=new WeakSet;setAccounts_fn=function(t){__privateSet$e(this,_accounts,t),__privateGet$f(this,_events).emit("change",{accounts:this.accounts})};_connect=new WeakMap;_disconnect=new WeakMap;getNewPopupChannel_fn=function(){return new DappPostMessageChannel({appName:__privateGet$f(this,_name),hostOrigin:__privateGet$f(this,_origin)})};async function fetchMetadata(t){const e=await fetch(t);if(!e.ok)throw new Error("Failed to fetch wallet metadata");const n=await e.json();return parse(WalletMetadataSchema,n)}async function registerSlushWallet(t,{origin:e,metadataApiUrl:n=METADATA_API_URL}={}){const i=getWallets();if(i.get().find(p=>p.id===SUI_WALLET_EXTENSION_ID))return;let a;try{a=await fetchMetadata(n)}catch(p){console.error("Error fetching metadata",p)}if(!(a!=null&&a.enabled)){console.log("Slush wallet is not currently enabled.");return}const l=new SlushWallet({name:t,origin:e,metadata:a}),f=i.register(l);return i.on("register",p=>{p.id===SUI_WALLET_EXTENSION_ID&&f()}),{wallet:l,unregister:f}}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in globalThis;function noop$6(){}function functionalUpdate(t,e){return typeof t=="function"?t(e):t}function isValidTimeout(t){return typeof t=="number"&&t>=0&&t!==1/0}function timeUntilStale(t,e){return Math.max(t+(e||0)-Date.now(),0)}function resolveStaleTime(t,e){return typeof t=="function"?t(e):t}function resolveEnabled(t,e){return typeof t=="function"?t(e):t}function matchQuery(t,e){const{type:n="all",exact:i,fetchStatus:s,predicate:a,queryKey:l,stale:f}=t;if(l){if(i){if(e.queryHash!==hashQueryKeyByOptions(l,e.options))return!1}else if(!partialMatchKey(e.queryKey,l))return!1}if(n!=="all"){const p=e.isActive();if(n==="active"&&!p||n==="inactive"&&p)return!1}return!(typeof f=="boolean"&&e.isStale()!==f||s&&s!==e.state.fetchStatus||a&&!a(e))}function matchMutation(t,e){const{exact:n,status:i,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(hashKey(e.options.mutationKey)!==hashKey(a))return!1}else if(!partialMatchKey(e.options.mutationKey,a))return!1}return!(i&&e.state.status!==i||s&&!s(e))}function hashQueryKeyByOptions(t,e){return((e==null?void 0:e.queryKeyHashFn)||hashKey)(t)}function hashKey(t){return JSON.stringify(t,(e,n)=>isPlainObject$2(n)?Object.keys(n).sort().reduce((i,s)=>(i[s]=n[s],i),{}):n)}function partialMatchKey(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>partialMatchKey(t[n],e[n])):!1}function replaceEqualDeep(t,e){if(t===e)return t;const n=isPlainArray(t)&&isPlainArray(e);if(n||isPlainObject$2(t)&&isPlainObject$2(e)){const i=n?t:Object.keys(t),s=i.length,a=n?e:Object.keys(e),l=a.length,f=n?[]:{};let p=0;for(let C=0;C<l;C++){const B=n?C:a[C];(!n&&i.includes(B)||n)&&t[B]===void 0&&e[B]===void 0?(f[B]=void 0,p++):(f[B]=replaceEqualDeep(t[B],e[B]),f[B]===t[B]&&t[B]!==void 0&&p++)}return s===l&&p===s?t:f}return e}function shallowEqualObjects(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function isPlainArray(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function isPlainObject$2(t){if(!hasObjectPrototype(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!hasObjectPrototype(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hasObjectPrototype(t){return Object.prototype.toString.call(t)==="[object Object]"}function sleep$1(t){return new Promise(e=>{setTimeout(e,t)})}function replaceData(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?replaceEqualDeep(t,e):e}function addToEnd(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function addToStart(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var skipToken=Symbol();function ensureQueryFn(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===skipToken?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Ls,As,sa,Ya,FocusManager=(Ya=class extends Subscribable{constructor(){super();Nr(this,Ls);Nr(this,As);Nr(this,sa);Pr(this,sa,e=>{if(!isServer&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){br(this,As)||this.setEventListener(br(this,sa))}onUnsubscribe(){var e;this.hasListeners()||((e=br(this,As))==null||e.call(this),Pr(this,As,void 0))}setEventListener(e){var n;Pr(this,sa,e),(n=br(this,As))==null||n.call(this),Pr(this,As,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){br(this,Ls)!==e&&(Pr(this,Ls,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof br(this,Ls)=="boolean"?br(this,Ls):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ls=new WeakMap,As=new WeakMap,sa=new WeakMap,Ya),focusManager=new FocusManager,aa,Ts,oa,Qa,OnlineManager=(Qa=class extends Subscribable{constructor(){super();Nr(this,aa,!0);Nr(this,Ts);Nr(this,oa);Pr(this,oa,e=>{if(!isServer&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){br(this,Ts)||this.setEventListener(br(this,oa))}onUnsubscribe(){var e;this.hasListeners()||((e=br(this,Ts))==null||e.call(this),Pr(this,Ts,void 0))}setEventListener(e){var n;Pr(this,oa,e),(n=br(this,Ts))==null||n.call(this),Pr(this,Ts,e(this.setOnline.bind(this)))}setOnline(e){br(this,aa)!==e&&(Pr(this,aa,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return br(this,aa)}},aa=new WeakMap,Ts=new WeakMap,oa=new WeakMap,Qa),onlineManager=new OnlineManager;function pendingThenable(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function i(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{i({status:"fulfilled",value:s}),t(s)},n.reject=s=>{i({status:"rejected",reason:s}),e(s)},n}function defaultRetryDelay(t){return Math.min(1e3*2**t,3e4)}function canFetch(t){return(t??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function isCancelledError(t){return t instanceof CancelledError}function createRetryer(t){let e=!1,n=0,i=!1,s;const a=pendingThenable(),l=ze=>{var Ze;i||(le(new CancelledError(ze)),(Ze=t.abort)==null||Ze.call(t))},f=()=>{e=!0},p=()=>{e=!1},C=()=>focusManager.isFocused()&&(t.networkMode==="always"||onlineManager.isOnline())&&t.canRun(),B=()=>canFetch(t.networkMode)&&t.canRun(),N=ze=>{var Ze;i||(i=!0,(Ze=t.onSuccess)==null||Ze.call(t,ze),s==null||s(),a.resolve(ze))},le=ze=>{var Ze;i||(i=!0,(Ze=t.onError)==null||Ze.call(t,ze),s==null||s(),a.reject(ze))},Ee=()=>new Promise(ze=>{var Ze;s=Qe=>{(i||C())&&ze(Qe)},(Ze=t.onPause)==null||Ze.call(t)}).then(()=>{var ze;s=void 0,i||(ze=t.onContinue)==null||ze.call(t)}),Ue=()=>{if(i)return;let ze;const Ze=n===0?t.initialPromise:void 0;try{ze=Ze??t.fn()}catch(Qe){ze=Promise.reject(Qe)}Promise.resolve(ze).then(N).catch(Qe=>{var ir;if(i)return;const ct=t.retry??(isServer?0:3),wt=t.retryDelay??defaultRetryDelay,qt=typeof wt=="function"?wt(n,Qe):wt,nr=ct===!0||typeof ct=="number"&&n<ct||typeof ct=="function"&&ct(n,Qe);if(e||!nr){le(Qe);return}n++,(ir=t.onFail)==null||ir.call(t,n,Qe),sleep$1(qt).then(()=>C()?void 0:Ee()).then(()=>{e?le(Qe):Ue()})})};return{promise:a,cancel:l,continue:()=>(s==null||s(),a),cancelRetry:f,continueRetry:p,canStart:B,start:()=>(B()?Ue():Ee().then(Ue),a)}}var defaultScheduler=t=>setTimeout(t,0);function createNotifyManager(){let t=[],e=0,n=f=>{f()},i=f=>{f()},s=defaultScheduler;const a=f=>{e?t.push(f):s(()=>{n(f)})},l=()=>{const f=t;t=[],f.length&&s(()=>{i(()=>{f.forEach(p=>{n(p)})})})};return{batch:f=>{let p;e++;try{p=f()}finally{e--,e||l()}return p},batchCalls:f=>(...p)=>{a(()=>{f(...p)})},schedule:a,setNotifyFunction:f=>{n=f},setBatchNotifyFunction:f=>{i=f},setScheduler:f=>{s=f}}}var notifyManager=createNotifyManager(),zs,eo,Removable=(eo=class{constructor(){Nr(this,zs)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&Pr(this,zs,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(isServer?1/0:5*60*1e3))}clearGcTimeout(){br(this,zs)&&(clearTimeout(br(this,zs)),Pr(this,zs,void 0))}},zs=new WeakMap,eo),ca,ua,Ci,Gs,di,Sa,Vs,Yi,hs,to,Query=(to=class extends Removable{constructor(e){super();Nr(this,Yi);Nr(this,ca);Nr(this,ua);Nr(this,Ci);Nr(this,Gs);Nr(this,di);Nr(this,Sa);Nr(this,Vs);Pr(this,Vs,!1),Pr(this,Sa,e.defaultOptions),this.setOptions(e.options),this.observers=[],Pr(this,Gs,e.client),Pr(this,Ci,br(this,Gs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Pr(this,ca,getDefaultState$1(this.options)),this.state=e.state??br(this,ca),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=br(this,di))==null?void 0:e.promise}setOptions(e){this.options={...br(this,Sa),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&br(this,Ci).remove(this)}setData(e,n){const i=replaceData(this.state.data,e,this.options);return Mr(this,Yi,hs).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){Mr(this,Yi,hs).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,s;const n=(i=br(this,di))==null?void 0:i.promise;return(s=br(this,di))==null||s.cancel(e),n?n.then(noop$6).catch(noop$6):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(br(this,ca))}isActive(){return this.observers.some(e=>resolveEnabled(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!timeUntilStale(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=br(this,di))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=br(this,di))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),br(this,Ci).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(br(this,di)&&(br(this,Vs)?br(this,di).cancel({revert:!0}):br(this,di).cancelRetry()),this.scheduleGc()),br(this,Ci).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mr(this,Yi,hs).call(this,{type:"invalidate"})}fetch(e,n){var p,C,B;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(br(this,di))return br(this,di).continueRetry(),br(this,di).promise}if(e&&this.setOptions(e),!this.options.queryFn){const N=this.observers.find(le=>le.options.queryFn);N&&this.setOptions(N.options)}const i=new AbortController,s=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Pr(this,Vs,!0),i.signal)})},a=()=>{const N=ensureQueryFn(this.options,n),le={client:br(this,Gs),queryKey:this.queryKey,meta:this.meta};return s(le),Pr(this,Vs,!1),this.options.persister?this.options.persister(N,le,this):N(le)},l={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:br(this,Gs),state:this.state,fetchFn:a};s(l),(p=this.options.behavior)==null||p.onFetch(l,this),Pr(this,ua,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((C=l.fetchOptions)==null?void 0:C.meta))&&Mr(this,Yi,hs).call(this,{type:"fetch",meta:(B=l.fetchOptions)==null?void 0:B.meta});const f=N=>{var le,Ee,Ue,ze;isCancelledError(N)&&N.silent||Mr(this,Yi,hs).call(this,{type:"error",error:N}),isCancelledError(N)||((Ee=(le=br(this,Ci).config).onError)==null||Ee.call(le,N,this),(ze=(Ue=br(this,Ci).config).onSettled)==null||ze.call(Ue,this.state.data,N,this)),this.scheduleGc()};return Pr(this,di,createRetryer({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:i.abort.bind(i),onSuccess:N=>{var le,Ee,Ue,ze;if(N===void 0){f(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(N)}catch(Ze){f(Ze);return}(Ee=(le=br(this,Ci).config).onSuccess)==null||Ee.call(le,N,this),(ze=(Ue=br(this,Ci).config).onSettled)==null||ze.call(Ue,N,this.state.error,this),this.scheduleGc()},onError:f,onFail:(N,le)=>{Mr(this,Yi,hs).call(this,{type:"failed",failureCount:N,error:le})},onPause:()=>{Mr(this,Yi,hs).call(this,{type:"pause"})},onContinue:()=>{Mr(this,Yi,hs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),br(this,di).start()}},ca=new WeakMap,ua=new WeakMap,Ci=new WeakMap,Gs=new WeakMap,di=new WeakMap,Sa=new WeakMap,Vs=new WeakMap,Yi=new WeakSet,hs=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...fetchState(i.data,this.options),fetchMeta:e.meta??null};case"success":return{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return isCancelledError(s)&&s.revert&&br(this,ua)?{...br(this,ua),fetchStatus:"idle"}:{...i,error:s,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),notifyManager.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),br(this,Ci).notify({query:this,type:"updated",action:e})})},to);function fetchState(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:canFetch(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function getDefaultState$1(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var us,ro,QueryCache=(ro=class extends Subscribable{constructor(e={}){super();Nr(this,us);this.config=e,Pr(this,us,new Map)}build(e,n,i){const s=n.queryKey,a=n.queryHash??hashQueryKeyByOptions(s,n);let l=this.get(a);return l||(l=new Query({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(s)}),this.add(l)),l}add(e){br(this,us).has(e.queryHash)||(br(this,us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=br(this,us).get(e.queryHash);n&&(e.destroy(),n===e&&br(this,us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return br(this,us).get(e)}getAll(){return[...br(this,us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>matchQuery(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>matchQuery(e,i)):n}notify(e){notifyManager.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},us=new WeakMap,ro),ls,hi,Ws,ds,_s,no,Mutation=(no=class extends Removable{constructor(e){super();Nr(this,ds);Nr(this,ls);Nr(this,hi);Nr(this,Ws);this.mutationId=e.mutationId,Pr(this,hi,e.mutationCache),Pr(this,ls,[]),this.state=e.state||getDefaultState(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){br(this,ls).includes(e)||(br(this,ls).push(e),this.clearGcTimeout(),br(this,hi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Pr(this,ls,br(this,ls).filter(n=>n!==e)),this.scheduleGc(),br(this,hi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){br(this,ls).length||(this.state.status==="pending"?this.scheduleGc():br(this,hi).remove(this))}continue(){var e;return((e=br(this,Ws))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze,Qe,ct,wt,qt,nr,ir,or,ur;const n=()=>{Mr(this,ds,_s).call(this,{type:"continue"})};Pr(this,Ws,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(hr,fr)=>{Mr(this,ds,_s).call(this,{type:"failed",failureCount:hr,error:fr})},onPause:()=>{Mr(this,ds,_s).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>br(this,hi).canRun(this)}));const i=this.state.status==="pending",s=!br(this,Ws).canStart();try{if(i)n();else{Mr(this,ds,_s).call(this,{type:"pending",variables:e,isPaused:s}),await((l=(a=br(this,hi).config).onMutate)==null?void 0:l.call(a,e,this));const fr=await((p=(f=this.options).onMutate)==null?void 0:p.call(f,e));fr!==this.state.context&&Mr(this,ds,_s).call(this,{type:"pending",context:fr,variables:e,isPaused:s})}const hr=await br(this,Ws).start();return await((B=(C=br(this,hi).config).onSuccess)==null?void 0:B.call(C,hr,e,this.state.context,this)),await((le=(N=this.options).onSuccess)==null?void 0:le.call(N,hr,e,this.state.context)),await((Ue=(Ee=br(this,hi).config).onSettled)==null?void 0:Ue.call(Ee,hr,null,this.state.variables,this.state.context,this)),await((Ze=(ze=this.options).onSettled)==null?void 0:Ze.call(ze,hr,null,e,this.state.context)),Mr(this,ds,_s).call(this,{type:"success",data:hr}),hr}catch(hr){try{throw await((ct=(Qe=br(this,hi).config).onError)==null?void 0:ct.call(Qe,hr,e,this.state.context,this)),await((qt=(wt=this.options).onError)==null?void 0:qt.call(wt,hr,e,this.state.context)),await((ir=(nr=br(this,hi).config).onSettled)==null?void 0:ir.call(nr,void 0,hr,this.state.variables,this.state.context,this)),await((ur=(or=this.options).onSettled)==null?void 0:ur.call(or,void 0,hr,e,this.state.context)),hr}finally{Mr(this,ds,_s).call(this,{type:"error",error:hr})}}finally{br(this,hi).runNext(this)}}},ls=new WeakMap,hi=new WeakMap,Ws=new WeakMap,ds=new WeakSet,_s=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),notifyManager.batch(()=>{br(this,ls).forEach(i=>{i.onMutationUpdate(e)}),br(this,hi).notify({mutation:this,type:"updated",action:e})})},no);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ps,Qi,Ca,io,MutationCache=(io=class extends Subscribable{constructor(e={}){super();Nr(this,ps);Nr(this,Qi);Nr(this,Ca);this.config=e,Pr(this,ps,new Set),Pr(this,Qi,new Map),Pr(this,Ca,0)}build(e,n,i){const s=new Mutation({mutationCache:this,mutationId:++Fs(this,Ca)._,options:e.defaultMutationOptions(n),state:i});return this.add(s),s}add(e){br(this,ps).add(e);const n=scopeFor(e);if(typeof n=="string"){const i=br(this,Qi).get(n);i?i.push(e):br(this,Qi).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(br(this,ps).delete(e)){const n=scopeFor(e);if(typeof n=="string"){const i=br(this,Qi).get(n);if(i)if(i.length>1){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}else i[0]===e&&br(this,Qi).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=scopeFor(e);if(typeof n=="string"){const i=br(this,Qi).get(n),s=i==null?void 0:i.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var i;const n=scopeFor(e);if(typeof n=="string"){const s=(i=br(this,Qi).get(n))==null?void 0:i.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){notifyManager.batch(()=>{br(this,ps).forEach(e=>{this.notify({type:"removed",mutation:e})}),br(this,ps).clear(),br(this,Qi).clear()})}getAll(){return Array.from(br(this,ps))}find(e){const n={exact:!0,...e};return this.getAll().find(i=>matchMutation(n,i))}findAll(e={}){return this.getAll().filter(n=>matchMutation(e,n))}notify(e){notifyManager.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return notifyManager.batch(()=>Promise.all(e.map(n=>n.continue().catch(noop$6))))}},ps=new WeakMap,Qi=new WeakMap,Ca=new WeakMap,io);function scopeFor(t){var e;return(e=t.options.scope)==null?void 0:e.id}function infiniteQueryBehavior(t){return{onFetch:(e,n)=>{var B,N,le,Ee,Ue;const i=e.options,s=(le=(N=(B=e.fetchOptions)==null?void 0:B.meta)==null?void 0:N.fetchMore)==null?void 0:le.direction,a=((Ee=e.state.data)==null?void 0:Ee.pages)||[],l=((Ue=e.state.data)==null?void 0:Ue.pageParams)||[];let f={pages:[],pageParams:[]},p=0;const C=async()=>{let ze=!1;const Ze=wt=>{Object.defineProperty(wt,"signal",{enumerable:!0,get:()=>(e.signal.aborted?ze=!0:e.signal.addEventListener("abort",()=>{ze=!0}),e.signal)})},Qe=ensureQueryFn(e.options,e.fetchOptions),ct=async(wt,qt,nr)=>{if(ze)return Promise.reject();if(qt==null&&wt.pages.length)return Promise.resolve(wt);const ir={client:e.client,queryKey:e.queryKey,pageParam:qt,direction:nr?"backward":"forward",meta:e.options.meta};Ze(ir);const or=await Qe(ir),{maxPages:ur}=e.options,hr=nr?addToStart:addToEnd;return{pages:hr(wt.pages,or,ur),pageParams:hr(wt.pageParams,qt,ur)}};if(s&&a.length){const wt=s==="backward",qt=wt?getPreviousPageParam:getNextPageParam,nr={pages:a,pageParams:l},ir=qt(i,nr);f=await ct(nr,ir,wt)}else{const wt=t??a.length;do{const qt=p===0?l[0]??i.initialPageParam:getNextPageParam(i,f);if(p>0&&qt==null)break;f=await ct(f,qt),p++}while(p<wt)}return f};e.options.persister?e.fetchFn=()=>{var ze,Ze;return(Ze=(ze=e.options).persister)==null?void 0:Ze.call(ze,C,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=C}}}function getNextPageParam(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function getPreviousPageParam(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var ai,Es,ks,la,da,Os,fa,ha,so,QueryClient=(so=class{constructor(t={}){Nr(this,ai);Nr(this,Es);Nr(this,ks);Nr(this,la);Nr(this,da);Nr(this,Os);Nr(this,fa);Nr(this,ha);Pr(this,ai,t.queryCache||new QueryCache),Pr(this,Es,t.mutationCache||new MutationCache),Pr(this,ks,t.defaultOptions||{}),Pr(this,la,new Map),Pr(this,da,new Map),Pr(this,Os,0)}mount(){Fs(this,Os)._++,br(this,Os)===1&&(Pr(this,fa,focusManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),br(this,ai).onFocus())})),Pr(this,ha,onlineManager.subscribe(async t=>{t&&(await this.resumePausedMutations(),br(this,ai).onOnline())})))}unmount(){var t,e;Fs(this,Os)._--,br(this,Os)===0&&((t=br(this,fa))==null||t.call(this),Pr(this,fa,void 0),(e=br(this,ha))==null||e.call(this),Pr(this,ha,void 0))}isFetching(t){return br(this,ai).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return br(this,Es).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=br(this,ai).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=br(this,ai).build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(resolveStaleTime(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return br(this,ai).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),s=br(this,ai).get(i.queryHash),a=s==null?void 0:s.state.data,l=functionalUpdate(e,a);if(l!==void 0)return br(this,ai).build(this,i).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return notifyManager.batch(()=>br(this,ai).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=br(this,ai).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=br(this,ai);notifyManager.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=br(this,ai);return notifyManager.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=notifyManager.batch(()=>br(this,ai).findAll(t).map(s=>s.cancel(n)));return Promise.all(i).then(noop$6).catch(noop$6)}invalidateQueries(t,e={}){return notifyManager.batch(()=>(br(this,ai).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=notifyManager.batch(()=>br(this,ai).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(noop$6)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(i).then(noop$6)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=br(this,ai).build(this,e);return n.isStaleByTime(resolveStaleTime(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(noop$6).catch(noop$6)}fetchInfiniteQuery(t){return t.behavior=infiniteQueryBehavior(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(noop$6).catch(noop$6)}ensureInfiniteQueryData(t){return t.behavior=infiniteQueryBehavior(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return onlineManager.isOnline()?br(this,Es).resumePausedMutations():Promise.resolve()}getQueryCache(){return br(this,ai)}getMutationCache(){return br(this,Es)}getDefaultOptions(){return br(this,ks)}setDefaultOptions(t){Pr(this,ks,t)}setQueryDefaults(t,e){br(this,la).set(hashKey(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...br(this,la).values()],n={};return e.forEach(i=>{partialMatchKey(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){br(this,da).set(hashKey(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...br(this,da).values()],n={};return e.forEach(i=>{partialMatchKey(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...br(this,ks).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=hashQueryKeyByOptions(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===skipToken&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...br(this,ks).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){br(this,ai).clear(),br(this,Es).clear()}},ai=new WeakMap,Es=new WeakMap,ks=new WeakMap,la=new WeakMap,da=new WeakMap,Os=new WeakMap,fa=new WeakMap,ha=new WeakMap,so),bi,Hn,Aa,pi,Hs,pa,Bs,Rs,Ta,ma,ga,Ks,Zs,Is,ba,Kn,$a,Ma,Da,Na,Fa,qa,Ua,La,ho,ao,QueryObserver=(ao=class extends Subscribable{constructor(e,n){super();Nr(this,Kn);Nr(this,bi);Nr(this,Hn);Nr(this,Aa);Nr(this,pi);Nr(this,Hs);Nr(this,pa);Nr(this,Bs);Nr(this,Rs);Nr(this,Ta);Nr(this,ma);Nr(this,ga);Nr(this,Ks);Nr(this,Zs);Nr(this,Is);Nr(this,ba,new Set);this.options=n,Pr(this,bi,e),Pr(this,Rs,null),Pr(this,Bs,pendingThenable()),this.options.experimental_prefetchInRender||br(this,Bs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(br(this,Hn).addObserver(this),shouldFetchOnMount(br(this,Hn),this.options)?Mr(this,Kn,$a).call(this):this.updateResult(),Mr(this,Kn,Fa).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return shouldFetchOn(br(this,Hn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return shouldFetchOn(br(this,Hn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Mr(this,Kn,qa).call(this),Mr(this,Kn,Ua).call(this),br(this,Hn).removeObserver(this)}setOptions(e){const n=this.options,i=br(this,Hn);if(this.options=br(this,bi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof resolveEnabled(this.options.enabled,br(this,Hn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Mr(this,Kn,La).call(this),br(this,Hn).setOptions(this.options),n._defaulted&&!shallowEqualObjects(this.options,n)&&br(this,bi).getQueryCache().notify({type:"observerOptionsUpdated",query:br(this,Hn),observer:this});const s=this.hasListeners();s&&shouldFetchOptionally(br(this,Hn),i,this.options,n)&&Mr(this,Kn,$a).call(this),this.updateResult(),s&&(br(this,Hn)!==i||resolveEnabled(this.options.enabled,br(this,Hn))!==resolveEnabled(n.enabled,br(this,Hn))||resolveStaleTime(this.options.staleTime,br(this,Hn))!==resolveStaleTime(n.staleTime,br(this,Hn)))&&Mr(this,Kn,Ma).call(this);const a=Mr(this,Kn,Da).call(this);s&&(br(this,Hn)!==i||resolveEnabled(this.options.enabled,br(this,Hn))!==resolveEnabled(n.enabled,br(this,Hn))||a!==br(this,Is))&&Mr(this,Kn,Na).call(this,a)}getOptimisticResult(e){const n=br(this,bi).getQueryCache().build(br(this,bi),e),i=this.createResult(n,e);return shouldAssignObserverCurrentProperties(this,i)&&(Pr(this,pi,i),Pr(this,pa,this.options),Pr(this,Hs,br(this,Hn).state)),i}getCurrentResult(){return br(this,pi)}trackResult(e,n){const i={};return Object.keys(e).forEach(s=>{Object.defineProperty(i,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),i}trackProp(e){br(this,ba).add(e)}getCurrentQuery(){return br(this,Hn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=br(this,bi).defaultQueryOptions(e),i=br(this,bi).getQueryCache().build(br(this,bi),n);return i.fetch().then(()=>this.createResult(i,n))}fetch(e){return Mr(this,Kn,$a).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),br(this,pi)))}createResult(e,n){var hr;const i=br(this,Hn),s=this.options,a=br(this,pi),l=br(this,Hs),f=br(this,pa),C=e!==i?e.state:br(this,Aa),{state:B}=e;let N={...B},le=!1,Ee;if(n._optimisticResults){const fr=this.hasListeners(),ar=!fr&&shouldFetchOnMount(e,n),Lt=fr&&shouldFetchOptionally(e,i,n,s);(ar||Lt)&&(N={...N,...fetchState(B.data,e.options)}),n._optimisticResults==="isRestoring"&&(N.fetchStatus="idle")}let{error:Ue,errorUpdatedAt:ze,status:Ze}=N;Ee=N.data;let Qe=!1;if(n.placeholderData!==void 0&&Ee===void 0&&Ze==="pending"){let fr;a!=null&&a.isPlaceholderData&&n.placeholderData===(f==null?void 0:f.placeholderData)?(fr=a.data,Qe=!0):fr=typeof n.placeholderData=="function"?n.placeholderData((hr=br(this,ga))==null?void 0:hr.state.data,br(this,ga)):n.placeholderData,fr!==void 0&&(Ze="success",Ee=replaceData(a==null?void 0:a.data,fr,n),le=!0)}if(n.select&&Ee!==void 0&&!Qe)if(a&&Ee===(l==null?void 0:l.data)&&n.select===br(this,Ta))Ee=br(this,ma);else try{Pr(this,Ta,n.select),Ee=n.select(Ee),Ee=replaceData(a==null?void 0:a.data,Ee,n),Pr(this,ma,Ee),Pr(this,Rs,null)}catch(fr){Pr(this,Rs,fr)}br(this,Rs)&&(Ue=br(this,Rs),Ee=br(this,ma),ze=Date.now(),Ze="error");const ct=N.fetchStatus==="fetching",wt=Ze==="pending",qt=Ze==="error",nr=wt&&ct,ir=Ee!==void 0,ur={status:Ze,fetchStatus:N.fetchStatus,isPending:wt,isSuccess:Ze==="success",isError:qt,isInitialLoading:nr,isLoading:nr,data:Ee,dataUpdatedAt:N.dataUpdatedAt,error:Ue,errorUpdatedAt:ze,failureCount:N.fetchFailureCount,failureReason:N.fetchFailureReason,errorUpdateCount:N.errorUpdateCount,isFetched:N.dataUpdateCount>0||N.errorUpdateCount>0,isFetchedAfterMount:N.dataUpdateCount>C.dataUpdateCount||N.errorUpdateCount>C.errorUpdateCount,isFetching:ct,isRefetching:ct&&!wt,isLoadingError:qt&&!ir,isPaused:N.fetchStatus==="paused",isPlaceholderData:le,isRefetchError:qt&&ir,isStale:isStale(e,n),refetch:this.refetch,promise:br(this,Bs)};if(this.options.experimental_prefetchInRender){const fr=Vt=>{ur.status==="error"?Vt.reject(ur.error):ur.data!==void 0&&Vt.resolve(ur.data)},ar=()=>{const Vt=Pr(this,Bs,ur.promise=pendingThenable());fr(Vt)},Lt=br(this,Bs);switch(Lt.status){case"pending":e.queryHash===i.queryHash&&fr(Lt);break;case"fulfilled":(ur.status==="error"||ur.data!==Lt.value)&&ar();break;case"rejected":(ur.status!=="error"||ur.error!==Lt.reason)&&ar();break}}return ur}updateResult(){const e=br(this,pi),n=this.createResult(br(this,Hn),this.options);if(Pr(this,Hs,br(this,Hn).state),Pr(this,pa,this.options),br(this,Hs).data!==void 0&&Pr(this,ga,br(this,Hn)),shallowEqualObjects(n,e))return;Pr(this,pi,n);const i=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!br(this,ba).size)return!0;const l=new Set(a??br(this,ba));return this.options.throwOnError&&l.add("error"),Object.keys(br(this,pi)).some(f=>{const p=f;return br(this,pi)[p]!==e[p]&&l.has(p)})};Mr(this,Kn,ho).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Mr(this,Kn,Fa).call(this)}},bi=new WeakMap,Hn=new WeakMap,Aa=new WeakMap,pi=new WeakMap,Hs=new WeakMap,pa=new WeakMap,Bs=new WeakMap,Rs=new WeakMap,Ta=new WeakMap,ma=new WeakMap,ga=new WeakMap,Ks=new WeakMap,Zs=new WeakMap,Is=new WeakMap,ba=new WeakMap,Kn=new WeakSet,$a=function(e){Mr(this,Kn,La).call(this);let n=br(this,Hn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(noop$6)),n},Ma=function(){Mr(this,Kn,qa).call(this);const e=resolveStaleTime(this.options.staleTime,br(this,Hn));if(isServer||br(this,pi).isStale||!isValidTimeout(e))return;const i=timeUntilStale(br(this,pi).dataUpdatedAt,e)+1;Pr(this,Ks,setTimeout(()=>{br(this,pi).isStale||this.updateResult()},i))},Da=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(br(this,Hn)):this.options.refetchInterval)??!1},Na=function(e){Mr(this,Kn,Ua).call(this),Pr(this,Is,e),!(isServer||resolveEnabled(this.options.enabled,br(this,Hn))===!1||!isValidTimeout(br(this,Is))||br(this,Is)===0)&&Pr(this,Zs,setInterval(()=>{(this.options.refetchIntervalInBackground||focusManager.isFocused())&&Mr(this,Kn,$a).call(this)},br(this,Is)))},Fa=function(){Mr(this,Kn,Ma).call(this),Mr(this,Kn,Na).call(this,Mr(this,Kn,Da).call(this))},qa=function(){br(this,Ks)&&(clearTimeout(br(this,Ks)),Pr(this,Ks,void 0))},Ua=function(){br(this,Zs)&&(clearInterval(br(this,Zs)),Pr(this,Zs,void 0))},La=function(){const e=br(this,bi).getQueryCache().build(br(this,bi),this.options);if(e===br(this,Hn))return;const n=br(this,Hn);Pr(this,Hn,e),Pr(this,Aa,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},ho=function(e){notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(br(this,pi))}),br(this,bi).getQueryCache().notify({query:br(this,Hn),type:"observerResultsUpdated"})})},ao);function shouldLoadOnMount(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function shouldFetchOnMount(t,e){return shouldLoadOnMount(t,e)||t.state.data!==void 0&&shouldFetchOn(t,e,e.refetchOnMount)}function shouldFetchOn(t,e,n){if(resolveEnabled(e.enabled,t)!==!1){const i=typeof n=="function"?n(t):n;return i==="always"||i!==!1&&isStale(t,e)}return!1}function shouldFetchOptionally(t,e,n,i){return(t!==e||resolveEnabled(i.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&isStale(t,n)}function isStale(t,e){return resolveEnabled(e.enabled,t)!==!1&&t.isStaleByTime(resolveStaleTime(e.staleTime,t))}function shouldAssignObserverCurrentProperties(t,e){return!shallowEqualObjects(t.getCurrentResult(),e)}var Ps,js,_i,ms,bs,Oa,za,oo,MutationObserver$1=(oo=class extends Subscribable{constructor(n,i){super();Nr(this,bs);Nr(this,Ps);Nr(this,js);Nr(this,_i);Nr(this,ms);Pr(this,Ps,n),this.setOptions(i),this.bindMethods(),Mr(this,bs,Oa).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const i=this.options;this.options=br(this,Ps).defaultMutationOptions(n),shallowEqualObjects(this.options,i)||br(this,Ps).getMutationCache().notify({type:"observerOptionsUpdated",mutation:br(this,_i),observer:this}),i!=null&&i.mutationKey&&this.options.mutationKey&&hashKey(i.mutationKey)!==hashKey(this.options.mutationKey)?this.reset():((s=br(this,_i))==null?void 0:s.state.status)==="pending"&&br(this,_i).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=br(this,_i))==null||n.removeObserver(this)}onMutationUpdate(n){Mr(this,bs,Oa).call(this),Mr(this,bs,za).call(this,n)}getCurrentResult(){return br(this,js)}reset(){var n;(n=br(this,_i))==null||n.removeObserver(this),Pr(this,_i,void 0),Mr(this,bs,Oa).call(this),Mr(this,bs,za).call(this)}mutate(n,i){var s;return Pr(this,ms,i),(s=br(this,_i))==null||s.removeObserver(this),Pr(this,_i,br(this,Ps).getMutationCache().build(br(this,Ps),this.options)),br(this,_i).addObserver(this),br(this,_i).execute(n)}},Ps=new WeakMap,js=new WeakMap,_i=new WeakMap,ms=new WeakMap,bs=new WeakSet,Oa=function(){var i;const n=((i=br(this,_i))==null?void 0:i.state)??getDefaultState();Pr(this,js,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},za=function(n){notifyManager.batch(()=>{var i,s,a,l,f,p,C,B;if(br(this,ms)&&this.hasListeners()){const N=br(this,js).variables,le=br(this,js).context;(n==null?void 0:n.type)==="success"?((s=(i=br(this,ms)).onSuccess)==null||s.call(i,n.data,N,le),(l=(a=br(this,ms)).onSettled)==null||l.call(a,n.data,null,N,le)):(n==null?void 0:n.type)==="error"&&((p=(f=br(this,ms)).onError)==null||p.call(f,n.error,N,le),(B=(C=br(this,ms)).onSettled)==null||B.call(C,void 0,n.error,N,le))}this.listeners.forEach(N=>{N(br(this,js))})})},oo),QueryClientContext=reactExports.createContext(void 0),useQueryClient=t=>{const e=reactExports.useContext(QueryClientContext);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},QueryClientProvider=({client:t,children:e})=>(reactExports.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),jsxRuntimeExports.jsx(QueryClientContext.Provider,{value:t,children:e})),IsRestoringContext=reactExports.createContext(!1),useIsRestoring=()=>reactExports.useContext(IsRestoringContext);IsRestoringContext.Provider;function createValue(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var QueryErrorResetBoundaryContext=reactExports.createContext(createValue()),useQueryErrorResetBoundary=()=>reactExports.useContext(QueryErrorResetBoundaryContext);function shouldThrowError(t,e){return typeof t=="function"?t(...e):!!t}function noop$5(){}var ensurePreventErrorBoundaryRetry=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},useClearResetErrorBoundary=t=>{reactExports.useEffect(()=>{t.clearReset()},[t])},getHasError=({result:t,errorResetBoundary:e,throwOnError:n,query:i,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(s&&t.data===void 0||shouldThrowError(n,[t.error,i])),ensureSuspenseTimers=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...n)=>Math.max(e(...n),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},willFetch=(t,e)=>t.isLoading&&t.isFetching&&!e,shouldSuspend=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,fetchOptimistic=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function useBaseQuery(t,e,n){var N,le,Ee,Ue,ze;const i=useQueryClient(),s=useIsRestoring(),a=useQueryErrorResetBoundary(),l=i.defaultQueryOptions(t);(le=(N=i.getDefaultOptions().queries)==null?void 0:N._experimental_beforeQuery)==null||le.call(N,l),l._optimisticResults=s?"isRestoring":"optimistic",ensureSuspenseTimers(l),ensurePreventErrorBoundaryRetry(l,a),useClearResetErrorBoundary(a);const f=!i.getQueryCache().get(l.queryHash),[p]=reactExports.useState(()=>new e(i,l)),C=p.getOptimisticResult(l),B=!s&&t.subscribed!==!1;if(reactExports.useSyncExternalStore(reactExports.useCallback(Ze=>{const Qe=B?p.subscribe(notifyManager.batchCalls(Ze)):noop$5;return p.updateResult(),Qe},[p,B]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),reactExports.useEffect(()=>{p.setOptions(l)},[l,p]),shouldSuspend(l,C))throw fetchOptimistic(l,p,a);if(getHasError({result:C,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw C.error;if((Ue=(Ee=i.getDefaultOptions().queries)==null?void 0:Ee._experimental_afterQuery)==null||Ue.call(Ee,l,C),l.experimental_prefetchInRender&&!isServer&&willFetch(C,s)){const Ze=f?fetchOptimistic(l,p,a):(ze=i.getQueryCache().get(l.queryHash))==null?void 0:ze.promise;Ze==null||Ze.catch(noop$5).finally(()=>{p.updateResult()})}return l.notifyOnChangeProps?C:p.trackResult(C)}function useQuery(t,e){return useBaseQuery(t,QueryObserver)}function useMutation(t,e){const n=useQueryClient(),[i]=reactExports.useState(()=>new MutationObserver$1(n,t));reactExports.useEffect(()=>{i.setOptions(t)},[i,t]);const s=reactExports.useSyncExternalStore(reactExports.useCallback(l=>i.subscribe(notifyManager.batchCalls(l)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),a=reactExports.useCallback((l,f)=>{i.mutate(l,f).catch(noop$5)},[i]);if(s.error&&shouldThrowError(i.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}const __vite_import_meta_env__$2={},createStoreImpl=t=>{let e;const n=new Set,i=(B,N)=>{const le=typeof B=="function"?B(e):B;if(!Object.is(le,e)){const Ee=e;e=N??(typeof le!="object"||le===null)?le:Object.assign({},e,le),n.forEach(Ue=>Ue(e,Ee))}},s=()=>e,p={setState:i,getState:s,getInitialState:()=>C,subscribe:B=>(n.add(B),()=>n.delete(B)),destroy:()=>{(__vite_import_meta_env__$2?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},C=e=t(i,s,p);return p},createStore=t=>t?createStoreImpl(t):createStoreImpl;var withSelector={exports:{}},withSelector_production={},shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var objectIs$1=typeof Object.is=="function"?Object.is:is$1,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$2=React$1.useDebugValue;function useSyncExternalStore$2(t,e){var n=e(),i=useState({inst:{value:n,getSnapshot:e}}),s=i[0].inst,a=i[1];return useLayoutEffect(function(){s.value=n,s.getSnapshot=e,checkIfSnapshotChanged(s)&&a({inst:s})},[t,n,e]),useEffect$1(function(){return checkIfSnapshotChanged(s)&&a({inst:s}),t(function(){checkIfSnapshotChanged(s)&&a({inst:s})})},[t]),useDebugValue$2(n),n}function checkIfSnapshotChanged(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!objectIs$1(t,n)}catch{return!0}}function useSyncExternalStore$1(t,e){return e()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var objectIs=typeof Object.is=="function"?Object.is:is,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue$1=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(t,e,n,i,s){var a=useRef(null);if(a.current===null){var l={hasValue:!1,value:null};a.current=l}else l=a.current;a=useMemo(function(){function p(Ee){if(!C){if(C=!0,B=Ee,Ee=i(Ee),s!==void 0&&l.hasValue){var Ue=l.value;if(s(Ue,Ee))return N=Ue}return N=Ee}if(Ue=N,objectIs(B,Ee))return Ue;var ze=i(Ee);return s!==void 0&&s(Ue,ze)?(B=Ee,Ue):(B=Ee,N=ze)}var C=!1,B,N,le=n===void 0?null:n;return[function(){return p(e())},le===null?void 0:function(){return p(le())}]},[e,n,i,s]);var f=useSyncExternalStore(t,a[0],a[1]);return useEffect(function(){l.hasValue=!0,l.value=f},[f]),useDebugValue$1(f),f};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs$2(withSelectorExports),__vite_import_meta_env__$1={},{useDebugValue}=React$2,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;let didWarnAboutEqualityFn=!1;const identity$1=t=>t;function useStore(t,e=identity$1,n){(__vite_import_meta_env__$1?"production":void 0)!=="production"&&n&&!didWarnAboutEqualityFn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),didWarnAboutEqualityFn=!0);const i=useSyncExternalStoreWithSelector(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return useDebugValue(i),i}const createImpl=t=>{(__vite_import_meta_env__$1?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?createStore(t):t,n=(i,s)=>useStore(e,i,s);return Object.assign(n,e),n},create=t=>t?createImpl(t):createImpl;function toPrimitive(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function toPropertyKey(t){var e=toPrimitive(t,"string");return typeof e=="symbol"?e:String(e)}function _defineProperty$1(t,e,n){return e=toPropertyKey(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ownKeys$2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$2(Object(n),!0).forEach(function(i){_defineProperty$1(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function mapValues(t,e){var n={};for(var i in t)n[i]=e(t[i],i);return n}var shouldApplyCompound=(t,e,n)=>{for(var i of Object.keys(t)){var s;if(t[i]!==((s=e[i])!==null&&s!==void 0?s:n[i]))return!1}return!0},createRuntimeFn=t=>{var e=n=>{var i=t.defaultClassName,s=_objectSpread2(_objectSpread2({},t.defaultVariants),n);for(var a in s){var l,f=(l=s[a])!==null&&l!==void 0?l:t.defaultVariants[a];if(f!=null){var p=f;typeof p=="boolean"&&(p=p===!0?"true":"false");var C=t.variantClassNames[a][p];C&&(i+=" "+C)}}for(var[B,N]of t.compoundVariants)shouldApplyCompound(B,s,t.defaultVariants)&&(i+=" "+N);return i};return e.variants=()=>Object.keys(t.variantClassNames),e.classNames={get base(){return t.defaultClassName.split(" ")[0]},get variants(){return mapValues(t.variantClassNames,n=>mapValues(n,i=>i.split(" ")[0]))}},e};const PACKAGE_VERSION$2="1.28.2",TARGETED_RPC_VERSION$2="1.48.0",CODE_TO_ERROR_TYPE$2={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};let SuiHTTPTransportError$2=class extends Error{},JsonRpcError$2=class extends SuiHTTPTransportError$2{constructor(e,n){super(e),this.code=n,this.type=CODE_TO_ERROR_TYPE$2[n]??"ServerError"}},SuiHTTPStatusError$2=class extends SuiHTTPTransportError$2{constructor(e,n,i){super(e),this.status=n,this.statusText=i}};var __typeError$e=t=>{throw TypeError(t)},__accessCheck$e=(t,e,n)=>e.has(t)||__typeError$e("Cannot "+n),__privateGet$e=(t,e,n)=>(__accessCheck$e(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$e=(t,e,n)=>e.has(t)?__typeError$e("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$d=(t,e,n,i)=>(__accessCheck$e(t,e,"write to private field"),e.set(t,n),n),__privateMethod$7=(t,e,n)=>(__accessCheck$e(t,e,"access private method"),n),__privateWrapper$2=(t,e,n,i)=>({set _(s){__privateSet$d(t,e,s)},get _(){return __privateGet$e(t,e,i)}}),_requestId$5,_disconnects$2,_webSocket$2,_connectionPromise$2,_subscriptions$2,_pendingRequests$2,_WebsocketClient_instances$2,setupWebSocket_fn$2,reconnect_fn$2;function getWebsocketUrl$2(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const DEFAULT_CLIENT_OPTIONS$2={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let WebsocketClient$2=class{constructor(e,n={}){if(__privateAdd$e(this,_WebsocketClient_instances$2),__privateAdd$e(this,_requestId$5,0),__privateAdd$e(this,_disconnects$2,0),__privateAdd$e(this,_webSocket$2,null),__privateAdd$e(this,_connectionPromise$2,null),__privateAdd$e(this,_subscriptions$2,new Set),__privateAdd$e(this,_pendingRequests$2,new Map),this.endpoint=e,this.options={...DEFAULT_CLIENT_OPTIONS$2,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=getWebsocketUrl$2(this.endpoint))}async makeRequest(e,n,i){const s=await __privateMethod$7(this,_WebsocketClient_instances$2,setupWebSocket_fn$2).call(this);return new Promise((a,l)=>{__privateSet$d(this,_requestId$5,__privateGet$e(this,_requestId$5)+1),__privateGet$e(this,_pendingRequests$2).set(__privateGet$e(this,_requestId$5),{resolve:a,reject:l,timeout:setTimeout(()=>{__privateGet$e(this,_pendingRequests$2).delete(__privateGet$e(this,_requestId$5)),l(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),i==null||i.addEventListener("abort",()=>{__privateGet$e(this,_pendingRequests$2).delete(__privateGet$e(this,_requestId$5)),l(i.reason)}),s.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet$e(this,_requestId$5),method:e,params:n}))}).then(({error:a,result:l})=>{if(a)throw new JsonRpcError$2(a.message,a.code);return l})}async subscribe(e){const n=new RpcSubscription$2(e);return __privateGet$e(this,_subscriptions$2).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}};_requestId$5=new WeakMap;_disconnects$2=new WeakMap;_webSocket$2=new WeakMap;_connectionPromise$2=new WeakMap;_subscriptions$2=new WeakMap;_pendingRequests$2=new WeakMap;_WebsocketClient_instances$2=new WeakSet;setupWebSocket_fn$2=function(){return __privateGet$e(this,_connectionPromise$2)?__privateGet$e(this,_connectionPromise$2):(__privateSet$d(this,_connectionPromise$2,new Promise(t=>{var e;(e=__privateGet$e(this,_webSocket$2))==null||e.close(),__privateSet$d(this,_webSocket$2,new this.options.WebSocketConstructor(this.endpoint)),__privateGet$e(this,_webSocket$2).addEventListener("open",()=>{__privateSet$d(this,_disconnects$2,0),t(__privateGet$e(this,_webSocket$2))}),__privateGet$e(this,_webSocket$2).addEventListener("close",()=>{__privateWrapper$2(this,_disconnects$2)._++,__privateGet$e(this,_disconnects$2)<=this.options.maxReconnects&&setTimeout(()=>{__privateMethod$7(this,_WebsocketClient_instances$2,reconnect_fn$2).call(this)},this.options.reconnectTimeout)}),__privateGet$e(this,_webSocket$2).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in i&&i.id!=null&&__privateGet$e(this,_pendingRequests$2).has(i.id)){const{resolve:s,timeout:a}=__privateGet$e(this,_pendingRequests$2).get(i.id);clearTimeout(a),s(i)}else if("params"in i){const{params:s}=i;__privateGet$e(this,_subscriptions$2).forEach(a=>{a.subscriptionId===s.subscription&&s.subscription===a.subscriptionId&&a.onMessage(s.result)})}})})),__privateGet$e(this,_connectionPromise$2))};reconnect_fn$2=async function(){var t;return(t=__privateGet$e(this,_webSocket$2))==null||t.close(),__privateSet$d(this,_connectionPromise$2,null),Promise.allSettled([...__privateGet$e(this,_subscriptions$2)].map(e=>e.subscribe(this)))};let RpcSubscription$2=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[n]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const n=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=n)}};var __typeError$d=t=>{throw TypeError(t)},__accessCheck$d=(t,e,n)=>e.has(t)||__typeError$d("Cannot "+n),__privateGet$d=(t,e,n)=>(__accessCheck$d(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$d=(t,e,n)=>e.has(t)?__typeError$d("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$c=(t,e,n,i)=>(__accessCheck$d(t,e,"write to private field"),e.set(t,n),n),__privateMethod$6=(t,e,n)=>(__accessCheck$d(t,e,"access private method"),n),_requestId$4,_options$2,_websocketClient$2,_SuiHTTPTransport_instances$2,getWebsocketClient_fn$2;let SuiHTTPTransport$2=class{constructor(e){__privateAdd$d(this,_SuiHTTPTransport_instances$2),__privateAdd$d(this,_requestId$4,0),__privateAdd$d(this,_options$2),__privateAdd$d(this,_websocketClient$2),__privateSet$c(this,_options$2,e)}fetch(e,n){const i=__privateGet$d(this,_options$2).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(e,n)}async request(e){var s,a;__privateSet$c(this,_requestId$4,__privateGet$d(this,_requestId$4)+1);const n=await this.fetch(((s=__privateGet$d(this,_options$2).rpc)==null?void 0:s.url)??__privateGet$d(this,_options$2).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":PACKAGE_VERSION$2,"Client-Target-Api-Version":TARGETED_RPC_VERSION$2,"Client-Request-Method":e.method,...(a=__privateGet$d(this,_options$2).rpc)==null?void 0:a.headers},body:JSON.stringify({jsonrpc:"2.0",id:__privateGet$d(this,_requestId$4),method:e.method,params:e.params})});if(!n.ok)throw new SuiHTTPStatusError$2(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new JsonRpcError$2(i.error.message,i.error.code);return i.result}async subscribe(e){const n=await __privateMethod$6(this,_SuiHTTPTransport_instances$2,getWebsocketClient_fn$2).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{n()})),async()=>!!await n()}};_requestId$4=new WeakMap;_options$2=new WeakMap;_websocketClient$2=new WeakMap;_SuiHTTPTransport_instances$2=new WeakSet;getWebsocketClient_fn$2=function(){var t;if(!__privateGet$d(this,_websocketClient$2)){const e=__privateGet$d(this,_options$2).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");__privateSet$c(this,_websocketClient$2,new WebsocketClient$2(((t=__privateGet$d(this,_options$2).websocket)==null?void 0:t.url)??__privateGet$d(this,_options$2).url,{WebSocketConstructor:e,...__privateGet$d(this,_options$2).websocket}))}return __privateGet$d(this,_websocketClient$2)};function getFullnodeUrl$2(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var __typeError$c=t=>{throw TypeError(t)},__accessCheck$c=(t,e,n)=>e.has(t)||__typeError$c("Cannot "+n),__privateGet$c=(t,e,n)=>(__accessCheck$c(t,e,"read from private field"),e.get(t)),__privateAdd$c=(t,e,n)=>e.has(t)?__typeError$c("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$b=(t,e,n,i)=>(__accessCheck$c(t,e,"write to private field"),e.set(t,n),n),_prefix$2,_cache$2;const _ClientCache$2=class po{constructor({prefix:e,cache:n}={}){__privateAdd$c(this,_prefix$2),__privateAdd$c(this,_cache$2),__privateSet$b(this,_prefix$2,e??[]),__privateSet$b(this,_cache$2,n??new Map)}read(e,n){const i=[__privateGet$c(this,_prefix$2),...e].join(":");if(__privateGet$c(this,_cache$2).has(i))return __privateGet$c(this,_cache$2).get(i);const s=n();return __privateGet$c(this,_cache$2).set(i,s),typeof s=="object"&&s!==null&&"then"in s?Promise.resolve(s).then(a=>(__privateGet$c(this,_cache$2).set(i,a),a)).catch(a=>{throw __privateGet$c(this,_cache$2).delete(i),a}):s}clear(e){const n=[...__privateGet$c(this,_prefix$2),...e??[]].join(":");if(!n){__privateGet$c(this,_cache$2).clear();return}for(const i of __privateGet$c(this,_cache$2).keys())i.startsWith(n)&&__privateGet$c(this,_cache$2).delete(i)}scope(e){return new po({prefix:[...__privateGet$c(this,_prefix$2),...Array.isArray(e)?e:[e]],cache:__privateGet$c(this,_cache$2)})}};_prefix$2=new WeakMap;_cache$2=new WeakMap;let ClientCache$2=_ClientCache$2,Experimental_BaseClient$2=class{constructor({network:e}){this.cache=new ClientCache$2,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(n=>{if("experimental_asClientExtension"in n){const{name:i,register:s}=n.experimental_asClientExtension();return[i,{value:s(this)}]}return[n.name,{value:n.register(this)}]})))}},Experimental_CoreClient$2=class extends Experimental_BaseClient$2{constructor(){super(...arguments),this.core=this}async getObject(e){const{objectId:n}=e,{objects:[i]}=await this.getObjects({objectIds:[n]});if(i instanceof Error)throw i;return{object:i}}async getDynamicField(e){const n=deriveDynamicFieldID$3(e.parentId,TypeTagSerializer$3.parseFromStr(e.name.type),e.name.bcs),{objects:[i]}=await this.getObjects({objectIds:[n]});if(i instanceof Error)throw i;const s=parseStructTag$3(i.type);return{dynamicField:{id:i.id,digest:i.digest,version:i.version,type:i.type,name:{type:typeof s.typeParams[0]=="string"?s.typeParams[0]:normalizeStructTag$3(s.typeParams[0]),bcs:e.name.bcs},value:{type:typeof s.typeParams[1]=="string"?s.typeParams[1]:normalizeStructTag$3(s.typeParams[1]),bcs:i.content.slice(SUI_ADDRESS_LENGTH$3+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:n=60*1e3,...i}){const s=e?AbortSignal.any([AbortSignal.timeout(n),e]):AbortSignal.timeout(n),a=new Promise((l,f)=>{s.addEventListener("abort",()=>f(s.reason))});for(a.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({...i,signal:s})}catch{await Promise.race([new Promise(f=>setTimeout(f,2e3)),a])}}}},SuiClientError$2=class extends Error{},ObjectError$2=class ea extends SuiClientError$2{constructor(e,n){super(n),this.code=e}static fromResponse(e,n){switch(e.code){case"notExists":return new ea(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new ea(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new ea(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new ea(e.code,`Display error: ${e.error}`);case"unknown":default:return new ea(e.code,`Unknown error while loading object${n?` ${n}`:""}`)}}};var __typeError$b=t=>{throw TypeError(t)},__accessCheck$b=(t,e,n)=>e.has(t)||__typeError$b("Cannot "+n),__privateGet$b=(t,e,n)=>(__accessCheck$b(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$b=(t,e,n)=>e.has(t)?__typeError$b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$a=(t,e,n,i)=>(__accessCheck$b(t,e,"write to private field"),e.set(t,n),n),_jsonRpcClient$2;let JSONRpcTransport$2=class extends Experimental_CoreClient$2{constructor(e){super({network:e.network}),__privateAdd$b(this,_jsonRpcClient$2),__privateSet$a(this,_jsonRpcClient$2,e)}async getObjects(e){const n=batch$2(e.objectIds,50),i=[];for(const s of n){const a=await __privateGet$b(this,_jsonRpcClient$2).multiGetObjects({ids:s,options:{showOwner:!0,showType:!0,showBcs:!0}});for(const[l,f]of a.entries())f.error?i.push(ObjectError$2.fromResponse(f.error,s[l])):i.push(parseObject$2(f.data))}return{objects:i}}async getOwnedObjects(e){const n=await __privateGet$b(this,_jsonRpcClient$2).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0}});return{objects:n.data.map(i=>{if(i.error)throw ObjectError$2.fromResponse(i.error);return parseObject$2(i.data)}),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getCoins(e){const n=await __privateGet$b(this,_jsonRpcClient$2).getCoins({owner:e.address,coinType:e.coinType});return{objects:n.data.map(i=>({id:i.coinObjectId,version:i.version,digest:i.digest,balance:i.balance,type:`0x2::coin::Coin<${i.coinType}>`,content:Coin$2.serialize({id:i.coinObjectId,balance:{value:i.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getBalance(e){const n=await __privateGet$b(this,_jsonRpcClient$2).getBalance({owner:e.address,coinType:e.coinType});return{balance:{coinType:n.coinType,balance:n.totalBalance}}}async getAllBalances(e){return{balances:(await __privateGet$b(this,_jsonRpcClient$2).getAllBalances({owner:e.address})).map(i=>({coinType:i.coinType,balance:i.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const n=await __privateGet$b(this,_jsonRpcClient$2).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0}});return{transaction:parseTransaction$2(n)}}async executeTransaction(e){const n=await __privateGet$b(this,_jsonRpcClient$2).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0}});return{transaction:parseTransaction$2(n)}}async dryRunTransaction(e){const n=Transaction$2.from(e.transaction),i=await __privateGet$b(this,_jsonRpcClient$2).dryRunTransactionBlock({transactionBlock:e.transaction});return{transaction:{digest:await n.getDigest(),effects:parseTransactionEffectsJson$2({effects:i.effects,objectChanges:i.objectChanges}),signatures:[],bcs:e.transaction}}}async getReferenceGasPrice(){const e=await __privateGet$b(this,_jsonRpcClient$2).getReferenceGasPrice();return{referenceGasPrice:String(e)}}async getDynamicFields(e){const n=await __privateGet$b(this,_jsonRpcClient$2).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:n.data.map(i=>({id:i.objectId,version:i.version,digest:i.digest,type:i.objectType,name:{type:i.name.type,bcs:fromBase64(i.bcsName)}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}};_jsonRpcClient$2=new WeakMap;function parseObject$2(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?fromBase64(t.bcs.bcsBytes):new Uint8Array,owner:parseOwner$2(t.owner)}}function parseOwner$2(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function parseTransaction$2(t){const e=suiBcs$3.SenderSignedData.parse(fromBase64(t.rawTransaction))[0];return{digest:t.digest,effects:parseTransactionEffects$2({effects:new Uint8Array(t.rawEffects),objectChanges:t.objectChanges??null}),bcs:suiBcs$3.TransactionData.serialize(e.intentMessage.value).toBytes(),signatures:e.txSignatures}}function parseTransactionEffects$2({effects:t,epoch:e,objectChanges:n}){const i=suiBcs$3.TransactionEffects.parse(t),s={};switch(n==null||n.forEach(a=>{a.type!=="published"&&(s[a.objectId]=a.objectType)}),i.$kind){case"V1":return parseTransactionEffectsV1$2({effects:i.V1});case"V2":return parseTransactionEffectsV2$2({bytes:t,effects:i.V2,epoch:e,objectTypes:s});default:throw new Error(`Unknown transaction effects version: ${i.$kind}`)}}function parseTransactionEffectsV1$2(t){throw new Error("V1 effects are not supported yet")}function parseTransactionEffectsV2$2({bytes:t,effects:e,epoch:n,objectTypes:i}){const s=e.changedObjects.map(([a,l])=>{var f,p,C,B,N,le;return{id:a,inputState:l.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((f=l.inputState.Exist)==null?void 0:f[0][0])??null,inputDigest:((p=l.inputState.Exist)==null?void 0:p[0][1])??null,inputOwner:((C=l.inputState.Exist)==null?void 0:C[1])??null,outputState:l.outputState.$kind==="NotExist"?"DoesNotExist":l.outputState.$kind,outputVersion:l.outputState.$kind==="PackageWrite"?(B=l.outputState.PackageWrite)==null?void 0:B[0]:l.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:l.outputState.$kind==="PackageWrite"?(N=l.outputState.PackageWrite)==null?void 0:N[1]:((le=l.outputState.ObjectWrite)==null?void 0:le[0])??null,outputOwner:l.outputState.ObjectWrite?l.outputState.ObjectWrite[1]:null,idOperation:l.idOperation.$kind,objectType:i[a]??null}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:s[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:s,unchangedSharedObjects:e.unchangedSharedObjects.map(([a,l])=>({kind:l.$kind,objectId:a,version:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[0]:l[l.$kind],digest:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[1]:null,objectType:i[a]??null})),auxiliaryDataDigest:e.auxDataDigest}}function parseTransactionEffectsJson$2({bytes:t,effects:e,epoch:n,objectChanges:i}){var l;const s=[],a=[];return i==null||i.forEach(f=>{var p,C,B,N;switch(f.type){case"published":s.push({id:f.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:null,idOperation:"Created",objectType:null});break;case"transferred":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:f.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$2(f.recipient),idOperation:"None",objectType:f.objectType});break;case"mutated":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.previousVersion,inputDigest:null,inputOwner:parseOwner$2(f.owner),outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$2(f.owner),idOperation:"None",objectType:f.objectType});break;case"deleted":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:((C=(p=e.deleted)==null?void 0:p.find(le=>le.objectId===f.objectId))==null?void 0:C.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted",objectType:f.objectType});break;case"wrapped":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:((N=(B=e.wrapped)==null?void 0:B.find(le=>le.objectId===f.objectId))==null?void 0:N.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:f.sender},idOperation:"None",objectType:f.objectType});break;case"created":s.push({id:f.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$2(f.owner),idOperation:"Created",objectType:f.objectType});break}}),{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(l=e.gasObject)==null?void 0:l.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:parseOwner$2(e.gasObject.owner),idOperation:"None",objectType:normalizeStructTag$3("0x2::coin::Coin<0x2::sui::SUI>")},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:s,unchangedSharedObjects:a,auxiliaryDataDigest:null}}const Balance$2=suiBcs$3.struct("Balance",{value:suiBcs$3.u64()}),Coin$2=suiBcs$3.struct("Coin",{id:suiBcs$3.Address,balance:Balance$2}),SUI_CLIENT_BRAND$2=Symbol.for("@mysten/SuiClient");function isSuiClient(t){return typeof t=="object"&&t!==null&&t[SUI_CLIENT_BRAND$2]===!0}let SuiClient$2=class extends Experimental_BaseClient$2{constructor(e){super({network:e.network??"unknown"}),this.core=new JSONRpcTransport$2(this),this.jsonRpc=this,this.transport=e.transport??new SuiHTTPTransport$2({url:e.url})}get[SUI_CLIENT_BRAND$2](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,n,{signal:i}={}){return await this.transport.request({method:e,params:n,signal:i})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!isValidSuiObjectId$3(normalizeSuiObjectId$3(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(i=>{if(!i||!isValidSuiObjectId$3(normalizeSuiObjectId$3(i)))throw new Error(`Invalid Sui Object id ${i}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!isValidTransactionDigest$3(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(i=>{if(!isValidTransactionDigest$3(i))throw new Error(`Invalid Transaction digest ${i}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:n,options:i,requestType:s,signal:a}){const l=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:toBase64(e),Array.isArray(n)?n:[n],i],signal:a});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:l.digest})}catch{}return l}async signAndExecuteTransaction({transaction:e,signer:n,...i}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(n.toSuiAddress()),s=await e.build({client:this}));const{signature:a,bytes:l}=await n.signTransaction(s);return this.executeTransactionBlock({transactionBlock:l,signature:a,...i})}async getTotalTransactionBlocks({signal:e}={}){const n=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(n)}async getReferenceGasPrice({signal:e}={}){const n=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(n)}async getStakes(e){if(!e.owner||!isValidSuiAddress$3(normalizeSuiAddress$3(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(n=>{if(!n||!isValidSuiObjectId$3(normalizeSuiObjectId$3(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var i,s;let n;if(isTransaction$2(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=toBase64(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=toBase64(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(i=e.signal)==null||i.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(s=e.gasPrice)==null?void 0:s.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:toBase64(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!isValidSuiObjectId$3(normalizeSuiObjectId$3(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const n=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(n)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const n=await this.getCheckpoint({id:"0",signal:e}),i=fromBase58(n.digest);return toHex$1(i.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...n}){const{nextCursor:i,hasNextPage:s,data:a}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit],signal:n.signal});return{hasNextPage:s,nextCursor:i,data:a.map(l=>normalizeSuiNSName$3(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async waitForTransaction({signal:e,timeout:n=60*1e3,pollInterval:i=2*1e3,...s}){const a=AbortSignal.timeout(n),l=new Promise((f,p)=>{a.addEventListener("abort",()=>p(a.reason))});for(l.catch(()=>{});!a.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(p=>setTimeout(p,i)),l])}}throw a.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}};function setBigUint64(t,e,n,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,i);const s=BigInt(32),a=BigInt(4294967295),l=Number(n>>s&a),f=Number(n&a),p=i?4:0,C=i?0:4;t.setUint32(e+p,l,i),t.setUint32(e+C,f,i)}class HashMD extends Hash$1{constructor(e,n,i,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=i,this.isLE=s,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this);const{view:n,buffer:i,blockLen:s}=this;e=toBytes(e);const a=e.length;for(let l=0;l<a;){const f=Math.min(s-this.pos,a-l);if(f===s){const p=createView(e);for(;s<=a-l;l+=s)this.process(p,l);continue}i.set(e.subarray(l,l+f),this.pos),this.pos+=f,l+=f,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:n,view:i,blockLen:s,isLE:a}=this;let{pos:l}=this;n[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(i,0),l=0);for(let N=l;N<s;N++)n[N]=0;setBigUint64(i,s-8,BigInt(this.length*8),a),this.process(i,0);const f=createView(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const C=p/4,B=this.get();if(C>B.length)throw new Error("_sha2: outputLen bigger than state");for(let N=0;N<C;N++)f.setUint32(4*N,B[N],a)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const i=e.slice(0,n);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:i,length:s,finished:a,destroyed:l,pos:f}=this;return e.length=s,e.pos=f,e.finished=a,e.destroyed=l,s%n&&e.buffer.set(i),e}}const[SHA512_Kh,SHA512_Kl]=u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:i,Bl:s,Ch:a,Cl:l,Dh:f,Dl:p,Eh:C,El:B,Fh:N,Fl:le,Gh:Ee,Gl:Ue,Hh:ze,Hl:Ze}=this;return[e,n,i,s,a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze]}set(e,n,i,s,a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze){this.Ah=e|0,this.Al=n|0,this.Bh=i|0,this.Bl=s|0,this.Ch=a|0,this.Cl=l|0,this.Dh=f|0,this.Dl=p|0,this.Eh=C|0,this.El=B|0,this.Fh=N|0,this.Fl=le|0,this.Gh=Ee|0,this.Gl=Ue|0,this.Hh=ze|0,this.Hl=Ze|0}process(e,n){for(let wt=0;wt<16;wt++,n+=4)SHA512_W_H[wt]=e.getUint32(n),SHA512_W_L[wt]=e.getUint32(n+=4);for(let wt=16;wt<80;wt++){const qt=SHA512_W_H[wt-15]|0,nr=SHA512_W_L[wt-15]|0,ir=u64.rotrSH(qt,nr,1)^u64.rotrSH(qt,nr,8)^u64.shrSH(qt,nr,7),or=u64.rotrSL(qt,nr,1)^u64.rotrSL(qt,nr,8)^u64.shrSL(qt,nr,7),ur=SHA512_W_H[wt-2]|0,hr=SHA512_W_L[wt-2]|0,fr=u64.rotrSH(ur,hr,19)^u64.rotrBH(ur,hr,61)^u64.shrSH(ur,hr,6),ar=u64.rotrSL(ur,hr,19)^u64.rotrBL(ur,hr,61)^u64.shrSL(ur,hr,6),Lt=u64.add4L(or,ar,SHA512_W_L[wt-7],SHA512_W_L[wt-16]),Vt=u64.add4H(Lt,ir,fr,SHA512_W_H[wt-7],SHA512_W_H[wt-16]);SHA512_W_H[wt]=Vt|0,SHA512_W_L[wt]=Lt|0}let{Ah:i,Al:s,Bh:a,Bl:l,Ch:f,Cl:p,Dh:C,Dl:B,Eh:N,El:le,Fh:Ee,Fl:Ue,Gh:ze,Gl:Ze,Hh:Qe,Hl:ct}=this;for(let wt=0;wt<80;wt++){const qt=u64.rotrSH(N,le,14)^u64.rotrSH(N,le,18)^u64.rotrBH(N,le,41),nr=u64.rotrSL(N,le,14)^u64.rotrSL(N,le,18)^u64.rotrBL(N,le,41),ir=N&Ee^~N&ze,or=le&Ue^~le&Ze,ur=u64.add5L(ct,nr,or,SHA512_Kl[wt],SHA512_W_L[wt]),hr=u64.add5H(ur,Qe,qt,ir,SHA512_Kh[wt],SHA512_W_H[wt]),fr=ur|0,ar=u64.rotrSH(i,s,28)^u64.rotrBH(i,s,34)^u64.rotrBH(i,s,39),Lt=u64.rotrSL(i,s,28)^u64.rotrBL(i,s,34)^u64.rotrBL(i,s,39),Vt=i&a^i&f^a&f,tt=s&l^s&p^l&p;Qe=ze|0,ct=Ze|0,ze=Ee|0,Ze=Ue|0,Ee=N|0,Ue=le|0,{h:N,l:le}=u64.add(C|0,B|0,hr|0,fr|0),C=f|0,B=p|0,f=a|0,p=l|0,a=i|0,l=s|0;const Ye=u64.add3L(fr,Lt,tt);i=u64.add3H(Ye,hr,ar,Vt),s=Ye|0}({h:i,l:s}=u64.add(this.Ah|0,this.Al|0,i|0,s|0)),{h:a,l}=u64.add(this.Bh|0,this.Bl|0,a|0,l|0),{h:f,l:p}=u64.add(this.Ch|0,this.Cl|0,f|0,p|0),{h:C,l:B}=u64.add(this.Dh|0,this.Dl|0,C|0,B|0),{h:N,l:le}=u64.add(this.Eh|0,this.El|0,N|0,le|0),{h:Ee,l:Ue}=u64.add(this.Fh|0,this.Fl|0,Ee|0,Ue|0),{h:ze,l:Ze}=u64.add(this.Gh|0,this.Gl|0,ze|0,Ze|0),{h:Qe,l:ct}=u64.add(this.Hh|0,this.Hl|0,Qe|0,ct|0),this.set(i,s,a,l,f,p,C,B,N,le,Ee,Ue,ze,Ze,Qe,ct)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512$3=wrapConstructor(()=>new SHA512);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$4=BigInt(1);function isBytes(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function abytes(t){if(!isBytes(t))throw new Error("Uint8Array expected")}function abool(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function hexToNumber(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_0n$3:BigInt("0x"+t)}const hasHexBuiltin=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(t){if(abytes(t),hasHexBuiltin)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=hexes[t[n]];return e}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(t){if(t>=asciis._0&&t<=asciis._9)return t-asciis._0;if(t>=asciis.A&&t<=asciis.F)return t-(asciis.A-10);if(t>=asciis.a&&t<=asciis.f)return t-(asciis.a-10)}function hexToBytes(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(hasHexBuiltin)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(n);for(let s=0,a=0;s<n;s++,a+=2){const l=asciiToBase16(t.charCodeAt(a)),f=asciiToBase16(t.charCodeAt(a+1));if(l===void 0||f===void 0){const p=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+a)}i[s]=l*16+f}return i}function bytesToNumberBE(t){return hexToNumber(bytesToHex(t))}function bytesToNumberLE(t){return abytes(t),hexToNumber(bytesToHex(Uint8Array.from(t).reverse()))}function numberToBytesBE(t,e){return hexToBytes(t.toString(16).padStart(e*2,"0"))}function numberToBytesLE(t,e){return numberToBytesBE(t,e).reverse()}function ensureBytes(t,e,n){let i;if(typeof e=="string")try{i=hexToBytes(e)}catch(a){throw new Error(t+" must be hex string or Uint8Array, cause: "+a)}else if(isBytes(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=i.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return i}function concatBytes(...t){let e=0;for(let i=0;i<t.length;i++){const s=t[i];abytes(s),e+=s.length}const n=new Uint8Array(e);for(let i=0,s=0;i<t.length;i++){const a=t[i];n.set(a,s),s+=a.length}return n}const isPosBig=t=>typeof t=="bigint"&&_0n$3<=t;function inRange(t,e,n){return isPosBig(t)&&isPosBig(e)&&isPosBig(n)&&e<=t&&t<n}function aInRange(t,e,n,i){if(!inRange(e,n,i))throw new Error("expected valid "+t+": "+n+" <= n < "+i+", got "+e)}function bitLen(t){let e;for(e=0;t>_0n$3;t>>=_1n$4,e+=1);return e}const bitMask=t=>(_1n$4<<BigInt(t))-_1n$4,validatorFns={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||isBytes(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function validateObject(t,e,n={}){const i=(s,a,l)=>{const f=validatorFns[a];if(typeof f!="function")throw new Error("invalid validator function");const p=t[s];if(!(l&&p===void 0)&&!f(p,t))throw new Error("param "+String(s)+" is invalid. Expected "+a+", got "+p)};for(const[s,a]of Object.entries(e))i(s,a,!1);for(const[s,a]of Object.entries(n))i(s,a,!0);return t}function memoized(t){const e=new WeakMap;return(n,...i)=>{const s=e.get(n);if(s!==void 0)return s;const a=t(n,...i);return e.set(n,a),a}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_3n=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$2=BigInt(8);function mod$2(t,e){const n=t%e;return n>=_0n$2?n:e+n}function pow$3(t,e,n){if(e<_0n$2)throw new Error("invalid exponent, negatives unsupported");if(n<=_0n$2)throw new Error("invalid modulus");if(n===_1n$3)return _0n$2;let i=_1n$3;for(;e>_0n$2;)e&_1n$3&&(i=i*t%n),t=t*t%n,e>>=_1n$3;return i}function pow2(t,e,n){let i=t;for(;e-- >_0n$2;)i*=i,i%=n;return i}function invert(t,e){if(t===_0n$2)throw new Error("invert: expected non-zero number");if(e<=_0n$2)throw new Error("invert: expected positive modulus, got "+e);let n=mod$2(t,e),i=e,s=_0n$2,a=_1n$3;for(;n!==_0n$2;){const f=i/n,p=i%n,C=s-a*f;i=n,n=p,s=a,a=C}if(i!==_1n$3)throw new Error("invert: does not exist");return mod$2(s,e)}function tonelliShanks(t){const e=(t-_1n$3)/_2n$2;let n,i,s;for(n=t-_1n$3,i=0;n%_2n$2===_0n$2;n/=_2n$2,i++);for(s=_2n$2;s<t&&pow$3(s,e,t)!==t-_1n$3;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(i===1){const l=(t+_1n$3)/_4n;return function(p,C){const B=p.pow(C,l);if(!p.eql(p.sqr(B),C))throw new Error("Cannot find square root");return B}}const a=(n+_1n$3)/_2n$2;return function(f,p){if(f.pow(p,e)===f.neg(f.ONE))throw new Error("Cannot find square root");let C=i,B=f.pow(f.mul(f.ONE,s),n),N=f.pow(p,a),le=f.pow(p,n);for(;!f.eql(le,f.ONE);){if(f.eql(le,f.ZERO))return f.ZERO;let Ee=1;for(let ze=f.sqr(le);Ee<C&&!f.eql(ze,f.ONE);Ee++)ze=f.sqr(ze);const Ue=f.pow(B,_1n$3<<BigInt(C-Ee-1));B=f.sqr(Ue),N=f.mul(N,Ue),le=f.mul(le,B),C=Ee}return N}}function FpSqrt(t){if(t%_4n===_3n){const e=(t+_1n$3)/_4n;return function(i,s){const a=i.pow(s,e);if(!i.eql(i.sqr(a),s))throw new Error("Cannot find square root");return a}}if(t%_8n$2===_5n$1){const e=(t-_5n$1)/_8n$2;return function(i,s){const a=i.mul(s,_2n$2),l=i.pow(a,e),f=i.mul(s,l),p=i.mul(i.mul(f,_2n$2),l),C=i.mul(f,i.sub(p,i.ONE));if(!i.eql(i.sqr(C),s))throw new Error("Cannot find square root");return C}}return tonelliShanks(t)}const isNegativeLE=(t,e)=>(mod$2(t,e)&_1n$3)===_1n$3,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=FIELD_FIELDS.reduce((i,s)=>(i[s]="function",i),e);return validateObject(t,n)}function FpPow(t,e,n){if(n<_0n$2)throw new Error("invalid exponent, negatives unsupported");if(n===_0n$2)return t.ONE;if(n===_1n$3)return e;let i=t.ONE,s=e;for(;n>_0n$2;)n&_1n$3&&(i=t.mul(i,s)),s=t.sqr(s),n>>=_1n$3;return i}function FpInvertBatch(t,e){const n=new Array(e.length),i=e.reduce((a,l,f)=>t.is0(l)?a:(n[f]=a,t.mul(a,l)),t.ONE),s=t.inv(i);return e.reduceRight((a,l,f)=>t.is0(l)?a:(n[f]=t.mul(a,n[f]),t.mul(a,l)),s),n}function nLength(t,e){const n=e!==void 0?e:t.toString(2).length,i=Math.ceil(n/8);return{nBitLength:n,nByteLength:i}}function Field(t,e,n=!1,i={}){if(t<=_0n$2)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:a}=nLength(t,e);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const f=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:a,MASK:bitMask(s),ZERO:_0n$2,ONE:_1n$3,create:p=>mod$2(p,t),isValid:p=>{if(typeof p!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof p);return _0n$2<=p&&p<t},is0:p=>p===_0n$2,isOdd:p=>(p&_1n$3)===_1n$3,neg:p=>mod$2(-p,t),eql:(p,C)=>p===C,sqr:p=>mod$2(p*p,t),add:(p,C)=>mod$2(p+C,t),sub:(p,C)=>mod$2(p-C,t),mul:(p,C)=>mod$2(p*C,t),pow:(p,C)=>FpPow(f,p,C),div:(p,C)=>mod$2(p*invert(C,t),t),sqrN:p=>p*p,addN:(p,C)=>p+C,subN:(p,C)=>p-C,mulN:(p,C)=>p*C,inv:p=>invert(p,t),sqrt:i.sqrt||(p=>(l||(l=FpSqrt(t)),l(f,p))),invertBatch:p=>FpInvertBatch(f,p),cmov:(p,C,B)=>B?C:p,toBytes:p=>n?numberToBytesLE(p,a):numberToBytesBE(p,a),fromBytes:p=>{if(p.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+p.length);return n?bytesToNumberLE(p):bytesToNumberBE(p)}});return Object.freeze(f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$2=BigInt(1);function constTimeNegate(t,e){const n=e.negate();return t?n:e}function validateW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function calcWOpts(t,e){validateW(t,e);const n=Math.ceil(e/t)+1,i=2**(t-1),s=2**t,a=bitMask(t),l=BigInt(t);return{windows:n,windowSize:i,mask:a,maxNumber:s,shiftBy:l}}function calcOffsets(t,e,n){const{windowSize:i,mask:s,maxNumber:a,shiftBy:l}=n;let f=Number(t&s),p=t>>l;f>i&&(f-=a,p+=_1n$2);const C=e*i,B=C+Math.abs(f)-1,N=f===0,le=f<0,Ee=e%2!==0;return{nextN:p,offset:B,isZero:N,isNeg:le,isNegF:Ee,offsetF:C}}function validateMSMPoints(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,i)=>{if(!(n instanceof e))throw new Error("invalid point at index "+i)})}function validateMSMScalars(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,i)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+i)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(t){return pointWindowSizes.get(t)||1}function wNAF(t,e){return{constTimeNegate,hasPrecomputes(n){return getW(n)!==1},unsafeLadder(n,i,s=t.ZERO){let a=n;for(;i>_0n$1;)i&_1n$2&&(s=s.add(a)),a=a.double(),i>>=_1n$2;return s},precomputeWindow(n,i){const{windows:s,windowSize:a}=calcWOpts(i,e),l=[];let f=n,p=f;for(let C=0;C<s;C++){p=f,l.push(p);for(let B=1;B<a;B++)p=p.add(f),l.push(p);f=p.double()}return l},wNAF(n,i,s){let a=t.ZERO,l=t.BASE;const f=calcWOpts(n,e);for(let p=0;p<f.windows;p++){const{nextN:C,offset:B,isZero:N,isNeg:le,isNegF:Ee,offsetF:Ue}=calcOffsets(s,p,f);s=C,N?l=l.add(constTimeNegate(Ee,i[Ue])):a=a.add(constTimeNegate(le,i[B]))}return{p:a,f:l}},wNAFUnsafe(n,i,s,a=t.ZERO){const l=calcWOpts(n,e);for(let f=0;f<l.windows&&s!==_0n$1;f++){const{nextN:p,offset:C,isZero:B,isNeg:N}=calcOffsets(s,f,l);if(s=p,!B){const le=i[C];a=a.add(N?le.negate():le)}}return a},getPrecomputes(n,i,s){let a=pointPrecomputes.get(i);return a||(a=this.precomputeWindow(i,n),n!==1&&pointPrecomputes.set(i,s(a))),a},wNAFCached(n,i,s){const a=getW(n);return this.wNAF(a,this.getPrecomputes(a,n,s),i)},wNAFCachedUnsafe(n,i,s,a){const l=getW(n);return l===1?this.unsafeLadder(n,i,a):this.wNAFUnsafe(l,this.getPrecomputes(l,n,s),i,a)},setWindowSize(n,i){validateW(i,e),pointWindowSizes.set(n,i),pointPrecomputes.delete(n)}}}function pippenger(t,e,n,i){if(validateMSMPoints(n,t),validateMSMScalars(i,e),n.length!==i.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,a=bitLen(BigInt(n.length)),l=a>12?a-3:a>4?a-2:a?2:1,f=bitMask(l),p=new Array(Number(f)+1).fill(s),C=Math.floor((e.BITS-1)/l)*l;let B=s;for(let N=C;N>=0;N-=l){p.fill(s);for(let Ee=0;Ee<i.length;Ee++){const Ue=i[Ee],ze=Number(Ue>>BigInt(N)&f);p[ze]=p[ze].add(n[Ee])}let le=s;for(let Ee=p.length-1,Ue=s;Ee>0;Ee--)Ue=Ue.add(p[Ee]),le=le.add(Ue);if(B=B.add(le),N!==0)for(let Ee=0;Ee<l;Ee++)B=B.double()}return B}function validateBasic(t){return validateField(t.Fp),validateObject(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_8n$1=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts(t){const e=validateBasic(t);return validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function twistedEdwards(t){const e=validateOpts(t),{Fp:n,n:i,prehash:s,hash:a,randomBytes:l,nByteLength:f,h:p}=e,C=_2n$1<<BigInt(f*8)-_1n$1,B=n.create,N=Field(e.n,e.nBitLength),le=e.uvRatio||((Et,er)=>{try{return{isValid:!0,value:n.sqrt(Et*n.inv(er))}}catch{return{isValid:!1,value:_0n}}}),Ee=e.adjustScalarBytes||(Et=>Et),Ue=e.domain||((Et,er,rr)=>{if(abool("phflag",rr),er.length||rr)throw new Error("Contexts/pre-hash are not supported");return Et});function ze(Et,er,rr=!1){const yt=rr?_1n$1:_0n;aInRange("coordinate "+Et,er,yt,C)}function Ze(Et){if(!(Et instanceof wt))throw new Error("ExtendedPoint expected")}const Qe=memoized((Et,er)=>{const{ex:rr,ey:yt,ez:tr}=Et,Ut=Et.is0();er==null&&(er=Ut?_8n$1:n.inv(tr));const Ft=B(rr*er),sr=B(yt*er),vr=B(tr*er);if(Ut)return{x:_0n,y:_1n$1};if(vr!==_1n$1)throw new Error("invZ was invalid");return{x:Ft,y:sr}}),ct=memoized(Et=>{const{a:er,d:rr}=e;if(Et.is0())throw new Error("bad point: ZERO");const{ex:yt,ey:tr,ez:Ut,et:Ft}=Et,sr=B(yt*yt),vr=B(tr*tr),_r=B(Ut*Ut),dr=B(_r*_r),gr=B(sr*er),$r=B(_r*B(gr+vr)),pr=B(dr+B(rr*B(sr*vr)));if($r!==pr)throw new Error("bad point: equation left != right (1)");const lr=B(yt*tr),cr=B(Ut*Ft);if(lr!==cr)throw new Error("bad point: equation left != right (2)");return!0});class wt{constructor(er,rr,yt,tr){ze("x",er),ze("y",rr),ze("z",yt,!0),ze("t",tr),this.ex=er,this.ey=rr,this.ez=yt,this.et=tr,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(er){if(er instanceof wt)throw new Error("extended point not allowed");const{x:rr,y:yt}=er||{};return ze("x",rr),ze("y",yt),new wt(rr,yt,_1n$1,B(rr*yt))}static normalizeZ(er){const rr=n.invertBatch(er.map(yt=>yt.ez));return er.map((yt,tr)=>yt.toAffine(rr[tr])).map(wt.fromAffine)}static msm(er,rr){return pippenger(wt,N,er,rr)}_setWindowSize(er){ir.setWindowSize(this,er)}assertValidity(){ct(this)}equals(er){Ze(er);const{ex:rr,ey:yt,ez:tr}=this,{ex:Ut,ey:Ft,ez:sr}=er,vr=B(rr*sr),_r=B(Ut*tr),dr=B(yt*sr),gr=B(Ft*tr);return vr===_r&&dr===gr}is0(){return this.equals(wt.ZERO)}negate(){return new wt(B(-this.ex),this.ey,this.ez,B(-this.et))}double(){const{a:er}=e,{ex:rr,ey:yt,ez:tr}=this,Ut=B(rr*rr),Ft=B(yt*yt),sr=B(_2n$1*B(tr*tr)),vr=B(er*Ut),_r=rr+yt,dr=B(B(_r*_r)-Ut-Ft),gr=vr+Ft,$r=gr-sr,pr=vr-Ft,lr=B(dr*$r),cr=B(gr*pr),yr=B(dr*pr),Sr=B($r*gr);return new wt(lr,cr,Sr,yr)}add(er){Ze(er);const{a:rr,d:yt}=e,{ex:tr,ey:Ut,ez:Ft,et:sr}=this,{ex:vr,ey:_r,ez:dr,et:gr}=er,$r=B(tr*vr),pr=B(Ut*_r),lr=B(sr*yt*gr),cr=B(Ft*dr),yr=B((tr+Ut)*(vr+_r)-$r-pr),Sr=cr-lr,Ar=cr+lr,Tr=B(pr-rr*$r),xr=B(yr*Sr),Cr=B(Ar*Tr),wr=B(yr*Tr),Er=B(Sr*Ar);return new wt(xr,Cr,Er,wr)}subtract(er){return this.add(er.negate())}wNAF(er){return ir.wNAFCached(this,er,wt.normalizeZ)}multiply(er){const rr=er;aInRange("scalar",rr,_1n$1,i);const{p:yt,f:tr}=this.wNAF(rr);return wt.normalizeZ([yt,tr])[0]}multiplyUnsafe(er,rr=wt.ZERO){const yt=er;return aInRange("scalar",yt,_0n,i),yt===_0n?nr:this.is0()||yt===_1n$1?this:ir.wNAFCachedUnsafe(this,yt,wt.normalizeZ,rr)}isSmallOrder(){return this.multiplyUnsafe(p).is0()}isTorsionFree(){return ir.unsafeLadder(this,i).is0()}toAffine(er){return Qe(this,er)}clearCofactor(){const{h:er}=e;return er===_1n$1?this:this.multiplyUnsafe(er)}static fromHex(er,rr=!1){const{d:yt,a:tr}=e,Ut=n.BYTES;er=ensureBytes("pointHex",er,Ut),abool("zip215",rr);const Ft=er.slice(),sr=er[Ut-1];Ft[Ut-1]=sr&-129;const vr=bytesToNumberLE(Ft),_r=rr?C:n.ORDER;aInRange("pointHex.y",vr,_0n,_r);const dr=B(vr*vr),gr=B(dr-_1n$1),$r=B(yt*dr-tr);let{isValid:pr,value:lr}=le(gr,$r);if(!pr)throw new Error("Point.fromHex: invalid y coordinate");const cr=(lr&_1n$1)===_1n$1,yr=(sr&128)!==0;if(!rr&&lr===_0n&&yr)throw new Error("Point.fromHex: x=0 and x_0=1");return yr!==cr&&(lr=B(-lr)),wt.fromAffine({x:lr,y:vr})}static fromPrivateKey(er){const{scalar:rr}=hr(er);return qt.multiply(rr)}toRawBytes(){const{x:er,y:rr}=this.toAffine(),yt=numberToBytesLE(rr,n.BYTES);return yt[yt.length-1]|=er&_1n$1?128:0,yt}toHex(){return bytesToHex(this.toRawBytes())}}wt.BASE=new wt(e.Gx,e.Gy,_1n$1,B(e.Gx*e.Gy)),wt.ZERO=new wt(_0n,_1n$1,_1n$1,_0n);const{BASE:qt,ZERO:nr}=wt,ir=wNAF(wt,f*8);function or(Et){return mod$2(Et,i)}function ur(Et){return or(bytesToNumberLE(Et))}function hr(Et){const er=n.BYTES;Et=ensureBytes("private key",Et,er);const rr=ensureBytes("hashed private key",a(Et),2*er),yt=Ee(rr.slice(0,er)),tr=rr.slice(er,2*er),Ut=ur(yt);return{head:yt,prefix:tr,scalar:Ut}}function fr(Et){const{head:er,prefix:rr,scalar:yt}=hr(Et),tr=qt.multiply(yt),Ut=tr.toRawBytes();return{head:er,prefix:rr,scalar:yt,point:tr,pointBytes:Ut}}function ar(Et){return fr(Et).pointBytes}function Lt(Et=new Uint8Array,...er){const rr=concatBytes(...er);return ur(a(Ue(rr,ensureBytes("context",Et),!!s)))}function Vt(Et,er,rr={}){Et=ensureBytes("message",Et),s&&(Et=s(Et));const{prefix:yt,scalar:tr,pointBytes:Ut}=fr(er),Ft=Lt(rr.context,yt,Et),sr=qt.multiply(Ft).toRawBytes(),vr=Lt(rr.context,sr,Ut,Et),_r=or(Ft+vr*tr);aInRange("signature.s",_r,_0n,i);const dr=concatBytes(sr,numberToBytesLE(_r,n.BYTES));return ensureBytes("result",dr,n.BYTES*2)}const tt=VERIFY_DEFAULT;function Ye(Et,er,rr,yt=tt){const{context:tr,zip215:Ut}=yt,Ft=n.BYTES;Et=ensureBytes("signature",Et,2*Ft),er=ensureBytes("message",er),rr=ensureBytes("publicKey",rr,Ft),Ut!==void 0&&abool("zip215",Ut),s&&(er=s(er));const sr=bytesToNumberLE(Et.slice(Ft,2*Ft));let vr,_r,dr;try{vr=wt.fromHex(rr,Ut),_r=wt.fromHex(Et.slice(0,Ft),Ut),dr=qt.multiplyUnsafe(sr)}catch{return!1}if(!Ut&&vr.isSmallOrder())return!1;const gr=Lt(tr,_r.toRawBytes(),vr.toRawBytes(),er);return _r.add(vr.multiplyUnsafe(gr)).subtract(dr).clearCofactor().equals(wt.ZERO)}return qt._setWindowSize(8),{CURVE:e,getPublicKey:ar,sign:Vt,verify:Ye,ExtendedPoint:wt,utils:{getExtendedPublicKey:fr,randomPrivateKey:()=>l(n.BYTES),precompute(Et=8,er=wt.BASE){return er._setWindowSize(Et),er.multiply(BigInt(3)),er}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n=BigInt(1),_2n=BigInt(2);BigInt(3);const _5n=BigInt(5),_8n=BigInt(8);function ed25519_pow_2_252_3(t){const e=BigInt(10),n=BigInt(20),i=BigInt(40),s=BigInt(80),a=ED25519_P,f=t*t%a*t%a,p=pow2(f,_2n,a)*f%a,C=pow2(p,_1n,a)*t%a,B=pow2(C,_5n,a)*C%a,N=pow2(B,e,a)*B%a,le=pow2(N,n,a)*N%a,Ee=pow2(le,i,a)*le%a,Ue=pow2(Ee,s,a)*Ee%a,ze=pow2(Ue,s,a)*Ee%a,Ze=pow2(ze,e,a)*B%a;return{pow_p_5_8:pow2(Ze,_2n,a)*t%a,b2:f}}function adjustScalarBytes(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function uvRatio(t,e){const n=ED25519_P,i=mod$2(e*e*e,n),s=mod$2(i*i*e,n),a=ed25519_pow_2_252_3(t*s).pow_p_5_8;let l=mod$2(t*i*a,n);const f=mod$2(e*l*l,n),p=l,C=mod$2(l*ED25519_SQRT_M1,n),B=f===t,N=f===mod$2(-t,n),le=f===mod$2(-t*ED25519_SQRT_M1,n);return B&&(l=p),(N||le)&&(l=C),isNegativeLE(l,n)&&(l=mod$2(-l,n)),{isValid:B||N,value:l}}const Fp=Field(ED25519_P,void 0,!0),ed25519Defaults={a:Fp.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$3,randomBytes,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults);function messageWithIntent(t,e){return suiBcs$3.IntentMessage(suiBcs$3.fixedArray(e.length,suiBcs$3.u8())).serialize({intent:{scope:{[t]:!0},version:{V0:!0},appId:{Sui:!0}},value:e}).toBytes()}const SIGNATURE_SCHEME_TO_FLAG={ED25519:0,Secp256k1:1,Secp256r1:2,MultiSig:3,ZkLogin:5,Passkey:6},SIGNATURE_SCHEME_TO_SIZE={ED25519:32,Secp256k1:33,Secp256r1:33},SIGNATURE_FLAG_TO_SCHEME={0:"ED25519",1:"Secp256k1",2:"Secp256r1",3:"MultiSig",5:"ZkLogin",6:"Passkey"};class HMAC extends Hash$1{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,ahash(e);const i=toBytes(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(i.length>s?e.create().update(i).digest():i);for(let l=0;l<a.length;l++)a[l]^=54;this.iHash.update(a),this.oHash=e.create();for(let l=0;l<a.length;l++)a[l]^=106;this.oHash.update(a),a.fill(0)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes$1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:s,destroyed:a,blockLen:l,outputLen:f}=this;return e=e,e.finished=s,e.destroyed=a,e.blockLen=l,e.outputLen=f,e.oHash=n._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac$2=(t,e,n)=>new HMAC(t,e).update(n).digest();hmac$2.create=(t,e)=>new HMAC(t,e);function bytesEqual(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}let PublicKey$3=class{equals(e){return bytesEqual(this.toRawBytes(),e.toRawBytes())}toBase64(){return toBase64(this.toRawBytes())}toString(){throw new Error("`toString` is not implemented on public keys. Use `toBase64()` or `toRawBytes()` instead.")}toSuiPublicKey(){const e=this.toSuiBytes();return toBase64(e)}verifyWithIntent(e,n,i){const s=messageWithIntent(i,e),a=blake2b$1(s,{dkLen:32});return this.verify(a,n)}verifyPersonalMessage(e,n){return this.verifyWithIntent(suiBcs$3.vector(suiBcs$3.u8()).serialize(e).toBytes(),n,"PersonalMessage")}verifyTransaction(e,n){return this.verifyWithIntent(e,n,"TransactionData")}verifyAddress(e){return this.toSuiAddress()===e}toSuiBytes(){const e=this.toRawBytes(),n=new Uint8Array(e.length+1);return n.set([this.flag()]),n.set(e,1),n}toSuiAddress(){return normalizeSuiAddress$3(bytesToHex$1(blake2b$1(this.toSuiBytes(),{dkLen:32})).slice(0,SUI_ADDRESS_LENGTH$3*2))}};function parseSerializedKeypairSignature(t){const e=fromBase64(t),n=SIGNATURE_FLAG_TO_SCHEME[e[0]];switch(n){case"ED25519":case"Secp256k1":case"Secp256r1":const i=SIGNATURE_SCHEME_TO_SIZE[n],s=e.slice(1,e.length-i),a=e.slice(1+s.length);return{serializedSignature:t,signatureScheme:n,signature:s,publicKey:a,bytes:e};default:throw new Error("Unsupported signature scheme")}}function toSerializedSignature({signature:t,signatureScheme:e,publicKey:n}){if(!n)throw new Error("`publicKey` is required");const i=n.toRawBytes(),s=new Uint8Array(1+t.length+i.length);return s.set([SIGNATURE_SCHEME_TO_FLAG[e]]),s.set(t,1),s.set(i,1+t.length),toBase64(s)}const PRIVATE_KEY_SIZE=32,SUI_PRIVATE_KEY_PREFIX="suiprivkey";class Signer{async signWithIntent(e,n){const i=messageWithIntent(n,e),s=blake2b$1(i,{dkLen:32});return{signature:toSerializedSignature({signature:await this.sign(s),signatureScheme:this.getKeyScheme(),publicKey:this.getPublicKey()}),bytes:toBase64(e)}}async signTransaction(e){return this.signWithIntent(e,"TransactionData")}async signPersonalMessage(e){const{signature:n}=await this.signWithIntent(bcs$2.vector(bcs$2.u8()).serialize(e).toBytes(),"PersonalMessage");return{bytes:toBase64(e),signature:n}}toSuiAddress(){return this.getPublicKey().toSuiAddress()}}class Keypair extends Signer{}function decodeSuiPrivateKey(t){const{prefix:e,words:n}=bech32.decode(t);if(e!==SUI_PRIVATE_KEY_PREFIX)throw new Error("invalid private key prefix");const i=new Uint8Array(bech32.fromWords(n)),s=i.slice(1);return{schema:SIGNATURE_FLAG_TO_SCHEME[i[0]],secretKey:s}}function encodeSuiPrivateKey(t,e){if(t.length!==PRIVATE_KEY_SIZE)throw new Error("Invalid bytes length");const n=SIGNATURE_SCHEME_TO_FLAG[e],i=new Uint8Array(t.length+1);return i.set([n]),i.set(t,1),bech32.encode(SUI_PRIVATE_KEY_PREFIX,bech32.toWords(i))}function pbkdf2Init(t,e,n,i){ahash(t);const s=checkOpts({dkLen:32,asyncTick:10},i),{c:a,dkLen:l,asyncTick:f}=s;if(anumber(a),anumber(l),anumber(f),a<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const p=toBytes(e),C=toBytes(n),B=new Uint8Array(l),N=hmac$2.create(t,p),le=N._cloneInto().update(C);return{c:a,dkLen:l,asyncTick:f,DK:B,PRF:N,PRFSalt:le}}function pbkdf2Output(t,e,n,i,s){return t.destroy(),e.destroy(),i&&i.destroy(),s.fill(0),n}function pbkdf2$1(t,e,n,i){const{c:s,dkLen:a,DK:l,PRF:f,PRFSalt:p}=pbkdf2Init(t,e,n,i);let C;const B=new Uint8Array(4),N=createView(B),le=new Uint8Array(f.outputLen);for(let Ee=1,Ue=0;Ue<a;Ee++,Ue+=f.outputLen){const ze=l.subarray(Ue,Ue+f.outputLen);N.setInt32(0,Ee,!1),(C=p._cloneInto(C)).update(B).digestInto(le),ze.set(le.subarray(0,ze.length));for(let Ze=1;Ze<s;Ze++){f._cloneInto(C).update(le).digestInto(le);for(let Qe=0;Qe<ze.length;Qe++)ze[Qe]^=le[Qe]}}return pbkdf2Output(f,p,l,C,le)}/*! scure-bip39 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */function nfkd(t){if(typeof t!="string")throw new TypeError("invalid mnemonic type: "+typeof t);return t.normalize("NFKD")}function normalize(t){const e=nfkd(t),n=e.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:n}}const psalt=t=>nfkd("mnemonic"+t);function mnemonicToSeedSync(t,e=""){return pbkdf2$1(sha512$3,normalize(t).nfkd,psalt(e),{c:2048,dkLen:64})}function isValidHardenedPath(t){return!!new RegExp("^m\\/44'\\/784'\\/[0-9]+'\\/[0-9]+'\\/[0-9]+'+$").test(t)}function mnemonicToSeed(t){return mnemonicToSeedSync(t,"")}function mnemonicToSeedHex(t){return toHex$1(mnemonicToSeed(t))}const ED25519_CURVE="ed25519 seed",HARDENED_OFFSET=2147483648,pathRegex=new RegExp("^m(\\/[0-9]+')+$"),replaceDerive=t=>t.replace("'",""),getMasterKeyFromSeed=t=>{const n=hmac$2.create(sha512$3,ED25519_CURVE).update(fromHex(t)).digest(),i=n.slice(0,32),s=n.slice(32);return{key:i,chainCode:s}},CKDPriv=({key:t,chainCode:e},n)=>{const i=new ArrayBuffer(4);new DataView(i).setUint32(0,n);const a=new Uint8Array(1+t.length+i.byteLength);a.set(new Uint8Array(1).fill(0)),a.set(t,1),a.set(new Uint8Array(i,0,i.byteLength),t.length+1);const l=hmac$2.create(sha512$3,e).update(a).digest(),f=l.slice(0,32),p=l.slice(32);return{key:f,chainCode:p}},isValidPath=t=>pathRegex.test(t)?!t.split("/").slice(1).map(replaceDerive).some(isNaN):!1,derivePath=(t,e,n=HARDENED_OFFSET)=>{if(!isValidPath(t))throw new Error("Invalid derivation path");const{key:i,chainCode:s}=getMasterKeyFromSeed(e);return t.split("/").slice(1).map(replaceDerive).map(l=>parseInt(l,10)).reduce((l,f)=>CKDPriv(l,f+n),{key:i,chainCode:s})},PUBLIC_KEY_SIZE=32;class Ed25519PublicKey extends PublicKey$3{constructor(e){if(super(),typeof e=="string"?this.data=fromBase64(e):e instanceof Uint8Array?this.data=e:this.data=Uint8Array.from(e),this.data.length!==PUBLIC_KEY_SIZE)throw new Error(`Invalid public key input. Expected ${PUBLIC_KEY_SIZE} bytes, got ${this.data.length}`)}equals(e){return super.equals(e)}toRawBytes(){return this.data}flag(){return SIGNATURE_SCHEME_TO_FLAG.ED25519}async verify(e,n){let i;if(typeof n=="string"){const s=parseSerializedKeypairSignature(n);if(s.signatureScheme!=="ED25519")throw new Error("Invalid signature scheme");if(!bytesEqual(this.toRawBytes(),s.publicKey))throw new Error("Signature does not match public key");i=s.signature}else i=n;return ed25519.verify(i,e,this.toRawBytes())}}Ed25519PublicKey.SIZE=PUBLIC_KEY_SIZE;const DEFAULT_ED25519_DERIVATION_PATH="m/44'/784'/0'/0'/0'";class Ed25519Keypair extends Keypair{constructor(e){if(super(),e)this.keypair={publicKey:e.publicKey,secretKey:e.secretKey.slice(0,32)};else{const n=ed25519.utils.randomPrivateKey();this.keypair={publicKey:ed25519.getPublicKey(n),secretKey:n}}}getKeyScheme(){return"ED25519"}static generate(){const e=ed25519.utils.randomPrivateKey();return new Ed25519Keypair({publicKey:ed25519.getPublicKey(e),secretKey:e})}static fromSecretKey(e,n){if(typeof e=="string"){const a=decodeSuiPrivateKey(e);if(a.schema!=="ED25519")throw new Error(`Expected a ED25519 keypair, got ${a.schema}`);return this.fromSecretKey(a.secretKey,n)}const i=e.length;if(i!==PRIVATE_KEY_SIZE)throw new Error(`Wrong secretKey size. Expected ${PRIVATE_KEY_SIZE} bytes, got ${i}.`);const s={publicKey:ed25519.getPublicKey(e),secretKey:e};if(!n||!n.skipValidation){const l=new TextEncoder().encode("sui validation"),f=ed25519.sign(l,e);if(!ed25519.verify(f,l,s.publicKey))throw new Error("provided secretKey is invalid")}return new Ed25519Keypair(s)}getPublicKey(){return new Ed25519PublicKey(this.keypair.publicKey)}getSecretKey(){return encodeSuiPrivateKey(this.keypair.secretKey.slice(0,PRIVATE_KEY_SIZE),this.getKeyScheme())}async sign(e){return ed25519.sign(e,this.keypair.secretKey)}static deriveKeypair(e,n){if(n==null&&(n=DEFAULT_ED25519_DERIVATION_PATH),!isValidHardenedPath(n))throw new Error("Invalid derivation path");const{key:i}=derivePath(n,mnemonicToSeedHex(e));return Ed25519Keypair.fromSecretKey(i)}static deriveKeypairFromSeed(e,n){if(n==null&&(n=DEFAULT_ED25519_DERIVATION_PATH),!isValidHardenedPath(n))throw new Error("Invalid derivation path");const{key:i}=derivePath(n,e);return Ed25519Keypair.fromSecretKey(i)}}const __vite_import_meta_env__={};function createJSONStorage(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var a;const l=p=>p===null?null:JSON.parse(p,void 0),f=(a=n.getItem(s))!=null?a:null;return f instanceof Promise?f.then(l):l(f)},setItem:(s,a)=>n.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>n.removeItem(s)}}const toThenable=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return toThenable(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return toThenable(i)(n)}}}},oldImpl=(t,e)=>(n,i,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Ze=>Ze,version:0,merge:(Ze,Qe)=>({...Qe,...Ze}),...e},l=!1;const f=new Set,p=new Set;let C;try{C=a.getStorage()}catch{}if(!C)return t((...Ze)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...Ze)},i,s);const B=toThenable(a.serialize),N=()=>{const Ze=a.partialize({...i()});let Qe;const ct=B({state:Ze,version:a.version}).then(wt=>C.setItem(a.name,wt)).catch(wt=>{Qe=wt});if(Qe)throw Qe;return ct},le=s.setState;s.setState=(Ze,Qe)=>{le(Ze,Qe),N()};const Ee=t((...Ze)=>{n(...Ze),N()},i,s);let Ue;const ze=()=>{var Ze;if(!C)return;l=!1,f.forEach(ct=>ct(i()));const Qe=((Ze=a.onRehydrateStorage)==null?void 0:Ze.call(a,i()))||void 0;return toThenable(C.getItem.bind(C))(a.name).then(ct=>{if(ct)return a.deserialize(ct)}).then(ct=>{if(ct)if(typeof ct.version=="number"&&ct.version!==a.version){if(a.migrate)return a.migrate(ct.state,ct.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return ct.state}).then(ct=>{var wt;return Ue=a.merge(ct,(wt=i())!=null?wt:Ee),n(Ue,!0),N()}).then(()=>{Qe==null||Qe(Ue,void 0),l=!0,p.forEach(ct=>ct(Ue))}).catch(ct=>{Qe==null||Qe(void 0,ct)})};return s.persist={setOptions:Ze=>{a={...a,...Ze},Ze.getStorage&&(C=Ze.getStorage())},clearStorage:()=>{C==null||C.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>ze(),hasHydrated:()=>l,onHydrate:Ze=>(f.add(Ze),()=>{f.delete(Ze)}),onFinishHydration:Ze=>(p.add(Ze),()=>{p.delete(Ze)})},ze(),Ue||Ee},newImpl=(t,e)=>(n,i,s)=>{let a={storage:createJSONStorage(()=>localStorage),partialize:ze=>ze,version:0,merge:(ze,Ze)=>({...Ze,...ze}),...e},l=!1;const f=new Set,p=new Set;let C=a.storage;if(!C)return t((...ze)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...ze)},i,s);const B=()=>{const ze=a.partialize({...i()});return C.setItem(a.name,{state:ze,version:a.version})},N=s.setState;s.setState=(ze,Ze)=>{N(ze,Ze),B()};const le=t((...ze)=>{n(...ze),B()},i,s);s.getInitialState=()=>le;let Ee;const Ue=()=>{var ze,Ze;if(!C)return;l=!1,f.forEach(ct=>{var wt;return ct((wt=i())!=null?wt:le)});const Qe=((Ze=a.onRehydrateStorage)==null?void 0:Ze.call(a,(ze=i())!=null?ze:le))||void 0;return toThenable(C.getItem.bind(C))(a.name).then(ct=>{if(ct)if(typeof ct.version=="number"&&ct.version!==a.version){if(a.migrate)return[!0,a.migrate(ct.state,ct.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,ct.state];return[!1,void 0]}).then(ct=>{var wt;const[qt,nr]=ct;if(Ee=a.merge(nr,(wt=i())!=null?wt:le),n(Ee,!0),qt)return B()}).then(()=>{Qe==null||Qe(Ee,void 0),Ee=i(),l=!0,p.forEach(ct=>ct(Ee))}).catch(ct=>{Qe==null||Qe(void 0,ct)})};return s.persist={setOptions:ze=>{a={...a,...ze},ze.storage&&(C=ze.storage)},clearStorage:()=>{C==null||C.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>Ue(),hasHydrated:()=>l,onHydrate:ze=>(f.add(ze),()=>{f.delete(ze)}),onFinishHydration:ze=>(p.add(ze),()=>{p.delete(ze)})},a.skipHydration||Ue(),Ee||le},persistImpl=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((__vite_import_meta_env__?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(t,e)):newImpl(t,e),persist=persistImpl;function getVarName(t){var e=t.match(/^var\((.*)\)$/);return e?e[1]:t}function get$2(t,e){var n=t;for(var i of e){if(!(i in n))throw new Error("Path ".concat(e.join(" -> ")," does not exist in object"));n=n[i]}return n}function walkObject(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],i={};for(var s in t){var a=t[s],l=[...n,s];typeof a=="string"||typeof a=="number"||a==null?i[s]=e(a,l):typeof a=="object"&&!Array.isArray(a)?i[s]=walkObject(a,e,l):console.warn('Skipping invalid key "'.concat(l.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(a)?"Array":typeof a,'"'))}return i}function assignInlineVars(t,e){var n={};if(typeof e=="object"){var i=t;walkObject(e,(f,p)=>{if(f!=null){var C=get$2(i,p);n[getVarName(C)]=String(f)}})}else{var s=t;for(var a in s){var l=s[a];l!=null&&(n[getVarName(a)]=l)}}return Object.defineProperty(n,"toString",{value:function(){return Object.keys(this).map(p=>"".concat(p,":").concat(this[p])).join(";")},writable:!1}),n}/*! https://mths.be/cssesc v3.0.0 by @mathias */var object={},hasOwnProperty$b=object.hasOwnProperty,merge$2=function(e,n){if(!e)return n;var i={};for(var s in n)i[s]=hasOwnProperty$b.call(e,s)?e[s]:n[s];return i},regexAnySingleEscape=/[ -,\.\/:-@\[-\^`\{-~]/,regexSingleEscape=/[ -,\.\/:-@\[\]\^`\{-~]/,regexExcessiveSpaces=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,cssesc=function t(e,n){n=merge$2(n,t.options),n.quotes!="single"&&n.quotes!="double"&&(n.quotes="single");for(var i=n.quotes=="double"?'"':"'",s=n.isIdentifier,a=e.charAt(0),l="",f=0,p=e.length;f<p;){var C=e.charAt(f++),B=C.charCodeAt(),N=void 0;if(B<32||B>126){if(B>=55296&&B<=56319&&f<p){var le=e.charCodeAt(f++);(le&64512)==56320?B=((B&1023)<<10)+(le&1023)+65536:f--}N="\\"+B.toString(16).toUpperCase()+" "}else n.escapeEverything?regexAnySingleEscape.test(C)?N="\\"+C:N="\\"+B.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(C)?N="\\"+B.toString(16).toUpperCase()+" ":C=="\\"||!s&&(C=='"'&&i==C||C=="'"&&i==C)||s&&regexSingleEscape.test(C)?N="\\"+C:N=C;l+=N}return s&&(/^-[-\d]/.test(l)?l="\\-"+l.slice(1):/\d/.test(a)&&(l="\\3"+a+" "+l.slice(1))),l=l.replace(regexExcessiveSpaces,function(Ee,Ue,ze){return Ue&&Ue.length%2?Ee:(Ue||"")+ze}),!s&&n.wrap?i+l+i:l};cssesc.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};cssesc.version="3.0.0";var cssesc_1=cssesc;const cssesc$1=getDefaultExportFromCjs$2(cssesc_1);var hasConfiguredAdapter=!1,setAdapterIfNotSet=t=>{hasConfiguredAdapter||setAdapter(t)},setAdapter=t=>{if(!t)throw new Error('No adapter provided when calling "setAdapter"');hasConfiguredAdapter=!0};function ownKeys$1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys$1(Object(n),!0).forEach(function(i){_defineProperty(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function _defineProperty(t,e,n){return e=_toPropertyKey(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return typeof e=="symbol"?e:String(e)}function _toPrimitive(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}createDedent({});function createDedent(t){return e.withOptions=n=>createDedent(_objectSpread$1(_objectSpread$1({},t),n)),e;function e(n,...i){const s=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:a=Array.isArray(n)}=t;let l="";for(let C=0;C<s.length;C++){let B=s[C];a&&(B=B.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),l+=B,C<i.length&&(l+=i[C])}const f=l.split(`
`);let p=null;for(const C of f){const B=C.match(/^(\s+)\S+/);if(B){const N=B[1].length;p?p=Math.min(p,N):p=N}}if(p!==null){const C=p;l=f.map(B=>B[0]===" "||B[0]==="	"?B.slice(C):B).join(`
`)}return l=l.trim(),a&&(l=l.replace(/\\n/g,`
`)),l}}var simplePseudoMap={":-moz-any-link":!0,":-moz-full-screen":!0,":-moz-placeholder":!0,":-moz-read-only":!0,":-moz-read-write":!0,":-ms-fullscreen":!0,":-ms-input-placeholder":!0,":-webkit-any-link":!0,":-webkit-full-screen":!0,"::-moz-color-swatch":!0,"::-moz-list-bullet":!0,"::-moz-list-number":!0,"::-moz-page-sequence":!0,"::-moz-page":!0,"::-moz-placeholder":!0,"::-moz-progress-bar":!0,"::-moz-range-progress":!0,"::-moz-range-thumb":!0,"::-moz-range-track":!0,"::-moz-scrolled-page-sequence":!0,"::-moz-selection":!0,"::-ms-backdrop":!0,"::-ms-browse":!0,"::-ms-check":!0,"::-ms-clear":!0,"::-ms-fill-lower":!0,"::-ms-fill-upper":!0,"::-ms-fill":!0,"::-ms-reveal":!0,"::-ms-thumb":!0,"::-ms-ticks-after":!0,"::-ms-ticks-before":!0,"::-ms-tooltip":!0,"::-ms-track":!0,"::-ms-value":!0,"::-webkit-backdrop":!0,"::-webkit-calendar-picker-indicator":!0,"::-webkit-inner-spin-button":!0,"::-webkit-input-placeholder":!0,"::-webkit-meter-bar":!0,"::-webkit-meter-even-less-good-value":!0,"::-webkit-meter-inner-element":!0,"::-webkit-meter-optimum-value":!0,"::-webkit-meter-suboptimum-value":!0,"::-webkit-outer-spin-button":!0,"::-webkit-progress-bar":!0,"::-webkit-progress-inner-element":!0,"::-webkit-progress-inner-value":!0,"::-webkit-progress-value":!0,"::-webkit-resizer":!0,"::-webkit-scrollbar-button":!0,"::-webkit-scrollbar-corner":!0,"::-webkit-scrollbar-thumb":!0,"::-webkit-scrollbar-track-piece":!0,"::-webkit-scrollbar-track":!0,"::-webkit-scrollbar":!0,"::-webkit-search-cancel-button":!0,"::-webkit-search-results-button":!0,"::-webkit-slider-runnable-track":!0,"::-webkit-slider-thumb":!0,"::after":!0,"::backdrop":!0,"::before":!0,"::cue":!0,"::file-selector-button":!0,"::first-letter":!0,"::first-line":!0,"::grammar-error":!0,"::marker":!0,"::placeholder":!0,"::selection":!0,"::spelling-error":!0,"::target-text":!0,"::view-transition-group":!0,"::view-transition-image-pair":!0,"::view-transition-new":!0,"::view-transition-old":!0,"::view-transition":!0,":active":!0,":after":!0,":any-link":!0,":before":!0,":blank":!0,":checked":!0,":default":!0,":defined":!0,":disabled":!0,":empty":!0,":enabled":!0,":first-child":!0,":first-letter":!0,":first-line":!0,":first-of-type":!0,":first":!0,":focus-visible":!0,":focus-within":!0,":focus":!0,":fullscreen":!0,":hover":!0,":in-range":!0,":indeterminate":!0,":invalid":!0,":last-child":!0,":last-of-type":!0,":left":!0,":link":!0,":only-child":!0,":only-of-type":!0,":optional":!0,":out-of-range":!0,":placeholder-shown":!0,":read-only":!0,":read-write":!0,":required":!0,":right":!0,":root":!0,":scope":!0,":target":!0,":valid":!0,":visited":!0},simplePseudos=Object.keys(simplePseudoMap);[...simplePseudos];function getDefaultExportFromCjs$1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item$1(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item$1(t,e){this.fun=t,this.array=e}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$4(){}process.on=noop$4;process.addListener=noop$4;process.once=noop$4;process.off=noop$4;process.removeListener=noop$4;process.removeAllListeners=noop$4;process.emit=noop$4;process.prependListener=noop$4;process.prependOnceListener=noop$4;process.listeners=function(t){return[]};process.binding=function(t){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(t){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports=browser$d.exports;const process$1=getDefaultExportFromCjs$1(browserExports),perf=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,warned=new Set,PROCESS=typeof process$1=="object"&&process$1?process$1:{},emitWarning=(t,e,n,i)=>{typeof PROCESS.emitWarning=="function"?PROCESS.emitWarning(t,e,n,i):console.error(`[${n}] ${e}: ${t}`)};let AC=globalThis.AbortController,AS=globalThis.AbortSignal;var co;if(typeof AC>"u"){AS=class{constructor(){Or(this,"onabort");Or(this,"_onabort",[]);Or(this,"reason");Or(this,"aborted",!1)}addEventListener(i,s){this._onabort.push(s)}},AC=class{constructor(){Or(this,"signal",new AS);e()}abort(i){var s,a;if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(const l of this.signal._onabort)l(i);(a=(s=this.signal).onabort)==null||a.call(s,i)}}};let t=((co=PROCESS.env)==null?void 0:co.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,emitWarning("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const shouldWarn=t=>!warned.has(t),isPosInt=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),getUintArray=t=>isPosInt(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?ZeroArray:null:null;class ZeroArray extends Array{constructor(e){super(e),this.fill(0)}}var fs,_a;let Stack$1=(fs=class{constructor(e,n){Or(this,"heap");Or(this,"length");if(!br(fs,_a))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=getUintArray(e);if(!n)return[];Pr(fs,_a,!0);const i=new fs(e,n);return Pr(fs,_a,!1),i}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},_a=new WeakMap,Nr(fs,_a,!1),fs);var uo,lo,es,vi,ts,rs,ya,va,ci,ns,oi,si,zn,mi,wi,fi,ui,ss,li,as,os,$i,cs,Ms,gi,Ur,Ga,Xs,gs,Ea,Si,mo,Js,wa,ka,ys,vs,Va,Ba,Ra,ii,Wa,xa,$s,Ha;const Xa=class Xa{constructor(e){Nr(this,Ur);Nr(this,es);Nr(this,vi);Nr(this,ts);Nr(this,rs);Nr(this,ya);Nr(this,va);Or(this,"ttl");Or(this,"ttlResolution");Or(this,"ttlAutopurge");Or(this,"updateAgeOnGet");Or(this,"updateAgeOnHas");Or(this,"allowStale");Or(this,"noDisposeOnSet");Or(this,"noUpdateTTL");Or(this,"maxEntrySize");Or(this,"sizeCalculation");Or(this,"noDeleteOnFetchRejection");Or(this,"noDeleteOnStaleGet");Or(this,"allowStaleOnFetchAbort");Or(this,"allowStaleOnFetchRejection");Or(this,"ignoreFetchAbort");Nr(this,ci);Nr(this,ns);Nr(this,oi);Nr(this,si);Nr(this,zn);Nr(this,mi);Nr(this,wi);Nr(this,fi);Nr(this,ui);Nr(this,ss);Nr(this,li);Nr(this,as);Nr(this,os);Nr(this,$i);Nr(this,cs);Nr(this,Ms);Nr(this,gi);Nr(this,Xs,()=>{});Nr(this,gs,()=>{});Nr(this,Ea,()=>{});Nr(this,Si,()=>!1);Nr(this,Js,e=>{});Nr(this,wa,(e,n,i)=>{});Nr(this,ka,(e,n,i,s)=>{if(i||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Or(this,uo,"LRUCache");const{max:n=0,ttl:i,ttlResolution:s=1,ttlAutopurge:a,updateAgeOnGet:l,updateAgeOnHas:f,allowStale:p,dispose:C,disposeAfter:B,noDisposeOnSet:N,noUpdateTTL:le,maxSize:Ee=0,maxEntrySize:Ue=0,sizeCalculation:ze,fetchMethod:Ze,memoMethod:Qe,noDeleteOnFetchRejection:ct,noDeleteOnStaleGet:wt,allowStaleOnFetchRejection:qt,allowStaleOnFetchAbort:nr,ignoreFetchAbort:ir}=e;if(n!==0&&!isPosInt(n))throw new TypeError("max option must be a nonnegative integer");const or=n?getUintArray(n):Array;if(!or)throw new Error("invalid max value: "+n);if(Pr(this,es,n),Pr(this,vi,Ee),this.maxEntrySize=Ue||br(this,vi),this.sizeCalculation=ze,this.sizeCalculation){if(!br(this,vi)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Qe!==void 0&&typeof Qe!="function")throw new TypeError("memoMethod must be a function if defined");if(Pr(this,va,Qe),Ze!==void 0&&typeof Ze!="function")throw new TypeError("fetchMethod must be a function if specified");if(Pr(this,ya,Ze),Pr(this,Ms,!!Ze),Pr(this,oi,new Map),Pr(this,si,new Array(n).fill(void 0)),Pr(this,zn,new Array(n).fill(void 0)),Pr(this,mi,new or(n)),Pr(this,wi,new or(n)),Pr(this,fi,0),Pr(this,ui,0),Pr(this,ss,Stack$1.create(n)),Pr(this,ci,0),Pr(this,ns,0),typeof C=="function"&&Pr(this,ts,C),typeof B=="function"?(Pr(this,rs,B),Pr(this,li,[])):(Pr(this,rs,void 0),Pr(this,li,void 0)),Pr(this,cs,!!br(this,ts)),Pr(this,gi,!!br(this,rs)),this.noDisposeOnSet=!!N,this.noUpdateTTL=!!le,this.noDeleteOnFetchRejection=!!ct,this.allowStaleOnFetchRejection=!!qt,this.allowStaleOnFetchAbort=!!nr,this.ignoreFetchAbort=!!ir,this.maxEntrySize!==0){if(br(this,vi)!==0&&!isPosInt(br(this,vi)))throw new TypeError("maxSize must be a positive integer if specified");if(!isPosInt(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Mr(this,Ur,mo).call(this)}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!wt,this.updateAgeOnGet=!!l,this.updateAgeOnHas=!!f,this.ttlResolution=isPosInt(s)||s===0?s:1,this.ttlAutopurge=!!a,this.ttl=i||0,this.ttl){if(!isPosInt(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Mr(this,Ur,Ga).call(this)}if(br(this,es)===0&&this.ttl===0&&br(this,vi)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!br(this,es)&&!br(this,vi)){const ur="LRU_CACHE_UNBOUNDED";shouldWarn(ur)&&(warned.add(ur),emitWarning("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ur,Xa))}}static unsafeExposeInternals(e){return{starts:br(e,os),ttls:br(e,$i),sizes:br(e,as),keyMap:br(e,oi),keyList:br(e,si),valList:br(e,zn),next:br(e,mi),prev:br(e,wi),get head(){return br(e,fi)},get tail(){return br(e,ui)},free:br(e,ss),isBackgroundFetch:n=>{var i;return Mr(i=e,Ur,ii).call(i,n)},backgroundFetch:(n,i,s,a)=>{var l;return Mr(l=e,Ur,Ra).call(l,n,i,s,a)},moveToTail:n=>{var i;return Mr(i=e,Ur,xa).call(i,n)},indexes:n=>{var i;return Mr(i=e,Ur,ys).call(i,n)},rindexes:n=>{var i;return Mr(i=e,Ur,vs).call(i,n)},isStale:n=>{var i;return br(i=e,Si).call(i,n)}}}get max(){return br(this,es)}get maxSize(){return br(this,vi)}get calculatedSize(){return br(this,ns)}get size(){return br(this,ci)}get fetchMethod(){return br(this,ya)}get memoMethod(){return br(this,va)}get dispose(){return br(this,ts)}get disposeAfter(){return br(this,rs)}getRemainingTTL(e){return br(this,oi).has(e)?1/0:0}*entries(){for(const e of Mr(this,Ur,ys).call(this))br(this,zn)[e]!==void 0&&br(this,si)[e]!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield[br(this,si)[e],br(this,zn)[e]])}*rentries(){for(const e of Mr(this,Ur,vs).call(this))br(this,zn)[e]!==void 0&&br(this,si)[e]!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield[br(this,si)[e],br(this,zn)[e]])}*keys(){for(const e of Mr(this,Ur,ys).call(this)){const n=br(this,si)[e];n!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield n)}}*rkeys(){for(const e of Mr(this,Ur,vs).call(this)){const n=br(this,si)[e];n!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield n)}}*values(){for(const e of Mr(this,Ur,ys).call(this))br(this,zn)[e]!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield br(this,zn)[e])}*rvalues(){for(const e of Mr(this,Ur,vs).call(this))br(this,zn)[e]!==void 0&&!Mr(this,Ur,ii).call(this,br(this,zn)[e])&&(yield br(this,zn)[e])}[(lo=Symbol.iterator,uo=Symbol.toStringTag,lo)](){return this.entries()}find(e,n={}){for(const i of Mr(this,Ur,ys).call(this)){const s=br(this,zn)[i],a=Mr(this,Ur,ii).call(this,s)?s.__staleWhileFetching:s;if(a!==void 0&&e(a,br(this,si)[i],this))return this.get(br(this,si)[i],n)}}forEach(e,n=this){for(const i of Mr(this,Ur,ys).call(this)){const s=br(this,zn)[i],a=Mr(this,Ur,ii).call(this,s)?s.__staleWhileFetching:s;a!==void 0&&e.call(n,a,br(this,si)[i],this)}}rforEach(e,n=this){for(const i of Mr(this,Ur,vs).call(this)){const s=br(this,zn)[i],a=Mr(this,Ur,ii).call(this,s)?s.__staleWhileFetching:s;a!==void 0&&e.call(n,a,br(this,si)[i],this)}}purgeStale(){let e=!1;for(const n of Mr(this,Ur,vs).call(this,{allowStale:!0}))br(this,Si).call(this,n)&&(Mr(this,Ur,$s).call(this,br(this,si)[n],"expire"),e=!0);return e}info(e){const n=br(this,oi).get(e);if(n===void 0)return;const i=br(this,zn)[n],s=Mr(this,Ur,ii).call(this,i)?i.__staleWhileFetching:i;if(s===void 0)return;const a={value:s};if(br(this,$i)&&br(this,os)){const l=br(this,$i)[n],f=br(this,os)[n];if(l&&f){const p=l-(perf.now()-f);a.ttl=p,a.start=Date.now()}}return br(this,as)&&(a.size=br(this,as)[n]),a}dump(){const e=[];for(const n of Mr(this,Ur,ys).call(this,{allowStale:!0})){const i=br(this,si)[n],s=br(this,zn)[n],a=Mr(this,Ur,ii).call(this,s)?s.__staleWhileFetching:s;if(a===void 0||i===void 0)continue;const l={value:a};if(br(this,$i)&&br(this,os)){l.ttl=br(this,$i)[n];const f=perf.now()-br(this,os)[n];l.start=Math.floor(Date.now()-f)}br(this,as)&&(l.size=br(this,as)[n]),e.unshift([i,l])}return e}load(e){this.clear();for(const[n,i]of e){if(i.start){const s=Date.now()-i.start;i.start=perf.now()-s}this.set(n,i.value,i)}}set(e,n,i={}){var le,Ee,Ue,ze,Ze;if(n===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:a,noDisposeOnSet:l=this.noDisposeOnSet,sizeCalculation:f=this.sizeCalculation,status:p}=i;let{noUpdateTTL:C=this.noUpdateTTL}=i;const B=br(this,ka).call(this,e,n,i.size||0,f);if(this.maxEntrySize&&B>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),Mr(this,Ur,$s).call(this,e,"set"),this;let N=br(this,ci)===0?void 0:br(this,oi).get(e);if(N===void 0)N=br(this,ci)===0?br(this,ui):br(this,ss).length!==0?br(this,ss).pop():br(this,ci)===br(this,es)?Mr(this,Ur,Ba).call(this,!1):br(this,ci),br(this,si)[N]=e,br(this,zn)[N]=n,br(this,oi).set(e,N),br(this,mi)[br(this,ui)]=N,br(this,wi)[N]=br(this,ui),Pr(this,ui,N),Fs(this,ci)._++,br(this,wa).call(this,N,B,p),p&&(p.set="add"),C=!1;else{Mr(this,Ur,xa).call(this,N);const Qe=br(this,zn)[N];if(n!==Qe){if(br(this,Ms)&&Mr(this,Ur,ii).call(this,Qe)){Qe.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:ct}=Qe;ct!==void 0&&!l&&(br(this,cs)&&((le=br(this,ts))==null||le.call(this,ct,e,"set")),br(this,gi)&&((Ee=br(this,li))==null||Ee.push([ct,e,"set"])))}else l||(br(this,cs)&&((Ue=br(this,ts))==null||Ue.call(this,Qe,e,"set")),br(this,gi)&&((ze=br(this,li))==null||ze.push([Qe,e,"set"])));if(br(this,Js).call(this,N),br(this,wa).call(this,N,B,p),br(this,zn)[N]=n,p){p.set="replace";const ct=Qe&&Mr(this,Ur,ii).call(this,Qe)?Qe.__staleWhileFetching:Qe;ct!==void 0&&(p.oldValue=ct)}}else p&&(p.set="update")}if(s!==0&&!br(this,$i)&&Mr(this,Ur,Ga).call(this),br(this,$i)&&(C||br(this,Ea).call(this,N,s,a),p&&br(this,gs).call(this,p,N)),!l&&br(this,gi)&&br(this,li)){const Qe=br(this,li);let ct;for(;ct=Qe==null?void 0:Qe.shift();)(Ze=br(this,rs))==null||Ze.call(this,...ct)}return this}pop(){var e;try{for(;br(this,ci);){const n=br(this,zn)[br(this,fi)];if(Mr(this,Ur,Ba).call(this,!0),Mr(this,Ur,ii).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(br(this,gi)&&br(this,li)){const n=br(this,li);let i;for(;i=n==null?void 0:n.shift();)(e=br(this,rs))==null||e.call(this,...i)}}}has(e,n={}){const{updateAgeOnHas:i=this.updateAgeOnHas,status:s}=n,a=br(this,oi).get(e);if(a!==void 0){const l=br(this,zn)[a];if(Mr(this,Ur,ii).call(this,l)&&l.__staleWhileFetching===void 0)return!1;if(br(this,Si).call(this,a))s&&(s.has="stale",br(this,gs).call(this,s,a));else return i&&br(this,Xs).call(this,a),s&&(s.has="hit",br(this,gs).call(this,s,a)),!0}else s&&(s.has="miss");return!1}peek(e,n={}){const{allowStale:i=this.allowStale}=n,s=br(this,oi).get(e);if(s===void 0||!i&&br(this,Si).call(this,s))return;const a=br(this,zn)[s];return Mr(this,Ur,ii).call(this,a)?a.__staleWhileFetching:a}async fetch(e,n={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,ttl:l=this.ttl,noDisposeOnSet:f=this.noDisposeOnSet,size:p=0,sizeCalculation:C=this.sizeCalculation,noUpdateTTL:B=this.noUpdateTTL,noDeleteOnFetchRejection:N=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:le=this.allowStaleOnFetchRejection,ignoreFetchAbort:Ee=this.ignoreFetchAbort,allowStaleOnFetchAbort:Ue=this.allowStaleOnFetchAbort,context:ze,forceRefresh:Ze=!1,status:Qe,signal:ct}=n;if(!br(this,Ms))return Qe&&(Qe.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:a,status:Qe});const wt={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:a,ttl:l,noDisposeOnSet:f,size:p,sizeCalculation:C,noUpdateTTL:B,noDeleteOnFetchRejection:N,allowStaleOnFetchRejection:le,allowStaleOnFetchAbort:Ue,ignoreFetchAbort:Ee,status:Qe,signal:ct};let qt=br(this,oi).get(e);if(qt===void 0){Qe&&(Qe.fetch="miss");const nr=Mr(this,Ur,Ra).call(this,e,qt,wt,ze);return nr.__returned=nr}else{const nr=br(this,zn)[qt];if(Mr(this,Ur,ii).call(this,nr)){const fr=i&&nr.__staleWhileFetching!==void 0;return Qe&&(Qe.fetch="inflight",fr&&(Qe.returnedStale=!0)),fr?nr.__staleWhileFetching:nr.__returned=nr}const ir=br(this,Si).call(this,qt);if(!Ze&&!ir)return Qe&&(Qe.fetch="hit"),Mr(this,Ur,xa).call(this,qt),s&&br(this,Xs).call(this,qt),Qe&&br(this,gs).call(this,Qe,qt),nr;const or=Mr(this,Ur,Ra).call(this,e,qt,wt,ze),hr=or.__staleWhileFetching!==void 0&&i;return Qe&&(Qe.fetch=ir?"stale":"refresh",hr&&ir&&(Qe.returnedStale=!0)),hr?or.__staleWhileFetching:or.__returned=or}}async forceFetch(e,n={}){const i=await this.fetch(e,n);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,n={}){const i=br(this,va);if(!i)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:a,...l}=n,f=this.get(e,l);if(!a&&f!==void 0)return f;const p=i(e,f,{options:l,context:s});return this.set(e,p,l),p}get(e,n={}){const{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:a=this.noDeleteOnStaleGet,status:l}=n,f=br(this,oi).get(e);if(f!==void 0){const p=br(this,zn)[f],C=Mr(this,Ur,ii).call(this,p);return l&&br(this,gs).call(this,l,f),br(this,Si).call(this,f)?(l&&(l.get="stale"),C?(l&&i&&p.__staleWhileFetching!==void 0&&(l.returnedStale=!0),i?p.__staleWhileFetching:void 0):(a||Mr(this,Ur,$s).call(this,e,"expire"),l&&i&&(l.returnedStale=!0),i?p:void 0)):(l&&(l.get="hit"),C?p.__staleWhileFetching:(Mr(this,Ur,xa).call(this,f),s&&br(this,Xs).call(this,f),p))}else l&&(l.get="miss")}delete(e){return Mr(this,Ur,$s).call(this,e,"delete")}clear(){return Mr(this,Ur,Ha).call(this,"delete")}};es=new WeakMap,vi=new WeakMap,ts=new WeakMap,rs=new WeakMap,ya=new WeakMap,va=new WeakMap,ci=new WeakMap,ns=new WeakMap,oi=new WeakMap,si=new WeakMap,zn=new WeakMap,mi=new WeakMap,wi=new WeakMap,fi=new WeakMap,ui=new WeakMap,ss=new WeakMap,li=new WeakMap,as=new WeakMap,os=new WeakMap,$i=new WeakMap,cs=new WeakMap,Ms=new WeakMap,gi=new WeakMap,Ur=new WeakSet,Ga=function(){const e=new ZeroArray(br(this,es)),n=new ZeroArray(br(this,es));Pr(this,$i,e),Pr(this,os,n),Pr(this,Ea,(a,l,f=perf.now())=>{if(n[a]=l!==0?f:0,e[a]=l,l!==0&&this.ttlAutopurge){const p=setTimeout(()=>{br(this,Si).call(this,a)&&Mr(this,Ur,$s).call(this,br(this,si)[a],"expire")},l+1);p.unref&&p.unref()}}),Pr(this,Xs,a=>{n[a]=e[a]!==0?perf.now():0}),Pr(this,gs,(a,l)=>{if(e[l]){const f=e[l],p=n[l];if(!f||!p)return;a.ttl=f,a.start=p,a.now=i||s();const C=a.now-p;a.remainingTTL=f-C}});let i=0;const s=()=>{const a=perf.now();if(this.ttlResolution>0){i=a;const l=setTimeout(()=>i=0,this.ttlResolution);l.unref&&l.unref()}return a};this.getRemainingTTL=a=>{const l=br(this,oi).get(a);if(l===void 0)return 0;const f=e[l],p=n[l];if(!f||!p)return 1/0;const C=(i||s())-p;return f-C},Pr(this,Si,a=>{const l=n[a],f=e[a];return!!f&&!!l&&(i||s())-l>f})},Xs=new WeakMap,gs=new WeakMap,Ea=new WeakMap,Si=new WeakMap,mo=function(){const e=new ZeroArray(br(this,es));Pr(this,ns,0),Pr(this,as,e),Pr(this,Js,n=>{Pr(this,ns,br(this,ns)-e[n]),e[n]=0}),Pr(this,ka,(n,i,s,a)=>{if(Mr(this,Ur,ii).call(this,i))return 0;if(!isPosInt(s))if(a){if(typeof a!="function")throw new TypeError("sizeCalculation must be a function");if(s=a(i,n),!isPosInt(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s}),Pr(this,wa,(n,i,s)=>{if(e[n]=i,br(this,vi)){const a=br(this,vi)-e[n];for(;br(this,ns)>a;)Mr(this,Ur,Ba).call(this,!0)}Pr(this,ns,br(this,ns)+e[n]),s&&(s.entrySize=i,s.totalCalculatedSize=br(this,ns))})},Js=new WeakMap,wa=new WeakMap,ka=new WeakMap,ys=function*({allowStale:e=this.allowStale}={}){if(br(this,ci))for(let n=br(this,ui);!(!Mr(this,Ur,Va).call(this,n)||((e||!br(this,Si).call(this,n))&&(yield n),n===br(this,fi)));)n=br(this,wi)[n]},vs=function*({allowStale:e=this.allowStale}={}){if(br(this,ci))for(let n=br(this,fi);!(!Mr(this,Ur,Va).call(this,n)||((e||!br(this,Si).call(this,n))&&(yield n),n===br(this,ui)));)n=br(this,mi)[n]},Va=function(e){return e!==void 0&&br(this,oi).get(br(this,si)[e])===e},Ba=function(e){var a,l;const n=br(this,fi),i=br(this,si)[n],s=br(this,zn)[n];return br(this,Ms)&&Mr(this,Ur,ii).call(this,s)?s.__abortController.abort(new Error("evicted")):(br(this,cs)||br(this,gi))&&(br(this,cs)&&((a=br(this,ts))==null||a.call(this,s,i,"evict")),br(this,gi)&&((l=br(this,li))==null||l.push([s,i,"evict"]))),br(this,Js).call(this,n),e&&(br(this,si)[n]=void 0,br(this,zn)[n]=void 0,br(this,ss).push(n)),br(this,ci)===1?(Pr(this,fi,Pr(this,ui,0)),br(this,ss).length=0):Pr(this,fi,br(this,mi)[n]),br(this,oi).delete(i),Fs(this,ci)._--,n},Ra=function(e,n,i,s){const a=n===void 0?void 0:br(this,zn)[n];if(Mr(this,Ur,ii).call(this,a))return a;const l=new AC,{signal:f}=i;f==null||f.addEventListener("abort",()=>l.abort(f.reason),{signal:l.signal});const p={signal:l.signal,options:i,context:s},C=(ze,Ze=!1)=>{const{aborted:Qe}=l.signal,ct=i.ignoreFetchAbort&&ze!==void 0;if(i.status&&(Qe&&!Ze?(i.status.fetchAborted=!0,i.status.fetchError=l.signal.reason,ct&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),Qe&&!ct&&!Ze)return N(l.signal.reason);const wt=Ee;return br(this,zn)[n]===Ee&&(ze===void 0?wt.__staleWhileFetching?br(this,zn)[n]=wt.__staleWhileFetching:Mr(this,Ur,$s).call(this,e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,ze,p.options))),ze},B=ze=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=ze),N(ze)),N=ze=>{const{aborted:Ze}=l.signal,Qe=Ze&&i.allowStaleOnFetchAbort,ct=Qe||i.allowStaleOnFetchRejection,wt=ct||i.noDeleteOnFetchRejection,qt=Ee;if(br(this,zn)[n]===Ee&&(!wt||qt.__staleWhileFetching===void 0?Mr(this,Ur,$s).call(this,e,"fetch"):Qe||(br(this,zn)[n]=qt.__staleWhileFetching)),ct)return i.status&&qt.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),qt.__staleWhileFetching;if(qt.__returned===qt)throw ze},le=(ze,Ze)=>{var ct;const Qe=(ct=br(this,ya))==null?void 0:ct.call(this,e,a,p);Qe&&Qe instanceof Promise&&Qe.then(wt=>ze(wt===void 0?void 0:wt),Ze),l.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(ze(void 0),i.allowStaleOnFetchAbort&&(ze=wt=>C(wt,!0)))})};i.status&&(i.status.fetchDispatched=!0);const Ee=new Promise(le).then(C,B),Ue=Object.assign(Ee,{__abortController:l,__staleWhileFetching:a,__returned:void 0});return n===void 0?(this.set(e,Ue,{...p.options,status:void 0}),n=br(this,oi).get(e)):br(this,zn)[n]=Ue,Ue},ii=function(e){if(!br(this,Ms))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof AC},Wa=function(e,n){br(this,wi)[n]=e,br(this,mi)[e]=n},xa=function(e){e!==br(this,ui)&&(e===br(this,fi)?Pr(this,fi,br(this,mi)[e]):Mr(this,Ur,Wa).call(this,br(this,wi)[e],br(this,mi)[e]),Mr(this,Ur,Wa).call(this,br(this,ui),e),Pr(this,ui,e))},$s=function(e,n){var s,a,l,f;let i=!1;if(br(this,ci)!==0){const p=br(this,oi).get(e);if(p!==void 0)if(i=!0,br(this,ci)===1)Mr(this,Ur,Ha).call(this,n);else{br(this,Js).call(this,p);const C=br(this,zn)[p];if(Mr(this,Ur,ii).call(this,C)?C.__abortController.abort(new Error("deleted")):(br(this,cs)||br(this,gi))&&(br(this,cs)&&((s=br(this,ts))==null||s.call(this,C,e,n)),br(this,gi)&&((a=br(this,li))==null||a.push([C,e,n]))),br(this,oi).delete(e),br(this,si)[p]=void 0,br(this,zn)[p]=void 0,p===br(this,ui))Pr(this,ui,br(this,wi)[p]);else if(p===br(this,fi))Pr(this,fi,br(this,mi)[p]);else{const B=br(this,wi)[p];br(this,mi)[B]=br(this,mi)[p];const N=br(this,mi)[p];br(this,wi)[N]=br(this,wi)[p]}Fs(this,ci)._--,br(this,ss).push(p)}}if(br(this,gi)&&((l=br(this,li))!=null&&l.length)){const p=br(this,li);let C;for(;C=p==null?void 0:p.shift();)(f=br(this,rs))==null||f.call(this,...C)}return i},Ha=function(e){var n,i,s;for(const a of Mr(this,Ur,vs).call(this,{allowStale:!0})){const l=br(this,zn)[a];if(Mr(this,Ur,ii).call(this,l))l.__abortController.abort(new Error("deleted"));else{const f=br(this,si)[a];br(this,cs)&&((n=br(this,ts))==null||n.call(this,l,f,e)),br(this,gi)&&((i=br(this,li))==null||i.push([l,f,e]))}}if(br(this,oi).clear(),br(this,zn).fill(void 0),br(this,si).fill(void 0),br(this,$i)&&br(this,os)&&(br(this,$i).fill(0),br(this,os).fill(0)),br(this,as)&&br(this,as).fill(0),Pr(this,fi,0),Pr(this,ui,0),br(this,ss).length=0,Pr(this,ns,0),Pr(this,ci,0),br(this,gi)&&br(this,li)){const a=br(this,li);let l;for(;l=a==null?void 0:a.shift();)(s=br(this,rs))==null||s.call(this,...l)}};let LRUCache=Xa;var isMergeableObject=function(e){return isNonNullObject(e)&&!isSpecial(e)};function isNonNullObject(t){return!!t&&typeof t=="object"}function isSpecial(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||isReactElement(t)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(t){return t.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(t){return Array.isArray(t)?[]:{}}function cloneUnlessOtherwiseSpecified(t,e){return e.clone!==!1&&e.isMergeableObject(t)?deepmerge(emptyTarget(t),t,e):t}function defaultArrayMerge(t,e,n){return t.concat(e).map(function(i){return cloneUnlessOtherwiseSpecified(i,n)})}function getMergeFunction(t,e){if(!e.customMerge)return deepmerge;var n=e.customMerge(t);return typeof n=="function"?n:deepmerge}function getEnumerableOwnPropertySymbols(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function getKeys(t){return Object.keys(t).concat(getEnumerableOwnPropertySymbols(t))}function propertyIsOnObject(t,e){try{return e in t}catch{return!1}}function propertyIsUnsafe(t,e){return propertyIsOnObject(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function mergeObject(t,e,n){var i={};return n.isMergeableObject(t)&&getKeys(t).forEach(function(s){i[s]=cloneUnlessOtherwiseSpecified(t[s],n)}),getKeys(e).forEach(function(s){propertyIsUnsafe(t,s)||(propertyIsOnObject(t,s)&&n.isMergeableObject(e[s])?i[s]=getMergeFunction(s,n)(t[s],e[s],n):i[s]=cloneUnlessOtherwiseSpecified(e[s],n))}),i}function deepmerge(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||defaultArrayMerge,n.isMergeableObject=n.isMergeableObject||isMergeableObject,n.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var i=Array.isArray(e),s=Array.isArray(t),a=i===s;return a?i?n.arrayMerge(t,e,n):mergeObject(t,e,n):cloneUnlessOtherwiseSpecified(e,n)}deepmerge.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(i,s){return deepmerge(i,s,n)},{})};var browserRuntimeAdapter={};setAdapterIfNotSet(browserRuntimeAdapter);var getLastSlashBeforeIndex=(t,e)=>{for(var n=e-1;n>=0;){if(t[n]==="/")return n;n--}return-1},_getDebugFileName=t=>{var e,n=t.lastIndexOf(".css");if(n===-1)return"";var i=getLastSlashBeforeIndex(t,n);if(e=t.slice(i+1,n),i===-1)return e;var s=getLastSlashBeforeIndex(t,i-1),a=t.slice(s+1,i),l=e!=="index"?e:a;return l},memoizedGetDebugFileName=()=>{var t=new LRUCache({max:500});return e=>{var n=t.get(e);if(n)return n;var i=_getDebugFileName(e);return t.set(e,i),i}};memoizedGetDebugFileName();function createGlobalThemeContract(t,e){return walkObject(t,(n,i)=>{var s=typeof e=="function"?e(n,i):n,a=typeof s=="string"?s.replace(/^\-\-/,""):null;if(typeof a!="string"||a!==cssesc$1(a,{isIdentifier:!0}))throw new Error('Invalid variable name for "'.concat(i.join("."),'": ').concat(a));return"var(--".concat(a,")")})}var __create$1=Object.create,__defProp$g=Object.defineProperty,__getOwnPropDesc$d=Object.getOwnPropertyDescriptor,__getOwnPropNames$d=Object.getOwnPropertyNames,__getProtoOf$1=Object.getPrototypeOf,__hasOwnProp$d=Object.prototype.hasOwnProperty,__typeError$a=t=>{throw TypeError(t)},__esm=(t,e)=>function(){return t&&(e=(0,t[__getOwnPropNames$d(t)[0]])(t=0)),e},__commonJS$1=(t,e)=>function(){return e||(0,t[__getOwnPropNames$d(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps$d=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$d(e))!__hasOwnProp$d.call(t,s)&&s!==n&&__defProp$g(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$d(e,s))||i.enumerable});return t},__toESM$1=(t,e,n)=>(n=t!=null?__create$1(__getProtoOf$1(t)):{},__copyProps$d(!t||!t.__esModule?__defProp$g(n,"default",{value:t,enumerable:!0}):n,t)),__accessCheck$a=(t,e,n)=>e.has(t)||__typeError$a("Cannot "+n),__privateGet$a=(t,e,n)=>(__accessCheck$a(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$a=(t,e,n)=>e.has(t)?__typeError$a("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),init_StyleMarker_css_ts_vanilla=__esm({"vanilla-extract-css-ns:src/components/styling/StyleMarker.css.ts.vanilla.css?source=OndoZXJlKCopIHsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGNvbG9yOiB2YXIoLS1kYXBwLWtpdC1jb2xvcnMtYm9keSk7CiAgZm9udC1mYW1pbHk6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udEZhbWlseSk7CiAgZm9udC1zaXplOiB2YXIoLS1kYXBwLWtpdC1mb250V2VpZ2h0cy1ub3JtYWwpOwogIGZvbnQtc3R5bGU6IHZhcigtLWRhcHAta2l0LXR5cG9ncmFwaHktZm9udFN0eWxlKTsKICBmb250LXdlaWdodDogdmFyKC0tZGFwcC1raXQtZm9udFdlaWdodHMtbm9ybWFsKTsKICBsaW5lLWhlaWdodDogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1saW5lSGVpZ2h0KTsKICBsZXR0ZXItc3BhY2luZzogdmFyKC0tZGFwcC1raXQtdHlwb2dyYXBoeS1sZXR0ZXJTcGFjaW5nKTsKfQo6d2hlcmUoYnV0dG9uKSB7CiAgYXBwZWFyYW5jZTogbm9uZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7CiAgY29sb3I6IGluaGVyaXQ7CiAgYm9yZGVyOiAwOwogIHBhZGRpbmc6IDA7CiAgbWFyZ2luOiAwOwp9Cjp3aGVyZShhKSB7CiAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogIGNvbG9yOiBpbmhlcml0OwogIG91dGxpbmU6IG5vbmU7Cn0KOndoZXJlKG9sLCB1bCkgewogIGxpc3Qtc3R5bGU6IG5vbmU7CiAgbWFyZ2luOiAwOwogIHBhZGRpbmc6IDA7Cn0KOndoZXJlKGgxLCBoMiwgaDMsIGg0LCBoNSwgaDYpIHsKICBmb250LXNpemU6IGluaGVyaXQ7CiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7CiAgbWFyZ2luOiAwOwp9"(){}}),require_StyleMarker_css=__commonJS$1({"src/components/styling/StyleMarker.css.ts"(){init_StyleMarker_css_ts_vanilla()}});function createInMemoryStore(){const t=new Map;return{getItem(e){return t.get(e)},setItem(e,n){t.set(e,n)},removeItem(e){t.delete(e)}}}var SUI_WALLET_NAME="Sui Wallet",DEFAULT_STORAGE=typeof window<"u"&&window.localStorage?localStorage:createInMemoryStore(),DEFAULT_STORAGE_KEY="sui-dapp-kit:wallet-connection-info",SIGN_FEATURES=["sui:signTransaction","sui:signTransactionBlock"],DEFAULT_WALLET_FILTER=t=>SIGN_FEATURES.some(e=>t.features[e]),DEFAULT_PREFERRED_WALLETS=[SUI_WALLET_NAME,SLUSH_WALLET_NAME],walletMutationKeys={all:{baseScope:"wallet"},connectWallet:formMutationKeyFn("connect-wallet"),autoconnectWallet:formMutationKeyFn("autoconnect-wallet"),disconnectWallet:formMutationKeyFn("disconnect-wallet"),signPersonalMessage:formMutationKeyFn("sign-personal-message"),signTransaction:formMutationKeyFn("sign-transaction"),signAndExecuteTransaction:formMutationKeyFn("sign-and-execute-transaction"),switchAccount:formMutationKeyFn("switch-account"),reportTransactionEffects:formMutationKeyFn("report-transaction-effects")};function formMutationKeyFn(t){return function(n=[]){return[{...walletMutationKeys.all,baseEntity:t},...n]}}var WalletContext=reactExports.createContext(null);function useWalletStore(t){const e=reactExports.useContext(WalletContext);if(!e)throw new Error("Could not find WalletContext. Ensure that you have set up the WalletProvider.");return useStore(e,t)}function useConnectWallet({mutationKey:t,...e}={}){const n=useWalletStore(s=>s.setWalletConnected),i=useWalletStore(s=>s.setConnectionStatus);return useMutation({mutationKey:walletMutationKeys.connectWallet(t),mutationFn:async({wallet:s,accountAddress:a,...l})=>{try{i("connecting");const f=await s.features["standard:connect"].connect(l),p=f.accounts.filter(B=>B.chains.some(N=>N.split(":")[0]==="sui")),C=getSelectedAccount(p,a);return n(s,p,C,f.supportedIntents),{accounts:p}}catch(f){throw i("disconnected"),f}},...e})}function getSelectedAccount(t,e){return t.length===0?null:e?t.find(i=>i.address===e)??t[0]:t[0]}function useWallets(){return useWalletStore(t=>t.wallets)}function getRegisteredWallets(t,e){const s=getWallets().get().filter(a=>isWalletWithRequiredFeatureSet(a)&&(!e||e(a)));return[...t.map(a=>s.find(l=>l.name===a)).filter(Boolean),...s.filter(a=>!t.includes(a.name))]}function getWalletUniqueIdentifier(t){return(t==null?void 0:t.id)??(t==null?void 0:t.name)}var styleDataAttributeName="data-dapp-kit",styleDataAttributeSelector=`[${styleDataAttributeName}]`,styleDataAttribute={[styleDataAttributeName]:""};__toESM$1(require_StyleMarker_css());var StyleMarker=reactExports.forwardRef(({children:t,...e},n)=>jsxRuntimeExports.jsx(Slot,{ref:n,...e,...styleDataAttribute,children:t}));StyleMarker.displayName="StyleMarker";var headingVariants=createRuntimeFn({defaultClassName:"Heading__1aa835k0",variantClassNames:{size:{sm:"Heading_headingVariants_size_sm__1aa835k1",md:"Heading_headingVariants_size_md__1aa835k2",lg:"Heading_headingVariants_size_lg__1aa835k3",xl:"Heading_headingVariants_size_xl__1aa835k4"},weight:{normal:"Heading_headingVariants_weight_normal__1aa835k5",bold:"Heading_headingVariants_weight_bold__1aa835k6"},truncate:{true:"Heading_headingVariants_truncate_true__1aa835k7"}},defaultVariants:{size:"lg",weight:"bold"},compoundVariants:[]}),Heading=reactExports.forwardRef(({children:t,className:e,asChild:n=!1,as:i="h1",size:s,weight:a,truncate:l,...f},p)=>jsxRuntimeExports.jsx(Slot,{...f,ref:p,className:clsx(headingVariants({size:s,weight:a,truncate:l}),e),children:n?t:jsxRuntimeExports.jsx(i,{children:t})}));Heading.displayName="Heading";var container="IconButton_container__s6n7bq0",IconButton=reactExports.forwardRef(({className:t,asChild:e=!1,...n},i)=>{const s=e?Slot:"button";return jsxRuntimeExports.jsx(s,{...n,className:clsx(container,t),ref:i})});IconButton.displayName="Button";var buttonVariants=createRuntimeFn({defaultClassName:"Button_buttonVariants__x1s81q0",variantClassNames:{variant:{primary:"Button_buttonVariants_variant_primary__x1s81q1",outline:"Button_buttonVariants_variant_outline__x1s81q2"},size:{md:"Button_buttonVariants_size_md__x1s81q3",lg:"Button_buttonVariants_size_lg__x1s81q4"}},defaultVariants:{variant:"primary",size:"md"},compoundVariants:[]}),Button=reactExports.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...s},a)=>{const l=i?Slot:"button";return jsxRuntimeExports.jsx(l,{...s,className:clsx(buttonVariants({variant:e,size:n}),t),ref:a})});Button.displayName="Button";var textVariants=createRuntimeFn({defaultClassName:"Text__2bv1ur0",variantClassNames:{size:{sm:"Text_textVariants_size_sm__2bv1ur1"},weight:{normal:"Text_textVariants_weight_normal__2bv1ur2",medium:"Text_textVariants_weight_medium__2bv1ur3",bold:"Text_textVariants_weight_bold__2bv1ur4"},color:{muted:"Text_textVariants_color_muted__2bv1ur5",danger:"Text_textVariants_color_danger__2bv1ur6"},mono:{true:"Text_textVariants_mono_true__2bv1ur7"}},defaultVariants:{size:"sm",weight:"normal"},compoundVariants:[]}),Text=reactExports.forwardRef(({children:t,className:e,asChild:n=!1,as:i="div",size:s,weight:a,color:l,mono:f,...p},C)=>jsxRuntimeExports.jsx(Slot,{...p,ref:C,className:clsx(textVariants({size:s,weight:a,color:l,mono:f}),e),children:n?t:jsxRuntimeExports.jsx(i,{children:t})}));Text.displayName="Text";function useCurrentAccount(){return useWalletStore(t=>t.currentAccount)}var SuiClientContext=reactExports.createContext(null),DEFAULT_NETWORKS={localnet:{url:getFullnodeUrl$2("localnet")}},DEFAULT_CREATE_CLIENT=function(e,n){return isSuiClient(n)?n:new SuiClient$2(n)};function SuiClientProvider(t){const{onNetworkChange:e,network:n,children:i}=t,s=t.networks??DEFAULT_NETWORKS,a=t.createClient??DEFAULT_CREATE_CLIENT,[l,f]=reactExports.useState(t.network??t.defaultNetwork??Object.keys(s)[0]),p=t.network??l,C=reactExports.useMemo(()=>a(p,s[p]),[a,p,s]),B=reactExports.useMemo(()=>({client:C,networks:s,network:p,config:s[p]instanceof SuiClient$2?null:s[p],selectNetwork:N=>{p!==N&&(!n&&N!==l&&f(N),e==null||e(N))}}),[C,s,l,p,n,e]);return jsxRuntimeExports.jsx(SuiClientContext.Provider,{value:B,children:i})}function useSuiClientContext(){const t=reactExports.useContext(SuiClientContext);if(!t)throw new Error("Could not find SuiClientContext. Ensure that you have set up the SuiClientProvider");return t}function useSuiClient(){return useSuiClientContext().client}var WalletNotConnectedError=class extends Error{},WalletNoAccountSelectedError=class extends Error{},WalletFeatureNotSupportedError=class extends Error{},WalletAccountNotFoundError=class extends Error{};function useCurrentWallet(){const t=useWalletStore(i=>i.currentWallet),e=useWalletStore(i=>i.connectionStatus),n=useWalletStore(i=>i.supportedIntents);switch(e){case"connecting":return{connectionStatus:e,currentWallet:null,isDisconnected:!1,isConnecting:!0,isConnected:!1,supportedIntents:[]};case"disconnected":return{connectionStatus:e,currentWallet:null,isDisconnected:!0,isConnecting:!1,isConnected:!1,supportedIntents:[]};case"connected":return{connectionStatus:e,currentWallet:t,isDisconnected:!1,isConnecting:!1,isConnected:!0,supportedIntents:n}}}function useDisconnectWallet({mutationKey:t,...e}={}){const{currentWallet:n}=useCurrentWallet(),i=useWalletStore(s=>s.setWalletDisconnected);return useMutation({mutationKey:walletMutationKeys.disconnectWallet(t),mutationFn:async()=>{var s;if(!n)throw new WalletNotConnectedError("No wallet is connected.");try{await((s=n.features["standard:disconnect"])==null?void 0:s.disconnect())}catch(a){console.error("Failed to disconnect the application from the current wallet.",a)}i()},...e})}function useSwitchAccount({mutationKey:t,...e}={}){const{currentWallet:n}=useCurrentWallet(),i=useWalletStore(s=>s.setAccountSwitched);return useMutation({mutationKey:walletMutationKeys.switchAccount(t),mutationFn:async({account:s})=>{if(!n)throw new WalletNotConnectedError("No wallet is connected.");const a=n.accounts.find(l=>l.address===s.address);if(!a)throw new WalletAccountNotFoundError(`No account with address ${s.address} is connected to ${n.name}.`);i(a)},...e})}function useAutoConnectWallet(){const{mutateAsync:t}=useConnectWallet(),e=useWalletStore(B=>B.autoConnectEnabled),n=useWalletStore(B=>B.lastConnectedWalletName),i=useWalletStore(B=>B.lastConnectedAccountAddress),s=useWallets(),{isConnected:a}=useCurrentWallet(),[l,f]=reactExports.useState(!1);reactExports.useLayoutEffect(()=>{f(!0)},[]);const{data:p,isError:C}=useQuery({queryKey:["@mysten/dapp-kit","autoconnect",{isConnected:a,autoConnectEnabled:e,lastConnectedWalletName:n,lastConnectedAccountAddress:i,walletCount:s.length}],queryFn:async()=>{if(!e)return"disabled";if(!n||!i||a)return"attempted";const B=s.find(N=>getWalletUniqueIdentifier(N)===n);return B&&await t({wallet:B,accountAddress:i,silent:!0}),"attempted"},enabled:e,persister:void 0,gcTime:0,staleTime:0,networkMode:"always",retry:!1,retryOnMount:!1,refetchInterval:!1,refetchIntervalInBackground:!1,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return e?l?a||!n||C?"attempted":p??"idle":"idle":"disabled"}function useSlushWallet(t){reactExports.useLayoutEffect(()=>{if(!(t!=null&&t.name))return;let e,n=!0;return(async()=>{try{const s=await registerSlushWallet(t.name,{origin:t.origin});n&&s?e=s.unregister:s&&s.unregister()}catch(s){console.error("Failed to register Slush wallet:",s)}})(),()=>{n=!1,e&&e()}},[t==null?void 0:t.name,t==null?void 0:t.origin])}var WALLET_NAME="Unsafe Burner Wallet";function useUnsafeBurnerWallet(t){const e=useSuiClient();reactExports.useEffect(()=>t?registerUnsafeBurnerWallet(e):void 0,[t,e])}function registerUnsafeBurnerWallet(t){var e,n,i,s,a,l,f;const p=getWallets();if(p.get().find(Ee=>Ee.name===WALLET_NAME)){console.warn("registerUnsafeBurnerWallet: Unsafe Burner Wallet already registered, skipping duplicate registration.");return}console.warn("Your application is currently using the unsafe burner wallet. Make sure that this wallet is disabled in production.");const B=new Ed25519Keypair,N=new ReadonlyWalletAccount({address:B.getPublicKey().toSuiAddress(),publicKey:B.getPublicKey().toSuiBytes(),chains:["sui:unknown"],features:["sui:signAndExecuteTransactionBlock","sui:signTransactionBlock","sui:signTransaction","sui:signAndExecuteTransaction"]});class le{constructor(){__privateAdd$a(this,e,()=>()=>{}),__privateAdd$a(this,n,async()=>({accounts:this.accounts})),__privateAdd$a(this,i,async Ue=>{const{bytes:ze,signature:Ze}=await B.signPersonalMessage(Ue.message);return{bytes:ze,signature:Ze}}),__privateAdd$a(this,s,async Ue=>{const{bytes:ze,signature:Ze}=await Ue.transactionBlock.sign({client:t,signer:B});return{transactionBlockBytes:ze,signature:Ze}}),__privateAdd$a(this,a,async Ue=>{var Qe;const{bytes:ze,signature:Ze}=await Transaction$2.from(await Ue.transaction.toJSON()).sign({client:t,signer:B});return(Qe=Ue.signal)==null||Qe.throwIfAborted(),{bytes:ze,signature:Ze}}),__privateAdd$a(this,l,async Ue=>{const{bytes:ze,signature:Ze}=await Ue.transactionBlock.sign({client:t,signer:B});return t.executeTransactionBlock({signature:Ze,transactionBlock:ze,options:Ue.options})}),__privateAdd$a(this,f,async Ue=>{var wt;const{bytes:ze,signature:Ze}=await Transaction$2.from(await Ue.transaction.toJSON()).sign({client:t,signer:B});(wt=Ue.signal)==null||wt.throwIfAborted();const{rawEffects:Qe,digest:ct}=await t.executeTransactionBlock({signature:Ze,transactionBlock:ze,options:{showRawEffects:!0}});return{bytes:ze,signature:Ze,digest:ct,effects:toBase64(new Uint8Array(Qe))}})}get version(){return"1.0.0"}get name(){return WALLET_NAME}get icon(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAJrElEQVR42tWbe2xT1x3H7UxAyD3XrdrSbGXlUbKWsq5rWdVuVOMRSEqSOmnVRZMmJqZNYv1nf3R/jWmVmVrtRRM/YwPd1nVTNcrE3pQCoikrIRAC4VVNY0hlD9ZOo1uCfe3ra9979v0dcy3s5Pper76Oh/STE+495/4+5/c85zqe2f7HAx5vKsS+monJj/CdHi/f4/HWW4f6AwdblmXjTM0NyS+movKtw9v+j6C5gKhyTMTTpA2x15Qwy+Pz75motOGdgKep8WF5ATgVZIt5NeO2wMqD0hfVGNPh3oYaYflsjG0l63PeyLCDnqbsLpZIhaRNFI+Ox+Le5KB0RybK8gDmJOkI07U4i/FhT1NDQl8Me5rUIfaDfELOJ0NsFa/SJQHm1WLsHcDqRWiy9BCL8s0N5t6UWWFVvxplejYm60hC91cNjPtzCTZsAptCVoeLP8PDDQJNCSodap6H+LtE8ZcdkvVkkD38vwDn4/Jvy4EhBhZSvRaUHiTXn31gJJxkUPoClBKKFizM+inhVA2cYIdM4HJouPvoe9s9H+KzDhyGK6KkmIqitBhww2C11rjQL2L4kgUwFxk8yPyzauUA3Pk/353XnA6zKbKCaQ2UlMvJF6W5uF5F8yHfZWZpC9HRmBziaEpm1bpY9XvhxuWJRldC7Mt03WlZwpjnkZUNa2DMG2EaPj9MGd2l2mofd0hQ7ZSopsXckHxVCUp32fXGdD0ZktrgFUmMqwhcWFjp87RArsD+9bn585IRaSHAKgBL3SZwOTRc8BKg7yYoskp5OJDiiPmF2Sj7ox0siYJ7lJA04EqvzZ9B1xSVt6PlW0IxZgUMJdZYAJuWngLQt9IRuZXmoTEkmci8ZtTXTViUKyasA9FRun5d8z6bfw0gYWm9mmCXxZatQgxfC7I2NVpRYQOxKWppLs4mcgn5NcibgL1K40xYp8CYY5TXEpjcb3LAJ0OZyyg3+2nySm6fjEtzkEz+7VBx3RTb+60z9dma7pkvwO2QQL5HzTtAdpKF7euw/HuzfrosBHy+ZsBimzbQshjWTVMDgez53B5MbjcGbr1ZjdUJOM5O0SLXzJ2R+uOA1dMAVoLsm5zb73JSId8t8Aa1LsAJdoTCrCaw6e3NC2DdFMUXWRg173mysJNOSUNskUJ1cOlXa2LhcbgmSszXYSn9hl3KSxTDjrZ2cbbfbWDyumsh9m3e7zCG7a3ETt+gtI7fx6lEOanZKDVvuA2cjYmt5xNOd2Louz3IQ12UZ2Zo3lkb9cDlvSs6m4Vk5Yqlabs0B97wT7PUuCXQz0Bnt9QxMPTW4iwBtmUlY8hFsHJPlzcQ1xuG75CVK1kXofCUGnU9fg1aVD7kfE9MoabtYkcAvIUYS2op3Hc3TTrDQzIAeojugTVLFolWDR6wFPtY0R66n6HltwjCIawnE2ymresk9NtN+pfUUi0mX6RJLfrh9zMRaRPOqubSA8W2MNzC0mHpK7j2ruuw5mYkxl5+2+HGQeg4yNYg7vNg+xMxFsuRMuiTsRJZG3cysAl4D9n4aC4un8L9qUyVvbCyYwFXX1nGUxFf1cCiEQqy75O+TpMwYKNKSPQUqhLyyWLsRbESLctx0YnixgfphRWA8pOPc+N4F9d+eV9V4OlCX/As5w5g+wtGhJGukp5go2R3D7EW9rSDcnGL56YgJHj+8GcFND/Vy41jj/H0jxc6HU/AA2QlR01UlH3D7CmITQnJq4lVWBi1yl8XYEh278c5H++F+Iui7r7bYR8tH/gbqoJN7fVODUhLYVVxzmYCEyOxFg7RUVa0egCHZZ55eRHnp/tKgMna6s/bbMdTxZgMzl9CCcmq7k690OzDfaeSN4QcsREjsQpgXHwyWyfg9K5WE7hc6JqTWjyihObfygOFOkv6i5K5TZx8LsL1sVS4NL8ItiB7sgAcEKcWHfUCVhK3kUVnBNbfXIs4l5xAv5sJs234eTUy93L0Au2otQOw5ORMyfQ6WwexFupVSHowG6uThXfebmlhWojMS3fazmMeGxEI6S2SUti6RAo2vKohVuH3qUG5FWm/PjH8kzutgSH5g58xrVwzIbZkxHf7OFjFC+wrMDXcpOqOKX/g01U/XPvVJyxdWsiJblqYmnZoWbDxAcR56X5WPuh4ewcL5PY9JBRUYjc7fzjG6Uc3mHBWbg23X1BLaFHOSnrw4bWiNAXSEWcWRntIignXTP/oDsfKZX66mMbZAPfhviU1AyYmJLYAMZa/QXjUSeIiixpj3UUFtd884KytjN7EjdGNNMbWwtlf3FvbQ4OQtIoYSzbxqVDLXMTxP8jnnbiyKcaJLvueGLD6kXW2sKZov1tpn7hwXf3ZUvq0K2FXOM7Op/Xgb6PhxsWIErYGVuK3WGXWkkwMMZVCVl5kWtax5A6usgemvnx4DelUcYcFC0eIbcbXKzggeyBjeXIhkftaKknJKLtnuSg7KmKQsrH+1nqbmLWY6w/tBGy/8xrruR5SM99LLIjfT/4ZbNZnQEPssIVb21rKTGRIPDagNoLdFMKgcuLc/TF6Bulk6c7ovg4TU+XvS6FNw1tDfVqH9MOPmBDui0hcK6wz744FlDjNe0m3aVldJYagtI6YbF+3ZGPsQHlN1vbeh8lJofqJ+uo9Zi4wXZxKFiXKGxbHT7pNq71oNg4Qi6MviE0FpRVqjGXILYoJ4tCjdYU1rWeMdPLc/ochj3B9pGNGL4NupGPRlUl35KMVxFLNO6ZnxYlBsUPqoMkbUqAb6VhMVKQ7MVT1dYdrL8hzEAcjpmvjHKphgaFb0ZVJZw7dwVD9q5fkgPTRbBxnzmGfgRLQsMCkG+moQdcp6GzzZsL2MGyllvBNGWM9RqMCk26kI7aBK526csVShZTfzid6FEzeiNAGP92jpCPQEbrW7EW5MbZxAz/fN9lg0IbQaaxrQ83/VoKPb/HqJx67Hw+43CDQBPsX0gm6ufXNvH4vP9rZapzx7+Nn+oxZAjfo2caZ3n350c5W6FSEdQ86sNarj3c/jRV+H42AXsdGRBfPPIlnb/mUtxzWXfALn/PmRze2Gud6E/xsXwYtnlsWN8Tc5/oyxjn/jvyJrlY82xLUfWuPr/TqxzuXQZkIP9M7CXiyuP4B4WmsTnNhzinjrD+WO9bRhmdZWLXe4EKRtV5tpN3Hx3s2G+d79/MJf4qff0LnE72kfFEs4ITQvWLMab8C131dP9n9Je1Yx000Nz2jAf+UJwCBchc3NvGR1Qx71XXY2Ww1Jvx7YalzAPkX9rp5E5Z+pv+ja8bE43uN491b9dHO9Xx4lUxziLn21Nai/wXWM6t9vkvtrwAAAABJRU5ErkJggg=="}get chains(){return SUI_CHAINS$1}get accounts(){return[N]}get features(){return{"standard:connect":{version:"1.0.0",connect:__privateGet$a(this,n)},"standard:events":{version:"1.0.0",on:__privateGet$a(this,e)},"sui:signPersonalMessage":{version:"1.1.0",signPersonalMessage:__privateGet$a(this,i)},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:__privateGet$a(this,s)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:__privateGet$a(this,l)},"sui:signTransaction":{version:"2.0.0",signTransaction:__privateGet$a(this,a)},"sui:signAndExecuteTransaction":{version:"2.0.0",signAndExecuteTransaction:__privateGet$a(this,f)}}}}return e=new WeakMap,n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,l=new WeakMap,f=new WeakMap,p.register(new le)}function useWalletPropertiesChanged(){const{currentWallet:t}=useCurrentWallet(),e=useWalletStore(n=>n.updateWalletAccounts);reactExports.useEffect(()=>t==null?void 0:t.features["standard:events"].on("change",({accounts:i})=>{i&&e(i)}),[t==null?void 0:t.features,e])}function useWalletsChanged(t,e){const n=useWalletStore(s=>s.setWalletRegistered),i=useWalletStore(s=>s.setWalletUnregistered);reactExports.useEffect(()=>{const s=getWallets();n(getRegisteredWallets(t,e));const a=s.on("register",()=>{n(getRegisteredWallets(t,e))}),l=s.on("unregister",f=>{i(getRegisteredWallets(t,e),f)});return()=>{a(),l()}},[t,e,n,i])}var lightTheme={blurs:{modalOverlay:"blur(0)"},backgroundColors:{primaryButton:"#F6F7F9",primaryButtonHover:"#F0F2F5",outlineButtonHover:"#F4F4F5",modalOverlay:"rgba(24 36 53 / 20%)",modalPrimary:"white",modalSecondary:"#F7F8F8",iconButton:"transparent",iconButtonHover:"#F0F1F2",dropdownMenu:"#FFFFFF",dropdownMenuSeparator:"#F3F6F8",walletItemSelected:"white",walletItemHover:"#3C424226"},borderColors:{outlineButton:"#E4E4E7"},colors:{primaryButton:"#373737",outlineButton:"#373737",iconButton:"#000000",body:"#182435",bodyMuted:"#767A81",bodyDanger:"#FF794B"},radii:{small:"6px",medium:"8px",large:"12px",xlarge:"16px"},shadows:{primaryButton:"0px 4px 12px rgba(0, 0, 0, 0.1)",walletItemSelected:"0px 2px 6px rgba(0, 0, 0, 0.05)"},fontWeights:{normal:"400",medium:"500",bold:"600"},fontSizes:{small:"14px",medium:"16px",large:"18px",xlarge:"20px"},typography:{fontFamily:'ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',fontStyle:"normal",lineHeight:"1.3",letterSpacing:"1"}};function createWalletStore({wallets:t,storage:e,storageKey:n,autoConnectEnabled:i}){return createStore()(persist((s,a)=>({autoConnectEnabled:i,wallets:t,accounts:[],currentWallet:null,currentAccount:null,lastConnectedAccountAddress:null,lastConnectedWalletName:null,connectionStatus:"disconnected",supportedIntents:[],setConnectionStatus(l){s(()=>({connectionStatus:l}))},setWalletConnected(l,f,p,C=[]){s(()=>({accounts:f,currentWallet:l,currentAccount:p,lastConnectedWalletName:getWalletUniqueIdentifier(l),lastConnectedAccountAddress:p==null?void 0:p.address,connectionStatus:"connected",supportedIntents:C}))},setWalletDisconnected(){s(()=>({accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected",supportedIntents:[]}))},setAccountSwitched(l){s(()=>({currentAccount:l,lastConnectedAccountAddress:l.address}))},setWalletRegistered(l){s(()=>({wallets:l}))},setWalletUnregistered(l,f){f===a().currentWallet?s(()=>({wallets:l,accounts:[],currentWallet:null,currentAccount:null,lastConnectedWalletName:null,lastConnectedAccountAddress:null,connectionStatus:"disconnected",supportedIntents:[]})):s(()=>({wallets:l}))},updateWalletAccounts(l){const f=a().currentAccount;s(()=>({accounts:l,currentAccount:f&&l.find(({address:p})=>p===f.address)||l[0]}))}}),{name:n,storage:createJSONStorage(()=>e),partialize:({lastConnectedWalletName:s,lastConnectedAccountAddress:a})=>({lastConnectedWalletName:s,lastConnectedAccountAddress:a})}))}var themeContractValues={blurs:{modalOverlay:""},backgroundColors:{primaryButton:"",primaryButtonHover:"",outlineButtonHover:"",walletItemHover:"",walletItemSelected:"",modalOverlay:"",modalPrimary:"",modalSecondary:"",iconButton:"",iconButtonHover:"",dropdownMenu:"",dropdownMenuSeparator:""},borderColors:{outlineButton:""},colors:{primaryButton:"",outlineButton:"",body:"",bodyMuted:"",bodyDanger:"",iconButton:""},radii:{small:"",medium:"",large:"",xlarge:""},shadows:{primaryButton:"",walletItemSelected:""},fontWeights:{normal:"",medium:"",bold:""},fontSizes:{small:"",medium:"",large:"",xlarge:""},typography:{fontFamily:"",fontStyle:"",lineHeight:"",letterSpacing:""}},themeVars=createGlobalThemeContract(themeContractValues,(t,e)=>`dapp-kit-${e.join("-")}`);function InjectedThemeStyles({theme:t}){const e=Array.isArray(t)?getDynamicThemeStyles(t):getStaticThemeStyles(t);return jsxRuntimeExports.jsx("style",{precedence:"default",href:"mysten-dapp-kit-theme",dangerouslySetInnerHTML:{__html:e}})}function getDynamicThemeStyles(t){return t.map(({mediaQuery:e,selector:n,variables:i})=>{const s=getStaticThemeStyles(i),a=n?`${n} ${s}`:s;return e?`@media ${e}{${a}}`:a}).join(" ")}function getStaticThemeStyles(t){return`${styleDataAttributeSelector} {${cssStringFromTheme(t)}}`}function cssStringFromTheme(t){return Object.entries(assignInlineVars(themeVars,t)).map(([e,n])=>`${e}:${n};`).join("")}function WalletProvider({preferredWallets:t=DEFAULT_PREFERRED_WALLETS,walletFilter:e=DEFAULT_WALLET_FILTER,storage:n=DEFAULT_STORAGE,storageKey:i=DEFAULT_STORAGE_KEY,enableUnsafeBurner:s=!1,autoConnect:a=!1,slushWallet:l,theme:f=lightTheme,children:p}){const C=reactExports.useRef(createWalletStore({autoConnectEnabled:a,wallets:getRegisteredWallets(t,e),storage:n||createInMemoryStore(),storageKey:i}));return jsxRuntimeExports.jsx(WalletContext.Provider,{value:C.current,children:jsxRuntimeExports.jsxs(WalletConnectionManager,{preferredWallets:t,walletFilter:e,enableUnsafeBurner:s,slushWallet:l,children:[f?jsxRuntimeExports.jsx(InjectedThemeStyles,{theme:f}):null,p]})})}function WalletConnectionManager({preferredWallets:t=DEFAULT_PREFERRED_WALLETS,walletFilter:e=DEFAULT_WALLET_FILTER,enableUnsafeBurner:n=!1,slushWallet:i,children:s}){return useWalletsChanged(t,e),useWalletPropertiesChanged(),useSlushWallet(i),useUnsafeBurnerWallet(n),useAutoConnectWallet(),s}function createNetworkConfig(t){function e(){const{config:s}=useSuiClientContext();if(!s)throw new Error("No network config found");return s}function n(){const{variables:s}=e();return s??{}}function i(s){return n()[s]}return{networkConfig:t,useNetworkConfig:e,useNetworkVariables:n,useNetworkVariable:i}}function useReportTransactionEffects({mutationKey:t,...e}={}){const{currentWallet:n}=useCurrentWallet(),i=useCurrentAccount();return useMutation({mutationKey:walletMutationKeys.reportTransactionEffects(t),mutationFn:async({effects:s,chain:a=n==null?void 0:n.chains[0],account:l=i})=>{if(!n)throw new WalletNotConnectedError("No wallet is connected.");if(!l)throw new WalletNoAccountSelectedError("No wallet account is selected to report transaction effects for");const f=n.features["sui:reportTransactionEffects"];if(f)return await f.reportTransactionEffects({effects:Array.isArray(s)?toBase64(new Uint8Array(s)):s,account:l,chain:a??(n==null?void 0:n.chains[0])})},...e})}function useSignAndExecuteTransaction({mutationKey:t,execute:e,...n}={}){const{currentWallet:i,supportedIntents:s}=useCurrentWallet(),a=useCurrentAccount(),{client:l,network:f}=useSuiClientContext(),{mutate:p}=useReportTransactionEffects(),C=e??(async({bytes:B,signature:N})=>{const{digest:le,rawEffects:Ee}=await l.executeTransactionBlock({transactionBlock:B,signature:N,options:{showRawEffects:!0}});return{digest:le,rawEffects:Ee,effects:toBase64(new Uint8Array(Ee)),bytes:B,signature:N}});return useMutation({mutationKey:walletMutationKeys.signAndExecuteTransaction(t),mutationFn:async({transaction:B,...N})=>{var ct;if(!i)throw new WalletNotConnectedError("No wallet is connected.");const le=N.account??a;if(!le)throw new WalletNoAccountSelectedError("No wallet account is selected to sign the transaction with.");if(!i.features["sui:signTransaction"]&&!i.features["sui:signTransactionBlock"])throw new WalletFeatureNotSupportedError("This wallet doesn't support the `signTransaction` feature.");const Ee=N.chain??`sui:${f}`,{signature:Ue,bytes:ze}=await signTransaction(i,{...N,transaction:{async toJSON(){return typeof B=="string"?B:await B.toJSON({supportedIntents:s,client:l})}},account:le,chain:Ee}),Ze=await C({bytes:ze,signature:Ue});let Qe;if("effects"in Ze&&((ct=Ze.effects)!=null&&ct.bcs))Qe=Ze.effects.bcs;else if("rawEffects"in Ze)Qe=toBase64(new Uint8Array(Ze.rawEffects));else throw new Error("Could not parse effects from transaction result.");return p({effects:Qe,account:le,chain:Ee}),Ze},...n})}function useSignPersonalMessage({mutationKey:t,...e}={}){const{currentWallet:n}=useCurrentWallet(),i=useCurrentAccount(),{network:s}=useSuiClientContext();return useMutation({mutationKey:walletMutationKeys.signPersonalMessage(t),mutationFn:async a=>{if(!n)throw new WalletNotConnectedError("No wallet is connected.");const l=a.account??i;if(!l)throw new WalletNoAccountSelectedError("No wallet account is selected to sign the personal message with.");const f=n.features["sui:signPersonalMessage"];if(f)return await f.signPersonalMessage({...a,account:l,chain:a.chain??`sui:${s}`});const p=n.features["sui:signMessage"];if(p){console.warn("This wallet doesn't support the `signPersonalMessage` feature... falling back to `signMessage`.");const{messageBytes:C,signature:B}=await p.signMessage({...a,account:l});return{bytes:C,signature:B}}throw new WalletFeatureNotSupportedError("This wallet doesn't support the `signPersonalMessage` feature.")},...e})}function useSignTransaction({mutationKey:t,...e}={}){const{currentWallet:n}=useCurrentWallet(),i=useCurrentAccount(),{client:s,network:a}=useSuiClientContext(),{mutate:l}=useReportTransactionEffects();return useMutation({mutationKey:walletMutationKeys.signTransaction(t),mutationFn:async({transaction:f,...p})=>{if(!n)throw new WalletNotConnectedError("No wallet is connected.");const C=p.account??i;if(!C)throw new WalletNoAccountSelectedError("No wallet account is selected to sign the transaction with.");if(!n.features["sui:signTransaction"]&&!n.features["sui:signTransactionBlock"])throw new WalletFeatureNotSupportedError("This wallet doesn't support the `signTransaction` feature.");const B=p.chain??`sui:${a}`,{bytes:N,signature:le}=await signTransaction(n,{...p,transaction:{toJSON:async()=>typeof f=="string"?f:await f.toJSON({supportedIntents:[],client:s})},account:C,chain:B});return{bytes:N,signature:le,reportTransactionEffects:Ee=>{l({effects:Ee,account:C,chain:B})}}},...e})}const PACKAGE_VERSION$1="1.27.0",TARGETED_RPC_VERSION$1="1.47.0",CODE_TO_ERROR_TYPE$1={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};let SuiHTTPTransportError$1=class extends Error{},JsonRpcError$1=class extends SuiHTTPTransportError$1{constructor(e,n){super(e),this.code=n,this.type=CODE_TO_ERROR_TYPE$1[n]??"ServerError"}},SuiHTTPStatusError$1=class extends SuiHTTPTransportError$1{constructor(e,n,i){super(e),this.status=n,this.statusText=i}};var __typeError$9=t=>{throw TypeError(t)},__accessCheck$9=(t,e,n)=>e.has(t)||__typeError$9("Cannot "+n),__privateGet$9=(t,e,n)=>(__accessCheck$9(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$9=(t,e,n)=>e.has(t)?__typeError$9("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$9=(t,e,n,i)=>(__accessCheck$9(t,e,"write to private field"),e.set(t,n),n),__privateMethod$5=(t,e,n)=>(__accessCheck$9(t,e,"access private method"),n),__privateWrapper$1=(t,e,n,i)=>({set _(s){__privateSet$9(t,e,s)},get _(){return __privateGet$9(t,e,i)}}),_requestId$3,_disconnects$1,_webSocket$1,_connectionPromise$1,_subscriptions$1,_pendingRequests$1,_WebsocketClient_instances$1,setupWebSocket_fn$1,reconnect_fn$1;function getWebsocketUrl$1(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const DEFAULT_CLIENT_OPTIONS$1={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};let WebsocketClient$1=class{constructor(e,n={}){if(__privateAdd$9(this,_WebsocketClient_instances$1),__privateAdd$9(this,_requestId$3,0),__privateAdd$9(this,_disconnects$1,0),__privateAdd$9(this,_webSocket$1,null),__privateAdd$9(this,_connectionPromise$1,null),__privateAdd$9(this,_subscriptions$1,new Set),__privateAdd$9(this,_pendingRequests$1,new Map),this.endpoint=e,this.options={...DEFAULT_CLIENT_OPTIONS$1,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=getWebsocketUrl$1(this.endpoint))}async makeRequest(e,n,i){const s=await __privateMethod$5(this,_WebsocketClient_instances$1,setupWebSocket_fn$1).call(this);return new Promise((a,l)=>{__privateSet$9(this,_requestId$3,__privateGet$9(this,_requestId$3)+1),__privateGet$9(this,_pendingRequests$1).set(__privateGet$9(this,_requestId$3),{resolve:a,reject:l,timeout:setTimeout(()=>{__privateGet$9(this,_pendingRequests$1).delete(__privateGet$9(this,_requestId$3)),l(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),i==null||i.addEventListener("abort",()=>{__privateGet$9(this,_pendingRequests$1).delete(__privateGet$9(this,_requestId$3)),l(i.reason)}),s.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet$9(this,_requestId$3),method:e,params:n}))}).then(({error:a,result:l})=>{if(a)throw new JsonRpcError$1(a.message,a.code);return l})}async subscribe(e){const n=new RpcSubscription$1(e);return __privateGet$9(this,_subscriptions$1).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}};_requestId$3=new WeakMap;_disconnects$1=new WeakMap;_webSocket$1=new WeakMap;_connectionPromise$1=new WeakMap;_subscriptions$1=new WeakMap;_pendingRequests$1=new WeakMap;_WebsocketClient_instances$1=new WeakSet;setupWebSocket_fn$1=function(){return __privateGet$9(this,_connectionPromise$1)?__privateGet$9(this,_connectionPromise$1):(__privateSet$9(this,_connectionPromise$1,new Promise(t=>{var e;(e=__privateGet$9(this,_webSocket$1))==null||e.close(),__privateSet$9(this,_webSocket$1,new this.options.WebSocketConstructor(this.endpoint)),__privateGet$9(this,_webSocket$1).addEventListener("open",()=>{__privateSet$9(this,_disconnects$1,0),t(__privateGet$9(this,_webSocket$1))}),__privateGet$9(this,_webSocket$1).addEventListener("close",()=>{__privateWrapper$1(this,_disconnects$1)._++,__privateGet$9(this,_disconnects$1)<=this.options.maxReconnects&&setTimeout(()=>{__privateMethod$5(this,_WebsocketClient_instances$1,reconnect_fn$1).call(this)},this.options.reconnectTimeout)}),__privateGet$9(this,_webSocket$1).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in i&&i.id!=null&&__privateGet$9(this,_pendingRequests$1).has(i.id)){const{resolve:s,timeout:a}=__privateGet$9(this,_pendingRequests$1).get(i.id);clearTimeout(a),s(i)}else if("params"in i){const{params:s}=i;__privateGet$9(this,_subscriptions$1).forEach(a=>{a.subscriptionId===s.subscription&&s.subscription===a.subscriptionId&&a.onMessage(s.result)})}})})),__privateGet$9(this,_connectionPromise$1))};reconnect_fn$1=async function(){var t;return(t=__privateGet$9(this,_webSocket$1))==null||t.close(),__privateSet$9(this,_connectionPromise$1,null),Promise.allSettled([...__privateGet$9(this,_subscriptions$1)].map(e=>e.subscribe(this)))};let RpcSubscription$1=class{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[n]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const n=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=n)}};var __typeError$8=t=>{throw TypeError(t)},__accessCheck$8=(t,e,n)=>e.has(t)||__typeError$8("Cannot "+n),__privateGet$8=(t,e,n)=>(__accessCheck$8(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$8=(t,e,n)=>e.has(t)?__typeError$8("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$8=(t,e,n,i)=>(__accessCheck$8(t,e,"write to private field"),e.set(t,n),n),__privateMethod$4=(t,e,n)=>(__accessCheck$8(t,e,"access private method"),n),_requestId$2,_options$1,_websocketClient$1,_SuiHTTPTransport_instances$1,getWebsocketClient_fn$1;let SuiHTTPTransport$1=class{constructor(e){__privateAdd$8(this,_SuiHTTPTransport_instances$1),__privateAdd$8(this,_requestId$2,0),__privateAdd$8(this,_options$1),__privateAdd$8(this,_websocketClient$1),__privateSet$8(this,_options$1,e)}fetch(e,n){const i=__privateGet$8(this,_options$1).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(e,n)}async request(e){var s,a;__privateSet$8(this,_requestId$2,__privateGet$8(this,_requestId$2)+1);const n=await this.fetch(((s=__privateGet$8(this,_options$1).rpc)==null?void 0:s.url)??__privateGet$8(this,_options$1).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":PACKAGE_VERSION$1,"Client-Target-Api-Version":TARGETED_RPC_VERSION$1,"Client-Request-Method":e.method,...(a=__privateGet$8(this,_options$1).rpc)==null?void 0:a.headers},body:JSON.stringify({jsonrpc:"2.0",id:__privateGet$8(this,_requestId$2),method:e.method,params:e.params})});if(!n.ok)throw new SuiHTTPStatusError$1(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new JsonRpcError$1(i.error.message,i.error.code);return i.result}async subscribe(e){const n=await __privateMethod$4(this,_SuiHTTPTransport_instances$1,getWebsocketClient_fn$1).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{n()})),async()=>!!await n()}};_requestId$2=new WeakMap;_options$1=new WeakMap;_websocketClient$1=new WeakMap;_SuiHTTPTransport_instances$1=new WeakSet;getWebsocketClient_fn$1=function(){var t;if(!__privateGet$8(this,_websocketClient$1)){const e=__privateGet$8(this,_options$1).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");__privateSet$8(this,_websocketClient$1,new WebsocketClient$1(((t=__privateGet$8(this,_options$1).websocket)==null?void 0:t.url)??__privateGet$8(this,_options$1).url,{WebSocketConstructor:e,...__privateGet$8(this,_options$1).websocket}))}return __privateGet$8(this,_websocketClient$1)};function getFullnodeUrl$1(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var __typeError$7=t=>{throw TypeError(t)},__accessCheck$7=(t,e,n)=>e.has(t)||__typeError$7("Cannot "+n),__privateGet$7=(t,e,n)=>(__accessCheck$7(t,e,"read from private field"),e.get(t)),__privateAdd$7=(t,e,n)=>e.has(t)?__typeError$7("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$7=(t,e,n,i)=>(__accessCheck$7(t,e,"write to private field"),e.set(t,n),n),_prefix$1,_cache$1;const _ClientCache$1=class go{constructor({prefix:e,cache:n}={}){__privateAdd$7(this,_prefix$1),__privateAdd$7(this,_cache$1),__privateSet$7(this,_prefix$1,e??[]),__privateSet$7(this,_cache$1,n??new Map)}read(e,n){const i=[__privateGet$7(this,_prefix$1),...e].join(":");if(__privateGet$7(this,_cache$1).has(i))return __privateGet$7(this,_cache$1).get(i);const s=n();return __privateGet$7(this,_cache$1).set(i,s),typeof s=="object"&&s!==null&&"then"in s?Promise.resolve(s).then(a=>(__privateGet$7(this,_cache$1).set(i,a),a)).catch(a=>{throw __privateGet$7(this,_cache$1).delete(i),a}):s}clear(e){const n=[...__privateGet$7(this,_prefix$1),...e??[]].join(":");if(!n){__privateGet$7(this,_cache$1).clear();return}for(const i of __privateGet$7(this,_cache$1).keys())i.startsWith(n)&&__privateGet$7(this,_cache$1).delete(i)}scope(e){return new go({prefix:[...__privateGet$7(this,_prefix$1),...Array.isArray(e)?e:[e]],cache:__privateGet$7(this,_cache$1)})}};_prefix$1=new WeakMap;_cache$1=new WeakMap;let ClientCache$1=_ClientCache$1,Experimental_BaseClient$1=class{constructor({network:e}){this.cache=new ClientCache$1,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(n=>{if("experimental_asClientExtension"in n){const{name:i,register:s}=n.experimental_asClientExtension();return[i,{value:s(this)}]}return[n.name,{value:n.register(this)}]})))}};const SUI_NS_NAME_REGEX$2=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,SUI_NS_DOMAIN_REGEX$2=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,MAX_SUI_NS_NAME_LENGTH$2=235;function isValidSuiNSName$2(t){return t.length>MAX_SUI_NS_NAME_LENGTH$2?!1:t.includes("@")?SUI_NS_NAME_REGEX$2.test(t):SUI_NS_DOMAIN_REGEX$2.test(t)}function normalizeSuiNSName$2(t,e="at"){const n=t.toLowerCase();let i;if(n.includes("@")){if(!SUI_NS_NAME_REGEX$2.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,a]=n.split("@");i=[...s?s.split("."):[],a]}else{if(!SUI_NS_DOMAIN_REGEX$2.test(n))throw new Error(`Invalid SuiNS name ${t}`);i=n.split(".").slice(0,-1)}return e==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const NAME_PATTERN$2=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,VERSION_REGEX$2=/^\d+$/,MAX_APP_SIZE$2=64,NAME_SEPARATOR$2="/",isValidNamedPackage$2=t=>{const e=t.split(NAME_SEPARATOR$2);if(e.length<2||e.length>3)return!1;const[n,i,s]=e;return s!==void 0&&!VERSION_REGEX$2.test(s)||!isValidSuiNSName$2(n)?!1:NAME_PATTERN$2.test(i)&&i.length<MAX_APP_SIZE$2},TX_DIGEST_LENGTH$2=32;function isValidTransactionDigest$2(t){try{return fromBase58(t).length===TX_DIGEST_LENGTH$2}catch{return!1}}const SUI_ADDRESS_LENGTH$2=32;function isValidSuiAddress$2(t){return isHex$4(t)&&getHexByteLength$2(t)===SUI_ADDRESS_LENGTH$2}function isValidSuiObjectId$2(t){return isValidSuiAddress$2(t)}function parseTypeTag$2(t){return t.includes("::")?parseStructTag$2(t):t}function parseStructTag$2(t){const[e,n]=t.split("::"),i=isValidNamedPackage$2(e),s=t.slice(e.length+n.length+4),a=s.includes("<")?s.slice(0,s.indexOf("<")):s,l=s.includes("<")?splitGenericParameters(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(f=>parseTypeTag$2(f.trim())):[];return{address:i?e:normalizeSuiAddress$2(e),module:n,name:a,typeParams:l}}function normalizeStructTag$2(t){const{address:e,module:n,name:i,typeParams:s}=typeof t=="string"?parseStructTag$2(t):t,a=(s==null?void 0:s.length)>0?`<${s.map(l=>typeof l=="string"?l:normalizeStructTag$2(l)).join(",")}>`:"";return`${e}::${n}::${i}${a}`}function normalizeSuiAddress$2(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(SUI_ADDRESS_LENGTH$2*2,"0")}`}function normalizeSuiObjectId$2(t,e=!1){return normalizeSuiAddress$2(t,e)}function isHex$4(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function getHexByteLength$2(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const VECTOR_REGEX$2=/^vector<(.+)>$/,STRUCT_REGEX$2=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let TypeTagSerializer$2=class ta{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(VECTOR_REGEX$2);if(i)return{vector:ta.parseFromStr(i[1],n)};const s=e.match(STRUCT_REGEX$2);if(s)return{struct:{address:n?normalizeSuiAddress$2(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:ta.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return splitGenericParameters(e).map(i=>ta.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ta.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(ta.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};function unsafe_u64$2(t){return bcs$2.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function optionEnum$2(t){return bcs$2.enum("Option",{None:null,Some:t})}const Address$2=bcs$2.bytes(SUI_ADDRESS_LENGTH$2).transform({validate:t=>{const e=typeof t=="string"?t:toHex$1(t);if(!e||!isValidSuiAddress$2(normalizeSuiAddress$2(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?fromHex(normalizeSuiAddress$2(t)):t,output:t=>normalizeSuiAddress$2(toHex$1(t))}),ObjectDigest$2=bcs$2.vector(bcs$2.u8()).transform({name:"ObjectDigest",input:t=>fromBase58(t),output:t=>toBase58(new Uint8Array(t)),validate:t=>{if(fromBase58(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),SuiObjectRef$2=bcs$2.struct("SuiObjectRef",{objectId:Address$2,version:bcs$2.u64(),digest:ObjectDigest$2}),SharedObjectRef$2=bcs$2.struct("SharedObjectRef",{objectId:Address$2,initialSharedVersion:bcs$2.u64(),mutable:bcs$2.bool()}),ObjectArg$8=bcs$2.enum("ObjectArg",{ImmOrOwnedObject:SuiObjectRef$2,SharedObject:SharedObjectRef$2,Receiving:SuiObjectRef$2}),Owner$2=bcs$2.enum("Owner",{AddressOwner:Address$2,ObjectOwner:Address$2,Shared:bcs$2.struct("Shared",{initialSharedVersion:bcs$2.u64()}),Immutable:null,ConsensusV2:bcs$2.struct("ConsensusV2",{authenticator:bcs$2.enum("Authenticator",{SingleOwner:Address$2}),startVersion:bcs$2.u64()})}),CallArg$6=bcs$2.enum("CallArg",{Pure:bcs$2.struct("Pure",{bytes:bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})}),Object:ObjectArg$8}),InnerTypeTag$2=bcs$2.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:bcs$2.lazy(()=>InnerTypeTag$2),struct:bcs$2.lazy(()=>StructTag$4),u16:null,u32:null,u256:null}),TypeTag$4=InnerTypeTag$2.transform({input:t=>typeof t=="string"?TypeTagSerializer$2.parseFromStr(t,!0):t,output:t=>TypeTagSerializer$2.tagToString(t)}),Argument$6=bcs$2.enum("Argument",{GasCoin:null,Input:bcs$2.u16(),Result:bcs$2.u16(),NestedResult:bcs$2.tuple([bcs$2.u16(),bcs$2.u16()])}),ProgrammableMoveCall$6=bcs$2.struct("ProgrammableMoveCall",{package:Address$2,module:bcs$2.string(),function:bcs$2.string(),typeArguments:bcs$2.vector(TypeTag$4),arguments:bcs$2.vector(Argument$6)}),Command$6=bcs$2.enum("Command",{MoveCall:ProgrammableMoveCall$6,TransferObjects:bcs$2.struct("TransferObjects",{objects:bcs$2.vector(Argument$6),address:Argument$6}),SplitCoins:bcs$2.struct("SplitCoins",{coin:Argument$6,amounts:bcs$2.vector(Argument$6)}),MergeCoins:bcs$2.struct("MergeCoins",{destination:Argument$6,sources:bcs$2.vector(Argument$6)}),Publish:bcs$2.struct("Publish",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$2)}),MakeMoveVec:bcs$2.struct("MakeMoveVec",{type:optionEnum$2(TypeTag$4).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:bcs$2.vector(Argument$6)}),Upgrade:bcs$2.struct("Upgrade",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$2),package:Address$2,ticket:Argument$6})}),ProgrammableTransaction$2=bcs$2.struct("ProgrammableTransaction",{inputs:bcs$2.vector(CallArg$6),commands:bcs$2.vector(Command$6)}),TransactionKind$2=bcs$2.enum("TransactionKind",{ProgrammableTransaction:ProgrammableTransaction$2,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),TransactionExpiration$8=bcs$2.enum("TransactionExpiration",{None:null,Epoch:unsafe_u64$2()}),StructTag$4=bcs$2.struct("StructTag",{address:Address$2,module:bcs$2.string(),name:bcs$2.string(),typeParams:bcs$2.vector(InnerTypeTag$2)}),GasData$6=bcs$2.struct("GasData",{payment:bcs$2.vector(SuiObjectRef$2),owner:Address$2,price:bcs$2.u64(),budget:bcs$2.u64()}),TransactionDataV1$2=bcs$2.struct("TransactionDataV1",{kind:TransactionKind$2,sender:Address$2,gasData:GasData$6,expiration:TransactionExpiration$8}),TransactionData$4=bcs$2.enum("TransactionData",{V1:TransactionDataV1$2}),IntentScope$2=bcs$2.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),IntentVersion$2=bcs$2.enum("IntentVersion",{V0:null}),AppId$2=bcs$2.enum("AppId",{Sui:null}),Intent$2=bcs$2.struct("Intent",{scope:IntentScope$2,version:IntentVersion$2,appId:AppId$2});function IntentMessage$2(t){return bcs$2.struct(`IntentMessage<${t.name}>`,{intent:Intent$2,value:t})}const CompressedSignature$2=bcs$2.enum("CompressedSignature",{ED25519:bcs$2.fixedArray(64,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(64,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(64,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),PublicKey$2=bcs$2.enum("PublicKey",{ED25519:bcs$2.fixedArray(32,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(33,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(33,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),MultiSigPkMap$2=bcs$2.struct("MultiSigPkMap",{pubKey:PublicKey$2,weight:bcs$2.u8()}),MultiSigPublicKey$2=bcs$2.struct("MultiSigPublicKey",{pk_map:bcs$2.vector(MultiSigPkMap$2),threshold:bcs$2.u16()}),MultiSig$2=bcs$2.struct("MultiSig",{sigs:bcs$2.vector(CompressedSignature$2),bitmap:bcs$2.u16(),multisig_pk:MultiSigPublicKey$2}),base64String$2=bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))}),SenderSignedTransaction$2=bcs$2.struct("SenderSignedTransaction",{intentMessage:IntentMessage$2(TransactionData$4),txSignatures:bcs$2.vector(base64String$2)}),SenderSignedData$2=bcs$2.vector(SenderSignedTransaction$2,{name:"SenderSignedData"}),PasskeyAuthenticator$2=bcs$2.struct("PasskeyAuthenticator",{authenticatorData:bcs$2.vector(bcs$2.u8()),clientDataJson:bcs$2.string(),userSignature:bcs$2.vector(bcs$2.u8())}),PackageUpgradeError$2=bcs$2.enum("PackageUpgradeError",{UnableToFetchPackage:bcs$2.struct("UnableToFetchPackage",{packageId:Address$2}),NotAPackage:bcs$2.struct("NotAPackage",{objectId:Address$2}),IncompatibleUpgrade:null,DigestDoesNotMatch:bcs$2.struct("DigestDoesNotMatch",{digest:bcs$2.vector(bcs$2.u8())}),UnknownUpgradePolicy:bcs$2.struct("UnknownUpgradePolicy",{policy:bcs$2.u8()}),PackageIDDoesNotMatch:bcs$2.struct("PackageIDDoesNotMatch",{packageId:Address$2,ticketId:Address$2})}),ModuleId$2=bcs$2.struct("ModuleId",{address:Address$2,name:bcs$2.string()}),MoveLocation$2=bcs$2.struct("MoveLocation",{module:ModuleId$2,function:bcs$2.u16(),instruction:bcs$2.u16(),functionName:bcs$2.option(bcs$2.string())}),CommandArgumentError$2=bcs$2.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:bcs$2.struct("IndexOutOfBounds",{idx:bcs$2.u16()}),SecondaryIndexOutOfBounds:bcs$2.struct("SecondaryIndexOutOfBounds",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidResultArity:bcs$2.struct("InvalidResultArity",{resultIdx:bcs$2.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),TypeArgumentError$2=bcs$2.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),ExecutionFailureStatus$2=bcs$2.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:bcs$2.struct("MoveObjectTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),MovePackageTooBig:bcs$2.struct("MovePackageTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),CircularObjectOwnership:bcs$2.struct("CircularObjectOwnership",{object:Address$2}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:bcs$2.option(MoveLocation$2),MoveAbort:bcs$2.tuple([MoveLocation$2,bcs$2.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:bcs$2.struct("CommandArgumentError",{argIdx:bcs$2.u16(),kind:CommandArgumentError$2}),TypeArgumentError:bcs$2.struct("TypeArgumentError",{argumentIdx:bcs$2.u16(),kind:TypeArgumentError$2}),UnusedValueWithoutDrop:bcs$2.struct("UnusedValueWithoutDrop",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidPublicFunctionReturnType:bcs$2.struct("InvalidPublicFunctionReturnType",{idx:bcs$2.u16()}),InvalidTransferObject:null,EffectsTooLarge:bcs$2.struct("EffectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:bcs$2.struct("PackageUpgradeError",{upgradeError:PackageUpgradeError$2}),WrittenObjectsTooLarge:bcs$2.struct("WrittenObjectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:bcs$2.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:bcs$2.vector(Address$2)}),AddressDeniedForCoin:bcs$2.struct("AddressDeniedForCoin",{address:Address$2,coinType:bcs$2.string()}),CoinTypeGlobalPause:bcs$2.struct("CoinTypeGlobalPause",{coinType:bcs$2.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ExecutionStatus$2=bcs$2.enum("ExecutionStatus",{Success:null,Failed:bcs$2.struct("ExecutionFailed",{error:ExecutionFailureStatus$2,command:bcs$2.option(bcs$2.u64())})}),GasCostSummary$2=bcs$2.struct("GasCostSummary",{computationCost:bcs$2.u64(),storageCost:bcs$2.u64(),storageRebate:bcs$2.u64(),nonRefundableStorageFee:bcs$2.u64()}),TransactionEffectsV1$2=bcs$2.struct("TransactionEffectsV1",{status:ExecutionStatus$2,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$2,modifiedAtVersions:bcs$2.vector(bcs$2.tuple([Address$2,bcs$2.u64()])),sharedObjects:bcs$2.vector(SuiObjectRef$2),transactionDigest:ObjectDigest$2,created:bcs$2.vector(bcs$2.tuple([SuiObjectRef$2,Owner$2])),mutated:bcs$2.vector(bcs$2.tuple([SuiObjectRef$2,Owner$2])),unwrapped:bcs$2.vector(bcs$2.tuple([SuiObjectRef$2,Owner$2])),deleted:bcs$2.vector(SuiObjectRef$2),unwrappedThenDeleted:bcs$2.vector(SuiObjectRef$2),wrapped:bcs$2.vector(SuiObjectRef$2),gasObject:bcs$2.tuple([SuiObjectRef$2,Owner$2]),eventsDigest:bcs$2.option(ObjectDigest$2),dependencies:bcs$2.vector(ObjectDigest$2)}),VersionDigest$2=bcs$2.tuple([bcs$2.u64(),ObjectDigest$2]),ObjectIn$2=bcs$2.enum("ObjectIn",{NotExist:null,Exist:bcs$2.tuple([VersionDigest$2,Owner$2])}),ObjectOut$2=bcs$2.enum("ObjectOut",{NotExist:null,ObjectWrite:bcs$2.tuple([ObjectDigest$2,Owner$2]),PackageWrite:VersionDigest$2}),IDOperation$2=bcs$2.enum("IDOperation",{None:null,Created:null,Deleted:null}),EffectsObjectChange$2=bcs$2.struct("EffectsObjectChange",{inputState:ObjectIn$2,outputState:ObjectOut$2,idOperation:IDOperation$2}),UnchangedSharedKind$2=bcs$2.enum("UnchangedSharedKind",{ReadOnlyRoot:VersionDigest$2,MutateDeleted:bcs$2.u64(),ReadDeleted:bcs$2.u64(),Cancelled:bcs$2.u64(),PerEpochConfig:null}),TransactionEffectsV2$2=bcs$2.struct("TransactionEffectsV2",{status:ExecutionStatus$2,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$2,transactionDigest:ObjectDigest$2,gasObjectIndex:bcs$2.option(bcs$2.u32()),eventsDigest:bcs$2.option(ObjectDigest$2),dependencies:bcs$2.vector(ObjectDigest$2),lamportVersion:bcs$2.u64(),changedObjects:bcs$2.vector(bcs$2.tuple([Address$2,EffectsObjectChange$2])),unchangedSharedObjects:bcs$2.vector(bcs$2.tuple([Address$2,UnchangedSharedKind$2])),auxDataDigest:bcs$2.option(ObjectDigest$2)}),TransactionEffects$2=bcs$2.enum("TransactionEffects",{V1:TransactionEffectsV1$2,V2:TransactionEffectsV2$2});function pureBcsSchemaFromTypeName$2(t){switch(t){case"u8":return bcs$2.u8();case"u16":return bcs$2.u16();case"u32":return bcs$2.u32();case"u64":return bcs$2.u64();case"u128":return bcs$2.u128();case"u256":return bcs$2.u256();case"bool":return bcs$2.bool();case"string":return bcs$2.string();case"id":case"address":return Address$2}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,i]=e.slice(1);return n==="vector"?bcs$2.vector(pureBcsSchemaFromTypeName$2(i)):bcs$2.option(pureBcsSchemaFromTypeName$2(i))}throw new Error(`Invalid Pure type name: ${t}`)}const suiBcs$2={...bcs$2,U8:bcs$2.u8(),U16:bcs$2.u16(),U32:bcs$2.u32(),U64:bcs$2.u64(),U128:bcs$2.u128(),U256:bcs$2.u256(),ULEB128:bcs$2.uleb128(),Bool:bcs$2.bool(),String:bcs$2.string(),Address:Address$2,AppId:AppId$2,Argument:Argument$6,CallArg:CallArg$6,Command:Command$6,CompressedSignature:CompressedSignature$2,GasData:GasData$6,Intent:Intent$2,IntentMessage:IntentMessage$2,IntentScope:IntentScope$2,IntentVersion:IntentVersion$2,MultiSig:MultiSig$2,MultiSigPkMap:MultiSigPkMap$2,MultiSigPublicKey:MultiSigPublicKey$2,ObjectArg:ObjectArg$8,ObjectDigest:ObjectDigest$2,Owner:Owner$2,PasskeyAuthenticator:PasskeyAuthenticator$2,ProgrammableMoveCall:ProgrammableMoveCall$6,ProgrammableTransaction:ProgrammableTransaction$2,PublicKey:PublicKey$2,SenderSignedData:SenderSignedData$2,SenderSignedTransaction:SenderSignedTransaction$2,SharedObjectRef:SharedObjectRef$2,StructTag:StructTag$4,SuiObjectRef:SuiObjectRef$2,TransactionData:TransactionData$4,TransactionDataV1:TransactionDataV1$2,TransactionEffects:TransactionEffects$2,TransactionExpiration:TransactionExpiration$8,TransactionKind:TransactionKind$2,TypeTag:TypeTag$4};function batch$1(t,e){const n=[];for(let i=0;i<t.length;i+=e)n.push(t.slice(i,i+e));return n}function safeEnum$1(t){const e=Object.entries(t).map(([n,i])=>object$1({[n]:i}));return pipe(union(e),transform$1(n=>({...n,$kind:Object.keys(n)[0]})))}const SuiAddress$1=pipe(string(),transform$1(t=>normalizeSuiAddress$2(t)),check(isValidSuiAddress$2)),ObjectID$1=SuiAddress$1,BCSBytes$1=string(),JsonU64$1=pipe(union([string(),pipe(number(),integer())]),check(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),ObjectRef$3=object$1({objectId:SuiAddress$1,version:JsonU64$1,digest:string()}),Argument$5=pipe(union([object$1({GasCoin:literal(!0)}),object$1({Input:pipe(number(),integer()),type:optional(literal("pure"))}),object$1({Input:pipe(number(),integer()),type:optional(literal("object"))}),object$1({Result:pipe(number(),integer())}),object$1({NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])})]),transform$1(t=>({...t,$kind:Object.keys(t)[0]}))),GasData$5=object$1({budget:nullable(JsonU64$1),price:nullable(JsonU64$1),owner:nullable(SuiAddress$1),payment:nullable(array(ObjectRef$3))}),OpenMoveTypeSignatureBody$1=union([literal("address"),literal("bool"),literal("u8"),literal("u16"),literal("u32"),literal("u64"),literal("u128"),literal("u256"),object$1({vector:lazy(()=>OpenMoveTypeSignatureBody$1)}),object$1({datatype:object$1({package:string(),module:string(),type:string(),typeParameters:array(lazy(()=>OpenMoveTypeSignatureBody$1))})}),object$1({typeParameter:pipe(number(),integer())})]),OpenMoveTypeSignature$1=object$1({ref:nullable(union([literal("&"),literal("&mut")])),body:OpenMoveTypeSignatureBody$1}),ProgrammableMoveCall$5=object$1({package:ObjectID$1,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$5),_argumentTypes:optional(nullable(array(OpenMoveTypeSignature$1)))}),$Intent$3=object$1({name:string(),inputs:record(string(),union([Argument$5,array(Argument$5)])),data:record(string(),unknown())}),Command$5=safeEnum$1({MoveCall:ProgrammableMoveCall$5,TransferObjects:object$1({objects:array(Argument$5),address:Argument$5}),SplitCoins:object$1({coin:Argument$5,amounts:array(Argument$5)}),MergeCoins:object$1({destination:Argument$5,sources:array(Argument$5)}),Publish:object$1({modules:array(BCSBytes$1),dependencies:array(ObjectID$1)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$5)}),Upgrade:object$1({modules:array(BCSBytes$1),dependencies:array(ObjectID$1),package:ObjectID$1,ticket:Argument$5}),$Intent:$Intent$3}),ObjectArg$7=safeEnum$1({ImmOrOwnedObject:ObjectRef$3,SharedObject:object$1({objectId:ObjectID$1,initialSharedVersion:JsonU64$1,mutable:boolean()}),Receiving:ObjectRef$3}),CallArg$5=safeEnum$1({Object:ObjectArg$7,Pure:object$1({bytes:BCSBytes$1}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID$1,version:optional(nullable(JsonU64$1)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64$1))})}),NormalizedCallArg$3=safeEnum$1({Object:ObjectArg$7,Pure:object$1({bytes:BCSBytes$1})}),TransactionExpiration$7=safeEnum$1({None:literal(!0),Epoch:JsonU64$1}),TransactionData$3=object$1({version:literal(2),sender:nullish(SuiAddress$1),expiration:nullish(TransactionExpiration$7),gasData:GasData$5,inputs:array(CallArg$5),commands:array(Command$5)}),Commands$1={MoveCall(t){const[e,n="",i=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:i,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>parse(Argument$5,n)),address:parse(Argument$5,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:parse(Argument$5,t),amounts:e.map(n=>parse(Argument$5,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:parse(Argument$5,t),sources:e.map(n=>parse(Argument$5,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:toBase64(new Uint8Array(n))),dependencies:e.map(n=>normalizeSuiObjectId$2(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:toBase64(new Uint8Array(s))),dependencies:e.map(s=>normalizeSuiObjectId$2(s)),package:n,ticket:parse(Argument$5,i)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>parse(Argument$5,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([i,s])=>[i,Array.isArray(s)?s.map(a=>parse(Argument$5,a)):parse(Argument$5,s)])),data:n}}}},ObjectRef$2=object$1({digest:string(),objectId:string(),version:union([pipe(number(),integer()),string(),bigint()])}),ObjectArg$6=safeEnum$1({ImmOrOwned:ObjectRef$2,Shared:object$1({objectId:ObjectID$1,initialSharedVersion:JsonU64$1,mutable:boolean()}),Receiving:ObjectRef$2}),NormalizedCallArg$2=safeEnum$1({Object:ObjectArg$6,Pure:array(pipe(number(),integer()))}),TransactionInput$1=union([object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:optional(literal("object"))}),object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:literal("pure")})]),TransactionExpiration$6=union([object$1({Epoch:pipe(number(),integer())}),object$1({None:nullable(literal(!0))})]),StringEncodedBigint$1=pipe(union([number(),string(),bigint()]),check(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),TypeTag$3=union([object$1({bool:nullable(literal(!0))}),object$1({u8:nullable(literal(!0))}),object$1({u64:nullable(literal(!0))}),object$1({u128:nullable(literal(!0))}),object$1({address:nullable(literal(!0))}),object$1({signer:nullable(literal(!0))}),object$1({vector:lazy(()=>TypeTag$3)}),object$1({struct:lazy(()=>StructTag$3)}),object$1({u16:nullable(literal(!0))}),object$1({u32:nullable(literal(!0))}),object$1({u256:nullable(literal(!0))})]),StructTag$3=object$1({address:string(),module:string(),name:string(),typeParams:array(TypeTag$3)}),GasConfig$1=object$1({budget:optional(StringEncodedBigint$1),price:optional(StringEncodedBigint$1),payment:optional(array(ObjectRef$2)),owner:optional(string())}),TransactionArgumentTypes$1=[TransactionInput$1,object$1({kind:literal("GasCoin")}),object$1({kind:literal("Result"),index:pipe(number(),integer())}),object$1({kind:literal("NestedResult"),index:pipe(number(),integer()),resultIndex:pipe(number(),integer())})],TransactionArgument$1=union([...TransactionArgumentTypes$1]),MoveCallTransaction$1=object$1({kind:literal("MoveCall"),target:pipe(string(),check(t=>t.split("::").length===3)),typeArguments:array(string()),arguments:array(TransactionArgument$1)}),TransferObjectsTransaction$1=object$1({kind:literal("TransferObjects"),objects:array(TransactionArgument$1),address:TransactionArgument$1}),SplitCoinsTransaction$1=object$1({kind:literal("SplitCoins"),coin:TransactionArgument$1,amounts:array(TransactionArgument$1)}),MergeCoinsTransaction$1=object$1({kind:literal("MergeCoins"),destination:TransactionArgument$1,sources:array(TransactionArgument$1)}),MakeMoveVecTransaction$1=object$1({kind:literal("MakeMoveVec"),type:union([object$1({Some:TypeTag$3}),object$1({None:nullable(literal(!0))})]),objects:array(TransactionArgument$1)}),PublishTransaction$1=object$1({kind:literal("Publish"),modules:array(array(pipe(number(),integer()))),dependencies:array(string())}),UpgradeTransaction$1=object$1({kind:literal("Upgrade"),modules:array(array(pipe(number(),integer()))),dependencies:array(string()),packageId:string(),ticket:TransactionArgument$1}),TransactionTypes$1=[MoveCallTransaction$1,TransferObjectsTransaction$1,SplitCoinsTransaction$1,MergeCoinsTransaction$1,PublishTransaction$1,UpgradeTransaction$1,MakeMoveVecTransaction$1],TransactionType$1=union([...TransactionTypes$1]);object$1({version:literal(1),sender:optional(string()),expiration:nullish(TransactionExpiration$6),gasConfig:GasConfig$1,inputs:array(TransactionInput$1),transactions:array(TransactionType$1)});function serializeV1TransactionData$1(t){var n;const e=t.inputs.map((i,s)=>{if(i.Object)return{kind:"Input",index:s,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(fromBase64(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:TypeTagSerializer$2.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(s=>convertTransactionArgument$1(s,e))};if(i.MergeCoins)return{kind:"MergeCoins",destination:convertTransactionArgument$1(i.MergeCoins.destination,e),sources:i.MergeCoins.sources.map(s=>convertTransactionArgument$1(s,e))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(s=>convertTransactionArgument$1(s,e))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:convertTransactionArgument$1(i.SplitCoins.coin,e),amounts:i.SplitCoins.amounts.map(s=>convertTransactionArgument$1(s,e))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(s=>convertTransactionArgument$1(s,e)),address:convertTransactionArgument$1(i.TransferObjects.address,e)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:convertTransactionArgument$1(i.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function convertTransactionArgument$1(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function transactionDataFromV1$1(t){var e,n,i;return parse(TransactionData$3,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=t.gasConfig.payment)==null?void 0:i.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(is$2(NormalizedCallArg$2,s.value)){const a=parse(NormalizedCallArg$2,s.value);if(a.Object){if(a.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:a.Object.ImmOrOwned.objectId,version:String(a.Object.ImmOrOwned.version),digest:a.Object.ImmOrOwned.digest}}};if(a.Object.Shared)return{Object:{SharedObject:{mutable:a.Object.Shared.mutable??null,initialSharedVersion:a.Object.Shared.initialSharedVersion,objectId:a.Object.Shared.objectId}}};if(a.Object.Receiving)return{Object:{Receiving:{digest:a.Object.Receiving.digest,version:String(a.Object.Receiving.version),objectId:a.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:toBase64(new Uint8Array(a.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?TypeTagSerializer$2.tagToString(s.type.Some):null,elements:s.objects.map(a=>parseV1TransactionArgument$1(a))}};case"MergeCoins":return{MergeCoins:{destination:parseV1TransactionArgument$1(s.destination),sources:s.sources.map(a=>parseV1TransactionArgument$1(a))}};case"MoveCall":{const[a,l,f]=s.target.split("::");return{MoveCall:{package:a,module:l,function:f,typeArguments:s.typeArguments,arguments:s.arguments.map(p=>parseV1TransactionArgument$1(p))}}}case"Publish":return{Publish:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:parseV1TransactionArgument$1(s.coin),amounts:s.amounts.map(a=>parseV1TransactionArgument$1(a))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(a=>parseV1TransactionArgument$1(a)),address:parseV1TransactionArgument$1(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies,package:s.packageId,ticket:parseV1TransactionArgument$1(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function parseV1TransactionArgument$1(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function enumUnion$1(t){return union(Object.entries(t).map(([e,n])=>object$1({[e]:n})))}const Argument$4=enumUnion$1({GasCoin:literal(!0),Input:pipe(number(),integer()),Result:pipe(number(),integer()),NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])}),GasData$4=object$1({budget:nullable(JsonU64$1),price:nullable(JsonU64$1),owner:nullable(SuiAddress$1),payment:nullable(array(ObjectRef$3))}),ProgrammableMoveCall$4=object$1({package:ObjectID$1,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$4)}),$Intent$2=object$1({name:string(),inputs:record(string(),union([Argument$4,array(Argument$4)])),data:record(string(),unknown())}),Command$4=enumUnion$1({MoveCall:ProgrammableMoveCall$4,TransferObjects:object$1({objects:array(Argument$4),address:Argument$4}),SplitCoins:object$1({coin:Argument$4,amounts:array(Argument$4)}),MergeCoins:object$1({destination:Argument$4,sources:array(Argument$4)}),Publish:object$1({modules:array(BCSBytes$1),dependencies:array(ObjectID$1)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$4)}),Upgrade:object$1({modules:array(BCSBytes$1),dependencies:array(ObjectID$1),package:ObjectID$1,ticket:Argument$4}),$Intent:$Intent$2}),ObjectArg$5=enumUnion$1({ImmOrOwnedObject:ObjectRef$3,SharedObject:object$1({objectId:ObjectID$1,initialSharedVersion:JsonU64$1,mutable:boolean()}),Receiving:ObjectRef$3}),CallArg$4=enumUnion$1({Object:ObjectArg$5,Pure:object$1({bytes:BCSBytes$1}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID$1,version:optional(nullable(JsonU64$1)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64$1))})}),TransactionExpiration$5=enumUnion$1({None:literal(!0),Epoch:JsonU64$1}),SerializedTransactionDataV2$1=object$1({version:literal(2),sender:nullish(SuiAddress$1),expiration:nullish(TransactionExpiration$5),gasData:GasData$4,inputs:array(CallArg$4),commands:array(Command$4)});function Pure$1(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?toBase64(t):t.toBase64()}}}const Inputs$1={Pure:Pure$1,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:normalizeSuiAddress$2(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:normalizeSuiAddress$2(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:normalizeSuiAddress$2(t)}}}}};BigInt(1e9);const MOVE_STDLIB_ADDRESS$2="0x1",SUI_FRAMEWORK_ADDRESS$2="0x2";normalizeSuiObjectId$2("0x6");const SUI_TYPE_ARG$2=`${SUI_FRAMEWORK_ADDRESS$2}::sui::SUI`;normalizeSuiObjectId$2("0x5");function deriveDynamicFieldID$2(t,e,n){const i=suiBcs$2.Address.serialize(t).toBytes(),s=suiBcs$2.TypeTag.serialize(e).toBytes(),a=suiBcs$2.u64().serialize(n.length).toBytes(),l=blake2b$1.create({dkLen:32});return l.update(new Uint8Array([240])),l.update(i),l.update(a),l.update(n),l.update(s),`0x${toHex$1(l.digest().slice(0,32))}`}const OBJECT_MODULE_NAME$1="object",ID_STRUCT_NAME$1="ID",STD_ASCII_MODULE_NAME$1="ascii",STD_ASCII_STRUCT_NAME$1="String",STD_UTF8_MODULE_NAME$1="string",STD_UTF8_STRUCT_NAME$1="String",STD_OPTION_MODULE_NAME$1="option",STD_OPTION_STRUCT_NAME$1="Option";function isTxContext$1(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&normalizeSuiAddress$2(e.package)===normalizeSuiAddress$2("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function getPureBcsSchema$1(t){if(typeof t=="string")switch(t){case"address":return suiBcs$2.Address;case"bool":return suiBcs$2.Bool;case"u8":return suiBcs$2.U8;case"u16":return suiBcs$2.U16;case"u32":return suiBcs$2.U32;case"u64":return suiBcs$2.U64;case"u128":return suiBcs$2.U128;case"u256":return suiBcs$2.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return suiBcs$2.vector(suiBcs$2.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=getPureBcsSchema$1(t.vector);return e?suiBcs$2.vector(e):null}if("datatype"in t){const e=normalizeSuiAddress$2(t.datatype.package);if(e===normalizeSuiAddress$2(MOVE_STDLIB_ADDRESS$2)){if(t.datatype.module===STD_ASCII_MODULE_NAME$1&&t.datatype.type===STD_ASCII_STRUCT_NAME$1||t.datatype.module===STD_UTF8_MODULE_NAME$1&&t.datatype.type===STD_UTF8_STRUCT_NAME$1)return suiBcs$2.String;if(t.datatype.module===STD_OPTION_MODULE_NAME$1&&t.datatype.type===STD_OPTION_STRUCT_NAME$1){const n=getPureBcsSchema$1(t.datatype.typeParameters[0]);return n?suiBcs$2.vector(n):null}}if(e===normalizeSuiAddress$2(SUI_FRAMEWORK_ADDRESS$2)&&t.datatype.module===OBJECT_MODULE_NAME$1&&t.datatype.type===ID_STRUCT_NAME$1)return suiBcs$2.Address}return null}function normalizedTypeToMoveTypeSignature$1(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:normalizedTypeToMoveTypeSignatureBody$1(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:normalizedTypeToMoveTypeSignatureBody$1(t.MutableReference)}:{ref:null,body:normalizedTypeToMoveTypeSignatureBody$1(t)}}function normalizedTypeToMoveTypeSignatureBody$1(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:normalizedTypeToMoveTypeSignatureBody$1(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(normalizedTypeToMoveTypeSignatureBody$1)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}const MAX_OBJECTS_PER_FETCH$1=50,GAS_SAFE_OVERHEAD$1=1000n,MAX_GAS$1=5e10;async function resolveTransactionData$1(t,e,n){return await normalizeInputs$1(t,e),await resolveObjectReferences$1(t,e),e.onlyTransactionKind||(await setGasPrice$1(t,e),await setGasBudget$1(t,e),await setGasPayment$1(t,e)),await validate$1(t),await n()}async function setGasPrice$1(t,e){t.gasConfig.price||(t.gasConfig.price=String(await getClient$1(e).getReferenceGasPrice()))}async function setGasBudget$1(t,e){if(t.gasConfig.budget)return;const n=await getClient$1(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(MAX_GAS$1),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=GAS_SAFE_OVERHEAD$1*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+i,a=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(a>s?a:s)}async function setGasPayment$1(t,e){if(!t.gasConfig.payment){const i=(await getClient$1(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:SUI_TYPE_ARG$2})).data.filter(s=>!t.inputs.find(l=>{var f;return(f=l.Object)!=null&&f.ImmOrOwnedObject?s.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=i.map(s=>parse(ObjectRef$3,s))}}async function resolveObjectReferences$1(t,e){const n=t.inputs.filter(B=>{var N;return B.UnresolvedObject&&!(B.UnresolvedObject.version||(N=B.UnresolvedObject)!=null&&N.initialSharedVersion)}),i=[...new Set(n.map(B=>normalizeSuiObjectId$2(B.UnresolvedObject.objectId)))],s=i.length?chunk(i,MAX_OBJECTS_PER_FETCH$1):[],a=(await Promise.all(s.map(B=>getClient$1(e).multiGetObjects({ids:B,options:{showOwner:!0}})))).flat(),l=new Map(i.map((B,N)=>[B,a[N]])),f=Array.from(l).filter(([B,N])=>N.error).map(([B,N])=>JSON.stringify(N.error));if(f.length)throw new Error(`The following input objects are invalid: ${f.join(", ")}`);const p=a.map(B=>{if(B.error||!B.data)throw new Error(`Failed to fetch object: ${B.error}`);const N=B.data.owner,le=N&&typeof N=="object"&&"Shared"in N?N.Shared.initial_shared_version:null;return{objectId:B.data.objectId,digest:B.data.digest,version:B.data.version,initialSharedVersion:le}}),C=new Map(i.map((B,N)=>[B,p[N]]));for(const[B,N]of t.inputs.entries()){if(!N.UnresolvedObject)continue;let le;const Ee=normalizeSuiAddress$2(N.UnresolvedObject.objectId),Ue=C.get(Ee);N.UnresolvedObject.initialSharedVersion??(Ue==null?void 0:Ue.initialSharedVersion)?le=Inputs$1.SharedObjectRef({objectId:Ee,initialSharedVersion:N.UnresolvedObject.initialSharedVersion||(Ue==null?void 0:Ue.initialSharedVersion),mutable:isUsedAsMutable$1(t,B)}):isUsedAsReceiving$1(t,B)&&(le=Inputs$1.ReceivingRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})),t.inputs[t.inputs.indexOf(N)]=le??Inputs$1.ObjectRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})}}async function normalizeInputs$1(t,e){const{inputs:n,commands:i}=t,s=[],a=new Set;i.forEach(f=>{if(f.MoveCall){if(f.MoveCall._argumentTypes)return;if(f.MoveCall.arguments.map(B=>B.$kind==="Input"?t.inputs[B.Input]:null).some(B=>(B==null?void 0:B.UnresolvedPure)||(B==null?void 0:B.UnresolvedObject))){const B=`${f.MoveCall.package}::${f.MoveCall.module}::${f.MoveCall.function}`;a.add(B),s.push(f.MoveCall)}}switch(f.$kind){case"SplitCoins":f.SplitCoins.amounts.forEach(p=>{normalizeRawArgument$1(p,suiBcs$2.U64,t)});break;case"TransferObjects":normalizeRawArgument$1(f.TransferObjects.address,suiBcs$2.Address,t);break}});const l=new Map;if(a.size>0){const f=getClient$1(e);await Promise.all([...a].map(async p=>{const[C,B,N]=p.split("::"),le=await f.getNormalizedMoveFunction({package:C,module:B,function:N});l.set(p,le.parameters.map(Ee=>normalizedTypeToMoveTypeSignature$1(Ee)))}))}s.length&&await Promise.all(s.map(async f=>{const p=l.get(`${f.package}::${f.module}::${f.function}`);if(!p)return;const B=p.length>0&&isTxContext$1(p.at(-1))?p.slice(0,p.length-1):p;f._argumentTypes=B})),i.forEach(f=>{if(!f.MoveCall)return;const p=f.MoveCall,C=`${p.package}::${p.module}::${p.function}`,B=p._argumentTypes;if(B){if(B.length!==f.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${C}`);B.forEach((N,le)=>{var ct,wt;const Ee=p.arguments[le];if(Ee.$kind!=="Input")return;const Ue=n[Ee.Input];if(!Ue.UnresolvedPure&&!Ue.UnresolvedObject)return;const ze=((ct=Ue.UnresolvedPure)==null?void 0:ct.value)??((wt=Ue.UnresolvedObject)==null?void 0:wt.objectId),Ze=getPureBcsSchema$1(N.body);if(Ze){Ee.type="pure",n[n.indexOf(Ue)]=Inputs$1.Pure(Ze.serialize(ze));return}if(typeof ze!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(ze,null,2)}`);Ee.type="object";const Qe=Ue.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ze}}:Ue;n[Ee.Input]=Qe})}})}function validate$1(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function normalizeRawArgument$1(t,e,n){if(t.$kind!=="Input")return;const i=n.inputs[t.Input];i.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=Inputs$1.Pure(e.serialize(i.UnresolvedPure.value)))}function isUsedAsMutable$1(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=s.MoveCall._argumentTypes[a].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(n=!0)}),n}function isUsedAsReceiving$1(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=isReceivingType$1(s.MoveCall._argumentTypes[a])||n}}),n}function isReceivingType$1(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function getClient$1(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function chunk(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,i)=>t.slice(i*e,i*e+e))}function createObjectMethods$1(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:i})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${i===null?"none":"some"}`,arguments:i===null?[]:[s.object(i)]}),e}function createPure$1(t){function e(n,i){if(typeof n=="string")return t(pureBcsSchemaFromTypeName$2(n).serialize(i));if(n instanceof Uint8Array||isSerializedBcs(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(suiBcs$2.U8.serialize(n)),e.u16=n=>t(suiBcs$2.U16.serialize(n)),e.u32=n=>t(suiBcs$2.U32.serialize(n)),e.u64=n=>t(suiBcs$2.U64.serialize(n)),e.u128=n=>t(suiBcs$2.U128.serialize(n)),e.u256=n=>t(suiBcs$2.U256.serialize(n)),e.bool=n=>t(suiBcs$2.Bool.serialize(n)),e.string=n=>t(suiBcs$2.String.serialize(n)),e.address=n=>t(suiBcs$2.Address.serialize(n)),e.id=e.address,e.vector=(n,i)=>t(suiBcs$2.vector(pureBcsSchemaFromTypeName$2(n)).serialize(i)),e.option=(n,i)=>t(suiBcs$2.option(pureBcsSchemaFromTypeName$2(n)).serialize(i)),e}function hashTypedData$1(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),i=new Uint8Array(n.length+e.length);return i.set(n),i.set(e,n.length),blake2b$1(i,{dkLen:32})}function prepareSuiAddress$1(t){return normalizeSuiAddress$2(t).replace("0x","")}let TransactionDataBuilder$1=class ra{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const i=suiBcs$2.TransactionKind.parse(e).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return ra.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(e){const n=suiBcs$2.TransactionData.parse(e),i=n==null?void 0:n.V1,s=i.kind.ProgrammableTransaction;if(!i||!s)throw new Error("Unable to deserialize from bytes.");return ra.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new ra(parse(TransactionData$3,e)):new ra(parse(TransactionData$3,transactionDataFromV1$1(e)))}static getDigestFromBytes(e){const n=hashTypedData$1("TransactionData",e);return toBase58(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:i}={}){const s=this.inputs,a=this.commands,l={ProgrammableTransaction:{inputs:s,commands:a}};if(i)return suiBcs$2.TransactionKind.serialize(l,{maxSize:e}).toBytes();const f=(n==null?void 0:n.expiration)??this.expiration,p=(n==null?void 0:n.sender)??this.sender,C={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!p)throw new Error("Missing transaction sender");if(!C.budget)throw new Error("Missing gas budget");if(!C.payment)throw new Error("Missing gas payment");if(!C.price)throw new Error("Missing gas price");const B={sender:prepareSuiAddress$1(p),expiration:f||{None:!0},gasData:{payment:C.payment,owner:prepareSuiAddress$1(this.gasData.owner??p),price:BigInt(C.price),budget:BigInt(C.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:a}}};return suiBcs$2.TransactionData.serialize({V1:B},{maxSize:e}).toBytes()}addInput(e,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((i,s)=>(i.$kind==="Input"&&i.Input===e&&n(i,s),i))}mapArguments(e){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(s=>e(s,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(s=>e(s,n)),n.TransferObjects.address=e(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=e(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(s=>e(s,n));break;case"MergeCoins":n.MergeCoins.destination=e(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(s=>e(s,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(s=>e(s,n));break;case"Upgrade":n.Upgrade.ticket=e(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[s,a]of Object.entries(i))n.$Intent.inputs[s]=Array.isArray(a)?a.map(l=>e(l,n)):e(a,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(e,n){if(!Array.isArray(n)){this.commands[e]=n;return}const i=n.length-1;this.commands.splice(e,1,...n),i!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return ra.getDigestFromBytes(e)}snapshot(){return parse(TransactionData$3,this)}};function getIdFromCallArg$1(t){if(typeof t=="string")return normalizeSuiAddress$2(t);if(t.Object)return t.Object.ImmOrOwnedObject?normalizeSuiAddress$2(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?normalizeSuiAddress$2(t.Object.Receiving.objectId):normalizeSuiAddress$2(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return normalizeSuiAddress$2(t.UnresolvedObject.objectId)}var __typeError$6=t=>{throw TypeError(t)},__accessCheck$6=(t,e,n)=>e.has(t)||__typeError$6("Cannot "+n),__privateGet$6=(t,e,n)=>(__accessCheck$6(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$6=(t,e,n)=>e.has(t)?__typeError$6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$6=(t,e,n,i)=>(__accessCheck$6(t,e,"write to private field"),e.set(t,n),n),__privateMethod$3=(t,e,n)=>(__accessCheck$6(t,e,"access private method"),n),_serializationPlugins$1,_buildPlugins$1,_intentResolvers$1,_data$1,_Transaction_instances$1,normalizeTransactionArgument_fn$1,resolveArgument_fn$1,prepareBuild_fn$1,runPlugins_fn$1;function createTransactionResult$1(t,e=1/0){const n={$kind:"Result",Result:t},i=[],s=a=>i[a]??(i[a]={$kind:"NestedResult",NestedResult:[t,a]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(a,l){if(l in a)return Reflect.get(a,l);if(l===Symbol.iterator)return function*(){let p=0;for(;p<e;)yield s(p),p++};if(typeof l=="symbol")return;const f=parseInt(l,10);if(!(Number.isNaN(f)||f<0))return s(f)}})}const TRANSACTION_BRAND$1=Symbol.for("@mysten/transaction");function isTransaction$1(t){return!!t&&typeof t=="object"&&t[TRANSACTION_BRAND$1]===!0}const modulePluginRegistry$1={buildPlugins:new Map,serializationPlugins:new Map},TRANSACTION_REGISTRY_KEY$1=Symbol.for("@mysten/transaction/registry");function getGlobalPluginRegistry$1(){try{const t=globalThis;return t[TRANSACTION_REGISTRY_KEY$1]||(t[TRANSACTION_REGISTRY_KEY$1]=modulePluginRegistry$1),t[TRANSACTION_REGISTRY_KEY$1]}catch{return modulePluginRegistry$1}}const _Transaction$1=class Ka{constructor(){__privateAdd$6(this,_Transaction_instances$1),__privateAdd$6(this,_serializationPlugins$1),__privateAdd$6(this,_buildPlugins$1),__privateAdd$6(this,_intentResolvers$1,new Map),__privateAdd$6(this,_data$1),this.object=createObjectMethods$1(n=>{var a,l;if(typeof n=="function")return this.object(n(this));if(typeof n=="object"&&is$2(Argument$5,n))return n;const i=getIdFromCallArg$1(n),s=__privateGet$6(this,_data$1).inputs.find(f=>i===getIdFromCallArg$1(f));return(a=s==null?void 0:s.Object)!=null&&a.SharedObject&&typeof n=="object"&&((l=n.Object)!=null&&l.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:__privateGet$6(this,_data$1).inputs.indexOf(s),type:"object"}:__privateGet$6(this,_data$1).addInput("object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:normalizeSuiAddress$2(n)}}:n)});const e=getGlobalPluginRegistry$1();__privateSet$6(this,_data$1,new TransactionDataBuilder$1),__privateSet$6(this,_buildPlugins$1,[...e.buildPlugins.values()]),__privateSet$6(this,_serializationPlugins$1,[...e.serializationPlugins.values()])}static fromKind(e){const n=new Ka;return __privateSet$6(n,_data$1,TransactionDataBuilder$1.fromKindBytes(typeof e=="string"?fromBase64(e):e)),n}static from(e){const n=new Ka;return isTransaction$1(e)?__privateSet$6(n,_data$1,new TransactionDataBuilder$1(e.getData())):typeof e!="string"||!e.startsWith("{")?__privateSet$6(n,_data$1,TransactionDataBuilder$1.fromBytes(typeof e=="string"?fromBase64(e):e)):__privateSet$6(n,_data$1,TransactionDataBuilder$1.restore(JSON.parse(e))),n}static registerGlobalSerializationPlugin(e,n){getGlobalPluginRegistry$1().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){getGlobalPluginRegistry$1().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){getGlobalPluginRegistry$1().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){getGlobalPluginRegistry$1().buildPlugins.delete(e)}addSerializationPlugin(e){__privateGet$6(this,_serializationPlugins$1).push(e)}addBuildPlugin(e){__privateGet$6(this,_buildPlugins$1).push(e)}addIntentResolver(e,n){if(__privateGet$6(this,_intentResolvers$1).has(e)&&__privateGet$6(this,_intentResolvers$1).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);__privateGet$6(this,_intentResolvers$1).set(e,n)}setSender(e){__privateGet$6(this,_data$1).sender=e}setSenderIfNotSet(e){__privateGet$6(this,_data$1).sender||(__privateGet$6(this,_data$1).sender=e)}setExpiration(e){__privateGet$6(this,_data$1).expiration=e?parse(TransactionExpiration$7,e):null}setGasPrice(e){__privateGet$6(this,_data$1).gasConfig.price=String(e)}setGasBudget(e){__privateGet$6(this,_data$1).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){__privateGet$6(this,_data$1).gasData.budget==null&&(__privateGet$6(this,_data$1).gasConfig.budget=String(e))}setGasOwner(e){__privateGet$6(this,_data$1).gasConfig.owner=e}setGasPayment(e){__privateGet$6(this,_data$1).gasConfig.payment=e.map(n=>parse(ObjectRef$3,n))}get blockData(){return serializeV1TransactionData$1(__privateGet$6(this,_data$1).snapshot())}getData(){return __privateGet$6(this,_data$1).snapshot()}get[TRANSACTION_BRAND$1](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:createPure$1(e=>isSerializedBcs(e)?__privateGet$6(this,_data$1).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):__privateGet$6(this,_data$1).addInput("pure",is$2(NormalizedCallArg$3,e)?parse(NormalizedCallArg$3,e):e instanceof Uint8Array?Inputs$1.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Inputs$1.ObjectRef(...e))}receivingRef(...e){return this.object(Inputs$1.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Inputs$1.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const n=__privateGet$6(this,_data$1).commands.push(e);return createTransactionResult$1(n-1)}splitCoins(e,n){const i=Commands$1.SplitCoins(typeof e=="string"?this.object(e):__privateMethod$3(this,_Transaction_instances$1,resolveArgument_fn$1).call(this,e),n.map(a=>typeof a=="number"||typeof a=="bigint"||typeof a=="string"?this.pure.u64(a):__privateMethod$3(this,_Transaction_instances$1,normalizeTransactionArgument_fn$1).call(this,a))),s=__privateGet$6(this,_data$1).commands.push(i);return createTransactionResult$1(s-1,n.length)}mergeCoins(e,n){return this.add(Commands$1.MergeCoins(this.object(e),n.map(i=>this.object(i))))}publish({modules:e,dependencies:n}){return this.add(Commands$1.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:i,ticket:s}){return this.add(Commands$1.Upgrade({modules:e,dependencies:n,package:i,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(Commands$1.MoveCall({...n,arguments:e==null?void 0:e.map(i=>__privateMethod$3(this,_Transaction_instances$1,normalizeTransactionArgument_fn$1).call(this,i))}))}transferObjects(e,n){return this.add(Commands$1.TransferObjects(e.map(i=>this.object(i)),typeof n=="string"?this.pure.address(n):__privateMethod$3(this,_Transaction_instances$1,normalizeTransactionArgument_fn$1).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Commands$1.MakeMoveVec({type:e,elements:n.map(i=>this.object(i))}))}serialize(){return JSON.stringify(serializeV1TransactionData$1(__privateGet$6(this,_data$1).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(parse(SerializedTransactionDataV2$1,__privateGet$6(this,_data$1).snapshot()),(n,i)=>typeof i=="bigint"?i.toString():i,2)}async sign(e){const{signer:n,...i}=e,s=await this.build(i);return n.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await __privateMethod$3(this,_Transaction_instances$1,prepareBuild_fn$1).call(this,e),__privateGet$6(this,_data$1).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await __privateMethod$3(this,_Transaction_instances$1,prepareBuild_fn$1).call(this,e),__privateGet$6(this,_data$1).getDigest()}async prepareForSerialization(e){var s;const n=new Set;for(const a of __privateGet$6(this,_data$1).commands)a.$Intent&&n.add(a.$Intent.name);const i=[...__privateGet$6(this,_serializationPlugins$1)];for(const a of n)if(!((s=e.supportedIntents)!=null&&s.includes(a))){if(!__privateGet$6(this,_intentResolvers$1).has(a))throw new Error(`Missing intent resolver for ${a}`);i.push(__privateGet$6(this,_intentResolvers$1).get(a))}await __privateMethod$3(this,_Transaction_instances$1,runPlugins_fn$1).call(this,i,e)}};_serializationPlugins$1=new WeakMap;_buildPlugins$1=new WeakMap;_intentResolvers$1=new WeakMap;_data$1=new WeakMap;_Transaction_instances$1=new WeakSet;normalizeTransactionArgument_fn$1=function(t){return isSerializedBcs(t)?this.pure(t):__privateMethod$3(this,_Transaction_instances$1,resolveArgument_fn$1).call(this,t)};resolveArgument_fn$1=function(t){return typeof t=="function"?parse(Argument$5,t(this)):parse(Argument$5,t)};prepareBuild_fn$1=async function(t){if(!t.onlyTransactionKind&&!__privateGet$6(this,_data$1).sender)throw new Error("Missing transaction sender");await __privateMethod$3(this,_Transaction_instances$1,runPlugins_fn$1).call(this,[...__privateGet$6(this,_buildPlugins$1),resolveTransactionData$1],t)};runPlugins_fn$1=async function(t,e){const n=i=>{if(i>=t.length)return()=>{};const s=t[i];return async()=>{const a=n(i+1);let l=!1,f=!1;if(await s(__privateGet$6(this,_data$1),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);l=!0,await a(),f=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!f)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let Transaction$1=_Transaction$1,Experimental_CoreClient$1=class extends Experimental_BaseClient$1{constructor(){super(...arguments),this.core=this}async getDynamicField(e){const n=deriveDynamicFieldID$2(e.parentId,TypeTagSerializer$2.parseFromStr(e.name.type),e.name.bcs),{objects:[i]}=await this.getObjects({objectIds:[n]});if(i instanceof Error)throw i;const s=parseStructTag$2(i.type);return{dynamicField:{id:i.id,digest:i.digest,version:i.version,type:i.type,name:{type:typeof s.typeParams[0]=="string"?s.typeParams[0]:normalizeStructTag$2(s.typeParams[0]),bcs:e.name.bcs},value:{type:typeof s.typeParams[1]=="string"?s.typeParams[1]:normalizeStructTag$2(s.typeParams[1]),bcs:i.content.slice(SUI_ADDRESS_LENGTH$2+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:n=60*1e3,...i}){const s=e?AbortSignal.any([AbortSignal.timeout(n),e]):AbortSignal.timeout(n),a=new Promise((l,f)=>{s.addEventListener("abort",()=>f(s.reason))});for(a.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({...i,signal:s})}catch{await Promise.race([new Promise(f=>setTimeout(f,2e3)),a])}}}},SuiClientError$1=class extends Error{},ObjectError$1=class na extends SuiClientError$1{constructor(e,n){super(n),this.code=e}static fromResponse(e,n){switch(e.code){case"notExists":return new na(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new na(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new na(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new na(e.code,`Display error: ${e.error}`);case"unknown":default:return new na(e.code,`Unknown error while loading object${n?` ${n}`:""}`)}}};var __typeError$5=t=>{throw TypeError(t)},__accessCheck$5=(t,e,n)=>e.has(t)||__typeError$5("Cannot "+n),__privateGet$5=(t,e,n)=>(__accessCheck$5(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$5=(t,e,n)=>e.has(t)?__typeError$5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$5=(t,e,n,i)=>(__accessCheck$5(t,e,"write to private field"),e.set(t,n),n),_jsonRpcClient$1;let JSONRpcTransport$1=class extends Experimental_CoreClient$1{constructor(e){super({network:e.network}),__privateAdd$5(this,_jsonRpcClient$1),__privateSet$5(this,_jsonRpcClient$1,e)}async getObjects(e){const n=batch$1(e.objectIds,50),i=[];for(const s of n){const a=await __privateGet$5(this,_jsonRpcClient$1).multiGetObjects({ids:s,options:{showOwner:!0,showType:!0,showBcs:!0}});for(const[l,f]of a.entries())f.error?i.push(ObjectError$1.fromResponse(f.error,s[l])):i.push(parseObject$1(f.data))}return{objects:i}}async getOwnedObjects(e){const n=await __privateGet$5(this,_jsonRpcClient$1).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0}});return{objects:n.data.map(i=>{if(i.error)throw ObjectError$1.fromResponse(i.error);return parseObject$1(i.data)}),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getCoins(e){const n=await __privateGet$5(this,_jsonRpcClient$1).getCoins({owner:e.address,coinType:e.coinType});return{objects:n.data.map(i=>({id:i.coinObjectId,version:i.version,digest:i.digest,balance:i.balance,type:`0x2::coin::Coin<${i.coinType}>`,content:Coin$1.serialize({id:i.coinObjectId,balance:{value:i.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getBalance(e){const n=await __privateGet$5(this,_jsonRpcClient$1).getBalance({owner:e.address,coinType:e.coinType});return{balance:{coinType:n.coinType,balance:n.totalBalance}}}async getAllBalances(e){return{balances:(await __privateGet$5(this,_jsonRpcClient$1).getAllBalances({owner:e.address})).map(i=>({coinType:i.coinType,balance:i.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const n=await __privateGet$5(this,_jsonRpcClient$1).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0}});return{transaction:parseTransaction$1(n)}}async executeTransaction(e){const n=await __privateGet$5(this,_jsonRpcClient$1).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0}});return{transaction:parseTransaction$1(n)}}async dryRunTransaction(e){const n=Transaction$1.from(e.transaction),i=await __privateGet$5(this,_jsonRpcClient$1).dryRunTransactionBlock({transactionBlock:e.transaction});return{transaction:{digest:await n.getDigest(),effects:parseTransactionEffectsJson$1({effects:i.effects,objectChanges:i.objectChanges}),signatures:[],bcs:e.transaction}}}async getReferenceGasPrice(){const e=await __privateGet$5(this,_jsonRpcClient$1).getReferenceGasPrice();return{referenceGasPrice:String(e)}}async getDynamicFields(e){const n=await __privateGet$5(this,_jsonRpcClient$1).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:n.data.map(i=>({id:i.objectId,version:i.version,digest:i.digest,type:i.objectType,name:{type:i.name.type,bcs:fromBase64(i.bcsName)}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}};_jsonRpcClient$1=new WeakMap;function parseObject$1(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?fromBase64(t.bcs.bcsBytes):new Uint8Array,owner:parseOwner$1(t.owner)}}function parseOwner$1(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function parseTransaction$1(t){const e=suiBcs$2.SenderSignedData.parse(fromBase64(t.rawTransaction))[0];return{digest:t.digest,effects:parseTransactionEffects$1({effects:new Uint8Array(t.rawEffects),objectChanges:t.objectChanges??null}),bcs:suiBcs$2.TransactionData.serialize(e.intentMessage.value).toBytes(),signatures:e.txSignatures}}function parseTransactionEffects$1({effects:t,epoch:e,objectChanges:n}){const i=suiBcs$2.TransactionEffects.parse(t),s={};switch(n==null||n.forEach(a=>{a.type!=="published"&&(s[a.objectId]=a.objectType)}),i.$kind){case"V1":return parseTransactionEffectsV1$1({effects:i.V1});case"V2":return parseTransactionEffectsV2$1({bytes:t,effects:i.V2,epoch:e,objectTypes:s});default:throw new Error(`Unknown transaction effects version: ${i.$kind}`)}}function parseTransactionEffectsV1$1(t){throw new Error("V1 effects are not supported yet")}function parseTransactionEffectsV2$1({bytes:t,effects:e,epoch:n,objectTypes:i}){const s=e.changedObjects.map(([a,l])=>{var f,p,C,B,N,le;return{id:a,inputState:l.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((f=l.inputState.Exist)==null?void 0:f[0][0])??null,inputDigest:((p=l.inputState.Exist)==null?void 0:p[0][1])??null,inputOwner:((C=l.inputState.Exist)==null?void 0:C[1])??null,outputState:l.outputState.$kind==="NotExist"?"DoesNotExist":l.outputState.$kind,outputVersion:l.outputState.$kind==="PackageWrite"?(B=l.outputState.PackageWrite)==null?void 0:B[0]:l.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:l.outputState.$kind==="PackageWrite"?(N=l.outputState.PackageWrite)==null?void 0:N[1]:((le=l.outputState.ObjectWrite)==null?void 0:le[0])??null,outputOwner:l.outputState.ObjectWrite?l.outputState.ObjectWrite[1]:null,idOperation:l.idOperation.$kind,objectType:i[a]??null}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:s[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:s,unchangedSharedObjects:e.unchangedSharedObjects.map(([a,l])=>({kind:l.$kind,objectId:a,version:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[0]:l[l.$kind],digest:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[1]:null,objectType:i[a]??null})),auxiliaryDataDigest:e.auxDataDigest}}function parseTransactionEffectsJson$1({bytes:t,effects:e,epoch:n,objectChanges:i}){var l;const s=[],a=[];return i==null||i.forEach(f=>{var p,C,B,N;switch(f.type){case"published":s.push({id:f.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:null,idOperation:"Created",objectType:null});break;case"transferred":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:f.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$1(f.recipient),idOperation:"None",objectType:f.objectType});break;case"mutated":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.previousVersion,inputDigest:null,inputOwner:parseOwner$1(f.owner),outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$1(f.owner),idOperation:"None",objectType:f.objectType});break;case"deleted":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:((C=(p=e.deleted)==null?void 0:p.find(le=>le.objectId===f.objectId))==null?void 0:C.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted",objectType:f.objectType});break;case"wrapped":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:((N=(B=e.wrapped)==null?void 0:B.find(le=>le.objectId===f.objectId))==null?void 0:N.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:f.sender},idOperation:"None",objectType:f.objectType});break;case"created":s.push({id:f.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner$1(f.owner),idOperation:"Created",objectType:f.objectType});break}}),{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(l=e.gasObject)==null?void 0:l.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:parseOwner$1(e.gasObject.owner),idOperation:"None",objectType:normalizeStructTag$2("0x2::coin::Coin<0x2::sui::SUI>")},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:s,unchangedSharedObjects:a,auxiliaryDataDigest:null}}const Balance$1=suiBcs$2.struct("Balance",{value:suiBcs$2.u64()}),Coin$1=suiBcs$2.struct("Coin",{id:suiBcs$2.Address,balance:Balance$1}),COIN_WITH_BALANCE="CoinWithBalance",SUI_TYPE=normalizeStructTag$2("0x2::sui::SUI");function coinWithBalance({type:t=SUI_TYPE,balance:e,useGasCoin:n=!0}){return i=>{i.addIntentResolver(COIN_WITH_BALANCE,resolveCoinBalance);const s=t==="gas"?t:normalizeStructTag$2(t);return i.add(Commands$1.Intent({name:COIN_WITH_BALANCE,inputs:{},data:{type:s===SUI_TYPE&&n?"gas":s,balance:BigInt(e)}}))}}const CoinWithBalanceData=object$1({type:string(),balance:bigint()});async function resolveCoinBalance(t,e,n){var C,B;const i=new Set,s=new Map;if(!t.sender)throw new Error("Sender must be set to resolve CoinWithBalance");for(const N of t.commands)if(N.$kind==="$Intent"&&N.$Intent.name===COIN_WITH_BALANCE){const{type:le,balance:Ee}=parse(CoinWithBalanceData,N.$Intent.data);le!=="gas"&&Ee>0n&&i.add(le),s.set(le,(s.get(le)??0n)+Ee)}const a=new Set;for(const N of t.inputs)(C=N.Object)!=null&&C.ImmOrOwnedObject&&a.add(N.Object.ImmOrOwnedObject.objectId),(B=N.UnresolvedObject)!=null&&B.objectId&&a.add(N.UnresolvedObject.objectId);const l=new Map,f=getClient$1(e);await Promise.all([...i].map(async N=>{l.set(N,await getCoinsOfType({coinType:N,balance:s.get(N),client:f,owner:t.sender,usedIds:a}))}));const p=new Map;p.set("gas",{$kind:"GasCoin",GasCoin:!0});for(const[N,le]of t.commands.entries()){if(le.$kind!=="$Intent"||le.$Intent.name!==COIN_WITH_BALANCE)continue;const{type:Ee,balance:Ue}=le.$Intent.data;if(Ue===0n){t.replaceCommand(N,Commands$1.MoveCall({target:"0x2::coin::zero",typeArguments:[Ee]}));continue}const ze=[];if(!p.has(Ee)){const[Ze,...Qe]=l.get(Ee).map(ct=>t.addInput("object",Inputs$1.ObjectRef({objectId:ct.coinObjectId,digest:ct.digest,version:ct.version})));Qe.length>0&&ze.push(Commands$1.MergeCoins(Ze,Qe)),p.set(Ee,Ze)}ze.push(Commands$1.SplitCoins(p.get(Ee),[t.addInput("pure",Inputs$1.Pure(suiBcs$2.u64().serialize(Ue)))])),t.replaceCommand(N,ze),t.mapArguments(Ze=>Ze.$kind==="Result"&&Ze.Result===N?{$kind:"NestedResult",NestedResult:[N+ze.length-1,0]}:Ze)}return n()}async function getCoinsOfType({coinType:t,balance:e,client:n,owner:i,usedIds:s}){let a=e;const l=[];return f();async function f(p=null){const{data:C,hasNextPage:B,nextCursor:N}=await n.getCoins({owner:i,coinType:t,cursor:p}),le=C.sort((Ee,Ue)=>Number(BigInt(Ue.balance)-BigInt(Ee.balance)));for(const Ee of le){if(s.has(Ee.coinObjectId))continue;const Ue=BigInt(Ee.balance);if(l.push(Ee),a-=Ue,a<=0)return l}if(B)return f(N);throw new Error(`Not enough coins of type ${t} to satisfy requested balance`)}}const SUI_CLIENT_BRAND$1=Symbol.for("@mysten/SuiClient");let SuiClient$1=class extends Experimental_BaseClient$1{constructor(e){super({network:e.network??"unknown"}),this.core=new JSONRpcTransport$1(this),this.jsonRpc=this,this.transport=e.transport??new SuiHTTPTransport$1({url:e.url})}get[SUI_CLIENT_BRAND$1](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,n,{signal:i}={}){return await this.transport.request({method:e,params:n,signal:i})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!isValidSuiObjectId$2(normalizeSuiObjectId$2(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(i=>{if(!i||!isValidSuiObjectId$2(normalizeSuiObjectId$2(i)))throw new Error(`Invalid Sui Object id ${i}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!isValidTransactionDigest$2(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(i=>{if(!isValidTransactionDigest$2(i))throw new Error(`Invalid Transaction digest ${i}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:n,options:i,requestType:s,signal:a}){const l=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:toBase64(e),Array.isArray(n)?n:[n],i],signal:a});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:l.digest})}catch{}return l}async signAndExecuteTransaction({transaction:e,signer:n,...i}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(n.toSuiAddress()),s=await e.build({client:this}));const{signature:a,bytes:l}=await n.signTransaction(s);return this.executeTransactionBlock({transactionBlock:l,signature:a,...i})}async getTotalTransactionBlocks({signal:e}={}){const n=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(n)}async getReferenceGasPrice({signal:e}={}){const n=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(n)}async getStakes(e){if(!e.owner||!isValidSuiAddress$2(normalizeSuiAddress$2(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(n=>{if(!n||!isValidSuiObjectId$2(normalizeSuiObjectId$2(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var i,s;let n;if(isTransaction$1(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=toBase64(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=toBase64(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(i=e.signal)==null||i.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(s=e.gasPrice)==null?void 0:s.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:toBase64(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!isValidSuiObjectId$2(normalizeSuiObjectId$2(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const n=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(n)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const n=await this.getCheckpoint({id:"0",signal:e}),i=fromBase58(n.digest);return toHex$1(i.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...n}){const{nextCursor:i,hasNextPage:s,data:a}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit],signal:n.signal});return{hasNextPage:s,nextCursor:i,data:a.map(l=>normalizeSuiNSName$2(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async waitForTransaction({signal:e,timeout:n=60*1e3,pollInterval:i=2*1e3,...s}){const a=AbortSignal.timeout(n),l=new Promise((f,p)=>{a.addEventListener("abort",()=>p(a.reason))});for(l.catch(()=>{});!a.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(p=>setTimeout(p,i)),l])}}throw a.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}};const store$d=(t,e)=>({globalLoading:!0,setGlobalLoading:n=>{t(()=>({globalLoading:n}))},scrollYgtZero:!1,setScrollYgtZero:n=>{t(()=>({scrollYgtZero:n}))},isScrollTop:!1,setIsScrollTop:n=>{t(()=>({isScrollTop:n}))},phantomInstance:void 0,setPhantomInstance:n=>{t(()=>({phantomInstance:n}))}}),useGlobalStore=create(store$d),scriptRel="modulepreload",assetsURL=function(t){return"/"+t},seen={},__vitePreload=function(e,n,i){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),f=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));s=Promise.allSettled(n.map(p=>{if(p=assetsURL(p),p in seen)return;seen[p]=!0;const C=p.endsWith(".css"),B=C?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${B}`))return;const N=document.createElement("link");if(N.rel=C?"stylesheet":scriptRel,C||(N.as="script"),N.crossOrigin="",N.href=p,f&&N.setAttribute("nonce",f),document.head.appendChild(N),C)return new Promise((le,Ee)=>{N.addEventListener("load",le),N.addEventListener("error",()=>Ee(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=l,window.dispatchEvent(f),!f.defaultPrevented)throw l}return s.then(l=>{for(const f of l||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})},store$c=(t,e)=>({showConvertModel:!0,phaseDividendInfoMap:{},dividendManager:void 0,XCetusManager:void 0,dividendRewardList:[],lockCetusListLoading:!1,veNFT:void 0,veNFTLoading:!1,lockCetusList:[],owner:"",setVeNFTLoading:n=>{t(()=>({veNFTLoading:n}))},setVeNFT:(n,i)=>{t(()=>({veNFT:n,owner:i}))},setLockCetusList:n=>{t(()=>({lockCetusList:[...n]}))},setLockCetusListLoading:n=>{t(()=>({lockCetusListLoading:n}))},setXCetusManager:n=>{t(()=>({XCetusManager:n}))},setDividendManager:n=>{t(()=>({dividendManager:n}))},setDividendRewardList:n=>{t(()=>({dividendRewardList:n}))},setPhaseDividendInfoMap:n=>{const i=e().phaseDividendInfoMap;i[n.phase]=n,t(()=>({phaseDividendInfoMap:{...i}}))},setShowConvertModel:n=>{t(()=>({showConvertModel:n}))},clearData:()=>{t(()=>({veNFT:void 0,owner:"",lockCetusList:[],lockCetusListLoading:!1,veNFTLoading:!1,dividendRewardList:[]}))}}),useXCetusStore=create(persist(store$c,{name:"useXCetusStore",partialize:t=>{const{owner:e,veNFT:n,lockCetusList:i,XCetusManager:s,dividendManager:a,phaseDividendInfoMap:l,showConvertModel:f}=t;return{owner:e,veNFT:n,lockCetusList:i,XCetusManager:s,dividendManager:a,phaseDividendInfoMap:l,showConvertModel:f}}}));function useDebounceFunction(t,e=1e3){const n=reactExports.useRef(),i=reactExports.useCallback((...s)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{t(...s)},e)},[t,e]);return reactExports.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),i}function useWindowWidth(){const[t,e]=reactExports.useState(window.innerWidth),n=useDebounceFunction(()=>{e(window.innerWidth)},300);reactExports.useEffect(()=>(window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}),[]);const i=reactExports.useMemo(()=>t<810,[t]);return{windowWidth:t,isApp:i}}const isSuiObjectType=t=>t.split("::").length==3,add0x=t=>{let e;return t.startsWith("0x")?e=t:e=`0x${t}`,e},getSuiObjectType=t=>{const e=t.split("::");return e.length==3?`${add0x(e[0])}::${e[1]}::${e[2].toUpperCase()}`.replace(/\s+/g,""):t.toLowerCase()};function suiAddressLongToShort(t){return t.toLocaleLowerCase()=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::sui"?"0x2::sui::SUI":t}class LocalForageService{constructor(e,n){Or(this,"storage");this.storage=localforage.createInstance({name:e,storeName:n})}async setItem(e,n){try{await this.storage.setItem(e,n)}catch(i){console.error(`Failed to set item with key "${e}"`,i)}}async getItem(e){try{return await this.storage.getItem(e)}catch(n){return console.error(`Failed to get item with key "${e}"`,n),null}}async getAllItems(){try{const e=new Map;return await this.storage.iterate((n,i)=>{e.set(i,n)}),e}catch(e){return console.error("Failed to get all items",e),null}}async removeItem(e){try{await this.storage.removeItem(e)}catch(n){console.error(`Failed to remove item with key "${e}"`,n)}}async clear(){try{await this.storage.clear()}catch(e){console.error("Failed to clear storage",e)}}}const qs=class qs extends LocalForageService{constructor(){super("CetusSite","allTokens")}static getInstance(){return qs.instance||(qs.instance=new qs),qs.instance}};Or(qs,"instance");let AllTokensTableImpl=qs;const Ss=class Ss{static async setItem(e,n){return Ss.table.setItem(e,n)}static async getItem(e){return Ss.table.getItem(e)}static async getAllItems(){return Ss.table.getAllItems()}static async removeItem(e){return Ss.table.removeItem(e)}static async clear(){return Ss.table.clear()}};Or(Ss,"table",AllTokensTableImpl.getInstance());let AllTokensTable=Ss;const fetchGet=async function(t,e,n=3e4){const i=[];let s="";if(e){for(const p in e){const C=`${p}=${e[p]}`;i.push(C)}const f=i.join("&");s=`${t}?${f}`}else s=t;const a=new AbortController,l=setTimeout(()=>{a.abort()},n);try{const f=await fetch(s,{signal:a.signal});if(clearTimeout(l),!f.ok)throw new Error("Request failed");const p=await f.json();return(p==null?void 0:p.data)||p}catch(f){throw clearTimeout(l),f.name==="AbortError"?new Error("request time out"):f}},fetchPost=async function(t,e,n=3e4,i){const s=new AbortController,a=setTimeout(()=>{s.abort()},n);try{const l=await fetch(t,{headers:i,body:JSON.stringify(e),method:"POST",signal:s.signal});if(clearTimeout(a),!l.ok)throw new Error("Request failed");return l.json()}catch(l){throw clearTimeout(a),l.name==="AbortError"?new Error("request time out"):l}};var bn$3={exports:{}};const require$$1$3=getAugmentedNamespace(dist);bn$3.exports;(function(t){(function(e,n){function i(Vt,tt){if(!Vt)throw new Error(tt||"Assertion failed")}function s(Vt,tt){Vt.super_=tt;var Ye=function(){};Ye.prototype=tt.prototype,Vt.prototype=new Ye,Vt.prototype.constructor=Vt}function a(Vt,tt,Ye){if(a.isBN(Vt))return Vt;this.negative=0,this.words=null,this.length=0,this.red=null,Vt!==null&&((tt==="le"||tt==="be")&&(Ye=tt,tt=10),this._init(Vt||0,tt||10,Ye||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$1$3.Buffer}catch{}a.isBN=function(tt){return tt instanceof a?!0:tt!==null&&typeof tt=="object"&&tt.constructor.wordSize===a.wordSize&&Array.isArray(tt.words)},a.max=function(tt,Ye){return tt.cmp(Ye)>0?tt:Ye},a.min=function(tt,Ye){return tt.cmp(Ye)<0?tt:Ye},a.prototype._init=function(tt,Ye,ot){if(typeof tt=="number")return this._initNumber(tt,Ye,ot);if(typeof tt=="object")return this._initArray(tt,Ye,ot);Ye==="hex"&&(Ye=16),i(Ye===(Ye|0)&&Ye>=2&&Ye<=36),tt=tt.toString().replace(/\s+/g,"");var Et=0;tt[0]==="-"&&(Et++,this.negative=1),Et<tt.length&&(Ye===16?this._parseHex(tt,Et,ot):(this._parseBase(tt,Ye,Et),ot==="le"&&this._initArray(this.toArray(),Ye,ot)))},a.prototype._initNumber=function(tt,Ye,ot){tt<0&&(this.negative=1,tt=-tt),tt<67108864?(this.words=[tt&67108863],this.length=1):tt<4503599627370496?(this.words=[tt&67108863,tt/67108864&67108863],this.length=2):(i(tt<9007199254740992),this.words=[tt&67108863,tt/67108864&67108863,1],this.length=3),ot==="le"&&this._initArray(this.toArray(),Ye,ot)},a.prototype._initArray=function(tt,Ye,ot){if(i(typeof tt.length=="number"),tt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(tt.length/3),this.words=new Array(this.length);for(var Et=0;Et<this.length;Et++)this.words[Et]=0;var er,rr,yt=0;if(ot==="be")for(Et=tt.length-1,er=0;Et>=0;Et-=3)rr=tt[Et]|tt[Et-1]<<8|tt[Et-2]<<16,this.words[er]|=rr<<yt&67108863,this.words[er+1]=rr>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,er++);else if(ot==="le")for(Et=0,er=0;Et<tt.length;Et+=3)rr=tt[Et]|tt[Et+1]<<8|tt[Et+2]<<16,this.words[er]|=rr<<yt&67108863,this.words[er+1]=rr>>>26-yt&67108863,yt+=24,yt>=26&&(yt-=26,er++);return this._strip()};function f(Vt,tt){var Ye=Vt.charCodeAt(tt);if(Ye>=48&&Ye<=57)return Ye-48;if(Ye>=65&&Ye<=70)return Ye-55;if(Ye>=97&&Ye<=102)return Ye-87;i(!1,"Invalid character in "+Vt)}function p(Vt,tt,Ye){var ot=f(Vt,Ye);return Ye-1>=tt&&(ot|=f(Vt,Ye-1)<<4),ot}a.prototype._parseHex=function(tt,Ye,ot){this.length=Math.ceil((tt.length-Ye)/6),this.words=new Array(this.length);for(var Et=0;Et<this.length;Et++)this.words[Et]=0;var er=0,rr=0,yt;if(ot==="be")for(Et=tt.length-1;Et>=Ye;Et-=2)yt=p(tt,Ye,Et)<<er,this.words[rr]|=yt&67108863,er>=18?(er-=18,rr+=1,this.words[rr]|=yt>>>26):er+=8;else{var tr=tt.length-Ye;for(Et=tr%2===0?Ye+1:Ye;Et<tt.length;Et+=2)yt=p(tt,Ye,Et)<<er,this.words[rr]|=yt&67108863,er>=18?(er-=18,rr+=1,this.words[rr]|=yt>>>26):er+=8}this._strip()};function C(Vt,tt,Ye,ot){for(var Et=0,er=0,rr=Math.min(Vt.length,Ye),yt=tt;yt<rr;yt++){var tr=Vt.charCodeAt(yt)-48;Et*=ot,tr>=49?er=tr-49+10:tr>=17?er=tr-17+10:er=tr,i(tr>=0&&er<ot,"Invalid character"),Et+=er}return Et}a.prototype._parseBase=function(tt,Ye,ot){this.words=[0],this.length=1;for(var Et=0,er=1;er<=67108863;er*=Ye)Et++;Et--,er=er/Ye|0;for(var rr=tt.length-ot,yt=rr%Et,tr=Math.min(rr,rr-yt)+ot,Ut=0,Ft=ot;Ft<tr;Ft+=Et)Ut=C(tt,Ft,Ft+Et,Ye),this.imuln(er),this.words[0]+Ut<67108864?this.words[0]+=Ut:this._iaddn(Ut);if(yt!==0){var sr=1;for(Ut=C(tt,Ft,tt.length,Ye),Ft=0;Ft<yt;Ft++)sr*=Ye;this.imuln(sr),this.words[0]+Ut<67108864?this.words[0]+=Ut:this._iaddn(Ut)}this._strip()},a.prototype.copy=function(tt){tt.words=new Array(this.length);for(var Ye=0;Ye<this.length;Ye++)tt.words[Ye]=this.words[Ye];tt.length=this.length,tt.negative=this.negative,tt.red=this.red};function B(Vt,tt){Vt.words=tt.words,Vt.length=tt.length,Vt.negative=tt.negative,Vt.red=tt.red}if(a.prototype._move=function(tt){B(tt,this)},a.prototype.clone=function(){var tt=new a(null);return this.copy(tt),tt},a.prototype._expand=function(tt){for(;this.length<tt;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=N}catch{a.prototype.inspect=N}else a.prototype.inspect=N;function N(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var le=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ee=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],Ue=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(tt,Ye){tt=tt||10,Ye=Ye|0||1;var ot;if(tt===16||tt==="hex"){ot="";for(var Et=0,er=0,rr=0;rr<this.length;rr++){var yt=this.words[rr],tr=((yt<<Et|er)&16777215).toString(16);er=yt>>>24-Et&16777215,Et+=2,Et>=26&&(Et-=26,rr--),er!==0||rr!==this.length-1?ot=le[6-tr.length]+tr+ot:ot=tr+ot}for(er!==0&&(ot=er.toString(16)+ot);ot.length%Ye!==0;)ot="0"+ot;return this.negative!==0&&(ot="-"+ot),ot}if(tt===(tt|0)&&tt>=2&&tt<=36){var Ut=Ee[tt],Ft=Ue[tt];ot="";var sr=this.clone();for(sr.negative=0;!sr.isZero();){var vr=sr.modrn(Ft).toString(tt);sr=sr.idivn(Ft),sr.isZero()?ot=vr+ot:ot=le[Ut-vr.length]+vr+ot}for(this.isZero()&&(ot="0"+ot);ot.length%Ye!==0;)ot="0"+ot;return this.negative!==0&&(ot="-"+ot),ot}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var tt=this.words[0];return this.length===2?tt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?tt+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-tt:tt},a.prototype.toJSON=function(){return this.toString(16,2)},l&&(a.prototype.toBuffer=function(tt,Ye){return this.toArrayLike(l,tt,Ye)}),a.prototype.toArray=function(tt,Ye){return this.toArrayLike(Array,tt,Ye)};var ze=function(tt,Ye){return tt.allocUnsafe?tt.allocUnsafe(Ye):new tt(Ye)};a.prototype.toArrayLike=function(tt,Ye,ot){this._strip();var Et=this.byteLength(),er=ot||Math.max(1,Et);i(Et<=er,"byte array longer than desired length"),i(er>0,"Requested array length <= 0");var rr=ze(tt,er),yt=Ye==="le"?"LE":"BE";return this["_toArrayLike"+yt](rr,Et),rr},a.prototype._toArrayLikeLE=function(tt,Ye){for(var ot=0,Et=0,er=0,rr=0;er<this.length;er++){var yt=this.words[er]<<rr|Et;tt[ot++]=yt&255,ot<tt.length&&(tt[ot++]=yt>>8&255),ot<tt.length&&(tt[ot++]=yt>>16&255),rr===6?(ot<tt.length&&(tt[ot++]=yt>>24&255),Et=0,rr=0):(Et=yt>>>24,rr+=2)}if(ot<tt.length)for(tt[ot++]=Et;ot<tt.length;)tt[ot++]=0},a.prototype._toArrayLikeBE=function(tt,Ye){for(var ot=tt.length-1,Et=0,er=0,rr=0;er<this.length;er++){var yt=this.words[er]<<rr|Et;tt[ot--]=yt&255,ot>=0&&(tt[ot--]=yt>>8&255),ot>=0&&(tt[ot--]=yt>>16&255),rr===6?(ot>=0&&(tt[ot--]=yt>>24&255),Et=0,rr=0):(Et=yt>>>24,rr+=2)}if(ot>=0)for(tt[ot--]=Et;ot>=0;)tt[ot--]=0},Math.clz32?a.prototype._countBits=function(tt){return 32-Math.clz32(tt)}:a.prototype._countBits=function(tt){var Ye=tt,ot=0;return Ye>=4096&&(ot+=13,Ye>>>=13),Ye>=64&&(ot+=7,Ye>>>=7),Ye>=8&&(ot+=4,Ye>>>=4),Ye>=2&&(ot+=2,Ye>>>=2),ot+Ye},a.prototype._zeroBits=function(tt){if(tt===0)return 26;var Ye=tt,ot=0;return Ye&8191||(ot+=13,Ye>>>=13),Ye&127||(ot+=7,Ye>>>=7),Ye&15||(ot+=4,Ye>>>=4),Ye&3||(ot+=2,Ye>>>=2),Ye&1||ot++,ot},a.prototype.bitLength=function(){var tt=this.words[this.length-1],Ye=this._countBits(tt);return(this.length-1)*26+Ye};function Ze(Vt){for(var tt=new Array(Vt.bitLength()),Ye=0;Ye<tt.length;Ye++){var ot=Ye/26|0,Et=Ye%26;tt[Ye]=Vt.words[ot]>>>Et&1}return tt}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var tt=0,Ye=0;Ye<this.length;Ye++){var ot=this._zeroBits(this.words[Ye]);if(tt+=ot,ot!==26)break}return tt},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(tt){return this.negative!==0?this.abs().inotn(tt).iaddn(1):this.clone()},a.prototype.fromTwos=function(tt){return this.testn(tt-1)?this.notn(tt).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(tt){for(;this.length<tt.length;)this.words[this.length++]=0;for(var Ye=0;Ye<tt.length;Ye++)this.words[Ye]=this.words[Ye]|tt.words[Ye];return this._strip()},a.prototype.ior=function(tt){return i((this.negative|tt.negative)===0),this.iuor(tt)},a.prototype.or=function(tt){return this.length>tt.length?this.clone().ior(tt):tt.clone().ior(this)},a.prototype.uor=function(tt){return this.length>tt.length?this.clone().iuor(tt):tt.clone().iuor(this)},a.prototype.iuand=function(tt){var Ye;this.length>tt.length?Ye=tt:Ye=this;for(var ot=0;ot<Ye.length;ot++)this.words[ot]=this.words[ot]&tt.words[ot];return this.length=Ye.length,this._strip()},a.prototype.iand=function(tt){return i((this.negative|tt.negative)===0),this.iuand(tt)},a.prototype.and=function(tt){return this.length>tt.length?this.clone().iand(tt):tt.clone().iand(this)},a.prototype.uand=function(tt){return this.length>tt.length?this.clone().iuand(tt):tt.clone().iuand(this)},a.prototype.iuxor=function(tt){var Ye,ot;this.length>tt.length?(Ye=this,ot=tt):(Ye=tt,ot=this);for(var Et=0;Et<ot.length;Et++)this.words[Et]=Ye.words[Et]^ot.words[Et];if(this!==Ye)for(;Et<Ye.length;Et++)this.words[Et]=Ye.words[Et];return this.length=Ye.length,this._strip()},a.prototype.ixor=function(tt){return i((this.negative|tt.negative)===0),this.iuxor(tt)},a.prototype.xor=function(tt){return this.length>tt.length?this.clone().ixor(tt):tt.clone().ixor(this)},a.prototype.uxor=function(tt){return this.length>tt.length?this.clone().iuxor(tt):tt.clone().iuxor(this)},a.prototype.inotn=function(tt){i(typeof tt=="number"&&tt>=0);var Ye=Math.ceil(tt/26)|0,ot=tt%26;this._expand(Ye),ot>0&&Ye--;for(var Et=0;Et<Ye;Et++)this.words[Et]=~this.words[Et]&67108863;return ot>0&&(this.words[Et]=~this.words[Et]&67108863>>26-ot),this._strip()},a.prototype.notn=function(tt){return this.clone().inotn(tt)},a.prototype.setn=function(tt,Ye){i(typeof tt=="number"&&tt>=0);var ot=tt/26|0,Et=tt%26;return this._expand(ot+1),Ye?this.words[ot]=this.words[ot]|1<<Et:this.words[ot]=this.words[ot]&~(1<<Et),this._strip()},a.prototype.iadd=function(tt){var Ye;if(this.negative!==0&&tt.negative===0)return this.negative=0,Ye=this.isub(tt),this.negative^=1,this._normSign();if(this.negative===0&&tt.negative!==0)return tt.negative=0,Ye=this.isub(tt),tt.negative=1,Ye._normSign();var ot,Et;this.length>tt.length?(ot=this,Et=tt):(ot=tt,Et=this);for(var er=0,rr=0;rr<Et.length;rr++)Ye=(ot.words[rr]|0)+(Et.words[rr]|0)+er,this.words[rr]=Ye&67108863,er=Ye>>>26;for(;er!==0&&rr<ot.length;rr++)Ye=(ot.words[rr]|0)+er,this.words[rr]=Ye&67108863,er=Ye>>>26;if(this.length=ot.length,er!==0)this.words[this.length]=er,this.length++;else if(ot!==this)for(;rr<ot.length;rr++)this.words[rr]=ot.words[rr];return this},a.prototype.add=function(tt){var Ye;return tt.negative!==0&&this.negative===0?(tt.negative=0,Ye=this.sub(tt),tt.negative^=1,Ye):tt.negative===0&&this.negative!==0?(this.negative=0,Ye=tt.sub(this),this.negative=1,Ye):this.length>tt.length?this.clone().iadd(tt):tt.clone().iadd(this)},a.prototype.isub=function(tt){if(tt.negative!==0){tt.negative=0;var Ye=this.iadd(tt);return tt.negative=1,Ye._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(tt),this.negative=1,this._normSign();var ot=this.cmp(tt);if(ot===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Et,er;ot>0?(Et=this,er=tt):(Et=tt,er=this);for(var rr=0,yt=0;yt<er.length;yt++)Ye=(Et.words[yt]|0)-(er.words[yt]|0)+rr,rr=Ye>>26,this.words[yt]=Ye&67108863;for(;rr!==0&&yt<Et.length;yt++)Ye=(Et.words[yt]|0)+rr,rr=Ye>>26,this.words[yt]=Ye&67108863;if(rr===0&&yt<Et.length&&Et!==this)for(;yt<Et.length;yt++)this.words[yt]=Et.words[yt];return this.length=Math.max(this.length,yt),Et!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(tt){return this.clone().isub(tt)};function Qe(Vt,tt,Ye){Ye.negative=tt.negative^Vt.negative;var ot=Vt.length+tt.length|0;Ye.length=ot,ot=ot-1|0;var Et=Vt.words[0]|0,er=tt.words[0]|0,rr=Et*er,yt=rr&67108863,tr=rr/67108864|0;Ye.words[0]=yt;for(var Ut=1;Ut<ot;Ut++){for(var Ft=tr>>>26,sr=tr&67108863,vr=Math.min(Ut,tt.length-1),_r=Math.max(0,Ut-Vt.length+1);_r<=vr;_r++){var dr=Ut-_r|0;Et=Vt.words[dr]|0,er=tt.words[_r]|0,rr=Et*er+sr,Ft+=rr/67108864|0,sr=rr&67108863}Ye.words[Ut]=sr|0,tr=Ft|0}return tr!==0?Ye.words[Ut]=tr|0:Ye.length--,Ye._strip()}var ct=function(tt,Ye,ot){var Et=tt.words,er=Ye.words,rr=ot.words,yt=0,tr,Ut,Ft,sr=Et[0]|0,vr=sr&8191,_r=sr>>>13,dr=Et[1]|0,gr=dr&8191,$r=dr>>>13,pr=Et[2]|0,lr=pr&8191,cr=pr>>>13,yr=Et[3]|0,Sr=yr&8191,Ar=yr>>>13,Tr=Et[4]|0,xr=Tr&8191,Cr=Tr>>>13,wr=Et[5]|0,Er=wr&8191,kr=wr>>>13,Br=Et[6]|0,Rr=Br&8191,Ir=Br>>>13,Dr=Et[7]|0,zr=Dr&8191,jr=Dr>>>13,Fr=Et[8]|0,mn=Fr&8191,Gr=Fr>>>13,rn=Et[9]|0,Vn=rn&8191,Lr=rn>>>13,sn=er[0]|0,Gn=sn&8191,qr=sn>>>13,Vr=er[1]|0,Zn=Vr&8191,Zr=Vr>>>13,an=er[2]|0,Xn=an&8191,Wr=an>>>13,Tn=er[3]|0,Jn=Tn&8191,Xr=Tn>>>13,cn=er[4]|0,Yn=cn&8191,Jr=cn>>>13,fn=er[5]|0,Qn=fn&8191,Hr=fn>>>13,en=er[6]|0,Wn=en&8191,Kr=en>>>13,Mn=er[7]|0,ri=Mn&8191,Yr=Mn>>>13,Un=er[8]|0,ni=Un&8191,Qr=Un>>>13,Ln=er[9]|0,ti=Ln&8191,Fn=Ln>>>13;ot.negative=tt.negative^Ye.negative,ot.length=19,tr=Math.imul(vr,Gn),Ut=Math.imul(vr,qr),Ut=Ut+Math.imul(_r,Gn)|0,Ft=Math.imul(_r,qr);var ei=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(ei>>>26)|0,ei&=67108863,tr=Math.imul(gr,Gn),Ut=Math.imul(gr,qr),Ut=Ut+Math.imul($r,Gn)|0,Ft=Math.imul($r,qr),tr=tr+Math.imul(vr,Zn)|0,Ut=Ut+Math.imul(vr,Zr)|0,Ut=Ut+Math.imul(_r,Zn)|0,Ft=Ft+Math.imul(_r,Zr)|0;var Ti=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,tr=Math.imul(lr,Gn),Ut=Math.imul(lr,qr),Ut=Ut+Math.imul(cr,Gn)|0,Ft=Math.imul(cr,qr),tr=tr+Math.imul(gr,Zn)|0,Ut=Ut+Math.imul(gr,Zr)|0,Ut=Ut+Math.imul($r,Zn)|0,Ft=Ft+Math.imul($r,Zr)|0,tr=tr+Math.imul(vr,Xn)|0,Ut=Ut+Math.imul(vr,Wr)|0,Ut=Ut+Math.imul(_r,Xn)|0,Ft=Ft+Math.imul(_r,Wr)|0;var ki=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(ki>>>26)|0,ki&=67108863,tr=Math.imul(Sr,Gn),Ut=Math.imul(Sr,qr),Ut=Ut+Math.imul(Ar,Gn)|0,Ft=Math.imul(Ar,qr),tr=tr+Math.imul(lr,Zn)|0,Ut=Ut+Math.imul(lr,Zr)|0,Ut=Ut+Math.imul(cr,Zn)|0,Ft=Ft+Math.imul(cr,Zr)|0,tr=tr+Math.imul(gr,Xn)|0,Ut=Ut+Math.imul(gr,Wr)|0,Ut=Ut+Math.imul($r,Xn)|0,Ft=Ft+Math.imul($r,Wr)|0,tr=tr+Math.imul(vr,Jn)|0,Ut=Ut+Math.imul(vr,Xr)|0,Ut=Ut+Math.imul(_r,Jn)|0,Ft=Ft+Math.imul(_r,Xr)|0;var Oi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,tr=Math.imul(xr,Gn),Ut=Math.imul(xr,qr),Ut=Ut+Math.imul(Cr,Gn)|0,Ft=Math.imul(Cr,qr),tr=tr+Math.imul(Sr,Zn)|0,Ut=Ut+Math.imul(Sr,Zr)|0,Ut=Ut+Math.imul(Ar,Zn)|0,Ft=Ft+Math.imul(Ar,Zr)|0,tr=tr+Math.imul(lr,Xn)|0,Ut=Ut+Math.imul(lr,Wr)|0,Ut=Ut+Math.imul(cr,Xn)|0,Ft=Ft+Math.imul(cr,Wr)|0,tr=tr+Math.imul(gr,Jn)|0,Ut=Ut+Math.imul(gr,Xr)|0,Ut=Ut+Math.imul($r,Jn)|0,Ft=Ft+Math.imul($r,Xr)|0,tr=tr+Math.imul(vr,Yn)|0,Ut=Ut+Math.imul(vr,Jr)|0,Ut=Ut+Math.imul(_r,Yn)|0,Ft=Ft+Math.imul(_r,Jr)|0;var Ii=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,tr=Math.imul(Er,Gn),Ut=Math.imul(Er,qr),Ut=Ut+Math.imul(kr,Gn)|0,Ft=Math.imul(kr,qr),tr=tr+Math.imul(xr,Zn)|0,Ut=Ut+Math.imul(xr,Zr)|0,Ut=Ut+Math.imul(Cr,Zn)|0,Ft=Ft+Math.imul(Cr,Zr)|0,tr=tr+Math.imul(Sr,Xn)|0,Ut=Ut+Math.imul(Sr,Wr)|0,Ut=Ut+Math.imul(Ar,Xn)|0,Ft=Ft+Math.imul(Ar,Wr)|0,tr=tr+Math.imul(lr,Jn)|0,Ut=Ut+Math.imul(lr,Xr)|0,Ut=Ut+Math.imul(cr,Jn)|0,Ft=Ft+Math.imul(cr,Xr)|0,tr=tr+Math.imul(gr,Yn)|0,Ut=Ut+Math.imul(gr,Jr)|0,Ut=Ut+Math.imul($r,Yn)|0,Ft=Ft+Math.imul($r,Jr)|0,tr=tr+Math.imul(vr,Qn)|0,Ut=Ut+Math.imul(vr,Hr)|0,Ut=Ut+Math.imul(_r,Qn)|0,Ft=Ft+Math.imul(_r,Hr)|0;var Pi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,tr=Math.imul(Rr,Gn),Ut=Math.imul(Rr,qr),Ut=Ut+Math.imul(Ir,Gn)|0,Ft=Math.imul(Ir,qr),tr=tr+Math.imul(Er,Zn)|0,Ut=Ut+Math.imul(Er,Zr)|0,Ut=Ut+Math.imul(kr,Zn)|0,Ft=Ft+Math.imul(kr,Zr)|0,tr=tr+Math.imul(xr,Xn)|0,Ut=Ut+Math.imul(xr,Wr)|0,Ut=Ut+Math.imul(Cr,Xn)|0,Ft=Ft+Math.imul(Cr,Wr)|0,tr=tr+Math.imul(Sr,Jn)|0,Ut=Ut+Math.imul(Sr,Xr)|0,Ut=Ut+Math.imul(Ar,Jn)|0,Ft=Ft+Math.imul(Ar,Xr)|0,tr=tr+Math.imul(lr,Yn)|0,Ut=Ut+Math.imul(lr,Jr)|0,Ut=Ut+Math.imul(cr,Yn)|0,Ft=Ft+Math.imul(cr,Jr)|0,tr=tr+Math.imul(gr,Qn)|0,Ut=Ut+Math.imul(gr,Hr)|0,Ut=Ut+Math.imul($r,Qn)|0,Ft=Ft+Math.imul($r,Hr)|0,tr=tr+Math.imul(vr,Wn)|0,Ut=Ut+Math.imul(vr,Kr)|0,Ut=Ut+Math.imul(_r,Wn)|0,Ft=Ft+Math.imul(_r,Kr)|0;var ji=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(ji>>>26)|0,ji&=67108863,tr=Math.imul(zr,Gn),Ut=Math.imul(zr,qr),Ut=Ut+Math.imul(jr,Gn)|0,Ft=Math.imul(jr,qr),tr=tr+Math.imul(Rr,Zn)|0,Ut=Ut+Math.imul(Rr,Zr)|0,Ut=Ut+Math.imul(Ir,Zn)|0,Ft=Ft+Math.imul(Ir,Zr)|0,tr=tr+Math.imul(Er,Xn)|0,Ut=Ut+Math.imul(Er,Wr)|0,Ut=Ut+Math.imul(kr,Xn)|0,Ft=Ft+Math.imul(kr,Wr)|0,tr=tr+Math.imul(xr,Jn)|0,Ut=Ut+Math.imul(xr,Xr)|0,Ut=Ut+Math.imul(Cr,Jn)|0,Ft=Ft+Math.imul(Cr,Xr)|0,tr=tr+Math.imul(Sr,Yn)|0,Ut=Ut+Math.imul(Sr,Jr)|0,Ut=Ut+Math.imul(Ar,Yn)|0,Ft=Ft+Math.imul(Ar,Jr)|0,tr=tr+Math.imul(lr,Qn)|0,Ut=Ut+Math.imul(lr,Hr)|0,Ut=Ut+Math.imul(cr,Qn)|0,Ft=Ft+Math.imul(cr,Hr)|0,tr=tr+Math.imul(gr,Wn)|0,Ut=Ut+Math.imul(gr,Kr)|0,Ut=Ut+Math.imul($r,Wn)|0,Ft=Ft+Math.imul($r,Kr)|0,tr=tr+Math.imul(vr,ri)|0,Ut=Ut+Math.imul(vr,Yr)|0,Ut=Ut+Math.imul(_r,ri)|0,Ft=Ft+Math.imul(_r,Yr)|0;var Ui=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,tr=Math.imul(mn,Gn),Ut=Math.imul(mn,qr),Ut=Ut+Math.imul(Gr,Gn)|0,Ft=Math.imul(Gr,qr),tr=tr+Math.imul(zr,Zn)|0,Ut=Ut+Math.imul(zr,Zr)|0,Ut=Ut+Math.imul(jr,Zn)|0,Ft=Ft+Math.imul(jr,Zr)|0,tr=tr+Math.imul(Rr,Xn)|0,Ut=Ut+Math.imul(Rr,Wr)|0,Ut=Ut+Math.imul(Ir,Xn)|0,Ft=Ft+Math.imul(Ir,Wr)|0,tr=tr+Math.imul(Er,Jn)|0,Ut=Ut+Math.imul(Er,Xr)|0,Ut=Ut+Math.imul(kr,Jn)|0,Ft=Ft+Math.imul(kr,Xr)|0,tr=tr+Math.imul(xr,Yn)|0,Ut=Ut+Math.imul(xr,Jr)|0,Ut=Ut+Math.imul(Cr,Yn)|0,Ft=Ft+Math.imul(Cr,Jr)|0,tr=tr+Math.imul(Sr,Qn)|0,Ut=Ut+Math.imul(Sr,Hr)|0,Ut=Ut+Math.imul(Ar,Qn)|0,Ft=Ft+Math.imul(Ar,Hr)|0,tr=tr+Math.imul(lr,Wn)|0,Ut=Ut+Math.imul(lr,Kr)|0,Ut=Ut+Math.imul(cr,Wn)|0,Ft=Ft+Math.imul(cr,Kr)|0,tr=tr+Math.imul(gr,ri)|0,Ut=Ut+Math.imul(gr,Yr)|0,Ut=Ut+Math.imul($r,ri)|0,Ft=Ft+Math.imul($r,Yr)|0,tr=tr+Math.imul(vr,ni)|0,Ut=Ut+Math.imul(vr,Qr)|0,Ut=Ut+Math.imul(_r,ni)|0,Ft=Ft+Math.imul(_r,Qr)|0;var zi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(zi>>>26)|0,zi&=67108863,tr=Math.imul(Vn,Gn),Ut=Math.imul(Vn,qr),Ut=Ut+Math.imul(Lr,Gn)|0,Ft=Math.imul(Lr,qr),tr=tr+Math.imul(mn,Zn)|0,Ut=Ut+Math.imul(mn,Zr)|0,Ut=Ut+Math.imul(Gr,Zn)|0,Ft=Ft+Math.imul(Gr,Zr)|0,tr=tr+Math.imul(zr,Xn)|0,Ut=Ut+Math.imul(zr,Wr)|0,Ut=Ut+Math.imul(jr,Xn)|0,Ft=Ft+Math.imul(jr,Wr)|0,tr=tr+Math.imul(Rr,Jn)|0,Ut=Ut+Math.imul(Rr,Xr)|0,Ut=Ut+Math.imul(Ir,Jn)|0,Ft=Ft+Math.imul(Ir,Xr)|0,tr=tr+Math.imul(Er,Yn)|0,Ut=Ut+Math.imul(Er,Jr)|0,Ut=Ut+Math.imul(kr,Yn)|0,Ft=Ft+Math.imul(kr,Jr)|0,tr=tr+Math.imul(xr,Qn)|0,Ut=Ut+Math.imul(xr,Hr)|0,Ut=Ut+Math.imul(Cr,Qn)|0,Ft=Ft+Math.imul(Cr,Hr)|0,tr=tr+Math.imul(Sr,Wn)|0,Ut=Ut+Math.imul(Sr,Kr)|0,Ut=Ut+Math.imul(Ar,Wn)|0,Ft=Ft+Math.imul(Ar,Kr)|0,tr=tr+Math.imul(lr,ri)|0,Ut=Ut+Math.imul(lr,Yr)|0,Ut=Ut+Math.imul(cr,ri)|0,Ft=Ft+Math.imul(cr,Yr)|0,tr=tr+Math.imul(gr,ni)|0,Ut=Ut+Math.imul(gr,Qr)|0,Ut=Ut+Math.imul($r,ni)|0,Ft=Ft+Math.imul($r,Qr)|0,tr=tr+Math.imul(vr,ti)|0,Ut=Ut+Math.imul(vr,Fn)|0,Ut=Ut+Math.imul(_r,ti)|0,Ft=Ft+Math.imul(_r,Fn)|0;var Gi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,tr=Math.imul(Vn,Zn),Ut=Math.imul(Vn,Zr),Ut=Ut+Math.imul(Lr,Zn)|0,Ft=Math.imul(Lr,Zr),tr=tr+Math.imul(mn,Xn)|0,Ut=Ut+Math.imul(mn,Wr)|0,Ut=Ut+Math.imul(Gr,Xn)|0,Ft=Ft+Math.imul(Gr,Wr)|0,tr=tr+Math.imul(zr,Jn)|0,Ut=Ut+Math.imul(zr,Xr)|0,Ut=Ut+Math.imul(jr,Jn)|0,Ft=Ft+Math.imul(jr,Xr)|0,tr=tr+Math.imul(Rr,Yn)|0,Ut=Ut+Math.imul(Rr,Jr)|0,Ut=Ut+Math.imul(Ir,Yn)|0,Ft=Ft+Math.imul(Ir,Jr)|0,tr=tr+Math.imul(Er,Qn)|0,Ut=Ut+Math.imul(Er,Hr)|0,Ut=Ut+Math.imul(kr,Qn)|0,Ft=Ft+Math.imul(kr,Hr)|0,tr=tr+Math.imul(xr,Wn)|0,Ut=Ut+Math.imul(xr,Kr)|0,Ut=Ut+Math.imul(Cr,Wn)|0,Ft=Ft+Math.imul(Cr,Kr)|0,tr=tr+Math.imul(Sr,ri)|0,Ut=Ut+Math.imul(Sr,Yr)|0,Ut=Ut+Math.imul(Ar,ri)|0,Ft=Ft+Math.imul(Ar,Yr)|0,tr=tr+Math.imul(lr,ni)|0,Ut=Ut+Math.imul(lr,Qr)|0,Ut=Ut+Math.imul(cr,ni)|0,Ft=Ft+Math.imul(cr,Qr)|0,tr=tr+Math.imul(gr,ti)|0,Ut=Ut+Math.imul(gr,Fn)|0,Ut=Ut+Math.imul($r,ti)|0,Ft=Ft+Math.imul($r,Fn)|0;var Vi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,tr=Math.imul(Vn,Xn),Ut=Math.imul(Vn,Wr),Ut=Ut+Math.imul(Lr,Xn)|0,Ft=Math.imul(Lr,Wr),tr=tr+Math.imul(mn,Jn)|0,Ut=Ut+Math.imul(mn,Xr)|0,Ut=Ut+Math.imul(Gr,Jn)|0,Ft=Ft+Math.imul(Gr,Xr)|0,tr=tr+Math.imul(zr,Yn)|0,Ut=Ut+Math.imul(zr,Jr)|0,Ut=Ut+Math.imul(jr,Yn)|0,Ft=Ft+Math.imul(jr,Jr)|0,tr=tr+Math.imul(Rr,Qn)|0,Ut=Ut+Math.imul(Rr,Hr)|0,Ut=Ut+Math.imul(Ir,Qn)|0,Ft=Ft+Math.imul(Ir,Hr)|0,tr=tr+Math.imul(Er,Wn)|0,Ut=Ut+Math.imul(Er,Kr)|0,Ut=Ut+Math.imul(kr,Wn)|0,Ft=Ft+Math.imul(kr,Kr)|0,tr=tr+Math.imul(xr,ri)|0,Ut=Ut+Math.imul(xr,Yr)|0,Ut=Ut+Math.imul(Cr,ri)|0,Ft=Ft+Math.imul(Cr,Yr)|0,tr=tr+Math.imul(Sr,ni)|0,Ut=Ut+Math.imul(Sr,Qr)|0,Ut=Ut+Math.imul(Ar,ni)|0,Ft=Ft+Math.imul(Ar,Qr)|0,tr=tr+Math.imul(lr,ti)|0,Ut=Ut+Math.imul(lr,Fn)|0,Ut=Ut+Math.imul(cr,ti)|0,Ft=Ft+Math.imul(cr,Fn)|0;var Wi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,tr=Math.imul(Vn,Jn),Ut=Math.imul(Vn,Xr),Ut=Ut+Math.imul(Lr,Jn)|0,Ft=Math.imul(Lr,Xr),tr=tr+Math.imul(mn,Yn)|0,Ut=Ut+Math.imul(mn,Jr)|0,Ut=Ut+Math.imul(Gr,Yn)|0,Ft=Ft+Math.imul(Gr,Jr)|0,tr=tr+Math.imul(zr,Qn)|0,Ut=Ut+Math.imul(zr,Hr)|0,Ut=Ut+Math.imul(jr,Qn)|0,Ft=Ft+Math.imul(jr,Hr)|0,tr=tr+Math.imul(Rr,Wn)|0,Ut=Ut+Math.imul(Rr,Kr)|0,Ut=Ut+Math.imul(Ir,Wn)|0,Ft=Ft+Math.imul(Ir,Kr)|0,tr=tr+Math.imul(Er,ri)|0,Ut=Ut+Math.imul(Er,Yr)|0,Ut=Ut+Math.imul(kr,ri)|0,Ft=Ft+Math.imul(kr,Yr)|0,tr=tr+Math.imul(xr,ni)|0,Ut=Ut+Math.imul(xr,Qr)|0,Ut=Ut+Math.imul(Cr,ni)|0,Ft=Ft+Math.imul(Cr,Qr)|0,tr=tr+Math.imul(Sr,ti)|0,Ut=Ut+Math.imul(Sr,Fn)|0,Ut=Ut+Math.imul(Ar,ti)|0,Ft=Ft+Math.imul(Ar,Fn)|0;var Hi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,tr=Math.imul(Vn,Yn),Ut=Math.imul(Vn,Jr),Ut=Ut+Math.imul(Lr,Yn)|0,Ft=Math.imul(Lr,Jr),tr=tr+Math.imul(mn,Qn)|0,Ut=Ut+Math.imul(mn,Hr)|0,Ut=Ut+Math.imul(Gr,Qn)|0,Ft=Ft+Math.imul(Gr,Hr)|0,tr=tr+Math.imul(zr,Wn)|0,Ut=Ut+Math.imul(zr,Kr)|0,Ut=Ut+Math.imul(jr,Wn)|0,Ft=Ft+Math.imul(jr,Kr)|0,tr=tr+Math.imul(Rr,ri)|0,Ut=Ut+Math.imul(Rr,Yr)|0,Ut=Ut+Math.imul(Ir,ri)|0,Ft=Ft+Math.imul(Ir,Yr)|0,tr=tr+Math.imul(Er,ni)|0,Ut=Ut+Math.imul(Er,Qr)|0,Ut=Ut+Math.imul(kr,ni)|0,Ft=Ft+Math.imul(kr,Qr)|0,tr=tr+Math.imul(xr,ti)|0,Ut=Ut+Math.imul(xr,Fn)|0,Ut=Ut+Math.imul(Cr,ti)|0,Ft=Ft+Math.imul(Cr,Fn)|0;var Ki=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,tr=Math.imul(Vn,Qn),Ut=Math.imul(Vn,Hr),Ut=Ut+Math.imul(Lr,Qn)|0,Ft=Math.imul(Lr,Hr),tr=tr+Math.imul(mn,Wn)|0,Ut=Ut+Math.imul(mn,Kr)|0,Ut=Ut+Math.imul(Gr,Wn)|0,Ft=Ft+Math.imul(Gr,Kr)|0,tr=tr+Math.imul(zr,ri)|0,Ut=Ut+Math.imul(zr,Yr)|0,Ut=Ut+Math.imul(jr,ri)|0,Ft=Ft+Math.imul(jr,Yr)|0,tr=tr+Math.imul(Rr,ni)|0,Ut=Ut+Math.imul(Rr,Qr)|0,Ut=Ut+Math.imul(Ir,ni)|0,Ft=Ft+Math.imul(Ir,Qr)|0,tr=tr+Math.imul(Er,ti)|0,Ut=Ut+Math.imul(Er,Fn)|0,Ut=Ut+Math.imul(kr,ti)|0,Ft=Ft+Math.imul(kr,Fn)|0;var Zi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,tr=Math.imul(Vn,Wn),Ut=Math.imul(Vn,Kr),Ut=Ut+Math.imul(Lr,Wn)|0,Ft=Math.imul(Lr,Kr),tr=tr+Math.imul(mn,ri)|0,Ut=Ut+Math.imul(mn,Yr)|0,Ut=Ut+Math.imul(Gr,ri)|0,Ft=Ft+Math.imul(Gr,Yr)|0,tr=tr+Math.imul(zr,ni)|0,Ut=Ut+Math.imul(zr,Qr)|0,Ut=Ut+Math.imul(jr,ni)|0,Ft=Ft+Math.imul(jr,Qr)|0,tr=tr+Math.imul(Rr,ti)|0,Ut=Ut+Math.imul(Rr,Fn)|0,Ut=Ut+Math.imul(Ir,ti)|0,Ft=Ft+Math.imul(Ir,Fn)|0;var Xi=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,tr=Math.imul(Vn,ri),Ut=Math.imul(Vn,Yr),Ut=Ut+Math.imul(Lr,ri)|0,Ft=Math.imul(Lr,Yr),tr=tr+Math.imul(mn,ni)|0,Ut=Ut+Math.imul(mn,Qr)|0,Ut=Ut+Math.imul(Gr,ni)|0,Ft=Ft+Math.imul(Gr,Qr)|0,tr=tr+Math.imul(zr,ti)|0,Ut=Ut+Math.imul(zr,Fn)|0,Ut=Ut+Math.imul(jr,ti)|0,Ft=Ft+Math.imul(jr,Fn)|0;var Ji=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,tr=Math.imul(Vn,ni),Ut=Math.imul(Vn,Qr),Ut=Ut+Math.imul(Lr,ni)|0,Ft=Math.imul(Lr,Qr),tr=tr+Math.imul(mn,ti)|0,Ut=Ut+Math.imul(mn,Fn)|0,Ut=Ut+Math.imul(Gr,ti)|0,Ft=Ft+Math.imul(Gr,Fn)|0;var Ds=(yt+tr|0)+((Ut&8191)<<13)|0;yt=(Ft+(Ut>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,tr=Math.imul(Vn,ti),Ut=Math.imul(Vn,Fn),Ut=Ut+Math.imul(Lr,ti)|0,Ft=Math.imul(Lr,Fn);var Ns=(yt+tr|0)+((Ut&8191)<<13)|0;return yt=(Ft+(Ut>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,rr[0]=ei,rr[1]=Ti,rr[2]=ki,rr[3]=Oi,rr[4]=Ii,rr[5]=Pi,rr[6]=ji,rr[7]=Ui,rr[8]=zi,rr[9]=Gi,rr[10]=Vi,rr[11]=Wi,rr[12]=Hi,rr[13]=Ki,rr[14]=Zi,rr[15]=Xi,rr[16]=Ji,rr[17]=Ds,rr[18]=Ns,yt!==0&&(rr[19]=yt,ot.length++),ot};Math.imul||(ct=Qe);function wt(Vt,tt,Ye){Ye.negative=tt.negative^Vt.negative,Ye.length=Vt.length+tt.length;for(var ot=0,Et=0,er=0;er<Ye.length-1;er++){var rr=Et;Et=0;for(var yt=ot&67108863,tr=Math.min(er,tt.length-1),Ut=Math.max(0,er-Vt.length+1);Ut<=tr;Ut++){var Ft=er-Ut,sr=Vt.words[Ft]|0,vr=tt.words[Ut]|0,_r=sr*vr,dr=_r&67108863;rr=rr+(_r/67108864|0)|0,dr=dr+yt|0,yt=dr&67108863,rr=rr+(dr>>>26)|0,Et+=rr>>>26,rr&=67108863}Ye.words[er]=yt,ot=rr,rr=Et}return ot!==0?Ye.words[er]=ot:Ye.length--,Ye._strip()}function qt(Vt,tt,Ye){return wt(Vt,tt,Ye)}a.prototype.mulTo=function(tt,Ye){var ot,Et=this.length+tt.length;return this.length===10&&tt.length===10?ot=ct(this,tt,Ye):Et<63?ot=Qe(this,tt,Ye):Et<1024?ot=wt(this,tt,Ye):ot=qt(this,tt,Ye),ot},a.prototype.mul=function(tt){var Ye=new a(null);return Ye.words=new Array(this.length+tt.length),this.mulTo(tt,Ye)},a.prototype.mulf=function(tt){var Ye=new a(null);return Ye.words=new Array(this.length+tt.length),qt(this,tt,Ye)},a.prototype.imul=function(tt){return this.clone().mulTo(tt,this)},a.prototype.imuln=function(tt){var Ye=tt<0;Ye&&(tt=-tt),i(typeof tt=="number"),i(tt<67108864);for(var ot=0,Et=0;Et<this.length;Et++){var er=(this.words[Et]|0)*tt,rr=(er&67108863)+(ot&67108863);ot>>=26,ot+=er/67108864|0,ot+=rr>>>26,this.words[Et]=rr&67108863}return ot!==0&&(this.words[Et]=ot,this.length++),Ye?this.ineg():this},a.prototype.muln=function(tt){return this.clone().imuln(tt)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(tt){var Ye=Ze(tt);if(Ye.length===0)return new a(1);for(var ot=this,Et=0;Et<Ye.length&&Ye[Et]===0;Et++,ot=ot.sqr());if(++Et<Ye.length)for(var er=ot.sqr();Et<Ye.length;Et++,er=er.sqr())Ye[Et]!==0&&(ot=ot.mul(er));return ot},a.prototype.iushln=function(tt){i(typeof tt=="number"&&tt>=0);var Ye=tt%26,ot=(tt-Ye)/26,Et=67108863>>>26-Ye<<26-Ye,er;if(Ye!==0){var rr=0;for(er=0;er<this.length;er++){var yt=this.words[er]&Et,tr=(this.words[er]|0)-yt<<Ye;this.words[er]=tr|rr,rr=yt>>>26-Ye}rr&&(this.words[er]=rr,this.length++)}if(ot!==0){for(er=this.length-1;er>=0;er--)this.words[er+ot]=this.words[er];for(er=0;er<ot;er++)this.words[er]=0;this.length+=ot}return this._strip()},a.prototype.ishln=function(tt){return i(this.negative===0),this.iushln(tt)},a.prototype.iushrn=function(tt,Ye,ot){i(typeof tt=="number"&&tt>=0);var Et;Ye?Et=(Ye-Ye%26)/26:Et=0;var er=tt%26,rr=Math.min((tt-er)/26,this.length),yt=67108863^67108863>>>er<<er,tr=ot;if(Et-=rr,Et=Math.max(0,Et),tr){for(var Ut=0;Ut<rr;Ut++)tr.words[Ut]=this.words[Ut];tr.length=rr}if(rr!==0)if(this.length>rr)for(this.length-=rr,Ut=0;Ut<this.length;Ut++)this.words[Ut]=this.words[Ut+rr];else this.words[0]=0,this.length=1;var Ft=0;for(Ut=this.length-1;Ut>=0&&(Ft!==0||Ut>=Et);Ut--){var sr=this.words[Ut]|0;this.words[Ut]=Ft<<26-er|sr>>>er,Ft=sr&yt}return tr&&Ft!==0&&(tr.words[tr.length++]=Ft),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(tt,Ye,ot){return i(this.negative===0),this.iushrn(tt,Ye,ot)},a.prototype.shln=function(tt){return this.clone().ishln(tt)},a.prototype.ushln=function(tt){return this.clone().iushln(tt)},a.prototype.shrn=function(tt){return this.clone().ishrn(tt)},a.prototype.ushrn=function(tt){return this.clone().iushrn(tt)},a.prototype.testn=function(tt){i(typeof tt=="number"&&tt>=0);var Ye=tt%26,ot=(tt-Ye)/26,Et=1<<Ye;if(this.length<=ot)return!1;var er=this.words[ot];return!!(er&Et)},a.prototype.imaskn=function(tt){i(typeof tt=="number"&&tt>=0);var Ye=tt%26,ot=(tt-Ye)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=ot)return this;if(Ye!==0&&ot++,this.length=Math.min(ot,this.length),Ye!==0){var Et=67108863^67108863>>>Ye<<Ye;this.words[this.length-1]&=Et}return this._strip()},a.prototype.maskn=function(tt){return this.clone().imaskn(tt)},a.prototype.iaddn=function(tt){return i(typeof tt=="number"),i(tt<67108864),tt<0?this.isubn(-tt):this.negative!==0?this.length===1&&(this.words[0]|0)<=tt?(this.words[0]=tt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(tt),this.negative=1,this):this._iaddn(tt)},a.prototype._iaddn=function(tt){this.words[0]+=tt;for(var Ye=0;Ye<this.length&&this.words[Ye]>=67108864;Ye++)this.words[Ye]-=67108864,Ye===this.length-1?this.words[Ye+1]=1:this.words[Ye+1]++;return this.length=Math.max(this.length,Ye+1),this},a.prototype.isubn=function(tt){if(i(typeof tt=="number"),i(tt<67108864),tt<0)return this.iaddn(-tt);if(this.negative!==0)return this.negative=0,this.iaddn(tt),this.negative=1,this;if(this.words[0]-=tt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Ye=0;Ye<this.length&&this.words[Ye]<0;Ye++)this.words[Ye]+=67108864,this.words[Ye+1]-=1;return this._strip()},a.prototype.addn=function(tt){return this.clone().iaddn(tt)},a.prototype.subn=function(tt){return this.clone().isubn(tt)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(tt,Ye,ot){var Et=tt.length+ot,er;this._expand(Et);var rr,yt=0;for(er=0;er<tt.length;er++){rr=(this.words[er+ot]|0)+yt;var tr=(tt.words[er]|0)*Ye;rr-=tr&67108863,yt=(rr>>26)-(tr/67108864|0),this.words[er+ot]=rr&67108863}for(;er<this.length-ot;er++)rr=(this.words[er+ot]|0)+yt,yt=rr>>26,this.words[er+ot]=rr&67108863;if(yt===0)return this._strip();for(i(yt===-1),yt=0,er=0;er<this.length;er++)rr=-(this.words[er]|0)+yt,yt=rr>>26,this.words[er]=rr&67108863;return this.negative=1,this._strip()},a.prototype._wordDiv=function(tt,Ye){var ot=this.length-tt.length,Et=this.clone(),er=tt,rr=er.words[er.length-1]|0,yt=this._countBits(rr);ot=26-yt,ot!==0&&(er=er.ushln(ot),Et.iushln(ot),rr=er.words[er.length-1]|0);var tr=Et.length-er.length,Ut;if(Ye!=="mod"){Ut=new a(null),Ut.length=tr+1,Ut.words=new Array(Ut.length);for(var Ft=0;Ft<Ut.length;Ft++)Ut.words[Ft]=0}var sr=Et.clone()._ishlnsubmul(er,1,tr);sr.negative===0&&(Et=sr,Ut&&(Ut.words[tr]=1));for(var vr=tr-1;vr>=0;vr--){var _r=(Et.words[er.length+vr]|0)*67108864+(Et.words[er.length+vr-1]|0);for(_r=Math.min(_r/rr|0,67108863),Et._ishlnsubmul(er,_r,vr);Et.negative!==0;)_r--,Et.negative=0,Et._ishlnsubmul(er,1,vr),Et.isZero()||(Et.negative^=1);Ut&&(Ut.words[vr]=_r)}return Ut&&Ut._strip(),Et._strip(),Ye!=="div"&&ot!==0&&Et.iushrn(ot),{div:Ut||null,mod:Et}},a.prototype.divmod=function(tt,Ye,ot){if(i(!tt.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var Et,er,rr;return this.negative!==0&&tt.negative===0?(rr=this.neg().divmod(tt,Ye),Ye!=="mod"&&(Et=rr.div.neg()),Ye!=="div"&&(er=rr.mod.neg(),ot&&er.negative!==0&&er.iadd(tt)),{div:Et,mod:er}):this.negative===0&&tt.negative!==0?(rr=this.divmod(tt.neg(),Ye),Ye!=="mod"&&(Et=rr.div.neg()),{div:Et,mod:rr.mod}):this.negative&tt.negative?(rr=this.neg().divmod(tt.neg(),Ye),Ye!=="div"&&(er=rr.mod.neg(),ot&&er.negative!==0&&er.isub(tt)),{div:rr.div,mod:er}):tt.length>this.length||this.cmp(tt)<0?{div:new a(0),mod:this}:tt.length===1?Ye==="div"?{div:this.divn(tt.words[0]),mod:null}:Ye==="mod"?{div:null,mod:new a(this.modrn(tt.words[0]))}:{div:this.divn(tt.words[0]),mod:new a(this.modrn(tt.words[0]))}:this._wordDiv(tt,Ye)},a.prototype.div=function(tt){return this.divmod(tt,"div",!1).div},a.prototype.mod=function(tt){return this.divmod(tt,"mod",!1).mod},a.prototype.umod=function(tt){return this.divmod(tt,"mod",!0).mod},a.prototype.divRound=function(tt){var Ye=this.divmod(tt);if(Ye.mod.isZero())return Ye.div;var ot=Ye.div.negative!==0?Ye.mod.isub(tt):Ye.mod,Et=tt.ushrn(1),er=tt.andln(1),rr=ot.cmp(Et);return rr<0||er===1&&rr===0?Ye.div:Ye.div.negative!==0?Ye.div.isubn(1):Ye.div.iaddn(1)},a.prototype.modrn=function(tt){var Ye=tt<0;Ye&&(tt=-tt),i(tt<=67108863);for(var ot=(1<<26)%tt,Et=0,er=this.length-1;er>=0;er--)Et=(ot*Et+(this.words[er]|0))%tt;return Ye?-Et:Et},a.prototype.modn=function(tt){return this.modrn(tt)},a.prototype.idivn=function(tt){var Ye=tt<0;Ye&&(tt=-tt),i(tt<=67108863);for(var ot=0,Et=this.length-1;Et>=0;Et--){var er=(this.words[Et]|0)+ot*67108864;this.words[Et]=er/tt|0,ot=er%tt}return this._strip(),Ye?this.ineg():this},a.prototype.divn=function(tt){return this.clone().idivn(tt)},a.prototype.egcd=function(tt){i(tt.negative===0),i(!tt.isZero());var Ye=this,ot=tt.clone();Ye.negative!==0?Ye=Ye.umod(tt):Ye=Ye.clone();for(var Et=new a(1),er=new a(0),rr=new a(0),yt=new a(1),tr=0;Ye.isEven()&&ot.isEven();)Ye.iushrn(1),ot.iushrn(1),++tr;for(var Ut=ot.clone(),Ft=Ye.clone();!Ye.isZero();){for(var sr=0,vr=1;!(Ye.words[0]&vr)&&sr<26;++sr,vr<<=1);if(sr>0)for(Ye.iushrn(sr);sr-- >0;)(Et.isOdd()||er.isOdd())&&(Et.iadd(Ut),er.isub(Ft)),Et.iushrn(1),er.iushrn(1);for(var _r=0,dr=1;!(ot.words[0]&dr)&&_r<26;++_r,dr<<=1);if(_r>0)for(ot.iushrn(_r);_r-- >0;)(rr.isOdd()||yt.isOdd())&&(rr.iadd(Ut),yt.isub(Ft)),rr.iushrn(1),yt.iushrn(1);Ye.cmp(ot)>=0?(Ye.isub(ot),Et.isub(rr),er.isub(yt)):(ot.isub(Ye),rr.isub(Et),yt.isub(er))}return{a:rr,b:yt,gcd:ot.iushln(tr)}},a.prototype._invmp=function(tt){i(tt.negative===0),i(!tt.isZero());var Ye=this,ot=tt.clone();Ye.negative!==0?Ye=Ye.umod(tt):Ye=Ye.clone();for(var Et=new a(1),er=new a(0),rr=ot.clone();Ye.cmpn(1)>0&&ot.cmpn(1)>0;){for(var yt=0,tr=1;!(Ye.words[0]&tr)&&yt<26;++yt,tr<<=1);if(yt>0)for(Ye.iushrn(yt);yt-- >0;)Et.isOdd()&&Et.iadd(rr),Et.iushrn(1);for(var Ut=0,Ft=1;!(ot.words[0]&Ft)&&Ut<26;++Ut,Ft<<=1);if(Ut>0)for(ot.iushrn(Ut);Ut-- >0;)er.isOdd()&&er.iadd(rr),er.iushrn(1);Ye.cmp(ot)>=0?(Ye.isub(ot),Et.isub(er)):(ot.isub(Ye),er.isub(Et))}var sr;return Ye.cmpn(1)===0?sr=Et:sr=er,sr.cmpn(0)<0&&sr.iadd(tt),sr},a.prototype.gcd=function(tt){if(this.isZero())return tt.abs();if(tt.isZero())return this.abs();var Ye=this.clone(),ot=tt.clone();Ye.negative=0,ot.negative=0;for(var Et=0;Ye.isEven()&&ot.isEven();Et++)Ye.iushrn(1),ot.iushrn(1);do{for(;Ye.isEven();)Ye.iushrn(1);for(;ot.isEven();)ot.iushrn(1);var er=Ye.cmp(ot);if(er<0){var rr=Ye;Ye=ot,ot=rr}else if(er===0||ot.cmpn(1)===0)break;Ye.isub(ot)}while(!0);return ot.iushln(Et)},a.prototype.invm=function(tt){return this.egcd(tt).a.umod(tt)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(tt){return this.words[0]&tt},a.prototype.bincn=function(tt){i(typeof tt=="number");var Ye=tt%26,ot=(tt-Ye)/26,Et=1<<Ye;if(this.length<=ot)return this._expand(ot+1),this.words[ot]|=Et,this;for(var er=Et,rr=ot;er!==0&&rr<this.length;rr++){var yt=this.words[rr]|0;yt+=er,er=yt>>>26,yt&=67108863,this.words[rr]=yt}return er!==0&&(this.words[rr]=er,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(tt){var Ye=tt<0;if(this.negative!==0&&!Ye)return-1;if(this.negative===0&&Ye)return 1;this._strip();var ot;if(this.length>1)ot=1;else{Ye&&(tt=-tt),i(tt<=67108863,"Number is too big");var Et=this.words[0]|0;ot=Et===tt?0:Et<tt?-1:1}return this.negative!==0?-ot|0:ot},a.prototype.cmp=function(tt){if(this.negative!==0&&tt.negative===0)return-1;if(this.negative===0&&tt.negative!==0)return 1;var Ye=this.ucmp(tt);return this.negative!==0?-Ye|0:Ye},a.prototype.ucmp=function(tt){if(this.length>tt.length)return 1;if(this.length<tt.length)return-1;for(var Ye=0,ot=this.length-1;ot>=0;ot--){var Et=this.words[ot]|0,er=tt.words[ot]|0;if(Et!==er){Et<er?Ye=-1:Et>er&&(Ye=1);break}}return Ye},a.prototype.gtn=function(tt){return this.cmpn(tt)===1},a.prototype.gt=function(tt){return this.cmp(tt)===1},a.prototype.gten=function(tt){return this.cmpn(tt)>=0},a.prototype.gte=function(tt){return this.cmp(tt)>=0},a.prototype.ltn=function(tt){return this.cmpn(tt)===-1},a.prototype.lt=function(tt){return this.cmp(tt)===-1},a.prototype.lten=function(tt){return this.cmpn(tt)<=0},a.prototype.lte=function(tt){return this.cmp(tt)<=0},a.prototype.eqn=function(tt){return this.cmpn(tt)===0},a.prototype.eq=function(tt){return this.cmp(tt)===0},a.red=function(tt){return new ar(tt)},a.prototype.toRed=function(tt){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),tt.convertTo(this)._forceRed(tt)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(tt){return this.red=tt,this},a.prototype.forceRed=function(tt){return i(!this.red,"Already a number in reduction context"),this._forceRed(tt)},a.prototype.redAdd=function(tt){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,tt)},a.prototype.redIAdd=function(tt){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,tt)},a.prototype.redSub=function(tt){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,tt)},a.prototype.redISub=function(tt){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,tt)},a.prototype.redShl=function(tt){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,tt)},a.prototype.redMul=function(tt){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,tt),this.red.mul(this,tt)},a.prototype.redIMul=function(tt){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,tt),this.red.imul(this,tt)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(tt){return i(this.red&&!tt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,tt)};var nr={k256:null,p224:null,p192:null,p25519:null};function ir(Vt,tt){this.name=Vt,this.p=new a(tt,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}ir.prototype._tmp=function(){var tt=new a(null);return tt.words=new Array(Math.ceil(this.n/13)),tt},ir.prototype.ireduce=function(tt){var Ye=tt,ot;do this.split(Ye,this.tmp),Ye=this.imulK(Ye),Ye=Ye.iadd(this.tmp),ot=Ye.bitLength();while(ot>this.n);var Et=ot<this.n?-1:Ye.ucmp(this.p);return Et===0?(Ye.words[0]=0,Ye.length=1):Et>0?Ye.isub(this.p):Ye.strip!==void 0?Ye.strip():Ye._strip(),Ye},ir.prototype.split=function(tt,Ye){tt.iushrn(this.n,0,Ye)},ir.prototype.imulK=function(tt){return tt.imul(this.k)};function or(){ir.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(or,ir),or.prototype.split=function(tt,Ye){for(var ot=4194303,Et=Math.min(tt.length,9),er=0;er<Et;er++)Ye.words[er]=tt.words[er];if(Ye.length=Et,tt.length<=9){tt.words[0]=0,tt.length=1;return}var rr=tt.words[9];for(Ye.words[Ye.length++]=rr&ot,er=10;er<tt.length;er++){var yt=tt.words[er]|0;tt.words[er-10]=(yt&ot)<<4|rr>>>22,rr=yt}rr>>>=22,tt.words[er-10]=rr,rr===0&&tt.length>10?tt.length-=10:tt.length-=9},or.prototype.imulK=function(tt){tt.words[tt.length]=0,tt.words[tt.length+1]=0,tt.length+=2;for(var Ye=0,ot=0;ot<tt.length;ot++){var Et=tt.words[ot]|0;Ye+=Et*977,tt.words[ot]=Ye&67108863,Ye=Et*64+(Ye/67108864|0)}return tt.words[tt.length-1]===0&&(tt.length--,tt.words[tt.length-1]===0&&tt.length--),tt};function ur(){ir.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ur,ir);function hr(){ir.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(hr,ir);function fr(){ir.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(fr,ir),fr.prototype.imulK=function(tt){for(var Ye=0,ot=0;ot<tt.length;ot++){var Et=(tt.words[ot]|0)*19+Ye,er=Et&67108863;Et>>>=26,tt.words[ot]=er,Ye=Et}return Ye!==0&&(tt.words[tt.length++]=Ye),tt},a._prime=function(tt){if(nr[tt])return nr[tt];var Ye;if(tt==="k256")Ye=new or;else if(tt==="p224")Ye=new ur;else if(tt==="p192")Ye=new hr;else if(tt==="p25519")Ye=new fr;else throw new Error("Unknown prime "+tt);return nr[tt]=Ye,Ye};function ar(Vt){if(typeof Vt=="string"){var tt=a._prime(Vt);this.m=tt.p,this.prime=tt}else i(Vt.gtn(1),"modulus must be greater than 1"),this.m=Vt,this.prime=null}ar.prototype._verify1=function(tt){i(tt.negative===0,"red works only with positives"),i(tt.red,"red works only with red numbers")},ar.prototype._verify2=function(tt,Ye){i((tt.negative|Ye.negative)===0,"red works only with positives"),i(tt.red&&tt.red===Ye.red,"red works only with red numbers")},ar.prototype.imod=function(tt){return this.prime?this.prime.ireduce(tt)._forceRed(this):(B(tt,tt.umod(this.m)._forceRed(this)),tt)},ar.prototype.neg=function(tt){return tt.isZero()?tt.clone():this.m.sub(tt)._forceRed(this)},ar.prototype.add=function(tt,Ye){this._verify2(tt,Ye);var ot=tt.add(Ye);return ot.cmp(this.m)>=0&&ot.isub(this.m),ot._forceRed(this)},ar.prototype.iadd=function(tt,Ye){this._verify2(tt,Ye);var ot=tt.iadd(Ye);return ot.cmp(this.m)>=0&&ot.isub(this.m),ot},ar.prototype.sub=function(tt,Ye){this._verify2(tt,Ye);var ot=tt.sub(Ye);return ot.cmpn(0)<0&&ot.iadd(this.m),ot._forceRed(this)},ar.prototype.isub=function(tt,Ye){this._verify2(tt,Ye);var ot=tt.isub(Ye);return ot.cmpn(0)<0&&ot.iadd(this.m),ot},ar.prototype.shl=function(tt,Ye){return this._verify1(tt),this.imod(tt.ushln(Ye))},ar.prototype.imul=function(tt,Ye){return this._verify2(tt,Ye),this.imod(tt.imul(Ye))},ar.prototype.mul=function(tt,Ye){return this._verify2(tt,Ye),this.imod(tt.mul(Ye))},ar.prototype.isqr=function(tt){return this.imul(tt,tt.clone())},ar.prototype.sqr=function(tt){return this.mul(tt,tt)},ar.prototype.sqrt=function(tt){if(tt.isZero())return tt.clone();var Ye=this.m.andln(3);if(i(Ye%2===1),Ye===3){var ot=this.m.add(new a(1)).iushrn(2);return this.pow(tt,ot)}for(var Et=this.m.subn(1),er=0;!Et.isZero()&&Et.andln(1)===0;)er++,Et.iushrn(1);i(!Et.isZero());var rr=new a(1).toRed(this),yt=rr.redNeg(),tr=this.m.subn(1).iushrn(1),Ut=this.m.bitLength();for(Ut=new a(2*Ut*Ut).toRed(this);this.pow(Ut,tr).cmp(yt)!==0;)Ut.redIAdd(yt);for(var Ft=this.pow(Ut,Et),sr=this.pow(tt,Et.addn(1).iushrn(1)),vr=this.pow(tt,Et),_r=er;vr.cmp(rr)!==0;){for(var dr=vr,gr=0;dr.cmp(rr)!==0;gr++)dr=dr.redSqr();i(gr<_r);var $r=this.pow(Ft,new a(1).iushln(_r-gr-1));sr=sr.redMul($r),Ft=$r.redSqr(),vr=vr.redMul(Ft),_r=gr}return sr},ar.prototype.invm=function(tt){var Ye=tt._invmp(this.m);return Ye.negative!==0?(Ye.negative=0,this.imod(Ye).redNeg()):this.imod(Ye)},ar.prototype.pow=function(tt,Ye){if(Ye.isZero())return new a(1).toRed(this);if(Ye.cmpn(1)===0)return tt.clone();var ot=4,Et=new Array(1<<ot);Et[0]=new a(1).toRed(this),Et[1]=tt;for(var er=2;er<Et.length;er++)Et[er]=this.mul(Et[er-1],tt);var rr=Et[0],yt=0,tr=0,Ut=Ye.bitLength()%26;for(Ut===0&&(Ut=26),er=Ye.length-1;er>=0;er--){for(var Ft=Ye.words[er],sr=Ut-1;sr>=0;sr--){var vr=Ft>>sr&1;if(rr!==Et[0]&&(rr=this.sqr(rr)),vr===0&&yt===0){tr=0;continue}yt<<=1,yt|=vr,tr++,!(tr!==ot&&(er!==0||sr!==0))&&(rr=this.mul(rr,Et[yt]),tr=0,yt=0)}Ut=26}return rr},ar.prototype.convertTo=function(tt){var Ye=tt.umod(this.m);return Ye===tt?Ye.clone():Ye},ar.prototype.convertFrom=function(tt){var Ye=tt.clone();return Ye.red=null,Ye},a.mont=function(tt){return new Lt(tt)};function Lt(Vt){ar.call(this,Vt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Lt,ar),Lt.prototype.convertTo=function(tt){return this.imod(tt.ushln(this.shift))},Lt.prototype.convertFrom=function(tt){var Ye=this.imod(tt.mul(this.rinv));return Ye.red=null,Ye},Lt.prototype.imul=function(tt,Ye){if(tt.isZero()||Ye.isZero())return tt.words[0]=0,tt.length=1,tt;var ot=tt.imul(Ye),Et=ot.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),er=ot.isub(Et).iushrn(this.shift),rr=er;return er.cmp(this.m)>=0?rr=er.isub(this.m):er.cmpn(0)<0&&(rr=er.iadd(this.m)),rr._forceRed(this)},Lt.prototype.mul=function(tt,Ye){if(tt.isZero()||Ye.isZero())return new a(0)._forceRed(this);var ot=tt.mul(Ye),Et=ot.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),er=ot.isub(Et).iushrn(this.shift),rr=er;return er.cmp(this.m)>=0?rr=er.isub(this.m):er.cmpn(0)<0&&(rr=er.iadd(this.m)),rr._forceRed(this)},Lt.prototype.invm=function(tt){var Ye=this.imod(tt._invmp(this.m).mul(this.r2));return Ye._forceRed(this)}})(t,commonjsGlobal$1)})(bn$3);var bnExports=bn$3.exports;const BN=getDefaultExportFromCjs$2(bnExports);/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var EXP_LIMIT$1=9e15,MAX_DIGITS$1=1e9,NUMERALS$1="0123456789abcdef",LN10$1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI$1="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS$1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:EXP_LIMIT$1,crypto:!1},inexact$1,quadrant$1,external$1=!0,decimalError$1="[DecimalError] ",invalidArgument$1=decimalError$1+"Invalid argument: ",precisionLimitExceeded$1=decimalError$1+"Precision limit exceeded",cryptoUnavailable$1=decimalError$1+"crypto unavailable",tag$1="[object Decimal]",mathfloor$1=Math.floor,mathpow$1=Math.pow,isBinary$1=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex$3=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal$1=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal$1=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE$1=1e7,LOG_BASE$1=7,MAX_SAFE_INTEGER$3=9007199254740991,LN10_PRECISION$1=LN10$1.length-1,PI_PRECISION$1=PI$1.length-1,P$3={toStringTag:tag$1};P$3.absoluteValue=P$3.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),finalise$1(t)};P$3.ceil=function(){return finalise$1(new this.constructor(this),this.e+1,2)};P$3.clampedTo=P$3.clamp=function(t,e){var n,i=this,s=i.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(invalidArgument$1+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new s(i)};P$3.comparedTo=P$3.cmp=function(t){var e,n,i,s,a=this,l=a.d,f=(t=new a.constructor(t)).d,p=a.s,C=t.s;if(!l||!f)return!p||!C?NaN:p!==C?p:l===f?0:!l^p<0?1:-1;if(!l[0]||!f[0])return l[0]?p:f[0]?-C:0;if(p!==C)return p;if(a.e!==t.e)return a.e>t.e^p<0?1:-1;for(i=l.length,s=f.length,e=0,n=i<s?i:s;e<n;++e)if(l[e]!==f[e])return l[e]>f[e]^p<0?1:-1;return i===s?0:i>s^p<0?1:-1};P$3.cosine=P$3.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+LOG_BASE$1,i.rounding=1,n=cosine$1(i,toLessThanHalfPi$1(i,n)),i.precision=t,i.rounding=e,finalise$1(quadrant$1==2||quadrant$1==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};P$3.cubeRoot=P$3.cbrt=function(){var t,e,n,i,s,a,l,f,p,C,B=this,N=B.constructor;if(!B.isFinite()||B.isZero())return new N(B);for(external$1=!1,a=B.s*mathpow$1(B.s*B,1/3),!a||Math.abs(a)==1/0?(n=digitsToString$1(B.d),t=B.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=mathpow$1(n,1/3),t=mathfloor$1((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new N(n),i.s=B.s):i=new N(a.toString()),l=(t=N.precision)+3;;)if(f=i,p=f.times(f).times(f),C=p.plus(B),i=divide$2(C.plus(B).times(f),C.plus(p),l+2,1),digitsToString$1(f.d).slice(0,l)===(n=digitsToString$1(i.d)).slice(0,l))if(n=n.slice(l-3,l+1),n=="9999"||!s&&n=="4999"){if(!s&&(finalise$1(f,t+1,0),f.times(f).times(f).eq(B))){i=f;break}l+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(finalise$1(i,t+1,1),e=!i.times(i).times(i).eq(B));break}return external$1=!0,finalise$1(i,t,N.rounding,e)};P$3.decimalPlaces=P$3.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-mathfloor$1(this.e/LOG_BASE$1))*LOG_BASE$1,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};P$3.dividedBy=P$3.div=function(t){return divide$2(this,new this.constructor(t))};P$3.dividedToIntegerBy=P$3.divToInt=function(t){var e=this,n=e.constructor;return finalise$1(divide$2(e,new n(t),0,1,1),n.precision,n.rounding)};P$3.equals=P$3.eq=function(t){return this.cmp(t)===0};P$3.floor=function(){return finalise$1(new this.constructor(this),this.e+1,3)};P$3.greaterThan=P$3.gt=function(t){return this.cmp(t)>0};P$3.greaterThanOrEqualTo=P$3.gte=function(t){var e=this.cmp(t);return e==1||e===0};P$3.hyperbolicCosine=P$3.cosh=function(){var t,e,n,i,s,a=this,l=a.constructor,f=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return f;n=l.precision,i=l.rounding,l.precision=n+Math.max(a.e,a.sd())+4,l.rounding=1,s=a.d.length,s<32?(t=Math.ceil(s/3),e=(1/tinyPow$1(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=taylorSeries$1(l,1,a.times(e),new l(1),!0);for(var p,C=t,B=new l(8);C--;)p=a.times(a),a=f.minus(p.times(B.minus(p.times(B))));return finalise$1(a,l.precision=n,l.rounding=i,!0)};P$3.hyperbolicSine=P$3.sinh=function(){var t,e,n,i,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<3)s=taylorSeries$1(a,2,s,s,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,s=s.times(1/tinyPow$1(5,t)),s=taylorSeries$1(a,2,s,s,!0);for(var l,f=new a(5),p=new a(16),C=new a(20);t--;)l=s.times(s),s=s.times(f.plus(l.times(p.times(l).plus(C))))}return a.precision=e,a.rounding=n,finalise$1(s,e,n,!0)};P$3.hyperbolicTangent=P$3.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,divide$2(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};P$3.inverseCosine=P$3.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),i=e.precision,s=e.rounding;return n!==-1?n===0?t.isNeg()?getPi$1(e,i,s):new e(0):new e(NaN):t.isZero()?getPi$1(e,i+4,s).times(.5):(e.precision=i+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=i,e.rounding=s,t.times(2))};P$3.inverseHyperbolicCosine=P$3.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,external$1=!1,n=n.times(n).minus(1).sqrt().plus(n),external$1=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};P$3.inverseHyperbolicSine=P$3.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,external$1=!1,n=n.times(n).plus(1).sqrt().plus(n),external$1=!0,i.precision=t,i.rounding=e,n.ln())};P$3.inverseHyperbolicTangent=P$3.atanh=function(){var t,e,n,i,s=this,a=s.constructor;return s.isFinite()?s.e>=0?new a(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=a.precision,e=a.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?finalise$1(new a(s),t,e,!0):(a.precision=n=i-s.e,s=divide$2(s.plus(1),new a(1).minus(s),n+t,1),a.precision=t+4,a.rounding=1,s=s.ln(),a.precision=t,a.rounding=e,s.times(.5))):new a(NaN)};P$3.inverseSine=P$3.asin=function(){var t,e,n,i,s=this,a=s.constructor;return s.isZero()?new a(s):(e=s.abs().cmp(1),n=a.precision,i=a.rounding,e!==-1?e===0?(t=getPi$1(a,n+4,i).times(.5),t.s=s.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,s=s.div(new a(1).minus(s.times(s)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=i,s.times(2)))};P$3.inverseTangent=P$3.atan=function(){var t,e,n,i,s,a,l,f,p,C=this,B=C.constructor,N=B.precision,le=B.rounding;if(C.isFinite()){if(C.isZero())return new B(C);if(C.abs().eq(1)&&N+4<=PI_PRECISION$1)return l=getPi$1(B,N+4,le).times(.25),l.s=C.s,l}else{if(!C.s)return new B(NaN);if(N+4<=PI_PRECISION$1)return l=getPi$1(B,N+4,le).times(.5),l.s=C.s,l}for(B.precision=f=N+10,B.rounding=1,n=Math.min(28,f/LOG_BASE$1+2|0),t=n;t;--t)C=C.div(C.times(C).plus(1).sqrt().plus(1));for(external$1=!1,e=Math.ceil(f/LOG_BASE$1),i=1,p=C.times(C),l=new B(C),s=C;t!==-1;)if(s=s.times(p),a=l.minus(s.div(i+=2)),s=s.times(p),l=a.plus(s.div(i+=2)),l.d[e]!==void 0)for(t=e;l.d[t]===a.d[t]&&t--;);return n&&(l=l.times(2<<n-1)),external$1=!0,finalise$1(l,B.precision=N,B.rounding=le,!0)};P$3.isFinite=function(){return!!this.d};P$3.isInteger=P$3.isInt=function(){return!!this.d&&mathfloor$1(this.e/LOG_BASE$1)>this.d.length-2};P$3.isNaN=function(){return!this.s};P$3.isNegative=P$3.isNeg=function(){return this.s<0};P$3.isPositive=P$3.isPos=function(){return this.s>0};P$3.isZero=function(){return!!this.d&&this.d[0]===0};P$3.lessThan=P$3.lt=function(t){return this.cmp(t)<0};P$3.lessThanOrEqualTo=P$3.lte=function(t){return this.cmp(t)<1};P$3.logarithm=P$3.log=function(t){var e,n,i,s,a,l,f,p,C=this,B=C.constructor,N=B.precision,le=B.rounding,Ee=5;if(t==null)t=new B(10),e=!0;else{if(t=new B(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new B(NaN);e=t.eq(10)}if(n=C.d,C.s<0||!n||!n[0]||C.eq(1))return new B(n&&!n[0]?-1/0:C.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(s=n[0];s%10===0;)s/=10;a=s!==1}if(external$1=!1,f=N+Ee,l=naturalLogarithm$1(C,f),i=e?getLn10$1(B,f+10):naturalLogarithm$1(t,f),p=divide$2(l,i,f,1),checkRoundingDigits$1(p.d,s=N,le))do if(f+=10,l=naturalLogarithm$1(C,f),i=e?getLn10$1(B,f+10):naturalLogarithm$1(t,f),p=divide$2(l,i,f,1),!a){+digitsToString$1(p.d).slice(s+1,s+15)+1==1e14&&(p=finalise$1(p,N+1,0));break}while(checkRoundingDigits$1(p.d,s+=10,le));return external$1=!0,finalise$1(p,N,le)};P$3.minus=P$3.sub=function(t){var e,n,i,s,a,l,f,p,C,B,N,le,Ee=this,Ue=Ee.constructor;if(t=new Ue(t),!Ee.d||!t.d)return!Ee.s||!t.s?t=new Ue(NaN):Ee.d?t.s=-t.s:t=new Ue(t.d||Ee.s!==t.s?Ee:NaN),t;if(Ee.s!=t.s)return t.s=-t.s,Ee.plus(t);if(C=Ee.d,le=t.d,f=Ue.precision,p=Ue.rounding,!C[0]||!le[0]){if(le[0])t.s=-t.s;else if(C[0])t=new Ue(Ee);else return new Ue(p===3?-0:0);return external$1?finalise$1(t,f,p):t}if(n=mathfloor$1(t.e/LOG_BASE$1),B=mathfloor$1(Ee.e/LOG_BASE$1),C=C.slice(),a=B-n,a){for(N=a<0,N?(e=C,a=-a,l=le.length):(e=le,n=B,l=C.length),i=Math.max(Math.ceil(f/LOG_BASE$1),l)+2,a>i&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for(i=C.length,l=le.length,N=i<l,N&&(l=i),i=0;i<l;i++)if(C[i]!=le[i]){N=C[i]<le[i];break}a=0}for(N&&(e=C,C=le,le=e,t.s=-t.s),l=C.length,i=le.length-l;i>0;--i)C[l++]=0;for(i=le.length;i>a;){if(C[--i]<le[i]){for(s=i;s&&C[--s]===0;)C[s]=BASE$1-1;--C[s],C[i]+=BASE$1}C[i]-=le[i]}for(;C[--l]===0;)C.pop();for(;C[0]===0;C.shift())--n;return C[0]?(t.d=C,t.e=getBase10Exponent$1(C,n),external$1?finalise$1(t,f,p):t):new Ue(p===3?-0:0)};P$3.modulo=P$3.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?finalise$1(new i(n),i.precision,i.rounding):(external$1=!1,i.modulo==9?(e=divide$2(n,t.abs(),0,3,1),e.s*=t.s):e=divide$2(n,t,0,i.modulo,1),e=e.times(t),external$1=!0,n.minus(e))};P$3.naturalExponential=P$3.exp=function(){return naturalExponential$1(this)};P$3.naturalLogarithm=P$3.ln=function(){return naturalLogarithm$1(this)};P$3.negated=P$3.neg=function(){var t=new this.constructor(this);return t.s=-t.s,finalise$1(t)};P$3.plus=P$3.add=function(t){var e,n,i,s,a,l,f,p,C,B,N=this,le=N.constructor;if(t=new le(t),!N.d||!t.d)return!N.s||!t.s?t=new le(NaN):N.d||(t=new le(t.d||N.s===t.s?N:NaN)),t;if(N.s!=t.s)return t.s=-t.s,N.minus(t);if(C=N.d,B=t.d,f=le.precision,p=le.rounding,!C[0]||!B[0])return B[0]||(t=new le(N)),external$1?finalise$1(t,f,p):t;if(a=mathfloor$1(N.e/LOG_BASE$1),i=mathfloor$1(t.e/LOG_BASE$1),C=C.slice(),s=a-i,s){for(s<0?(n=C,s=-s,l=B.length):(n=B,i=a,l=C.length),a=Math.ceil(f/LOG_BASE$1),l=a>l?a+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=C.length,s=B.length,l-s<0&&(s=l,n=B,B=C,C=n),e=0;s;)e=(C[--s]=C[s]+B[s]+e)/BASE$1|0,C[s]%=BASE$1;for(e&&(C.unshift(e),++i),l=C.length;C[--l]==0;)C.pop();return t.d=C,t.e=getBase10Exponent$1(C,i),external$1?finalise$1(t,f,p):t};P$3.precision=P$3.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument$1+t);return n.d?(e=getPrecision$1(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};P$3.round=function(){var t=this,e=t.constructor;return finalise$1(new e(t),t.e+1,e.rounding)};P$3.sine=P$3.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+LOG_BASE$1,i.rounding=1,n=sine$1(i,toLessThanHalfPi$1(i,n)),i.precision=t,i.rounding=e,finalise$1(quadrant$1>2?n.neg():n,t,e,!0)):new i(NaN)};P$3.squareRoot=P$3.sqrt=function(){var t,e,n,i,s,a,l=this,f=l.d,p=l.e,C=l.s,B=l.constructor;if(C!==1||!f||!f[0])return new B(!C||C<0&&(!f||f[0])?NaN:f?l:1/0);for(external$1=!1,C=Math.sqrt(+l),C==0||C==1/0?(e=digitsToString$1(f),(e.length+p)%2==0&&(e+="0"),C=Math.sqrt(e),p=mathfloor$1((p+1)/2)-(p<0||p%2),C==1/0?e="5e"+p:(e=C.toExponential(),e=e.slice(0,e.indexOf("e")+1)+p),i=new B(e)):i=new B(C.toString()),n=(p=B.precision)+3;;)if(a=i,i=a.plus(divide$2(l,a,n+2,1)).times(.5),digitsToString$1(a.d).slice(0,n)===(e=digitsToString$1(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!s&&e=="4999"){if(!s&&(finalise$1(a,p+1,0),a.times(a).eq(l))){i=a;break}n+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(finalise$1(i,p+1,1),t=!i.times(i).eq(l));break}return external$1=!0,finalise$1(i,p,B.rounding,t)};P$3.tangent=P$3.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=divide$2(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,finalise$1(quadrant$1==2||quadrant$1==4?n.neg():n,t,e,!0)):new i(NaN)};P$3.times=P$3.mul=function(t){var e,n,i,s,a,l,f,p,C,B=this,N=B.constructor,le=B.d,Ee=(t=new N(t)).d;if(t.s*=B.s,!le||!le[0]||!Ee||!Ee[0])return new N(!t.s||le&&!le[0]&&!Ee||Ee&&!Ee[0]&&!le?NaN:!le||!Ee?t.s/0:t.s*0);for(n=mathfloor$1(B.e/LOG_BASE$1)+mathfloor$1(t.e/LOG_BASE$1),p=le.length,C=Ee.length,p<C&&(a=le,le=Ee,Ee=a,l=p,p=C,C=l),a=[],l=p+C,i=l;i--;)a.push(0);for(i=C;--i>=0;){for(e=0,s=p+i;s>i;)f=a[s]+Ee[i]*le[s-i-1]+e,a[s--]=f%BASE$1|0,e=f/BASE$1|0;a[s]=(a[s]+e)%BASE$1|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=getBase10Exponent$1(a,n),external$1?finalise$1(t,N.precision,N.rounding):t};P$3.toBinary=function(t,e){return toStringBinary$1(this,2,t,e)};P$3.toDecimalPlaces=P$3.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(checkInt32$1(t,0,MAX_DIGITS$1),e===void 0?e=i.rounding:checkInt32$1(e,0,8),finalise$1(n,t+n.e+1,e))};P$3.toExponential=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=finiteToString$1(i,!0):(checkInt32$1(t,0,MAX_DIGITS$1),e===void 0?e=s.rounding:checkInt32$1(e,0,8),i=finalise$1(new s(i),t+1,e),n=finiteToString$1(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};P$3.toFixed=function(t,e){var n,i,s=this,a=s.constructor;return t===void 0?n=finiteToString$1(s):(checkInt32$1(t,0,MAX_DIGITS$1),e===void 0?e=a.rounding:checkInt32$1(e,0,8),i=finalise$1(new a(s),t+s.e+1,e),n=finiteToString$1(i,!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n};P$3.toFraction=function(t){var e,n,i,s,a,l,f,p,C,B,N,le,Ee=this,Ue=Ee.d,ze=Ee.constructor;if(!Ue)return new ze(Ee);if(C=n=new ze(1),i=p=new ze(0),e=new ze(i),a=e.e=getPrecision$1(Ue)-Ee.e-1,l=a%LOG_BASE$1,e.d[0]=mathpow$1(10,l<0?LOG_BASE$1+l:l),t==null)t=a>0?e:C;else{if(f=new ze(t),!f.isInt()||f.lt(C))throw Error(invalidArgument$1+f);t=f.gt(e)?a>0?e:C:f}for(external$1=!1,f=new ze(digitsToString$1(Ue)),B=ze.precision,ze.precision=a=Ue.length*LOG_BASE$1*2;N=divide$2(f,e,0,1,1),s=n.plus(N.times(i)),s.cmp(t)!=1;)n=i,i=s,s=C,C=p.plus(N.times(s)),p=s,s=e,e=f.minus(N.times(s)),f=s;return s=divide$2(t.minus(n),i,0,1,1),p=p.plus(s.times(C)),n=n.plus(s.times(i)),p.s=C.s=Ee.s,le=divide$2(C,i,a,1).minus(Ee).abs().cmp(divide$2(p,n,a,1).minus(Ee).abs())<1?[C,i]:[p,n],ze.precision=B,external$1=!0,le};P$3.toHexadecimal=P$3.toHex=function(t,e){return toStringBinary$1(this,16,t,e)};P$3.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:checkInt32$1(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(external$1=!1,n=divide$2(n,t,0,e,1).times(t),external$1=!0,finalise$1(n)):(t.s=n.s,n=t),n};P$3.toNumber=function(){return+this};P$3.toOctal=function(t,e){return toStringBinary$1(this,8,t,e)};P$3.toPower=P$3.pow=function(t){var e,n,i,s,a,l,f=this,p=f.constructor,C=+(t=new p(t));if(!f.d||!t.d||!f.d[0]||!t.d[0])return new p(mathpow$1(+f,C));if(f=new p(f),f.eq(1))return f;if(i=p.precision,a=p.rounding,t.eq(1))return finalise$1(f,i,a);if(e=mathfloor$1(t.e/LOG_BASE$1),e>=t.d.length-1&&(n=C<0?-C:C)<=MAX_SAFE_INTEGER$3)return s=intPow$1(p,f,n,i),t.s<0?new p(1).div(s):finalise$1(s,i,a);if(l=f.s,l<0){if(e<t.d.length-1)return new p(NaN);if(t.d[e]&1||(l=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=l,f}return n=mathpow$1(+f,C),e=n==0||!isFinite(n)?mathfloor$1(C*(Math.log("0."+digitsToString$1(f.d))/Math.LN10+f.e+1)):new p(n+"").e,e>p.maxE+1||e<p.minE-1?new p(e>0?l/0:0):(external$1=!1,p.rounding=f.s=1,n=Math.min(12,(e+"").length),s=naturalExponential$1(t.times(naturalLogarithm$1(f,i+n)),i),s.d&&(s=finalise$1(s,i+5,1),checkRoundingDigits$1(s.d,i,a)&&(e=i+10,s=finalise$1(naturalExponential$1(t.times(naturalLogarithm$1(f,e+n)),e),e+5,1),+digitsToString$1(s.d).slice(i+1,i+15)+1==1e14&&(s=finalise$1(s,i+1,0)))),s.s=l,external$1=!0,p.rounding=a,finalise$1(s,i,a))};P$3.toPrecision=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=finiteToString$1(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(checkInt32$1(t,1,MAX_DIGITS$1),e===void 0?e=s.rounding:checkInt32$1(e,0,8),i=finalise$1(new s(i),t,e),n=finiteToString$1(i,t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};P$3.toSignificantDigits=P$3.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(checkInt32$1(t,1,MAX_DIGITS$1),e===void 0?e=i.rounding:checkInt32$1(e,0,8)),finalise$1(new i(n),t,e)};P$3.toString=function(){var t=this,e=t.constructor,n=finiteToString$1(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};P$3.truncated=P$3.trunc=function(){return finalise$1(new this.constructor(this),this.e+1,1)};P$3.valueOf=P$3.toJSON=function(){var t=this,e=t.constructor,n=finiteToString$1(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function digitsToString$1(t){var e,n,i,s=t.length-1,a="",l=t[0];if(s>0){for(a+=l,e=1;e<s;e++)i=t[e]+"",n=LOG_BASE$1-i.length,n&&(a+=getZeroString$1(n)),a+=i;l=t[e],i=l+"",n=LOG_BASE$1-i.length,n&&(a+=getZeroString$1(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function checkInt32$1(t,e,n){if(t!==~~t||t<e||t>n)throw Error(invalidArgument$1+t)}function checkRoundingDigits$1(t,e,n,i){var s,a,l,f;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=LOG_BASE$1,s=0):(s=Math.ceil((e+1)/LOG_BASE$1),e%=LOG_BASE$1),a=mathpow$1(10,LOG_BASE$1-e),f=t[s]%a|0,i==null?e<3?(e==0?f=f/100|0:e==1&&(f=f/10|0),l=n<4&&f==99999||n>3&&f==49999||f==5e4||f==0):l=(n<4&&f+1==a||n>3&&f+1==a/2)&&(t[s+1]/a/100|0)==mathpow$1(10,e-2)-1||(f==a/2||f==0)&&(t[s+1]/a/100|0)==0:e<4?(e==0?f=f/1e3|0:e==1?f=f/100|0:e==2&&(f=f/10|0),l=(i||n<4)&&f==9999||!i&&n>3&&f==4999):l=((i||n<4)&&f+1==a||!i&&n>3&&f+1==a/2)&&(t[s+1]/a/1e3|0)==mathpow$1(10,e-3)-1,l}function convertBase$1(t,e,n){for(var i,s=[0],a,l=0,f=t.length;l<f;){for(a=s.length;a--;)s[a]*=e;for(s[0]+=NUMERALS$1.indexOf(t.charAt(l++)),i=0;i<s.length;i++)s[i]>n-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}function cosine$1(t,e){var n,i,s;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),s=(1/tinyPow$1(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=taylorSeries$1(t,1,e.times(s),new t(1));for(var a=n;a--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return t.precision-=n,e}var divide$2=function(){function t(i,s,a){var l,f=0,p=i.length;for(i=i.slice();p--;)l=i[p]*s+f,i[p]=l%a|0,f=l/a|0;return f&&i.unshift(f),i}function e(i,s,a,l){var f,p;if(a!=l)p=a>l?1:-1;else for(f=p=0;f<a;f++)if(i[f]!=s[f]){p=i[f]>s[f]?1:-1;break}return p}function n(i,s,a,l){for(var f=0;a--;)i[a]-=f,f=i[a]<s[a]?1:0,i[a]=f*l+i[a]-s[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,a,l,f,p){var C,B,N,le,Ee,Ue,ze,Ze,Qe,ct,wt,qt,nr,ir,or,ur,hr,fr,ar,Lt,Vt=i.constructor,tt=i.s==s.s?1:-1,Ye=i.d,ot=s.d;if(!Ye||!Ye[0]||!ot||!ot[0])return new Vt(!i.s||!s.s||(Ye?ot&&Ye[0]==ot[0]:!ot)?NaN:Ye&&Ye[0]==0||!ot?tt*0:tt/0);for(p?(Ee=1,B=i.e-s.e):(p=BASE$1,Ee=LOG_BASE$1,B=mathfloor$1(i.e/Ee)-mathfloor$1(s.e/Ee)),ar=ot.length,hr=Ye.length,Qe=new Vt(tt),ct=Qe.d=[],N=0;ot[N]==(Ye[N]||0);N++);if(ot[N]>(Ye[N]||0)&&B--,a==null?(ir=a=Vt.precision,l=Vt.rounding):f?ir=a+(i.e-s.e)+1:ir=a,ir<0)ct.push(1),Ue=!0;else{if(ir=ir/Ee+2|0,N=0,ar==1){for(le=0,ot=ot[0],ir++;(N<hr||le)&&ir--;N++)or=le*p+(Ye[N]||0),ct[N]=or/ot|0,le=or%ot|0;Ue=le||N<hr}else{for(le=p/(ot[0]+1)|0,le>1&&(ot=t(ot,le,p),Ye=t(Ye,le,p),ar=ot.length,hr=Ye.length),ur=ar,wt=Ye.slice(0,ar),qt=wt.length;qt<ar;)wt[qt++]=0;Lt=ot.slice(),Lt.unshift(0),fr=ot[0],ot[1]>=p/2&&++fr;do le=0,C=e(ot,wt,ar,qt),C<0?(nr=wt[0],ar!=qt&&(nr=nr*p+(wt[1]||0)),le=nr/fr|0,le>1?(le>=p&&(le=p-1),ze=t(ot,le,p),Ze=ze.length,qt=wt.length,C=e(ze,wt,Ze,qt),C==1&&(le--,n(ze,ar<Ze?Lt:ot,Ze,p))):(le==0&&(C=le=1),ze=ot.slice()),Ze=ze.length,Ze<qt&&ze.unshift(0),n(wt,ze,qt,p),C==-1&&(qt=wt.length,C=e(ot,wt,ar,qt),C<1&&(le++,n(wt,ar<qt?Lt:ot,qt,p))),qt=wt.length):C===0&&(le++,wt=[0]),ct[N++]=le,C&&wt[0]?wt[qt++]=Ye[ur]||0:(wt=[Ye[ur]],qt=1);while((ur++<hr||wt[0]!==void 0)&&ir--);Ue=wt[0]!==void 0}ct[0]||ct.shift()}if(Ee==1)Qe.e=B,inexact$1=Ue;else{for(N=1,le=ct[0];le>=10;le/=10)N++;Qe.e=N+B*Ee-1,finalise$1(Qe,f?a+Qe.e+1:a,l,Ue)}return Qe}}();function finalise$1(t,e,n,i){var s,a,l,f,p,C,B,N,le,Ee=t.constructor;e:if(e!=null){if(N=t.d,!N)return t;for(s=1,f=N[0];f>=10;f/=10)s++;if(a=e-s,a<0)a+=LOG_BASE$1,l=e,B=N[le=0],p=B/mathpow$1(10,s-l-1)%10|0;else if(le=Math.ceil((a+1)/LOG_BASE$1),f=N.length,le>=f)if(i){for(;f++<=le;)N.push(0);B=p=0,s=1,a%=LOG_BASE$1,l=a-LOG_BASE$1+1}else break e;else{for(B=f=N[le],s=1;f>=10;f/=10)s++;a%=LOG_BASE$1,l=a-LOG_BASE$1+s,p=l<0?0:B/mathpow$1(10,s-l-1)%10|0}if(i=i||e<0||N[le+1]!==void 0||(l<0?B:B%mathpow$1(10,s-l-1)),C=n<4?(p||i)&&(n==0||n==(t.s<0?3:2)):p>5||p==5&&(n==4||i||n==6&&(a>0?l>0?B/mathpow$1(10,s-l):0:N[le-1])%10&1||n==(t.s<0?8:7)),e<1||!N[0])return N.length=0,C?(e-=t.e+1,N[0]=mathpow$1(10,(LOG_BASE$1-e%LOG_BASE$1)%LOG_BASE$1),t.e=-e||0):N[0]=t.e=0,t;if(a==0?(N.length=le,f=1,le--):(N.length=le+1,f=mathpow$1(10,LOG_BASE$1-a),N[le]=l>0?(B/mathpow$1(10,s-l)%mathpow$1(10,l)|0)*f:0),C)for(;;)if(le==0){for(a=1,l=N[0];l>=10;l/=10)a++;for(l=N[0]+=f,f=1;l>=10;l/=10)f++;a!=f&&(t.e++,N[0]==BASE$1&&(N[0]=1));break}else{if(N[le]+=f,N[le]!=BASE$1)break;N[le--]=0,f=1}for(a=N.length;N[--a]===0;)N.pop()}return external$1&&(t.e>Ee.maxE?(t.d=null,t.e=NaN):t.e<Ee.minE&&(t.e=0,t.d=[0])),t}function finiteToString$1(t,e,n){if(!t.isFinite())return nonFiniteToString$1(t);var i,s=t.e,a=digitsToString$1(t.d),l=a.length;return e?(n&&(i=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+getZeroString$1(i):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):s<0?(a="0."+getZeroString$1(-s-1)+a,n&&(i=n-l)>0&&(a+=getZeroString$1(i))):s>=l?(a+=getZeroString$1(s+1-l),n&&(i=n-s-1)>0&&(a=a+"."+getZeroString$1(i))):((i=s+1)<l&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-l)>0&&(s+1===l&&(a+="."),a+=getZeroString$1(i))),a}function getBase10Exponent$1(t,e){var n=t[0];for(e*=LOG_BASE$1;n>=10;n/=10)e++;return e}function getLn10$1(t,e,n){if(e>LN10_PRECISION$1)throw external$1=!0,n&&(t.precision=n),Error(precisionLimitExceeded$1);return finalise$1(new t(LN10$1),e,1,!0)}function getPi$1(t,e,n){if(e>PI_PRECISION$1)throw Error(precisionLimitExceeded$1);return finalise$1(new t(PI$1),e,n,!0)}function getPrecision$1(t){var e=t.length-1,n=e*LOG_BASE$1+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function getZeroString$1(t){for(var e="";t--;)e+="0";return e}function intPow$1(t,e,n,i){var s,a=new t(1),l=Math.ceil(i/LOG_BASE$1+4);for(external$1=!1;;){if(n%2&&(a=a.times(e),truncate$1(a.d,l)&&(s=!0)),n=mathfloor$1(n/2),n===0){n=a.d.length-1,s&&a.d[n]===0&&++a.d[n];break}e=e.times(e),truncate$1(e.d,l)}return external$1=!0,a}function isOdd$1(t){return t.d[t.d.length-1]&1}function maxOrMin$1(t,e,n){for(var i,s,a=new t(e[0]),l=0;++l<e.length;){if(s=new t(e[l]),!s.s){a=s;break}i=a.cmp(s),(i===n||i===0&&a.s===n)&&(a=s)}return a}function naturalExponential$1(t,e){var n,i,s,a,l,f,p,C=0,B=0,N=0,le=t.constructor,Ee=le.rounding,Ue=le.precision;if(!t.d||!t.d[0]||t.e>17)return new le(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(external$1=!1,p=Ue):p=e,f=new le(.03125);t.e>-2;)t=t.times(f),N+=5;for(i=Math.log(mathpow$1(2,N))/Math.LN10*2+5|0,p+=i,n=a=l=new le(1),le.precision=p;;){if(a=finalise$1(a.times(t),p,1),n=n.times(++B),f=l.plus(divide$2(a,n,p,1)),digitsToString$1(f.d).slice(0,p)===digitsToString$1(l.d).slice(0,p)){for(s=N;s--;)l=finalise$1(l.times(l),p,1);if(e==null)if(C<3&&checkRoundingDigits$1(l.d,p-i,Ee,C))le.precision=p+=10,n=a=f=new le(1),B=0,C++;else return finalise$1(l,le.precision=Ue,Ee,external$1=!0);else return le.precision=Ue,l}l=f}}function naturalLogarithm$1(t,e){var n,i,s,a,l,f,p,C,B,N,le,Ee=1,Ue=10,ze=t,Ze=ze.d,Qe=ze.constructor,ct=Qe.rounding,wt=Qe.precision;if(ze.s<0||!Ze||!Ze[0]||!ze.e&&Ze[0]==1&&Ze.length==1)return new Qe(Ze&&!Ze[0]?-1/0:ze.s!=1?NaN:Ze?0:ze);if(e==null?(external$1=!1,B=wt):B=e,Qe.precision=B+=Ue,n=digitsToString$1(Ze),i=n.charAt(0),Math.abs(a=ze.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)ze=ze.times(t),n=digitsToString$1(ze.d),i=n.charAt(0),Ee++;a=ze.e,i>1?(ze=new Qe("0."+n),a++):ze=new Qe(i+"."+n.slice(1))}else return C=getLn10$1(Qe,B+2,wt).times(a+""),ze=naturalLogarithm$1(new Qe(i+"."+n.slice(1)),B-Ue).plus(C),Qe.precision=wt,e==null?finalise$1(ze,wt,ct,external$1=!0):ze;for(N=ze,p=l=ze=divide$2(ze.minus(1),ze.plus(1),B,1),le=finalise$1(ze.times(ze),B,1),s=3;;){if(l=finalise$1(l.times(le),B,1),C=p.plus(divide$2(l,new Qe(s),B,1)),digitsToString$1(C.d).slice(0,B)===digitsToString$1(p.d).slice(0,B))if(p=p.times(2),a!==0&&(p=p.plus(getLn10$1(Qe,B+2,wt).times(a+""))),p=divide$2(p,new Qe(Ee),B,1),e==null)if(checkRoundingDigits$1(p.d,B-Ue,ct,f))Qe.precision=B+=Ue,C=l=ze=divide$2(N.minus(1),N.plus(1),B,1),le=finalise$1(ze.times(ze),B,1),s=f=1;else return finalise$1(p,Qe.precision=wt,ct,external$1=!0);else return Qe.precision=wt,p;p=C,s+=2}}function nonFiniteToString$1(t){return String(t.s*t.s/0)}function parseDecimal$1(t,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%LOG_BASE$1,n<0&&(i+=LOG_BASE$1),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=LOG_BASE$1;i<s;)t.d.push(+e.slice(i,i+=LOG_BASE$1));e=e.slice(i),i=LOG_BASE$1-e.length}else i-=s;for(;i--;)e+="0";t.d.push(+e),external$1&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function parseOther$1(t,e){var n,i,s,a,l,f,p,C,B;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),isDecimal$1.test(e))return parseDecimal$1(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(isHex$3.test(e))n=16,e=e.toLowerCase();else if(isBinary$1.test(e))n=2;else if(isOctal$1.test(e))n=8;else throw Error(invalidArgument$1+e);for(a=e.search(/p/i),a>0?(p=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),l=a>=0,i=t.constructor,l&&(e=e.replace(".",""),f=e.length,a=f-a,s=intPow$1(i,new i(n),a,a*2)),C=convertBase$1(e,n,BASE$1),B=C.length-1,a=B;C[a]===0;--a)C.pop();return a<0?new i(t.s*0):(t.e=getBase10Exponent$1(C,B),t.d=C,external$1=!1,l&&(t=divide$2(t,s,f*4)),p&&(t=t.times(Math.abs(p)<54?mathpow$1(2,p):Decimal$1.pow(2,p))),external$1=!0,t)}function sine$1(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:taylorSeries$1(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/tinyPow$1(5,n)),e=taylorSeries$1(t,2,e,e);for(var s,a=new t(5),l=new t(16),f=new t(20);n--;)s=e.times(e),e=e.times(a.plus(s.times(l.times(s).minus(f))));return e}function taylorSeries$1(t,e,n,i,s){var a,l,f,p,C=t.precision,B=Math.ceil(C/LOG_BASE$1);for(external$1=!1,p=n.times(n),f=new t(i);;){if(l=divide$2(f.times(p),new t(e++*e++),C,1),f=s?i.plus(l):i.minus(l),i=divide$2(l.times(p),new t(e++*e++),C,1),l=f.plus(i),l.d[B]!==void 0){for(a=B;l.d[a]===f.d[a]&&a--;);if(a==-1)break}a=f,f=i,i=l,l=a}return external$1=!0,l.d.length=B+1,l}function tinyPow$1(t,e){for(var n=t;--e;)n*=t;return n}function toLessThanHalfPi$1(t,e){var n,i=e.s<0,s=getPi$1(t,t.precision,1),a=s.times(.5);if(e=e.abs(),e.lte(a))return quadrant$1=i?4:1,e;if(n=e.divToInt(s),n.isZero())quadrant$1=i?3:2;else{if(e=e.minus(n.times(s)),e.lte(a))return quadrant$1=isOdd$1(n)?i?2:3:i?4:1,e;quadrant$1=isOdd$1(n)?i?1:4:i?3:2}return e.minus(s).abs()}function toStringBinary$1(t,e,n,i){var s,a,l,f,p,C,B,N,le,Ee=t.constructor,Ue=n!==void 0;if(Ue?(checkInt32$1(n,1,MAX_DIGITS$1),i===void 0?i=Ee.rounding:checkInt32$1(i,0,8)):(n=Ee.precision,i=Ee.rounding),!t.isFinite())B=nonFiniteToString$1(t);else{for(B=finiteToString$1(t),l=B.indexOf("."),Ue?(s=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):s=e,l>=0&&(B=B.replace(".",""),le=new Ee(1),le.e=B.length-l,le.d=convertBase$1(finiteToString$1(le),10,s),le.e=le.d.length),N=convertBase$1(B,10,s),a=p=N.length;N[--p]==0;)N.pop();if(!N[0])B=Ue?"0p+0":"0";else{if(l<0?a--:(t=new Ee(t),t.d=N,t.e=a,t=divide$2(t,le,n,i,0,s),N=t.d,a=t.e,C=inexact$1),l=N[n],f=s/2,C=C||N[n+1]!==void 0,C=i<4?(l!==void 0||C)&&(i===0||i===(t.s<0?3:2)):l>f||l===f&&(i===4||C||i===6&&N[n-1]&1||i===(t.s<0?8:7)),N.length=n,C)for(;++N[--n]>s-1;)N[n]=0,n||(++a,N.unshift(1));for(p=N.length;!N[p-1];--p);for(l=0,B="";l<p;l++)B+=NUMERALS$1.charAt(N[l]);if(Ue){if(p>1)if(e==16||e==8){for(l=e==16?4:3,--p;p%l;p++)B+="0";for(N=convertBase$1(B,s,e),p=N.length;!N[p-1];--p);for(l=1,B="1.";l<p;l++)B+=NUMERALS$1.charAt(N[l])}else B=B.charAt(0)+"."+B.slice(1);B=B+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)B="0"+B;B="0."+B}else if(++a>p)for(a-=p;a--;)B+="0";else a<p&&(B=B.slice(0,a)+"."+B.slice(a))}B=(e==16?"0x":e==2?"0b":e==8?"0o":"")+B}return t.s<0?"-"+B:B}function truncate$1(t,e){if(t.length>e)return t.length=e,!0}function abs$2(t){return new this(t).abs()}function acos$1(t){return new this(t).acos()}function acosh$1(t){return new this(t).acosh()}function add$2(t,e){return new this(t).plus(e)}function asin$1(t){return new this(t).asin()}function asinh$1(t){return new this(t).asinh()}function atan$1(t){return new this(t).atan()}function atanh$1(t){return new this(t).atanh()}function atan2$1(t,e){t=new this(t),e=new this(e);var n,i=this.precision,s=this.rounding,a=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=getPi$1(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?getPi$1(this,i,s):new this(0),n.s=t.s):!t.d||e.isZero()?(n=getPi$1(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(divide$2(t,e,a,1)),e=getPi$1(this,a,1),this.precision=i,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(divide$2(t,e,a,1)),n}function cbrt$1(t){return new this(t).cbrt()}function ceil$1(t){return finalise$1(t=new this(t),t.e+1,2)}function clamp$3(t,e,n){return new this(t).clamp(e,n)}function config$2(t){if(!t||typeof t!="object")throw Error(decimalError$1+"Object expected");var e,n,i,s=t.defaults===!0,a=["precision",1,MAX_DIGITS$1,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,EXP_LIMIT$1,"maxE",0,EXP_LIMIT$1,"minE",-9e15,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],s&&(this[n]=DEFAULTS$1[n]),(i=t[n])!==void 0)if(mathfloor$1(i)===i&&i>=a[e+1]&&i<=a[e+2])this[n]=i;else throw Error(invalidArgument$1+n+": "+i);if(n="crypto",s&&(this[n]=DEFAULTS$1[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(cryptoUnavailable$1);else this[n]=!1;else throw Error(invalidArgument$1+n+": "+i);return this}function cos$1(t){return new this(t).cos()}function cosh$1(t){return new this(t).cosh()}function clone$1(t){var e,n,i;function s(a){var l,f,p,C=this;if(!(C instanceof s))return new s(a);if(C.constructor=s,isDecimalInstance$1(a)){C.s=a.s,external$1?!a.d||a.e>s.maxE?(C.e=NaN,C.d=null):a.e<s.minE?(C.e=0,C.d=[0]):(C.e=a.e,C.d=a.d.slice()):(C.e=a.e,C.d=a.d?a.d.slice():a.d);return}if(p=typeof a,p==="number"){if(a===0){C.s=1/a<0?-1:1,C.e=0,C.d=[0];return}if(a<0?(a=-a,C.s=-1):C.s=1,a===~~a&&a<1e7){for(l=0,f=a;f>=10;f/=10)l++;external$1?l>s.maxE?(C.e=NaN,C.d=null):l<s.minE?(C.e=0,C.d=[0]):(C.e=l,C.d=[a]):(C.e=l,C.d=[a]);return}if(a*0!==0){a||(C.s=NaN),C.e=NaN,C.d=null;return}return parseDecimal$1(C,a.toString())}if(p==="string")return(f=a.charCodeAt(0))===45?(a=a.slice(1),C.s=-1):(f===43&&(a=a.slice(1)),C.s=1),isDecimal$1.test(a)?parseDecimal$1(C,a):parseOther$1(C,a);if(p==="bigint")return a<0?(a=-a,C.s=-1):C.s=1,parseDecimal$1(C,a.toString());throw Error(invalidArgument$1+a)}if(s.prototype=P$3,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=config$2,s.clone=clone$1,s.isDecimal=isDecimalInstance$1,s.abs=abs$2,s.acos=acos$1,s.acosh=acosh$1,s.add=add$2,s.asin=asin$1,s.asinh=asinh$1,s.atan=atan$1,s.atanh=atanh$1,s.atan2=atan2$1,s.cbrt=cbrt$1,s.ceil=ceil$1,s.clamp=clamp$3,s.cos=cos$1,s.cosh=cosh$1,s.div=div$1,s.exp=exp$1,s.floor=floor$2,s.hypot=hypot$1,s.ln=ln$2,s.log=log$1,s.log10=log10$1,s.log2=log2$1,s.max=max$2,s.min=min$2,s.mod=mod$1,s.mul=mul$1,s.pow=pow$2,s.random=random$1,s.round=round$2,s.sign=sign$3,s.sin=sin$1,s.sinh=sinh$1,s.sqrt=sqrt$1,s.sub=sub$1,s.sum=sum$1,s.tan=tan$1,s.tanh=tanh$1,s.trunc=trunc$1,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return s.config(t),s}function div$1(t,e){return new this(t).div(e)}function exp$1(t){return new this(t).exp()}function floor$2(t){return finalise$1(t=new this(t),t.e+1,3)}function hypot$1(){var t,e,n=new this(0);for(external$1=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return external$1=!0,new this(1/0);n=e}return external$1=!0,n.sqrt()}function isDecimalInstance$1(t){return t instanceof Decimal$1||t&&t.toStringTag===tag$1||!1}function ln$2(t){return new this(t).ln()}function log$1(t,e){return new this(t).log(e)}function log2$1(t){return new this(t).log(2)}function log10$1(t){return new this(t).log(10)}function max$2(){return maxOrMin$1(this,arguments,-1)}function min$2(){return maxOrMin$1(this,arguments,1)}function mod$1(t,e){return new this(t).mod(e)}function mul$1(t,e){return new this(t).mul(e)}function pow$2(t,e){return new this(t).pow(e)}function random$1(t){var e,n,i,s,a=0,l=new this(1),f=[];if(t===void 0?t=this.precision:checkInt32$1(t,1,MAX_DIGITS$1),i=Math.ceil(t/LOG_BASE$1),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)s=e[a],s>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:f[a++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);a<i;)s=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,a):(f.push(s%1e7),a+=4);a=i/4}else throw Error(cryptoUnavailable$1);else for(;a<i;)f[a++]=Math.random()*1e7|0;for(i=f[--a],t%=LOG_BASE$1,i&&t&&(s=mathpow$1(10,LOG_BASE$1-t),f[a]=(i/s|0)*s);f[a]===0;a--)f.pop();if(a<0)n=0,f=[0];else{for(n=-1;f[0]===0;n-=LOG_BASE$1)f.shift();for(i=1,s=f[0];s>=10;s/=10)i++;i<LOG_BASE$1&&(n-=LOG_BASE$1-i)}return l.e=n,l.d=f,l}function round$2(t){return finalise$1(t=new this(t),t.e+1,this.rounding)}function sign$3(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sin$1(t){return new this(t).sin()}function sinh$1(t){return new this(t).sinh()}function sqrt$1(t){return new this(t).sqrt()}function sub$1(t,e){return new this(t).sub(e)}function sum$1(){var t=0,e=arguments,n=new this(e[t]);for(external$1=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return external$1=!0,finalise$1(n,this.precision,this.rounding)}function tan$1(t){return new this(t).tan()}function tanh$1(t){return new this(t).tanh()}function trunc$1(t){return finalise$1(t=new this(t),t.e+1,1)}P$3[Symbol.for("nodejs.util.inspect.custom")]=P$3.toString;P$3[Symbol.toStringTag]="Decimal";var Decimal$1=P$3.constructor=clone$1(DEFAULTS$1);LN10$1=new Decimal$1(LN10$1);PI$1=new Decimal$1(PI$1);var CompareResult;(function(t){t[t.EQUAL=0]="EQUAL",t[t.GREATER=1]="GREATER",t[t.LESS=-1]="LESS"})(CompareResult||(CompareResult={}));var Comparator=function(){function t(e){this.compare=e||t.defaultCompareFunction}return t.defaultCompareFunction=function(e,n){return e===n?CompareResult.EQUAL:e<n?CompareResult.LESS:CompareResult.GREATER},t.prototype.equal=function(e,n){return this.compare(e,n)===CompareResult.EQUAL},t.prototype.lessThan=function(e,n){return this.compare(e,n)===CompareResult.LESS},t.prototype.greaterThan=function(e,n){return this.compare(e,n)===CompareResult.GREATER},t.prototype.lessThanOrEqual=function(e,n){return this.lessThan(e,n)||this.equal(e,n)},t.prototype.greaterThanOrEqual=function(e,n){return this.greaterThan(e,n)||this.equal(e,n)},t.prototype.reverse=function(){var e=this.compare;this.compare=function(n,i){return e(i,n)}},t}(),SinglyNode=function(){function t(e){this.value=e,this.next=null}return t}(),DoublyNode=function(){function t(e){this.value=e,this.next=null,this.prev=null}return t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(t,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},extendStatics(t,e)};function __extends(t,e){extendStatics(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function __generator(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(C){return function(B){return p([C,B])}}function p(C){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,s&&(a=C[0]&2?s.return:C[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,C[1])).done)return a;switch(s=0,a&&(C=[C[0]&2,a.value]),C[0]){case 0:case 1:a=C;break;case 4:return n.label++,{value:C[1],done:!1};case 5:n.label++,s=C[1],C=[0];continue;case 7:C=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(C[0]===6||C[0]===2)){n=0;continue}if(C[0]===3&&(!a||C[1]>a[0]&&C[1]<a[3])){n.label=C[1];break}if(C[0]===6&&n.label<a[1]){n.label=a[1],a=C;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(C);break}a[2]&&n.ops.pop(),n.trys.pop();continue}C=e.call(t,n)}catch(B){C=[6,B],s=0}finally{i=a=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function __read$2(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function __spread$2(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$2(arguments[e]));return t}var OBFUSCATED_ERROR="obfuse error occur";function invariant$1(t,e){if(!t)throw new Error("[linked-list] "+(e||OBFUSCATED_ERROR))}var INDEX_NOT_FOUND=-1,List=function(){function t(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new Comparator,n.length>0&&n.forEach(function(s){e.append(s)})}return Object.defineProperty(t.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopLength",{get:function(){var e=!1,n=1;if(!this._head)return 0;for(var i=this._head,s=this._head;s.next&&s.next.next;)if(s=s.next.next,i=i.next,i===s){e=!0;break}if(e){for(s=s.next;i!==s;)n++,s=s.next;return n}else return 0},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e){var n=this._length;invariant$1(n>0&&e>=0&&e<n,"[linked-list] index "+e+" out of scope of list, which length is "+n);for(var i=this._head,s=0;s<e;)i=i.next,s++;return i},t.prototype.get=function(e){var n=this.getNode(e);return n?n.value:null},t.prototype.find=function(e){var n=e.value,i=e.callback;if(!this._head)return null;for(var s=this._head;s;){if(i&&i(s.value)||n!==void 0&&this.compare.equal(s.value,n))return s;s=s.next}return null},t.prototype.indexOf=function(e){if(!this._head)return INDEX_NOT_FOUND;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,e))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,e)&&(i+=1),i},t.prototype.first=function(e){invariant$1(e>=0,"[linked-list] param 'num' ("+e+") should not less than 0");for(var n=this.iterator(),i=[],s=Math.min(e,this.length),a=0;a<s;a++){var l=n.next();i.push(l.value)}return i},t.prototype.toArray=function(){return __spread$2(this)},t.prototype.isEmpty=function(){return this._head===null},t.prototype.iterator=function(){var e;return __generator(this,function(n){switch(n.label){case 0:e=this._head,n.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return n.sent(),e=e.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t}(),SinglyList=function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.apply(this,__spread$2(n))||this}return e.prototype.append=function(n){var i=new SinglyNode(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},e.prototype.prepend=function(n){var i=new SinglyNode(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},e.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var s=i;;){if(this.compare.equal(i.value,n))return i.next?s.next=i.next:(this._tail=s,this._tail.next=null),i.next=null,this._length--,n;if(i.next)s=i,i=i.next;else return}}},e.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},e.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,i=n,n=s;this._head=i}},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,__spread$2([void 0],n)))},e}(List),AbstractCircleSinglyList=function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,__spread$2(n))||this;return s.cyclization(),s}return e.prototype.iterator=function(){var n;return __generator(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var n;return __generator(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var a=t.prototype[n].apply(this,i);return this.cyclization(),a},e.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},e.prototype.append=function(n){return this.mapToNormalListFn("append",n)},e.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},e.prototype.find=function(n){return this.mapToNormalListFn("find",n)},e.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},e.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(n){invariant$1(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],a=0;a<n;a++){var l=i.next();s.push(l.value)}return s},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(SinglyList);(function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,__spread$2(n))||this;return s.cyclization(),s}return e.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},e.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,__spread$2([void 0],n)))},e})(AbstractCircleSinglyList);var DoublyList=function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.apply(this,__spread$2(n))||this}return e.prototype.append=function(n){var i=new DoublyNode(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},e.prototype.prepend=function(n){var i=new DoublyNode(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},e.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},e.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,n.prev=s,i=n,n=s;this._head=i}},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,__spread$2([void 0],n)))},e}(List),AbstractCircleDoublyList=function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,__spread$2(n))||this;return s.cyclization(),s}return e.prototype.iterator=function(){var n;return __generator(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var n;return __generator(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var a=t.prototype[n].apply(this,i);return this.cyclization(),a},e.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},e.prototype.append=function(n){return this.mapToNormalListFn("append",n)},e.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},e.prototype.find=function(n){return this.mapToNormalListFn("find",n)},e.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},e.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(n){invariant$1(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],a=0;a<n;a++){var l=i.next();s.push(l.value)}return s},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(DoublyList);(function(t){__extends(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,__spread$2(n))||this;return s.cyclization(),s}return e.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},e.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,__spread$2([void 0],n)))},e})(AbstractCircleDoublyList);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function __read$1(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function __spread$1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read$1(arguments[e]));return t}var Queue=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.queue=new(SinglyList.bind.apply(SinglyList,__spread$1([void 0],e)))}return Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.queue.isEmpty()},t.prototype.enqueue=function(e){return this.queue.append(e)},t.prototype.dequeue=function(){var e=this.queue.removeHead();return typeof e<"u"?e:void 0},t.prototype.toArray=function(){return this.queue.toArray()},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function __read(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function __spread(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t}var stack=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.stack=new(SinglyList.bind.apply(SinglyList,__spread([void 0],e)))}return Object.defineProperty(t.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.stack.isEmpty()},t.prototype.push=function(e){return this.stack.append(e)},t.prototype.pop=function(){var e=this.stack.removeTail();return typeof e<"u"?e:void 0},t.prototype.popBottom=function(){var e=this.stack.removeHead();return typeof e<"u"?e:void 0},t.prototype.toArray=function(){return this.stack.toArray()},t}(),GraphEdge=function(){function t(e,n,i){i===void 0&&(i=0),this.startVertex=e,this.endVertex=n,this.weight=i}return t.prototype.getKey=function(){var e=this.startVertex.getKey(),n=this.endVertex.getKey();return e+"_"+n},t.prototype.reverse=function(){var e=this.startVertex;return this.startVertex=this.endVertex,this.endVertex=e,this},t.prototype.clone=function(){return new t(this.startVertex,this.endVertex,this.weight)},t.prototype.toString=function(){return this.getKey()},t}();function invariant(t,e,n){if(n===void 0&&(n="cc-graph"),!t)throw new Error((n?"["+n+"]":"")+" Invariant failed: "+e)}function isExist(t,e){e===void 0&&(e=!0);var n=typeof t<"u"&&t!==null;return e?n&&t!=="undefined"&&t!=="null":n}var GraphVertex=function(){function t(e){invariant(isExist(e),"Graph vertex must have a value"),this.value=e,this.edges=new Map}return t.prototype.addEdge=function(e){return this.edges.set(e.getKey(),e),this},t.prototype.deleteEdge=function(e){this.edges.delete(e.getKey())},t.prototype.getNeighbors=function(){var e=this,n=this.getEdges(),i=function(s){return s.startVertex===e?s.endVertex:s.startVertex};return n.map(i)},t.prototype.getEdges=function(){return Array.from(this.edges.values())},t.prototype.getDegree=function(){return this.getEdges().length},t.prototype.hasEdge=function(e){var n=this.getEdges().find(function(i){return i===e});return!!n},t.prototype.hasNeighbor=function(e){var n=this.getEdges().find(function(i){return i.startVertex===e||i.endVertex===e});return!!n},t.prototype.findEdge=function(e){var n=function(s){return s.startVertex===e||s.endVertex===e},i=this.getEdges().find(n);return i||null},t.prototype.getKey=function(){return this.value},t.prototype.deleteAllEdges=function(){var e=this;return this.getEdges().forEach(function(n){return e.deleteEdge(n)}),this},t.prototype.toString=function(e){return e?e(this.value):""+this.value},t}();function buildDualStack(t,e,n,i){if(t){e.push(t),i.set(t.getKey(),!0);var s=t.getNeighbors().filter(function(a){return!i.get(a.getKey())});n.push(s)}}function cutdownDualStack(t,e,n){var i=t.pop();i&&n.set(i.getKey(),!1),e.pop()}var Graph=function(){function t(e){e===void 0&&(e=!1),this.vertices={},this.edges={},this.isDirected=e}return t.prototype.addVertex=function(e){return this.vertices[e.getKey()]=e,this},t.prototype.getVertexByKey=function(e){return this.vertices[e]},t.prototype.getNeighbors=function(e){return e.getNeighbors()},t.prototype.getAllVertices=function(){return Object.values(this.vertices)},t.prototype.getAllEdges=function(){return Object.values(this.edges)},t.prototype.addEdge=function(e,n){if(n===void 0&&(n=!1),this.edges[e.getKey()]){if(n)return this;invariant(!1,"Edge has already been added before")}var i=this.getVertexByKey(e.startVertex.getKey()),s=this.getVertexByKey(e.endVertex.getKey());if(i||(this.addVertex(e.startVertex),i=this.getVertexByKey(e.startVertex.getKey())),s||(this.addVertex(e.endVertex),s=this.getVertexByKey(e.endVertex.getKey())),this.edges[e.getKey()]=e,this.isDirected)i.addEdge(e);else{i.addEdge(e);var a=e.clone();s.addEdge(a.reverse())}return this},t.prototype.deleteEdge=function(e,n){if(n===void 0&&(n=!1),!this.edges[e.getKey()]){if(n)return this;invariant(!1,"Edge not found in graph")}delete this.edges[e.getKey()];var i=this.getVertexByKey(e.startVertex.getKey()),s=this.getVertexByKey(e.endVertex.getKey());return i.deleteEdge(e),s.deleteEdge(e),this},t.prototype.findEdge=function(e,n){var i=this.getVertexByKey(e.getKey());return i?i.findEdge(n):null},t.prototype.getWeight=function(){return this.getAllEdges().reduce(function(e,n){return e+n.weight},0)},t.prototype.reverse=function(){var e=this;return this.getAllEdges().forEach(function(n){e.deleteEdge(n),n.reverse(),e.addEdge(n)}),this},t.prototype.getVerticesIndices=function(){var e={};return this.getAllVertices().forEach(function(n,i){e[n.getKey()]=i}),e},t.prototype.getAdjacencyMatrix=function(){var e=this,n=this.getAllVertices(),i=this.getVerticesIndices(),s=Array(n.length).fill(null).map(function(){return Array(n.length).fill(1/0)});return n.forEach(function(a,l){a.getNeighbors().forEach(function(f){var p=i[f.getKey()],C=e.findEdge(a,f);C&&(s[l][p]=C.weight)})}),s},t.prototype.toString=function(){return Object.keys(this.vertices).toString()},t.prototype.bfs=function(e){var n,i,s;return __generator$1(this,function(a){switch(a.label){case 0:n=new Map,i=new Queue,i.enqueue(e),a.label=1;case 1:return i.isEmpty()?[3,4]:(s=i.dequeue(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:a.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(l){return i.enqueue(l)}),a.label=3;case 3:return[3,1];case 4:return[2]}})},t.prototype.dfs=function(e){var n,i,s;return __generator$1(this,function(a){switch(a.label){case 0:n=new Map,i=new stack,i.push(e),a.label=1;case 1:return i.isEmpty()?[3,4]:(s=i.pop(),s&&!n.has(s.getKey())?[4,s]:[3,3]);case 2:a.sent(),n.set(s.getKey(),s),s.getNeighbors().forEach(function(l){return i.push(l)}),a.label=3;case 3:return[3,1];case 4:return[2]}})},t.prototype.findAllPath=function(e,n){var i,s,a,l,f,p,C;return __generator$1(this,function(B){switch(B.label){case 0:return i=[],e!==n?[3,2]:(i.push(e),[4,i]);case 1:return B.sent(),[2];case 2:s=new Map,a=new stack,l=new stack,buildDualStack(e,a,l,s),B.label=3;case 3:if(a.isEmpty())return[3,6];if(f=l.pop(),f&&f.length)p=f.shift(),l.push(f),p&&buildDualStack(p,a,l,s);else return l.push(f),cutdownDualStack(a,l,s),[3,3];return C=a.peek,C!==n?[3,5]:[4,a.toArray()];case 4:B.sent(),cutdownDualStack(a,l,s),B.label=5;case 5:return[3,3];case 6:return[2]}})},t}();const version$1="3.7.7",VERSION$4=version$1,_hasBuffer=typeof Buffer$1=="function",_TD=typeof TextDecoder=="function"?new TextDecoder:void 0,_TE=typeof TextEncoder=="function"?new TextEncoder:void 0,b64ch="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b64chs=Array.prototype.slice.call(b64ch),b64tab=(t=>{let e={};return t.forEach((n,i)=>e[n]=i),e})(b64chs),b64re=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,_fromCC=String.fromCharCode.bind(String),_U8Afrom=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),_mkUriSafe=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),_tidyB64=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),btoaPolyfill=t=>{let e,n,i,s,a="";const l=t.length%3;for(let f=0;f<t.length;){if((n=t.charCodeAt(f++))>255||(i=t.charCodeAt(f++))>255||(s=t.charCodeAt(f++))>255)throw new TypeError("invalid character found");e=n<<16|i<<8|s,a+=b64chs[e>>18&63]+b64chs[e>>12&63]+b64chs[e>>6&63]+b64chs[e&63]}return l?a.slice(0,l-3)+"===".substring(l):a},_btoa=typeof btoa=="function"?t=>btoa(t):_hasBuffer?t=>Buffer$1.from(t,"binary").toString("base64"):btoaPolyfill,_fromUint8Array=_hasBuffer?t=>Buffer$1.from(t).toString("base64"):t=>{let n=[];for(let i=0,s=t.length;i<s;i+=4096)n.push(_fromCC.apply(null,t.subarray(i,i+4096)));return _btoa(n.join(""))},fromUint8Array=(t,e=!1)=>e?_mkUriSafe(_fromUint8Array(t)):_fromUint8Array(t),cb_utob=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?_fromCC(192|e>>>6)+_fromCC(128|e&63):_fromCC(224|e>>>12&15)+_fromCC(128|e>>>6&63)+_fromCC(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return _fromCC(240|e>>>18&7)+_fromCC(128|e>>>12&63)+_fromCC(128|e>>>6&63)+_fromCC(128|e&63)}},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=t=>t.replace(re_utob,cb_utob),_encode=_hasBuffer?t=>Buffer$1.from(t,"utf8").toString("base64"):_TE?t=>_fromUint8Array(_TE.encode(t)):t=>_btoa(utob(t)),encode$4=(t,e=!1)=>e?_mkUriSafe(_encode(t)):_encode(t),encodeURI$1=t=>encode$4(t,!0),re_btou=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,cb_btou=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return _fromCC((n>>>10)+55296)+_fromCC((n&1023)+56320);case 3:return _fromCC((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return _fromCC((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},btou=t=>t.replace(re_btou,cb_btou),atobPolyfill=t=>{if(t=t.replace(/\s+/g,""),!b64re.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",i,s;for(let a=0;a<t.length;)e=b64tab[t.charAt(a++)]<<18|b64tab[t.charAt(a++)]<<12|(i=b64tab[t.charAt(a++)])<<6|(s=b64tab[t.charAt(a++)]),n+=i===64?_fromCC(e>>16&255):s===64?_fromCC(e>>16&255,e>>8&255):_fromCC(e>>16&255,e>>8&255,e&255);return n},_atob=typeof atob=="function"?t=>atob(_tidyB64(t)):_hasBuffer?t=>Buffer$1.from(t,"base64").toString("binary"):atobPolyfill,_toUint8Array=_hasBuffer?t=>_U8Afrom(Buffer$1.from(t,"base64")):t=>_U8Afrom(_atob(t).split("").map(e=>e.charCodeAt(0))),toUint8Array=t=>_toUint8Array(_unURI(t)),_decode=_hasBuffer?t=>Buffer$1.from(t,"base64").toString("utf8"):_TD?t=>_TD.decode(_toUint8Array(t)):t=>btou(_atob(t)),_unURI=t=>_tidyB64(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),decode=t=>_decode(_unURI(t)),isValid=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},_noEnum=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),extendString=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,_noEnum(n));t("fromBase64",function(){return decode(this)}),t("toBase64",function(e){return encode$4(this,e)}),t("toBase64URI",function(){return encode$4(this,!0)}),t("toBase64URL",function(){return encode$4(this,!0)}),t("toUint8Array",function(){return toUint8Array(this)})},extendUint8Array=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,_noEnum(n));t("toBase64",function(e){return fromUint8Array(this,e)}),t("toBase64URI",function(){return fromUint8Array(this,!0)}),t("toBase64URL",function(){return fromUint8Array(this,!0)})},extendBuiltins=()=>{extendString(),extendUint8Array()},gBase64={version:version$1,VERSION:VERSION$4,atob:_atob,atobPolyfill,btoa:_btoa,btoaPolyfill,fromBase64:decode,toBase64:encode$4,encode:encode$4,encodeURI:encodeURI$1,encodeURL:encodeURI$1,utob,btou,decode,isValid,fromUint8Array,toUint8Array,extendString,extendUint8Array,extendBuiltins};let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,e=0){return byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(t,e,n){if(native.randomUUID&&!t)return native.randomUUID();t=t||{};const i=t.random||(t.rng||rng)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,unsafeStringify(i)}function bind$1(t,e){return function(){return t.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf:getPrototypeOf$1}=Object,kindOf$1=(t=>e=>{const n=toString$2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest$1=t=>(t=t.toLowerCase(),e=>kindOf$1(e)===t),typeOfTest$1=t=>e=>typeof e===t,{isArray:isArray$2}=Array,isUndefined$1=typeOfTest$1("undefined");function isBuffer$2(t){return t!==null&&!isUndefined$1(t)&&t.constructor!==null&&!isUndefined$1(t.constructor)&&isFunction$2(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer$1=kindOfTest$1("ArrayBuffer");function isArrayBufferView$1(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer$1(t.buffer),e}const isString$1=typeOfTest$1("string"),isFunction$2=typeOfTest$1("function"),isNumber$1=typeOfTest$1("number"),isObject$2=t=>t!==null&&typeof t=="object",isBoolean$1=t=>t===!0||t===!1,isPlainObject$1=t=>{if(kindOf$1(t)!=="object")return!1;const e=getPrototypeOf$1(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate$1=kindOfTest$1("Date"),isFile$1=kindOfTest$1("File"),isBlob$1=kindOfTest$1("Blob"),isFileList$1=kindOfTest$1("FileList"),isStream$1=t=>isObject$2(t)&&isFunction$2(t.pipe),isFormData$1=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction$2(t.append)&&((e=kindOf$1(t))==="formdata"||e==="object"&&isFunction$2(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams$1=kindOfTest$1("URLSearchParams"),[isReadableStream$1,isRequest$1,isResponse$1,isHeaders$1]=["ReadableStream","Request","Response","Headers"].map(kindOfTest$1),trim$1=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$2(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),isArray$2(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let f;for(i=0;i<l;i++)f=a[i],e.call(null,t[f],f,t)}}function findKey$1(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const _global$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined$1=t=>!isUndefined$1(t)&&t!==_global$1;function merge$1(){const{caseless:t}=isContextDefined$1(this)&&this||{},e={},n=(i,s)=>{const a=t&&findKey$1(e,s)||s;isPlainObject$1(e[a])&&isPlainObject$1(i)?e[a]=merge$1(e[a],i):isPlainObject$1(i)?e[a]=merge$1({},i):isArray$2(i)?e[a]=i.slice():e[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&forEach$2(arguments[i],n);return e}const extend$1=(t,e,n,{allOwnKeys:i}={})=>(forEach$2(e,(s,a)=>{n&&isFunction$2(s)?t[a]=bind$1(s,n):t[a]=s},{allOwnKeys:i}),t),stripBOM$1=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits$1=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject$1=(t,e,n,i)=>{let s,a,l;const f={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)l=s[a],(!i||i(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=n!==!1&&getPrototypeOf$1(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith$1=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},toArray$1=t=>{if(!t)return null;if(isArray$2(t))return t;let e=t.length;if(!isNumber$1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray$3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf$1(Uint8Array)),forEachEntry$1=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},matchAll$1=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},isHTMLForm$1=kindOfTest$1("HTMLFormElement"),toCamelCase$1=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),hasOwnProperty$a=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp$1=kindOfTest$1("RegExp"),reduceDescriptors$1=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};forEach$2(n,(s,a)=>{let l;(l=e(s,a,t))!==!1&&(i[a]=l||s)}),Object.defineProperties(t,i)},freezeMethods$1=t=>{reduceDescriptors$1(t,(e,n)=>{if(isFunction$2(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(isFunction$2(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet$1=(t,e)=>{const n={},i=s=>{s.forEach(a=>{n[a]=!0})};return isArray$2(t)?i(t):i(String(t).split(e)),n},noop$3=()=>{},toFiniteNumber$1=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function isSpecCompliantForm$1(t){return!!(t&&isFunction$2(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject$1=t=>{const e=new Array(10),n=(i,s)=>{if(isObject$2(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const a=isArray$2(i)?[]:{};return forEach$2(i,(l,f)=>{const p=n(l,s+1);!isUndefined$1(p)&&(a[f]=p)}),e[s]=void 0,a}}return i};return n(t,0)},isAsyncFn$1=kindOfTest$1("AsyncFunction"),isThenable$1=t=>t&&(isObject$2(t)||isFunction$2(t))&&isFunction$2(t.then)&&isFunction$2(t.catch),_setImmediate$1=((t,e)=>t?setImmediate:e?((n,i)=>(_global$1.addEventListener("message",({source:s,data:a})=>{s===_global$1&&a===n&&i.length&&i.shift()()},!1),s=>{i.push(s),_global$1.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$2(_global$1.postMessage)),asap$1=typeof queueMicrotask<"u"?queueMicrotask.bind(_global$1):typeof process$1<"u"&&process$1.nextTick||_setImmediate$1,utils$8={isArray:isArray$2,isArrayBuffer:isArrayBuffer$1,isBuffer:isBuffer$2,isFormData:isFormData$1,isArrayBufferView:isArrayBufferView$1,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$2,isPlainObject:isPlainObject$1,isReadableStream:isReadableStream$1,isRequest:isRequest$1,isResponse:isResponse$1,isHeaders:isHeaders$1,isUndefined:isUndefined$1,isDate:isDate$1,isFile:isFile$1,isBlob:isBlob$1,isRegExp:isRegExp$1,isFunction:isFunction$2,isStream:isStream$1,isURLSearchParams:isURLSearchParams$1,isTypedArray:isTypedArray$3,isFileList:isFileList$1,forEach:forEach$2,merge:merge$1,extend:extend$1,trim:trim$1,stripBOM:stripBOM$1,inherits:inherits$1,toFlatObject:toFlatObject$1,kindOf:kindOf$1,kindOfTest:kindOfTest$1,endsWith:endsWith$1,toArray:toArray$1,forEachEntry:forEachEntry$1,matchAll:matchAll$1,isHTMLForm:isHTMLForm$1,hasOwnProperty:hasOwnProperty$a,hasOwnProp:hasOwnProperty$a,reduceDescriptors:reduceDescriptors$1,freezeMethods:freezeMethods$1,toObjectSet:toObjectSet$1,toCamelCase:toCamelCase$1,noop:noop$3,toFiniteNumber:toFiniteNumber$1,findKey:findKey$1,global:_global$1,isContextDefined:isContextDefined$1,isSpecCompliantForm:isSpecCompliantForm$1,toJSONObject:toJSONObject$1,isAsyncFn:isAsyncFn$1,isThenable:isThenable$1,setImmediate:_setImmediate$1,asap:asap$1};function AxiosError$2(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}utils$8.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$8.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$3=AxiosError$2.prototype,descriptors$1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors$1[t]={value:t}});Object.defineProperties(AxiosError$2,descriptors$1);Object.defineProperty(prototype$3,"isAxiosError",{value:!0});AxiosError$2.from=(t,e,n,i,s,a)=>{const l=Object.create(prototype$3);return utils$8.toFlatObject(t,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),AxiosError$2.call(l,t.message,e,n,i,s),l.cause=t,l.name=t.name,a&&Object.assign(l,a),l};const httpAdapter$1=null;function isVisitable$1(t){return utils$8.isPlainObject(t)||utils$8.isArray(t)}function removeBrackets$1(t){return utils$8.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey$1(t,e,n){return t?t.concat(e).map(function(s,a){return s=removeBrackets$1(s),!n&&a?"["+s+"]":s}).join(n?".":""):e}function isFlatArray$1(t){return utils$8.isArray(t)&&!t.some(isVisitable$1)}const predicates$1=utils$8.toFlatObject(utils$8,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$2(t,e,n){if(!utils$8.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=utils$8.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ze,Ze){return!utils$8.isUndefined(Ze[ze])});const i=n.metaTokens,s=n.visitor||B,a=n.dots,l=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&utils$8.isSpecCompliantForm(e);if(!utils$8.isFunction(s))throw new TypeError("visitor must be a function");function C(Ue){if(Ue===null)return"";if(utils$8.isDate(Ue))return Ue.toISOString();if(!p&&utils$8.isBlob(Ue))throw new AxiosError$2("Blob is not supported. Use a Buffer instead.");return utils$8.isArrayBuffer(Ue)||utils$8.isTypedArray(Ue)?p&&typeof Blob=="function"?new Blob([Ue]):Buffer$1.from(Ue):Ue}function B(Ue,ze,Ze){let Qe=Ue;if(Ue&&!Ze&&typeof Ue=="object"){if(utils$8.endsWith(ze,"{}"))ze=i?ze:ze.slice(0,-2),Ue=JSON.stringify(Ue);else if(utils$8.isArray(Ue)&&isFlatArray$1(Ue)||(utils$8.isFileList(Ue)||utils$8.endsWith(ze,"[]"))&&(Qe=utils$8.toArray(Ue)))return ze=removeBrackets$1(ze),Qe.forEach(function(wt,qt){!(utils$8.isUndefined(wt)||wt===null)&&e.append(l===!0?renderKey$1([ze],qt,a):l===null?ze:ze+"[]",C(wt))}),!1}return isVisitable$1(Ue)?!0:(e.append(renderKey$1(Ze,ze,a),C(Ue)),!1)}const N=[],le=Object.assign(predicates$1,{defaultVisitor:B,convertValue:C,isVisitable:isVisitable$1});function Ee(Ue,ze){if(!utils$8.isUndefined(Ue)){if(N.indexOf(Ue)!==-1)throw Error("Circular reference detected in "+ze.join("."));N.push(Ue),utils$8.forEach(Ue,function(Qe,ct){(!(utils$8.isUndefined(Qe)||Qe===null)&&s.call(e,Qe,utils$8.isString(ct)?ct.trim():ct,ze,le))===!0&&Ee(Qe,ze?ze.concat(ct):[ct])}),N.pop()}}if(!utils$8.isObject(t))throw new TypeError("data must be an object");return Ee(t),e}function encode$3(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function AxiosURLSearchParams$1(t,e){this._pairs=[],t&&toFormData$2(t,this,e)}const prototype$2=AxiosURLSearchParams$1.prototype;prototype$2.append=function(e,n){this._pairs.push([e,n])};prototype$2.toString=function(e){const n=e?function(i){return e.call(this,i,encode$3)}:encode$3;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function encode$2(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL$1(t,e,n){if(!e)return t;const i=n&&n.encode||encode$2;utils$8.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(e,n):a=utils$8.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams$1(e,n).toString(i),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}let InterceptorManager$2=class{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$8.forEach(this.handlers,function(i){i!==null&&e(i)})}};const transitionalDefaults$1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$2=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams$1,FormData$2=typeof FormData<"u"?FormData:null,Blob$2=typeof Blob<"u"?Blob:null,platform$3={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$2,FormData:FormData$2,Blob:Blob$2},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv$1=typeof window<"u"&&typeof document<"u",_navigator$1=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv$1=hasBrowserEnv$1&&(!_navigator$1||["ReactNative","NativeScript","NS"].indexOf(_navigator$1.product)<0),hasStandardBrowserWebWorkerEnv$1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin$1=hasBrowserEnv$1&&window.location.href||"http://localhost",utils$7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hasBrowserEnv$1,hasStandardBrowserEnv:hasStandardBrowserEnv$1,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv$1,navigator:_navigator$1,origin:origin$1},Symbol.toStringTag,{value:"Module"})),platform$2={...utils$7,...platform$3};function toURLEncodedForm$1(t,e){return toFormData$2(t,new platform$2.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,a){return platform$2.isNode&&utils$8.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath$1(t){return utils$8.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject$1(t){const e={},n=Object.keys(t);let i;const s=n.length;let a;for(i=0;i<s;i++)a=n[i],e[a]=t[a];return e}function formDataToJSON$1(t){function e(n,i,s,a){let l=n[a++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),p=a>=n.length;return l=!l&&utils$8.isArray(s)?s.length:l,p?(utils$8.hasOwnProp(s,l)?s[l]=[s[l],i]:s[l]=i,!f):((!s[l]||!utils$8.isObject(s[l]))&&(s[l]=[]),e(n,i,s[l],a)&&utils$8.isArray(s[l])&&(s[l]=arrayToObject$1(s[l])),!f)}if(utils$8.isFormData(t)&&utils$8.isFunction(t.entries)){const n={};return utils$8.forEachEntry(t,(i,s)=>{e(parsePropPath$1(i),s,n,0)}),n}return null}function stringifySafely$1(t,e,n){if(utils$8.isString(t))try{return(e||JSON.parse)(t),utils$8.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const defaults$2={transitional:transitionalDefaults$1,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,a=utils$8.isObject(e);if(a&&utils$8.isHTMLForm(e)&&(e=new FormData(e)),utils$8.isFormData(e))return s?JSON.stringify(formDataToJSON$1(e)):e;if(utils$8.isArrayBuffer(e)||utils$8.isBuffer(e)||utils$8.isStream(e)||utils$8.isFile(e)||utils$8.isBlob(e)||utils$8.isReadableStream(e))return e;if(utils$8.isArrayBufferView(e))return e.buffer;if(utils$8.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm$1(e,this.formSerializer).toString();if((f=utils$8.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return toFormData$2(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),stringifySafely$1(e)):e}],transformResponse:[function(e){const n=this.transitional||defaults$2.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(utils$8.isResponse(e)||utils$8.isReadableStream(e))return e;if(e&&utils$8.isString(e)&&(i&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(f){if(l)throw f.name==="SyntaxError"?AxiosError$2.from(f,AxiosError$2.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$2.classes.FormData,Blob:platform$2.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$8.forEach(["delete","get","head","post","put","patch"],t=>{defaults$2.headers[t]={}});const ignoreDuplicateOf$1=utils$8.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),i=l.substring(s+1).trim(),!(!n||e[n]&&ignoreDuplicateOf$1[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},$internals$1=Symbol("internals");function normalizeHeader$1(t){return t&&String(t).trim().toLowerCase()}function normalizeValue$1(t){return t===!1||t==null?t:utils$8.isArray(t)?t.map(normalizeValue$1):String(t)}function parseTokens$1(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const isValidHeaderName$1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue$1(t,e,n,i,s){if(utils$8.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!utils$8.isString(e)){if(utils$8.isString(i))return e.indexOf(i)!==-1;if(utils$8.isRegExp(i))return i.test(e)}}function formatHeader$1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function buildAccessors$1(t,e){const n=utils$8.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,a,l){return this[i].call(this,e,s,a,l)},configurable:!0})})}let AxiosHeaders$3=class{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function a(f,p,C){const B=normalizeHeader$1(p);if(!B)throw new Error("header name must be a non-empty string");const N=utils$8.findKey(s,B);(!N||s[N]===void 0||C===!0||C===void 0&&s[N]!==!1)&&(s[N||p]=normalizeValue$1(f))}const l=(f,p)=>utils$8.forEach(f,(C,B)=>a(C,B,p));if(utils$8.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(utils$8.isString(e)&&(e=e.trim())&&!isValidHeaderName$1(e))l(parseHeaders$1(e),n);else if(utils$8.isHeaders(e))for(const[f,p]of e.entries())a(p,f,i);else e!=null&&a(n,e,i);return this}get(e,n){if(e=normalizeHeader$1(e),e){const i=utils$8.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return parseTokens$1(s);if(utils$8.isFunction(n))return n.call(this,s,i);if(utils$8.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader$1(e),e){const i=utils$8.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||matchHeaderValue$1(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function a(l){if(l=normalizeHeader$1(l),l){const f=utils$8.findKey(i,l);f&&(!n||matchHeaderValue$1(i,i[f],f,n))&&(delete i[f],s=!0)}}return utils$8.isArray(e)?e.forEach(a):a(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const a=n[i];(!e||matchHeaderValue$1(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const n=this,i={};return utils$8.forEach(this,(s,a)=>{const l=utils$8.findKey(i,a);if(l){n[l]=normalizeValue$1(s),delete n[a];return}const f=e?formatHeader$1(a):String(a).trim();f!==a&&delete n[a],n[f]=normalizeValue$1(s),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils$8.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&utils$8.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[$internals$1]=this[$internals$1]={accessors:{}}).accessors,s=this.prototype;function a(l){const f=normalizeHeader$1(l);i[f]||(buildAccessors$1(s,l),i[f]=!0)}return utils$8.isArray(e)?e.forEach(a):a(e),this}};AxiosHeaders$3.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$8.reduceDescriptors(AxiosHeaders$3.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});utils$8.freezeMethods(AxiosHeaders$3);function transformData$1(t,e){const n=this||defaults$2,i=e||n,s=AxiosHeaders$3.from(i.headers);let a=i.data;return utils$8.forEach(t,function(f){a=f.call(n,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function isCancel$2(t){return!!(t&&t.__CANCEL__)}function CanceledError$2(t,e,n){AxiosError$2.call(this,t??"canceled",AxiosError$2.ERR_CANCELED,e,n),this.name="CanceledError"}utils$8.inherits(CanceledError$2,AxiosError$2,{__CANCEL__:!0});function settle$1(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new AxiosError$2("Request failed with status code "+n.status,[AxiosError$2.ERR_BAD_REQUEST,AxiosError$2.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol$1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer$1(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,a=0,l;return e=e!==void 0?e:1e3,function(p){const C=Date.now(),B=i[a];l||(l=C),n[s]=p,i[s]=C;let N=a,le=0;for(;N!==s;)le+=n[N++],N=N%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),C-l<e)return;const Ee=B&&C-B;return Ee?Math.round(le*1e3/Ee):void 0}}function throttle$1(t,e){let n=0,i=1e3/e,s,a;const l=(C,B=Date.now())=>{n=B,s=null,a&&(clearTimeout(a),a=null),t.apply(null,C)};return[(...C)=>{const B=Date.now(),N=B-n;N>=i?l(C,B):(s=C,a||(a=setTimeout(()=>{a=null,l(s)},i-N)))},()=>s&&l(s)]}const progressEventReducer$1=(t,e,n=3)=>{let i=0;const s=speedometer$1(50,250);return throttle$1(a=>{const l=a.loaded,f=a.lengthComputable?a.total:void 0,p=l-i,C=s(p),B=l<=f;i=l;const N={loaded:l,total:f,progress:f?l/f:void 0,bytes:p,rate:C||void 0,estimated:C&&f&&B?(f-l)/C:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(N)},n)},progressEventDecorator$1=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},asyncDecorator$1=t=>(...e)=>utils$8.asap(()=>t(...e)),isURLSameOrigin$1=platform$2.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,platform$2.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(platform$2.origin),platform$2.navigator&&/(msie|trident)/i.test(platform$2.navigator.userAgent)):()=>!0,cookies$1=platform$2.hasStandardBrowserEnv?{write(t,e,n,i,s,a){const l=[t+"="+encodeURIComponent(e)];utils$8.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),utils$8.isString(i)&&l.push("path="+i),utils$8.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL$1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs$1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath$1(t,e,n){let i=!isAbsoluteURL$1(e);return t&&(i||n==!1)?combineURLs$1(t,e):e}const headersToObject$1=t=>t instanceof AxiosHeaders$3?{...t}:t;function mergeConfig$2(t,e){e=e||{};const n={};function i(C,B,N,le){return utils$8.isPlainObject(C)&&utils$8.isPlainObject(B)?utils$8.merge.call({caseless:le},C,B):utils$8.isPlainObject(B)?utils$8.merge({},B):utils$8.isArray(B)?B.slice():B}function s(C,B,N,le){if(utils$8.isUndefined(B)){if(!utils$8.isUndefined(C))return i(void 0,C,N,le)}else return i(C,B,N,le)}function a(C,B){if(!utils$8.isUndefined(B))return i(void 0,B)}function l(C,B){if(utils$8.isUndefined(B)){if(!utils$8.isUndefined(C))return i(void 0,C)}else return i(void 0,B)}function f(C,B,N){if(N in e)return i(C,B);if(N in t)return i(void 0,C)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(C,B,N)=>s(headersToObject$1(C),headersToObject$1(B),N,!0)};return utils$8.forEach(Object.keys(Object.assign({},t,e)),function(B){const N=p[B]||s,le=N(t[B],e[B],B);utils$8.isUndefined(le)&&N!==f||(n[B]=le)}),n}const resolveConfig$1=t=>{const e=mergeConfig$2({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:f}=e;e.headers=l=AxiosHeaders$3.from(l),e.url=buildURL$1(buildFullPath$1(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(utils$8.isFormData(n)){if(platform$2.hasStandardBrowserEnv||platform$2.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((p=l.getContentType())!==!1){const[C,...B]=p?p.split(";").map(N=>N.trim()).filter(Boolean):[];l.setContentType([C||"multipart/form-data",...B].join("; "))}}if(platform$2.hasStandardBrowserEnv&&(i&&utils$8.isFunction(i)&&(i=i(e)),i||i!==!1&&isURLSameOrigin$1(e.url))){const C=s&&a&&cookies$1.read(a);C&&l.set(s,C)}return e},isXHRAdapterSupported$1=typeof XMLHttpRequest<"u",xhrAdapter$1=isXHRAdapterSupported$1&&function(t){return new Promise(function(n,i){const s=resolveConfig$1(t);let a=s.data;const l=AxiosHeaders$3.from(s.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:C}=s,B,N,le,Ee,Ue;function ze(){Ee&&Ee(),Ue&&Ue(),s.cancelToken&&s.cancelToken.unsubscribe(B),s.signal&&s.signal.removeEventListener("abort",B)}let Ze=new XMLHttpRequest;Ze.open(s.method.toUpperCase(),s.url,!0),Ze.timeout=s.timeout;function Qe(){if(!Ze)return;const wt=AxiosHeaders$3.from("getAllResponseHeaders"in Ze&&Ze.getAllResponseHeaders()),nr={data:!f||f==="text"||f==="json"?Ze.responseText:Ze.response,status:Ze.status,statusText:Ze.statusText,headers:wt,config:t,request:Ze};settle$1(function(or){n(or),ze()},function(or){i(or),ze()},nr),Ze=null}"onloadend"in Ze?Ze.onloadend=Qe:Ze.onreadystatechange=function(){!Ze||Ze.readyState!==4||Ze.status===0&&!(Ze.responseURL&&Ze.responseURL.indexOf("file:")===0)||setTimeout(Qe)},Ze.onabort=function(){Ze&&(i(new AxiosError$2("Request aborted",AxiosError$2.ECONNABORTED,t,Ze)),Ze=null)},Ze.onerror=function(){i(new AxiosError$2("Network Error",AxiosError$2.ERR_NETWORK,t,Ze)),Ze=null},Ze.ontimeout=function(){let qt=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const nr=s.transitional||transitionalDefaults$1;s.timeoutErrorMessage&&(qt=s.timeoutErrorMessage),i(new AxiosError$2(qt,nr.clarifyTimeoutError?AxiosError$2.ETIMEDOUT:AxiosError$2.ECONNABORTED,t,Ze)),Ze=null},a===void 0&&l.setContentType(null),"setRequestHeader"in Ze&&utils$8.forEach(l.toJSON(),function(qt,nr){Ze.setRequestHeader(nr,qt)}),utils$8.isUndefined(s.withCredentials)||(Ze.withCredentials=!!s.withCredentials),f&&f!=="json"&&(Ze.responseType=s.responseType),C&&([le,Ue]=progressEventReducer$1(C,!0),Ze.addEventListener("progress",le)),p&&Ze.upload&&([N,Ee]=progressEventReducer$1(p),Ze.upload.addEventListener("progress",N),Ze.upload.addEventListener("loadend",Ee)),(s.cancelToken||s.signal)&&(B=wt=>{Ze&&(i(!wt||wt.type?new CanceledError$2(null,t,Ze):wt),Ze.abort(),Ze=null)},s.cancelToken&&s.cancelToken.subscribe(B),s.signal&&(s.signal.aborted?B():s.signal.addEventListener("abort",B)));const ct=parseProtocol$1(s.url);if(ct&&platform$2.protocols.indexOf(ct)===-1){i(new AxiosError$2("Unsupported protocol "+ct+":",AxiosError$2.ERR_BAD_REQUEST,t));return}Ze.send(a||null)})},composeSignals$2=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,s;const a=function(C){if(!s){s=!0,f();const B=C instanceof Error?C:this.reason;i.abort(B instanceof AxiosError$2?B:new CanceledError$2(B instanceof Error?B.message:B))}};let l=e&&setTimeout(()=>{l=null,a(new AxiosError$2(`timeout ${e} of ms exceeded`,AxiosError$2.ETIMEDOUT))},e);const f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(C=>{C.unsubscribe?C.unsubscribe(a):C.removeEventListener("abort",a)}),t=null)};t.forEach(C=>C.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>utils$8.asap(f),p}},streamChunk$1=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,s;for(;i<n;)s=i+e,yield t.slice(i,s),i=s},readBytes$1=async function*(t,e){for await(const n of readStream$1(t))yield*streamChunk$1(n,e)},readStream$1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},trackStream$1=(t,e,n,i)=>{const s=readBytes$1(t,e);let a=0,l,f=p=>{l||(l=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:C,value:B}=await s.next();if(C){f(),p.close();return}let N=B.byteLength;if(n){let le=a+=N;n(le)}p.enqueue(new Uint8Array(B))}catch(C){throw f(C),C}},cancel(p){return f(p),s.return()}},{highWaterMark:2})},isFetchSupported$1=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported$1=isFetchSupported$1&&typeof ReadableStream=="function",encodeText$1=isFetchSupported$1&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),test$1=(t,...e)=>{try{return!!t(...e)}catch{return!1}},supportsRequestStream$1=isReadableStreamSupported$1&&test$1(()=>{let t=!1;const e=new Request(platform$2.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),DEFAULT_CHUNK_SIZE$1=64*1024,supportsResponseStream$1=isReadableStreamSupported$1&&test$1(()=>utils$8.isReadableStream(new Response("").body)),resolvers$1={stream:supportsResponseStream$1&&(t=>t.body)};isFetchSupported$1&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers$1[e]&&(resolvers$1[e]=utils$8.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new AxiosError$2(`Response type '${e}' is not supported`,AxiosError$2.ERR_NOT_SUPPORT,i)})})})(new Response);const getBodyLength$1=async t=>{if(t==null)return 0;if(utils$8.isBlob(t))return t.size;if(utils$8.isSpecCompliantForm(t))return(await new Request(platform$2.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(utils$8.isArrayBufferView(t)||utils$8.isArrayBuffer(t))return t.byteLength;if(utils$8.isURLSearchParams(t)&&(t=t+""),utils$8.isString(t))return(await encodeText$1(t)).byteLength},resolveBodyLength$1=async(t,e)=>{const n=utils$8.toFiniteNumber(t.getContentLength());return n??getBodyLength$1(e)},fetchAdapter$1=isFetchSupported$1&&(async t=>{let{url:e,method:n,data:i,signal:s,cancelToken:a,timeout:l,onDownloadProgress:f,onUploadProgress:p,responseType:C,headers:B,withCredentials:N="same-origin",fetchOptions:le}=resolveConfig$1(t);C=C?(C+"").toLowerCase():"text";let Ee=composeSignals$2([s,a&&a.toAbortSignal()],l),Ue;const ze=Ee&&Ee.unsubscribe&&(()=>{Ee.unsubscribe()});let Ze;try{if(p&&supportsRequestStream$1&&n!=="get"&&n!=="head"&&(Ze=await resolveBodyLength$1(B,i))!==0){let nr=new Request(e,{method:"POST",body:i,duplex:"half"}),ir;if(utils$8.isFormData(i)&&(ir=nr.headers.get("content-type"))&&B.setContentType(ir),nr.body){const[or,ur]=progressEventDecorator$1(Ze,progressEventReducer$1(asyncDecorator$1(p)));i=trackStream$1(nr.body,DEFAULT_CHUNK_SIZE$1,or,ur)}}utils$8.isString(N)||(N=N?"include":"omit");const Qe="credentials"in Request.prototype;Ue=new Request(e,{...le,signal:Ee,method:n.toUpperCase(),headers:B.normalize().toJSON(),body:i,duplex:"half",credentials:Qe?N:void 0});let ct=await fetch(Ue);const wt=supportsResponseStream$1&&(C==="stream"||C==="response");if(supportsResponseStream$1&&(f||wt&&ze)){const nr={};["status","statusText","headers"].forEach(hr=>{nr[hr]=ct[hr]});const ir=utils$8.toFiniteNumber(ct.headers.get("content-length")),[or,ur]=f&&progressEventDecorator$1(ir,progressEventReducer$1(asyncDecorator$1(f),!0))||[];ct=new Response(trackStream$1(ct.body,DEFAULT_CHUNK_SIZE$1,or,()=>{ur&&ur(),ze&&ze()}),nr)}C=C||"text";let qt=await resolvers$1[utils$8.findKey(resolvers$1,C)||"text"](ct,t);return!wt&&ze&&ze(),await new Promise((nr,ir)=>{settle$1(nr,ir,{data:qt,headers:AxiosHeaders$3.from(ct.headers),status:ct.status,statusText:ct.statusText,config:t,request:Ue})})}catch(Qe){throw ze&&ze(),Qe&&Qe.name==="TypeError"&&/fetch/i.test(Qe.message)?Object.assign(new AxiosError$2("Network Error",AxiosError$2.ERR_NETWORK,t,Ue),{cause:Qe.cause||Qe}):AxiosError$2.from(Qe,Qe&&Qe.code,t,Ue)}}),knownAdapters$1={http:httpAdapter$1,xhr:xhrAdapter$1,fetch:fetchAdapter$1};utils$8.forEach(knownAdapters$1,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const renderReason$1=t=>`- ${t}`,isResolvedHandle$1=t=>utils$8.isFunction(t)||t===null||t===!1,adapters$1={getAdapter:t=>{t=utils$8.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let a=0;a<e;a++){n=t[a];let l;if(i=n,!isResolvedHandle$1(n)&&(i=knownAdapters$1[(l=String(n)).toLowerCase()],i===void 0))throw new AxiosError$2(`Unknown adapter '${l}'`);if(i)break;s[l||"#"+a]=i}if(!i){const a=Object.entries(s).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(renderReason$1).join(`
`):" "+renderReason$1(a[0]):"as no adapter specified";throw new AxiosError$2("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:knownAdapters$1};function throwIfCancellationRequested$1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError$2(null,t)}function dispatchRequest$1(t){return throwIfCancellationRequested$1(t),t.headers=AxiosHeaders$3.from(t.headers),t.data=transformData$1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters$1.getAdapter(t.adapter||defaults$2.adapter)(t).then(function(i){return throwIfCancellationRequested$1(t),i.data=transformData$1.call(t,t.transformResponse,i),i.headers=AxiosHeaders$3.from(i.headers),i},function(i){return isCancel$2(i)||(throwIfCancellationRequested$1(t),i&&i.response&&(i.response.data=transformData$1.call(t,t.transformResponse,i.response),i.response.headers=AxiosHeaders$3.from(i.response.headers))),Promise.reject(i)})}const VERSION$3="1.8.4",validators$3={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$3[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings$1={};validators$3.transitional=function(e,n,i){function s(a,l){return"[Axios v"+VERSION$3+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,f)=>{if(e===!1)throw new AxiosError$2(s(l," has been removed"+(n?" in "+n:"")),AxiosError$2.ERR_DEPRECATED);return n&&!deprecatedWarnings$1[l]&&(deprecatedWarnings$1[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,f):!0}};validators$3.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function assertOptions$1(t,e,n){if(typeof t!="object")throw new AxiosError$2("options must be an object",AxiosError$2.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const a=i[s],l=e[a];if(l){const f=t[a],p=f===void 0||l(f,a,t);if(p!==!0)throw new AxiosError$2("option "+a+" must be "+p,AxiosError$2.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$2("Unknown option "+a,AxiosError$2.ERR_BAD_OPTION)}}const validator$2={assertOptions:assertOptions$1,validators:validators$3},validators$2=validator$2.validators;let Axios$3=class{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$2,response:new InterceptorManager$2}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig$2(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:a}=n;i!==void 0&&validator$2.assertOptions(i,{silentJSONParsing:validators$2.transitional(validators$2.boolean),forcedJSONParsing:validators$2.transitional(validators$2.boolean),clarifyTimeoutError:validators$2.transitional(validators$2.boolean)},!1),s!=null&&(utils$8.isFunction(s)?n.paramsSerializer={serialize:s}:validator$2.assertOptions(s,{encode:validators$2.function,serialize:validators$2.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator$2.assertOptions(n,{baseUrl:validators$2.spelling("baseURL"),withXsrfToken:validators$2.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&utils$8.merge(a.common,a[n.method]);a&&utils$8.forEach(["delete","get","head","post","put","patch","common"],Ue=>{delete a[Ue]}),n.headers=AxiosHeaders$3.concat(l,a);const f=[];let p=!0;this.interceptors.request.forEach(function(ze){typeof ze.runWhen=="function"&&ze.runWhen(n)===!1||(p=p&&ze.synchronous,f.unshift(ze.fulfilled,ze.rejected))});const C=[];this.interceptors.response.forEach(function(ze){C.push(ze.fulfilled,ze.rejected)});let B,N=0,le;if(!p){const Ue=[dispatchRequest$1.bind(this),void 0];for(Ue.unshift.apply(Ue,f),Ue.push.apply(Ue,C),le=Ue.length,B=Promise.resolve(n);N<le;)B=B.then(Ue[N++],Ue[N++]);return B}le=f.length;let Ee=n;for(N=0;N<le;){const Ue=f[N++],ze=f[N++];try{Ee=Ue(Ee)}catch(Ze){ze.call(this,Ze);break}}try{B=dispatchRequest$1.call(this,Ee)}catch(Ue){return Promise.reject(Ue)}for(N=0,le=C.length;N<le;)B=B.then(C[N++],C[N++]);return B}getUri(e){e=mergeConfig$2(this.defaults,e);const n=buildFullPath$1(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL$1(n,e.params,e.paramsSerializer)}};utils$8.forEach(["delete","get","head","options"],function(e){Axios$3.prototype[e]=function(n,i){return this.request(mergeConfig$2(i||{},{method:e,url:n,data:(i||{}).data}))}});utils$8.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,f){return this.request(mergeConfig$2(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Axios$3.prototype[e]=n(),Axios$3.prototype[e+"Form"]=n(!0)});let CancelToken$3=class bo{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(f=>{i.subscribe(f),a=f}).then(s);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,f){i.reason||(i.reason=new CanceledError$2(a,l,f),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new bo(function(s){e=s}),cancel:e}}};function spread$2(t){return function(n){return t.apply(null,n)}}function isAxiosError$2(t){return utils$8.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode$3={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$3).forEach(([t,e])=>{HttpStatusCode$3[e]=t});function createInstance$1(t){const e=new Axios$3(t),n=bind$1(Axios$3.prototype.request,e);return utils$8.extend(n,Axios$3.prototype,e,{allOwnKeys:!0}),utils$8.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return createInstance$1(mergeConfig$2(t,s))},n}const axios$1=createInstance$1(defaults$2);axios$1.Axios=Axios$3;axios$1.CanceledError=CanceledError$2;axios$1.CancelToken=CancelToken$3;axios$1.isCancel=isCancel$2;axios$1.VERSION=VERSION$3;axios$1.toFormData=toFormData$2;axios$1.AxiosError=AxiosError$2;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(e){return Promise.all(e)};axios$1.spread=spread$2;axios$1.isAxiosError=isAxiosError$2;axios$1.mergeConfig=mergeConfig$2;axios$1.AxiosHeaders=AxiosHeaders$3;axios$1.formToJSON=t=>formDataToJSON$1(utils$8.isHTMLForm(t)?new FormData(t):t);axios$1.getAdapter=adapters$1.getAdapter;axios$1.HttpStatusCode=HttpStatusCode$3;axios$1.default=axios$1;const{Axios:Axios$2,AxiosError:AxiosError$1,CanceledError:CanceledError$1,isCancel:isCancel$1,CancelToken:CancelToken$2,VERSION:VERSION$2,all,Cancel,isAxiosError:isAxiosError$1,spread:spread$1,toFormData:toFormData$1,AxiosHeaders:AxiosHeaders$2,HttpStatusCode:HttpStatusCode$2,formToJSON,getAdapter,mergeConfig:mergeConfig$1}=axios$1;var __defProp$f=Object.defineProperty,__defNormalProp$3=(t,e,n)=>e in t?__defProp$f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField$2=(t,e,n)=>(__defNormalProp$3(t,e+"",n),n),cacheTime5min=5*60*1e3,cacheTime24h=24*60*60*1e3;function getFutureTime(t){return Date.parse(new Date().toString())+t}var CachedContent=class{constructor(t,e=0){Or(this,"overdueTime");Or(this,"value");this.overdueTime=e,this.value=t}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};Decimal$1.config({precision:64,rounding:Decimal$1.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var decimal_default$2=Decimal$1,ClmmpoolsError$1=class extends Error{constructor(n,i){super(n);Or(this,"message");Or(this,"errorCode");this.message=n,this.errorCode=i}static isClmmpoolsErrorCode(n,i){return n instanceof ClmmpoolsError$1&&n.errorCode===i}},ZERO$2=new BN(0),ONE$1=new BN(1),TWO$2=new BN(2);TWO$2.pow(new BN(128));var U64_MAX$1=TWO$2.pow(new BN(64)).sub(ONE$1),U128_MAX$1=TWO$2.pow(new BN(128)).sub(ONE$1),MathUtil$1=class{static toX64_BN(e){return e.mul(new BN(2).pow(new BN(64)))}static toX64_Decimal(e){return e.mul(decimal_default$2.pow(2,64))}static toX64(e){return new BN(e.mul(decimal_default$2.pow(2,64)).floor().toFixed())}static fromX64(e){return new decimal_default$2(e.toString()).mul(decimal_default$2.pow(2,-64))}static fromX64_Decimal(e){return e.mul(decimal_default$2.pow(2,-64))}static fromX64_BN(e){return e.div(new BN(2).pow(new BN(64)))}static shiftRightRoundUp(e){let n=e.shrn(64);return e.mod(U64_MAX$1).gt(ZERO$2)&&(n=n.add(ONE$1)),n}static divRoundUp(e,n){return e.mod(n).eq(ZERO$2)?e.div(n):e.div(n).add(new BN(1))}static subUnderflowU128(e,n){return e.lt(n)?e.sub(n).add(U128_MAX$1):e.sub(n)}static checkUnsignedSub(e,n){const i=e.sub(n);if(i.isNeg())throw new ClmmpoolsError$1("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,n,i){const s=e.mul(n);if(this.isOverflow(s,i))throw new ClmmpoolsError$1("Multiplication overflow","MultiplicationOverflow");return s}static checkMulDivFloor(e,n,i,s){if(i.eq(ZERO$2))throw new ClmmpoolsError$1("Devide by zero","DivideByZero");const a=e.mul(n).div(i);if(this.isOverflow(a,s))throw new ClmmpoolsError$1("Multiplication div overflow","MulDivOverflow");return a}static checkMulDivCeil(e,n,i,s){if(i.eq(ZERO$2))throw new ClmmpoolsError$1("Devide by zero","DivideByZero");const a=e.mul(n).add(i.sub(ONE$1)).div(i);if(this.isOverflow(a,s))throw new ClmmpoolsError$1("Multiplication div overflow","MulDivOverflow");return a}static checkMulDivRound(e,n,i,s){if(i.eq(ZERO$2))throw new ClmmpoolsError$1("Devide by zero","DivideByZero");const a=e.mul(n.add(i.shrn(1))).div(i);if(this.isOverflow(a,s))throw new ClmmpoolsError$1("Multiplication div overflow","MulDivOverflow");return a}static checkMulShiftRight(e,n,i,s){const a=e.mul(n).div(new BN(2).pow(new BN(i)));if(this.isOverflow(a,s))throw new ClmmpoolsError$1("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftRight64RoundUpIf(e,n,i,s){const a=e.mul(n),f=s&&a.and(U64_MAX$1).gt(ZERO$2)?a.shrn(64).add(ONE$1):a.shrn(64);if(this.isOverflow(f,i))throw new ClmmpoolsError$1("Multiplication shift right overflow","MulShiftRightOverflow");return f}static checkMulShiftLeft(e,n,i,s){const a=e.mul(n).shln(i);if(this.isOverflow(a,s))throw new ClmmpoolsError$1("Multiplication shift left overflow","MulShiftLeftOverflow");return a}static checkDivRoundUpIf(e,n,i){if(n.eq(ZERO$2))throw new ClmmpoolsError$1("Devide by zero","DivideByZero");return i?this.divRoundUp(e,n):e.div(n)}static isOverflow(e,n){return e.gte(TWO$2.pow(new BN(n)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(ZERO$2)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new BN("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new BN(1)))}static neg_from(e){return e.eq(ZERO$2)?e:this.u128_neg(e).add(new BN(1)).or(new BN(1).shln(127))}};function transClmmpoolDataWithoutTicks(t){return{coinA:t.coinTypeA,coinB:t.coinTypeB,currentSqrtPrice:new BN(t.current_sqrt_price),currentTickIndex:t.current_tick_index,feeGrowthGlobalA:new BN(t.fee_growth_global_a),feeGrowthGlobalB:new BN(t.fee_growth_global_b),feeProtocolCoinA:new BN(t.fee_protocol_coin_a),feeProtocolCoinB:new BN(t.fee_protocol_coin_b),feeRate:new BN(t.fee_rate),liquidity:new BN(t.liquidity),tickIndexes:[],tickSpacing:Number(t.tickSpacing),ticks:[],collection_name:""}}var MAX_TICK_INDEX=443636,MIN_TICK_INDEX=-443636,MAX_SQRT_PRICE$1="79226673515401279992447579055",MIN_SQRT_PRICE$1="4295048016",FEE_RATE_DENOMINATOR$1=new BN(1e6),CLOCK_ADDRESS$2="0x0000000000000000000000000000000000000000000000000000000000000006",ClmmPartnerModule="partner",ClmmIntegratePoolModule="pool_script",ClmmIntegratePoolV2Module$1="pool_script_v2",ClmmIntegratePoolV3Module="pool_script_v3",ClmmIntegrateRouterModule$1="router",ClmmIntegrateRouterWithPartnerModule$1="router_with_partner",ClmmFetcherModule="fetcher_script",ClmmExpectSwapModule="expect_swap",ClmmIntegrateUtilsModule$1="utils",DeepbookCustodianV2Moudle$1="custodian_v2",DeepbookClobV2Moudle$1="clob_v2",DeepbookEndpointsV2Moudle$1="endpoints_v2",ClmmPositionStatus=(t=>(t.Deleted="Deleted",t.Exists="Exists",t.NotExists="NotExists",t))(ClmmPositionStatus||{});function getPackagerConfigs$1(t){if(t.config===void 0)throw new ClmmpoolsError$1(`package: ${t.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return t.config}var poolFilterEvenTypes=["RemoveLiquidityEvent","SwapEvent","AddLiquidityEvent"],BIT_PRECISION$1=14,LOG_B_2_X32$1="59543866431248",LOG_B_P_ERR_MARGIN_LOWER_X64$1="184467440737095516",LOG_B_P_ERR_MARGIN_UPPER_X64$1="15793534762490258745",TICK_BOUND=443636;function signedShiftLeft$1(t,e,n){const i=t.toTwos(n).shln(e);return i.imaskn(n+1),i.fromTwos(n)}function signedShiftRight$1(t,e,n){const i=t.toTwos(n).shrn(e);return i.imaskn(n-e+1),i.fromTwos(n-e)}function tickIndexToSqrtPricePositive$1(t){let e;return t&1?e=new BN("79232123823359799118286999567"):e=new BN("79228162514264337593543950336"),t&2&&(e=signedShiftRight$1(e.mul(new BN("79236085330515764027303304731")),96,256)),t&4&&(e=signedShiftRight$1(e.mul(new BN("79244008939048815603706035061")),96,256)),t&8&&(e=signedShiftRight$1(e.mul(new BN("79259858533276714757314932305")),96,256)),t&16&&(e=signedShiftRight$1(e.mul(new BN("79291567232598584799939703904")),96,256)),t&32&&(e=signedShiftRight$1(e.mul(new BN("79355022692464371645785046466")),96,256)),t&64&&(e=signedShiftRight$1(e.mul(new BN("79482085999252804386437311141")),96,256)),t&128&&(e=signedShiftRight$1(e.mul(new BN("79736823300114093921829183326")),96,256)),t&256&&(e=signedShiftRight$1(e.mul(new BN("80248749790819932309965073892")),96,256)),t&512&&(e=signedShiftRight$1(e.mul(new BN("81282483887344747381513967011")),96,256)),t&1024&&(e=signedShiftRight$1(e.mul(new BN("83390072131320151908154831281")),96,256)),t&2048&&(e=signedShiftRight$1(e.mul(new BN("87770609709833776024991924138")),96,256)),t&4096&&(e=signedShiftRight$1(e.mul(new BN("97234110755111693312479820773")),96,256)),t&8192&&(e=signedShiftRight$1(e.mul(new BN("119332217159966728226237229890")),96,256)),t&16384&&(e=signedShiftRight$1(e.mul(new BN("179736315981702064433883588727")),96,256)),t&32768&&(e=signedShiftRight$1(e.mul(new BN("407748233172238350107850275304")),96,256)),t&65536&&(e=signedShiftRight$1(e.mul(new BN("2098478828474011932436660412517")),96,256)),t&131072&&(e=signedShiftRight$1(e.mul(new BN("55581415166113811149459800483533")),96,256)),t&262144&&(e=signedShiftRight$1(e.mul(new BN("38992368544603139932233054999993551")),96,256)),signedShiftRight$1(e,32,256)}function tickIndexToSqrtPriceNegative$1(t){const e=Math.abs(t);let n;return e&1?n=new BN("18445821805675392311"):n=new BN("18446744073709551616"),e&2&&(n=signedShiftRight$1(n.mul(new BN("18444899583751176498")),64,256)),e&4&&(n=signedShiftRight$1(n.mul(new BN("18443055278223354162")),64,256)),e&8&&(n=signedShiftRight$1(n.mul(new BN("18439367220385604838")),64,256)),e&16&&(n=signedShiftRight$1(n.mul(new BN("18431993317065449817")),64,256)),e&32&&(n=signedShiftRight$1(n.mul(new BN("18417254355718160513")),64,256)),e&64&&(n=signedShiftRight$1(n.mul(new BN("18387811781193591352")),64,256)),e&128&&(n=signedShiftRight$1(n.mul(new BN("18329067761203520168")),64,256)),e&256&&(n=signedShiftRight$1(n.mul(new BN("18212142134806087854")),64,256)),e&512&&(n=signedShiftRight$1(n.mul(new BN("17980523815641551639")),64,256)),e&1024&&(n=signedShiftRight$1(n.mul(new BN("17526086738831147013")),64,256)),e&2048&&(n=signedShiftRight$1(n.mul(new BN("16651378430235024244")),64,256)),e&4096&&(n=signedShiftRight$1(n.mul(new BN("15030750278693429944")),64,256)),e&8192&&(n=signedShiftRight$1(n.mul(new BN("12247334978882834399")),64,256)),e&16384&&(n=signedShiftRight$1(n.mul(new BN("8131365268884726200")),64,256)),e&32768&&(n=signedShiftRight$1(n.mul(new BN("3584323654723342297")),64,256)),e&65536&&(n=signedShiftRight$1(n.mul(new BN("696457651847595233")),64,256)),e&131072&&(n=signedShiftRight$1(n.mul(new BN("26294789957452057")),64,256)),e&262144&&(n=signedShiftRight$1(n.mul(new BN("37481735321082")),64,256)),n}var TickMath$1=class{static priceToSqrtPriceX64(e,n,i){return MathUtil$1.toX64(e.mul(decimal_default$2.pow(10,i-n)).sqrt())}static sqrtPriceX64ToPrice(e,n,i){return MathUtil$1.fromX64(e).pow(2).mul(decimal_default$2.pow(10,n-i))}static tickIndexToSqrtPriceX64(e){return e>0?new BN(tickIndexToSqrtPricePositive$1(e)):new BN(tickIndexToSqrtPriceNegative$1(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new BN(MAX_SQRT_PRICE$1))||e.lt(new BN(MIN_SQRT_PRICE$1)))throw new ClmmpoolsError$1("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const n=e.bitLength()-1,i=new BN(n-64),s=signedShiftLeft$1(i,32,128);let a=new BN("8000000000000000","hex"),l=0,f=new BN(0),p=n>=64?e.shrn(n-63):e.shln(63-n);for(;a.gt(new BN(0))&&l<BIT_PRECISION$1;){p=p.mul(p);const ze=p.shrn(127);p=p.shrn(63+ze.toNumber()),f=f.add(a.mul(ze)),a=a.shrn(1),l+=1}const C=f.shrn(32),N=s.add(C).mul(new BN(LOG_B_2_X32$1)),le=signedShiftRight$1(N.sub(new BN(LOG_B_P_ERR_MARGIN_LOWER_X64$1)),64,128).toNumber(),Ee=signedShiftRight$1(N.add(new BN(LOG_B_P_ERR_MARGIN_UPPER_X64$1)),64,128).toNumber();return le===Ee?le:TickMath$1.tickIndexToSqrtPriceX64(Ee).lte(e)?Ee:le}static tickIndexToPrice(e,n,i){return TickMath$1.sqrtPriceX64ToPrice(TickMath$1.tickIndexToSqrtPriceX64(e),n,i)}static priceToTickIndex(e,n,i){return TickMath$1.sqrtPriceX64ToTickIndex(TickMath$1.priceToSqrtPriceX64(e,n,i))}static priceToInitializableTickIndex(e,n,i,s){return TickMath$1.getInitializableTickIndex(TickMath$1.priceToTickIndex(e,n,i),s)}static getInitializableTickIndex(e,n){return e-e%n}static getNextInitializableTickIndex(e,n){return TickMath$1.getInitializableTickIndex(e,n)+n}static getPrevInitializableTickIndex(e,n){return TickMath$1.getInitializableTickIndex(e,n)-n}};function getTickDataFromUrlData(t){const e=[];for(const n of t){const i={objectId:n.objectId,index:Number(asIntN(BigInt(n.index)).toString()),sqrtPrice:n.sqrtPrice,liquidityNet:new BN(BigInt.asIntN(128,BigInt(BigInt(n.liquidityNet.toString()))).toString()),liquidityGross:n.liquidityGross,feeGrowthOutsideA:n.feeGrowthOutsideA,feeGrowthOutsideB:n.feeGrowthOutsideB,rewardersGrowthOutside:[new BN(n.rewardersGrowthOutside[0]),new BN(n.rewardersGrowthOutside[1]),new BN(n.rewardersGrowthOutside[2])]};e.push(i)}return e}function tickScore(t){return d$3(t).add(d$3(TICK_BOUND))}new BN(365);new BN(24);new BN(3600);new BN(.5);var SwapUtils$1=class{static getDefaultSqrtPriceLimit(e){return new BN(e?MIN_SQRT_PRICE$1:MAX_SQRT_PRICE$1)}static getDefaultOtherAmountThreshold(e){return e?ZERO$2:U64_MAX$1}};function getNextSqrtPriceAUp(t,e,n,i){if(n.eq(ZERO$2))return t;const s=MathUtil$1.checkMulShiftLeft(t,e,64,256),a=e.shln(64),l=MathUtil$1.checkMul(t,n,256);if(!i&&a.lte(l))throw new ClmmpoolsError$1("getNextSqrtPriceAUp - Unable to divide liquidityShl64 by product","DivideByZero");const f=i?MathUtil$1.checkDivRoundUpIf(s,a.add(l),!0):MathUtil$1.checkDivRoundUpIf(s,a.sub(l),!0);if(f.lt(new BN(MIN_SQRT_PRICE$1)))throw new ClmmpoolsError$1("getNextSqrtPriceAUp - Next sqrt price less than min sqrt price","CoinAmountMinSubceeded ");if(f.gt(new BN(MAX_SQRT_PRICE$1)))throw new ClmmpoolsError$1("getNextSqrtPriceAUp - Next sqrt price greater than max sqrt price","CoinAmountMaxExceeded");return f}function getNextSqrtPriceBDown(t,e,n,i){const s=MathUtil$1.checkDivRoundUpIf(n.shln(64),e,!i),a=i?t.add(s):t.sub(s);if(a.lt(new BN(MIN_SQRT_PRICE$1))||a.gt(new BN(MAX_SQRT_PRICE$1)))throw new ClmmpoolsError$1("getNextSqrtPriceAUp - Next sqrt price out of bounds","SqrtPriceOutOfBounds");return a}function getNextSqrtPriceFromInput(t,e,n,i){return i?getNextSqrtPriceAUp(t,e,n,!0):getNextSqrtPriceBDown(t,e,n,!0)}function getNextSqrtPriceFromOutput(t,e,n,i){return i?getNextSqrtPriceBDown(t,e,n,!1):getNextSqrtPriceAUp(t,e,n,!1)}function getDeltaUpFromInput(t,e,n,i){const s=t.gt(e)?t.sub(e):e.sub(t);if(n.lte(ZERO$2)||s.eq(ZERO$2))return ZERO$2;let a;if(i){const l=new BN(n).mul(new BN(s)).shln(64),f=e.mul(t),p=l.div(f);a=l.mod(f).eq(ZERO$2)?p:p.add(ONE$1)}else{const l=new BN(n).mul(new BN(s));a=l.and(U64_MAX$1).gt(ZERO$2)?l.shrn(64).add(ONE$1):l.shrn(64)}return a}function getDeltaDownFromOutput(t,e,n,i){const s=t.gt(e)?t.sub(e):e.sub(t);if(n.lte(ZERO$2)||s.eq(ZERO$2))return ZERO$2;let a;if(i)a=n.mul(s).shrn(64);else{const l=n.mul(s).shln(64),f=e.mul(t);a=l.div(f)}return a}function computeSwapStep(t,e,n,i,s,a){if(n===ZERO$2)return{amountIn:ZERO$2,amountOut:ZERO$2,nextSqrtPrice:e,feeAmount:ZERO$2};const l=t.gte(e);let f,p,C,B;if(a){const N=MathUtil$1.checkMulDivFloor(i,MathUtil$1.checkUnsignedSub(FEE_RATE_DENOMINATOR$1,s),FEE_RATE_DENOMINATOR$1,64),le=getDeltaUpFromInput(t,e,n,l);le.gt(N)?(f=N,B=MathUtil$1.checkUnsignedSub(i,N),C=getNextSqrtPriceFromInput(t,n,N,l)):(f=le,B=MathUtil$1.checkMulDivCeil(f,s,FEE_RATE_DENOMINATOR$1.sub(s),64),C=e),p=getDeltaDownFromOutput(t,C,n,l)}else{const N=getDeltaDownFromOutput(t,e,n,l);N.gt(i)?(p=i,C=getNextSqrtPriceFromOutput(t,n,i,l)):(p=N,C=e),f=getDeltaUpFromInput(t,C,n,l),B=MathUtil$1.checkMulDivCeil(f,s,FEE_RATE_DENOMINATOR$1.sub(s),64)}return{amountIn:f,amountOut:p,nextSqrtPrice:C,feeAmount:B}}function computeSwap(t,e,n,i,s){let a=n,l=i.liquidity,{currentSqrtPrice:f}=i;const p={amountIn:ZERO$2,amountOut:ZERO$2,feeAmount:ZERO$2,refAmount:ZERO$2,nextSqrtPrice:ZERO$2,crossTickNum:0};let C,B;const N=SwapUtils$1.getDefaultSqrtPriceLimit(t);for(const le of s){if(t&&i.currentTickIndex<le.index||!t&&i.currentTickIndex>=le.index||le===null)continue;t&&N.gt(le.sqrtPrice)||!t&&N.lt(le.sqrtPrice)?C=N:C=le.sqrtPrice;const Ee=computeSwapStep(f,C,l,a,i.feeRate,e);if(Ee.amountIn.eq(ZERO$2)||(a=e?a.sub(Ee.amountIn.add(Ee.feeAmount)):a.sub(Ee.amountOut)),p.amountIn=p.amountIn.add(Ee.amountIn),p.amountOut=p.amountOut.add(Ee.amountOut),p.feeAmount=p.feeAmount.add(Ee.feeAmount),Ee.nextSqrtPrice.eq(le.sqrtPrice)?(B=le.liquidityNet.mul(new BN(-1)),t?MathUtil$1.is_neg(B)?l=l.add(new BN(asUintN$1(BigInt(B.toString()),128))):l=l.add(B):MathUtil$1.is_neg(B)?l=l.sub(new BN(asUintN$1(BigInt(B.toString()),128))):l=l.sub(B),f=le.sqrtPrice):f=Ee.nextSqrtPrice,p.crossTickNum+=1,a.eq(ZERO$2))break}return p.amountIn=p.amountIn.add(p.feeAmount),p.nextSqrtPrice=f,p}function estimateLiquidityForCoinA$1(t,e,n){const i=BN.min(t,e),s=BN.max(t,e),a=MathUtil$1.fromX64_BN(n.mul(s).mul(i)),l=s.sub(i);return!a.isZero()&&!l.isZero()?a.div(l):new BN(0)}function estimateLiquidityForCoinB$1(t,e,n){const i=BN.min(t,e),a=BN.max(t,e).sub(i);return a.isZero()?new BN(0):n.shln(64).div(a)}var ClmmPoolUtil$1=class{static updateFeeRate(e,n,i,s,a){const l=MathUtil$1.checkMulDivCeil(n,new BN(s),FEE_RATE_DENOMINATOR$1,64),f=i===0?ZERO$2:MathUtil$1.checkMulDivFloor(n,new BN(i),FEE_RATE_DENOMINATOR$1,64),p=n.mul(l).mul(f);if(a?e.feeProtocolCoinA=e.feeProtocolCoinA.add(l):e.feeProtocolCoinB=e.feeProtocolCoinB.add(l),p.eq(ZERO$2)||e.liquidity.eq(ZERO$2))return{refFee:f,clmm:e};const C=p.shln(64).div(e.liquidity);return a?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(C):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(C),{refFee:f,clmm:e}}static getCoinAmountFromLiquidity(e,n,i,s,a){const l=new decimal_default$2(e.toString()),f=new decimal_default$2(n.toString()),p=new decimal_default$2(i.toString()),C=new decimal_default$2(s.toString());let B,N;return n.lt(i)?(B=MathUtil$1.toX64_Decimal(l).mul(C.sub(p)).div(p.mul(C)),N=new decimal_default$2(0)):n.lt(s)?(B=MathUtil$1.toX64_Decimal(l).mul(C.sub(f)).div(f.mul(C)),N=MathUtil$1.fromX64_Decimal(l.mul(f.sub(p)))):(B=new decimal_default$2(0),N=MathUtil$1.fromX64_Decimal(l.mul(C.sub(p)))),a?{coinA:new BN(B.ceil().toString()),coinB:new BN(N.ceil().toString())}:{coinA:new BN(B.floor().toString()),coinB:new BN(N.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,n,i,s,a,l,f){const p=TickMath$1.sqrtPriceX64ToTickIndex(f),C=TickMath$1.tickIndexToSqrtPriceX64(e),B=TickMath$1.tickIndexToSqrtPriceX64(n);let N;if(p<e){if(!s)throw new ClmmpoolsError$1("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");N=estimateLiquidityForCoinA$1(C,B,i)}else if(p>n){if(s)throw new ClmmpoolsError$1("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");N=estimateLiquidityForCoinB$1(B,C,i)}else s?N=estimateLiquidityForCoinA$1(f,B,i):N=estimateLiquidityForCoinB$1(f,C,i);const le=ClmmPoolUtil$1.getCoinAmountFromLiquidity(N,f,C,B,a),Ee=a?d$3(le.coinA.toString()).mul(1+l).toString():d$3(le.coinA.toString()).mul(1-l).toString(),Ue=a?d$3(le.coinB.toString()).mul(1+l).toString():d$3(le.coinB.toString()).mul(1-l).toString();return{coinAmountA:le.coinA,coinAmountB:le.coinB,tokenMaxA:a?new BN(decimal_default$2.ceil(Ee).toString()):new BN(decimal_default$2.floor(Ee).toString()),tokenMaxB:a?new BN(decimal_default$2.ceil(Ue).toString()):new BN(decimal_default$2.floor(Ue).toString()),liquidityAmount:N,fix_amount_a:s}}static estimateLiquidityFromcoinAmounts(e,n,i,s){if(n>i)throw new ClmmpoolsError$1("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const a=TickMath$1.sqrtPriceX64ToTickIndex(e),l=TickMath$1.tickIndexToSqrtPriceX64(n),f=TickMath$1.tickIndexToSqrtPriceX64(i);if(a<n)return estimateLiquidityForCoinA$1(l,f,s.coinA);if(a>=i)return estimateLiquidityForCoinB$1(f,l,s.coinB);const p=estimateLiquidityForCoinA$1(e,f,s.coinA),C=estimateLiquidityForCoinB$1(e,l,s.coinB);return BN.min(p,C)}static estCoinAmountsFromTotalAmount(e,n,i,s,a,l){const{ratioA:f,ratioB:p}=ClmmPoolUtil$1.calculateDepositRatioFixTokenA(e,n,i),C=d$3(s).mul(f).div(a),B=d$3(s).mul(p).div(l);return{amountA:C,amountB:B}}static calculateDepositRatioFixTokenA(e,n,i){const s=new BN(1e8),{coinAmountB:a}=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(e,n,s,!0,!0,0,i),l=TickMath$1.sqrtPriceX64ToPrice(i,0,0),f=d$3(s.toString()).mul(l),p=f.add(a.toString()),C=f.div(p),B=d$3(a.toString()).div(p);return{ratioA:C,ratioB:B}}};function removeHexPrefix(t){return t.startsWith("0x")?`${t.slice(2)}`:t}var EQUAL=0,LESS_THAN=1,GREATER_THAN=2;function cmp(t,e){return t===e?EQUAL:t<e?LESS_THAN:GREATER_THAN}function compare(t,e){let n=0;const i=t.length<=e.length?t.length:e.length,s=cmp(t.length,e.length);for(;n<i;){const a=cmp(t.charCodeAt(n),e.charCodeAt(n));if(n+=1,a!==0)return a}return s}function isSortedSymbols(t,e){return compare(t,e)===LESS_THAN}function composeType$2(t,...e){const n=Array.isArray(e[e.length-1])?e.pop():[];let s=[t,...e].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function extractStructTagFromType$2(t){var e;try{let n=t.replace(/\s/g,"");const i=n.match(/(<.+>)$/),s=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){n=n.slice(0,n.indexOf("<"));const C={...extractStructTagFromType$2(n),type_arguments:s.map(B=>extractStructTagFromType$2(B).source_address)};return C.type_arguments=C.type_arguments.map(B=>CoinAssist$1.isSuiCoin(B)?B:extractStructTagFromType$2(B).source_address),C.source_address=composeType$2(C.full_address,C.type_arguments),C}const a=n.split("::"),f={full_address:n,address:n===GAS_TYPE_ARG$2||n===GAS_TYPE_ARG_LONG$2?"0x2":normalizeSuiObjectId$2(a[0]),module:a[1],name:a[2],type_arguments:[],source_address:""};return f.full_address=`${f.address}::${f.module}::${f.name}`,f.source_address=composeType$2(f.full_address,f.type_arguments),f}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function normalizeCoinType$2(t){return extractStructTagFromType$2(t).source_address}function fixSuiObjectId(t){return t.toLowerCase().startsWith("0x")?normalizeSuiObjectId$2(t):t}var fixCoinType=(t,e=!0)=>{const n=t.split("::"),i=n.shift();let s=normalizeSuiObjectId$2(i);return e&&(s=removeHexPrefix(s)),`${s}::${n.join("::")}`};function patchFixSuiObjectId(t){for(const e in t){const n=typeof t[e];if(n==="object")patchFixSuiObjectId(t[e]);else if(n==="string"){const i=t[e];i&&!i.includes("::")&&(t[e]=fixSuiObjectId(i))}}}var COIN_TYPE$2="0x2::coin::Coin",COIN_TYPE_ARG_REGEX$2=/^0x2::coin::Coin<(.+)>$/,GAS_TYPE_ARG$2="0x2::sui::SUI",GAS_TYPE_ARG_LONG$2="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",CoinAssist$1=class{static getCoinTypeArg(e){const n=e.type.match(COIN_TYPE_ARG_REGEX$2);return n?n[1]:null}static isSUI(e){const n=CoinAssist$1.getCoinTypeArg(e);return n?CoinAssist$1.getCoinSymbol(n)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,n){let i=BigInt(0);return e.forEach(s=>{n===s.coinAddress&&(i+=BigInt(s.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${COIN_TYPE$2}<${e}>`}static getFaucetCoins(e){const{events:n}=e,i=[];return n==null||n.forEach(s=>{const{type:a}=s;if(extractStructTagFromType$2(a).name==="InitEvent"){const l=s.parsedJson;i.push({transactionModule:s.transactionModule,suplyID:l.suplyID,decimals:l.decimals})}}),i}static getCoinAssets(e,n){const i=[];return n.forEach(s=>{normalizeCoinType$2(s.coinAddress)===normalizeCoinType$2(e)&&i.push(s)}),i}static isSuiCoin(e){return extractStructTagFromType$2(e).full_address===GAS_TYPE_ARG$2}static selectCoinObjectIdGreaterThanOrEqual(e,n,i=[]){const s=CoinAssist$1.selectCoinAssetGreaterThanOrEqual(e,n,i),a=s.selectedCoins.map(p=>p.coinObjectId),l=s.remainingCoins,f=s.selectedCoins.map(p=>p.balance.toString());return{objectArray:a,remainCoins:l,amountArray:f}}static selectCoinAssetGreaterThanOrEqual(e,n,i=[]){const s=CoinAssist$1.sortByBalance(e.filter(C=>!i.includes(C.coinObjectId))),a=CoinAssist$1.calculateTotalBalance(s);if(a<n)return{selectedCoins:[],remainingCoins:s};if(a===n)return{selectedCoins:s,remainingCoins:[]};let l=BigInt(0);const f=[],p=[...s];for(;l<a;){const C=n-l,B=p.findIndex(le=>le.balance>=C);if(B!==-1){f.push(p[B]),p.splice(B,1);break}const N=p.pop();N.balance>0&&(f.push(N),l+=N.balance)}return{selectedCoins:CoinAssist$1.sortByBalance(f),remainingCoins:CoinAssist$1.sortByBalance(p)}}static sortByBalance(e){return e.sort((n,i)=>n.balance<i.balance?-1:n.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((n,i)=>n.balance>i.balance?-1:n.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((n,i)=>n+i.balance,BigInt(0))}},Percentage=class{constructor(t,e){Or(this,"numerator");Or(this,"denominator");this.toString=()=>`${this.numerator.toString()}/${this.denominator.toString()}`,this.numerator=t,this.denominator=e}static fromDecimal(t){return Percentage.fromFraction(t.toDecimalPlaces(1).mul(10).toNumber(),1e3)}static fromFraction(t,e){const n=typeof t=="number"?new BN(t.toString()):t,i=typeof e=="number"?new BN(e.toString()):e;return new Percentage(n,i)}};function adjustForSlippage$1(t,{numerator:e,denominator:n},i){return i?t.mul(n.add(e)).div(n):t.mul(n).div(n.add(e))}function adjustForCoinSlippage(t,e,n){return{tokenMaxA:adjustForSlippage$1(t.coinA,e,n),tokenMaxB:adjustForSlippage$1(t.coinB,e,n)}}function d$3(t){return Decimal$1.isDecimal(t)?t:new Decimal$1(t===void 0?0:t)}function decimalsMultiplier(t){return d$3(10).pow(d$3(t).abs())}function getSuiObjectData(t){return t.data}function getObjectDeletedResponse(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){const{error:e}=t;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function getObjectNotExistsResponse(t){if(t.error&&"object_id"in t.error&&!("version"in t.error)&&!("digest"in t.error))return t.error.object_id}function getObjectReference(t){if("reference"in t)return t.reference;const e=getSuiObjectData(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:getObjectDeletedResponse(t)}function getObjectId(t){var e;return"objectId"in t?t.objectId:((e=getObjectReference(t))==null?void 0:e.objectId)??getObjectNotExistsResponse(t)}function isSuiObjectResponse(t){return t.data!==void 0}function isSuiObjectDataWithContent(t){return t.content!==void 0}function getMoveObject(t){const e="data"in t?getSuiObjectData(t):t;if(!(!e||!isSuiObjectDataWithContent(e)||e.content.dataType!=="moveObject"))return e.content}function getMoveObjectType(t){var e;return(e=getMoveObject(t))==null?void 0:e.type}function getObjectType(t){var n;const e=isSuiObjectResponse(t)?t.data:t;return!(e!=null&&e.type)&&"data"in t?((n=e==null?void 0:e.content)==null?void 0:n.dataType)==="package"?"package":getMoveObjectType(t):e==null?void 0:e.type}function getObjectPreviousTransactionDigest(t){var e;return(e=getSuiObjectData(t))==null?void 0:e.previousTransaction}function getObjectOwner(t){var e;return(e=getSuiObjectData(t))==null?void 0:e.owner}function getObjectDisplay(t){var n;const e=(n=getSuiObjectData(t))==null?void 0:n.display;return e||{data:null,error:null}}function getObjectFields(t){var n;const e=(n=getMoveObject(t))==null?void 0:n.fields;if(e)return"fields"in e?e.fields:e}function toDecimalsAmount(t,e){const n=decimalsMultiplier(d$3(e));return Number(d$3(t).mul(n))}function asUintN$1(t,e=32){return BigInt.asUintN(e,BigInt(t)).toString()}function asIntN(t,e=32){return Number(BigInt.asIntN(e,BigInt(t)))}function fromDecimalsAmount(t,e){const n=decimalsMultiplier(d$3(e));return Number(d$3(t).div(n))}function buildPoolName(t,e,n){const i=extractStructTagFromType$2(t).name,s=extractStructTagFromType$2(e).name;return`${i}-${s}[${n}]`}function buildPool(t){const e=getMoveObjectType(t),n=extractStructTagFromType$2(e),i=getObjectFields(t);if(i==null)throw new ClmmpoolsError$1(`Pool id ${getObjectId(t)} not exists.`,"InvalidPoolObject");const s=[];i.rewarder_manager.fields.rewarders.forEach(l=>{const{emissions_per_second:f}=l.fields,p=MathUtil$1.fromX64(new BN(f)),C=Math.floor(p.toNumber()*60*60*24);s.push({emissions_per_second:f,coinAddress:extractStructTagFromType$2(l.fields.reward_coin.fields.name).source_address,growth_global:l.fields.growth_global,emissionsEveryDay:C})});const a={poolAddress:getObjectId(t),poolType:e,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:asIntN(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:s,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return a.name=buildPoolName(a.coinTypeA,a.coinTypeB,a.tickSpacing),a}function buildNFT(t){const e=getObjectDisplay(t).data,n={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return e&&(n.creator=e.creator,n.description=e.description,n.image_url=e.image_url,n.link=e.link,n.name=e.name,n.project_url=e.project_url),n}function buildPosition(t){var l,f;if(t.error!=null||((f=(l=t.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new ClmmpoolsError$1(`Position not exists. Get Position error:${t.error}`,"InvalidPositionObject");let e={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},n={...e,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},i=getObjectFields(t);if(i){const p=getMoveObjectType(t),C=getObjectOwner(t);"nft"in i?(i=i.nft.fields,e.description=i.description,e.name=i.name,e.link=i.url):e=buildNFT(t),n={...e,pos_object_id:i.id.id,owner:C.AddressOwner,type:p,liquidity:i.liquidity,coin_type_a:i.coin_type_a.fields.name,coin_type_b:i.coin_type_b.fields.name,tick_lower_index:asIntN(BigInt(i.tick_lower_index.fields.bits)),tick_upper_index:asIntN(BigInt(i.tick_upper_index.fields.bits)),index:i.index,pool:i.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const s=getObjectDeletedResponse(t);s&&(n.pos_object_id=s.objectId,n.position_status="Deleted");const a=getObjectNotExistsResponse(t);return a&&(n.pos_object_id=a,n.position_status="NotExists"),n}function buildPositionReward(t){const e={reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0"};t="fields"in t?t.fields:t,t.rewards.forEach((a,l)=>{const{amount_owned:f,growth_inside:p}="fields"in a?a.fields:a;l===0?(e.reward_amount_owed_0=f,e.reward_growth_inside_0=p):l===1?(e.reward_amount_owed_1=f,e.reward_growth_inside_1=p):l===2&&(e.reward_amount_owed_2=f,e.reward_growth_inside_2=p)});const n="fields"in t.tick_lower_index?t.tick_lower_index.fields.bits:t.tick_lower_index.bits,i="fields"in t.tick_upper_index?t.tick_upper_index.fields.bits:t.tick_upper_index.bits;return{liquidity:t.liquidity,tick_lower_index:asIntN(BigInt(n)),tick_upper_index:asIntN(BigInt(i)),...e,fee_growth_inside_a:t.fee_growth_inside_a,fee_owed_a:t.fee_owned_a,fee_growth_inside_b:t.fee_growth_inside_b,fee_owed_b:t.fee_owned_b,pos_object_id:t.position_id}}function buildTickData(t){var s,a;if(t.error!=null||((a=(s=t.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new ClmmpoolsError$1(`Tick not exists. Get tick data error:${t.error}`,"InvalidTickObject");const n=getObjectFields(t).value.fields.value.fields;return{objectId:getObjectId(t),index:asIntN(BigInt(n.index.fields.bits)),sqrtPrice:new BN(n.sqrt_price),liquidityNet:new BN(n.liquidity_net.fields.bits),liquidityGross:new BN(n.liquidity_gross),feeGrowthOutsideA:new BN(n.fee_growth_outside_a),feeGrowthOutsideB:new BN(n.fee_growth_outside_b),rewardersGrowthOutside:n.rewards_growth_outside}}function buildTickDataByEvent(t){if(!t||!t.index||!t.sqrt_price||!t.liquidity_net||!t.liquidity_gross||!t.fee_growth_outside_a||!t.fee_growth_outside_b)throw new ClmmpoolsError$1("Invalid tick fields.","InvalidTickFields");const e=asIntN(BigInt(t.index.bits)),n=new BN(t.sqrt_price),i=new BN(t.liquidity_net.bits),s=new BN(t.liquidity_gross),a=new BN(t.fee_growth_outside_a),l=new BN(t.fee_growth_outside_b),f=t.rewards_growth_outside||[];return{objectId:"",index:e,sqrtPrice:n,liquidityNet:i,liquidityGross:s,feeGrowthOutsideA:a,feeGrowthOutsideB:l,rewardersGrowthOutside:f}}function buildPositionTransactionInfo(t,e,n){const i=[],{timestampMs:s,events:a}=t,l=["AddLiquidityEvent","RemoveLiquidityEvent","CollectFeeEvent","CollectRewardEvent","CollectRewardV2Event","HarvestEvent"];return a==null||a.forEach((f,p)=>{const C=extractStructTagFromType$2(f.type).name;if(l.includes(C)){const B={txDigest:f.id.txDigest,packageId:f.packageId,transactionModule:f.transactionModule,sender:f.sender,type:f.type,timestampMs:s||"0",parsedJson:f.parsedJson,index:`${e}_${p}`};switch(C){case"CollectFeeEvent":n.includes(B.parsedJson.position)&&(d$3(B.parsedJson.amount_a).gt(0)||d$3(B.parsedJson.amount_b).gt(0))&&i.push(B);break;case"RemoveLiquidityEvent":case"AddLiquidityEvent":(d$3(B.parsedJson.amount_a).gt(0)||d$3(B.parsedJson.amount_b).gt(0))&&i.push(B);break;case"CollectRewardEvent":case"HarvestEvent":case"CollectRewardV2Event":(n.includes(B.parsedJson.position)||n.includes(B.parsedJson.wrapped_position_id))&&d$3(B.parsedJson.amount).gt(0)&&i.push(B);break}}}),i}function buildPoolTransactionInfo(t,e,n,i){const s=[],{timestampMs:a,events:l}=t;return l==null||l.forEach((f,p)=>{const{name:C,address:B}=extractStructTagFromType$2(f.type);if(poolFilterEvenTypes.includes(C)&&B===n&&i===f.parsedJson.pool){const N={tx:f.id.txDigest,sender:f.sender,type:f.type,block_time:a||"0",index:`${e}_${p}`,parsedJson:f.parsedJson};s.push(N)}}),s}var TickUtil=class{static getMinIndex(t){return MIN_TICK_INDEX+Math.abs(MIN_TICK_INDEX)%t}static getMaxIndex(t){return MAX_TICK_INDEX-MAX_TICK_INDEX%t}};function getNearestTickByTick(t,e){const n=Math.abs(t)%e;return t>0?n>e/2?t+e-n:t-n:n>e/2?t-e+n:t+n}function getRewardInTickRange(t,e,n,i,s,a){const l=t.rewarder_infos,f=[];for(let p=0;p<l.length;p+=1){let C=a[p];e!==null&&(t.current_tick_index<i?C=a[p].sub(new BN(e.rewardersGrowthOutside[p])):C=e.rewardersGrowthOutside[p]);let B=new BN(0);n!==null&&(t.current_tick_index>=s?B=a[p].sub(new BN(n.rewardersGrowthOutside[p])):B=n.rewardersGrowthOutside[p]);const N=MathUtil$1.subUnderflowU128(MathUtil$1.subUnderflowU128(new BN(a[p]),new BN(C)),new BN(B));f.push(N)}return f}function findAdjustCoin$1(t){const e=CoinAssist$1.isSuiCoin(t.coinTypeA),n=CoinAssist$1.isSuiCoin(t.coinTypeB);return{isAdjustCoinA:e,isAdjustCoinB:n}}function reverSlippageAmount$1(t,e){return Decimal$1.ceil(d$3(t).div(1+e)).toString()}var _TransactionUtil$1=class{static createCollectRewarderAndFeeParams(e,n,i,s,a,l){a===void 0&&(a=[...s]),l===void 0&&(l=[...s]);const f=normalizeCoinType$2(i.coinTypeA),p=normalizeCoinType$2(i.coinTypeB);if(i.collect_fee){const B=_TransactionUtil$1.buildCoinForAmount(n,a,BigInt(0),f,!1);a=B.remainCoins;const N=_TransactionUtil$1.buildCoinForAmount(n,l,BigInt(0),p,!1);l=N.remainCoins,n=e.Position.createCollectFeePaylod({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB},n,B.targetCoin,N.targetCoin)}const C=[];return i.rewarder_coin_types.forEach(B=>{switch(normalizeCoinType$2(B)){case f:C.push(_TransactionUtil$1.buildCoinForAmount(n,a,BigInt(0),B,!1).targetCoin);break;case p:C.push(_TransactionUtil$1.buildCoinForAmount(n,l,BigInt(0),B,!1).targetCoin);break;default:C.push(_TransactionUtil$1.buildCoinForAmount(n,s,BigInt(0),B,!1).targetCoin);break}}),n=e.Rewarder.createCollectRewarderPaylod(i,n,C),n}static async adjustTransactionForGas(e,n,i,s){s.setSender(e.senderAddress);const a=CoinAssist$1.selectCoinAssetGreaterThanOrEqual(n,i).selectedCoins;if(a.length===0)throw new ClmmpoolsError$1("Insufficient balance","InsufficientBalance");const l=CoinAssist$1.calculateTotalBalance(n);if(l-i>1e9)return{fixAmount:i};const f=await e.fullClient.calculationTxGas(s);if(CoinAssist$1.selectCoinAssetGreaterThanOrEqual(n,BigInt(f),a.map(C=>C.coinObjectId)).selectedCoins.length===0){const C=BigInt(f)+BigInt(500);if(l-i<C){if(i-=C,i<0)throw new ClmmpoolsError$1("gas Insufficient balance","InsufficientBalance");const B=new Transaction$1;return{fixAmount:i,newTx:B}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,n,i,s,a,l,f){a=await _TransactionUtil$1.buildAddLiquidityFixToken(e,n,i,a,l,f);const{isAdjustCoinA:p}=findAdjustCoin$1(i),C=p?i.amount_a:i.amount_b,B=await _TransactionUtil$1.adjustTransactionForGas(e,CoinAssist$1.getCoinAssets(p?i.coinTypeA:i.coinTypeB,n),BigInt(C),a),{fixAmount:N}=B,{newTx:le}=B;if(le!=null){let Ee,Ue;if(p)i.amount_a=Number(N),Ee=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,!i.fix_amount_a,N.toString(),i.slippage,i.coinTypeA,n,!1,!0),Ue=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,n,!1,!0);else return i.amount_b=Number(N),Ee=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,n,!1,!0),Ue=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,i.fix_amount_a,N.toString(),i.slippage,i.coinTypeB,n,!1,!0),i=_TransactionUtil$1.fixAddLiquidityFixTokenParams(i,s.slippage,s.curSqrtPrice),a=await _TransactionUtil$1.buildAddLiquidityFixTokenArgs(le,e,n,i,Ee,Ue),a}return a}static async buildAddLiquidityFixToken(e,n,i,s,a,l){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");s=s||new Transaction$1;let f,p;return a==null||l==null?(f=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(s,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,n,!1,!0),p=_TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(s,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,n,!1,!0)):(f={targetCoin:a,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},p={targetCoin:l,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),s=_TransactionUtil$1.buildAddLiquidityFixTokenArgs(s,e,n,i,f,p),s}static buildAddLiquidityFixTokenCoinInput(e,n,i,s,a,l,f=!0,p=!0){return n?_TransactionUtil$1.buildCoinForAmountInterval(e,l,{amountSecond:BigInt(reverSlippageAmount$1(i,s)),amountFirst:BigInt(i)},a,f,p):_TransactionUtil$1.buildCoinForAmount(e,l,BigInt(i),a,f,p)}static fixAddLiquidityFixTokenParams(e,n,i){const s=e.fix_amount_a?e.amount_a:e.amount_b,a=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new BN(s),e.fix_amount_a,!0,n,i);return e.amount_a=e.fix_amount_a?e.amount_a:a.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?a.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,n,i,s,a,l){const f=[s.coinTypeA,s.coinTypeB],p=s.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:C,integrate:B}=n.sdkOptions;s.is_open||(e=_TransactionUtil$1.createCollectRewarderAndFeeParams(n,e,s,i,a.remainCoins,l.remainCoins));const N=getPackagerConfigs$1(C),le=s.is_open?[e.object(N.global_config_id),e.object(s.pool_id),e.pure.u32(Number(asUintN$1(BigInt(s.tick_lower)).toString())),e.pure.u32(Number(asUintN$1(BigInt(s.tick_upper)).toString())),a.targetCoin,l.targetCoin,e.pure.u64(s.amount_a),e.pure.u64(s.amount_b),e.pure.bool(s.fix_amount_a),e.object(CLOCK_ADDRESS$2)]:[e.object(N.global_config_id),e.object(s.pool_id),e.object(s.pos_id),a.targetCoin,l.targetCoin,e.pure.u64(s.amount_a),e.pure.u64(s.amount_b),e.pure.bool(s.fix_amount_a),e.object(CLOCK_ADDRESS$2)];return e.moveCall({target:`${B.published_at}::${ClmmIntegratePoolV2Module$1}::${p}`,typeArguments:f,arguments:le}),e}static async buildSwapTransactionForGas(e,n,i,s){let a=_TransactionUtil$1.buildSwapTransaction(e,n,i);a.setSender(e.senderAddress);const l=await _TransactionUtil$1.adjustTransactionForGas(e,CoinAssist$1.getCoinAssets(n.a2b?n.coinTypeA:n.coinTypeB,i),BigInt(n.by_amount_in?n.amount:n.amount_limit),a),{fixAmount:f,newTx:p}=l;if(p!==void 0){p.setSender(e.senderAddress),n.by_amount_in?n.amount=f.toString():n.amount_limit=f.toString(),n=await _TransactionUtil$1.fixSwapParams(e,n,s);const C=_TransactionUtil$1.buildCoinForAmount(a,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA),B=_TransactionUtil$1.buildCoinForAmount(a,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB);a=_TransactionUtil$1.buildSwapTransactionArgs(p,n,e.sdkOptions,C,B)}return a}static buildSwapTransaction(e,n,i){let s=new Transaction$1;s.setSender(e.senderAddress);const a=_TransactionUtil$1.buildCoinForAmount(s,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1),l=_TransactionUtil$1.buildCoinForAmount(s,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1);return s=_TransactionUtil$1.buildSwapTransactionArgs(s,n,e.sdkOptions,a,l),s}static buildSwapTransactionArgs(e,n,i,s,a){const{clmm_pool:l,integrate:f}=i,p=SwapUtils$1.getDefaultSqrtPriceLimit(n.a2b),C=[n.coinTypeA,n.coinTypeB],{global_config_id:B}=getPackagerConfigs$1(l);if(B===void 0)throw Error("clmm.config.global_config_id is undefined");const N=n.swap_partner!==void 0,le=N?n.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":n.a2b?"swap_a2b":"swap_b2a",Ee=N?[e.object(B),e.object(n.pool_id),e.object(n.swap_partner),s.targetCoin,a.targetCoin,e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u64(n.amount_limit),e.pure.u128(p.toString()),e.object(CLOCK_ADDRESS$2)]:[e.object(B),e.object(n.pool_id),s.targetCoin,a.targetCoin,e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u64(n.amount_limit),e.pure.u128(p.toString()),e.object(CLOCK_ADDRESS$2)];return e.moveCall({target:`${f.published_at}::${ClmmIntegratePoolV2Module$1}::${le}`,typeArguments:C,arguments:Ee}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,n,i,s){let{tx:a,coinABs:l}=_TransactionUtil$1.buildSwapTransactionWithoutTransferCoins(e,n,i);a.setSender(e.senderAddress);const f=await _TransactionUtil$1.adjustTransactionForGas(e,CoinAssist$1.getCoinAssets(n.a2b?n.coinTypeA:n.coinTypeB,i),BigInt(n.by_amount_in?n.amount:n.amount_limit),a),{fixAmount:p,newTx:C}=f;if(C!==void 0){C.setSender(e.senderAddress),n.by_amount_in?n.amount=p.toString():n.amount_limit=p.toString(),n=await _TransactionUtil$1.fixSwapParams(e,n,s);const B=_TransactionUtil$1.buildCoinForAmount(a,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1,!0),N=_TransactionUtil$1.buildCoinForAmount(a,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1,!0),le=_TransactionUtil$1.buildSwapTransactionWithoutTransferCoinArgs(e,C,n,e.sdkOptions,B,N);a=le.tx,l=le.txRes}return{tx:a,coinABs:l}}static buildSwapTransactionWithoutTransferCoins(e,n,i){const s=new Transaction$1;s.setSender(e.senderAddress);const a=_TransactionUtil$1.buildCoinForAmount(s,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1,!0),l=_TransactionUtil$1.buildCoinForAmount(s,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1,!0),f=_TransactionUtil$1.buildSwapTransactionWithoutTransferCoinArgs(e,s,n,e.sdkOptions,a,l);return{tx:f.tx,coinABs:f.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,n,i,s,a,l){const{clmm_pool:f,integrate:p}=s,C=SwapUtils$1.getDefaultSqrtPriceLimit(i.a2b),{global_config_id:B}=getPackagerConfigs$1(f);if(B===void 0)throw Error("clmm.config.global_config_id is undefined");const N=i.swap_partner!==void 0,le=N?"swap_with_partner":"swap",Ee=N?ClmmIntegrateRouterWithPartnerModule$1:ClmmIntegrateRouterModule$1,Ue=N?[n.object(B),n.object(i.pool_id),n.object(i.swap_partner),a.targetCoin,l.targetCoin,n.pure.bool(i.a2b),n.pure.bool(i.by_amount_in),n.pure.u64(i.amount),n.pure.u128(C.toString()),n.pure.bool(!1),n.object(CLOCK_ADDRESS$2)]:[n.object(B),n.object(i.pool_id),a.targetCoin,l.targetCoin,n.pure.bool(i.a2b),n.pure.bool(i.by_amount_in),n.pure.u64(i.amount),n.pure.u128(C.toString()),n.pure.bool(!1),n.object(CLOCK_ADDRESS$2)],ze=[i.coinTypeA,i.coinTypeB],Ze=n.moveCall({target:`${p.published_at}::${Ee}::${le}`,typeArguments:ze,arguments:Ue});if(i.by_amount_in){const Qe=i.a2b?i.coinTypeB:i.coinTypeA,ct=i.a2b?Ze[1]:Ze[0],wt=Number(i.amount_limit);this.checkCoinThreshold(e,i.by_amount_in,n,ct,wt,Qe)}return{tx:n,txRes:Ze}}static async fixSwapParams(e,n,i){const{currentPool:s}=i;try{const a=await e.Swap.preswap({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:n.a2b,byAmountIn:n.by_amount_in,amount:n.amount,pool:s,currentSqrtPrice:s.current_sqrt_price,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB}),l=i.byAmountIn?a.estimatedAmountOut:a.estimatedAmountIn,f=adjustForSlippage$1(l,i.slippage,!i.byAmountIn);n.amount_limit=f.toString()}catch(a){console.log("fixSwapParams",a)}return n}static async syncBuildCoinInputForAmount(e,n,i,s,a=!0,l=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const f=await e.getOwnerCoinAssets(e.senderAddress,s);return _TransactionUtil$1.buildCoinForAmount(n,f,i,s,a,l).targetCoin}static buildCoinForAmount(e,n,i,s,a=!0,l=!0){const f=CoinAssist$1.getCoinAssets(s,n);if(i===BigInt(0))return _TransactionUtil$1.buildZeroValueCoin(n,e,s,a);const p=CoinAssist$1.calculateTotalBalance(f);if(p<i)throw new ClmmpoolsError$1(`The amount(${p}) is Insufficient balance for ${s} , expect ${i} `,"InsufficientBalance");return _TransactionUtil$1.buildCoin(e,n,f,i,s,a,l)}static buildCoinWithBalance(e,n){return e===BigInt(0)&&CoinAssist$1.isSuiCoin(n)?coinWithBalance({balance:e,useGasCoin:!1}):coinWithBalance({balance:e,type:n})}static buildVectorCoin(e,n,i,s,a,l=!0){if(CoinAssist$1.isSuiCoin(a)){const le=e.splitCoins(e.gas,[e.pure.u64(s)]);return{targetCoin:e.makeMoveVec({elements:[le]}),remainCoins:n,tragetCoinAmount:s.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const{targetCoin:f,originalSplitedCoin:p,tragetCoinAmount:C,selectedCoinsResult:B,coinObjectIds:N}=this.buildSpitTargeCoin(e,s,i,l);return l?{targetCoin:e.makeMoveVec({elements:[f]}),remainCoins:B.remainCoins,originalSplitedCoin:p,tragetCoinAmount:C,isMintZeroCoin:!1}:{targetCoin:e.makeMoveVec({elements:N.map(le=>e.object(le))}),remainCoins:B.remainCoins,tragetCoinAmount:B.amountArray.reduce((le,Ee)=>Number(le)+Number(Ee),0).toString(),isMintZeroCoin:!1}}static buildOneCoin(e,n,i,s,a=!0){if(CoinAssist$1.isSuiCoin(s)){if(i===0n&&n.length>1){const le=CoinAssist$1.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(le.objectArray[0]),remainCoins:le.remainCoins,tragetCoinAmount:le.amountArray[0],isMintZeroCoin:!1}}const B=CoinAssist$1.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:B.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}const{targetCoin:l,originalSplitedCoin:f,tragetCoinAmount:p,selectedCoinsResult:C}=this.buildSpitTargeCoin(e,i,n,a);return{targetCoin:l,remainCoins:C.remainCoins,originalSplitedCoin:f,tragetCoinAmount:p,isMintZeroCoin:!1}}static buildSpitTargeCoin(e,n,i,s){const a=CoinAssist$1.selectCoinObjectIdGreaterThanOrEqual(i,n),l=a.amountArray.reduce((Ue,ze)=>Number(Ue)+Number(ze),0).toString(),f=a.objectArray,[p,...C]=f,B=e.object(p);let N=B;const le=a.amountArray.reduce((Ue,ze)=>Number(Ue)+Number(ze),0).toString();let Ee;return C.length>0&&e.mergeCoins(B,C.map(Ue=>e.object(Ue))),s&&Number(l)>Number(n)&&(N=e.splitCoins(B,[e.pure.u64(n)]),Ee=B),{originalSplitedCoin:Ee,targetCoin:N,tragetCoinAmount:le,selectedCoinsResult:a,coinObjectIds:f}}static buildCoin(e,n,i,s,a,l=!0,f=!0){return l?this.buildVectorCoin(e,n,i,s,a,f):this.buildOneCoin(e,i,s,a,f)}static buildZeroValueCoin(e,n,i,s=!0){const a=_TransactionUtil$1.callMintZeroValueCoin(n,i);let l;return s?l=n.makeMoveVec({elements:[a]}):l=a,{targetCoin:l,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,n,i,s,a=!0,l=!0){const f=CoinAssist$1.getCoinAssets(s,n);if(i.amountFirst===BigInt(0))return f.length>0?_TransactionUtil$1.buildCoin(e,[...n],[...f],i.amountFirst,s,a,l):_TransactionUtil$1.buildZeroValueCoin(n,e,s,a);const p=CoinAssist$1.calculateTotalBalance(f);if(p>=i.amountFirst)return _TransactionUtil$1.buildCoin(e,[...n],[...f],i.amountFirst,s,a,l);if(p<i.amountSecond)throw new ClmmpoolsError$1(`The amount(${p}) is Insufficient balance for ${s} , expect ${i.amountSecond} `,"InsufficientBalance");return _TransactionUtil$1.buildCoin(e,[...n],[...f],i.amountSecond,s,a,l)}static async buildRouterSwapTransaction(e,n,i,s,a){let l=new Transaction$1;return n.paths.length>1&&(n.partner=""),l=await this.buildRouterBasePathTx(e,n,i,s,l,a),l}static async buildRouterBasePathTx(e,n,i,s,a,l){const f=n.paths.filter(qt=>qt&&qt.poolAddress),p=Number(f.reduce((qt,nr)=>qt.add(nr.amountIn),ZERO$2).toString()),C=Number(f.reduce((qt,nr)=>qt.add(nr.amountOut),ZERO$2).toString()),B=Math.round(i?Number(C.toString())*(1-n.priceSlippagePoint):Number(p.toString())*(1+n.priceSlippagePoint)),N=n.paths[0].coinType[0],le=n.paths[0].coinType[n.paths[0].coinType.length-1],Ee=_TransactionUtil$1.buildCoinForAmount(a,s,BigInt(i?p:B),N,!1,!0),Ue=Ee.originalSplitedCoin!==void 0,ze=_TransactionUtil$1.buildCoinForAmount(a,s,0n,le,!1),Ze=await this.buildRouterBasePathReturnCoins(e,n,i,Ee,ze,a),Qe=[],{toCoin:ct,fromCoin:wt}=Ze;if(a=Ze.tx,ze.isMintZeroCoin?Qe.push({coinType:le,coin:ct}):ze.originalSplitedCoin!==void 0?a.mergeCoins(ze.originalSplitedCoin,[ct]):a.mergeCoins(ze.targetCoin,[ct]),Ue){const qt=Ee==null?void 0:Ee.originalSplitedCoin;a.mergeCoins(qt,[wt])}else Qe.push({coinType:N,coin:wt});for(let qt=0;qt<Qe.length;qt++)this.buildTransferCoin(e,a,Qe[qt].coin,Qe[qt].coinType,l);return a}static async buildRouterBasePathReturnCoins(e,n,i,s,a,l){const{clmm_pool:f,integrate:p}=e.sdkOptions,C=getPackagerConfigs$1(f).global_config_id,B=n.paths.filter(qt=>qt&&qt.poolAddress),N=Number(B.reduce((qt,nr)=>qt.add(nr.amountIn),ZERO$2).toString()),le=Number(B.reduce((qt,nr)=>qt.add(nr.amountOut),ZERO$2).toString()),Ee=Math.round(i?Number(le.toString())*(1-n.priceSlippagePoint):Number(N.toString())*(1+n.priceSlippagePoint)),Ue=n.paths[0].coinType[0],ze=n.paths[0].coinType[n.paths[0].coinType.length-1];let Ze=s.targetCoin,Qe;a.isMintZeroCoin||a.originalSplitedCoin!==void 0?Qe=a.targetCoin:Qe=_TransactionUtil$1.callMintZeroValueCoin(l,ze);const ct=n.partner==="",wt=ct?ClmmIntegrateRouterModule$1:ClmmIntegrateRouterWithPartnerModule$1;for(const qt of B)if(qt.poolAddress.length===1){const nr=qt.a2b[0],ir={amount:Number(qt.amountIn.toString()),poolCoinA:qt.a2b[0]?Ue:ze,poolCoinB:qt.a2b[0]?ze:Ue},or=ct?"swap":"swap_with_partner",ur=nr?Ze:Qe,hr=nr?Qe:Ze,fr=i?qt.amountIn.toString():qt.amountOut.toString(),ar=SwapUtils$1.getDefaultSqrtPriceLimit(nr).toString(),Lt=ct?[l.object(C),l.object(qt.poolAddress[0]),ur,hr,l.pure.bool(nr),l.pure.bool(i),l.pure.u64(fr),l.pure.u128(ar),l.pure.bool(!1),l.object(CLOCK_ADDRESS$2)]:[l.object(C),l.object(qt.poolAddress[0]),l.object(n.partner),ur,hr,l.pure.bool(nr),l.pure.bool(i),l.pure.u64(fr),l.pure.u128(ar),l.pure.bool(!1),l.object(CLOCK_ADDRESS$2)],Vt=[ir.poolCoinA,ir.poolCoinB],tt=l.moveCall({target:`${e.sdkOptions.integrate.published_at}::${wt}::${or}`,typeArguments:Vt,arguments:Lt});Ze=nr?tt[0]:tt[1],Qe=nr?tt[1]:tt[0]}else{const nr=i?qt.amountIn:qt.rawAmountLimit[0],ir=i?0:qt.amountOut;let or="";qt.a2b[0]?qt.a2b[1]?or="swap_ab_bc":or="swap_ab_cb":qt.a2b[1]?or="swap_ba_bc":or="swap_ba_cb",ct||(or=`${or}_with_partner`);const ur=SwapUtils$1.getDefaultSqrtPriceLimit(qt.a2b[0]),hr=SwapUtils$1.getDefaultSqrtPriceLimit(qt.a2b[1]),fr=ct?[l.object(C),l.object(qt.poolAddress[0]),l.object(qt.poolAddress[1]),Ze,Qe,l.pure.bool(i),l.pure.u64(nr.toString()),l.pure.u64(ir.toString()),l.pure.u128(ur.toString()),l.pure.u128(hr.toString()),l.object(CLOCK_ADDRESS$2)]:[l.object(C),l.object(qt.poolAddress[0]),l.object(qt.poolAddress[1]),l.object(n.partner),Ze,Qe,l.pure.bool(i),l.pure.u64(nr.toString()),l.pure.u64(ir.toString()),l.pure.u128(ur.toString()),l.pure.u128(hr.toString()),l.object(CLOCK_ADDRESS$2)],ar=[qt.coinType[0],qt.coinType[1],qt.coinType[2]],Lt=l.moveCall({target:`${p.published_at}::${wt}::${or}`,typeArguments:ar,arguments:fr});Ze=Lt[0],Qe=Lt[1]}return this.checkCoinThreshold(e,i,l,Qe,Ee,ze),{fromCoin:Ze,toCoin:Qe,tx:l}}static async buildAggregatorSwapReturnCoins(e,n,i,s,a,l,f,p){if(p==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");p=e.senderAddress}n.splitPaths.length>1&&(a="");let C,B;const N=n.splitPaths.some(le=>le.basePaths.some(Ee=>Ee.label==="Deepbook"));if((!n.byAmountIn||n.splitPaths.length===1)&&!N){const le=[];for(const ze of n.splitPaths){const Ze=[],Qe=[],ct=[],wt=[];for(let nr=0;nr<ze.basePaths.length;nr+=1){const ir=ze.basePaths[nr];Ze.push(ir.direction),Qe.push(ir.poolAddress),ct.push(new BN(ir.inputAmount.toString())),nr===0?wt.push(ir.fromCoin,ir.toCoin):wt.push(ir.toCoin)}const qt={amountIn:new BN(ze.inputAmount.toString()),amountOut:new BN(ze.outputAmount.toString()),poolAddress:Qe,a2b:Ze,rawAmountLimit:ct,isExceed:!1,coinType:wt};le.push(qt)}const Ee={paths:le,partner:a,priceSlippagePoint:l},Ue=await this.buildRouterBasePathReturnCoins(e,Ee,n.byAmountIn,i,s,f);C=Ue.fromCoin,B=Ue.toCoin,f=Ue.tx}else{const le=Math.round(n.outputAmount*(1-l));C=i.targetCoin,s.isMintZeroCoin||s.originalSplitedCoin!==void 0?B=s.targetCoin:B=_TransactionUtil$1.callMintZeroValueCoin(f,n.toCoin);let Ee=!1,Ue;if(N){const[ze,Ze]=DeepbookUtils$1.createAccountCap(p,e.sdkOptions,f);f=Ze,Ue=ze,Ee=!0}for(let ze=0;ze<n.splitPaths.length;ze+=1){const Ze=n.splitPaths[ze];let Qe;for(let ct=0;ct<Ze.basePaths.length;ct+=1){const wt=Ze.basePaths[ct];if(wt.label==="Deepbook")if(ct===0)if(Ze.basePaths.length===1){const qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,C,B,!1);C=qt.from,B=qt.to}else{Qe=_TransactionUtil$1.callMintZeroValueCoin(f,wt.toCoin);const qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,C,Qe,!1);C=qt.from,Qe=qt.to}else{const qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,Qe,B,!0);Qe=qt.from,B=qt.to}if(wt.label==="Cetus")if(ct===0)if(Ze.basePaths.length===1){const qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,C,B,!1,a);C=qt.from,B=qt.to}else{Qe=_TransactionUtil$1.callMintZeroValueCoin(f,wt.toCoin);const qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,C,Qe,!1,a);C=qt.from,Qe=qt.to}else{const qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,Qe,B,!0,a);Qe=qt.from,B=qt.to,f.moveCall({target:`${e.sdkOptions.integrate.published_at}::${ClmmIntegrateUtilsModule$1}::send_coin`,typeArguments:[wt.fromCoin],arguments:[Qe,f.pure.address(p)]})}}}this.checkCoinThreshold(e,n.byAmountIn,f,B,le,n.toCoin),Ee&&(f=DeepbookUtils$1.deleteAccountCapByObject(Ue,e.sdkOptions,f))}return{fromCoin:C,toCoin:B,tx:f}}static async buildAggregatorSwapTransaction(e,n,i,s,a,l){let f=new Transaction$1;const p=n.byAmountIn?Math.round(n.outputAmount*(1-a)):Math.round(n.inputAmount*(1+a)),C=_TransactionUtil$1.buildCoinForAmount(f,i,n.byAmountIn?BigInt(n.inputAmount):BigInt(p),n.fromCoin,!1,!0),B=C.originalSplitedCoin!=null,N=_TransactionUtil$1.buildCoinForAmount(f,i,0n,n.toCoin,!1),le=await this.buildAggregatorSwapReturnCoins(e,n,C,N,s,a,f,l),{fromCoin:Ee,toCoin:Ue}=le;f=le.tx;const ze=[];if(N.isMintZeroCoin?ze.push({coinType:n.toCoin,coin:Ue}):N.originalSplitedCoin!=null?f.mergeCoins(N.originalSplitedCoin,[Ue]):f.mergeCoins(N.targetCoin,[Ue]),B){const Ze=C.originalSplitedCoin;f.mergeCoins(Ze,[Ee])}else ze.push({coinType:n.fromCoin,coin:Ee});for(let Ze=0;Ze<ze.length;Ze++)this.buildTransferCoin(e,f,ze[Ze].coin,ze[Ze].coinType,l);return f}static checkCoinThreshold(e,n,i,s,a,l){n&&i.moveCall({target:`${e.sdkOptions.integrate.published_at}::${ClmmIntegrateRouterModule$1}::check_coin_threshold`,typeArguments:[l],arguments:[s,i.pure.u64(a)]})}static buildDeepbookBasePathTx(e,n,i,s,a,l,f){const p=n.direction?a:l,C=n.direction?l:a,B=[i.object(n.poolAddress),s,i.pure.u64(n.inputAmount),i.pure.u64(0),i.pure.bool(n.direction),p,C,i.pure.bool(f),i.object(CLOCK_ADDRESS$2)],N=n.direction?[n.fromCoin,n.toCoin]:[n.toCoin,n.fromCoin],le=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:N,arguments:B});return a=n.direction?le[0]:le[1],l=n.direction?le[1]:le[0],{from:a,to:l,tx:i}}static buildClmmBasePathTx(e,n,i,s,a,l,f,p){const{clmm_pool:C,integrate:B}=e.sdkOptions,N=getPackagerConfigs$1(C).global_config_id;let le=n.direction?a:l,Ee=n.direction?l:a;const Ue=p==="",ze=Ue?ClmmIntegrateRouterModule$1:ClmmIntegrateRouterWithPartnerModule$1,Ze=Ue?"swap":"swap_with_partner",Qe=s?n.inputAmount.toString():n.outputAmount.toString(),ct=SwapUtils$1.getDefaultSqrtPriceLimit(n.direction),wt=Ue?[i.object(N),i.object(n.poolAddress),le,Ee,i.pure.bool(n.direction),i.pure.bool(s),i.pure.u64(Qe),i.pure.u128(ct.toString()),i.pure.bool(f),i.object(CLOCK_ADDRESS$2)]:[i.object(N),i.object(n.poolAddress),i.object(p),le,Ee,i.pure.bool(n.direction),i.pure.bool(s),i.pure.u64(Qe),i.pure.u128(ct.toString()),i.pure.bool(f),i.object(CLOCK_ADDRESS$2)],qt=n.direction?[n.fromCoin,n.toCoin]:[n.toCoin,n.fromCoin],nr=i.moveCall({target:`${B.published_at}::${ze}::${Ze}`,typeArguments:qt,arguments:wt});return le=nr[0],Ee=nr[1],a=n.direction?le:Ee,l=n.direction?Ee:le,{from:a,to:l,tx:i}}static buildCoinTypePair(e,n){const i=[];if(e.length===2){const s=[];s.push(e[0],e[1]),i.push(s)}else{const s=[];s.push(e[0],e[e.length-1]),i.push(s);for(let a=1;a<e.length-1;a+=1){if(n[a-1]===0)continue;const l=[];l.push(e[0],e[a],e[e.length-1]),i.push(l)}}return i}static buildTransferCoinToSender(e,n,i,s){n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${ClmmIntegrateUtilsModule$1}::transfer_coin_to_sender`,typeArguments:[s],arguments:[i]})}static buildTransferCoin(e,n,i,s,a){a!=null?n.transferObjects([i],n.pure.address(a)):_TransactionUtil$1.buildTransferCoinToSender(e,n,i,s)}},TransactionUtil$1=_TransactionUtil$1;__publicField$2(TransactionUtil$1,"callMintZeroValueCoin",(t,e)=>t.moveCall({target:"0x2::coin::zero",typeArguments:[e]}));function checkInvalidSuiAddress$1(t){return!(!t.startsWith("0x")||t.length!==66)}var FLOAT_SCALING$1=new BN(1e9),DeepbookUtils$1=class{static createAccountCap(e,n,i,s=!1){if(e.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:a}=n,[l]=i.moveCall({target:`${a.published_at}::${DeepbookClobV2Moudle$1}::create_account`,typeArguments:[],arguments:[]});return s&&i.transferObjects([l],i.pure.address(e)),[l,i]}static deleteAccountCap(e,n,i){const{deepbook:s}=n,a=[i.object(e)];return i.moveCall({target:`${s.published_at}::${DeepbookCustodianV2Moudle$1}::delete_account_cap`,typeArguments:[],arguments:a}),i}static deleteAccountCapByObject(e,n,i){const{deepbook:s}=n,a=[e];return i.moveCall({target:`${s.published_at}::${DeepbookCustodianV2Moudle$1}::delete_account_cap`,typeArguments:[],arguments:a}),i}static async getAccountCap(e,n=!0){const i=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:DeepbookCustodianV2Moudle$1}}});return i.data.length===0?"":i.data[0].data.objectId}static async getPools(e){const n=e.sdkOptions.deepbook.package_id,i=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${n}::clob_v2::PoolCreated`})).data.forEach(a=>{const l=a.parsedJson;l&&i.push({poolID:l.pool_id,tickSize:Number(l.tick_size),lotSize:Number(l.lot_size),takerFeeRate:Number(l.taker_fee_rate),makerRebateRate:Number(l.maker_rebate_rate),baseAsset:l.base_asset.name,quoteAsset:l.quote_asset.name})})}catch(s){console.log("getPoolImmutables",s)}return i}static async getPoolAsks(e,n,i,s){var Ee;const{simulationAccount:a}=e.sdkOptions,{deepbook_endpoint_v2:l}=e.sdkOptions,f=new Transaction$1,p=[],C=[i,s],B=[f.object(n),f.pure.u64("0"),f.pure.u64("999999999999"),f.object(CLOCK_ADDRESS$2)];f.moveCall({target:`${l.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:B,typeArguments:C});const le=(Ee=(await e.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:a.address})).events)==null?void 0:Ee.filter(Ue=>extractStructTagFromType$2(Ue.type).name==="BookStatus");if(le.length===0)return p;for(let Ue=0;Ue<le[0].parsedJson.depths.length;Ue++){const ze=le[0].parsedJson.price[Ue],Ze=le[0].parsedJson.depths[Ue],Qe={price:parseInt(ze,10),quantity:parseInt(Ze,10)};p.push(Qe)}return p}static async getPoolBids(e,n,i,s){var Ee;const{simulationAccount:a}=e.sdkOptions,{deepbook_endpoint_v2:l}=e.sdkOptions,f=new Transaction$1,p=[],C=[i,s],B=[f.object(n),f.pure.u64("0"),f.pure.u64("999999999999"),f.object(CLOCK_ADDRESS$2)];f.moveCall({target:`${l.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:B,typeArguments:C});const le=(Ee=(await e.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:a.address})).events)==null?void 0:Ee.filter(Ue=>extractStructTagFromType$2(Ue.type).name==="BookStatus");if(le.length===0)return p;for(let Ue=0;Ue<le[0].parsedJson.depths.length;Ue++){const ze=le[0].parsedJson.price[Ue],Ze=le[0].parsedJson.depths[Ue],Qe={price:parseInt(ze,10),quantity:parseInt(Ze,10)};p.push(Qe)}return p}static async preSwap(e,n,i,s){let a=!1,l=ZERO$2,f=new BN(s),p=ZERO$2;const C=new BN(s);if(i){let B=await this.getPoolBids(e,n.poolID,n.baseAsset,n.quoteAsset);B===null&&(a=!0),B=B.sort((N,le)=>le.price-N.price);for(let N=0;N<B.length;N+=1){const le=new BN(B[N].quantity),Ee=new BN(B[N].price),Ue=le.mul(new BN(Ee)).mul(new BN(n.takerFeeRate)).div(FLOAT_SCALING$1).div(FLOAT_SCALING$1);if(f.gt(le))f=f.sub(le),l=l.add(le.mul(Ee).div(FLOAT_SCALING$1).sub(Ue)),p=p.add(Ue);else{const ze=f.mul(new BN(B[N].price)).div(FLOAT_SCALING$1),Ze=ze.mul(new BN(n.takerFeeRate)).div(FLOAT_SCALING$1);l=l.add(ze.sub(Ze)),f=f.sub(f),p=p.add(Ze)}if(f.eq(ZERO$2))break}}else{const B=await this.getPoolAsks(e,n.poolID,n.baseAsset,n.quoteAsset);B===null&&(a=!0);for(let N=0;N<B.length;N+=1){const le=new BN(B[N].price).mul(new BN(B[N].quantity)).div(new BN(1e9)),Ee=le.mul(new BN(n.takerFeeRate)).div(FLOAT_SCALING$1),Ue=le.add(Ee);if(f.gt(le))l=l.add(new BN(B[N].quantity)),f=f.sub(Ue),p=p.add(Ee);else{const ze=new BN(B[N].quantity).div(new BN(n.lotSize)),Ze=Ue.div(ze),Qe=f.div(Ze);l=l.add(Qe.muln(n.lotSize)),f=f.sub(Qe.mul(Ze)),p=p.add(Qe.div(ze).mul(Ee))}if(f.eq(ZERO$2))break}}return{poolAddress:n.poolID,estimatedAmountIn:C.sub(f).toNumber(),estimatedAmountOut:l.toNumber(),estimatedFeeAmount:p,isExceed:a,amount:Number(s),aToB:i,byAmountIn:!0}}static async simulateSwap(e,n,i,s,a,l){var ir;const{deepbook_endpoint_v2:f}=e.sdkOptions;let p=new Transaction$1;const C=await this.getAccountCap(e);let B;if(C===""){const or=this.createAccountCap(e.senderAddress,e.sdkOptions,p),ur=or[0];p=or[1],B=ur}else B=p.object(C);const N=await e.getOwnerCoinAssets(e.senderAddress),le=TransactionUtil$1.buildCoinForAmount(p,N,BigInt(l),i,!1),Ee=le==null?void 0:le.targetCoin,Ue=TransactionUtil$1.buildCoinForAmount(p,N,BigInt(l),s,!1),ze=Ue==null?void 0:Ue.targetCoin,Ze=[i,s],Qe=[p.object(n),B,p.pure.u64(l),p.pure.u64(0),p.pure.bool(a),Ee,ze,p.object(CLOCK_ADDRESS$2)];p.moveCall({target:`${f.published_at}::${DeepbookEndpointsV2Moudle$1}::swap`,arguments:Qe,typeArguments:Ze});const{simulationAccount:ct}=e.sdkOptions,qt=(ir=(await e.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:ct.address})).events)==null?void 0:ir.filter(or=>extractStructTagFromType$2(or.type).name==="DeepbookSwapEvent");if(qt.length===0)return null;const nr=qt[0].parsedJson;return{poolAddress:nr.pool,estimatedAmountIn:nr.amount_in,estimatedAmountOut:nr.amount_out,aToB:nr.atob}}},RpcModule=class extends SuiClient$1{async queryEventsByPage(t,e="all"){let n=[],i=!0;const s=e==="all";let a=s?null:e.cursor;do{const l=await this.queryEvents({query:t,cursor:a,limit:s?null:e.limit});l.data?(n=[...n,...l.data],i=l.hasNextPage,a=l.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:a,hasNextPage:i}}async queryTransactionBlocksByPage(t,e="all",n="ascending"){let i=[],s=!0;const a=e==="all";let l=a?null:e.cursor;do{const f=await this.queryTransactionBlocks({filter:t,cursor:l,order:n,limit:a?null:e.limit,options:{showEvents:!0}});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async getOwnedObjectsByPage(t,e,n="all"){let i=[],s=!0;const a=n==="all";let l=a?null:n.cursor;do{const f=await this.getOwnedObjects({owner:t,...e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async getDynamicFieldsByPage(t,e="all"){let n=[],i=!0;const s=e==="all";let a=s?null:e.cursor;do{const l=await this.getDynamicFields({parentId:t,cursor:a,limit:s?null:e.limit});l.data?(n=[...n,...l.data],i=l.hasNextPage,a=l.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:a,hasNextPage:i}}async batchGetObjects(t,e,n=50){let i=[];try{for(let s=0;s<Math.ceil(t.length/n);s++){const a=await this.multiGetObjects({ids:t.slice(s*n,n*(s+1)),options:e});i=[...i,...a]}}catch(s){console.log(s)}return i}async calculationTxGas(t){const{sender:e}=t.blockData;if(e===void 0)throw Error("sdk sender is empty");const n=await this.devInspectTransactionBlock({transactionBlock:t,sender:e}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(t,e){try{return await this.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(t,e,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:t,sender:e})}catch(i){console.log("devInspectTransactionBlock error",i)}}},PoolModule=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPositionList(t,e="all"){const n={data:[],hasNextPage:!0},i=await this._sdk.fullClient.getDynamicFieldsByPage(t,e);n.hasNextPage=i.hasNextPage,n.nextCursor=i.nextCursor;const s=i.data.map(l=>{if(l.error!=null)throw new ClmmpoolsError$1(`when getPositionList get position objects error: ${l.error}, please check the rpc, contracts address config and position id.`,"InvalidConfig");return l.name.value}),a=await this._sdk.Position.getSipmlePositionList(s);return n.data=a,n}async getPoolImmutables(t=[],e=0,n=100,i=!1){const{package_id:s}=this._sdk.sdkOptions.clmm_pool,a=`${s}_getInitPoolEvent`,l=this.getCache(a,i),f=[],p=[];if(l!==void 0&&f.push(...l),f.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`})).data.forEach(N=>{const le=N.parsedJson;le&&f.push({poolAddress:le.pool_id,tickSpacing:le.tick_spacing,coinTypeA:extractStructTagFromType$2(le.coin_type_a).full_address,coinTypeB:extractStructTagFromType$2(le.coin_type_b).full_address})}),this.updateCache(a,f,cacheTime24h)}catch(B){console.log("getPoolImmutables",B)}const C=t.length>0;for(let B=0;B<f.length;B+=1){const N=f[B];C&&!t.includes(N.poolAddress)||!C&&(B<e||B>=e+n)||p.push(N)}return p}async getPools(t=[],e=0,n=100){var l,f,p;const i=[];let s=[];t.length>0?s=[...t]:(await this.getPoolImmutables([],e,n,!1)).forEach(B=>s.push(B.poolAddress));const a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0,showType:!0});for(const C of a){if(C.error!=null||((f=(l=C.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new ClmmpoolsError$1(`getPools error code: ${((p=C.error)==null?void 0:p.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const B=buildPool(C);i.push(B);const N=`${B.poolAddress}_getPoolObject`;this.updateCache(N,B,cacheTime24h)}return i}async getPoolImmutablesWithPage(t="all",e=!1){const{package_id:n}=this._sdk.sdkOptions.clmm_pool,i=[],s={data:[],hasNextPage:!1},a=t==="all",l=`${n}_getPoolImmutables`;if(a){const f=this.getCache(l,e);f&&i.push(...f)}if(i.length===0)try{const f=`${n}::factory::CreatePoolEvent`,p=await this._sdk.fullClient.queryEventsByPage({MoveEventType:f},t);s.hasNextPage=p.hasNextPage,s.nextCursor=p.nextCursor,p.data.forEach(C=>{const B=C.parsedJson;if(B){const N={poolAddress:B.pool_id,tickSpacing:B.tick_spacing,coinTypeA:extractStructTagFromType$2(B.coin_type_a).full_address,coinTypeB:extractStructTagFromType$2(B.coin_type_b).full_address};i.push(N)}})}catch(f){console.log("getPoolImmutables",f)}return s.data=i,a&&this.updateCache(`${n}_getPoolImmutables`,i,cacheTime24h),s}async getPoolsWithPage(t=[],e="all",n=!1){var l,f,p;const i=[];let s=[];t.length>0?s=[...t]:(await this.getPoolImmutablesWithPage(e,n)).data.forEach(B=>s.push(B.poolAddress));const a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0,showType:!0});for(const C of a){if(C.error!=null||((f=(l=C.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new ClmmpoolsError$1(`getPoolWithPages error code: ${((p=C.error)==null?void 0:p.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");const B=buildPool(C);i.push(B);const N=`${B.poolAddress}_getPoolObject`;this.updateCache(N,B,cacheTime24h)}return i}async getPool(t,e=!0){var l,f,p;const n=`${t}_getPoolObject`,i=this.getCache(n,e);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if(s.error!=null||((f=(l=s.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new ClmmpoolsError$1(`getPool error code: ${((p=s.error)==null?void 0:p.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");const a=buildPool(s);return this.updateCache(n,a),a}async getPoolByCoins(t,e){if(t.length===0)return[];for(let f=0;f<t.length;f++)t[f]==="0x2::sui::SUI"&&(t[f]="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI");let n=this._sdk.sdkOptions.statsPoolsUrl;if(!n)throw new ClmmpoolsError$1("statsPoolsUrl is not set in the sdk options.","StatsPoolsUrlNotSet");n+=`?order_by=-fees&limit=100&has_mining=true&has_farming=true&no_incentives=true&display_all_pools=true&coin_type=${t.join(",")}`;const i=await fetch(n);let s;try{s=await i.json()}catch{throw new ClmmpoolsError$1(`Failed tp [arse response from ${n}].`,"InvalidSwapCountUrl")}const a=s.data.lp_list;if(!a||a.length===0)throw new ClmmpoolsError$1(`Failed tp [arse response from ${n}].`,"PoolsNotFound");const l=[];for(const f of a)t.includes(f.coin_a_address)&&t.includes(f.coin_b_address)&&(e!=null?f.fee===e.toString()&&l.push(f.address):l.push(f.address));return l.length>0?await this.getPools(l):[]}async creatPoolsTransactionPayload(t){for(const n of t)if(isSortedSymbols(normalizeSuiAddress$2(n.coinTypeA),normalizeSuiAddress$2(n.coinTypeB))){const i=n.coinTypeB;n.coinTypeB=n.coinTypeA,n.coinTypeA=i}return await this.creatPool(t)}async creatPoolTransactionPayload(t){if(isSortedSymbols(normalizeSuiAddress$2(t.coinTypeA),normalizeSuiAddress$2(t.coinTypeB))){const e=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=e;const n=t.metadata_b;t.metadata_b=t.metadata_a,t.metadata_a=n}return await this.createPoolAndAddLiquidity(t)}async createPoolTransactionPayload(t){if(isSortedSymbols(normalizeSuiAddress$2(t.coinTypeA),normalizeSuiAddress$2(t.coinTypeB))){const e=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=e;const n=t.metadata_b;t.metadata_b=t.metadata_a,t.metadata_a=n}return await this.createPoolAndAddLiquidity(t)}async createPoolTransactionRowPayload(t){if(isSortedSymbols(normalizeSuiAddress$2(t.coinTypeA),normalizeSuiAddress$2(t.coinTypeB))){const e=t.coinTypeB;t.coinTypeB=t.coinTypeA,t.coinTypeA=e;const n=t.metadata_b;t.metadata_b=t.metadata_a,t.metadata_a=n}return await this.createPoolAndAddLiquidityRow(t)}async getClmmConfigs(t=!1){const{package_id:e}=this._sdk.sdkOptions.clmm_pool,n=`${e}_getInitEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),a=getObjectPreviousTransactionDigest(s),l=(await this._sdk.fullClient.queryEventsByPage({Transaction:a})).data,f={pools_id:"",global_config_id:"",global_vault_id:"",admin_cap_id:""};return l.length>0&&(l.forEach(p=>{const C=p.parsedJson;if(p.type)switch(extractStructTagFromType$2(p.type).full_address){case`${e}::config::InitConfigEvent`:f.global_config_id=C.global_config_id,f.admin_cap_id=C.admin_cap_id;break;case`${e}::factory::InitFactoryEvent`:f.pools_id=C.pools_id;break;case`${e}::rewarder::RewarderInitEvent`:f.global_vault_id=C.global_vault_id;break;case`${e}::partner::InitPartnerEvent`:f.partners_id=C.partners_id;break}}),this.updateCache(n,f,cacheTime24h)),f}async getSuiTransactionResponse(t,e=!1){const n=`${t}_getSuiTransactionResponse`,i=this.getCache(n,e);if(i!==void 0)return i;let s;try{s=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{s=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,s,cacheTime24h),s}async getPoolTransactionList({poolId:t,paginationArgs:e,order:n="descending",fullRpcUrl:i}){const{fullClient:s,sdkOptions:a}=this._sdk;let l;i?l=new RpcModule({url:i}):l=s;const f={data:[],hasNextPage:!1},p=e,C=e.limit||10;do{const B=await l.queryTransactionBlocksByPage({ChangedObject:t},{...p,limit:50},n);B.data.forEach((N,le)=>{f.nextCursor=B.nextCursor;const Ee=buildPoolTransactionInfo(N,le,a.clmm_pool.package_id,t);f.data=[...f.data,...Ee]}),f.hasNextPage=B.hasNextPage,f.nextCursor=B.nextCursor,p.cursor=B.nextCursor}while(f.data.length<C&&f.hasNextPage);return f.data.length>C&&(f.data=f.data.slice(0,C),f.nextCursor=f.data[f.data.length-1].tx),f}async creatPool(t){const e=new Transaction$1,{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,s=getPackagerConfigs$1(i),a=s.global_config_id,l=s.pools_id;return t.forEach(f=>{const p=[e.object(a),e.object(l),e.pure.u32(f.tick_spacing),e.pure.u128(f.initialize_sqrt_price),e.pure.string(f.uri),e.object(CLOCK_ADDRESS$2)];e.moveCall({target:`${n.published_at}::${ClmmIntegratePoolModule}::create_pool`,typeArguments:[f.coinTypeA,f.coinTypeB],arguments:p})}),e}async createPoolAndAddLiquidity(t){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const e=new Transaction$1;e.setSender(this.sdk.senderAddress);const{integrate:n,clmm_pool:i}=this.sdk.sdkOptions,s=getPackagerConfigs$1(i),a=s.global_config_id,l=s.pools_id,f=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress),p=TransactionUtil$1.buildCoinForAmount(e,f,BigInt(t.amount_a),t.coinTypeA,!1,!0),C=TransactionUtil$1.buildCoinForAmount(e,f,BigInt(t.amount_b),t.coinTypeB,!1,!0),B=[e.object(a),e.object(l),e.pure.u32(t.tick_spacing),e.pure.u128(t.initialize_sqrt_price),e.pure.string(t.uri),e.pure.u32(Number(asUintN$1(BigInt(t.tick_lower)).toString())),e.pure.u32(Number(asUintN$1(BigInt(t.tick_upper)).toString())),p.targetCoin,C.targetCoin,e.object(t.metadata_a),e.object(t.metadata_b),e.pure.bool(t.fix_amount_a),e.object(CLOCK_ADDRESS$2)];return e.moveCall({target:`${n.published_at}::pool_creator_v2::create_pool_v2`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:B}),TransactionUtil$1.buildTransferCoinToSender(this._sdk,e,p.targetCoin,t.coinTypeA),TransactionUtil$1.buildTransferCoinToSender(this._sdk,e,C.targetCoin,t.coinTypeB),e}async createPoolAndAddLiquidityRow(t){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const e=new Transaction$1,{clmm_pool:n}=this.sdk.sdkOptions,i=getPackagerConfigs$1(n),s=i.global_config_id,a=i.pools_id,l=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress),f=TransactionUtil$1.buildCoinForAmount(e,l,BigInt(t.amount_a),t.coinTypeA,!1,!0),p=TransactionUtil$1.buildCoinForAmount(e,l,BigInt(t.amount_b),t.coinTypeB,!1,!0),C=[e.object(s),e.object(a),e.pure.u32(t.tick_spacing),e.pure.u128(t.initialize_sqrt_price),e.pure.string(t.uri),e.pure.u32(Number(asUintN$1(BigInt(t.tick_lower)).toString())),e.pure.u32(Number(asUintN$1(BigInt(t.tick_upper)).toString())),f.targetCoin,p.targetCoin,e.object(t.metadata_a),e.object(t.metadata_b),e.pure.bool(t.fix_amount_a),e.object(CLOCK_ADDRESS$2)],B=e.moveCall({target:`${n.published_at}::pool_creator::create_pool_v2`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:C});return{transaction:e,position:B[0],coinAObject:B[1],coinBObject:B[2],coinAType:t.coinTypeA,coinBType:t.coinTypeB}}async fetchTicks(t){let e=[],n=[];for(;;){const s=await this.getTicks({pool_id:t.pool_id,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,start:n,limit:512});if(e=[...e,...s],s.length<512)break;n=[Number(asUintN$1(BigInt(s[s.length-1].index)))]}return e}async getTicks(t){var C;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=[],s=[t.coinTypeA,t.coinTypeB],a=new Transaction$1,l=a.makeMoveVec({elements:t.start.map(B=>a.pure.u32(B)),type:"u32"}),f=[a.object(t.pool_id),l,a.pure.u64(t.limit.toString())];if(a.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::fetch_ticks`,arguments:f,typeArguments:s}),!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("Invalid simulation account: Configuration requires a valid Sui address. Please check your SDK configuration.","InvalidSimulateAccount");const p=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:n.address});if(p.error!=null)throw new ClmmpoolsError$1(`getTicks error code: ${p.error??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return(C=p.events)==null||C.forEach(B=>{extractStructTagFromType$2(B.type).name==="FetchTicksResultEvent"&&B.parsedJson.ticks.forEach(N=>{i.push(buildTickDataByEvent(N))})}),i}async fetchPositionRewardList(t){var l;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=[];let s=[];const a=512;for(;;){const f=[t.coinTypeA,t.coinTypeB],p=new Transaction$1,C=p.makeMoveVec({elements:s.map(Ee=>p.pure.address(Ee)),type:void 0}),B=[p.object(t.pool_id),C,p.pure.u64(a)];if(p.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::fetch_positions`,arguments:B,typeArguments:f}),!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const N=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:n.address});if(N.error!=null)throw new ClmmpoolsError$1(`fetch position reward error code: ${N.error??"unknown error"}, please check config and tick object ids`,"InvalidPositionRewardObject");const le=[];if((l=N==null?void 0:N.events)==null||l.forEach(Ee=>{extractStructTagFromType$2(Ee.type).name==="FetchPositionsEvent"&&Ee.parsedJson.positions.forEach(Ue=>{const ze=buildPositionReward(Ue);le.push(ze)})}),i.push(...le),le.length<a)break;s=[le[le.length-1].pos_object_id]}return i}async fetchTicksByRpc(t){let e=[],n=null;const i=50;for(;;){const s=[],a=await this.sdk.fullClient.getDynamicFields({parentId:t,cursor:n,limit:i});if(n=a.nextCursor,a.data.forEach(l=>{extractStructTagFromType$2(l.objectType).module==="skip_list"&&s.push(l.objectId)}),e=[...e,...await this.getTicksByRpc(s)],!a.hasNextPage)break}return e}async getTicksByRpc(t){var i,s,a;const e=[],n=await this.sdk.fullClient.batchGetObjects(t,{showContent:!0,showType:!0});for(const l of n){if(l.error!=null||((s=(i=l.data)==null?void 0:i.content)==null?void 0:s.dataType)!=="moveObject")throw new ClmmpoolsError$1(`getTicksByRpc error code: ${((a=l.error)==null?void 0:a.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");const f=buildTickData(l);f!=null&&e.push(f)}return e}async getTickDataByIndex(t,e){var s,a;const n={type:"u64",value:asUintN$1(BigInt(tickScore(e).toString())).toString()},i=await this.sdk.fullClient.getDynamicFieldObject({parentId:t,name:n});if(i.error!=null||((a=(s=i.data)==null?void 0:s.content)==null?void 0:a.dataType)!=="moveObject")throw new ClmmpoolsError$1(`get tick by index: ${e} error: ${i.error}`,"InvalidTickIndex");return buildTickData(i)}async getTickDataByObjectId(t){var n,i,s;const e=await this.sdk.fullClient.getObject({id:t,options:{showContent:!0}});if(e.error!=null||((i=(n=e.data)==null?void 0:n.content)==null?void 0:i.dataType)!=="moveObject")throw new ClmmpoolsError$1(`getTicksByRpc error code: ${((s=e.error)==null?void 0:s.code)??"unknown error"}, please check config and tick object ids`,"InvalidTickObjectId");return buildTickData(e)}async getPartnerRefFeeAmount(t,e=!0){var p,C;const n=await this._sdk.fullClient.batchGetObjects([t],{showOwner:!0,showContent:!0,showDisplay:e,showType:!0});if(((C=(p=n[0].data)==null?void 0:p.content)==null?void 0:C.dataType)!=="moveObject")throw new ClmmpoolsError$1(`get partner by object id: ${t} error: ${n[0].error}`,"NotFoundPartnerObject");const i=n[0].data.content.fields.balances,s=await this._sdk.fullClient.getDynamicFieldsByPage(i.fields.id.id),a=[];s.data.forEach(B=>{B.objectId!=null&&a.push(B.objectId)});const l=[];return(await this._sdk.fullClient.batchGetObjects(a,{showOwner:!0,showContent:!0,showDisplay:e,showType:!0})).forEach(B=>{var le,Ee;if(B.error!=null||((Ee=(le=B.data)==null?void 0:le.content)==null?void 0:Ee.dataType)!=="moveObject")throw new ClmmpoolsError$1(`get coin by object id: ${B.data.objectId} error: ${B.error}`,"InvalidParnterRefFeeFields");const N={coinAddress:B.data.content.fields.name,coinObjectId:B.data.objectId,balance:BigInt(B.data.content.fields.value)};l.push(N)}),l}async claimPartnerRefFeePayload(t,e,n){const i=new Transaction$1,{clmm_pool:s}=this.sdk.sdkOptions,{global_config_id:a}=getPackagerConfigs$1(s),l=[n],f=[i.object(a),i.object(t),i.object(e)];return i.moveCall({target:`${s.published_at}::${ClmmPartnerModule}::claim_ref_fee`,arguments:f,typeArguments:l}),i}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},PositionModule=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}buildPositionType(){return`${this._sdk.sdkOptions.clmm_pool.package_id}::position::Position`}async getPositionTransactionList({posId:t,paginationArgs:e="all",order:n="ascending",fullRpcUrl:i,originPosId:s}){const{fullClient:a}=this._sdk,l=[t];s&&l.push(s);let f;i?f=new RpcModule({url:i}):f=a;const p={data:[],hasNextPage:!1};try{const C=await f.queryTransactionBlocksByPage({ChangedObject:t},e,n);return C.data.forEach((B,N)=>{const le=buildPositionTransactionInfo(B,N,l);p.data=[...p.data,...le]}),p.hasNextPage=C.hasNextPage,p.nextCursor=C.nextCursor,p}catch(C){console.log("Error in getPositionTransactionList:",C)}return p}async getPositionList(t,e=[],n=!0){const i=[],s=await this._sdk.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:n,showOwner:!0},filter:{Package:this._sdk.sdkOptions.clmm_pool.package_id}}),a=e.length>0;for(const l of s.data)if(extractStructTagFromType$2(l.data.type).full_address===this.buildPositionType()){const p=buildPosition(l),C=`${p.pos_object_id}_getPositionList`;this.updateCache(C,p,cacheTime24h),a?e.includes(p.pool)&&i.push(p):i.push(p)}return i}async getPosition(t,e,n=!0,i=!0){let s=await this.getSimplePosition(e,i);return n&&(s=await this.updatePositionRewarders(t,s)),s}async getPositionById(t,e=!0,n=!0){const i=await this.getSimplePosition(t,n);if(e){const s=await this._sdk.Pool.getPool(i.pool,!1);return await this.updatePositionRewarders(s.position_manager.positions_handle,i)}return i}async getSimplePosition(t,e=!0){const n=`${t}_getPositionList`;let i=this.getSimplePositionByCache(t);if(i===void 0){const s=await this.sdk.fullClient.getObject({id:t,options:{showContent:!0,showType:!0,showDisplay:e,showOwner:!0}});i=buildPosition(s),this.updateCache(n,i,cacheTime24h)}return i}getSimplePositionByCache(t){const e=`${t}_getPositionList`;return this.getCache(e)}async getSipmlePositionList(t,e=!0){const n=[],i=[];return t.forEach(s=>{const a=this.getSimplePositionByCache(s);a?n.push(a):i.push(s)}),i.length>0&&(await this._sdk.fullClient.batchGetObjects(i,{showOwner:!0,showContent:!0,showDisplay:e,showType:!0})).forEach(a=>{if(a.error==null){const l=buildPosition(a);n.push(l);const f=`${l.pos_object_id}_getPositionList`;this.updateCache(f,l,cacheTime24h)}}),n}async updatePositionRewarders(t,e){const n=await this.getPositionRewarders(t,e.pos_object_id);return{...e,...n}}async getPositionRewarders(t,e){try{const n=await this._sdk.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),s=getObjectFields(n.data).value.fields.value;return buildPositionReward(s)}catch(n){console.log(n);return}}async fetchPosFeeAmount(t){var p;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new Transaction$1;for(const C of t){const B=[C.coinTypeA,C.coinTypeB],N=[s.object(getPackagerConfigs$1(e).global_config_id),s.object(C.poolAddress),s.pure.address(C.positionId)];s.moveCall({target:`${n.published_at}::${ClmmFetcherModule}::fetch_position_fees`,arguments:N,typeArguments:B})}if(!checkInvalidSuiAddress$1(i.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address});if(a.error!=null)throw new ClmmpoolsError$1(`fetch position fee error code: ${a.error??"unknown error"}, please check config and postion and pool object ids`,"InvalidPoolObject");const l=(p=a.events)==null?void 0:p.filter(C=>extractStructTagFromType$2(C.type).name==="FetchPositionFeesEvent");if(l.length===0)return[];const f=[];for(let C=0;C<l.length;C+=1){const{parsedJson:B}=l[C],N={feeOwedA:new BN(B.fee_owned_a),feeOwedB:new BN(B.fee_owned_b),position_id:B.position_id};f.push(N)}return f}async batchFetchPositionFees(t){const e=[];for(const i of t){const s=await this._sdk.Position.getPositionById(i,!1),a=await this._sdk.Pool.getPool(s.pool,!1);e.push({poolAddress:a.poolAddress,positionId:s.pos_object_id,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB})}const n={};if(e.length>0){const i=await this.fetchPosFeeAmount(e);for(const s of i)n[s.position_id]=s;return n}return n}async createAddLiquidityFixTokenPayload(t,e,n,i,s){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const a=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress);if(e){const{isAdjustCoinA:l,isAdjustCoinB:f}=findAdjustCoin$1(t);if(t=t,t.fix_amount_a&&l||!t.fix_amount_a&&f)return n=await TransactionUtil$1.buildAddLiquidityFixTokenForGas(this._sdk,a,t,e,n,i,s),n}return TransactionUtil$1.buildAddLiquidityFixToken(this._sdk,a,t,n,i,s)}async createAddLiquidityPayload(t,e,n,i){const{integrate:s,clmm_pool:a}=this._sdk.sdkOptions;if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const l=asUintN$1(BigInt(t.tick_lower)).toString(),f=asUintN$1(BigInt(t.tick_upper)).toString(),p=[t.coinTypeA,t.coinTypeB];e=e||new Transaction$1;const C=!isValidSuiObjectId$2(t.pos_id),B=BigInt(t.max_amount_a),N=BigInt(t.max_amount_b);let le,Ee;if(n==null||i==null){const Ue=await this.sdk.getOwnerCoinAssets(this.sdk.senderAddress);le=TransactionUtil$1.buildCoinForAmount(e,Ue,B,t.coinTypeA,!1,!0),Ee=TransactionUtil$1.buildCoinForAmount(e,Ue,N,t.coinTypeB,!1,!0)}else le={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},Ee={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"};if(C)e.moveCall({target:`${s.published_at}::${ClmmIntegratePoolV2Module$1}::open_position_with_liquidity`,typeArguments:p,arguments:[e.object(getPackagerConfigs$1(a).global_config_id),e.object(t.pool_id),e.pure.u32(Number(l)),e.pure.u32(Number(f)),le.targetCoin,Ee.targetCoin,e.pure.u64(t.max_amount_a),e.pure.u64(t.max_amount_b),e.pure.u128(t.delta_liquidity),e.object(CLOCK_ADDRESS$2)]});else{const Ue=await this.sdk.getOwnerCoinAssets(this.sdk.senderAddress);e=TransactionUtil$1.createCollectRewarderAndFeeParams(this.sdk,e,t,Ue,le.remainCoins,Ee.remainCoins),e.moveCall({target:`${s.published_at}::${ClmmIntegratePoolV2Module$1}::add_liquidity`,typeArguments:p,arguments:[e.object(getPackagerConfigs$1(a).global_config_id),e.object(t.pool_id),e.object(t.pos_id),le.targetCoin,Ee.targetCoin,e.pure.u64(t.max_amount_a),e.pure.u64(t.max_amount_b),e.pure.u128(t.delta_liquidity),e.object(CLOCK_ADDRESS$2)]})}return e}async removeLiquidityTransactionPayload(t,e){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions,s="remove_liquidity";e=e||new Transaction$1;const a=[t.coinTypeA,t.coinTypeB],l=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress);e=TransactionUtil$1.createCollectRewarderAndFeeParams(this._sdk,e,t,l);const f=[e.object(getPackagerConfigs$1(n).global_config_id),e.object(t.pool_id),e.object(t.pos_id),e.pure.u128(t.delta_liquidity),e.pure.u64(t.min_amount_a),e.pure.u64(t.min_amount_b),e.object(CLOCK_ADDRESS$2)];return e.moveCall({target:`${i.published_at}::${ClmmIntegratePoolModule}::${s}`,typeArguments:a,arguments:f}),e}async closePositionTransactionPayload(t,e){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;e=e||new Transaction$1;const s=[t.coinTypeA,t.coinTypeB],a=await this.sdk.getOwnerCoinAssets(this.sdk.senderAddress);return e=TransactionUtil$1.createCollectRewarderAndFeeParams(this._sdk,e,t,a),e.moveCall({target:`${i.published_at}::${ClmmIntegratePoolModule}::close_position`,typeArguments:s,arguments:[e.object(getPackagerConfigs$1(n).global_config_id),e.object(t.pool_id),e.object(t.pos_id),e.pure.u64(t.min_amount_a),e.pure.u64(t.min_amount_b),e.object(CLOCK_ADDRESS$2)]}),e}openPositionTransactionPayload(t,e){const{clmm_pool:n,integrate:i}=this.sdk.sdkOptions;e=e||new Transaction$1;const s=[t.coinTypeA,t.coinTypeB],a=asUintN$1(BigInt(t.tick_lower)).toString(),l=asUintN$1(BigInt(t.tick_upper)).toString(),f=[e.object(getPackagerConfigs$1(n).global_config_id),e.object(t.pool_id),e.pure.u32(Number(a)),e.pure.u32(Number(l))];return e.moveCall({target:`${i.published_at}::${ClmmIntegratePoolModule}::open_position`,typeArguments:s,arguments:f}),e}async collectFeeTransactionPayload(t,e,n,i){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");e=e||new Transaction$1;const s=n||TransactionUtil$1.buildCoinWithBalance(BigInt(0),t.coinTypeA),a=i||TransactionUtil$1.buildCoinWithBalance(BigInt(0),t.coinTypeB);return this.createCollectFeePaylod(t,e,s,a),e}createCollectFeePaylod(t,e,n,i){const{clmm_pool:s,integrate:a}=this.sdk.sdkOptions,l=[t.coinTypeA,t.coinTypeB],f=[e.object(getPackagerConfigs$1(s).global_config_id),e.object(t.pool_id),e.object(t.pos_id),n,i];return e.moveCall({target:`${a.published_at}::${ClmmIntegratePoolV2Module$1}::collect_fee`,typeArguments:l,arguments:f}),e}createCollectFeeNoSendPaylod(t,e,n,i){const{clmm_pool:s,integrate:a}=this.sdk.sdkOptions,l=[t.coinTypeA,t.coinTypeB],f=[e.object(getPackagerConfigs$1(s).global_config_id),e.object(t.pool_id),e.object(t.pos_id),n,i];return e.moveCall({target:`${a.published_at}::${ClmmIntegratePoolV3Module}::collect_fee`,typeArguments:l,arguments:f}),e}async calculateFee(t){const e=await this.collectFeeTransactionPayload(t);if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const n=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:e,sender:this.sdk.senderAddress});for(const i of n.events)if(extractStructTagFromType$2(i.type).name==="CollectFeeEvent"){const s=i.parsedJson;return{feeOwedA:s.amount_a,feeOwedB:s.amount_b}}return{feeOwedA:"0",feeOwedB:"0"}}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},RewarderModule=class{constructor(t){Or(this,"_sdk");Or(this,"growthGlobal");this._sdk=t,this.growthGlobal=[ZERO$2,ZERO$2,ZERO$2]}get sdk(){return this._sdk}async emissionsEveryDay(t){const n=(await this.sdk.Pool.getPool(t)).rewarder_infos;if(!n)return null;const i=[];for(const s of n){const a=MathUtil$1.fromX64(new BN(s.emissions_per_second));i.push({emissions:Math.floor(a.toNumber()*60*60*24),coin_address:s.coinAddress})}return i}async updatePoolRewarder(t,e){const n=await this.sdk.Pool.getPool(t),i=n.rewarder_last_updated_time;if(n.rewarder_last_updated_time=e.toString(),Number(n.liquidity)===0||e.eq(new BN(i)))return n;const s=e.div(new BN(1e3)).sub(new BN(i)).add(new BN(15)),a=n.rewarder_infos;for(let l=0;l<a.length;l+=1){const f=a[l],p=MathUtil$1.checkMulDivFloor(s,new BN(f.emissions_per_second),new BN(n.liquidity),128);this.growthGlobal[l]=new BN(f.growth_global).add(new BN(p))}return n}async posRewardersAmount(t,e,n){const i=Date.parse(new Date().toString()),s=await this.updatePoolRewarder(t,new BN(i)),a=await this.sdk.Position.getPositionRewarders(e,n);if(a===void 0)return[];const l=s.ticks_handle,f=await this.sdk.Pool.getTickDataByIndex(l,a.tick_lower_index),p=await this.sdk.Pool.getTickDataByIndex(l,a.tick_upper_index);return this.posRewardersAmountInternal(s,a,f,p)}async poolRewardersAmount(t,e){const n=Date.parse(new Date().toString()),i=await this.updatePoolRewarder(e,new BN(n)),s=await this.sdk.Position.getPositionList(t,[e]),a=await this.getPoolLowerAndUpperTicks(i.ticks_handle,s),l=[ZERO$2,ZERO$2,ZERO$2];for(let f=0;f<s.length;f+=1){const p=await this.posRewardersAmountInternal(i,s[f],a[0][f],a[1][f]);for(let C=0;C<3;C+=1)l[C]=l[C].add(p[C].amount_owed)}return l}posRewardersAmountInternal(t,e,n,i){const s=e.tick_lower_index,a=e.tick_upper_index,l=getRewardInTickRange(t,n,i,s,a,this.growthGlobal),f=[],p=[];if(l.length>0){let C=MathUtil$1.subUnderflowU128(l[0],new BN(e.reward_growth_inside_0));C.gt(new BN("3402823669209384634633745948738404"))&&(C=ONE$1);const B=MathUtil$1.checkMulShiftRight(new BN(e.liquidity),C,64,128);f.push(l[0]),p.push({amount_owed:new BN(e.reward_amount_owed_0).add(B),coin_address:t.rewarder_infos[0].coinAddress})}if(l.length>1){let C=MathUtil$1.subUnderflowU128(l[1],new BN(e.reward_growth_inside_1));C.gt(new BN("3402823669209384634633745948738404"))&&(C=ONE$1);const B=MathUtil$1.checkMulShiftRight(new BN(e.liquidity),C,64,128);f.push(l[1]),p.push({amount_owed:new BN(e.reward_amount_owed_1).add(B),coin_address:t.rewarder_infos[1].coinAddress})}if(l.length>2){let C=MathUtil$1.subUnderflowU128(l[2],new BN(e.reward_growth_inside_2));C.gt(new BN("3402823669209384634633745948738404"))&&(C=ONE$1);const B=MathUtil$1.checkMulShiftRight(new BN(e.liquidity),C,64,128);f.push(l[2]),p.push({amount_owed:new BN(e.reward_amount_owed_2).add(B),coin_address:t.rewarder_infos[2].coinAddress})}return p}async batchFetchPositionRewarders(t){const e=[];for(const i of t){const s=await this._sdk.Position.getPositionById(i,!1),a=await this._sdk.Pool.getPool(s.pool,!1);e.push({poolAddress:a.poolAddress,positionId:s.pos_object_id,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB,rewarderInfo:a.rewarder_infos})}const n={};if(e.length>0){const i=await this.fetchPosRewardersAmount(e);for(const s of i)n[s.positionId]=s.rewarderAmountOwed;return n}return n}async fetchPositionRewarders(t,e){const n={poolAddress:t.poolAddress,positionId:e,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,rewarderInfo:t.rewarder_infos};return(await this.fetchPosRewardersAmount([n]))[0].rewarderAmountOwed}async batchFetchPositionFees(t){const e=[];for(const i of t){const s=await this._sdk.Position.getPositionById(i,!1),a=await this._sdk.Pool.getPool(s.pool,!1);e.push({poolAddress:a.poolAddress,positionId:s.pos_object_id,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB})}const n={};if(e.length>0){const i=await this.fetchPosFeeAmount(e);for(const s of i)n[s.position_id]=s;return n}return n}async fetchPosFeeAmount(t){var p;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new Transaction$1;for(const C of t){const B=[C.coinTypeA,C.coinTypeB],N=[s.object(getPackagerConfigs$1(e).global_config_id),s.object(C.poolAddress),s.pure.address(C.positionId)];s.moveCall({target:`${n.published_at}::${ClmmFetcherModule}::fetch_position_fees`,arguments:N,typeArguments:B})}const l=(p=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address})).events)==null?void 0:p.filter(C=>extractStructTagFromType$2(C.type).name==="FetchPositionFeesEvent");if(l.length===0)return[];const f=[];for(let C=0;C<l.length;C+=1){const{parsedJson:B}=l[C],N={feeOwedA:new BN(B.fee_owned_a),feeOwedB:new BN(B.fee_owned_b),position_id:B.position_id};f.push(N)}return f}async fetchPosRewardersAmount(t){var p;const{clmm_pool:e,integrate:n,simulationAccount:i}=this.sdk.sdkOptions,s=new Transaction$1;for(const C of t){const B=[C.coinTypeA,C.coinTypeB],N=[s.object(getPackagerConfigs$1(e).global_config_id),s.object(C.poolAddress),s.pure.address(C.positionId),s.object(CLOCK_ADDRESS$2)];s.moveCall({target:`${n.published_at}::${ClmmFetcherModule}::fetch_position_rewards`,arguments:N,typeArguments:B})}if(!checkInvalidSuiAddress$1(i.address))throw new ClmmpoolsError$1(`this config simulationAccount: ${i.address} is not set right`,"InvalidSimulateAccount");const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:i.address});if(a.error!=null)throw new ClmmpoolsError$1(`fetch position rewards error code: ${a.error??"unknown error"}, please check config and params`,"InvalidConfig");const l=(p=a.events)==null?void 0:p.filter(C=>extractStructTagFromType$2(C.type).name==="FetchPositionRewardsEvent");if(l.length===0)return[];if(l.length!==t.length)throw new ClmmpoolsError$1("valueData.length !== params.pools.length");const f=[];for(let C=0;C<l.length;C+=1){const B={poolAddress:t[C].poolAddress,positionId:t[C].positionId,rewarderAmountOwed:[]};for(let N=0;N<t[C].rewarderInfo.length;N+=1)B.rewarderAmountOwed.push({amount_owed:new BN(l[C].parsedJson.data[N]),coin_address:t[C].rewarderInfo[N].coinAddress});f.push(B)}return f}async fetchPoolRewardersAmount(t,e){const n=await this.sdk.Pool.getPool(e),i=await this.sdk.Position.getPositionList(t,[e]),s=[];for(const f of i)s.push({poolAddress:n.poolAddress,positionId:f.pos_object_id,rewarderInfo:n.rewarder_infos,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB});const a=await this.fetchPosRewardersAmount(s),l=[ZERO$2,ZERO$2,ZERO$2];if(a!=null)for(const f of a)for(let p=0;p<f.rewarderAmountOwed.length;p+=1)l[p]=l[p].add(f.rewarderAmountOwed[p].amount_owed);return l}async getPoolLowerAndUpperTicks(t,e){const n=[],i=[];for(const s of e){const a=await this.sdk.Pool.getTickDataByIndex(t,s.tick_lower_index),l=await this.sdk.Pool.getTickDataByIndex(t,s.tick_upper_index);n.push(a),i.push(l)}return[n,i]}async collectRewarderTransactionPayload(t){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const e=await this.sdk.getOwnerCoinAssets(this.sdk.senderAddress,null);let n=new Transaction$1;return n=TransactionUtil$1.createCollectRewarderAndFeeParams(this._sdk,n,t,e),n}async batchCollectRewardePayload(t,e,n,i){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const s=await this.sdk.getOwnerCoinAssets(this.sdk.senderAddress,null);e=e||new Transaction$1;const a={};return t.forEach(l=>{const f=normalizeCoinType$2(l.coinTypeA),p=normalizeCoinType$2(l.coinTypeB);if(l.collect_fee){let B=a[f];B==null&&(n==null?B=TransactionUtil$1.buildCoinForAmount(e,s,BigInt(0),f,!1):B={targetCoin:n,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a[f]=B);let N=a[p];N==null&&(i==null?N=TransactionUtil$1.buildCoinForAmount(e,s,BigInt(0),p,!1):N={targetCoin:i,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},a[p]=N),e=this._sdk.Position.createCollectFeeNoSendPaylod({pool_id:l.pool_id,pos_id:l.pos_id,coinTypeA:l.coinTypeA,coinTypeB:l.coinTypeB},e,B.targetCoin,N.targetCoin)}const C=[];l.rewarder_coin_types.forEach(B=>{const N=normalizeCoinType$2(B);let le=a[B];le===void 0&&(le=TransactionUtil$1.buildCoinForAmount(e,s,BigInt(0),N,!1),a[N]=le),C.push(le.targetCoin)}),e=this.createCollectRewarderNoSendPaylod(l,e,C)}),Object.keys(a).forEach(l=>{const f=a[l];f.isMintZeroCoin&&TransactionUtil$1.buildTransferCoin(this.sdk,e,f.targetCoin,l,this.sdk.senderAddress)}),e}createCollectRewarderPaylod(t,e,n){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,a=getPackagerConfigs$1(i),l=[t.coinTypeA,t.coinTypeB];return t.rewarder_coin_types.forEach((f,p)=>{e&&e.moveCall({target:`${s.published_at}::${ClmmIntegratePoolV2Module$1}::collect_reward`,typeArguments:[...l,f],arguments:[e.object(a.global_config_id),e.object(t.pool_id),e.object(t.pos_id),e.object(a.global_vault_id),n[p],e.object(CLOCK_ADDRESS$2)]})}),e}createCollectRewarderNoSendPaylod(t,e,n){const{clmm_pool:i,integrate:s}=this.sdk.sdkOptions,a=getPackagerConfigs$1(i),l=[t.coinTypeA,t.coinTypeB];return t.rewarder_coin_types.forEach((f,p)=>{e&&e.moveCall({target:`${s.published_at}::${ClmmIntegratePoolV3Module}::collect_reward`,typeArguments:[...l,f],arguments:[e.object(a.global_config_id),e.object(t.pool_id),e.object(t.pos_id),e.object(a.global_vault_id),n[p],e.object(CLOCK_ADDRESS$2)]})}),e}};function _pairSymbol(t,e){return{pair:`${t}-${e}`,reversePair:`${e}-${t}`}}var RouterModule=class{constructor(t){Or(this,"graph");Or(this,"pathProviders");Or(this,"coinProviders");Or(this,"_coinAddressMap");Or(this,"poolAddressMap");Or(this,"_sdk");this.pathProviders=[],this.coinProviders={coins:[]},this.graph=new Graph(!1),this._coinAddressMap=new Map,this.poolAddressMap=new Map,this._sdk=t,this.getPoolAddressMapAndDirection=this.getPoolAddressMapAndDirection.bind(this),this.setCoinList=this.setCoinList.bind(this),this.loadGraph=this.loadGraph.bind(this),this.addCoinProvider=this.addCoinProvider.bind(this),this.addPathProvider=this.addPathProvider.bind(this),this.preRouterSwapA2B2C=this.preRouterSwapA2B2C.bind(this),this.price=this.price.bind(this),this.getPoolWithTVL=this.getPoolWithTVL.bind(this)}get sdk(){return this._sdk}getPoolAddressMapAndDirection(t,e){const{pair:n,reversePair:i}=_pairSymbol(t,e);let s=this.poolAddressMap.get(n);if(s!=null)return{addressMap:s,direction:!0};if(s=this.poolAddressMap.get(i),s!=null)return{addressMap:s,direction:!1}}setCoinList(){this.coinProviders.coins.forEach(t=>{this._coinAddressMap.set(t.address,t)})}loadGraph(t,e){this.addCoinProvider(t),this.addPathProvider(e),this.setCoinList(),this.pathProviders.forEach(n=>{const{paths:i}=n;i.forEach(s=>{const a=this.graph.getVertexByKey(s.base)??new GraphVertex(s.base),l=this.graph.getVertexByKey(s.quote)??new GraphVertex(s.quote);this.graph.addEdge(new GraphEdge(a,l));const f=this._coinAddressMap.get(s.base),p=this._coinAddressMap.get(s.quote);if(f!=null&&p!=null){const C=_pairSymbol(s.base,s.quote).pair;this.poolAddressMap.set(C,s.addressMap)}})})}addPathProvider(t){for(let e=0;e<t.paths.length;e+=1){const{base:n,quote:i}=t.paths[e];n.localeCompare(i)<0&&(t.paths[e].base=i,t.paths[e].quote=n),n==="0x2::sui::SUI"&&(t.paths[e].base=i,t.paths[e].quote=n),i==="0x2::sui::SUI"&&(t.paths[e].base=n,t.paths[e].quote=i)}return this.pathProviders.push(t),this}addCoinProvider(t){return this.coinProviders=t,this}tokenInfo(t){return this._coinAddressMap.get(t)}getFeeRate(t,e,n){const i=_pairSymbol(t,e).pair,s=this.poolAddressMap.get(i);if(s!=null){for(const[f,p]of s.entries())if(p===n)return f*100}const a=_pairSymbol(t,e).reversePair,l=this.poolAddressMap.get(a);if(l!=null){for(const[f,p]of l.entries())if(p===n)return f*100}return 0}async price(t,e,n,i,s,a,l){const f=this.tokenInfo(t),p=this.tokenInfo(e);if(f===void 0||p===void 0)throw new ClmmpoolsError$1("From/To coin is undefined","InvalidCoin");const C=this.graph.getVertexByKey(f.address),B=this.graph.getVertexByKey(p.address),N=this.graph.findAllPath(C,B),le=Array.from(N);if(le.length===0)throw new ClmmpoolsError$1("No find valid path in coin graph","NotFoundPath");let Ee=[];for(let fr=0;fr<le.length;fr+=1){const ar=le[fr];if(ar.length>3)continue;const Lt=[],Vt=[],tt=[],Ye=[];for(let ot=0;ot<ar.length-1;ot+=1){const Et=ar[ot].value.toString(),er=ar[ot+1].value.toString(),rr=this.getPoolAddressMapAndDirection(Et,er),yt=rr==null?void 0:rr.addressMap,tr=rr==null?void 0:rr.direction;yt!=null&&tr!=null&&(Vt.push(tr),Lt.push(Et),Lt.push(er),yt.forEach(Ut=>{ot===0?tt.push(Ut):Ye.push(Ut)}))}for(const ot of tt)if(Ye.length>0)for(const Et of Ye){const er={stepNums:2,poolAB:ot,poolBC:Et,a2b:Vt[0],b2c:Vt[1],amount:n,byAmountIn:i,coinTypeA:Lt[0],coinTypeB:Lt[1],coinTypeC:Lt[3]};Ee.push(er)}else{const Et={stepNums:1,poolAB:ot,poolBC:void 0,a2b:Vt[0],b2c:void 0,amount:n,byAmountIn:i,coinTypeA:Lt[0],coinTypeB:Lt[1],coinTypeC:void 0};Ee.push(Et)}}const Ue=Ee.filter(fr=>fr.stepNums===1),ze=Ee.filter(fr=>fr.stepNums!==1);let Ze=[];try{Ze=await this.getPoolWithTVL()}catch{Ze=[]}if(Ze.length>0){const fr=new Map(Ze.map(ar=>[ar.poolAddress,ar]));ze.sort((ar,Lt)=>{let Vt=0,tt=0;if(fr.has(ar.poolAB)&&fr.has(ar.poolBC)){const Ye=fr.get(ar.poolAB),ot=fr.get(ar.poolBC);Vt=Math.min(Ye.tvl,ot.tvl)}if(fr.has(Lt.poolAB)&&fr.has(Lt.poolBC)){const Ye=fr.get(Lt.poolAB),ot=fr.get(Lt.poolBC);tt=Math.min(Ye.tvl,ot.tvl)}return tt-Vt})}if(Ee=[...Ue,...ze],Ee.length===0){if(l!=null){const fr=await this.sdk.Swap.preSwapWithMultiPool(l),ar={amountIn:new BN(fr.estimatedAmountIn),amountOut:new BN(fr.estimatedAmountOut),poolAddress:[fr.poolAddress],a2b:[fr.aToB],rawAmountLimit:i?[fr.estimatedAmountOut]:[fr.estimatedAmountIn],isExceed:fr.isExceed,coinType:[t,e]},Lt={paths:[ar],partner:a,priceSlippagePoint:s};return{amountIn:new BN(fr.estimatedAmountIn),amountOut:new BN(fr.estimatedAmountOut),paths:[ar],a2b:fr.aToB,b2c:void 0,byAmountIn:i,isExceed:fr.isExceed,targetSqrtPrice:[fr.estimatedEndSqrtPrice],currentSqrtPrice:[fr.estimatedStartSqrtPrice],coinTypeA:t,coinTypeB:e,coinTypeC:void 0,createTxParams:Lt}}throw new ClmmpoolsError$1("No parameters available for service downgrade","NoDowngradeNeedParams")}const Qe=await this.preRouterSwapA2B2C(Ee.slice(0,16));if(Qe==null){if(l!=null){const ar=await this.sdk.Swap.preSwapWithMultiPool(l),Lt={amountIn:new BN(ar.estimatedAmountIn),amountOut:new BN(ar.estimatedAmountOut),poolAddress:[ar.poolAddress],a2b:[ar.aToB],rawAmountLimit:i?[ar.estimatedAmountOut]:[ar.estimatedAmountIn],isExceed:ar.isExceed,coinType:[t,e]},Vt={paths:[Lt],partner:a,priceSlippagePoint:s};return{amountIn:new BN(ar.estimatedAmountIn),amountOut:new BN(ar.estimatedAmountOut),paths:[Lt],a2b:ar.aToB,b2c:void 0,byAmountIn:i,isExceed:ar.isExceed,targetSqrtPrice:[ar.estimatedEndSqrtPrice],currentSqrtPrice:[ar.estimatedStartSqrtPrice],coinTypeA:t,coinTypeB:e,coinTypeC:void 0,createTxParams:Vt}}return{amountIn:ZERO$2,amountOut:ZERO$2,paths:[],a2b:!1,b2c:!1,byAmountIn:i,isExceed:!0,targetSqrtPrice:[],currentSqrtPrice:[],coinTypeA:"",coinTypeB:"",coinTypeC:void 0,createTxParams:void 0}}const ct=Qe.index,wt=Ee[ct].poolBC!=null?[Ee[ct].poolAB,Ee[ct].poolBC]:[Ee[ct].poolAB],qt=i?[Qe.amountMedium,Qe.amountOut]:[Qe.amountIn,Qe.amountMedium],nr=[];nr.push(Ee[ct].a2b),Qe.stepNum>1&&nr.push(Ee[ct].b2c);const ir=[];ir.push(Ee[ct].coinTypeA),ir.push(Ee[ct].coinTypeB),Qe.stepNum>1&&ir.push(Ee[ct].coinTypeC);const or={amountIn:Qe.amountIn,amountOut:Qe.amountOut,poolAddress:wt,a2b:nr,rawAmountLimit:qt,isExceed:Qe.isExceed,coinType:ir},ur={paths:[or],partner:a,priceSlippagePoint:s};return{amountIn:Qe.amountIn,amountOut:Qe.amountOut,paths:[or],a2b:Ee[ct].a2b,b2c:Qe.stepNum>1?Ee[ct].b2c:void 0,byAmountIn:i,isExceed:Qe.isExceed,targetSqrtPrice:Qe.targetSqrtPrice,currentSqrtPrice:Qe.currentSqrtPrice,coinTypeA:Ee[ct].coinTypeA,coinTypeB:Ee[ct].coinTypeB,coinTypeC:Qe.stepNum>1?Ee[ct].coinTypeC:void 0,createTxParams:ur}}async priceUseV1(t,e,n,i,s,a,l){if(l!=null){const f=await this.sdk.Swap.preSwapWithMultiPool(l),p={amountIn:new BN(f.estimatedAmountIn),amountOut:new BN(f.estimatedAmountOut),poolAddress:[f.poolAddress],a2b:[f.aToB],rawAmountLimit:i?[f.estimatedAmountOut]:[f.estimatedAmountIn],isExceed:f.isExceed,coinType:[t,e]},C={paths:[p],partner:a,priceSlippagePoint:s};return{amountIn:new BN(f.estimatedAmountIn),amountOut:new BN(f.estimatedAmountOut),paths:[p],a2b:f.aToB,b2c:void 0,byAmountIn:i,isExceed:f.isExceed,targetSqrtPrice:[f.estimatedEndSqrtPrice],currentSqrtPrice:[f.estimatedStartSqrtPrice],coinTypeA:t,coinTypeB:e,coinTypeC:void 0,createTxParams:C}}throw new ClmmpoolsError$1("No parameters available for service downgrade","NoDowngradeNeedParams")}async preRouterSwapA2B2C(t){var N;if(t.length===0)return null;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new Transaction$1;for(const le of t)if(le.stepNums>1){const Ee=[i.object(le.poolAB),i.object(le.poolBC),i.pure.bool(le.a2b),i.pure.bool(le.b2c),i.pure.bool(le.byAmountIn),i.pure.u64(le.amount.toString())],Ue=[];le.a2b?Ue.push(le.coinTypeA,le.coinTypeB):Ue.push(le.coinTypeB,le.coinTypeA),le.b2c?Ue.push(le.coinTypeB,le.coinTypeC):Ue.push(le.coinTypeC,le.coinTypeB),i.moveCall({target:`${e.published_at}::${ClmmIntegrateRouterModule$1}::calculate_router_swap_result`,typeArguments:Ue,arguments:Ee})}else{const Ee=[i.object(le.poolAB),i.pure.bool(le.a2b),i.pure.bool(le.byAmountIn),i.pure.u64(le.amount.toString())],Ue=le.a2b?[le.coinTypeA,le.coinTypeB]:[le.coinTypeB,le.coinTypeA];i.moveCall({target:`${e.published_at}::${ClmmExpectSwapModule}::get_expect_swap_result`,arguments:Ee,typeArguments:Ue})}if(!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const a=(N=(await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:N.filter(le=>extractStructTagFromType$2(le.type).name==="CalculatedRouterSwapResultEvent"||extractStructTagFromType$2(le.type).name==="ExpectSwapResultEvent");if(a.length===0)return null;let l=t[0].byAmountIn?ZERO$2:U64_MAX$1,f=0;for(let le=0;le<a.length;le+=1)if(!a[le].parsedJson.data.is_exceed)if(t[0].byAmountIn){const Ee=new BN(a[le].parsedJson.data.amount_out);Ee.gt(l)&&(f=le,l=Ee)}else{const Ee=t[le].stepNums>1?new BN(a[le].parsedJson.data.amount_in):new BN(a[le].parsedJson.data.amount_in).add(new BN(a[le].parsedJson.data.fee_amount));Ee.lt(l)&&(f=le,l=Ee)}const p=[],C=[];return t[f].stepNums>1?(C.push(a[f].parsedJson.data.target_sqrt_price_ab,a[f].parsedJson.data.target_sqrt_price_cd),p.push(a[f].parsedJson.data.current_sqrt_price_ab,a[f].parsedJson.data.current_sqrt_price_cd)):(C.push(a[f].parsedJson.data.after_sqrt_price),p.push(a[f].parsedJson.current_sqrt_price)),{index:f,amountIn:t[0].byAmountIn?t[f].amount:l,amountMedium:a[f].parsedJson.data.amount_medium,amountOut:t[0].byAmountIn?l:t[f].amount,targetSqrtPrice:C,currentSqrtPrice:p,isExceed:a[f].parsedJson.data.is_exceed,stepNum:t[f].stepNums}}async getPoolWithTVL(){const t=[],{swapCountUrl:e}=this._sdk.sdkOptions;if(!e)return t;let n;try{n=await fetch(e)}catch{throw new ClmmpoolsError$1(`Failed to get pool list with liquidity from ${e}.`,"InvalidSwapCountUrl")}let i;try{i=await n.json()}catch{throw new ClmmpoolsError$1(`Failed tp [arse response from ${e}].`,"InvalidSwapCountUrl")}if(i.code!==200)throw new ClmmpoolsError$1(`Failed to get pool list from ${e}. Statu code is ${i.code}.`,"InvalidSwapCountUrl");const{pools:s}=i.data;for(const a of s)t.push({poolAddress:a.swap_account,tvl:Number(a.tvl_in_usd)});return t}},SwapModule=class{constructor(t){Or(this,"_sdk");Or(this,"calculateSingleImpact",(t,e)=>e.minus(t).div(e).mul(100));this._sdk=t}get sdk(){return this._sdk}calculateSwapFee(t){let e=d$3(0);return t.forEach(n=>{const i=n.basePaths.length;if(i>0){const s=n.basePaths[0],a=s.label==="Cetus"?new Decimal$1(s.feeRate).div(10**6):new Decimal$1(s.feeRate).div(10**9),l=d$3(s.inputAmount).div(10**s.fromDecimal).mul(a);if(e=e.add(l),i>1){const f=n.basePaths[1],p=s.direction?s.currentPrice:new Decimal$1(1).div(s.currentPrice),C=f.direction?f.currentPrice:new Decimal$1(1).div(f.currentPrice),B=f.label==="Cetus"?new Decimal$1(f.feeRate).div(10**6):new Decimal$1(f.feeRate).div(10**9),le=d$3(f.outputAmount).div(10**f.toDecimal).mul(B).div(p.mul(C));e=e.add(le)}}}),e.toString()}calculateSwapPriceImpact(t){let e=d$3(0);return t.forEach(n=>{const i=n.basePaths.length;if(i===1){const s=n.basePaths[0],a=d$3(s.outputAmount).div(10**s.toDecimal),l=d$3(s.inputAmount).div(10**s.fromDecimal),f=a.div(l),p=s.direction?new Decimal$1(s.currentPrice):new Decimal$1(1).div(s.currentPrice);e=e.add(this.calculateSingleImpact(f,p))}if(i===2){const s=n.basePaths[0],a=n.basePaths[1],l=s.direction?new Decimal$1(s.currentPrice):new Decimal$1(1).div(s.currentPrice),f=a.direction?new Decimal$1(a.currentPrice):new Decimal$1(1).div(a.currentPrice),p=l.mul(f),C=new Decimal$1(a.outputAmount).div(10**a.toDecimal),B=new Decimal$1(s.inputAmount).div(10**s.fromDecimal),N=C.div(B);e=e.add(this.calculateSingleImpact(N,p))}}),e.toString()}async preSwapWithMultiPool(t){var C;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[t.coinTypeA,t.coinTypeB];for(let B=0;B<t.poolAddresses.length;B+=1){const N=[i.object(t.poolAddresses[B]),i.pure.bool(t.a2b),i.pure.bool(t.byAmountIn),i.pure.u64(t.amount)];i.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::calculate_swap_result`,arguments:N,typeArguments:s})}if(!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const a=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(a.error!=null)throw new ClmmpoolsError$1(`pre swap with multi pools error code: ${a.error??"unknown error"}, please check config and params`,"InvalidConfig");const l=(C=a.events)==null?void 0:C.filter(B=>extractStructTagFromType$2(B.type).name==="CalculatedSwapResultEvent");if(l.length===0)return null;if(l.length!==t.poolAddresses.length)throw new ClmmpoolsError$1("valueData.length !== params.pools.length","ParamsLengthNotEqual");let f=t.byAmountIn?ZERO$2:U64_MAX$1,p=0;for(let B=0;B<l.length;B+=1)if(!l[B].parsedJson.data.is_exceed)if(t.byAmountIn){const N=new BN(l[B].parsedJson.data.amount_out);N.gt(f)&&(p=B,f=N)}else{const N=new BN(l[B].parsedJson.data.amount_out);N.lt(f)&&(p=B,f=N)}return this.transformSwapWithMultiPoolData({poolAddress:t.poolAddresses[p],a2b:t.a2b,byAmountIn:t.byAmountIn,amount:t.amount,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB},l[p].parsedJson)}async preswap(t){var p;const{integrate:e,simulationAccount:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[t.coinTypeA,t.coinTypeB],a=[i.object(t.pool.poolAddress),i.pure.bool(t.a2b),i.pure.bool(t.byAmountIn),i.pure.u64(t.amount)];if(i.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::calculate_swap_result`,arguments:a,typeArguments:s}),!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const l=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address});if(l.error!=null)throw new ClmmpoolsError$1(`preswap error code: ${l.error??"unknown error"}, please check config and params`,"InvalidConfig");const f=(p=l.events)==null?void 0:p.filter(C=>extractStructTagFromType$2(C.type).name==="CalculatedSwapResultEvent");return f.length===0?null:this.transformSwapData(t,f[0].parsedJson.data)}transformSwapData(t,e){const n=e.amount_in&&e.fee_amount?new BN(e.amount_in).add(new BN(e.fee_amount)).toString():"";return{poolAddress:t.pool.poolAddress,currentSqrtPrice:t.currentSqrtPrice,estimatedAmountIn:n,estimatedAmountOut:e.amount_out,estimatedEndSqrtPrice:e.after_sqrt_price,estimatedFeeAmount:e.fee_amount,isExceed:e.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn}}transformSwapWithMultiPoolData(t,e){const{data:n}=e;console.log("json data. ",n);const i=n.amount_in&&n.fee_amount?new BN(n.amount_in).add(new BN(n.fee_amount)).toString():"";return{poolAddress:t.poolAddress,estimatedAmountIn:i,estimatedAmountOut:n.amount_out,estimatedEndSqrtPrice:n.after_sqrt_price,estimatedStartSqrtPrice:n.step_results[0].current_sqrt_price,estimatedFeeAmount:n.fee_amount,isExceed:n.is_exceed,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn}}calculateRates(t){const{currentPool:e}=t,n=transClmmpoolDataWithoutTicks(e);let i;t.a2b?i=t.swapTicks.sort((N,le)=>le.index-N.index):i=t.swapTicks.sort((N,le)=>N.index-le.index);const s=computeSwap(t.a2b,t.byAmountIn,t.amount,n,i);let a=!1;t.byAmountIn?a=s.amountIn.lt(t.amount):a=s.amountOut.lt(t.amount);const l=SwapUtils$1.getDefaultSqrtPriceLimit(t.a2b);t.a2b&&s.nextSqrtPrice.lt(l)&&(a=!0),!t.a2b&&s.nextSqrtPrice.gt(l)&&(a=!0);let f=0;s.crossTickNum>6&&s.crossTickNum<40&&(f=22e3*(s.crossTickNum-6)),s.crossTickNum>40&&(a=!0);const p=TickMath$1.sqrtPriceX64ToPrice(n.currentSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),C=TickMath$1.sqrtPriceX64ToPrice(s.nextSqrtPrice,t.decimalsA,t.decimalsB).toNumber(),B=Math.abs(p-C)/p*100;return{estimatedAmountIn:s.amountIn,estimatedAmountOut:s.amountOut,estimatedEndSqrtPrice:s.nextSqrtPrice,estimatedFeeAmount:s.feeAmount,isExceed:a,extraComputeLimit:f,amount:t.amount,aToB:t.a2b,byAmountIn:t.byAmountIn,priceImpactPct:B}}async createSwapTransactionPayload(t,e){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const n=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress);if(e){const{isAdjustCoinA:i,isAdjustCoinB:s}=findAdjustCoin$1(t);if(t.a2b&&i||!t.a2b&&s)return await TransactionUtil$1.buildSwapTransactionForGas(this._sdk,t,n,e)}return TransactionUtil$1.buildSwapTransaction(this.sdk,t,n)}async createSwapTransactionWithoutTransferCoinsPayload(t,e){if(!checkInvalidSuiAddress$1(this.sdk.senderAddress))throw new ClmmpoolsError$1('Invalid sender address: cetus clmm sdk requires a valid sender address. Please set it using sdk.senderAddress = "0x..."',"InvalidSendAddress");const n=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress);if(e){const{isAdjustCoinA:i,isAdjustCoinB:s}=findAdjustCoin$1(t);if(t.a2b&&i||!t.a2b&&s)return await TransactionUtil$1.buildSwapTransactionWithoutTransferCoinsForGas(this._sdk,t,n,e)}return TransactionUtil$1.buildSwapTransactionWithoutTransferCoins(this.sdk,t,n)}},TokenModule=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getAllRegisteredTokenList(t=!1){return await this.factchTokenList("",t)}async getOwnerTokenList(t="",e=!1){return await this.factchTokenList(t,e)}async getAllRegisteredPoolList(t=!1){return await this.factchPoolList("",t)}async getOwnerPoolList(t="",e=!1){return await this.factchPoolList(t,e)}async getWarpPoolList(t=!1){return await this.factchWarpPoolList("","",t)}async getOwnerWarpPoolList(t="",e="",n=!1){return await this.factchWarpPoolList(t,e,n)}async getTokenListByCoinTypes(t){const e={},i=this.getCache("getAllRegisteredTokenList");if(i!==void 0){const a=i;for(const l of t)for(const f of a)if(normalizeCoinType$2(l)===normalizeCoinType$2(f.address)){e[l]=f;continue}}const s=t.filter(a=>e[a]===void 0);for(const a of s){const l=`${a}_metadata`,f=this.getCache(l);if(f!==void 0)e[a]=f;else{const p=await this._sdk.fullClient.getCoinMetadata({coinType:a});if(p){const C={id:p.id,name:p.name,symbol:p.symbol,official_symbol:p.symbol,coingecko_id:"",decimals:p.decimals,project_url:"",logo_url:p.iconUrl,address:a};e[a]=C,this.updateCache(l,C,cacheTime24h)}}}return e}async factchTokenList(t="",e=!1){var N;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,a=this.getCache("getAllRegisteredTokenList",e);if(a!==void 0)return a;const l=t.length>0,f=512;let p=0,C=[];if(i===void 0)throw Error("please config token ofsdkOptions");const B=getPackagerConfigs$1(i);for(;;){const le=new Transaction$1;le.moveCall({target:`${i.published_at}::coin_list::${l?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:l?[le.pure.address(B.coin_registry_id),le.pure.address(t),le.pure.u64(p),le.pure.u64(f)]:[le.pure.address(B.coin_registry_id),le.pure.u64(p),le.pure.u64(f)]});const Ee=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:le,sender:n.address}),Ue=[];if((N=Ee.events)==null||N.forEach(ze=>{extractStructTagFromType$2(ze.type).full_address===`${i.published_at}::coin_list::FetchCoinListEvent`&&ze.parsedJson.full_list.value_list.forEach(Qe=>{Ue.push(this.transformData(Qe,!1))})}),C=[...C,...Ue],Ue.length<f)break;p=C.length}return C}async factchPoolList(t="",e=!1){var N;const{simulationAccount:n,token:i}=this.sdk.sdkOptions,a=this.getCache("getAllRegisteredPoolList",e);if(a!==void 0)return a;let l=[];const f=512;let p=0;const C=t.length>0;if(i===void 0)throw Error("please config token ofsdkOptions");const B=getPackagerConfigs$1(i);for(;;){const le=new Transaction$1;if(le.moveCall({target:`${i.published_at}::lp_list::${C?"fetch_full_list_with_limit":"fetch_all_registered_coin_info_with_limit"}`,arguments:C?[le.pure.address(B.pool_registry_id),le.pure.address(t),le.pure.u64(p),le.pure.u64(f)]:[le.pure.address(B.pool_registry_id),le.pure.u64(p),le.pure.u64(f)]}),!checkInvalidSuiAddress$1(n.address))throw new ClmmpoolsError$1("this config simulationAccount is not set right","InvalidSimulateAccount");const Ee=await this.sdk.fullClient.devInspectTransactionBlock({transactionBlock:le,sender:n.address}),Ue=[];if((N=Ee.events)==null||N.forEach(ze=>{extractStructTagFromType$2(ze.type).full_address===`${i.published_at}::lp_list::FetchPoolListEvent`&&ze.parsedJson.full_list.value_list.forEach(Qe=>{Ue.push(this.transformData(Qe,!0))})}),l=[...l,...Ue],Ue.length<f)break;p=l.length}return l}async factchWarpPoolList(t="",e="",n=!1){const i=await this.factchPoolList(t,n);if(i.length===0)return[];const s=await this.factchTokenList(e,n),a=[];for(const l of i){for(const f of s)f.address===l.coin_a_address&&(l.coinA=f),f.address===l.coin_b_address&&(l.coinB=f);a.push(l)}return a}async getTokenConfigEvent(t=!1){const e=this._sdk.sdkOptions.token.package_id,n=`${e}_getTokenConfigEvent`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),a=getObjectPreviousTransactionDigest(s),l=await this._sdk.fullClient.queryEventsByPage({Transaction:a}),f={coin_registry_id:"",pool_registry_id:"",coin_list_owner:"",pool_list_owner:""};return l.data.length>0&&l.data.forEach(p=>{const C=extractStructTagFromType$2(p.type);if(p.transactionModule==="coin_list")switch(C.name){case"InitListEvent":f.coin_list_owner=p.parsedJson.list_id;break;case"InitRegistryEvent":f.coin_registry_id=p.parsedJson.registry_id;break}else if(p.transactionModule==="lp_list")switch(C.name){case"InitListEvent<address>":f.pool_list_owner=p.parsedJson.list_id;break;case"InitRegistryEvent<address>":f.pool_registry_id=p.parsedJson.registry_id;break}}),f.coin_registry_id.length>0&&this.updateCache(n,f,cacheTime24h),f}transformData(t,e){const n={...t};if(e)try{n.coin_a_address=extractStructTagFromType$2(n.coin_a_address).full_address,n.coin_b_address=extractStructTagFromType$2(n.coin_b_address).full_address}catch{}else n.address=extractStructTagFromType$2(n.address).full_address;if(t.extensions){const i=t.extensions.contents;for(const s of i){const{key:a}=s;let{value:l}=s;if(a==="labels")try{l=JSON.parse(decodeURIComponent(gBase64.decode(l)))}catch{}a==="pyth_id"&&(l=normalizeSuiObjectId$2(l)),n[a]=l}delete n.extensions}return n}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},RouterModuleV2=class{constructor(t){Or(this,"_sdk");this._sdk=t}get sdk(){return this._sdk}calculatePrice(t,e,n,i,s){const a=i?e:n,l=i?n:e;return s==="Cetus"?TickMath$1.sqrtPriceX64ToPrice(t,a,l):new Decimal$1(t.toString()).div(new Decimal$1(10).pow(new Decimal$1(l+9-a)))}parseJsonResult(t){return{isExceed:t.is_exceed,isTimeout:t.is_timeout,inputAmount:t.input_amount,outputAmount:t.output_amount,fromCoin:t.from_coin,toCoin:t.to_coin,byAmountIn:t.by_amount_in,splitPaths:t.split_paths.map(n=>({pathIndex:n.path_index,lastQuoteOutput:n.last_quote_output,percent:n.percent,basePaths:n.best_path.map(s=>({direction:s.direction,label:s.label,poolAddress:s.provider,fromCoin:s.from_coin,toCoin:s.to_coin,outputAmount:s.output_amount,inputAmount:s.input_amount,feeRate:s.fee_rate,currentSqrtPrice:new BN(s.current_sqrt_price.toString()),afterSqrtPrice:s.label==="Cetus"?new BN(s.after_sqrt_price.toString()):ZERO$2,fromDecimal:s.from_decimal,toDecimal:s.to_decimal,currentPrice:this.calculatePrice(new BN(s.current_sqrt_price.toString()),s.from_decimal,s.to_decimal,s.direction,s.label)})),inputAmount:n.input_amount,outputAmount:n.output_amount}))}}async fetchDataWithAxios(t,e,n){try{const i={...e,timeout:n},s=await axios$1(t,i);return s.status===200?this.parseJsonResult(s.data):null}catch(i){return console.error(i),null}}async getBestRouter(t,e,n,i,s,a,l,f,p=!1,C=!1,B=[]){let N=null,le="v2",Ee={},Ue=this.sdk.sdkOptions.aggregatorUrl;if(B.length>0){const ze=new URL(Ue);Ue=`${ze.protocol}//${ze.hostname}/router_with_lp_changes`,Ee={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:t,to:e,amount:n,by_amount_in:i,order_split:p,external_router:C,sender_address:"None",request_id:encodeURIComponent(v4()),lp_changes:B})}}else Ue=`
      ${Ue}?from=${encodeURIComponent(t)}&to=${encodeURIComponent(e)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(p)}&external_router=${encodeURIComponent(C)}&sender_address=''&request_id=${encodeURIComponent(v4())}
      `;if(N=await this.fetchDataWithAxios(Ue,Ee,6e3),N==null){const ze=await this.sdk.Router.priceUseV1(t,e,new BN(n),i,s,a,f),Ze=[];for(const ct of ze.paths){const wt=[];if(ct.poolAddress.length>1){const nr=this.sdk.Router.tokenInfo(ct.coinType[0]).decimals,ir=this.sdk.Router.tokenInfo(ct.coinType[1]).decimals,or=ct.a2b[0]?TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[0]),nr,ir):TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[0]),ir,nr),ur={direction:ct.a2b[0],label:"Cetus",poolAddress:ct.poolAddress[0],fromCoin:ct.coinType[0],toCoin:ct.coinType[1],feeRate:this.sdk.Router.getFeeRate(ct.coinType[0],ct.coinType[1],ct.poolAddress[0]),outputAmount:ze.byAmountIn?ct.rawAmountLimit[0].toString():ct.rawAmountLimit[1].toString(),inputAmount:ct.amountIn.toString(),currentSqrtPrice:ze.currentSqrtPrice[0],currentPrice:or,fromDecimal:nr,toDecimal:ir},hr=this.sdk.Router.tokenInfo(ct.coinType[1]).decimals,fr=this.sdk.Router.tokenInfo(ct.coinType[2]).decimals,ar=ct.a2b[1]?TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[1]),hr,fr):TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[1]),fr,hr),Lt={direction:ct.a2b[1],label:"Cetus",poolAddress:ct.poolAddress[1],fromCoin:ct.coinType[1],toCoin:ct.coinType[2],feeRate:this.sdk.Router.getFeeRate(ct.coinType[1],ct.coinType[2],ct.poolAddress[1]),outputAmount:ct.amountOut.toString(),inputAmount:ze.byAmountIn?ct.rawAmountLimit[0].toString():ct.rawAmountLimit[1].toString(),currentSqrtPrice:ze.currentSqrtPrice[1],currentPrice:ar,fromDecimal:hr,toDecimal:fr};wt.push(ur,Lt)}else{const nr=this.sdk.Router.tokenInfo(ct.coinType[0]).decimals,ir=this.sdk.Router.tokenInfo(ct.coinType[1]).decimals,or=ct.a2b[0]?TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[0]),nr,ir):TickMath$1.sqrtPriceX64ToPrice(new BN(ze.currentSqrtPrice[0]),ir,nr),ur={direction:ct.a2b[0],label:"Cetus",poolAddress:ct.poolAddress[0],fromCoin:ct.coinType[0],toCoin:ct.coinType[1],feeRate:this.sdk.Router.getFeeRate(ct.coinType[0],ct.coinType[1],ct.poolAddress[0]),outputAmount:ct.amountOut.toString(),inputAmount:ct.amountIn.toString(),currentSqrtPrice:ze.currentSqrtPrice[0],currentPrice:or,fromDecimal:nr,toDecimal:ir};wt.push(ur)}const qt={percent:Number(ct.amountIn)/Number(ze.amountIn)*100,inputAmount:Number(ct.amountIn.toString()),outputAmount:Number(ct.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:wt};Ze.push(qt)}const Qe={isExceed:ze.isExceed,isTimeout:!0,inputAmount:Number(ze.amountIn.toString()),outputAmount:Number(ze.amountOut.toString()),fromCoin:ze.coinTypeA,toCoin:ze.coinTypeC!=null?ze.coinTypeC:ze.coinTypeB,byAmountIn:ze.byAmountIn,splitPaths:Ze};le="v1",N=Qe}return{result:N,version:le}}async getBestRouterByServer(t,e,n,i,s,a=!1,l=!1,f=[]){let p=null,C={},B=this.sdk.sdkOptions.aggregatorUrl;if(f.length>0){const N=new URL(B);B=`${N.protocol}//${N.hostname}/router_with_lp_changes`,C={method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({from:t,to:e,amount:n,by_amount_in:i,order_split:a,external_router:l,sender_address:"None",request_id:encodeURIComponent(v4()),lp_changes:f})}}else B=`
      ${B}?from=${encodeURIComponent(t)}&to=${encodeURIComponent(e)}&amount=${encodeURIComponent(n)}&by_amount_in=${encodeURIComponent(i)}&order_split=${encodeURIComponent(a)}&external_router=${encodeURIComponent(l)}&sender_address=''&request_id=${encodeURIComponent(v4())}
      `;if(p=await this.fetchDataWithAxios(B,C,6e3),p==null)throw new ClmmpoolsError$1("Invalid server response","InvalidServerResponse");return p}async getBestRouterByRpc(t,e,n,i,s,a,l){const f=await this.sdk.Router.priceUseV1(t,e,new BN(n),i,s,a,l),p=[];for(const B of f.paths){const N=[];if(B.poolAddress.length>1){const Ee=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,Ue=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ze=B.a2b[0]?TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[0]),Ee,Ue):TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[0]),Ue,Ee),Ze={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:f.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:f.currentSqrtPrice[0],currentPrice:ze,fromDecimal:Ee,toDecimal:Ue},Qe=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ct=this.sdk.Router.tokenInfo(B.coinType[2]).decimals,wt=B.a2b[1]?TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[1]),Qe,ct):TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[1]),ct,Qe),qt={direction:B.a2b[1],label:"Cetus",poolAddress:B.poolAddress[1],fromCoin:B.coinType[1],toCoin:B.coinType[2],feeRate:this.sdk.Router.getFeeRate(B.coinType[1],B.coinType[2],B.poolAddress[1]),outputAmount:B.amountOut.toString(),inputAmount:f.byAmountIn?B.rawAmountLimit[0].toString():B.rawAmountLimit[1].toString(),currentSqrtPrice:f.currentSqrtPrice[1],currentPrice:wt,fromDecimal:Qe,toDecimal:ct};N.push(Ze,qt)}else{const Ee=this.sdk.Router.tokenInfo(B.coinType[0]).decimals,Ue=this.sdk.Router.tokenInfo(B.coinType[1]).decimals,ze=B.a2b[0]?TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[0]),Ee,Ue):TickMath$1.sqrtPriceX64ToPrice(new BN(f.currentSqrtPrice[0]),Ue,Ee),Ze={direction:B.a2b[0],label:"Cetus",poolAddress:B.poolAddress[0],fromCoin:B.coinType[0],toCoin:B.coinType[1],feeRate:this.sdk.Router.getFeeRate(B.coinType[0],B.coinType[1],B.poolAddress[0]),outputAmount:B.amountOut.toString(),inputAmount:B.amountIn.toString(),currentSqrtPrice:f.currentSqrtPrice[0],currentPrice:ze,fromDecimal:Ee,toDecimal:Ue};N.push(Ze)}const le={percent:Number(B.amountIn)/Number(f.amountIn)*100,inputAmount:Number(B.amountIn.toString()),outputAmount:Number(B.amountOut.toString()),pathIndex:0,lastQuoteOutput:0,basePaths:N};p.push(le)}return{isExceed:f.isExceed,isTimeout:!0,inputAmount:Number(f.amountIn.toString()),outputAmount:Number(f.amountOut.toString()),fromCoin:f.coinTypeA,toCoin:f.coinTypeC!=null?f.coinTypeC:f.coinTypeB,byAmountIn:f.byAmountIn,splitPaths:p}}},ConfigModule=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}setTokenListCache(t){const{coin_list_handle:e}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),n=`${e}_getCoinConfigs`,i=this.getCache(n),s=i?[...i,...t]:t;this.updateCache(n,s,cacheTime24h)}async getTokenListByCoinTypes(t){const e={},{coin_list_handle:n}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,s=this.getCache(i);if(s!==void 0){const l=s;for(const f of t)for(const p of l)if(normalizeCoinType$2(f)===normalizeCoinType$2(p.address)){e[f]=p;continue}}const a=t.filter(l=>e[l]===void 0);for(const l of a){const f=`${l}_metadata`,p=this.getCache(f);if(p!==void 0)e[l]=p;else{const C=await this._sdk.fullClient.getCoinMetadata({coinType:l});if(C){const B={id:C.id,pyth_id:"",name:C.name,symbol:C.symbol,official_symbol:C.symbol,coingecko_id:"",decimals:C.decimals,project_url:"",logo_url:C.iconUrl,address:l};e[l]=B,this.updateCache(f,B,cacheTime24h)}else console.log(`not found ${l}`)}}return e}async getCoinConfigs(t=!1,e=!0){const{coin_list_handle:n}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),i=`${n}_getCoinConfigs`,s=this.getCache(i,t);if(s)return s;const l=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(C=>C.objectId),f=await this._sdk.fullClient.batchGetObjects(l,{showContent:!0}),p=[];return f.forEach(C=>{var N,le;if(C.error!=null||((le=(N=C.data)==null?void 0:N.content)==null?void 0:le.dataType)!=="moveObject")throw new ClmmpoolsError$1(`when getCoinConfigs get objects error: ${C.error}, please check the rpc and contracts address config.`,"InvalidConfig");const B=this.buildCoinConfig(C,e);this.updateCache(`${n}_${B.address}_getCoinConfig`,B,cacheTime24h),p.push({...B})}),this.updateCache(i,p,cacheTime24h),p}async getCoinConfig(t,e=!1,n=!0){var p,C;const{coin_list_handle:i}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),s=`${i}_${t}_getCoinConfig`,a=this.getCache(s,e);if(a)return a;const l=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"0x1::type_name::TypeName",value:{name:fixCoinType(t)}}});if(l.error!=null||((C=(p=l.data)==null?void 0:p.content)==null?void 0:C.dataType)!=="moveObject")throw new ClmmpoolsError$1(`when getCoinConfig get object error: ${l.error}, please check the rpc and contracts address config.`,"InvalidConfig");const f=this.buildCoinConfig(l,n);return this.updateCache(s,f,cacheTime24h),f}buildCoinConfig(t,e=!0){let n=getObjectFields(t);n=n.value.fields;const i={...n};return i.id=getObjectId(t),i.address=extractStructTagFromType$2(n.coin_type.fields.name).full_address,n.pyth_id&&(i.pyth_id=normalizeSuiObjectId$2(n.pyth_id)),this.transformExtensions(i,n.extension_fields.fields.contents,e),delete i.coin_type,i}async getClmmPoolConfigs(t=!1,e=!0){const{clmm_pools_handle:n}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),i=`${n}_getClmmPoolConfigs`,s=this.getCache(i,t);if(s)return s;const l=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(C=>C.objectId),f=await this._sdk.fullClient.batchGetObjects(l,{showContent:!0}),p=[];return f.forEach(C=>{var N,le;if(C.error!=null||((le=(N=C.data)==null?void 0:N.content)==null?void 0:le.dataType)!=="moveObject")throw new ClmmpoolsError$1(`when getClmmPoolsConfigs get objects error: ${C.error}, please check the rpc and contracts address config.`,"InvalidConfig");const B=this.buildClmmPoolConfig(C,e);this.updateCache(`${B.pool_address}_getClmmPoolConfig`,B,cacheTime24h),p.push({...B})}),this.updateCache(i,p,cacheTime24h),p}async getClmmPoolConfig(t,e=!1,n=!0){const{clmm_pools_handle:i}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),s=`${t}_getClmmPoolConfig`,a=this.getCache(s,e);if(a)return a;const l=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:t}}),f=this.buildClmmPoolConfig(l,n);return this.updateCache(s,f,cacheTime24h),f}buildClmmPoolConfig(t,e=!0){let n=getObjectFields(t);n=n.value.fields;const i={...n};return i.id=getObjectId(t),i.pool_address=normalizeSuiObjectId$2(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,e),i}async getLaunchpadPoolConfigs(t=!1,e=!0){const{launchpad_pools_handle:n}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),i=`${n}_getLaunchpadPoolConfigs`,s=this.getCache(i,t);if(s)return s;const l=(await this._sdk.fullClient.getDynamicFieldsByPage(n)).data.map(C=>C.objectId),f=await this._sdk.fullClient.batchGetObjects(l,{showContent:!0}),p=[];return f.forEach(C=>{var N,le;if(C.error!=null||((le=(N=C.data)==null?void 0:N.content)==null?void 0:le.dataType)!=="moveObject")throw new ClmmpoolsError$1(`when getCoinConfigs get objects error: ${C.error}, please check the rpc and contracts address config.`,"InvalidConfig");const B=this.buildLaunchpadPoolConfig(C,e);this.updateCache(`${B.pool_address}_getLaunchpadPoolConfig`,B,cacheTime24h),p.push({...B})}),this.updateCache(i,p,cacheTime24h),p}async getLaunchpadPoolConfig(t,e=!1,n=!0){const{launchpad_pools_handle:i}=getPackagerConfigs$1(this.sdk.sdkOptions.cetus_config),s=`${t}_getLaunchpadPoolConfig`,a=this.getCache(s,e);if(a)return a;const l=await this._sdk.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:t}}),f=this.buildLaunchpadPoolConfig(l,n);return this.updateCache(s,f,cacheTime24h),f}buildLaunchpadPoolConfig(t,e=!0){let n=getObjectFields(t);n=n.value.fields;const i={...n};i.id=getObjectId(t),i.pool_address=normalizeSuiObjectId$2(n.pool_address),this.transformExtensions(i,n.extension_fields.fields.contents,e);const s=[];n.social_media.fields.contents.forEach(a=>{s.push({name:a.fields.value.fields.name,link:a.fields.value.fields.link})}),i.social_media=s;try{i.regulation=decodeURIComponent(gBase64.decode(i.regulation).replace(/%/g,"%25"))}catch{i.regulation=gBase64.decode(i.regulation)}return i}transformExtensions(t,e,n=!0){const i=[];for(const s of e){const{key:a}=s.fields;let{value:l}=s.fields;if(a==="labels")try{const f=decodeURIComponent(gBase64.decode(l));try{l=JSON.parse(f)}catch{l=f}}catch{}n&&(t[a]=l),i.push({key:a,value:l})}delete t.extension_fields,n||(t.extensions=i)}async getCetusConfig(t=!1){const e=this._sdk.sdkOptions.cetus_config.package_id,n=`${e}_getCetusConfig`,i=this.getCache(n,t);if(i!==void 0)return i;const s=await this._sdk.fullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),a=getObjectPreviousTransactionDigest(s),l=await this._sdk.fullClient.queryEventsByPage({Transaction:a});let f={coin_list_id:"",launchpad_pools_id:"",clmm_pools_id:"",admin_cap_id:"",global_config_id:"",coin_list_handle:"",launchpad_pools_handle:"",clmm_pools_handle:""};if(l.data.length>0)for(const p of l.data)switch(extractStructTagFromType$2(p.type).name){case"InitCoinListEvent":f.coin_list_id=p.parsedJson.coin_list_id;break;case"InitLaunchpadPoolsEvent":f.launchpad_pools_id=p.parsedJson.launchpad_pools_id;break;case"InitClmmPoolsEvent":f.clmm_pools_id=p.parsedJson.pools_id;break;case"InitConfigEvent":f.global_config_id=p.parsedJson.global_config_id,f.admin_cap_id=p.parsedJson.admin_cap_id;break}return f=await this.getCetusConfigHandle(f),f.clmm_pools_id.length>0&&this.updateCache(n,f,cacheTime24h),f}async getCetusConfigHandle(t){const e=[t.clmm_pools_id,t.coin_list_id,t.launchpad_pools_id];return(await this._sdk.fullClient.multiGetObjects({ids:e,options:{showContent:!0}})).forEach(i=>{var l,f;if(i.error!=null||((f=(l=i.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new ClmmpoolsError$1(`when getCetusConfigHandle get objects error: ${i.error}, please check the rpc and contracts address config.`,"InvalidConfigHandle");const s=getObjectFields(i),a=getObjectType(i);switch(extractStructTagFromType$2(a).name){case"ClmmPools":t.clmm_pools_handle=s.pools.fields.id.id;break;case"CoinList":t.coin_list_handle=s.coins.fields.id.id;break;case"LaunchpadPools":t.launchpad_pools_handle=s.pools.fields.id.id;break}}),t}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){try{const n=this._cache[t];if(!n)return;if(e||!n.isValid()){delete this._cache[t];return}return n.value}catch(n){console.error(`Error accessing cache for key ${t}:`,n);return}}},CetusClmmSDK=class{constructor(t){Or(this,"_cache",{});Or(this,"_rpcModule");Or(this,"_pool");Or(this,"_position");Or(this,"_swap");Or(this,"_rewarder");Or(this,"_router");Or(this,"_router_v2");Or(this,"_token");Or(this,"_config");Or(this,"_sdkOptions");Or(this,"_senderAddress","");this._sdkOptions=t,this._rpcModule=new RpcModule({url:t.fullRpcUrl}),this._swap=new SwapModule(this),this._pool=new PoolModule(this),this._position=new PositionModule(this),this._rewarder=new RewarderModule(this),this._router=new RouterModule(this),this._router_v2=new RouterModuleV2(this),this._token=new TokenModule(this),this._config=new ConfigModule(this),patchFixSuiObjectId(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(t){this._senderAddress=t}get Swap(){return this._swap}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Pool(){return this._pool}get Position(){return this._position}get Rewarder(){return this._rewarder}get Router(){return this._router}get RouterV2(){return this._router_v2}get CetusConfig(){return this._config}get Token(){return this._token}async getOwnerCoinAssets(t,e,n=!0){const i=[];let s=null;const a=`${this.sdkOptions.fullRpcUrl}_${t}_${e}_getOwnerCoinAssets`,l=this.getCache(a,n);if(l)return l;for(;;){const f=await(e?this.fullClient.getCoins({owner:t,coinType:e,cursor:s}):this.fullClient.getAllCoins({owner:t,cursor:s}));if(f.data.forEach(p=>{BigInt(p.balance)>0&&i.push({coinAddress:extractStructTagFromType$2(p.coinType).source_address,coinObjectId:p.coinObjectId,balance:BigInt(p.balance)})}),s=f.nextCursor,!f.hasNextPage)break}return this.updateCache(a,i,30*1e3),i}async getOwnerCoinBalances(t,e){let n=[];return e?n=[await this.fullClient.getBalance({owner:t,coinType:e})]:n=[...await this.fullClient.getAllBalances({owner:t})],n}updateCache(t,e,n=cacheTime24h){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){const n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},main_default=CetusClmmSDK,SDKConfig={clmmConfig:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",admin_cap_id:"0x89c1a321291d15ddae5a086c9abc533dff697fde3d89e0ca836c41af73e36a75"},cetusConfig:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmmMainnet={fullRpcUrl:"https://mainnet.suiet.app:443",simulationAccount:{address:"0x0000000000000000000000000000000000000000000000000000000000000000"},cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",config:SDKConfig.cetusConfig},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xc6faf3703b0e8ba9ed06b7851134bbbe7565eb35ff823fd78432baa4cbeaa12e",config:SDKConfig.clmmConfig},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x2d8c2e0fc6dd25b0214b3fa747e0fd27fd54608142cd2e4f64c1cd350cc4add4"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7",published_at:"0xac95e8a5e873cfa2544916c16fe1461b6a45542d9e65504c1794ae390b3345a7"},aggregatorUrl:"https://api-sui.cetus.zone/router",swapCountUrl:"https://api-sui.cetus.zone/v2/sui/swap/count",statsPoolsUrl:"https://api-sui.cetus.zone/v2/sui/stats_pools"};function initMainnetSDK(t,e){t&&(clmmMainnet.fullRpcUrl=t);const n=new main_default(clmmMainnet);return e&&checkInvalidSuiAddress$1(e)&&(n.senderAddress=e),n}var SDKConfig2={clmmConfig:{pools_id:"0x50eb61dd5928cec5ea04711a2e9b72e5237e79e9fbcd2ce3d5469dc8708e0ee2",global_config_id:"0x9774e359588ead122af1c7e7f64e14ade261cfeecdb5d0eb4a5b3b4c8ab8bd3e",global_vault_id:"0xf78d2ee3c312f298882cb680695e5e8c81b1d441a646caccc058006c2851ddea",admin_cap_id:"0xa456f86a53fc31e1243f065738ff1fc93f5a62cc080ff894a0fb3747556a799b"},cetusConfig:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmmTestnet={fullRpcUrl:getFullnodeUrl$1("testnet"),simulationAccount:{address:"0x0000000000000000000000000000000000000000000000000000000000000000"},faucet:{package_id:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc",published_at:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc"},cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",config:SDKConfig2.cetusConfig},clmm_pool:{package_id:"0x0c7ae833c220aa73a3643a0d508afa4ac5d50d97312ea4584e35f9eb21b9df12",published_at:"0x85e61285a10efc6602ab00df70a0c06357c384ef4c5633ecf73016df1500c704",config:SDKConfig2.clmmConfig},integrate:{package_id:"0x2918cf39850de6d5d94d8196dc878c8c722cd79db659318e00bff57fbb4e2ede",published_at:"0x19dd42e05fa6c9988a60d30686ee3feb776672b5547e328d6dab16563da65293"},deepbook:{package_id:"0x000000000000000000000000000000000000000000000000000000000000dee9",published_at:"0x000000000000000000000000000000000000000000000000000000000000dee9"},deepbook_endpoint_v2:{package_id:"0x56d90d0c055edb534b11e7548270bb458fd47c69b77bf40c14d5eb00e6e6cf64",published_at:"0x56d90d0c055edb534b11e7548270bb458fd47c69b77bf40c14d5eb00e6e6cf64"},aggregatorUrl:"https://api-sui.devcetus.com/router",swapCountUrl:"https://api-sui.devcetus.com/v2/sui/swap/count",statsPoolsUrl:"https://api-sui.devcetus.com/v2/sui/stats_pools"};function initTestnetSDK(t,e){t&&(clmmTestnet.fullRpcUrl=t);const n=new main_default(clmmTestnet);return e&&checkInvalidSuiAddress$1(e)&&(n.senderAddress=e),n}function initCetusSDK(t){const{network:e,fullNodeUrl:n,wallet:i}=t;return e==="mainnet"?initMainnetSDK(n,i):initTestnetSDK(n,i)}var src_default=CetusClmmSDK,dayjs_min={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(commonjsGlobal$1,function(){var n=1e3,i=6e4,s=36e5,a="millisecond",l="second",f="minute",p="hour",C="day",B="week",N="month",le="quarter",Ee="year",Ue="date",ze="Invalid Date",Ze=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Qe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,ct={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(tt){var Ye=["th","st","nd","rd"],ot=tt%100;return"["+tt+(Ye[(ot-20)%10]||Ye[ot]||Ye[0])+"]"}},wt=function(tt,Ye,ot){var Et=String(tt);return!Et||Et.length>=Ye?tt:""+Array(Ye+1-Et.length).join(ot)+tt},qt={s:wt,z:function(tt){var Ye=-tt.utcOffset(),ot=Math.abs(Ye),Et=Math.floor(ot/60),er=ot%60;return(Ye<=0?"+":"-")+wt(Et,2,"0")+":"+wt(er,2,"0")},m:function tt(Ye,ot){if(Ye.date()<ot.date())return-tt(ot,Ye);var Et=12*(ot.year()-Ye.year())+(ot.month()-Ye.month()),er=Ye.clone().add(Et,N),rr=ot-er<0,yt=Ye.clone().add(Et+(rr?-1:1),N);return+(-(Et+(ot-er)/(rr?er-yt:yt-er))||0)},a:function(tt){return tt<0?Math.ceil(tt)||0:Math.floor(tt)},p:function(tt){return{M:N,y:Ee,w:B,d:C,D:Ue,h:p,m:f,s:l,ms:a,Q:le}[tt]||String(tt||"").toLowerCase().replace(/s$/,"")},u:function(tt){return tt===void 0}},nr="en",ir={};ir[nr]=ct;var or="$isDayjsObject",ur=function(tt){return tt instanceof Lt||!(!tt||!tt[or])},hr=function tt(Ye,ot,Et){var er;if(!Ye)return nr;if(typeof Ye=="string"){var rr=Ye.toLowerCase();ir[rr]&&(er=rr),ot&&(ir[rr]=ot,er=rr);var yt=Ye.split("-");if(!er&&yt.length>1)return tt(yt[0])}else{var tr=Ye.name;ir[tr]=Ye,er=tr}return!Et&&er&&(nr=er),er||!Et&&nr},fr=function(tt,Ye){if(ur(tt))return tt.clone();var ot=typeof Ye=="object"?Ye:{};return ot.date=tt,ot.args=arguments,new Lt(ot)},ar=qt;ar.l=hr,ar.i=ur,ar.w=function(tt,Ye){return fr(tt,{locale:Ye.$L,utc:Ye.$u,x:Ye.$x,$offset:Ye.$offset})};var Lt=function(){function tt(ot){this.$L=hr(ot.locale,null,!0),this.parse(ot),this.$x=this.$x||ot.x||{},this[or]=!0}var Ye=tt.prototype;return Ye.parse=function(ot){this.$d=function(Et){var er=Et.date,rr=Et.utc;if(er===null)return new Date(NaN);if(ar.u(er))return new Date;if(er instanceof Date)return new Date(er);if(typeof er=="string"&&!/Z$/i.test(er)){var yt=er.match(Ze);if(yt){var tr=yt[2]-1||0,Ut=(yt[7]||"0").substring(0,3);return rr?new Date(Date.UTC(yt[1],tr,yt[3]||1,yt[4]||0,yt[5]||0,yt[6]||0,Ut)):new Date(yt[1],tr,yt[3]||1,yt[4]||0,yt[5]||0,yt[6]||0,Ut)}}return new Date(er)}(ot),this.init()},Ye.init=function(){var ot=this.$d;this.$y=ot.getFullYear(),this.$M=ot.getMonth(),this.$D=ot.getDate(),this.$W=ot.getDay(),this.$H=ot.getHours(),this.$m=ot.getMinutes(),this.$s=ot.getSeconds(),this.$ms=ot.getMilliseconds()},Ye.$utils=function(){return ar},Ye.isValid=function(){return this.$d.toString()!==ze},Ye.isSame=function(ot,Et){var er=fr(ot);return this.startOf(Et)<=er&&er<=this.endOf(Et)},Ye.isAfter=function(ot,Et){return fr(ot)<this.startOf(Et)},Ye.isBefore=function(ot,Et){return this.endOf(Et)<fr(ot)},Ye.$g=function(ot,Et,er){return ar.u(ot)?this[Et]:this.set(er,ot)},Ye.unix=function(){return Math.floor(this.valueOf()/1e3)},Ye.valueOf=function(){return this.$d.getTime()},Ye.startOf=function(ot,Et){var er=this,rr=!!ar.u(Et)||Et,yt=ar.p(ot),tr=function($r,pr){var lr=ar.w(er.$u?Date.UTC(er.$y,pr,$r):new Date(er.$y,pr,$r),er);return rr?lr:lr.endOf(C)},Ut=function($r,pr){return ar.w(er.toDate()[$r].apply(er.toDate("s"),(rr?[0,0,0,0]:[23,59,59,999]).slice(pr)),er)},Ft=this.$W,sr=this.$M,vr=this.$D,_r="set"+(this.$u?"UTC":"");switch(yt){case Ee:return rr?tr(1,0):tr(31,11);case N:return rr?tr(1,sr):tr(0,sr+1);case B:var dr=this.$locale().weekStart||0,gr=(Ft<dr?Ft+7:Ft)-dr;return tr(rr?vr-gr:vr+(6-gr),sr);case C:case Ue:return Ut(_r+"Hours",0);case p:return Ut(_r+"Minutes",1);case f:return Ut(_r+"Seconds",2);case l:return Ut(_r+"Milliseconds",3);default:return this.clone()}},Ye.endOf=function(ot){return this.startOf(ot,!1)},Ye.$set=function(ot,Et){var er,rr=ar.p(ot),yt="set"+(this.$u?"UTC":""),tr=(er={},er[C]=yt+"Date",er[Ue]=yt+"Date",er[N]=yt+"Month",er[Ee]=yt+"FullYear",er[p]=yt+"Hours",er[f]=yt+"Minutes",er[l]=yt+"Seconds",er[a]=yt+"Milliseconds",er)[rr],Ut=rr===C?this.$D+(Et-this.$W):Et;if(rr===N||rr===Ee){var Ft=this.clone().set(Ue,1);Ft.$d[tr](Ut),Ft.init(),this.$d=Ft.set(Ue,Math.min(this.$D,Ft.daysInMonth())).$d}else tr&&this.$d[tr](Ut);return this.init(),this},Ye.set=function(ot,Et){return this.clone().$set(ot,Et)},Ye.get=function(ot){return this[ar.p(ot)]()},Ye.add=function(ot,Et){var er,rr=this;ot=Number(ot);var yt=ar.p(Et),tr=function(sr){var vr=fr(rr);return ar.w(vr.date(vr.date()+Math.round(sr*ot)),rr)};if(yt===N)return this.set(N,this.$M+ot);if(yt===Ee)return this.set(Ee,this.$y+ot);if(yt===C)return tr(1);if(yt===B)return tr(7);var Ut=(er={},er[f]=i,er[p]=s,er[l]=n,er)[yt]||1,Ft=this.$d.getTime()+ot*Ut;return ar.w(Ft,this)},Ye.subtract=function(ot,Et){return this.add(-1*ot,Et)},Ye.format=function(ot){var Et=this,er=this.$locale();if(!this.isValid())return er.invalidDate||ze;var rr=ot||"YYYY-MM-DDTHH:mm:ssZ",yt=ar.z(this),tr=this.$H,Ut=this.$m,Ft=this.$M,sr=er.weekdays,vr=er.months,_r=er.meridiem,dr=function(pr,lr,cr,yr){return pr&&(pr[lr]||pr(Et,rr))||cr[lr].slice(0,yr)},gr=function(pr){return ar.s(tr%12||12,pr,"0")},$r=_r||function(pr,lr,cr){var yr=pr<12?"AM":"PM";return cr?yr.toLowerCase():yr};return rr.replace(Qe,function(pr,lr){return lr||function(cr){switch(cr){case"YY":return String(Et.$y).slice(-2);case"YYYY":return ar.s(Et.$y,4,"0");case"M":return Ft+1;case"MM":return ar.s(Ft+1,2,"0");case"MMM":return dr(er.monthsShort,Ft,vr,3);case"MMMM":return dr(vr,Ft);case"D":return Et.$D;case"DD":return ar.s(Et.$D,2,"0");case"d":return String(Et.$W);case"dd":return dr(er.weekdaysMin,Et.$W,sr,2);case"ddd":return dr(er.weekdaysShort,Et.$W,sr,3);case"dddd":return sr[Et.$W];case"H":return String(tr);case"HH":return ar.s(tr,2,"0");case"h":return gr(1);case"hh":return gr(2);case"a":return $r(tr,Ut,!0);case"A":return $r(tr,Ut,!1);case"m":return String(Ut);case"mm":return ar.s(Ut,2,"0");case"s":return String(Et.$s);case"ss":return ar.s(Et.$s,2,"0");case"SSS":return ar.s(Et.$ms,3,"0");case"Z":return yt}return null}(pr)||yt.replace(":","")})},Ye.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ye.diff=function(ot,Et,er){var rr,yt=this,tr=ar.p(Et),Ut=fr(ot),Ft=(Ut.utcOffset()-this.utcOffset())*i,sr=this-Ut,vr=function(){return ar.m(yt,Ut)};switch(tr){case Ee:rr=vr()/12;break;case N:rr=vr();break;case le:rr=vr()/3;break;case B:rr=(sr-Ft)/6048e5;break;case C:rr=(sr-Ft)/864e5;break;case p:rr=sr/s;break;case f:rr=sr/i;break;case l:rr=sr/n;break;default:rr=sr}return er?rr:ar.a(rr)},Ye.daysInMonth=function(){return this.endOf(N).$D},Ye.$locale=function(){return ir[this.$L]},Ye.locale=function(ot,Et){if(!ot)return this.$L;var er=this.clone(),rr=hr(ot,Et,!0);return rr&&(er.$L=rr),er},Ye.clone=function(){return ar.w(this.$d,this)},Ye.toDate=function(){return new Date(this.valueOf())},Ye.toJSON=function(){return this.isValid()?this.toISOString():null},Ye.toISOString=function(){return this.$d.toISOString()},Ye.toString=function(){return this.$d.toUTCString()},tt}(),Vt=Lt.prototype;return fr.prototype=Vt,[["$ms",a],["$s",l],["$m",f],["$H",p],["$W",C],["$M",N],["$y",Ee],["$D",Ue]].forEach(function(tt){Vt[tt[1]]=function(Ye){return this.$g(Ye,tt[0],tt[1])}}),fr.extend=function(tt,Ye){return tt.$i||(tt(Ye,Lt,fr),tt.$i=!0),fr},fr.locale=hr,fr.isDayjs=ur,fr.unix=function(tt){return fr(1e3*tt)},fr.en=ir[nr],fr.Ls=ir,fr.p={},fr})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs$2(dayjs_minExports);var duration$1={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(commonjsGlobal$1,function(){var n,i,s=1e3,a=6e4,l=36e5,f=864e5,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C=31536e6,B=2628e6,N=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,le={years:C,months:B,days:f,hours:l,minutes:a,seconds:s,milliseconds:1,weeks:6048e5},Ee=function(ir){return ir instanceof qt},Ue=function(ir,or,ur){return new qt(ir,ur,or.$l)},ze=function(ir){return i.p(ir)+"s"},Ze=function(ir){return ir<0},Qe=function(ir){return Ze(ir)?Math.ceil(ir):Math.floor(ir)},ct=function(ir){return Math.abs(ir)},wt=function(ir,or){return ir?Ze(ir)?{negative:!0,format:""+ct(ir)+or}:{negative:!1,format:""+ir+or}:{negative:!1,format:""}},qt=function(){function ir(ur,hr,fr){var ar=this;if(this.$d={},this.$l=fr,ur===void 0&&(this.$ms=0,this.parseFromMilliseconds()),hr)return Ue(ur*le[ze(hr)],this);if(typeof ur=="number")return this.$ms=ur,this.parseFromMilliseconds(),this;if(typeof ur=="object")return Object.keys(ur).forEach(function(tt){ar.$d[ze(tt)]=ur[tt]}),this.calMilliseconds(),this;if(typeof ur=="string"){var Lt=ur.match(N);if(Lt){var Vt=Lt.slice(2).map(function(tt){return tt!=null?Number(tt):0});return this.$d.years=Vt[0],this.$d.months=Vt[1],this.$d.weeks=Vt[2],this.$d.days=Vt[3],this.$d.hours=Vt[4],this.$d.minutes=Vt[5],this.$d.seconds=Vt[6],this.calMilliseconds(),this}}return this}var or=ir.prototype;return or.calMilliseconds=function(){var ur=this;this.$ms=Object.keys(this.$d).reduce(function(hr,fr){return hr+(ur.$d[fr]||0)*le[fr]},0)},or.parseFromMilliseconds=function(){var ur=this.$ms;this.$d.years=Qe(ur/C),ur%=C,this.$d.months=Qe(ur/B),ur%=B,this.$d.days=Qe(ur/f),ur%=f,this.$d.hours=Qe(ur/l),ur%=l,this.$d.minutes=Qe(ur/a),ur%=a,this.$d.seconds=Qe(ur/s),ur%=s,this.$d.milliseconds=ur},or.toISOString=function(){var ur=wt(this.$d.years,"Y"),hr=wt(this.$d.months,"M"),fr=+this.$d.days||0;this.$d.weeks&&(fr+=7*this.$d.weeks);var ar=wt(fr,"D"),Lt=wt(this.$d.hours,"H"),Vt=wt(this.$d.minutes,"M"),tt=this.$d.seconds||0;this.$d.milliseconds&&(tt+=this.$d.milliseconds/1e3,tt=Math.round(1e3*tt)/1e3);var Ye=wt(tt,"S"),ot=ur.negative||hr.negative||ar.negative||Lt.negative||Vt.negative||Ye.negative,Et=Lt.format||Vt.format||Ye.format?"T":"",er=(ot?"-":"")+"P"+ur.format+hr.format+ar.format+Et+Lt.format+Vt.format+Ye.format;return er==="P"||er==="-P"?"P0D":er},or.toJSON=function(){return this.toISOString()},or.format=function(ur){var hr=ur||"YYYY-MM-DDTHH:mm:ss",fr={Y:this.$d.years,YY:i.s(this.$d.years,2,"0"),YYYY:i.s(this.$d.years,4,"0"),M:this.$d.months,MM:i.s(this.$d.months,2,"0"),D:this.$d.days,DD:i.s(this.$d.days,2,"0"),H:this.$d.hours,HH:i.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:i.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:i.s(this.$d.seconds,2,"0"),SSS:i.s(this.$d.milliseconds,3,"0")};return hr.replace(p,function(ar,Lt){return Lt||String(fr[ar])})},or.as=function(ur){return this.$ms/le[ze(ur)]},or.get=function(ur){var hr=this.$ms,fr=ze(ur);return fr==="milliseconds"?hr%=1e3:hr=fr==="weeks"?Qe(hr/le[fr]):this.$d[fr],hr||0},or.add=function(ur,hr,fr){var ar;return ar=hr?ur*le[ze(hr)]:Ee(ur)?ur.$ms:Ue(ur,this).$ms,Ue(this.$ms+ar*(fr?-1:1),this)},or.subtract=function(ur,hr){return this.add(ur,hr,!0)},or.locale=function(ur){var hr=this.clone();return hr.$l=ur,hr},or.clone=function(){return Ue(this.$ms,this)},or.humanize=function(ur){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!ur)},or.valueOf=function(){return this.asMilliseconds()},or.milliseconds=function(){return this.get("milliseconds")},or.asMilliseconds=function(){return this.as("milliseconds")},or.seconds=function(){return this.get("seconds")},or.asSeconds=function(){return this.as("seconds")},or.minutes=function(){return this.get("minutes")},or.asMinutes=function(){return this.as("minutes")},or.hours=function(){return this.get("hours")},or.asHours=function(){return this.as("hours")},or.days=function(){return this.get("days")},or.asDays=function(){return this.as("days")},or.weeks=function(){return this.get("weeks")},or.asWeeks=function(){return this.as("weeks")},or.months=function(){return this.get("months")},or.asMonths=function(){return this.as("months")},or.years=function(){return this.get("years")},or.asYears=function(){return this.as("years")},ir}(),nr=function(ir,or,ur){return ir.add(or.years()*ur,"y").add(or.months()*ur,"M").add(or.days()*ur,"d").add(or.hours()*ur,"h").add(or.minutes()*ur,"m").add(or.seconds()*ur,"s").add(or.milliseconds()*ur,"ms")};return function(ir,or,ur){n=ur,i=ur().$utils(),ur.duration=function(ar,Lt){var Vt=ur.locale();return Ue(ar,{$l:Vt},Lt)},ur.isDuration=Ee;var hr=or.prototype.add,fr=or.prototype.subtract;or.prototype.add=function(ar,Lt){return Ee(ar)?nr(this,ar,1):hr.bind(this)(ar,Lt)},or.prototype.subtract=function(ar,Lt){return Ee(ar)?nr(this,ar,-1):fr.bind(this)(ar,Lt)}}})})(duration$1);var durationExports=duration$1.exports;const duration=getDefaultExportFromCjs$2(durationExports);var relativeTime$1={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(commonjsGlobal$1,function(){return function(n,i,s){n=n||{};var a=i.prototype,l={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(C,B,N,le){return a.fromToBase(C,B,N,le)}s.en.relativeTime=l,a.fromToBase=function(C,B,N,le,Ee){for(var Ue,ze,Ze,Qe=N.$locale().relativeTime||l,ct=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],wt=ct.length,qt=0;qt<wt;qt+=1){var nr=ct[qt];nr.d&&(Ue=le?s(C).diff(N,nr.d,!0):N.diff(C,nr.d,!0));var ir=(n.rounding||Math.round)(Math.abs(Ue));if(Ze=Ue>0,ir<=nr.r||!nr.r){ir<=1&&qt>0&&(nr=ct[qt-1]);var or=Qe[nr.l];Ee&&(ir=Ee(""+ir)),ze=typeof or=="string"?or.replace("%d",ir):or(ir,B,nr.l,Ze);break}}if(B)return ze;var ur=Ze?Qe.future:Qe.past;return typeof ur=="function"?ur(ze):ur.replace("%s",ze)},a.to=function(C,B){return f(C,B,this,!0)},a.from=function(C,B){return f(C,B,this)};var p=function(C){return C.$u?s.utc():s()};a.toNow=function(C){return this.to(p(this),C)},a.fromNow=function(C){return this.from(p(this),C)}}})})(relativeTime$1);var relativeTimeExports=relativeTime$1.exports;const relativeTime=getDefaultExportFromCjs$2(relativeTimeExports);Decimal$1.config({precision:256,rounding:Decimal$1.ROUND_DOWN,toExpNeg:-256,toExpPos:256});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var enUS,hasRequiredEnUS;function requireEnUS(){return hasRequiredEnUS||(hasRequiredEnUS=1,enUS={languageTag:"en-US",delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},spaceSeparated:!1,ordinal:function(t){let e=t%10;return~~(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th"},bytes:{binarySuffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],decimalSuffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},currency:{symbol:"$",position:"prefix",code:"USD"},currencyFormat:{thousandSeparated:!0,totalLength:4,spaceSeparated:!0,spaceSeparatedCurrency:!0},formats:{fourDigits:{totalLength:4,spaceSeparated:!0},fullWithTwoDecimals:{output:"currency",thousandSeparated:!0,mantissa:2},fullWithTwoDecimalsNoCurrency:{thousandSeparated:!0,mantissa:2},fullWithNoDecimals:{output:"currency",thousandSeparated:!0,mantissa:0}}}),enUS}/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var unformatting,hasRequiredUnformatting;function requireUnformatting(){if(hasRequiredUnformatting)return unformatting;hasRequiredUnformatting=1;const t=[{key:"ZiB",factor:Math.pow(1024,7)},{key:"ZB",factor:Math.pow(1e3,7)},{key:"YiB",factor:Math.pow(1024,8)},{key:"YB",factor:Math.pow(1e3,8)},{key:"TiB",factor:Math.pow(1024,4)},{key:"TB",factor:Math.pow(1e3,4)},{key:"PiB",factor:Math.pow(1024,5)},{key:"PB",factor:Math.pow(1e3,5)},{key:"MiB",factor:Math.pow(1024,2)},{key:"MB",factor:Math.pow(1e3,2)},{key:"KiB",factor:Math.pow(1024,1)},{key:"KB",factor:Math.pow(1e3,1)},{key:"GiB",factor:Math.pow(1024,3)},{key:"GB",factor:Math.pow(1e3,3)},{key:"EiB",factor:Math.pow(1024,6)},{key:"EB",factor:Math.pow(1e3,6)},{key:"B",factor:1}];function e(p){return p.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function n(p,C,B,N,le,Ee,Ue){if(!isNaN(+p))return+p;let ze="",Ze=p.replace(/(^[^(]*)\((.*)\)([^)]*$)/,"$1$2$3");if(Ze!==p)return-1*n(Ze,C,B,N,le,Ee);for(let ir=0;ir<t.length;ir++){let or=t[ir];if(ze=p.replace(RegExp(`([0-9 ])(${or.key})$`),"$1"),ze!==p)return n(ze,C,B,N,le,Ee)*or.factor}if(ze=p.replace("%",""),ze!==p)return n(ze,C,B,N,le,Ee)/100;let Qe=parseFloat(p);if(isNaN(Qe))return;let ct=N(Qe);if(ct&&ct!=="."&&(ze=p.replace(new RegExp(`${e(ct)}$`),""),ze!==p))return n(ze,C,B,N,le,Ee);let wt={};Object.keys(Ee).forEach(ir=>{wt[Ee[ir]]=ir});let qt=Object.keys(wt).sort().reverse(),nr=qt.length;for(let ir=0;ir<nr;ir++){let or=qt[ir],ur=wt[or];if(ze=p.replace(or,""),ze!==p){let hr;switch(ur){case"thousand":hr=Math.pow(10,3);break;case"million":hr=Math.pow(10,6);break;case"billion":hr=Math.pow(10,9);break;case"trillion":hr=Math.pow(10,12);break}return n(ze,C,B,N,le,Ee)*hr}}}function i(p,C,B){let N=p.replace(B,"");return N=N.replace(new RegExp(`([0-9])${e(C.thousands)}([0-9])`,"g"),"$1$2"),N=N.replace(C.decimal,"."),N}function s(p,C,B="",N,le,Ee,Ue){if(p==="")return;if(p===le)return 0;let ze=i(p,C,B);return n(ze,C,B,N,le,Ee)}function a(p,C){if(!(p.indexOf(":")&&C.thousands!==":"))return!1;let N=p.split(":");if(N.length!==3)return!1;let le=+N[0],Ee=+N[1],Ue=+N[2];return!isNaN(le)&&!isNaN(Ee)&&!isNaN(Ue)}function l(p){let C=p.split(":"),B=+C[0],N=+C[1];return+C[2]+60*N+3600*B}function f(p,C){const B=requireGlobalState();let N=B.currentDelimiters(),le=B.currentCurrency().symbol,Ee=B.currentOrdinal(),Ue=B.getZeroFormat(),ze=B.currentAbbreviations(),Ze;if(typeof p=="string")a(p,N)?Ze=l(p):Ze=s(p,N,le,Ee,Ue,ze);else if(typeof p=="number")Ze=p;else return;if(Ze!==void 0)return Ze}return unformatting={unformat:f},unformatting}/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var validating$1,hasRequiredValidating;function requireValidating(){if(hasRequiredValidating)return validating$1;hasRequiredValidating=1;let t=requireUnformatting();const e=/^[a-z]{2,3}(-[a-zA-Z]{4})?(-([A-Z]{2}|[0-9]{3}))?$/,n=["currency","percent","byte","time","ordinal","number"],i=["trillion","billion","million","thousand"],s=["prefix","infix","postfix"],a=["sign","parenthesis"],l={type:"object",children:{thousand:{type:"string",mandatory:!0},million:{type:"string",mandatory:!0},billion:{type:"string",mandatory:!0},trillion:{type:"string",mandatory:!0}},mandatory:!0},C={output:{type:"string",validValues:n},base:{type:"string",validValues:["decimal","binary","general"],restriction:(Ze,Qe)=>Qe.output==="byte",message:"`base` must be provided only when the output is `byte`",mandatory:Ze=>Ze.output==="byte"},characteristic:{type:"number",restriction:Ze=>Ze>=0,message:"value must be positive"},prefix:"string",postfix:"string",forceAverage:{type:"string",validValues:i},average:"boolean",lowPrecision:{type:"boolean",restriction:(Ze,Qe)=>Qe.average===!0,message:"`lowPrecision` must be provided only when the option `average` is set"},currencyPosition:{type:"string",validValues:s},currencySymbol:"string",totalLength:{type:"number",restrictions:[{restriction:Ze=>Ze>=0,message:"value must be positive"},{restriction:(Ze,Qe)=>!Qe.exponential,message:"`totalLength` is incompatible with `exponential`"}]},mantissa:{type:"number",restriction:Ze=>Ze>=0,message:"value must be positive"},optionalMantissa:"boolean",trimMantissa:"boolean",roundingFunction:"function",optionalCharacteristic:"boolean",thousandSeparated:"boolean",spaceSeparated:"boolean",spaceSeparatedCurrency:"boolean",spaceSeparatedAbbreviation:"boolean",abbreviations:{type:"object",children:{thousand:"string",million:"string",billion:"string",trillion:"string"}},negative:{type:"string",validValues:a},forceSign:"boolean",exponential:{type:"boolean"},prefixSymbol:{type:"boolean",restriction:(Ze,Qe)=>Qe.output==="percent",message:"`prefixSymbol` can be provided only when the output is `percent`"}},B={languageTag:{type:"string",mandatory:!0,restriction:Ze=>Ze.match(e),message:"the language tag must follow the BCP 47 specification (see https://tools.ieft.org/html/bcp47)"},delimiters:{type:"object",children:{thousands:"string",decimal:"string",thousandsSize:"number"},mandatory:!0},abbreviations:l,spaceSeparated:"boolean",spaceSeparatedCurrency:"boolean",ordinal:{type:"function",mandatory:!0},bytes:{type:"object",children:{binarySuffixes:"object",decimalSuffixes:"object"}},currency:{type:"object",children:{symbol:"string",position:"string",code:"string"},mandatory:!0},defaults:"format",ordinalFormat:"format",byteFormat:"format",percentageFormat:"format",currencyFormat:"format",timeDefaults:"format",formats:{type:"object",children:{fourDigits:{type:"format",mandatory:!0},fullWithTwoDecimals:{type:"format",mandatory:!0},fullWithTwoDecimalsNoCurrency:{type:"format",mandatory:!0},fullWithNoDecimals:{type:"format",mandatory:!0}}}};function N(Ze,Qe){let ct=le(Ze),wt=Ue(Qe);return ct&&wt}function le(Ze){return t.unformat(Ze)!==void 0}function Ee(Ze,Qe,ct,wt=!1){let qt=Object.keys(Ze).map(nr=>{if(!Qe[nr])return console.error(`${ct} Invalid key: ${nr}`),!1;let ir=Ze[nr],or=Qe[nr];if(typeof or=="string"&&(or={type:or}),or.type==="format"){if(!Ee(ir,C,`[Validate ${nr}]`,!0))return!1}else if(typeof ir!==or.type)return console.error(`${ct} ${nr} type mismatched: "${or.type}" expected, "${typeof ir}" provided`),!1;if(or.restrictions&&or.restrictions.length){let ur=or.restrictions.length;for(let hr=0;hr<ur;hr++){let{restriction:fr,message:ar}=or.restrictions[hr];if(!fr(ir,Ze))return console.error(`${ct} ${nr} invalid value: ${ar}`),!1}}return or.restriction&&!or.restriction(ir,Ze)?(console.error(`${ct} ${nr} invalid value: ${or.message}`),!1):or.validValues&&or.validValues.indexOf(ir)===-1?(console.error(`${ct} ${nr} invalid value: must be among ${JSON.stringify(or.validValues)}, "${ir}" provided`),!1):!(or.children&&!Ee(ir,or.children,`[Validate ${nr}]`))});return wt||qt.push(...Object.keys(Qe).map(nr=>{let ir=Qe[nr];if(typeof ir=="string"&&(ir={type:ir}),ir.mandatory){let or=ir.mandatory;if(typeof or=="function"&&(or=or(Ze)),or&&Ze[nr]===void 0)return console.error(`${ct} Missing mandatory key "${nr}"`),!1}return!0})),qt.reduce((nr,ir)=>nr&&ir,!0)}function Ue(Ze){return Ee(Ze,C,"[Validate format]")}function ze(Ze){return Ee(Ze,B,"[Validate language]")}return validating$1={validate:N,validateFormat:Ue,validateInput:le,validateLanguage:ze},validating$1}/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */function parsePrefix(t,e){let n=t.match(/^{([^}]*)}/);return n?(e.prefix=n[1],t.slice(n[0].length)):t}function parsePostfix(t,e){let n=t.match(/{([^}]*)}$/);return n?(e.postfix=n[1],t.slice(0,-n[0].length)):t}function parseOutput(t,e){if(t.indexOf("$")!==-1){e.output="currency";return}if(t.indexOf("%")!==-1){e.output="percent";return}if(t.indexOf("bd")!==-1){e.output="byte",e.base="general";return}if(t.indexOf("b")!==-1){e.output="byte",e.base="binary";return}if(t.indexOf("d")!==-1){e.output="byte",e.base="decimal";return}if(t.indexOf(":")!==-1){e.output="time";return}t.indexOf("o")!==-1&&(e.output="ordinal")}function parseThousandSeparated(t,e){t.indexOf(",")!==-1&&(e.thousandSeparated=!0)}function parseSpaceSeparated(t,e){t.indexOf(" ")!==-1&&(e.spaceSeparated=!0,e.spaceSeparatedCurrency=!0,(e.average||e.forceAverage)&&(e.spaceSeparatedAbbreviation=!0))}function parseTotalLength(t,e){let n=t.match(/[1-9]+[0-9]*/);n&&(e.totalLength=+n[0])}function parseCharacteristic(t,e){let i=t.split(".")[0].match(/0+/);i&&(e.characteristic=i[0].length)}function parseMantissa(t,e){let n=t.split(".")[1];if(n){let i=n.match(/0+/);i&&(e.mantissa=i[0].length)}}function parseTrimMantissa(t,e){const n=t.split(".")[1];n&&(e.trimMantissa=n.indexOf("[")!==-1)}function parseAverage(t,e){t.indexOf("a")!==-1&&(e.average=!0)}function parseForceAverage(t,e){t.indexOf("K")!==-1?e.forceAverage="thousand":t.indexOf("M")!==-1?e.forceAverage="million":t.indexOf("B")!==-1?e.forceAverage="billion":t.indexOf("T")!==-1&&(e.forceAverage="trillion")}function parseOptionalMantissa(t,e){t.match(/\[\.]/)?e.optionalMantissa=!0:t.match(/\./)&&(e.optionalMantissa=!1)}function parseOptionalCharacteristic(t,e){if(t.indexOf(".")!==-1){let n=t.split(".")[0];e.optionalCharacteristic=n.indexOf("0")===-1}}function parseNegative(t,e){t.match(/^\+?\([^)]*\)$/)&&(e.negative="parenthesis"),t.match(/^\+?-/)&&(e.negative="sign")}function parseForceSign(t,e){t.match(/^\+/)&&(e.forceSign=!0)}function parseFormat(t,e={}){return typeof t!="string"?t:(t=parsePrefix(t,e),t=parsePostfix(t,e),parseOutput(t,e),parseTotalLength(t,e),parseCharacteristic(t,e),parseOptionalCharacteristic(t,e),parseAverage(t,e),parseForceAverage(t,e),parseMantissa(t,e),parseOptionalMantissa(t,e),parseTrimMantissa(t,e),parseThousandSeparated(t,e),parseSpaceSeparated(t,e),parseNegative(t,e),parseForceSign(t,e),e)}var parsing$2={parseFormat};/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */var globalState$2,hasRequiredGlobalState;function requireGlobalState(){if(hasRequiredGlobalState)return globalState$2;hasRequiredGlobalState=1;const t=requireEnUS(),e=requireValidating(),n=parsing$2;let i={},s,a={},l=null,f={};function p(B){s=B}function C(){return a[s]}return i.languages=()=>Object.assign({},a),i.currentLanguage=()=>s,i.currentBytes=()=>C().bytes||{},i.currentCurrency=()=>C().currency,i.currentAbbreviations=()=>C().abbreviations,i.currentDelimiters=()=>C().delimiters,i.currentOrdinal=()=>C().ordinal,i.currentDefaults=()=>Object.assign({},C().defaults,f),i.currentOrdinalDefaultFormat=()=>Object.assign({},i.currentDefaults(),C().ordinalFormat),i.currentByteDefaultFormat=()=>Object.assign({},i.currentDefaults(),C().byteFormat),i.currentPercentageDefaultFormat=()=>Object.assign({},i.currentDefaults(),C().percentageFormat),i.currentCurrencyDefaultFormat=()=>Object.assign({},i.currentDefaults(),C().currencyFormat),i.currentTimeDefaultFormat=()=>Object.assign({},i.currentDefaults(),C().timeFormat),i.setDefaults=B=>{B=n.parseFormat(B),e.validateFormat(B)&&(f=B)},i.getZeroFormat=()=>l,i.setZeroFormat=B=>l=typeof B=="string"?B:null,i.hasZeroFormat=()=>l!==null,i.languageData=B=>{if(B){if(a[B])return a[B];throw new Error(`Unknown tag "${B}"`)}return C()},i.registerLanguage=(B,N=!1)=>{if(!e.validateLanguage(B))throw new Error("Invalid language data");a[B.languageTag]=B,N&&p(B.languageTag)},i.setLanguage=(B,N=t.languageTag)=>{if(!a[B]){let le=B.split("-")[0],Ee=Object.keys(a).find(Ue=>Ue.split("-")[0]===le);if(!a[Ee]){p(N);return}p(Ee);return}p(B)},i.registerLanguage(t),s=t.languageTag,globalState$2=i,globalState$2}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */function loadLanguagesInNode(t,e){t.forEach(n=>{let i;try{i=commonjsRequire(`../languages/${n}`)}catch{console.error(`Unable to load "${n}". No matching language file found.`)}i&&e.registerLanguage(i)})}var loading=t=>({loadLanguagesInNode:e=>loadLanguagesInNode(e,t)}),bignumber={exports:{}};(function(t){(function(e){var n,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,a=Math.floor,l="[BigNumber Error] ",f=l+"Number primitive has more than 15 significant digits: ",p=1e14,C=14,B=9007199254740991,N=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],le=1e7,Ee=1e9;function Ue(ir){var or,ur,hr,fr=sr.prototype={constructor:sr,toString:null,valueOf:null},ar=new sr(1),Lt=20,Vt=4,tt=-7,Ye=21,ot=-1e7,Et=1e7,er=!1,rr=1,yt=0,tr={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ut="0123456789abcdefghijklmnopqrstuvwxyz",Ft=!0;function sr(pr,lr){var cr,yr,Sr,Ar,Tr,xr,Cr,wr,Er=this;if(!(Er instanceof sr))return new sr(pr,lr);if(lr==null){if(pr&&pr._isBigNumber===!0){Er.s=pr.s,!pr.c||pr.e>Et?Er.c=Er.e=null:pr.e<ot?Er.c=[Er.e=0]:(Er.e=pr.e,Er.c=pr.c.slice());return}if((xr=typeof pr=="number")&&pr*0==0){if(Er.s=1/pr<0?(pr=-pr,-1):1,pr===~~pr){for(Ar=0,Tr=pr;Tr>=10;Tr/=10,Ar++);Ar>Et?Er.c=Er.e=null:(Er.e=Ar,Er.c=[pr]);return}wr=String(pr)}else{if(!i.test(wr=String(pr)))return hr(Er,wr,xr);Er.s=wr.charCodeAt(0)==45?(wr=wr.slice(1),-1):1}(Ar=wr.indexOf("."))>-1&&(wr=wr.replace(".","")),(Tr=wr.search(/e/i))>0?(Ar<0&&(Ar=Tr),Ar+=+wr.slice(Tr+1),wr=wr.substring(0,Tr)):Ar<0&&(Ar=wr.length)}else{if(ct(lr,2,Ut.length,"Base"),lr==10&&Ft)return Er=new sr(pr),gr(Er,Lt+Er.e+1,Vt);if(wr=String(pr),xr=typeof pr=="number"){if(pr*0!=0)return hr(Er,wr,xr,lr);if(Er.s=1/pr<0?(wr=wr.slice(1),-1):1,sr.DEBUG&&wr.replace(/^0\.0*|\./,"").length>15)throw Error(f+pr)}else Er.s=wr.charCodeAt(0)===45?(wr=wr.slice(1),-1):1;for(cr=Ut.slice(0,lr),Ar=Tr=0,Cr=wr.length;Tr<Cr;Tr++)if(cr.indexOf(yr=wr.charAt(Tr))<0){if(yr=="."){if(Tr>Ar){Ar=Cr;continue}}else if(!Sr&&(wr==wr.toUpperCase()&&(wr=wr.toLowerCase())||wr==wr.toLowerCase()&&(wr=wr.toUpperCase()))){Sr=!0,Tr=-1,Ar=0;continue}return hr(Er,String(pr),xr,lr)}xr=!1,wr=ur(wr,lr,10,Er.s),(Ar=wr.indexOf("."))>-1?wr=wr.replace(".",""):Ar=wr.length}for(Tr=0;wr.charCodeAt(Tr)===48;Tr++);for(Cr=wr.length;wr.charCodeAt(--Cr)===48;);if(wr=wr.slice(Tr,++Cr)){if(Cr-=Tr,xr&&sr.DEBUG&&Cr>15&&(pr>B||pr!==a(pr)))throw Error(f+Er.s*pr);if((Ar=Ar-Tr-1)>Et)Er.c=Er.e=null;else if(Ar<ot)Er.c=[Er.e=0];else{if(Er.e=Ar,Er.c=[],Tr=(Ar+1)%C,Ar<0&&(Tr+=C),Tr<Cr){for(Tr&&Er.c.push(+wr.slice(0,Tr)),Cr-=C;Tr<Cr;)Er.c.push(+wr.slice(Tr,Tr+=C));Tr=C-(wr=wr.slice(Tr)).length}else Tr-=Cr;for(;Tr--;wr+="0");Er.c.push(+wr)}}else Er.c=[Er.e=0]}sr.clone=Ue,sr.ROUND_UP=0,sr.ROUND_DOWN=1,sr.ROUND_CEIL=2,sr.ROUND_FLOOR=3,sr.ROUND_HALF_UP=4,sr.ROUND_HALF_DOWN=5,sr.ROUND_HALF_EVEN=6,sr.ROUND_HALF_CEIL=7,sr.ROUND_HALF_FLOOR=8,sr.EUCLID=9,sr.config=sr.set=function(pr){var lr,cr;if(pr!=null)if(typeof pr=="object"){if(pr.hasOwnProperty(lr="DECIMAL_PLACES")&&(cr=pr[lr],ct(cr,0,Ee,lr),Lt=cr),pr.hasOwnProperty(lr="ROUNDING_MODE")&&(cr=pr[lr],ct(cr,0,8,lr),Vt=cr),pr.hasOwnProperty(lr="EXPONENTIAL_AT")&&(cr=pr[lr],cr&&cr.pop?(ct(cr[0],-1e9,0,lr),ct(cr[1],0,Ee,lr),tt=cr[0],Ye=cr[1]):(ct(cr,-1e9,Ee,lr),tt=-(Ye=cr<0?-cr:cr))),pr.hasOwnProperty(lr="RANGE"))if(cr=pr[lr],cr&&cr.pop)ct(cr[0],-1e9,-1,lr),ct(cr[1],1,Ee,lr),ot=cr[0],Et=cr[1];else if(ct(cr,-1e9,Ee,lr),cr)ot=-(Et=cr<0?-cr:cr);else throw Error(l+lr+" cannot be zero: "+cr);if(pr.hasOwnProperty(lr="CRYPTO"))if(cr=pr[lr],cr===!!cr)if(cr)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))er=cr;else throw er=!cr,Error(l+"crypto unavailable");else er=cr;else throw Error(l+lr+" not true or false: "+cr);if(pr.hasOwnProperty(lr="MODULO_MODE")&&(cr=pr[lr],ct(cr,0,9,lr),rr=cr),pr.hasOwnProperty(lr="POW_PRECISION")&&(cr=pr[lr],ct(cr,0,Ee,lr),yt=cr),pr.hasOwnProperty(lr="FORMAT"))if(cr=pr[lr],typeof cr=="object")tr=cr;else throw Error(l+lr+" not an object: "+cr);if(pr.hasOwnProperty(lr="ALPHABET"))if(cr=pr[lr],typeof cr=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(cr))Ft=cr.slice(0,10)=="0123456789",Ut=cr;else throw Error(l+lr+" invalid: "+cr)}else throw Error(l+"Object expected: "+pr);return{DECIMAL_PLACES:Lt,ROUNDING_MODE:Vt,EXPONENTIAL_AT:[tt,Ye],RANGE:[ot,Et],CRYPTO:er,MODULO_MODE:rr,POW_PRECISION:yt,FORMAT:tr,ALPHABET:Ut}},sr.isBigNumber=function(pr){if(!pr||pr._isBigNumber!==!0)return!1;if(!sr.DEBUG)return!0;var lr,cr,yr=pr.c,Sr=pr.e,Ar=pr.s;e:if({}.toString.call(yr)=="[object Array]"){if((Ar===1||Ar===-1)&&Sr>=-1e9&&Sr<=Ee&&Sr===a(Sr)){if(yr[0]===0){if(Sr===0&&yr.length===1)return!0;break e}if(lr=(Sr+1)%C,lr<1&&(lr+=C),String(yr[0]).length==lr){for(lr=0;lr<yr.length;lr++)if(cr=yr[lr],cr<0||cr>=p||cr!==a(cr))break e;if(cr!==0)return!0}}}else if(yr===null&&Sr===null&&(Ar===null||Ar===1||Ar===-1))return!0;throw Error(l+"Invalid BigNumber: "+pr)},sr.maximum=sr.max=function(){return _r(arguments,-1)},sr.minimum=sr.min=function(){return _r(arguments,1)},sr.random=function(){var pr=9007199254740992,lr=Math.random()*pr&2097151?function(){return a(Math.random()*pr)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(cr){var yr,Sr,Ar,Tr,xr,Cr=0,wr=[],Er=new sr(ar);if(cr==null?cr=Lt:ct(cr,0,Ee),Tr=s(cr/C),er)if(crypto.getRandomValues){for(yr=crypto.getRandomValues(new Uint32Array(Tr*=2));Cr<Tr;)xr=yr[Cr]*131072+(yr[Cr+1]>>>11),xr>=9e15?(Sr=crypto.getRandomValues(new Uint32Array(2)),yr[Cr]=Sr[0],yr[Cr+1]=Sr[1]):(wr.push(xr%1e14),Cr+=2);Cr=Tr/2}else if(crypto.randomBytes){for(yr=crypto.randomBytes(Tr*=7);Cr<Tr;)xr=(yr[Cr]&31)*281474976710656+yr[Cr+1]*1099511627776+yr[Cr+2]*4294967296+yr[Cr+3]*16777216+(yr[Cr+4]<<16)+(yr[Cr+5]<<8)+yr[Cr+6],xr>=9e15?crypto.randomBytes(7).copy(yr,Cr):(wr.push(xr%1e14),Cr+=7);Cr=Tr/7}else throw er=!1,Error(l+"crypto unavailable");if(!er)for(;Cr<Tr;)xr=lr(),xr<9e15&&(wr[Cr++]=xr%1e14);for(Tr=wr[--Cr],cr%=C,Tr&&cr&&(xr=N[C-cr],wr[Cr]=a(Tr/xr)*xr);wr[Cr]===0;wr.pop(),Cr--);if(Cr<0)wr=[Ar=0];else{for(Ar=-1;wr[0]===0;wr.splice(0,1),Ar-=C);for(Cr=1,xr=wr[0];xr>=10;xr/=10,Cr++);Cr<C&&(Ar-=C-Cr)}return Er.e=Ar,Er.c=wr,Er}}(),sr.sum=function(){for(var pr=1,lr=arguments,cr=new sr(lr[0]);pr<lr.length;)cr=cr.plus(lr[pr++]);return cr},ur=function(){var pr="0123456789";function lr(cr,yr,Sr,Ar){for(var Tr,xr=[0],Cr,wr=0,Er=cr.length;wr<Er;){for(Cr=xr.length;Cr--;xr[Cr]*=yr);for(xr[0]+=Ar.indexOf(cr.charAt(wr++)),Tr=0;Tr<xr.length;Tr++)xr[Tr]>Sr-1&&(xr[Tr+1]==null&&(xr[Tr+1]=0),xr[Tr+1]+=xr[Tr]/Sr|0,xr[Tr]%=Sr)}return xr.reverse()}return function(cr,yr,Sr,Ar,Tr){var xr,Cr,wr,Er,kr,Br,Rr,Ir,Dr=cr.indexOf("."),zr=Lt,jr=Vt;for(Dr>=0&&(Er=yt,yt=0,cr=cr.replace(".",""),Ir=new sr(yr),Br=Ir.pow(cr.length-Dr),yt=Er,Ir.c=lr(nr(Ze(Br.c),Br.e,"0"),10,Sr,pr),Ir.e=Ir.c.length),Rr=lr(cr,yr,Sr,Tr?(xr=Ut,pr):(xr=pr,Ut)),wr=Er=Rr.length;Rr[--Er]==0;Rr.pop());if(!Rr[0])return xr.charAt(0);if(Dr<0?--wr:(Br.c=Rr,Br.e=wr,Br.s=Ar,Br=or(Br,Ir,zr,jr,Sr),Rr=Br.c,kr=Br.r,wr=Br.e),Cr=wr+zr+1,Dr=Rr[Cr],Er=Sr/2,kr=kr||Cr<0||Rr[Cr+1]!=null,kr=jr<4?(Dr!=null||kr)&&(jr==0||jr==(Br.s<0?3:2)):Dr>Er||Dr==Er&&(jr==4||kr||jr==6&&Rr[Cr-1]&1||jr==(Br.s<0?8:7)),Cr<1||!Rr[0])cr=kr?nr(xr.charAt(1),-zr,xr.charAt(0)):xr.charAt(0);else{if(Rr.length=Cr,kr)for(--Sr;++Rr[--Cr]>Sr;)Rr[Cr]=0,Cr||(++wr,Rr=[1].concat(Rr));for(Er=Rr.length;!Rr[--Er];);for(Dr=0,cr="";Dr<=Er;cr+=xr.charAt(Rr[Dr++]));cr=nr(cr,wr,xr.charAt(0))}return cr}}(),or=function(){function pr(yr,Sr,Ar){var Tr,xr,Cr,wr,Er=0,kr=yr.length,Br=Sr%le,Rr=Sr/le|0;for(yr=yr.slice();kr--;)Cr=yr[kr]%le,wr=yr[kr]/le|0,Tr=Rr*Cr+wr*Br,xr=Br*Cr+Tr%le*le+Er,Er=(xr/Ar|0)+(Tr/le|0)+Rr*wr,yr[kr]=xr%Ar;return Er&&(yr=[Er].concat(yr)),yr}function lr(yr,Sr,Ar,Tr){var xr,Cr;if(Ar!=Tr)Cr=Ar>Tr?1:-1;else for(xr=Cr=0;xr<Ar;xr++)if(yr[xr]!=Sr[xr]){Cr=yr[xr]>Sr[xr]?1:-1;break}return Cr}function cr(yr,Sr,Ar,Tr){for(var xr=0;Ar--;)yr[Ar]-=xr,xr=yr[Ar]<Sr[Ar]?1:0,yr[Ar]=xr*Tr+yr[Ar]-Sr[Ar];for(;!yr[0]&&yr.length>1;yr.splice(0,1));}return function(yr,Sr,Ar,Tr,xr){var Cr,wr,Er,kr,Br,Rr,Ir,Dr,zr,jr,Fr,mn,Gr,rn,Vn,Lr,sn,Gn=yr.s==Sr.s?1:-1,qr=yr.c,Vr=Sr.c;if(!qr||!qr[0]||!Vr||!Vr[0])return new sr(!yr.s||!Sr.s||(qr?Vr&&qr[0]==Vr[0]:!Vr)?NaN:qr&&qr[0]==0||!Vr?Gn*0:Gn/0);for(Dr=new sr(Gn),zr=Dr.c=[],wr=yr.e-Sr.e,Gn=Ar+wr+1,xr||(xr=p,wr=ze(yr.e/C)-ze(Sr.e/C),Gn=Gn/C|0),Er=0;Vr[Er]==(qr[Er]||0);Er++);if(Vr[Er]>(qr[Er]||0)&&wr--,Gn<0)zr.push(1),kr=!0;else{for(rn=qr.length,Lr=Vr.length,Er=0,Gn+=2,Br=a(xr/(Vr[0]+1)),Br>1&&(Vr=pr(Vr,Br,xr),qr=pr(qr,Br,xr),Lr=Vr.length,rn=qr.length),Gr=Lr,jr=qr.slice(0,Lr),Fr=jr.length;Fr<Lr;jr[Fr++]=0);sn=Vr.slice(),sn=[0].concat(sn),Vn=Vr[0],Vr[1]>=xr/2&&Vn++;do{if(Br=0,Cr=lr(Vr,jr,Lr,Fr),Cr<0){if(mn=jr[0],Lr!=Fr&&(mn=mn*xr+(jr[1]||0)),Br=a(mn/Vn),Br>1)for(Br>=xr&&(Br=xr-1),Rr=pr(Vr,Br,xr),Ir=Rr.length,Fr=jr.length;lr(Rr,jr,Ir,Fr)==1;)Br--,cr(Rr,Lr<Ir?sn:Vr,Ir,xr),Ir=Rr.length,Cr=1;else Br==0&&(Cr=Br=1),Rr=Vr.slice(),Ir=Rr.length;if(Ir<Fr&&(Rr=[0].concat(Rr)),cr(jr,Rr,Fr,xr),Fr=jr.length,Cr==-1)for(;lr(Vr,jr,Lr,Fr)<1;)Br++,cr(jr,Lr<Fr?sn:Vr,Fr,xr),Fr=jr.length}else Cr===0&&(Br++,jr=[0]);zr[Er++]=Br,jr[0]?jr[Fr++]=qr[Gr]||0:(jr=[qr[Gr]],Fr=1)}while((Gr++<rn||jr[0]!=null)&&Gn--);kr=jr[0]!=null,zr[0]||zr.splice(0,1)}if(xr==p){for(Er=1,Gn=zr[0];Gn>=10;Gn/=10,Er++);gr(Dr,Ar+(Dr.e=Er+wr*C-1)+1,Tr,kr)}else Dr.e=wr,Dr.r=+kr;return Dr}}();function vr(pr,lr,cr,yr){var Sr,Ar,Tr,xr,Cr;if(cr==null?cr=Vt:ct(cr,0,8),!pr.c)return pr.toString();if(Sr=pr.c[0],Tr=pr.e,lr==null)Cr=Ze(pr.c),Cr=yr==1||yr==2&&(Tr<=tt||Tr>=Ye)?qt(Cr,Tr):nr(Cr,Tr,"0");else if(pr=gr(new sr(pr),lr,cr),Ar=pr.e,Cr=Ze(pr.c),xr=Cr.length,yr==1||yr==2&&(lr<=Ar||Ar<=tt)){for(;xr<lr;Cr+="0",xr++);Cr=qt(Cr,Ar)}else if(lr-=Tr,Cr=nr(Cr,Ar,"0"),Ar+1>xr){if(--lr>0)for(Cr+=".";lr--;Cr+="0");}else if(lr+=Ar-xr,lr>0)for(Ar+1==xr&&(Cr+=".");lr--;Cr+="0");return pr.s<0&&Sr?"-"+Cr:Cr}function _r(pr,lr){for(var cr,yr,Sr=1,Ar=new sr(pr[0]);Sr<pr.length;Sr++)yr=new sr(pr[Sr]),(!yr.s||(cr=Qe(Ar,yr))===lr||cr===0&&Ar.s===lr)&&(Ar=yr);return Ar}function dr(pr,lr,cr){for(var yr=1,Sr=lr.length;!lr[--Sr];lr.pop());for(Sr=lr[0];Sr>=10;Sr/=10,yr++);return(cr=yr+cr*C-1)>Et?pr.c=pr.e=null:cr<ot?pr.c=[pr.e=0]:(pr.e=cr,pr.c=lr),pr}hr=function(){var pr=/^(-?)0([xbo])(?=\w[\w.]*$)/i,lr=/^([^.]+)\.$/,cr=/^\.([^.]+)$/,yr=/^-?(Infinity|NaN)$/,Sr=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ar,Tr,xr,Cr){var wr,Er=xr?Tr:Tr.replace(Sr,"");if(yr.test(Er))Ar.s=isNaN(Er)?null:Er<0?-1:1;else{if(!xr&&(Er=Er.replace(pr,function(kr,Br,Rr){return wr=(Rr=Rr.toLowerCase())=="x"?16:Rr=="b"?2:8,!Cr||Cr==wr?Br:kr}),Cr&&(wr=Cr,Er=Er.replace(lr,"$1").replace(cr,"0.$1")),Tr!=Er))return new sr(Er,wr);if(sr.DEBUG)throw Error(l+"Not a"+(Cr?" base "+Cr:"")+" number: "+Tr);Ar.s=null}Ar.c=Ar.e=null}}();function gr(pr,lr,cr,yr){var Sr,Ar,Tr,xr,Cr,wr,Er,kr=pr.c,Br=N;if(kr){e:{for(Sr=1,xr=kr[0];xr>=10;xr/=10,Sr++);if(Ar=lr-Sr,Ar<0)Ar+=C,Tr=lr,Cr=kr[wr=0],Er=a(Cr/Br[Sr-Tr-1]%10);else if(wr=s((Ar+1)/C),wr>=kr.length)if(yr){for(;kr.length<=wr;kr.push(0));Cr=Er=0,Sr=1,Ar%=C,Tr=Ar-C+1}else break e;else{for(Cr=xr=kr[wr],Sr=1;xr>=10;xr/=10,Sr++);Ar%=C,Tr=Ar-C+Sr,Er=Tr<0?0:a(Cr/Br[Sr-Tr-1]%10)}if(yr=yr||lr<0||kr[wr+1]!=null||(Tr<0?Cr:Cr%Br[Sr-Tr-1]),yr=cr<4?(Er||yr)&&(cr==0||cr==(pr.s<0?3:2)):Er>5||Er==5&&(cr==4||yr||cr==6&&(Ar>0?Tr>0?Cr/Br[Sr-Tr]:0:kr[wr-1])%10&1||cr==(pr.s<0?8:7)),lr<1||!kr[0])return kr.length=0,yr?(lr-=pr.e+1,kr[0]=Br[(C-lr%C)%C],pr.e=-lr||0):kr[0]=pr.e=0,pr;if(Ar==0?(kr.length=wr,xr=1,wr--):(kr.length=wr+1,xr=Br[C-Ar],kr[wr]=Tr>0?a(Cr/Br[Sr-Tr]%Br[Tr])*xr:0),yr)for(;;)if(wr==0){for(Ar=1,Tr=kr[0];Tr>=10;Tr/=10,Ar++);for(Tr=kr[0]+=xr,xr=1;Tr>=10;Tr/=10,xr++);Ar!=xr&&(pr.e++,kr[0]==p&&(kr[0]=1));break}else{if(kr[wr]+=xr,kr[wr]!=p)break;kr[wr--]=0,xr=1}for(Ar=kr.length;kr[--Ar]===0;kr.pop());}pr.e>Et?pr.c=pr.e=null:pr.e<ot&&(pr.c=[pr.e=0])}return pr}function $r(pr){var lr,cr=pr.e;return cr===null?pr.toString():(lr=Ze(pr.c),lr=cr<=tt||cr>=Ye?qt(lr,cr):nr(lr,cr,"0"),pr.s<0?"-"+lr:lr)}return fr.absoluteValue=fr.abs=function(){var pr=new sr(this);return pr.s<0&&(pr.s=1),pr},fr.comparedTo=function(pr,lr){return Qe(this,new sr(pr,lr))},fr.decimalPlaces=fr.dp=function(pr,lr){var cr,yr,Sr,Ar=this;if(pr!=null)return ct(pr,0,Ee),lr==null?lr=Vt:ct(lr,0,8),gr(new sr(Ar),pr+Ar.e+1,lr);if(!(cr=Ar.c))return null;if(yr=((Sr=cr.length-1)-ze(this.e/C))*C,Sr=cr[Sr])for(;Sr%10==0;Sr/=10,yr--);return yr<0&&(yr=0),yr},fr.dividedBy=fr.div=function(pr,lr){return or(this,new sr(pr,lr),Lt,Vt)},fr.dividedToIntegerBy=fr.idiv=function(pr,lr){return or(this,new sr(pr,lr),0,1)},fr.exponentiatedBy=fr.pow=function(pr,lr){var cr,yr,Sr,Ar,Tr,xr,Cr,wr,Er,kr=this;if(pr=new sr(pr),pr.c&&!pr.isInteger())throw Error(l+"Exponent not an integer: "+$r(pr));if(lr!=null&&(lr=new sr(lr)),xr=pr.e>14,!kr.c||!kr.c[0]||kr.c[0]==1&&!kr.e&&kr.c.length==1||!pr.c||!pr.c[0])return Er=new sr(Math.pow(+$r(kr),xr?pr.s*(2-wt(pr)):+$r(pr))),lr?Er.mod(lr):Er;if(Cr=pr.s<0,lr){if(lr.c?!lr.c[0]:!lr.s)return new sr(NaN);yr=!Cr&&kr.isInteger()&&lr.isInteger(),yr&&(kr=kr.mod(lr))}else{if(pr.e>9&&(kr.e>0||kr.e<-1||(kr.e==0?kr.c[0]>1||xr&&kr.c[1]>=24e7:kr.c[0]<8e13||xr&&kr.c[0]<=9999975e7)))return Ar=kr.s<0&&wt(pr)?-0:0,kr.e>-1&&(Ar=1/Ar),new sr(Cr?1/Ar:Ar);yt&&(Ar=s(yt/C+2))}for(xr?(cr=new sr(.5),Cr&&(pr.s=1),wr=wt(pr)):(Sr=Math.abs(+$r(pr)),wr=Sr%2),Er=new sr(ar);;){if(wr){if(Er=Er.times(kr),!Er.c)break;Ar?Er.c.length>Ar&&(Er.c.length=Ar):yr&&(Er=Er.mod(lr))}if(Sr){if(Sr=a(Sr/2),Sr===0)break;wr=Sr%2}else if(pr=pr.times(cr),gr(pr,pr.e+1,1),pr.e>14)wr=wt(pr);else{if(Sr=+$r(pr),Sr===0)break;wr=Sr%2}kr=kr.times(kr),Ar?kr.c&&kr.c.length>Ar&&(kr.c.length=Ar):yr&&(kr=kr.mod(lr))}return yr?Er:(Cr&&(Er=ar.div(Er)),lr?Er.mod(lr):Ar?gr(Er,yt,Vt,Tr):Er)},fr.integerValue=function(pr){var lr=new sr(this);return pr==null?pr=Vt:ct(pr,0,8),gr(lr,lr.e+1,pr)},fr.isEqualTo=fr.eq=function(pr,lr){return Qe(this,new sr(pr,lr))===0},fr.isFinite=function(){return!!this.c},fr.isGreaterThan=fr.gt=function(pr,lr){return Qe(this,new sr(pr,lr))>0},fr.isGreaterThanOrEqualTo=fr.gte=function(pr,lr){return(lr=Qe(this,new sr(pr,lr)))===1||lr===0},fr.isInteger=function(){return!!this.c&&ze(this.e/C)>this.c.length-2},fr.isLessThan=fr.lt=function(pr,lr){return Qe(this,new sr(pr,lr))<0},fr.isLessThanOrEqualTo=fr.lte=function(pr,lr){return(lr=Qe(this,new sr(pr,lr)))===-1||lr===0},fr.isNaN=function(){return!this.s},fr.isNegative=function(){return this.s<0},fr.isPositive=function(){return this.s>0},fr.isZero=function(){return!!this.c&&this.c[0]==0},fr.minus=function(pr,lr){var cr,yr,Sr,Ar,Tr=this,xr=Tr.s;if(pr=new sr(pr,lr),lr=pr.s,!xr||!lr)return new sr(NaN);if(xr!=lr)return pr.s=-lr,Tr.plus(pr);var Cr=Tr.e/C,wr=pr.e/C,Er=Tr.c,kr=pr.c;if(!Cr||!wr){if(!Er||!kr)return Er?(pr.s=-lr,pr):new sr(kr?Tr:NaN);if(!Er[0]||!kr[0])return kr[0]?(pr.s=-lr,pr):new sr(Er[0]?Tr:Vt==3?-0:0)}if(Cr=ze(Cr),wr=ze(wr),Er=Er.slice(),xr=Cr-wr){for((Ar=xr<0)?(xr=-xr,Sr=Er):(wr=Cr,Sr=kr),Sr.reverse(),lr=xr;lr--;Sr.push(0));Sr.reverse()}else for(yr=(Ar=(xr=Er.length)<(lr=kr.length))?xr:lr,xr=lr=0;lr<yr;lr++)if(Er[lr]!=kr[lr]){Ar=Er[lr]<kr[lr];break}if(Ar&&(Sr=Er,Er=kr,kr=Sr,pr.s=-pr.s),lr=(yr=kr.length)-(cr=Er.length),lr>0)for(;lr--;Er[cr++]=0);for(lr=p-1;yr>xr;){if(Er[--yr]<kr[yr]){for(cr=yr;cr&&!Er[--cr];Er[cr]=lr);--Er[cr],Er[yr]+=p}Er[yr]-=kr[yr]}for(;Er[0]==0;Er.splice(0,1),--wr);return Er[0]?dr(pr,Er,wr):(pr.s=Vt==3?-1:1,pr.c=[pr.e=0],pr)},fr.modulo=fr.mod=function(pr,lr){var cr,yr,Sr=this;return pr=new sr(pr,lr),!Sr.c||!pr.s||pr.c&&!pr.c[0]?new sr(NaN):!pr.c||Sr.c&&!Sr.c[0]?new sr(Sr):(rr==9?(yr=pr.s,pr.s=1,cr=or(Sr,pr,0,3),pr.s=yr,cr.s*=yr):cr=or(Sr,pr,0,rr),pr=Sr.minus(cr.times(pr)),!pr.c[0]&&rr==1&&(pr.s=Sr.s),pr)},fr.multipliedBy=fr.times=function(pr,lr){var cr,yr,Sr,Ar,Tr,xr,Cr,wr,Er,kr,Br,Rr,Ir,Dr,zr,jr=this,Fr=jr.c,mn=(pr=new sr(pr,lr)).c;if(!Fr||!mn||!Fr[0]||!mn[0])return!jr.s||!pr.s||Fr&&!Fr[0]&&!mn||mn&&!mn[0]&&!Fr?pr.c=pr.e=pr.s=null:(pr.s*=jr.s,!Fr||!mn?pr.c=pr.e=null:(pr.c=[0],pr.e=0)),pr;for(yr=ze(jr.e/C)+ze(pr.e/C),pr.s*=jr.s,Cr=Fr.length,kr=mn.length,Cr<kr&&(Ir=Fr,Fr=mn,mn=Ir,Sr=Cr,Cr=kr,kr=Sr),Sr=Cr+kr,Ir=[];Sr--;Ir.push(0));for(Dr=p,zr=le,Sr=kr;--Sr>=0;){for(cr=0,Br=mn[Sr]%zr,Rr=mn[Sr]/zr|0,Tr=Cr,Ar=Sr+Tr;Ar>Sr;)wr=Fr[--Tr]%zr,Er=Fr[Tr]/zr|0,xr=Rr*wr+Er*Br,wr=Br*wr+xr%zr*zr+Ir[Ar]+cr,cr=(wr/Dr|0)+(xr/zr|0)+Rr*Er,Ir[Ar--]=wr%Dr;Ir[Ar]=cr}return cr?++yr:Ir.splice(0,1),dr(pr,Ir,yr)},fr.negated=function(){var pr=new sr(this);return pr.s=-pr.s||null,pr},fr.plus=function(pr,lr){var cr,yr=this,Sr=yr.s;if(pr=new sr(pr,lr),lr=pr.s,!Sr||!lr)return new sr(NaN);if(Sr!=lr)return pr.s=-lr,yr.minus(pr);var Ar=yr.e/C,Tr=pr.e/C,xr=yr.c,Cr=pr.c;if(!Ar||!Tr){if(!xr||!Cr)return new sr(Sr/0);if(!xr[0]||!Cr[0])return Cr[0]?pr:new sr(xr[0]?yr:Sr*0)}if(Ar=ze(Ar),Tr=ze(Tr),xr=xr.slice(),Sr=Ar-Tr){for(Sr>0?(Tr=Ar,cr=Cr):(Sr=-Sr,cr=xr),cr.reverse();Sr--;cr.push(0));cr.reverse()}for(Sr=xr.length,lr=Cr.length,Sr-lr<0&&(cr=Cr,Cr=xr,xr=cr,lr=Sr),Sr=0;lr;)Sr=(xr[--lr]=xr[lr]+Cr[lr]+Sr)/p|0,xr[lr]=p===xr[lr]?0:xr[lr]%p;return Sr&&(xr=[Sr].concat(xr),++Tr),dr(pr,xr,Tr)},fr.precision=fr.sd=function(pr,lr){var cr,yr,Sr,Ar=this;if(pr!=null&&pr!==!!pr)return ct(pr,1,Ee),lr==null?lr=Vt:ct(lr,0,8),gr(new sr(Ar),pr,lr);if(!(cr=Ar.c))return null;if(Sr=cr.length-1,yr=Sr*C+1,Sr=cr[Sr]){for(;Sr%10==0;Sr/=10,yr--);for(Sr=cr[0];Sr>=10;Sr/=10,yr++);}return pr&&Ar.e+1>yr&&(yr=Ar.e+1),yr},fr.shiftedBy=function(pr){return ct(pr,-9007199254740991,B),this.times("1e"+pr)},fr.squareRoot=fr.sqrt=function(){var pr,lr,cr,yr,Sr,Ar=this,Tr=Ar.c,xr=Ar.s,Cr=Ar.e,wr=Lt+4,Er=new sr("0.5");if(xr!==1||!Tr||!Tr[0])return new sr(!xr||xr<0&&(!Tr||Tr[0])?NaN:Tr?Ar:1/0);if(xr=Math.sqrt(+$r(Ar)),xr==0||xr==1/0?(lr=Ze(Tr),(lr.length+Cr)%2==0&&(lr+="0"),xr=Math.sqrt(+lr),Cr=ze((Cr+1)/2)-(Cr<0||Cr%2),xr==1/0?lr="5e"+Cr:(lr=xr.toExponential(),lr=lr.slice(0,lr.indexOf("e")+1)+Cr),cr=new sr(lr)):cr=new sr(xr+""),cr.c[0]){for(Cr=cr.e,xr=Cr+wr,xr<3&&(xr=0);;)if(Sr=cr,cr=Er.times(Sr.plus(or(Ar,Sr,wr,1))),Ze(Sr.c).slice(0,xr)===(lr=Ze(cr.c)).slice(0,xr))if(cr.e<Cr&&--xr,lr=lr.slice(xr-3,xr+1),lr=="9999"||!yr&&lr=="4999"){if(!yr&&(gr(Sr,Sr.e+Lt+2,0),Sr.times(Sr).eq(Ar))){cr=Sr;break}wr+=4,xr+=4,yr=1}else{(!+lr||!+lr.slice(1)&&lr.charAt(0)=="5")&&(gr(cr,cr.e+Lt+2,1),pr=!cr.times(cr).eq(Ar));break}}return gr(cr,cr.e+Lt+1,Vt,pr)},fr.toExponential=function(pr,lr){return pr!=null&&(ct(pr,0,Ee),pr++),vr(this,pr,lr,1)},fr.toFixed=function(pr,lr){return pr!=null&&(ct(pr,0,Ee),pr=pr+this.e+1),vr(this,pr,lr)},fr.toFormat=function(pr,lr,cr){var yr,Sr=this;if(cr==null)pr!=null&&lr&&typeof lr=="object"?(cr=lr,lr=null):pr&&typeof pr=="object"?(cr=pr,pr=lr=null):cr=tr;else if(typeof cr!="object")throw Error(l+"Argument not an object: "+cr);if(yr=Sr.toFixed(pr,lr),Sr.c){var Ar,Tr=yr.split("."),xr=+cr.groupSize,Cr=+cr.secondaryGroupSize,wr=cr.groupSeparator||"",Er=Tr[0],kr=Tr[1],Br=Sr.s<0,Rr=Br?Er.slice(1):Er,Ir=Rr.length;if(Cr&&(Ar=xr,xr=Cr,Cr=Ar,Ir-=Ar),xr>0&&Ir>0){for(Ar=Ir%xr||xr,Er=Rr.substr(0,Ar);Ar<Ir;Ar+=xr)Er+=wr+Rr.substr(Ar,xr);Cr>0&&(Er+=wr+Rr.slice(Ar)),Br&&(Er="-"+Er)}yr=kr?Er+(cr.decimalSeparator||"")+((Cr=+cr.fractionGroupSize)?kr.replace(new RegExp("\\d{"+Cr+"}\\B","g"),"$&"+(cr.fractionGroupSeparator||"")):kr):Er}return(cr.prefix||"")+yr+(cr.suffix||"")},fr.toFraction=function(pr){var lr,cr,yr,Sr,Ar,Tr,xr,Cr,wr,Er,kr,Br,Rr=this,Ir=Rr.c;if(pr!=null&&(xr=new sr(pr),!xr.isInteger()&&(xr.c||xr.s!==1)||xr.lt(ar)))throw Error(l+"Argument "+(xr.isInteger()?"out of range: ":"not an integer: ")+$r(xr));if(!Ir)return new sr(Rr);for(lr=new sr(ar),wr=cr=new sr(ar),yr=Cr=new sr(ar),Br=Ze(Ir),Ar=lr.e=Br.length-Rr.e-1,lr.c[0]=N[(Tr=Ar%C)<0?C+Tr:Tr],pr=!pr||xr.comparedTo(lr)>0?Ar>0?lr:wr:xr,Tr=Et,Et=1/0,xr=new sr(Br),Cr.c[0]=0;Er=or(xr,lr,0,1),Sr=cr.plus(Er.times(yr)),Sr.comparedTo(pr)!=1;)cr=yr,yr=Sr,wr=Cr.plus(Er.times(Sr=wr)),Cr=Sr,lr=xr.minus(Er.times(Sr=lr)),xr=Sr;return Sr=or(pr.minus(cr),yr,0,1),Cr=Cr.plus(Sr.times(wr)),cr=cr.plus(Sr.times(yr)),Cr.s=wr.s=Rr.s,Ar=Ar*2,kr=or(wr,yr,Ar,Vt).minus(Rr).abs().comparedTo(or(Cr,cr,Ar,Vt).minus(Rr).abs())<1?[wr,yr]:[Cr,cr],Et=Tr,kr},fr.toNumber=function(){return+$r(this)},fr.toPrecision=function(pr,lr){return pr!=null&&ct(pr,1,Ee),vr(this,pr,lr,2)},fr.toString=function(pr){var lr,cr=this,yr=cr.s,Sr=cr.e;return Sr===null?yr?(lr="Infinity",yr<0&&(lr="-"+lr)):lr="NaN":(pr==null?lr=Sr<=tt||Sr>=Ye?qt(Ze(cr.c),Sr):nr(Ze(cr.c),Sr,"0"):pr===10&&Ft?(cr=gr(new sr(cr),Lt+Sr+1,Vt),lr=nr(Ze(cr.c),cr.e,"0")):(ct(pr,2,Ut.length,"Base"),lr=ur(nr(Ze(cr.c),Sr,"0"),10,pr,yr,!0)),yr<0&&cr.c[0]&&(lr="-"+lr)),lr},fr.valueOf=fr.toJSON=function(){return $r(this)},fr._isBigNumber=!0,ir!=null&&sr.set(ir),sr}function ze(ir){var or=ir|0;return ir>0||ir===or?or:or-1}function Ze(ir){for(var or,ur,hr=1,fr=ir.length,ar=ir[0]+"";hr<fr;){for(or=ir[hr++]+"",ur=C-or.length;ur--;or="0"+or);ar+=or}for(fr=ar.length;ar.charCodeAt(--fr)===48;);return ar.slice(0,fr+1||1)}function Qe(ir,or){var ur,hr,fr=ir.c,ar=or.c,Lt=ir.s,Vt=or.s,tt=ir.e,Ye=or.e;if(!Lt||!Vt)return null;if(ur=fr&&!fr[0],hr=ar&&!ar[0],ur||hr)return ur?hr?0:-Vt:Lt;if(Lt!=Vt)return Lt;if(ur=Lt<0,hr=tt==Ye,!fr||!ar)return hr?0:!fr^ur?1:-1;if(!hr)return tt>Ye^ur?1:-1;for(Vt=(tt=fr.length)<(Ye=ar.length)?tt:Ye,Lt=0;Lt<Vt;Lt++)if(fr[Lt]!=ar[Lt])return fr[Lt]>ar[Lt]^ur?1:-1;return tt==Ye?0:tt>Ye^ur?1:-1}function ct(ir,or,ur,hr){if(ir<or||ir>ur||ir!==a(ir))throw Error(l+(hr||"Argument")+(typeof ir=="number"?ir<or||ir>ur?" out of range: ":" not an integer: ":" not a primitive number: ")+String(ir))}function wt(ir){var or=ir.c.length-1;return ze(ir.e/C)==or&&ir.c[or]%2!=0}function qt(ir,or){return(ir.length>1?ir.charAt(0)+"."+ir.slice(1):ir)+(or<0?"e":"e+")+or}function nr(ir,or,ur){var hr,fr;if(or<0){for(fr=ur+".";++or;fr+=ur);ir=fr+ir}else if(hr=ir.length,++or>hr){for(fr=ur,or-=hr;--or;fr+=ur);ir+=fr}else or<hr&&(ir=ir.slice(0,or)+"."+ir.slice(or));return ir}n=Ue(),n.default=n.BigNumber=n,t.exports?t.exports=n:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=n)})(commonjsGlobal)})(bignumber);var bignumberExports=bignumber.exports;/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */const globalState$1=requireGlobalState(),validating=requireValidating(),parsing$1=parsing$2,BigNumber$1=bignumberExports,powers={trillion:Math.pow(10,12),billion:Math.pow(10,9),million:Math.pow(10,6),thousand:Math.pow(10,3)},defaultOptions={totalLength:0,characteristic:0,forceAverage:!1,average:!1,mantissa:-1,optionalMantissa:!0,thousandSeparated:!1,spaceSeparated:!1,negative:"sign",forceSign:!1,roundingFunction:Math.round,spaceSeparatedAbbreviation:!1},{binarySuffixes,decimalSuffixes}=globalState$1.currentBytes(),bytes={general:{scale:1024,suffixes:decimalSuffixes},binary:{scale:1024,suffixes:binarySuffixes},decimal:{scale:1e3,suffixes:decimalSuffixes}};function format$2(t,e={},n){if(typeof e=="string"&&(e=parsing$1.parseFormat(e)),!validating.validateFormat(e))return"ERROR: invalid format";let s=e.prefix||"",a=e.postfix||"",l=formatNumbro(t,e,n);return l=insertPrefix(l,s),l=insertPostfix(l,a),l}function formatNumbro(t,e,n){switch(e.output){case"currency":return e=formatOrDefault(e,globalState$1.currentCurrencyDefaultFormat()),formatCurrency$2(t,e,globalState$1);case"percent":return e=formatOrDefault(e,globalState$1.currentPercentageDefaultFormat()),formatPercentage$1(t,e,globalState$1,n);case"byte":return e=formatOrDefault(e,globalState$1.currentByteDefaultFormat()),formatByte(t,e,globalState$1,n);case"time":return e=formatOrDefault(e,globalState$1.currentTimeDefaultFormat()),formatTime(t);case"ordinal":return e=formatOrDefault(e,globalState$1.currentOrdinalDefaultFormat()),formatOrdinal(t,e,globalState$1);case"number":default:return formatNumber$1({instance:t,providedFormat:e})}}function getDecimalByteUnit(t){let e=bytes.decimal;return getFormatByteUnits(t._value,e.suffixes,e.scale).suffix}function getBinaryByteUnit(t){let e=bytes.binary;return getFormatByteUnits(t._value,e.suffixes,e.scale).suffix}function getByteUnit(t){let e=bytes.general;return getFormatByteUnits(t._value,e.suffixes,e.scale).suffix}function getFormatByteUnits(t,e,n){let i=e[0],s=Math.abs(t);if(s>=n){for(let a=1;a<e.length;++a){let l=Math.pow(n,a),f=Math.pow(n,a+1);if(s>=l&&s<f){i=e[a],t=t/l;break}}i===e[0]&&(t=t/Math.pow(n,e.length-1),i=e[e.length-1])}return{value:t,suffix:i}}function formatByte(t,e,n,i){let s=e.base||"binary",a=Object.assign({},defaultOptions,e);const{binarySuffixes:l,decimalSuffixes:f}=n.currentBytes();let C={general:{scale:1024,suffixes:f||decimalSuffixes,marker:"bd"},binary:{scale:1024,suffixes:l||binarySuffixes,marker:"b"},decimal:{scale:1e3,suffixes:f||decimalSuffixes,marker:"d"}}[s],{value:B,suffix:N}=getFormatByteUnits(t._value,C.suffixes,C.scale);return`${formatNumber$1({instance:i(B),providedFormat:e,state:n,defaults:n.currentByteDefaultFormat()})}${a.spaceSeparated?" ":""}${N}`}function formatOrdinal(t,e,n){let i=n.currentOrdinal(),s=Object.assign({},defaultOptions,e),a=formatNumber$1({instance:t,providedFormat:e,state:n}),l=i(t._value);return`${a}${s.spaceSeparated?" ":""}${l}`}function formatTime(t){let e=Math.floor(t._value/60/60),n=Math.floor((t._value-e*60*60)/60),i=Math.round(t._value-e*60*60-n*60);return`${e}:${n<10?"0":""}${n}:${i<10?"0":""}${i}`}function formatPercentage$1(t,e,n,i){let s=e.prefixSymbol,a=formatNumber$1({instance:i(t._value*100),providedFormat:e,state:n}),l=Object.assign({},defaultOptions,e);return s?`%${l.spaceSeparated?" ":""}${a}`:`${a}${l.spaceSeparated?" ":""}%`}function formatCurrency$2(t,e,n){const i=n.currentCurrency();let s=Object.assign({},e),a=Object.assign({},defaultOptions,s),l,f="",p=!!a.totalLength||!!a.forceAverage||a.average,C=s.currencyPosition||i.position,B=s.currencySymbol||i.symbol;const N=a.spaceSeparatedCurrency!==void 0?a.spaceSeparatedCurrency:a.spaceSeparated;s.lowPrecision===void 0&&(s.lowPrecision=!1),N&&(f=" "),C==="infix"&&(l=f+B+f);let le=formatNumber$1({instance:t,providedFormat:s,state:n,decimalSeparator:l});return C==="prefix"&&(t._value<0&&a.negative==="sign"?le=`-${f}${B}${le.slice(1)}`:t._value>0&&a.forceSign?le=`+${f}${B}${le.slice(1)}`:le=B+f+le),(!C||C==="postfix")&&(f=!a.spaceSeparatedAbbreviation&&p?"":f,le=le+f+B),le}function computeAverage({value:t,forceAverage:e,lowPrecision:n=!0,abbreviations:i,spaceSeparated:s=!1,totalLength:a=0,roundingFunction:l=Math.round}){let f="",p=Math.abs(t),C=-1;if(e&&i[e]&&powers[e]?(f=i[e],t=t/powers[e]):p>=powers.trillion||n&&l(p/powers.trillion)===1?(f=i.trillion,t=t/powers.trillion):p<powers.trillion&&p>=powers.billion||n&&l(p/powers.billion)===1?(f=i.billion,t=t/powers.billion):p<powers.billion&&p>=powers.million||n&&l(p/powers.million)===1?(f=i.million,t=t/powers.million):(p<powers.million&&p>=powers.thousand||n&&l(p/powers.thousand)===1)&&(f=i.thousand,t=t/powers.thousand),f&&(f=(s?" ":"")+f),a){let N=t<0,le=t.toString().split(".")[0],Ee=N?le.length-1:le.length;C=Math.max(a-Ee,0)}return{value:t,abbreviation:f,mantissaPrecision:C}}function computeExponential({value:t,characteristicPrecision:e}){let[n,i]=t.toExponential().split("e"),s=+n;if(!e)return{value:s,abbreviation:`e${i}`};let a=1;return a<e&&(s=s*Math.pow(10,e-a),i=+i-(e-a),i=i>=0?`+${i}`:i),{value:s,abbreviation:`e${i}`}}function zeroes(t){let e="";for(let n=0;n<t;n++)e+="0";return e}function toFixedLarge(t,e){let n=t.toString(),[i,s]=n.split("e"),[a,l=""]=i.split(".");if(+s>0)n=a+l+zeroes(s-l.length);else{let f=".";+a<0?f=`-0${f}`:f=`0${f}`;let p=(zeroes(-s-1)+Math.abs(a)+l).substr(0,e);p.length<e&&(p+=zeroes(e-p.length)),n=f+p}return+s>0&&e>0&&(n+=`.${zeroes(e)}`),n}function toFixed(t,e,n=Math.round){return t.toString().indexOf("e")!==-1?toFixedLarge(t,e):new BigNumber$1(n(+`${t}e+${e}`)/Math.pow(10,e)).toFixed(e)}function setMantissaPrecision(t,e,n,i,s,a){if(i===-1)return t;let l=toFixed(e,i,a),[f,p=""]=l.toString().split(".");if(p.match(/^0+$/)&&(n||s))return f;let C=p.match(/0+$/);return s&&C?`${f}.${p.toString().slice(0,C.index)}`:l.toString()}function setCharacteristicPrecision(t,e,n,i){let s=t,[a,l]=s.toString().split(".");if(a.match(/^-?0$/)&&n)return l?`${a.replace("0","")}.${l}`:a.replace("0","");const f=e<0&&a.indexOf("-")===0;if(f&&(a=a.slice(1),s=s.slice(1)),a.length<i){let p=i-a.length;for(let C=0;C<p;C++)s=`0${s}`}return f&&(s=`-${s}`),s.toString()}function indexesOfGroupSpaces(t,e){let n=[],i=0;for(let s=t;s>0;s--)i===e&&(n.unshift(s),i=0),i++;return n}function replaceDelimiters(t,e,n,i,s){let a=i.currentDelimiters(),l=a.thousands;s=s||a.decimal;let f=a.thousandsSize||3,p=t.toString(),C=p.split(".")[0],B=p.split(".")[1];const N=e<0&&C.indexOf("-")===0;return n&&(N&&(C=C.slice(1)),indexesOfGroupSpaces(C.length,f).forEach((Ee,Ue)=>{C=C.slice(0,Ee+Ue)+l+C.slice(Ee+Ue)}),N&&(C=`-${C}`)),B?p=C+s+B:p=C,p}function insertAbbreviation(t,e){return t+e}function insertSign(t,e,n){return e===0?t:+t==0?t.replace("-",""):e>0?`+${t}`:n==="sign"?t:`(${t.replace("-","")})`}function insertPrefix(t,e){return e+t}function insertPostfix(t,e){return t+e}function formatNumber$1({instance:t,providedFormat:e,state:n=globalState$1,decimalSeparator:i,defaults:s=n.currentDefaults()}){let a=t._value;if(a===0&&n.hasZeroFormat())return n.getZeroFormat();if(!isFinite(a))return a.toString();let l=Object.assign({},defaultOptions,s,e),f=l.totalLength,p=f?0:l.characteristic,C=l.optionalCharacteristic,B=l.forceAverage,N=l.lowPrecision,le=!!f||!!B||l.average,Ee=f?-1:le&&e.mantissa===void 0?0:l.mantissa,Ue=f?!1:e.optionalMantissa===void 0?Ee===-1:l.optionalMantissa,ze=l.trimMantissa,Ze=l.thousandSeparated,Qe=l.spaceSeparated,ct=l.negative,wt=l.forceSign,qt=l.exponential,nr=l.roundingFunction,ir="";if(le){let ur=computeAverage({value:a,forceAverage:B,lowPrecision:N,abbreviations:n.currentAbbreviations(),spaceSeparated:Qe,roundingFunction:nr,totalLength:f});a=ur.value,ir+=ur.abbreviation,f&&(Ee=ur.mantissaPrecision)}if(qt){let ur=computeExponential({value:a,characteristicPrecision:p});a=ur.value,ir=ur.abbreviation+ir}let or=setMantissaPrecision(a.toString(),a,Ue,Ee,ze,nr);return or=setCharacteristicPrecision(or,a,C,p),or=replaceDelimiters(or,a,Ze,n,i),(le||qt)&&(or=insertAbbreviation(or,ir)),(wt||a<0)&&(or=insertSign(or,a,ct)),or}function formatOrDefault(t,e){if(!t)return e;let n=Object.keys(t);return n.length===1&&n[0]==="output"?e:t}var formatting=t=>({format:(...e)=>format$2(...e,t),getByteUnit:(...e)=>getByteUnit(...e,t),getBinaryByteUnit:(...e)=>getBinaryByteUnit(...e,t),getDecimalByteUnit:(...e)=>getDecimalByteUnit(...e,t),formatOrDefault});/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */const BigNumber=bignumberExports;function add$1(t,e,n){let i=new BigNumber(t._value),s=e;return n.isNumbro(e)&&(s=e._value),s=new BigNumber(s),t._value=i.plus(s).toNumber(),t}function subtract(t,e,n){let i=new BigNumber(t._value),s=e;return n.isNumbro(e)&&(s=e._value),s=new BigNumber(s),t._value=i.minus(s).toNumber(),t}function multiply(t,e,n){let i=new BigNumber(t._value),s=e;return n.isNumbro(e)&&(s=e._value),s=new BigNumber(s),t._value=i.times(s).toNumber(),t}function divide$1(t,e,n){let i=new BigNumber(t._value),s=e;return n.isNumbro(e)&&(s=e._value),s=new BigNumber(s),t._value=i.dividedBy(s).toNumber(),t}function set(t,e,n){let i=e;return n.isNumbro(e)&&(i=e._value),t._value=i,t}function difference(t,e,n){let i=n(t._value);return subtract(i,e,n),Math.abs(i._value)}var manipulating=t=>({add:(e,n)=>add$1(e,n,t),subtract:(e,n)=>subtract(e,n,t),multiply:(e,n)=>multiply(e,n,t),divide:(e,n)=>divide$1(e,n,t),set:(e,n)=>set(e,n,t),difference:(e,n)=>difference(e,n,t),BigNumber});/*!
 * Copyright (c) 2017 Benjamin Van Ryseghem<benjamin@vanryseghem.com>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */const VERSION$1="2.5.0",globalState=requireGlobalState(),validator$1=requireValidating(),loader=loading(numbro),unformatter=requireUnformatting();let formatter=formatting(numbro),manipulate=manipulating(numbro);const parsing=parsing$2;class Numbro{constructor(e){this._value=e}clone(){return numbro(this._value)}format(e={}){return formatter.format(this,e)}formatCurrency(e){return typeof e=="string"&&(e=parsing.parseFormat(e)),e=formatter.formatOrDefault(e,globalState.currentCurrencyDefaultFormat()),e.output="currency",formatter.format(this,e)}formatTime(e={}){return e.output="time",formatter.format(this,e)}binaryByteUnits(){return formatter.getBinaryByteUnit(this)}decimalByteUnits(){return formatter.getDecimalByteUnit(this)}byteUnits(){return formatter.getByteUnit(this)}difference(e){return manipulate.difference(this,e)}add(e){return manipulate.add(this,e)}subtract(e){return manipulate.subtract(this,e)}multiply(e){return manipulate.multiply(this,e)}divide(e){return manipulate.divide(this,e)}set(e){return manipulate.set(this,normalizeInput$1(e))}value(){return this._value}valueOf(){return this._value}}function normalizeInput$1(t){let e=t;return numbro.isNumbro(t)?e=t._value:typeof t=="string"?e=numbro.unformat(t):isNaN(t)&&(e=NaN),e}function numbro(t){return new Numbro(normalizeInput$1(t))}numbro.version=VERSION$1;numbro.isNumbro=function(t){return t instanceof Numbro};numbro.language=globalState.currentLanguage;numbro.registerLanguage=globalState.registerLanguage;numbro.setLanguage=globalState.setLanguage;numbro.languages=globalState.languages;numbro.languageData=globalState.languageData;numbro.zeroFormat=globalState.setZeroFormat;numbro.defaultFormat=globalState.currentDefaults;numbro.setDefaults=globalState.setDefaults;numbro.defaultCurrencyFormat=globalState.currentCurrencyDefaultFormat;numbro.validate=validator$1.validate;numbro.loadLanguagesInNode=loader.loadLanguagesInNode;numbro.unformat=unformatter.unformat;numbro.BigNumber=manipulate.BigNumber;var numbro_1=numbro,numbro$1=getDefaultExportFromCjs(numbro_1);const d$2=t=>Decimal$1.isDecimal(t)?t:new Decimal$1(typeof t>"u"||t==="undefined"||!t?0:t),addComma=t=>{try{return d$2(t).gt(1)?numbro$1(t).format({thousandSeparated:!0,exponential:!1}):t}catch{return t}},addCommaWithNoMantissa=t=>{try{return d$2(t).gt(1)?numbro$1(t).format({thousandSeparated:!0,mantissa:0}):t}catch{return t}},fixRounding=(t,e)=>d$2(t).toDP(e,Decimal$1.ROUND_HALF_DOWN).toString(),fixNumber=(t,e,n)=>d$2(t).toDP(e,n).toString(),fixDown=(t,e)=>{try{return d$2(t).toDP(e,Decimal$1.ROUND_DOWN).toString()}catch{return String(t)}};function getGtZeroIndex(t){let e=0;if(t)for(;e<t.length;){if(d$2(t[e]).gt(0))return e;e++}return 0}dayjs.extend(relativeTime);dayjs.extend(duration);const formatCurrency$1=(t,e,n,i)=>{try{if(t===void 0||t==="--")return"$--";const s=formatNumberWithDown(t,e,!0).toString();if(d$2(s).equals(0))return"$0";const a=s.startsWith("-");let l=i?s:addComma(s).toString();return l.includes("e")&&(l=i?s:addCommaWithNoMantissa(s).toString()),!n&&Number(s)<Math.pow(10,-e)?a?`-$${l.slice(1)}`:`<$${Math.pow(10,-e).toFixed(e)}`:a?`-$${l.slice(1)}`:`$${l}`}catch(s){return console.log(" ~ formatCurrency ~ error:",s),"$--"}},formatPercentage=(t,e=2,n=!1,i=!1)=>{if(t===void 0)return"--";if(d$2(t).equals(0))return i?`< ${Math.pow(10,-e)}%`:"0%";if(!n){if(Number(t)>=0&&Number(t)<=Math.pow(10,-e))return`<${Math.pow(10,-e).toFixed(e)}%`;if(Number(t)<0&&Number(t)*-1<=Math.pow(10,-e))return` < -${Math.pow(10,-e).toFixed(e)}%`}return`${fixDown(t,e)}%`},formatNumber=(t,e,n,i=Decimal$1.ROUND_HALF_DOWN,s=!1)=>{if(t==="")return"";if(t!=="0"&&!t||(t=convertScientificToDecimal(t.toString(),e),d$2(t).equals(0)))return"0";if(e!==void 0){const B=fixNumber(t,e,i);if(d$2(B).equals(0)){if(s)return B}else return n?B:addComma(B)}const a=d$2(t).toString(),l=a.split("."),f=l[0],p=l[1];let C;if(d$2(f).gt(0))!p||d$2(f.length).gte(9)?C=fixNumber(a,0,i):d$2(f.length).gte(4)?C=fixNumber(a,2,i):C=fixNumber(a,4,i);else{fixNumber(a,6,i);const B=getGtZeroIndex(p);if(B<6)C=fixNumber(a,B+6,i);else if(B>=6&&B<=38)C=fixNumber(a,B+4,i);else return"0"}return n||d$2(f).lt(1)?C:addComma(C)},formatNumberWithDown=(t,e,n,i=!1)=>formatNumber(t,e,n,Decimal$1.ROUND_DOWN,i),formatTickPrice=(t,e,n)=>{const s=d$2(t).toString().split("."),a=s[0],l=s[1];if(a==="0"&&e){const f=getGtZeroIndex(l),p=e-f,C=p<=0?Number(f):e;return p<=2?formatNumber(t,C+2,n,Decimal$1.ROUND_DOWN):formatNumber(t,e,n,Decimal$1.ROUND_DOWN)}else return formatNumber(t,e,n,Decimal$1.ROUND_DOWN)},formatNumberWithThreshold=(t,e,n,i)=>{const s=formatNumberWithLtMinPrecision(t,e);return s==`< ${Math.pow(10,-2)}`&&n?String(formatNumberWithLtMinPrecision(t,n)):String(s)},formatPrice=(t,e,n)=>{if(t==="")return"";if(t!=="0"&&!t||d$2(t).equals(0))return"0";if(e!==void 0){const p=fixDown(t,e);if(!d$2(p).equals(0))return String(n?p:addComma(p))}const i=d$2(t).toString(),s=i.split("."),a=s[0],l=s[1];let f;if(d$2(a).gt(0))d$2(a).gt(9)?f=fixDown(i,2):f=fixDown(i,3);else{const p=getGtZeroIndex(l);f=fixDown(i,p+3)}return n||d$2(a).lt(1)?String(f):String(addComma(f))},formatNumberWithLtMinPrecision=(t,e=2,n)=>t===""?"":t!=="0"&&!t||d$2(t).equals(0)?"0":d$2(t).lt(Math.pow(10,-e))?`< ${Math.pow(10,-e)}`:formatNumber(t,e,n),formatNumberWithKMB=(t,e=2,n=!1)=>{var a,l,f,p,C,B;const i=d$2(t||"0");let s;return n?i.gte(Math.pow(10,9))?s=addComma(fixDown((p=i.div(Math.pow(10,9)))==null?void 0:p.toString(),e))+"B":i.gte(Math.pow(10,6))?s=addComma(fixDown((C=i.div(Math.pow(10,6)))==null?void 0:C.toString(),e))+"M":i.gte(d$2(1e3))?s=addComma(fixDown((B=i.div(1e3))==null?void 0:B.toString(),e))+"K":s=addComma(fixDown(Number(t),e)):i.gte(Math.pow(10,9))?s=addComma(fixRounding((a=i.div(Math.pow(10,9)))==null?void 0:a.toString(),e))+"B":i.gte(Math.pow(10,6))?s=addComma(fixRounding((l=i.div(Math.pow(10,6)))==null?void 0:l.toString(),e))+"M":i.gte(d$2(1e3))?s=addComma(fixRounding((f=i.div(1e3))==null?void 0:f.toString(),e))+"K":s=addComma(fixRounding(Number(t),e)),s},formatCurrencyWithKMB=(t,e=2)=>{var s;const n=d$2(t||"0");let i;return n.gte(Math.pow(10,9))?i=formatCurrency$1(fixRounding((s=n.div(Math.pow(10,9)))==null?void 0:s.toString(),e),e)+"B":i=formatCurrency$1(t,e),i},formatDateTime=t=>t?dayjs(t).format("YYYY-MM-DD HH:mm:ss"):"",fixDEAdd=(t,e,n=!0)=>{if(`${t}`=="0")return!parseFloat(e)||!n?"0":"0.".padEnd(e+2,"0");if(!t)return"--";const i=parseFloat(t),s=t.toString(),a=i<0;let l=s;if(s.toLowerCase().includes("e")){const f=s.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/);if(!f)return t.toString();const p=f[1]||"0",C=f[2]||"",B=f[3],N=parseInt(f[4],10);let le="",Ee=C.substring(N)||"";if(Ee&&(Ee=`.${Ee}`),B!=="-"){for(let Ue=0;Ue<N;Ue++)le+=C[Ue]||"0";l=p+le+Ee}else{let Ue="0";for(let ze=0;ze<N;ze++)le=(p[p.length-ze-1]||"0")+le;p.length>N&&(Ue=p.substring(0,p.length-N)),l=`${Ue}.${le}${C}`}}if(e&&n){let f=`${l.split(".")[0]}.`;const p=l.split(".")[1]||"";for(let C=0;C<e;C++)f+=p[C]||"0";l=f}return`${a?"-":""}${l}`};function formatCurrencyInput(t,e=6){try{const n=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${e}})?).*$`);return t.replace(n,"$1")}catch(n){return console.log(" ~ formatCurrencyInput ~ error:",n),""}}const inputValue="abc123.456def",formattedValue=formatCurrencyInput(inputValue,2);console.log(formattedValue);function fromDecimalsAmountFix(t,e){const n=fromDecimalsAmount(t,e);return convertScientificToDecimal(n.toString(),Number(e))}function convertScientificToDecimal(t,e=9){if(t===void 0)return"";const n=t==null?void 0:t.toLowerCase();if(n.includes("e")){if(n.includes("+"))return fixDEAdd(n,e);const[i,s]=n.split("e");let a=i;const l=Math.abs(parseInt(s,10));let f="",p=a.length;if(i.includes(".")){const[C,B]=i.split(".");a=C+B,p=C.length}for(let C=0;C<l-p;C++)f+="0";return`0.${f}${a}`.slice(0,e+2)}return t}const removePercentSign=t=>{if(t!=null&&t.includes("%")){const e=t.split("%");return d$2(e==null?void 0:e[0]).equals("0")?"0":d$2(e==null?void 0:e[0]).div(100).toString()}return t};function symbolDataDisplayProcessing(t,e="$",n=2,i=!1){if(t==="--")return"--";const s=d$2(10).pow(-n).toString();return d$2(t).gt(0)&&d$2(t).lt(s)?e==="%"?`<${s}${e}`:`<${e}${s}`:e==="%"?i&&d$2(t).gt(1e6)?`>1,000,000${e}`:`${formatNumberWithDown(t,n)}${e}`:`${e}${formatNumberWithDown(t,n)}`}function cancelBubble(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()}const addressAbridge=(t,e="")=>e=="long"?t&&t.length>40?t.substring(0,40)+"...":t&&t.length<40?t:"":t?t.substring(0,6)+"..."+t.substring(t.length-4):"",sleepTime=async t=>new Promise(e=>{setTimeout(()=>{e(1)},t)});function singleFormat(t){return t.toString().length===1?"0"+t:t}function getYMD(t){const e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return e+"/"+singleFormat(n)+"/"+singleFormat(i)}function getMD(t){const e=t.getMonth()+1,n=t.getDate();return singleFormat(e)+"/"+singleFormat(n)}function getMDY(t){const e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate();return singleFormat(n)+"/"+singleFormat(i)+"/"+new String(e).slice(2,4)}function getHMS(t){const e=t.getHours(),n=t.getMinutes(),i=t.getSeconds();return singleFormat(e)+":"+singleFormat(n)+":"+singleFormat(i)}function getHM(t){const e=t.getHours(),n=t.getMinutes();return singleFormat(e)+":"+singleFormat(n)}function getTimeZone(t){const n=new Date(t),i=n.getTimezoneOffset()+480;return n.setMinutes(n.getMinutes()+i),n}const timeFormat=(t,e)=>{if(t){const n=getTimeZone(t);switch(e){case"HMS":return getHMS(n);case"MDY":return getMDY(n);case"YMD":return getYMD(n);case"MD":return getMD(n);case"HM":return getHM(n)}}},timeFormatUTC=(t,e)=>{if(t){const n=new Date(t);if(!e)return getYMDUTC(n)+" "+getHMSUTC(n);switch(e){case"HMS":return getHMSUTC(n);case"YMD":return getYMDUTC(n);case"MD":return getMDUTC(n);case"HM":return getHMUTC(n);case"YMDHM":return getYMDUTC(n)+" "+getHMUTC(n);default:return"--"}}},utcTimeFormatted=t=>{if(!t)return;const e=new Date(t),i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getUTCMonth()],s=e.getUTCDate(),a=e.getUTCFullYear(),l=e.getUTCHours().toString().padStart(2,"0"),f=e.getUTCMinutes().toString().padStart(2,"0");return`${i} ${s}, ${a} ${l}:${f}`};function getYMDUTC(t){const e=t.getUTCFullYear(),n=t.getUTCMonth()+1,i=t.getUTCDate();return e+"-"+singleFormat(n)+"-"+singleFormat(i)}function getMDUTC(t){const e=t.getUTCMonth()+1,n=t.getUTCDate();return singleFormat(e)+"/"+singleFormat(n)}function getHMSUTC(t){const e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds();return singleFormat(e)+":"+singleFormat(n)+":"+singleFormat(i)}function getHMUTC(t){const e=t.getUTCHours(),n=t.getUTCMinutes();return singleFormat(e)+":"+singleFormat(n)}const getTimeDifferenceString=t=>{const e=Math.floor(t/1e3),n=Math.floor(new Date().getTime()/1e3),i=60,s=60*i,a=24*s,l=30*a,f=365*a,p=n-e;if(p<i)return"recently";if(p<s){const C=Math.floor(p/i);return C==1?`${C} minute ago`:`${C} minutes ago`}else if(p<a){const C=Math.floor(p/s);return C==1?`${C} hour ago`:`${C} hours ago`}else if(p<l){const C=Math.floor(p/a);return C==1?`${C} day ago`:`${C} days ago`}else if(p<f){const C=Math.floor(p/l);return C==1?`${C} mouth ago`:`${C} mouths ago`}else{const C=Math.floor(p/f);return C==1?`${C} year ago`:`${C} years ago`}};function amountToBN(t,e){if(e===void 0)return new BN(0);if(t===""||d$2(t).equals(0))return new BN(0);const n=d$2(t).mul(Math.pow(10,e)).toString();if(d$2(n).gte(1))return new BN(n);throw Error("amountToBN value lt 1")}function bnToAmount(t,e){return e===void 0?"":d$2(t==null?void 0:t.toString()).div(Math.pow(10,e)).toString()}function parseOwnerBalanceChanges(t,e,n=!1){var f;const i=t.balanceChanges,s=(f=t.effects)==null?void 0:f.gasUsed,a={};let l="0";return s&&(l=d$2(s.computationCost).add(s.storageCost).sub(s.storageRebate).mul(-1).toFixed(0)),i&&i.forEach(p=>{const C=extractStructTagFromType$2(p.coinType).full_address;if(p.owner.AddressOwner===e){const B=CoinAssist$1.isSuiCoin(C);let N=p.amount;B&&(N=n?N:d$2(N).sub(l).toFixed(0));const le={coinType:C,amount:N};a[C]=le}}),a}function getBalanceChanges(t,e){if(e){const n=t[extractStructTagFromType$2(e.coin_type).full_address];if(console.log(" ~ common.ts:289 ~ getBalanceChanges ~ extractStructTagFromType(coinInfo.coin_type).full_address:",extractStructTagFromType$2(e.coin_type).full_address),console.log(" ~ common.ts:291 ~ getBalanceChanges ~ obj:",n),n)return fromDecimalsAmountFix(d$2(n.amount).abs().toFixed(0),e.decimals)}}function coinMetadataToCoinInfo(t,e){return{id:t.id||void 0,logo_url:t.iconUrl||void 0,coin_type:e,decimals:t.decimals,description:t.description,name:t.name,symbol:t.symbol}}function parsePositionIdFromEvent(t){var a,l;let e,n;const i=(a=t.events)==null?void 0:a.find(f=>f.type.includes("pool::OpenPositionEvent"));i&&(e=i.parsedJson.position);const s=(l=t.events)==null?void 0:l.find(f=>f.type.includes("pool::DepositEvent"));return s&&(n=s.parsedJson.wrapped_position_id),{posId:e,farmsPosId:n}}const isHexColor=t=>/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/i.test(t),isRgbColor=t=>/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/.test(t),isRgbaColor=t=>/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0(\.\d+)?|1(\.0+)?)\s*\)$/.test(t),isColorValue=t=>isHexColor(t)||isRgbColor(t)||isRgbaColor(t),isAvailableObject=t=>t===null||typeof t!="object"||Array.isArray(t)?!1:Object.keys(t).length>0,removeComma=t=>(t+"").replace(/,/g,""),formatTimestamp=t=>{const e=new Date(t),n=e.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),i=e.getUTCDate(),s=e.getUTCFullYear();let a=e.getUTCHours();const l=String(e.getUTCMinutes()).padStart(2,"0"),f=a>=12?"PM":"AM";return a=a%12||12,`${n} ${i}, ${s} ${a}:${l} ${f}`};function base64ToUint8Array(t){const e=Buffer$1.from(t,"base64").toString("binary"),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}const VERIFIED_TOKEN_MAP_KEY="verifiedTokenMap",COLLECT_TOKEN_LIST="collectTokenList",USER_COLLECT_TOKEN_LIST="userCollectTokenList",IMPORT_TOKEN_LIST="importTokenList",LIQUIDITY_TRUST_TOKEN_LIST="liquidityTrustTokenList",IS_WATCH_LIST="isWatchList",IS_ALL_POOLS="isAllPools",IS_INCENTIVIZED_ONLY="isIncentivizedOnly",POOL_FAVORITE_LIST="poolFavoriteList",NOTIFI_SIGNATURE="notifiSignature",textEllipses=(t,e=10)=>t?(t==null?void 0:t.length)>e&&d$2(e).gt(0)?`${t.slice(0,e)}...`:t:"";var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty$9.call(t,symToStringTag$1),n=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var i=!0}catch{}var s=nativeObjectToString$1.call(t);return i&&(e?t[symToStringTag$1]=n:delete t[symToStringTag$1]),s}var objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag$1="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag$1}function arrayMap(t,e){for(var n=-1,i=t==null?0:t.length,s=Array(i);++n<i;)s[n]=e(t[n],n,t);return s}var isArray$1=Array.isArray,symbolProto$1=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString(t){if(typeof t=="string")return t;if(isArray$1(t))return arrayMap(t,baseToString)+"";if(isSymbol(t))return symbolToString?symbolToString.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function isObject$1(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function identity(t){return t}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(t){if(!isObject$1(t))return!1;var e=baseGetTag(t);return e==funcTag$1||e==genTag||e==asyncTag||e==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var t=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function isMasked(t){return!!maskSrcKey&&maskSrcKey in t}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(t){if(t!=null){try{return funcToString$1.call(t)}catch{}try{return t+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$8=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$8).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(t){if(!isObject$1(t)||isMasked(t))return!1;var e=isFunction$1(t)?reIsNative:reIsHostCtor;return e.test(toSource(t))}function getValue(t,e){return t==null?void 0:t[e]}function getNative(t,e){var n=getValue(t,e);return baseIsNative(n)?n:void 0}var WeakMap$1=getNative(root,"WeakMap");function noop$2(){}function baseFindIndex(t,e,n,i){for(var s=t.length,a=n+-1;++a<s;)if(e(t[a],a,t))return a;return-1}function baseIsNaN(t){return t!==t}function strictIndexOf(t,e,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}function baseIndexOf(t,e,n){return e===e?strictIndexOf(t,e,n):baseFindIndex(t,baseIsNaN,n)}function arrayIncludes(t,e){var n=t==null?0:t.length;return!!n&&baseIndexOf(t,e,0)>-1}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(t,e){var n=typeof t;return e=e??MAX_SAFE_INTEGER$2,!!e&&(n=="number"||n!="symbol"&&reIsUint.test(t))&&t>-1&&t%1==0&&t<e}function eq(t,e){return t===e||t!==t&&e!==e}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MAX_SAFE_INTEGER$1}function isArrayLike(t){return t!=null&&isLength(t.length)&&!isFunction$1(t)}var objectProto$8=Object.prototype;function isPrototype(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||objectProto$8;return t===n}function baseTimes(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var argsTag$2="[object Arguments]";function baseIsArguments(t){return isObjectLike(t)&&baseGetTag(t)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(t){return isObjectLike(t)&&hasOwnProperty$7.call(t,"callee")&&!propertyIsEnumerable$1.call(t,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(t){return isObjectLike(t)&&isLength(t.length)&&!!typedArrayTags[baseGetTag(t)]}function baseUnary(t){return function(e){return t(e)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var t=freeModule&&freeModule.require&&freeModule.require("util").types;return t||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function arrayLikeKeys(t,e){var n=isArray$1(t),i=!n&&isArguments$1(t),s=!n&&!i&&isBuffer$1(t),a=!n&&!i&&!s&&isTypedArray$2(t),l=n||i||s||a,f=l?baseTimes(t.length,String):[],p=f.length;for(var C in t)(e||hasOwnProperty$6.call(t,C))&&!(l&&(C=="length"||s&&(C=="offset"||C=="parent")||a&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||isIndex(C,p)))&&f.push(C);return f}function overArg(t,e){return function(n){return t(e(n))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function baseKeys(t){if(!isPrototype(t))return nativeKeys(t);var e=[];for(var n in Object(t))hasOwnProperty$5.call(t,n)&&n!="constructor"&&e.push(n);return e}function keys(t){return isArrayLike(t)?arrayLikeKeys(t):baseKeys(t)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(t,e){if(isArray$1(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||isSymbol(t)?!0:reIsPlainProp.test(t)||!reIsDeepProp.test(t)||e!=null&&t in Object(e)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function hashGet(t){var e=this.__data__;if(nativeCreate){var n=e[t];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$4.call(e,t)?e[t]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function hashHas(t){var e=this.__data__;return nativeCreate?e[t]!==void 0:hasOwnProperty$3.call(e,t)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nativeCreate&&e===void 0?HASH_UNDEFINED$1:e,this}function Hash(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(t,e){for(var n=t.length;n--;)if(eq(t[n][0],e))return n;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(t){var e=this.__data__,n=assocIndexOf(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():splice.call(e,n,1),--this.size,!0}function listCacheGet(t){var e=this.__data__,n=assocIndexOf(e,t);return n<0?void 0:e[n][1]}function listCacheHas(t){return assocIndexOf(this.__data__,t)>-1}function listCacheSet(t,e){var n=this.__data__,i=assocIndexOf(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function ListCache(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function getMapData(t,e){var n=t.__data__;return isKeyable(e)?n[typeof e=="string"?"string":"hash"]:n.map}function mapCacheDelete(t){var e=getMapData(this,t).delete(t);return this.size-=e?1:0,e}function mapCacheGet(t){return getMapData(this,t).get(t)}function mapCacheHas(t){return getMapData(this,t).has(t)}function mapCacheSet(t,e){var n=getMapData(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function MapCache(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);var n=function(){var i=arguments,s=e?e.apply(this,i):i[0],a=n.cache;if(a.has(s))return a.get(s);var l=t.apply(this,i);return n.cache=a.set(s,l)||a,l};return n.cache=new(memoize.Cache||MapCache),n}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(t){var e=memoize(t,function(i){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),i}),n=e.cache;return e}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(rePropName,function(n,i,s,a){e.push(s?a.replace(reEscapeChar,"$1"):i||n)}),e});function toString$1(t){return t==null?"":baseToString(t)}function castPath(t,e){return isArray$1(t)?t:isKey(t,e)?[t]:stringToPath(toString$1(t))}function toKey(t){if(typeof t=="string"||isSymbol(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function baseGet(t,e){e=castPath(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[toKey(e[n++])];return n&&n==i?t:void 0}function get$1(t,e,n){var i=t==null?void 0:baseGet(t,e);return i===void 0?n:i}function arrayPush(t,e){for(var n=-1,i=e.length,s=t.length;++n<i;)t[s+n]=e[n];return t}function arrayReduce(t,e,n,i){for(var s=-1,a=t==null?0:t.length;++s<a;)n=e(n,t[s],s,t);return n}function basePropertyOf(t){return function(e){return t==null?void 0:t[e]}}var deburredLetters={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},deburrLetter=basePropertyOf(deburredLetters),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(t){return t=toString$1(t),t&&t.replace(reLatin,deburrLetter).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(t){return t.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(t){return reHasUnicodeWord.test(t)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="[']",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(t){return t.match(reUnicodeWord)||[]}function words(t,e,n){return t=toString$1(t),e=e,e===void 0?hasUnicodeWord(t)?unicodeWords(t):asciiWords(t):t.match(e)||[]}var rsApos="[']",reApos=RegExp(rsApos,"g");function createCompounder(t){return function(e){return arrayReduce(words(deburr(e).replace(reApos,"")),t,"")}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function stackGet(t){return this.__data__.get(t)}function stackHas(t){return this.__data__.has(t)}var LARGE_ARRAY_SIZE$1=200;function stackSet(t,e){var n=this.__data__;if(n instanceof ListCache){var i=n.__data__;if(!Map$1||i.length<LARGE_ARRAY_SIZE$1-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new MapCache(i)}return n.set(t,e),this.size=n.size,this}function Stack(t){var e=this.__data__=new ListCache(t);this.size=e.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(t,e){for(var n=-1,i=t==null?0:t.length,s=0,a=[];++n<i;){var l=t[n];e(l,n,t)&&(a[s++]=l)}return a}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(t){return t==null?[]:(t=Object(t),arrayFilter(nativeGetSymbols(t),function(e){return propertyIsEnumerable.call(t,e)}))}:stubArray;function baseGetAllKeys(t,e,n){var i=e(t);return isArray$1(t)?i:arrayPush(i,n(t))}function getAllKeys(t){return baseGetAllKeys(t,keys,getSymbols)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(t){var e=baseGetTag(t),n=e==objectTag$1?t.constructor:void 0,i=n?toSource(n):"";if(i)switch(i){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return e});var Uint8Array$1=root.Uint8Array,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(t){return this.__data__.set(t,HASH_UNDEFINED),this}function setCacheHas(t){return this.__data__.has(t)}function SetCache(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new MapCache;++e<n;)this.add(t[e])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function cacheHas(t,e){return t.has(e)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(t,e,n,i,s,a){var l=n&COMPARE_PARTIAL_FLAG$5,f=t.length,p=e.length;if(f!=p&&!(l&&p>f))return!1;var C=a.get(t),B=a.get(e);if(C&&B)return C==e&&B==t;var N=-1,le=!0,Ee=n&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(a.set(t,e),a.set(e,t);++N<f;){var Ue=t[N],ze=e[N];if(i)var Ze=l?i(ze,Ue,N,e,t,a):i(Ue,ze,N,t,e,a);if(Ze!==void 0){if(Ze)continue;le=!1;break}if(Ee){if(!arraySome(e,function(Qe,ct){if(!cacheHas(Ee,ct)&&(Ue===Qe||s(Ue,Qe,n,i,a)))return Ee.push(ct)})){le=!1;break}}else if(!(Ue===ze||s(Ue,ze,n,i,a))){le=!1;break}}return a.delete(t),a.delete(e),le}function mapToArray(t){var e=-1,n=Array(t.size);return t.forEach(function(i,s){n[++e]=[s,i]}),n}function setToArray(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(t,e,n,i,s,a,l){switch(n){case dataViewTag:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case arrayBufferTag:return!(t.byteLength!=e.byteLength||!a(new Uint8Array$1(t),new Uint8Array$1(e)));case boolTag:case dateTag:case numberTag:return eq(+t,+e);case errorTag:return t.name==e.name&&t.message==e.message;case regexpTag:case stringTag:return t==e+"";case mapTag:var f=mapToArray;case setTag:var p=i&COMPARE_PARTIAL_FLAG$4;if(f||(f=setToArray),t.size!=e.size&&!p)return!1;var C=l.get(t);if(C)return C==e;i|=COMPARE_UNORDERED_FLAG$2,l.set(t,e);var B=equalArrays(f(t),f(e),i,s,a,l);return l.delete(t),B;case symbolTag:if(symbolValueOf)return symbolValueOf.call(t)==symbolValueOf.call(e)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(t,e,n,i,s,a){var l=n&COMPARE_PARTIAL_FLAG$3,f=getAllKeys(t),p=f.length,C=getAllKeys(e),B=C.length;if(p!=B&&!l)return!1;for(var N=p;N--;){var le=f[N];if(!(l?le in e:hasOwnProperty$2.call(e,le)))return!1}var Ee=a.get(t),Ue=a.get(e);if(Ee&&Ue)return Ee==e&&Ue==t;var ze=!0;a.set(t,e),a.set(e,t);for(var Ze=l;++N<p;){le=f[N];var Qe=t[le],ct=e[le];if(i)var wt=l?i(ct,Qe,le,e,t,a):i(Qe,ct,le,t,e,a);if(!(wt===void 0?Qe===ct||s(Qe,ct,n,i,a):wt)){ze=!1;break}Ze||(Ze=le=="constructor")}if(ze&&!Ze){var qt=t.constructor,nr=e.constructor;qt!=nr&&"constructor"in t&&"constructor"in e&&!(typeof qt=="function"&&qt instanceof qt&&typeof nr=="function"&&nr instanceof nr)&&(ze=!1)}return a.delete(t),a.delete(e),ze}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(t,e,n,i,s,a){var l=isArray$1(t),f=isArray$1(e),p=l?arrayTag:getTag(t),C=f?arrayTag:getTag(e);p=p==argsTag?objectTag:p,C=C==argsTag?objectTag:C;var B=p==objectTag,N=C==objectTag,le=p==C;if(le&&isBuffer$1(t)){if(!isBuffer$1(e))return!1;l=!0,B=!1}if(le&&!B)return a||(a=new Stack),l||isTypedArray$2(t)?equalArrays(t,e,n,i,s,a):equalByTag(t,e,p,n,i,s,a);if(!(n&COMPARE_PARTIAL_FLAG$2)){var Ee=B&&hasOwnProperty$1.call(t,"__wrapped__"),Ue=N&&hasOwnProperty$1.call(e,"__wrapped__");if(Ee||Ue){var ze=Ee?t.value():t,Ze=Ue?e.value():e;return a||(a=new Stack),s(ze,Ze,n,i,a)}}return le?(a||(a=new Stack),equalObjects(t,e,n,i,s,a)):!1}function baseIsEqual(t,e,n,i,s){return t===e?!0:t==null||e==null||!isObjectLike(t)&&!isObjectLike(e)?t!==t&&e!==e:baseIsEqualDeep(t,e,n,i,baseIsEqual,s)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(t,e,n,i){var s=n.length,a=s;if(t==null)return!a;for(t=Object(t);s--;){var l=n[s];if(l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++s<a;){l=n[s];var f=l[0],p=t[f],C=l[1];if(l[2]){if(p===void 0&&!(f in t))return!1}else{var B=new Stack,N;if(!(N===void 0?baseIsEqual(C,p,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,i,B):N))return!1}}return!0}function isStrictComparable(t){return t===t&&!isObject$1(t)}function getMatchData(t){for(var e=keys(t),n=e.length;n--;){var i=e[n],s=t[i];e[n]=[i,s,isStrictComparable(s)]}return e}function matchesStrictComparable(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function baseMatches(t){var e=getMatchData(t);return e.length==1&&e[0][2]?matchesStrictComparable(e[0][0],e[0][1]):function(n){return n===t||baseIsMatch(n,t,e)}}function baseHasIn(t,e){return t!=null&&e in Object(t)}function hasPath(t,e,n){e=castPath(e,t);for(var i=-1,s=e.length,a=!1;++i<s;){var l=toKey(e[i]);if(!(a=t!=null&&n(t,l)))break;t=t[l]}return a||++i!=s?a:(s=t==null?0:t.length,!!s&&isLength(s)&&isIndex(l,s)&&(isArray$1(t)||isArguments$1(t)))}function hasIn(t,e){return t!=null&&hasPath(t,e,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(t,e){return isKey(t)&&isStrictComparable(e)?matchesStrictComparable(toKey(t),e):function(n){var i=get$1(n,t);return i===void 0&&i===e?hasIn(n,t):baseIsEqual(e,i,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(t){return function(e){return e==null?void 0:e[t]}}function basePropertyDeep(t){return function(e){return baseGet(e,t)}}function property(t){return isKey(t)?baseProperty(toKey(t)):basePropertyDeep(t)}function baseIteratee(t){return typeof t=="function"?t:t==null?identity:typeof t=="object"?isArray$1(t)?baseMatchesProperty(t[0],t[1]):baseMatches(t):property(t)}function createBaseFor(t){return function(e,n,i){for(var s=-1,a=Object(e),l=i(e),f=l.length;f--;){var p=l[++s];if(n(a[p],p,a)===!1)break}return e}}var baseFor=createBaseFor();function baseForOwn(t,e){return t&&baseFor(t,e,keys)}function createBaseEach(t,e){return function(n,i){if(n==null)return n;if(!isArrayLike(n))return t(n,i);for(var s=n.length,a=-1,l=Object(n);++a<s&&i(l[a],a,l)!==!1;);return n}}var baseEach=createBaseEach(baseForOwn);function baseMap(t,e){var n=-1,i=isArrayLike(t)?Array(t.length):[];return baseEach(t,function(s,a,l){i[++n]=e(s,a,l)}),i}function baseSortBy(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function compareAscending(t,e){if(t!==e){var n=t!==void 0,i=t===null,s=t===t,a=isSymbol(t),l=e!==void 0,f=e===null,p=e===e,C=isSymbol(e);if(!f&&!C&&!a&&t>e||a&&l&&p&&!f&&!C||i&&l&&p||!n&&p||!s)return 1;if(!i&&!a&&!C&&t<e||C&&n&&s&&!i&&!a||f&&n&&s||!l&&s||!p)return-1}return 0}function compareMultiple(t,e,n){for(var i=-1,s=t.criteria,a=e.criteria,l=s.length,f=n.length;++i<l;){var p=compareAscending(s[i],a[i]);if(p){if(i>=f)return p;var C=n[i];return p*(C=="desc"?-1:1)}}return t.index-e.index}function baseOrderBy(t,e,n){e.length?e=arrayMap(e,function(a){return isArray$1(a)?function(l){return baseGet(l,a.length===1?a[0]:a)}:a}):e=[identity];var i=-1;e=arrayMap(e,baseUnary(baseIteratee));var s=baseMap(t,function(a,l,f){var p=arrayMap(e,function(C){return C(a)});return{criteria:p,index:++i,value:a}});return baseSortBy(s,function(a,l){return compareMultiple(a,l,n)})}function orderBy(t,e,n,i){return t==null?[]:(isArray$1(e)||(e=e==null?[]:[e]),n=n,isArray$1(n)||(n=n==null?[]:[n]),baseOrderBy(t,e,n))}var snakeCase=createCompounder(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),INFINITY=1/0,createSet=Set$1&&1/setToArray(new Set$1([,-0]))[1]==INFINITY?function(t){return new Set$1(t)}:noop$2,LARGE_ARRAY_SIZE=200;function baseUniq(t,e,n){var i=-1,s=arrayIncludes,a=t.length,l=!0,f=[],p=f;if(a>=LARGE_ARRAY_SIZE){var C=createSet(t);if(C)return setToArray(C);l=!1,s=cacheHas,p=new SetCache}else p=f;e:for(;++i<a;){var B=t[i],N=B;if(B=B!==0?B:0,l&&N===N){for(var le=p.length;le--;)if(p[le]===N)continue e;f.push(B)}else s(p,N,n)||(p!==f&&p.push(N),f.push(B))}return f}function uniq(t){return t&&t.length?baseUniq(t):[]}const formatToken=t=>{const e={};for(const n in t)if(typeof t[n]!="object"||Array.isArray(t[n])||t[n]===null)e[snakeCase(n)]=t[n];else for(const i in t[n])e[snakeCase(i)]=t[n][i];return e},Us=class Us extends LocalForageService{constructor(){super("CetusSite","variousTokens")}static getInstance(){return Us.instance||(Us.instance=new Us),Us.instance}};Or(Us,"instance");let VariousTokensTableImpl=Us;const Cs=class Cs{static async setItem(e,n){return Cs.table.setItem(e,n)}static async getItem(e){return Cs.table.getItem(e)}static async getAllItems(){return Cs.table.getAllItems()}static async removeItem(e){return Cs.table.removeItem(e)}static async clear(){return Cs.table.clear()}};Or(Cs,"table",VariousTokensTableImpl.getInstance());let VariousTokensTable=Cs;function Icon(t){const{xlinkHref:e,fontSize:n,svgW:i,svgH:s,boxW:a,boxH:l,variant:f,svgHover:p,svgFill:C,onClick:B,iconCursor:N="pointer",isActive:le,activeColor:Ee,activeHoverColor:Ue,...ze}=t,[Ze,Qe]=reactExports.useState(!1),{isApp:ct}=useWindowWidth(),wt=nr=>{ct&&Qe(!0),B&&B(nr)},qt=reactExports.useMemo(()=>{const nr={base:{box:{w:a||n||"20px",h:l||n||"20px",bg:"none",_hover:!Ze&&!ct?{svg:{fill:le&&Ue?Ue:p||"text_caption"}}:void 0},svg:{fill:le&&Ee?isColorValue(Ee)?Ee:`var(--chakra-colors-${Ee||"text_paragraph"})`:C&&isColorValue(C)?C:`var(--chakra-colors-${C||"text_paragraph"})`,width:i||n||"20px",height:s||n||"20px"}},gray:{box:{w:l||n||"20px",h:l||n||"20px",bg:"none",_hover:!Ze&&!ct?{svg:{fill:"text_caption"}}:void 0},svg:{fill:"var(--chakra-colors-text_paragraph)",width:i||n||"20px",height:s||n||"20px"}},primary:{box:{w:l||n||"20px",h:l||n||"20px",bg:"none",_hover:!Ze&&!ct?{svg:{fill:"primary"}}:void 0},svg:{fill:"var(--chakra-colors-text_paragraph)",width:i||n||"20px",height:s||n||"20px"}},warning:{box:{w:l||n||"20px",h:l||n||"20px",bg:"none",_hover:!Ze&&!ct?{svg:{fill:"primary_yellow"}}:void 0},svg:{fill:"var(--chakra-colors-primary_yellow)",width:i||n||"20px",height:s||n||"20px"}},error:{box:{w:l||n||"20px",h:l||n||"20px",bg:"none",_hover:!Ze&&!ct?{svg:{fill:"primary_red"}}:void 0},svg:{fill:"var(--chakra-colors-primary_red)",width:i||n||"20px",height:s||n||"20px"}},solid:{box:{bg:"checked_bg",w:a||n||"24px",h:l||n||"24px",borderRadius:"4px",_hover:!Ze&&!ct?{svg:{fill:le&&Ue?Ue:p||"text_caption"}}:void 0},svg:{fill:le&&Ee?isColorValue(Ee)?Ee:`var(--chakra-colors-${Ee||"text_paragraph"})`:C&&isColorValue(C)?C:`var(--chakra-colors-${C||"text_paragraph"})`,width:i||n||"16px",height:s||n||"16px"}},rectangle:{box:{bg:"card_bg",w:a||n||"28px",h:l||n||"20px",borderRadius:"8px",_hover:!Ze&&!ct?{svg:{fill:"primary"}}:void 0},svg:{fill:"var(--chakra-colors-primary)",width:i||n||"16px",height:s||n||"16px"}},round:{box:{bg:"card_bg",w:a||n||"20px",h:l||n||"20px",borderRadius:"50%",border:"1px",borderStyle:"solid",borderColor:"var(--chakra-colors-border)",background:"var(--chakra-colors-bg_secondary)",_hover:!Ze&&!ct?{svg:{fill:"text_caption"}}:void 0},svg:{fill:"var(--chakra-colors-text_paragraph)",width:i||n||"16px",height:s||n||"16px"}}};return f?nr[f]:nr.base},[f,i,s,a,l,n,C,p,le,Ee,Ue]);return jsxRuntimeExports.jsx(Center,{cursor:N,...qt.box,...ze,onClick:wt,children:jsxRuntimeExports.jsx("svg",{"aria-hidden":"true",...qt.svg,children:jsxRuntimeExports.jsx("use",{xlinkHref:e})})})}function Block({children:t,...e}){return jsxRuntimeExports.jsx(Box,{as:"div",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_secondary",p:"20px 16px",...e,children:t})}var depsEqual=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=[]),isEqual(t,e)},createDeepCompareEffect=function(t){return function(e,n){var i=reactExports.useRef(),s=reactExports.useRef(0);(n===void 0||!depsEqual(n,i.current))&&(s.current+=1),i.current=n,t(e,[s.current])}};const useDeepCompareEffect=createDeepCompareEffect(reactExports.useEffect);function CetusTooltip({children:t,tooltip:e,placement:n,maxW:i="320px",bodyPadding:s="8px",showTooltip:a=!0}){const{isApp:l}=useWindowWidth();return jsxRuntimeExports.jsxs(Popover,{isLazy:!0,trigger:l?"click":"hover",placement:n,autoFocus:!1,returnFocusOnClose:!1,gutter:4,children:[jsxRuntimeExports.jsx(PopoverTrigger,{children:jsxRuntimeExports.jsx(Box,{as:"button",children:t})}),a&&jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsx(PopoverContent,{w:"fit-content",maxW:i,children:jsxRuntimeExports.jsx(PopoverBody,{p:s,fontSize:"12px",w:"fit-content",children:e})})})]})}const store$b=(t,e)=>({collectList:[],collectObj:{},setCollectList:n=>{t(()=>({collectList:n,collectObj:Object.fromEntries(n.map(i=>[i.coin_type,i]))}))},filterTokenLoading:!1,setFilterTokenLoading:n=>{t(()=>({filterTokenLoading:n}))},filterTokenList:[],setFilterTokenList:n=>{t(()=>({filterTokenList:n}))},importTokenList:[],setImportTokenList:n=>{t(()=>({importTokenList:n}))},liquidityTrustTokenList:[],setLiquidityTrustTokenList:n=>{t(()=>({liquidityTrustTokenList:n}))},isShowImportBtn:!1,setShowImportBtn:n=>{t(()=>({isShowImportBtn:n}))},trustedListLabel:[],setTrustedListLabel:n=>{t(()=>({trustedListLabel:n}))},tokenModalOpacity:1,setTokenModalOpacity:n=>{t(()=>({tokenModalOpacity:n}))},userCollectList:[],userCollectObj:{},setUserCollectList:n=>{t(()=>({userCollectList:n,userCollectObj:Object.fromEntries(n.map(i=>[i.coin_type,i]))}))}}),useTokenSelectStore=create(persist(store$b,{name:"useTokenSelectStore",partialize:t=>{const{importTokenList:e,liquidityTrustTokenList:n}=t;return{importTokenList:e,liquidityTrustTokenList:n}}})),APP_ENV="mainnet",VAULT_FILTER=!0;function getQueryParam(t){const e=new URLSearchParams(window.location.search);return window.location.host==="app.cetus.zone"?"":e.get(t)}let apiUrl="";try{apiUrl=getQueryParam("apiUrl")||""}catch(t){console.log(" ~ error:",t),apiUrl=""}const baseConfigMainnet={fullRpcUrl:"https://fullnode.mainnet.sui.io",simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"}},clmmConfigMainnet={...baseConfigMainnet,cetus_config:{package_id:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",published_at:"0x95b8d278b876cae22206131fb9724f701c9444515813042f54f0a426c9a3bc2f",version:void 0,config:{coin_list_id:"0x8cbc11d9e10140db3d230f50b4d30e9b721201c0083615441707ffec1ef77b23",launchpad_pools_id:"0x1098fac992eab3a0ab7acf15bb654fc1cf29b5a6142c4ef1058e6c408dd15115",clmm_pools_id:"0x15b6a27dd9ae03eb455aba03b39e29aad74abd3757b8e18c0755651b2ae5b71e",admin_cap_id:"0x39d78781750e193ce35c45ff32c6c0c3f2941fa3ddaf8595c90c555589ddb113",global_config_id:"0x0408fa4e4a4c03cc0de8f23d0c2bbfe8913d178713c9a271ed4080973fe42d8f",coin_list_handle:"0x49136005e90e28c4695419ed4194cc240603f1ea8eb84e62275eaff088a71063",launchpad_pools_handle:"0x5e194a8efcf653830daf85a85b52e3ae8f65dc39481d54b2382acda25068375c",clmm_pools_handle:"0x37f60eb2d9d227949b95da8fea810db3c32d1e1fa8ed87434fc51664f87d83cb"}},clmm_pool:{package_id:"0x1eabed72c53feb3805120a081dc15963c204dc8d091542592abaf7a35689b2fb",published_at:"0xc6faf3703b0e8ba9ed06b7851134bbbe7565eb35ff823fd78432baa4cbeaa12e",version:0,config:{pools_id:"0xf699e7f2276f5c9a75944b37a0c5b5d9ddfd2471bf6242483b03ab2887d198d0",global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",admin_cap_id:"",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"}},integrate:{package_id:"0x996c4d9480708fb8b92aa7acf819fb0497b5ec8e65ba06601cae2fb6db3312c3",published_at:"0x2d8c2e0fc6dd25b0214b3fa747e0fd27fd54608142cd2e4f64c1cd350cc4add4",version:void 0,config:void 0},deepbook:{package_id:"",published_at:"",version:void 0,config:void 0},deepbook_endpoint_v2:{package_id:"",published_at:"",version:void 0,config:void 0},aggregatorUrl:`${apiUrl||"https://api-sui.cetus.zone"}/router_v2`},burnConfigMainnet={...baseConfigMainnet,burn:{package_id:"0x12d73de9a6bc3cb658ec9dc0fe7de2662be1cea5c76c092fcc3606048cdbac27",published_at:"0xb977b00649d3ab8950bcbbafb01fcf32e2e7718eb3133eff2e48c0cef04b1495",manager_id:"0x1d94aa32518d0cb00f9de6ed60d450c9a2090761f326752ffad06b2e9404f845",clmm_global_config:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",clmm_global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b",burn_pool_handle:"0xc9aacf74bd7cc8da8820ae28ca4473b7e01c87be19bc35bf81c9c7311e1b299e"}},peripheryConfigMainnet={...baseConfigMainnet,env:"mainnet",xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",config:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"}},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0x585381670c3d7c1f78caeb6c803f449442659743f4047a01b942da08bbfa19f6",config:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"}},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",config:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}},token_faucet:{package_id:"",published_at:""},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},launchpad:{package_id:"",published_at:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:""}},ido:{package_id:"",published_at:"",config:{pools_id:"",admin_cap_id:"",package_version_id:""}},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",config:{master_manger_id:"",master_liquidity_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},vaults:{package_id:"",published_at:"",config:{admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:"",haedal:{package_id:"",published_at:"",version:1,config:{staking_id:"",coin_type:""}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:""}},aftermath:{package_id:"",published_at:"",version:1,config:{staked_sui_vault:"",referral_vault:"",safe:"",validator_address:"",coin_type:""}}}}},MainnetTokens={SUI:{id:"0x9258181f5ceac8dbffb7030890243caed69a9599d2886d957a9cb7656af3bdb3",coin_type:"0x2::sui::SUI",decimals:9,description:"",name:"Sui",symbol:"SUI",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",is_verified:!0,extensions:{rank:"880"}},CETUS:{id:"0x4c0dce55eff2db5419bbd2d239d1aa22b4a400c01bbb648b058a9883989025da",coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",decimals:9,description:"",name:"Cetus Token",symbol:"CETUS",logo_url:"https://uxcdefo3r2uemooidt2kk2stykakvwd2m6nasg5lhbfaxemm4i3a.arweave.net/pcQyFduOqEY5yBz0pWpTwoCq2HpnmgkbqzhKC5GM4jY",is_verified:!0},xCETUS:{coin_type:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606::xcetus::XCETUS",decimals:9,description:"",name:"Cetus Escrowed Token",symbol:"xCETUS",logo_url:"https://7rgiihm5sisgewirofazpjddkpvmlwphumcg5lulriu6okgf5krq.arweave.net/_EyEHZ2SJGJZEXFBl6RjU-rF2eejBG6ui4op5yjF6qM",is_verified:!0},USDC:{id:"0x69b7a7c3c200439c1b5f3b19d7d495d5966d5f08de66c69276152f8db3992ec6",coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",decimals:6,description:"",name:"USDC",symbol:"USDC",logo_url:"https://circle.com/usdc-icon",is_verified:!0,extensions:{rank:"1000"}}},MainnetCreatePoolQuoteTokens=["0x2::sui::SUI","0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","0x375f70cf2ae4c00bf37117d0c85a2c71545e6ee05c4a5c7d282cd66a4504b068::usdt::USDT","0xf16e6b723f242ec745dfd7634ad072c42d5c1d9ac9d62a39c381303eaa57693a::fdusd::FDUSD","0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0xce7ff77a83ea0cb6fd39bd8748e2ec89a3f41e8efdc3f4eb123e0ca37b184db2::buck::BUCK","0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0x83556891f4a0f233ce7b05cfe7f957d4020492a34f5405b2cb9377d060bef4bf::spring_sui::SPRING_SUI","0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN","0xaafb102dd0902f5055cadecd687fb5b71ca82ef0e0285d90afde828ec58ca96b::btc::BTC","0x2053d08c1e2bd02791056171aab0fd12bd7cd7efad2ab8f6b9c8902f14df2ff2::ausd::AUSD","0x356a26eb9e012a68958082340d4c4116e7f55615cf27affcff209cf0ae544f59::wal::WAL"],PACKAGE_VERSION="1.28.0",TARGETED_RPC_VERSION="1.48.0",CODE_TO_ERROR_TYPE={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class SuiHTTPTransportError extends Error{}class JsonRpcError extends SuiHTTPTransportError{constructor(e,n){super(e),this.code=n,this.type=CODE_TO_ERROR_TYPE[n]??"ServerError"}}class SuiHTTPStatusError extends SuiHTTPTransportError{constructor(e,n,i){super(e),this.status=n,this.statusText=i}}var __typeError$4=t=>{throw TypeError(t)},__accessCheck$4=(t,e,n)=>e.has(t)||__typeError$4("Cannot "+n),__privateGet$4=(t,e,n)=>(__accessCheck$4(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$4=(t,e,n)=>e.has(t)?__typeError$4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$4=(t,e,n,i)=>(__accessCheck$4(t,e,"write to private field"),e.set(t,n),n),__privateMethod$2=(t,e,n)=>(__accessCheck$4(t,e,"access private method"),n),__privateWrapper=(t,e,n,i)=>({set _(s){__privateSet$4(t,e,s)},get _(){return __privateGet$4(t,e,i)}}),_requestId$1,_disconnects,_webSocket,_connectionPromise,_subscriptions,_pendingRequests,_WebsocketClient_instances,setupWebSocket_fn,reconnect_fn;function getWebsocketUrl(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const DEFAULT_CLIENT_OPTIONS={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class WebsocketClient{constructor(e,n={}){if(__privateAdd$4(this,_WebsocketClient_instances),__privateAdd$4(this,_requestId$1,0),__privateAdd$4(this,_disconnects,0),__privateAdd$4(this,_webSocket,null),__privateAdd$4(this,_connectionPromise,null),__privateAdd$4(this,_subscriptions,new Set),__privateAdd$4(this,_pendingRequests,new Map),this.endpoint=e,this.options={...DEFAULT_CLIENT_OPTIONS,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=getWebsocketUrl(this.endpoint))}async makeRequest(e,n,i){const s=await __privateMethod$2(this,_WebsocketClient_instances,setupWebSocket_fn).call(this);return new Promise((a,l)=>{__privateSet$4(this,_requestId$1,__privateGet$4(this,_requestId$1)+1),__privateGet$4(this,_pendingRequests).set(__privateGet$4(this,_requestId$1),{resolve:a,reject:l,timeout:setTimeout(()=>{__privateGet$4(this,_pendingRequests).delete(__privateGet$4(this,_requestId$1)),l(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),i==null||i.addEventListener("abort",()=>{__privateGet$4(this,_pendingRequests).delete(__privateGet$4(this,_requestId$1)),l(i.reason)}),s.send(JSON.stringify({jsonrpc:"2.0",id:__privateGet$4(this,_requestId$1),method:e,params:n}))}).then(({error:a,result:l})=>{if(a)throw new JsonRpcError(a.message,a.code);return l})}async subscribe(e){const n=new RpcSubscription(e);return __privateGet$4(this,_subscriptions).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}_requestId$1=new WeakMap;_disconnects=new WeakMap;_webSocket=new WeakMap;_connectionPromise=new WeakMap;_subscriptions=new WeakMap;_pendingRequests=new WeakMap;_WebsocketClient_instances=new WeakSet;setupWebSocket_fn=function(){return __privateGet$4(this,_connectionPromise)?__privateGet$4(this,_connectionPromise):(__privateSet$4(this,_connectionPromise,new Promise(t=>{var e;(e=__privateGet$4(this,_webSocket))==null||e.close(),__privateSet$4(this,_webSocket,new this.options.WebSocketConstructor(this.endpoint)),__privateGet$4(this,_webSocket).addEventListener("open",()=>{__privateSet$4(this,_disconnects,0),t(__privateGet$4(this,_webSocket))}),__privateGet$4(this,_webSocket).addEventListener("close",()=>{__privateWrapper(this,_disconnects)._++,__privateGet$4(this,_disconnects)<=this.options.maxReconnects&&setTimeout(()=>{__privateMethod$2(this,_WebsocketClient_instances,reconnect_fn).call(this)},this.options.reconnectTimeout)}),__privateGet$4(this,_webSocket).addEventListener("message",({data:n})=>{let i;try{i=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in i&&i.id!=null&&__privateGet$4(this,_pendingRequests).has(i.id)){const{resolve:s,timeout:a}=__privateGet$4(this,_pendingRequests).get(i.id);clearTimeout(a),s(i)}else if("params"in i){const{params:s}=i;__privateGet$4(this,_subscriptions).forEach(a=>{a.subscriptionId===s.subscription&&s.subscription===a.subscriptionId&&a.onMessage(s.result)})}})})),__privateGet$4(this,_connectionPromise))};reconnect_fn=async function(){var t;return(t=__privateGet$4(this,_webSocket))==null||t.close(),__privateSet$4(this,_connectionPromise,null),Promise.allSettled([...__privateGet$4(this,_subscriptions)].map(e=>e.subscribe(this)))};class RpcSubscription{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[n]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const n=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=n)}}var __typeError$3=t=>{throw TypeError(t)},__accessCheck$3=(t,e,n)=>e.has(t)||__typeError$3("Cannot "+n),__privateGet$3=(t,e,n)=>(__accessCheck$3(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$3=(t,e,n)=>e.has(t)?__typeError$3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$3=(t,e,n,i)=>(__accessCheck$3(t,e,"write to private field"),e.set(t,n),n),__privateMethod$1=(t,e,n)=>(__accessCheck$3(t,e,"access private method"),n),_requestId,_options,_websocketClient,_SuiHTTPTransport_instances,getWebsocketClient_fn;class SuiHTTPTransport{constructor(e){__privateAdd$3(this,_SuiHTTPTransport_instances),__privateAdd$3(this,_requestId,0),__privateAdd$3(this,_options),__privateAdd$3(this,_websocketClient),__privateSet$3(this,_options,e)}fetch(e,n){const i=__privateGet$3(this,_options).fetch??fetch;if(!i)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return i(e,n)}async request(e){var s,a;__privateSet$3(this,_requestId,__privateGet$3(this,_requestId)+1);const n=await this.fetch(((s=__privateGet$3(this,_options).rpc)==null?void 0:s.url)??__privateGet$3(this,_options).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":PACKAGE_VERSION,"Client-Target-Api-Version":TARGETED_RPC_VERSION,"Client-Request-Method":e.method,...(a=__privateGet$3(this,_options).rpc)==null?void 0:a.headers},body:JSON.stringify({jsonrpc:"2.0",id:__privateGet$3(this,_requestId),method:e.method,params:e.params})});if(!n.ok)throw new SuiHTTPStatusError(`Unexpected status code: ${n.status}`,n.status,n.statusText);const i=await n.json();if("error"in i&&i.error!=null)throw new JsonRpcError(i.error.message,i.error.code);return i.result}async subscribe(e){const n=await __privateMethod$1(this,_SuiHTTPTransport_instances,getWebsocketClient_fn).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{n()})),async()=>!!await n()}}_requestId=new WeakMap;_options=new WeakMap;_websocketClient=new WeakMap;_SuiHTTPTransport_instances=new WeakSet;getWebsocketClient_fn=function(){var t;if(!__privateGet$3(this,_websocketClient)){const e=__privateGet$3(this,_options).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");__privateSet$3(this,_websocketClient,new WebsocketClient(((t=__privateGet$3(this,_options).websocket)==null?void 0:t.url)??__privateGet$3(this,_options).url,{WebSocketConstructor:e,...__privateGet$3(this,_options).websocket}))}return __privateGet$3(this,_websocketClient)};function getFullnodeUrl(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}var __typeError$2=t=>{throw TypeError(t)},__accessCheck$2=(t,e,n)=>e.has(t)||__typeError$2("Cannot "+n),__privateGet$2=(t,e,n)=>(__accessCheck$2(t,e,"read from private field"),e.get(t)),__privateAdd$2=(t,e,n)=>e.has(t)?__typeError$2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$2=(t,e,n,i)=>(__accessCheck$2(t,e,"write to private field"),e.set(t,n),n),_prefix,_cache;const _ClientCache=class _o{constructor({prefix:e,cache:n}={}){__privateAdd$2(this,_prefix),__privateAdd$2(this,_cache),__privateSet$2(this,_prefix,e??[]),__privateSet$2(this,_cache,n??new Map)}read(e,n){const i=[__privateGet$2(this,_prefix),...e].join(":");if(__privateGet$2(this,_cache).has(i))return __privateGet$2(this,_cache).get(i);const s=n();return __privateGet$2(this,_cache).set(i,s),typeof s=="object"&&s!==null&&"then"in s?Promise.resolve(s).then(a=>(__privateGet$2(this,_cache).set(i,a),a)).catch(a=>{throw __privateGet$2(this,_cache).delete(i),a}):s}clear(e){const n=[...__privateGet$2(this,_prefix),...e??[]].join(":");if(!n){__privateGet$2(this,_cache).clear();return}for(const i of __privateGet$2(this,_cache).keys())i.startsWith(n)&&__privateGet$2(this,_cache).delete(i)}scope(e){return new _o({prefix:[...__privateGet$2(this,_prefix),...Array.isArray(e)?e:[e]],cache:__privateGet$2(this,_cache)})}};_prefix=new WeakMap;_cache=new WeakMap;let ClientCache=_ClientCache;class Experimental_BaseClient{constructor({network:e}){this.cache=new ClientCache,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(n=>{if("experimental_asClientExtension"in n){const{name:i,register:s}=n.experimental_asClientExtension();return[i,{value:s(this)}]}return[n.name,{value:n.register(this)}]})))}}const SUI_NS_NAME_REGEX$1=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,SUI_NS_DOMAIN_REGEX$1=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,MAX_SUI_NS_NAME_LENGTH$1=235;function isValidSuiNSName$1(t){return t.length>MAX_SUI_NS_NAME_LENGTH$1?!1:t.includes("@")?SUI_NS_NAME_REGEX$1.test(t):SUI_NS_DOMAIN_REGEX$1.test(t)}function normalizeSuiNSName$1(t,e="at"){const n=t.toLowerCase();let i;if(n.includes("@")){if(!SUI_NS_NAME_REGEX$1.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,a]=n.split("@");i=[...s?s.split("."):[],a]}else{if(!SUI_NS_DOMAIN_REGEX$1.test(n))throw new Error(`Invalid SuiNS name ${t}`);i=n.split(".").slice(0,-1)}return e==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}const NAME_PATTERN$1=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,VERSION_REGEX$1=/^\d+$/,MAX_APP_SIZE$1=64,NAME_SEPARATOR$1="/",isValidNamedPackage$1=t=>{const e=t.split(NAME_SEPARATOR$1);if(e.length<2||e.length>3)return!1;const[n,i,s]=e;return s!==void 0&&!VERSION_REGEX$1.test(s)||!isValidSuiNSName$1(n)?!1:NAME_PATTERN$1.test(i)&&i.length<MAX_APP_SIZE$1},TX_DIGEST_LENGTH$1=32;function isValidTransactionDigest$1(t){try{return fromBase58(t).length===TX_DIGEST_LENGTH$1}catch{return!1}}const SUI_ADDRESS_LENGTH$1=32;function isValidSuiAddress$1(t){return isHex$2(t)&&getHexByteLength$1(t)===SUI_ADDRESS_LENGTH$1}function isValidSuiObjectId$1(t){return isValidSuiAddress$1(t)}function parseTypeTag$1(t){return t.includes("::")?parseStructTag$1(t):t}function parseStructTag$1(t){const[e,n]=t.split("::"),i=isValidNamedPackage$1(e),s=t.slice(e.length+n.length+4),a=s.includes("<")?s.slice(0,s.indexOf("<")):s,l=s.includes("<")?splitGenericParameters(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(f=>parseTypeTag$1(f.trim())):[];return{address:i?e:normalizeSuiAddress$1(e),module:n,name:a,typeParams:l}}function normalizeStructTag$1(t){const{address:e,module:n,name:i,typeParams:s}=typeof t=="string"?parseStructTag$1(t):t,a=(s==null?void 0:s.length)>0?`<${s.map(l=>typeof l=="string"?l:normalizeStructTag$1(l)).join(",")}>`:"";return`${e}::${n}::${i}${a}`}function normalizeSuiAddress$1(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(SUI_ADDRESS_LENGTH$1*2,"0")}`}function normalizeSuiObjectId$1(t,e=!1){return normalizeSuiAddress$1(t,e)}function isHex$2(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function getHexByteLength$1(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const VECTOR_REGEX$1=/^vector<(.+)>$/,STRUCT_REGEX$1=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let TypeTagSerializer$1=class ia{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(VECTOR_REGEX$1);if(i)return{vector:ia.parseFromStr(i[1],n)};const s=e.match(STRUCT_REGEX$1);if(s)return{struct:{address:n?normalizeSuiAddress$1(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:ia.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return splitGenericParameters(e).map(i=>ia.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${ia.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(ia.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}};function unsafe_u64$1(t){return bcs$2.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function optionEnum$1(t){return bcs$2.enum("Option",{None:null,Some:t})}const Address$1=bcs$2.bytes(SUI_ADDRESS_LENGTH$1).transform({validate:t=>{const e=typeof t=="string"?t:toHex$1(t);if(!e||!isValidSuiAddress$1(normalizeSuiAddress$1(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?fromHex(normalizeSuiAddress$1(t)):t,output:t=>normalizeSuiAddress$1(toHex$1(t))}),ObjectDigest$1=bcs$2.vector(bcs$2.u8()).transform({name:"ObjectDigest",input:t=>fromBase58(t),output:t=>toBase58(new Uint8Array(t)),validate:t=>{if(fromBase58(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),SuiObjectRef$1=bcs$2.struct("SuiObjectRef",{objectId:Address$1,version:bcs$2.u64(),digest:ObjectDigest$1}),SharedObjectRef$1=bcs$2.struct("SharedObjectRef",{objectId:Address$1,initialSharedVersion:bcs$2.u64(),mutable:bcs$2.bool()}),ObjectArg$4=bcs$2.enum("ObjectArg",{ImmOrOwnedObject:SuiObjectRef$1,SharedObject:SharedObjectRef$1,Receiving:SuiObjectRef$1}),Owner$1=bcs$2.enum("Owner",{AddressOwner:Address$1,ObjectOwner:Address$1,Shared:bcs$2.struct("Shared",{initialSharedVersion:bcs$2.u64()}),Immutable:null,ConsensusV2:bcs$2.struct("ConsensusV2",{authenticator:bcs$2.enum("Authenticator",{SingleOwner:Address$1}),startVersion:bcs$2.u64()})}),CallArg$3=bcs$2.enum("CallArg",{Pure:bcs$2.struct("Pure",{bytes:bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})}),Object:ObjectArg$4}),InnerTypeTag$1=bcs$2.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:bcs$2.lazy(()=>InnerTypeTag$1),struct:bcs$2.lazy(()=>StructTag$2),u16:null,u32:null,u256:null}),TypeTag$2=InnerTypeTag$1.transform({input:t=>typeof t=="string"?TypeTagSerializer$1.parseFromStr(t,!0):t,output:t=>TypeTagSerializer$1.tagToString(t)}),Argument$3=bcs$2.enum("Argument",{GasCoin:null,Input:bcs$2.u16(),Result:bcs$2.u16(),NestedResult:bcs$2.tuple([bcs$2.u16(),bcs$2.u16()])}),ProgrammableMoveCall$3=bcs$2.struct("ProgrammableMoveCall",{package:Address$1,module:bcs$2.string(),function:bcs$2.string(),typeArguments:bcs$2.vector(TypeTag$2),arguments:bcs$2.vector(Argument$3)}),Command$3=bcs$2.enum("Command",{MoveCall:ProgrammableMoveCall$3,TransferObjects:bcs$2.struct("TransferObjects",{objects:bcs$2.vector(Argument$3),address:Argument$3}),SplitCoins:bcs$2.struct("SplitCoins",{coin:Argument$3,amounts:bcs$2.vector(Argument$3)}),MergeCoins:bcs$2.struct("MergeCoins",{destination:Argument$3,sources:bcs$2.vector(Argument$3)}),Publish:bcs$2.struct("Publish",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$1)}),MakeMoveVec:bcs$2.struct("MakeMoveVec",{type:optionEnum$1(TypeTag$2).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:bcs$2.vector(Argument$3)}),Upgrade:bcs$2.struct("Upgrade",{modules:bcs$2.vector(bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))})),dependencies:bcs$2.vector(Address$1),package:Address$1,ticket:Argument$3})}),ProgrammableTransaction$1=bcs$2.struct("ProgrammableTransaction",{inputs:bcs$2.vector(CallArg$3),commands:bcs$2.vector(Command$3)}),TransactionKind$1=bcs$2.enum("TransactionKind",{ProgrammableTransaction:ProgrammableTransaction$1,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),TransactionExpiration$4=bcs$2.enum("TransactionExpiration",{None:null,Epoch:unsafe_u64$1()}),StructTag$2=bcs$2.struct("StructTag",{address:Address$1,module:bcs$2.string(),name:bcs$2.string(),typeParams:bcs$2.vector(InnerTypeTag$1)}),GasData$3=bcs$2.struct("GasData",{payment:bcs$2.vector(SuiObjectRef$1),owner:Address$1,price:bcs$2.u64(),budget:bcs$2.u64()}),TransactionDataV1$1=bcs$2.struct("TransactionDataV1",{kind:TransactionKind$1,sender:Address$1,gasData:GasData$3,expiration:TransactionExpiration$4}),TransactionData$2=bcs$2.enum("TransactionData",{V1:TransactionDataV1$1}),IntentScope$1=bcs$2.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),IntentVersion$1=bcs$2.enum("IntentVersion",{V0:null}),AppId$1=bcs$2.enum("AppId",{Sui:null}),Intent$1=bcs$2.struct("Intent",{scope:IntentScope$1,version:IntentVersion$1,appId:AppId$1});function IntentMessage$1(t){return bcs$2.struct(`IntentMessage<${t.name}>`,{intent:Intent$1,value:t})}const CompressedSignature$1=bcs$2.enum("CompressedSignature",{ED25519:bcs$2.fixedArray(64,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(64,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(64,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),PublicKey$1=bcs$2.enum("PublicKey",{ED25519:bcs$2.fixedArray(32,bcs$2.u8()),Secp256k1:bcs$2.fixedArray(33,bcs$2.u8()),Secp256r1:bcs$2.fixedArray(33,bcs$2.u8()),ZkLogin:bcs$2.vector(bcs$2.u8())}),MultiSigPkMap$1=bcs$2.struct("MultiSigPkMap",{pubKey:PublicKey$1,weight:bcs$2.u8()}),MultiSigPublicKey$1=bcs$2.struct("MultiSigPublicKey",{pk_map:bcs$2.vector(MultiSigPkMap$1),threshold:bcs$2.u16()}),MultiSig$1=bcs$2.struct("MultiSig",{sigs:bcs$2.vector(CompressedSignature$1),bitmap:bcs$2.u16(),multisig_pk:MultiSigPublicKey$1}),base64String$1=bcs$2.vector(bcs$2.u8()).transform({input:t=>typeof t=="string"?fromBase64(t):t,output:t=>toBase64(new Uint8Array(t))}),SenderSignedTransaction$1=bcs$2.struct("SenderSignedTransaction",{intentMessage:IntentMessage$1(TransactionData$2),txSignatures:bcs$2.vector(base64String$1)}),SenderSignedData$1=bcs$2.vector(SenderSignedTransaction$1,{name:"SenderSignedData"}),PasskeyAuthenticator$1=bcs$2.struct("PasskeyAuthenticator",{authenticatorData:bcs$2.vector(bcs$2.u8()),clientDataJson:bcs$2.string(),userSignature:bcs$2.vector(bcs$2.u8())}),PackageUpgradeError$1=bcs$2.enum("PackageUpgradeError",{UnableToFetchPackage:bcs$2.struct("UnableToFetchPackage",{packageId:Address$1}),NotAPackage:bcs$2.struct("NotAPackage",{objectId:Address$1}),IncompatibleUpgrade:null,DigestDoesNotMatch:bcs$2.struct("DigestDoesNotMatch",{digest:bcs$2.vector(bcs$2.u8())}),UnknownUpgradePolicy:bcs$2.struct("UnknownUpgradePolicy",{policy:bcs$2.u8()}),PackageIDDoesNotMatch:bcs$2.struct("PackageIDDoesNotMatch",{packageId:Address$1,ticketId:Address$1})}),ModuleId$1=bcs$2.struct("ModuleId",{address:Address$1,name:bcs$2.string()}),MoveLocation$1=bcs$2.struct("MoveLocation",{module:ModuleId$1,function:bcs$2.u16(),instruction:bcs$2.u16(),functionName:bcs$2.option(bcs$2.string())}),CommandArgumentError$1=bcs$2.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:bcs$2.struct("IndexOutOfBounds",{idx:bcs$2.u16()}),SecondaryIndexOutOfBounds:bcs$2.struct("SecondaryIndexOutOfBounds",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidResultArity:bcs$2.struct("InvalidResultArity",{resultIdx:bcs$2.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),TypeArgumentError$1=bcs$2.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),ExecutionFailureStatus$1=bcs$2.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:bcs$2.struct("MoveObjectTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),MovePackageTooBig:bcs$2.struct("MovePackageTooBig",{objectSize:bcs$2.u64(),maxObjectSize:bcs$2.u64()}),CircularObjectOwnership:bcs$2.struct("CircularObjectOwnership",{object:Address$1}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:bcs$2.option(MoveLocation$1),MoveAbort:bcs$2.tuple([MoveLocation$1,bcs$2.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:bcs$2.struct("CommandArgumentError",{argIdx:bcs$2.u16(),kind:CommandArgumentError$1}),TypeArgumentError:bcs$2.struct("TypeArgumentError",{argumentIdx:bcs$2.u16(),kind:TypeArgumentError$1}),UnusedValueWithoutDrop:bcs$2.struct("UnusedValueWithoutDrop",{resultIdx:bcs$2.u16(),secondaryIdx:bcs$2.u16()}),InvalidPublicFunctionReturnType:bcs$2.struct("InvalidPublicFunctionReturnType",{idx:bcs$2.u16()}),InvalidTransferObject:null,EffectsTooLarge:bcs$2.struct("EffectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:bcs$2.struct("PackageUpgradeError",{upgradeError:PackageUpgradeError$1}),WrittenObjectsTooLarge:bcs$2.struct("WrittenObjectsTooLarge",{currentSize:bcs$2.u64(),maxSize:bcs$2.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:bcs$2.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:bcs$2.vector(Address$1)}),AddressDeniedForCoin:bcs$2.struct("AddressDeniedForCoin",{address:Address$1,coinType:bcs$2.string()}),CoinTypeGlobalPause:bcs$2.struct("CoinTypeGlobalPause",{coinType:bcs$2.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ExecutionStatus$1=bcs$2.enum("ExecutionStatus",{Success:null,Failed:bcs$2.struct("ExecutionFailed",{error:ExecutionFailureStatus$1,command:bcs$2.option(bcs$2.u64())})}),GasCostSummary$1=bcs$2.struct("GasCostSummary",{computationCost:bcs$2.u64(),storageCost:bcs$2.u64(),storageRebate:bcs$2.u64(),nonRefundableStorageFee:bcs$2.u64()}),TransactionEffectsV1$1=bcs$2.struct("TransactionEffectsV1",{status:ExecutionStatus$1,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$1,modifiedAtVersions:bcs$2.vector(bcs$2.tuple([Address$1,bcs$2.u64()])),sharedObjects:bcs$2.vector(SuiObjectRef$1),transactionDigest:ObjectDigest$1,created:bcs$2.vector(bcs$2.tuple([SuiObjectRef$1,Owner$1])),mutated:bcs$2.vector(bcs$2.tuple([SuiObjectRef$1,Owner$1])),unwrapped:bcs$2.vector(bcs$2.tuple([SuiObjectRef$1,Owner$1])),deleted:bcs$2.vector(SuiObjectRef$1),unwrappedThenDeleted:bcs$2.vector(SuiObjectRef$1),wrapped:bcs$2.vector(SuiObjectRef$1),gasObject:bcs$2.tuple([SuiObjectRef$1,Owner$1]),eventsDigest:bcs$2.option(ObjectDigest$1),dependencies:bcs$2.vector(ObjectDigest$1)}),VersionDigest$1=bcs$2.tuple([bcs$2.u64(),ObjectDigest$1]),ObjectIn$1=bcs$2.enum("ObjectIn",{NotExist:null,Exist:bcs$2.tuple([VersionDigest$1,Owner$1])}),ObjectOut$1=bcs$2.enum("ObjectOut",{NotExist:null,ObjectWrite:bcs$2.tuple([ObjectDigest$1,Owner$1]),PackageWrite:VersionDigest$1}),IDOperation$1=bcs$2.enum("IDOperation",{None:null,Created:null,Deleted:null}),EffectsObjectChange$1=bcs$2.struct("EffectsObjectChange",{inputState:ObjectIn$1,outputState:ObjectOut$1,idOperation:IDOperation$1}),UnchangedSharedKind$1=bcs$2.enum("UnchangedSharedKind",{ReadOnlyRoot:VersionDigest$1,MutateDeleted:bcs$2.u64(),ReadDeleted:bcs$2.u64(),Cancelled:bcs$2.u64(),PerEpochConfig:null}),TransactionEffectsV2$1=bcs$2.struct("TransactionEffectsV2",{status:ExecutionStatus$1,executedEpoch:bcs$2.u64(),gasUsed:GasCostSummary$1,transactionDigest:ObjectDigest$1,gasObjectIndex:bcs$2.option(bcs$2.u32()),eventsDigest:bcs$2.option(ObjectDigest$1),dependencies:bcs$2.vector(ObjectDigest$1),lamportVersion:bcs$2.u64(),changedObjects:bcs$2.vector(bcs$2.tuple([Address$1,EffectsObjectChange$1])),unchangedSharedObjects:bcs$2.vector(bcs$2.tuple([Address$1,UnchangedSharedKind$1])),auxDataDigest:bcs$2.option(ObjectDigest$1)}),TransactionEffects$1=bcs$2.enum("TransactionEffects",{V1:TransactionEffectsV1$1,V2:TransactionEffectsV2$1});function pureBcsSchemaFromTypeName$1(t){switch(t){case"u8":return bcs$2.u8();case"u16":return bcs$2.u16();case"u32":return bcs$2.u32();case"u64":return bcs$2.u64();case"u128":return bcs$2.u128();case"u256":return bcs$2.u256();case"bool":return bcs$2.bool();case"string":return bcs$2.string();case"id":case"address":return Address$1}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,i]=e.slice(1);return n==="vector"?bcs$2.vector(pureBcsSchemaFromTypeName$1(i)):bcs$2.option(pureBcsSchemaFromTypeName$1(i))}throw new Error(`Invalid Pure type name: ${t}`)}const suiBcs$1={...bcs$2,U8:bcs$2.u8(),U16:bcs$2.u16(),U32:bcs$2.u32(),U64:bcs$2.u64(),U128:bcs$2.u128(),U256:bcs$2.u256(),ULEB128:bcs$2.uleb128(),Bool:bcs$2.bool(),String:bcs$2.string(),Address:Address$1,AppId:AppId$1,Argument:Argument$3,CallArg:CallArg$3,Command:Command$3,CompressedSignature:CompressedSignature$1,GasData:GasData$3,Intent:Intent$1,IntentMessage:IntentMessage$1,IntentScope:IntentScope$1,IntentVersion:IntentVersion$1,MultiSig:MultiSig$1,MultiSigPkMap:MultiSigPkMap$1,MultiSigPublicKey:MultiSigPublicKey$1,ObjectArg:ObjectArg$4,ObjectDigest:ObjectDigest$1,Owner:Owner$1,PasskeyAuthenticator:PasskeyAuthenticator$1,ProgrammableMoveCall:ProgrammableMoveCall$3,ProgrammableTransaction:ProgrammableTransaction$1,PublicKey:PublicKey$1,SenderSignedData:SenderSignedData$1,SenderSignedTransaction:SenderSignedTransaction$1,SharedObjectRef:SharedObjectRef$1,StructTag:StructTag$2,SuiObjectRef:SuiObjectRef$1,TransactionData:TransactionData$2,TransactionDataV1:TransactionDataV1$1,TransactionEffects:TransactionEffects$1,TransactionExpiration:TransactionExpiration$4,TransactionKind:TransactionKind$1,TypeTag:TypeTag$2};function batch(t,e){const n=[];for(let i=0;i<t.length;i+=e)n.push(t.slice(i,i+e));return n}function safeEnum(t){const e=Object.entries(t).map(([n,i])=>object$1({[n]:i}));return pipe(union(e),transform$1(n=>({...n,$kind:Object.keys(n)[0]})))}const SuiAddress=pipe(string(),transform$1(t=>normalizeSuiAddress$1(t)),check(isValidSuiAddress$1)),ObjectID=SuiAddress,BCSBytes=string(),JsonU64=pipe(union([string(),pipe(number(),integer())]),check(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),ObjectRef$1=object$1({objectId:SuiAddress,version:JsonU64,digest:string()}),Argument$2=pipe(union([object$1({GasCoin:literal(!0)}),object$1({Input:pipe(number(),integer()),type:optional(literal("pure"))}),object$1({Input:pipe(number(),integer()),type:optional(literal("object"))}),object$1({Result:pipe(number(),integer())}),object$1({NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])})]),transform$1(t=>({...t,$kind:Object.keys(t)[0]}))),GasData$2=object$1({budget:nullable(JsonU64),price:nullable(JsonU64),owner:nullable(SuiAddress),payment:nullable(array(ObjectRef$1))}),OpenMoveTypeSignatureBody=union([literal("address"),literal("bool"),literal("u8"),literal("u16"),literal("u32"),literal("u64"),literal("u128"),literal("u256"),object$1({vector:lazy(()=>OpenMoveTypeSignatureBody)}),object$1({datatype:object$1({package:string(),module:string(),type:string(),typeParameters:array(lazy(()=>OpenMoveTypeSignatureBody))})}),object$1({typeParameter:pipe(number(),integer())})]),OpenMoveTypeSignature=object$1({ref:nullable(union([literal("&"),literal("&mut")])),body:OpenMoveTypeSignatureBody}),ProgrammableMoveCall$2=object$1({package:ObjectID,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$2),_argumentTypes:optional(nullable(array(OpenMoveTypeSignature)))}),$Intent$1=object$1({name:string(),inputs:record(string(),union([Argument$2,array(Argument$2)])),data:record(string(),unknown())}),Command$2=safeEnum({MoveCall:ProgrammableMoveCall$2,TransferObjects:object$1({objects:array(Argument$2),address:Argument$2}),SplitCoins:object$1({coin:Argument$2,amounts:array(Argument$2)}),MergeCoins:object$1({destination:Argument$2,sources:array(Argument$2)}),Publish:object$1({modules:array(BCSBytes),dependencies:array(ObjectID)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$2)}),Upgrade:object$1({modules:array(BCSBytes),dependencies:array(ObjectID),package:ObjectID,ticket:Argument$2}),$Intent:$Intent$1}),ObjectArg$3=safeEnum({ImmOrOwnedObject:ObjectRef$1,SharedObject:object$1({objectId:ObjectID,initialSharedVersion:JsonU64,mutable:boolean()}),Receiving:ObjectRef$1}),CallArg$2=safeEnum({Object:ObjectArg$3,Pure:object$1({bytes:BCSBytes}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID,version:optional(nullable(JsonU64)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64))})}),NormalizedCallArg$1=safeEnum({Object:ObjectArg$3,Pure:object$1({bytes:BCSBytes})}),TransactionExpiration$3=safeEnum({None:literal(!0),Epoch:JsonU64}),TransactionData$1=object$1({version:literal(2),sender:nullish(SuiAddress),expiration:nullish(TransactionExpiration$3),gasData:GasData$2,inputs:array(CallArg$2),commands:array(Command$2)}),Commands={MoveCall(t){const[e,n="",i=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:i,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>parse(Argument$2,n)),address:parse(Argument$2,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:parse(Argument$2,t),amounts:e.map(n=>parse(Argument$2,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:parse(Argument$2,t),sources:e.map(n=>parse(Argument$2,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:toBase64(new Uint8Array(n))),dependencies:e.map(n=>normalizeSuiObjectId$1(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:i}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:toBase64(new Uint8Array(s))),dependencies:e.map(s=>normalizeSuiObjectId$1(s)),package:n,ticket:parse(Argument$2,i)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>parse(Argument$2,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([i,s])=>[i,Array.isArray(s)?s.map(a=>parse(Argument$2,a)):parse(Argument$2,s)])),data:n}}}},ObjectRef=object$1({digest:string(),objectId:string(),version:union([pipe(number(),integer()),string(),bigint()])}),ObjectArg$2=safeEnum({ImmOrOwned:ObjectRef,Shared:object$1({objectId:ObjectID,initialSharedVersion:JsonU64,mutable:boolean()}),Receiving:ObjectRef}),NormalizedCallArg=safeEnum({Object:ObjectArg$2,Pure:array(pipe(number(),integer()))}),TransactionInput=union([object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:optional(literal("object"))}),object$1({kind:literal("Input"),index:pipe(number(),integer()),value:unknown(),type:literal("pure")})]),TransactionExpiration$2=union([object$1({Epoch:pipe(number(),integer())}),object$1({None:nullable(literal(!0))})]),StringEncodedBigint=pipe(union([number(),string(),bigint()]),check(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),TypeTag$1=union([object$1({bool:nullable(literal(!0))}),object$1({u8:nullable(literal(!0))}),object$1({u64:nullable(literal(!0))}),object$1({u128:nullable(literal(!0))}),object$1({address:nullable(literal(!0))}),object$1({signer:nullable(literal(!0))}),object$1({vector:lazy(()=>TypeTag$1)}),object$1({struct:lazy(()=>StructTag$1)}),object$1({u16:nullable(literal(!0))}),object$1({u32:nullable(literal(!0))}),object$1({u256:nullable(literal(!0))})]),StructTag$1=object$1({address:string(),module:string(),name:string(),typeParams:array(TypeTag$1)}),GasConfig=object$1({budget:optional(StringEncodedBigint),price:optional(StringEncodedBigint),payment:optional(array(ObjectRef)),owner:optional(string())}),TransactionArgumentTypes=[TransactionInput,object$1({kind:literal("GasCoin")}),object$1({kind:literal("Result"),index:pipe(number(),integer())}),object$1({kind:literal("NestedResult"),index:pipe(number(),integer()),resultIndex:pipe(number(),integer())})],TransactionArgument=union([...TransactionArgumentTypes]),MoveCallTransaction=object$1({kind:literal("MoveCall"),target:pipe(string(),check(t=>t.split("::").length===3)),typeArguments:array(string()),arguments:array(TransactionArgument)}),TransferObjectsTransaction=object$1({kind:literal("TransferObjects"),objects:array(TransactionArgument),address:TransactionArgument}),SplitCoinsTransaction=object$1({kind:literal("SplitCoins"),coin:TransactionArgument,amounts:array(TransactionArgument)}),MergeCoinsTransaction=object$1({kind:literal("MergeCoins"),destination:TransactionArgument,sources:array(TransactionArgument)}),MakeMoveVecTransaction=object$1({kind:literal("MakeMoveVec"),type:union([object$1({Some:TypeTag$1}),object$1({None:nullable(literal(!0))})]),objects:array(TransactionArgument)}),PublishTransaction=object$1({kind:literal("Publish"),modules:array(array(pipe(number(),integer()))),dependencies:array(string())}),UpgradeTransaction=object$1({kind:literal("Upgrade"),modules:array(array(pipe(number(),integer()))),dependencies:array(string()),packageId:string(),ticket:TransactionArgument}),TransactionTypes=[MoveCallTransaction,TransferObjectsTransaction,SplitCoinsTransaction,MergeCoinsTransaction,PublishTransaction,UpgradeTransaction,MakeMoveVecTransaction],TransactionType=union([...TransactionTypes]);object$1({version:literal(1),sender:optional(string()),expiration:nullish(TransactionExpiration$2),gasConfig:GasConfig,inputs:array(TransactionInput),transactions:array(TransactionType)});function serializeV1TransactionData(t){var n;const e=t.inputs.map((i,s)=>{if(i.Object)return{kind:"Input",index:s,value:{Object:i.Object.ImmOrOwnedObject?{ImmOrOwned:i.Object.ImmOrOwnedObject}:i.Object.Receiving?{Receiving:{digest:i.Object.Receiving.digest,version:i.Object.Receiving.version,objectId:i.Object.Receiving.objectId}}:{Shared:{mutable:i.Object.SharedObject.mutable,initialSharedVersion:i.Object.SharedObject.initialSharedVersion,objectId:i.Object.SharedObject.objectId}}},type:"object"};if(i.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(fromBase64(i.Pure.bytes))},type:"pure"};if(i.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:i.UnresolvedPure.value};if(i.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:i.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(i=>{if(i.MakeMoveVec)return{kind:"MakeMoveVec",type:i.MakeMoveVec.type===null?{None:!0}:{Some:TypeTagSerializer$1.parseFromStr(i.MakeMoveVec.type)},objects:i.MakeMoveVec.elements.map(s=>convertTransactionArgument(s,e))};if(i.MergeCoins)return{kind:"MergeCoins",destination:convertTransactionArgument(i.MergeCoins.destination,e),sources:i.MergeCoins.sources.map(s=>convertTransactionArgument(s,e))};if(i.MoveCall)return{kind:"MoveCall",target:`${i.MoveCall.package}::${i.MoveCall.module}::${i.MoveCall.function}`,typeArguments:i.MoveCall.typeArguments,arguments:i.MoveCall.arguments.map(s=>convertTransactionArgument(s,e))};if(i.Publish)return{kind:"Publish",modules:i.Publish.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Publish.dependencies};if(i.SplitCoins)return{kind:"SplitCoins",coin:convertTransactionArgument(i.SplitCoins.coin,e),amounts:i.SplitCoins.amounts.map(s=>convertTransactionArgument(s,e))};if(i.TransferObjects)return{kind:"TransferObjects",objects:i.TransferObjects.objects.map(s=>convertTransactionArgument(s,e)),address:convertTransactionArgument(i.TransferObjects.address,e)};if(i.Upgrade)return{kind:"Upgrade",modules:i.Upgrade.modules.map(s=>Array.from(fromBase64(s))),dependencies:i.Upgrade.dependencies,packageId:i.Upgrade.package,ticket:convertTransactionArgument(i.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(i)}`)})}}function convertTransactionArgument(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function transactionDataFromV1(t){var e,n,i;return parse(TransactionData$1,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((i=t.gasConfig.payment)==null?void 0:i.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(is$2(NormalizedCallArg,s.value)){const a=parse(NormalizedCallArg,s.value);if(a.Object){if(a.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:a.Object.ImmOrOwned.objectId,version:String(a.Object.ImmOrOwned.version),digest:a.Object.ImmOrOwned.digest}}};if(a.Object.Shared)return{Object:{SharedObject:{mutable:a.Object.Shared.mutable??null,initialSharedVersion:a.Object.Shared.initialSharedVersion,objectId:a.Object.Shared.objectId}}};if(a.Object.Receiving)return{Object:{Receiving:{digest:a.Object.Receiving.digest,version:String(a.Object.Receiving.version),objectId:a.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:toBase64(new Uint8Array(a.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?TypeTagSerializer$1.tagToString(s.type.Some):null,elements:s.objects.map(a=>parseV1TransactionArgument(a))}};case"MergeCoins":return{MergeCoins:{destination:parseV1TransactionArgument(s.destination),sources:s.sources.map(a=>parseV1TransactionArgument(a))}};case"MoveCall":{const[a,l,f]=s.target.split("::");return{MoveCall:{package:a,module:l,function:f,typeArguments:s.typeArguments,arguments:s.arguments.map(p=>parseV1TransactionArgument(p))}}}case"Publish":return{Publish:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:parseV1TransactionArgument(s.coin),amounts:s.amounts.map(a=>parseV1TransactionArgument(a))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(a=>parseV1TransactionArgument(a)),address:parseV1TransactionArgument(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(a=>toBase64(Uint8Array.from(a))),dependencies:s.dependencies,package:s.packageId,ticket:parseV1TransactionArgument(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function parseV1TransactionArgument(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function enumUnion(t){return union(Object.entries(t).map(([e,n])=>object$1({[e]:n})))}const Argument$1=enumUnion({GasCoin:literal(!0),Input:pipe(number(),integer()),Result:pipe(number(),integer()),NestedResult:tuple([pipe(number(),integer()),pipe(number(),integer())])}),GasData$1=object$1({budget:nullable(JsonU64),price:nullable(JsonU64),owner:nullable(SuiAddress),payment:nullable(array(ObjectRef$1))}),ProgrammableMoveCall$1=object$1({package:ObjectID,module:string(),function:string(),typeArguments:array(string()),arguments:array(Argument$1)}),$Intent=object$1({name:string(),inputs:record(string(),union([Argument$1,array(Argument$1)])),data:record(string(),unknown())}),Command$1=enumUnion({MoveCall:ProgrammableMoveCall$1,TransferObjects:object$1({objects:array(Argument$1),address:Argument$1}),SplitCoins:object$1({coin:Argument$1,amounts:array(Argument$1)}),MergeCoins:object$1({destination:Argument$1,sources:array(Argument$1)}),Publish:object$1({modules:array(BCSBytes),dependencies:array(ObjectID)}),MakeMoveVec:object$1({type:nullable(string()),elements:array(Argument$1)}),Upgrade:object$1({modules:array(BCSBytes),dependencies:array(ObjectID),package:ObjectID,ticket:Argument$1}),$Intent}),ObjectArg$1=enumUnion({ImmOrOwnedObject:ObjectRef$1,SharedObject:object$1({objectId:ObjectID,initialSharedVersion:JsonU64,mutable:boolean()}),Receiving:ObjectRef$1}),CallArg$1=enumUnion({Object:ObjectArg$1,Pure:object$1({bytes:BCSBytes}),UnresolvedPure:object$1({value:unknown()}),UnresolvedObject:object$1({objectId:ObjectID,version:optional(nullable(JsonU64)),digest:optional(nullable(string())),initialSharedVersion:optional(nullable(JsonU64))})}),TransactionExpiration$1=enumUnion({None:literal(!0),Epoch:JsonU64}),SerializedTransactionDataV2=object$1({version:literal(2),sender:nullish(SuiAddress),expiration:nullish(TransactionExpiration$1),gasData:GasData$1,inputs:array(CallArg$1),commands:array(Command$1)});function Pure(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?toBase64(t):t.toBase64()}}}const Inputs={Pure,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:normalizeSuiAddress$1(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:normalizeSuiAddress$1(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:normalizeSuiAddress$1(t)}}}}};BigInt(1e9);const MOVE_STDLIB_ADDRESS$1="0x1",SUI_FRAMEWORK_ADDRESS$1="0x2",SUI_CLOCK_OBJECT_ID$1=normalizeSuiObjectId$1("0x6"),SUI_TYPE_ARG$1=`${SUI_FRAMEWORK_ADDRESS$1}::sui::SUI`;normalizeSuiObjectId$1("0x5");function deriveDynamicFieldID$1(t,e,n){const i=suiBcs$1.Address.serialize(t).toBytes(),s=suiBcs$1.TypeTag.serialize(e).toBytes(),a=suiBcs$1.u64().serialize(n.length).toBytes(),l=blake2b$1.create({dkLen:32});return l.update(new Uint8Array([240])),l.update(i),l.update(a),l.update(n),l.update(s),`0x${toHex$1(l.digest().slice(0,32))}`}const OBJECT_MODULE_NAME="object",ID_STRUCT_NAME="ID",STD_ASCII_MODULE_NAME="ascii",STD_ASCII_STRUCT_NAME="String",STD_UTF8_MODULE_NAME="string",STD_UTF8_STRUCT_NAME="String",STD_OPTION_MODULE_NAME="option",STD_OPTION_STRUCT_NAME="Option";function isTxContext(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&normalizeSuiAddress$1(e.package)===normalizeSuiAddress$1("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function getPureBcsSchema(t){if(typeof t=="string")switch(t){case"address":return suiBcs$1.Address;case"bool":return suiBcs$1.Bool;case"u8":return suiBcs$1.U8;case"u16":return suiBcs$1.U16;case"u32":return suiBcs$1.U32;case"u64":return suiBcs$1.U64;case"u128":return suiBcs$1.U128;case"u256":return suiBcs$1.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return suiBcs$1.vector(suiBcs$1.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=getPureBcsSchema(t.vector);return e?suiBcs$1.vector(e):null}if("datatype"in t){const e=normalizeSuiAddress$1(t.datatype.package);if(e===normalizeSuiAddress$1(MOVE_STDLIB_ADDRESS$1)){if(t.datatype.module===STD_ASCII_MODULE_NAME&&t.datatype.type===STD_ASCII_STRUCT_NAME||t.datatype.module===STD_UTF8_MODULE_NAME&&t.datatype.type===STD_UTF8_STRUCT_NAME)return suiBcs$1.String;if(t.datatype.module===STD_OPTION_MODULE_NAME&&t.datatype.type===STD_OPTION_STRUCT_NAME){const n=getPureBcsSchema(t.datatype.typeParameters[0]);return n?suiBcs$1.vector(n):null}}if(e===normalizeSuiAddress$1(SUI_FRAMEWORK_ADDRESS$1)&&t.datatype.module===OBJECT_MODULE_NAME&&t.datatype.type===ID_STRUCT_NAME)return suiBcs$1.Address}return null}function normalizedTypeToMoveTypeSignature(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:normalizedTypeToMoveTypeSignatureBody(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:normalizedTypeToMoveTypeSignatureBody(t.MutableReference)}:{ref:null,body:normalizedTypeToMoveTypeSignatureBody(t)}}function normalizedTypeToMoveTypeSignatureBody(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:normalizedTypeToMoveTypeSignatureBody(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(normalizedTypeToMoveTypeSignatureBody)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}const MAX_OBJECTS_PER_FETCH=50,GAS_SAFE_OVERHEAD=1000n,MAX_GAS=5e10;async function resolveTransactionData(t,e,n){return await normalizeInputs(t,e),await resolveObjectReferences(t,e),e.onlyTransactionKind||(await setGasPrice(t,e),await setGasBudget(t,e),await setGasPayment(t,e)),await validate(t),await n()}async function setGasPrice(t,e){t.gasConfig.price||(t.gasConfig.price=String(await getClient(e).getReferenceGasPrice()))}async function setGasBudget(t,e){if(t.gasConfig.budget)return;const n=await getClient(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(MAX_GAS),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const i=GAS_SAFE_OVERHEAD*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+i,a=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(a>s?a:s)}async function setGasPayment(t,e){if(!t.gasConfig.payment){const i=(await getClient(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:SUI_TYPE_ARG$1})).data.filter(s=>!t.inputs.find(l=>{var f;return(f=l.Object)!=null&&f.ImmOrOwnedObject?s.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!i.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=i.map(s=>parse(ObjectRef$1,s))}}async function resolveObjectReferences(t,e){const n=t.inputs.filter(B=>{var N;return B.UnresolvedObject&&!(B.UnresolvedObject.version||(N=B.UnresolvedObject)!=null&&N.initialSharedVersion)}),i=[...new Set(n.map(B=>normalizeSuiObjectId$1(B.UnresolvedObject.objectId)))],s=i.length?chunk$1(i,MAX_OBJECTS_PER_FETCH):[],a=(await Promise.all(s.map(B=>getClient(e).multiGetObjects({ids:B,options:{showOwner:!0}})))).flat(),l=new Map(i.map((B,N)=>[B,a[N]])),f=Array.from(l).filter(([B,N])=>N.error).map(([B,N])=>JSON.stringify(N.error));if(f.length)throw new Error(`The following input objects are invalid: ${f.join(", ")}`);const p=a.map(B=>{if(B.error||!B.data)throw new Error(`Failed to fetch object: ${B.error}`);const N=B.data.owner,le=N&&typeof N=="object"&&"Shared"in N?N.Shared.initial_shared_version:null;return{objectId:B.data.objectId,digest:B.data.digest,version:B.data.version,initialSharedVersion:le}}),C=new Map(i.map((B,N)=>[B,p[N]]));for(const[B,N]of t.inputs.entries()){if(!N.UnresolvedObject)continue;let le;const Ee=normalizeSuiAddress$1(N.UnresolvedObject.objectId),Ue=C.get(Ee);N.UnresolvedObject.initialSharedVersion??(Ue==null?void 0:Ue.initialSharedVersion)?le=Inputs.SharedObjectRef({objectId:Ee,initialSharedVersion:N.UnresolvedObject.initialSharedVersion||(Ue==null?void 0:Ue.initialSharedVersion),mutable:isUsedAsMutable(t,B)}):isUsedAsReceiving(t,B)&&(le=Inputs.ReceivingRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})),t.inputs[t.inputs.indexOf(N)]=le??Inputs.ObjectRef({objectId:Ee,digest:N.UnresolvedObject.digest??(Ue==null?void 0:Ue.digest),version:N.UnresolvedObject.version??(Ue==null?void 0:Ue.version)})}}async function normalizeInputs(t,e){const{inputs:n,commands:i}=t,s=[],a=new Set;i.forEach(f=>{if(f.MoveCall){if(f.MoveCall._argumentTypes)return;if(f.MoveCall.arguments.map(B=>B.$kind==="Input"?t.inputs[B.Input]:null).some(B=>(B==null?void 0:B.UnresolvedPure)||(B==null?void 0:B.UnresolvedObject))){const B=`${f.MoveCall.package}::${f.MoveCall.module}::${f.MoveCall.function}`;a.add(B),s.push(f.MoveCall)}}switch(f.$kind){case"SplitCoins":f.SplitCoins.amounts.forEach(p=>{normalizeRawArgument(p,suiBcs$1.U64,t)});break;case"TransferObjects":normalizeRawArgument(f.TransferObjects.address,suiBcs$1.Address,t);break}});const l=new Map;if(a.size>0){const f=getClient(e);await Promise.all([...a].map(async p=>{const[C,B,N]=p.split("::"),le=await f.getNormalizedMoveFunction({package:C,module:B,function:N});l.set(p,le.parameters.map(Ee=>normalizedTypeToMoveTypeSignature(Ee)))}))}s.length&&await Promise.all(s.map(async f=>{const p=l.get(`${f.package}::${f.module}::${f.function}`);if(!p)return;const B=p.length>0&&isTxContext(p.at(-1))?p.slice(0,p.length-1):p;f._argumentTypes=B})),i.forEach(f=>{if(!f.MoveCall)return;const p=f.MoveCall,C=`${p.package}::${p.module}::${p.function}`,B=p._argumentTypes;if(B){if(B.length!==f.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${C}`);B.forEach((N,le)=>{var ct,wt;const Ee=p.arguments[le];if(Ee.$kind!=="Input")return;const Ue=n[Ee.Input];if(!Ue.UnresolvedPure&&!Ue.UnresolvedObject)return;const ze=((ct=Ue.UnresolvedPure)==null?void 0:ct.value)??((wt=Ue.UnresolvedObject)==null?void 0:wt.objectId),Ze=getPureBcsSchema(N.body);if(Ze){Ee.type="pure",n[n.indexOf(Ue)]=Inputs.Pure(Ze.serialize(ze));return}if(typeof ze!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(ze,null,2)}`);Ee.type="object";const Qe=Ue.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ze}}:Ue;n[Ee.Input]=Qe})}})}function validate(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function normalizeRawArgument(t,e,n){if(t.$kind!=="Input")return;const i=n.inputs[t.Input];i.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=Inputs.Pure(e.serialize(i.UnresolvedPure.value)))}function isUsedAsMutable(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=s.MoveCall._argumentTypes[a].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(n=!0)}),n}function isUsedAsReceiving(t,e){let n=!1;return t.getInputUses(e,(i,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const a=s.MoveCall.arguments.indexOf(i);n=isReceivingType(s.MoveCall._argumentTypes[a])||n}}),n}function isReceivingType(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function getClient(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function createObjectMethods(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:i})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${i===null?"none":"some"}`,arguments:i===null?[]:[s.object(i)]}),e}function createPure(t){function e(n,i){if(typeof n=="string")return t(pureBcsSchemaFromTypeName$1(n).serialize(i));if(n instanceof Uint8Array||isSerializedBcs(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(suiBcs$1.U8.serialize(n)),e.u16=n=>t(suiBcs$1.U16.serialize(n)),e.u32=n=>t(suiBcs$1.U32.serialize(n)),e.u64=n=>t(suiBcs$1.U64.serialize(n)),e.u128=n=>t(suiBcs$1.U128.serialize(n)),e.u256=n=>t(suiBcs$1.U256.serialize(n)),e.bool=n=>t(suiBcs$1.Bool.serialize(n)),e.string=n=>t(suiBcs$1.String.serialize(n)),e.address=n=>t(suiBcs$1.Address.serialize(n)),e.id=e.address,e.vector=(n,i)=>t(suiBcs$1.vector(pureBcsSchemaFromTypeName$1(n)).serialize(i)),e.option=(n,i)=>t(suiBcs$1.option(pureBcsSchemaFromTypeName$1(n)).serialize(i)),e}function hashTypedData(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),i=new Uint8Array(n.length+e.length);return i.set(n),i.set(e,n.length),blake2b$1(i,{dkLen:32})}function prepareSuiAddress(t){return normalizeSuiAddress$1(t).replace("0x","")}class TransactionDataBuilder{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const i=suiBcs$1.TransactionKind.parse(e).ProgrammableTransaction;if(!i)throw new Error("Unable to deserialize from bytes.");return TransactionDataBuilder.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:i.inputs,commands:i.commands})}static fromBytes(e){const n=suiBcs$1.TransactionData.parse(e),i=n==null?void 0:n.V1,s=i.kind.ProgrammableTransaction;if(!i||!s)throw new Error("Unable to deserialize from bytes.");return TransactionDataBuilder.restore({version:2,sender:i.sender,expiration:i.expiration,gasData:i.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new TransactionDataBuilder(parse(TransactionData$1,e)):new TransactionDataBuilder(parse(TransactionData$1,transactionDataFromV1(e)))}static getDigestFromBytes(e){const n=hashTypedData("TransactionData",e);return toBase58(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:i}={}){const s=this.inputs,a=this.commands,l={ProgrammableTransaction:{inputs:s,commands:a}};if(i)return suiBcs$1.TransactionKind.serialize(l,{maxSize:e}).toBytes();const f=(n==null?void 0:n.expiration)??this.expiration,p=(n==null?void 0:n.sender)??this.sender,C={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!p)throw new Error("Missing transaction sender");if(!C.budget)throw new Error("Missing gas budget");if(!C.payment)throw new Error("Missing gas payment");if(!C.price)throw new Error("Missing gas price");const B={sender:prepareSuiAddress(p),expiration:f||{None:!0},gasData:{payment:C.payment,owner:prepareSuiAddress(this.gasData.owner??p),price:BigInt(C.price),budget:BigInt(C.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:a}}};return suiBcs$1.TransactionData.serialize({V1:B},{maxSize:e}).toBytes()}addInput(e,n){const i=this.inputs.length;return this.inputs.push(n),{Input:i,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((i,s)=>(i.$kind==="Input"&&i.Input===e&&n(i,s),i))}mapArguments(e){for(const n of this.commands)switch(n.$kind){case"MoveCall":n.MoveCall.arguments=n.MoveCall.arguments.map(s=>e(s,n));break;case"TransferObjects":n.TransferObjects.objects=n.TransferObjects.objects.map(s=>e(s,n)),n.TransferObjects.address=e(n.TransferObjects.address,n);break;case"SplitCoins":n.SplitCoins.coin=e(n.SplitCoins.coin,n),n.SplitCoins.amounts=n.SplitCoins.amounts.map(s=>e(s,n));break;case"MergeCoins":n.MergeCoins.destination=e(n.MergeCoins.destination,n),n.MergeCoins.sources=n.MergeCoins.sources.map(s=>e(s,n));break;case"MakeMoveVec":n.MakeMoveVec.elements=n.MakeMoveVec.elements.map(s=>e(s,n));break;case"Upgrade":n.Upgrade.ticket=e(n.Upgrade.ticket,n);break;case"$Intent":const i=n.$Intent.inputs;n.$Intent.inputs={};for(const[s,a]of Object.entries(i))n.$Intent.inputs[s]=Array.isArray(a)?a.map(l=>e(l,n)):e(a,n);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${n.$kind}`)}}replaceCommand(e,n){if(!Array.isArray(n)){this.commands[e]=n;return}const i=n.length-1;this.commands.splice(e,1,...n),i!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return TransactionDataBuilder.getDigestFromBytes(e)}snapshot(){return parse(TransactionData$1,this)}}function getIdFromCallArg(t){if(typeof t=="string")return normalizeSuiAddress$1(t);if(t.Object)return t.Object.ImmOrOwnedObject?normalizeSuiAddress$1(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?normalizeSuiAddress$1(t.Object.Receiving.objectId):normalizeSuiAddress$1(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return normalizeSuiAddress$1(t.UnresolvedObject.objectId)}var __typeError$1=t=>{throw TypeError(t)},__accessCheck$1=(t,e,n)=>e.has(t)||__typeError$1("Cannot "+n),__privateGet$1=(t,e,n)=>(__accessCheck$1(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd$1=(t,e,n)=>e.has(t)?__typeError$1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet$1=(t,e,n,i)=>(__accessCheck$1(t,e,"write to private field"),e.set(t,n),n),__privateMethod=(t,e,n)=>(__accessCheck$1(t,e,"access private method"),n),_serializationPlugins,_buildPlugins,_intentResolvers,_data,_Transaction_instances,normalizeTransactionArgument_fn,resolveArgument_fn,prepareBuild_fn,runPlugins_fn;function createTransactionResult(t,e=1/0){const n={$kind:"Result",Result:t},i=[],s=a=>i[a]??(i[a]={$kind:"NestedResult",NestedResult:[t,a]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(a,l){if(l in a)return Reflect.get(a,l);if(l===Symbol.iterator)return function*(){let p=0;for(;p<e;)yield s(p),p++};if(typeof l=="symbol")return;const f=parseInt(l,10);if(!(Number.isNaN(f)||f<0))return s(f)}})}const TRANSACTION_BRAND=Symbol.for("@mysten/transaction");function isTransaction(t){return!!t&&typeof t=="object"&&t[TRANSACTION_BRAND]===!0}const modulePluginRegistry={buildPlugins:new Map,serializationPlugins:new Map},TRANSACTION_REGISTRY_KEY=Symbol.for("@mysten/transaction/registry");function getGlobalPluginRegistry(){try{const t=globalThis;return t[TRANSACTION_REGISTRY_KEY]||(t[TRANSACTION_REGISTRY_KEY]=modulePluginRegistry),t[TRANSACTION_REGISTRY_KEY]}catch{return modulePluginRegistry}}const _Transaction=class Za{constructor(){__privateAdd$1(this,_Transaction_instances),__privateAdd$1(this,_serializationPlugins),__privateAdd$1(this,_buildPlugins),__privateAdd$1(this,_intentResolvers,new Map),__privateAdd$1(this,_data),this.object=createObjectMethods(n=>{var a,l;if(typeof n=="function")return this.object(n(this));if(typeof n=="object"&&is$2(Argument$2,n))return n;const i=getIdFromCallArg(n),s=__privateGet$1(this,_data).inputs.find(f=>i===getIdFromCallArg(f));return(a=s==null?void 0:s.Object)!=null&&a.SharedObject&&typeof n=="object"&&((l=n.Object)!=null&&l.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:__privateGet$1(this,_data).inputs.indexOf(s),type:"object"}:__privateGet$1(this,_data).addInput("object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:normalizeSuiAddress$1(n)}}:n)});const e=getGlobalPluginRegistry();__privateSet$1(this,_data,new TransactionDataBuilder),__privateSet$1(this,_buildPlugins,[...e.buildPlugins.values()]),__privateSet$1(this,_serializationPlugins,[...e.serializationPlugins.values()])}static fromKind(e){const n=new Za;return __privateSet$1(n,_data,TransactionDataBuilder.fromKindBytes(typeof e=="string"?fromBase64(e):e)),n}static from(e){const n=new Za;return isTransaction(e)?__privateSet$1(n,_data,new TransactionDataBuilder(e.getData())):typeof e!="string"||!e.startsWith("{")?__privateSet$1(n,_data,TransactionDataBuilder.fromBytes(typeof e=="string"?fromBase64(e):e)):__privateSet$1(n,_data,TransactionDataBuilder.restore(JSON.parse(e))),n}static registerGlobalSerializationPlugin(e,n){getGlobalPluginRegistry().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){getGlobalPluginRegistry().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){getGlobalPluginRegistry().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){getGlobalPluginRegistry().buildPlugins.delete(e)}addSerializationPlugin(e){__privateGet$1(this,_serializationPlugins).push(e)}addBuildPlugin(e){__privateGet$1(this,_buildPlugins).push(e)}addIntentResolver(e,n){if(__privateGet$1(this,_intentResolvers).has(e)&&__privateGet$1(this,_intentResolvers).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);__privateGet$1(this,_intentResolvers).set(e,n)}setSender(e){__privateGet$1(this,_data).sender=e}setSenderIfNotSet(e){__privateGet$1(this,_data).sender||(__privateGet$1(this,_data).sender=e)}setExpiration(e){__privateGet$1(this,_data).expiration=e?parse(TransactionExpiration$3,e):null}setGasPrice(e){__privateGet$1(this,_data).gasConfig.price=String(e)}setGasBudget(e){__privateGet$1(this,_data).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){__privateGet$1(this,_data).gasData.budget==null&&(__privateGet$1(this,_data).gasConfig.budget=String(e))}setGasOwner(e){__privateGet$1(this,_data).gasConfig.owner=e}setGasPayment(e){__privateGet$1(this,_data).gasConfig.payment=e.map(n=>parse(ObjectRef$1,n))}get blockData(){return serializeV1TransactionData(__privateGet$1(this,_data).snapshot())}getData(){return __privateGet$1(this,_data).snapshot()}get[TRANSACTION_BRAND](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:createPure(e=>isSerializedBcs(e)?__privateGet$1(this,_data).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):__privateGet$1(this,_data).addInput("pure",is$2(NormalizedCallArg$1,e)?parse(NormalizedCallArg$1,e):e instanceof Uint8Array?Inputs.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Inputs.ObjectRef(...e))}receivingRef(...e){return this.object(Inputs.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Inputs.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const n=__privateGet$1(this,_data).commands.push(e);return createTransactionResult(n-1)}splitCoins(e,n){const i=Commands.SplitCoins(typeof e=="string"?this.object(e):__privateMethod(this,_Transaction_instances,resolveArgument_fn).call(this,e),n.map(a=>typeof a=="number"||typeof a=="bigint"||typeof a=="string"?this.pure.u64(a):__privateMethod(this,_Transaction_instances,normalizeTransactionArgument_fn).call(this,a))),s=__privateGet$1(this,_data).commands.push(i);return createTransactionResult(s-1,n.length)}mergeCoins(e,n){return this.add(Commands.MergeCoins(this.object(e),n.map(i=>this.object(i))))}publish({modules:e,dependencies:n}){return this.add(Commands.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:i,ticket:s}){return this.add(Commands.Upgrade({modules:e,dependencies:n,package:i,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(Commands.MoveCall({...n,arguments:e==null?void 0:e.map(i=>__privateMethod(this,_Transaction_instances,normalizeTransactionArgument_fn).call(this,i))}))}transferObjects(e,n){return this.add(Commands.TransferObjects(e.map(i=>this.object(i)),typeof n=="string"?this.pure.address(n):__privateMethod(this,_Transaction_instances,normalizeTransactionArgument_fn).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Commands.MakeMoveVec({type:e,elements:n.map(i=>this.object(i))}))}serialize(){return JSON.stringify(serializeV1TransactionData(__privateGet$1(this,_data).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(parse(SerializedTransactionDataV2,__privateGet$1(this,_data).snapshot()),(n,i)=>typeof i=="bigint"?i.toString():i,2)}async sign(e){const{signer:n,...i}=e,s=await this.build(i);return n.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await __privateMethod(this,_Transaction_instances,prepareBuild_fn).call(this,e),__privateGet$1(this,_data).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await __privateMethod(this,_Transaction_instances,prepareBuild_fn).call(this,e),__privateGet$1(this,_data).getDigest()}async prepareForSerialization(e){var s;const n=new Set;for(const a of __privateGet$1(this,_data).commands)a.$Intent&&n.add(a.$Intent.name);const i=[...__privateGet$1(this,_serializationPlugins)];for(const a of n)if(!((s=e.supportedIntents)!=null&&s.includes(a))){if(!__privateGet$1(this,_intentResolvers).has(a))throw new Error(`Missing intent resolver for ${a}`);i.push(__privateGet$1(this,_intentResolvers).get(a))}await __privateMethod(this,_Transaction_instances,runPlugins_fn).call(this,i,e)}};_serializationPlugins=new WeakMap;_buildPlugins=new WeakMap;_intentResolvers=new WeakMap;_data=new WeakMap;_Transaction_instances=new WeakSet;normalizeTransactionArgument_fn=function(t){return isSerializedBcs(t)?this.pure(t):__privateMethod(this,_Transaction_instances,resolveArgument_fn).call(this,t)};resolveArgument_fn=function(t){return typeof t=="function"?parse(Argument$2,t(this)):parse(Argument$2,t)};prepareBuild_fn=async function(t){if(!t.onlyTransactionKind&&!__privateGet$1(this,_data).sender)throw new Error("Missing transaction sender");await __privateMethod(this,_Transaction_instances,runPlugins_fn).call(this,[...__privateGet$1(this,_buildPlugins),resolveTransactionData],t)};runPlugins_fn=async function(t,e){const n=i=>{if(i>=t.length)return()=>{};const s=t[i];return async()=>{const a=n(i+1);let l=!1,f=!1;if(await s(__privateGet$1(this,_data),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${i}`);l=!0,await a(),f=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${i}`);if(!f)throw new Error(`next() was not awaited in TransactionPlugin ${i}`)}};await n(0)()};let Transaction=_Transaction;class Experimental_CoreClient extends Experimental_BaseClient{constructor(){super(...arguments),this.core=this}async getDynamicField(e){const n=deriveDynamicFieldID$1(e.parentId,TypeTagSerializer$1.parseFromStr(e.name.type),e.name.bcs),{objects:[i]}=await this.getObjects({objectIds:[n]});if(i instanceof Error)throw i;const s=parseStructTag$1(i.type);return{dynamicField:{id:i.id,digest:i.digest,version:i.version,type:i.type,name:{type:typeof s.typeParams[0]=="string"?s.typeParams[0]:normalizeStructTag$1(s.typeParams[0]),bcs:e.name.bcs},value:{type:typeof s.typeParams[1]=="string"?s.typeParams[1]:normalizeStructTag$1(s.typeParams[1]),bcs:i.content.slice(SUI_ADDRESS_LENGTH$1+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:n=60*1e3,...i}){const s=e?AbortSignal.any([AbortSignal.timeout(n),e]):AbortSignal.timeout(n),a=new Promise((l,f)=>{s.addEventListener("abort",()=>f(s.reason))});for(a.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({...i,signal:s})}catch{await Promise.race([new Promise(f=>setTimeout(f,2e3)),a])}}}}class SuiClientError extends Error{}class ObjectError extends SuiClientError{constructor(e,n){super(n),this.code=e}static fromResponse(e,n){switch(e.code){case"notExists":return new ObjectError(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new ObjectError(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new ObjectError(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new ObjectError(e.code,`Display error: ${e.error}`);case"unknown":default:return new ObjectError(e.code,`Unknown error while loading object${n?` ${n}`:""}`)}}}var __typeError=t=>{throw TypeError(t)},__accessCheck=(t,e,n)=>e.has(t)||__typeError("Cannot "+n),__privateGet=(t,e,n)=>(__accessCheck(t,e,"read from private field"),n?n.call(t):e.get(t)),__privateAdd=(t,e,n)=>e.has(t)?__typeError("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),__privateSet=(t,e,n,i)=>(__accessCheck(t,e,"write to private field"),e.set(t,n),n),_jsonRpcClient;class JSONRpcTransport extends Experimental_CoreClient{constructor(e){super({network:e.network}),__privateAdd(this,_jsonRpcClient),__privateSet(this,_jsonRpcClient,e)}async getObjects(e){const n=batch(e.objectIds,50),i=[];for(const s of n){const a=await __privateGet(this,_jsonRpcClient).multiGetObjects({ids:s,options:{showOwner:!0,showType:!0,showBcs:!0}});for(const[l,f]of a.entries())f.error?i.push(ObjectError.fromResponse(f.error,s[l])):i.push(parseObject(f.data))}return{objects:i}}async getOwnedObjects(e){const n=await __privateGet(this,_jsonRpcClient).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0}});return{objects:n.data.map(i=>{if(i.error)throw ObjectError.fromResponse(i.error);return parseObject(i.data)}),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getCoins(e){const n=await __privateGet(this,_jsonRpcClient).getCoins({owner:e.address,coinType:e.coinType});return{objects:n.data.map(i=>({id:i.coinObjectId,version:i.version,digest:i.digest,balance:i.balance,type:`0x2::coin::Coin<${i.coinType}>`,content:Coin.serialize({id:i.coinObjectId,balance:{value:i.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getBalance(e){const n=await __privateGet(this,_jsonRpcClient).getBalance({owner:e.address,coinType:e.coinType});return{balance:{coinType:n.coinType,balance:n.totalBalance}}}async getAllBalances(e){return{balances:(await __privateGet(this,_jsonRpcClient).getAllBalances({owner:e.address})).map(i=>({coinType:i.coinType,balance:i.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const n=await __privateGet(this,_jsonRpcClient).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0}});return{transaction:parseTransaction(n)}}async executeTransaction(e){const n=await __privateGet(this,_jsonRpcClient).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0}});return{transaction:parseTransaction(n)}}async dryRunTransaction(e){const n=Transaction.from(e.transaction),i=await __privateGet(this,_jsonRpcClient).dryRunTransactionBlock({transactionBlock:e.transaction});return{transaction:{digest:await n.getDigest(),effects:parseTransactionEffectsJson({effects:i.effects,objectChanges:i.objectChanges}),signatures:[],bcs:e.transaction}}}async getReferenceGasPrice(){const e=await __privateGet(this,_jsonRpcClient).getReferenceGasPrice();return{referenceGasPrice:String(e)}}async getDynamicFields(e){const n=await __privateGet(this,_jsonRpcClient).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:n.data.map(i=>({id:i.objectId,version:i.version,digest:i.digest,type:i.objectType,name:{type:i.name.type,bcs:fromBase64(i.bcsName)}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}}_jsonRpcClient=new WeakMap;function parseObject(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?fromBase64(t.bcs.bcsBytes):new Uint8Array,owner:parseOwner(t.owner)}}function parseOwner(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function parseTransaction(t){const e=suiBcs$1.SenderSignedData.parse(fromBase64(t.rawTransaction))[0];return{digest:t.digest,effects:parseTransactionEffects({effects:new Uint8Array(t.rawEffects),objectChanges:t.objectChanges??null}),bcs:suiBcs$1.TransactionData.serialize(e.intentMessage.value).toBytes(),signatures:e.txSignatures}}function parseTransactionEffects({effects:t,epoch:e,objectChanges:n}){const i=suiBcs$1.TransactionEffects.parse(t),s={};switch(n==null||n.forEach(a=>{a.type!=="published"&&(s[a.objectId]=a.objectType)}),i.$kind){case"V1":return parseTransactionEffectsV1({effects:i.V1});case"V2":return parseTransactionEffectsV2({bytes:t,effects:i.V2,epoch:e,objectTypes:s});default:throw new Error(`Unknown transaction effects version: ${i.$kind}`)}}function parseTransactionEffectsV1(t){throw new Error("V1 effects are not supported yet")}function parseTransactionEffectsV2({bytes:t,effects:e,epoch:n,objectTypes:i}){const s=e.changedObjects.map(([a,l])=>{var f,p,C,B,N,le;return{id:a,inputState:l.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((f=l.inputState.Exist)==null?void 0:f[0][0])??null,inputDigest:((p=l.inputState.Exist)==null?void 0:p[0][1])??null,inputOwner:((C=l.inputState.Exist)==null?void 0:C[1])??null,outputState:l.outputState.$kind==="NotExist"?"DoesNotExist":l.outputState.$kind,outputVersion:l.outputState.$kind==="PackageWrite"?(B=l.outputState.PackageWrite)==null?void 0:B[0]:l.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:l.outputState.$kind==="PackageWrite"?(N=l.outputState.PackageWrite)==null?void 0:N[1]:((le=l.outputState.ObjectWrite)==null?void 0:le[0])??null,outputOwner:l.outputState.ObjectWrite?l.outputState.ObjectWrite[1]:null,idOperation:l.idOperation.$kind,objectType:i[a]??null}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:s[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:s,unchangedSharedObjects:e.unchangedSharedObjects.map(([a,l])=>({kind:l.$kind,objectId:a,version:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[0]:l[l.$kind],digest:l.$kind==="ReadOnlyRoot"?l.ReadOnlyRoot[1]:null,objectType:i[a]??null})),auxiliaryDataDigest:e.auxDataDigest}}function parseTransactionEffectsJson({bytes:t,effects:e,epoch:n,objectChanges:i}){var l;const s=[],a=[];return i==null||i.forEach(f=>{var p,C,B,N;switch(f.type){case"published":s.push({id:f.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:null,idOperation:"Created",objectType:null});break;case"transferred":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:f.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner(f.recipient),idOperation:"None",objectType:f.objectType});break;case"mutated":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.previousVersion,inputDigest:null,inputOwner:parseOwner(f.owner),outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner(f.owner),idOperation:"None",objectType:f.objectType});break;case"deleted":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:((C=(p=e.deleted)==null?void 0:p.find(le=>le.objectId===f.objectId))==null?void 0:C.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted",objectType:f.objectType});break;case"wrapped":s.push({id:f.objectId,inputState:"Exists",inputVersion:f.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:f.sender},outputState:"ObjectWrite",outputVersion:f.version,outputDigest:((N=(B=e.wrapped)==null?void 0:B.find(le=>le.objectId===f.objectId))==null?void 0:N.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:f.sender},idOperation:"None",objectType:f.objectType});break;case"created":s.push({id:f.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:f.version,outputDigest:f.digest,outputOwner:parseOwner(f.owner),idOperation:"Created",objectType:f.objectType});break}}),{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},epoch:n??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(l=e.gasObject)==null?void 0:l.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:parseOwner(e.gasObject.owner),idOperation:"None",objectType:normalizeStructTag$1("0x2::coin::Coin<0x2::sui::SUI>")},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:s,unchangedSharedObjects:a,auxiliaryDataDigest:null}}const Balance=suiBcs$1.struct("Balance",{value:suiBcs$1.u64()}),Coin=suiBcs$1.struct("Coin",{id:suiBcs$1.Address,balance:Balance}),SUI_CLIENT_BRAND=Symbol.for("@mysten/SuiClient");class SuiClient extends Experimental_BaseClient{constructor(e){super({network:e.network??"unknown"}),this.core=new JSONRpcTransport(this),this.jsonRpc=this,this.transport=e.transport??new SuiHTTPTransport({url:e.url})}get[SUI_CLIENT_BRAND](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,n,{signal:i}={}){return await this.transport.request({method:e,params:n,signal:i})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!isValidSuiObjectId$1(normalizeSuiObjectId$1(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(i=>{if(!i||!isValidSuiObjectId$1(normalizeSuiObjectId$1(i)))throw new Error(`Invalid Sui Object id ${i}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!isValidTransactionDigest$1(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(i=>{if(!isValidTransactionDigest$1(i))throw new Error(`Invalid Transaction digest ${i}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:n,options:i,requestType:s,signal:a}){const l=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:toBase64(e),Array.isArray(n)?n:[n],i],signal:a});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:l.digest})}catch{}return l}async signAndExecuteTransaction({transaction:e,signer:n,...i}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(n.toSuiAddress()),s=await e.build({client:this}));const{signature:a,bytes:l}=await n.signTransaction(s);return this.executeTransactionBlock({transactionBlock:l,signature:a,...i})}async getTotalTransactionBlocks({signal:e}={}){const n=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(n)}async getReferenceGasPrice({signal:e}={}){const n=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(n)}async getStakes(e){if(!e.owner||!isValidSuiAddress$1(normalizeSuiAddress$1(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(n=>{if(!n||!isValidSuiObjectId$1(normalizeSuiObjectId$1(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var i,s;let n;if(isTransaction(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=toBase64(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=toBase64(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(i=e.signal)==null||i.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(s=e.gasPrice)==null?void 0:s.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:toBase64(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!isValidSuiObjectId$1(normalizeSuiObjectId$1(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const n=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(n)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const n=await this.getCheckpoint({id:"0",signal:e}),i=fromBase58(n.digest);return toHex$1(i.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...n}){const{nextCursor:i,hasNextPage:s,data:a}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit],signal:n.signal});return{hasNextPage:s,nextCursor:i,data:a.map(l=>normalizeSuiNSName$1(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async waitForTransaction({signal:e,timeout:n=60*1e3,pollInterval:i=2*1e3,...s}){const a=AbortSignal.timeout(n),l=new Promise((f,p)=>{a.addEventListener("abort",()=>p(a.reason))});for(l.catch(()=>{});!a.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(p=>setTimeout(p,i)),l])}}throw a.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}}var lib$2={},SuiPriceServiceConnection$1={},lib$1={},PriceServiceConnection$1={},lib={},PriceFeed={};Object.defineProperty(PriceFeed,"__esModule",{value:!0});PriceFeed.Convert=void 0;class Convert{static toPriceFeed(e){return cast(e,r$1("PriceFeed"))}static priceFeedToJson(e){return uncast(e,r$1("PriceFeed"))}static toPrice(e){return cast(e,r$1("Price"))}static priceToJson(e){return uncast(e,r$1("Price"))}static toPriceFeedMetadata(e){return cast(e,r$1("PriceFeedMetadata"))}static priceFeedMetadataToJson(e){return uncast(e,r$1("PriceFeedMetadata"))}}PriceFeed.Convert=Convert;function invalidValue(t,e,n=""){throw Error(n?`Invalid value for key "${n}". Expected type ${JSON.stringify(t)} but got ${JSON.stringify(e)}`:`Invalid value ${JSON.stringify(e)} for type ${JSON.stringify(t)}`)}function jsonToJSProps(t){if(t.jsonToJS===void 0){const e={};t.props.forEach(n=>e[n.json]={key:n.js,typ:n.typ}),t.jsonToJS=e}return t.jsonToJS}function jsToJSONProps(t){if(t.jsToJSON===void 0){const e={};t.props.forEach(n=>e[n.js]={key:n.json,typ:n.typ}),t.jsToJSON=e}return t.jsToJSON}function transform(t,e,n,i=""){function s(B,N){return typeof B==typeof N?N:invalidValue(B,N,i)}function a(B,N){const le=B.length;for(let Ee=0;Ee<le;Ee++){const Ue=B[Ee];try{return transform(N,Ue,n)}catch{}}return invalidValue(B,N)}function l(B,N){return B.indexOf(N)!==-1?N:invalidValue(B,N)}function f(B,N){return Array.isArray(N)?N.map(le=>transform(le,B,n)):invalidValue("array",N)}function p(B){if(B===null)return null;const N=new Date(B);return isNaN(N.valueOf())?invalidValue("Date",B):N}function C(B,N,le){if(le===null||typeof le!="object"||Array.isArray(le))return invalidValue("object",le);const Ee={};return Object.getOwnPropertyNames(B).forEach(Ue=>{const ze=B[Ue],Ze=Object.prototype.hasOwnProperty.call(le,Ue)?le[Ue]:void 0;Ee[ze.key]=transform(Ze,ze.typ,n,ze.key)}),Object.getOwnPropertyNames(le).forEach(Ue=>{Object.prototype.hasOwnProperty.call(B,Ue)||(Ee[Ue]=transform(le[Ue],N,n,Ue))}),Ee}if(e==="any")return t;if(e===null)return t===null?t:invalidValue(e,t);if(e===!1)return invalidValue(e,t);for(;typeof e=="object"&&e.ref!==void 0;)e=typeMap[e.ref];return Array.isArray(e)?l(e,t):typeof e=="object"?e.hasOwnProperty("unionMembers")?a(e.unionMembers,t):e.hasOwnProperty("arrayItems")?f(e.arrayItems,t):e.hasOwnProperty("props")?C(n(e),e.additional,t):invalidValue(e,t):e===Date&&typeof t!="number"?p(t):s(e,t)}function cast(t,e){return transform(t,e,jsonToJSProps)}function uncast(t,e){return transform(t,e,jsToJSONProps)}function u$1(...t){return{unionMembers:t}}function o(t,e){return{props:t,additional:e}}function r$1(t){return{ref:t}}const typeMap={PriceFeed:o([{json:"ema_price",js:"ema_price",typ:r$1("Price")},{json:"id",js:"id",typ:""},{json:"metadata",js:"metadata",typ:u$1(void 0,r$1("PriceFeedMetadata"))},{json:"price",js:"price",typ:r$1("Price")},{json:"vaa",js:"vaa",typ:u$1(void 0,"")}],"any"),Price:o([{json:"conf",js:"conf",typ:""},{json:"expo",js:"expo",typ:0},{json:"price",js:"price",typ:""},{json:"publish_time",js:"publish_time",typ:0}],"any"),PriceFeedMetadata:o([{json:"attestation_time",js:"attestation_time",typ:u$1(void 0,0)},{json:"emitter_chain",js:"emitter_chain",typ:0},{json:"prev_publish_time",js:"prev_publish_time",typ:u$1(void 0,0)},{json:"price_service_receive_time",js:"price_service_receive_time",typ:u$1(void 0,0)},{json:"sequence_number",js:"sequence_number",typ:u$1(void 0,0)},{json:"slot",js:"slot",typ:u$1(void 0,0)}],"any")};var AccumulatorUpdateData={},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(AccumulatorUpdateData,"__esModule",{value:!0});AccumulatorUpdateData.parseAccumulatorUpdateData=AccumulatorUpdateData.sliceAccumulatorUpdateData=AccumulatorUpdateData.parseTwapMessage=AccumulatorUpdateData.parsePriceFeedMessage=AccumulatorUpdateData.isAccumulatorUpdateData=void 0;const bn_js_1=__importDefault$2(bnExports),ACCUMULATOR_MAGIC="504e4155",MAJOR_VERSION=1,MINOR_VERSION=0,KECCAK160_HASH_SIZE=20,PRICE_FEED_MESSAGE_VARIANT=0,TWAP_MESSAGE_VARIANT=1;function isAccumulatorUpdateData(t){return t.toString("hex").slice(0,8)===ACCUMULATOR_MAGIC&&t[4]===MAJOR_VERSION&&t[5]===MINOR_VERSION}AccumulatorUpdateData.isAccumulatorUpdateData=isAccumulatorUpdateData;function parsePriceFeedMessage(t){let e=0;if(t.readUInt8(e)!==PRICE_FEED_MESSAGE_VARIANT)throw new Error("Not a price feed message");e+=1;const i=t.subarray(e,e+32);e+=32;const s=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const a=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const l=t.readInt32BE(e);e+=4;const f=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const p=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const C=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const B=new bn_js_1.default(t.subarray(e,e+8),"be");return e+=8,{feedId:i,price:s,confidence:a,exponent:l,publishTime:f,prevPublishTime:p,emaPrice:C,emaConf:B}}AccumulatorUpdateData.parsePriceFeedMessage=parsePriceFeedMessage;function parseTwapMessage(t){let e=0;if(t.readUInt8(e)!==TWAP_MESSAGE_VARIANT)throw new Error("Not a twap message");e+=1;const i=t.subarray(e,e+32);e+=32;const s=new bn_js_1.default(t.subarray(e,e+16),"be");e+=16;const a=new bn_js_1.default(t.subarray(e,e+16),"be");e+=16;const l=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const f=t.readInt32BE(e);e+=4;const p=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const C=new bn_js_1.default(t.subarray(e,e+8),"be");e+=8;const B=new bn_js_1.default(t.subarray(e,e+8),"be");return e+=8,{feedId:i,cumulativePrice:s,cumulativeConf:a,numDownSlots:l,exponent:f,publishTime:p,prevPublishTime:C,publishSlot:B}}AccumulatorUpdateData.parseTwapMessage=parseTwapMessage;function sliceAccumulatorUpdateData(t,e,n){if(!isAccumulatorUpdateData(t))throw new Error("Invalid accumulator message");let i=6;const s=t.readUint8(i);i+=1+s,i+=1;const a=t.readUint16BE(i);i+=2,i+=a;const l=i,f=[],p=t.readUInt8(i);i+=1;for(let B=0;B<p;B++){const N=i,le=t.readUint16BE(i);i+=2,i+=le;const Ee=t.readUInt8(i);i+=1,i+=KECCAK160_HASH_SIZE*Ee,f.push(t.subarray(N,i))}if(i!==t.length)throw new Error("Didn't reach the end of the message");const C=f.slice(e,n);return Buffer$1.concat([t.subarray(0,l),Buffer$1.from([C.length]),...f.slice(e,n)])}AccumulatorUpdateData.sliceAccumulatorUpdateData=sliceAccumulatorUpdateData;function parseAccumulatorUpdateData(t){if(!isAccumulatorUpdateData(t))throw new Error("Invalid accumulator message");let e=6;const n=t.readUint8(e);e+=1+n,e+=1;const i=t.readUint16BE(e);e+=2;const s=t.subarray(e,e+i);e+=i;const a=t.readUInt8(e),l=[];e+=1;for(let f=0;f<a;f++){const p=t.readUint16BE(e);e+=2;const C=t.subarray(e,e+p);e+=p;const B=t.readUInt8(e);e+=1;const N=[];for(let le=0;le<B;le++)N.push(Array.from(t.subarray(e,e+KECCAK160_HASH_SIZE))),e+=KECCAK160_HASH_SIZE;l.push({message:C,proof:N})}if(e!==t.length)throw new Error("Didn't reach the end of the message");return{vaa:s,updates:l}}AccumulatorUpdateData.parseAccumulatorUpdateData=parseAccumulatorUpdateData;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PriceFeed=t.PriceFeedMetadata=t.Price=t.parseTwapMessage=t.parsePriceFeedMessage=t.parseAccumulatorUpdateData=t.sliceAccumulatorUpdateData=t.isAccumulatorUpdateData=void 0;const e=PriceFeed;var n=AccumulatorUpdateData;Object.defineProperty(t,"isAccumulatorUpdateData",{enumerable:!0,get:function(){return n.isAccumulatorUpdateData}}),Object.defineProperty(t,"sliceAccumulatorUpdateData",{enumerable:!0,get:function(){return n.sliceAccumulatorUpdateData}}),Object.defineProperty(t,"parseAccumulatorUpdateData",{enumerable:!0,get:function(){return n.parseAccumulatorUpdateData}}),Object.defineProperty(t,"parsePriceFeedMessage",{enumerable:!0,get:function(){return n.parsePriceFeedMessage}}),Object.defineProperty(t,"parseTwapMessage",{enumerable:!0,get:function(){return n.parseTwapMessage}});class i{constructor(f){Or(this,"conf");Or(this,"expo");Or(this,"price");Or(this,"publishTime");this.conf=f.conf,this.expo=f.expo,this.price=f.price,this.publishTime=f.publishTime}getPriceAsNumberUnchecked(){return Number(this.price)*10**this.expo}getConfAsNumberUnchecked(){return Number(this.conf)*10**this.expo}static fromJson(f){const p=e.Convert.toPrice(f);return new i({conf:p.conf,expo:p.expo,price:p.price,publishTime:p.publish_time})}toJson(){const f={conf:this.conf,expo:this.expo,price:this.price,publish_time:this.publishTime};return e.Convert.priceToJson(f)}}t.Price=i;class s{constructor(f){Or(this,"attestationTime");Or(this,"emitterChain");Or(this,"priceServiceReceiveTime");Or(this,"sequenceNumber");Or(this,"slot");Or(this,"prevPublishTime");this.attestationTime=f.attestationTime,this.emitterChain=f.emitterChain,this.priceServiceReceiveTime=f.receiveTime,this.sequenceNumber=f.sequenceNumber,this.slot=f.slot,this.prevPublishTime=f.prevPublishTime}static fromJson(f){if(f===void 0)return;const p=e.Convert.toPriceFeedMetadata(f);return new s({attestationTime:p.attestation_time,emitterChain:p.emitter_chain,receiveTime:p.price_service_receive_time,sequenceNumber:p.sequence_number,slot:p.slot,prevPublishTime:p.prev_publish_time})}toJson(){const f={attestation_time:this.attestationTime,emitter_chain:this.emitterChain,price_service_receive_time:this.priceServiceReceiveTime,sequence_number:this.sequenceNumber,slot:this.slot,prev_publish_time:this.prevPublishTime};return e.Convert.priceFeedMetadataToJson(f)}}t.PriceFeedMetadata=s;let a=class yo{constructor(f){Or(this,"emaPrice");Or(this,"id");Or(this,"metadata");Or(this,"vaa");Or(this,"price");this.emaPrice=f.emaPrice,this.id=f.id,this.metadata=f.metadata,this.vaa=f.vaa,this.price=f.price}static fromJson(f){const p=e.Convert.toPriceFeed(f);return new yo({emaPrice:i.fromJson(p.ema_price),id:p.id,metadata:s.fromJson(p.metadata),vaa:p.vaa,price:i.fromJson(p.price)})}toJson(){var p;const f={ema_price:this.emaPrice.toJson(),id:this.id,metadata:(p=this.metadata)==null?void 0:p.toJson(),price:this.price.toJson()};return e.Convert.priceFeedToJson(f)}getPriceUnchecked(){return this.price}getEmaPriceUnchecked(){return this.emaPrice}getPriceNoOlderThan(f){const p=this.getPriceUnchecked(),C=Math.floor(Date.now()/1e3);if(!(Math.abs(C-p.publishTime)>f))return p}getEmaPriceNoOlderThan(f){const p=this.getEmaPriceUnchecked(),C=Math.floor(Date.now()/1e3);if(!(Math.abs(C-p.publishTime)>f))return p}getMetadata(){return this.metadata}getVAA(){return this.vaa}};t.PriceFeed=a})(lib);function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>e=>{const n=toString.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||isFunction(t.append)&&((e=kindOf(t))==="formdata"||e==="object"&&isFunction(t.toString)&&t.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),isArray(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let f;for(i=0;i<l;i++)f=a[i],e.call(null,t[f],f,t)}}function findKey(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:commonjsGlobal$1,isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},e={},n=(i,s)=>{const a=t&&findKey(e,s)||s;isPlainObject(e[a])&&isPlainObject(i)?e[a]=merge(e[a],i):isPlainObject(i)?e[a]=merge({},i):isArray(i)?e[a]=i.slice():e[a]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&forEach$1(arguments[i],n);return e}const extend=(t,e,n,{allOwnKeys:i}={})=>(forEach$1(e,(s,a)=>{n&&isFunction(s)?t[a]=bind(s,n):t[a]=s},{allOwnKeys:i}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject=(t,e,n,i)=>{let s,a,l;const f={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),a=s.length;a-- >0;)l=s[a],(!i||i(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=n!==!1&&getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},toArray=t=>{if(!t)return null;if(isArray(t))return t;let e=t.length;if(!isNumber(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray$1=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(t,a[0],a[1])}},matchAll=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),hasOwnProperty=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};forEach$1(n,(s,a)=>{let l;(l=e(s,a,t))!==!1&&(i[a]=l||s)}),Object.defineProperties(t,i)},freezeMethods=t=>{reduceDescriptors(t,(e,n)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(isFunction(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(t,e)=>{const n={},i=s=>{s.forEach(a=>{n[a]=!0})};return isArray(t)?i(t):i(String(t).split(e)),n},noop$1=()=>{},toFiniteNumber=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const e=new Array(10),n=(i,s)=>{if(isObject(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const a=isArray(i)?[]:{};return forEach$1(i,(l,f)=>{const p=n(l,s+1);!isUndefined(p)&&(a[f]=p)}),e[s]=void 0,a}}return i};return n(t,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=t=>t&&(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),_setImmediate=((t,e)=>t?setImmediate:e?((n,i)=>(_global.addEventListener("message",({source:s,data:a})=>{s===_global&&a===n&&i.length&&i.shift()()},!1),s=>{i.push(s),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process$1<"u"&&process$1.nextTick||_setImmediate;var utils$1$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}utils$1$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,e,n,i,s,a)=>{const l=Object.create(prototype$1);return utils$1$1.toFlatObject(t,l,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),AxiosError.call(l,t.message,e,n,i,s),l.cause=t,l.name=t.name,a&&Object.assign(l,a),l};var httpAdapter=null;function isVisitable(t){return utils$1$1.isPlainObject(t)||utils$1$1.isArray(t)}function removeBrackets(t){return utils$1$1.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,n){return t?t.concat(e).map(function(s,a){return s=removeBrackets(s),!n&&a?"["+s+"]":s}).join(n?".":""):e}function isFlatArray(t){return utils$1$1.isArray(t)&&!t.some(isVisitable)}const predicates=utils$1$1.toFlatObject(utils$1$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData(t,e,n){if(!utils$1$1.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=utils$1$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ze,Ze){return!utils$1$1.isUndefined(Ze[ze])});const i=n.metaTokens,s=n.visitor||B,a=n.dots,l=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1$1.isSpecCompliantForm(e);if(!utils$1$1.isFunction(s))throw new TypeError("visitor must be a function");function C(Ue){if(Ue===null)return"";if(utils$1$1.isDate(Ue))return Ue.toISOString();if(!p&&utils$1$1.isBlob(Ue))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1$1.isArrayBuffer(Ue)||utils$1$1.isTypedArray(Ue)?p&&typeof Blob=="function"?new Blob([Ue]):Buffer$1.from(Ue):Ue}function B(Ue,ze,Ze){let Qe=Ue;if(Ue&&!Ze&&typeof Ue=="object"){if(utils$1$1.endsWith(ze,"{}"))ze=i?ze:ze.slice(0,-2),Ue=JSON.stringify(Ue);else if(utils$1$1.isArray(Ue)&&isFlatArray(Ue)||(utils$1$1.isFileList(Ue)||utils$1$1.endsWith(ze,"[]"))&&(Qe=utils$1$1.toArray(Ue)))return ze=removeBrackets(ze),Qe.forEach(function(wt,qt){!(utils$1$1.isUndefined(wt)||wt===null)&&e.append(l===!0?renderKey([ze],qt,a):l===null?ze:ze+"[]",C(wt))}),!1}return isVisitable(Ue)?!0:(e.append(renderKey(Ze,ze,a),C(Ue)),!1)}const N=[],le=Object.assign(predicates,{defaultVisitor:B,convertValue:C,isVisitable});function Ee(Ue,ze){if(!utils$1$1.isUndefined(Ue)){if(N.indexOf(Ue)!==-1)throw Error("Circular reference detected in "+ze.join("."));N.push(Ue),utils$1$1.forEach(Ue,function(Qe,ct){(!(utils$1$1.isUndefined(Qe)||Qe===null)&&s.call(e,Qe,utils$1$1.isString(ct)?ct.trim():ct,ze,le))===!0&&Ee(Qe,ze?ze.concat(ct):[ct])}),N.pop()}}if(!utils$1$1.isObject(t))throw new TypeError("data must be an object");return Ee(t),e}function encode$1(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,n){this._pairs.push([e,n])};prototype.toString=function(e){const n=e?function(i){return e.call(this,i,encode$1)}:encode$1;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,n){if(!e)return t;const i=n&&n.encode||encode;utils$1$1.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let a;if(s?a=s(e,n):a=utils$1$1.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(i),a){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1$1.forEach(this.handlers,function(i){i!==null&&e(i)})}}var InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]};const hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost";var utils$6=Object.freeze({__proto__:null,hasBrowserEnv,hasStandardBrowserWebWorkerEnv,hasStandardBrowserEnv,navigator:_navigator,origin}),platform={...utils$6,...platform$1};function toURLEncodedForm(t,e){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,a){return platform.isNode&&utils$1$1.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils$1$1.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},n=Object.keys(t);let i;const s=n.length;let a;for(i=0;i<s;i++)a=n[i],e[a]=t[a];return e}function formDataToJSON(t){function e(n,i,s,a){let l=n[a++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),p=a>=n.length;return l=!l&&utils$1$1.isArray(s)?s.length:l,p?(utils$1$1.hasOwnProp(s,l)?s[l]=[s[l],i]:s[l]=i,!f):((!s[l]||!utils$1$1.isObject(s[l]))&&(s[l]=[]),e(n,i,s[l],a)&&utils$1$1.isArray(s[l])&&(s[l]=arrayToObject(s[l])),!f)}if(utils$1$1.isFormData(t)&&utils$1$1.isFunction(t.entries)){const n={};return utils$1$1.forEachEntry(t,(i,s)=>{e(parsePropPath(i),s,n,0)}),n}return null}function stringifySafely(t,e,n){if(utils$1$1.isString(t))try{return(e||JSON.parse)(t),utils$1$1.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,a=utils$1$1.isObject(e);if(a&&utils$1$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1$1.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(utils$1$1.isArrayBuffer(e)||utils$1$1.isBuffer(e)||utils$1$1.isStream(e)||utils$1$1.isFile(e)||utils$1$1.isBlob(e)||utils$1$1.isReadableStream(e))return e;if(utils$1$1.isArrayBufferView(e))return e.buffer;if(utils$1$1.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((f=utils$1$1.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return toFormData(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||s?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const n=this.transitional||defaults.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(utils$1$1.isResponse(e)||utils$1$1.isReadableStream(e))return e;if(e&&utils$1$1.isString(e)&&(i&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(f){if(l)throw f.name==="SyntaxError"?AxiosError.from(f,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1$1.forEach(["delete","get","head","post","put","patch"],t=>{defaults.headers[t]={}});var defaults$1=defaults;const ignoreDuplicateOf=utils$1$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var parseHeaders=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),i=l.substring(s+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e};const $internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils$1$1.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const isValidHeaderName=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function matchHeaderValue(t,e,n,i,s){if(utils$1$1.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!utils$1$1.isString(e)){if(utils$1$1.isString(i))return e.indexOf(i)!==-1;if(utils$1$1.isRegExp(i))return i.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function buildAccessors(t,e){const n=utils$1$1.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,a,l){return this[i].call(this,e,s,a,l)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function a(f,p,C){const B=normalizeHeader(p);if(!B)throw new Error("header name must be a non-empty string");const N=utils$1$1.findKey(s,B);(!N||s[N]===void 0||C===!0||C===void 0&&s[N]!==!1)&&(s[N||p]=normalizeValue(f))}const l=(f,p)=>utils$1$1.forEach(f,(C,B)=>a(C,B,p));if(utils$1$1.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(utils$1$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))l(parseHeaders(e),n);else if(utils$1$1.isHeaders(e))for(const[f,p]of e.entries())a(p,f,i);else e!=null&&a(n,e,i);return this}get(e,n){if(e=normalizeHeader(e),e){const i=utils$1$1.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return parseTokens(s);if(utils$1$1.isFunction(n))return n.call(this,s,i);if(utils$1$1.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const i=utils$1$1.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||matchHeaderValue(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function a(l){if(l=normalizeHeader(l),l){const f=utils$1$1.findKey(i,l);f&&(!n||matchHeaderValue(i,i[f],f,n))&&(delete i[f],s=!0)}}return utils$1$1.isArray(e)?e.forEach(a):a(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const a=n[i];(!e||matchHeaderValue(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const n=this,i={};return utils$1$1.forEach(this,(s,a)=>{const l=utils$1$1.findKey(i,a);if(l){n[l]=normalizeValue(s),delete n[a];return}const f=e?formatHeader(a):String(a).trim();f!==a&&delete n[a],n[f]=normalizeValue(s),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils$1$1.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&utils$1$1.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[$internals]=this[$internals]={accessors:{}}).accessors,s=this.prototype;function a(l){const f=normalizeHeader(l);i[f]||(buildAccessors(s,l),i[f]=!0)}return utils$1$1.isArray(e)?e.forEach(a):a(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1$1.reduceDescriptors(AxiosHeaders.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});utils$1$1.freezeMethods(AxiosHeaders);var AxiosHeaders$1=AxiosHeaders;function transformData(t,e){const n=this||defaults$1,i=e||n,s=AxiosHeaders$1.from(i.headers);let a=i.data;return utils$1$1.forEach(t,function(f){a=f.call(n,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,e,n){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils$1$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,a=0,l;return e=e!==void 0?e:1e3,function(p){const C=Date.now(),B=i[a];l||(l=C),n[s]=p,i[s]=C;let N=a,le=0;for(;N!==s;)le+=n[N++],N=N%t;if(s=(s+1)%t,s===a&&(a=(a+1)%t),C-l<e)return;const Ee=B&&C-B;return Ee?Math.round(le*1e3/Ee):void 0}}function throttle(t,e){let n=0,i=1e3/e,s,a;const l=(C,B=Date.now())=>{n=B,s=null,a&&(clearTimeout(a),a=null),t.apply(null,C)};return[(...C)=>{const B=Date.now(),N=B-n;N>=i?l(C,B):(s=C,a||(a=setTimeout(()=>{a=null,l(s)},i-N)))},()=>s&&l(s)]}const progressEventReducer=(t,e,n=3)=>{let i=0;const s=speedometer(50,250);return throttle(a=>{const l=a.loaded,f=a.lengthComputable?a.total:void 0,p=l-i,C=s(p),B=l<=f;i=l;const N={loaded:l,total:f,progress:f?l/f:void 0,bytes:p,rate:C||void 0,estimated:C&&f&&B?(f-l)/C:void 0,event:a,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(N)},n)},progressEventDecorator=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},asyncDecorator=t=>(...e)=>utils$1$1.asap(()=>t(...e));var isURLSameOrigin=platform.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,platform.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(t,e,n,i,s,a){const l=[t+"="+encodeURIComponent(e)];utils$1$1.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),utils$1$1.isString(i)&&l.push("path="+i),utils$1$1.isString(s)&&l.push("domain="+s),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e,n){let i=!isAbsoluteURL(e);return t&&(i||n==!1)?combineURLs(t,e):e}const headersToObject=t=>t instanceof AxiosHeaders$1?{...t}:t;function mergeConfig(t,e){e=e||{};const n={};function i(C,B,N,le){return utils$1$1.isPlainObject(C)&&utils$1$1.isPlainObject(B)?utils$1$1.merge.call({caseless:le},C,B):utils$1$1.isPlainObject(B)?utils$1$1.merge({},B):utils$1$1.isArray(B)?B.slice():B}function s(C,B,N,le){if(utils$1$1.isUndefined(B)){if(!utils$1$1.isUndefined(C))return i(void 0,C,N,le)}else return i(C,B,N,le)}function a(C,B){if(!utils$1$1.isUndefined(B))return i(void 0,B)}function l(C,B){if(utils$1$1.isUndefined(B)){if(!utils$1$1.isUndefined(C))return i(void 0,C)}else return i(void 0,B)}function f(C,B,N){if(N in e)return i(C,B);if(N in t)return i(void 0,C)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(C,B,N)=>s(headersToObject(C),headersToObject(B),N,!0)};return utils$1$1.forEach(Object.keys(Object.assign({},t,e)),function(B){const N=p[B]||s,le=N(t[B],e[B],B);utils$1$1.isUndefined(le)&&N!==f||(n[B]=le)}),n}var resolveConfig=t=>{const e=mergeConfig({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:f}=e;e.headers=l=AxiosHeaders$1.from(l),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(utils$1$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((p=l.getContentType())!==!1){const[C,...B]=p?p.split(";").map(N=>N.trim()).filter(Boolean):[];l.setContentType([C||"multipart/form-data",...B].join("; "))}}if(platform.hasStandardBrowserEnv&&(i&&utils$1$1.isFunction(i)&&(i=i(e)),i||i!==!1&&isURLSameOrigin(e.url))){const C=s&&a&&cookies.read(a);C&&l.set(s,C)}return e};const isXHRAdapterSupported=typeof XMLHttpRequest<"u";var xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(n,i){const s=resolveConfig(t);let a=s.data;const l=AxiosHeaders$1.from(s.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:C}=s,B,N,le,Ee,Ue;function ze(){Ee&&Ee(),Ue&&Ue(),s.cancelToken&&s.cancelToken.unsubscribe(B),s.signal&&s.signal.removeEventListener("abort",B)}let Ze=new XMLHttpRequest;Ze.open(s.method.toUpperCase(),s.url,!0),Ze.timeout=s.timeout;function Qe(){if(!Ze)return;const wt=AxiosHeaders$1.from("getAllResponseHeaders"in Ze&&Ze.getAllResponseHeaders()),nr={data:!f||f==="text"||f==="json"?Ze.responseText:Ze.response,status:Ze.status,statusText:Ze.statusText,headers:wt,config:t,request:Ze};settle(function(or){n(or),ze()},function(or){i(or),ze()},nr),Ze=null}"onloadend"in Ze?Ze.onloadend=Qe:Ze.onreadystatechange=function(){!Ze||Ze.readyState!==4||Ze.status===0&&!(Ze.responseURL&&Ze.responseURL.indexOf("file:")===0)||setTimeout(Qe)},Ze.onabort=function(){Ze&&(i(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,Ze)),Ze=null)},Ze.onerror=function(){i(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,Ze)),Ze=null},Ze.ontimeout=function(){let qt=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const nr=s.transitional||transitionalDefaults;s.timeoutErrorMessage&&(qt=s.timeoutErrorMessage),i(new AxiosError(qt,nr.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,Ze)),Ze=null},a===void 0&&l.setContentType(null),"setRequestHeader"in Ze&&utils$1$1.forEach(l.toJSON(),function(qt,nr){Ze.setRequestHeader(nr,qt)}),utils$1$1.isUndefined(s.withCredentials)||(Ze.withCredentials=!!s.withCredentials),f&&f!=="json"&&(Ze.responseType=s.responseType),C&&([le,Ue]=progressEventReducer(C,!0),Ze.addEventListener("progress",le)),p&&Ze.upload&&([N,Ee]=progressEventReducer(p),Ze.upload.addEventListener("progress",N),Ze.upload.addEventListener("loadend",Ee)),(s.cancelToken||s.signal)&&(B=wt=>{Ze&&(i(!wt||wt.type?new CanceledError(null,t,Ze):wt),Ze.abort(),Ze=null)},s.cancelToken&&s.cancelToken.subscribe(B),s.signal&&(s.signal.aborted?B():s.signal.addEventListener("abort",B)));const ct=parseProtocol(s.url);if(ct&&platform.protocols.indexOf(ct)===-1){i(new AxiosError("Unsupported protocol "+ct+":",AxiosError.ERR_BAD_REQUEST,t));return}Ze.send(a||null)})};const composeSignals=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,s;const a=function(C){if(!s){s=!0,f();const B=C instanceof Error?C:this.reason;i.abort(B instanceof AxiosError?B:new CanceledError(B instanceof Error?B.message:B))}};let l=e&&setTimeout(()=>{l=null,a(new AxiosError(`timeout ${e} of ms exceeded`,AxiosError.ETIMEDOUT))},e);const f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(C=>{C.unsubscribe?C.unsubscribe(a):C.removeEventListener("abort",a)}),t=null)};t.forEach(C=>C.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>utils$1$1.asap(f),p}};var composeSignals$1=composeSignals;const streamChunk=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,s;for(;i<n;)s=i+e,yield t.slice(i,s),i=s},readBytes=async function*(t,e){for await(const n of readStream(t))yield*streamChunk(n,e)},readStream=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},trackStream=(t,e,n,i)=>{const s=readBytes(t,e);let a=0,l,f=p=>{l||(l=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:C,value:B}=await s.next();if(C){f(),p.close();return}let N=B.byteLength;if(n){let le=a+=N;n(le)}p.enqueue(new Uint8Array(B))}catch(C){throw f(C),C}},cancel(p){return f(p),s.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),test=(t,...e)=>{try{return!!t(...e)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let t=!1;const e=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(t=>t.body)};isFetchSupported&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$1$1.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new AxiosError(`Response type '${e}' is not supported`,AxiosError.ERR_NOT_SUPPORT,i)})})})(new Response);const getBodyLength=async t=>{if(t==null)return 0;if(utils$1$1.isBlob(t))return t.size;if(utils$1$1.isSpecCompliantForm(t))return(await new Request(platform.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(utils$1$1.isArrayBufferView(t)||utils$1$1.isArrayBuffer(t))return t.byteLength;if(utils$1$1.isURLSearchParams(t)&&(t=t+""),utils$1$1.isString(t))return(await encodeText(t)).byteLength},resolveBodyLength=async(t,e)=>{const n=utils$1$1.toFiniteNumber(t.getContentLength());return n??getBodyLength(e)};var fetchAdapter=isFetchSupported&&(async t=>{let{url:e,method:n,data:i,signal:s,cancelToken:a,timeout:l,onDownloadProgress:f,onUploadProgress:p,responseType:C,headers:B,withCredentials:N="same-origin",fetchOptions:le}=resolveConfig(t);C=C?(C+"").toLowerCase():"text";let Ee=composeSignals$1([s,a&&a.toAbortSignal()],l),Ue;const ze=Ee&&Ee.unsubscribe&&(()=>{Ee.unsubscribe()});let Ze;try{if(p&&supportsRequestStream&&n!=="get"&&n!=="head"&&(Ze=await resolveBodyLength(B,i))!==0){let nr=new Request(e,{method:"POST",body:i,duplex:"half"}),ir;if(utils$1$1.isFormData(i)&&(ir=nr.headers.get("content-type"))&&B.setContentType(ir),nr.body){const[or,ur]=progressEventDecorator(Ze,progressEventReducer(asyncDecorator(p)));i=trackStream(nr.body,DEFAULT_CHUNK_SIZE,or,ur)}}utils$1$1.isString(N)||(N=N?"include":"omit");const Qe="credentials"in Request.prototype;Ue=new Request(e,{...le,signal:Ee,method:n.toUpperCase(),headers:B.normalize().toJSON(),body:i,duplex:"half",credentials:Qe?N:void 0});let ct=await fetch(Ue);const wt=supportsResponseStream&&(C==="stream"||C==="response");if(supportsResponseStream&&(f||wt&&ze)){const nr={};["status","statusText","headers"].forEach(hr=>{nr[hr]=ct[hr]});const ir=utils$1$1.toFiniteNumber(ct.headers.get("content-length")),[or,ur]=f&&progressEventDecorator(ir,progressEventReducer(asyncDecorator(f),!0))||[];ct=new Response(trackStream(ct.body,DEFAULT_CHUNK_SIZE,or,()=>{ur&&ur(),ze&&ze()}),nr)}C=C||"text";let qt=await resolvers[utils$1$1.findKey(resolvers,C)||"text"](ct,t);return!wt&&ze&&ze(),await new Promise((nr,ir)=>{settle(nr,ir,{data:qt,headers:AxiosHeaders$1.from(ct.headers),status:ct.status,statusText:ct.statusText,config:t,request:Ue})})}catch(Qe){throw ze&&ze(),Qe&&Qe.name==="TypeError"&&/fetch/i.test(Qe.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,Ue),{cause:Qe.cause||Qe}):AxiosError.from(Qe,Qe&&Qe.code,t,Ue)}});const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1$1.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const renderReason=t=>`- ${t}`,isResolvedHandle=t=>utils$1$1.isFunction(t)||t===null||t===!1;var adapters={getAdapter:t=>{t=utils$1$1.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let a=0;a<e;a++){n=t[a];let l;if(i=n,!isResolvedHandle(n)&&(i=knownAdapters[(l=String(n)).toLowerCase()],i===void 0))throw new AxiosError(`Unknown adapter '${l}'`);if(i)break;s[l||"#"+a]=i}if(!i){const a=Object.entries(s).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let l=e?a.length>1?`since :
`+a.map(renderReason).join(`
`):" "+renderReason(a[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(i){return throwIfCancellationRequested(t),i.data=transformData.call(t,t.transformResponse,i),i.headers=AxiosHeaders$1.from(i.headers),i},function(i){return isCancel(i)||(throwIfCancellationRequested(t),i&&i.response&&(i.response.data=transformData.call(t,t.transformResponse,i.response),i.response.headers=AxiosHeaders$1.from(i.response.headers))),Promise.reject(i)})}const VERSION="1.8.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(e,n,i){function s(a,l){return"[Axios v"+VERSION+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,f)=>{if(e===!1)throw new AxiosError(s(l," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,f):!0}};validators$1.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function assertOptions(t,e,n){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const a=i[s],l=e[a];if(l){const f=t[a],p=f===void 0||l(f,a,t);if(p!==!0)throw new AxiosError("option "+a+" must be "+p,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+a,AxiosError.ERR_BAD_OPTION)}}var validator={assertOptions,validators:validators$1};const validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:a}=n;i!==void 0&&validator.assertOptions(i,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),s!=null&&(utils$1$1.isFunction(s)?n.paramsSerializer={serialize:s}:validator.assertOptions(s,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&utils$1$1.merge(a.common,a[n.method]);a&&utils$1$1.forEach(["delete","get","head","post","put","patch","common"],Ue=>{delete a[Ue]}),n.headers=AxiosHeaders$1.concat(l,a);const f=[];let p=!0;this.interceptors.request.forEach(function(ze){typeof ze.runWhen=="function"&&ze.runWhen(n)===!1||(p=p&&ze.synchronous,f.unshift(ze.fulfilled,ze.rejected))});const C=[];this.interceptors.response.forEach(function(ze){C.push(ze.fulfilled,ze.rejected)});let B,N=0,le;if(!p){const Ue=[dispatchRequest.bind(this),void 0];for(Ue.unshift.apply(Ue,f),Ue.push.apply(Ue,C),le=Ue.length,B=Promise.resolve(n);N<le;)B=B.then(Ue[N++],Ue[N++]);return B}le=f.length;let Ee=n;for(N=0;N<le;){const Ue=f[N++],ze=f[N++];try{Ee=Ue(Ee)}catch(Ze){ze.call(this,Ze);break}}try{B=dispatchRequest.call(this,Ee)}catch(Ue){return Promise.reject(Ue)}for(N=0,le=C.length;N<le;)B=B.then(C[N++],C[N++]);return B}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(n,e.params,e.paramsSerializer)}}utils$1$1.forEach(["delete","get","head","options"],function(e){Axios.prototype[e]=function(n,i){return this.request(mergeConfig(i||{},{method:e,url:n,data:(i||{}).data}))}});utils$1$1.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,f){return this.request(mergeConfig(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Axios.prototype[e]=n(),Axios.prototype[e+"Form"]=n(!0)});var Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(f=>{i.subscribe(f),a=f}).then(s);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,f){i.reason||(i.reason=new CanceledError(a,l,f),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new CancelToken(function(s){e=s}),cancel:e}}}var CancelToken$1=CancelToken;function spread(t){return function(n){return t.apply(null,n)}}function isAxiosError(t){return utils$1$1.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,e])=>{HttpStatusCode[e]=t});var HttpStatusCode$1=HttpStatusCode;function createInstance(t){const e=new Axios$1(t),n=bind(Axios$1.prototype.request,e);return utils$1$1.extend(n,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1$1.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return createInstance(mergeConfig(t,s))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils$1$1.isHTMLForm(t)?new FormData(t):t);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;var axios_1$1=axios,axiosRetry$2={exports:{}},cjs={},regeneratorRuntime$1={exports:{}},hasRequiredRegeneratorRuntime;function requireRegeneratorRuntime(){return hasRequiredRegeneratorRuntime||(hasRequiredRegeneratorRuntime=1,function(t){var e=require_typeof().default;function n(){t.exports=n=function(){return s},t.exports.__esModule=!0,t.exports.default=t.exports;var i,s={},a=Object.prototype,l=a.hasOwnProperty,f=Object.defineProperty||function(rr,yt,tr){rr[yt]=tr.value},p=typeof Symbol=="function"?Symbol:{},C=p.iterator||"@@iterator",B=p.asyncIterator||"@@asyncIterator",N=p.toStringTag||"@@toStringTag";function le(rr,yt,tr){return Object.defineProperty(rr,yt,{value:tr,enumerable:!0,configurable:!0,writable:!0}),rr[yt]}try{le({},"")}catch{le=function(tr,Ut,Ft){return tr[Ut]=Ft}}function Ee(rr,yt,tr,Ut){var Ft=yt&&yt.prototype instanceof qt?yt:qt,sr=Object.create(Ft.prototype),vr=new Et(Ut||[]);return f(sr,"_invoke",{value:Vt(rr,tr,vr)}),sr}function Ue(rr,yt,tr){try{return{type:"normal",arg:rr.call(yt,tr)}}catch(Ut){return{type:"throw",arg:Ut}}}s.wrap=Ee;var ze="suspendedStart",Ze="suspendedYield",Qe="executing",ct="completed",wt={};function qt(){}function nr(){}function ir(){}var or={};le(or,C,function(){return this});var ur=Object.getPrototypeOf,hr=ur&&ur(ur(er([])));hr&&hr!==a&&l.call(hr,C)&&(or=hr);var fr=ir.prototype=qt.prototype=Object.create(or);function ar(rr){["next","throw","return"].forEach(function(yt){le(rr,yt,function(tr){return this._invoke(yt,tr)})})}function Lt(rr,yt){function tr(Ft,sr,vr,_r){var dr=Ue(rr[Ft],rr,sr);if(dr.type!=="throw"){var gr=dr.arg,$r=gr.value;return $r&&e($r)=="object"&&l.call($r,"__await")?yt.resolve($r.__await).then(function(pr){tr("next",pr,vr,_r)},function(pr){tr("throw",pr,vr,_r)}):yt.resolve($r).then(function(pr){gr.value=pr,vr(gr)},function(pr){return tr("throw",pr,vr,_r)})}_r(dr.arg)}var Ut;f(this,"_invoke",{value:function(sr,vr){function _r(){return new yt(function(dr,gr){tr(sr,vr,dr,gr)})}return Ut=Ut?Ut.then(_r,_r):_r()}})}function Vt(rr,yt,tr){var Ut=ze;return function(Ft,sr){if(Ut===Qe)throw Error("Generator is already running");if(Ut===ct){if(Ft==="throw")throw sr;return{value:i,done:!0}}for(tr.method=Ft,tr.arg=sr;;){var vr=tr.delegate;if(vr){var _r=tt(vr,tr);if(_r){if(_r===wt)continue;return _r}}if(tr.method==="next")tr.sent=tr._sent=tr.arg;else if(tr.method==="throw"){if(Ut===ze)throw Ut=ct,tr.arg;tr.dispatchException(tr.arg)}else tr.method==="return"&&tr.abrupt("return",tr.arg);Ut=Qe;var dr=Ue(rr,yt,tr);if(dr.type==="normal"){if(Ut=tr.done?ct:Ze,dr.arg===wt)continue;return{value:dr.arg,done:tr.done}}dr.type==="throw"&&(Ut=ct,tr.method="throw",tr.arg=dr.arg)}}}function tt(rr,yt){var tr=yt.method,Ut=rr.iterator[tr];if(Ut===i)return yt.delegate=null,tr==="throw"&&rr.iterator.return&&(yt.method="return",yt.arg=i,tt(rr,yt),yt.method==="throw")||tr!=="return"&&(yt.method="throw",yt.arg=new TypeError("The iterator does not provide a '"+tr+"' method")),wt;var Ft=Ue(Ut,rr.iterator,yt.arg);if(Ft.type==="throw")return yt.method="throw",yt.arg=Ft.arg,yt.delegate=null,wt;var sr=Ft.arg;return sr?sr.done?(yt[rr.resultName]=sr.value,yt.next=rr.nextLoc,yt.method!=="return"&&(yt.method="next",yt.arg=i),yt.delegate=null,wt):sr:(yt.method="throw",yt.arg=new TypeError("iterator result is not an object"),yt.delegate=null,wt)}function Ye(rr){var yt={tryLoc:rr[0]};1 in rr&&(yt.catchLoc=rr[1]),2 in rr&&(yt.finallyLoc=rr[2],yt.afterLoc=rr[3]),this.tryEntries.push(yt)}function ot(rr){var yt=rr.completion||{};yt.type="normal",delete yt.arg,rr.completion=yt}function Et(rr){this.tryEntries=[{tryLoc:"root"}],rr.forEach(Ye,this),this.reset(!0)}function er(rr){if(rr||rr===""){var yt=rr[C];if(yt)return yt.call(rr);if(typeof rr.next=="function")return rr;if(!isNaN(rr.length)){var tr=-1,Ut=function Ft(){for(;++tr<rr.length;)if(l.call(rr,tr))return Ft.value=rr[tr],Ft.done=!1,Ft;return Ft.value=i,Ft.done=!0,Ft};return Ut.next=Ut}}throw new TypeError(e(rr)+" is not iterable")}return nr.prototype=ir,f(fr,"constructor",{value:ir,configurable:!0}),f(ir,"constructor",{value:nr,configurable:!0}),nr.displayName=le(ir,N,"GeneratorFunction"),s.isGeneratorFunction=function(rr){var yt=typeof rr=="function"&&rr.constructor;return!!yt&&(yt===nr||(yt.displayName||yt.name)==="GeneratorFunction")},s.mark=function(rr){return Object.setPrototypeOf?Object.setPrototypeOf(rr,ir):(rr.__proto__=ir,le(rr,N,"GeneratorFunction")),rr.prototype=Object.create(fr),rr},s.awrap=function(rr){return{__await:rr}},ar(Lt.prototype),le(Lt.prototype,B,function(){return this}),s.AsyncIterator=Lt,s.async=function(rr,yt,tr,Ut,Ft){Ft===void 0&&(Ft=Promise);var sr=new Lt(Ee(rr,yt,tr,Ut),Ft);return s.isGeneratorFunction(yt)?sr:sr.next().then(function(vr){return vr.done?vr.value:sr.next()})},ar(fr),le(fr,N,"Generator"),le(fr,C,function(){return this}),le(fr,"toString",function(){return"[object Generator]"}),s.keys=function(rr){var yt=Object(rr),tr=[];for(var Ut in yt)tr.push(Ut);return tr.reverse(),function Ft(){for(;tr.length;){var sr=tr.pop();if(sr in yt)return Ft.value=sr,Ft.done=!1,Ft}return Ft.done=!0,Ft}},s.values=er,Et.prototype={constructor:Et,reset:function(yt){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(ot),!yt)for(var tr in this)tr.charAt(0)==="t"&&l.call(this,tr)&&!isNaN(+tr.slice(1))&&(this[tr]=i)},stop:function(){this.done=!0;var yt=this.tryEntries[0].completion;if(yt.type==="throw")throw yt.arg;return this.rval},dispatchException:function(yt){if(this.done)throw yt;var tr=this;function Ut(gr,$r){return vr.type="throw",vr.arg=yt,tr.next=gr,$r&&(tr.method="next",tr.arg=i),!!$r}for(var Ft=this.tryEntries.length-1;Ft>=0;--Ft){var sr=this.tryEntries[Ft],vr=sr.completion;if(sr.tryLoc==="root")return Ut("end");if(sr.tryLoc<=this.prev){var _r=l.call(sr,"catchLoc"),dr=l.call(sr,"finallyLoc");if(_r&&dr){if(this.prev<sr.catchLoc)return Ut(sr.catchLoc,!0);if(this.prev<sr.finallyLoc)return Ut(sr.finallyLoc)}else if(_r){if(this.prev<sr.catchLoc)return Ut(sr.catchLoc,!0)}else{if(!dr)throw Error("try statement without catch or finally");if(this.prev<sr.finallyLoc)return Ut(sr.finallyLoc)}}}},abrupt:function(yt,tr){for(var Ut=this.tryEntries.length-1;Ut>=0;--Ut){var Ft=this.tryEntries[Ut];if(Ft.tryLoc<=this.prev&&l.call(Ft,"finallyLoc")&&this.prev<Ft.finallyLoc){var sr=Ft;break}}sr&&(yt==="break"||yt==="continue")&&sr.tryLoc<=tr&&tr<=sr.finallyLoc&&(sr=null);var vr=sr?sr.completion:{};return vr.type=yt,vr.arg=tr,sr?(this.method="next",this.next=sr.finallyLoc,wt):this.complete(vr)},complete:function(yt,tr){if(yt.type==="throw")throw yt.arg;return yt.type==="break"||yt.type==="continue"?this.next=yt.arg:yt.type==="return"?(this.rval=this.arg=yt.arg,this.method="return",this.next="end"):yt.type==="normal"&&tr&&(this.next=tr),wt},finish:function(yt){for(var tr=this.tryEntries.length-1;tr>=0;--tr){var Ut=this.tryEntries[tr];if(Ut.finallyLoc===yt)return this.complete(Ut.completion,Ut.afterLoc),ot(Ut),wt}},catch:function(yt){for(var tr=this.tryEntries.length-1;tr>=0;--tr){var Ut=this.tryEntries[tr];if(Ut.tryLoc===yt){var Ft=Ut.completion;if(Ft.type==="throw"){var sr=Ft.arg;ot(Ut)}return sr}}throw Error("illegal catch attempt")},delegateYield:function(yt,tr,Ut){return this.delegate={iterator:er(yt),resultName:tr,nextLoc:Ut},this.method==="next"&&(this.arg=i),wt}},s}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(regeneratorRuntime$1)),regeneratorRuntime$1.exports}var regenerator,hasRequiredRegenerator;function requireRegenerator(){if(hasRequiredRegenerator)return regenerator;hasRequiredRegenerator=1;var t=requireRegeneratorRuntime()();regenerator=t;try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}return regenerator}var isRetryAllowed,hasRequiredIsRetryAllowed;function requireIsRetryAllowed(){if(hasRequiredIsRetryAllowed)return isRetryAllowed;hasRequiredIsRetryAllowed=1;const t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);return isRetryAllowed=e=>!t.has(e&&e.code),isRetryAllowed}var _interopRequireDefault=interopRequireDefaultExports;Object.defineProperty(cjs,"__esModule",{value:!0});cjs.isNetworkError=isNetworkError;cjs.isRetryableError=isRetryableError;cjs.isSafeRequestError=isSafeRequestError;cjs.isIdempotentRequestError=isIdempotentRequestError;cjs.isNetworkOrIdempotentRequestError=isNetworkOrIdempotentRequestError;cjs.exponentialDelay=exponentialDelay;cjs.default=axiosRetry$1;cjs.DEFAULT_OPTIONS=cjs.namespace=void 0;var _regenerator=_interopRequireDefault(requireRegenerator()),_typeof2=_interopRequireDefault(require_typeof()),_asyncToGenerator2=_interopRequireDefault(requireAsyncToGenerator()),_defineProperty2=_interopRequireDefault(requireDefineProperty()),_isRetryAllowed=_interopRequireDefault(requireIsRetryAllowed());function ownKeys(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(i){(0,_defineProperty2.default)(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var namespace="axios-retry";cjs.namespace=namespace;function isNetworkError(t){var e=["ERR_CANCELED","ECONNABORTED"];return!t.response&&!!t.code&&!e.includes(t.code)&&(0,_isRetryAllowed.default)(t)}var SAFE_HTTP_METHODS=["get","head","options"],IDEMPOTENT_HTTP_METHODS=SAFE_HTTP_METHODS.concat(["put","delete"]);function isRetryableError(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status>=500&&t.response.status<=599)}function isSafeRequestError(t){return t.config?isRetryableError(t)&&SAFE_HTTP_METHODS.indexOf(t.config.method)!==-1:!1}function isIdempotentRequestError(t){return t.config?isRetryableError(t)&&IDEMPOTENT_HTTP_METHODS.indexOf(t.config.method)!==-1:!1}function isNetworkOrIdempotentRequestError(t){return isNetworkError(t)||isIdempotentRequestError(t)}function noDelay(){return 0}function exponentialDelay(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:100,n=Math.pow(2,t)*e,i=n*.2*Math.random();return n+i}var DEFAULT_OPTIONS={retries:3,retryCondition:isNetworkOrIdempotentRequestError,retryDelay:noDelay,shouldResetTimeout:!1,onRetry:function(){}};cjs.DEFAULT_OPTIONS=DEFAULT_OPTIONS;function getRequestOptions(t,e){return _objectSpread(_objectSpread(_objectSpread({},DEFAULT_OPTIONS),e),t[namespace])}function getCurrentState(t,e){var n=getRequestOptions(t,e);return n.retryCount=n.retryCount||0,t[namespace]=n,n}function fixConfig(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}function shouldRetry(t,e){return _shouldRetry.apply(this,arguments)}function _shouldRetry(){return _shouldRetry=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function t(e,n){var i,s,a,l;return _regenerator.default.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(i=e.retries,s=e.retryCondition,a=e.retryCount<i&&s(n),(0,_typeof2.default)(a)!=="object"){p.next=13;break}return p.prev=3,p.next=6,a;case 6:return l=p.sent,p.abrupt("return",l!==!1);case 10:return p.prev=10,p.t0=p.catch(3),p.abrupt("return",!1);case 13:return p.abrupt("return",a);case 14:case"end":return p.stop()}},t,null,[[3,10]])})),_shouldRetry.apply(this,arguments)}function axiosRetry$1(t,e){var n=t.interceptors.request.use(function(s){var a=getCurrentState(s,e);return a.lastRequestTime=Date.now(),s}),i=t.interceptors.response.use(null,function(){var s=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function a(l){var f,p,C,B,N,le,Ee,Ue;return _regenerator.default.wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:if(f=l.config,f){Ze.next=3;break}return Ze.abrupt("return",Promise.reject(l));case 3:return p=getCurrentState(f,e),Ze.next=6,shouldRetry(p,l);case 6:if(!Ze.sent){Ze.next=21;break}if(p.retryCount+=1,C=p.retryDelay,B=p.shouldResetTimeout,N=p.onRetry,le=C(p.retryCount,l),fixConfig(t,f),!(!B&&f.timeout&&p.lastRequestTime)){Ze.next=17;break}if(Ee=Date.now()-p.lastRequestTime,Ue=f.timeout-Ee-le,!(Ue<=0)){Ze.next=16;break}return Ze.abrupt("return",Promise.reject(l));case 16:f.timeout=Ue;case 17:return f.transformRequest=[function(Qe){return Qe}],Ze.next=20,N(p.retryCount,l,f);case 20:return Ze.abrupt("return",new Promise(function(Qe){return setTimeout(function(){return Qe(t(f))},le)}));case 21:return Ze.abrupt("return",Promise.reject(l));case 22:case"end":return Ze.stop()}},a)}));return function(a){return s.apply(this,arguments)}}());return{requestInterceptorId:n,responseInterceptorId:i}}axiosRetry$1.isNetworkError=isNetworkError;axiosRetry$1.isSafeRequestError=isSafeRequestError;axiosRetry$1.isIdempotentRequestError=isIdempotentRequestError;axiosRetry$1.isNetworkOrIdempotentRequestError=isNetworkOrIdempotentRequestError;axiosRetry$1.exponentialDelay=exponentialDelay;axiosRetry$1.isRetryableError=isRetryableError;const axiosRetry=cjs.default;axiosRetry$2.exports=axiosRetry;axiosRetry$2.exports.default=axiosRetry;var axiosRetryExports=axiosRetry$2.exports,ResillientWebSocket={},ws=null;typeof WebSocket<"u"?ws=WebSocket:typeof MozWebSocket<"u"?ws=MozWebSocket:typeof commonjsGlobal$1<"u"?ws=commonjsGlobal$1.WebSocket||commonjsGlobal$1.MozWebSocket:typeof window<"u"?ws=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(ws=self.WebSocket||self.MozWebSocket);var browser$c=ws,__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ResillientWebSocket,"__esModule",{value:!0});ResillientWebSocket.ResilientWebSocket=void 0;const isomorphic_ws_1=__importDefault$1(browser$c),PING_TIMEOUT_DURATION=33e3;class ResilientWebSocket{constructor(e,n){Or(this,"endpoint");Or(this,"wsClient");Or(this,"wsUserClosed");Or(this,"wsFailedAttempts");Or(this,"pingTimeout");Or(this,"logger");Or(this,"onError");Or(this,"onMessage");Or(this,"onReconnect");this.endpoint=e,this.logger=n,this.wsFailedAttempts=0,this.onError=i=>{var s;(s=this.logger)==null||s.error(i)},this.wsUserClosed=!0,this.onMessage=()=>{},this.onReconnect=()=>{}}async send(e){var n,i,s;(n=this.logger)==null||n.info(`Sending ${e}`),await this.waitForMaybeReadyWebSocket(),this.wsClient===void 0?(i=this.logger)==null||i.error("Couldn't connect to the websocket server. Error callback is called."):(s=this.wsClient)==null||s.send(e)}async startWebSocket(){var e;this.wsClient===void 0&&((e=this.logger)==null||e.info("Creating Web Socket client"),this.wsClient=new isomorphic_ws_1.default(this.endpoint),this.wsUserClosed=!1,this.wsClient.onopen=()=>{this.wsFailedAttempts=0,this.wsClient.on!==void 0&&this.heartbeat()},this.wsClient.onerror=n=>{this.onError(n.error)},this.wsClient.onmessage=n=>{this.onMessage(n.data)},this.wsClient.onclose=async()=>{var n,i;if(this.pingTimeout!==void 0&&clearInterval(this.pingTimeout),this.wsUserClosed===!1){this.wsFailedAttempts+=1,this.wsClient=void 0;const s=expoBackoff(this.wsFailedAttempts);(n=this.logger)==null||n.error(`Connection closed unexpectedly or because of timeout. Reconnecting after ${s}ms.`),await sleep(s),this.restartUnexpectedClosedWebsocket()}else(i=this.logger)==null||i.info("The connection has been closed successfully.")},this.wsClient.on!==void 0&&this.wsClient.on("ping",this.heartbeat.bind(this)))}heartbeat(){var e;(e=this.logger)==null||e.info("Heartbeat"),this.pingTimeout!==void 0&&clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,i;(n=this.logger)==null||n.warn("Connection timed out. Reconnecting..."),(i=this.wsClient)==null||i.terminate(),this.restartUnexpectedClosedWebsocket()},PING_TIMEOUT_DURATION)}async waitForMaybeReadyWebSocket(){let e=0;for(;this.wsClient!==void 0&&this.wsClient.readyState!==this.wsClient.OPEN;)if(e>5e3){this.wsClient.close();return}else e+=10,await sleep(10)}async restartUnexpectedClosedWebsocket(){var e;if(this.wsUserClosed!==!0){if(await this.startWebSocket(),await this.waitForMaybeReadyWebSocket(),this.wsClient===void 0){(e=this.logger)==null||e.error("Couldn't reconnect to websocket. Error callback is called.");return}this.onReconnect()}}closeWebSocket(){if(this.wsClient!==void 0){const e=this.wsClient;this.wsClient=void 0,e.close()}this.wsUserClosed=!0}}ResillientWebSocket.ResilientWebSocket=ResilientWebSocket;async function sleep(t){return new Promise(e=>setTimeout(e,t))}function expoBackoff(t){return 2**t*100}var utils$5={};Object.defineProperty(utils$5,"__esModule",{value:!0});utils$5.removeLeading0xIfExists=utils$5.makeWebsocketUrl=void 0;function makeWebsocketUrl(t){const e=new URL("ws",t),n=e.protocol==="https:";return e.protocol=n?"wss:":"ws:",e.toString()}utils$5.makeWebsocketUrl=makeWebsocketUrl;function removeLeading0xIfExists(t){return t.startsWith("0x")?t.substring(2):t}utils$5.removeLeading0xIfExists=removeLeading0xIfExists;var __importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(PriceServiceConnection$1,"__esModule",{value:!0});PriceServiceConnection$1.PriceServiceConnection=void 0;const price_service_sdk_1=lib,axios_1=__importDefault(axios_1$1),axios_retry_1=__importDefault(axiosRetryExports),ResillientWebSocket_1=ResillientWebSocket,utils_1$1=utils$5;class PriceServiceConnection{constructor(e,n){Or(this,"httpClient");Or(this,"priceFeedCallbacks");Or(this,"wsClient");Or(this,"wsEndpoint");Or(this,"logger");Or(this,"priceFeedRequestConfig");Or(this,"onWsError");var i,s,a;this.httpClient=axios_1.default.create({baseURL:e,timeout:(n==null?void 0:n.timeout)||5e3}),(0,axios_retry_1.default)(this.httpClient,{retries:(n==null?void 0:n.httpRetries)||3,retryDelay:axios_retry_1.default.exponentialDelay}),this.priceFeedRequestConfig={binary:(i=n==null?void 0:n.priceFeedRequestConfig)==null?void 0:i.binary,verbose:((s=n==null?void 0:n.priceFeedRequestConfig)==null?void 0:s.verbose)??(n==null?void 0:n.verbose),allowOutOfOrder:(a=n==null?void 0:n.priceFeedRequestConfig)==null?void 0:a.allowOutOfOrder},this.priceFeedCallbacks=new Map,this.logger=(n==null?void 0:n.logger)||{trace:()=>{},debug:()=>{},info:()=>{},warn:console.warn,error:console.error},this.onWsError=l=>{this.logger.error(l),typeof process$1<"u"&&typeof process$1.exit=="function"?(this.logger.error("Halting the process due to the websocket error"),process$1.exit(1)):this.logger.error("Cannot halt process. Please handle the websocket error.")},this.wsEndpoint=(0,utils_1$1.makeWebsocketUrl)(e)}async getLatestPriceFeeds(e){return e.length===0?[]:(await this.httpClient.get("/api/latest_price_feeds",{params:{ids:e,verbose:this.priceFeedRequestConfig.verbose,binary:this.priceFeedRequestConfig.binary}})).data.map(s=>price_service_sdk_1.PriceFeed.fromJson(s))}async getLatestVaas(e){return(await this.httpClient.get("/api/latest_vaas",{params:{ids:e}})).data}async getVaa(e,n){const i=await this.httpClient.get("/api/get_vaa",{params:{id:e,publish_time:n}});return[i.data.vaa,i.data.publishTime]}async getPriceFeed(e,n){const i=await this.httpClient.get("/api/get_price_feed",{params:{id:e,publish_time:n,verbose:this.priceFeedRequestConfig.verbose,binary:this.priceFeedRequestConfig.binary}});return price_service_sdk_1.PriceFeed.fromJson(i.data)}async getPriceFeedIds(){return(await this.httpClient.get("/api/price_feed_ids")).data}async subscribePriceFeedUpdates(e,n){var a;this.wsClient===void 0&&await this.startWebSocket(),e=e.map(l=>(0,utils_1$1.removeLeading0xIfExists)(l));const i=[];for(const l of e)this.priceFeedCallbacks.has(l)||(this.priceFeedCallbacks.set(l,new Set),i.push(l)),this.priceFeedCallbacks.get(l).add(n);const s={ids:i,type:"subscribe",verbose:this.priceFeedRequestConfig.verbose,binary:this.priceFeedRequestConfig.binary,allow_out_of_order:this.priceFeedRequestConfig.allowOutOfOrder};await((a=this.wsClient)==null?void 0:a.send(JSON.stringify(s)))}async unsubscribePriceFeedUpdates(e,n){var a;this.wsClient===void 0&&await this.startWebSocket(),e=e.map(l=>(0,utils_1$1.removeLeading0xIfExists)(l));const i=[];for(const l of e)if(this.priceFeedCallbacks.has(l)){let f=!1;n===void 0?(this.priceFeedCallbacks.delete(l),f=!0):(this.priceFeedCallbacks.get(l).delete(n),this.priceFeedCallbacks.get(l).size===0&&(this.priceFeedCallbacks.delete(l),f=!0)),f&&i.push(l)}const s={ids:i,type:"unsubscribe"};await((a=this.wsClient)==null?void 0:a.send(JSON.stringify(s))),this.priceFeedCallbacks.size===0&&this.closeWebSocket()}async startWebSocket(){if(this.wsEndpoint===void 0)throw new Error("Websocket endpoint is undefined.");this.wsClient=new ResillientWebSocket_1.ResilientWebSocket(this.wsEndpoint,this.logger),this.wsClient.onError=this.onWsError,this.wsClient.onReconnect=()=>{var e;if(this.priceFeedCallbacks.size>0){const n={ids:Array.from(this.priceFeedCallbacks.keys()),type:"subscribe",verbose:this.priceFeedRequestConfig.verbose,binary:this.priceFeedRequestConfig.binary,allow_out_of_order:this.priceFeedRequestConfig.allowOutOfOrder};this.logger.info("Resubscribing to existing price feeds."),(e=this.wsClient)==null||e.send(JSON.stringify(n))}},this.wsClient.onMessage=e=>{this.logger.info(`Received message ${e.toString()}`);let n;try{n=JSON.parse(e.toString())}catch(i){this.logger.error(`Error parsing message ${e.toString()} as JSON.`),this.logger.error(i),this.onWsError(i);return}if(n.type==="response")n.status==="error"&&(this.logger.error(`Error response from the websocket server ${n.error}.`),this.onWsError(new Error(n.error)));else if(n.type==="price_update"){let i;try{i=price_service_sdk_1.PriceFeed.fromJson(n.price_feed)}catch(s){this.logger.error(`Error parsing price feeds from message ${e.toString()}.`),this.logger.error(s),this.onWsError(s);return}if(this.priceFeedCallbacks.has(i.id))for(const s of this.priceFeedCallbacks.get(i.id))s(i)}else this.logger.warn(`Ignoring unsupported server response ${e.toString()}.`)},await this.wsClient.startWebSocket()}closeWebSocket(){var e;(e=this.wsClient)==null||e.closeWebSocket(),this.wsClient=void 0,this.priceFeedCallbacks.clear()}}PriceServiceConnection$1.PriceServiceConnection=PriceServiceConnection;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.parseAccumulatorUpdateData=t.isAccumulatorUpdateData=t.Price=t.PriceFeed=t.PriceFeedMetadata=t.PriceServiceConnection=void 0;var e=PriceServiceConnection$1;Object.defineProperty(t,"PriceServiceConnection",{enumerable:!0,get:function(){return e.PriceServiceConnection}});var n=lib;Object.defineProperty(t,"PriceFeedMetadata",{enumerable:!0,get:function(){return n.PriceFeedMetadata}}),Object.defineProperty(t,"PriceFeed",{enumerable:!0,get:function(){return n.PriceFeed}}),Object.defineProperty(t,"Price",{enumerable:!0,get:function(){return n.Price}}),Object.defineProperty(t,"isAccumulatorUpdateData",{enumerable:!0,get:function(){return n.isAccumulatorUpdateData}}),Object.defineProperty(t,"parseAccumulatorUpdateData",{enumerable:!0,get:function(){return n.parseAccumulatorUpdateData}})})(lib$1);Object.defineProperty(SuiPriceServiceConnection$1,"__esModule",{value:!0});SuiPriceServiceConnection$1.SuiPriceServiceConnection=void 0;const price_service_client_1=lib$1,buffer_1$1=require$$1$3;class SuiPriceServiceConnection extends price_service_client_1.PriceServiceConnection{async getPriceFeedsUpdateData(e){return(await this.getLatestVaas(e)).map(i=>buffer_1$1.Buffer.from(i,"base64"))}}SuiPriceServiceConnection$1.SuiPriceServiceConnection=SuiPriceServiceConnection;var client={},__defProp$e=Object.defineProperty,__getOwnPropDesc$c=Object.getOwnPropertyDescriptor,__getOwnPropNames$c=Object.getOwnPropertyNames,__hasOwnProp$c=Object.prototype.hasOwnProperty,__export$b=(t,e)=>{for(var n in e)__defProp$e(t,n,{get:e[n],enumerable:!0})},__copyProps$c=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$c(e))!__hasOwnProp$c.call(t,s)&&s!==n&&__defProp$e(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$c(e,s))||i.enumerable});return t},__toCommonJS$b=t=>__copyProps$c(__defProp$e({},"__esModule",{value:!0}),t),format_exports={};__export$b(format_exports,{formatAddress:()=>formatAddress,formatDigest:()=>formatDigest});var format$1=__toCommonJS$b(format_exports);const ELLIPSIS="";function formatAddress(t){if(t.length<=6)return t;const e=t.startsWith("0x")?2:0;return`0x${t.slice(e,e+4)}${ELLIPSIS}${t.slice(-4)}`}function formatDigest(t){return`${t.slice(0,10)}${ELLIPSIS}`}const require$$2$1=getAugmentedNamespace(esm);var __defProp$d=Object.defineProperty,__getOwnPropDesc$b=Object.getOwnPropertyDescriptor,__getOwnPropNames$b=Object.getOwnPropertyNames,__hasOwnProp$b=Object.prototype.hasOwnProperty,__export$a=(t,e)=>{for(var n in e)__defProp$d(t,n,{get:e[n],enumerable:!0})},__copyProps$b=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$b(e))!__hasOwnProp$b.call(t,s)&&s!==n&&__defProp$d(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$b(e,s))||i.enumerable});return t},__toCommonJS$a=t=>__copyProps$b(__defProp$d({},"__esModule",{value:!0}),t),suins_exports={};__export$a(suins_exports,{isValidSuiNSName:()=>isValidSuiNSName,normalizeSuiNSName:()=>normalizeSuiNSName});var suins=__toCommonJS$a(suins_exports);const SUI_NS_NAME_REGEX=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,SUI_NS_DOMAIN_REGEX=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,MAX_SUI_NS_NAME_LENGTH=235;function isValidSuiNSName(t){return t.length>MAX_SUI_NS_NAME_LENGTH?!1:t.includes("@")?SUI_NS_NAME_REGEX.test(t):SUI_NS_DOMAIN_REGEX.test(t)}function normalizeSuiNSName(t,e="at"){const n=t.toLowerCase();let i;if(n.includes("@")){if(!SUI_NS_NAME_REGEX.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,a]=n.split("@");i=[...s?s.split("."):[],a]}else{if(!SUI_NS_DOMAIN_REGEX.test(n))throw new Error(`Invalid SuiNS name ${t}`);i=n.split(".").slice(0,-1)}return e==="dot"?`${i.join(".")}.sui`:`${i.slice(0,-1).join(".")}@${i[i.length-1]}`}var __defProp$c=Object.defineProperty,__getOwnPropDesc$a=Object.getOwnPropertyDescriptor,__getOwnPropNames$a=Object.getOwnPropertyNames,__hasOwnProp$a=Object.prototype.hasOwnProperty,__export$9=(t,e)=>{for(var n in e)__defProp$c(t,n,{get:e[n],enumerable:!0})},__copyProps$a=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$a(e))!__hasOwnProp$a.call(t,s)&&s!==n&&__defProp$c(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$a(e,s))||i.enumerable});return t},__toCommonJS$9=t=>__copyProps$a(__defProp$c({},"__esModule",{value:!0}),t),move_registry_exports={};__export$9(move_registry_exports,{isValidNamedPackage:()=>isValidNamedPackage,isValidNamedType:()=>isValidNamedType});var moveRegistry=__toCommonJS$9(move_registry_exports),import_suins$1=suins;const NAME_PATTERN=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,VERSION_REGEX=/^\d+$/,MAX_APP_SIZE=64,NAME_SEPARATOR="/",isValidNamedPackage=t=>{const e=t.split(NAME_SEPARATOR);if(e.length<2||e.length>3)return!1;const[n,i,s]=e;return s!==void 0&&!VERSION_REGEX.test(s)||!(0,import_suins$1.isValidSuiNSName)(n)?!1:NAME_PATTERN.test(i)&&i.length<MAX_APP_SIZE},isValidNamedType=t=>{const e=t.split(/::|<|>|,/);for(const n of e)if(n.includes(NAME_SEPARATOR)&&!isValidNamedPackage(n))return!1;return!0};var __defProp$b=Object.defineProperty,__getOwnPropDesc$9=Object.getOwnPropertyDescriptor,__getOwnPropNames$9=Object.getOwnPropertyNames,__hasOwnProp$9=Object.prototype.hasOwnProperty,__export$8=(t,e)=>{for(var n in e)__defProp$b(t,n,{get:e[n],enumerable:!0})},__copyProps$9=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$9(e))!__hasOwnProp$9.call(t,s)&&s!==n&&__defProp$b(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$9(e,s))||i.enumerable});return t},__toCommonJS$8=t=>__copyProps$9(__defProp$b({},"__esModule",{value:!0}),t),sui_types_exports={};__export$8(sui_types_exports,{SUI_ADDRESS_LENGTH:()=>SUI_ADDRESS_LENGTH,isValidSuiAddress:()=>isValidSuiAddress,isValidSuiObjectId:()=>isValidSuiObjectId,isValidTransactionDigest:()=>isValidTransactionDigest,normalizeStructTag:()=>normalizeStructTag,normalizeSuiAddress:()=>normalizeSuiAddress,normalizeSuiObjectId:()=>normalizeSuiObjectId,parseStructTag:()=>parseStructTag});var suiTypes=__toCommonJS$8(sui_types_exports),import_bcs$7=require$$2$1,import_move_registry$1=moveRegistry;const TX_DIGEST_LENGTH=32;function isValidTransactionDigest(t){try{return(0,import_bcs$7.fromBase58)(t).length===TX_DIGEST_LENGTH}catch{return!1}}const SUI_ADDRESS_LENGTH=32;function isValidSuiAddress(t){return isHex$1(t)&&getHexByteLength(t)===SUI_ADDRESS_LENGTH}function isValidSuiObjectId(t){return isValidSuiAddress(t)}function parseTypeTag(t){return t.includes("::")?parseStructTag(t):t}function parseStructTag(t){const[e,n]=t.split("::"),i=(0,import_move_registry$1.isValidNamedPackage)(e),s=t.slice(e.length+n.length+4),a=s.includes("<")?s.slice(0,s.indexOf("<")):s,l=s.includes("<")?(0,import_bcs$7.splitGenericParameters)(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(f=>parseTypeTag(f.trim())):[];return{address:i?e:normalizeSuiAddress(e),module:n,name:a,typeParams:l}}function normalizeStructTag(t){const{address:e,module:n,name:i,typeParams:s}=typeof t=="string"?parseStructTag(t):t,a=(s==null?void 0:s.length)>0?`<${s.map(l=>typeof l=="string"?l:normalizeStructTag(l)).join(",")}>`:"";return`${e}::${n}::${i}${a}`}function normalizeSuiAddress(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(SUI_ADDRESS_LENGTH*2,"0")}`}function normalizeSuiObjectId(t,e=!1){return normalizeSuiAddress(t,e)}function isHex$1(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function getHexByteLength(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}var __defProp$a=Object.defineProperty,__getOwnPropDesc$8=Object.getOwnPropertyDescriptor,__getOwnPropNames$8=Object.getOwnPropertyNames,__hasOwnProp$8=Object.prototype.hasOwnProperty,__export$7=(t,e)=>{for(var n in e)__defProp$a(t,n,{get:e[n],enumerable:!0})},__copyProps$8=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$8(e))!__hasOwnProp$8.call(t,s)&&s!==n&&__defProp$a(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$8(e,s))||i.enumerable});return t},__toCommonJS$7=t=>__copyProps$8(__defProp$a({},"__esModule",{value:!0}),t),constants_exports={};__export$7(constants_exports,{MIST_PER_SUI:()=>MIST_PER_SUI,MOVE_STDLIB_ADDRESS:()=>MOVE_STDLIB_ADDRESS,SUI_CLOCK_OBJECT_ID:()=>SUI_CLOCK_OBJECT_ID,SUI_DECIMALS:()=>SUI_DECIMALS,SUI_FRAMEWORK_ADDRESS:()=>SUI_FRAMEWORK_ADDRESS,SUI_SYSTEM_ADDRESS:()=>SUI_SYSTEM_ADDRESS,SUI_SYSTEM_MODULE_NAME:()=>SUI_SYSTEM_MODULE_NAME,SUI_SYSTEM_STATE_OBJECT_ID:()=>SUI_SYSTEM_STATE_OBJECT_ID,SUI_TYPE_ARG:()=>SUI_TYPE_ARG});var constants$1=__toCommonJS$7(constants_exports),import_sui_types$3=suiTypes;const SUI_DECIMALS=9,MIST_PER_SUI=BigInt(1e9),MOVE_STDLIB_ADDRESS="0x1",SUI_FRAMEWORK_ADDRESS="0x2",SUI_SYSTEM_ADDRESS="0x3",SUI_CLOCK_OBJECT_ID=(0,import_sui_types$3.normalizeSuiObjectId)("0x6"),SUI_SYSTEM_MODULE_NAME="sui_system",SUI_TYPE_ARG=`${SUI_FRAMEWORK_ADDRESS}::sui::SUI`,SUI_SYSTEM_STATE_OBJECT_ID=(0,import_sui_types$3.normalizeSuiObjectId)("0x5"),require$$1$2=getAugmentedNamespace(blake2b$2);var __defProp$9=Object.defineProperty,__getOwnPropDesc$7=Object.getOwnPropertyDescriptor,__getOwnPropNames$7=Object.getOwnPropertyNames,__hasOwnProp$7=Object.prototype.hasOwnProperty,__export$6=(t,e)=>{for(var n in e)__defProp$9(t,n,{get:e[n],enumerable:!0})},__copyProps$7=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$7(e))!__hasOwnProp$7.call(t,s)&&s!==n&&__defProp$9(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$7(e,s))||i.enumerable});return t},__toCommonJS$6=t=>__copyProps$7(__defProp$9({},"__esModule",{value:!0}),t),type_tag_serializer_exports={};__export$6(type_tag_serializer_exports,{TypeTagSerializer:()=>TypeTagSerializer});var typeTagSerializer=__toCommonJS$6(type_tag_serializer_exports),import_bcs$6=require$$2$1,import_sui_types$2=suiTypes;const VECTOR_REGEX=/^vector<(.+)>$/,STRUCT_REGEX=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class TypeTagSerializer{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const i=e.match(VECTOR_REGEX);if(i)return{vector:TypeTagSerializer.parseFromStr(i[1],n)};const s=e.match(STRUCT_REGEX);if(s)return{struct:{address:n?(0,import_sui_types$2.normalizeSuiAddress)(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:TypeTagSerializer.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return(0,import_bcs$6.splitGenericParameters)(e).map(i=>TypeTagSerializer.parseFromStr(i,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${TypeTagSerializer.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,i=n.typeParams.map(TypeTagSerializer.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${i?`<${i}>`:""}`}throw new Error("Invalid TypeTag")}}var __defProp$8=Object.defineProperty,__getOwnPropDesc$6=Object.getOwnPropertyDescriptor,__getOwnPropNames$6=Object.getOwnPropertyNames,__hasOwnProp$6=Object.prototype.hasOwnProperty,__export$5=(t,e)=>{for(var n in e)__defProp$8(t,n,{get:e[n],enumerable:!0})},__copyProps$6=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$6(e))!__hasOwnProp$6.call(t,s)&&s!==n&&__defProp$8(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$6(e,s))||i.enumerable});return t},__toCommonJS$5=t=>__copyProps$6(__defProp$8({},"__esModule",{value:!0}),t),bcs_exports$1={};__export$5(bcs_exports$1,{Address:()=>Address,AppId:()=>AppId,Argument:()=>Argument,CallArg:()=>CallArg,Command:()=>Command,CompressedSignature:()=>CompressedSignature,GasData:()=>GasData,Intent:()=>Intent,IntentMessage:()=>IntentMessage,IntentScope:()=>IntentScope,IntentVersion:()=>IntentVersion,MultiSig:()=>MultiSig,MultiSigPkMap:()=>MultiSigPkMap,MultiSigPublicKey:()=>MultiSigPublicKey,ObjectArg:()=>ObjectArg,ObjectDigest:()=>ObjectDigest,Owner:()=>Owner,PasskeyAuthenticator:()=>PasskeyAuthenticator,ProgrammableMoveCall:()=>ProgrammableMoveCall,ProgrammableTransaction:()=>ProgrammableTransaction,PublicKey:()=>PublicKey,SenderSignedData:()=>SenderSignedData,SenderSignedTransaction:()=>SenderSignedTransaction,SharedObjectRef:()=>SharedObjectRef,StructTag:()=>StructTag,SuiObjectRef:()=>SuiObjectRef,TransactionData:()=>TransactionData,TransactionDataV1:()=>TransactionDataV1,TransactionExpiration:()=>TransactionExpiration,TransactionKind:()=>TransactionKind,TypeTag:()=>TypeTag,base64String:()=>base64String});var bcs$1=__toCommonJS$5(bcs_exports$1),import_bcs$5=require$$2$1,import_sui_types$1=suiTypes,import_type_tag_serializer$1=typeTagSerializer;function unsafe_u64(t){return import_bcs$5.bcs.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function optionEnum(t){return import_bcs$5.bcs.enum("Option",{None:null,Some:t})}const Address=import_bcs$5.bcs.bytes(import_sui_types$1.SUI_ADDRESS_LENGTH).transform({validate:t=>{const e=typeof t=="string"?t:(0,import_bcs$5.toHex)(t);if(!e||!(0,import_sui_types$1.isValidSuiAddress)((0,import_sui_types$1.normalizeSuiAddress)(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?(0,import_bcs$5.fromHex)((0,import_sui_types$1.normalizeSuiAddress)(t)):t,output:t=>(0,import_sui_types$1.normalizeSuiAddress)((0,import_bcs$5.toHex)(t))}),ObjectDigest=import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()).transform({name:"ObjectDigest",input:t=>(0,import_bcs$5.fromBase58)(t),output:t=>(0,import_bcs$5.toBase58)(new Uint8Array(t)),validate:t=>{if((0,import_bcs$5.fromBase58)(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),SuiObjectRef=import_bcs$5.bcs.struct("SuiObjectRef",{objectId:Address,version:import_bcs$5.bcs.u64(),digest:ObjectDigest}),SharedObjectRef=import_bcs$5.bcs.struct("SharedObjectRef",{objectId:Address,initialSharedVersion:import_bcs$5.bcs.u64(),mutable:import_bcs$5.bcs.bool()}),ObjectArg=import_bcs$5.bcs.enum("ObjectArg",{ImmOrOwnedObject:SuiObjectRef,SharedObject:SharedObjectRef,Receiving:SuiObjectRef}),Owner=import_bcs$5.bcs.enum("Owner",{AddressOwner:Address,ObjectOwner:Address,Shared:import_bcs$5.bcs.struct("Shared",{initialSharedVersion:import_bcs$5.bcs.u64()}),Immutable:null,ConsensusV2:import_bcs$5.bcs.struct("ConsensusV2",{authenticator:import_bcs$5.bcs.enum("Authenticator",{SingleOwner:Address}),startVersion:import_bcs$5.bcs.u64()})}),CallArg=import_bcs$5.bcs.enum("CallArg",{Pure:import_bcs$5.bcs.struct("Pure",{bytes:import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()).transform({input:t=>typeof t=="string"?(0,import_bcs$5.fromBase64)(t):t,output:t=>(0,import_bcs$5.toBase64)(new Uint8Array(t))})}),Object:ObjectArg}),InnerTypeTag=import_bcs$5.bcs.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:import_bcs$5.bcs.lazy(()=>InnerTypeTag),struct:import_bcs$5.bcs.lazy(()=>StructTag),u16:null,u32:null,u256:null}),TypeTag=InnerTypeTag.transform({input:t=>typeof t=="string"?import_type_tag_serializer$1.TypeTagSerializer.parseFromStr(t,!0):t,output:t=>import_type_tag_serializer$1.TypeTagSerializer.tagToString(t)}),Argument=import_bcs$5.bcs.enum("Argument",{GasCoin:null,Input:import_bcs$5.bcs.u16(),Result:import_bcs$5.bcs.u16(),NestedResult:import_bcs$5.bcs.tuple([import_bcs$5.bcs.u16(),import_bcs$5.bcs.u16()])}),ProgrammableMoveCall=import_bcs$5.bcs.struct("ProgrammableMoveCall",{package:Address,module:import_bcs$5.bcs.string(),function:import_bcs$5.bcs.string(),typeArguments:import_bcs$5.bcs.vector(TypeTag),arguments:import_bcs$5.bcs.vector(Argument)}),Command=import_bcs$5.bcs.enum("Command",{MoveCall:ProgrammableMoveCall,TransferObjects:import_bcs$5.bcs.struct("TransferObjects",{objects:import_bcs$5.bcs.vector(Argument),address:Argument}),SplitCoins:import_bcs$5.bcs.struct("SplitCoins",{coin:Argument,amounts:import_bcs$5.bcs.vector(Argument)}),MergeCoins:import_bcs$5.bcs.struct("MergeCoins",{destination:Argument,sources:import_bcs$5.bcs.vector(Argument)}),Publish:import_bcs$5.bcs.struct("Publish",{modules:import_bcs$5.bcs.vector(import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()).transform({input:t=>typeof t=="string"?(0,import_bcs$5.fromBase64)(t):t,output:t=>(0,import_bcs$5.toBase64)(new Uint8Array(t))})),dependencies:import_bcs$5.bcs.vector(Address)}),MakeMoveVec:import_bcs$5.bcs.struct("MakeMoveVec",{type:optionEnum(TypeTag).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:import_bcs$5.bcs.vector(Argument)}),Upgrade:import_bcs$5.bcs.struct("Upgrade",{modules:import_bcs$5.bcs.vector(import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()).transform({input:t=>typeof t=="string"?(0,import_bcs$5.fromBase64)(t):t,output:t=>(0,import_bcs$5.toBase64)(new Uint8Array(t))})),dependencies:import_bcs$5.bcs.vector(Address),package:Address,ticket:Argument})}),ProgrammableTransaction=import_bcs$5.bcs.struct("ProgrammableTransaction",{inputs:import_bcs$5.bcs.vector(CallArg),commands:import_bcs$5.bcs.vector(Command)}),TransactionKind=import_bcs$5.bcs.enum("TransactionKind",{ProgrammableTransaction,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),TransactionExpiration=import_bcs$5.bcs.enum("TransactionExpiration",{None:null,Epoch:unsafe_u64()}),StructTag=import_bcs$5.bcs.struct("StructTag",{address:Address,module:import_bcs$5.bcs.string(),name:import_bcs$5.bcs.string(),typeParams:import_bcs$5.bcs.vector(InnerTypeTag)}),GasData=import_bcs$5.bcs.struct("GasData",{payment:import_bcs$5.bcs.vector(SuiObjectRef),owner:Address,price:import_bcs$5.bcs.u64(),budget:import_bcs$5.bcs.u64()}),TransactionDataV1=import_bcs$5.bcs.struct("TransactionDataV1",{kind:TransactionKind,sender:Address,gasData:GasData,expiration:TransactionExpiration}),TransactionData=import_bcs$5.bcs.enum("TransactionData",{V1:TransactionDataV1}),IntentScope=import_bcs$5.bcs.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),IntentVersion=import_bcs$5.bcs.enum("IntentVersion",{V0:null}),AppId=import_bcs$5.bcs.enum("AppId",{Sui:null}),Intent=import_bcs$5.bcs.struct("Intent",{scope:IntentScope,version:IntentVersion,appId:AppId});function IntentMessage(t){return import_bcs$5.bcs.struct(`IntentMessage<${t.name}>`,{intent:Intent,value:t})}const CompressedSignature=import_bcs$5.bcs.enum("CompressedSignature",{ED25519:import_bcs$5.bcs.fixedArray(64,import_bcs$5.bcs.u8()),Secp256k1:import_bcs$5.bcs.fixedArray(64,import_bcs$5.bcs.u8()),Secp256r1:import_bcs$5.bcs.fixedArray(64,import_bcs$5.bcs.u8()),ZkLogin:import_bcs$5.bcs.vector(import_bcs$5.bcs.u8())}),PublicKey=import_bcs$5.bcs.enum("PublicKey",{ED25519:import_bcs$5.bcs.fixedArray(32,import_bcs$5.bcs.u8()),Secp256k1:import_bcs$5.bcs.fixedArray(33,import_bcs$5.bcs.u8()),Secp256r1:import_bcs$5.bcs.fixedArray(33,import_bcs$5.bcs.u8()),ZkLogin:import_bcs$5.bcs.vector(import_bcs$5.bcs.u8())}),MultiSigPkMap=import_bcs$5.bcs.struct("MultiSigPkMap",{pubKey:PublicKey,weight:import_bcs$5.bcs.u8()}),MultiSigPublicKey=import_bcs$5.bcs.struct("MultiSigPublicKey",{pk_map:import_bcs$5.bcs.vector(MultiSigPkMap),threshold:import_bcs$5.bcs.u16()}),MultiSig=import_bcs$5.bcs.struct("MultiSig",{sigs:import_bcs$5.bcs.vector(CompressedSignature),bitmap:import_bcs$5.bcs.u16(),multisig_pk:MultiSigPublicKey}),base64String=import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()).transform({input:t=>typeof t=="string"?(0,import_bcs$5.fromBase64)(t):t,output:t=>(0,import_bcs$5.toBase64)(new Uint8Array(t))}),SenderSignedTransaction=import_bcs$5.bcs.struct("SenderSignedTransaction",{intentMessage:IntentMessage(TransactionData),txSignatures:import_bcs$5.bcs.vector(base64String)}),SenderSignedData=import_bcs$5.bcs.vector(SenderSignedTransaction,{name:"SenderSignedData"}),PasskeyAuthenticator=import_bcs$5.bcs.struct("PasskeyAuthenticator",{authenticatorData:import_bcs$5.bcs.vector(import_bcs$5.bcs.u8()),clientDataJson:import_bcs$5.bcs.string(),userSignature:import_bcs$5.bcs.vector(import_bcs$5.bcs.u8())});var __defProp$7=Object.defineProperty,__getOwnPropDesc$5=Object.getOwnPropertyDescriptor,__getOwnPropNames$5=Object.getOwnPropertyNames,__hasOwnProp$5=Object.prototype.hasOwnProperty,__export$4=(t,e)=>{for(var n in e)__defProp$7(t,n,{get:e[n],enumerable:!0})},__copyProps$5=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$5(e))!__hasOwnProp$5.call(t,s)&&s!==n&&__defProp$7(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$5(e,s))||i.enumerable});return t},__toCommonJS$4=t=>__copyProps$5(__defProp$7({},"__esModule",{value:!0}),t),effects_exports={};__export$4(effects_exports,{TransactionEffects:()=>TransactionEffects});var effects=__toCommonJS$4(effects_exports),import_bcs$4=require$$2$1,import_bcs2$3=bcs$1;const PackageUpgradeError=import_bcs$4.bcs.enum("PackageUpgradeError",{UnableToFetchPackage:import_bcs$4.bcs.struct("UnableToFetchPackage",{packageId:import_bcs2$3.Address}),NotAPackage:import_bcs$4.bcs.struct("NotAPackage",{objectId:import_bcs2$3.Address}),IncompatibleUpgrade:null,DigestDoesNotMatch:import_bcs$4.bcs.struct("DigestDoesNotMatch",{digest:import_bcs$4.bcs.vector(import_bcs$4.bcs.u8())}),UnknownUpgradePolicy:import_bcs$4.bcs.struct("UnknownUpgradePolicy",{policy:import_bcs$4.bcs.u8()}),PackageIDDoesNotMatch:import_bcs$4.bcs.struct("PackageIDDoesNotMatch",{packageId:import_bcs2$3.Address,ticketId:import_bcs2$3.Address})}),ModuleId=import_bcs$4.bcs.struct("ModuleId",{address:import_bcs2$3.Address,name:import_bcs$4.bcs.string()}),MoveLocation=import_bcs$4.bcs.struct("MoveLocation",{module:ModuleId,function:import_bcs$4.bcs.u16(),instruction:import_bcs$4.bcs.u16(),functionName:import_bcs$4.bcs.option(import_bcs$4.bcs.string())}),CommandArgumentError=import_bcs$4.bcs.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:import_bcs$4.bcs.struct("IndexOutOfBounds",{idx:import_bcs$4.bcs.u16()}),SecondaryIndexOutOfBounds:import_bcs$4.bcs.struct("SecondaryIndexOutOfBounds",{resultIdx:import_bcs$4.bcs.u16(),secondaryIdx:import_bcs$4.bcs.u16()}),InvalidResultArity:import_bcs$4.bcs.struct("InvalidResultArity",{resultIdx:import_bcs$4.bcs.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),TypeArgumentError=import_bcs$4.bcs.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),ExecutionFailureStatus=import_bcs$4.bcs.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:import_bcs$4.bcs.struct("MoveObjectTooBig",{objectSize:import_bcs$4.bcs.u64(),maxObjectSize:import_bcs$4.bcs.u64()}),MovePackageTooBig:import_bcs$4.bcs.struct("MovePackageTooBig",{objectSize:import_bcs$4.bcs.u64(),maxObjectSize:import_bcs$4.bcs.u64()}),CircularObjectOwnership:import_bcs$4.bcs.struct("CircularObjectOwnership",{object:import_bcs2$3.Address}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:import_bcs$4.bcs.option(MoveLocation),MoveAbort:import_bcs$4.bcs.tuple([MoveLocation,import_bcs$4.bcs.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:import_bcs$4.bcs.struct("CommandArgumentError",{argIdx:import_bcs$4.bcs.u16(),kind:CommandArgumentError}),TypeArgumentError:import_bcs$4.bcs.struct("TypeArgumentError",{argumentIdx:import_bcs$4.bcs.u16(),kind:TypeArgumentError}),UnusedValueWithoutDrop:import_bcs$4.bcs.struct("UnusedValueWithoutDrop",{resultIdx:import_bcs$4.bcs.u16(),secondaryIdx:import_bcs$4.bcs.u16()}),InvalidPublicFunctionReturnType:import_bcs$4.bcs.struct("InvalidPublicFunctionReturnType",{idx:import_bcs$4.bcs.u16()}),InvalidTransferObject:null,EffectsTooLarge:import_bcs$4.bcs.struct("EffectsTooLarge",{currentSize:import_bcs$4.bcs.u64(),maxSize:import_bcs$4.bcs.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:import_bcs$4.bcs.struct("PackageUpgradeError",{upgradeError:PackageUpgradeError}),WrittenObjectsTooLarge:import_bcs$4.bcs.struct("WrittenObjectsTooLarge",{currentSize:import_bcs$4.bcs.u64(),maxSize:import_bcs$4.bcs.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:import_bcs$4.bcs.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:import_bcs$4.bcs.vector(import_bcs2$3.Address)}),AddressDeniedForCoin:import_bcs$4.bcs.struct("AddressDeniedForCoin",{address:import_bcs2$3.Address,coinType:import_bcs$4.bcs.string()}),CoinTypeGlobalPause:import_bcs$4.bcs.struct("CoinTypeGlobalPause",{coinType:import_bcs$4.bcs.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ExecutionStatus=import_bcs$4.bcs.enum("ExecutionStatus",{Success:null,Failed:import_bcs$4.bcs.struct("ExecutionFailed",{error:ExecutionFailureStatus,command:import_bcs$4.bcs.option(import_bcs$4.bcs.u64())})}),GasCostSummary=import_bcs$4.bcs.struct("GasCostSummary",{computationCost:import_bcs$4.bcs.u64(),storageCost:import_bcs$4.bcs.u64(),storageRebate:import_bcs$4.bcs.u64(),nonRefundableStorageFee:import_bcs$4.bcs.u64()}),TransactionEffectsV1=import_bcs$4.bcs.struct("TransactionEffectsV1",{status:ExecutionStatus,executedEpoch:import_bcs$4.bcs.u64(),gasUsed:GasCostSummary,modifiedAtVersions:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.Address,import_bcs$4.bcs.u64()])),sharedObjects:import_bcs$4.bcs.vector(import_bcs2$3.SuiObjectRef),transactionDigest:import_bcs2$3.ObjectDigest,created:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.SuiObjectRef,import_bcs2$3.Owner])),mutated:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.SuiObjectRef,import_bcs2$3.Owner])),unwrapped:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.SuiObjectRef,import_bcs2$3.Owner])),deleted:import_bcs$4.bcs.vector(import_bcs2$3.SuiObjectRef),unwrappedThenDeleted:import_bcs$4.bcs.vector(import_bcs2$3.SuiObjectRef),wrapped:import_bcs$4.bcs.vector(import_bcs2$3.SuiObjectRef),gasObject:import_bcs$4.bcs.tuple([import_bcs2$3.SuiObjectRef,import_bcs2$3.Owner]),eventsDigest:import_bcs$4.bcs.option(import_bcs2$3.ObjectDigest),dependencies:import_bcs$4.bcs.vector(import_bcs2$3.ObjectDigest)}),VersionDigest=import_bcs$4.bcs.tuple([import_bcs$4.bcs.u64(),import_bcs2$3.ObjectDigest]),ObjectIn=import_bcs$4.bcs.enum("ObjectIn",{NotExist:null,Exist:import_bcs$4.bcs.tuple([VersionDigest,import_bcs2$3.Owner])}),ObjectOut=import_bcs$4.bcs.enum("ObjectOut",{NotExist:null,ObjectWrite:import_bcs$4.bcs.tuple([import_bcs2$3.ObjectDigest,import_bcs2$3.Owner]),PackageWrite:VersionDigest}),IDOperation=import_bcs$4.bcs.enum("IDOperation",{None:null,Created:null,Deleted:null}),EffectsObjectChange=import_bcs$4.bcs.struct("EffectsObjectChange",{inputState:ObjectIn,outputState:ObjectOut,idOperation:IDOperation}),UnchangedSharedKind=import_bcs$4.bcs.enum("UnchangedSharedKind",{ReadOnlyRoot:VersionDigest,MutateDeleted:import_bcs$4.bcs.u64(),ReadDeleted:import_bcs$4.bcs.u64(),Cancelled:import_bcs$4.bcs.u64(),PerEpochConfig:null}),TransactionEffectsV2=import_bcs$4.bcs.struct("TransactionEffectsV2",{status:ExecutionStatus,executedEpoch:import_bcs$4.bcs.u64(),gasUsed:GasCostSummary,transactionDigest:import_bcs2$3.ObjectDigest,gasObjectIndex:import_bcs$4.bcs.option(import_bcs$4.bcs.u32()),eventsDigest:import_bcs$4.bcs.option(import_bcs2$3.ObjectDigest),dependencies:import_bcs$4.bcs.vector(import_bcs2$3.ObjectDigest),lamportVersion:import_bcs$4.bcs.u64(),changedObjects:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.Address,EffectsObjectChange])),unchangedSharedObjects:import_bcs$4.bcs.vector(import_bcs$4.bcs.tuple([import_bcs2$3.Address,UnchangedSharedKind])),auxDataDigest:import_bcs$4.bcs.option(import_bcs2$3.ObjectDigest)}),TransactionEffects=import_bcs$4.bcs.enum("TransactionEffects",{V1:TransactionEffectsV1,V2:TransactionEffectsV2});var __defProp$6=Object.defineProperty,__getOwnPropDesc$4=Object.getOwnPropertyDescriptor,__getOwnPropNames$4=Object.getOwnPropertyNames,__hasOwnProp$4=Object.prototype.hasOwnProperty,__export$3=(t,e)=>{for(var n in e)__defProp$6(t,n,{get:e[n],enumerable:!0})},__copyProps$4=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$4(e))!__hasOwnProp$4.call(t,s)&&s!==n&&__defProp$6(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$4(e,s))||i.enumerable});return t},__toCommonJS$3=t=>__copyProps$4(__defProp$6({},"__esModule",{value:!0}),t),pure_exports={};__export$3(pure_exports,{pureBcsSchemaFromTypeName:()=>pureBcsSchemaFromTypeName});var pure=__toCommonJS$3(pure_exports),import_bcs$3=require$$2$1,import_bcs2$2=bcs$1;function pureBcsSchemaFromTypeName(t){switch(t){case"u8":return import_bcs$3.bcs.u8();case"u16":return import_bcs$3.bcs.u16();case"u32":return import_bcs$3.bcs.u32();case"u64":return import_bcs$3.bcs.u64();case"u128":return import_bcs$3.bcs.u128();case"u256":return import_bcs$3.bcs.u256();case"bool":return import_bcs$3.bcs.bool();case"string":return import_bcs$3.bcs.string();case"id":case"address":return import_bcs2$2.Address}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,i]=e.slice(1);return n==="vector"?import_bcs$3.bcs.vector(pureBcsSchemaFromTypeName(i)):import_bcs$3.bcs.option(pureBcsSchemaFromTypeName(i))}throw new Error(`Invalid Pure type name: ${t}`)}var __defProp$5=Object.defineProperty,__getOwnPropDesc$3=Object.getOwnPropertyDescriptor,__getOwnPropNames$3=Object.getOwnPropertyNames,__hasOwnProp$3=Object.prototype.hasOwnProperty,__export$2=(t,e)=>{for(var n in e)__defProp$5(t,n,{get:e[n],enumerable:!0})},__copyProps$3=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$3(e))!__hasOwnProp$3.call(t,s)&&s!==n&&__defProp$5(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$3(e,s))||i.enumerable});return t},__toCommonJS$2=t=>__copyProps$3(__defProp$5({},"__esModule",{value:!0}),t),bcs_exports={};__export$2(bcs_exports,{BcsType:()=>import_bcs3.BcsType,TypeTagSerializer:()=>import_type_tag_serializer.TypeTagSerializer,bcs:()=>suiBcs,pureBcsSchemaFromTypeName:()=>import_pure.pureBcsSchemaFromTypeName});var bcs=__toCommonJS$2(bcs_exports),import_bcs$2=require$$2$1,import_bcs2$1=bcs$1,import_effects=effects,import_type_tag_serializer=typeTagSerializer,import_bcs3=require$$2$1,import_pure=pure;const suiBcs={...import_bcs$2.bcs,U8:import_bcs$2.bcs.u8(),U16:import_bcs$2.bcs.u16(),U32:import_bcs$2.bcs.u32(),U64:import_bcs$2.bcs.u64(),U128:import_bcs$2.bcs.u128(),U256:import_bcs$2.bcs.u256(),ULEB128:import_bcs$2.bcs.uleb128(),Bool:import_bcs$2.bcs.bool(),String:import_bcs$2.bcs.string(),Address:import_bcs2$1.Address,AppId:import_bcs2$1.AppId,Argument:import_bcs2$1.Argument,CallArg:import_bcs2$1.CallArg,Command:import_bcs2$1.Command,CompressedSignature:import_bcs2$1.CompressedSignature,GasData:import_bcs2$1.GasData,Intent:import_bcs2$1.Intent,IntentMessage:import_bcs2$1.IntentMessage,IntentScope:import_bcs2$1.IntentScope,IntentVersion:import_bcs2$1.IntentVersion,MultiSig:import_bcs2$1.MultiSig,MultiSigPkMap:import_bcs2$1.MultiSigPkMap,MultiSigPublicKey:import_bcs2$1.MultiSigPublicKey,ObjectArg:import_bcs2$1.ObjectArg,ObjectDigest:import_bcs2$1.ObjectDigest,Owner:import_bcs2$1.Owner,PasskeyAuthenticator:import_bcs2$1.PasskeyAuthenticator,ProgrammableMoveCall:import_bcs2$1.ProgrammableMoveCall,ProgrammableTransaction:import_bcs2$1.ProgrammableTransaction,PublicKey:import_bcs2$1.PublicKey,SenderSignedData:import_bcs2$1.SenderSignedData,SenderSignedTransaction:import_bcs2$1.SenderSignedTransaction,SharedObjectRef:import_bcs2$1.SharedObjectRef,StructTag:import_bcs2$1.StructTag,SuiObjectRef:import_bcs2$1.SuiObjectRef,TransactionData:import_bcs2$1.TransactionData,TransactionDataV1:import_bcs2$1.TransactionDataV1,TransactionEffects:import_effects.TransactionEffects,TransactionExpiration:import_bcs2$1.TransactionExpiration,TransactionKind:import_bcs2$1.TransactionKind,TypeTag:import_bcs2$1.TypeTag};var __defProp$4=Object.defineProperty,__getOwnPropDesc$2=Object.getOwnPropertyDescriptor,__getOwnPropNames$2=Object.getOwnPropertyNames,__hasOwnProp$2=Object.prototype.hasOwnProperty,__export$1=(t,e)=>{for(var n in e)__defProp$4(t,n,{get:e[n],enumerable:!0})},__copyProps$2=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$2(e))!__hasOwnProp$2.call(t,s)&&s!==n&&__defProp$4(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$2(e,s))||i.enumerable});return t},__toCommonJS$1=t=>__copyProps$2(__defProp$4({},"__esModule",{value:!0}),t),dynamic_fields_exports={};__export$1(dynamic_fields_exports,{deriveDynamicFieldID:()=>deriveDynamicFieldID});var dynamicFields=__toCommonJS$1(dynamic_fields_exports),import_bcs$1=require$$2$1,import_blake2b=require$$1$2,import_bcs2=bcs;function deriveDynamicFieldID(t,e,n){const i=import_bcs2.bcs.Address.serialize(t).toBytes(),s=import_bcs2.bcs.TypeTag.serialize(e).toBytes(),a=import_bcs2.bcs.u64().serialize(n.length).toBytes(),l=import_blake2b.blake2b.create({dkLen:32});return l.update(new Uint8Array([240])),l.update(i),l.update(a),l.update(n),l.update(s),`0x${(0,import_bcs$1.toHex)(l.digest().slice(0,32))}`}var __defProp$3=Object.defineProperty,__getOwnPropDesc$1=Object.getOwnPropertyDescriptor,__getOwnPropNames$1=Object.getOwnPropertyNames,__hasOwnProp$1=Object.prototype.hasOwnProperty,__export=(t,e)=>{for(var n in e)__defProp$3(t,n,{get:e[n],enumerable:!0})},__copyProps$1=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames$1(e))!__hasOwnProp$1.call(t,s)&&s!==n&&__defProp$3(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc$1(e,s))||i.enumerable});return t},__toCommonJS=t=>__copyProps$1(__defProp$3({},"__esModule",{value:!0}),t),utils_exports={};__export(utils_exports,{MIST_PER_SUI:()=>import_constants.MIST_PER_SUI,MOVE_STDLIB_ADDRESS:()=>import_constants.MOVE_STDLIB_ADDRESS,SUI_ADDRESS_LENGTH:()=>import_sui_types.SUI_ADDRESS_LENGTH,SUI_CLOCK_OBJECT_ID:()=>import_constants.SUI_CLOCK_OBJECT_ID,SUI_DECIMALS:()=>import_constants.SUI_DECIMALS,SUI_FRAMEWORK_ADDRESS:()=>import_constants.SUI_FRAMEWORK_ADDRESS,SUI_SYSTEM_ADDRESS:()=>import_constants.SUI_SYSTEM_ADDRESS,SUI_SYSTEM_MODULE_NAME:()=>import_constants.SUI_SYSTEM_MODULE_NAME,SUI_SYSTEM_STATE_OBJECT_ID:()=>import_constants.SUI_SYSTEM_STATE_OBJECT_ID,SUI_TYPE_ARG:()=>import_constants.SUI_TYPE_ARG,deriveDynamicFieldID:()=>import_dynamic_fields.deriveDynamicFieldID,formatAddress:()=>import_format.formatAddress,formatDigest:()=>import_format.formatDigest,fromB64:()=>import_bcs.fromB64,fromBase58:()=>import_bcs.fromBase58,fromBase64:()=>import_bcs.fromBase64,fromHEX:()=>import_bcs.fromHEX,fromHex:()=>import_bcs.fromHex,isValidNamedPackage:()=>import_move_registry.isValidNamedPackage,isValidNamedType:()=>import_move_registry.isValidNamedType,isValidSuiAddress:()=>import_sui_types.isValidSuiAddress,isValidSuiNSName:()=>import_suins.isValidSuiNSName,isValidSuiObjectId:()=>import_sui_types.isValidSuiObjectId,isValidTransactionDigest:()=>import_sui_types.isValidTransactionDigest,normalizeStructTag:()=>import_sui_types.normalizeStructTag,normalizeSuiAddress:()=>import_sui_types.normalizeSuiAddress,normalizeSuiNSName:()=>import_suins.normalizeSuiNSName,normalizeSuiObjectId:()=>import_sui_types.normalizeSuiObjectId,parseStructTag:()=>import_sui_types.parseStructTag,toB64:()=>import_bcs.toB64,toBase58:()=>import_bcs.toBase58,toBase64:()=>import_bcs.toBase64,toHEX:()=>import_bcs.toHEX,toHex:()=>import_bcs.toHex});var utils$4=__toCommonJS(utils_exports),import_format=format$1,import_sui_types=suiTypes,import_bcs=require$$2$1,import_suins=suins,import_constants=constants$1,import_move_registry=moveRegistry,import_dynamic_fields=dynamicFields;Object.defineProperty(client,"__esModule",{value:!0});client.SuiPythClient=void 0;const utils_1=utils$4,bcs_1=bcs,buffer_1=require$$1$3,MAX_ARGUMENT_SIZE=16*1024;class SuiPythClient{constructor(e,n,i){Or(this,"provider");Or(this,"pythStateId");Or(this,"wormholeStateId");Or(this,"pythPackageId");Or(this,"wormholePackageId");Or(this,"priceTableInfo");Or(this,"priceFeedObjectIdCache",new Map);Or(this,"baseUpdateFee");this.provider=e,this.pythStateId=n,this.wormholeStateId=i,this.pythPackageId=void 0,this.wormholePackageId=void 0}async getBaseUpdateFee(){if(this.baseUpdateFee===void 0){const e=await this.provider.getObject({id:this.pythStateId,options:{showContent:!0}});if(!e.data||!e.data.content||e.data.content.dataType!=="moveObject")throw new Error("Unable to fetch pyth state object");this.baseUpdateFee=e.data.content.fields.base_update_fee}return this.baseUpdateFee}async getPackageId(e){const n=await this.provider.getObject({id:e,options:{showContent:!0}}).then(i=>{var s,a,l;if(((a=(s=i.data)==null?void 0:s.content)==null?void 0:a.dataType)=="moveObject")return i.data.content.fields;throw console.log((l=i.data)==null?void 0:l.content),new Error(`Cannot fetch package id for object ${e}`)});if("upgrade_cap"in n)return n.upgrade_cap.fields.package;throw new Error("upgrade_cap not found")}async verifyVaas(e,n){const i=await this.getWormholePackageId(),s=[];for(const a of e){const[l]=n.moveCall({target:`${i}::vaa::parse_and_verify`,arguments:[n.object(this.wormholeStateId),n.pure(bcs_1.bcs.vector(bcs_1.bcs.U8).serialize(Array.from(a),{maxSize:MAX_ARGUMENT_SIZE}).toBytes()),n.object(utils_1.SUI_CLOCK_OBJECT_ID)]});s.push(l)}return s}async updatePriceFeeds(e,n,i){const s=await this.getPythPackageId();let a;if(n.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");const l=this.extractVaaBytesFromAccumulatorMessage(n[0]),f=await this.verifyVaas([l],e);[a]=e.moveCall({target:`${s}::pyth::create_authenticated_price_infos_using_accumulator`,arguments:[e.object(this.pythStateId),e.pure(bcs_1.bcs.vector(bcs_1.bcs.U8).serialize(Array.from(n[0]),{maxSize:MAX_ARGUMENT_SIZE}).toBytes()),f[0],e.object(utils_1.SUI_CLOCK_OBJECT_ID)]});const p=[],C=await this.getBaseUpdateFee(),B=e.splitCoins(e.gas,i.map(()=>e.pure.u64(C)));let N=0;for(const le of i){const Ee=await this.getPriceFeedObjectId(le);if(!Ee)throw new Error(`Price feed ${le} not found, please create it first`);p.push(Ee),[a]=e.moveCall({target:`${s}::pyth::update_single_price_feed`,arguments:[e.object(this.pythStateId),a,e.object(Ee),B[N],e.object(utils_1.SUI_CLOCK_OBJECT_ID)]}),N++}return e.moveCall({target:`${s}::hot_potato_vector::destroy`,arguments:[a],typeArguments:[`${s}::price_info::PriceInfo`]}),p}async createPriceFeed(e,n){const i=await this.getPythPackageId();if(n.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");const s=this.extractVaaBytesFromAccumulatorMessage(n[0]),a=await this.verifyVaas([s],e);e.moveCall({target:`${i}::pyth::create_price_feeds_using_accumulator`,arguments:[e.object(this.pythStateId),e.pure(bcs_1.bcs.vector(bcs_1.bcs.U8).serialize(Array.from(n[0]),{maxSize:MAX_ARGUMENT_SIZE}).toBytes()),a[0],e.object(utils_1.SUI_CLOCK_OBJECT_ID)]})}async getWormholePackageId(){return this.wormholePackageId||(this.wormholePackageId=await this.getPackageId(this.wormholeStateId)),this.wormholePackageId}async getPythPackageId(){return this.pythPackageId||(this.pythPackageId=await this.getPackageId(this.pythStateId)),this.pythPackageId}async getPriceFeedObjectId(e){const n=e.replace("0x","");if(!this.priceFeedObjectIdCache.has(n)){const{id:i,fieldType:s}=await this.getPriceTableInfo(),a=await this.provider.getDynamicFieldObject({parentId:i,name:{type:`${s}::price_identifier::PriceIdentifier`,value:{bytes:Array.from(buffer_1.Buffer.from(n,"hex"))}}});if(!a.data||!a.data.content)return;if(a.data.content.dataType!=="moveObject")throw new Error("Price feed type mismatch");this.priceFeedObjectIdCache.set(n,a.data.content.fields.value)}return this.priceFeedObjectIdCache.get(n)}async getPriceTableInfo(){if(this.priceTableInfo===void 0){const e=await this.provider.getDynamicFieldObject({parentId:this.pythStateId,name:{type:"vector<u8>",value:"price_info"}});if(!e.data||!e.data.type)throw new Error("Price Table not found, contract may not be initialized");let n=e.data.type.replace("0x2::table::Table<","");n=n.replace("::price_identifier::PriceIdentifier, 0x2::object::ID>",""),this.priceTableInfo={id:e.data.objectId,fieldType:n}}return this.priceTableInfo}extractVaaBytesFromAccumulatorMessage(e){const i=7+e.readUint8(6)+1,s=e.readUint16BE(i),a=i+2;return e.subarray(a,a+s)}}client.SuiPythClient=SuiPythClient;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PriceFeed=t.Price=t.SuiPythClient=t.SuiPriceServiceConnection=void 0;var e=SuiPriceServiceConnection$1;Object.defineProperty(t,"SuiPriceServiceConnection",{enumerable:!0,get:function(){return e.SuiPriceServiceConnection}});var n=client;Object.defineProperty(t,"SuiPythClient",{enumerable:!0,get:function(){return n.SuiPythClient}});var i=lib$1;Object.defineProperty(t,"Price",{enumerable:!0,get:function(){return i.Price}}),Object.defineProperty(t,"PriceFeed",{enumerable:!0,get:function(){return i.PriceFeed}})})(lib$2);var __create=Object.create,__defProp$2=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropNames=Object.getOwnPropertyNames,__getOwnPropSymbols=Object.getOwnPropertySymbols,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(t,e,n)=>e in t?__defProp$2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__spreadValues=(t,e)=>{for(var n in e||(e={}))__hasOwnProp.call(e,n)&&__defNormalProp$2(t,n,e[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))__propIsEnum.call(e,n)&&__defNormalProp$2(t,n,e[n]);return t},__spreadProps=(t,e)=>__defProps(t,__getOwnPropDescs(e)),__require=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,n)=>(typeof require<"u"?require:e)[n]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')}),__commonJS=(t,e)=>function(){return e||(0,t[__getOwnPropNames(t)[0]])((e={exports:{}}).exports,e),e.exports},__copyProps=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of __getOwnPropNames(e))!__hasOwnProp.call(t,s)&&s!==n&&__defProp$2(t,s,{get:()=>e[s],enumerable:!(i=__getOwnPropDesc(e,s))||i.enumerable});return t},__toESM=(t,e,n)=>(n=t!=null?__create(__getProtoOf(t)):{},__copyProps(!t||!t.__esModule?__defProp$2(n,"default",{value:t,enumerable:!0}):n,t)),__async=(t,e,n)=>new Promise((i,s)=>{var a=p=>{try{f(n.next(p))}catch(C){s(C)}},l=p=>{try{f(n.throw(p))}catch(C){s(C)}},f=p=>p.done?i(p.value):Promise.resolve(p.value).then(a,l);f((n=n.apply(t,e)).next())}),require_bn=__commonJS({"node_modules/bn.js/lib/bn.js"(t,e){(function(n,i){function s(tt,Ye){if(!tt)throw new Error(Ye||"Assertion failed")}function a(tt,Ye){tt.super_=Ye;var ot=function(){};ot.prototype=Ye.prototype,tt.prototype=new ot,tt.prototype.constructor=tt}function l(tt,Ye,ot){if(l.isBN(tt))return tt;this.negative=0,this.words=null,this.length=0,this.red=null,tt!==null&&((Ye==="le"||Ye==="be")&&(ot=Ye,Ye=10),this._init(tt||0,Ye||10,ot||"be"))}typeof n=="object"?n.exports=l:i.BN=l,l.BN=l,l.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=__require("buffer").Buffer}catch{}l.isBN=function(Ye){return Ye instanceof l?!0:Ye!==null&&typeof Ye=="object"&&Ye.constructor.wordSize===l.wordSize&&Array.isArray(Ye.words)},l.max=function(Ye,ot){return Ye.cmp(ot)>0?Ye:ot},l.min=function(Ye,ot){return Ye.cmp(ot)<0?Ye:ot},l.prototype._init=function(Ye,ot,Et){if(typeof Ye=="number")return this._initNumber(Ye,ot,Et);if(typeof Ye=="object")return this._initArray(Ye,ot,Et);ot==="hex"&&(ot=16),s(ot===(ot|0)&&ot>=2&&ot<=36),Ye=Ye.toString().replace(/\s+/g,"");var er=0;Ye[0]==="-"&&(er++,this.negative=1),er<Ye.length&&(ot===16?this._parseHex(Ye,er,Et):(this._parseBase(Ye,ot,er),Et==="le"&&this._initArray(this.toArray(),ot,Et)))},l.prototype._initNumber=function(Ye,ot,Et){Ye<0&&(this.negative=1,Ye=-Ye),Ye<67108864?(this.words=[Ye&67108863],this.length=1):Ye<4503599627370496?(this.words=[Ye&67108863,Ye/67108864&67108863],this.length=2):(s(Ye<9007199254740992),this.words=[Ye&67108863,Ye/67108864&67108863,1],this.length=3),Et==="le"&&this._initArray(this.toArray(),ot,Et)},l.prototype._initArray=function(Ye,ot,Et){if(s(typeof Ye.length=="number"),Ye.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Ye.length/3),this.words=new Array(this.length);for(var er=0;er<this.length;er++)this.words[er]=0;var rr,yt,tr=0;if(Et==="be")for(er=Ye.length-1,rr=0;er>=0;er-=3)yt=Ye[er]|Ye[er-1]<<8|Ye[er-2]<<16,this.words[rr]|=yt<<tr&67108863,this.words[rr+1]=yt>>>26-tr&67108863,tr+=24,tr>=26&&(tr-=26,rr++);else if(Et==="le")for(er=0,rr=0;er<Ye.length;er+=3)yt=Ye[er]|Ye[er+1]<<8|Ye[er+2]<<16,this.words[rr]|=yt<<tr&67108863,this.words[rr+1]=yt>>>26-tr&67108863,tr+=24,tr>=26&&(tr-=26,rr++);return this._strip()};function p(tt,Ye){var ot=tt.charCodeAt(Ye);if(ot>=48&&ot<=57)return ot-48;if(ot>=65&&ot<=70)return ot-55;if(ot>=97&&ot<=102)return ot-87;s(!1,"Invalid character in "+tt)}function C(tt,Ye,ot){var Et=p(tt,ot);return ot-1>=Ye&&(Et|=p(tt,ot-1)<<4),Et}l.prototype._parseHex=function(Ye,ot,Et){this.length=Math.ceil((Ye.length-ot)/6),this.words=new Array(this.length);for(var er=0;er<this.length;er++)this.words[er]=0;var rr=0,yt=0,tr;if(Et==="be")for(er=Ye.length-1;er>=ot;er-=2)tr=C(Ye,ot,er)<<rr,this.words[yt]|=tr&67108863,rr>=18?(rr-=18,yt+=1,this.words[yt]|=tr>>>26):rr+=8;else{var Ut=Ye.length-ot;for(er=Ut%2===0?ot+1:ot;er<Ye.length;er+=2)tr=C(Ye,ot,er)<<rr,this.words[yt]|=tr&67108863,rr>=18?(rr-=18,yt+=1,this.words[yt]|=tr>>>26):rr+=8}this._strip()};function B(tt,Ye,ot,Et){for(var er=0,rr=0,yt=Math.min(tt.length,ot),tr=Ye;tr<yt;tr++){var Ut=tt.charCodeAt(tr)-48;er*=Et,Ut>=49?rr=Ut-49+10:Ut>=17?rr=Ut-17+10:rr=Ut,s(Ut>=0&&rr<Et,"Invalid character"),er+=rr}return er}l.prototype._parseBase=function(Ye,ot,Et){this.words=[0],this.length=1;for(var er=0,rr=1;rr<=67108863;rr*=ot)er++;er--,rr=rr/ot|0;for(var yt=Ye.length-Et,tr=yt%er,Ut=Math.min(yt,yt-tr)+Et,Ft=0,sr=Et;sr<Ut;sr+=er)Ft=B(Ye,sr,sr+er,ot),this.imuln(rr),this.words[0]+Ft<67108864?this.words[0]+=Ft:this._iaddn(Ft);if(tr!==0){var vr=1;for(Ft=B(Ye,sr,Ye.length,ot),sr=0;sr<tr;sr++)vr*=ot;this.imuln(vr),this.words[0]+Ft<67108864?this.words[0]+=Ft:this._iaddn(Ft)}this._strip()},l.prototype.copy=function(Ye){Ye.words=new Array(this.length);for(var ot=0;ot<this.length;ot++)Ye.words[ot]=this.words[ot];Ye.length=this.length,Ye.negative=this.negative,Ye.red=this.red};function N(tt,Ye){tt.words=Ye.words,tt.length=Ye.length,tt.negative=Ye.negative,tt.red=Ye.red}if(l.prototype._move=function(Ye){N(Ye,this)},l.prototype.clone=function(){var Ye=new l(null);return this.copy(Ye),Ye},l.prototype._expand=function(Ye){for(;this.length<Ye;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=le}catch{l.prototype.inspect=le}else l.prototype.inspect=le;function le(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var Ee=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],Ue=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],ze=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(Ye,ot){Ye=Ye||10,ot=ot|0||1;var Et;if(Ye===16||Ye==="hex"){Et="";for(var er=0,rr=0,yt=0;yt<this.length;yt++){var tr=this.words[yt],Ut=((tr<<er|rr)&16777215).toString(16);rr=tr>>>24-er&16777215,er+=2,er>=26&&(er-=26,yt--),rr!==0||yt!==this.length-1?Et=Ee[6-Ut.length]+Ut+Et:Et=Ut+Et}for(rr!==0&&(Et=rr.toString(16)+Et);Et.length%ot!==0;)Et="0"+Et;return this.negative!==0&&(Et="-"+Et),Et}if(Ye===(Ye|0)&&Ye>=2&&Ye<=36){var Ft=Ue[Ye],sr=ze[Ye];Et="";var vr=this.clone();for(vr.negative=0;!vr.isZero();){var _r=vr.modrn(sr).toString(Ye);vr=vr.idivn(sr),vr.isZero()?Et=_r+Et:Et=Ee[Ft-_r.length]+_r+Et}for(this.isZero()&&(Et="0"+Et);Et.length%ot!==0;)Et="0"+Et;return this.negative!==0&&(Et="-"+Et),Et}s(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var Ye=this.words[0];return this.length===2?Ye+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Ye+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Ye:Ye},l.prototype.toJSON=function(){return this.toString(16,2)},f&&(l.prototype.toBuffer=function(Ye,ot){return this.toArrayLike(f,Ye,ot)}),l.prototype.toArray=function(Ye,ot){return this.toArrayLike(Array,Ye,ot)};var Ze=function(Ye,ot){return Ye.allocUnsafe?Ye.allocUnsafe(ot):new Ye(ot)};l.prototype.toArrayLike=function(Ye,ot,Et){this._strip();var er=this.byteLength(),rr=Et||Math.max(1,er);s(er<=rr,"byte array longer than desired length"),s(rr>0,"Requested array length <= 0");var yt=Ze(Ye,rr),tr=ot==="le"?"LE":"BE";return this["_toArrayLike"+tr](yt,er),yt},l.prototype._toArrayLikeLE=function(Ye,ot){for(var Et=0,er=0,rr=0,yt=0;rr<this.length;rr++){var tr=this.words[rr]<<yt|er;Ye[Et++]=tr&255,Et<Ye.length&&(Ye[Et++]=tr>>8&255),Et<Ye.length&&(Ye[Et++]=tr>>16&255),yt===6?(Et<Ye.length&&(Ye[Et++]=tr>>24&255),er=0,yt=0):(er=tr>>>24,yt+=2)}if(Et<Ye.length)for(Ye[Et++]=er;Et<Ye.length;)Ye[Et++]=0},l.prototype._toArrayLikeBE=function(Ye,ot){for(var Et=Ye.length-1,er=0,rr=0,yt=0;rr<this.length;rr++){var tr=this.words[rr]<<yt|er;Ye[Et--]=tr&255,Et>=0&&(Ye[Et--]=tr>>8&255),Et>=0&&(Ye[Et--]=tr>>16&255),yt===6?(Et>=0&&(Ye[Et--]=tr>>24&255),er=0,yt=0):(er=tr>>>24,yt+=2)}if(Et>=0)for(Ye[Et--]=er;Et>=0;)Ye[Et--]=0},Math.clz32?l.prototype._countBits=function(Ye){return 32-Math.clz32(Ye)}:l.prototype._countBits=function(Ye){var ot=Ye,Et=0;return ot>=4096&&(Et+=13,ot>>>=13),ot>=64&&(Et+=7,ot>>>=7),ot>=8&&(Et+=4,ot>>>=4),ot>=2&&(Et+=2,ot>>>=2),Et+ot},l.prototype._zeroBits=function(Ye){if(Ye===0)return 26;var ot=Ye,Et=0;return ot&8191||(Et+=13,ot>>>=13),ot&127||(Et+=7,ot>>>=7),ot&15||(Et+=4,ot>>>=4),ot&3||(Et+=2,ot>>>=2),ot&1||Et++,Et},l.prototype.bitLength=function(){var Ye=this.words[this.length-1],ot=this._countBits(Ye);return(this.length-1)*26+ot};function Qe(tt){for(var Ye=new Array(tt.bitLength()),ot=0;ot<Ye.length;ot++){var Et=ot/26|0,er=ot%26;Ye[ot]=tt.words[Et]>>>er&1}return Ye}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Ye=0,ot=0;ot<this.length;ot++){var Et=this._zeroBits(this.words[ot]);if(Ye+=Et,Et!==26)break}return Ye},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(Ye){return this.negative!==0?this.abs().inotn(Ye).iaddn(1):this.clone()},l.prototype.fromTwos=function(Ye){return this.testn(Ye-1)?this.notn(Ye).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(Ye){for(;this.length<Ye.length;)this.words[this.length++]=0;for(var ot=0;ot<Ye.length;ot++)this.words[ot]=this.words[ot]|Ye.words[ot];return this._strip()},l.prototype.ior=function(Ye){return s((this.negative|Ye.negative)===0),this.iuor(Ye)},l.prototype.or=function(Ye){return this.length>Ye.length?this.clone().ior(Ye):Ye.clone().ior(this)},l.prototype.uor=function(Ye){return this.length>Ye.length?this.clone().iuor(Ye):Ye.clone().iuor(this)},l.prototype.iuand=function(Ye){var ot;this.length>Ye.length?ot=Ye:ot=this;for(var Et=0;Et<ot.length;Et++)this.words[Et]=this.words[Et]&Ye.words[Et];return this.length=ot.length,this._strip()},l.prototype.iand=function(Ye){return s((this.negative|Ye.negative)===0),this.iuand(Ye)},l.prototype.and=function(Ye){return this.length>Ye.length?this.clone().iand(Ye):Ye.clone().iand(this)},l.prototype.uand=function(Ye){return this.length>Ye.length?this.clone().iuand(Ye):Ye.clone().iuand(this)},l.prototype.iuxor=function(Ye){var ot,Et;this.length>Ye.length?(ot=this,Et=Ye):(ot=Ye,Et=this);for(var er=0;er<Et.length;er++)this.words[er]=ot.words[er]^Et.words[er];if(this!==ot)for(;er<ot.length;er++)this.words[er]=ot.words[er];return this.length=ot.length,this._strip()},l.prototype.ixor=function(Ye){return s((this.negative|Ye.negative)===0),this.iuxor(Ye)},l.prototype.xor=function(Ye){return this.length>Ye.length?this.clone().ixor(Ye):Ye.clone().ixor(this)},l.prototype.uxor=function(Ye){return this.length>Ye.length?this.clone().iuxor(Ye):Ye.clone().iuxor(this)},l.prototype.inotn=function(Ye){s(typeof Ye=="number"&&Ye>=0);var ot=Math.ceil(Ye/26)|0,Et=Ye%26;this._expand(ot),Et>0&&ot--;for(var er=0;er<ot;er++)this.words[er]=~this.words[er]&67108863;return Et>0&&(this.words[er]=~this.words[er]&67108863>>26-Et),this._strip()},l.prototype.notn=function(Ye){return this.clone().inotn(Ye)},l.prototype.setn=function(Ye,ot){s(typeof Ye=="number"&&Ye>=0);var Et=Ye/26|0,er=Ye%26;return this._expand(Et+1),ot?this.words[Et]=this.words[Et]|1<<er:this.words[Et]=this.words[Et]&~(1<<er),this._strip()},l.prototype.iadd=function(Ye){var ot;if(this.negative!==0&&Ye.negative===0)return this.negative=0,ot=this.isub(Ye),this.negative^=1,this._normSign();if(this.negative===0&&Ye.negative!==0)return Ye.negative=0,ot=this.isub(Ye),Ye.negative=1,ot._normSign();var Et,er;this.length>Ye.length?(Et=this,er=Ye):(Et=Ye,er=this);for(var rr=0,yt=0;yt<er.length;yt++)ot=(Et.words[yt]|0)+(er.words[yt]|0)+rr,this.words[yt]=ot&67108863,rr=ot>>>26;for(;rr!==0&&yt<Et.length;yt++)ot=(Et.words[yt]|0)+rr,this.words[yt]=ot&67108863,rr=ot>>>26;if(this.length=Et.length,rr!==0)this.words[this.length]=rr,this.length++;else if(Et!==this)for(;yt<Et.length;yt++)this.words[yt]=Et.words[yt];return this},l.prototype.add=function(Ye){var ot;return Ye.negative!==0&&this.negative===0?(Ye.negative=0,ot=this.sub(Ye),Ye.negative^=1,ot):Ye.negative===0&&this.negative!==0?(this.negative=0,ot=Ye.sub(this),this.negative=1,ot):this.length>Ye.length?this.clone().iadd(Ye):Ye.clone().iadd(this)},l.prototype.isub=function(Ye){if(Ye.negative!==0){Ye.negative=0;var ot=this.iadd(Ye);return Ye.negative=1,ot._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Ye),this.negative=1,this._normSign();var Et=this.cmp(Ye);if(Et===0)return this.negative=0,this.length=1,this.words[0]=0,this;var er,rr;Et>0?(er=this,rr=Ye):(er=Ye,rr=this);for(var yt=0,tr=0;tr<rr.length;tr++)ot=(er.words[tr]|0)-(rr.words[tr]|0)+yt,yt=ot>>26,this.words[tr]=ot&67108863;for(;yt!==0&&tr<er.length;tr++)ot=(er.words[tr]|0)+yt,yt=ot>>26,this.words[tr]=ot&67108863;if(yt===0&&tr<er.length&&er!==this)for(;tr<er.length;tr++)this.words[tr]=er.words[tr];return this.length=Math.max(this.length,tr),er!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(Ye){return this.clone().isub(Ye)};function ct(tt,Ye,ot){ot.negative=Ye.negative^tt.negative;var Et=tt.length+Ye.length|0;ot.length=Et,Et=Et-1|0;var er=tt.words[0]|0,rr=Ye.words[0]|0,yt=er*rr,tr=yt&67108863,Ut=yt/67108864|0;ot.words[0]=tr;for(var Ft=1;Ft<Et;Ft++){for(var sr=Ut>>>26,vr=Ut&67108863,_r=Math.min(Ft,Ye.length-1),dr=Math.max(0,Ft-tt.length+1);dr<=_r;dr++){var gr=Ft-dr|0;er=tt.words[gr]|0,rr=Ye.words[dr]|0,yt=er*rr+vr,sr+=yt/67108864|0,vr=yt&67108863}ot.words[Ft]=vr|0,Ut=sr|0}return Ut!==0?ot.words[Ft]=Ut|0:ot.length--,ot._strip()}var wt=function(Ye,ot,Et){var er=Ye.words,rr=ot.words,yt=Et.words,tr=0,Ut,Ft,sr,vr=er[0]|0,_r=vr&8191,dr=vr>>>13,gr=er[1]|0,$r=gr&8191,pr=gr>>>13,lr=er[2]|0,cr=lr&8191,yr=lr>>>13,Sr=er[3]|0,Ar=Sr&8191,Tr=Sr>>>13,xr=er[4]|0,Cr=xr&8191,wr=xr>>>13,Er=er[5]|0,kr=Er&8191,Br=Er>>>13,Rr=er[6]|0,Ir=Rr&8191,Dr=Rr>>>13,zr=er[7]|0,jr=zr&8191,Fr=zr>>>13,mn=er[8]|0,Gr=mn&8191,rn=mn>>>13,Vn=er[9]|0,Lr=Vn&8191,sn=Vn>>>13,Gn=rr[0]|0,qr=Gn&8191,Vr=Gn>>>13,Zn=rr[1]|0,Zr=Zn&8191,an=Zn>>>13,Xn=rr[2]|0,Wr=Xn&8191,Tn=Xn>>>13,Jn=rr[3]|0,Xr=Jn&8191,cn=Jn>>>13,Yn=rr[4]|0,Jr=Yn&8191,fn=Yn>>>13,Qn=rr[5]|0,Hr=Qn&8191,en=Qn>>>13,Wn=rr[6]|0,Kr=Wn&8191,Mn=Wn>>>13,ri=rr[7]|0,Yr=ri&8191,Un=ri>>>13,ni=rr[8]|0,Qr=ni&8191,Ln=ni>>>13,ti=rr[9]|0,Fn=ti&8191,ei=ti>>>13;Et.negative=Ye.negative^ot.negative,Et.length=19,Ut=Math.imul(_r,qr),Ft=Math.imul(_r,Vr),Ft=Ft+Math.imul(dr,qr)|0,sr=Math.imul(dr,Vr);var Ti=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,Ut=Math.imul($r,qr),Ft=Math.imul($r,Vr),Ft=Ft+Math.imul(pr,qr)|0,sr=Math.imul(pr,Vr),Ut=Ut+Math.imul(_r,Zr)|0,Ft=Ft+Math.imul(_r,an)|0,Ft=Ft+Math.imul(dr,Zr)|0,sr=sr+Math.imul(dr,an)|0;var ki=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(ki>>>26)|0,ki&=67108863,Ut=Math.imul(cr,qr),Ft=Math.imul(cr,Vr),Ft=Ft+Math.imul(yr,qr)|0,sr=Math.imul(yr,Vr),Ut=Ut+Math.imul($r,Zr)|0,Ft=Ft+Math.imul($r,an)|0,Ft=Ft+Math.imul(pr,Zr)|0,sr=sr+Math.imul(pr,an)|0,Ut=Ut+Math.imul(_r,Wr)|0,Ft=Ft+Math.imul(_r,Tn)|0,Ft=Ft+Math.imul(dr,Wr)|0,sr=sr+Math.imul(dr,Tn)|0;var Oi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,Ut=Math.imul(Ar,qr),Ft=Math.imul(Ar,Vr),Ft=Ft+Math.imul(Tr,qr)|0,sr=Math.imul(Tr,Vr),Ut=Ut+Math.imul(cr,Zr)|0,Ft=Ft+Math.imul(cr,an)|0,Ft=Ft+Math.imul(yr,Zr)|0,sr=sr+Math.imul(yr,an)|0,Ut=Ut+Math.imul($r,Wr)|0,Ft=Ft+Math.imul($r,Tn)|0,Ft=Ft+Math.imul(pr,Wr)|0,sr=sr+Math.imul(pr,Tn)|0,Ut=Ut+Math.imul(_r,Xr)|0,Ft=Ft+Math.imul(_r,cn)|0,Ft=Ft+Math.imul(dr,Xr)|0,sr=sr+Math.imul(dr,cn)|0;var Ii=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,Ut=Math.imul(Cr,qr),Ft=Math.imul(Cr,Vr),Ft=Ft+Math.imul(wr,qr)|0,sr=Math.imul(wr,Vr),Ut=Ut+Math.imul(Ar,Zr)|0,Ft=Ft+Math.imul(Ar,an)|0,Ft=Ft+Math.imul(Tr,Zr)|0,sr=sr+Math.imul(Tr,an)|0,Ut=Ut+Math.imul(cr,Wr)|0,Ft=Ft+Math.imul(cr,Tn)|0,Ft=Ft+Math.imul(yr,Wr)|0,sr=sr+Math.imul(yr,Tn)|0,Ut=Ut+Math.imul($r,Xr)|0,Ft=Ft+Math.imul($r,cn)|0,Ft=Ft+Math.imul(pr,Xr)|0,sr=sr+Math.imul(pr,cn)|0,Ut=Ut+Math.imul(_r,Jr)|0,Ft=Ft+Math.imul(_r,fn)|0,Ft=Ft+Math.imul(dr,Jr)|0,sr=sr+Math.imul(dr,fn)|0;var Pi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,Ut=Math.imul(kr,qr),Ft=Math.imul(kr,Vr),Ft=Ft+Math.imul(Br,qr)|0,sr=Math.imul(Br,Vr),Ut=Ut+Math.imul(Cr,Zr)|0,Ft=Ft+Math.imul(Cr,an)|0,Ft=Ft+Math.imul(wr,Zr)|0,sr=sr+Math.imul(wr,an)|0,Ut=Ut+Math.imul(Ar,Wr)|0,Ft=Ft+Math.imul(Ar,Tn)|0,Ft=Ft+Math.imul(Tr,Wr)|0,sr=sr+Math.imul(Tr,Tn)|0,Ut=Ut+Math.imul(cr,Xr)|0,Ft=Ft+Math.imul(cr,cn)|0,Ft=Ft+Math.imul(yr,Xr)|0,sr=sr+Math.imul(yr,cn)|0,Ut=Ut+Math.imul($r,Jr)|0,Ft=Ft+Math.imul($r,fn)|0,Ft=Ft+Math.imul(pr,Jr)|0,sr=sr+Math.imul(pr,fn)|0,Ut=Ut+Math.imul(_r,Hr)|0,Ft=Ft+Math.imul(_r,en)|0,Ft=Ft+Math.imul(dr,Hr)|0,sr=sr+Math.imul(dr,en)|0;var ji=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(ji>>>26)|0,ji&=67108863,Ut=Math.imul(Ir,qr),Ft=Math.imul(Ir,Vr),Ft=Ft+Math.imul(Dr,qr)|0,sr=Math.imul(Dr,Vr),Ut=Ut+Math.imul(kr,Zr)|0,Ft=Ft+Math.imul(kr,an)|0,Ft=Ft+Math.imul(Br,Zr)|0,sr=sr+Math.imul(Br,an)|0,Ut=Ut+Math.imul(Cr,Wr)|0,Ft=Ft+Math.imul(Cr,Tn)|0,Ft=Ft+Math.imul(wr,Wr)|0,sr=sr+Math.imul(wr,Tn)|0,Ut=Ut+Math.imul(Ar,Xr)|0,Ft=Ft+Math.imul(Ar,cn)|0,Ft=Ft+Math.imul(Tr,Xr)|0,sr=sr+Math.imul(Tr,cn)|0,Ut=Ut+Math.imul(cr,Jr)|0,Ft=Ft+Math.imul(cr,fn)|0,Ft=Ft+Math.imul(yr,Jr)|0,sr=sr+Math.imul(yr,fn)|0,Ut=Ut+Math.imul($r,Hr)|0,Ft=Ft+Math.imul($r,en)|0,Ft=Ft+Math.imul(pr,Hr)|0,sr=sr+Math.imul(pr,en)|0,Ut=Ut+Math.imul(_r,Kr)|0,Ft=Ft+Math.imul(_r,Mn)|0,Ft=Ft+Math.imul(dr,Kr)|0,sr=sr+Math.imul(dr,Mn)|0;var Ui=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,Ut=Math.imul(jr,qr),Ft=Math.imul(jr,Vr),Ft=Ft+Math.imul(Fr,qr)|0,sr=Math.imul(Fr,Vr),Ut=Ut+Math.imul(Ir,Zr)|0,Ft=Ft+Math.imul(Ir,an)|0,Ft=Ft+Math.imul(Dr,Zr)|0,sr=sr+Math.imul(Dr,an)|0,Ut=Ut+Math.imul(kr,Wr)|0,Ft=Ft+Math.imul(kr,Tn)|0,Ft=Ft+Math.imul(Br,Wr)|0,sr=sr+Math.imul(Br,Tn)|0,Ut=Ut+Math.imul(Cr,Xr)|0,Ft=Ft+Math.imul(Cr,cn)|0,Ft=Ft+Math.imul(wr,Xr)|0,sr=sr+Math.imul(wr,cn)|0,Ut=Ut+Math.imul(Ar,Jr)|0,Ft=Ft+Math.imul(Ar,fn)|0,Ft=Ft+Math.imul(Tr,Jr)|0,sr=sr+Math.imul(Tr,fn)|0,Ut=Ut+Math.imul(cr,Hr)|0,Ft=Ft+Math.imul(cr,en)|0,Ft=Ft+Math.imul(yr,Hr)|0,sr=sr+Math.imul(yr,en)|0,Ut=Ut+Math.imul($r,Kr)|0,Ft=Ft+Math.imul($r,Mn)|0,Ft=Ft+Math.imul(pr,Kr)|0,sr=sr+Math.imul(pr,Mn)|0,Ut=Ut+Math.imul(_r,Yr)|0,Ft=Ft+Math.imul(_r,Un)|0,Ft=Ft+Math.imul(dr,Yr)|0,sr=sr+Math.imul(dr,Un)|0;var zi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(zi>>>26)|0,zi&=67108863,Ut=Math.imul(Gr,qr),Ft=Math.imul(Gr,Vr),Ft=Ft+Math.imul(rn,qr)|0,sr=Math.imul(rn,Vr),Ut=Ut+Math.imul(jr,Zr)|0,Ft=Ft+Math.imul(jr,an)|0,Ft=Ft+Math.imul(Fr,Zr)|0,sr=sr+Math.imul(Fr,an)|0,Ut=Ut+Math.imul(Ir,Wr)|0,Ft=Ft+Math.imul(Ir,Tn)|0,Ft=Ft+Math.imul(Dr,Wr)|0,sr=sr+Math.imul(Dr,Tn)|0,Ut=Ut+Math.imul(kr,Xr)|0,Ft=Ft+Math.imul(kr,cn)|0,Ft=Ft+Math.imul(Br,Xr)|0,sr=sr+Math.imul(Br,cn)|0,Ut=Ut+Math.imul(Cr,Jr)|0,Ft=Ft+Math.imul(Cr,fn)|0,Ft=Ft+Math.imul(wr,Jr)|0,sr=sr+Math.imul(wr,fn)|0,Ut=Ut+Math.imul(Ar,Hr)|0,Ft=Ft+Math.imul(Ar,en)|0,Ft=Ft+Math.imul(Tr,Hr)|0,sr=sr+Math.imul(Tr,en)|0,Ut=Ut+Math.imul(cr,Kr)|0,Ft=Ft+Math.imul(cr,Mn)|0,Ft=Ft+Math.imul(yr,Kr)|0,sr=sr+Math.imul(yr,Mn)|0,Ut=Ut+Math.imul($r,Yr)|0,Ft=Ft+Math.imul($r,Un)|0,Ft=Ft+Math.imul(pr,Yr)|0,sr=sr+Math.imul(pr,Un)|0,Ut=Ut+Math.imul(_r,Qr)|0,Ft=Ft+Math.imul(_r,Ln)|0,Ft=Ft+Math.imul(dr,Qr)|0,sr=sr+Math.imul(dr,Ln)|0;var Gi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,Ut=Math.imul(Lr,qr),Ft=Math.imul(Lr,Vr),Ft=Ft+Math.imul(sn,qr)|0,sr=Math.imul(sn,Vr),Ut=Ut+Math.imul(Gr,Zr)|0,Ft=Ft+Math.imul(Gr,an)|0,Ft=Ft+Math.imul(rn,Zr)|0,sr=sr+Math.imul(rn,an)|0,Ut=Ut+Math.imul(jr,Wr)|0,Ft=Ft+Math.imul(jr,Tn)|0,Ft=Ft+Math.imul(Fr,Wr)|0,sr=sr+Math.imul(Fr,Tn)|0,Ut=Ut+Math.imul(Ir,Xr)|0,Ft=Ft+Math.imul(Ir,cn)|0,Ft=Ft+Math.imul(Dr,Xr)|0,sr=sr+Math.imul(Dr,cn)|0,Ut=Ut+Math.imul(kr,Jr)|0,Ft=Ft+Math.imul(kr,fn)|0,Ft=Ft+Math.imul(Br,Jr)|0,sr=sr+Math.imul(Br,fn)|0,Ut=Ut+Math.imul(Cr,Hr)|0,Ft=Ft+Math.imul(Cr,en)|0,Ft=Ft+Math.imul(wr,Hr)|0,sr=sr+Math.imul(wr,en)|0,Ut=Ut+Math.imul(Ar,Kr)|0,Ft=Ft+Math.imul(Ar,Mn)|0,Ft=Ft+Math.imul(Tr,Kr)|0,sr=sr+Math.imul(Tr,Mn)|0,Ut=Ut+Math.imul(cr,Yr)|0,Ft=Ft+Math.imul(cr,Un)|0,Ft=Ft+Math.imul(yr,Yr)|0,sr=sr+Math.imul(yr,Un)|0,Ut=Ut+Math.imul($r,Qr)|0,Ft=Ft+Math.imul($r,Ln)|0,Ft=Ft+Math.imul(pr,Qr)|0,sr=sr+Math.imul(pr,Ln)|0,Ut=Ut+Math.imul(_r,Fn)|0,Ft=Ft+Math.imul(_r,ei)|0,Ft=Ft+Math.imul(dr,Fn)|0,sr=sr+Math.imul(dr,ei)|0;var Vi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,Ut=Math.imul(Lr,Zr),Ft=Math.imul(Lr,an),Ft=Ft+Math.imul(sn,Zr)|0,sr=Math.imul(sn,an),Ut=Ut+Math.imul(Gr,Wr)|0,Ft=Ft+Math.imul(Gr,Tn)|0,Ft=Ft+Math.imul(rn,Wr)|0,sr=sr+Math.imul(rn,Tn)|0,Ut=Ut+Math.imul(jr,Xr)|0,Ft=Ft+Math.imul(jr,cn)|0,Ft=Ft+Math.imul(Fr,Xr)|0,sr=sr+Math.imul(Fr,cn)|0,Ut=Ut+Math.imul(Ir,Jr)|0,Ft=Ft+Math.imul(Ir,fn)|0,Ft=Ft+Math.imul(Dr,Jr)|0,sr=sr+Math.imul(Dr,fn)|0,Ut=Ut+Math.imul(kr,Hr)|0,Ft=Ft+Math.imul(kr,en)|0,Ft=Ft+Math.imul(Br,Hr)|0,sr=sr+Math.imul(Br,en)|0,Ut=Ut+Math.imul(Cr,Kr)|0,Ft=Ft+Math.imul(Cr,Mn)|0,Ft=Ft+Math.imul(wr,Kr)|0,sr=sr+Math.imul(wr,Mn)|0,Ut=Ut+Math.imul(Ar,Yr)|0,Ft=Ft+Math.imul(Ar,Un)|0,Ft=Ft+Math.imul(Tr,Yr)|0,sr=sr+Math.imul(Tr,Un)|0,Ut=Ut+Math.imul(cr,Qr)|0,Ft=Ft+Math.imul(cr,Ln)|0,Ft=Ft+Math.imul(yr,Qr)|0,sr=sr+Math.imul(yr,Ln)|0,Ut=Ut+Math.imul($r,Fn)|0,Ft=Ft+Math.imul($r,ei)|0,Ft=Ft+Math.imul(pr,Fn)|0,sr=sr+Math.imul(pr,ei)|0;var Wi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,Ut=Math.imul(Lr,Wr),Ft=Math.imul(Lr,Tn),Ft=Ft+Math.imul(sn,Wr)|0,sr=Math.imul(sn,Tn),Ut=Ut+Math.imul(Gr,Xr)|0,Ft=Ft+Math.imul(Gr,cn)|0,Ft=Ft+Math.imul(rn,Xr)|0,sr=sr+Math.imul(rn,cn)|0,Ut=Ut+Math.imul(jr,Jr)|0,Ft=Ft+Math.imul(jr,fn)|0,Ft=Ft+Math.imul(Fr,Jr)|0,sr=sr+Math.imul(Fr,fn)|0,Ut=Ut+Math.imul(Ir,Hr)|0,Ft=Ft+Math.imul(Ir,en)|0,Ft=Ft+Math.imul(Dr,Hr)|0,sr=sr+Math.imul(Dr,en)|0,Ut=Ut+Math.imul(kr,Kr)|0,Ft=Ft+Math.imul(kr,Mn)|0,Ft=Ft+Math.imul(Br,Kr)|0,sr=sr+Math.imul(Br,Mn)|0,Ut=Ut+Math.imul(Cr,Yr)|0,Ft=Ft+Math.imul(Cr,Un)|0,Ft=Ft+Math.imul(wr,Yr)|0,sr=sr+Math.imul(wr,Un)|0,Ut=Ut+Math.imul(Ar,Qr)|0,Ft=Ft+Math.imul(Ar,Ln)|0,Ft=Ft+Math.imul(Tr,Qr)|0,sr=sr+Math.imul(Tr,Ln)|0,Ut=Ut+Math.imul(cr,Fn)|0,Ft=Ft+Math.imul(cr,ei)|0,Ft=Ft+Math.imul(yr,Fn)|0,sr=sr+Math.imul(yr,ei)|0;var Hi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,Ut=Math.imul(Lr,Xr),Ft=Math.imul(Lr,cn),Ft=Ft+Math.imul(sn,Xr)|0,sr=Math.imul(sn,cn),Ut=Ut+Math.imul(Gr,Jr)|0,Ft=Ft+Math.imul(Gr,fn)|0,Ft=Ft+Math.imul(rn,Jr)|0,sr=sr+Math.imul(rn,fn)|0,Ut=Ut+Math.imul(jr,Hr)|0,Ft=Ft+Math.imul(jr,en)|0,Ft=Ft+Math.imul(Fr,Hr)|0,sr=sr+Math.imul(Fr,en)|0,Ut=Ut+Math.imul(Ir,Kr)|0,Ft=Ft+Math.imul(Ir,Mn)|0,Ft=Ft+Math.imul(Dr,Kr)|0,sr=sr+Math.imul(Dr,Mn)|0,Ut=Ut+Math.imul(kr,Yr)|0,Ft=Ft+Math.imul(kr,Un)|0,Ft=Ft+Math.imul(Br,Yr)|0,sr=sr+Math.imul(Br,Un)|0,Ut=Ut+Math.imul(Cr,Qr)|0,Ft=Ft+Math.imul(Cr,Ln)|0,Ft=Ft+Math.imul(wr,Qr)|0,sr=sr+Math.imul(wr,Ln)|0,Ut=Ut+Math.imul(Ar,Fn)|0,Ft=Ft+Math.imul(Ar,ei)|0,Ft=Ft+Math.imul(Tr,Fn)|0,sr=sr+Math.imul(Tr,ei)|0;var Ki=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,Ut=Math.imul(Lr,Jr),Ft=Math.imul(Lr,fn),Ft=Ft+Math.imul(sn,Jr)|0,sr=Math.imul(sn,fn),Ut=Ut+Math.imul(Gr,Hr)|0,Ft=Ft+Math.imul(Gr,en)|0,Ft=Ft+Math.imul(rn,Hr)|0,sr=sr+Math.imul(rn,en)|0,Ut=Ut+Math.imul(jr,Kr)|0,Ft=Ft+Math.imul(jr,Mn)|0,Ft=Ft+Math.imul(Fr,Kr)|0,sr=sr+Math.imul(Fr,Mn)|0,Ut=Ut+Math.imul(Ir,Yr)|0,Ft=Ft+Math.imul(Ir,Un)|0,Ft=Ft+Math.imul(Dr,Yr)|0,sr=sr+Math.imul(Dr,Un)|0,Ut=Ut+Math.imul(kr,Qr)|0,Ft=Ft+Math.imul(kr,Ln)|0,Ft=Ft+Math.imul(Br,Qr)|0,sr=sr+Math.imul(Br,Ln)|0,Ut=Ut+Math.imul(Cr,Fn)|0,Ft=Ft+Math.imul(Cr,ei)|0,Ft=Ft+Math.imul(wr,Fn)|0,sr=sr+Math.imul(wr,ei)|0;var Zi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,Ut=Math.imul(Lr,Hr),Ft=Math.imul(Lr,en),Ft=Ft+Math.imul(sn,Hr)|0,sr=Math.imul(sn,en),Ut=Ut+Math.imul(Gr,Kr)|0,Ft=Ft+Math.imul(Gr,Mn)|0,Ft=Ft+Math.imul(rn,Kr)|0,sr=sr+Math.imul(rn,Mn)|0,Ut=Ut+Math.imul(jr,Yr)|0,Ft=Ft+Math.imul(jr,Un)|0,Ft=Ft+Math.imul(Fr,Yr)|0,sr=sr+Math.imul(Fr,Un)|0,Ut=Ut+Math.imul(Ir,Qr)|0,Ft=Ft+Math.imul(Ir,Ln)|0,Ft=Ft+Math.imul(Dr,Qr)|0,sr=sr+Math.imul(Dr,Ln)|0,Ut=Ut+Math.imul(kr,Fn)|0,Ft=Ft+Math.imul(kr,ei)|0,Ft=Ft+Math.imul(Br,Fn)|0,sr=sr+Math.imul(Br,ei)|0;var Xi=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,Ut=Math.imul(Lr,Kr),Ft=Math.imul(Lr,Mn),Ft=Ft+Math.imul(sn,Kr)|0,sr=Math.imul(sn,Mn),Ut=Ut+Math.imul(Gr,Yr)|0,Ft=Ft+Math.imul(Gr,Un)|0,Ft=Ft+Math.imul(rn,Yr)|0,sr=sr+Math.imul(rn,Un)|0,Ut=Ut+Math.imul(jr,Qr)|0,Ft=Ft+Math.imul(jr,Ln)|0,Ft=Ft+Math.imul(Fr,Qr)|0,sr=sr+Math.imul(Fr,Ln)|0,Ut=Ut+Math.imul(Ir,Fn)|0,Ft=Ft+Math.imul(Ir,ei)|0,Ft=Ft+Math.imul(Dr,Fn)|0,sr=sr+Math.imul(Dr,ei)|0;var Ji=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,Ut=Math.imul(Lr,Yr),Ft=Math.imul(Lr,Un),Ft=Ft+Math.imul(sn,Yr)|0,sr=Math.imul(sn,Un),Ut=Ut+Math.imul(Gr,Qr)|0,Ft=Ft+Math.imul(Gr,Ln)|0,Ft=Ft+Math.imul(rn,Qr)|0,sr=sr+Math.imul(rn,Ln)|0,Ut=Ut+Math.imul(jr,Fn)|0,Ft=Ft+Math.imul(jr,ei)|0,Ft=Ft+Math.imul(Fr,Fn)|0,sr=sr+Math.imul(Fr,ei)|0;var Ds=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,Ut=Math.imul(Lr,Qr),Ft=Math.imul(Lr,Ln),Ft=Ft+Math.imul(sn,Qr)|0,sr=Math.imul(sn,Ln),Ut=Ut+Math.imul(Gr,Fn)|0,Ft=Ft+Math.imul(Gr,ei)|0,Ft=Ft+Math.imul(rn,Fn)|0,sr=sr+Math.imul(rn,ei)|0;var Ns=(tr+Ut|0)+((Ft&8191)<<13)|0;tr=(sr+(Ft>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,Ut=Math.imul(Lr,Fn),Ft=Math.imul(Lr,ei),Ft=Ft+Math.imul(sn,Fn)|0,sr=Math.imul(sn,ei);var Ia=(tr+Ut|0)+((Ft&8191)<<13)|0;return tr=(sr+(Ft>>>13)|0)+(Ia>>>26)|0,Ia&=67108863,yt[0]=Ti,yt[1]=ki,yt[2]=Oi,yt[3]=Ii,yt[4]=Pi,yt[5]=ji,yt[6]=Ui,yt[7]=zi,yt[8]=Gi,yt[9]=Vi,yt[10]=Wi,yt[11]=Hi,yt[12]=Ki,yt[13]=Zi,yt[14]=Xi,yt[15]=Ji,yt[16]=Ds,yt[17]=Ns,yt[18]=Ia,tr!==0&&(yt[19]=tr,Et.length++),Et};Math.imul||(wt=ct);function qt(tt,Ye,ot){ot.negative=Ye.negative^tt.negative,ot.length=tt.length+Ye.length;for(var Et=0,er=0,rr=0;rr<ot.length-1;rr++){var yt=er;er=0;for(var tr=Et&67108863,Ut=Math.min(rr,Ye.length-1),Ft=Math.max(0,rr-tt.length+1);Ft<=Ut;Ft++){var sr=rr-Ft,vr=tt.words[sr]|0,_r=Ye.words[Ft]|0,dr=vr*_r,gr=dr&67108863;yt=yt+(dr/67108864|0)|0,gr=gr+tr|0,tr=gr&67108863,yt=yt+(gr>>>26)|0,er+=yt>>>26,yt&=67108863}ot.words[rr]=tr,Et=yt,yt=er}return Et!==0?ot.words[rr]=Et:ot.length--,ot._strip()}function nr(tt,Ye,ot){return qt(tt,Ye,ot)}l.prototype.mulTo=function(Ye,ot){var Et,er=this.length+Ye.length;return this.length===10&&Ye.length===10?Et=wt(this,Ye,ot):er<63?Et=ct(this,Ye,ot):er<1024?Et=qt(this,Ye,ot):Et=nr(this,Ye,ot),Et},l.prototype.mul=function(Ye){var ot=new l(null);return ot.words=new Array(this.length+Ye.length),this.mulTo(Ye,ot)},l.prototype.mulf=function(Ye){var ot=new l(null);return ot.words=new Array(this.length+Ye.length),nr(this,Ye,ot)},l.prototype.imul=function(Ye){return this.clone().mulTo(Ye,this)},l.prototype.imuln=function(Ye){var ot=Ye<0;ot&&(Ye=-Ye),s(typeof Ye=="number"),s(Ye<67108864);for(var Et=0,er=0;er<this.length;er++){var rr=(this.words[er]|0)*Ye,yt=(rr&67108863)+(Et&67108863);Et>>=26,Et+=rr/67108864|0,Et+=yt>>>26,this.words[er]=yt&67108863}return Et!==0&&(this.words[er]=Et,this.length++),ot?this.ineg():this},l.prototype.muln=function(Ye){return this.clone().imuln(Ye)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(Ye){var ot=Qe(Ye);if(ot.length===0)return new l(1);for(var Et=this,er=0;er<ot.length&&ot[er]===0;er++,Et=Et.sqr());if(++er<ot.length)for(var rr=Et.sqr();er<ot.length;er++,rr=rr.sqr())ot[er]!==0&&(Et=Et.mul(rr));return Et},l.prototype.iushln=function(Ye){s(typeof Ye=="number"&&Ye>=0);var ot=Ye%26,Et=(Ye-ot)/26,er=67108863>>>26-ot<<26-ot,rr;if(ot!==0){var yt=0;for(rr=0;rr<this.length;rr++){var tr=this.words[rr]&er,Ut=(this.words[rr]|0)-tr<<ot;this.words[rr]=Ut|yt,yt=tr>>>26-ot}yt&&(this.words[rr]=yt,this.length++)}if(Et!==0){for(rr=this.length-1;rr>=0;rr--)this.words[rr+Et]=this.words[rr];for(rr=0;rr<Et;rr++)this.words[rr]=0;this.length+=Et}return this._strip()},l.prototype.ishln=function(Ye){return s(this.negative===0),this.iushln(Ye)},l.prototype.iushrn=function(Ye,ot,Et){s(typeof Ye=="number"&&Ye>=0);var er;ot?er=(ot-ot%26)/26:er=0;var rr=Ye%26,yt=Math.min((Ye-rr)/26,this.length),tr=67108863^67108863>>>rr<<rr,Ut=Et;if(er-=yt,er=Math.max(0,er),Ut){for(var Ft=0;Ft<yt;Ft++)Ut.words[Ft]=this.words[Ft];Ut.length=yt}if(yt!==0)if(this.length>yt)for(this.length-=yt,Ft=0;Ft<this.length;Ft++)this.words[Ft]=this.words[Ft+yt];else this.words[0]=0,this.length=1;var sr=0;for(Ft=this.length-1;Ft>=0&&(sr!==0||Ft>=er);Ft--){var vr=this.words[Ft]|0;this.words[Ft]=sr<<26-rr|vr>>>rr,sr=vr&tr}return Ut&&sr!==0&&(Ut.words[Ut.length++]=sr),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(Ye,ot,Et){return s(this.negative===0),this.iushrn(Ye,ot,Et)},l.prototype.shln=function(Ye){return this.clone().ishln(Ye)},l.prototype.ushln=function(Ye){return this.clone().iushln(Ye)},l.prototype.shrn=function(Ye){return this.clone().ishrn(Ye)},l.prototype.ushrn=function(Ye){return this.clone().iushrn(Ye)},l.prototype.testn=function(Ye){s(typeof Ye=="number"&&Ye>=0);var ot=Ye%26,Et=(Ye-ot)/26,er=1<<ot;if(this.length<=Et)return!1;var rr=this.words[Et];return!!(rr&er)},l.prototype.imaskn=function(Ye){s(typeof Ye=="number"&&Ye>=0);var ot=Ye%26,Et=(Ye-ot)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=Et)return this;if(ot!==0&&Et++,this.length=Math.min(Et,this.length),ot!==0){var er=67108863^67108863>>>ot<<ot;this.words[this.length-1]&=er}return this._strip()},l.prototype.maskn=function(Ye){return this.clone().imaskn(Ye)},l.prototype.iaddn=function(Ye){return s(typeof Ye=="number"),s(Ye<67108864),Ye<0?this.isubn(-Ye):this.negative!==0?this.length===1&&(this.words[0]|0)<=Ye?(this.words[0]=Ye-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Ye),this.negative=1,this):this._iaddn(Ye)},l.prototype._iaddn=function(Ye){this.words[0]+=Ye;for(var ot=0;ot<this.length&&this.words[ot]>=67108864;ot++)this.words[ot]-=67108864,ot===this.length-1?this.words[ot+1]=1:this.words[ot+1]++;return this.length=Math.max(this.length,ot+1),this},l.prototype.isubn=function(Ye){if(s(typeof Ye=="number"),s(Ye<67108864),Ye<0)return this.iaddn(-Ye);if(this.negative!==0)return this.negative=0,this.iaddn(Ye),this.negative=1,this;if(this.words[0]-=Ye,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var ot=0;ot<this.length&&this.words[ot]<0;ot++)this.words[ot]+=67108864,this.words[ot+1]-=1;return this._strip()},l.prototype.addn=function(Ye){return this.clone().iaddn(Ye)},l.prototype.subn=function(Ye){return this.clone().isubn(Ye)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(Ye,ot,Et){var er=Ye.length+Et,rr;this._expand(er);var yt,tr=0;for(rr=0;rr<Ye.length;rr++){yt=(this.words[rr+Et]|0)+tr;var Ut=(Ye.words[rr]|0)*ot;yt-=Ut&67108863,tr=(yt>>26)-(Ut/67108864|0),this.words[rr+Et]=yt&67108863}for(;rr<this.length-Et;rr++)yt=(this.words[rr+Et]|0)+tr,tr=yt>>26,this.words[rr+Et]=yt&67108863;if(tr===0)return this._strip();for(s(tr===-1),tr=0,rr=0;rr<this.length;rr++)yt=-(this.words[rr]|0)+tr,tr=yt>>26,this.words[rr]=yt&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(Ye,ot){var Et=this.length-Ye.length,er=this.clone(),rr=Ye,yt=rr.words[rr.length-1]|0,tr=this._countBits(yt);Et=26-tr,Et!==0&&(rr=rr.ushln(Et),er.iushln(Et),yt=rr.words[rr.length-1]|0);var Ut=er.length-rr.length,Ft;if(ot!=="mod"){Ft=new l(null),Ft.length=Ut+1,Ft.words=new Array(Ft.length);for(var sr=0;sr<Ft.length;sr++)Ft.words[sr]=0}var vr=er.clone()._ishlnsubmul(rr,1,Ut);vr.negative===0&&(er=vr,Ft&&(Ft.words[Ut]=1));for(var _r=Ut-1;_r>=0;_r--){var dr=(er.words[rr.length+_r]|0)*67108864+(er.words[rr.length+_r-1]|0);for(dr=Math.min(dr/yt|0,67108863),er._ishlnsubmul(rr,dr,_r);er.negative!==0;)dr--,er.negative=0,er._ishlnsubmul(rr,1,_r),er.isZero()||(er.negative^=1);Ft&&(Ft.words[_r]=dr)}return Ft&&Ft._strip(),er._strip(),ot!=="div"&&Et!==0&&er.iushrn(Et),{div:Ft||null,mod:er}},l.prototype.divmod=function(Ye,ot,Et){if(s(!Ye.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var er,rr,yt;return this.negative!==0&&Ye.negative===0?(yt=this.neg().divmod(Ye,ot),ot!=="mod"&&(er=yt.div.neg()),ot!=="div"&&(rr=yt.mod.neg(),Et&&rr.negative!==0&&rr.iadd(Ye)),{div:er,mod:rr}):this.negative===0&&Ye.negative!==0?(yt=this.divmod(Ye.neg(),ot),ot!=="mod"&&(er=yt.div.neg()),{div:er,mod:yt.mod}):this.negative&Ye.negative?(yt=this.neg().divmod(Ye.neg(),ot),ot!=="div"&&(rr=yt.mod.neg(),Et&&rr.negative!==0&&rr.isub(Ye)),{div:yt.div,mod:rr}):Ye.length>this.length||this.cmp(Ye)<0?{div:new l(0),mod:this}:Ye.length===1?ot==="div"?{div:this.divn(Ye.words[0]),mod:null}:ot==="mod"?{div:null,mod:new l(this.modrn(Ye.words[0]))}:{div:this.divn(Ye.words[0]),mod:new l(this.modrn(Ye.words[0]))}:this._wordDiv(Ye,ot)},l.prototype.div=function(Ye){return this.divmod(Ye,"div",!1).div},l.prototype.mod=function(Ye){return this.divmod(Ye,"mod",!1).mod},l.prototype.umod=function(Ye){return this.divmod(Ye,"mod",!0).mod},l.prototype.divRound=function(Ye){var ot=this.divmod(Ye);if(ot.mod.isZero())return ot.div;var Et=ot.div.negative!==0?ot.mod.isub(Ye):ot.mod,er=Ye.ushrn(1),rr=Ye.andln(1),yt=Et.cmp(er);return yt<0||rr===1&&yt===0?ot.div:ot.div.negative!==0?ot.div.isubn(1):ot.div.iaddn(1)},l.prototype.modrn=function(Ye){var ot=Ye<0;ot&&(Ye=-Ye),s(Ye<=67108863);for(var Et=(1<<26)%Ye,er=0,rr=this.length-1;rr>=0;rr--)er=(Et*er+(this.words[rr]|0))%Ye;return ot?-er:er},l.prototype.modn=function(Ye){return this.modrn(Ye)},l.prototype.idivn=function(Ye){var ot=Ye<0;ot&&(Ye=-Ye),s(Ye<=67108863);for(var Et=0,er=this.length-1;er>=0;er--){var rr=(this.words[er]|0)+Et*67108864;this.words[er]=rr/Ye|0,Et=rr%Ye}return this._strip(),ot?this.ineg():this},l.prototype.divn=function(Ye){return this.clone().idivn(Ye)},l.prototype.egcd=function(Ye){s(Ye.negative===0),s(!Ye.isZero());var ot=this,Et=Ye.clone();ot.negative!==0?ot=ot.umod(Ye):ot=ot.clone();for(var er=new l(1),rr=new l(0),yt=new l(0),tr=new l(1),Ut=0;ot.isEven()&&Et.isEven();)ot.iushrn(1),Et.iushrn(1),++Ut;for(var Ft=Et.clone(),sr=ot.clone();!ot.isZero();){for(var vr=0,_r=1;!(ot.words[0]&_r)&&vr<26;++vr,_r<<=1);if(vr>0)for(ot.iushrn(vr);vr-- >0;)(er.isOdd()||rr.isOdd())&&(er.iadd(Ft),rr.isub(sr)),er.iushrn(1),rr.iushrn(1);for(var dr=0,gr=1;!(Et.words[0]&gr)&&dr<26;++dr,gr<<=1);if(dr>0)for(Et.iushrn(dr);dr-- >0;)(yt.isOdd()||tr.isOdd())&&(yt.iadd(Ft),tr.isub(sr)),yt.iushrn(1),tr.iushrn(1);ot.cmp(Et)>=0?(ot.isub(Et),er.isub(yt),rr.isub(tr)):(Et.isub(ot),yt.isub(er),tr.isub(rr))}return{a:yt,b:tr,gcd:Et.iushln(Ut)}},l.prototype._invmp=function(Ye){s(Ye.negative===0),s(!Ye.isZero());var ot=this,Et=Ye.clone();ot.negative!==0?ot=ot.umod(Ye):ot=ot.clone();for(var er=new l(1),rr=new l(0),yt=Et.clone();ot.cmpn(1)>0&&Et.cmpn(1)>0;){for(var tr=0,Ut=1;!(ot.words[0]&Ut)&&tr<26;++tr,Ut<<=1);if(tr>0)for(ot.iushrn(tr);tr-- >0;)er.isOdd()&&er.iadd(yt),er.iushrn(1);for(var Ft=0,sr=1;!(Et.words[0]&sr)&&Ft<26;++Ft,sr<<=1);if(Ft>0)for(Et.iushrn(Ft);Ft-- >0;)rr.isOdd()&&rr.iadd(yt),rr.iushrn(1);ot.cmp(Et)>=0?(ot.isub(Et),er.isub(rr)):(Et.isub(ot),rr.isub(er))}var vr;return ot.cmpn(1)===0?vr=er:vr=rr,vr.cmpn(0)<0&&vr.iadd(Ye),vr},l.prototype.gcd=function(Ye){if(this.isZero())return Ye.abs();if(Ye.isZero())return this.abs();var ot=this.clone(),Et=Ye.clone();ot.negative=0,Et.negative=0;for(var er=0;ot.isEven()&&Et.isEven();er++)ot.iushrn(1),Et.iushrn(1);do{for(;ot.isEven();)ot.iushrn(1);for(;Et.isEven();)Et.iushrn(1);var rr=ot.cmp(Et);if(rr<0){var yt=ot;ot=Et,Et=yt}else if(rr===0||Et.cmpn(1)===0)break;ot.isub(Et)}while(!0);return Et.iushln(er)},l.prototype.invm=function(Ye){return this.egcd(Ye).a.umod(Ye)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(Ye){return this.words[0]&Ye},l.prototype.bincn=function(Ye){s(typeof Ye=="number");var ot=Ye%26,Et=(Ye-ot)/26,er=1<<ot;if(this.length<=Et)return this._expand(Et+1),this.words[Et]|=er,this;for(var rr=er,yt=Et;rr!==0&&yt<this.length;yt++){var tr=this.words[yt]|0;tr+=rr,rr=tr>>>26,tr&=67108863,this.words[yt]=tr}return rr!==0&&(this.words[yt]=rr,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(Ye){var ot=Ye<0;if(this.negative!==0&&!ot)return-1;if(this.negative===0&&ot)return 1;this._strip();var Et;if(this.length>1)Et=1;else{ot&&(Ye=-Ye),s(Ye<=67108863,"Number is too big");var er=this.words[0]|0;Et=er===Ye?0:er<Ye?-1:1}return this.negative!==0?-Et|0:Et},l.prototype.cmp=function(Ye){if(this.negative!==0&&Ye.negative===0)return-1;if(this.negative===0&&Ye.negative!==0)return 1;var ot=this.ucmp(Ye);return this.negative!==0?-ot|0:ot},l.prototype.ucmp=function(Ye){if(this.length>Ye.length)return 1;if(this.length<Ye.length)return-1;for(var ot=0,Et=this.length-1;Et>=0;Et--){var er=this.words[Et]|0,rr=Ye.words[Et]|0;if(er!==rr){er<rr?ot=-1:er>rr&&(ot=1);break}}return ot},l.prototype.gtn=function(Ye){return this.cmpn(Ye)===1},l.prototype.gt=function(Ye){return this.cmp(Ye)===1},l.prototype.gten=function(Ye){return this.cmpn(Ye)>=0},l.prototype.gte=function(Ye){return this.cmp(Ye)>=0},l.prototype.ltn=function(Ye){return this.cmpn(Ye)===-1},l.prototype.lt=function(Ye){return this.cmp(Ye)===-1},l.prototype.lten=function(Ye){return this.cmpn(Ye)<=0},l.prototype.lte=function(Ye){return this.cmp(Ye)<=0},l.prototype.eqn=function(Ye){return this.cmpn(Ye)===0},l.prototype.eq=function(Ye){return this.cmp(Ye)===0},l.red=function(Ye){return new Lt(Ye)},l.prototype.toRed=function(Ye){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),Ye.convertTo(this)._forceRed(Ye)},l.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(Ye){return this.red=Ye,this},l.prototype.forceRed=function(Ye){return s(!this.red,"Already a number in reduction context"),this._forceRed(Ye)},l.prototype.redAdd=function(Ye){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,Ye)},l.prototype.redIAdd=function(Ye){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Ye)},l.prototype.redSub=function(Ye){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,Ye)},l.prototype.redISub=function(Ye){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,Ye)},l.prototype.redShl=function(Ye){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,Ye)},l.prototype.redMul=function(Ye){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,Ye),this.red.mul(this,Ye)},l.prototype.redIMul=function(Ye){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,Ye),this.red.imul(this,Ye)},l.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(Ye){return s(this.red&&!Ye.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Ye)};var ir={k256:null,p224:null,p192:null,p25519:null};function or(tt,Ye){this.name=tt,this.p=new l(Ye,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}or.prototype._tmp=function(){var Ye=new l(null);return Ye.words=new Array(Math.ceil(this.n/13)),Ye},or.prototype.ireduce=function(Ye){var ot=Ye,Et;do this.split(ot,this.tmp),ot=this.imulK(ot),ot=ot.iadd(this.tmp),Et=ot.bitLength();while(Et>this.n);var er=Et<this.n?-1:ot.ucmp(this.p);return er===0?(ot.words[0]=0,ot.length=1):er>0?ot.isub(this.p):ot.strip!==void 0?ot.strip():ot._strip(),ot},or.prototype.split=function(Ye,ot){Ye.iushrn(this.n,0,ot)},or.prototype.imulK=function(Ye){return Ye.imul(this.k)};function ur(){or.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(ur,or),ur.prototype.split=function(Ye,ot){for(var Et=4194303,er=Math.min(Ye.length,9),rr=0;rr<er;rr++)ot.words[rr]=Ye.words[rr];if(ot.length=er,Ye.length<=9){Ye.words[0]=0,Ye.length=1;return}var yt=Ye.words[9];for(ot.words[ot.length++]=yt&Et,rr=10;rr<Ye.length;rr++){var tr=Ye.words[rr]|0;Ye.words[rr-10]=(tr&Et)<<4|yt>>>22,yt=tr}yt>>>=22,Ye.words[rr-10]=yt,yt===0&&Ye.length>10?Ye.length-=10:Ye.length-=9},ur.prototype.imulK=function(Ye){Ye.words[Ye.length]=0,Ye.words[Ye.length+1]=0,Ye.length+=2;for(var ot=0,Et=0;Et<Ye.length;Et++){var er=Ye.words[Et]|0;ot+=er*977,Ye.words[Et]=ot&67108863,ot=er*64+(ot/67108864|0)}return Ye.words[Ye.length-1]===0&&(Ye.length--,Ye.words[Ye.length-1]===0&&Ye.length--),Ye};function hr(){or.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(hr,or);function fr(){or.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(fr,or);function ar(){or.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(ar,or),ar.prototype.imulK=function(Ye){for(var ot=0,Et=0;Et<Ye.length;Et++){var er=(Ye.words[Et]|0)*19+ot,rr=er&67108863;er>>>=26,Ye.words[Et]=rr,ot=er}return ot!==0&&(Ye.words[Ye.length++]=ot),Ye},l._prime=function(Ye){if(ir[Ye])return ir[Ye];var ot;if(Ye==="k256")ot=new ur;else if(Ye==="p224")ot=new hr;else if(Ye==="p192")ot=new fr;else if(Ye==="p25519")ot=new ar;else throw new Error("Unknown prime "+Ye);return ir[Ye]=ot,ot};function Lt(tt){if(typeof tt=="string"){var Ye=l._prime(tt);this.m=Ye.p,this.prime=Ye}else s(tt.gtn(1),"modulus must be greater than 1"),this.m=tt,this.prime=null}Lt.prototype._verify1=function(Ye){s(Ye.negative===0,"red works only with positives"),s(Ye.red,"red works only with red numbers")},Lt.prototype._verify2=function(Ye,ot){s((Ye.negative|ot.negative)===0,"red works only with positives"),s(Ye.red&&Ye.red===ot.red,"red works only with red numbers")},Lt.prototype.imod=function(Ye){return this.prime?this.prime.ireduce(Ye)._forceRed(this):(N(Ye,Ye.umod(this.m)._forceRed(this)),Ye)},Lt.prototype.neg=function(Ye){return Ye.isZero()?Ye.clone():this.m.sub(Ye)._forceRed(this)},Lt.prototype.add=function(Ye,ot){this._verify2(Ye,ot);var Et=Ye.add(ot);return Et.cmp(this.m)>=0&&Et.isub(this.m),Et._forceRed(this)},Lt.prototype.iadd=function(Ye,ot){this._verify2(Ye,ot);var Et=Ye.iadd(ot);return Et.cmp(this.m)>=0&&Et.isub(this.m),Et},Lt.prototype.sub=function(Ye,ot){this._verify2(Ye,ot);var Et=Ye.sub(ot);return Et.cmpn(0)<0&&Et.iadd(this.m),Et._forceRed(this)},Lt.prototype.isub=function(Ye,ot){this._verify2(Ye,ot);var Et=Ye.isub(ot);return Et.cmpn(0)<0&&Et.iadd(this.m),Et},Lt.prototype.shl=function(Ye,ot){return this._verify1(Ye),this.imod(Ye.ushln(ot))},Lt.prototype.imul=function(Ye,ot){return this._verify2(Ye,ot),this.imod(Ye.imul(ot))},Lt.prototype.mul=function(Ye,ot){return this._verify2(Ye,ot),this.imod(Ye.mul(ot))},Lt.prototype.isqr=function(Ye){return this.imul(Ye,Ye.clone())},Lt.prototype.sqr=function(Ye){return this.mul(Ye,Ye)},Lt.prototype.sqrt=function(Ye){if(Ye.isZero())return Ye.clone();var ot=this.m.andln(3);if(s(ot%2===1),ot===3){var Et=this.m.add(new l(1)).iushrn(2);return this.pow(Ye,Et)}for(var er=this.m.subn(1),rr=0;!er.isZero()&&er.andln(1)===0;)rr++,er.iushrn(1);s(!er.isZero());var yt=new l(1).toRed(this),tr=yt.redNeg(),Ut=this.m.subn(1).iushrn(1),Ft=this.m.bitLength();for(Ft=new l(2*Ft*Ft).toRed(this);this.pow(Ft,Ut).cmp(tr)!==0;)Ft.redIAdd(tr);for(var sr=this.pow(Ft,er),vr=this.pow(Ye,er.addn(1).iushrn(1)),_r=this.pow(Ye,er),dr=rr;_r.cmp(yt)!==0;){for(var gr=_r,$r=0;gr.cmp(yt)!==0;$r++)gr=gr.redSqr();s($r<dr);var pr=this.pow(sr,new l(1).iushln(dr-$r-1));vr=vr.redMul(pr),sr=pr.redSqr(),_r=_r.redMul(sr),dr=$r}return vr},Lt.prototype.invm=function(Ye){var ot=Ye._invmp(this.m);return ot.negative!==0?(ot.negative=0,this.imod(ot).redNeg()):this.imod(ot)},Lt.prototype.pow=function(Ye,ot){if(ot.isZero())return new l(1).toRed(this);if(ot.cmpn(1)===0)return Ye.clone();var Et=4,er=new Array(1<<Et);er[0]=new l(1).toRed(this),er[1]=Ye;for(var rr=2;rr<er.length;rr++)er[rr]=this.mul(er[rr-1],Ye);var yt=er[0],tr=0,Ut=0,Ft=ot.bitLength()%26;for(Ft===0&&(Ft=26),rr=ot.length-1;rr>=0;rr--){for(var sr=ot.words[rr],vr=Ft-1;vr>=0;vr--){var _r=sr>>vr&1;if(yt!==er[0]&&(yt=this.sqr(yt)),_r===0&&tr===0){Ut=0;continue}tr<<=1,tr|=_r,Ut++,!(Ut!==Et&&(rr!==0||vr!==0))&&(yt=this.mul(yt,er[tr]),Ut=0,tr=0)}Ft=26}return yt},Lt.prototype.convertTo=function(Ye){var ot=Ye.umod(this.m);return ot===Ye?ot.clone():ot},Lt.prototype.convertFrom=function(Ye){var ot=Ye.clone();return ot.red=null,ot},l.mont=function(Ye){return new Vt(Ye)};function Vt(tt){Lt.call(this,tt),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(Vt,Lt),Vt.prototype.convertTo=function(Ye){return this.imod(Ye.ushln(this.shift))},Vt.prototype.convertFrom=function(Ye){var ot=this.imod(Ye.mul(this.rinv));return ot.red=null,ot},Vt.prototype.imul=function(Ye,ot){if(Ye.isZero()||ot.isZero())return Ye.words[0]=0,Ye.length=1,Ye;var Et=Ye.imul(ot),er=Et.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),rr=Et.isub(er).iushrn(this.shift),yt=rr;return rr.cmp(this.m)>=0?yt=rr.isub(this.m):rr.cmpn(0)<0&&(yt=rr.iadd(this.m)),yt._forceRed(this)},Vt.prototype.mul=function(Ye,ot){if(Ye.isZero()||ot.isZero())return new l(0)._forceRed(this);var Et=Ye.mul(ot),er=Et.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),rr=Et.isub(er).iushrn(this.shift),yt=rr;return rr.cmp(this.m)>=0?yt=rr.isub(this.m):rr.cmpn(0)<0&&(yt=rr.iadd(this.m)),yt._forceRed(this)},Vt.prototype.invm=function(Ye){var ot=this.imod(Ye._invmp(this.m).mul(this.r2));return ot._forceRed(this)}})(typeof e>"u"||e,t)}}),EXP_LIMIT=9e15,MAX_DIGITS=1e9,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-9e15,maxE:EXP_LIMIT,crypto:!1},inexact,quadrant,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",precisionLimitExceeded=decimalError+"Precision limit exceeded",cryptoUnavailable=decimalError+"crypto unavailable",tag="[object Decimal]",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P$2={toStringTag:tag};P$2.absoluteValue=P$2.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),finalise(t)};P$2.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)};P$2.clampedTo=P$2.clamp=function(t,e){var n,i=this,s=i.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(invalidArgument+e);return n=i.cmp(t),n<0?t:i.cmp(e)>0?e:new s(i)};P$2.comparedTo=P$2.cmp=function(t){var e,n,i,s,a=this,l=a.d,f=(t=new a.constructor(t)).d,p=a.s,C=t.s;if(!l||!f)return!p||!C?NaN:p!==C?p:l===f?0:!l^p<0?1:-1;if(!l[0]||!f[0])return l[0]?p:f[0]?-C:0;if(p!==C)return p;if(a.e!==t.e)return a.e>t.e^p<0?1:-1;for(i=l.length,s=f.length,e=0,n=i<s?i:s;e<n;++e)if(l[e]!==f[e])return l[e]>f[e]^p<0?1:-1;return i===s?0:i>s^p<0?1:-1};P$2.cosine=P$2.cos=function(){var t,e,n=this,i=n.constructor;return n.d?n.d[0]?(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+LOG_BASE,i.rounding=1,n=cosine(i,toLessThanHalfPi(i,n)),i.precision=t,i.rounding=e,finalise(quadrant==2||quadrant==3?n.neg():n,t,e,!0)):new i(1):new i(NaN)};P$2.cubeRoot=P$2.cbrt=function(){var t,e,n,i,s,a,l,f,p,C,B=this,N=B.constructor;if(!B.isFinite()||B.isZero())return new N(B);for(external=!1,a=B.s*mathpow(B.s*B,1/3),!a||Math.abs(a)==1/0?(n=digitsToString(B.d),t=B.e,(a=(t-n.length+1)%3)&&(n+=a==1||a==-2?"0":"00"),a=mathpow(n,1/3),t=mathfloor((t+1)/3)-(t%3==(t<0?-1:2)),a==1/0?n="5e"+t:(n=a.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),i=new N(n),i.s=B.s):i=new N(a.toString()),l=(t=N.precision)+3;;)if(f=i,p=f.times(f).times(f),C=p.plus(B),i=divide(C.plus(B).times(f),C.plus(p),l+2,1),digitsToString(f.d).slice(0,l)===(n=digitsToString(i.d)).slice(0,l))if(n=n.slice(l-3,l+1),n=="9999"||!s&&n=="4999"){if(!s&&(finalise(f,t+1,0),f.times(f).times(f).eq(B))){i=f;break}l+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(finalise(i,t+1,1),e=!i.times(i).times(i).eq(B));break}return external=!0,finalise(i,t,N.rounding,e)};P$2.decimalPlaces=P$2.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-mathfloor(this.e/LOG_BASE))*LOG_BASE,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};P$2.dividedBy=P$2.div=function(t){return divide(this,new this.constructor(t))};P$2.dividedToIntegerBy=P$2.divToInt=function(t){var e=this,n=e.constructor;return finalise(divide(e,new n(t),0,1,1),n.precision,n.rounding)};P$2.equals=P$2.eq=function(t){return this.cmp(t)===0};P$2.floor=function(){return finalise(new this.constructor(this),this.e+1,3)};P$2.greaterThan=P$2.gt=function(t){return this.cmp(t)>0};P$2.greaterThanOrEqualTo=P$2.gte=function(t){var e=this.cmp(t);return e==1||e===0};P$2.hyperbolicCosine=P$2.cosh=function(){var t,e,n,i,s,a=this,l=a.constructor,f=new l(1);if(!a.isFinite())return new l(a.s?1/0:NaN);if(a.isZero())return f;n=l.precision,i=l.rounding,l.precision=n+Math.max(a.e,a.sd())+4,l.rounding=1,s=a.d.length,s<32?(t=Math.ceil(s/3),e=(1/tinyPow(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),a=taylorSeries(l,1,a.times(e),new l(1),!0);for(var p,C=t,B=new l(8);C--;)p=a.times(a),a=f.minus(p.times(B.minus(p.times(B))));return finalise(a,l.precision=n,l.rounding=i,!0)};P$2.hyperbolicSine=P$2.sinh=function(){var t,e,n,i,s=this,a=s.constructor;if(!s.isFinite()||s.isZero())return new a(s);if(e=a.precision,n=a.rounding,a.precision=e+Math.max(s.e,s.sd())+4,a.rounding=1,i=s.d.length,i<3)s=taylorSeries(a,2,s,s,!0);else{t=1.4*Math.sqrt(i),t=t>16?16:t|0,s=s.times(1/tinyPow(5,t)),s=taylorSeries(a,2,s,s,!0);for(var l,f=new a(5),p=new a(16),C=new a(20);t--;)l=s.times(s),s=s.times(f.plus(l.times(p.times(l).plus(C))))}return a.precision=e,a.rounding=n,finalise(s,e,n,!0)};P$2.hyperbolicTangent=P$2.tanh=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+7,i.rounding=1,divide(n.sinh(),n.cosh(),i.precision=t,i.rounding=e)):new i(n.s)};P$2.inverseCosine=P$2.acos=function(){var t,e=this,n=e.constructor,i=e.abs().cmp(1),s=n.precision,a=n.rounding;return i!==-1?i===0?e.isNeg()?getPi(n,s,a):new n(0):new n(NaN):e.isZero()?getPi(n,s+4,a).times(.5):(n.precision=s+6,n.rounding=1,e=e.asin(),t=getPi(n,s+4,a).times(.5),n.precision=s,n.rounding=a,t.minus(e))};P$2.inverseHyperbolicCosine=P$2.acosh=function(){var t,e,n=this,i=n.constructor;return n.lte(1)?new i(n.eq(1)?0:NaN):n.isFinite()?(t=i.precision,e=i.rounding,i.precision=t+Math.max(Math.abs(n.e),n.sd())+4,i.rounding=1,external=!1,n=n.times(n).minus(1).sqrt().plus(n),external=!0,i.precision=t,i.rounding=e,n.ln()):new i(n)};P$2.inverseHyperbolicSine=P$2.asinh=function(){var t,e,n=this,i=n.constructor;return!n.isFinite()||n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,i.rounding=1,external=!1,n=n.times(n).plus(1).sqrt().plus(n),external=!0,i.precision=t,i.rounding=e,n.ln())};P$2.inverseHyperbolicTangent=P$2.atanh=function(){var t,e,n,i,s=this,a=s.constructor;return s.isFinite()?s.e>=0?new a(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=a.precision,e=a.rounding,i=s.sd(),Math.max(i,t)<2*-s.e-1?finalise(new a(s),t,e,!0):(a.precision=n=i-s.e,s=divide(s.plus(1),new a(1).minus(s),n+t,1),a.precision=t+4,a.rounding=1,s=s.ln(),a.precision=t,a.rounding=e,s.times(.5))):new a(NaN)};P$2.inverseSine=P$2.asin=function(){var t,e,n,i,s=this,a=s.constructor;return s.isZero()?new a(s):(e=s.abs().cmp(1),n=a.precision,i=a.rounding,e!==-1?e===0?(t=getPi(a,n+4,i).times(.5),t.s=s.s,t):new a(NaN):(a.precision=n+6,a.rounding=1,s=s.div(new a(1).minus(s.times(s)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=i,s.times(2)))};P$2.inverseTangent=P$2.atan=function(){var t,e,n,i,s,a,l,f,p,C=this,B=C.constructor,N=B.precision,le=B.rounding;if(C.isFinite()){if(C.isZero())return new B(C);if(C.abs().eq(1)&&N+4<=PI_PRECISION)return l=getPi(B,N+4,le).times(.25),l.s=C.s,l}else{if(!C.s)return new B(NaN);if(N+4<=PI_PRECISION)return l=getPi(B,N+4,le).times(.5),l.s=C.s,l}for(B.precision=f=N+10,B.rounding=1,n=Math.min(28,f/LOG_BASE+2|0),t=n;t;--t)C=C.div(C.times(C).plus(1).sqrt().plus(1));for(external=!1,e=Math.ceil(f/LOG_BASE),i=1,p=C.times(C),l=new B(C),s=C;t!==-1;)if(s=s.times(p),a=l.minus(s.div(i+=2)),s=s.times(p),l=a.plus(s.div(i+=2)),l.d[e]!==void 0)for(t=e;l.d[t]===a.d[t]&&t--;);return n&&(l=l.times(2<<n-1)),external=!0,finalise(l,B.precision=N,B.rounding=le,!0)};P$2.isFinite=function(){return!!this.d};P$2.isInteger=P$2.isInt=function(){return!!this.d&&mathfloor(this.e/LOG_BASE)>this.d.length-2};P$2.isNaN=function(){return!this.s};P$2.isNegative=P$2.isNeg=function(){return this.s<0};P$2.isPositive=P$2.isPos=function(){return this.s>0};P$2.isZero=function(){return!!this.d&&this.d[0]===0};P$2.lessThan=P$2.lt=function(t){return this.cmp(t)<0};P$2.lessThanOrEqualTo=P$2.lte=function(t){return this.cmp(t)<1};P$2.logarithm=P$2.log=function(t){var e,n,i,s,a,l,f,p,C=this,B=C.constructor,N=B.precision,le=B.rounding,Ee=5;if(t==null)t=new B(10),e=!0;else{if(t=new B(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new B(NaN);e=t.eq(10)}if(n=C.d,C.s<0||!n||!n[0]||C.eq(1))return new B(n&&!n[0]?-1/0:C.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)a=!0;else{for(s=n[0];s%10===0;)s/=10;a=s!==1}if(external=!1,f=N+Ee,l=naturalLogarithm(C,f),i=e?getLn10(B,f+10):naturalLogarithm(t,f),p=divide(l,i,f,1),checkRoundingDigits(p.d,s=N,le))do if(f+=10,l=naturalLogarithm(C,f),i=e?getLn10(B,f+10):naturalLogarithm(t,f),p=divide(l,i,f,1),!a){+digitsToString(p.d).slice(s+1,s+15)+1==1e14&&(p=finalise(p,N+1,0));break}while(checkRoundingDigits(p.d,s+=10,le));return external=!0,finalise(p,N,le)};P$2.minus=P$2.sub=function(t){var e,n,i,s,a,l,f,p,C,B,N,le,Ee=this,Ue=Ee.constructor;if(t=new Ue(t),!Ee.d||!t.d)return!Ee.s||!t.s?t=new Ue(NaN):Ee.d?t.s=-t.s:t=new Ue(t.d||Ee.s!==t.s?Ee:NaN),t;if(Ee.s!=t.s)return t.s=-t.s,Ee.plus(t);if(C=Ee.d,le=t.d,f=Ue.precision,p=Ue.rounding,!C[0]||!le[0]){if(le[0])t.s=-t.s;else if(C[0])t=new Ue(Ee);else return new Ue(p===3?-0:0);return external?finalise(t,f,p):t}if(n=mathfloor(t.e/LOG_BASE),B=mathfloor(Ee.e/LOG_BASE),C=C.slice(),a=B-n,a){for(N=a<0,N?(e=C,a=-a,l=le.length):(e=le,n=B,l=C.length),i=Math.max(Math.ceil(f/LOG_BASE),l)+2,a>i&&(a=i,e.length=1),e.reverse(),i=a;i--;)e.push(0);e.reverse()}else{for(i=C.length,l=le.length,N=i<l,N&&(l=i),i=0;i<l;i++)if(C[i]!=le[i]){N=C[i]<le[i];break}a=0}for(N&&(e=C,C=le,le=e,t.s=-t.s),l=C.length,i=le.length-l;i>0;--i)C[l++]=0;for(i=le.length;i>a;){if(C[--i]<le[i]){for(s=i;s&&C[--s]===0;)C[s]=BASE-1;--C[s],C[i]+=BASE}C[i]-=le[i]}for(;C[--l]===0;)C.pop();for(;C[0]===0;C.shift())--n;return C[0]?(t.d=C,t.e=getBase10Exponent(C,n),external?finalise(t,f,p):t):new Ue(p===3?-0:0)};P$2.modulo=P$2.mod=function(t){var e,n=this,i=n.constructor;return t=new i(t),!n.d||!t.s||t.d&&!t.d[0]?new i(NaN):!t.d||n.d&&!n.d[0]?finalise(new i(n),i.precision,i.rounding):(external=!1,i.modulo==9?(e=divide(n,t.abs(),0,3,1),e.s*=t.s):e=divide(n,t,0,i.modulo,1),e=e.times(t),external=!0,n.minus(e))};P$2.naturalExponential=P$2.exp=function(){return naturalExponential(this)};P$2.naturalLogarithm=P$2.ln=function(){return naturalLogarithm(this)};P$2.negated=P$2.neg=function(){var t=new this.constructor(this);return t.s=-t.s,finalise(t)};P$2.plus=P$2.add=function(t){var e,n,i,s,a,l,f,p,C,B,N=this,le=N.constructor;if(t=new le(t),!N.d||!t.d)return!N.s||!t.s?t=new le(NaN):N.d||(t=new le(t.d||N.s===t.s?N:NaN)),t;if(N.s!=t.s)return t.s=-t.s,N.minus(t);if(C=N.d,B=t.d,f=le.precision,p=le.rounding,!C[0]||!B[0])return B[0]||(t=new le(N)),external?finalise(t,f,p):t;if(a=mathfloor(N.e/LOG_BASE),i=mathfloor(t.e/LOG_BASE),C=C.slice(),s=a-i,s){for(s<0?(n=C,s=-s,l=B.length):(n=B,i=a,l=C.length),a=Math.ceil(f/LOG_BASE),l=a>l?a+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=C.length,s=B.length,l-s<0&&(s=l,n=B,B=C,C=n),e=0;s;)e=(C[--s]=C[s]+B[s]+e)/BASE|0,C[s]%=BASE;for(e&&(C.unshift(e),++i),l=C.length;C[--l]==0;)C.pop();return t.d=C,t.e=getBase10Exponent(C,i),external?finalise(t,f,p):t};P$2.precision=P$2.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(invalidArgument+t);return n.d?(e=getPrecision(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};P$2.round=function(){var t=this,e=t.constructor;return finalise(new e(t),t.e+1,e.rounding)};P$2.sine=P$2.sin=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+Math.max(n.e,n.sd())+LOG_BASE,i.rounding=1,n=sine(i,toLessThanHalfPi(i,n)),i.precision=t,i.rounding=e,finalise(quadrant>2?n.neg():n,t,e,!0)):new i(NaN)};P$2.squareRoot=P$2.sqrt=function(){var t,e,n,i,s,a,l=this,f=l.d,p=l.e,C=l.s,B=l.constructor;if(C!==1||!f||!f[0])return new B(!C||C<0&&(!f||f[0])?NaN:f?l:1/0);for(external=!1,C=Math.sqrt(+l),C==0||C==1/0?(e=digitsToString(f),(e.length+p)%2==0&&(e+="0"),C=Math.sqrt(e),p=mathfloor((p+1)/2)-(p<0||p%2),C==1/0?e="5e"+p:(e=C.toExponential(),e=e.slice(0,e.indexOf("e")+1)+p),i=new B(e)):i=new B(C.toString()),n=(p=B.precision)+3;;)if(a=i,i=a.plus(divide(l,a,n+2,1)).times(.5),digitsToString(a.d).slice(0,n)===(e=digitsToString(i.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!s&&e=="4999"){if(!s&&(finalise(a,p+1,0),a.times(a).eq(l))){i=a;break}n+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(finalise(i,p+1,1),t=!i.times(i).eq(l));break}return external=!0,finalise(i,p,B.rounding,t)};P$2.tangent=P$2.tan=function(){var t,e,n=this,i=n.constructor;return n.isFinite()?n.isZero()?new i(n):(t=i.precision,e=i.rounding,i.precision=t+10,i.rounding=1,n=n.sin(),n.s=1,n=divide(n,new i(1).minus(n.times(n)).sqrt(),t+10,0),i.precision=t,i.rounding=e,finalise(quadrant==2||quadrant==4?n.neg():n,t,e,!0)):new i(NaN)};P$2.times=P$2.mul=function(t){var e,n,i,s,a,l,f,p,C,B=this,N=B.constructor,le=B.d,Ee=(t=new N(t)).d;if(t.s*=B.s,!le||!le[0]||!Ee||!Ee[0])return new N(!t.s||le&&!le[0]&&!Ee||Ee&&!Ee[0]&&!le?NaN:!le||!Ee?t.s/0:t.s*0);for(n=mathfloor(B.e/LOG_BASE)+mathfloor(t.e/LOG_BASE),p=le.length,C=Ee.length,p<C&&(a=le,le=Ee,Ee=a,l=p,p=C,C=l),a=[],l=p+C,i=l;i--;)a.push(0);for(i=C;--i>=0;){for(e=0,s=p+i;s>i;)f=a[s]+Ee[i]*le[s-i-1]+e,a[s--]=f%BASE|0,e=f/BASE|0;a[s]=(a[s]+e)%BASE|0}for(;!a[--l];)a.pop();return e?++n:a.shift(),t.d=a,t.e=getBase10Exponent(a,n),external?finalise(t,N.precision,N.rounding):t};P$2.toBinary=function(t,e){return toStringBinary(this,2,t,e)};P$2.toDecimalPlaces=P$2.toDP=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(checkInt32(t,0,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8),finalise(n,t+n.e+1,e))};P$2.toExponential=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=finiteToString(i,!0):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=s.rounding:checkInt32(e,0,8),i=finalise(new s(i),t+1,e),n=finiteToString(i,!0,t+1)),i.isNeg()&&!i.isZero()?"-"+n:n};P$2.toFixed=function(t,e){var n,i,s=this,a=s.constructor;return t===void 0?n=finiteToString(s):(checkInt32(t,0,MAX_DIGITS),e===void 0?e=a.rounding:checkInt32(e,0,8),i=finalise(new a(s),t+s.e+1,e),n=finiteToString(i,!1,t+i.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n};P$2.toFraction=function(t){var e,n,i,s,a,l,f,p,C,B,N,le,Ee=this,Ue=Ee.d,ze=Ee.constructor;if(!Ue)return new ze(Ee);if(C=n=new ze(1),i=p=new ze(0),e=new ze(i),a=e.e=getPrecision(Ue)-Ee.e-1,l=a%LOG_BASE,e.d[0]=mathpow(10,l<0?LOG_BASE+l:l),t==null)t=a>0?e:C;else{if(f=new ze(t),!f.isInt()||f.lt(C))throw Error(invalidArgument+f);t=f.gt(e)?a>0?e:C:f}for(external=!1,f=new ze(digitsToString(Ue)),B=ze.precision,ze.precision=a=Ue.length*LOG_BASE*2;N=divide(f,e,0,1,1),s=n.plus(N.times(i)),s.cmp(t)!=1;)n=i,i=s,s=C,C=p.plus(N.times(s)),p=s,s=e,e=f.minus(N.times(s)),f=s;return s=divide(t.minus(n),i,0,1,1),p=p.plus(s.times(C)),n=n.plus(s.times(i)),p.s=C.s=Ee.s,le=divide(C,i,a,1).minus(Ee).abs().cmp(divide(p,n,a,1).minus(Ee).abs())<1?[C,i]:[p,n],ze.precision=B,external=!0,le};P$2.toHexadecimal=P$2.toHex=function(t,e){return toStringBinary(this,16,t,e)};P$2.toNearest=function(t,e){var n=this,i=n.constructor;if(n=new i(n),t==null){if(!n.d)return n;t=new i(1),e=i.rounding}else{if(t=new i(t),e===void 0?e=i.rounding:checkInt32(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(external=!1,n=divide(n,t,0,e,1).times(t),external=!0,finalise(n)):(t.s=n.s,n=t),n};P$2.toNumber=function(){return+this};P$2.toOctal=function(t,e){return toStringBinary(this,8,t,e)};P$2.toPower=P$2.pow=function(t){var e,n,i,s,a,l,f=this,p=f.constructor,C=+(t=new p(t));if(!f.d||!t.d||!f.d[0]||!t.d[0])return new p(mathpow(+f,C));if(f=new p(f),f.eq(1))return f;if(i=p.precision,a=p.rounding,t.eq(1))return finalise(f,i,a);if(e=mathfloor(t.e/LOG_BASE),e>=t.d.length-1&&(n=C<0?-C:C)<=MAX_SAFE_INTEGER)return s=intPow(p,f,n,i),t.s<0?new p(1).div(s):finalise(s,i,a);if(l=f.s,l<0){if(e<t.d.length-1)return new p(NaN);if(t.d[e]&1||(l=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=l,f}return n=mathpow(+f,C),e=n==0||!isFinite(n)?mathfloor(C*(Math.log("0."+digitsToString(f.d))/Math.LN10+f.e+1)):new p(n+"").e,e>p.maxE+1||e<p.minE-1?new p(e>0?l/0:0):(external=!1,p.rounding=f.s=1,n=Math.min(12,(e+"").length),s=naturalExponential(t.times(naturalLogarithm(f,i+n)),i),s.d&&(s=finalise(s,i+5,1),checkRoundingDigits(s.d,i,a)&&(e=i+10,s=finalise(naturalExponential(t.times(naturalLogarithm(f,e+n)),e),e+5,1),+digitsToString(s.d).slice(i+1,i+15)+1==1e14&&(s=finalise(s,i+1,0)))),s.s=l,external=!0,p.rounding=a,finalise(s,i,a))};P$2.toPrecision=function(t,e){var n,i=this,s=i.constructor;return t===void 0?n=finiteToString(i,i.e<=s.toExpNeg||i.e>=s.toExpPos):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=s.rounding:checkInt32(e,0,8),i=finalise(new s(i),t,e),n=finiteToString(i,t<=i.e||i.e<=s.toExpNeg,t)),i.isNeg()&&!i.isZero()?"-"+n:n};P$2.toSignificantDigits=P$2.toSD=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(checkInt32(t,1,MAX_DIGITS),e===void 0?e=i.rounding:checkInt32(e,0,8)),finalise(new i(n),t,e)};P$2.toString=function(){var t=this,e=t.constructor,n=finiteToString(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};P$2.truncated=P$2.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)};P$2.valueOf=P$2.toJSON=function(){var t=this,e=t.constructor,n=finiteToString(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function digitsToString(t){var e,n,i,s=t.length-1,a="",l=t[0];if(s>0){for(a+=l,e=1;e<s;e++)i=t[e]+"",n=LOG_BASE-i.length,n&&(a+=getZeroString(n)),a+=i;l=t[e],i=l+"",n=LOG_BASE-i.length,n&&(a+=getZeroString(n))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}function checkInt32(t,e,n){if(t!==~~t||t<e||t>n)throw Error(invalidArgument+t)}function checkRoundingDigits(t,e,n,i){var s,a,l,f;for(a=t[0];a>=10;a/=10)--e;return--e<0?(e+=LOG_BASE,s=0):(s=Math.ceil((e+1)/LOG_BASE),e%=LOG_BASE),a=mathpow(10,LOG_BASE-e),f=t[s]%a|0,i==null?e<3?(e==0?f=f/100|0:e==1&&(f=f/10|0),l=n<4&&f==99999||n>3&&f==49999||f==5e4||f==0):l=(n<4&&f+1==a||n>3&&f+1==a/2)&&(t[s+1]/a/100|0)==mathpow(10,e-2)-1||(f==a/2||f==0)&&(t[s+1]/a/100|0)==0:e<4?(e==0?f=f/1e3|0:e==1?f=f/100|0:e==2&&(f=f/10|0),l=(i||n<4)&&f==9999||!i&&n>3&&f==4999):l=((i||n<4)&&f+1==a||!i&&n>3&&f+1==a/2)&&(t[s+1]/a/1e3|0)==mathpow(10,e-3)-1,l}function convertBase(t,e,n){for(var i,s=[0],a,l=0,f=t.length;l<f;){for(a=s.length;a--;)s[a]*=e;for(s[0]+=NUMERALS.indexOf(t.charAt(l++)),i=0;i<s.length;i++)s[i]>n-1&&(s[i+1]===void 0&&(s[i+1]=0),s[i+1]+=s[i]/n|0,s[i]%=n)}return s.reverse()}function cosine(t,e){var n,i,s;if(e.isZero())return e;i=e.d.length,i<32?(n=Math.ceil(i/3),s=(1/tinyPow(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=taylorSeries(t,1,e.times(s),new t(1));for(var a=n;a--;){var l=e.times(e);e=l.times(l).minus(l).times(8).plus(1)}return t.precision-=n,e}var divide=function(){function t(i,s,a){var l,f=0,p=i.length;for(i=i.slice();p--;)l=i[p]*s+f,i[p]=l%a|0,f=l/a|0;return f&&i.unshift(f),i}function e(i,s,a,l){var f,p;if(a!=l)p=a>l?1:-1;else for(f=p=0;f<a;f++)if(i[f]!=s[f]){p=i[f]>s[f]?1:-1;break}return p}function n(i,s,a,l){for(var f=0;a--;)i[a]-=f,f=i[a]<s[a]?1:0,i[a]=f*l+i[a]-s[a];for(;!i[0]&&i.length>1;)i.shift()}return function(i,s,a,l,f,p){var C,B,N,le,Ee,Ue,ze,Ze,Qe,ct,wt,qt,nr,ir,or,ur,hr,fr,ar,Lt,Vt=i.constructor,tt=i.s==s.s?1:-1,Ye=i.d,ot=s.d;if(!Ye||!Ye[0]||!ot||!ot[0])return new Vt(!i.s||!s.s||(Ye?ot&&Ye[0]==ot[0]:!ot)?NaN:Ye&&Ye[0]==0||!ot?tt*0:tt/0);for(p?(Ee=1,B=i.e-s.e):(p=BASE,Ee=LOG_BASE,B=mathfloor(i.e/Ee)-mathfloor(s.e/Ee)),ar=ot.length,hr=Ye.length,Qe=new Vt(tt),ct=Qe.d=[],N=0;ot[N]==(Ye[N]||0);N++);if(ot[N]>(Ye[N]||0)&&B--,a==null?(ir=a=Vt.precision,l=Vt.rounding):f?ir=a+(i.e-s.e)+1:ir=a,ir<0)ct.push(1),Ue=!0;else{if(ir=ir/Ee+2|0,N=0,ar==1){for(le=0,ot=ot[0],ir++;(N<hr||le)&&ir--;N++)or=le*p+(Ye[N]||0),ct[N]=or/ot|0,le=or%ot|0;Ue=le||N<hr}else{for(le=p/(ot[0]+1)|0,le>1&&(ot=t(ot,le,p),Ye=t(Ye,le,p),ar=ot.length,hr=Ye.length),ur=ar,wt=Ye.slice(0,ar),qt=wt.length;qt<ar;)wt[qt++]=0;Lt=ot.slice(),Lt.unshift(0),fr=ot[0],ot[1]>=p/2&&++fr;do le=0,C=e(ot,wt,ar,qt),C<0?(nr=wt[0],ar!=qt&&(nr=nr*p+(wt[1]||0)),le=nr/fr|0,le>1?(le>=p&&(le=p-1),ze=t(ot,le,p),Ze=ze.length,qt=wt.length,C=e(ze,wt,Ze,qt),C==1&&(le--,n(ze,ar<Ze?Lt:ot,Ze,p))):(le==0&&(C=le=1),ze=ot.slice()),Ze=ze.length,Ze<qt&&ze.unshift(0),n(wt,ze,qt,p),C==-1&&(qt=wt.length,C=e(ot,wt,ar,qt),C<1&&(le++,n(wt,ar<qt?Lt:ot,qt,p))),qt=wt.length):C===0&&(le++,wt=[0]),ct[N++]=le,C&&wt[0]?wt[qt++]=Ye[ur]||0:(wt=[Ye[ur]],qt=1);while((ur++<hr||wt[0]!==void 0)&&ir--);Ue=wt[0]!==void 0}ct[0]||ct.shift()}if(Ee==1)Qe.e=B,inexact=Ue;else{for(N=1,le=ct[0];le>=10;le/=10)N++;Qe.e=N+B*Ee-1,finalise(Qe,f?a+Qe.e+1:a,l,Ue)}return Qe}}();function finalise(t,e,n,i){var s,a,l,f,p,C,B,N,le,Ee=t.constructor;e:if(e!=null){if(N=t.d,!N)return t;for(s=1,f=N[0];f>=10;f/=10)s++;if(a=e-s,a<0)a+=LOG_BASE,l=e,B=N[le=0],p=B/mathpow(10,s-l-1)%10|0;else if(le=Math.ceil((a+1)/LOG_BASE),f=N.length,le>=f)if(i){for(;f++<=le;)N.push(0);B=p=0,s=1,a%=LOG_BASE,l=a-LOG_BASE+1}else break e;else{for(B=f=N[le],s=1;f>=10;f/=10)s++;a%=LOG_BASE,l=a-LOG_BASE+s,p=l<0?0:B/mathpow(10,s-l-1)%10|0}if(i=i||e<0||N[le+1]!==void 0||(l<0?B:B%mathpow(10,s-l-1)),C=n<4?(p||i)&&(n==0||n==(t.s<0?3:2)):p>5||p==5&&(n==4||i||n==6&&(a>0?l>0?B/mathpow(10,s-l):0:N[le-1])%10&1||n==(t.s<0?8:7)),e<1||!N[0])return N.length=0,C?(e-=t.e+1,N[0]=mathpow(10,(LOG_BASE-e%LOG_BASE)%LOG_BASE),t.e=-e||0):N[0]=t.e=0,t;if(a==0?(N.length=le,f=1,le--):(N.length=le+1,f=mathpow(10,LOG_BASE-a),N[le]=l>0?(B/mathpow(10,s-l)%mathpow(10,l)|0)*f:0),C)for(;;)if(le==0){for(a=1,l=N[0];l>=10;l/=10)a++;for(l=N[0]+=f,f=1;l>=10;l/=10)f++;a!=f&&(t.e++,N[0]==BASE&&(N[0]=1));break}else{if(N[le]+=f,N[le]!=BASE)break;N[le--]=0,f=1}for(a=N.length;N[--a]===0;)N.pop()}return external&&(t.e>Ee.maxE?(t.d=null,t.e=NaN):t.e<Ee.minE&&(t.e=0,t.d=[0])),t}function finiteToString(t,e,n){if(!t.isFinite())return nonFiniteToString(t);var i,s=t.e,a=digitsToString(t.d),l=a.length;return e?(n&&(i=n-l)>0?a=a.charAt(0)+"."+a.slice(1)+getZeroString(i):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(t.e<0?"e":"e+")+t.e):s<0?(a="0."+getZeroString(-s-1)+a,n&&(i=n-l)>0&&(a+=getZeroString(i))):s>=l?(a+=getZeroString(s+1-l),n&&(i=n-s-1)>0&&(a=a+"."+getZeroString(i))):((i=s+1)<l&&(a=a.slice(0,i)+"."+a.slice(i)),n&&(i=n-l)>0&&(s+1===l&&(a+="."),a+=getZeroString(i))),a}function getBase10Exponent(t,e){var n=t[0];for(e*=LOG_BASE;n>=10;n/=10)e++;return e}function getLn10(t,e,n){if(e>LN10_PRECISION)throw external=!0,n&&(t.precision=n),Error(precisionLimitExceeded);return finalise(new t(LN10),e,1,!0)}function getPi(t,e,n){if(e>PI_PRECISION)throw Error(precisionLimitExceeded);return finalise(new t(PI),e,n,!0)}function getPrecision(t){var e=t.length-1,n=e*LOG_BASE+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function getZeroString(t){for(var e="";t--;)e+="0";return e}function intPow(t,e,n,i){var s,a=new t(1),l=Math.ceil(i/LOG_BASE+4);for(external=!1;;){if(n%2&&(a=a.times(e),truncate(a.d,l)&&(s=!0)),n=mathfloor(n/2),n===0){n=a.d.length-1,s&&a.d[n]===0&&++a.d[n];break}e=e.times(e),truncate(e.d,l)}return external=!0,a}function isOdd(t){return t.d[t.d.length-1]&1}function maxOrMin(t,e,n){for(var i,s=new t(e[0]),a=0;++a<e.length;)if(i=new t(e[a]),i.s)s[n](i)&&(s=i);else{s=i;break}return s}function naturalExponential(t,e){var n,i,s,a,l,f,p,C=0,B=0,N=0,le=t.constructor,Ee=le.rounding,Ue=le.precision;if(!t.d||!t.d[0]||t.e>17)return new le(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(external=!1,p=Ue):p=e,f=new le(.03125);t.e>-2;)t=t.times(f),N+=5;for(i=Math.log(mathpow(2,N))/Math.LN10*2+5|0,p+=i,n=a=l=new le(1),le.precision=p;;){if(a=finalise(a.times(t),p,1),n=n.times(++B),f=l.plus(divide(a,n,p,1)),digitsToString(f.d).slice(0,p)===digitsToString(l.d).slice(0,p)){for(s=N;s--;)l=finalise(l.times(l),p,1);if(e==null)if(C<3&&checkRoundingDigits(l.d,p-i,Ee,C))le.precision=p+=10,n=a=f=new le(1),B=0,C++;else return finalise(l,le.precision=Ue,Ee,external=!0);else return le.precision=Ue,l}l=f}}function naturalLogarithm(t,e){var n,i,s,a,l,f,p,C,B,N,le,Ee=1,Ue=10,ze=t,Ze=ze.d,Qe=ze.constructor,ct=Qe.rounding,wt=Qe.precision;if(ze.s<0||!Ze||!Ze[0]||!ze.e&&Ze[0]==1&&Ze.length==1)return new Qe(Ze&&!Ze[0]?-1/0:ze.s!=1?NaN:Ze?0:ze);if(e==null?(external=!1,B=wt):B=e,Qe.precision=B+=Ue,n=digitsToString(Ze),i=n.charAt(0),Math.abs(a=ze.e)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)ze=ze.times(t),n=digitsToString(ze.d),i=n.charAt(0),Ee++;a=ze.e,i>1?(ze=new Qe("0."+n),a++):ze=new Qe(i+"."+n.slice(1))}else return C=getLn10(Qe,B+2,wt).times(a+""),ze=naturalLogarithm(new Qe(i+"."+n.slice(1)),B-Ue).plus(C),Qe.precision=wt,e==null?finalise(ze,wt,ct,external=!0):ze;for(N=ze,p=l=ze=divide(ze.minus(1),ze.plus(1),B,1),le=finalise(ze.times(ze),B,1),s=3;;){if(l=finalise(l.times(le),B,1),C=p.plus(divide(l,new Qe(s),B,1)),digitsToString(C.d).slice(0,B)===digitsToString(p.d).slice(0,B))if(p=p.times(2),a!==0&&(p=p.plus(getLn10(Qe,B+2,wt).times(a+""))),p=divide(p,new Qe(Ee),B,1),e==null)if(checkRoundingDigits(p.d,B-Ue,ct,f))Qe.precision=B+=Ue,C=l=ze=divide(N.minus(1),N.plus(1),B,1),le=finalise(ze.times(ze),B,1),s=f=1;else return finalise(p,Qe.precision=wt,ct,external=!0);else return Qe.precision=wt,p;p=C,s+=2}}function nonFiniteToString(t){return String(t.s*t.s/0)}function parseDecimal(t,e){var n,i,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;i++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(i,s),e){if(s-=i,t.e=n=n-i-1,t.d=[],i=(n+1)%LOG_BASE,n<0&&(i+=LOG_BASE),i<s){for(i&&t.d.push(+e.slice(0,i)),s-=LOG_BASE;i<s;)t.d.push(+e.slice(i,i+=LOG_BASE));e=e.slice(i),i=LOG_BASE-e.length}else i-=s;for(;i--;)e+="0";t.d.push(+e),external&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function parseOther(t,e){var n,i,s,a,l,f,p,C,B;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),isDecimal.test(e))return parseDecimal(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(isHex.test(e))n=16,e=e.toLowerCase();else if(isBinary.test(e))n=2;else if(isOctal.test(e))n=8;else throw Error(invalidArgument+e);for(a=e.search(/p/i),a>0?(p=+e.slice(a+1),e=e.substring(2,a)):e=e.slice(2),a=e.indexOf("."),l=a>=0,i=t.constructor,l&&(e=e.replace(".",""),f=e.length,a=f-a,s=intPow(i,new i(n),a,a*2)),C=convertBase(e,n,BASE),B=C.length-1,a=B;C[a]===0;--a)C.pop();return a<0?new i(t.s*0):(t.e=getBase10Exponent(C,B),t.d=C,external=!1,l&&(t=divide(t,s,f*4)),p&&(t=t.times(Math.abs(p)<54?mathpow(2,p):Decimal.pow(2,p))),external=!0,t)}function sine(t,e){var n,i=e.d.length;if(i<3)return e.isZero()?e:taylorSeries(t,2,e,e);n=1.4*Math.sqrt(i),n=n>16?16:n|0,e=e.times(1/tinyPow(5,n)),e=taylorSeries(t,2,e,e);for(var s,a=new t(5),l=new t(16),f=new t(20);n--;)s=e.times(e),e=e.times(a.plus(s.times(l.times(s).minus(f))));return e}function taylorSeries(t,e,n,i,s){var a,l,f,p,C=t.precision,B=Math.ceil(C/LOG_BASE);for(external=!1,p=n.times(n),f=new t(i);;){if(l=divide(f.times(p),new t(e++*e++),C,1),f=s?i.plus(l):i.minus(l),i=divide(l.times(p),new t(e++*e++),C,1),l=f.plus(i),l.d[B]!==void 0){for(a=B;l.d[a]===f.d[a]&&a--;);if(a==-1)break}a=f,f=i,i=l,l=a}return external=!0,l.d.length=B+1,l}function tinyPow(t,e){for(var n=t;--e;)n*=t;return n}function toLessThanHalfPi(t,e){var n,i=e.s<0,s=getPi(t,t.precision,1),a=s.times(.5);if(e=e.abs(),e.lte(a))return quadrant=i?4:1,e;if(n=e.divToInt(s),n.isZero())quadrant=i?3:2;else{if(e=e.minus(n.times(s)),e.lte(a))return quadrant=isOdd(n)?i?2:3:i?4:1,e;quadrant=isOdd(n)?i?1:4:i?3:2}return e.minus(s).abs()}function toStringBinary(t,e,n,i){var s,a,l,f,p,C,B,N,le,Ee=t.constructor,Ue=n!==void 0;if(Ue?(checkInt32(n,1,MAX_DIGITS),i===void 0?i=Ee.rounding:checkInt32(i,0,8)):(n=Ee.precision,i=Ee.rounding),!t.isFinite())B=nonFiniteToString(t);else{for(B=finiteToString(t),l=B.indexOf("."),Ue?(s=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):s=e,l>=0&&(B=B.replace(".",""),le=new Ee(1),le.e=B.length-l,le.d=convertBase(finiteToString(le),10,s),le.e=le.d.length),N=convertBase(B,10,s),a=p=N.length;N[--p]==0;)N.pop();if(!N[0])B=Ue?"0p+0":"0";else{if(l<0?a--:(t=new Ee(t),t.d=N,t.e=a,t=divide(t,le,n,i,0,s),N=t.d,a=t.e,C=inexact),l=N[n],f=s/2,C=C||N[n+1]!==void 0,C=i<4?(l!==void 0||C)&&(i===0||i===(t.s<0?3:2)):l>f||l===f&&(i===4||C||i===6&&N[n-1]&1||i===(t.s<0?8:7)),N.length=n,C)for(;++N[--n]>s-1;)N[n]=0,n||(++a,N.unshift(1));for(p=N.length;!N[p-1];--p);for(l=0,B="";l<p;l++)B+=NUMERALS.charAt(N[l]);if(Ue){if(p>1)if(e==16||e==8){for(l=e==16?4:3,--p;p%l;p++)B+="0";for(N=convertBase(B,s,e),p=N.length;!N[p-1];--p);for(l=1,B="1.";l<p;l++)B+=NUMERALS.charAt(N[l])}else B=B.charAt(0)+"."+B.slice(1);B=B+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)B="0"+B;B="0."+B}else if(++a>p)for(a-=p;a--;)B+="0";else a<p&&(B=B.slice(0,a)+"."+B.slice(a))}B=(e==16?"0x":e==2?"0b":e==8?"0o":"")+B}return t.s<0?"-"+B:B}function truncate(t,e){if(t.length>e)return t.length=e,!0}function abs$1(t){return new this(t).abs()}function acos(t){return new this(t).acos()}function acosh(t){return new this(t).acosh()}function add(t,e){return new this(t).plus(e)}function asin(t){return new this(t).asin()}function asinh(t){return new this(t).asinh()}function atan(t){return new this(t).atan()}function atanh(t){return new this(t).atanh()}function atan2(t,e){t=new this(t),e=new this(e);var n,i=this.precision,s=this.rounding,a=i+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=getPi(this,a,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?getPi(this,i,s):new this(0),n.s=t.s):!t.d||e.isZero()?(n=getPi(this,a,1).times(.5),n.s=t.s):e.s<0?(this.precision=a,this.rounding=1,n=this.atan(divide(t,e,a,1)),e=getPi(this,a,1),this.precision=i,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(divide(t,e,a,1)),n}function cbrt(t){return new this(t).cbrt()}function ceil(t){return finalise(t=new this(t),t.e+1,2)}function clamp$2(t,e,n){return new this(t).clamp(e,n)}function config$1(t){if(!t||typeof t!="object")throw Error(decimalError+"Object expected");var e,n,i,s=t.defaults===!0,a=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-9e15,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-9e15,0,"modulo",0,9];for(e=0;e<a.length;e+=3)if(n=a[e],s&&(this[n]=DEFAULTS[n]),(i=t[n])!==void 0)if(mathfloor(i)===i&&i>=a[e+1]&&i<=a[e+2])this[n]=i;else throw Error(invalidArgument+n+": "+i);if(n="crypto",s&&(this[n]=DEFAULTS[n]),(i=t[n])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(cryptoUnavailable);else this[n]=!1;else throw Error(invalidArgument+n+": "+i);return this}function cos(t){return new this(t).cos()}function cosh(t){return new this(t).cosh()}function clone(t){var e,n,i;function s(a){var l,f,p,C=this;if(!(C instanceof s))return new s(a);if(C.constructor=s,isDecimalInstance(a)){C.s=a.s,external?!a.d||a.e>s.maxE?(C.e=NaN,C.d=null):a.e<s.minE?(C.e=0,C.d=[0]):(C.e=a.e,C.d=a.d.slice()):(C.e=a.e,C.d=a.d?a.d.slice():a.d);return}if(p=typeof a,p==="number"){if(a===0){C.s=1/a<0?-1:1,C.e=0,C.d=[0];return}if(a<0?(a=-a,C.s=-1):C.s=1,a===~~a&&a<1e7){for(l=0,f=a;f>=10;f/=10)l++;external?l>s.maxE?(C.e=NaN,C.d=null):l<s.minE?(C.e=0,C.d=[0]):(C.e=l,C.d=[a]):(C.e=l,C.d=[a]);return}else if(a*0!==0){a||(C.s=NaN),C.e=NaN,C.d=null;return}return parseDecimal(C,a.toString())}else if(p!=="string")throw Error(invalidArgument+a);return(f=a.charCodeAt(0))===45?(a=a.slice(1),C.s=-1):(f===43&&(a=a.slice(1)),C.s=1),isDecimal.test(a)?parseDecimal(C,a):parseOther(C,a)}if(s.prototype=P$2,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=config$1,s.clone=clone,s.isDecimal=isDecimalInstance,s.abs=abs$1,s.acos=acos,s.acosh=acosh,s.add=add,s.asin=asin,s.asinh=asinh,s.atan=atan,s.atanh=atanh,s.atan2=atan2,s.cbrt=cbrt,s.ceil=ceil,s.clamp=clamp$2,s.cos=cos,s.cosh=cosh,s.div=div,s.exp=exp,s.floor=floor$1,s.hypot=hypot,s.ln=ln$1,s.log=log,s.log10=log10,s.log2=log2,s.max=max$1,s.min=min$1,s.mod=mod,s.mul=mul,s.pow=pow$1,s.random=random,s.round=round$1,s.sign=sign$2,s.sin=sin,s.sinh=sinh,s.sqrt=sqrt,s.sub=sub,s.sum=sum,s.tan=tan,s.tanh=tanh,s.trunc=trunc,t===void 0&&(t={}),t&&t.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return s.config(t),s}function div(t,e){return new this(t).div(e)}function exp(t){return new this(t).exp()}function floor$1(t){return finalise(t=new this(t),t.e+1,3)}function hypot(){var t,e,n=new this(0);for(external=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return external=!0,new this(1/0);n=e}return external=!0,n.sqrt()}function isDecimalInstance(t){return t instanceof Decimal||t&&t.toStringTag===tag||!1}function ln$1(t){return new this(t).ln()}function log(t,e){return new this(t).log(e)}function log2(t){return new this(t).log(2)}function log10(t){return new this(t).log(10)}function max$1(){return maxOrMin(this,arguments,"lt")}function min$1(){return maxOrMin(this,arguments,"gt")}function mod(t,e){return new this(t).mod(e)}function mul(t,e){return new this(t).mul(e)}function pow$1(t,e){return new this(t).pow(e)}function random(t){var e,n,i,s,a=0,l=new this(1),f=[];if(t===void 0?t=this.precision:checkInt32(t,1,MAX_DIGITS),i=Math.ceil(t/LOG_BASE),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));a<i;)s=e[a],s>=429e7?e[a]=crypto.getRandomValues(new Uint32Array(1))[0]:f[a++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);a<i;)s=e[a]+(e[a+1]<<8)+(e[a+2]<<16)+((e[a+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,a):(f.push(s%1e7),a+=4);a=i/4}else throw Error(cryptoUnavailable);else for(;a<i;)f[a++]=Math.random()*1e7|0;for(i=f[--a],t%=LOG_BASE,i&&t&&(s=mathpow(10,LOG_BASE-t),f[a]=(i/s|0)*s);f[a]===0;a--)f.pop();if(a<0)n=0,f=[0];else{for(n=-1;f[0]===0;n-=LOG_BASE)f.shift();for(i=1,s=f[0];s>=10;s/=10)i++;i<LOG_BASE&&(n-=LOG_BASE-i)}return l.e=n,l.d=f,l}function round$1(t){return finalise(t=new this(t),t.e+1,this.rounding)}function sign$2(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function sin(t){return new this(t).sin()}function sinh(t){return new this(t).sinh()}function sqrt(t){return new this(t).sqrt()}function sub(t,e){return new this(t).sub(e)}function sum(){var t=0,e=arguments,n=new this(e[t]);for(external=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return external=!0,finalise(n,this.precision,this.rounding)}function tan(t){return new this(t).tan()}function tanh(t){return new this(t).tanh()}function trunc(t){return finalise(t=new this(t),t.e+1,1)}P$2[Symbol.for("nodejs.util.inspect.custom")]=P$2.toString;P$2[Symbol.toStringTag]="Decimal";var Decimal=P$2.constructor=clone(DEFAULTS);LN10=new Decimal(LN10);PI=new Decimal(PI);var decimal_default$1=Decimal,import_bn5=__toESM(require_bn()),import_bn=__toESM(require_bn()),Aftermath=class{constructor(t){if(t!==0)throw new Error("Aftermath only supported on mainnet");this.slippage="900000000000000000",this.poolRegistry="0xfcc774493db2c45c79f688f88d28023a3e7d98e4ee9f48bbf5c7990f651577ae",this.protocolFeeVault="0xf194d9b1bcad972e45a7dd67dd49b3ee1e3357a00a50850c52cd51bb450e13b4",this.treasury="0x28e499dff5e864a2eafe476269a4f5035f1c16f338da7be18b103499abf271ce",this.insuranceFund="0xf0c40d67b078000e18032334c3325c47b9ec9f3d9ae4128be820d54663d14e3b",this.referrealVault="0x35d35b0e5b177593d8c3a801462485572fc30861e6ce96a55af6dc4730709278"}amountLimit(t){return new import_bn.default(t).mul(new import_bn.default(this.slippage)).div(new import_bn.default("1000000000000000000")).toString()}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l];if(n.extendedDetails==null)throw new Error("Extended details not supported");if(n.extendedDetails.aftermathLpSupplyType==null)throw new Error("LP supply type not supported");const N=[e.object(n.id),e.object(this.poolRegistry),e.object(this.protocolFeeVault),e.object(this.treasury),e.object(this.insuranceFund),e.object(this.referrealVault),e.pure.u64(this.amountLimit(n.amountOut)),e.pure.u64(this.slippage),i],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::aftermath::${p}`,typeArguments:[C,B,n.extendedDetails.aftermathLpSupplyType],arguments:N})})}},DEEPBOOK_PACKAGE_ID="0x000000000000000000000000000000000000000000000000000000000000dee9",DeepbookV2=class{constructor(t){if(t!==0)throw new Error("Aftermath only supported on mainnet")}getAccountCap(t,e){return __async(this,null,function*(){let n=50,i=null;for(;;){const s=t.getOwnedObjects({owner:e,cursor:i,limit:n,filter:{MoveModule:{package:DEEPBOOK_PACKAGE_ID,module:"custodian_v2"}}});if(s!=null&&s.data!=null){if(s.data.length!==0)return s.data[0].data.objectId;if(s.data.length<50)break}else break}return null})}getOrCreateAccountCap(t,e,n){return __async(this,null,function*(){let i=yield this.getAccountCap(e,n);return i!==null?{accountCap:t.object(i),isCreate:!1}:{accountCap:t.moveCall({target:`${DEEPBOOK_PACKAGE_ID}::clob_v2::create_account`,typeArguments:[],arguments:[]}),isCreate:!0}})}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=yield this.getOrCreateAccountCap(e,t.client,t.signer),le=[e.object(n.id),i,N.accountCap,e.object(CLOCK_ADDRESS$1)],Ee=getAggregatorV2PublishedAt(t.publishedAtV2(),s),Ue=e.moveCall({target:`${Ee}::deepbook::${p}`,typeArguments:[C,B],arguments:le});return N.isCreate&&e.transferObjects([N.accountCap],t.signer),Ue})}},KriyaV2=class{constructor(t){if(t!==0)throw new Error("Kriya amm only supported on mainnet")}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(n.id),i],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::kriya_amm::${p}`,typeArguments:[C,B],arguments:N})})}},KriyaV3=class{constructor(t){if(t!==0)throw new Error("Kriya clmm only supported on mainnet");this.version="0xf5145a7ac345ca8736cf8c76047d00d6d378f30e81be6f6eb557184d9de93c78"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(n.id),i,e.object(this.version),e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::kriya_clmm::${p}`,typeArguments:[C,B],arguments:N})})}},FlowxV2=class{constructor(t){if(t!==0)throw new Error("Flowx only supported on mainnet");this.container="0xb65dcbf63fd3ad5d0ebfbf334780dc9f785eff38a4459e37ab08fa79576ee511"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(this.container),i],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::flowx_amm::${p}`,typeArguments:[C,B],arguments:N})})}},FlowxV3=class{constructor(t){if(t!==0)throw new Error("Flowx clmm only supported on mainnet");this.versioned="0x67624a1533b5aff5d0dfcf5e598684350efd38134d2d245f475524c03a64e656",this.poolRegistry="0x27565d24a4cd51127ac90e4074a841bbe356cca7bf5759ddc14a975be1632abc"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(this.poolRegistry),e.pure.u64(n.feeRate*1e6),i,e.object(this.versioned),e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::flowx_clmm::${p}`,typeArguments:[C,B],arguments:N})})}},Turbos=class{constructor(t){if(t!==0)throw new Error("Turbos only supported on mainnet");this.versioned="0xf1cf0e81048df168ebeb1b8030fad24b3e0b53ae827c25053fff0779c1445b6f"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l];if(n.extendedDetails==null)throw new Error("Extended details not supported");if(n.extendedDetails.turbosFeeType==null)throw new Error("Turbos fee type not supported");const N=[e.object(n.id),i,e.object(CLOCK_ADDRESS$1),e.object(this.versioned)],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::turbos::${p}`,typeArguments:[C,B,n.extendedDetails.turbosFeeType],arguments:N})})}},Cetus=class{constructor(t,e){this.globalConfig=t===0?"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f":"0x9774e359588ead122af1c7e7f64e14ade261cfeecdb5d0eb4a5b3b4c8ab8bd3e",this.partner=e??(t===0?"0x639b5e433da31739e800cd085f356e64cae222966d0f1b11bd9dc76b322ff58b":"0x1f5fa5c820f40d43fc47815ad06d95e40a1942ff72a732a92e8ef4aa8cde70a5")}flash_swap(t,e,n,i,s){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["flash_swap_a2b",l,f]:["flash_swap_b2a",f,l];let N=i?n.amountIn:n.amountOut;const le=[e.object(this.globalConfig),e.object(n.id),e.object(this.partner),e.pure.u64(N),e.pure.bool(i),e.object(CLOCK_ADDRESS$1)],Ee=getAggregatorV2PublishedAt(t.publishedAtV2(),s),Ue=e.moveCall({target:`${Ee}::cetus::${p}`,typeArguments:[C,B],arguments:le});return{targetCoin:Ue[0],flashReceipt:Ue[1],payAmount:Ue[2]}}repay_flash_swap(t,e,n,i,s,a){const{direction:l,from:f,target:p}=n,[C,B,N]=l?["repay_flash_swap_a2b",f,p]:["repay_flash_swap_b2a",p,f],le=[e.object(this.globalConfig),e.object(n.id),e.object(this.partner),i,s],Ee=getAggregatorV2PublishedAt(t.publishedAtV2(),a);return e.moveCall({target:`${Ee}::cetus::${C}`,typeArguments:[B,N],arguments:le})[0]}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(this.globalConfig),e.object(n.id),e.object(this.partner),i,e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::cetus::${p}`,typeArguments:[C,B],arguments:N})})}};function composeType$1(t,...e){const n=Array.isArray(e[e.length-1])?e.pop():[];let s=[t,...e].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function extractStructTagFromType$1(t){var e;try{let n=t.replace(/\s/g,"");const i=n.match(/(<.+>)$/),s=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){n=n.slice(0,n.indexOf("<"));const p=extractStructTagFromType$1(n),C=__spreadProps(__spreadValues({},p),{type_arguments:s.map(B=>extractStructTagFromType$1(B).source_address)});return C.type_arguments=C.type_arguments.map(B=>CoinUtils.isSuiCoin(B)?B:extractStructTagFromType$1(B).source_address),C.source_address=composeType$1(C.full_address,C.type_arguments),C}const a=n.split("::"),f={full_address:n,address:n===GAS_TYPE_ARG$1||n===GAS_TYPE_ARG_LONG$1?"0x2":normalizeSuiObjectId$1(a[0]),module:a[1],name:a[2],type_arguments:[],source_address:""};return f.full_address=`${f.address}::${f.module}::${f.name}`,f.source_address=composeType$1(f.full_address,f.type_arguments),f}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function normalizeCoinType$1(t){return extractStructTagFromType$1(t).source_address}var COIN_TYPE$1="0x2::coin::Coin",COIN_TYPE_ARG_REGEX$1=/^0x2::coin::Coin<(.+)>$/,GAS_TYPE_ARG$1="0x2::sui::SUI",GAS_TYPE_ARG_LONG$1="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",CoinUtils=class xs{static getCoinTypeArg(e){const n=e.type.match(COIN_TYPE_ARG_REGEX$1);return n?n[1]:null}static isSUI(e){const n=xs.getCoinTypeArg(e);return n?xs.getCoinSymbol(n)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,n){let i=BigInt(0);return e.forEach(s=>{n===s.coinAddress&&(i+=BigInt(s.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${COIN_TYPE$1}<${e}>`}static getCoinAssets(e,n){const i=[];return n.forEach(s=>{normalizeCoinType$1(s.coinAddress)===normalizeCoinType$1(e)&&i.push(s)}),i}static isSuiCoin(e){return extractStructTagFromType$1(e).full_address===GAS_TYPE_ARG$1}static selectCoinObjectIdGreaterThanOrEqual(e,n,i=[]){const s=xs.selectCoinAssetGreaterThanOrEqual(e,n,i),a=s.selectedCoins.map(p=>p.coinObjectId),l=s.remainingCoins,f=s.selectedCoins.map(p=>p.balance.toString());return{objectArray:a,remainCoins:l,amountArray:f}}static selectCoinAssetGreaterThanOrEqual(e,n,i=[]){const s=xs.sortByBalance(e.filter(C=>!i.includes(C.coinObjectId))),a=xs.calculateTotalBalance(s);if(a<n)return{selectedCoins:[],remainingCoins:s};if(a===n)return{selectedCoins:s,remainingCoins:[]};let l=BigInt(0);const f=[],p=[...s];for(;l<a;){const C=n-l,B=p.findIndex(le=>le.balance>=C);if(B!==-1){f.push(p[B]),p.splice(B,1);break}const N=p.pop();N.balance>0&&(f.push(N),l+=N.balance)}return{selectedCoins:xs.sortByBalance(f),remainingCoins:xs.sortByBalance(p)}}static sortByBalance(e){return e.sort((n,i)=>n.balance<i.balance?-1:n.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((n,i)=>n.balance>i.balance?-1:n.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((n,i)=>n+i.balance,BigInt(0))}};function getAggregatorServerErrorMessage(t){switch(t){case 1e4:return"Calculate error";case 10001:return"Input number too large can not fit in target type";case 10002:return"No router";case 10003:return"Insufficient Liquidity";case 10004:return"Target token is detected as a HoneyPot scam";case 10005:return"Too many requests. Please try again later";default:return"Unknown error"}}function completionCoin(t){const e=t.indexOf("::");if(e===-1)return t;const n=t.substring(0,e),i=t.substring(e);if(!n.startsWith("0x"))return t;const s=n.substring(2);return s.length>64?t:`0x${s.padStart(64,"0")}${i}`}function compareCoins(t,e){t=completionCoin(t),e=completionCoin(e);const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){if(t[i]>e[i])return!0;if(t[i]<e[i])return!1}return!0}function mintZeroCoin(t,e){return t.moveCall({target:"0x2::coin::zero",typeArguments:[e]})}function buildInputCoin(t,e,n,i){const s=CoinUtils.getCoinAssets(i,e);if(n===BigInt(0))return CoinUtils.isSuiCoin(i)||s.length===0&&!CoinUtils.isSuiCoin(i)?{targetCoin:mintZeroCoin(t,i),isMintZeroCoin:!0,targetCoinAmount:0}:{targetCoin:t.object(s[0].coinObjectId),isMintZeroCoin:!1,targetCoinAmount:Number(s[0].balance.toString())};if(CoinUtils.calculateTotalBalance(s)<n)throw new AggregateError("Insufficient balance when build merge coin, coinType: "+i,"InsufficientBalance"+i);if(CoinUtils.isSuiCoin(i))return{targetCoin:t.splitCoins(t.gas,[t.pure.u64(n.toString())]),isMintZeroCoin:!0,targetCoinAmount:Number(n.toString())};let l=CoinUtils.sortByBalance(s);l.slice(0,3).reduce((le,Ee)=>le+Ee.balance,BigInt(0))<BigInt(n)&&(l=CoinUtils.sortByBalanceDes(s));let p=CoinUtils.selectCoinObjectIdGreaterThanOrEqual(l,n);const[C,...B]=p.objectArray;return B.length>0&&t.mergeCoins(C,B.map(le=>t.object(le))),{targetCoin:t.splitCoins(t.object(C),[t.pure.u64(n.toString())]),isMintZeroCoin:!1,targetCoinAmount:Number(n.toString())}}function checkInvalidSuiAddress(t){return!(!t.startsWith("0x")||t.length!==66)}var import_bn4=__toESM(require_bn()),import_bn3=__toESM(require_bn()),import_bn2=__toESM(require_bn()),ZERO$1=new import_bn2.default(0);new import_bn2.default(1);var TWO$1=new import_bn2.default(2);TWO$1.pow(new import_bn2.default(128));var U64_MAX_BN=new import_bn2.default("18446744073709551615"),TEN_POW_NINE=1e9;function CalculateAmountLimit(t,e,n){let i=ZERO$1;return e?i=t.mul(new import_bn3.default(TEN_POW_NINE-n*TEN_POW_NINE)).div(new import_bn3.default(TEN_POW_NINE)):i=t.mul(new import_bn3.default(TEN_POW_NINE+n*TEN_POW_NINE)).div(new import_bn3.default(TEN_POW_NINE)),Number(i.toString())}function CalculateAmountLimitBN(t,e,n){let i=ZERO$1;return e?i=t.mul(new import_bn3.default(TEN_POW_NINE-n*TEN_POW_NINE)).div(new import_bn3.default(TEN_POW_NINE)):i=t.mul(new import_bn3.default(TEN_POW_NINE+n*TEN_POW_NINE)).div(new import_bn3.default(TEN_POW_NINE)),i}function sqrtPriceX64ToPrice(t,e,n){return new decimal_default$1(t).mul(decimal_default$1.pow(2,-64)).pow(2).mul(decimal_default$1.pow(10,e-n))}function swapInPools(t,e,n,i){return __async(this,null,function*(){var s,a,l,f,p;const{from:C,target:B,amount:N,byAmountIn:le,pools:Ee}=e,Ue=completionCoin(C),ze=completionCoin(B),Ze=new Transaction,Qe=compareCoins(Ue,ze),ct=i===0?"0x2d8c2e0fc6dd25b0214b3fa747e0fd27fd54608142cd2e4f64c1cd350cc4add4":"0x4f920e1ef6318cfba77e20a0538a419a5a504c14230169438b99aba485db40a6",wt=Qe?Ue:ze,qt=Qe?ze:Ue,nr=[wt,qt];for(let tr=0;tr<Ee.length;tr++){const Ut=[Ze.object(Ee[tr]),Ze.pure.bool(Qe),Ze.pure.bool(le),Ze.pure.u64(N.toString())];Ze.moveCall({target:`${ct}::fetcher_script::calculate_swap_result`,arguments:Ut,typeArguments:nr})}if(!checkInvalidSuiAddress(n))throw new AggregateError("Aggregator package not set","InvalidWallet");const ir=yield t.devInspectTransactionBlock({transactionBlock:Ze,sender:n});if(ir.error!=null)throw console.log("simulateRes.error",ir.error),new AggregateError("Aggregator package not set","SimulateError");const or=(s=ir.events)==null?void 0:s.filter(tr=>tr.type.includes("CalculatedSwapResultEvent"));if(or.length===0||or.length!==Ee.length)throw new AggregateError("Simulate event result error","simulateEventError");let ur=le?ZERO$1:U64_MAX_BN,hr=0;for(let tr=0;tr<or.length;tr+=1)if(!or[tr].parsedJson.data.is_exceed)if(e.byAmountIn){const Ut=new import_bn4.BN(or[tr].parsedJson.data.amount_out);Ut.gt(ur)&&(hr=tr,ur=Ut)}else{const Ut=new import_bn4.BN(or[tr].parsedJson.data.amount_out);Ut.lt(ur)&&(hr=tr,ur=Ut)}const fr=or[hr].parsedJson.data,ar=fr.step_results[0].current_sqrt_price,[Lt,Vt]=yield Promise.all([t.getCoinMetadata({coinType:wt}).then(tr=>tr==null?void 0:tr.decimals),t.getCoinMetadata({coinType:qt}).then(tr=>tr==null?void 0:tr.decimals)]);if(Lt==null||Vt==null)throw new AggregateError("Simulate event result error","CannotGetDecimals");const tt=sqrtPriceX64ToPrice(ar,Lt,Vt),Ye=Number(fr.fee_rate)/1e6,ot=new import_bn4.BN((a=fr.amount_in)!=null?a:0),Et=new import_bn4.BN((l=fr.fee_amount)!=null?l:0),er=ot.add(Et),rr={amountIn:er,amountOut:new import_bn4.BN((f=fr.amount_out)!=null?f:0),routes:[{path:[{id:Ee[hr],direction:Qe,provider:"CETUS",from:Ue,target:ze,feeRate:Ye,amountIn:fr.amount_in,amountOut:fr.amount_out,extendedDetails:{afterSqrtPrice:fr.after_sqrt_price}}],amountIn:er,amountOut:new import_bn4.BN((p=fr.amount_out)!=null?p:0),initialPrice:tt}],insufficientLiquidity:!1,byAmountIn:e.byAmountIn};return{isExceed:fr.is_exceed,routeData:rr}})}var Haedal=class{constructor(t){if(t!==0)throw new Error("Haedal only supported on mainnet")}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a}=n,l=a?"swap_a2b":"swap_b2a",f=[e.object(n.id),e.object("0x5"),i],p=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${p}::haedal::${l}`,typeArguments:[],arguments:f})})}},Afsui=class{constructor(t){if(t!==0)throw new Error("Afsui only supported on mainnet");this.stakedSuiVault="0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",this.safe="0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",this.referVault="0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",this.validator="0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a}=n;if(!a)throw new Error("Afsui not support b2a swap");const l="swap_a2b",f=[e.object(this.stakedSuiVault),e.object(this.safe),e.object("0x5"),e.object(this.referVault),e.object(this.validator),i],p=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${p}::afsui::${l}`,typeArguments:[],arguments:f})})}},Volo=class{constructor(t){if(t!==0)throw new Error("Volo only supported on mainnet");this.nativePool="0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",this.metadata="0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a}=n;if(!a)throw new Error("Volo not support b2a swap");const l="swap_a2b",f=[e.object(this.nativePool),e.object(this.metadata),e.object("0x5"),i],p=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${p}::volo::${l}`,typeArguments:[],arguments:f})})}},Bluemove=class{constructor(t){if(t!==0)throw new Error("Bluemove only supported on mainnet");this.dexInfo="0x3f2d9f724f4a1ce5e71676448dc452be9a6243dac9c5b975a588c8c867066e92"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(this.dexInfo),i],le=getAggregatorV2PublishedAt(t.publishedAtV2(),s);return e.moveCall({target:`${le}::bluemove::${p}`,typeArguments:[C,B],arguments:N})})}},DeepbookV3=class{constructor(t){this.deepbookV3Config=t===0?"0x699d455ab8c5e02075b4345ea1f91be55bf46064ae6026cc2528e701ce3ac135":"0xe19b5d072346cae83a037d4e3c8492068a74410a74e5830b3a68012db38296aa"}swap(t,e,n,i,s,a){return __async(this,null,function*(){const{direction:l,from:f,target:p}=n,[C,B,N]=l?["swap_a2b_v2",f,p]:["swap_b2a_v2",p,f];let le;a?le=a:le=mintZeroCoin(e,t.deepbookv3DeepFeeType());const Ee=[e.object(this.deepbookV3Config),e.object(n.id),i,le,e.object(CLOCK_ADDRESS$1)],Ue=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${Ue}::deepbookv3::${C}`,typeArguments:[B,N],arguments:Ee})})}},Scallop=class{constructor(t){if(t!==0)throw new Error("Scallop only supported on mainnet");this.version=t===0?"0x07871c4b3c847a0f674510d4978d5cf6f960452795e8ff6f189fd2088a3f6ac7":"0x0",this.market=t===0?"0xa757975255146dc9686aa823b7838b507f315d704f428cbadad2f4ea061939d9":"0x0"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",l,f];if(n.extendedDetails==null)throw new Error("Extended details not supported");if(n.extendedDetails.scallopScoinTreasury==null)throw new Error("Scallop coin treasury not supported");const N=[e.object(this.version),e.object(this.market),e.object(n.extendedDetails.scallopScoinTreasury),i,e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${le}::scallop::${p}`,typeArguments:[C,B],arguments:N})})}},Suilend=class{constructor(t){if(t!==0)throw new Error("Suilend only supported on mainnet");this.sui_system_state=t===0?"0x0000000000000000000000000000000000000000000000000000000000000005":"0x0"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C]=a?["swap_a2b",f]:["swap_b2a",l],B=[e.object(n.id),e.object(this.sui_system_state),i],N=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${N}::suilend::${p}`,typeArguments:[C],arguments:B})})}},Bluefin=class{constructor(t){if(t!==0)throw new Error("Bluefin only supported on mainnet");this.globalConfig="0x03db251ba509a8d5d8777b6338836082335d93eecbdd09a11e190a1cff51c352"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(this.globalConfig),e.object(n.id),i,e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${le}::bluefin::${p}`,typeArguments:[C,B],arguments:N})})}},HaedalPmm=class{constructor(t,e){if(t===1)throw new Error("HaedalPmm is not supported on testnet");this.pythPriceIDs=e}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l];let N,le;if(n.extendedDetails==null)throw new Error("Extended details not supported haedal pmm");if(!n.extendedDetails.haedalPmmBasePriceSeed||!n.extendedDetails.haedalPmmQuotePriceSeed)throw new Error("Base price seed or quote price seed not supported");N=n.extendedDetails.haedalPmmBasePriceSeed,le=n.extendedDetails.haedalPmmQuotePriceSeed;const Ee=this.pythPriceIDs.get(N),Ue=this.pythPriceIDs.get(le);if(!Ee||!Ue)throw new Error("Base price info object id or quote price info object id not found");const ze=[e.object(n.id),e.object(Ee),e.object(Ue),i,e.object(CLOCK_ADDRESS$1)],Ze=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${Ze}::haedalpmm::${p}`,typeArguments:[C,B],arguments:ze})})}},Alphafi=class{constructor(t){if(t!==0)throw new Error("Alphafi only supported on mainnet");this.sui_system_state=t===0?"0x0000000000000000000000000000000000000000000000000000000000000005":"0x0"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C]=a?["swap_a2b",f]:["swap_b2a",l],B=[e.object(n.id),e.object(this.sui_system_state),i],N=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${N}::alphafi::${p}`,typeArguments:[C],arguments:B})})}},SteammCPMM=class{constructor(t){if(t!==0)throw new Error("Steamm only supported on mainnet")}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b_v2",l,f]:["swap_b2a_v2",f,l];if(n.extendedDetails==null)throw new Error("Extended details not supported");if(n.extendedDetails.steammBankA==null)throw new Error("Steamm bank a type not supported");if(n.extendedDetails.steammBankB==null)throw new Error("Steamm bank b type not supported");if(n.extendedDetails.steammLendingMarket==null)throw new Error("Steamm lending market not supported");if(n.extendedDetails.steammLendingMarketType==null)throw new Error("Steamm lending market type not supported");if(n.extendedDetails.steammBCoinAType==null)throw new Error("Steamm b coin a type not supported");if(n.extendedDetails.steammBCoinBType==null)throw new Error("Steamm b coin b type not supported");if(n.extendedDetails.steammLPToken==null)throw new Error("Steamm lp token not supported");const N=[e.object(n.id),e.object(n.extendedDetails.steammBankA),e.object(n.extendedDetails.steammBankB),e.object(n.extendedDetails.steammLendingMarket),i,e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2Extend2PublishedAt(t.publishedAtV2Extend2(),s);return e.moveCall({target:`${le}::steamm_cpmm::${p}`,typeArguments:[n.extendedDetails.steammLendingMarketType,C,B,n.extendedDetails.steammBCoinAType,n.extendedDetails.steammBCoinBType,n.extendedDetails.steammLPToken],arguments:N})})}},SteammOmm=class{constructor(t,e){if(t!==0)throw new Error("Steamm only supported on mainnet");this.pythPriceIDs=e,this.oraclePackageId="0xe84b649199654d18c38e727212f5d8dacfc3cf78d60d0a7fc85fd589f280eb2b"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n;if(n.extendedDetails==null)throw new Error("Extended details not supported");if(n.extendedDetails.steammBankA==null)throw new Error("Steamm bank a type not supported");if(n.extendedDetails.steammBankB==null)throw new Error("Steamm bank b type not supported");if(n.extendedDetails.steammLendingMarket==null)throw new Error("Steamm lending market not supported");if(n.extendedDetails.steammLendingMarketType==null)throw new Error("Steamm lending market type not supported");if(n.extendedDetails.steammBCoinAType==null)throw new Error("Steamm b coin a type not supported");if(n.extendedDetails.steammBCoinBType==null)throw new Error("Steamm b coin b type not supported");if(n.extendedDetails.steammLPToken==null)throw new Error("Steamm lp token not supported");if(n.extendedDetails.steammOracleRegistryId==null)throw new Error("Steamm oracle registry id not supported");if(n.extendedDetails.steammOracleIndexA==null)throw new Error("Steamm oracle index a not supported");if(n.extendedDetails.steammOracleIndexB==null)throw new Error("Steamm oracle index b not supported");if(n.extendedDetails.steammOraclePythPriceSeedA==null)throw new Error("Steamm oracle pyth price seed a not supported");if(n.extendedDetails.steammOraclePythPriceSeedB==null)throw new Error("Steamm oracle pyth price seed b not supported");const[p,C,B]=a?["swap_a2b_v2",l,f]:["swap_b2a_v2",f,l],N=n.extendedDetails.steammOraclePythPriceSeedA,le=n.extendedDetails.steammOraclePythPriceSeedB,Ee=this.pythPriceIDs.get(N),Ue=this.pythPriceIDs.get(le);if(!Ee||!Ue)throw new Error("Base price info object id or quote price info object id not found");const ze=e.moveCall({target:`${this.oraclePackageId}::oracles::get_pyth_price`,typeArguments:[],arguments:[e.object(n.extendedDetails.steammOracleRegistryId),e.object(Ee),e.pure.u64(n.extendedDetails.steammOracleIndexA),e.object(CLOCK_ADDRESS$1)]}),Ze=e.moveCall({target:`${this.oraclePackageId}::oracles::get_pyth_price`,typeArguments:[],arguments:[e.object(n.extendedDetails.steammOracleRegistryId),e.object(Ue),e.pure.u64(n.extendedDetails.steammOracleIndexB),e.object(CLOCK_ADDRESS$1)]}),Qe=[e.object(n.id),e.object(n.extendedDetails.steammBankA),e.object(n.extendedDetails.steammBankB),e.object(n.extendedDetails.steammLendingMarket),ze,Ze,i,e.object(CLOCK_ADDRESS$1)],ct=getAggregatorV2Extend2PublishedAt(t.publishedAtV2Extend2(),s);return e.moveCall({target:`${ct}::steamm_omm::${p}`,typeArguments:[n.extendedDetails.steammLendingMarketType,C,B,n.extendedDetails.steammBCoinAType,n.extendedDetails.steammBCoinBType,n.extendedDetails.steammLPToken],arguments:Qe})})}},SUPER_SUI_TYPE="0x790f258062909e3a0ffc78b3c53ac2f62d7084c3bab95644bdeb05add7250001::super_sui::SUPER_SUI",MUSD_TYPE="0xe44df51c0b21a27ab915fa1fe2ca610cd3eaa6d9666fe5e62b988bf7f0bd8722::musd::MUSD",METH_TYPE="0xccd628c2334c5ed33e6c47d6c21bb664f8b6307b2ac32c2462a61f69a31ebcee::meth::METH",Metastable=class{constructor(t,e){if(t!==0)throw new Error("Metastable only supported on mainnet");this.versionID="0x4696559327b35ff2ab26904e7426a1646312e9c836d5c6cff6709a5ccc30915c",this.pythPriceIDs=e}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B,N]=a?["swap_a2b","create_deposit_cap",l,f]:["swap_b2a","create_withdraw_cap",f,l];let le="",Ee="pyth",Ue="";if(n.extendedDetails==null)throw new Error("Extended details not supported metastable");if(!n.extendedDetails.metastableCreateCapPkgId||!n.extendedDetails.metastableCreateCapModule||!n.extendedDetails.metastableRegistryId||!n.extendedDetails.metastableWhitelistedAppId)throw new Error("CreateCapPkgId or CreateCapModule or RegistryId or WhitelistedAppId or CreateCapAllTypeParams not supported");le=n.extendedDetails.metastableCreateCapPkgId,Ee=n.extendedDetails.metastableCreateCapModule,Ue=n.extendedDetails.metastableWhitelistedAppId;const ze=[N];n.extendedDetails.metastableCreateCapAllTypeParams&&ze.push(B);const Ze=[e.object(Ue),e.object(n.id)];switch(N){case SUPER_SUI_TYPE:{if(!n.extendedDetails.metastableRegistryId)throw new Error("Not found registry id for super sui");Ze.push(e.object(n.extendedDetails.metastableRegistryId));break}case MUSD_TYPE:{if(n.extendedDetails.metastablePriceSeed!=null){const nr=this.pythPriceIDs.get(n.extendedDetails.metastablePriceSeed);if(nr==null)throw new Error("Invalid Pyth price feed: "+n.extendedDetails.metastablePriceSeed);Ze.push(e.object(nr))}if(n.extendedDetails.metastableETHPriceSeed!=null){const nr=this.pythPriceIDs.get(n.extendedDetails.metastableETHPriceSeed);if(nr==null)throw new Error("Invalid Pyth price feed: "+n.extendedDetails.metastableETHPriceSeed);Ze.push(e.object(nr))}Ze.push(e.object(CLOCK_ADDRESS$1));break}case METH_TYPE:{if(n.extendedDetails.metastablePriceSeed!=null){const nr=this.pythPriceIDs.get(n.extendedDetails.metastablePriceSeed);if(nr==null)throw new Error("Invalid Pyth price feed: "+n.extendedDetails.metastablePriceSeed);Ze.push(e.object(nr))}if(n.extendedDetails.metastableETHPriceSeed!=null){const nr=this.pythPriceIDs.get(n.extendedDetails.metastableETHPriceSeed);if(nr==null)throw new Error("Invalid Pyth price feed: "+n.extendedDetails.metastableETHPriceSeed);Ze.push(e.object(nr))}Ze.push(e.object(CLOCK_ADDRESS$1));break}default:throw new Error("Invalid Metacoin: "+N)}const Qe=e.moveCall({target:`${le}::${Ee}::${C}`,typeArguments:ze,arguments:Ze}),ct=[e.object(n.id),e.object(this.versionID),Qe,i],wt=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${wt}::metastable::${p}`,typeArguments:[B,N],arguments:ct})})}},Obric=class{constructor(t,e){if(t===1)throw new Error("Obric is not supported on testnet");this.pythPriceIDs=e,this.pythStateObjectId="0x1f9310238ee9298fb703c3419030b35b22bb1cc37113e3bb5007c99aec79e5b8"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l];let N,le,Ee,Ue;if(n.extendedDetails==null)throw new Error("Extended details not supported in obric");if(n.extendedDetails.obricCoinAPriceSeed&&n.extendedDetails.obricCoinBPriceSeed)N=n.extendedDetails.obricCoinAPriceSeed,Ee=this.pythPriceIDs.get(N),le=n.extendedDetails.obricCoinBPriceSeed,Ue=this.pythPriceIDs.get(le);else{if(!n.extendedDetails.obricCoinAPriceId||!n.extendedDetails.obricCoinBPriceId)throw new Error("Base price id or quote price id not supported");Ee=n.extendedDetails.obricCoinAPriceId,Ue=n.extendedDetails.obricCoinBPriceId}if(!Ee||!Ue)throw new Error("Base price info object id or quote price info object id not found");const ze=[e.object(n.id),i,e.object(this.pythStateObjectId),e.object(Ee),e.object(Ue),e.object(CLOCK_ADDRESS$1)],Ze=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${Ze}::obric::${p}`,typeArguments:[C,B],arguments:ze})})}},HaWAL=class{constructor(t){if(t!==0)throw new Error("HaWAL only supported on mainnet");this.staking=t===0?"0x10b9d30c28448939ce6c4d6c6e0ffce4a7f8a4ada8248bdad09ef8b70e4a3904":"0x0",this.validator=t===0?"0x7b3ba6de2ae58283f60d5b8dc04bb9e90e4796b3b2e0dea75569f491275242e7":"0x0"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a}=n,l=a?"swap_a2b":"swap_b2a",f=[e.object(this.staking),e.object(n.id),i,e.object(this.validator)],p=getAggregatorV2ExtendPublishedAt(t.publishedAtV2Extend(),s);return e.moveCall({target:`${p}::hawal::${l}`,typeArguments:[],arguments:f})})}},Momentum=class{constructor(t){if(t!==0)throw new Error("Momentum only supported on mainnet");this.version="0x2375a0b1ec12010aaea3b2545acfa2ad34cfbba03ce4b59f4c39e1e25eed1b2a"}swap(t,e,n,i,s){return __async(this,null,function*(){const{direction:a,from:l,target:f}=n,[p,C,B]=a?["swap_a2b",l,f]:["swap_b2a",f,l],N=[e.object(n.id),i,e.object(this.version),e.object(CLOCK_ADDRESS$1)],le=getAggregatorV2Extend2PublishedAt(t.publishedAtV2Extend2(),s);return e.moveCall({target:`${le}::momentum::${p}`,typeArguments:[C,B],arguments:N})})}},CETUS="CETUS",DEEPBOOKV2="DEEPBOOK",KRIYA="KRIYA",FLOWXV2="FLOWX",FLOWXV3="FLOWXV3",KRIYAV3="KRIYAV3",TURBOS="TURBOS",AFTERMATH="AFTERMATH",HAEDAL="HAEDAL",VOLO="VOLO",AFSUI="AFSUI",BLUEMOVE="BLUEMOVE",DEEPBOOKV3="DEEPBOOKV3",SCALLOP="SCALLOP",SUILEND="SUILEND",BLUEFIN="BLUEFIN",HAEDALPMM="HAEDALPMM",ALPHAFI="ALPHAFI",SPRINGSUI="SPRINGSUI",STEAMM="STEAMM",METASTABLE="METASTABLE",OBRIC="OBRIC",HAWAL="HAWAL",STEAMM_OMM="STEAMM_OMM",MOMENTUM="MOMENTUM",DEFAULT_ENDPOINT="https://api-sui.cetus.zone/router_v2";function isBuilderRouterSwapParams(t){return Array.isArray(t.routers)}function isBuilderFastRouterSwapParams(t){return Array.isArray(t.routers)}var _AggregatorClient=class vo{constructor(e){var n,i;this.endpoint=e.endpoint?processEndpoint(e.endpoint):DEFAULT_ENDPOINT,this.client=e.client||new SuiClient({url:getFullnodeUrl("mainnet")}),this.signer=e.signer||"",this.env=e.env||0,this.allCoins=new Map;const s=vo.CONFIG[this.env];if(this.pythConnections=this.newPythClients((n=e.pythUrls)!=null?n:[]),this.pythClient=new lib$2.SuiPythClient(this.client,s.pythStateId,s.wormholeStateId),this.apiKey=e.apiKey||"",this.partner=e.partner,e.overlayFeeRate)if(e.overlayFeeRate>0&&e.overlayFeeRate<=.01)this.overlayFeeRate=e.overlayFeeRate*1e6;else throw new Error("Overlay fee rate must be between 0 and 0.01");else this.overlayFeeRate=0;this.overlayFeeReceiver=(i=e.overlayFeeReceiver)!=null?i:"0x0"}newPythClients(e){return e.includes("https://hermes.pyth.network")||e.push("https://hermes.pyth.network"),e.map(i=>new lib$2.SuiPriceServiceConnection(i,{timeout:3e3}))}getCoins(e,n=!0){return __async(this,null,function*(){if(this.signer==="")throw new Error("Signer is required, but not provided.");let i=null,s=50;if(!n){const l=this.allCoins.get(e);if(l)return l}const a=[];for(;;)try{const l=yield this.client.getCoins({owner:this.signer,coinType:e,cursor:i,limit:s});for(const f of l.data)a.push({coinAddress:extractStructTagFromType$1(f.coinType).source_address,coinObjectId:f.coinObjectId,balance:BigInt(f.balance)});if(!l.hasNextPage)break;i=l.nextCursor}catch(l){console.error("getCoins error:",l);break}return this.allCoins.set(e,a),a})}findRouters(e){return __async(this,null,function*(){return getRouterResult(this.endpoint,this.apiKey,e,this.overlayFeeRate,this.overlayFeeReceiver)})}executeFlexibleInputSwap(e,n,i,s,a,l,f,p,C){return __async(this,null,function*(){if(i.length===0)throw new Error("No router found");const B=i[0].path[i[0].path.length-1].target,N=[];for(let ze=0;ze<i.length-1;ze++){if(i[ze].path.length===0)throw new Error("Empty path");let Qe=e.splitCoins(n,[i[ze].amountIn.toString()])[0];for(const ct of i[ze].path)Qe=yield this.newDex(ct.provider,l,f).swap(this,e,ct,Qe,C,p);N.push(Qe)}if(i[i.length-1].path.length===0)throw new Error("Empty path");let le=n;for(const ze of i[i.length-1].path)le=yield this.newDex(ze.provider,l,f).swap(this,e,ze,le,C,p);N.push(le);const Ee=getAggregatorV2ExtendPublishedAt(this.publishedAtV2Extend(),C);return this.checkCoinThresholdAndMergeCoin(e,N,B,s,a,Ee)})}expectInputSwap(e,n,i,s,a,l,f,p,C){return __async(this,null,function*(){if(i.length===0)throw new Error("No router found");const B=i.map(ct=>ct.amountIn.toString()),N=i[0].path[0].from,le=i[0].path[i[0].path.length-1].target,Ee=e.splitCoins(n,B),Ue=[];for(let ct=0;ct<i.length;ct++){if(i[ct].path.length===0)throw new Error("Empty path");let wt=Ee[ct];for(const qt of i[ct].path)wt=yield this.newDex(qt.provider,l,f).swap(this,e,qt,wt,C,p);Ue.push(wt)}const ze=getAggregatorV2PublishedAt(this.publishedAtV2(),C),Ze=getAggregatorV2ExtendPublishedAt(this.publishedAtV2Extend(),C);return this.transferOrDestoryCoin(e,n,N,ze),this.checkCoinThresholdAndMergeCoin(e,Ue,le,s,a,Ze)})}expectOutputSwap(e,n,i,s,a){return __async(this,null,function*(){const l=[],f=[],p=[],C=new Cetus(this.env,s),B=getAggregatorV2PublishedAt(this.publishedAtV2(),a);for(let le=0;le<i.length;le++){const Ee=i[le];for(let ze=Ee.path.length-1;ze>=0;ze--){const Ze=Ee.path[ze],Qe=C.flash_swap(this,e,Ze,!1);l.unshift(Qe.targetCoin),f.unshift(Qe.flashReceipt)}let Ue=n;for(let ze=0;ze<Ee.path.length;ze++){const Ze=Ee.path[ze],Qe=C.repay_flash_swap(this,e,Ze,Ue,f[ze]);Ue=l[ze],ze===0?n=Qe:this.transferOrDestoryCoin(e,Qe,Ze.from,B),ze===Ee.path.length-1&&p.push(Ue)}}const N=i[0].path[0].from;if(this.transferOrDestoryCoin(e,n,N,B),p.length>1){const le=e.makeMoveVec({elements:p.slice(1)});e.moveCall({target:`${SUI_FRAMEWORK_ADDRESS$1}::pay::join_vec`,typeArguments:[i[0].path[i[0].path.length-1].target],arguments:[p[0],le]})}return p[0]})}swapInPools(e){return __async(this,null,function*(){let n;try{n=yield swapInPools(this.client,e,this.signer,this.env)}catch(i){return console.error("swapInPools error:",i),null}return n})}routerSwap(e){return __async(this,null,function*(){const{routers:n,inputCoin:i,slippage:s,txb:a,deepbookv3DeepFee:l,partner:f}=e;if(s>1||s<0)throw new Error("Invalid slippage value. Must be between 0 and 1 (e.g., 0.01 represents 1% slippage)");const p=Array.isArray(n)?n:n.routes,C=isBuilderRouterSwapParams(e)?e.byAmountIn:e.routers.byAmountIn,B=p.reduce((or,ur)=>or.add(ur.amountIn),new import_bn5.default(0)),N=p.reduce((or,ur)=>or.add(ur.amountOut),new import_bn5.default(0));let le=new import_bn5.default(0);this.overlayFeeRate>0&&this.overlayFeeReceiver!=="0x0"&&(C?le=N.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)):le=B.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)));const Ee=C?N.sub(le):N,Ue=C?B:B.add(le),ze=CalculateAmountLimitBN(C?Ee:Ue,C,s),Ze=isBuilderRouterSwapParams(e)?void 0:e.routers.packages,Qe=getAggregatorV2PublishedAt(this.publishedAtV2(),Ze),ct=findPythPriceIDs(p),wt=ct.length>0?yield this.updatePythPriceIDs(ct,a):new Map;if(C)return yield this.expectInputSwap(a,i,p,N.toString(),ze.toString(),wt,f??this.partner,l,Ze);const qt=a.splitCoins(i,[le.toString()]);this.overlayFeeRate>0&&this.overlayFeeReceiver!=="0x0"&&a.transferObjects([qt],this.overlayFeeReceiver);const nr=a.splitCoins(i,[ze.sub(le).toString()]);return this.transferOrDestoryCoin(a,i,p[0].path[0].from,Qe),yield this.expectOutputSwap(a,nr[0],p,f??this.partner)})}fixableRouterSwap(e){return __async(this,null,function*(){const{routers:n,inputCoin:i,slippage:s,txb:a,deepbookv3DeepFee:l,partner:f}=e,p=Array.isArray(n)?n:n.routes,C=e.routers.byAmountIn,B=p.reduce((qt,nr)=>qt.add(nr.amountIn),new import_bn5.default(0)),N=p.reduce((qt,nr)=>qt.add(nr.amountOut),new import_bn5.default(0));let le=0;this.overlayFeeRate>0&&this.overlayFeeReceiver!=="0x0"&&(C?le=Number(N.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)).toString()):le=Number(B.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)).toString()));const Ee=C?N.sub(new import_bn5.default(le)):N,Ue=C?B:B.add(new import_bn5.default(le)),ze=CalculateAmountLimitBN(C?Ee:Ue,C,s),Ze=isBuilderRouterSwapParams(e)?void 0:e.routers.packages,Qe=findPythPriceIDs(p),ct=Qe.length>0?yield this.updatePythPriceIDs(Qe,a):new Map;return C?yield this.executeFlexibleInputSwap(a,i,p,Ee.toString(),ze.toString(),ct,f??this.partner,l,Ze):yield this.expectOutputSwap(a,i,p,f??this.partner)})}fastRouterSwap(e){return __async(this,null,function*(){const{routers:n,slippage:i,txb:s,partner:a,refreshAllCoins:l,payDeepFeeAmount:f}=e,p=Array.isArray(n)?n:n.routes,C=p[0].path[0].from;let B=yield this.getCoins(C,l);const N=p[0].path[p[0].path.length-1].target,le=p.reduce((ur,hr)=>ur.add(hr.amountIn),new import_bn5.default(0)),Ee=p.reduce((ur,hr)=>ur.add(hr.amountOut),new import_bn5.default(0)),Ue=isBuilderFastRouterSwapParams(e)?e.byAmountIn:e.routers.byAmountIn;let ze=0;this.overlayFeeRate>0&&this.overlayFeeReceiver!=="0x0"&&(Ue?ze=Number(Ee.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)).toString()):ze=Number(le.mul(new import_bn5.default(this.overlayFeeRate)).div(new import_bn5.default(1e6)).toString()));const Ze=Ue?Ee.sub(new import_bn5.default(ze)):Ee,Qe=Ue?le:le.add(new import_bn5.default(ze)),ct=CalculateAmountLimit(Ue?Ze:Qe,Ue,i),qt=buildInputCoin(s,B,BigInt((Ue?Qe:ct).toString()),C);let nr;if(f&&f>0){let ur=yield this.getCoins(this.deepbookv3DeepFeeType());nr=buildInputCoin(s,ur,BigInt(f),this.deepbookv3DeepFeeType()).targetCoin}const ir=isBuilderFastRouterSwapParams(e)?{routers:p,inputCoin:qt.targetCoin,slippage:i,byAmountIn:Ue,txb:s,partner:a??this.partner,deepbookv3DeepFee:nr}:{routers:e.routers,inputCoin:qt.targetCoin,slippage:i,byAmountIn:Ue,txb:s,partner:a??this.partner,deepbookv3DeepFee:nr},or=yield this.routerSwap(ir);if(CoinUtils.isSuiCoin(N))s.mergeCoins(s.gas,[or]);else{let ur=yield this.getCoins(N,l);const hr=buildInputCoin(s,ur,BigInt(0),N),fr=isBuilderFastRouterSwapParams(e)?void 0:e.routers.packages,ar=getAggregatorV2PublishedAt(this.publishedAtV2(),fr);s.mergeCoins(hr.targetCoin,[or]),hr.isMintZeroCoin&&this.transferOrDestoryCoin(s,hr.targetCoin,N,ar)}})}publishedAtV2(){return this.env===0?"0x3864c7c59a4889fec05d1aae4bc9dba5a0e0940594b424fbed44cb3f6ac4c032":"0x52eae33adeb44de55cfb3f281d4cc9e02d976181c0952f5323648b5717b33934"}publishedAtV2Extend(){return this.env===0?"0x39402d188b7231036e52266ebafad14413b4bf3daea4ac17115989444e6cd516":"0xabb6a81c8a216828e317719e06125de5bb2cb0fe8f9916ff8c023ca5be224c78"}publishedAtV2Extend2(){return this.env===0?"0x0018f7bbbece22f4272ed2281b290f745e5aa69d870f599810a30b4eeffc1a5e":"0x0"}deepbookv3DeepFeeType(){return this.env===0?"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP":"0x36dbef866a1d62bf7328989a10fb2f07d769f4ee587c0de4a0a256e57e0a58a8::deep::DEEP"}transferOrDestoryCoin(e,n,i,s){e.moveCall({target:`${s}::utils::transfer_or_destroy_coin`,typeArguments:[i],arguments:[n]})}checkCoinThresholdAndMergeCoin(e,n,i,s,a,l){let f=n[0];if(n.length>1){let p=e.makeMoveVec({elements:n.slice(1)});e.moveCall({target:`${SUI_FRAMEWORK_ADDRESS$1}::pay::join_vec`,typeArguments:[i],arguments:[n[0],p]}),f=n[0]}return this.overlayFeeRate===0||this.overlayFeeReceiver==="0x0"?e.moveCall({target:`${l}::utils::check_coin_threshold_v1`,typeArguments:[i],arguments:[f,e.pure.u64(s),e.pure.u64(a)]}):e.moveCall({target:`${l}::utils::check_coin_threshold_v2`,typeArguments:[i],arguments:[f,e.pure.u64(s),e.pure.u64(a),e.pure.u64(this.overlayFeeRate),e.pure.address(this.overlayFeeReceiver)]}),f}newDex(e,n,i){switch(e){case CETUS:return new Cetus(this.env,i);case DEEPBOOKV2:return new DeepbookV2(this.env);case DEEPBOOKV3:return new DeepbookV3(this.env);case KRIYA:return new KriyaV2(this.env);case KRIYAV3:return new KriyaV3(this.env);case FLOWXV2:return new FlowxV2(this.env);case FLOWXV3:return new FlowxV3(this.env);case TURBOS:return new Turbos(this.env);case AFTERMATH:return new Aftermath(this.env);case HAEDAL:return new Haedal(this.env);case AFSUI:return new Afsui(this.env);case VOLO:return new Volo(this.env);case BLUEMOVE:return new Bluemove(this.env);case SCALLOP:return new Scallop(this.env);case SUILEND:return new Suilend(this.env);case SPRINGSUI:return new Suilend(this.env);case BLUEFIN:return new Bluefin(this.env);case HAEDALPMM:return new HaedalPmm(this.env,n);case ALPHAFI:return new Alphafi(this.env);case STEAMM:return new SteammCPMM(this.env);case STEAMM_OMM:return new SteammOmm(this.env,n);case METASTABLE:return new Metastable(this.env,n);case OBRIC:return new Obric(this.env,n);case HAWAL:return new HaWAL(this.env);case MOMENTUM:return new Momentum(this.env);default:throw new Error(`Unsupported dex ${e}`)}}signAndExecuteTransaction(e,n){return __async(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:n,options:{showEffects:!0,showEvents:!0,showInput:!0,showBalanceChanges:!0}})})}devInspectTransactionBlock(e){return __async(this,null,function*(){return yield this.client.devInspectTransactionBlock({transactionBlock:e,sender:this.signer})})}sendTransaction(e,n){return __async(this,null,function*(){return yield this.client.signAndExecuteTransaction({transaction:e,signer:n})})}getDeepbookV3Config(){return __async(this,null,function*(){const e=yield getDeepbookV3Config(this.endpoint);return e?e.data:null})}updatePythPriceIDs(e,n){return __async(this,null,function*(){let i=null,s=null;for(const f of this.pythConnections)try{i=yield f.getPriceFeedsUpdateData(e);break}catch(p){s=p,console.log("Error: ",p);continue}if(i==null)throw new Error(`All Pyth price nodes are unavailable. Cannot fetch price data. Please switch to or add new available Pyth nodes. Detailed error: ${s==null?void 0:s.message}`);let a=[];try{a=yield this.pythClient.updatePriceFeeds(n,i,e)}catch(f){throw new Error(`All Pyth price nodes are unavailable. Cannot fetch price data. Please switch to or add new available Pyth nodes in the pythUrls parameter when initializing AggregatorClient, for example: new AggregatorClient({ pythUrls: ["https://your-pyth-node-url"] }). Detailed error: ${f}`)}let l=new Map;for(let f=0;f<e.length;f++)l.set(e[f],a[f]);return l})}};_AggregatorClient.CONFIG={1:{wormholeStateId:"0x31358d198147da50db32eda2562951d53973a0c0ad5ed738e9b17d88b213d790",pythStateId:"0x243759059f4c3111179da5878c12f68d612c21a8d54d85edc86164bb18be1c7c"},0:{wormholeStateId:"0xaeab97f96cf9877fee2883315d459552b2b921edc16d7ceac6eab944dd88919c",pythStateId:"0x1f9310238ee9298fb703c3419030b35b22bb1cc37113e3bb5007c99aec79e5b8"}};var AggregatorClient25=_AggregatorClient;function findPythPriceIDs(t){const e=new Set;for(const n of t)for(const i of n.path)i.provider===HAEDALPMM&&i.extendedDetails&&i.extendedDetails.haedalPmmBasePriceSeed&&i.extendedDetails.haedalPmmQuotePriceSeed&&(e.add(i.extendedDetails.haedalPmmBasePriceSeed),e.add(i.extendedDetails.haedalPmmQuotePriceSeed)),i.provider===METASTABLE&&(i.extendedDetails&&i.extendedDetails.metastablePriceSeed&&e.add(i.extendedDetails.metastablePriceSeed),i.extendedDetails&&i.extendedDetails.metastableETHPriceSeed&&e.add(i.extendedDetails.metastableETHPriceSeed)),i.provider===OBRIC&&(i.extendedDetails&&i.extendedDetails.obricCoinAPriceSeed&&e.add(i.extendedDetails.obricCoinAPriceSeed),i.extendedDetails&&i.extendedDetails.obricCoinBPriceSeed&&e.add(i.extendedDetails.obricCoinBPriceSeed)),i.provider===STEAMM_OMM&&(i.extendedDetails&&i.extendedDetails.steammOraclePythPriceSeedA&&e.add(i.extendedDetails.steammOraclePythPriceSeedA),i.extendedDetails&&i.extendedDetails.steammOraclePythPriceSeedB&&e.add(i.extendedDetails.steammOraclePythPriceSeedB));return Array.from(e)}function parseRouterResponse(t,e){let n=0;for(const a of t.routes)for(const l of a.path)l.extended_details&&l.extended_details.deepbookv3_deep_fee&&(n+=Number(l.extended_details.deepbookv3_deep_fee));let i;if(t.packages!=null){i=new Map;for(const[a,l]of Object.entries(t.packages))i.set(a,l)}return{amountIn:new import_bn5.default(t.amount_in.toString()),amountOut:new import_bn5.default(t.amount_out.toString()),byAmountIn:e,insufficientLiquidity:!1,routes:t.routes.map(a=>({path:a.path.map(l=>{var f,p,C,B,N,le,Ee,Ue,ze,Ze,Qe,ct,wt,qt,nr,ir,or,ur,hr,fr,ar,Lt,Vt,tt,Ye,ot,Et,er,rr,yt;let tr;l.provider===AFTERMATH&&(tr=l.extended_details.aftermath_pool_flatness===0?"v2":"v3");let Ut;return(l.provider===TURBOS||l.provider===AFTERMATH||l.provider===CETUS||l.provider===DEEPBOOKV3||l.provider===SCALLOP||l.provider===HAEDALPMM||l.provider===METASTABLE||l.provider===OBRIC||l.provider===STEAMM||l.provider===STEAMM_OMM)&&(Ut={aftermathLpSupplyType:(f=l.extended_details)==null?void 0:f.aftermath_lp_supply_type,turbosFeeType:(p=l.extended_details)==null?void 0:p.turbos_fee_type,afterSqrtPrice:(C=l.extended_details)==null?void 0:C.after_sqrt_price,deepbookv3DeepFee:(B=l.extended_details)==null?void 0:B.deepbookv3_deep_fee,scallopScoinTreasury:(N=l.extended_details)==null?void 0:N.scallop_scoin_treasury,haedalPmmBasePriceSeed:(le=l.extended_details)==null?void 0:le.haedal_pmm_base_price_seed,haedalPmmQuotePriceSeed:(Ee=l.extended_details)==null?void 0:Ee.haedal_pmm_quote_price_seed,steammBankA:(Ue=l.extended_details)==null?void 0:Ue.steamm_bank_a,steammBankB:(ze=l.extended_details)==null?void 0:ze.steamm_bank_b,steammLendingMarket:(Ze=l.extended_details)==null?void 0:Ze.steamm_lending_market,steammLendingMarketType:(Qe=l.extended_details)==null?void 0:Qe.steamm_lending_market_type,steammBCoinAType:(ct=l.extended_details)==null?void 0:ct.steamm_btoken_a_type,steammBCoinBType:(wt=l.extended_details)==null?void 0:wt.steamm_btoken_b_type,steammLPToken:(qt=l.extended_details)==null?void 0:qt.steamm_lp_token_type,steammOracleRegistryId:(nr=l.extended_details)==null?void 0:nr.steamm_oracle_registry_id,steammOracleIndexA:(ir=l.extended_details)==null?void 0:ir.steamm_oracle_index_a,steammOracleIndexB:(or=l.extended_details)==null?void 0:or.steamm_oracle_index_b,steammOraclePythPriceSeedA:(ur=l.extended_details)==null?void 0:ur.steamm_oracle_pyth_price_seed_a,steammOraclePythPriceSeedB:(hr=l.extended_details)==null?void 0:hr.steamm_oracle_pyth_price_seed_b,metastablePriceSeed:(fr=l.extended_details)==null?void 0:fr.metastable_price_seed,metastableETHPriceSeed:(ar=l.extended_details)==null?void 0:ar.metastable_eth_price_seed,metastableWhitelistedAppId:(Lt=l.extended_details)==null?void 0:Lt.metastable_whitelisted_app_id,metastableCreateCapPkgId:(Vt=l.extended_details)==null?void 0:Vt.metastable_create_cap_pkg_id,metastableCreateCapModule:(tt=l.extended_details)==null?void 0:tt.metastable_create_cap_module,metastableCreateCapAllTypeParams:(Ye=l.extended_details)==null?void 0:Ye.metastable_create_cap_all_type_params,metastableRegistryId:(ot=l.extended_details)==null?void 0:ot.metastable_registry_id,obricCoinAPriceSeed:(Et=l.extended_details)==null?void 0:Et.obric_coin_a_price_seed,obricCoinBPriceSeed:(er=l.extended_details)==null?void 0:er.obric_coin_b_price_seed,obricCoinAPriceId:(rr=l.extended_details)==null?void 0:rr.obric_coin_a_price_id,obricCoinBPriceId:(yt=l.extended_details)==null?void 0:yt.obric_coin_b_price_id}),{id:l.id,direction:l.direction,provider:l.provider,from:l.from,target:l.target,feeRate:l.fee_rate,amountIn:l.amount_in,amountOut:l.amount_out,extendedDetails:Ut,version:tr}}),amountIn:new import_bn5.default(a.amount_in.toString()),amountOut:new import_bn5.default(a.amount_out.toString()),initialPrice:new decimal_default$1(a.initial_price.toString())})),totalDeepFee:n,packages:i}}var CLOCK_ADDRESS$1=SUI_CLOCK_OBJECT_ID$1,AGGREGATOR_V2="aggregator_v2",AGGREGATOR_V2_EXTEND="aggregator_v2_extend",AGGREGATOR_V2_EXTEND2="aggregator_v2_extend2";function getAggregatorV2PublishedAt(t,e){var n;return e instanceof Map&&(n=e.get(AGGREGATOR_V2))!=null?n:t}function getAggregatorV2ExtendPublishedAt(t,e){var n;return e instanceof Map&&(n=e.get(AGGREGATOR_V2_EXTEND))!=null?n:t}function getAggregatorV2Extend2PublishedAt(t,e){var n;return e instanceof Map&&(n=e.get(AGGREGATOR_V2_EXTEND2))!=null?n:t}__toESM(require_bn());var dealWithFastRouterSwapParamsForMsafe=t=>{var e,n,i;return __spreadProps(__spreadValues({},t),{amountIn:(e=t==null?void 0:t.amountIn)==null?void 0:e.toString(),amountOut:(n=t==null?void 0:t.amountIn)==null?void 0:n.toString(),routes:(i=t==null?void 0:t.routes)==null?void 0:i.map(a=>{var l,f,p;return __spreadProps(__spreadValues({},a),{amountIn:(l=a==null?void 0:a.amountIn)==null?void 0:l.toString(),amountOut:(f=a==null?void 0:a.amountOut)==null?void 0:f.toString(),initialPrice:(p=a==null?void 0:a.initialPrice)==null?void 0:p.toString()})})})};function processEndpoint(t){return t.endsWith("/find_routes")?t.replace("/find_routes",""):t}var import_bn7=__toESM(require_bn()),SDK_VERSION=1000800;function getRouterResult(t,e,n,i,s){return __async(this,null,function*(){let a;if(n.liquidityChanges&&n.liquidityChanges.length>0?a=yield postRouterWithLiquidityChanges(t,n):a=yield getRouter(t,e,n),!a)return null;if(!a.ok){let p=10001;return a.status===429&&(p=10005),{amountIn:ZERO$1,amountOut:ZERO$1,routes:[],byAmountIn:n.byAmountIn,insufficientLiquidity:!1,error:{code:p,msg:getAggregatorServerErrorMessage(p)}}}const l=yield a.json(),f=l.msg==="liquidity is not enough";if(l.msg&&l.msg.indexOf("HoneyPot scam")>-1)return{amountIn:ZERO$1,amountOut:ZERO$1,routes:[],byAmountIn:n.byAmountIn,insufficientLiquidity:f,error:{code:10004,msg:getAggregatorServerErrorMessage(10004)}};if(l.data!=null){console.log("data: ",JSON.stringify(l.data,null,2));const p=parseRouterResponse(l.data,n.byAmountIn);if(i>0&&s!=="0x0")if(n.byAmountIn){const C=p.amountOut.mul(new import_bn7.default(i)).div(new import_bn7.default(1e6));p.overlayFee=Number(C.toString()),p.amountOut=p.amountOut.sub(C)}else{const C=p.amountIn.mul(new import_bn7.default(i)).div(new import_bn7.default(1e6));p.overlayFee=Number(C.toString()),p.amountIn=p.amountIn.add(C)}return p}return{amountIn:ZERO$1,amountOut:ZERO$1,routes:[],insufficientLiquidity:f,byAmountIn:n.byAmountIn,error:{code:10003,msg:getAggregatorServerErrorMessage(10003)}}})}function getRouter(t,e,n){return __async(this,null,function*(){try{const{from:i,target:s,amount:a,byAmountIn:l,depth:f,splitAlgorithm:p,splitFactor:C,splitCount:B,providers:N}=n,le=completionCoin(i),Ee=completionCoin(s);let Ue=`${t}/find_routes?from=${le}&target=${Ee}&amount=${a.toString()}&by_amount_in=${l}`;return f&&(Ue+=`&depth=${f}`),p&&(Ue+=`&split_algorithm=${p}`),C&&(Ue+=`&split_factor=${C}`),B&&(Ue+=`&split_count=${B}`),N&&N.length>0&&(Ue+=`&providers=${N.join(",")}`),e.length>0&&(Ue+=`&apiKey=${e}`),Ue+=`&v=${SDK_VERSION}`,yield fetch(Ue)}catch(i){return console.error(i),null}})}function postRouterWithLiquidityChanges(t,e){return __async(this,null,function*(){const{from:n,target:i,amount:s,byAmountIn:a,depth:l,splitAlgorithm:f,splitFactor:p,splitCount:C,providers:B,liquidityChanges:N}=e,le=completionCoin(n),Ee=completionCoin(i),Ue=`${t}/find_routes`,ze=B==null?void 0:B.join(","),Ze={from:le,target:Ee,amount:Number(s.toString()),by_amount_in:a,depth:l,split_algorithm:f,split_factor:p,split_count:C,providers:ze,liquidity_changes:N.map(Qe=>({pool:Qe.poolID,tick_lower:Qe.ticklower,tick_upper:Qe.tickUpper,delta_liquidity:Qe.deltaLiquidity})),v:SDK_VERSION};try{return yield fetch(Ue,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ze)})}catch(Qe){return console.error("Error:",Qe),null}})}function getDeepbookV3Config(t){return __async(this,null,function*(){const e=`${t}/deepbookv3_config`;try{return(yield fetch(e)).json()}catch(n){return console.error("Error:",n),null}})}var Env=(t=>(t[t.Mainnet=0]="Mainnet",t[t.Testnet=1]="Testnet",t))(Env||{});const vaultsConfigMainnet={...baseConfigMainnet,vaults:{package_id:"0xd3453d9be7e35efe222f78a810bb3af1859fd1600926afced8b4936d825c9a05",published_at:"0x1ed1fef522ccea98a4fbd954543d5019238ec89282fbdea9a753e0a17e96fc28",config:{admin_cap_id:"0x78a42978709c4032fab7b33b782b5bcef64c1c6603250bf23644650b72144375",vaults_manager_id:"0x25b82dd2f5ee486ed1c8af144b89a8931cd9c29dee3a86a1bfe194fdea9d04a6",vaults_pool_handle:"0x9036bcc5aa7fd2cceec1659a6a1082871f45bc400c743f50063363457d1738bd",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0xaabf0856070391df81fad9240049d69c5a51c3d376cc0885eeedd516526cc79b",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}}},frams:peripheryConfigMainnet.frams,aggregator:{endPoint:clmmConfigMainnet.aggregatorUrl+"/find_routes",fullNodeurl:clmmConfigMainnet.fullRpcUrl,walletAddress:clmmConfigMainnet.simulationAccount.address,env:Env.Mainnet,providers:[],pythUrls:[]},clmm_pool:clmmConfigMainnet.clmm_pool,integrate:clmmConfigMainnet.integrate},volatileVaultsConfigMainnet={...baseConfigMainnet,env:"mainnet",aggregatorUrl:clmmConfigMainnet.aggregatorUrl,providers:[],vaults:{package_id:"0xc4ebf35be1478318d78c324342854dd2735a036139373a9d41a1aa3a46a01d05",published_at:"0xc4ebf35be1478318d78c324342854dd2735a036139373a9d41a1aa3a46a01d05",configs:{registry_id:"0x23014734280164270fa4c58f973c00079651e730d6f46491678ea8858f3bd13a",pools_handle:"0x31c810b6fcf3bb8699384e7c61fe9f7db53a04c4c22d514b3f79b6caa86183a8",pyth_oracle_id:"0xaed73fd854dfceedb2522903feec8c0e251764f5945bd38f969473024c4fb4d0",oracle_infos_handle:"0x6951ab4b36639e79ddbd9ba4478d7f72d1c5396b9198d0864c00e796c5815b01",prices_handle:"0x20a65a0f747f4f1ad465bdb61d784bbc5080ee5d200d5dd6594a354723b8c171",global_config_id:"0x5f8371674cd8e1e9eef5542ffe8adb339e3ff3a67894b14c954c7a92e992e0c1"},clmm_configs:{global_config_id:"0xdaa46292632c3c4d8f31f23ea0f9b36a28ff3677e9684980e4438403a67a3d8f",global_vault_id:"0xce7bceef26d3ad1f6d9b6f13a953f053e6ed3ca77907516481ce99ae8e588f2b"},pyth_configs:{pyth_state_id:"0x1f9310238ee9298fb703c3419030b35b22bb1cc37113e3bb5007c99aec79e5b8",hermes_service_urls:{primary:"https://cetus-pythnet-a648.mainnet.pythnet.rpcpool.com",secondary:"https://hermes.pyth.network"},wormhole_state_id:"0xaeab97f96cf9877fee2883315d459552b2b921edc16d7ceac6eab944dd88919c",pyth_package_id:"0x04e20ddf36af412a4096f9014f4a565af9e812db9a05cc40254846cf6ed0ad91",pyth_published_at:"0x04e20ddf36af412a4096f9014f4a565af9e812db9a05cc40254846cf6ed0ad91"}}},xCetusConfigMainnet={...baseConfigMainnet,xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"}},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",config:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"}},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"}},baseConfigTestnet={fullRpcUrl:"https://fullnode.testnet.sui.io",simulationAccount:{address:"0x326ce9894f08dcaa337fa232641cc34db957aec9ff6614c1186bc9a7508df0bb"}},clmmConfigTestnet={...baseConfigTestnet,cetus_config:{package_id:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",published_at:"0xf5ff7d5ba73b581bca6b4b9fa0049cd320360abd154b809f8700a8fd3cfaf7ca",version:void 0,config:{coin_list_id:"0x257eb2ba592a5480bba0a97d05338fab17cc3283f8df6998a0e12e4ab9b84478",launchpad_pools_id:"0xdc3a7bd66a6dcff73c77c866e87d73826e446e9171f34e1c1b656377314f94da",clmm_pools_id:"0x26c85500f5dd2983bf35123918a144de24e18936d0b234ef2b49fbb2d3d6307d",admin_cap_id:"0x1a496f6c67668eb2c27c99e07e1d61754715c1acf86dac45020c886ac601edb8",global_config_id:"0xe1f3db327e75f7ec30585fa52241edf66f7e359ef550b533f89aa1528dd1be52",coin_list_handle:"0x3204350fc603609c91675e07b8f9ac0999b9607d83845086321fca7f469de235",launchpad_pools_handle:"0xae67ff87c34aceea4d28107f9c6c62e297a111e9f8e70b9abbc2f4c9f5ec20fd",clmm_pools_handle:"0xd28736923703342b4752f5ed8c2f2a5c0cb2336c30e1fed42b387234ce8408ec"}},clmm_pool:{package_id:"0x0c7ae833c220aa73a3643a0d508afa4ac5d50d97312ea4584e35f9eb21b9df12",published_at:"0x85e61285a10efc6602ab00df70a0c06357c384ef4c5633ecf73016df1500c704",version:0,config:{pools_id:"0x50eb61dd5928cec5ea04711a2e9b72e5237e79e9fbcd2ce3d5469dc8708e0ee2",global_config_id:"0x9774e359588ead122af1c7e7f64e14ade261cfeecdb5d0eb4a5b3b4c8ab8bd3e",admin_cap_id:"0xd0accadc3d0b27f0cfaebe8e546968ac7874b9a9f5964669b4c9a7e1dcf80a28",global_vault_id:"0xf78d2ee3c312f298882cb680695e5e8c81b1d441a646caccc058006c2851ddea"}},integrate:{package_id:"0x2918cf39850de6d5d94d8196dc878c8c722cd79db659318e00bff57fbb4e2ede",published_at:"0x19dd42e05fa6c9988a60d30686ee3feb776672b5547e328d6dab16563da65293",version:void 0,config:void 0},deepbook:{package_id:"",published_at:"",version:void 0,config:void 0},deepbook_endpoint_v2:{package_id:"",published_at:"",version:void 0,config:void 0},aggregatorUrl:"https://api-sui.devcetus.com/router_v2"},burnConfigTestnet={...baseConfigTestnet,burn:{package_id:"0x3b494006831b046481c8046910106e2dfbe0d1fa9bc01e41783fb3ff6534ed3a",published_at:"0xaf89f8215c5b07eaac8b77c7745ce62f94cb76ef4bcb854e283f644c519ef43e",manager_id:"0xd04529ef15b7dad6699ee905daca0698858cab49724b2b2a1fc6b1ebc5e474ef",clmm_global_config:"0x9774e359588ead122af1c7e7f64e14ade261cfeecdb5d0eb4a5b3b4c8ab8bd3e",clmm_global_vault_id:"0xf78d2ee3c312f298882cb680695e5e8c81b1d441a646caccc058006c2851ddea",burn_pool_handle:"0x20262dac8853ab8f63c98e0b17bfb1c758efc33d0092ac3c5f204dfb7ba81ac5"}},peripheryConfigTestnet={...baseConfigTestnet,xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",config:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"}},frams:{package_id:"0xcc38686ca84d1dca949b6966dcdb66b698b58a4bba247d8db4d6a3a1dbeca26e",published_at:"0xcc38686ca84d1dca949b6966dcdb66b698b58a4bba247d8db4d6a3a1dbeca26e",config:{global_config_id:"0x499132a4baf342a0fe9528a3666a77b2aece3be129f4a3ada469fef4b9c34fb4",rewarder_manager_id:"0x960c7800e301fd1e47b79037927b426db57b643bd2934f7069d81c2dae092230",rewarder_manager_handle:"0x1274149371876b60742cd02071a09f2aa72ffee75b76fdfc45724d98f18ea5b5",admin_cap_id:"0x110175e641c1ea8f9287f4fd59cb6a1fb97a3f3ec595aa30d0e6ed93ac4caa0c"}},dca:{package_id:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",published_at:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",config:{admin_cap_id:"0xf54334a5cf41874d151cc610f7575f2b9ca8aab32103be3ed87f07f73388dcf2",global_config_id:"0xdac150723df0b51c1407ea942036d7f9d4e3b064ff35a4136dd31ffb397497e0",indexer_id:"0xacd0ab94883a8785c5258388618b6252f0c2e9384b23f91fc23f6c8ef44d445c",user_indexer_id:"0xc4ca05342746468383922650a3137bd3efc49d4c7a37431ed11a94c08dbfb677",in_coin_whitelist_id:"0xe72cdb8a0777bbcb5105b7045b90f5fdc8c7b946d48fd4cec0607d201a45a9b7",out_coin_whitelist_id:"0xbe67538ca0e4683fef704b374d034f5a4f79cdc756ea47cec82df55b37d4ff0a"}},token_faucet:{package_id:"",published_at:""},xtoken:{package_id:"",published_at:"",config:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""}},xtoken_dividends:{package_id:"",published_at:"",config:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""}},launchpad:{package_id:"",published_at:"",config:{pools_id:"",admin_cap_id:"",config_cap_id:""}},ido:{package_id:"",published_at:"",config:{pools_id:"",admin_cap_id:"",package_version_id:""}},booster:{package_id:"",published_at:"",config:{booster_config_id:"",booster_pool_handle:""}},liquidity_stratefy:{package_id:"",published_at:"",config:{master_manger_id:"",master_liquidity_handle:""}},maker_bonus:{package_id:"",published_at:"",config:{maker_config_id:"",maker_pool_handle:""}},vaults:{package_id:"",published_at:"",config:{admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:"",haedal:{package_id:"",published_at:"",version:1,config:{staking_id:"",coin_type:""}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:""}},aftermath:{package_id:"",published_at:"",version:1,config:{staked_sui_vault:"",referral_vault:"",safe:"",validator_address:"",coin_type:"::afsui::AFSUI"}}}}},TestnetTokens={SUI:{decimals:9,name:"Sui",symbol:"SUI",description:"",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",id:"0x587c29de216efd4219573e08a1f6964d4fa7cb714518c2c8a0f29abfa264327d",coin_type:"0x2::sui::SUI",is_verified:!0},CETUS:{decimals:9,name:"Cetus Token",symbol:"CETUS",description:"CETUS is the native token of Cetus Protocol.",logo_url:"https://uxcdefo3r2uemooidt2kk2stykakvwd2m6nasg5lhbfaxemm4i3a.arweave.net/pcQyFduOqEY5yBz0pWpTwoCq2HpnmgkbqzhKC5GM4jY",id:"0xf5dd74cd76c4bb4b0c6ac1b1388982a64f2cd089278d453e2067038fe50cbc1d",coin_type:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7::cetus::CETUS",is_verified:!0},xCETUS:{coin_type:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966::xcetus::XCETUS",decimals:9,description:"",name:"Cetus Escrowed Token",symbol:"xCETUS",logo_url:"https://7rgiihm5sisgewirofazpjddkpvmlwphumcg5lulriu6okgf5krq.arweave.net/_EyEHZ2SJGJZEXFBl6RjU-rF2eejBG6ui4op5yjF6qM",is_verified:!0},USDC:{coin_type:"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC",decimals:6,description:"",name:"USD Coin",symbol:"USDC",logo_url:"https://archive.cetus.zone/assets/image/sui/usdc.png",is_verified:!0}},TestnetCreatePoolQuoteTokens=["0x2::sui::SUI","0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::cetus::CETUS"],vaultsConfigTestnet={...baseConfigTestnet,vaults:{package_id:"",published_at:""},frams:peripheryConfigTestnet.frams,aggregator:{endPoint:clmmConfigTestnet.aggregatorUrl,fullNodeurl:clmmConfigTestnet.fullRpcUrl,walletAddress:clmmConfigTestnet.simulationAccount.address,env:Env.Mainnet},clmm_pool:clmmConfigTestnet.clmm_pool,integrate:clmmConfigTestnet.integrate},volatileVaultsConfigTestnet={...baseConfigTestnet,env:"testnet",aggregatorUrl:clmmConfigTestnet.aggregatorUrl,providers:[],vaults:{package_id:"0x0a624f2dcafc9f7f381684b3d553a9837411925b6e8530b1f8f4e6ff3f1fde77",published_at:"0x36f9d8e6219e6ba4d8840165ec27676a1bcb43fc5712f87ca702ac7b5924507d",configs:{registry_id:"0xa2ebae3656c5fbdd2473caadfc077cd1780a881759a356f1a5bc0f9fd470adb9",pools_handle:"0x0df305d395f8e0359da0ac5717bc96e0e1da9792684ec8e8f6a20b7ab544f98e",pyth_oracle_id:"0x6c74aec8d4471d9b05f718c467204c9010c450b94a4e40b0b4031a7d6c386337",global_config_id:"0x8969b09cfdd72b1635263b569027ded4b91bbabd7d8cd91b21e355325e218b10",oracle_infos_handle:"0x8707c6665d202f277ffe8e7fd58684e232622a3e6826b94ba99f7569f253fa9d",prices_handle:"0x74230bb2c6a63235acbfe477ce16144afca7ccd16a458fa93f4605330b5d1c58"},clmm_configs:{global_config_id:"0x9774e359588ead122af1c7e7f64e14ade261cfeecdb5d0eb4a5b3b4c8ab8bd3e",global_vault_id:"0xf78d2ee3c312f298882cb680695e5e8c81b1d441a646caccc058006c2851ddea"},pyth_configs:{pyth_state_id:"0x243759059f4c3111179da5878c12f68d612c21a8d54d85edc86164bb18be1c7c",wormhole_state_id:"0x31358d198147da50db32eda2562951d53973a0c0ad5ed738e9b17d88b213d790",hermes_service_urls:{primary:"https://hermes-beta.pyth.network"},pyth_package_id:"0xabf837e98c26087cba0883c0a7a28326b1fa3c5e1e2c5abdb486f9e8f594c837",pyth_published_at:"0xabf837e98c26087cba0883c0a7a28326b1fa3c5e1e2c5abdb486f9e8f594c837"}}},xCetusConfigTestnet={...baseConfigTestnet,xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",config:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"}},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",config:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"}},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"}},envConfigs={mainnet:{env:"mainnet",cetus_clmm_site:"https://v1.cetus.zone",cetus_api:apiUrl||"https://api-sui.cetus.zone",notifi_api:"https://api.notifi.network/gql",pythUrls:["https://cetus-pythnet-a648.mainnet.pythnet.rpcpool.com"],clmm_sdk_options:clmmConfigMainnet,periphery_sdk_options:peripheryConfigMainnet,burn_sdk_options:burnConfigMainnet,sui_coin:MainnetTokens.SUI,cetus_coin:MainnetTokens.CETUS,clmm_swap:{from_coin:MainnetTokens.USDC,to_coin:MainnetTokens.SUI},vaults_sdk_options:vaultsConfigMainnet,xcetus_sdk_options:xCetusConfigMainnet,x_cetus_coin:MainnetTokens.xCETUS,create_pool_quote_coin_list:MainnetCreatePoolQuoteTokens,volatile_vaults_sdk_options:volatileVaultsConfigMainnet},pre:{env:"mainnet",cetus_clmm_site:"https://v1.cetus.zone",cetus_api:"https://api-sui-cloudfront.cetus.zone",notifi_api:"https://api.notifi.network/gql",pythUrls:["https://cetus-pythnet-a648.mainnet.pythnet.rpcpool.com"],clmm_sdk_options:{...clmmConfigMainnet,aggregatorUrl:"https://api-sui-cloudfront.cetus.zone/router_v2"},periphery_sdk_options:peripheryConfigMainnet,burn_sdk_options:burnConfigMainnet,sui_coin:MainnetTokens.SUI,cetus_coin:MainnetTokens.CETUS,clmm_swap:{from_coin:MainnetTokens.USDC,to_coin:MainnetTokens.SUI},vaults_sdk_options:vaultsConfigMainnet,xcetus_sdk_options:xCetusConfigMainnet,x_cetus_coin:MainnetTokens.xCETUS,create_pool_quote_coin_list:MainnetCreatePoolQuoteTokens,volatile_vaults_sdk_options:volatileVaultsConfigMainnet},testnet:{env:"testnet",cetus_clmm_site:"https://cetus-cmm-app-testnet.netlify.app",cetus_api:"https://api-sui.devcetus.com",notifi_api:"https://api.notifi.network/gql",pythUrls:[],clmm_sdk_options:clmmConfigTestnet,periphery_sdk_options:peripheryConfigTestnet,burn_sdk_options:burnConfigTestnet,sui_coin:TestnetTokens.SUI,cetus_coin:TestnetTokens.CETUS,clmm_swap:{from_coin:TestnetTokens.USDC,to_coin:TestnetTokens.SUI},vaults_sdk_options:vaultsConfigTestnet,xcetus_sdk_options:xCetusConfigTestnet,x_cetus_coin:TestnetTokens.xCETUS,create_pool_quote_coin_list:TestnetCreatePoolQuoteTokens,volatile_vaults_sdk_options:volatileVaultsConfigTestnet}},envConfigs$1=envConfigs[APP_ENV],store$a=(t,e)=>({verifiedTokenMap:new Map,setVerifiedTokenMap:n=>{const i=new Map;n==null||n.forEach((s,a)=>{i.set(fixCoinType(a,!1),{...s,coin_type:extractStructTagFromType$2(a).full_address})}),t(()=>({verifiedTokenMap:i})),VariousTokensTable.setItem(VERIFIED_TOKEN_MAP_KEY,i)},setAllTokenMap:n=>{n.forEach((i,s)=>{AllTokensTable.setItem(s,i)})},addToken:n=>{AllTokensTable.setItem(fixCoinType(n.coin_type,!1),{...n,coin_type:extractStructTagFromType$2(n.coin_type).full_address})},deleteToken:n=>{AllTokensTable.removeItem(fixCoinType(n,!1))},addTokenList:n=>{n.forEach(i=>{AllTokensTable.setItem(fixCoinType(i.coin_type,!1),{...i,coin_type:extractStructTagFromType$2(i.coin_type).full_address})})},deleteTokenList(n){n.forEach(i=>{AllTokensTable.removeItem(fixCoinType(i,!1))})},clearTokenMap:()=>{AllTokensTable.clear()}}),useTokenStore=create(store$a);VariousTokensTable.getItem(VERIFIED_TOKEN_MAP_KEY).then(t=>{console.log(" ~ file: token.ts:63 ~ savedTokenMap:",t),t!==null&&useTokenStore.getState().setVerifiedTokenMap(t)});AllTokensTable.getAllItems().then(t=>{console.log(" ~ file: token.ts:69 ~ savedTokenMap:",t),t!==null&&useTokenStore.getState().setAllTokenMap(t)});function useGetTokenSource(){const{importTokenList:t,liquidityTrustTokenList:e}=useTokenSelectStore(),{verifiedTokenMap:n}=useTokenStore();return{getTokenSource:l=>{console.log(" ~ file: useGetTokenSource.ts:8 ~ getTokenSource ~ tokensInfo:",l);const f=[],p=new Set([...Array.from(n.values()).map(C=>C.coin_type),...t.map(C=>C.coin_type)]);console.log(" ~ getTokenSource ~ tokenTypesSet:",p);for(const C of l)p.has(suiAddressLongToShort(add0x(C.coin_type)))||f.push(C);return f},getTrustTokenSource:l=>{const f=[],p=new Set([...Array.from(n.values()).map(C=>C.coin_type),...t.map(C=>C.coin_type),...e.map(C=>C.coin_type)]);for(const C of l)p.has(suiAddressLongToShort(add0x(C.coin_type||(C==null?void 0:C.address)||"")))||f.push(C);return f},getShowCoinTag:l=>{if(fixCoinType(l)===fixCoinType(envConfigs$1.x_cetus_coin.coin_type))return!1;const f=Array.from(new Set([...Array.from(n.values()).map(p=>p.coin_type),...t.map(p=>p.coin_type)]));return!((f==null?void 0:f.length)>0&&(f!=null&&f.includes(suiAddressLongToShort(add0x(l)))))}}}const IconTipsTriangle="/images/token-warning@2x.png",placeholderImg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQKADAAQAAAABAAAAQAAAAABGUUKwAAAQcklEQVR4Ac07C3BUVZb33vfp7nQSgiEhYYYgESEj40oZjERH/MxAnFEGQQYUZILRGix1y3V3q3bZqd2trZpZqram1rJ2tMZZiUGFAURQ4romiALjmlkFB2eGEVyMEAQSEiSQ9O+9fvfuOfe923Q66aQ7dDS3q/vcd9+553fPOffzXlMyxqX4hc1Vls9p4Iao5nm8Mp5HSoSfmsIUGjcJRfbMIoJa1CFRbhlh2k3CrJ3F6EG/rTWee3DlkbEUUQqQawYTX3ppVTxInoxN4rPjVxAfAf0kDwG/WEM4RKGUEiEEQYgF0ITxJY2ZPfSwHiJPnV+9etMQ3S6rKWcGmPTcq+XWxOhzVhlfGJ8oQGkoSlnFJcUAAlSk8EHoort1bPMaXGN5lzoao5O1muf9a3vW3nvGRbq8XyXaqKlMebG5IpTXtzF6JZ/PfYINSyjFADDUoCA0eiN+SVvXINIuKKF3qQzKLMr9x9n+YLig/vSPF3UMy3OEm6M2ALgqLd6y5fnwVXyNCJChFZcKU2GcoyGtlx6FuD7MYuQDjemHhNC7mLggR5HTCeWUxic7JD6HG6QGDDmbTxSzrCtEELRPKyOLEB74jDWdu+++hyFslJlGUHng7bTEB6INvPrGC6/O65tmt1iTeKGKWxfDGy7OhL+Tduq9ZLMZ9j19uuGekwMpZHY1pfG1qVZe7Il4EV8ZLSNlYGZgIK3qEXDrZje5GOgw67oevPd3mVG+hJW1AUpf3vpI+GrxjAOj7qmrIpZQhwr/CdbG+sz67tWLj11ic/m1kpden8ELrI2RabyWaIO9QkNv+D/9sbMPLPtVNtyyMsDkra809s8iawjjXj9lAhjxk+TTYLdY1bFm+cFsBMgWt6JpW3WomG6KVpCZhCg5XCqUMBE8Qpq6VvyoIVO6GRmg+oAwvji9sy00zalWKrsMBPF1sW69kzzU9eNlzZkyzQXelM2vLbImORtik3mJoqeCw39CO1gxZUntwbnUVvfSwRENgMp39OzoiJWJsgFZG5JO8BjdfWbpkrp0xL+K9sk7drZEruILYDZxZ0/PCj7IQRXFSytGMsLQ2TtJ8tOnX2+zy2kZo5CBgAdCZjNR8Alb/3Urj2J2wQAUHNHWs7gGczBmSfxlxC6jZadA9iRVhqwOa4CpW3c1RqeRalRcKg+E9X5m5x81lp1acc9Ph6T4NTSiLPlH2TI9BEMDJlDyxipI9dStzY3DiZQ2BK78TfMjfVXiWYHUvKKHme1v1+Z0PPCDP6u28QQrXn7zmmilcyieB6sJKFJwUAA85NHj99815OwwpAfM2PLmvHCleAbmeHR86VK6o4n8z/X7xqvyqDDKhjKirDIc0HOhhKc7z6BOiJNaBhkAV3jhUtEiTMZcV5ImEAXt+vr2Vd/fkUpgvF2jjCgrGEAagaED+xiTOmGiTCmDGiq3v7khdBVpkHjeOj3vBG39/J7v5yTbz9y2pyZO4/cIH68RGisV1PEJjerUZr3MEqepTd+JGUUvnlp647kUWbO6nL7rv1vC3+QLZRzgzAAl2E4b25f94CH3yv0dYICq37Rd2VfZ+5ljgNdjQeP10O4TC+4sddFH94tTae/J1v+0J4il9kRRgHbFkroXSuyLOBG+bnbcd8H4+6Mr7tjmYmf/O233W2djk0SJUpLGCJ/YUTD98PLvdChqA0IgHux/QRiUuRMJ/moi0E0HWEx1zBRevW33yp7w7guRaaTeLiIFFBwTJ2z5wRjFD0L4qqkWJKDWZDK972p7y1Vv7P4thmWm/JLxUHYIBJnHZS6HsI75IxuTcRKEv/Xq/vL+qdEvhA7B42H4z7Kjn935varkDtnUZ2/f+9cXKuxfEH1oBbw1S2K3m0obhUOcwBn6x2N3LfiL1PuZXF/91ttHwiV8lsJlccLzv/B/85N755/BtoQHCM1+juhgepnzYfS5JvIuslWqY7Zw1ta9t/dNc35BNfR0dy7BnS3W5Q4XR9yrJzzOa8PEJZOXB2EneO23tu/5WbYyIL4fdGACZgVcwCE/g8El6OqVhAGsK8hC5YoI8zq1tj8uv2NUGxt0WV4qXgd+lKEFgB5+UQAFk+uJ+x4u9pFf7IF1+MRK2d8oobOBqAPqInl44WaDroqGNMC1r7y3igeZLyEc7OeDjlmvkLKF1726/x/sQoz3S/GtaCPUYESCZ/S2CZ/7/nLSZ+bcwuPaT/292peEo0uC4wNMrmMbDwr/ddvfW56tLIjvt7QHkSfSQWM6Qeq79pV90rt1RIDT2ielc4KzYsz5e1nnR4tvGvV+PjaBPCGVl2kes72XaoA4A+MWHGf1Hy+/5SXk7RX0tH+dtWffWasIsrbKTIAv6ygUFJg6lwDIelb4eOktn1a17uu0ilm5O9OAQfPok0Brk/SAeFDMxpjDDI3QF9ZfRoajKTVv/2+xU0QnSWvLpQjGM9JF21OS36ntTFE+wSZw3vgXxFOeI3uAPAjx42gkkcwSnTKs+EJsM+YepIPQBp2xK6vefqDKKdB8ig06qBHW/yNDuoPQ7Ivxh3HIL9FT4sOkaml81qKb07qxYeu70BM176PqCGVd6P2DGGbYYEZ9T+O0rsKAg86oOxOG1QCjLnMk+r+vn4U+vL/mZIZ0B6E5wfxfFp7QH8w/pW0PnGPHjQizlQK+C/TYKxQegKQpIo/f7I4QIKD7w0gpKHMHZ6fSdB2xGXUy+2kIB0Z6GAdgOA260Fk1k5GPvAQxI9rREakNg/CHuutCcLvJ+0rM2uYDVZbD7xe287FsSPNj+cXPpHAw3ljQj2BGkRCMKLSY9m9pumbUjLo5QQ6nWi59WPNU67DyqyTczTJyrozTP2VELQuktkVz8fHWPw/XZe6uD/89VMwrKYehUVkQvQCFBeg/T08eWHbD74ejMdI9nWuHIQNUKzyui0omfLRERSlaH7aSHyqErwreuPPAP0ZK+V8BfxmK0k1lunIj1rA1J9hv/PBy5dFs9gHqqkKSmFqJDkskHzapAiIcUvWvAtb810cbw6V8NSjtPtrA0XcdUoYkCCzyusnj7y29ftjwyURWqZsAD1PIBjV1ouHy1ysQb36f2aUuxxLiarHmrY/ejxTzeaiwikulPPLW4owHv6SPv7/4+iFPc7KVD3ULEczBrsaCMU2nGuiPqwNsBuubNC43CbJhDH/mtfz+gFVMr8cHWirmVcJDqEdppKBPq9t393W/zZUYqFtykoVzCKpj4kOGsiiYK45p6Nz8xh/+KTTRcZXH0fDYq4QX6NU+KY36bty1uKovDYlRN8NaAAzudsddtq7B4yzHSwIogBXVy+H2qJfBmUhm5Yu/w5GQkqDRPYnAE/D8YdP/3HXt6kzoZIuDulEShwnV7QkPuCAK4hT0dz/SPQxtcraEs8G/tfmTRTzA8uQuD4yQgFDP+5K1jJXyKCMF3dwlPww18NMc5jDmUAsb5VeGA5+TjUJZ4zJxp4x7GAU5JXnQtDWrvG723VnTy6KDcPgceeokp0IIhjixdCPOuh2Bz+HBQvDljN6QBc2sUSHpTlErT+yssr8ZoYeGWyZnzWiIDtSgNW4SdG/qFu1msPBp12Dk8St3gxr99hB9c9hE8y+FnAo95K3hEnpMC+yEZrte5+qqC61d17h2kApxB3LG0eAmHfWWMxPpNc4+CPSTShcXfQ4zEmRjTrN+uSETfsk43NRmUbkQcqcBqfvC5s+r+kvif5ZPVyU2FfkX6bTWuhmj3hEmMx0v9YUtx6b2F/ATcpTdmUfk9xjXsNZF04+YMRZTbgnOAZMRe2K8CJ4rOVAn1E3paVoshrrLIzHDZocdgyd2SY5JVgLjv80Vc0Xn7uaeb0Ty+xJr+ksB4GIELO3h5rqK1xR+LiHqJDdZEHH4cp5hk8NIH3aHcAji6E956UhOTXaAlv3w3ZMz8F4uC2fRYNwniuM+Ir+2V0eIXzgLxUVYzgvqYvnhHQdQ3D0Wg2M/x3wKGUkDvFE3dZNhURkGOE3gCVGc8425lqQACMqZBgRBYSQvD8qFiStOrtkSC3RJuD8EAaw5YqgzMpIGwIrfYq3JAsX8tPaultOJsECcyy4+d/GT7sEIYdpls0glgDrYAVarpj+EvhhtVXgJA5j+wFo4O4fXrnBssBmSoc6llRRyLiCuAlUiSoW5oJ9KQ+qAp2rg2cgbpmFu8sBahZcwwI75JWf8UbbftZTrnpaPzry35dQihXz50Jd40qP4KIgCqofSl8/HpYCyW342UxkaBxZ13HFnSWLLnzAAdvH7J9aDD3DVAb0garINuRII0q2Me3c0UBzwNsw53ifXISBlT4w+GJhrHHVM1sddEiW1LNl9dkPY7zRgEwSBPCvIg/yw87uT65LQRl39kRBpAz2Xe4Ele7paIj6ReAaIAgcirHHngtKHkoUfZAA8qlq8r7vX1gS8BwyzBsQNPOEUeRG2fvv3Jo2bN8OSlUitL3u75+chP193aXULD4UdevH1W0uKcJmXjD8gBPAGIgRsrQ4e6cN7GuieYAU4R4yYfN2Kd3qWJncej3WUMWqKdTiVQyaTwQWvFnPUKVV5lH+QAbBx64Li3wUd/TGNum9byVgFN4jpbMuqt/uuQZzxWFA2lBFHEZWXD9YpE/mO+RjqNJTMQxoAEbfcfsWvIPabXC9w05QD/2CJmM6h8egJK945vzRsxA/BatJQSRZlRx223F6U9lR5UA5ItdLydy8ciGnePgGxMSdAbsxztPWbbyscFzlh5d6LPw8zZx2Kliw//IHl4LZbJ8xNbkutp/UAhVh0W2Gtj7NOdClpWeQB8RXWxLqVe/taFN7XBVEGlAWHRYYqyIfQz7XOovmFtSPJNcBi6ZB/IoTRv7+/LUrEwKUxuILBRXfAMR9q+q6/OV3/sWhfs+fioohGNsCj5xJFHyMfj/gDVDsYvCWv9tc0B6/LK+IIH9jb3xhjdA3HA3VZcEYBzwC+JiefGpyu2nhHcFTvFbn0Rv6tfydU7TC6KcbETJyyB/TA0OS06cXbgg0D2oe5GEhgGER1a827oUcijDwjX+fBcPCOtLz7wk9oW4Hhr3/2JprTZwuPvi9m9NmRjVFCwK09xV37SxEglnlAkMeabg+mTXhKh2SYtQGw88PvWfMijtNiC1KYbADwBLlwwreMDSE6dUI3BwK+p5+toaM6Xnv0AzE1EoE/TRGyEly9LHXE0d3R7eFU52JA0+qe/4455FSXrHBqfVQGQCIoTMN+6/kYERASQ68nJDNYWIEhQhoRR+H57580h3zo9xuHoE9XXpDITUk4RMpjlEymUXsOvAd0A4TYtx1CZ8UJHNenunmSBvBUk8PuoqlxvvnV/m0uSQbyxGFR0X8uvjFGyHzO4eB5mKJGDKEsKRGEM436N+lQZJTHg4fhHwL2Fxbr9U/Pph1D4WbaNmoPSGXwk/2inAvnOYuLhfAA2of3lcCeuoMzhooZhLIDYKo2t2XArw7vSxqEtsLjtLW/nk+l9wxAGMVFzgyQzPvRNrHKtvmTNiezwZV96dx4JAPBcgPCR8R0Sg6bJnvq2Vqa+wOaZMHHov74+6LKiZMGSGTVEPeV4P0lkMNNgBrMJHIAIG7gRRV4c0EQS6OkG1rbIbEd1HTS+Mub6JGxkEvR/H/1GixGG+ou8QAAAABJRU5ErkJggg==";function SingleCoinImage(t){const{coinType:e,variant:n,imageUrl:i,w:s,h:a,p:l,showTag:f=!0,showTagWidth:p,showTagHeight:C,borderColor:B,imageStyle:N={},imgBoxStyle:le={},...Ee}=t,Ue=reactExports.useMemo(()=>{const wt={default:{box:{border:"none",w:s||"32px",h:a||"32px"}},border:{box:{bg:"checked_bg",border:"1px",borderColor:B||"border",borderRadius:"100%",w:s||"46px",h:s||"46px",p:l||"5px"}}};return n?wt[n]:wt.default},[n,s,B,l]),{getShowCoinTag:ze}=useGetTokenSource(),{importTokenList:Ze}=useTokenSelectStore(),{verifiedTokenMap:Qe}=useTokenStore(),ct=reactExports.useMemo(()=>e&&(Qe==null?void 0:Qe.size)>0?ze(e):!1,[e,Qe,Ze]);return jsxRuntimeExports.jsxs(Flex,{display:"flex",position:"relative",children:[jsxRuntimeExports.jsx(Center,{...Ue.box,...le,...Ee,children:jsxRuntimeExports.jsx(Image$1,{decoding:"async",src:i,fallbackSrc:placeholderImg,borderRadius:"100%",w:"100%",h:"100%",...N,minW:N.w||"unset",minH:N.h||"unset"},i)}),ct&&f&&jsxRuntimeExports.jsx(Image$1,{decoding:"async",src:IconTipsTriangle,fallbackSrc:placeholderImg,w:p||"16px",h:C||"16px",right:n==="border"?"1px":"-3px",style:{position:"absolute",bottom:"0px"}})]})}function CoinPairImage(t){const{coinAIconUrl:e,coinBIconUrl:n,coinACoinType:i,coinBCoinType:s,ml:a,showATag:l,showBTag:f,...p}=t;return jsxRuntimeExports.jsxs(HStack,{gap:"0px",children:[jsxRuntimeExports.jsx(SingleCoinImage,{imageUrl:e,...p,showTag:l,coinType:i}),jsxRuntimeExports.jsx(SingleCoinImage,{imageUrl:n,...p,ml:a||"0px",showTag:f,coinType:s})]})}const formatCurrency=t=>{try{return t.startsWith("-")?`-$${t.slice(1)}`:`$${t}`}catch(e){return console.log(" ~ formatCurrency ~ error:",e),"$--"}};function Comma({value:t,currency:e}){const n=(e?formatCurrency(t+""):t)+"",i=(n+"").indexOf("$"),s=i>-1?(addComma(n.slice(i+1))+"").split(","):(addComma(n)+"").split(","),a=s.length;return jsxRuntimeExports.jsxs(Box,{as:"span",children:[i>-1&&n.slice(0,i+1),s.map((l,f)=>jsxRuntimeExports.jsxs(Box,{as:"span",children:[l,f<a-1&&jsxRuntimeExports.jsx(Box,{as:"span",className:"delimiter",children:","})]},`${l}-${f}`))]})}const TextWrap=({children:t,haveTooltip:e=!0,...n})=>{const i=reactExports.useRef(null),[s,a]=reactExports.useState(!1),l=()=>{const p=i.current;p&&p.scrollWidth>p.clientWidth?a(!0):a(!1)},{isApp:f}=useWindowWidth();return jsxRuntimeExports.jsx(Box,{w:"100%",onClick:p=>cancelBubble(p),children:f?jsxRuntimeExports.jsx(Text$1,{w:"100%",fontSize:"14px",color:"text_caption",fontWeight:"500",whiteSpace:"wrap",wordBreak:"break-all",textAlign:"right",...n,children:t}):s&&e?jsxRuntimeExports.jsx(Tooltip,{placement:"top",label:jsxRuntimeExports.jsx(Text$1,{fontSize:"14px",color:"text_caption",fontWeight:"500",children:t}),children:jsxRuntimeExports.jsx(Text$1,{w:"100%",fontSize:"14px",color:"text_caption",fontWeight:"500",ref:i,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",onMouseLeave:()=>a(!1),tabIndex:0,...n,children:t})}):jsxRuntimeExports.jsx(Text$1,{w:"100%",fontSize:"14px",color:"text_caption",fontWeight:"500",ref:i,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",onMouseEnter:l,tabIndex:0,...n,children:t})})},SingleTokenInfoSkeleton=()=>jsxRuntimeExports.jsxs(HStack,{gap:"4px",align:"center",children:[jsxRuntimeExports.jsx(SkeletonCircle,{size:"9"}),jsxRuntimeExports.jsxs(VStack,{gap:"4px",align:"flex-start",children:[jsxRuntimeExports.jsx(Skeleton,{}),jsxRuntimeExports.jsx(Skeleton,{w:"130px"})]})]}),SingleTokenInfoH5=({data:t})=>{const{loading:e,imageUrl:n,symbol:i,name:s}=t;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e?jsxRuntimeExports.jsx(SingleTokenInfoSkeleton,{}):jsxRuntimeExports.jsxs(HStack,{w:"100%",children:[jsxRuntimeExports.jsx(SingleCoinImage,{imageUrl:n,w:"24px",h:"24px"}),jsxRuntimeExports.jsxs(VStack,{align:"flex-start",gap:{md:"0",lg:"0.5rem"},children:[jsxRuntimeExports.jsx(Text$1,{color:"text_caption",children:i}),jsxRuntimeExports.jsx(Text$1,{fontSize:"12px",children:s})]})]})})},DoubleTokenInfoSkeleton=()=>jsxRuntimeExports.jsxs(HStack,{gap:"4px",align:"center",children:[jsxRuntimeExports.jsx(SkeletonCircle,{size:"9"}),jsxRuntimeExports.jsx(Box,{ml:"-8px",children:jsxRuntimeExports.jsx(SkeletonCircle,{size:"9"})}),jsxRuntimeExports.jsxs(VStack,{gap:"4px",align:"flex-start",children:[jsxRuntimeExports.jsx(Skeleton,{}),jsxRuntimeExports.jsx(Skeleton,{w:"60px"})]})]}),PairTokenInfo=({data:t,fee:e,loading:n})=>{var i,s,a,l;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n?jsxRuntimeExports.jsx(DoubleTokenInfoSkeleton,{}):jsxRuntimeExports.jsxs(HStack,{gap:"0px",w:"100%",children:[jsxRuntimeExports.jsx(CoinPairImage,{w:"40px",variant:"border",coinAIconUrl:(i=t[0])==null?void 0:i.imageUrl,coinBIconUrl:(s=t[1])==null?void 0:s.imageUrl}),jsxRuntimeExports.jsx(VStack,{gap:"0px",ml:"8px",align:"flex-start",children:jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(TextWrap,{color:"text_caption",children:(a=t[0])==null?void 0:a.symbol}),jsxRuntimeExports.jsx(Text$1,{color:"text_caption",children:"-"}),jsxRuntimeExports.jsx(TextWrap,{color:"text_caption",children:(l=t[1])==null?void 0:l.symbol})]})})]})})};var HandleEventType=(t=>(t.Add="add",t.Edit="edit",t.Delete="delete",t))(HandleEventType||{}),H5MapTableCells=(t=>(t.Regular="regular",t.Double="double",t.Divider="divider",t.Action="action",t.Cos="cos",t))(H5MapTableCells||{}),TitleEnum=(t=>(t.SingleToken="SingleToken",t.ST="ST",t.DoubleToken="DoubleToken",t.DT="DT",t))(TitleEnum||{});const handleElement=({value:t})=>{let e,n;if(reactExports.isValidElement(t)||typeof t=="string"||typeof t=="number")e=t;else if(typeof t=="function")e=t();else if(typeof t=="object"&&t!==null){const{text:i,render:s}=t;if("color"in t&&(n=t.color),i)e=i;else if(s)e=handleElement({value:s});else throw new Error("You must select one of text or render to assign a valid value.")}else throw new Error("A valid value is required here.");return[e,n]},renderNode=t=>handleElement({value:t})[0];function transColumns2H5(t,e,n){return t.map(i=>({type:H5MapTableCells.Cos,label:i.title,showLabel:i==null?void 0:i.showLabel,key:i.key,hidden:i.hidden?typeof i.hidden=="function"?i.hidden(e):i.hidden:!1,value:typeof i.render=="function"?i.render(e,n):i.render||e[i.key]}))}const Regular=({value:t,...e})=>{let n="text_caption";"color"in e&&(n=e.color);const[i,s]=handleElement({value:t});return n=s||n,jsxRuntimeExports.jsx(Text$1,{color:n,children:i})},Action=({value:t,onChange:e,btn:n,...i})=>{if(!t){const{text:f,color:p="primary",bg_color:C="bg_secondary"}=n;return jsxRuntimeExports.jsx(Button$1,{w:"60px",h:"20px",borderRadius:"4px",color:p,bgColor:C,size:"xs",onClick:(...B)=>e==null?void 0:e(HandleEventType.Add,...B),children:f})}let s="text_caption";"color"in i&&(s=i.color||s);const[a,l]=handleElement({value:t});return s=l||s,jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(Text$1,{color:s,children:a}),jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_edit",onClick:(...f)=>e==null?void 0:e(HandleEventType.Edit,...f)}),jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",onClick:(...f)=>e==null?void 0:e(HandleEventType.Delete,...f)})]})},Divider=({value:t})=>{let e="text_caption",n="text_paragraph";const[i,s]=handleElement({value:t[0]}),[a,l]=handleElement({value:t[1]});return e=s||e,n=l||n,jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(Text$1,{color:e,children:i}),jsxRuntimeExports.jsxs(Text$1,{color:n,children:["/ ",a]})]})},Double=({value:t,onChange:e})=>{var p;let n="text_caption",i="text_paragraph";const[s,a]=handleElement({value:t[0]}),[l,f]=handleElement({value:t[1]});return n=a||n,i=f||i,jsxRuntimeExports.jsxs(VStack,{gap:"0.2em",alignItems:"flex-end",children:[jsxRuntimeExports.jsxs(HStack,{h:"12px",children:[jsxRuntimeExports.jsx(Text$1,{color:n,children:s}),typeof t[0]=="object"&&((p=t[0])==null?void 0:p.editable)&&jsxRuntimeExports.jsx(Icon,{onClick:(...C)=>e==null?void 0:e(HandleEventType.Edit,...C),xlinkHref:"#icon-icon_edit"})]}),jsxRuntimeExports.jsx(Text$1,{h:"12px",color:i,children:l})]})},Cos=({value:t})=>typeof t=="function"?t():jsxRuntimeExports.jsx(Box,{fontFamily:"Inter",fontSize:"14px",color:"text_caption",children:t});function useTextColor({isLong:t}){const e=reactExports.useMemo(()=>t?"primary":"primary_red",[t]),n=reactExports.useMemo(()=>t?"primary_opacity.10":"primary_red_opacity.10",[t]);return{color:e,bg:n}}const ItemsMap={[H5MapTableCells.Regular]:Regular,[H5MapTableCells.Action]:Action,[H5MapTableCells.Divider]:Divider,[H5MapTableCells.Double]:Double,[H5MapTableCells.Cos]:Cos},TitleMap={[TitleEnum.SingleToken]:SingleTokenInfoH5,[TitleEnum.ST]:SingleTokenInfoH5,[TitleEnum.DoubleToken]:PairTokenInfo,[TitleEnum.DT]:PairTokenInfo},Title=({data:t})=>{if(!t)return null;const{type:e,...n}=t,i=TitleMap[e];return jsxRuntimeExports.jsx(i,{...n})},Bottom=({data:t})=>{if(typeof t=="function")return t();if(reactExports.isValidElement(t))return t;if(typeof t=="object"&&(t!=null&&t.data)&&Array.isArray(t==null?void 0:t.data)){const{style:e,data:n}=t;return jsxRuntimeExports.jsx(HStack,{w:"100%",justifyContent:"space-between",...e,children:n.map(i=>{const{text:s,render:a,...l}=i;return jsxRuntimeExports.jsx(Button$1,{...l,children:renderNode({text:s,render:a})},i.key||i.text)})})}if(typeof t=="object"){const{text:e,render:n,...i}=t;return jsxRuntimeExports.jsx(Button$1,{...i,children:renderNode({text:e,render:n})})}return null};function H5MapTableItem({data:t,children:e,loading:n,skeletonLength:i=5,itemHeight:s="40px",style:a,title:l,bottom:f,onClick:p}){const C=new Array(i).fill(0);return jsxRuntimeExports.jsxs(VStack,{gap:"0.5em",...a,onClick:p,children:[e,jsxRuntimeExports.jsx(Title,{data:l}),n?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:C==null?void 0:C.map((B,N)=>jsxRuntimeExports.jsxs(HStack,{w:"100%",justifyContent:"space-between",alignItems:"center",flexBasis:s,children:[jsxRuntimeExports.jsx(Skeleton,{h:"16px",flex:"1"}),jsxRuntimeExports.jsx(Skeleton,{h:"16px",flex:"1"})]},N))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:t==null?void 0:t.map(B=>{const{label:N,type:le,key:Ee,showLabel:Ue=!0,hidden:ze=!1,...Ze}=B,Qe=ItemsMap[le];return jsxRuntimeExports.jsx(React$2.Fragment,{children:!ze&&jsxRuntimeExports.jsxs(HStack,{w:"100%",justifyContent:"space-between",alignItems:"center",mt:ze?"-8px":"0",flexBasis:s,children:[Ue&&jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(Box,{children:renderNode(N)}),typeof N=="object"&&(N==null?void 0:N.tooltip)&&jsxRuntimeExports.jsx(Tooltip,{label:renderNode(N==null?void 0:N.tooltip),children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_tips",cursor:"help"})})]}),jsxRuntimeExports.jsx(Qe,{...Ze})]},Ee||(N==null?void 0:N.toString()))},Ee||(N==null?void 0:N.toString()))})}),jsxRuntimeExports.jsx(Bottom,{data:f})]})}const Logo=({name:t,logo:e,multiple:n,isLong:i})=>{const{color:s,bg:a}=useTextColor({isLong:i});return jsxRuntimeExports.jsxs(HStack,{flexBasis:"32px",gap:"8px",children:[jsxRuntimeExports.jsx(Box,{flexBasis:"32px",children:jsxRuntimeExports.jsx(Image$1,{borderRadius:"50%",src:e})}),jsxRuntimeExports.jsxs(VStack,{gap:"2px",alignItems:"flex-start",children:[jsxRuntimeExports.jsx(Text$1,{flexBasis:"14px",color:"text_caption",children:t}),jsxRuntimeExports.jsx(Tag,{flexBasis:"16px",color:s,bgColor:a,children:`${n}x ${i?"Long":"Short"}`})]})]})};H5MapTableItem.Logo=Logo;function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}var SourceType;(function(t){t.event="event",t.props="prop"})(SourceType||(SourceType={}));function noop(){}function memoizeOnce(t){var e,n=void 0;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return e&&i.length===e.length&&i.every(function(a,l){return a===e[l]})||(e=i,n=t.apply(void 0,i)),n}}function charIsNumber(t){return!!(t||"").match(/\d/)}function isNil(t){return t==null}function isNanValue(t){return typeof t=="number"&&isNaN(t)}function isNotValidValue(t){return isNil(t)||isNanValue(t)||typeof t=="number"&&!isFinite(t)}function escapeRegExp(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getThousandsGroupRegex(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function applyThousandSeparator(t,e,n){var i=getThousandsGroupRegex(n),s=t.search(/[1-9]/);return s=s===-1?t.length:s,t.substring(0,s)+t.substring(s,t.length).replace(i,"$1"+e)}function usePersistentCallback(t){var e=reactExports.useRef(t);e.current=t;var n=reactExports.useRef(function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return e.current.apply(e,i)});return n.current}function splitDecimal(t,e){e===void 0&&(e=!0);var n=t[0]==="-",i=n&&e;t=t.replace("-","");var s=t.split("."),a=s[0],l=s[1]||"";return{beforeDecimal:a,afterDecimal:l,hasNegation:n,addNegation:i}}function fixLeadingZero(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),i=n[0].replace(/^0+/,"")||"0",s=n[1]||"";return(e?"-":"")+i+(s?"."+s:"")}function limitToScale(t,e,n){for(var i="",s=n?"0":"",a=0;a<=e-1;a++)i+=t[a]||s;return i}function repeat(t,e){return Array(e+1).join(t)}function toNumericString(t){var e=t+"",n=e[0]==="-"?"-":"";n&&(e=e.substring(1));var i=e.split(/[eE]/g),s=i[0],a=i[1];if(a=Number(a),!a)return n+s;s=s.replace(".","");var l=1+a,f=s.length;return l<0?s="0."+repeat("0",Math.abs(l))+s:l>=f?s=s+repeat("0",l-f):s=(s.substring(0,l)||"0")+"."+s.substring(l),n+s}function roundToPrecision(t,e,n){if(["","-"].indexOf(t)!==-1)return t;var i=(t.indexOf(".")!==-1||n)&&e,s=splitDecimal(t),a=s.beforeDecimal,l=s.afterDecimal,f=s.hasNegation,p=parseFloat("0."+(l||"0")),C=l.length<=e?"0."+l:p.toFixed(e),B=C.split("."),N=a;a&&Number(B[0])&&(N=a.split("").reverse().reduce(function(ze,Ze,Qe){return ze.length>Qe?(Number(ze[0])+Number(Ze)).toString()+ze.substring(1,ze.length):Ze+ze},B[0]));var le=limitToScale(B[1]||"",e,n),Ee=f?"-":"",Ue=i?".":"";return""+Ee+N+Ue+le}function setCaretPosition(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var findChangeRange=memoizeOnce(function(t,e){for(var n=0,i=0,s=t.length,a=e.length;t[n]===e[n]&&n<s;)n++;for(;t[s-1-i]===e[a-1-i]&&a-i>n&&s-i>n;)i++;return{from:{start:n,end:s-i},to:{start:n,end:a-i}}}),findChangedRangeFromCaretPositions=function(t,e){var n=Math.min(t.selectionStart,e);return{from:{start:n,end:t.selectionEnd},to:{start:n,end:e}}};function clamp$1(t,e,n){return Math.min(Math.max(t,e),n)}function geInputCaretPosition(t){return Math.max(t.selectionStart,t.selectionEnd)}function addInputMode(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function getDefaultChangeMeta(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function defaultIsCharacterSame(t){var e=t.currentValue,n=t.formattedValue,i=t.currentValueIndex,s=t.formattedValueIndex;return e[i]===n[s]}function getCaretPosition(t,e,n,i,s,a,l){l===void 0&&(l=defaultIsCharacterSame);var f=s.findIndex(function(qt){return qt}),p=t.slice(0,f);!e&&!n.startsWith(p)&&(e=p,n=p+n,i=i+p.length);for(var C=n.length,B=t.length,N={},le=new Array(C),Ee=0;Ee<C;Ee++){le[Ee]=-1;for(var Ue=0,ze=B;Ue<ze;Ue++){var Ze=l({currentValue:n,lastValue:e,formattedValue:t,currentValueIndex:Ee,formattedValueIndex:Ue});if(Ze&&N[Ue]!==!0){le[Ee]=Ue,N[Ue]=!0;break}}}for(var Qe=i;Qe<C&&(le[Qe]===-1||!a(n[Qe]));)Qe++;var ct=Qe===C||le[Qe]===-1?B:le[Qe];for(Qe=i-1;Qe>0&&le[Qe]===-1;)Qe--;var wt=Qe===-1||le[Qe]===-1?0:le[Qe]+1;return wt>ct?ct:i-wt<ct-i?wt:ct}function getCaretPosInBoundary(t,e,n,i){var s=t.length;if(e=clamp$1(e,0,s),i==="left"){for(;e>=0&&!n[e];)e--;e===-1&&(e=n.indexOf(!0))}else{for(;e<=s&&!n[e];)e++;e>s&&(e=n.lastIndexOf(!0))}return e===-1&&(e=s),e}function caretUnknownFormatBoundary(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),n=0,i=e.length;n<i;n++)e[n]=!!(charIsNumber(t[n])||charIsNumber(t[n-1]));return e}function useInternalValues(t,e,n,i,s,a){a===void 0&&(a=noop);var l=usePersistentCallback(function(Ue,ze){var Ze,Qe;return isNotValidValue(Ue)?(Qe="",Ze=""):typeof Ue=="number"||ze?(Qe=typeof Ue=="number"?toNumericString(Ue):Ue,Ze=i(Qe)):(Qe=s(Ue,void 0),Ze=i(Qe)),{formattedValue:Ze,numAsString:Qe}}),f=reactExports.useState(function(){return l(isNil(t)?e:t,n)}),p=f[0],C=f[1],B=function(Ue,ze){Ue.formattedValue!==p.formattedValue&&C({formattedValue:Ue.formattedValue,numAsString:Ue.value}),a(Ue,ze)},N=t,le=n;isNil(t)&&(N=p.numAsString,le=!0);var Ee=l(N,le);return reactExports.useMemo(function(){C(Ee)},[Ee.formattedValue]),[p,B]}function defaultRemoveFormatting(t){return t.replace(/[^0-9]/g,"")}function defaultFormat(t){return t}function NumberFormatBase(t){var e=t.type;e===void 0&&(e="text");var n=t.displayType;n===void 0&&(n="input");var i=t.customInput,s=t.renderText,a=t.getInputRef,l=t.format;l===void 0&&(l=defaultFormat);var f=t.removeFormatting;f===void 0&&(f=defaultRemoveFormatting);var p=t.defaultValue,C=t.valueIsNumericString,B=t.onValueChange,N=t.isAllowed,le=t.onChange;le===void 0&&(le=noop);var Ee=t.onKeyDown;Ee===void 0&&(Ee=noop);var Ue=t.onMouseUp;Ue===void 0&&(Ue=noop);var ze=t.onFocus;ze===void 0&&(ze=noop);var Ze=t.onBlur;Ze===void 0&&(Ze=noop);var Qe=t.value,ct=t.getCaretBoundary;ct===void 0&&(ct=caretUnknownFormatBoundary);var wt=t.isValidInputCharacter;wt===void 0&&(wt=charIsNumber);var qt=t.isCharacterSame,nr=__rest(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),ir=useInternalValues(Qe,p,!!C,l,f,B),or=ir[0],ur=or.formattedValue,hr=or.numAsString,fr=ir[1],ar=reactExports.useRef(),Lt=reactExports.useRef({formattedValue:ur,numAsString:hr}),Vt=function(xr,Cr){Lt.current={formattedValue:xr.formattedValue,numAsString:xr.value},fr(xr,Cr)},tt=reactExports.useState(!1),Ye=tt[0],ot=tt[1],Et=reactExports.useRef(null),er=reactExports.useRef({setCaretTimeout:null,focusTimeout:null});reactExports.useEffect(function(){return ot(!0),function(){clearTimeout(er.current.setCaretTimeout),clearTimeout(er.current.focusTimeout)}},[]);var rr=l,yt=function(xr,Cr){var wr=parseFloat(Cr);return{formattedValue:xr,value:Cr,floatValue:isNaN(wr)?void 0:wr}},tr=function(xr,Cr,wr){xr.selectionStart===0&&xr.selectionEnd===xr.value.length||(setCaretPosition(xr,Cr),er.current.setCaretTimeout=setTimeout(function(){xr.value===wr&&xr.selectionStart!==Cr&&setCaretPosition(xr,Cr)},0))},Ut=function(xr,Cr,wr){return getCaretPosInBoundary(xr,Cr,ct(xr),wr)},Ft=function(xr,Cr,wr){var Er=ct(Cr),kr=getCaretPosition(Cr,ur,xr,wr,Er,wt,qt);return kr=getCaretPosInBoundary(Cr,kr,Er),kr},sr=function(xr){var Cr=xr.formattedValue;Cr===void 0&&(Cr="");var wr=xr.input,Er=xr.source,kr=xr.event,Br=xr.numAsString,Rr;if(wr){var Ir=xr.inputValue||wr.value,Dr=geInputCaretPosition(wr);wr.value=Cr,Rr=Ft(Ir,Cr,Dr),Rr!==void 0&&tr(wr,Rr,Cr)}Cr!==ur&&Vt(yt(Cr,Br),{event:kr,source:Er})};reactExports.useEffect(function(){var xr=Lt.current,Cr=xr.formattedValue,wr=xr.numAsString;(ur!==Cr||hr!==wr)&&Vt(yt(ur,hr),{event:void 0,source:SourceType.props})},[ur,hr]);var vr=Et.current?geInputCaretPosition(Et.current):void 0,_r=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;_r(function(){var xr=Et.current;if(ur!==Lt.current.formattedValue&&xr){var Cr=Ft(Lt.current.formattedValue,ur,vr);xr.value=ur,tr(xr,Cr,ur)}},[ur]);var dr=function(xr,Cr,wr){var Er=Cr.target,kr=ar.current?findChangedRangeFromCaretPositions(ar.current,Er.selectionEnd):findChangeRange(ur,xr),Br=Object.assign(Object.assign({},kr),{lastValue:ur}),Rr=f(xr,Br),Ir=rr(Rr);if(Rr=f(Ir,void 0),N&&!N(yt(Ir,Rr))){var Dr=Cr.target,zr=geInputCaretPosition(Dr),jr=Ft(xr,ur,zr);return Dr.value=ur,tr(Dr,jr,ur),!1}return sr({formattedValue:Ir,numAsString:Rr,inputValue:xr,event:Cr,source:wr,input:Cr.target}),!0},gr=function(xr,Cr){Cr===void 0&&(Cr=0);var wr=xr.selectionStart,Er=xr.selectionEnd;ar.current={selectionStart:wr,selectionEnd:Er+Cr}},$r=function(xr){var Cr=xr.target,wr=Cr.value,Er=dr(wr,xr,SourceType.event);Er&&le(xr),ar.current=void 0},pr=function(xr){var Cr=xr.target,wr=xr.key,Er=Cr.selectionStart,kr=Cr.selectionEnd,Br=Cr.value;Br===void 0&&(Br="");var Rr;wr==="ArrowLeft"||wr==="Backspace"?Rr=Math.max(Er-1,0):wr==="ArrowRight"?Rr=Math.min(Er+1,Br.length):wr==="Delete"&&(Rr=Er);var Ir=0;wr==="Delete"&&Er===kr&&(Ir=1);var Dr=wr==="ArrowLeft"||wr==="ArrowRight";if(Rr===void 0||Er!==kr&&!Dr){Ee(xr),gr(Cr,Ir);return}var zr=Rr;if(Dr){var jr=wr==="ArrowLeft"?"left":"right";zr=Ut(Br,Rr,jr),zr!==Rr&&xr.preventDefault()}else wr==="Delete"&&!wt(Br[Rr])?zr=Ut(Br,Rr,"right"):wr==="Backspace"&&!wt(Br[Rr])&&(zr=Ut(Br,Rr,"left"));zr!==Rr&&tr(Cr,zr,Br),Ee(xr),gr(Cr,Ir)},lr=function(xr){var Cr=xr.target,wr=function(){var Er=Cr.selectionStart,kr=Cr.selectionEnd,Br=Cr.value;if(Br===void 0&&(Br=""),Er===kr){var Rr=Ut(Br,Er);Rr!==Er&&tr(Cr,Rr,Br)}};wr(),requestAnimationFrame(function(){wr()}),Ue(xr),gr(Cr)},cr=function(xr){xr.persist&&xr.persist();var Cr=xr.target,wr=xr.currentTarget;Et.current=Cr,er.current.focusTimeout=setTimeout(function(){var Er=Cr.selectionStart,kr=Cr.selectionEnd,Br=Cr.value;Br===void 0&&(Br="");var Rr=Ut(Br,Er);Rr!==Er&&!(Er===0&&kr===Br.length)&&tr(Cr,Rr,Br),ze(Object.assign(Object.assign({},xr),{currentTarget:wr}))},0)},yr=function(xr){Et.current=null,clearTimeout(er.current.focusTimeout),clearTimeout(er.current.setCaretTimeout),Ze(xr)},Sr=Ye&&addInputMode()?"numeric":void 0,Ar=Object.assign({inputMode:Sr},nr,{type:e,value:ur,onChange:$r,onKeyDown:pr,onMouseUp:lr,onFocus:cr,onBlur:yr});if(n==="text")return s?React$2.createElement(React$2.Fragment,null,s(ur,nr)||null):React$2.createElement("span",Object.assign({},nr,{ref:a}),ur);if(i){var Tr=i;return React$2.createElement(Tr,Object.assign({},Ar,{ref:a}))}return React$2.createElement("input",Object.assign({},Ar,{ref:a}))}function format(t,e){var n=e.decimalScale,i=e.fixedDecimalScale,s=e.prefix;s===void 0&&(s="");var a=e.suffix;a===void 0&&(a="");var l=e.allowNegative,f=e.thousandsGroupStyle;if(f===void 0&&(f="thousand"),t===""||t==="-")return t;var p=getSeparators(e),C=p.thousandSeparator,B=p.decimalSeparator,N=n!==0&&t.indexOf(".")!==-1||n&&i,le=splitDecimal(t,l),Ee=le.beforeDecimal,Ue=le.afterDecimal,ze=le.addNegation;return n!==void 0&&(Ue=limitToScale(Ue,n,!!i)),C&&(Ee=applyThousandSeparator(Ee,C,f)),s&&(Ee=s+Ee),a&&(Ue=Ue+a),ze&&(Ee="-"+Ee),t=Ee+(N&&B||"")+Ue,t}function getSeparators(t){var e=t.decimalSeparator;e===void 0&&(e=".");var n=t.thousandSeparator,i=t.allowedDecimalSeparators;return n===!0&&(n=","),i||(i=[e,"."]),{decimalSeparator:e,thousandSeparator:n,allowedDecimalSeparators:i}}function handleNegation(t,e){t===void 0&&(t="");var n=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),s=n.test(t),a=i.test(t);return t=t.replace(/-/g,""),s&&!a&&e&&(t="-"+t),t}function getNumberRegex(t,e){return new RegExp("(^-)|[0-9]|"+escapeRegExp(t),"g")}function isNumericString(t,e,n){return t===""?!0:!(e!=null&&e.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof t=="string"&&!isNaN(Number(t))}function removeFormatting(t,e,n){var i;e===void 0&&(e=getDefaultChangeMeta(t));var s=n.allowNegative,a=n.prefix;a===void 0&&(a="");var l=n.suffix;l===void 0&&(l="");var f=n.decimalScale,p=e.from,C=e.to,B=C.start,N=C.end,le=getSeparators(n),Ee=le.allowedDecimalSeparators,Ue=le.decimalSeparator,ze=t[N]===Ue;if(charIsNumber(t)&&(t===a||t===l)&&e.lastValue==="")return t;if(N-B===1&&Ee.indexOf(t[B])!==-1){var Ze=f===0?"":Ue;t=t.substring(0,B)+Ze+t.substring(B+1,t.length)}var Qe=function(Et,er,rr){var yt=!1,tr=!1;a.startsWith("-")?yt=!1:Et.startsWith("--")?(yt=!1,tr=!0):l.startsWith("-")&&Et.length===l.length?yt=!1:Et[0]==="-"&&(yt=!0);var Ut=yt?1:0;return tr&&(Ut=2),Ut&&(Et=Et.substring(Ut),er-=Ut,rr-=Ut),{value:Et,start:er,end:rr,hasNegation:yt}},ct=Qe(t,B,N),wt=ct.hasNegation;i=ct,t=i.value,B=i.start,N=i.end;var qt=Qe(e.lastValue,p.start,p.end),nr=qt.start,ir=qt.end,or=qt.value,ur=t.substring(B,N);t.length&&or.length&&(nr>or.length-l.length||ir<a.length)&&!(ur&&l.startsWith(ur))&&(t=or);var hr=0;t.startsWith(a)?hr+=a.length:B<a.length&&(hr=B),t=t.substring(hr),N-=hr;var fr=t.length,ar=t.length-l.length;t.endsWith(l)?fr=ar:(N>ar||N>t.length-l.length)&&(fr=N),t=t.substring(0,fr),t=handleNegation(wt?"-"+t:t,s),t=(t.match(getNumberRegex(Ue))||[]).join("");var Lt=t.indexOf(Ue);t=t.replace(new RegExp(escapeRegExp(Ue),"g"),function(Et,er){return er===Lt?".":""});var Vt=splitDecimal(t,s),tt=Vt.beforeDecimal,Ye=Vt.afterDecimal,ot=Vt.addNegation;return C.end-C.start<p.end-p.start&&tt===""&&ze&&!parseFloat(Ye)&&(t=ot?"-":""),t}function getCaretBoundary(t,e){var n=e.prefix;n===void 0&&(n="");var i=e.suffix;i===void 0&&(i="");var s=Array.from({length:t.length+1}).map(function(){return!0}),a=t[0]==="-";s.fill(!1,0,n.length+(a?1:0));var l=t.length;return s.fill(!1,l-i.length+1,l+1),s}function validateAndUpdateProps(t){var e=getSeparators(t),n=e.thousandSeparator,i=e.decimalSeparator,s=t.prefix;s===void 0&&(s="");var a=t.allowNegative;if(a===void 0&&(a=!0),n===i)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+i+` (default value for decimalSeparator is .)
     `);return s.startsWith("-")&&a&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+s+`
      allowNegative: `+a+`
    `),a=!1),Object.assign(Object.assign({},t),{allowNegative:a})}function useNumericFormat(t){t=validateAndUpdateProps(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,n=t.allowNegative,i=t.allowLeadingZeros,s=t.onKeyDown;s===void 0&&(s=noop);var a=t.onBlur;a===void 0&&(a=noop);var l=t.thousandSeparator,f=t.decimalScale,p=t.fixedDecimalScale,C=t.prefix;C===void 0&&(C="");var B=t.defaultValue,N=t.value,le=t.valueIsNumericString,Ee=t.onValueChange,Ue=__rest(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),ze=getSeparators(t),Ze=ze.decimalSeparator,Qe=ze.allowedDecimalSeparators,ct=function(ot){return format(ot,t)},wt=function(ot,Et){return removeFormatting(ot,Et,t)},qt=isNil(N)?B:N,nr=le??isNumericString(qt,C,e);isNil(N)?isNil(B)||(nr=nr||typeof B=="number"):nr=nr||typeof N=="number";var ir=function(ot){return isNotValidValue(ot)?ot:(typeof ot=="number"&&(ot=toNumericString(ot)),nr&&typeof f=="number"?roundToPrecision(ot,f,!!p):ot)},or=useInternalValues(ir(N),ir(B),!!nr,ct,wt,Ee),ur=or[0],hr=ur.numAsString,fr=ur.formattedValue,ar=or[1],Lt=function(ot){var Et=ot.target,er=ot.key,rr=Et.selectionStart,yt=Et.selectionEnd,tr=Et.value;if(tr===void 0&&(tr=""),(er==="Backspace"||er==="Delete")&&yt<C.length){ot.preventDefault();return}if(rr!==yt){s(ot);return}er==="Backspace"&&tr[0]==="-"&&rr===C.length+1&&n&&setCaretPosition(Et,1),f&&p&&(er==="Backspace"&&tr[rr-1]===Ze?(setCaretPosition(Et,rr-1),ot.preventDefault()):er==="Delete"&&tr[rr]===Ze&&ot.preventDefault()),Qe!=null&&Qe.includes(er)&&tr[rr]===Ze&&setCaretPosition(Et,rr+1);var Ut=l===!0?",":l;er==="Backspace"&&tr[rr-1]===Ut&&setCaretPosition(Et,rr-1),er==="Delete"&&tr[rr]===Ut&&setCaretPosition(Et,rr+1),s(ot)},Vt=function(ot){var Et=hr;if(Et.match(/\d/g)||(Et=""),i||(Et=fixLeadingZero(Et)),p&&f&&(Et=roundToPrecision(Et,f,p)),Et!==hr){var er=format(Et,t);ar({formattedValue:er,value:Et,floatValue:parseFloat(Et)},{event:ot,source:SourceType.event})}a(ot)},tt=function(ot){return ot===Ze?!0:charIsNumber(ot)},Ye=function(ot){var Et=ot.currentValue,er=ot.lastValue,rr=ot.formattedValue,yt=ot.currentValueIndex,tr=ot.formattedValueIndex,Ut=Et[yt],Ft=rr[tr],sr=findChangeRange(er,Et),vr=sr.to,_r=function(dr){return wt(dr).indexOf(".")+C.length};return N===0&&p&&f&&Et[vr.start]===Ze&&_r(Et)<yt&&_r(rr)>tr?!1:yt>=vr.start&&yt<vr.end&&Qe&&Qe.includes(Ut)&&Ft===Ze?!0:Ut===Ft};return Object.assign(Object.assign({},Ue),{value:fr,valueIsNumericString:!1,isValidInputCharacter:tt,isCharacterSame:Ye,onValueChange:ar,format:ct,removeFormatting:wt,getCaretBoundary:function(ot){return getCaretBoundary(ot,t)},onKeyDown:Lt,onBlur:Vt})}function NumericFormat(t){var e=useNumericFormat(t);return React$2.createElement(NumberFormatBase,Object.assign({},e))}function NumericFormatInput(t){const{value:e,decimals:n,placeholder:i,style:s,onChange:a,maxValue:l,minValue:f=0,inputAllowed:p=!0,prefix:C,...B}=t,N=le=>{var Ue;const Ee=(Ue=le==null?void 0:le.target)==null?void 0:Ue.value;if(Ee){if(Ee.startsWith(".")){a(Ee.slice(1,Ee.length));return}try{if(d$2(Ee).eq(0)){a("0");return}}catch(Ze){console.log(" ~ handleChange ~ error:",Ze)}let ze=Ee.replace(/^0+$/,"0").replace(/^0+(?!\.\d+$)/g,"").replace(/,/g,"")||"";if(ze.startsWith("-")){a("");return}C&&(ze=ze.replace(C,"")),l!==void 0&&d$2(ze).gt(l)?ze=l.toString():f!==void 0&&d$2(ze).lt(f)&&(ze=f.toString()),a(String(ze))}else a("")};return jsxRuntimeExports.jsx(NumericFormat,{value:e,disabled:!p,placeholder:i,decimalScale:n,prefix:C,allowLeadingZeros:!0,thousandSeparator:",",onMouseDown:le=>{cancelBubble(le)},isAllowed:le=>!le.value.startsWith("-"),onChange:N,...B,style:{...s,cursor:p?"text":"not-allowed",fontFamily:"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",fontFeatureSettings:"tnum",fontVariant:"tabular-nums"}})}const GhostLoading="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAA6RJREFUWEfNl2von2MYxz/fbdnCvBA1ipKMcopFEXOYGCWxYmi1N8KmyCEph/bCqRSWkawZy8ihkY1lSu3NbHthYjO1lReIlpkmYw5fz7Wu5+/e7//8fr9nz2juV7/fdd/X9/re132dHtFx2Z4AzEn1ZyX92gVKw5Rsj5H0V+8526cAs1O+WNLnw7Ca9gcSsH0yMBdYK+mlEsD26cCslC2R9GnP/pXAScAySVv6kRtGYCZwUSovlLS+BhpEwPapwIw8u07Se10JTAbuSuUfgQcl7Y7//QjYPgi4DTiseJ6vOhFIQzcDZybAcknvpvx44NaUPydpa8rDYxekfJOk1wfFRpsgPAKYB4wDdki6Nw2NKZ7nozpQbYfHJgJ/AM9I2tGKQLr0DCDebFNPQE0DrgXWSFo8CND29cCJwEpJH/fgHFMFZQTvF7XH9nggUg2IKB+bCmuBpZK2FUE3oU2uJ9b4ylO7Ct2IhwuBE1IWaf10eG3kCWzHW9dvF+d+rxRekfRBl/wujEf8TC0uF1sbJa2MH3vFgO1zgRuAwxMg3nF2UyFqQ8p23Pym4uxOYLWkzbVsVBDaHg9EEbkM2CBpQRtjTWfyOa4GJgGfAOslhWdH1tAs6Gq8rd6BJ2D7YOC0zPOa+E8ZKKOaUNub9aRfXPQoIDpovQL7W9meX6XgcQ3AL0t6o4vBXh3bUV/OasD64X9B4MA+wb/h4v3B6JsFtsdK+nN/wNvoNhWiiNQYRK6rhorPgPu6ErEd+K8CEYTRa56S9EvfQmT7YuAW4Mji0ExJ37e5TUP0H1KV4m+AaHax4vcDkt4cVYptR5+fXoBEyYxBY1kX47WO7egFjwBR4uv1oqTb40/djqMNR3eKoSPW6jT+XQE0TlI0p4HLdmBMkvR1oXss8HDVD65K2TZJMVH90w1tnwOcB6yStKG0YjsGzHuAtyU9NoiB7aXZ+++XtKgHJ/AjvmJYWb4XgX6gtqOEvlW5MYbN7ZIujbPZ6epW+0K07Mgc4EsgastvwPmlJ5psDG1Gth8HYiSL9ZqkJ5LA2cCSlM+StC7ldwN3pnyFpHIeGMVh2HfBlKqJPJ9a24FrJP2chi6PtMq9OyS9n/K4fcTQ0bk3Q9Kafh4eRiDePepBrIckrSgCq5FAkoghpB5k3qnSuB7f99kDEZiPVrNijN0xmo8s230JJIknqwn7ivhIkbSqkwf6KaWBS4pbzpX04aDz/wWBQ2NqTuAb69jYVxJ/A8eXcdbPzepuAAAAAElFTkSuQmCC",PrimaryLoading="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAbKADAAQAAAABAAAAbAAAAAD529oeAAAJzUlEQVR4Ae1dz4sURxj9undNVkLMikSIoJ5zCYSQy6oQFQNBE5ND9p6jxvwAYf+IgBCj0WPu5pCYuJeMPwLqXiQEctmzK6wgSH4RNHHdzns1U2PP7MzO7E5V12uYRu2enpn6Xr3X1V399fuczGq+XPit2P70sR0tMjuCruyxwnZZhr9cClvG9jK2lrLCGhNTNn/ytex3915N/8lqitvO/1J8sLpqnxSFHUAfJofsx0qW2c08t3On3si+G/I7Uh+rnWDn7hT7CrMvINTMKExCuAV0fu6TN7Pbo7RT9XdrI9ilopi4/4udsVX7LChJuZ195Q07PZtlT4O2G6mxWgj2za/F9F8rdgnXJF6nwi+ZNbZN2uxHr2d/hG88bIvygrXEWoBYr4bteldrmS1CtBl10fIu2FIveRpsjay4YrHXOCAYizGlSOgCIy2Yu2bFOg12EeFeIpaL2es9kX2yp0TOBlcLu5WCpzyz/aqzR9kRxql7CrEYM2XsQX2WFIw3xaPeZw3q+HrvMzYxrPeZVO9JCsYMRipCfFwFDB5LeS13DWNu8MljewCQw6abyv0Jub2yZcp2quUe5UbYk3/tmIBYFH6yhSXkQTByW3KCYcjHyWZsgiolLB6+nGAAttuDE1grYXF06AnG51kqixKWFid6gvmHjwqiKWFRFQz3QLhv1ViUsHhG5EYYLvT3PbjUayUsngs5wVoeDI8v7brpB0mLoSu6nmAwzHRhTPlSCYvjQU4wXMCuplSoHJtOq/JrhW05wbY8b1dAzIoAOSu0xQng6IAgJxhzd7SidaBM8IIY1PKIpEFOMAcKvsEEGnWEpHexY4fIC8xcNZev7hS3Uz0To2fx0zezfYrMSI4wEoUjaS4VYSljD+qzrGDOUwGT56AOBH8fMVX9HOyrrGAER0cuhlp1U2vEcjEZXHSRFoz2aTpyIdpidP6aRtJZdcu2tGAUiU5cOnKjjrSmVVve9Us+ZGeJBFdexsUQTTZqI5gXb1xu5Jmo2Xpc0FczwTxcZ4uD0wqnCpp3duPxZ6+S2XtIKjeYp1RMN/m+DLPe8CnxxJViuz21oyQIdcV7kNGmB8P7MJaxbxn7lkiQTdj8xWP1rikehsTyZ27eLbb/a6i55gFUoOaa3HirAWuuzdVdL4G/xvNm8wf2boyfoQX7+EfYp+nIzewAUkZDmTyR4lkB6JsZ8nJfv1vPmuKyGOttX7uHmuunm+Mnn7Bzh3cPx89AwU5dRhUJa4ptxJpiswXcQ8ydP16vmuL1ROJ71+8W+/As6AscmCPVXGMgLGAUzB3auz4/fQXjNPrnH+wMhApaU4yAZ996rz41xf0EK8DPtSU7g5KooPyg1Ons4T12OutTc91TsM9vFNP//W3QLI4LF6fKxnMv2uyXB/VrinsJduP3YvrJX3Frrrdss9mD29fys0awllgLECtqmSpEW4RoM3UTjWKt/GkLOPPE5cdscfIlm+kWrSM1xdNga2RFBcOjlgcEYzFmr6NYcR9PgxxZscVy/OCAcLG6+OkQzF2zIp0GewnAUy5j9npPcR+vWZhcVFesgVguZomM9imRs0H8zyJJaooxxParzx7dbDBRzfUkaq797LE9wjh1LwlZ6WbK2MN21E3dh/1w4M+VYzvB3E3xiPdZo2DkPR4xjNJGzO/ypnjk+6xRAOIez2FAG04wl8EYpcEA31XA0K8bLoPR782K9nsMGXOD2ao9wARgqHRTLHxMYxW57VTLPTI3+Ng0+Jky25nnq3YstVg8CIiBWGIdEJtt95Hp8EMs4KjCaeoA1pSweKiYRlc3jfdB+6yJhdcwpTpeJSxN2gohfoAlbz3P6qNptbuVsJR67p/1lXYl29zFESYFKBkV/QL7h4/93q9yP7DkuAfCH41FCUubEaGaayhV4PHLuKa4LU7vDZmaa8C7n9OD0Rtn9XuVsJR6L8MPMC1z0rFUApd0UwlLm4hMhx/YCJZyZBiutsEl3sA1rLrChyH7Ckwy/ODy1chXc7vCtNCQ+KN9zGGALS5agE02vNV0+KEtLne5O1jRNtmfcF8DBrU8IjvnfIMi/BCLy9bTNxiO+c21pIChH3L6Bvu9V9V+jwGnxeZy8jJqihM9EwOIhQvHNWuKPT8/3S1uJ3smBs/i23ub/LgRRlDYSFZTnDK2F2TQmibPQZ+J9X45dlsweipwpFdeU8yY6n4OCkFPBU2esUTp1y5jej8HP9MWjC/oyMVsrbKpNWMxJmPXYaEjF/dClfHDWC5miZwOwVjfS0cuiIxeU8wYjKVeU1ziymifpiMXZ4X4/CCGi9Vl2e4QjODoxKUjN+ZIY9t1dP2SHzpx6ciNOtLATy/XL+PjYOm90JE7LobozQ33ShVDlGGOy43KbKzdlik36oY2LujrZqTztUxBXycsM9ri6G5qGWZ2tx7r+6fWrmQW37mHi2ODeUrFdFN3n0K+pi2O7iZca1gyS49Kr5JZV3PNPGW0ktmQnQrZ1tEL8A3mdhQ/bnPE11wjY+MOIJDWrrnGf6fXmFq1+fmTG6spDok1RFt9Jx0hGo/ZxqGLqCku3K8gHUCcYU2wfCpxEzej566fGK6mOGYfNtN27QQ7eLHYh1NNkJprzJHnbpxYv6Z4M6TG/E5tBPvwUjHx8GGcmuIdO+z0t7Pj33EOdqC9/00x/cfjuDXF01M2+/1Ha2uKg3UiUEPyI8yJ9cgW0N/YZbyL01ttRl20NampQAdCkGZ4GnQjK75YxPsqYzFmEPCRGpEWjNcsTDCqK0ZALBczEtkhmpU9JXI2iBKkWyE6udE2kJzerzp71B1hmLpvlOhgn08Ze0AnJAXjTXEqfwn5YmxiGMBdkrclBWtlMJIQ4oMqYPBYymu5axhzg/+gphggh003lfsTcnvlBdQUq+Ue5UbYo0znd5xbWEIeBCO3JScYrh/VTeMH0KeExUNVFEymzhmCyWCRFUypzlkJi6xgOKr902uPMdlaCYsnQe6UiGdU4ElkUcLSokROMJyGZGqKlbD4Q1hOMKU6ZyUssoLhqF7y4FKvlbB4LuRGGDLlMjXFdFp5olTWcoJtLXR+x5m2OBWhPA45wVq5u/Q117DDqeURKZqcYA4UfIP+iEq1pncxVez14spl6z3YgxfS1lzfOKlZcy05wpxoMHl68Spfp4w9oLOygtFTkaqmWNXPQS1lBSM4OnKjVjoySHlB5aOLWd4nti17DfM8jY2knonmWnqEESKduHTkRh1pGFl1cP2SD3nBvGgv77B3YlzT2CbbVrdokwcu8qfEJsxn/47LjZ5xUautcUFfreR6Bpa2OLqb8NTzCP66mmv/pBinj2bJLGqusd1gnlIx3fSsN4O3/geTqWMhW4ldAwAAAABJRU5ErkJggg==",spin=keyframes`
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
`,imageMap={primary:PrimaryLoading,ghost:GhostLoading};function Spinner({size:t="20px",variant:e="primary",wrapStyle:n={}}){return jsxRuntimeExports.jsx(Center,{w:"100%",h:"100%",...n,children:jsxRuntimeExports.jsx(Image$1,{boxSize:t,src:imageMap[e],alt:"Loading",animation:`${spin} 1s linear infinite`})})}const alertTheme=defineStyleConfig$1({baseStyle:{zIndex:999999,button:{color:"orange"},container:{zIndex:999999,bg:"none"},icon:{color:"text_paragraph"},spinner:{color:"text_paragraph"},title:{color:"text_caption",fontSize:"md"},description:{color:"text_paragraph",fontSize:"sm"}},variants:{subtle:{}},defaultProps:{variant:"subtle"}});function defineStyle(t){return t}function defineStyleConfig(t){return t}const baseStyle$1={fontWeight:"normal",borderRadius:"12px",fontFamily:"Inter",minW:"unset !important",_focusVisible:{boxShadow:"none",outline:"none"}},variants={solid:{bg:"primary",minW:"unset !important",_hover:{bg:{base:"",lg:"primary_hover"},_disabled:{bg:"primary_disabled",color:"primary_gray"}},_active:{bg:"primary_hover"},_disabled:{opacity:1,bg:"primary_disabled",color:"primary_gray",_hover:{bg:"unset",color:"unset",opacity:1}},color:"block_color"},outline:{bg:"button_outline_bg",border:"1px solid ",borderColor:"border !important",color:"primary",minW:"unset !important",_hover:{borderColor:"border",bg:{base:"",lg:"button_outline_hov_bg"},color:{base:"",lg:"primary"}},_active:{borderColor:"border",bg:"button_outline_hov_bg",color:"primary"},_disabled:{opacity:1,bg:"button_outline_disabled_bg",color:"primary_gray",border:"1px solid",borderColor:"border",_hover:{opacity:1,color:"primary_gray",bg:"button_outline_disabled_bg !important"}}},ghost:{bg:"button_ghost_bg !important",borderRadius:"8px",border:"1px solid",borderColor:"border !important",color:"primary",minW:"unset !important",_hover:{border:{base:"",lg:"1px solid"},borderColor:{base:"",lg:"border !important"},bg:{base:"",lg:"button_ghost_hov_bg !important"},color:"primary"},_active:{border:"1px solid",borderColor:"border !important",bg:"button_ghost_hov_bg !important",color:"primary"},_disabled:{opacity:1,border:"1px solid",borderColor:"border !important",bg:"button_ghost_disabled_bg !important",color:"primary_gray",_hover:{opacity:1,bg:"button_ghost_disabled_bg !important",color:"primary_gray"}}}},buttonTheme={baseStyle:baseStyle$1,variants,defaultProps:{size:"md",variant:"solid"},sizes:{lg:{fontWeight:"550",height:"48px"},md:{fontWeight:"400"}}},cardTheme={baseStyle:{container:{borderRadius:"16px",paddingLeft:"16px",paddingRight:"16px",paddingTop:"20px",paddingBottom:"20px"},body:{color:"text_paragraph",padding:"0px,0px,0px,0px"},header:{color:"text_caption"},footer:{}},variants:{filled:{container:{bg:"card_bg"}},outline:{container:{bg:"card_bg"}}},defaultProps:{variant:"filled"}},checkboxTheme={baseStyle:{icon:{},container:{},control:{bg:"checked_bg",border:"0px",borderRadius:"4px",color:"primary",_hover:{bg:"checked_bg",color:"primary"},_checked:{bg:"checked_bg",color:"primary"}},label:{color:"text_caption",_checked:{color:"primary"}}}},drawerTheme=defineStyleConfig$1({baseStyle:{overlay:{bg:"block_color_opacity.80",backdropFilter:"blur(10px)"},dialogContainer:{padding:{md:"0 8px",lg:"0px"}},dialog:{bg:"block_color_opacity.93",boxShadow:"unset",borderRadius:"16px",backdropFilter:"blur(50px)"},header:{color:"text_caption",fontSize:"md",fontWeight:"400",pl:"16px",pr:"16px"},closeButton:{mt:"4px",right:"6px",color:"text_paragraph",cursor:"pointer",_hover:{bg:"none",color:"text_caption"},_focusVisible:{boxShadow:"none"}},body:{pl:"16px",pr:"16px"},footer:{}}}),baseStyle={fontFamily:"Inter"},formTheme={baseStyle},headingTheme=defineStyleConfig$1({baseStyle:{fontFamily:"Inter",color:"text_caption"}}),inputTheme=defineStyleConfig$1({baseStyle:{addon:{"::placeholder":{},_light:{"::placeholder":{color:"text_paragraph"}}},field:{fontFamily:"Inter","::placeholder":{color:"text_paragraph"},_light:{"::placeholder":{color:"text_paragraph"}}}},variants:{unstyled:{field:{color:"text_caption",fontSize:"2xl",_disabled:{color:"text_paragraph",opacity:1}},"::placeholder":{},_light:{"::placeholder":{color:"text_paragraph"}}},outline:{field:{bg:"bg_secondary",color:"text_caption",border:"1px",borderColor:"border",borderRadius:"16px",fontSize:"2xl",height:"52px",width:"100%",_hover:{borderColor:"border",bg:"bg_secondary"},"::placeholder":{color:"text_paragraph"},_focusVisible:{borderColor:"primary",boxShadow:"0px 1px 0px 0px primary"}},addon:{height:"100%"}}},defaultProps:{variant:"unstyled"}}),menuTheme=defineStyleConfig$1({baseStyle:{button:{bg:"bg_secondary",color:"text_paragraph"},list:{bg:"bg_secondary",p:"16px",borderRadius:"12px",backdropFilter:"blur(20px)",border:"1px solid",borderColor:"border",boxShadow:"unset !important"},item:{bg:"none",color:"text_paragraph",fontSize:"sm"},groupTitle:{},icon:{},command:{},divider:{}}}),modalTheme=defineStyleConfig$1({baseStyle:{overlay:{bg:"rgba(0,0,0,0.8)"},dialogContainer:{top:"28px",bottom:"28px",overflowY:"scroll",padding:{base:"0 8px 56px",lg:"0px 0 56px"}},dialog:{bg:"background",border:"1px solid",borderColor:"border",boxShadow:"unset",borderRadius:"16px",backdropFilter:"blur(50px)",transition:{duration:.1}},header:{color:"text_caption",fontSize:"md",fontWeight:"400",pl:"16px",pr:"16px"},closeButton:{mt:"4px",right:"6px",color:"text_paragraph",cursor:"pointer",_hover:{bg:"none",color:"text_caption"},_focusVisible:{boxShadow:"none"}},body:{pl:"16px",pr:"16px"},footer:{}}}),popoverTheme=defineStyleConfig$1({baseStyle:{popper:{bg:"transparent",color:"text_paragraph",borderRadius:"0px",border:"0px solid",borderColor:"border",_focus:{outline:"none !important",boxShadow:"unset !important"}},content:{bg:"bg_secondary",border:"1px solid",borderColor:"border",borderRadius:"8px",_focus:{outline:"unset",boxShadow:"unset !important"}},header:{color:"text_caption",fontSize:"12px"},body:{color:"text_paragraph",borderRadius:"8px"},footer:{color:"text_paragraph"},closeButton:{color:"text_paragraph",cursor:"pointer",_hover:{bg:"none",color:"text_caption"}}}}),progressTheme=defineStyleConfig$1({baseStyle:{track:{borderRadius:"8px",bg:"transparent",border:"0px",borderColor:"none"},filledTrack:{bg:"process_bg",borderRadius:"8px"}},defaultProps:{}}),$startColor=cssVar("skeleton-start-color"),$endColor=cssVar("skeleton-end-color"),skeletonTheme=defineStyleConfig$1({baseStyle:{[$startColor.variable]:"var(--chakra-colors-loading_gradient_start)",[$endColor.variable]:"var(--chakra-colors-loading_gradient_end)",background:"background",width:"96px",height:"16px",borderRadius:"4px",opacity:"0.5"}}),sliderTheme=defineStyleConfig$1({baseStyle:{container:{},track:{bg:"bg_four",h:"4px",borderRadius:"4px"},thumb:{w:"12px",h:"12px",bg:"primary",borderRadius:"10px",border:"1px",borderColor:"bg_four",position:"relative",_before:{content:"''",width:"6px",height:"6px",borderRadius:"100%",background:"bg_four",position:"absolute",left:"50%",top:"50%",marginLeft:"-3px",marginTop:"-3px"},_focusVisible:{boxShadow:"sm"}},filledTrack:{bg:"primary"}},defaultProps:{colorScheme:"primary"}}),stepperTheme=defineStyleConfig$1({baseStyle:{stepper:{},title:{fontSize:"14px",color:"text_caption",opacity:.5,"&[data-status=complete]":{color:"primary",opacity:1},"&[data-status=active]":{color:"primary",opacity:1}},description:{},number:{},step:{minH:"66px",display:"flex",justifyContent:"flex-start",alignItems:"center"},icon:{},indicator:{w:"28px",h:"28px",borderRadius:"8px","&[data-status=complete]":{bg:"none",borderWidth:"1px",borderColor:"primary",color:"primary"},"&[data-status=active]":{borderWidth:"1px",borderColor:"primary",color:"primary"},"&[data-status=incomplete]":{bg:"none",borderWidth:"1px",borderColor:"border",color:"#FFCA680"}},separator:{marginTop:"14px","&[data-orientation=vertical]":{w:"1px",h:"32px",bg:"primary",maxH:"auto"}}}}),switchTheme=defineStyleConfig$1({baseStyle:{thumb:{w:"14px",h:"14px",borderRadius:"7px",bg:"switch_inactive_bg",_checked:{bg:"switch_active_bg"}},track:{align:"center",w:"28px",h:"14px",bg:"block_color",p:"1px",border:"1px solid",borderRadius:"9px",borderColor:"border !important",_checked:{bg:"aggregator_switch_track_active"},_focusVisible:{boxShadow:"unset !important"}}}}),tableTheme=defineStyleConfig$1({baseStyle:{fontFamily:"Inter"},sizes:{sm:{th:{fontSize:"12px"},td:{fontSize:"14px"}}},variants:{unstyled:{table:{},th:{fontFamily:"Inter",fontWeight:"400",color:"text_paragraph",textTransform:"none",fontSize:"14px",p:"8px !important",_first:{pl:"16px !important"},_last:{textAlign:"right",pr:"16px !important"}},tbody:{tr:{td:{textAlign:"right",color:"text_caption",fontFamily:"Inter",p:"8px !important",_first:{pl:"16px !important",textAlign:"left",borderRadius:"12px 0 0 12px"},_last:{pr:"16px !important",borderRadius:"0 12px  12px 0"}},_hover:{bg:"primary_opacity.10",borderRadius:"12px",backdropFilter:"blur(10px)"}}}},simple:{table:{borderCollapse:"separate",borderSpacing:"0px 4px"},th:{fontFamily:"Inter",textTransform:"none",fontSize:"14px",fontWeight:"400",borderBottom:"0px",padding:"0px"},tr:{_last:{td:{border:"none"}}},td:{fontFamily:"Inter",borderColor:"border",padding:"16px 0px"}},simple_list:{table:{borderCollapse:"separate",borderSpacing:"0px 0px"},th:{fontFamily:"Inter",fontWeight:"400",color:"text_paragraph",fontSize:"14px",textTransform:"none",textAlign:"right",padding:"12px 8px",_first:{pl:"16px",textAlign:"left"},_last:{textAlign:"right",pr:"16px"}},tbody:{tr:{td:{fontFamily:"Inter",bg:"bg_secondary",borderTop:"1px solid",borderBottom:"1px solid",borderColor:"border",textAlign:"right",padding:"16px 8px",_first:{pl:"16px",borderRadius:"16px 0 0 16px",borderLeft:"1px solid",borderColor:"border",textAlign:"left"},_last:{pr:"16px",borderRadius:"0 16px  16px 0",borderRight:"1px solid",borderColor:"border"}},_hover:{bg:"primary_opacity.10",borderRadius:"16px",backdropFilter:"blur(10px)"}}}},striped:{table:{},th:{fontFamily:"Inter",color:"text_paragraph",textTransform:"none",padding:"16px",border:"none"},td:{fontFamily:"Inter",color:"text_caption",border:"none !important",padding:"16px"}}},defaultProps:{variant:"unstyled"}}),tabsTheme=defineStyleConfig$1({variants:{}}),textTheme=defineStyleConfig$1({baseStyle:{fontSize:"sm",color:"text_paragraph",fontFamily:"Inter"}}),tooltipTheme=defineStyleConfig$1({baseStyle:{bg:"bg_secondary",color:"text_paragraph",borderRadius:"8px",border:"1px solid",borderColor:"border",p:"9px 12px",fontSize:"12px",boxShadow:"unset"}}),components={Button:buttonTheme,Switch:switchTheme,Input:inputTheme,Text:textTheme,Heading:headingTheme,Checkbox:checkboxTheme,Progress:progressTheme,Slider:sliderTheme,Card:cardTheme,Menu:menuTheme,Modal:modalTheme,Tooltip:tooltipTheme,Popover:popoverTheme,Stepper:stepperTheme,Skeleton:skeletonTheme,Table:tableTheme,Alert:alertTheme,Drawer:drawerTheme,FormControl:formTheme,Tabs:tabsTheme},typography={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},foundations={typography},colors={background:"#161616",bg_primary:"#161616",bg_secondary:"#0F0F0F",bg_third:"#191919",bg_four:"#202224",bg_fifth:"#1A1D21",bg_six:"#191B1E",bg_seven:"#171717",bg_eight:"rgba(114,193,247,0.1)",bg_nine:"#121212",menu_item_bg:"#181818",menu_item_hover_bg:"#1f1f1f",block_color:"#000000",text_caption:"#FFFFFF",text_paragraph:"#909CA4",text_highlight:"#72C1F7",top_coin_address_text:"#86FFE4",primary:"#75C8FF",primary_gray:"#7F98A7",primary_green:"#68FFD8",primary_yellow:"#FFCA68",primary_red:"#FF5073",primary_blue:"#62AADB",light_coral:"#AE6161",quote_green:"#027658",text_green:"#AAFFC9",primary_hover:"#8DD2FF",primary_disabled:"#25303A",button_outline_bg:"#0F0F0F",button_outline_hov_bg:"#20282E",button_outline_disabled_bg:"#25303A",button_ghost_bg:"#1A1C25",button_ghost_hov_bg:"#242733",button_ghost_disabled_bg:"#25303A",switch_active_bg:"#72C1F7",switch_inactive_bg:"#768691",switch_thumb:"#FFFFFF",aggregator_switch:"#222530",aggregator_switch_track_active:"#1B2E3B",border:"#2A3238",button_outline_border:"#00334C",input_error_border:"#FC8181",h5_route_border:"#8BABBE",h5_router_percentage_bg:"#22333D",token_inactive_border:"#2b3239",token_active_border:"#4F86AB",trade_input_border_light:"#344E61",border_secondary:"#23252C",checked_bg:"#1A1C25",process_bg_gray:"#2A3238",process_bg:"#3C60F7",process_bg_value:"#2CDAB0",card_bg:"#192128",card_bg_hover:"#1D262E",form_card_bg:"#1D1F21",input_bg:"#141414",input_disabled:"#121719",launch_title:"#C3F8E6",scroll_header_bg:"linear-gradient( 270deg, #003D4C 0%, #170033 100%)",scroll_header_border:"linear-gradient( 270deg, #005B99 0%, #480077 100%)",ranking_table_bg:"linear-gradient( 0deg, #151A29 0%, #0F0F0F 100%)",market_table_bg:"linear-gradient( 0deg, #152429 0%, #0F0F0F 100%)",status_text:"linear-gradient(to left, #4CB6FF 0%, #7CFFD0 100%)",ranking_list_h5_bg:"linear-gradient( 180deg, #0F0F0F 100%, #151A29 0%)",bubble_bg_created:"#003254",bubble_bg_complete:"linear-gradient( 270deg, #055C45 0%, #002E73 100%)",bubble_bg_buy:"#006147",bubble_bg_sell:"#46121C",plus_mode_color:"linear-gradient(90deg, #c7f9d4, #eff7d0 48%, #f8beff)",beta_tag_color:"linear-gradient( 90deg, #C6F9D4 5%, #FFFDB3 30%, #D5ECFA 66%, #FBD7FF 87%, #F7B8FF 100%)",beta_tag_border_color:"linear-gradient(90deg, rgba(198, 249, 212, 1), rgba(255, 253, 179, 1), rgba(213, 236, 250, 1), rgba(251, 215, 255, 1), rgba(247, 184, 255, 1)) 1 1",aggregator_box_shadow:"linear-gradient(180deg, rgba(22,22,22,0) 0%, #161616 100%)",account_switch_bg:"linear-gradient(135deg, rgba(238,238,238,0) 0%, rgba(216,216,216,0.1) 100%)",circle_progress_color:"#72C1F7",circle_progress_track_color:"#333333",crop_slider_tracker:"#1F272D",status_tag_bg:"#313336",progress_track:"linear-gradient( 270deg, #22A5FF 0%, #7CFFD0 100%)",skeleton_light:"linear-gradient( 270deg, #606060 0%, #313131 100%)",cetus_holding_bg:"radial-gradient(39% 39% at 0% 0%, #76FFC4 0%, rgba(15,15,15,0) 100%), #0F0F0F",xcetus_holding_bg:"radial-gradient(52% 39% at 0% 0%, #76CAFF 0%, rgba(15,15,15,0) 100%), #0F0F0F",xcetus_rewards_bg:"radial-gradient(39% 39% at 0% 0%, #FFCF76 0%, rgba(15,15,15,0) 100%), #0F0F0F",pending_yield_bg:"#192128",position_status_bg:"rgba(118, 200, 255, 0.1)",position_farms_bg:"rgba(203, 150, 255, 0.2)",position_farms_color:"rgba(203, 150, 255, 1)",modal_bg:"rgba(32, 32, 32, 0.8)",primary_opacity:{10:"rgba(117,200,255,0.1)",15:"rgba(117,200,255,0.15)",20:"rgba(117,200,255,0.2)",50:"rgba(117,200,255,0.5)",60:"rgba(117,200,255,0.6)"},primary_green_opacity:{10:"rgba(104,255,216,0.1)"},primary_yellow_opacity:{10:"rgba(255,202,104,0.1)"},primary_red_bg:"rgba(63, 35, 40,0.8)",primary_red_opacity:{10:"rgba(255,80,115,0.1)"},text_paragraph_opacity:{10:"rgba(144,156,164,0.1)",20:"rgba(144,156,164,0.2)"},text_highlight_opacity:{10:"rgba(114,193,247,0.1)",20:"rgba(114,193,247,0.2)",30:"rgba(114,193,247,0.3)"},block_color_opacity:{4:"rgba(0,0,0,0.04)",10:"rgba(0,0,0,0.1)",50:"rgba(0,0,0,0.5)",93:"rgba(0,0,0,0.93)",80:"rgba(0,0,0,0.8)"},white_color_opacity:{10:"rgba(255,255,255,0.1)",50:"rgba(255,255,255,0.5)",80:"rgba(255,255,255,0.8)"},frosted_glass:{1:"rgba(59,59,59,0.1)",5:"rgba(218,218,218,0.05)"},swap_bg_primary:"#1B242C",swap_bg_secondary:"#161A1E",swap_card_bg:"#161A1E",swap_card_bg_2:"rgba(114, 193, 247, 0.05)",swap_input_bg:"rgba(15,15,15,0.4)",swap_border:"rgba(114, 193, 247, 0.2)",text_haedal:"#C4A992"},styles={global:{"@font-face":{fontFamily:"Inter",fontWeight:"normal",fontStyle:"normal",fontDisplay:"swap"},"html body":{width:"100%",background:"background",fontFamily:"Inter"},body:{lineHeight:1},label:{fontFamily:"Inter"},button:{fontFamily:"Inter",_focusVisible:{boxShadow:"none",outline:"none"}},input:{fontFamily:"Inter",caretColor:"var(--chakra-colors-text_caption) !important"},".recharts-cartesian-axis-line":{display:"none"},".recharts-sector:focus":{outline:"none !important"},".recharts-cartesian-axis-ticks":{marginTop:"4px"},".chakra-input__right-element":{height:"100% !important"},".chakra-toast__inner":{button:{color:"text_paragraph",_hover:{color:"text_caption"}}},".exchange":{w:"40px",h:"44px",cursor:"pointer",bgSize:"100% auto",bgRepeat:"no-repeat",bgPosition:"center center",mt:"-20px",mb:"-2px",zIndex:9},".swap-exchange":{bgImage:'url("/images/btn_swap@2x.png")',_hover:{bgImage:'url("/images/btn_swap_hov@2x.png")'}},".liquidity-add":{bgImage:'url("/images/btn_add@2x.png")',_hover:{bgImage:'url("/images/btn_add_hov@2x.png")'}},".position-img":{bgImage:'url("/images/btn_add@2x.png")',_hover:{bgImage:'url("/images/btn_add@2x.png")'}},".confirm-order-img":{w:"30px",h:"33px",bgImage:'url("/images/btn_down@2x.png")',_hover:{bgImage:'url("/images/btn_down@2x.png")'}},".aprTooltip_btn":{display:"flex",alignItems:"center"},".delimiter":{fontFamily:"Inter",fontWeight:"normal"},"@keyframes rotate":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},".loading_animation":{animation:"rotate 1s linear infinite"},".price-historical-selection":{display:"none !important"},".price-historical-y-axis text":{display:"none"},".price-historical-y-axis line":{display:"none"},".price-historical-y-axis path":{display:"none"},".price-historical-x-axis line":{display:"none"},".price-historical-x-axis path":{display:"none"}}},config={initialColorMode:"dark",useSystemColorMode:!1},textStyles={caption:{fontWeight:400,lineHeight:"100%",color:"text_caption",fontFamily:"Inter"},paragraph:{fontWeight:400,lineHeight:"100%",color:"text_paragraph",fontFamily:"Inter"}},breakpoints={base:"0px",md:"500px",lg:"810px",xl:"1200px","2xl":"2500px"},theme=extendTheme({config,styles,textStyles,breakpoints,...foundations,components,semanticTokens:{colors},shadows:{trade_icon_shadow:"inset 0px 0px 6px 0px rgba(255,255,255,0.2)",aggregator_shadow:"inset 0px 0px 10px 0px rgba(0,152,255,0.2)"}});function TokenAvatar({coin_type:t,size:e="38px",src:n,variant:i,style:s={}}){return jsxRuntimeExports.jsx(Box,{w:e,h:e,minW:e,minH:e,maxW:e,maxH:e,borderRadius:"50%",children:jsxRuntimeExports.jsx(SingleCoinImage,{variant:i,imageUrl:n,w:e,h:e,borderRadius:"50%",coinType:t,p:"4px",imgBoxStyle:s})})}const TokenSelectModal$1=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>index$1),void 0));function CoinSelect$1({value:t,onSelect:e,loading:n,currentCoinKey:i,whiteTokenList:s,tokenStyle:a={},tokenSize:l="38px",symbolStyle:f={},wrapStyle:p={},isShowLabelTab:C=!0,isShowCollectListBox:B=!0,isShowTokenListTab:N=!0,disabled:le=!1,openSelectTokenModal:Ee,selectModalCallback:Ue}){const{isOpen:ze,onOpen:Ze,onClose:Qe}=useDisclosure(),[ct,wt]=reactExports.useState(!1),{pathname:qt}=useLocation();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button$1,{w:"100%",variant:"unstyled",display:"flex",alignItems:"center",gap:"8px",onClick:()=>{Ee?Ee():Ze(),Ue&&Ue(!0)},cursor:"pointer",onMouseEnter:()=>wt(!0),onMouseLeave:()=>wt(!1),isDisabled:le,...p,children:[n?jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(SkeletonCircle,{w:l,h:l}),jsxRuntimeExports.jsx(Skeleton,{h:f.fontSize||"16px"})]}):t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TokenAvatar,{variant:"border",src:(t==null?void 0:t.logo_url)||"",coin_type:t==null?void 0:t.coin_type,size:l,style:ct?{...a,borderColor:"token_active_border",boxShadow:"0px 0px 6px 0px #0067AD"}:a}),jsxRuntimeExports.jsx(Text$1,{color:"text_caption",fontSize:"16px",fontWeight:"600",...f,children:textEllipses((t==null?void 0:t.symbol)||"",10)})]}):jsxRuntimeExports.jsx(Text$1,{color:"text_caption",fontSize:"14px",fontWeight:"600",children:"Select a token"}),jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_arrow",fontSize:"12px",svgFill:ct?"text_caption":"text_paragraph"})]}),jsxRuntimeExports.jsx(TokenSelectModal$1,{tokenInfo:t,lastSelectedToken:(t==null?void 0:t.coin_type)||"",isOpen:ze,currentCoinKey:i,whiteTokenList:s,isShowLabelTab:C,isShowTokenListTab:N&&qt!=="/dca",isShowCollectListBox:B&&qt!=="/dca",onSelectToken:nr=>{e(nr)},onClose:()=>{Qe(),Ue&&Ue(!1)}})]})}const CoinSelect$2=reactExports.memo(CoinSelect$1),CoinSelect$3=Object.freeze(Object.defineProperty({__proto__:null,default:CoinSelect$2},Symbol.toStringTag,{value:"Module"})),uploadFilePath="/api/v1/upload";function useFileUpload(){const[t,e]=reactExports.useState(!1);return{doUploadFile:async i=>{const s=new FormData;s.append("file",i);try{e(!0);const a=`${envConfigs$1.pump_api.api_primary_domain}${uploadFilePath}`,l=await fetch(a,{method:"POST",body:s});if(!l.ok){const{error:p}=await l.json();throw p?new Error(p):new Error("Upload failed")}const f=await l.json();return console.log(" ~ file: useFileUpload.tsx:26 ~ doUploadFile ~ result:",f),f}catch(a){throw console.log(" ~ file: useFileUpload.tsx:29 ~ doUploadFile ~ error:",a.message),new Error(a.message)}finally{e(!1)}},uploadLoading:t}}const store$9=(t,e)=>({currentCrypto:"",setCurrentCrypto:n=>{t(()=>({currentCrypto:n}))},isShowAlchemyCrypto:!1,setIsShowAlchemyCrypto:n=>{t(()=>({isShowAlchemyCrypto:n}))},isShowKodoCrypto:!1,setIsShowKodoCrypto:n=>{t(()=>({isShowKodoCrypto:n}))}}),useCryptoStore=create(store$9),store$8=(t,e)=>({notifiAlerts:[],setNotifiAlerts:n=>{t(()=>({notifiAlerts:n}))},notifiSourceGroups:[],setNotifiSourceGroups:n=>{t(()=>({notifiSourceGroups:n}))},notifiSources:[],setNotifiSources:n=>{t(()=>({notifiSources:n}))},isChecked:!1,setIsChecked:n=>{t(()=>({isChecked:n}))},isShowNotifi:!1,setIsShowNotifi:n=>{t(()=>({isShowNotifi:n}))},notifiSubscriptionLoading:!1,setNotifiSubscriptionLoading:n=>{t(()=>({notifiSubscriptionLoading:n}))},notifiLoginLoading:!1,setNotifiLoginLoading:n=>{t(()=>({notifiLoginLoading:n}))},notifiClient:{},setNotifiClient:n=>{t(()=>({notifiClient:n}))},notifiStatus:"",setNotifiStatus:n=>{t(()=>({notifiStatus:n}))},defaultTargetGroup:[],setDefaultTargetGroup:n=>{t(()=>({defaultTargetGroup:n}))},notifiAccountAddress:"",setNotifiAccountAddress:n=>{t(()=>({notifiAccountAddress:n}))},emailTarget:{},setEmailTarget:n=>{t(()=>({emailTarget:n}))},telegramTarget:{},setTelegramTarget:n=>{t(()=>({telegramTarget:n}))},smsTarget:{},setSmsTarget:n=>{t(()=>({smsTarget:n}))}}),useNotifiStore=create(store$8);VariousTokensTable.getItem(NOTIFI_SIGNATURE).then(t=>{});const useToastStore=create((t,e)=>({toastId:0,accumulateToastId:()=>{const n=e().toastId+1;return t(()=>({toastId:n})),n}})),store$7=(t,e)=>({isLoading:!1,ownerAddress:void 0,tokenBalanceObj:{},setTokenBalanceObj:(n,i)=>{const{tokenBalanceObj:s,ownerAddress:a}=e();t(i!==a?()=>({tokenBalanceObj:{...n},ownerAddress:i}):()=>({tokenBalanceObj:{...s,...n},ownerAddress:i}))},setIsLoading:n=>{t(()=>({isLoading:n}))},clearData:()=>{t(()=>({tokenBalanceObj:{},ownerAddress:void 0}))}}),useTokenBalanceStore=create(persist(store$7,{name:"useTokenBalanceStore",version:1}));var x=24*60*60*1e3;function T$3(t){return Date.parse(new Date().toString())+t}var b$2=class{constructor(e,n=0){Or(this,"overdueTime");Or(this,"value");this.overdueTime=n,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};function S$2(t,e=32){return Number(BigInt.asIntN(e,BigInt(t)))}var D$1="0x2::coin::Coin",v$2=/^0x2::coin::Coin<(.+)>$/,P$1="0x2::sui::SUI",j$2="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",u=class{static getCoinTypeArg(t){let e=t.type.match(v$2);return e?e[1]:null}static isSUI(t){let e=u.getCoinTypeArg(t);return e?u.getCoinSymbol(e)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,e){let n=BigInt(0);return t.forEach(i=>{e===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${D$1}<${t}>`}static getFaucetCoins(t){let{events:e}=t,n=[];return e==null||e.forEach(i=>{let{type:s}=i;if(d$1(s).name==="InitEvent"){let a=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:a.suplyID,decimals:a.decimals})}}),n}static getCoinAssets(t,e){let n=[];return e.forEach(i=>{A$1(i.coinAddress)===A$1(t)&&n.push(i)}),n}static isSuiCoin(t){return d$1(t).full_address===P$1}static selectCoinObjectIdGreaterThanOrEqual(t,e,n=[]){let i=u.selectCoinAssetGreaterThanOrEqual(t,e,n),s=i.selectedCoins.map(f=>f.coinObjectId),a=i.remainingCoins,l=i.selectedCoins.map(f=>f.balance.toString());return{objectArray:s,remainCoins:a,amountArray:l}}static selectCoinAssetGreaterThanOrEqual(t,e,n=[]){let i=u.sortByBalance(t.filter(p=>!n.includes(p.coinObjectId))),s=u.calculateTotalBalance(i);if(s<e)return{selectedCoins:[],remainingCoins:i};if(s===e)return{selectedCoins:i,remainingCoins:[]};let a=BigInt(0),l=[],f=[...i];for(;a<s;){let p=e-a,C=f.findIndex(N=>N.balance>=p);if(C!==-1){l.push(f[C]),f.splice(C,1);break}let B=f.pop();B.balance>0&&(l.push(B),a+=B.balance)}return{selectedCoins:u.sortByBalance(l),remainingCoins:u.sortByBalance(f)}}static sortByBalance(t){return t.sort((e,n)=>e.balance<n.balance?-1:e.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((e,n)=>e.balance>n.balance?-1:e.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((e,n)=>e+n.balance,BigInt(0))}};function k$1(t){return t.startsWith("0x")?`${t.slice(2)}`:t}function I$3(t,...e){let n=Array.isArray(e[e.length-1])?e.pop():[],i=[t,...e].filter(Boolean).join("::");return n&&n.length&&(i+=`<${n.join(", ")}>`),i}function d$1(t){var e,n;try{let i=t.replace(/\s/g,""),s=(n=(e=i.match(/(<.+>)$/))==null?void 0:e[0])==null?void 0:n.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){i=i.slice(0,i.indexOf("<"));let f={...d$1(i),type_arguments:s.map(p=>d$1(p).source_address)};return f.type_arguments=f.type_arguments.map(p=>u.isSuiCoin(p)?p:d$1(p).source_address),f.source_address=I$3(f.full_address,f.type_arguments),f}let a=i.split("::"),l={full_address:i,address:i===P$1||i===j$2?"0x2":normalizeSuiObjectId$2(a[0]),module:a[1],name:a[2],type_arguments:[],source_address:""};return l.full_address=`${l.address}::${l.module}::${l.name}`,l.source_address=I$3(l.full_address,l.type_arguments),l}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function A$1(t){return d$1(t).source_address}function L(t){return t.toLowerCase().startsWith("0x")?normalizeSuiObjectId$2(t):t}var ee$2=(t,e=!0)=>{let n=t.split("::"),i=n.shift(),s=normalizeSuiObjectId$2(i);return e&&(s=k$1(s)),`${s}::${n.join("::")}`};function O$2(t){for(let e in t){let n=typeof t[e];if(n==="object")O$2(t[e]);else if(n==="string"){let i=t[e];i&&!i.includes("::")&&(t[e]=L(i))}}}var g=class{static buildBurnPositionNFT(t){var i;let e=t.position.fields,n=`Cetus Burned LP | Pool${(i=e.name.split("Pool"))==null?void 0:i[1]}`;return{id:t.id.id,url:e.url,pool_id:e.pool,coinTypeA:d$1(e.coin_type_a.fields.name).full_address,coinTypeB:d$1(e.coin_type_b.fields.name).full_address,description:e.description,name:n,liquidity:e.liquidity,clmm_position_id:e.id.id,clmm_pool_id:e.pool,tick_lower_index:S$2(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:S$2(BigInt(e.tick_upper_index.fields.bits)),index:e.index,is_lp_burn:!0}}},w$1="0x0000000000000000000000000000000000000000000000000000000000000006",h=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getHaveBurnPoolList(){var t,e,n,i,s,a,l,f;try{let{package_id:p,manager_id:C}=this._sdk.sdkOptions.burn,B=await this._sdk.fullClient.getObject({id:C,options:{showType:!0,showContent:!0}});console.log(" ~ file: burnModule.ts:32 ~ BurnModule ~ getHaveBurnPoolList ~ object:",B);let N=(a=(s=(i=(n=(e=(t=B==null?void 0:B.data)==null?void 0:t.content)==null?void 0:e.fields)==null?void 0:n.position)==null?void 0:i.fields)==null?void 0:s.id)==null?void 0:a.id;return(f=(l=await this._sdk.fullClient.getDynamicFieldsByPage(N))==null?void 0:l.data)==null?void 0:f.map(le=>{var Ee;return(Ee=le==null?void 0:le.name)==null?void 0:Ee.value})}catch(p){return console.log("getHaveBurnPoolList ~ error:",p),[]}}async getPositionHandle(t){let{burn_pool_handle:e}=this._sdk.sdkOptions.burn,n=`getPosHandle_${t}`,i=this._sdk.getCache(n);return i||(i=(await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}})).data.content.fields.value.fields.id.id,i&&this._sdk.updateCache(n,i),i)}async getPoolBurnPositionList(t){var e,n,i;try{let s=await this.getPositionHandle(t);if(s===void 0)throw Error("Not found posHandle");let a=(n=(e=await this._sdk.fullClient.getDynamicFieldsByPage(s))==null?void 0:e.data)==null?void 0:n.map(l=>l.objectId);if(a.length>0){let l=(await this._sdk.fullClient.batchGetObjects(a,{showContent:!0})).map(f=>f.data.content.fields.value.fields.burned_position_id);return(i=await this._sdk.fullClient.batchGetObjects(l,{showContent:!0}))==null?void 0:i.map(f=>{var p,C;return g.buildBurnPositionNFT((C=(p=f==null?void 0:f.data)==null?void 0:p.content)==null?void 0:C.fields)})}return[]}catch(s){return console.log("getPoolBurnPositionList ~ error:",s),[]}}async getBurnPositionList(t){var n,i;let{package_id:e}=this._sdk.sdkOptions.burn;return(i=(n=await this._sdk.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showOwner:!0,showDisplay:!0},filter:{MatchAny:[{StructType:`${e}::lp_burn::CetusLPBurnProof`}]}}))==null?void 0:n.data)==null?void 0:i.map(s=>{var a,l;return g.buildBurnPositionNFT((l=(a=s==null?void 0:s.data)==null?void 0:a.content)==null?void 0:l.fields)})}async getBurnPositon(t){var n,i,s,a;let e=await this._sdk.fullClient.getObject({id:t,options:{showContent:!0,showType:!0}});return(i=(n=e==null?void 0:e.data)==null?void 0:n.content)!=null&&i.fields?g.buildBurnPositionNFT((a=(s=e==null?void 0:e.data)==null?void 0:s.content)==null?void 0:a.fields):null}createBurnPayload(t,e){e=e||new Transaction$1;let n=typeof t.pos=="string"?e.object(t.pos):t.pos,{published_at:i,manager_id:s}=this._sdk.sdkOptions.burn,a=`${i}::lp_burn::burn`;return e.moveCall({target:a,arguments:[e.object(s),e.object(t.pool),n],typeArguments:[t.coinTypeA,t.coinTypeB]}),e}createBurnLPV2Payload(t,e){e=e||new Transaction$1;let n=typeof t=="string"?e.object(t):t,{published_at:i,manager_id:s}=this._sdk.sdkOptions.burn,a=`${i}::lp_burn::burn_lp_v2`,[l]=e.moveCall({target:a,arguments:[e.object(s),n],typeArguments:[]});return l}createCollectFeePaylaod(t,e){e=e||new Transaction$1;let{published_at:n,manager_id:i,clmm_global_config:s}=this._sdk.sdkOptions.burn,a=`${n}::lp_burn::collect_fee`,l=e.moveCall({target:a,arguments:[e.object(i),e.object(s),e.object(t.pool),e.object(t.pos)],typeArguments:[t.coinTypeA,t.coinTypeB]});return e.transferObjects([l[0]],e.pure.address(t.account)),e.transferObjects([l[1]],e.pure.address(t.account)),e}crateCollectRewardPayload(t,e){var f,p;e=e||new Transaction$1;let{published_at:n,manager_id:i,clmm_global_config:s,clmm_global_vault_id:a}=this._sdk.sdkOptions.burn,l=`${n}::lp_burn::collect_reward`;for(let C=0;C<((f=t.rewarderCoinTypes)==null?void 0:f.length);C++){let B=(p=t.rewarderCoinTypes)==null?void 0:p[C],N=e.moveCall({target:l,arguments:[e.object(i),e.object(s),e.object(t.pool),e.object(t.pos),e.object(a),e.object(w$1)],typeArguments:[t.coinTypeA,t.coinTypeB,B]});e.transferObjects([N],e.pure.address(t.account))}return e}createCollectFeesPaylaod(t,e){e=e||new Transaction$1;let{published_at:n,manager_id:i,clmm_global_config:s}=this._sdk.sdkOptions.burn,a=`${n}::lp_burn::collect_fee`;for(let l=0;l<t.length;l++){let f=t[l],p=e.moveCall({target:a,arguments:[e.object(i),e.object(s),e.object(f.pool),e.object(f.pos)],typeArguments:[f.coinTypeA,f.coinTypeB]});e.transferObjects([p[0]],e.pure.address(f.account)),e.transferObjects([p[1]],e.pure.address(f.account))}return e}crateCollectRewardsPayload(t,e){var f,p;e=e||new Transaction$1;let{published_at:n,manager_id:i,clmm_global_config:s,clmm_global_vault_id:a}=this._sdk.sdkOptions.burn,l=`${n}::lp_burn::collect_reward`;for(let C=0;C<t.length;C++){let B=t[C];for(let N=0;N<((f=B.rewarderCoinTypes)==null?void 0:f.length);N++){let le=(p=B.rewarderCoinTypes)==null?void 0:p[N],Ee=e.moveCall({target:l,arguments:[e.object(i),e.object(s),e.object(B.pool),e.object(B.pos),e.object(a),e.object(w$1)],typeArguments:[B.coinTypeA,B.coinTypeB,le]});e.transferObjects([Ee],e.pure.address(B.account))}}return e}},y=class extends SuiClient$1{async queryEventsByPage(t,e="all"){let n=[],i=!0,s=e==="all",a=s?null:e.cursor;do{let l=await this.queryEvents({query:t,cursor:a,limit:s?null:e.limit});l.data?(n=[...n,...l.data],i=l.hasNextPage,a=l.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:a,hasNextPage:i}}async getOwnedObjectsByPage(t,e,n="all"){let i=[],s=!0,a=n==="all",l=a?null:n.cursor;do{let f=await this.getOwnedObjects({owner:t,...e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async getDynamicFieldsByPage(t,e="all"){let n=[],i=!0,s=e==="all",a=s?null:e.cursor;do{let l=await this.getDynamicFields({parentId:t,cursor:a,limit:s?null:e.limit});l.data?(n=[...n,...l.data],i=l.hasNextPage,a=l.nextCursor):i=!1}while(s&&i);return{data:n,nextCursor:a,hasNextPage:i}}async batchGetObjects(t,e,n=50){let i=[];try{for(let s=0;s<Math.ceil(t.length/n);s++){let a=await this.multiGetObjects({ids:t.slice(s*n,n*(s+1)),options:e});i=[...i,...a]}}catch(s){console.log(s)}return i}async calculationTxGas(t){let{sender:e}=t.blockData;if(e===void 0)throw Error("sdk sender is empty");let n=await this.devInspectTransactionBlock({transactionBlock:t,sender:e}),{gasUsed:i}=n.effects;return Number(i.computationCost)+Number(i.storageCost)-Number(i.storageRebate)}async sendTransaction(t,e){try{return await this.signAndExecuteTransaction({transaction:e,signer:t,options:{showEffects:!0,showEvents:!0}})}catch(n){console.log("error: ",n)}}async sendSimulationTransaction(t,e,n=!0){try{if(n)return await this.devInspectTransactionBlock({transactionBlock:t,sender:e})}catch(i){console.log("devInspectTransactionBlock error",i)}}},_$1=class{constructor(e){Or(this,"_cache",{});Or(this,"_rpcModule");Or(this,"_sdkOptions");Or(this,"_senderAddress","");Or(this,"_burn");this._sdkOptions=e,this._rpcModule=new y({url:e.fullRpcUrl}),this._burn=new h(this),O$2(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Burn(){return this._burn}getVerifySenderAddress(){if(this.senderAddress.length===0||!isValidSuiAddress$2(this.senderAddress))throw Error("this clmm config sdk senderAddess is illegal");return this.senderAddress}async getOwnerCoinAssets(e,n,i=!0){let s=[],a=null,l=`${this.sdkOptions.fullRpcUrl}_${e}_${n}_getOwnerCoinAssets`,f=this.getCache(l,i);if(f)return f;for(;;){let p=await(n?this.fullClient.getCoins({owner:e,coinType:n,cursor:a}):this.fullClient.getAllCoins({owner:e,cursor:a}));if(p.data.forEach(C=>{BigInt(C.balance)>0&&s.push({coinAddress:d$1(C.coinType).source_address,coinObjectId:C.coinObjectId,balance:BigInt(C.balance)})}),a=p.nextCursor,!p.hasNextPage)break}return this.updateCache(l,s,30*1e3),s}async getOwnerCoinBalances(e,n){let i=[];return n?i=[await this.fullClient.getBalance({owner:e,coinType:n})]:i=[...await this.fullClient.getAllBalances({owner:e})],i}updateCache(e,n,i=x){let s=this._cache[e];s?(s.overdueTime=T$3(i),s.value=n):s=new b$2(n,T$3(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e],s=i==null?void 0:i.isValid();if(!n&&s)return i.value;s||delete this._cache[e]}};const store$6=(t,e)=>({coinPriceObj:{},setPriceObj:n=>{const i=e().coinPriceObj;t({coinPriceObj:{...i,...n}})},clearPriceObj:n=>{const i=e().coinPriceObj;n.forEach(s=>{delete i[d$1(s).full_address]}),t({coinPriceObj:{...i}})}}),useTokenPriceStore=create(store$6),useTransactionStore=create((t,e)=>({manualCloseIdList:[],transactionModalVisible:!1,transactionData:void 0,setTransactionModalVisible:n=>{t(()=>({transactionModalVisible:n}))},setTransactionData:n=>{t(()=>({transactionData:n}))},setManualCloseId:n=>{t(i=>({manualCloseIdList:[...i.manualCloseIdList,n]}))}})),store$5=(t,e)=>({addressChangeVersion:0,accounts:[],currentAccount:void 0,isOpenWalletModal:!1,connectCallback:null,saveCurrentAccount:n=>{var a;const i=(a=e().currentAccount)==null?void 0:a.address,s=e().addressChangeVersion;i&&n&&i!==n.address?t({currentAccount:n,addressChangeVersion:s+1}):t({currentAccount:n})},saveAccounts:n=>{t({accounts:n})},onWalletModal:n=>{t({isOpenWalletModal:n})},accountServiceNameObj:{},setAccountServiceNameObj:n=>{const i=e().accountServiceNameObj;t({accountServiceNameObj:{...i,...n}})},setConnectCallback:n=>{t({connectCallback:n})}}),useAccountStore=create(persist(store$5,{name:"useAccountStore",partialize:t=>{const{accountServiceNameObj:e}=t;return{accountServiceNameObj:e}},version:3}));console.log(" ~ useClmmSDKStore.ts:2 ~ envConfigs:",envConfigs$1);const store$4=(t,e)=>({isInitLoading:!1,clmmSdk:new CetusClmmSDK(envConfigs$1.clmm_sdk_options),aggregatorSDK:new AggregatorClient25({signer:envConfigs$1.clmm_sdk_options.simulationAccount.address,client:new SuiClient$1({url:envConfigs$1.clmm_sdk_options.fullRpcUrl}),env:envConfigs$1.env==="testnet"?Env.Testnet:Env.Mainnet,pythUrls:envConfigs$1.pythUrls}),setClmmSdk:n=>{t(()=>({clmmSdk:n}))},setAggregatorSDK:n=>{t(()=>({aggregatorSDK:n}))},setIsInitLoading:n=>{t(()=>({isInitLoading:n}))}}),useClmmSDKStore=create(store$4),store$3=(t,e)=>({domains:[envConfigs$1.cetus_api],unhealthyDomains:[],currentDomain:envConfigs$1.cetus_api,setCurrentDomain:n=>{t(()=>({currentDomain:n}))},setUnhealthyDomains:n=>{t(()=>({unhealthyDomains:[...e().unhealthyDomains,n]}))}}),useGlobalApiDomainStore=create(store$3),defaultMainnetNodes=[{name:"Sui Official",link:"https://fullnode.mainnet.sui.io"},{name:"BlockVision",link:"https://sui-mainnet-endpoint.blockvision.org"},{name:"BlockVision 2",link:"https://cetus-mainnet-endpoint.blockvision.org"},{name:"Suiet",link:"https://mainnet.suiet.app:443"},{name:"Blast",link:"https://sui-mainnet.blastapi.io/5e2b3e4f-dc83-432b-86d1-70fb73e88187"},{name:"Suiscan",link:"https://rpc-mainnet.suiscan.xyz:443"},{name:"Triton",link:"https://cetus-suimain-e31f.mainnet.sui.rpcpool.com"},{name:"Custom",link:""}],defaultMainnetExplorers=[{name:"SuiVision",link:"https://suivision.xyz",img:"/images/img_suivision@2x.png"},{name:"Suiscan",link:"https://suiscan.xyz/mainnet",img:"/images/img_suiscan@2x.png"}],defaultNodes=defaultMainnetNodes,defaultNode=defaultMainnetNodes[0],defaultExplorers=defaultMainnetExplorers,defaultExplorer=defaultMainnetExplorers[0],suiWalletList=[{name:"Slush Wallet",walletName:"Slush  A Sui wallet",url:"https://chromewebstore.google.com/detail/slush-%E2%80%94-a-sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",icon:"slush"},{name:"Sui Wallet",walletName:"Sui Wallet",url:"https://chrome.google.com/webstore/detail/sui-wallet/opcgpfmipidbgpenhmajoajpbobppdil",icon:"sui-wallet-icon"},{name:"Phantom",walletName:"Phantom",url:"https://chromewebstore.google.com/detail/phantom/bfnaelmomeimhlpmgjnjophhpkkoljpa",icon:"phantom"},{name:"OKX",walletName:"OKX Wallet",url:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge",icon:"okx"},{name:"Suiet",walletName:"Suiet",url:"https://chrome.google.com/webstore/detail/suiet-sui-wallet/khpkpbbcccdmmclmpigdgddabeilkdpd",icon:"suiet-icon"},{name:"Binance",walletName:"Binance Wallet",url:"https://chromewebstore.google.com/detail/%E5%B8%81%E5%AE%89%E9%93%BE%E9%92%B1%E5%8C%85/fhbohimaelbohpjbbldcngcnapndodjp?hl=zh-CN&utm_source=ext_sidebar",icon:"binance"},{name:"Stashed",walletName:"Stashed",url:"https://getstashed.com",icon:"stashed"},{name:"Bybit Wallet",walletName:"Bybit Wallet",url:"https://chromewebstore.google.com/search/Bybit%20Wallet?hl=zh-CN&utm_source=ext_sidebar",icon:"bybit"},{name:"Gate",walletName:"Gate Wallet",url:"https://chromewebstore.google.com/detail/gate-wallet/cpmkedoipcpimgecpmgpldfpohjplkpp",icon:"gate"},{name:"Bitget Wallet",walletName:"Bitget Wallet",url:"https://chrome.google.com/webstore/detail/bitkeep-bitcoin-crypto-wa/jiidiaalihmmhddjgbnbgdfflelocpak",icon:"bitget"},{name:"SuiMetaMaskSnap",walletName:"Sui MetaMask Snap",url:"https://suisnap.com",icon:"metamask"},{name:"Surf",walletName:"Surf Wallet",url:"https://chrome.google.com/webstore/detail/surf-wallet/emeeapjkbcbpbpgaagfchmcgglmebnen",icon:"surf"},{name:"Coin98",walletName:"Coin98",url:"https://chrome.google.com/webstore/detail/coin98-wallet/aeachknmefphepccionboohckonoeemg",icon:"coin98"},{name:"MSafe",walletName:"MSafe Wallet",url:"https://sui.m-safe.io/",icon:"msafe"},{name:"OneKey",walletName:"OneKey Wallet",url:"https://chromewebstore.google.com/detail/onekey/jnmbobjmhlngoefaiojfljckilhhlhcj",icon:"onekey"},{name:"TokenPocket",walletName:"TokenPocket Wallet",url:"https://chrome.google.com/webstore/detail/tokenpocket/mfgccjchihfkkindfppnaooecgfneiii",icon:"tokenpocket"},{name:"Nightly",walletName:"Nightly",url:"https://chrome.google.com/webstore/detail/nightly/fiikommddbeccaoicoejoniammnalkfa",icon:"nightly"},{name:"Martian",walletName:"Martian Sui Wallet",url:"https://chrome.google.com/webstore/detail/martian-wallet/efbglgofoippbgcjepnhiblaibcnclgk",icon:"martian"},{name:"Fewcha",walletName:"Fewcha Move Wallet",url:"https://fewcha.app/",icon:"fewcha"},{name:"SafePal",walletName:"SafePal",url:"https://chrome.google.com/webstore/detail/safepal-extension-wallet/lgmpcpglpngdoalbgeoldeajfclnhafa",icon:"safepal"},{name:"Math",walletName:"MathWallet",url:"https://mathwallet.org/",icon:"math"},{name:"Backpack",walletName:"Backpack",url:"https://chromewebstore.google.com/detail/backpack/aflkmfhebedbjioipglgcbcmnbpgliof",icon:"backpack"}],store$2=(t,e)=>({rpcSpeed:{},currentExplorer:defaultExplorer,explorerList:[...defaultExplorers],currentNode:{...defaultNode},nodes:[...defaultNodes],switchNode:n=>{t(()=>({currentNode:n}))},switchExplorer:n=>{t(()=>({currentExplorer:n}))},setNodeList:n=>{t(()=>({nodes:[...n]}))},setRpcSpeed:n=>{t(()=>({rpcSpeed:n}))}}),useRpcConfigStore=create(persist(store$2,{name:"useRpcConfigStore",version:4})),store$1=(t,e)=>({deepbookV3Config:null,providers:["CETUS"],isBuyCryptoConfirm:!1,setIsBuyCryptoConfirm:n=>{t(()=>({isBuyCryptoConfirm:n}))},isTerm:!1,setIsTerm:n=>{t(()=>({isTerm:n}))},setProviders:n=>{t(()=>({providers:n}))},setDeepbookV3Config:n=>{t(()=>({deepbookV3Config:n}))},isSwapWidgetDisplay:!0,setIsSwapWidgetDisplay:n=>{t(()=>({isSwapWidgetDisplay:n}))},showSwapWidgetTips:!0,setShowSwapWidgetTips:n=>{t(()=>({showSwapWidgetTips:n}))}}),useWebConfigStore=create(persist(store$1,{name:"useWebConfigStore",version:3}));function useGlobalToast(){const{accumulateToastId:t}=useToastStore(),e=useToast({position:"top-right",duration:5e3,containerStyle:{maxW:"660px"}}),n=B=>B||`toast${t()}`;return{closeToast:B=>{e.close(B)},successTsToast:B=>{const{transactionId:N}=B,le=n(N);return e({id:le,render:()=>jsxRuntimeExports.jsx(Toast,{...B,transactionId:le,status:"success",onClose:()=>e.close(le)})}),le},failedTsToast:B=>{const{transactionId:N}=B,le=n(N);return e({id:le,render:()=>jsxRuntimeExports.jsx(Toast,{...B,transactionId:le,status:"rejected",onClose:()=>e.close(le)})}),le},submittedTsToast:B=>{const{transactionId:N}=B,le=n(N);return e({id:le,render:()=>jsxRuntimeExports.jsx(Toast,{...B,transactionId:le,status:"submitted",onClose:()=>e.close(le)})}),le},closeAllToast:()=>{e.closeAll()},customToast:B=>{const N=n();return e({id:N,render:()=>jsxRuntimeExports.jsx(CustomToast,{onClose:()=>e.close(N),children:B})}),N},showCommonToast:(B,N="success",le)=>{const Ee=n(),Ue={getShowInfo:()=>({toastTitleText:B,toastDescriptionContent:le})};return e({id:Ee,render:()=>jsxRuntimeExports.jsx(Toast,{...Ue,transactionId:Ee,status:N,onClose:()=>e.close(Ee)})}),Ee}}}var cryptoJs={exports:{}},core={exports:{}},cryptoBrowserify={},browser$b={exports:{}},safeBuffer$1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(t,e){var n=require$$1$3,i=n.Buffer;function s(l,f){for(var p in l)f[p]=l[p]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=a);function a(l,f,p){return i(l,f,p)}a.prototype=Object.create(i.prototype),s(i,a),a.from=function(l,f,p){if(typeof l=="number")throw new TypeError("Argument must not be a number");return i(l,f,p)},a.alloc=function(l,f,p){if(typeof l!="number")throw new TypeError("Argument must be a number");var C=i(l);return f!==void 0?typeof p=="string"?C.fill(f,p):C.fill(f):C.fill(0),C},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b.exports;hasRequiredBrowser$b=1;var t=65536,e=4294967295;function n(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var i=requireSafeBuffer$1().Buffer,s=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto;s&&s.getRandomValues?browser$b.exports=a:browser$b.exports=n;function a(l,f){if(l>e)throw new RangeError("requested too many random bytes");var p=i.allocUnsafe(l);if(l>0)if(l>t)for(var C=0;C<l;C+=t)s.getRandomValues(p.slice(C,C+t));else s.getRandomValues(p);return typeof f=="function"?process$1.nextTick(function(){f(null,p)}):p}return browser$b.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var i=function(){};i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(nr,ir,or){return Function.prototype.apply.call(nr,ir,or)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(nr){return Object.getOwnPropertyNames(nr).concat(Object.getOwnPropertySymbols(nr))}:n=function(nr){return Object.getOwnPropertyNames(nr)};function i(qt){console&&console.warn&&console.warn(qt)}var s=Number.isNaN||function(nr){return nr!==nr};function a(){a.init.call(this)}events.exports=a,events.exports.once=Qe,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function f(qt){if(typeof qt!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof qt)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(qt){if(typeof qt!="number"||qt<0||s(qt))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+qt+".");l=qt}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(nr){if(typeof nr!="number"||nr<0||s(nr))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+nr+".");return this._maxListeners=nr,this};function p(qt){return qt._maxListeners===void 0?a.defaultMaxListeners:qt._maxListeners}a.prototype.getMaxListeners=function(){return p(this)},a.prototype.emit=function(nr){for(var ir=[],or=1;or<arguments.length;or++)ir.push(arguments[or]);var ur=nr==="error",hr=this._events;if(hr!==void 0)ur=ur&&hr.error===void 0;else if(!ur)return!1;if(ur){var fr;if(ir.length>0&&(fr=ir[0]),fr instanceof Error)throw fr;var ar=new Error("Unhandled error."+(fr?" ("+fr.message+")":""));throw ar.context=fr,ar}var Lt=hr[nr];if(Lt===void 0)return!1;if(typeof Lt=="function")e(Lt,this,ir);else for(var Vt=Lt.length,tt=Ue(Lt,Vt),or=0;or<Vt;++or)e(tt[or],this,ir);return!0};function C(qt,nr,ir,or){var ur,hr,fr;if(f(ir),hr=qt._events,hr===void 0?(hr=qt._events=Object.create(null),qt._eventsCount=0):(hr.newListener!==void 0&&(qt.emit("newListener",nr,ir.listener?ir.listener:ir),hr=qt._events),fr=hr[nr]),fr===void 0)fr=hr[nr]=ir,++qt._eventsCount;else if(typeof fr=="function"?fr=hr[nr]=or?[ir,fr]:[fr,ir]:or?fr.unshift(ir):fr.push(ir),ur=p(qt),ur>0&&fr.length>ur&&!fr.warned){fr.warned=!0;var ar=new Error("Possible EventEmitter memory leak detected. "+fr.length+" "+String(nr)+" listeners added. Use emitter.setMaxListeners() to increase limit");ar.name="MaxListenersExceededWarning",ar.emitter=qt,ar.type=nr,ar.count=fr.length,i(ar)}return qt}a.prototype.addListener=function(nr,ir){return C(this,nr,ir,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(nr,ir){return C(this,nr,ir,!0)};function B(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function N(qt,nr,ir){var or={fired:!1,wrapFn:void 0,target:qt,type:nr,listener:ir},ur=B.bind(or);return ur.listener=ir,or.wrapFn=ur,ur}a.prototype.once=function(nr,ir){return f(ir),this.on(nr,N(this,nr,ir)),this},a.prototype.prependOnceListener=function(nr,ir){return f(ir),this.prependListener(nr,N(this,nr,ir)),this},a.prototype.removeListener=function(nr,ir){var or,ur,hr,fr,ar;if(f(ir),ur=this._events,ur===void 0)return this;if(or=ur[nr],or===void 0)return this;if(or===ir||or.listener===ir)--this._eventsCount===0?this._events=Object.create(null):(delete ur[nr],ur.removeListener&&this.emit("removeListener",nr,or.listener||ir));else if(typeof or!="function"){for(hr=-1,fr=or.length-1;fr>=0;fr--)if(or[fr]===ir||or[fr].listener===ir){ar=or[fr].listener,hr=fr;break}if(hr<0)return this;hr===0?or.shift():ze(or,hr),or.length===1&&(ur[nr]=or[0]),ur.removeListener!==void 0&&this.emit("removeListener",nr,ar||ir)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(nr){var ir,or,ur;if(or=this._events,or===void 0)return this;if(or.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):or[nr]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete or[nr]),this;if(arguments.length===0){var hr=Object.keys(or),fr;for(ur=0;ur<hr.length;++ur)fr=hr[ur],fr!=="removeListener"&&this.removeAllListeners(fr);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ir=or[nr],typeof ir=="function")this.removeListener(nr,ir);else if(ir!==void 0)for(ur=ir.length-1;ur>=0;ur--)this.removeListener(nr,ir[ur]);return this};function le(qt,nr,ir){var or=qt._events;if(or===void 0)return[];var ur=or[nr];return ur===void 0?[]:typeof ur=="function"?ir?[ur.listener||ur]:[ur]:ir?Ze(ur):Ue(ur,ur.length)}a.prototype.listeners=function(nr){return le(this,nr,!0)},a.prototype.rawListeners=function(nr){return le(this,nr,!1)},a.listenerCount=function(qt,nr){return typeof qt.listenerCount=="function"?qt.listenerCount(nr):Ee.call(qt,nr)},a.prototype.listenerCount=Ee;function Ee(qt){var nr=this._events;if(nr!==void 0){var ir=nr[qt];if(typeof ir=="function")return 1;if(ir!==void 0)return ir.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function Ue(qt,nr){for(var ir=new Array(nr),or=0;or<nr;++or)ir[or]=qt[or];return ir}function ze(qt,nr){for(;nr+1<qt.length;nr++)qt[nr]=qt[nr+1];qt.pop()}function Ze(qt){for(var nr=new Array(qt.length),ir=0;ir<nr.length;++ir)nr[ir]=qt[ir].listener||qt[ir];return nr}function Qe(qt,nr){return new Promise(function(ir,or){function ur(fr){qt.removeListener(nr,hr),or(fr)}function hr(){typeof qt.removeListener=="function"&&qt.removeListener("error",ur),ir([].slice.call(arguments))}wt(qt,nr,hr,{once:!0}),nr!=="error"&&ct(qt,ur,{once:!0})})}function ct(qt,nr,ir){typeof qt.on=="function"&&wt(qt,"error",nr,ir)}function wt(qt,nr,ir,or){if(typeof qt.on=="function")or.once?qt.once(nr,ir):qt.on(nr,ir);else if(typeof qt.addEventListener=="function")qt.addEventListener(nr,function ur(hr){or.once&&qt.removeEventListener(nr,ur),ir(hr)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof qt)}return events.exports}var streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$4={},types={},shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[n]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var f=Object.getOwnPropertyDescriptor(e,n);if(f.value!==s||f.enumerable!==!0)return!1}return!0}),shams$1}var shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var t=requireShams$1();return shams=function(){return t()&&!!Symbol.toStringTag},shams}var esObjectAtoms,hasRequiredEsObjectAtoms;function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms||(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object),esObjectAtoms}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range=RangeError),range}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var abs,hasRequiredAbs;function requireAbs(){return hasRequiredAbs||(hasRequiredAbs=1,abs=Math.abs),abs}var floor,hasRequiredFloor;function requireFloor(){return hasRequiredFloor||(hasRequiredFloor=1,floor=Math.floor),floor}var max,hasRequiredMax;function requireMax(){return hasRequiredMax||(hasRequiredMax=1,max=Math.max),max}var min,hasRequiredMin;function requireMin(){return hasRequiredMin||(hasRequiredMin=1,min=Math.min),min}var pow,hasRequiredPow;function requirePow(){return hasRequiredPow||(hasRequiredPow=1,pow=Math.pow),pow}var round,hasRequiredRound;function requireRound(){return hasRequiredRound||(hasRequiredRound=1,round=Math.round),round}var _isNaN,hasRequired_isNaN;function require_isNaN(){return hasRequired_isNaN||(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!==e}),_isNaN}var sign$1,hasRequiredSign$1;function requireSign$1(){if(hasRequiredSign$1)return sign$1;hasRequiredSign$1=1;var t=require_isNaN();return sign$1=function(n){return t(n)||n===0?n:n<0?-1:1},sign$1}var gOPD,hasRequiredGOPD;function requireGOPD(){return hasRequiredGOPD||(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor),gOPD}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var t=requireGOPD();if(t)try{t([],"length")}catch{t=null}return gopd=t,gopd}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return esDefineProperty=t,esDefineProperty}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var t=typeof Symbol<"u"&&Symbol,e=requireShams$1();return hasSymbols=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},hasSymbols}var Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf;function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf||(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Reflect_getPrototypeOf}var Object_getPrototypeOf,hasRequiredObject_getPrototypeOf;function requireObject_getPrototypeOf(){if(hasRequiredObject_getPrototypeOf)return Object_getPrototypeOf;hasRequiredObject_getPrototypeOf=1;var t=requireEsObjectAtoms();return Object_getPrototypeOf=t.getPrototypeOf||null,Object_getPrototypeOf}var implementation,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,n=Math.max,i="[object Function]",s=function(p,C){for(var B=[],N=0;N<p.length;N+=1)B[N]=p[N];for(var le=0;le<C.length;le+=1)B[le+p.length]=C[le];return B},a=function(p,C){for(var B=[],N=C,le=0;N<p.length;N+=1,le+=1)B[le]=p[N];return B},l=function(f,p){for(var C="",B=0;B<f.length;B+=1)C+=f[B],B+1<f.length&&(C+=p);return C};return implementation=function(p){var C=this;if(typeof C!="function"||e.apply(C)!==i)throw new TypeError(t+C);for(var B=a(arguments,1),N,le=function(){if(this instanceof N){var Qe=C.apply(this,s(B,arguments));return Object(Qe)===Qe?Qe:this}return C.apply(p,s(B,arguments))},Ee=n(0,C.length-B.length),Ue=[],ze=0;ze<Ee;ze++)Ue[ze]="$"+ze;if(N=Function("binder","return function ("+l(Ue,",")+"){ return binder.apply(this,arguments); }")(le),C.prototype){var Ze=function(){};Ze.prototype=C.prototype,N.prototype=new Ze,Ze.prototype=null}return N},implementation}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var t=requireImplementation();return functionBind=Function.prototype.bind||t,functionBind}var functionCall,hasRequiredFunctionCall;function requireFunctionCall(){return hasRequiredFunctionCall||(hasRequiredFunctionCall=1,functionCall=Function.prototype.call),functionCall}var functionApply,hasRequiredFunctionApply;function requireFunctionApply(){return hasRequiredFunctionApply||(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply),functionApply}var reflectApply,hasRequiredReflectApply;function requireReflectApply(){return hasRequiredReflectApply||(hasRequiredReflectApply=1,reflectApply=typeof Reflect<"u"&&Reflect&&Reflect.apply),reflectApply}var actualApply,hasRequiredActualApply;function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var t=requireFunctionBind(),e=requireFunctionApply(),n=requireFunctionCall(),i=requireReflectApply();return actualApply=i||t.call(n,e),actualApply}var callBindApplyHelpers,hasRequiredCallBindApplyHelpers;function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var t=requireFunctionBind(),e=requireType(),n=requireFunctionCall(),i=requireActualApply();return callBindApplyHelpers=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return i(t,n,a)},callBindApplyHelpers}var get,hasRequiredGet;function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var t=requireCallBindApplyHelpers(),e=requireGopd(),n;try{n=[].__proto__===Array.prototype}catch(l){if(!l||typeof l!="object"||!("code"in l)||l.code!=="ERR_PROTO_ACCESS")throw l}var i=!!n&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return get=i&&typeof i.get=="function"?t([i.get]):typeof a=="function"?function(f){return a(f==null?f:s(f))}:!1,get}var getProto,hasRequiredGetProto;function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var t=requireReflect_getPrototypeOf(),e=requireObject_getPrototypeOf(),n=requireGet();return getProto=t?function(s){return t(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:n?function(s){return n(s)}:null,getProto}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=requireFunctionBind();return hasown=n.call(t,e),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var t,e=requireEsObjectAtoms(),n=requireEsErrors(),i=require_eval(),s=requireRange(),a=requireRef(),l=requireSyntax(),f=requireType(),p=requireUri(),C=requireAbs(),B=requireFloor(),N=requireMax(),le=requireMin(),Ee=requirePow(),Ue=requireRound(),ze=requireSign$1(),Ze=Function,Qe=function($r){try{return Ze('"use strict"; return ('+$r+").constructor;")()}catch{}},ct=requireGopd(),wt=requireEsDefineProperty(),qt=function(){throw new f},nr=ct?function(){try{return arguments.callee,qt}catch{try{return ct(arguments,"callee").get}catch{return qt}}}():qt,ir=requireHasSymbols()(),or=requireGetProto(),ur=requireObject_getPrototypeOf(),hr=requireReflect_getPrototypeOf(),fr=requireFunctionApply(),ar=requireFunctionCall(),Lt={},Vt=typeof Uint8Array>"u"||!or?t:or(Uint8Array),tt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":ir&&or?or([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":Lt,"%AsyncGenerator%":Lt,"%AsyncGeneratorFunction%":Lt,"%AsyncIteratorPrototype%":Lt,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":Ze,"%GeneratorFunction%":Lt,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ir&&or?or(or([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ir||!or?t:or(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":ct,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ir||!or?t:or(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ir&&or?or(""[Symbol.iterator]()):t,"%Symbol%":ir?Symbol:t,"%SyntaxError%":l,"%ThrowTypeError%":nr,"%TypedArray%":Vt,"%TypeError%":f,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":ar,"%Function.prototype.apply%":fr,"%Object.defineProperty%":wt,"%Object.getPrototypeOf%":ur,"%Math.abs%":C,"%Math.floor%":B,"%Math.max%":N,"%Math.min%":le,"%Math.pow%":Ee,"%Math.round%":Ue,"%Math.sign%":ze,"%Reflect.getPrototypeOf%":hr};if(or)try{null.error}catch($r){var Ye=or(or($r));tt["%Error.prototype%"]=Ye}var ot=function $r(pr){var lr;if(pr==="%AsyncFunction%")lr=Qe("async function () {}");else if(pr==="%GeneratorFunction%")lr=Qe("function* () {}");else if(pr==="%AsyncGeneratorFunction%")lr=Qe("async function* () {}");else if(pr==="%AsyncGenerator%"){var cr=$r("%AsyncGeneratorFunction%");cr&&(lr=cr.prototype)}else if(pr==="%AsyncIteratorPrototype%"){var yr=$r("%AsyncGenerator%");yr&&or&&(lr=or(yr.prototype))}return tt[pr]=lr,lr},Et={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},er=requireFunctionBind(),rr=requireHasown(),yt=er.call(ar,Array.prototype.concat),tr=er.call(fr,Array.prototype.splice),Ut=er.call(ar,String.prototype.replace),Ft=er.call(ar,String.prototype.slice),sr=er.call(ar,RegExp.prototype.exec),vr=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_r=/\\(\\)?/g,dr=function(pr){var lr=Ft(pr,0,1),cr=Ft(pr,-1);if(lr==="%"&&cr!=="%")throw new l("invalid intrinsic syntax, expected closing `%`");if(cr==="%"&&lr!=="%")throw new l("invalid intrinsic syntax, expected opening `%`");var yr=[];return Ut(pr,vr,function(Sr,Ar,Tr,xr){yr[yr.length]=Tr?Ut(xr,_r,"$1"):Ar||Sr}),yr},gr=function(pr,lr){var cr=pr,yr;if(rr(Et,cr)&&(yr=Et[cr],cr="%"+yr[0]+"%"),rr(tt,cr)){var Sr=tt[cr];if(Sr===Lt&&(Sr=ot(cr)),typeof Sr>"u"&&!lr)throw new f("intrinsic "+pr+" exists, but is not available. Please file an issue!");return{alias:yr,name:cr,value:Sr}}throw new l("intrinsic "+pr+" does not exist!")};return getIntrinsic=function(pr,lr){if(typeof pr!="string"||pr.length===0)throw new f("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof lr!="boolean")throw new f('"allowMissing" argument must be a boolean');if(sr(/^%?[^%]*%?$/,pr)===null)throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var cr=dr(pr),yr=cr.length>0?cr[0]:"",Sr=gr("%"+yr+"%",lr),Ar=Sr.name,Tr=Sr.value,xr=!1,Cr=Sr.alias;Cr&&(yr=Cr[0],tr(cr,yt([0,1],Cr)));for(var wr=1,Er=!0;wr<cr.length;wr+=1){var kr=cr[wr],Br=Ft(kr,0,1),Rr=Ft(kr,-1);if((Br==='"'||Br==="'"||Br==="`"||Rr==='"'||Rr==="'"||Rr==="`")&&Br!==Rr)throw new l("property names with quotes must have matching quotes");if((kr==="constructor"||!Er)&&(xr=!0),yr+="."+kr,Ar="%"+yr+"%",rr(tt,Ar))Tr=tt[Ar];else if(Tr!=null){if(!(kr in Tr)){if(!lr)throw new f("base intrinsic for "+pr+" exists, but the property is not available.");return}if(ct&&wr+1>=cr.length){var Ir=ct(Tr,kr);Er=!!Ir,Er&&"get"in Ir&&!("originalValue"in Ir.get)?Tr=Ir.get:Tr=Tr[kr]}else Er=rr(Tr,kr),Tr=Tr[kr];Er&&!xr&&(tt[Ar]=Tr)}}return Tr},getIntrinsic}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var t=requireGetIntrinsic(),e=requireCallBindApplyHelpers(),n=e([t("%String.prototype.indexOf%")]);return callBound=function(s,a){var l=t(s,!!a);return typeof l=="function"&&n(s,".prototype.")>-1?e([l]):l},callBound}var isArguments,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var t=requireShams()(),e=requireCallBound(),n=e("Object.prototype.toString"),i=function(f){return t&&f&&typeof f=="object"&&Symbol.toStringTag in f?!1:n(f)==="[object Arguments]"},s=function(f){return i(f)?!0:f!==null&&typeof f=="object"&&"length"in f&&typeof f.length=="number"&&f.length>=0&&n(f)!=="[object Array]"&&"callee"in f&&n(f.callee)==="[object Function]"},a=function(){return i(arguments)}();return i.isLegacyArguments=s,isArguments=a?i:s,isArguments}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var t=requireCallBound(),e=requireShams()(),n=requireHasown(),i=requireGopd(),s;if(e){var a=t("RegExp.prototype.exec"),l={},f=function(){throw l},p={toString:f,valueOf:f};typeof Symbol.toPrimitive=="symbol"&&(p[Symbol.toPrimitive]=f),s=function(le){if(!le||typeof le!="object")return!1;var Ee=i(le,"lastIndex"),Ue=Ee&&n(Ee,"value");if(!Ue)return!1;try{a(le,p)}catch(ze){return ze===l}}}else{var C=t("Object.prototype.toString"),B="[object RegExp]";s=function(le){return!le||typeof le!="object"&&typeof le!="function"?!1:C(le)===B}}return isRegex=s,isRegex}var safeRegexTest,hasRequiredSafeRegexTest;function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var t=requireCallBound(),e=requireIsRegex(),n=t("RegExp.prototype.exec"),i=requireType();return safeRegexTest=function(a){if(!e(a))throw new i("`regex` must be a RegExp");return function(f){return n(a,f)!==null}},safeRegexTest}var isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var t=requireCallBound(),e=requireSafeRegexTest(),n=e(/^\s*(?:function)?\*/),i=requireShams()(),s=requireGetProto(),a=t("Object.prototype.toString"),l=t("Function.prototype.toString"),f=function(){if(!i)return!1;try{return Function("return function*() {}")()}catch{}},p;return isGeneratorFunction=function(B){if(typeof B!="function")return!1;if(n(l(B)))return!0;if(!i){var N=a(B);return N==="[object GeneratorFunction]"}if(!s)return!1;if(typeof p>"u"){var le=f();p=le?s(le):!1}return s(B)===p},isGeneratorFunction}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var t=Function.prototype.toString,e=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,n,i;if(typeof e=="function"&&typeof Object.defineProperty=="function")try{n=Object.defineProperty({},"length",{get:function(){throw i}}),i={},e(function(){throw 42},null,n)}catch(ct){ct!==i&&(e=null)}else e=null;var s=/^\s*class\b/,a=function(wt){try{var qt=t.call(wt);return s.test(qt)}catch{return!1}},l=function(wt){try{return a(wt)?!1:(t.call(wt),!0)}catch{return!1}},f=Object.prototype.toString,p="[object Object]",C="[object Function]",B="[object GeneratorFunction]",N="[object HTMLAllCollection]",le="[object HTML document.all class]",Ee="[object HTMLCollection]",Ue=typeof Symbol=="function"&&!!Symbol.toStringTag,ze=!(0 in[,]),Ze=function(){return!1};if(typeof document=="object"){var Qe=document.all;f.call(Qe)===f.call(document.all)&&(Ze=function(wt){if((ze||!wt)&&(typeof wt>"u"||typeof wt=="object"))try{var qt=f.call(wt);return(qt===N||qt===le||qt===Ee||qt===p)&&wt("")==null}catch{}return!1})}return isCallable=e?function(wt){if(Ze(wt))return!0;if(!wt||typeof wt!="function"&&typeof wt!="object")return!1;try{e(wt,null,n)}catch(qt){if(qt!==i)return!1}return!a(wt)&&l(wt)}:function(wt){if(Ze(wt))return!0;if(!wt||typeof wt!="function"&&typeof wt!="object")return!1;if(Ue)return l(wt);if(a(wt))return!1;var qt=f.call(wt);return qt!==C&&qt!==B&&!/^\[object HTML/.test(qt)?!1:l(wt)},isCallable}var forEach,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach;hasRequiredForEach=1;var t=requireIsCallable(),e=Object.prototype.toString,n=Object.prototype.hasOwnProperty,i=function(p,C,B){for(var N=0,le=p.length;N<le;N++)n.call(p,N)&&(B==null?C(p[N],N,p):C.call(B,p[N],N,p))},s=function(p,C,B){for(var N=0,le=p.length;N<le;N++)B==null?C(p.charAt(N),N,p):C.call(B,p.charAt(N),N,p)},a=function(p,C,B){for(var N in p)n.call(p,N)&&(B==null?C(p[N],N,p):C.call(B,p[N],N,p))};function l(f){return e.call(f)==="[object Array]"}return forEach=function(p,C,B){if(!t(C))throw new TypeError("iterator must be a function");var N;arguments.length>=3&&(N=B),l(p)?i(p,C,N):typeof p=="string"?s(p,C,N):a(p,C,N)},forEach}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var t=requirePossibleTypedArrayNames(),e=typeof globalThis>"u"?commonjsGlobal$1:globalThis;return availableTypedArrays=function(){for(var i=[],s=0;s<t.length;s++)typeof e[t[s]]=="function"&&(i[i.length]=t[s]);return i},availableTypedArrays}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var t=requireEsDefineProperty(),e=requireSyntax(),n=requireType(),i=requireGopd();return defineDataProperty=function(a,l,f){if(!a||typeof a!="object"&&typeof a!="function")throw new n("`obj` must be an object or a function`");if(typeof l!="string"&&typeof l!="symbol")throw new n("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new n("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new n("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new n("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new n("`loose`, if provided, must be a boolean");var p=arguments.length>3?arguments[3]:null,C=arguments.length>4?arguments[4]:null,B=arguments.length>5?arguments[5]:null,N=arguments.length>6?arguments[6]:!1,le=!!i&&i(a,l);if(t)t(a,l,{configurable:B===null&&le?le.configurable:!B,enumerable:p===null&&le?le.enumerable:!p,value:f,writable:C===null&&le?le.writable:!C});else if(N||!p&&!C&&!B)a[l]=f;else throw new e("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var t=requireEsDefineProperty(),e=function(){return!!t};return e.hasArrayLengthDefineBug=function(){if(!t)return null;try{return t([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=e,hasPropertyDescriptors_1}var setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var t=requireGetIntrinsic(),e=requireDefineDataProperty(),n=requireHasPropertyDescriptors()(),i=requireGopd(),s=requireType(),a=t("%Math.floor%");return setFunctionLength=function(f,p){if(typeof f!="function")throw new s("`fn` is not a function");if(typeof p!="number"||p<0||p>4294967295||a(p)!==p)throw new s("`length` must be a positive 32-bit integer");var C=arguments.length>2&&!!arguments[2],B=!0,N=!0;if("length"in f&&i){var le=i(f,"length");le&&!le.configurable&&(B=!1),le&&!le.writable&&(N=!1)}return(B||N||!C)&&(n?e(f,"length",p,!0,!0):e(f,"length",p)),f},setFunctionLength}var applyBind,hasRequiredApplyBind;function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var t=requireFunctionBind(),e=requireFunctionApply(),n=requireActualApply();return applyBind=function(){return n(t,e,arguments)},applyBind}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(t){var e=requireSetFunctionLength(),n=requireEsDefineProperty(),i=requireCallBindApplyHelpers(),s=requireApplyBind();t.exports=function(l){var f=i(arguments),p=l.length-(arguments.length-1);return e(f,1+(p>0?p:0),!0)},n?n(t.exports,"apply",{value:s}):t.exports.apply=s}(callBind)),callBind.exports}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var t=requireForEach(),e=requireAvailableTypedArrays(),n=requireCallBind(),i=requireCallBound(),s=requireGopd(),a=requireGetProto(),l=i("Object.prototype.toString"),f=requireShams()(),p=typeof globalThis>"u"?commonjsGlobal$1:globalThis,C=e(),B=i("String.prototype.slice"),N=i("Array.prototype.indexOf",!0)||function(Ze,Qe){for(var ct=0;ct<Ze.length;ct+=1)if(Ze[ct]===Qe)return ct;return-1},le={__proto__:null};f&&s&&a?t(C,function(ze){var Ze=new p[ze];if(Symbol.toStringTag in Ze&&a){var Qe=a(Ze),ct=s(Qe,Symbol.toStringTag);if(!ct&&Qe){var wt=a(Qe);ct=s(wt,Symbol.toStringTag)}le["$"+ze]=n(ct.get)}}):t(C,function(ze){var Ze=new p[ze],Qe=Ze.slice||Ze.set;Qe&&(le["$"+ze]=n(Qe))});var Ee=function(Ze){var Qe=!1;return t(le,function(ct,wt){if(!Qe)try{"$"+ct(Ze)===wt&&(Qe=B(wt,1))}catch{}}),Qe},Ue=function(Ze){var Qe=!1;return t(le,function(ct,wt){if(!Qe)try{ct(Ze),Qe=B(wt,1)}catch{}}),Qe};return whichTypedArray=function(Ze){if(!Ze||typeof Ze!="object")return!1;if(!f){var Qe=B(l(Ze),8,-1);return N(C,Qe)>-1?Qe:Qe!=="Object"?!1:Ue(Ze)}return s?Ee(Ze):null},whichTypedArray}var isTypedArray,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray;hasRequiredIsTypedArray=1;var t=requireWhichTypedArray();return isTypedArray=function(n){return!!t(n)},isTypedArray}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(t){var e=requireIsArguments(),n=requireIsGeneratorFunction(),i=requireWhichTypedArray(),s=requireIsTypedArray();function a(wr){return wr.call.bind(wr)}var l=typeof BigInt<"u",f=typeof Symbol<"u",p=a(Object.prototype.toString),C=a(Number.prototype.valueOf),B=a(String.prototype.valueOf),N=a(Boolean.prototype.valueOf);if(l)var le=a(BigInt.prototype.valueOf);if(f)var Ee=a(Symbol.prototype.valueOf);function Ue(wr,Er){if(typeof wr!="object")return!1;try{return Er(wr),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=s;function ze(wr){return typeof Promise<"u"&&wr instanceof Promise||wr!==null&&typeof wr=="object"&&typeof wr.then=="function"&&typeof wr.catch=="function"}t.isPromise=ze;function Ze(wr){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(wr):s(wr)||Ft(wr)}t.isArrayBufferView=Ze;function Qe(wr){return i(wr)==="Uint8Array"}t.isUint8Array=Qe;function ct(wr){return i(wr)==="Uint8ClampedArray"}t.isUint8ClampedArray=ct;function wt(wr){return i(wr)==="Uint16Array"}t.isUint16Array=wt;function qt(wr){return i(wr)==="Uint32Array"}t.isUint32Array=qt;function nr(wr){return i(wr)==="Int8Array"}t.isInt8Array=nr;function ir(wr){return i(wr)==="Int16Array"}t.isInt16Array=ir;function or(wr){return i(wr)==="Int32Array"}t.isInt32Array=or;function ur(wr){return i(wr)==="Float32Array"}t.isFloat32Array=ur;function hr(wr){return i(wr)==="Float64Array"}t.isFloat64Array=hr;function fr(wr){return i(wr)==="BigInt64Array"}t.isBigInt64Array=fr;function ar(wr){return i(wr)==="BigUint64Array"}t.isBigUint64Array=ar;function Lt(wr){return p(wr)==="[object Map]"}Lt.working=typeof Map<"u"&&Lt(new Map);function Vt(wr){return typeof Map>"u"?!1:Lt.working?Lt(wr):wr instanceof Map}t.isMap=Vt;function tt(wr){return p(wr)==="[object Set]"}tt.working=typeof Set<"u"&&tt(new Set);function Ye(wr){return typeof Set>"u"?!1:tt.working?tt(wr):wr instanceof Set}t.isSet=Ye;function ot(wr){return p(wr)==="[object WeakMap]"}ot.working=typeof WeakMap<"u"&&ot(new WeakMap);function Et(wr){return typeof WeakMap>"u"?!1:ot.working?ot(wr):wr instanceof WeakMap}t.isWeakMap=Et;function er(wr){return p(wr)==="[object WeakSet]"}er.working=typeof WeakSet<"u"&&er(new WeakSet);function rr(wr){return er(wr)}t.isWeakSet=rr;function yt(wr){return p(wr)==="[object ArrayBuffer]"}yt.working=typeof ArrayBuffer<"u"&&yt(new ArrayBuffer);function tr(wr){return typeof ArrayBuffer>"u"?!1:yt.working?yt(wr):wr instanceof ArrayBuffer}t.isArrayBuffer=tr;function Ut(wr){return p(wr)==="[object DataView]"}Ut.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Ut(new DataView(new ArrayBuffer(1),0,1));function Ft(wr){return typeof DataView>"u"?!1:Ut.working?Ut(wr):wr instanceof DataView}t.isDataView=Ft;var sr=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function vr(wr){return p(wr)==="[object SharedArrayBuffer]"}function _r(wr){return typeof sr>"u"?!1:(typeof vr.working>"u"&&(vr.working=vr(new sr)),vr.working?vr(wr):wr instanceof sr)}t.isSharedArrayBuffer=_r;function dr(wr){return p(wr)==="[object AsyncFunction]"}t.isAsyncFunction=dr;function gr(wr){return p(wr)==="[object Map Iterator]"}t.isMapIterator=gr;function $r(wr){return p(wr)==="[object Set Iterator]"}t.isSetIterator=$r;function pr(wr){return p(wr)==="[object Generator]"}t.isGeneratorObject=pr;function lr(wr){return p(wr)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=lr;function cr(wr){return Ue(wr,C)}t.isNumberObject=cr;function yr(wr){return Ue(wr,B)}t.isStringObject=yr;function Sr(wr){return Ue(wr,N)}t.isBooleanObject=Sr;function Ar(wr){return l&&Ue(wr,le)}t.isBigIntObject=Ar;function Tr(wr){return f&&Ue(wr,Ee)}t.isSymbolObject=Tr;function xr(wr){return cr(wr)||yr(wr)||Sr(wr)||Ar(wr)||Tr(wr)}t.isBoxedPrimitive=xr;function Cr(wr){return typeof Uint8Array<"u"&&(tr(wr)||_r(wr))}t.isAnyArrayBuffer=Cr,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(wr){Object.defineProperty(t,wr,{enumerable:!1,value:function(){throw new Error(wr+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(t){var e={},n=Object.getOwnPropertyDescriptors||function(sr){for(var vr=Object.keys(sr),_r={},dr=0;dr<vr.length;dr++)_r[vr[dr]]=Object.getOwnPropertyDescriptor(sr,vr[dr]);return _r},i=/%[sdj%]/g;t.format=function(Ft){if(!ir(Ft)){for(var sr=[],vr=0;vr<arguments.length;vr++)sr.push(f(arguments[vr]));return sr.join(" ")}for(var vr=1,_r=arguments,dr=_r.length,gr=String(Ft).replace(i,function(pr){if(pr==="%%")return"%";if(vr>=dr)return pr;switch(pr){case"%s":return String(_r[vr++]);case"%d":return Number(_r[vr++]);case"%j":try{return JSON.stringify(_r[vr++])}catch{return"[Circular]"}default:return pr}}),$r=_r[vr];vr<dr;$r=_r[++vr])wt($r)||!fr($r)?gr+=" "+$r:gr+=" "+f($r);return gr},t.deprecate=function(Ft,sr){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return Ft;if(typeof process$1>"u")return function(){return t.deprecate(Ft,sr).apply(this,arguments)};var vr=!1;function _r(){if(!vr){if(process$1.throwDeprecation)throw new Error(sr);process$1.traceDeprecation?console.trace(sr):console.error(sr),vr=!0}return Ft.apply(this,arguments)}return _r};var s={},a=/^$/;if(e.NODE_DEBUG){var l=e.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+l+"$","i")}t.debuglog=function(Ft){if(Ft=Ft.toUpperCase(),!s[Ft])if(a.test(Ft)){var sr=process$1.pid;s[Ft]=function(){var vr=t.format.apply(t,arguments);console.error("%s %d: %s",Ft,sr,vr)}}else s[Ft]=function(){};return s[Ft]};function f(Ft,sr){var vr={seen:[],stylize:C};return arguments.length>=3&&(vr.depth=arguments[2]),arguments.length>=4&&(vr.colors=arguments[3]),ct(sr)?vr.showHidden=sr:sr&&t._extend(vr,sr),ur(vr.showHidden)&&(vr.showHidden=!1),ur(vr.depth)&&(vr.depth=2),ur(vr.colors)&&(vr.colors=!1),ur(vr.customInspect)&&(vr.customInspect=!0),vr.colors&&(vr.stylize=p),N(vr,Ft,vr.depth)}t.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function p(Ft,sr){var vr=f.styles[sr];return vr?"\x1B["+f.colors[vr][0]+"m"+Ft+"\x1B["+f.colors[vr][1]+"m":Ft}function C(Ft,sr){return Ft}function B(Ft){var sr={};return Ft.forEach(function(vr,_r){sr[vr]=!0}),sr}function N(Ft,sr,vr){if(Ft.customInspect&&sr&&Vt(sr.inspect)&&sr.inspect!==t.inspect&&!(sr.constructor&&sr.constructor.prototype===sr)){var _r=sr.inspect(vr,Ft);return ir(_r)||(_r=N(Ft,_r,vr)),_r}var dr=le(Ft,sr);if(dr)return dr;var gr=Object.keys(sr),$r=B(gr);if(Ft.showHidden&&(gr=Object.getOwnPropertyNames(sr)),Lt(sr)&&(gr.indexOf("message")>=0||gr.indexOf("description")>=0))return Ee(sr);if(gr.length===0){if(Vt(sr)){var pr=sr.name?": "+sr.name:"";return Ft.stylize("[Function"+pr+"]","special")}if(hr(sr))return Ft.stylize(RegExp.prototype.toString.call(sr),"regexp");if(ar(sr))return Ft.stylize(Date.prototype.toString.call(sr),"date");if(Lt(sr))return Ee(sr)}var lr="",cr=!1,yr=["{","}"];if(Qe(sr)&&(cr=!0,yr=["[","]"]),Vt(sr)){var Sr=sr.name?": "+sr.name:"";lr=" [Function"+Sr+"]"}if(hr(sr)&&(lr=" "+RegExp.prototype.toString.call(sr)),ar(sr)&&(lr=" "+Date.prototype.toUTCString.call(sr)),Lt(sr)&&(lr=" "+Ee(sr)),gr.length===0&&(!cr||sr.length==0))return yr[0]+lr+yr[1];if(vr<0)return hr(sr)?Ft.stylize(RegExp.prototype.toString.call(sr),"regexp"):Ft.stylize("[Object]","special");Ft.seen.push(sr);var Ar;return cr?Ar=Ue(Ft,sr,vr,$r,gr):Ar=gr.map(function(Tr){return ze(Ft,sr,vr,$r,Tr,cr)}),Ft.seen.pop(),Ze(Ar,lr,yr)}function le(Ft,sr){if(ur(sr))return Ft.stylize("undefined","undefined");if(ir(sr)){var vr="'"+JSON.stringify(sr).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Ft.stylize(vr,"string")}if(nr(sr))return Ft.stylize(""+sr,"number");if(ct(sr))return Ft.stylize(""+sr,"boolean");if(wt(sr))return Ft.stylize("null","null")}function Ee(Ft){return"["+Error.prototype.toString.call(Ft)+"]"}function Ue(Ft,sr,vr,_r,dr){for(var gr=[],$r=0,pr=sr.length;$r<pr;++$r)rr(sr,String($r))?gr.push(ze(Ft,sr,vr,_r,String($r),!0)):gr.push("");return dr.forEach(function(lr){lr.match(/^\d+$/)||gr.push(ze(Ft,sr,vr,_r,lr,!0))}),gr}function ze(Ft,sr,vr,_r,dr,gr){var $r,pr,lr;if(lr=Object.getOwnPropertyDescriptor(sr,dr)||{value:sr[dr]},lr.get?lr.set?pr=Ft.stylize("[Getter/Setter]","special"):pr=Ft.stylize("[Getter]","special"):lr.set&&(pr=Ft.stylize("[Setter]","special")),rr(_r,dr)||($r="["+dr+"]"),pr||(Ft.seen.indexOf(lr.value)<0?(wt(vr)?pr=N(Ft,lr.value,null):pr=N(Ft,lr.value,vr-1),pr.indexOf(`
`)>-1&&(gr?pr=pr.split(`
`).map(function(cr){return"  "+cr}).join(`
`).slice(2):pr=`
`+pr.split(`
`).map(function(cr){return"   "+cr}).join(`
`))):pr=Ft.stylize("[Circular]","special")),ur($r)){if(gr&&dr.match(/^\d+$/))return pr;$r=JSON.stringify(""+dr),$r.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?($r=$r.slice(1,-1),$r=Ft.stylize($r,"name")):($r=$r.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),$r=Ft.stylize($r,"string"))}return $r+": "+pr}function Ze(Ft,sr,vr){var _r=Ft.reduce(function(dr,gr){return gr.indexOf(`
`)>=0,dr+gr.replace(/\u001b\[\d\d?m/g,"").length+1},0);return _r>60?vr[0]+(sr===""?"":sr+`
 `)+" "+Ft.join(`,
  `)+" "+vr[1]:vr[0]+sr+" "+Ft.join(", ")+" "+vr[1]}t.types=requireTypes();function Qe(Ft){return Array.isArray(Ft)}t.isArray=Qe;function ct(Ft){return typeof Ft=="boolean"}t.isBoolean=ct;function wt(Ft){return Ft===null}t.isNull=wt;function qt(Ft){return Ft==null}t.isNullOrUndefined=qt;function nr(Ft){return typeof Ft=="number"}t.isNumber=nr;function ir(Ft){return typeof Ft=="string"}t.isString=ir;function or(Ft){return typeof Ft=="symbol"}t.isSymbol=or;function ur(Ft){return Ft===void 0}t.isUndefined=ur;function hr(Ft){return fr(Ft)&&Ye(Ft)==="[object RegExp]"}t.isRegExp=hr,t.types.isRegExp=hr;function fr(Ft){return typeof Ft=="object"&&Ft!==null}t.isObject=fr;function ar(Ft){return fr(Ft)&&Ye(Ft)==="[object Date]"}t.isDate=ar,t.types.isDate=ar;function Lt(Ft){return fr(Ft)&&(Ye(Ft)==="[object Error]"||Ft instanceof Error)}t.isError=Lt,t.types.isNativeError=Lt;function Vt(Ft){return typeof Ft=="function"}t.isFunction=Vt;function tt(Ft){return Ft===null||typeof Ft=="boolean"||typeof Ft=="number"||typeof Ft=="string"||typeof Ft=="symbol"||typeof Ft>"u"}t.isPrimitive=tt,t.isBuffer=requireIsBufferBrowser();function Ye(Ft){return Object.prototype.toString.call(Ft)}function ot(Ft){return Ft<10?"0"+Ft.toString(10):Ft.toString(10)}var Et=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function er(){var Ft=new Date,sr=[ot(Ft.getHours()),ot(Ft.getMinutes()),ot(Ft.getSeconds())].join(":");return[Ft.getDate(),Et[Ft.getMonth()],sr].join(" ")}t.log=function(){console.log("%s - %s",er(),t.format.apply(t,arguments))},t.inherits=requireInherits_browser(),t._extend=function(Ft,sr){if(!sr||!fr(sr))return Ft;for(var vr=Object.keys(sr),_r=vr.length;_r--;)Ft[vr[_r]]=sr[vr[_r]];return Ft};function rr(Ft,sr){return Object.prototype.hasOwnProperty.call(Ft,sr)}var yt=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(sr){if(typeof sr!="function")throw new TypeError('The "original" argument must be of type Function');if(yt&&sr[yt]){var vr=sr[yt];if(typeof vr!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(vr,yt,{value:vr,enumerable:!1,writable:!1,configurable:!0}),vr}function vr(){for(var _r,dr,gr=new Promise(function(lr,cr){_r=lr,dr=cr}),$r=[],pr=0;pr<arguments.length;pr++)$r.push(arguments[pr]);$r.push(function(lr,cr){lr?dr(lr):_r(cr)});try{sr.apply(this,$r)}catch(lr){dr(lr)}return gr}return Object.setPrototypeOf(vr,Object.getPrototypeOf(sr)),yt&&Object.defineProperty(vr,yt,{value:vr,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(vr,n(sr))},t.promisify.custom=yt;function tr(Ft,sr){if(!Ft){var vr=new Error("Promise was rejected with a falsy value");vr.reason=Ft,Ft=vr}return sr(Ft)}function Ut(Ft){if(typeof Ft!="function")throw new TypeError('The "original" argument must be of type Function');function sr(){for(var vr=[],_r=0;_r<arguments.length;_r++)vr.push(arguments[_r]);var dr=vr.pop();if(typeof dr!="function")throw new TypeError("The last argument must be of type Function");var gr=this,$r=function(){return dr.apply(gr,arguments)};Ft.apply(this,vr).then(function(pr){process$1.nextTick($r.bind(null,null,pr))},function(pr){process$1.nextTick(tr.bind(null,pr,$r))})}return Object.setPrototypeOf(sr,Object.getPrototypeOf(Ft)),Object.defineProperties(sr,n(Ft)),sr}t.callbackify=Ut}(util$4)),util$4}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(Ue,ze){var Ze=Object.keys(Ue);if(Object.getOwnPropertySymbols){var Qe=Object.getOwnPropertySymbols(Ue);ze&&(Qe=Qe.filter(function(ct){return Object.getOwnPropertyDescriptor(Ue,ct).enumerable})),Ze.push.apply(Ze,Qe)}return Ze}function e(Ue){for(var ze=1;ze<arguments.length;ze++){var Ze=arguments[ze]!=null?arguments[ze]:{};ze%2?t(Object(Ze),!0).forEach(function(Qe){n(Ue,Qe,Ze[Qe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ue,Object.getOwnPropertyDescriptors(Ze)):t(Object(Ze)).forEach(function(Qe){Object.defineProperty(Ue,Qe,Object.getOwnPropertyDescriptor(Ze,Qe))})}return Ue}function n(Ue,ze,Ze){return ze=l(ze),ze in Ue?Object.defineProperty(Ue,ze,{value:Ze,enumerable:!0,configurable:!0,writable:!0}):Ue[ze]=Ze,Ue}function i(Ue,ze){if(!(Ue instanceof ze))throw new TypeError("Cannot call a class as a function")}function s(Ue,ze){for(var Ze=0;Ze<ze.length;Ze++){var Qe=ze[Ze];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(Ue,l(Qe.key),Qe)}}function a(Ue,ze,Ze){return ze&&s(Ue.prototype,ze),Object.defineProperty(Ue,"prototype",{writable:!1}),Ue}function l(Ue){var ze=f(Ue,"string");return typeof ze=="symbol"?ze:String(ze)}function f(Ue,ze){if(typeof Ue!="object"||Ue===null)return Ue;var Ze=Ue[Symbol.toPrimitive];if(Ze!==void 0){var Qe=Ze.call(Ue,ze);if(typeof Qe!="object")return Qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ue)}var p=require$$1$3,C=p.Buffer,B=requireUtil$1(),N=B.inspect,le=N&&N.custom||"inspect";function Ee(Ue,ze,Ze){C.prototype.copy.call(Ue,ze,Ze)}return buffer_list=function(){function Ue(){i(this,Ue),this.head=null,this.tail=null,this.length=0}return a(Ue,[{key:"push",value:function(Ze){var Qe={data:Ze,next:null};this.length>0?this.tail.next=Qe:this.head=Qe,this.tail=Qe,++this.length}},{key:"unshift",value:function(Ze){var Qe={data:Ze,next:this.head};this.length===0&&(this.tail=Qe),this.head=Qe,++this.length}},{key:"shift",value:function(){if(this.length!==0){var Ze=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,Ze}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(Ze){if(this.length===0)return"";for(var Qe=this.head,ct=""+Qe.data;Qe=Qe.next;)ct+=Ze+Qe.data;return ct}},{key:"concat",value:function(Ze){if(this.length===0)return C.alloc(0);for(var Qe=C.allocUnsafe(Ze>>>0),ct=this.head,wt=0;ct;)Ee(ct.data,Qe,wt),wt+=ct.data.length,ct=ct.next;return Qe}},{key:"consume",value:function(Ze,Qe){var ct;return Ze<this.head.data.length?(ct=this.head.data.slice(0,Ze),this.head.data=this.head.data.slice(Ze)):Ze===this.head.data.length?ct=this.shift():ct=Qe?this._getString(Ze):this._getBuffer(Ze),ct}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(Ze){var Qe=this.head,ct=1,wt=Qe.data;for(Ze-=wt.length;Qe=Qe.next;){var qt=Qe.data,nr=Ze>qt.length?qt.length:Ze;if(nr===qt.length?wt+=qt:wt+=qt.slice(0,Ze),Ze-=nr,Ze===0){nr===qt.length?(++ct,Qe.next?this.head=Qe.next:this.head=this.tail=null):(this.head=Qe,Qe.data=qt.slice(nr));break}++ct}return this.length-=ct,wt}},{key:"_getBuffer",value:function(Ze){var Qe=C.allocUnsafe(Ze),ct=this.head,wt=1;for(ct.data.copy(Qe),Ze-=ct.data.length;ct=ct.next;){var qt=ct.data,nr=Ze>qt.length?qt.length:Ze;if(qt.copy(Qe,Qe.length-Ze,0,nr),Ze-=nr,Ze===0){nr===qt.length?(++wt,ct.next?this.head=ct.next:this.head=this.tail=null):(this.head=ct,ct.data=qt.slice(nr));break}++wt}return this.length-=wt,Qe}},{key:le,value:function(Ze,Qe){return N(this,e(e({},Qe),{},{depth:0,customInspect:!1}))}}]),Ue}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function t(l,f){var p=this,C=this._readableState&&this._readableState.destroyed,B=this._writableState&&this._writableState.destroyed;return C||B?(f?f(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(s,this,l)):process$1.nextTick(s,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(N){!f&&N?p._writableState?p._writableState.errorEmitted?process$1.nextTick(n,p):(p._writableState.errorEmitted=!0,process$1.nextTick(e,p,N)):process$1.nextTick(e,p,N):f?(process$1.nextTick(n,p),f(N)):process$1.nextTick(n,p)}),this)}function e(l,f){s(l,f),n(l)}function n(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(l,f){l.emit("error",f)}function a(l,f){var p=l._readableState,C=l._writableState;p&&p.autoDestroy||C&&C.autoDestroy?l.destroy(f):l.emit("error",f)}return destroy_1$1={destroy:t,undestroy:i,errorOrDestroy:a},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(f,p){f.prototype=Object.create(p.prototype),f.prototype.constructor=f,f.__proto__=p}var e={};function n(f,p,C){C||(C=Error);function B(le,Ee,Ue){return typeof p=="string"?p:p(le,Ee,Ue)}var N=function(le){t(Ee,le);function Ee(Ue,ze,Ze){return le.call(this,B(Ue,ze,Ze))||this}return Ee}(C);N.prototype.name=C.name,N.prototype.code=f,e[f]=N}function i(f,p){if(Array.isArray(f)){var C=f.length;return f=f.map(function(B){return String(B)}),C>2?"one of ".concat(p," ").concat(f.slice(0,C-1).join(", "),", or ")+f[C-1]:C===2?"one of ".concat(p," ").concat(f[0]," or ").concat(f[1]):"of ".concat(p," ").concat(f[0])}else return"of ".concat(p," ").concat(String(f))}function s(f,p,C){return f.substr(0,p.length)===p}function a(f,p,C){return(C===void 0||C>f.length)&&(C=f.length),f.substring(C-p.length,C)===p}function l(f,p,C){return typeof C!="number"&&(C=0),C+p.length>f.length?!1:f.indexOf(p,C)!==-1}return n("ERR_INVALID_OPT_VALUE",function(f,p){return'The value "'+p+'" is invalid for option "'+f+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(f,p,C){var B;typeof p=="string"&&s(p,"not ")?(B="must not be",p=p.replace(/^not /,"")):B="must be";var N;if(a(f," argument"))N="The ".concat(f," ").concat(B," ").concat(i(p,"type"));else{var le=l(f,".")?"property":"argument";N='The "'.concat(f,'" ').concat(le," ").concat(B," ").concat(i(p,"type"))}return N+=". Received type ".concat(typeof C),N},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(f){return"The "+f+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(f){return"Cannot call "+f+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(f){return"Unknown encoding: "+f},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(i,s,a){return i.highWaterMark!=null?i.highWaterMark:s?i[a]:null}function n(i,s,a,l){var f=e(s,l,a);if(f!=null){if(!(isFinite(f)&&Math.floor(f)===f)||f<0){var p=l?a:"highWaterMark";throw new t(p,f)}return Math.floor(f)}return i.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var browser$a,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1,browser$a=t;function t(n,i){if(e("noDeprecation"))return n;var s=!1;function a(){if(!s){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),s=!0}return n.apply(this,arguments)}return a}function e(n){try{if(!commonjsGlobal$1.localStorage)return!1}catch{return!1}var i=commonjsGlobal$1.localStorage[n];return i==null?!1:String(i).toLowerCase()==="true"}return browser$a}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ur;function t(_r){var dr=this;this.next=null,this.entry=null,this.finish=function(){vr(dr,_r)}}var e;ur.WritableState=ir;var n={deprecate:requireBrowser$a()},i=requireStreamBrowser$1(),s=require$$1$3.Buffer,a=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function l(_r){return s.from(_r)}function f(_r){return s.isBuffer(_r)||_r instanceof a}var p=requireDestroy$1(),C=requireState(),B=C.getHighWaterMark,N=requireErrorsBrowser().codes,le=N.ERR_INVALID_ARG_TYPE,Ee=N.ERR_METHOD_NOT_IMPLEMENTED,Ue=N.ERR_MULTIPLE_CALLBACK,ze=N.ERR_STREAM_CANNOT_PIPE,Ze=N.ERR_STREAM_DESTROYED,Qe=N.ERR_STREAM_NULL_VALUES,ct=N.ERR_STREAM_WRITE_AFTER_END,wt=N.ERR_UNKNOWN_ENCODING,qt=p.errorOrDestroy;requireInherits_browser()(ur,i);function nr(){}function ir(_r,dr,gr){e=e||require_stream_duplex$1(),_r=_r||{},typeof gr!="boolean"&&(gr=dr instanceof e),this.objectMode=!!_r.objectMode,gr&&(this.objectMode=this.objectMode||!!_r.writableObjectMode),this.highWaterMark=B(this,_r,"writableHighWaterMark",gr),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $r=_r.decodeStrings===!1;this.decodeStrings=!$r,this.defaultEncoding=_r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(pr){ot(dr,pr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=_r.emitClose!==!1,this.autoDestroy=!!_r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}ir.prototype.getBuffer=function(){for(var dr=this.bufferedRequest,gr=[];dr;)gr.push(dr),dr=dr.next;return gr},function(){try{Object.defineProperty(ir.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var or;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(or=Function.prototype[Symbol.hasInstance],Object.defineProperty(ur,Symbol.hasInstance,{value:function(dr){return or.call(this,dr)?!0:this!==ur?!1:dr&&dr._writableState instanceof ir}})):or=function(dr){return dr instanceof this};function ur(_r){e=e||require_stream_duplex$1();var dr=this instanceof e;if(!dr&&!or.call(ur,this))return new ur(_r);this._writableState=new ir(_r,this,dr),this.writable=!0,_r&&(typeof _r.write=="function"&&(this._write=_r.write),typeof _r.writev=="function"&&(this._writev=_r.writev),typeof _r.destroy=="function"&&(this._destroy=_r.destroy),typeof _r.final=="function"&&(this._final=_r.final)),i.call(this)}ur.prototype.pipe=function(){qt(this,new ze)};function hr(_r,dr){var gr=new ct;qt(_r,gr),process$1.nextTick(dr,gr)}function fr(_r,dr,gr,$r){var pr;return gr===null?pr=new Qe:typeof gr!="string"&&!dr.objectMode&&(pr=new le("chunk",["string","Buffer"],gr)),pr?(qt(_r,pr),process$1.nextTick($r,pr),!1):!0}ur.prototype.write=function(_r,dr,gr){var $r=this._writableState,pr=!1,lr=!$r.objectMode&&f(_r);return lr&&!s.isBuffer(_r)&&(_r=l(_r)),typeof dr=="function"&&(gr=dr,dr=null),lr?dr="buffer":dr||(dr=$r.defaultEncoding),typeof gr!="function"&&(gr=nr),$r.ending?hr(this,gr):(lr||fr(this,$r,_r,gr))&&($r.pendingcb++,pr=Lt(this,$r,lr,_r,dr,gr)),pr},ur.prototype.cork=function(){this._writableState.corked++},ur.prototype.uncork=function(){var _r=this._writableState;_r.corked&&(_r.corked--,!_r.writing&&!_r.corked&&!_r.bufferProcessing&&_r.bufferedRequest&&rr(this,_r))},ur.prototype.setDefaultEncoding=function(dr){if(typeof dr=="string"&&(dr=dr.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((dr+"").toLowerCase())>-1))throw new wt(dr);return this._writableState.defaultEncoding=dr,this},Object.defineProperty(ur.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ar(_r,dr,gr){return!_r.objectMode&&_r.decodeStrings!==!1&&typeof dr=="string"&&(dr=s.from(dr,gr)),dr}Object.defineProperty(ur.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Lt(_r,dr,gr,$r,pr,lr){if(!gr){var cr=ar(dr,$r,pr);$r!==cr&&(gr=!0,pr="buffer",$r=cr)}var yr=dr.objectMode?1:$r.length;dr.length+=yr;var Sr=dr.length<dr.highWaterMark;if(Sr||(dr.needDrain=!0),dr.writing||dr.corked){var Ar=dr.lastBufferedRequest;dr.lastBufferedRequest={chunk:$r,encoding:pr,isBuf:gr,callback:lr,next:null},Ar?Ar.next=dr.lastBufferedRequest:dr.bufferedRequest=dr.lastBufferedRequest,dr.bufferedRequestCount+=1}else Vt(_r,dr,!1,yr,$r,pr,lr);return Sr}function Vt(_r,dr,gr,$r,pr,lr,cr){dr.writelen=$r,dr.writecb=cr,dr.writing=!0,dr.sync=!0,dr.destroyed?dr.onwrite(new Ze("write")):gr?_r._writev(pr,dr.onwrite):_r._write(pr,lr,dr.onwrite),dr.sync=!1}function tt(_r,dr,gr,$r,pr){--dr.pendingcb,gr?(process$1.nextTick(pr,$r),process$1.nextTick(Ft,_r,dr),_r._writableState.errorEmitted=!0,qt(_r,$r)):(pr($r),_r._writableState.errorEmitted=!0,qt(_r,$r),Ft(_r,dr))}function Ye(_r){_r.writing=!1,_r.writecb=null,_r.length-=_r.writelen,_r.writelen=0}function ot(_r,dr){var gr=_r._writableState,$r=gr.sync,pr=gr.writecb;if(typeof pr!="function")throw new Ue;if(Ye(gr),dr)tt(_r,gr,$r,dr,pr);else{var lr=yt(gr)||_r.destroyed;!lr&&!gr.corked&&!gr.bufferProcessing&&gr.bufferedRequest&&rr(_r,gr),$r?process$1.nextTick(Et,_r,gr,lr,pr):Et(_r,gr,lr,pr)}}function Et(_r,dr,gr,$r){gr||er(_r,dr),dr.pendingcb--,$r(),Ft(_r,dr)}function er(_r,dr){dr.length===0&&dr.needDrain&&(dr.needDrain=!1,_r.emit("drain"))}function rr(_r,dr){dr.bufferProcessing=!0;var gr=dr.bufferedRequest;if(_r._writev&&gr&&gr.next){var $r=dr.bufferedRequestCount,pr=new Array($r),lr=dr.corkedRequestsFree;lr.entry=gr;for(var cr=0,yr=!0;gr;)pr[cr]=gr,gr.isBuf||(yr=!1),gr=gr.next,cr+=1;pr.allBuffers=yr,Vt(_r,dr,!0,dr.length,pr,"",lr.finish),dr.pendingcb++,dr.lastBufferedRequest=null,lr.next?(dr.corkedRequestsFree=lr.next,lr.next=null):dr.corkedRequestsFree=new t(dr),dr.bufferedRequestCount=0}else{for(;gr;){var Sr=gr.chunk,Ar=gr.encoding,Tr=gr.callback,xr=dr.objectMode?1:Sr.length;if(Vt(_r,dr,!1,xr,Sr,Ar,Tr),gr=gr.next,dr.bufferedRequestCount--,dr.writing)break}gr===null&&(dr.lastBufferedRequest=null)}dr.bufferedRequest=gr,dr.bufferProcessing=!1}ur.prototype._write=function(_r,dr,gr){gr(new Ee("_write()"))},ur.prototype._writev=null,ur.prototype.end=function(_r,dr,gr){var $r=this._writableState;return typeof _r=="function"?(gr=_r,_r=null,dr=null):typeof dr=="function"&&(gr=dr,dr=null),_r!=null&&this.write(_r,dr),$r.corked&&($r.corked=1,this.uncork()),$r.ending||sr(this,$r,gr),this},Object.defineProperty(ur.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function yt(_r){return _r.ending&&_r.length===0&&_r.bufferedRequest===null&&!_r.finished&&!_r.writing}function tr(_r,dr){_r._final(function(gr){dr.pendingcb--,gr&&qt(_r,gr),dr.prefinished=!0,_r.emit("prefinish"),Ft(_r,dr)})}function Ut(_r,dr){!dr.prefinished&&!dr.finalCalled&&(typeof _r._final=="function"&&!dr.destroyed?(dr.pendingcb++,dr.finalCalled=!0,process$1.nextTick(tr,_r,dr)):(dr.prefinished=!0,_r.emit("prefinish")))}function Ft(_r,dr){var gr=yt(dr);if(gr&&(Ut(_r,dr),dr.pendingcb===0&&(dr.finished=!0,_r.emit("finish"),dr.autoDestroy))){var $r=_r._readableState;(!$r||$r.autoDestroy&&$r.endEmitted)&&_r.destroy()}return gr}function sr(_r,dr,gr){dr.ending=!0,Ft(_r,dr),gr&&(dr.finished?process$1.nextTick(gr):_r.once("finish",gr)),dr.ended=!0,_r.writable=!1}function vr(_r,dr,gr){var $r=_r.entry;for(_r.entry=null;$r;){var pr=$r.callback;dr.pendingcb--,pr(gr),$r=$r.next}dr.corkedRequestsFree.next=_r}return Object.defineProperty(ur.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(dr){this._writableState&&(this._writableState.destroyed=dr)}}),ur.prototype.destroy=p.destroy,ur.prototype._undestroy=p.undestroy,ur.prototype._destroy=function(_r,dr){dr(_r)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var t=Object.keys||function(C){var B=[];for(var N in C)B.push(N);return B};_stream_duplex$1=l;var e=require_stream_readable$1(),n=require_stream_writable$1();requireInherits_browser()(l,e);for(var i=t(n.prototype),s=0;s<i.length;s++){var a=i[s];l.prototype[a]||(l.prototype[a]=n.prototype[a])}function l(C){if(!(this instanceof l))return new l(C);e.call(this,C),n.call(this,C),this.allowHalfOpen=!0,C&&(C.readable===!1&&(this.readable=!1),C.writable===!1&&(this.writable=!1),C.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",f)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function f(){this._writableState.ended||process$1.nextTick(p,this)}function p(C){C.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(B){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=B,this._writableState.destroyed=B)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=requireSafeBuffer$1().Buffer,e=t.isEncoding||function(Qe){switch(Qe=""+Qe,Qe&&Qe.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(Qe){if(!Qe)return"utf8";for(var ct;;)switch(Qe){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Qe;default:if(ct)return;Qe=(""+Qe).toLowerCase(),ct=!0}}function i(Qe){var ct=n(Qe);if(typeof ct!="string"&&(t.isEncoding===e||!e(Qe)))throw new Error("Unknown encoding: "+Qe);return ct||Qe}string_decoder.StringDecoder=s;function s(Qe){this.encoding=i(Qe);var ct;switch(this.encoding){case"utf16le":this.text=N,this.end=le,ct=4;break;case"utf8":this.fillLast=p,ct=4;break;case"base64":this.text=Ee,this.end=Ue,ct=3;break;default:this.write=ze,this.end=Ze;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(ct)}s.prototype.write=function(Qe){if(Qe.length===0)return"";var ct,wt;if(this.lastNeed){if(ct=this.fillLast(Qe),ct===void 0)return"";wt=this.lastNeed,this.lastNeed=0}else wt=0;return wt<Qe.length?ct?ct+this.text(Qe,wt):this.text(Qe,wt):ct||""},s.prototype.end=B,s.prototype.text=C,s.prototype.fillLast=function(Qe){if(this.lastNeed<=Qe.length)return Qe.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Qe.copy(this.lastChar,this.lastTotal-this.lastNeed,0,Qe.length),this.lastNeed-=Qe.length};function a(Qe){return Qe<=127?0:Qe>>5===6?2:Qe>>4===14?3:Qe>>3===30?4:Qe>>6===2?-1:-2}function l(Qe,ct,wt){var qt=ct.length-1;if(qt<wt)return 0;var nr=a(ct[qt]);return nr>=0?(nr>0&&(Qe.lastNeed=nr-1),nr):--qt<wt||nr===-2?0:(nr=a(ct[qt]),nr>=0?(nr>0&&(Qe.lastNeed=nr-2),nr):--qt<wt||nr===-2?0:(nr=a(ct[qt]),nr>=0?(nr>0&&(nr===2?nr=0:Qe.lastNeed=nr-3),nr):0))}function f(Qe,ct,wt){if((ct[0]&192)!==128)return Qe.lastNeed=0,"";if(Qe.lastNeed>1&&ct.length>1){if((ct[1]&192)!==128)return Qe.lastNeed=1,"";if(Qe.lastNeed>2&&ct.length>2&&(ct[2]&192)!==128)return Qe.lastNeed=2,""}}function p(Qe){var ct=this.lastTotal-this.lastNeed,wt=f(this,Qe);if(wt!==void 0)return wt;if(this.lastNeed<=Qe.length)return Qe.copy(this.lastChar,ct,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);Qe.copy(this.lastChar,ct,0,Qe.length),this.lastNeed-=Qe.length}function C(Qe,ct){var wt=l(this,Qe,ct);if(!this.lastNeed)return Qe.toString("utf8",ct);this.lastTotal=wt;var qt=Qe.length-(wt-this.lastNeed);return Qe.copy(this.lastChar,0,qt),Qe.toString("utf8",ct,qt)}function B(Qe){var ct=Qe&&Qe.length?this.write(Qe):"";return this.lastNeed?ct+"":ct}function N(Qe,ct){if((Qe.length-ct)%2===0){var wt=Qe.toString("utf16le",ct);if(wt){var qt=wt.charCodeAt(wt.length-1);if(qt>=55296&&qt<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=Qe[Qe.length-2],this.lastChar[1]=Qe[Qe.length-1],wt.slice(0,-1)}return wt}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=Qe[Qe.length-1],Qe.toString("utf16le",ct,Qe.length-1)}function le(Qe){var ct=Qe&&Qe.length?this.write(Qe):"";if(this.lastNeed){var wt=this.lastTotal-this.lastNeed;return ct+this.lastChar.toString("utf16le",0,wt)}return ct}function Ee(Qe,ct){var wt=(Qe.length-ct)%3;return wt===0?Qe.toString("base64",ct):(this.lastNeed=3-wt,this.lastTotal=3,wt===1?this.lastChar[0]=Qe[Qe.length-1]:(this.lastChar[0]=Qe[Qe.length-2],this.lastChar[1]=Qe[Qe.length-1]),Qe.toString("base64",ct,Qe.length-wt))}function Ue(Qe){var ct=Qe&&Qe.length?this.write(Qe):"";return this.lastNeed?ct+this.lastChar.toString("base64",0,3-this.lastNeed):ct}function ze(Qe){return Qe.toString(this.encoding)}function Ze(Qe){return Qe&&Qe.length?this.write(Qe):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(a){var l=!1;return function(){if(!l){l=!0;for(var f=arguments.length,p=new Array(f),C=0;C<f;C++)p[C]=arguments[C];a.apply(this,p)}}}function n(){}function i(a){return a.setHeader&&typeof a.abort=="function"}function s(a,l,f){if(typeof l=="function")return s(a,null,l);l||(l={}),f=e(f||n);var p=l.readable||l.readable!==!1&&a.readable,C=l.writable||l.writable!==!1&&a.writable,B=function(){a.writable||le()},N=a._writableState&&a._writableState.finished,le=function(){C=!1,N=!0,p||f.call(a)},Ee=a._readableState&&a._readableState.endEmitted,Ue=function(){p=!1,Ee=!0,C||f.call(a)},ze=function(wt){f.call(a,wt)},Ze=function(){var wt;if(p&&!Ee)return(!a._readableState||!a._readableState.ended)&&(wt=new t),f.call(a,wt);if(C&&!N)return(!a._writableState||!a._writableState.ended)&&(wt=new t),f.call(a,wt)},Qe=function(){a.req.on("finish",le)};return i(a)?(a.on("complete",le),a.on("abort",Ze),a.req?Qe():a.on("request",Qe)):C&&!a._writableState&&(a.on("end",B),a.on("close",B)),a.on("end",Ue),a.on("finish",le),l.error!==!1&&a.on("error",ze),a.on("close",Ze),function(){a.removeListener("complete",le),a.removeListener("abort",Ze),a.removeListener("request",Qe),a.req&&a.req.removeListener("finish",le),a.removeListener("end",B),a.removeListener("close",B),a.removeListener("finish",le),a.removeListener("end",Ue),a.removeListener("error",ze),a.removeListener("close",Ze)}}return endOfStream=s,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(wt,qt,nr){return qt=n(qt),qt in wt?Object.defineProperty(wt,qt,{value:nr,enumerable:!0,configurable:!0,writable:!0}):wt[qt]=nr,wt}function n(wt){var qt=i(wt,"string");return typeof qt=="symbol"?qt:String(qt)}function i(wt,qt){if(typeof wt!="object"||wt===null)return wt;var nr=wt[Symbol.toPrimitive];if(nr!==void 0){var ir=nr.call(wt,qt);if(typeof ir!="object")return ir;throw new TypeError("@@toPrimitive must return a primitive value.")}return(qt==="string"?String:Number)(wt)}var s=requireEndOfStream(),a=Symbol("lastResolve"),l=Symbol("lastReject"),f=Symbol("error"),p=Symbol("ended"),C=Symbol("lastPromise"),B=Symbol("handlePromise"),N=Symbol("stream");function le(wt,qt){return{value:wt,done:qt}}function Ee(wt){var qt=wt[a];if(qt!==null){var nr=wt[N].read();nr!==null&&(wt[C]=null,wt[a]=null,wt[l]=null,qt(le(nr,!1)))}}function Ue(wt){process$1.nextTick(Ee,wt)}function ze(wt,qt){return function(nr,ir){wt.then(function(){if(qt[p]){nr(le(void 0,!0));return}qt[B](nr,ir)},ir)}}var Ze=Object.getPrototypeOf(function(){}),Qe=Object.setPrototypeOf((t={get stream(){return this[N]},next:function(){var qt=this,nr=this[f];if(nr!==null)return Promise.reject(nr);if(this[p])return Promise.resolve(le(void 0,!0));if(this[N].destroyed)return new Promise(function(hr,fr){process$1.nextTick(function(){qt[f]?fr(qt[f]):hr(le(void 0,!0))})});var ir=this[C],or;if(ir)or=new Promise(ze(ir,this));else{var ur=this[N].read();if(ur!==null)return Promise.resolve(le(ur,!1));or=new Promise(this[B])}return this[C]=or,or}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var qt=this;return new Promise(function(nr,ir){qt[N].destroy(null,function(or){if(or){ir(or);return}nr(le(void 0,!0))})})}),t),Ze),ct=function(qt){var nr,ir=Object.create(Qe,(nr={},e(nr,N,{value:qt,writable:!0}),e(nr,a,{value:null,writable:!0}),e(nr,l,{value:null,writable:!0}),e(nr,f,{value:null,writable:!0}),e(nr,p,{value:qt._readableState.endEmitted,writable:!0}),e(nr,B,{value:function(ur,hr){var fr=ir[N].read();fr?(ir[C]=null,ir[a]=null,ir[l]=null,ur(le(fr,!1))):(ir[a]=ur,ir[l]=hr)},writable:!0}),nr));return ir[C]=null,s(qt,function(or){if(or&&or.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ur=ir[l];ur!==null&&(ir[C]=null,ir[a]=null,ir[l]=null,ur(or)),ir[f]=or;return}var hr=ir[a];hr!==null&&(ir[C]=null,ir[a]=null,ir[l]=null,hr(le(void 0,!0))),ir[p]=!0}),qt.on("readable",Ue.bind(null,ir)),ir};return async_iterator=ct,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=hr;var t;hr.ReadableState=ur,requireEvents().EventEmitter;var e=function(cr,yr){return cr.listeners(yr).length},n=requireStreamBrowser$1(),i=require$$1$3.Buffer,s=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(lr){return i.from(lr)}function l(lr){return i.isBuffer(lr)||lr instanceof s}var f=requireUtil$1(),p;f&&f.debuglog?p=f.debuglog("stream"):p=function(){};var C=requireBuffer_list(),B=requireDestroy$1(),N=requireState(),le=N.getHighWaterMark,Ee=requireErrorsBrowser().codes,Ue=Ee.ERR_INVALID_ARG_TYPE,ze=Ee.ERR_STREAM_PUSH_AFTER_EOF,Ze=Ee.ERR_METHOD_NOT_IMPLEMENTED,Qe=Ee.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ct,wt,qt;requireInherits_browser()(hr,n);var nr=B.errorOrDestroy,ir=["error","close","destroy","pause","resume"];function or(lr,cr,yr){if(typeof lr.prependListener=="function")return lr.prependListener(cr,yr);!lr._events||!lr._events[cr]?lr.on(cr,yr):Array.isArray(lr._events[cr])?lr._events[cr].unshift(yr):lr._events[cr]=[yr,lr._events[cr]]}function ur(lr,cr,yr){t=t||require_stream_duplex$1(),lr=lr||{},typeof yr!="boolean"&&(yr=cr instanceof t),this.objectMode=!!lr.objectMode,yr&&(this.objectMode=this.objectMode||!!lr.readableObjectMode),this.highWaterMark=le(this,lr,"readableHighWaterMark",yr),this.buffer=new C,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=lr.emitClose!==!1,this.autoDestroy=!!lr.autoDestroy,this.destroyed=!1,this.defaultEncoding=lr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,lr.encoding&&(ct||(ct=requireString_decoder().StringDecoder),this.decoder=new ct(lr.encoding),this.encoding=lr.encoding)}function hr(lr){if(t=t||require_stream_duplex$1(),!(this instanceof hr))return new hr(lr);var cr=this instanceof t;this._readableState=new ur(lr,this,cr),this.readable=!0,lr&&(typeof lr.read=="function"&&(this._read=lr.read),typeof lr.destroy=="function"&&(this._destroy=lr.destroy)),n.call(this)}Object.defineProperty(hr.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(cr){this._readableState&&(this._readableState.destroyed=cr)}}),hr.prototype.destroy=B.destroy,hr.prototype._undestroy=B.undestroy,hr.prototype._destroy=function(lr,cr){cr(lr)},hr.prototype.push=function(lr,cr){var yr=this._readableState,Sr;return yr.objectMode?Sr=!0:typeof lr=="string"&&(cr=cr||yr.defaultEncoding,cr!==yr.encoding&&(lr=i.from(lr,cr),cr=""),Sr=!0),fr(this,lr,cr,!1,Sr)},hr.prototype.unshift=function(lr){return fr(this,lr,null,!0,!1)};function fr(lr,cr,yr,Sr,Ar){p("readableAddChunk",cr);var Tr=lr._readableState;if(cr===null)Tr.reading=!1,ot(lr,Tr);else{var xr;if(Ar||(xr=Lt(Tr,cr)),xr)nr(lr,xr);else if(Tr.objectMode||cr&&cr.length>0)if(typeof cr!="string"&&!Tr.objectMode&&Object.getPrototypeOf(cr)!==i.prototype&&(cr=a(cr)),Sr)Tr.endEmitted?nr(lr,new Qe):ar(lr,Tr,cr,!0);else if(Tr.ended)nr(lr,new ze);else{if(Tr.destroyed)return!1;Tr.reading=!1,Tr.decoder&&!yr?(cr=Tr.decoder.write(cr),Tr.objectMode||cr.length!==0?ar(lr,Tr,cr,!1):rr(lr,Tr)):ar(lr,Tr,cr,!1)}else Sr||(Tr.reading=!1,rr(lr,Tr))}return!Tr.ended&&(Tr.length<Tr.highWaterMark||Tr.length===0)}function ar(lr,cr,yr,Sr){cr.flowing&&cr.length===0&&!cr.sync?(cr.awaitDrain=0,lr.emit("data",yr)):(cr.length+=cr.objectMode?1:yr.length,Sr?cr.buffer.unshift(yr):cr.buffer.push(yr),cr.needReadable&&Et(lr)),rr(lr,cr)}function Lt(lr,cr){var yr;return!l(cr)&&typeof cr!="string"&&cr!==void 0&&!lr.objectMode&&(yr=new Ue("chunk",["string","Buffer","Uint8Array"],cr)),yr}hr.prototype.isPaused=function(){return this._readableState.flowing===!1},hr.prototype.setEncoding=function(lr){ct||(ct=requireString_decoder().StringDecoder);var cr=new ct(lr);this._readableState.decoder=cr,this._readableState.encoding=this._readableState.decoder.encoding;for(var yr=this._readableState.buffer.head,Sr="";yr!==null;)Sr+=cr.write(yr.data),yr=yr.next;return this._readableState.buffer.clear(),Sr!==""&&this._readableState.buffer.push(Sr),this._readableState.length=Sr.length,this};var Vt=1073741824;function tt(lr){return lr>=Vt?lr=Vt:(lr--,lr|=lr>>>1,lr|=lr>>>2,lr|=lr>>>4,lr|=lr>>>8,lr|=lr>>>16,lr++),lr}function Ye(lr,cr){return lr<=0||cr.length===0&&cr.ended?0:cr.objectMode?1:lr!==lr?cr.flowing&&cr.length?cr.buffer.head.data.length:cr.length:(lr>cr.highWaterMark&&(cr.highWaterMark=tt(lr)),lr<=cr.length?lr:cr.ended?cr.length:(cr.needReadable=!0,0))}hr.prototype.read=function(lr){p("read",lr),lr=parseInt(lr,10);var cr=this._readableState,yr=lr;if(lr!==0&&(cr.emittedReadable=!1),lr===0&&cr.needReadable&&((cr.highWaterMark!==0?cr.length>=cr.highWaterMark:cr.length>0)||cr.ended))return p("read: emitReadable",cr.length,cr.ended),cr.length===0&&cr.ended?gr(this):Et(this),null;if(lr=Ye(lr,cr),lr===0&&cr.ended)return cr.length===0&&gr(this),null;var Sr=cr.needReadable;p("need readable",Sr),(cr.length===0||cr.length-lr<cr.highWaterMark)&&(Sr=!0,p("length less than watermark",Sr)),cr.ended||cr.reading?(Sr=!1,p("reading or ended",Sr)):Sr&&(p("do read"),cr.reading=!0,cr.sync=!0,cr.length===0&&(cr.needReadable=!0),this._read(cr.highWaterMark),cr.sync=!1,cr.reading||(lr=Ye(yr,cr)));var Ar;return lr>0?Ar=dr(lr,cr):Ar=null,Ar===null?(cr.needReadable=cr.length<=cr.highWaterMark,lr=0):(cr.length-=lr,cr.awaitDrain=0),cr.length===0&&(cr.ended||(cr.needReadable=!0),yr!==lr&&cr.ended&&gr(this)),Ar!==null&&this.emit("data",Ar),Ar};function ot(lr,cr){if(p("onEofChunk"),!cr.ended){if(cr.decoder){var yr=cr.decoder.end();yr&&yr.length&&(cr.buffer.push(yr),cr.length+=cr.objectMode?1:yr.length)}cr.ended=!0,cr.sync?Et(lr):(cr.needReadable=!1,cr.emittedReadable||(cr.emittedReadable=!0,er(lr)))}}function Et(lr){var cr=lr._readableState;p("emitReadable",cr.needReadable,cr.emittedReadable),cr.needReadable=!1,cr.emittedReadable||(p("emitReadable",cr.flowing),cr.emittedReadable=!0,process$1.nextTick(er,lr))}function er(lr){var cr=lr._readableState;p("emitReadable_",cr.destroyed,cr.length,cr.ended),!cr.destroyed&&(cr.length||cr.ended)&&(lr.emit("readable"),cr.emittedReadable=!1),cr.needReadable=!cr.flowing&&!cr.ended&&cr.length<=cr.highWaterMark,_r(lr)}function rr(lr,cr){cr.readingMore||(cr.readingMore=!0,process$1.nextTick(yt,lr,cr))}function yt(lr,cr){for(;!cr.reading&&!cr.ended&&(cr.length<cr.highWaterMark||cr.flowing&&cr.length===0);){var yr=cr.length;if(p("maybeReadMore read 0"),lr.read(0),yr===cr.length)break}cr.readingMore=!1}hr.prototype._read=function(lr){nr(this,new Ze("_read()"))},hr.prototype.pipe=function(lr,cr){var yr=this,Sr=this._readableState;switch(Sr.pipesCount){case 0:Sr.pipes=lr;break;case 1:Sr.pipes=[Sr.pipes,lr];break;default:Sr.pipes.push(lr);break}Sr.pipesCount+=1,p("pipe count=%d opts=%j",Sr.pipesCount,cr);var Ar=(!cr||cr.end!==!1)&&lr!==process$1.stdout&&lr!==process$1.stderr,Tr=Ar?Cr:zr;Sr.endEmitted?process$1.nextTick(Tr):yr.once("end",Tr),lr.on("unpipe",xr);function xr(jr,Fr){p("onunpipe"),jr===yr&&Fr&&Fr.hasUnpiped===!1&&(Fr.hasUnpiped=!0,kr())}function Cr(){p("onend"),lr.end()}var wr=tr(yr);lr.on("drain",wr);var Er=!1;function kr(){p("cleanup"),lr.removeListener("close",Ir),lr.removeListener("finish",Dr),lr.removeListener("drain",wr),lr.removeListener("error",Rr),lr.removeListener("unpipe",xr),yr.removeListener("end",Cr),yr.removeListener("end",zr),yr.removeListener("data",Br),Er=!0,Sr.awaitDrain&&(!lr._writableState||lr._writableState.needDrain)&&wr()}yr.on("data",Br);function Br(jr){p("ondata");var Fr=lr.write(jr);p("dest.write",Fr),Fr===!1&&((Sr.pipesCount===1&&Sr.pipes===lr||Sr.pipesCount>1&&pr(Sr.pipes,lr)!==-1)&&!Er&&(p("false write response, pause",Sr.awaitDrain),Sr.awaitDrain++),yr.pause())}function Rr(jr){p("onerror",jr),zr(),lr.removeListener("error",Rr),e(lr,"error")===0&&nr(lr,jr)}or(lr,"error",Rr);function Ir(){lr.removeListener("finish",Dr),zr()}lr.once("close",Ir);function Dr(){p("onfinish"),lr.removeListener("close",Ir),zr()}lr.once("finish",Dr);function zr(){p("unpipe"),yr.unpipe(lr)}return lr.emit("pipe",yr),Sr.flowing||(p("pipe resume"),yr.resume()),lr};function tr(lr){return function(){var yr=lr._readableState;p("pipeOnDrain",yr.awaitDrain),yr.awaitDrain&&yr.awaitDrain--,yr.awaitDrain===0&&e(lr,"data")&&(yr.flowing=!0,_r(lr))}}hr.prototype.unpipe=function(lr){var cr=this._readableState,yr={hasUnpiped:!1};if(cr.pipesCount===0)return this;if(cr.pipesCount===1)return lr&&lr!==cr.pipes?this:(lr||(lr=cr.pipes),cr.pipes=null,cr.pipesCount=0,cr.flowing=!1,lr&&lr.emit("unpipe",this,yr),this);if(!lr){var Sr=cr.pipes,Ar=cr.pipesCount;cr.pipes=null,cr.pipesCount=0,cr.flowing=!1;for(var Tr=0;Tr<Ar;Tr++)Sr[Tr].emit("unpipe",this,{hasUnpiped:!1});return this}var xr=pr(cr.pipes,lr);return xr===-1?this:(cr.pipes.splice(xr,1),cr.pipesCount-=1,cr.pipesCount===1&&(cr.pipes=cr.pipes[0]),lr.emit("unpipe",this,yr),this)},hr.prototype.on=function(lr,cr){var yr=n.prototype.on.call(this,lr,cr),Sr=this._readableState;return lr==="data"?(Sr.readableListening=this.listenerCount("readable")>0,Sr.flowing!==!1&&this.resume()):lr==="readable"&&!Sr.endEmitted&&!Sr.readableListening&&(Sr.readableListening=Sr.needReadable=!0,Sr.flowing=!1,Sr.emittedReadable=!1,p("on readable",Sr.length,Sr.reading),Sr.length?Et(this):Sr.reading||process$1.nextTick(Ft,this)),yr},hr.prototype.addListener=hr.prototype.on,hr.prototype.removeListener=function(lr,cr){var yr=n.prototype.removeListener.call(this,lr,cr);return lr==="readable"&&process$1.nextTick(Ut,this),yr},hr.prototype.removeAllListeners=function(lr){var cr=n.prototype.removeAllListeners.apply(this,arguments);return(lr==="readable"||lr===void 0)&&process$1.nextTick(Ut,this),cr};function Ut(lr){var cr=lr._readableState;cr.readableListening=lr.listenerCount("readable")>0,cr.resumeScheduled&&!cr.paused?cr.flowing=!0:lr.listenerCount("data")>0&&lr.resume()}function Ft(lr){p("readable nexttick read 0"),lr.read(0)}hr.prototype.resume=function(){var lr=this._readableState;return lr.flowing||(p("resume"),lr.flowing=!lr.readableListening,sr(this,lr)),lr.paused=!1,this};function sr(lr,cr){cr.resumeScheduled||(cr.resumeScheduled=!0,process$1.nextTick(vr,lr,cr))}function vr(lr,cr){p("resume",cr.reading),cr.reading||lr.read(0),cr.resumeScheduled=!1,lr.emit("resume"),_r(lr),cr.flowing&&!cr.reading&&lr.read(0)}hr.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function _r(lr){var cr=lr._readableState;for(p("flow",cr.flowing);cr.flowing&&lr.read()!==null;);}hr.prototype.wrap=function(lr){var cr=this,yr=this._readableState,Sr=!1;lr.on("end",function(){if(p("wrapped end"),yr.decoder&&!yr.ended){var xr=yr.decoder.end();xr&&xr.length&&cr.push(xr)}cr.push(null)}),lr.on("data",function(xr){if(p("wrapped data"),yr.decoder&&(xr=yr.decoder.write(xr)),!(yr.objectMode&&xr==null)&&!(!yr.objectMode&&(!xr||!xr.length))){var Cr=cr.push(xr);Cr||(Sr=!0,lr.pause())}});for(var Ar in lr)this[Ar]===void 0&&typeof lr[Ar]=="function"&&(this[Ar]=function(Cr){return function(){return lr[Cr].apply(lr,arguments)}}(Ar));for(var Tr=0;Tr<ir.length;Tr++)lr.on(ir[Tr],this.emit.bind(this,ir[Tr]));return this._read=function(xr){p("wrapped _read",xr),Sr&&(Sr=!1,lr.resume())},this},typeof Symbol=="function"&&(hr.prototype[Symbol.asyncIterator]=function(){return wt===void 0&&(wt=requireAsync_iterator()),wt(this)}),Object.defineProperty(hr.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(hr.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(hr.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(cr){this._readableState&&(this._readableState.flowing=cr)}}),hr._fromList=dr,Object.defineProperty(hr.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function dr(lr,cr){if(cr.length===0)return null;var yr;return cr.objectMode?yr=cr.buffer.shift():!lr||lr>=cr.length?(cr.decoder?yr=cr.buffer.join(""):cr.buffer.length===1?yr=cr.buffer.first():yr=cr.buffer.concat(cr.length),cr.buffer.clear()):yr=cr.buffer.consume(lr,cr.decoder),yr}function gr(lr){var cr=lr._readableState;p("endReadable",cr.endEmitted),cr.endEmitted||(cr.ended=!0,process$1.nextTick($r,cr,lr))}function $r(lr,cr){if(p("endReadableNT",lr.endEmitted,lr.length),!lr.endEmitted&&lr.length===0&&(lr.endEmitted=!0,cr.readable=!1,cr.emit("end"),lr.autoDestroy)){var yr=cr._writableState;(!yr||yr.autoDestroy&&yr.finished)&&cr.destroy()}}typeof Symbol=="function"&&(hr.from=function(lr,cr){return qt===void 0&&(qt=requireFromBrowser()),qt(hr,lr,cr)});function pr(lr,cr){for(var yr=0,Sr=lr.length;yr<Sr;yr++)if(lr[yr]===cr)return yr;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=f;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,i=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require_stream_duplex$1();requireInherits_browser()(f,a);function l(B,N){var le=this._transformState;le.transforming=!1;var Ee=le.writecb;if(Ee===null)return this.emit("error",new n);le.writechunk=null,le.writecb=null,N!=null&&this.push(N),Ee(B);var Ue=this._readableState;Ue.reading=!1,(Ue.needReadable||Ue.length<Ue.highWaterMark)&&this._read(Ue.highWaterMark)}function f(B){if(!(this instanceof f))return new f(B);a.call(this,B),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,B&&(typeof B.transform=="function"&&(this._transform=B.transform),typeof B.flush=="function"&&(this._flush=B.flush)),this.on("prefinish",p)}function p(){var B=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(N,le){C(B,N,le)}):C(this,null,null)}f.prototype.push=function(B,N){return this._transformState.needTransform=!1,a.prototype.push.call(this,B,N)},f.prototype._transform=function(B,N,le){le(new e("_transform()"))},f.prototype._write=function(B,N,le){var Ee=this._transformState;if(Ee.writecb=le,Ee.writechunk=B,Ee.writeencoding=N,!Ee.transforming){var Ue=this._readableState;(Ee.needTransform||Ue.needReadable||Ue.length<Ue.highWaterMark)&&this._read(Ue.highWaterMark)}},f.prototype._read=function(B){var N=this._transformState;N.writechunk!==null&&!N.transforming?(N.transforming=!0,this._transform(N.writechunk,N.writeencoding,N.afterTransform)):N.needTransform=!0},f.prototype._destroy=function(B,N){a.prototype._destroy.call(this,B,function(le){N(le)})};function C(B,N,le){if(N)return B.emit("error",N);if(le!=null&&B.push(le),B._writableState.length)throw new s;if(B._transformState.transforming)throw new i;return B.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=e;var t=require_stream_transform$1();requireInherits_browser()(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,i,s){s(null,n)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(le){var Ee=!1;return function(){Ee||(Ee=!0,le.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,i=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function a(le){if(le)throw le}function l(le){return le.setHeader&&typeof le.abort=="function"}function f(le,Ee,Ue,ze){ze=e(ze);var Ze=!1;le.on("close",function(){Ze=!0}),t===void 0&&(t=requireEndOfStream()),t(le,{readable:Ee,writable:Ue},function(ct){if(ct)return ze(ct);Ze=!0,ze()});var Qe=!1;return function(ct){if(!Ze&&!Qe){if(Qe=!0,l(le))return le.abort();if(typeof le.destroy=="function")return le.destroy();ze(ct||new s("pipe"))}}}function p(le){le()}function C(le,Ee){return le.pipe(Ee)}function B(le){return!le.length||typeof le[le.length-1]!="function"?a:le.pop()}function N(){for(var le=arguments.length,Ee=new Array(le),Ue=0;Ue<le;Ue++)Ee[Ue]=arguments[Ue];var ze=B(Ee);if(Array.isArray(Ee[0])&&(Ee=Ee[0]),Ee.length<2)throw new i("streams");var Ze,Qe=Ee.map(function(ct,wt){var qt=wt<Ee.length-1,nr=wt>0;return f(ct,qt,nr,function(ir){Ze||(Ze=ir),ir&&Qe.forEach(p),!qt&&(Qe.forEach(p),ze(Ze))})});return Ee.reduce(C)}return pipeline_1=N,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=n;var t=requireEvents().EventEmitter,e=requireInherits_browser();e(n,t),n.Readable=require_stream_readable$1(),n.Writable=require_stream_writable$1(),n.Duplex=require_stream_duplex$1(),n.Transform=require_stream_transform$1(),n.PassThrough=require_stream_passthrough$1(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline(),n.Stream=n;function n(){t.call(this)}return n.prototype.pipe=function(i,s){var a=this;function l(Ee){i.writable&&i.write(Ee)===!1&&a.pause&&a.pause()}a.on("data",l);function f(){a.readable&&a.resume&&a.resume()}i.on("drain",f),!i._isStdio&&(!s||s.end!==!1)&&(a.on("end",C),a.on("close",B));var p=!1;function C(){p||(p=!0,i.end())}function B(){p||(p=!0,typeof i.destroy=="function"&&i.destroy())}function N(Ee){if(le(),t.listenerCount(this,"error")===0)throw Ee}a.on("error",N),i.on("error",N);function le(){a.removeListener("data",l),i.removeListener("drain",f),a.removeListener("end",C),a.removeListener("close",B),a.removeListener("error",N),i.removeListener("error",N),a.removeListener("end",le),a.removeListener("close",le),i.removeListener("close",le)}return a.on("end",le),a.on("close",le),i.on("close",le),i.emit("pipe",a),i},streamBrowserify}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var t=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,n=requireInherits_browser();function i(f){e.call(this),this._block=t.allocUnsafe(f),this._blockSize=f,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(i,e),i.prototype._transform=function(f,p,C){var B=null;try{this.update(f,p)}catch(N){B=N}C(B)},i.prototype._flush=function(f){var p=null;try{this.push(this.digest())}catch(C){p=C}f(p)};var s=typeof Uint8Array<"u",a=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);function l(f,p){if(f instanceof t)return f;if(typeof f=="string")return t.from(f,p);if(a&&ArrayBuffer.isView(f)){if(f.byteLength===0)return t.alloc(0);var C=t.from(f.buffer,f.byteOffset,f.byteLength);if(C.byteLength===f.byteLength)return C}if(s&&f instanceof Uint8Array||t.isBuffer(f)&&f.constructor&&typeof f.constructor.isBuffer=="function"&&f.constructor.isBuffer(f))return t.from(f);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return i.prototype.update=function(f,p){if(this._finalized)throw new Error("Digest already called");f=l(f,p);for(var C=this._block,B=0;this._blockOffset+f.length-B>=this._blockSize;){for(var N=this._blockOffset;N<this._blockSize;)C[N++]=f[B++];this._update(),this._blockOffset=0}for(;B<f.length;)C[this._blockOffset++]=f[B++];for(var le=0,Ee=f.length*8;Ee>0;++le)this._length[le]+=Ee,Ee=this._length[le]/4294967296|0,Ee>0&&(this._length[le]-=4294967296*Ee);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(f){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var p=this._digest();f!==void 0&&(p=p.toString(f)),this._block.fill(0),this._blockOffset=0;for(var C=0;C<4;++C)this._length[C]=0;return p},i.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=i,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var t=requireInherits_browser(),e=requireHashBase(),n=requireSafeBuffer$1().Buffer,i=new Array(16);function s(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(s,e),s.prototype._update=function(){for(var B=i,N=0;N<16;++N)B[N]=this._block.readInt32LE(N*4);var le=this._a,Ee=this._b,Ue=this._c,ze=this._d;le=l(le,Ee,Ue,ze,B[0],3614090360,7),ze=l(ze,le,Ee,Ue,B[1],3905402710,12),Ue=l(Ue,ze,le,Ee,B[2],606105819,17),Ee=l(Ee,Ue,ze,le,B[3],3250441966,22),le=l(le,Ee,Ue,ze,B[4],4118548399,7),ze=l(ze,le,Ee,Ue,B[5],1200080426,12),Ue=l(Ue,ze,le,Ee,B[6],2821735955,17),Ee=l(Ee,Ue,ze,le,B[7],4249261313,22),le=l(le,Ee,Ue,ze,B[8],1770035416,7),ze=l(ze,le,Ee,Ue,B[9],2336552879,12),Ue=l(Ue,ze,le,Ee,B[10],4294925233,17),Ee=l(Ee,Ue,ze,le,B[11],2304563134,22),le=l(le,Ee,Ue,ze,B[12],1804603682,7),ze=l(ze,le,Ee,Ue,B[13],4254626195,12),Ue=l(Ue,ze,le,Ee,B[14],2792965006,17),Ee=l(Ee,Ue,ze,le,B[15],1236535329,22),le=f(le,Ee,Ue,ze,B[1],4129170786,5),ze=f(ze,le,Ee,Ue,B[6],3225465664,9),Ue=f(Ue,ze,le,Ee,B[11],643717713,14),Ee=f(Ee,Ue,ze,le,B[0],3921069994,20),le=f(le,Ee,Ue,ze,B[5],3593408605,5),ze=f(ze,le,Ee,Ue,B[10],38016083,9),Ue=f(Ue,ze,le,Ee,B[15],3634488961,14),Ee=f(Ee,Ue,ze,le,B[4],3889429448,20),le=f(le,Ee,Ue,ze,B[9],568446438,5),ze=f(ze,le,Ee,Ue,B[14],3275163606,9),Ue=f(Ue,ze,le,Ee,B[3],4107603335,14),Ee=f(Ee,Ue,ze,le,B[8],1163531501,20),le=f(le,Ee,Ue,ze,B[13],2850285829,5),ze=f(ze,le,Ee,Ue,B[2],4243563512,9),Ue=f(Ue,ze,le,Ee,B[7],1735328473,14),Ee=f(Ee,Ue,ze,le,B[12],2368359562,20),le=p(le,Ee,Ue,ze,B[5],4294588738,4),ze=p(ze,le,Ee,Ue,B[8],2272392833,11),Ue=p(Ue,ze,le,Ee,B[11],1839030562,16),Ee=p(Ee,Ue,ze,le,B[14],4259657740,23),le=p(le,Ee,Ue,ze,B[1],2763975236,4),ze=p(ze,le,Ee,Ue,B[4],1272893353,11),Ue=p(Ue,ze,le,Ee,B[7],4139469664,16),Ee=p(Ee,Ue,ze,le,B[10],3200236656,23),le=p(le,Ee,Ue,ze,B[13],681279174,4),ze=p(ze,le,Ee,Ue,B[0],3936430074,11),Ue=p(Ue,ze,le,Ee,B[3],3572445317,16),Ee=p(Ee,Ue,ze,le,B[6],76029189,23),le=p(le,Ee,Ue,ze,B[9],3654602809,4),ze=p(ze,le,Ee,Ue,B[12],3873151461,11),Ue=p(Ue,ze,le,Ee,B[15],530742520,16),Ee=p(Ee,Ue,ze,le,B[2],3299628645,23),le=C(le,Ee,Ue,ze,B[0],4096336452,6),ze=C(ze,le,Ee,Ue,B[7],1126891415,10),Ue=C(Ue,ze,le,Ee,B[14],2878612391,15),Ee=C(Ee,Ue,ze,le,B[5],4237533241,21),le=C(le,Ee,Ue,ze,B[12],1700485571,6),ze=C(ze,le,Ee,Ue,B[3],2399980690,10),Ue=C(Ue,ze,le,Ee,B[10],4293915773,15),Ee=C(Ee,Ue,ze,le,B[1],2240044497,21),le=C(le,Ee,Ue,ze,B[8],1873313359,6),ze=C(ze,le,Ee,Ue,B[15],4264355552,10),Ue=C(Ue,ze,le,Ee,B[6],2734768916,15),Ee=C(Ee,Ue,ze,le,B[13],1309151649,21),le=C(le,Ee,Ue,ze,B[4],4149444226,6),ze=C(ze,le,Ee,Ue,B[11],3174756917,10),Ue=C(Ue,ze,le,Ee,B[2],718787259,15),Ee=C(Ee,Ue,ze,le,B[9],3951481745,21),this._a=this._a+le|0,this._b=this._b+Ee|0,this._c=this._c+Ue|0,this._d=this._d+ze|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var B=n.allocUnsafe(16);return B.writeInt32LE(this._a,0),B.writeInt32LE(this._b,4),B.writeInt32LE(this._c,8),B.writeInt32LE(this._d,12),B};function a(B,N){return B<<N|B>>>32-N}function l(B,N,le,Ee,Ue,ze,Ze){return a(B+(N&le|~N&Ee)+Ue+ze|0,Ze)+N|0}function f(B,N,le,Ee,Ue,ze,Ze){return a(B+(N&Ee|le&~Ee)+Ue+ze|0,Ze)+N|0}function p(B,N,le,Ee,Ue,ze,Ze){return a(B+(N^le^Ee)+Ue+ze|0,Ze)+N|0}function C(B,N,le,Ee,Ue,ze,Ze){return a(B+(le^(N|~Ee))+Ue+ze|0,Ze)+N|0}return md5_js=s,md5_js}var ripemd160$1,hasRequiredRipemd160$1;function requireRipemd160$1(){if(hasRequiredRipemd160$1)return ripemd160$1;hasRequiredRipemd160$1=1;var t=require$$1$3.Buffer,e=requireInherits_browser(),n=requireHashBase(),i=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],a=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],C=[1352829926,1548603684,1836072691,2053994217,0];function B(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(B,n),B.prototype._update=function(){for(var Qe=i,ct=0;ct<16;++ct)Qe[ct]=this._block.readInt32LE(ct*4);for(var wt=this._a|0,qt=this._b|0,nr=this._c|0,ir=this._d|0,or=this._e|0,ur=this._a|0,hr=this._b|0,fr=this._c|0,ar=this._d|0,Lt=this._e|0,Vt=0;Vt<80;Vt+=1){var tt,Ye;Vt<16?(tt=le(wt,qt,nr,ir,or,Qe[s[Vt]],p[0],l[Vt]),Ye=Ze(ur,hr,fr,ar,Lt,Qe[a[Vt]],C[0],f[Vt])):Vt<32?(tt=Ee(wt,qt,nr,ir,or,Qe[s[Vt]],p[1],l[Vt]),Ye=ze(ur,hr,fr,ar,Lt,Qe[a[Vt]],C[1],f[Vt])):Vt<48?(tt=Ue(wt,qt,nr,ir,or,Qe[s[Vt]],p[2],l[Vt]),Ye=Ue(ur,hr,fr,ar,Lt,Qe[a[Vt]],C[2],f[Vt])):Vt<64?(tt=ze(wt,qt,nr,ir,or,Qe[s[Vt]],p[3],l[Vt]),Ye=Ee(ur,hr,fr,ar,Lt,Qe[a[Vt]],C[3],f[Vt])):(tt=Ze(wt,qt,nr,ir,or,Qe[s[Vt]],p[4],l[Vt]),Ye=le(ur,hr,fr,ar,Lt,Qe[a[Vt]],C[4],f[Vt])),wt=or,or=ir,ir=N(nr,10),nr=qt,qt=tt,ur=Lt,Lt=ar,ar=N(fr,10),fr=hr,hr=Ye}var ot=this._b+nr+ar|0;this._b=this._c+ir+Lt|0,this._c=this._d+or+ur|0,this._d=this._e+wt+hr|0,this._e=this._a+qt+fr|0,this._a=ot},B.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var Qe=t.alloc?t.alloc(20):new t(20);return Qe.writeInt32LE(this._a,0),Qe.writeInt32LE(this._b,4),Qe.writeInt32LE(this._c,8),Qe.writeInt32LE(this._d,12),Qe.writeInt32LE(this._e,16),Qe};function N(Qe,ct){return Qe<<ct|Qe>>>32-ct}function le(Qe,ct,wt,qt,nr,ir,or,ur){return N(Qe+(ct^wt^qt)+ir+or|0,ur)+nr|0}function Ee(Qe,ct,wt,qt,nr,ir,or,ur){return N(Qe+(ct&wt|~ct&qt)+ir+or|0,ur)+nr|0}function Ue(Qe,ct,wt,qt,nr,ir,or,ur){return N(Qe+((ct|~wt)^qt)+ir+or|0,ur)+nr|0}function ze(Qe,ct,wt,qt,nr,ir,or,ur){return N(Qe+(ct&qt|wt&~qt)+ir+or|0,ur)+nr|0}function Ze(Qe,ct,wt,qt,nr,ir,or,ur){return N(Qe+(ct^(wt|~qt))+ir+or|0,ur)+nr|0}return ripemd160$1=B,ripemd160$1}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var t=requireSafeBuffer$1().Buffer;function e(n,i){this._block=t.alloc(n),this._finalSize=i,this._blockSize=n,this._len=0}return e.prototype.update=function(n,i){typeof n=="string"&&(i=i||"utf8",n=t.from(n,i));for(var s=this._block,a=this._blockSize,l=n.length,f=this._len,p=0;p<l;){for(var C=f%a,B=Math.min(l-p,a-C),N=0;N<B;N++)s[C+N]=n[p+N];f+=B,p+=B,f%a===0&&this._update(s)}return this._len+=l,this},e.prototype.digest=function(n){var i=this._len%this._blockSize;this._block[i]=128,this._block.fill(0,i+1),i>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var a=(s&4294967295)>>>0,l=(s-a)/4294967296;this._block.writeUInt32BE(l,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var f=this._hash();return n?f.toString(n):f},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=e,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var t=requireInherits_browser(),e=requireHash$1(),n=requireSafeBuffer$1().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function a(){this.init(),this._w=s,e.call(this,64,56)}t(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function l(C){return C<<5|C>>>27}function f(C){return C<<30|C>>>2}function p(C,B,N,le){return C===0?B&N|~B&le:C===2?B&N|B&le|N&le:B^N^le}return a.prototype._update=function(C){for(var B=this._w,N=this._a|0,le=this._b|0,Ee=this._c|0,Ue=this._d|0,ze=this._e|0,Ze=0;Ze<16;++Ze)B[Ze]=C.readInt32BE(Ze*4);for(;Ze<80;++Ze)B[Ze]=B[Ze-3]^B[Ze-8]^B[Ze-14]^B[Ze-16];for(var Qe=0;Qe<80;++Qe){var ct=~~(Qe/20),wt=l(N)+p(ct,le,Ee,Ue)+ze+B[Qe]+i[ct]|0;ze=Ue,Ue=Ee,Ee=f(le),le=N,N=wt}this._a=N+this._a|0,this._b=le+this._b|0,this._c=Ee+this._c|0,this._d=Ue+this._d|0,this._e=ze+this._e|0},a.prototype._hash=function(){var C=n.allocUnsafe(20);return C.writeInt32BE(this._a|0,0),C.writeInt32BE(this._b|0,4),C.writeInt32BE(this._c|0,8),C.writeInt32BE(this._d|0,12),C.writeInt32BE(this._e|0,16),C},sha$1=a,sha$1}var sha1$1,hasRequiredSha1$1;function requireSha1$1(){if(hasRequiredSha1$1)return sha1$1;hasRequiredSha1$1=1;var t=requireInherits_browser(),e=requireHash$1(),n=requireSafeBuffer$1().Buffer,i=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function a(){this.init(),this._w=s,e.call(this,64,56)}t(a,e),a.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function l(B){return B<<1|B>>>31}function f(B){return B<<5|B>>>27}function p(B){return B<<30|B>>>2}function C(B,N,le,Ee){return B===0?N&le|~N&Ee:B===2?N&le|N&Ee|le&Ee:N^le^Ee}return a.prototype._update=function(B){for(var N=this._w,le=this._a|0,Ee=this._b|0,Ue=this._c|0,ze=this._d|0,Ze=this._e|0,Qe=0;Qe<16;++Qe)N[Qe]=B.readInt32BE(Qe*4);for(;Qe<80;++Qe)N[Qe]=l(N[Qe-3]^N[Qe-8]^N[Qe-14]^N[Qe-16]);for(var ct=0;ct<80;++ct){var wt=~~(ct/20),qt=f(le)+C(wt,Ee,Ue,ze)+Ze+N[ct]+i[wt]|0;Ze=ze,ze=Ue,Ue=p(Ee),Ee=le,le=qt}this._a=le+this._a|0,this._b=Ee+this._b|0,this._c=Ue+this._c|0,this._d=ze+this._d|0,this._e=Ze+this._e|0},a.prototype._hash=function(){var B=n.allocUnsafe(20);return B.writeInt32BE(this._a|0,0),B.writeInt32BE(this._b|0,4),B.writeInt32BE(this._c|0,8),B.writeInt32BE(this._d|0,12),B.writeInt32BE(this._e|0,16),B},sha1$1=a,sha1$1}var sha256$2,hasRequiredSha256$1;function requireSha256$1(){if(hasRequiredSha256$1)return sha256$2;hasRequiredSha256$1=1;var t=requireInherits_browser(),e=requireHash$1(),n=requireSafeBuffer$1().Buffer,i=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function a(){this.init(),this._w=s,e.call(this,64,56)}t(a,e),a.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function l(le,Ee,Ue){return Ue^le&(Ee^Ue)}function f(le,Ee,Ue){return le&Ee|Ue&(le|Ee)}function p(le){return(le>>>2|le<<30)^(le>>>13|le<<19)^(le>>>22|le<<10)}function C(le){return(le>>>6|le<<26)^(le>>>11|le<<21)^(le>>>25|le<<7)}function B(le){return(le>>>7|le<<25)^(le>>>18|le<<14)^le>>>3}function N(le){return(le>>>17|le<<15)^(le>>>19|le<<13)^le>>>10}return a.prototype._update=function(le){for(var Ee=this._w,Ue=this._a|0,ze=this._b|0,Ze=this._c|0,Qe=this._d|0,ct=this._e|0,wt=this._f|0,qt=this._g|0,nr=this._h|0,ir=0;ir<16;++ir)Ee[ir]=le.readInt32BE(ir*4);for(;ir<64;++ir)Ee[ir]=N(Ee[ir-2])+Ee[ir-7]+B(Ee[ir-15])+Ee[ir-16]|0;for(var or=0;or<64;++or){var ur=nr+C(ct)+l(ct,wt,qt)+i[or]+Ee[or]|0,hr=p(Ue)+f(Ue,ze,Ze)|0;nr=qt,qt=wt,wt=ct,ct=Qe+ur|0,Qe=Ze,Ze=ze,ze=Ue,Ue=ur+hr|0}this._a=Ue+this._a|0,this._b=ze+this._b|0,this._c=Ze+this._c|0,this._d=Qe+this._d|0,this._e=ct+this._e|0,this._f=wt+this._f|0,this._g=qt+this._g|0,this._h=nr+this._h|0},a.prototype._hash=function(){var le=n.allocUnsafe(32);return le.writeInt32BE(this._a,0),le.writeInt32BE(this._b,4),le.writeInt32BE(this._c,8),le.writeInt32BE(this._d,12),le.writeInt32BE(this._e,16),le.writeInt32BE(this._f,20),le.writeInt32BE(this._g,24),le.writeInt32BE(this._h,28),le},sha256$2=a,sha256$2}var sha224$2,hasRequiredSha224$1;function requireSha224$1(){if(hasRequiredSha224$1)return sha224$2;hasRequiredSha224$1=1;var t=requireInherits_browser(),e=requireSha256$1(),n=requireHash$1(),i=requireSafeBuffer$1().Buffer,s=new Array(64);function a(){this.init(),this._w=s,n.call(this,64,56)}return t(a,e),a.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},a.prototype._hash=function(){var l=i.allocUnsafe(28);return l.writeInt32BE(this._a,0),l.writeInt32BE(this._b,4),l.writeInt32BE(this._c,8),l.writeInt32BE(this._d,12),l.writeInt32BE(this._e,16),l.writeInt32BE(this._f,20),l.writeInt32BE(this._g,24),l},sha224$2=a,sha224$2}var sha512$2,hasRequiredSha512$1;function requireSha512$1(){if(hasRequiredSha512$1)return sha512$2;hasRequiredSha512$1=1;var t=requireInherits_browser(),e=requireHash$1(),n=requireSafeBuffer$1().Buffer,i=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function a(){this.init(),this._w=s,e.call(this,128,112)}t(a,e),a.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function l(ze,Ze,Qe){return Qe^ze&(Ze^Qe)}function f(ze,Ze,Qe){return ze&Ze|Qe&(ze|Ze)}function p(ze,Ze){return(ze>>>28|Ze<<4)^(Ze>>>2|ze<<30)^(Ze>>>7|ze<<25)}function C(ze,Ze){return(ze>>>14|Ze<<18)^(ze>>>18|Ze<<14)^(Ze>>>9|ze<<23)}function B(ze,Ze){return(ze>>>1|Ze<<31)^(ze>>>8|Ze<<24)^ze>>>7}function N(ze,Ze){return(ze>>>1|Ze<<31)^(ze>>>8|Ze<<24)^(ze>>>7|Ze<<25)}function le(ze,Ze){return(ze>>>19|Ze<<13)^(Ze>>>29|ze<<3)^ze>>>6}function Ee(ze,Ze){return(ze>>>19|Ze<<13)^(Ze>>>29|ze<<3)^(ze>>>6|Ze<<26)}function Ue(ze,Ze){return ze>>>0<Ze>>>0?1:0}return a.prototype._update=function(ze){for(var Ze=this._w,Qe=this._ah|0,ct=this._bh|0,wt=this._ch|0,qt=this._dh|0,nr=this._eh|0,ir=this._fh|0,or=this._gh|0,ur=this._hh|0,hr=this._al|0,fr=this._bl|0,ar=this._cl|0,Lt=this._dl|0,Vt=this._el|0,tt=this._fl|0,Ye=this._gl|0,ot=this._hl|0,Et=0;Et<32;Et+=2)Ze[Et]=ze.readInt32BE(Et*4),Ze[Et+1]=ze.readInt32BE(Et*4+4);for(;Et<160;Et+=2){var er=Ze[Et-30],rr=Ze[Et-15*2+1],yt=B(er,rr),tr=N(rr,er);er=Ze[Et-2*2],rr=Ze[Et-2*2+1];var Ut=le(er,rr),Ft=Ee(rr,er),sr=Ze[Et-7*2],vr=Ze[Et-7*2+1],_r=Ze[Et-16*2],dr=Ze[Et-16*2+1],gr=tr+vr|0,$r=yt+sr+Ue(gr,tr)|0;gr=gr+Ft|0,$r=$r+Ut+Ue(gr,Ft)|0,gr=gr+dr|0,$r=$r+_r+Ue(gr,dr)|0,Ze[Et]=$r,Ze[Et+1]=gr}for(var pr=0;pr<160;pr+=2){$r=Ze[pr],gr=Ze[pr+1];var lr=f(Qe,ct,wt),cr=f(hr,fr,ar),yr=p(Qe,hr),Sr=p(hr,Qe),Ar=C(nr,Vt),Tr=C(Vt,nr),xr=i[pr],Cr=i[pr+1],wr=l(nr,ir,or),Er=l(Vt,tt,Ye),kr=ot+Tr|0,Br=ur+Ar+Ue(kr,ot)|0;kr=kr+Er|0,Br=Br+wr+Ue(kr,Er)|0,kr=kr+Cr|0,Br=Br+xr+Ue(kr,Cr)|0,kr=kr+gr|0,Br=Br+$r+Ue(kr,gr)|0;var Rr=Sr+cr|0,Ir=yr+lr+Ue(Rr,Sr)|0;ur=or,ot=Ye,or=ir,Ye=tt,ir=nr,tt=Vt,Vt=Lt+kr|0,nr=qt+Br+Ue(Vt,Lt)|0,qt=wt,Lt=ar,wt=ct,ar=fr,ct=Qe,fr=hr,hr=kr+Rr|0,Qe=Br+Ir+Ue(hr,kr)|0}this._al=this._al+hr|0,this._bl=this._bl+fr|0,this._cl=this._cl+ar|0,this._dl=this._dl+Lt|0,this._el=this._el+Vt|0,this._fl=this._fl+tt|0,this._gl=this._gl+Ye|0,this._hl=this._hl+ot|0,this._ah=this._ah+Qe+Ue(this._al,hr)|0,this._bh=this._bh+ct+Ue(this._bl,fr)|0,this._ch=this._ch+wt+Ue(this._cl,ar)|0,this._dh=this._dh+qt+Ue(this._dl,Lt)|0,this._eh=this._eh+nr+Ue(this._el,Vt)|0,this._fh=this._fh+ir+Ue(this._fl,tt)|0,this._gh=this._gh+or+Ue(this._gl,Ye)|0,this._hh=this._hh+ur+Ue(this._hl,ot)|0},a.prototype._hash=function(){var ze=n.allocUnsafe(64);function Ze(Qe,ct,wt){ze.writeInt32BE(Qe,wt),ze.writeInt32BE(ct,wt+4)}return Ze(this._ah,this._al,0),Ze(this._bh,this._bl,8),Ze(this._ch,this._cl,16),Ze(this._dh,this._dl,24),Ze(this._eh,this._el,32),Ze(this._fh,this._fl,40),Ze(this._gh,this._gl,48),Ze(this._hh,this._hl,56),ze},sha512$2=a,sha512$2}var sha384$2,hasRequiredSha384$1;function requireSha384$1(){if(hasRequiredSha384$1)return sha384$2;hasRequiredSha384$1=1;var t=requireInherits_browser(),e=requireSha512$1(),n=requireHash$1(),i=requireSafeBuffer$1().Buffer,s=new Array(160);function a(){this.init(),this._w=s,n.call(this,128,112)}return t(a,e),a.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},a.prototype._hash=function(){var l=i.allocUnsafe(48);function f(p,C,B){l.writeInt32BE(p,B),l.writeInt32BE(C,B+4)}return f(this._ah,this._al,0),f(this._bh,this._bl,8),f(this._ch,this._cl,16),f(this._dh,this._dl,24),f(this._eh,this._el,32),f(this._fh,this._fl,40),l},sha384$2=a,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var t=sha_js.exports=function(n){n=n.toLowerCase();var i=t[n];if(!i)throw new Error(n+" is not supported (we accept pull requests)");return new i};return t.sha=requireSha$1(),t.sha1=requireSha1$1(),t.sha224=requireSha224$1(),t.sha256=requireSha256$1(),t.sha384=requireSha384$1(),t.sha512=requireSha512$1(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var t=requireSafeBuffer$1().Buffer,e=requireStreamBrowserify().Transform,n=requireString_decoder().StringDecoder,i=requireInherits_browser();function s(p){e.call(this),this.hashMode=typeof p=="string",this.hashMode?this[p]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(s,e);var a=typeof Uint8Array<"u",l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(t.prototype instanceof Uint8Array||t.TYPED_ARRAY_SUPPORT);function f(p,C){if(p instanceof t)return p;if(typeof p=="string")return t.from(p,C);if(l&&ArrayBuffer.isView(p)){if(p.byteLength===0)return t.alloc(0);var B=t.from(p.buffer,p.byteOffset,p.byteLength);if(B.byteLength===p.byteLength)return B}if(a&&p instanceof Uint8Array||t.isBuffer(p)&&p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return t.from(p);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return s.prototype.update=function(p,C,B){var N=f(p,C),le=this._update(N);return this.hashMode?this:(B&&(le=this._toString(le,B)),le)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(p,C,B){var N;try{this.hashMode?this._update(p):this.push(this._update(p))}catch(le){N=le}finally{B(N)}},s.prototype._flush=function(p){var C;try{this.push(this.__final())}catch(B){C=B}p(C)},s.prototype._finalOrDigest=function(p){var C=this.__final()||t.alloc(0);return p&&(C=this._toString(C,p,!0)),C},s.prototype._toString=function(p,C,B){if(this._decoder||(this._decoder=new n(C),this._encoding=C),this._encoding!==C)throw new Error("cant switch encodings");var N=this._decoder.write(p);return B&&(N+=this._decoder.end()),N},cipherBase=s,cipherBase}var browser$9,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var t=requireInherits_browser(),e=requireMd5_js(),n=requireRipemd160$1(),i=requireSha_js(),s=requireCipherBase();function a(l){s.call(this,"digest"),this._hash=l}return t(a,s),a.prototype._update=function(l){this._hash.update(l)},a.prototype._final=function(){return this._hash.digest()},browser$9=function(f){return f=f.toLowerCase(),f==="md5"?new e:f==="rmd160"||f==="ripemd160"?new n:new a(i(f))},browser$9}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var t=requireInherits_browser(),e=requireSafeBuffer$1().Buffer,n=requireCipherBase(),i=e.alloc(128),s=64;function a(l,f){n.call(this,"digest"),typeof f=="string"&&(f=e.from(f)),this._alg=l,this._key=f,f.length>s?f=l(f):f.length<s&&(f=e.concat([f,i],s));for(var p=this._ipad=e.allocUnsafe(s),C=this._opad=e.allocUnsafe(s),B=0;B<s;B++)p[B]=f[B]^54,C[B]=f[B]^92;this._hash=[p]}return t(a,n),a.prototype._update=function(l){this._hash.push(l)},a.prototype._final=function(){var l=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,l]))},legacy=a,legacy}var md5$1,hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$1;hasRequiredMd5$1=1;var t=requireMd5_js();return md5$1=function(e){return new t().update(e).digest()},md5$1}var browser$8,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var t=requireInherits_browser(),e=requireLegacy(),n=requireCipherBase(),i=requireSafeBuffer$1().Buffer,s=requireMd5$1(),a=requireRipemd160$1(),l=requireSha_js(),f=i.alloc(128);function p(C,B){n.call(this,"digest"),typeof B=="string"&&(B=i.from(B));var N=C==="sha512"||C==="sha384"?128:64;if(this._alg=C,this._key=B,B.length>N){var le=C==="rmd160"?new a:l(C);B=le.update(B).digest()}else B.length<N&&(B=i.concat([B,f],N));for(var Ee=this._ipad=i.allocUnsafe(N),Ue=this._opad=i.allocUnsafe(N),ze=0;ze<N;ze++)Ee[ze]=B[ze]^54,Ue[ze]=B[ze]^92;this._hash=C==="rmd160"?new a:l(C),this._hash.update(Ee)}return t(p,n),p.prototype._update=function(C){this._hash.update(C)},p.prototype._final=function(){var C=this._hash.digest(),B=this._alg==="rmd160"?new a:l(this._alg);return B.update(this._opad).update(C).digest()},browser$8=function(B,N){return B=B.toLowerCase(),B==="rmd160"||B==="ripemd160"?new p("rmd160",N):B==="md5"?new e(s,N):new p(B,N)},browser$8}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224$1={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$1={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224:sha224$1,sha384:sha384$1,sha512:sha512$1,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$7={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var t=Math.pow(2,30)-1;return precondition=function(e,n){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof n!="number")throw new TypeError("Key length not a number");if(n<0||n>t||n!==n)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var t;if(commonjsGlobal$1.process&&commonjsGlobal$1.process.browser)t="utf-8";else if(commonjsGlobal$1.process&&commonjsGlobal$1.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);t=e>=6?"utf-8":"binary"}else t="utf-8";return defaultEncoding_1=t,defaultEncoding_1}var toBuffer,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer;hasRequiredToBuffer=1;var t=requireSafeBuffer$1().Buffer;return toBuffer=function(e,n,i){if(t.isBuffer(e))return e;if(typeof e=="string")return t.from(e,n);if(ArrayBuffer.isView(e))return t.from(e.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")},toBuffer}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var t=requireMd5$1(),e=requireRipemd160$1(),n=requireSha_js(),i=requireSafeBuffer$1().Buffer,s=requirePrecondition(),a=requireDefaultEncoding(),l=requireToBuffer(),f=i.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function C(le,Ee,Ue){var ze=B(le),Ze=le==="sha512"||le==="sha384"?128:64;Ee.length>Ze?Ee=ze(Ee):Ee.length<Ze&&(Ee=i.concat([Ee,f],Ze));for(var Qe=i.allocUnsafe(Ze+p[le]),ct=i.allocUnsafe(Ze+p[le]),wt=0;wt<Ze;wt++)Qe[wt]=Ee[wt]^54,ct[wt]=Ee[wt]^92;var qt=i.allocUnsafe(Ze+Ue+4);Qe.copy(qt,0,0,Ze),this.ipad1=qt,this.ipad2=Qe,this.opad=ct,this.alg=le,this.blocksize=Ze,this.hash=ze,this.size=p[le]}C.prototype.run=function(le,Ee){le.copy(Ee,this.blocksize);var Ue=this.hash(Ee);return Ue.copy(this.opad,this.blocksize),this.hash(this.opad)};function B(le){function Ee(ze){return n(le).update(ze).digest()}function Ue(ze){return new e().update(ze).digest()}return le==="rmd160"||le==="ripemd160"?Ue:le==="md5"?t:Ee}function N(le,Ee,Ue,ze,Ze){s(Ue,ze),le=l(le,a,"Password"),Ee=l(Ee,a,"Salt"),Ze=Ze||"sha1";var Qe=new C(Ze,le,Ee.length),ct=i.allocUnsafe(ze),wt=i.allocUnsafe(Ee.length+4);Ee.copy(wt,0,0,Ee.length);for(var qt=0,nr=p[Ze],ir=Math.ceil(ze/nr),or=1;or<=ir;or++){wt.writeUInt32BE(or,Ee.length);for(var ur=Qe.run(wt,Qe.ipad1),hr=ur,fr=1;fr<Ue;fr++){hr=Qe.run(hr,Qe.ipad2);for(var ar=0;ar<nr;ar++)ur[ar]^=hr[ar]}ur.copy(ct,qt),qt+=nr}return ct}return syncBrowser=N,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var t=requireSafeBuffer$1().Buffer,e=requirePrecondition(),n=requireDefaultEncoding(),i=requireSyncBrowser(),s=requireToBuffer(),a,l=commonjsGlobal$1.crypto&&commonjsGlobal$1.crypto.subtle,f={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];function C(Ue){if(commonjsGlobal$1.process&&!commonjsGlobal$1.process.browser||!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(p[Ue]!==void 0)return p[Ue];a=a||t.alloc(8);var ze=le(a,a,10,128,Ue).then(function(){return!0}).catch(function(){return!1});return p[Ue]=ze,ze}var B;function N(){return B||(commonjsGlobal$1.process&&commonjsGlobal$1.process.nextTick?B=commonjsGlobal$1.process.nextTick:commonjsGlobal$1.queueMicrotask?B=commonjsGlobal$1.queueMicrotask:commonjsGlobal$1.setImmediate?B=commonjsGlobal$1.setImmediate:B=commonjsGlobal$1.setTimeout,B)}function le(Ue,ze,Ze,Qe,ct){return l.importKey("raw",Ue,{name:"PBKDF2"},!1,["deriveBits"]).then(function(wt){return l.deriveBits({name:"PBKDF2",salt:ze,iterations:Ze,hash:{name:ct}},wt,Qe<<3)}).then(function(wt){return t.from(wt)})}function Ee(Ue,ze){Ue.then(function(Ze){N()(function(){ze(null,Ze)})},function(Ze){N()(function(){ze(Ze)})})}return async=function(Ue,ze,Ze,Qe,ct,wt){typeof ct=="function"&&(wt=ct,ct=void 0),ct=ct||"sha1";var qt=f[ct.toLowerCase()];if(!qt||typeof commonjsGlobal$1.Promise!="function"){N()(function(){var nr;try{nr=i(Ue,ze,Ze,Qe,ct)}catch(ir){return wt(ir)}wt(null,nr)});return}if(e(Ze,Qe),Ue=s(Ue,n,"Password"),ze=s(ze,n,"Salt"),typeof wt!="function")throw new Error("No callback provided to pbkdf2");Ee(C(qt).then(function(nr){return nr?le(Ue,ze,Ze,Qe,qt):i(Ue,ze,Ze,Qe,ct)}),wt)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$7.pbkdf2=requireAsync(),browser$7.pbkdf2Sync=requireSyncBrowser()),browser$7}var browser$6={},des$1={},utils$3={},hasRequiredUtils$3;function requireUtils$3(){if(hasRequiredUtils$3)return utils$3;hasRequiredUtils$3=1,utils$3.readUInt32BE=function(s,a){var l=s[0+a]<<24|s[1+a]<<16|s[2+a]<<8|s[3+a];return l>>>0},utils$3.writeUInt32BE=function(s,a,l){s[0+l]=a>>>24,s[1+l]=a>>>16&255,s[2+l]=a>>>8&255,s[3+l]=a&255},utils$3.ip=function(s,a,l,f){for(var p=0,C=0,B=6;B>=0;B-=2){for(var N=0;N<=24;N+=8)p<<=1,p|=a>>>N+B&1;for(var N=0;N<=24;N+=8)p<<=1,p|=s>>>N+B&1}for(var B=6;B>=0;B-=2){for(var N=1;N<=25;N+=8)C<<=1,C|=a>>>N+B&1;for(var N=1;N<=25;N+=8)C<<=1,C|=s>>>N+B&1}l[f+0]=p>>>0,l[f+1]=C>>>0},utils$3.rip=function(s,a,l,f){for(var p=0,C=0,B=0;B<4;B++)for(var N=24;N>=0;N-=8)p<<=1,p|=a>>>N+B&1,p<<=1,p|=s>>>N+B&1;for(var B=4;B<8;B++)for(var N=24;N>=0;N-=8)C<<=1,C|=a>>>N+B&1,C<<=1,C|=s>>>N+B&1;l[f+0]=p>>>0,l[f+1]=C>>>0},utils$3.pc1=function(s,a,l,f){for(var p=0,C=0,B=7;B>=5;B--){for(var N=0;N<=24;N+=8)p<<=1,p|=a>>N+B&1;for(var N=0;N<=24;N+=8)p<<=1,p|=s>>N+B&1}for(var N=0;N<=24;N+=8)p<<=1,p|=a>>N+B&1;for(var B=1;B<=3;B++){for(var N=0;N<=24;N+=8)C<<=1,C|=a>>N+B&1;for(var N=0;N<=24;N+=8)C<<=1,C|=s>>N+B&1}for(var N=0;N<=24;N+=8)C<<=1,C|=s>>N+B&1;l[f+0]=p>>>0,l[f+1]=C>>>0},utils$3.r28shl=function(s,a){return s<<a&268435455|s>>>28-a};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$3.pc2=function(s,a,l,f){for(var p=0,C=0,B=t.length>>>1,N=0;N<B;N++)p<<=1,p|=s>>>t[N]&1;for(var N=B;N<t.length;N++)C<<=1,C|=a>>>t[N]&1;l[f+0]=p>>>0,l[f+1]=C>>>0},utils$3.expand=function(s,a,l){var f=0,p=0;f=(s&1)<<5|s>>>27;for(var C=23;C>=15;C-=4)f<<=6,f|=s>>>C&63;for(var C=11;C>=3;C-=4)p|=s>>>C&63,p<<=6;p|=(s&31)<<1|s>>>31,a[l+0]=f>>>0,a[l+1]=p>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$3.substitute=function(s,a){for(var l=0,f=0;f<4;f++){var p=s>>>18-f*6&63,C=e[f*64+p];l<<=4,l|=C}for(var f=0;f<4;f++){var p=a>>>18-f*6&63,C=e[4*64+f*64+p];l<<=4,l|=C}return l>>>0};var n=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$3.permute=function(s){for(var a=0,l=0;l<n.length;l++)a<<=1,a|=s>>>n[l]&1;return a>>>0},utils$3.padSplit=function(s,a,l){for(var f=s.toString(2);f.length<a;)f="0"+f;for(var p=[],C=0;C<a;C+=l)p.push(f.slice(C,C+l));return p.join(" ")},utils$3}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=t;function t(e,n){if(!e)throw new Error(n||"Assertion failed")}return t.equal=function(n,i,s){if(n!=i)throw new Error(s||"Assertion failed: "+n+" != "+i)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var t=requireMinimalisticAssert();function e(n){this.options=n,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=n.padding!==!1}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(i){return i.length===0?[]:this.type==="decrypt"?this._updateDecrypt(i):this._updateEncrypt(i)},e.prototype._buffer=function(i,s){for(var a=Math.min(this.buffer.length-this.bufferOff,i.length-s),l=0;l<a;l++)this.buffer[this.bufferOff+l]=i[s+l];return this.bufferOff+=a,a},e.prototype._flushBuffer=function(i,s){return this._update(this.buffer,0,i,s),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(i){var s=0,a=0,l=(this.bufferOff+i.length)/this.blockSize|0,f=new Array(l*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(i,s),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(f,a)));for(var p=i.length-(i.length-s)%this.blockSize;s<p;s+=this.blockSize)this._update(i,s,f,a),a+=this.blockSize;for(;s<i.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=i[s];return f},e.prototype._updateDecrypt=function(i){for(var s=0,a=0,l=Math.ceil((this.bufferOff+i.length)/this.blockSize)-1,f=new Array(l*this.blockSize);l>0;l--)s+=this._buffer(i,s),a+=this._flushBuffer(f,a);return s+=this._buffer(i,s),f},e.prototype.final=function(i){var s;i&&(s=this.update(i));var a;return this.type==="encrypt"?a=this._finalEncrypt():a=this._finalDecrypt(),s?s.concat(a):a},e.prototype._pad=function(i,s){if(s===0)return!1;for(;s<i.length;)i[s++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var i=new Array(this.blockSize);return this._update(this.buffer,0,i,0),i},e.prototype._unpad=function(i){return i},e.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var i=new Array(this.blockSize);return this._flushBuffer(i,0),this._unpad(i)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),n=requireUtils$3(),i=requireCipher();function s(){this.tmp=new Array(2),this.keys=null}function a(f){i.call(this,f);var p=new s;this._desState=p,this.deriveKeys(p,f.key)}e(a,i),des=a,a.create=function(p){return new a(p)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return a.prototype.deriveKeys=function(p,C){p.keys=new Array(16*2),t.equal(C.length,this.blockSize,"Invalid key length");var B=n.readUInt32BE(C,0),N=n.readUInt32BE(C,4);n.pc1(B,N,p.tmp,0),B=p.tmp[0],N=p.tmp[1];for(var le=0;le<p.keys.length;le+=2){var Ee=l[le>>>1];B=n.r28shl(B,Ee),N=n.r28shl(N,Ee),n.pc2(B,N,p.keys,le)}},a.prototype._update=function(p,C,B,N){var le=this._desState,Ee=n.readUInt32BE(p,C),Ue=n.readUInt32BE(p,C+4);n.ip(Ee,Ue,le.tmp,0),Ee=le.tmp[0],Ue=le.tmp[1],this.type==="encrypt"?this._encrypt(le,Ee,Ue,le.tmp,0):this._decrypt(le,Ee,Ue,le.tmp,0),Ee=le.tmp[0],Ue=le.tmp[1],n.writeUInt32BE(B,Ee,N),n.writeUInt32BE(B,Ue,N+4)},a.prototype._pad=function(p,C){if(this.padding===!1)return!1;for(var B=p.length-C,N=C;N<p.length;N++)p[N]=B;return!0},a.prototype._unpad=function(p){if(this.padding===!1)return p;for(var C=p[p.length-1],B=p.length-C;B<p.length;B++)t.equal(p[B],C);return p.slice(0,p.length-C)},a.prototype._encrypt=function(p,C,B,N,le){for(var Ee=C,Ue=B,ze=0;ze<p.keys.length;ze+=2){var Ze=p.keys[ze],Qe=p.keys[ze+1];n.expand(Ue,p.tmp,0),Ze^=p.tmp[0],Qe^=p.tmp[1];var ct=n.substitute(Ze,Qe),wt=n.permute(ct),qt=Ue;Ue=(Ee^wt)>>>0,Ee=qt}n.rip(Ue,Ee,N,le)},a.prototype._decrypt=function(p,C,B,N,le){for(var Ee=B,Ue=C,ze=p.keys.length-2;ze>=0;ze-=2){var Ze=p.keys[ze],Qe=p.keys[ze+1];n.expand(Ee,p.tmp,0),Ze^=p.tmp[0],Qe^=p.tmp[1];var ct=n.substitute(Ze,Qe),wt=n.permute(ct),qt=Ee;Ee=(Ue^wt)>>>0,Ue=qt}n.rip(Ee,Ue,N,le)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),n={};function i(a){t.equal(a.length,8,"Invalid IV length"),this.iv=new Array(8);for(var l=0;l<this.iv.length;l++)this.iv[l]=a[l]}function s(a){function l(B){a.call(this,B),this._cbcInit()}e(l,a);for(var f=Object.keys(n),p=0;p<f.length;p++){var C=f[p];l.prototype[C]=n[C]}return l.create=function(N){return new l(N)},l}return cbc$1.instantiate=s,n._cbcInit=function(){var l=new i(this.options.iv);this._cbcState=l},n._update=function(l,f,p,C){var B=this._cbcState,N=this.constructor.super_.prototype,le=B.iv;if(this.type==="encrypt"){for(var Ee=0;Ee<this.blockSize;Ee++)le[Ee]^=l[f+Ee];N._update.call(this,le,0,p,C);for(var Ee=0;Ee<this.blockSize;Ee++)le[Ee]=p[C+Ee]}else{N._update.call(this,l,f,p,C);for(var Ee=0;Ee<this.blockSize;Ee++)p[C+Ee]^=le[Ee];for(var Ee=0;Ee<this.blockSize;Ee++)le[Ee]=l[f+Ee]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var t=requireMinimalisticAssert(),e=requireInherits_browser(),n=requireCipher(),i=requireDes$1();function s(l,f){t.equal(f.length,24,"Invalid key length");var p=f.slice(0,8),C=f.slice(8,16),B=f.slice(16,24);l==="encrypt"?this.ciphers=[i.create({type:"encrypt",key:p}),i.create({type:"decrypt",key:C}),i.create({type:"encrypt",key:B})]:this.ciphers=[i.create({type:"decrypt",key:B}),i.create({type:"encrypt",key:C}),i.create({type:"decrypt",key:p})]}function a(l){n.call(this,l);var f=new s(this.type,this.options.key);this._edeState=f}return e(a,n),ede=a,a.create=function(f){return new a(f)},a.prototype._update=function(f,p,C,B){var N=this._edeState;N.ciphers[0]._update(f,p,C,B),N.ciphers[1]._update(C,B,C,B),N.ciphers[2]._update(C,B,C,B)},a.prototype._pad=i.prototype._pad,a.prototype._unpad=i.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var t=requireCipherBase(),e=requireDes(),n=requireInherits_browser(),i=requireSafeBuffer$1().Buffer,s={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],browserifyDes=a,n(a,t);function a(l){t.call(this);var f=l.mode.toLowerCase(),p=s[f],C;l.decrypt?C="decrypt":C="encrypt";var B=l.key;i.isBuffer(B)||(B=i.from(B)),(f==="des-ede"||f==="des-ede-cbc")&&(B=i.concat([B,B.slice(0,8)]));var N=l.iv;i.isBuffer(N)||(N=i.from(N)),this._des=p.create({key:B,iv:N,type:C})}return a.prototype._update=function(l){return i.from(this._des.update(l))},a.prototype._final=function(){return i.from(this._des.final())},browserifyDes}var browser$5={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)},ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,n){for(var i=Math.min(e.length,n.length),s=new Buffer$1(i),a=0;a<i;++a)s[a]=e[a]^n[a];return s}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var t=requireBufferXor();return cbc.encrypt=function(e,n){var i=t(n,e._prev);return e._prev=e._cipher.encryptBlock(i),e._prev},cbc.decrypt=function(e,n){var i=e._prev;e._prev=n;var s=e._cipher.decryptBlock(n);return t(s,i)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var t=requireSafeBuffer$1().Buffer,e=requireBufferXor();function n(i,s,a){var l=s.length,f=e(s,i._cache);return i._cache=i._cache.slice(l),i._prev=t.concat([i._prev,a?s:f]),f}return cfb.encrypt=function(i,s,a){for(var l=t.allocUnsafe(0),f;s.length;)if(i._cache.length===0&&(i._cache=i._cipher.encryptBlock(i._prev),i._prev=t.allocUnsafe(0)),i._cache.length<=s.length)f=i._cache.length,l=t.concat([l,n(i,s.slice(0,f),a)]),s=s.slice(f);else{l=t.concat([l,n(i,s,a)]);break}return l},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var t=requireSafeBuffer$1().Buffer;function e(n,i,s){var a=n._cipher.encryptBlock(n._prev),l=a[0]^i;return n._prev=t.concat([n._prev.slice(1),t.from([s?i:l])]),l}return cfb8.encrypt=function(n,i,s){for(var a=i.length,l=t.allocUnsafe(a),f=-1;++f<a;)l[f]=e(n,i[f],s);return l},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var t=requireSafeBuffer$1().Buffer;function e(i,s,a){for(var l,f=-1,p=8,C=0,B,N;++f<p;)l=i._cipher.encryptBlock(i._prev),B=s&1<<7-f?128:0,N=l[0]^B,C+=(N&128)>>f%8,i._prev=n(i._prev,a?B:N);return C}function n(i,s){var a=i.length,l=-1,f=t.allocUnsafe(i.length);for(i=t.concat([i,t.from([s])]);++l<a;)f[l]=i[l]<<1|i[l+1]>>7;return f}return cfb1.encrypt=function(i,s,a){for(var l=s.length,f=t.allocUnsafe(l),p=-1;++p<l;)f[p]=e(i,s[p],a);return f},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var t=requireBufferXor();function e(n){return n._prev=n._cipher.encryptBlock(n._prev),n._prev}return ofb.encrypt=function(n,i){for(;n._cache.length<i.length;)n._cache=Buffer$1.concat([n._cache,e(n)]);var s=n._cache.slice(0,i.length);return n._cache=n._cache.slice(i.length),t(i,s)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function t(e){for(var n=e.length,i;n--;)if(i=e.readUInt8(n),i===255)e.writeUInt8(0,n);else{i++,e.writeUInt8(i,n);break}}return incr32_1=t,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var t=requireBufferXor(),e=requireSafeBuffer$1().Buffer,n=requireIncr32();function i(a){var l=a._cipher.encryptBlockRaw(a._prev);return n(a._prev),l}var s=16;return ctr.encrypt=function(a,l){var f=Math.ceil(l.length/s),p=a._cache.length;a._cache=e.concat([a._cache,e.allocUnsafe(f*s)]);for(var C=0;C<f;C++){var B=i(a),N=p+C*s;a._cache.writeUInt32BE(B[0],N+0),a._cache.writeUInt32BE(B[1],N+4),a._cache.writeUInt32BE(B[2],N+8),a._cache.writeUInt32BE(B[3],N+12)}var le=a._cache.slice(0,l.length);return a._cache=a._cache.slice(l.length),t(l,le)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var t={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var n in e)e[n].module=t[e[n].mode];return modes_1=e,modes_1}var aes$1={},hasRequiredAes$1;function requireAes$1(){if(hasRequiredAes$1)return aes$1;hasRequiredAes$1=1;var t=requireSafeBuffer$1().Buffer;function e(f){t.isBuffer(f)||(f=t.from(f));for(var p=f.length/4|0,C=new Array(p),B=0;B<p;B++)C[B]=f.readUInt32BE(B*4);return C}function n(f){for(var p=0;p<f.length;f++)f[p]=0}function i(f,p,C,B,N){for(var le=C[0],Ee=C[1],Ue=C[2],ze=C[3],Ze=f[0]^p[0],Qe=f[1]^p[1],ct=f[2]^p[2],wt=f[3]^p[3],qt,nr,ir,or,ur=4,hr=1;hr<N;hr++)qt=le[Ze>>>24]^Ee[Qe>>>16&255]^Ue[ct>>>8&255]^ze[wt&255]^p[ur++],nr=le[Qe>>>24]^Ee[ct>>>16&255]^Ue[wt>>>8&255]^ze[Ze&255]^p[ur++],ir=le[ct>>>24]^Ee[wt>>>16&255]^Ue[Ze>>>8&255]^ze[Qe&255]^p[ur++],or=le[wt>>>24]^Ee[Ze>>>16&255]^Ue[Qe>>>8&255]^ze[ct&255]^p[ur++],Ze=qt,Qe=nr,ct=ir,wt=or;return qt=(B[Ze>>>24]<<24|B[Qe>>>16&255]<<16|B[ct>>>8&255]<<8|B[wt&255])^p[ur++],nr=(B[Qe>>>24]<<24|B[ct>>>16&255]<<16|B[wt>>>8&255]<<8|B[Ze&255])^p[ur++],ir=(B[ct>>>24]<<24|B[wt>>>16&255]<<16|B[Ze>>>8&255]<<8|B[Qe&255])^p[ur++],or=(B[wt>>>24]<<24|B[Ze>>>16&255]<<16|B[Qe>>>8&255]<<8|B[ct&255])^p[ur++],qt=qt>>>0,nr=nr>>>0,ir=ir>>>0,or=or>>>0,[qt,nr,ir,or]}var s=[0,1,2,4,8,16,32,64,128,27,54],a=function(){for(var f=new Array(256),p=0;p<256;p++)p<128?f[p]=p<<1:f[p]=p<<1^283;for(var C=[],B=[],N=[[],[],[],[]],le=[[],[],[],[]],Ee=0,Ue=0,ze=0;ze<256;++ze){var Ze=Ue^Ue<<1^Ue<<2^Ue<<3^Ue<<4;Ze=Ze>>>8^Ze&255^99,C[Ee]=Ze,B[Ze]=Ee;var Qe=f[Ee],ct=f[Qe],wt=f[ct],qt=f[Ze]*257^Ze*16843008;N[0][Ee]=qt<<24|qt>>>8,N[1][Ee]=qt<<16|qt>>>16,N[2][Ee]=qt<<8|qt>>>24,N[3][Ee]=qt,qt=wt*16843009^ct*65537^Qe*257^Ee*16843008,le[0][Ze]=qt<<24|qt>>>8,le[1][Ze]=qt<<16|qt>>>16,le[2][Ze]=qt<<8|qt>>>24,le[3][Ze]=qt,Ee===0?Ee=Ue=1:(Ee=Qe^f[f[f[wt^Qe]]],Ue^=f[f[Ue]])}return{SBOX:C,INV_SBOX:B,SUB_MIX:N,INV_SUB_MIX:le}}();function l(f){this._key=e(f),this._reset()}return l.blockSize=4*4,l.keySize=256/8,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var f=this._key,p=f.length,C=p+6,B=(C+1)*4,N=[],le=0;le<p;le++)N[le]=f[le];for(le=p;le<B;le++){var Ee=N[le-1];le%p===0?(Ee=Ee<<8|Ee>>>24,Ee=a.SBOX[Ee>>>24]<<24|a.SBOX[Ee>>>16&255]<<16|a.SBOX[Ee>>>8&255]<<8|a.SBOX[Ee&255],Ee^=s[le/p|0]<<24):p>6&&le%p===4&&(Ee=a.SBOX[Ee>>>24]<<24|a.SBOX[Ee>>>16&255]<<16|a.SBOX[Ee>>>8&255]<<8|a.SBOX[Ee&255]),N[le]=N[le-p]^Ee}for(var Ue=[],ze=0;ze<B;ze++){var Ze=B-ze,Qe=N[Ze-(ze%4?0:4)];ze<4||Ze<=4?Ue[ze]=Qe:Ue[ze]=a.INV_SUB_MIX[0][a.SBOX[Qe>>>24]]^a.INV_SUB_MIX[1][a.SBOX[Qe>>>16&255]]^a.INV_SUB_MIX[2][a.SBOX[Qe>>>8&255]]^a.INV_SUB_MIX[3][a.SBOX[Qe&255]]}this._nRounds=C,this._keySchedule=N,this._invKeySchedule=Ue},l.prototype.encryptBlockRaw=function(f){return f=e(f),i(f,this._keySchedule,a.SUB_MIX,a.SBOX,this._nRounds)},l.prototype.encryptBlock=function(f){var p=this.encryptBlockRaw(f),C=t.allocUnsafe(16);return C.writeUInt32BE(p[0],0),C.writeUInt32BE(p[1],4),C.writeUInt32BE(p[2],8),C.writeUInt32BE(p[3],12),C},l.prototype.decryptBlock=function(f){f=e(f);var p=f[1];f[1]=f[3],f[3]=p;var C=i(f,this._invKeySchedule,a.INV_SUB_MIX,a.INV_SBOX,this._nRounds),B=t.allocUnsafe(16);return B.writeUInt32BE(C[0],0),B.writeUInt32BE(C[3],4),B.writeUInt32BE(C[2],8),B.writeUInt32BE(C[1],12),B},l.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},aes$1.AES=l,aes$1}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var t=requireSafeBuffer$1().Buffer,e=t.alloc(16,0);function n(a){return[a.readUInt32BE(0),a.readUInt32BE(4),a.readUInt32BE(8),a.readUInt32BE(12)]}function i(a){var l=t.allocUnsafe(16);return l.writeUInt32BE(a[0]>>>0,0),l.writeUInt32BE(a[1]>>>0,4),l.writeUInt32BE(a[2]>>>0,8),l.writeUInt32BE(a[3]>>>0,12),l}function s(a){this.h=a,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return s.prototype.ghash=function(a){for(var l=-1;++l<a.length;)this.state[l]^=a[l];this._multiply()},s.prototype._multiply=function(){for(var a=n(this.h),l=[0,0,0,0],f,p,C,B=-1;++B<128;){for(p=(this.state[~~(B/8)]&1<<7-B%8)!==0,p&&(l[0]^=a[0],l[1]^=a[1],l[2]^=a[2],l[3]^=a[3]),C=(a[3]&1)!==0,f=3;f>0;f--)a[f]=a[f]>>>1|(a[f-1]&1)<<31;a[0]=a[0]>>>1,C&&(a[0]=a[0]^225<<24)}this.state=i(l)},s.prototype.update=function(a){this.cache=t.concat([this.cache,a]);for(var l;this.cache.length>=16;)l=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(l)},s.prototype.final=function(a,l){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(i([0,a,0,l])),this.state},ghash=s,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var t=requireAes$1(),e=requireSafeBuffer$1().Buffer,n=requireCipherBase(),i=requireInherits_browser(),s=requireGhash(),a=requireBufferXor(),l=requireIncr32();function f(B,N){var le=0;B.length!==N.length&&le++;for(var Ee=Math.min(B.length,N.length),Ue=0;Ue<Ee;++Ue)le+=B[Ue]^N[Ue];return le}function p(B,N,le){if(N.length===12)return B._finID=e.concat([N,e.from([0,0,0,1])]),e.concat([N,e.from([0,0,0,2])]);var Ee=new s(le),Ue=N.length,ze=Ue%16;Ee.update(N),ze&&(ze=16-ze,Ee.update(e.alloc(ze,0))),Ee.update(e.alloc(8,0));var Ze=Ue*8,Qe=e.alloc(8);Qe.writeUIntBE(Ze,0,8),Ee.update(Qe),B._finID=Ee.state;var ct=e.from(B._finID);return l(ct),ct}function C(B,N,le,Ee){n.call(this);var Ue=e.alloc(4,0);this._cipher=new t.AES(N);var ze=this._cipher.encryptBlock(Ue);this._ghash=new s(ze),le=p(this,le,ze),this._prev=e.from(le),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=Ee,this._alen=0,this._len=0,this._mode=B,this._authTag=null,this._called=!1}return i(C,n),C.prototype._update=function(B){if(!this._called&&this._alen){var N=16-this._alen%16;N<16&&(N=e.alloc(N,0),this._ghash.update(N))}this._called=!0;var le=this._mode.encrypt(this,B);return this._decrypt?this._ghash.update(B):this._ghash.update(le),this._len+=B.length,le},C.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var B=a(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&f(B,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=B,this._cipher.scrub()},C.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},C.prototype.setAuthTag=function(N){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=N},C.prototype.setAAD=function(N){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(N),this._alen+=N.length},authCipher=C,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var t=requireAes$1(),e=requireSafeBuffer$1().Buffer,n=requireCipherBase(),i=requireInherits_browser();function s(a,l,f,p){n.call(this),this._cipher=new t.AES(l),this._prev=e.from(f),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=p,this._mode=a}return i(s,n),s.prototype._update=function(a){return this._mode.encrypt(this,a,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},streamCipher=s,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var t=requireSafeBuffer$1().Buffer,e=requireMd5_js();function n(i,s,a,l){if(t.isBuffer(i)||(i=t.from(i,"binary")),s&&(t.isBuffer(s)||(s=t.from(s,"binary")),s.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var f=a/8,p=t.alloc(f),C=t.alloc(l||0),B=t.alloc(0);f>0||l>0;){var N=new e;N.update(B),N.update(i),s&&N.update(s),B=N.digest();var le=0;if(f>0){var Ee=p.length-f;le=Math.min(f,B.length),B.copy(p,Ee,0,le),f-=le}if(le<B.length&&l>0){var Ue=C.length-l,ze=Math.min(l,B.length-le);B.copy(C,Ue,le,le+ze),l-=ze}}return B.fill(0),{key:p,iv:C}}return evp_bytestokey=n,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var t=requireModes$1(),e=requireAuthCipher(),n=requireSafeBuffer$1().Buffer,i=requireStreamCipher(),s=requireCipherBase(),a=requireAes$1(),l=requireEvp_bytestokey(),f=requireInherits_browser();function p(Ee,Ue,ze){s.call(this),this._cache=new B,this._cipher=new a.AES(Ue),this._prev=n.from(ze),this._mode=Ee,this._autopadding=!0}f(p,s),p.prototype._update=function(Ee){this._cache.add(Ee);for(var Ue,ze,Ze=[];Ue=this._cache.get();)ze=this._mode.encrypt(this,Ue),Ze.push(ze);return n.concat(Ze)};var C=n.alloc(16,16);p.prototype._final=function(){var Ee=this._cache.flush();if(this._autopadding)return Ee=this._mode.encrypt(this,Ee),this._cipher.scrub(),Ee;if(!Ee.equals(C))throw this._cipher.scrub(),new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(Ee){return this._autopadding=!!Ee,this};function B(){this.cache=n.allocUnsafe(0)}B.prototype.add=function(Ee){this.cache=n.concat([this.cache,Ee])},B.prototype.get=function(){if(this.cache.length>15){var Ee=this.cache.slice(0,16);return this.cache=this.cache.slice(16),Ee}return null},B.prototype.flush=function(){for(var Ee=16-this.cache.length,Ue=n.allocUnsafe(Ee),ze=-1;++ze<Ee;)Ue.writeUInt8(Ee,ze);return n.concat([this.cache,Ue])};function N(Ee,Ue,ze){var Ze=t[Ee.toLowerCase()];if(!Ze)throw new TypeError("invalid suite type");if(typeof Ue=="string"&&(Ue=n.from(Ue)),Ue.length!==Ze.key/8)throw new TypeError("invalid key length "+Ue.length);if(typeof ze=="string"&&(ze=n.from(ze)),Ze.mode!=="GCM"&&ze.length!==Ze.iv)throw new TypeError("invalid iv length "+ze.length);return Ze.type==="stream"?new i(Ze.module,Ue,ze):Ze.type==="auth"?new e(Ze.module,Ue,ze):new p(Ze.module,Ue,ze)}function le(Ee,Ue){var ze=t[Ee.toLowerCase()];if(!ze)throw new TypeError("invalid suite type");var Ze=l(Ue,!1,ze.key,ze.iv);return N(Ee,Ze.key,Ze.iv)}return encrypter.createCipheriv=N,encrypter.createCipher=le,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var t=requireAuthCipher(),e=requireSafeBuffer$1().Buffer,n=requireModes$1(),i=requireStreamCipher(),s=requireCipherBase(),a=requireAes$1(),l=requireEvp_bytestokey(),f=requireInherits_browser();function p(Ee,Ue,ze){s.call(this),this._cache=new C,this._last=void 0,this._cipher=new a.AES(Ue),this._prev=e.from(ze),this._mode=Ee,this._autopadding=!0}f(p,s),p.prototype._update=function(Ee){this._cache.add(Ee);for(var Ue,ze,Ze=[];Ue=this._cache.get(this._autopadding);)ze=this._mode.decrypt(this,Ue),Ze.push(ze);return e.concat(Ze)},p.prototype._final=function(){var Ee=this._cache.flush();if(this._autopadding)return B(this._mode.decrypt(this,Ee));if(Ee)throw new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(Ee){return this._autopadding=!!Ee,this};function C(){this.cache=e.allocUnsafe(0)}C.prototype.add=function(Ee){this.cache=e.concat([this.cache,Ee])},C.prototype.get=function(Ee){var Ue;if(Ee){if(this.cache.length>16)return Ue=this.cache.slice(0,16),this.cache=this.cache.slice(16),Ue}else if(this.cache.length>=16)return Ue=this.cache.slice(0,16),this.cache=this.cache.slice(16),Ue;return null},C.prototype.flush=function(){if(this.cache.length)return this.cache};function B(Ee){var Ue=Ee[15];if(Ue<1||Ue>16)throw new Error("unable to decrypt data");for(var ze=-1;++ze<Ue;)if(Ee[ze+(16-Ue)]!==Ue)throw new Error("unable to decrypt data");if(Ue!==16)return Ee.slice(0,16-Ue)}function N(Ee,Ue,ze){var Ze=n[Ee.toLowerCase()];if(!Ze)throw new TypeError("invalid suite type");if(typeof ze=="string"&&(ze=e.from(ze)),Ze.mode!=="GCM"&&ze.length!==Ze.iv)throw new TypeError("invalid iv length "+ze.length);if(typeof Ue=="string"&&(Ue=e.from(Ue)),Ue.length!==Ze.key/8)throw new TypeError("invalid key length "+Ue.length);return Ze.type==="stream"?new i(Ze.module,Ue,ze,!0):Ze.type==="auth"?new t(Ze.module,Ue,ze,!0):new p(Ze.module,Ue,ze)}function le(Ee,Ue){var ze=n[Ee.toLowerCase()];if(!ze)throw new TypeError("invalid suite type");var Ze=l(Ue,!1,ze.key,ze.iv);return N(Ee,Ze.key,Ze.iv)}return decrypter.createDecipher=le,decrypter.createDecipheriv=N,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$5;hasRequiredBrowser$6=1;var t=requireEncrypter(),e=requireDecrypter(),n=require$$2;function i(){return Object.keys(n)}return browser$5.createCipher=browser$5.Cipher=t.createCipher,browser$5.createCipheriv=browser$5.Cipheriv=t.createCipheriv,browser$5.createDecipher=browser$5.Decipher=e.createDecipher,browser$5.createDecipheriv=browser$5.Decipheriv=e.createDecipheriv,browser$5.listCiphers=browser$5.getCiphers=i,browser$5}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var t=requireBrowserifyDes(),e=requireBrowser$6(),n=requireModes$1(),i=requireModes(),s=requireEvp_bytestokey();function a(B,N){B=B.toLowerCase();var le,Ee;if(n[B])le=n[B].key,Ee=n[B].iv;else if(i[B])le=i[B].key*8,Ee=i[B].iv;else throw new TypeError("invalid suite type");var Ue=s(N,!1,le,Ee);return f(B,Ue.key,Ue.iv)}function l(B,N){B=B.toLowerCase();var le,Ee;if(n[B])le=n[B].key,Ee=n[B].iv;else if(i[B])le=i[B].key*8,Ee=i[B].iv;else throw new TypeError("invalid suite type");var Ue=s(N,!1,le,Ee);return p(B,Ue.key,Ue.iv)}function f(B,N,le){if(B=B.toLowerCase(),n[B])return e.createCipheriv(B,N,le);if(i[B])return new t({key:N,iv:le,mode:B});throw new TypeError("invalid suite type")}function p(B,N,le){if(B=B.toLowerCase(),n[B])return e.createDecipheriv(B,N,le);if(i[B])return new t({key:N,iv:le,mode:B,decrypt:!0});throw new TypeError("invalid suite type")}function C(){return Object.keys(i).concat(e.getCiphers())}return browser$6.createCipher=browser$6.Cipher=a,browser$6.createCipheriv=browser$6.Cipheriv=f,browser$6.createDecipher=browser$6.Decipher=l,browser$6.createDecipheriv=browser$6.Decipheriv=p,browser$6.listCiphers=browser$6.getCiphers=C,browser$6}var browser$4={},bn$2={exports:{}};bn$2.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(t){(function(e,n){function i(ar,Lt){if(!ar)throw new Error(Lt||"Assertion failed")}function s(ar,Lt){ar.super_=Lt;var Vt=function(){};Vt.prototype=Lt.prototype,ar.prototype=new Vt,ar.prototype.constructor=ar}function a(ar,Lt,Vt){if(a.isBN(ar))return ar;this.negative=0,this.words=null,this.length=0,this.red=null,ar!==null&&((Lt==="le"||Lt==="be")&&(Vt=Lt,Lt=10),this._init(ar||0,Lt||10,Vt||"be"))}typeof e=="object"?e.exports=a:n.BN=a,a.BN=a,a.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$1$3.Buffer}catch{}a.isBN=function(Lt){return Lt instanceof a?!0:Lt!==null&&typeof Lt=="object"&&Lt.constructor.wordSize===a.wordSize&&Array.isArray(Lt.words)},a.max=function(Lt,Vt){return Lt.cmp(Vt)>0?Lt:Vt},a.min=function(Lt,Vt){return Lt.cmp(Vt)<0?Lt:Vt},a.prototype._init=function(Lt,Vt,tt){if(typeof Lt=="number")return this._initNumber(Lt,Vt,tt);if(typeof Lt=="object")return this._initArray(Lt,Vt,tt);Vt==="hex"&&(Vt=16),i(Vt===(Vt|0)&&Vt>=2&&Vt<=36),Lt=Lt.toString().replace(/\s+/g,"");var Ye=0;Lt[0]==="-"&&(Ye++,this.negative=1),Ye<Lt.length&&(Vt===16?this._parseHex(Lt,Ye,tt):(this._parseBase(Lt,Vt,Ye),tt==="le"&&this._initArray(this.toArray(),Vt,tt)))},a.prototype._initNumber=function(Lt,Vt,tt){Lt<0&&(this.negative=1,Lt=-Lt),Lt<67108864?(this.words=[Lt&67108863],this.length=1):Lt<4503599627370496?(this.words=[Lt&67108863,Lt/67108864&67108863],this.length=2):(i(Lt<9007199254740992),this.words=[Lt&67108863,Lt/67108864&67108863,1],this.length=3),tt==="le"&&this._initArray(this.toArray(),Vt,tt)},a.prototype._initArray=function(Lt,Vt,tt){if(i(typeof Lt.length=="number"),Lt.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(Lt.length/3),this.words=new Array(this.length);for(var Ye=0;Ye<this.length;Ye++)this.words[Ye]=0;var ot,Et,er=0;if(tt==="be")for(Ye=Lt.length-1,ot=0;Ye>=0;Ye-=3)Et=Lt[Ye]|Lt[Ye-1]<<8|Lt[Ye-2]<<16,this.words[ot]|=Et<<er&67108863,this.words[ot+1]=Et>>>26-er&67108863,er+=24,er>=26&&(er-=26,ot++);else if(tt==="le")for(Ye=0,ot=0;Ye<Lt.length;Ye+=3)Et=Lt[Ye]|Lt[Ye+1]<<8|Lt[Ye+2]<<16,this.words[ot]|=Et<<er&67108863,this.words[ot+1]=Et>>>26-er&67108863,er+=24,er>=26&&(er-=26,ot++);return this.strip()};function f(ar,Lt){var Vt=ar.charCodeAt(Lt);return Vt>=65&&Vt<=70?Vt-55:Vt>=97&&Vt<=102?Vt-87:Vt-48&15}function p(ar,Lt,Vt){var tt=f(ar,Vt);return Vt-1>=Lt&&(tt|=f(ar,Vt-1)<<4),tt}a.prototype._parseHex=function(Lt,Vt,tt){this.length=Math.ceil((Lt.length-Vt)/6),this.words=new Array(this.length);for(var Ye=0;Ye<this.length;Ye++)this.words[Ye]=0;var ot=0,Et=0,er;if(tt==="be")for(Ye=Lt.length-1;Ye>=Vt;Ye-=2)er=p(Lt,Vt,Ye)<<ot,this.words[Et]|=er&67108863,ot>=18?(ot-=18,Et+=1,this.words[Et]|=er>>>26):ot+=8;else{var rr=Lt.length-Vt;for(Ye=rr%2===0?Vt+1:Vt;Ye<Lt.length;Ye+=2)er=p(Lt,Vt,Ye)<<ot,this.words[Et]|=er&67108863,ot>=18?(ot-=18,Et+=1,this.words[Et]|=er>>>26):ot+=8}this.strip()};function C(ar,Lt,Vt,tt){for(var Ye=0,ot=Math.min(ar.length,Vt),Et=Lt;Et<ot;Et++){var er=ar.charCodeAt(Et)-48;Ye*=tt,er>=49?Ye+=er-49+10:er>=17?Ye+=er-17+10:Ye+=er}return Ye}a.prototype._parseBase=function(Lt,Vt,tt){this.words=[0],this.length=1;for(var Ye=0,ot=1;ot<=67108863;ot*=Vt)Ye++;Ye--,ot=ot/Vt|0;for(var Et=Lt.length-tt,er=Et%Ye,rr=Math.min(Et,Et-er)+tt,yt=0,tr=tt;tr<rr;tr+=Ye)yt=C(Lt,tr,tr+Ye,Vt),this.imuln(ot),this.words[0]+yt<67108864?this.words[0]+=yt:this._iaddn(yt);if(er!==0){var Ut=1;for(yt=C(Lt,tr,Lt.length,Vt),tr=0;tr<er;tr++)Ut*=Vt;this.imuln(Ut),this.words[0]+yt<67108864?this.words[0]+=yt:this._iaddn(yt)}this.strip()},a.prototype.copy=function(Lt){Lt.words=new Array(this.length);for(var Vt=0;Vt<this.length;Vt++)Lt.words[Vt]=this.words[Vt];Lt.length=this.length,Lt.negative=this.negative,Lt.red=this.red},a.prototype.clone=function(){var Lt=new a(null);return this.copy(Lt),Lt},a.prototype._expand=function(Lt){for(;this.length<Lt;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],N=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],le=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(Lt,Vt){Lt=Lt||10,Vt=Vt|0||1;var tt;if(Lt===16||Lt==="hex"){tt="";for(var Ye=0,ot=0,Et=0;Et<this.length;Et++){var er=this.words[Et],rr=((er<<Ye|ot)&16777215).toString(16);ot=er>>>24-Ye&16777215,Ye+=2,Ye>=26&&(Ye-=26,Et--),ot!==0||Et!==this.length-1?tt=B[6-rr.length]+rr+tt:tt=rr+tt}for(ot!==0&&(tt=ot.toString(16)+tt);tt.length%Vt!==0;)tt="0"+tt;return this.negative!==0&&(tt="-"+tt),tt}if(Lt===(Lt|0)&&Lt>=2&&Lt<=36){var yt=N[Lt],tr=le[Lt];tt="";var Ut=this.clone();for(Ut.negative=0;!Ut.isZero();){var Ft=Ut.modn(tr).toString(Lt);Ut=Ut.idivn(tr),Ut.isZero()?tt=Ft+tt:tt=B[yt-Ft.length]+Ft+tt}for(this.isZero()&&(tt="0"+tt);tt.length%Vt!==0;)tt="0"+tt;return this.negative!==0&&(tt="-"+tt),tt}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var Lt=this.words[0];return this.length===2?Lt+=this.words[1]*67108864:this.length===3&&this.words[2]===1?Lt+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-Lt:Lt},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(Lt,Vt){return i(typeof l<"u"),this.toArrayLike(l,Lt,Vt)},a.prototype.toArray=function(Lt,Vt){return this.toArrayLike(Array,Lt,Vt)},a.prototype.toArrayLike=function(Lt,Vt,tt){var Ye=this.byteLength(),ot=tt||Math.max(1,Ye);i(Ye<=ot,"byte array longer than desired length"),i(ot>0,"Requested array length <= 0"),this.strip();var Et=Vt==="le",er=new Lt(ot),rr,yt,tr=this.clone();if(Et){for(yt=0;!tr.isZero();yt++)rr=tr.andln(255),tr.iushrn(8),er[yt]=rr;for(;yt<ot;yt++)er[yt]=0}else{for(yt=0;yt<ot-Ye;yt++)er[yt]=0;for(yt=0;!tr.isZero();yt++)rr=tr.andln(255),tr.iushrn(8),er[ot-yt-1]=rr}return er},Math.clz32?a.prototype._countBits=function(Lt){return 32-Math.clz32(Lt)}:a.prototype._countBits=function(Lt){var Vt=Lt,tt=0;return Vt>=4096&&(tt+=13,Vt>>>=13),Vt>=64&&(tt+=7,Vt>>>=7),Vt>=8&&(tt+=4,Vt>>>=4),Vt>=2&&(tt+=2,Vt>>>=2),tt+Vt},a.prototype._zeroBits=function(Lt){if(Lt===0)return 26;var Vt=Lt,tt=0;return Vt&8191||(tt+=13,Vt>>>=13),Vt&127||(tt+=7,Vt>>>=7),Vt&15||(tt+=4,Vt>>>=4),Vt&3||(tt+=2,Vt>>>=2),Vt&1||tt++,tt},a.prototype.bitLength=function(){var Lt=this.words[this.length-1],Vt=this._countBits(Lt);return(this.length-1)*26+Vt};function Ee(ar){for(var Lt=new Array(ar.bitLength()),Vt=0;Vt<Lt.length;Vt++){var tt=Vt/26|0,Ye=Vt%26;Lt[Vt]=(ar.words[tt]&1<<Ye)>>>Ye}return Lt}a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var Lt=0,Vt=0;Vt<this.length;Vt++){var tt=this._zeroBits(this.words[Vt]);if(Lt+=tt,tt!==26)break}return Lt},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(Lt){return this.negative!==0?this.abs().inotn(Lt).iaddn(1):this.clone()},a.prototype.fromTwos=function(Lt){return this.testn(Lt-1)?this.notn(Lt).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(Lt){for(;this.length<Lt.length;)this.words[this.length++]=0;for(var Vt=0;Vt<Lt.length;Vt++)this.words[Vt]=this.words[Vt]|Lt.words[Vt];return this.strip()},a.prototype.ior=function(Lt){return i((this.negative|Lt.negative)===0),this.iuor(Lt)},a.prototype.or=function(Lt){return this.length>Lt.length?this.clone().ior(Lt):Lt.clone().ior(this)},a.prototype.uor=function(Lt){return this.length>Lt.length?this.clone().iuor(Lt):Lt.clone().iuor(this)},a.prototype.iuand=function(Lt){var Vt;this.length>Lt.length?Vt=Lt:Vt=this;for(var tt=0;tt<Vt.length;tt++)this.words[tt]=this.words[tt]&Lt.words[tt];return this.length=Vt.length,this.strip()},a.prototype.iand=function(Lt){return i((this.negative|Lt.negative)===0),this.iuand(Lt)},a.prototype.and=function(Lt){return this.length>Lt.length?this.clone().iand(Lt):Lt.clone().iand(this)},a.prototype.uand=function(Lt){return this.length>Lt.length?this.clone().iuand(Lt):Lt.clone().iuand(this)},a.prototype.iuxor=function(Lt){var Vt,tt;this.length>Lt.length?(Vt=this,tt=Lt):(Vt=Lt,tt=this);for(var Ye=0;Ye<tt.length;Ye++)this.words[Ye]=Vt.words[Ye]^tt.words[Ye];if(this!==Vt)for(;Ye<Vt.length;Ye++)this.words[Ye]=Vt.words[Ye];return this.length=Vt.length,this.strip()},a.prototype.ixor=function(Lt){return i((this.negative|Lt.negative)===0),this.iuxor(Lt)},a.prototype.xor=function(Lt){return this.length>Lt.length?this.clone().ixor(Lt):Lt.clone().ixor(this)},a.prototype.uxor=function(Lt){return this.length>Lt.length?this.clone().iuxor(Lt):Lt.clone().iuxor(this)},a.prototype.inotn=function(Lt){i(typeof Lt=="number"&&Lt>=0);var Vt=Math.ceil(Lt/26)|0,tt=Lt%26;this._expand(Vt),tt>0&&Vt--;for(var Ye=0;Ye<Vt;Ye++)this.words[Ye]=~this.words[Ye]&67108863;return tt>0&&(this.words[Ye]=~this.words[Ye]&67108863>>26-tt),this.strip()},a.prototype.notn=function(Lt){return this.clone().inotn(Lt)},a.prototype.setn=function(Lt,Vt){i(typeof Lt=="number"&&Lt>=0);var tt=Lt/26|0,Ye=Lt%26;return this._expand(tt+1),Vt?this.words[tt]=this.words[tt]|1<<Ye:this.words[tt]=this.words[tt]&~(1<<Ye),this.strip()},a.prototype.iadd=function(Lt){var Vt;if(this.negative!==0&&Lt.negative===0)return this.negative=0,Vt=this.isub(Lt),this.negative^=1,this._normSign();if(this.negative===0&&Lt.negative!==0)return Lt.negative=0,Vt=this.isub(Lt),Lt.negative=1,Vt._normSign();var tt,Ye;this.length>Lt.length?(tt=this,Ye=Lt):(tt=Lt,Ye=this);for(var ot=0,Et=0;Et<Ye.length;Et++)Vt=(tt.words[Et]|0)+(Ye.words[Et]|0)+ot,this.words[Et]=Vt&67108863,ot=Vt>>>26;for(;ot!==0&&Et<tt.length;Et++)Vt=(tt.words[Et]|0)+ot,this.words[Et]=Vt&67108863,ot=Vt>>>26;if(this.length=tt.length,ot!==0)this.words[this.length]=ot,this.length++;else if(tt!==this)for(;Et<tt.length;Et++)this.words[Et]=tt.words[Et];return this},a.prototype.add=function(Lt){var Vt;return Lt.negative!==0&&this.negative===0?(Lt.negative=0,Vt=this.sub(Lt),Lt.negative^=1,Vt):Lt.negative===0&&this.negative!==0?(this.negative=0,Vt=Lt.sub(this),this.negative=1,Vt):this.length>Lt.length?this.clone().iadd(Lt):Lt.clone().iadd(this)},a.prototype.isub=function(Lt){if(Lt.negative!==0){Lt.negative=0;var Vt=this.iadd(Lt);return Lt.negative=1,Vt._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(Lt),this.negative=1,this._normSign();var tt=this.cmp(Lt);if(tt===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Ye,ot;tt>0?(Ye=this,ot=Lt):(Ye=Lt,ot=this);for(var Et=0,er=0;er<ot.length;er++)Vt=(Ye.words[er]|0)-(ot.words[er]|0)+Et,Et=Vt>>26,this.words[er]=Vt&67108863;for(;Et!==0&&er<Ye.length;er++)Vt=(Ye.words[er]|0)+Et,Et=Vt>>26,this.words[er]=Vt&67108863;if(Et===0&&er<Ye.length&&Ye!==this)for(;er<Ye.length;er++)this.words[er]=Ye.words[er];return this.length=Math.max(this.length,er),Ye!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(Lt){return this.clone().isub(Lt)};function Ue(ar,Lt,Vt){Vt.negative=Lt.negative^ar.negative;var tt=ar.length+Lt.length|0;Vt.length=tt,tt=tt-1|0;var Ye=ar.words[0]|0,ot=Lt.words[0]|0,Et=Ye*ot,er=Et&67108863,rr=Et/67108864|0;Vt.words[0]=er;for(var yt=1;yt<tt;yt++){for(var tr=rr>>>26,Ut=rr&67108863,Ft=Math.min(yt,Lt.length-1),sr=Math.max(0,yt-ar.length+1);sr<=Ft;sr++){var vr=yt-sr|0;Ye=ar.words[vr]|0,ot=Lt.words[sr]|0,Et=Ye*ot+Ut,tr+=Et/67108864|0,Ut=Et&67108863}Vt.words[yt]=Ut|0,rr=tr|0}return rr!==0?Vt.words[yt]=rr|0:Vt.length--,Vt.strip()}var ze=function(Lt,Vt,tt){var Ye=Lt.words,ot=Vt.words,Et=tt.words,er=0,rr,yt,tr,Ut=Ye[0]|0,Ft=Ut&8191,sr=Ut>>>13,vr=Ye[1]|0,_r=vr&8191,dr=vr>>>13,gr=Ye[2]|0,$r=gr&8191,pr=gr>>>13,lr=Ye[3]|0,cr=lr&8191,yr=lr>>>13,Sr=Ye[4]|0,Ar=Sr&8191,Tr=Sr>>>13,xr=Ye[5]|0,Cr=xr&8191,wr=xr>>>13,Er=Ye[6]|0,kr=Er&8191,Br=Er>>>13,Rr=Ye[7]|0,Ir=Rr&8191,Dr=Rr>>>13,zr=Ye[8]|0,jr=zr&8191,Fr=zr>>>13,mn=Ye[9]|0,Gr=mn&8191,rn=mn>>>13,Vn=ot[0]|0,Lr=Vn&8191,sn=Vn>>>13,Gn=ot[1]|0,qr=Gn&8191,Vr=Gn>>>13,Zn=ot[2]|0,Zr=Zn&8191,an=Zn>>>13,Xn=ot[3]|0,Wr=Xn&8191,Tn=Xn>>>13,Jn=ot[4]|0,Xr=Jn&8191,cn=Jn>>>13,Yn=ot[5]|0,Jr=Yn&8191,fn=Yn>>>13,Qn=ot[6]|0,Hr=Qn&8191,en=Qn>>>13,Wn=ot[7]|0,Kr=Wn&8191,Mn=Wn>>>13,ri=ot[8]|0,Yr=ri&8191,Un=ri>>>13,ni=ot[9]|0,Qr=ni&8191,Ln=ni>>>13;tt.negative=Lt.negative^Vt.negative,tt.length=19,rr=Math.imul(Ft,Lr),yt=Math.imul(Ft,sn),yt=yt+Math.imul(sr,Lr)|0,tr=Math.imul(sr,sn);var ti=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(ti>>>26)|0,ti&=67108863,rr=Math.imul(_r,Lr),yt=Math.imul(_r,sn),yt=yt+Math.imul(dr,Lr)|0,tr=Math.imul(dr,sn),rr=rr+Math.imul(Ft,qr)|0,yt=yt+Math.imul(Ft,Vr)|0,yt=yt+Math.imul(sr,qr)|0,tr=tr+Math.imul(sr,Vr)|0;var Fn=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,rr=Math.imul($r,Lr),yt=Math.imul($r,sn),yt=yt+Math.imul(pr,Lr)|0,tr=Math.imul(pr,sn),rr=rr+Math.imul(_r,qr)|0,yt=yt+Math.imul(_r,Vr)|0,yt=yt+Math.imul(dr,qr)|0,tr=tr+Math.imul(dr,Vr)|0,rr=rr+Math.imul(Ft,Zr)|0,yt=yt+Math.imul(Ft,an)|0,yt=yt+Math.imul(sr,Zr)|0,tr=tr+Math.imul(sr,an)|0;var ei=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(ei>>>26)|0,ei&=67108863,rr=Math.imul(cr,Lr),yt=Math.imul(cr,sn),yt=yt+Math.imul(yr,Lr)|0,tr=Math.imul(yr,sn),rr=rr+Math.imul($r,qr)|0,yt=yt+Math.imul($r,Vr)|0,yt=yt+Math.imul(pr,qr)|0,tr=tr+Math.imul(pr,Vr)|0,rr=rr+Math.imul(_r,Zr)|0,yt=yt+Math.imul(_r,an)|0,yt=yt+Math.imul(dr,Zr)|0,tr=tr+Math.imul(dr,an)|0,rr=rr+Math.imul(Ft,Wr)|0,yt=yt+Math.imul(Ft,Tn)|0,yt=yt+Math.imul(sr,Wr)|0,tr=tr+Math.imul(sr,Tn)|0;var Ti=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Ti>>>26)|0,Ti&=67108863,rr=Math.imul(Ar,Lr),yt=Math.imul(Ar,sn),yt=yt+Math.imul(Tr,Lr)|0,tr=Math.imul(Tr,sn),rr=rr+Math.imul(cr,qr)|0,yt=yt+Math.imul(cr,Vr)|0,yt=yt+Math.imul(yr,qr)|0,tr=tr+Math.imul(yr,Vr)|0,rr=rr+Math.imul($r,Zr)|0,yt=yt+Math.imul($r,an)|0,yt=yt+Math.imul(pr,Zr)|0,tr=tr+Math.imul(pr,an)|0,rr=rr+Math.imul(_r,Wr)|0,yt=yt+Math.imul(_r,Tn)|0,yt=yt+Math.imul(dr,Wr)|0,tr=tr+Math.imul(dr,Tn)|0,rr=rr+Math.imul(Ft,Xr)|0,yt=yt+Math.imul(Ft,cn)|0,yt=yt+Math.imul(sr,Xr)|0,tr=tr+Math.imul(sr,cn)|0;var ki=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(ki>>>26)|0,ki&=67108863,rr=Math.imul(Cr,Lr),yt=Math.imul(Cr,sn),yt=yt+Math.imul(wr,Lr)|0,tr=Math.imul(wr,sn),rr=rr+Math.imul(Ar,qr)|0,yt=yt+Math.imul(Ar,Vr)|0,yt=yt+Math.imul(Tr,qr)|0,tr=tr+Math.imul(Tr,Vr)|0,rr=rr+Math.imul(cr,Zr)|0,yt=yt+Math.imul(cr,an)|0,yt=yt+Math.imul(yr,Zr)|0,tr=tr+Math.imul(yr,an)|0,rr=rr+Math.imul($r,Wr)|0,yt=yt+Math.imul($r,Tn)|0,yt=yt+Math.imul(pr,Wr)|0,tr=tr+Math.imul(pr,Tn)|0,rr=rr+Math.imul(_r,Xr)|0,yt=yt+Math.imul(_r,cn)|0,yt=yt+Math.imul(dr,Xr)|0,tr=tr+Math.imul(dr,cn)|0,rr=rr+Math.imul(Ft,Jr)|0,yt=yt+Math.imul(Ft,fn)|0,yt=yt+Math.imul(sr,Jr)|0,tr=tr+Math.imul(sr,fn)|0;var Oi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,rr=Math.imul(kr,Lr),yt=Math.imul(kr,sn),yt=yt+Math.imul(Br,Lr)|0,tr=Math.imul(Br,sn),rr=rr+Math.imul(Cr,qr)|0,yt=yt+Math.imul(Cr,Vr)|0,yt=yt+Math.imul(wr,qr)|0,tr=tr+Math.imul(wr,Vr)|0,rr=rr+Math.imul(Ar,Zr)|0,yt=yt+Math.imul(Ar,an)|0,yt=yt+Math.imul(Tr,Zr)|0,tr=tr+Math.imul(Tr,an)|0,rr=rr+Math.imul(cr,Wr)|0,yt=yt+Math.imul(cr,Tn)|0,yt=yt+Math.imul(yr,Wr)|0,tr=tr+Math.imul(yr,Tn)|0,rr=rr+Math.imul($r,Xr)|0,yt=yt+Math.imul($r,cn)|0,yt=yt+Math.imul(pr,Xr)|0,tr=tr+Math.imul(pr,cn)|0,rr=rr+Math.imul(_r,Jr)|0,yt=yt+Math.imul(_r,fn)|0,yt=yt+Math.imul(dr,Jr)|0,tr=tr+Math.imul(dr,fn)|0,rr=rr+Math.imul(Ft,Hr)|0,yt=yt+Math.imul(Ft,en)|0,yt=yt+Math.imul(sr,Hr)|0,tr=tr+Math.imul(sr,en)|0;var Ii=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Ii>>>26)|0,Ii&=67108863,rr=Math.imul(Ir,Lr),yt=Math.imul(Ir,sn),yt=yt+Math.imul(Dr,Lr)|0,tr=Math.imul(Dr,sn),rr=rr+Math.imul(kr,qr)|0,yt=yt+Math.imul(kr,Vr)|0,yt=yt+Math.imul(Br,qr)|0,tr=tr+Math.imul(Br,Vr)|0,rr=rr+Math.imul(Cr,Zr)|0,yt=yt+Math.imul(Cr,an)|0,yt=yt+Math.imul(wr,Zr)|0,tr=tr+Math.imul(wr,an)|0,rr=rr+Math.imul(Ar,Wr)|0,yt=yt+Math.imul(Ar,Tn)|0,yt=yt+Math.imul(Tr,Wr)|0,tr=tr+Math.imul(Tr,Tn)|0,rr=rr+Math.imul(cr,Xr)|0,yt=yt+Math.imul(cr,cn)|0,yt=yt+Math.imul(yr,Xr)|0,tr=tr+Math.imul(yr,cn)|0,rr=rr+Math.imul($r,Jr)|0,yt=yt+Math.imul($r,fn)|0,yt=yt+Math.imul(pr,Jr)|0,tr=tr+Math.imul(pr,fn)|0,rr=rr+Math.imul(_r,Hr)|0,yt=yt+Math.imul(_r,en)|0,yt=yt+Math.imul(dr,Hr)|0,tr=tr+Math.imul(dr,en)|0,rr=rr+Math.imul(Ft,Kr)|0,yt=yt+Math.imul(Ft,Mn)|0,yt=yt+Math.imul(sr,Kr)|0,tr=tr+Math.imul(sr,Mn)|0;var Pi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,rr=Math.imul(jr,Lr),yt=Math.imul(jr,sn),yt=yt+Math.imul(Fr,Lr)|0,tr=Math.imul(Fr,sn),rr=rr+Math.imul(Ir,qr)|0,yt=yt+Math.imul(Ir,Vr)|0,yt=yt+Math.imul(Dr,qr)|0,tr=tr+Math.imul(Dr,Vr)|0,rr=rr+Math.imul(kr,Zr)|0,yt=yt+Math.imul(kr,an)|0,yt=yt+Math.imul(Br,Zr)|0,tr=tr+Math.imul(Br,an)|0,rr=rr+Math.imul(Cr,Wr)|0,yt=yt+Math.imul(Cr,Tn)|0,yt=yt+Math.imul(wr,Wr)|0,tr=tr+Math.imul(wr,Tn)|0,rr=rr+Math.imul(Ar,Xr)|0,yt=yt+Math.imul(Ar,cn)|0,yt=yt+Math.imul(Tr,Xr)|0,tr=tr+Math.imul(Tr,cn)|0,rr=rr+Math.imul(cr,Jr)|0,yt=yt+Math.imul(cr,fn)|0,yt=yt+Math.imul(yr,Jr)|0,tr=tr+Math.imul(yr,fn)|0,rr=rr+Math.imul($r,Hr)|0,yt=yt+Math.imul($r,en)|0,yt=yt+Math.imul(pr,Hr)|0,tr=tr+Math.imul(pr,en)|0,rr=rr+Math.imul(_r,Kr)|0,yt=yt+Math.imul(_r,Mn)|0,yt=yt+Math.imul(dr,Kr)|0,tr=tr+Math.imul(dr,Mn)|0,rr=rr+Math.imul(Ft,Yr)|0,yt=yt+Math.imul(Ft,Un)|0,yt=yt+Math.imul(sr,Yr)|0,tr=tr+Math.imul(sr,Un)|0;var ji=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(ji>>>26)|0,ji&=67108863,rr=Math.imul(Gr,Lr),yt=Math.imul(Gr,sn),yt=yt+Math.imul(rn,Lr)|0,tr=Math.imul(rn,sn),rr=rr+Math.imul(jr,qr)|0,yt=yt+Math.imul(jr,Vr)|0,yt=yt+Math.imul(Fr,qr)|0,tr=tr+Math.imul(Fr,Vr)|0,rr=rr+Math.imul(Ir,Zr)|0,yt=yt+Math.imul(Ir,an)|0,yt=yt+Math.imul(Dr,Zr)|0,tr=tr+Math.imul(Dr,an)|0,rr=rr+Math.imul(kr,Wr)|0,yt=yt+Math.imul(kr,Tn)|0,yt=yt+Math.imul(Br,Wr)|0,tr=tr+Math.imul(Br,Tn)|0,rr=rr+Math.imul(Cr,Xr)|0,yt=yt+Math.imul(Cr,cn)|0,yt=yt+Math.imul(wr,Xr)|0,tr=tr+Math.imul(wr,cn)|0,rr=rr+Math.imul(Ar,Jr)|0,yt=yt+Math.imul(Ar,fn)|0,yt=yt+Math.imul(Tr,Jr)|0,tr=tr+Math.imul(Tr,fn)|0,rr=rr+Math.imul(cr,Hr)|0,yt=yt+Math.imul(cr,en)|0,yt=yt+Math.imul(yr,Hr)|0,tr=tr+Math.imul(yr,en)|0,rr=rr+Math.imul($r,Kr)|0,yt=yt+Math.imul($r,Mn)|0,yt=yt+Math.imul(pr,Kr)|0,tr=tr+Math.imul(pr,Mn)|0,rr=rr+Math.imul(_r,Yr)|0,yt=yt+Math.imul(_r,Un)|0,yt=yt+Math.imul(dr,Yr)|0,tr=tr+Math.imul(dr,Un)|0,rr=rr+Math.imul(Ft,Qr)|0,yt=yt+Math.imul(Ft,Ln)|0,yt=yt+Math.imul(sr,Qr)|0,tr=tr+Math.imul(sr,Ln)|0;var Ui=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Ui>>>26)|0,Ui&=67108863,rr=Math.imul(Gr,qr),yt=Math.imul(Gr,Vr),yt=yt+Math.imul(rn,qr)|0,tr=Math.imul(rn,Vr),rr=rr+Math.imul(jr,Zr)|0,yt=yt+Math.imul(jr,an)|0,yt=yt+Math.imul(Fr,Zr)|0,tr=tr+Math.imul(Fr,an)|0,rr=rr+Math.imul(Ir,Wr)|0,yt=yt+Math.imul(Ir,Tn)|0,yt=yt+Math.imul(Dr,Wr)|0,tr=tr+Math.imul(Dr,Tn)|0,rr=rr+Math.imul(kr,Xr)|0,yt=yt+Math.imul(kr,cn)|0,yt=yt+Math.imul(Br,Xr)|0,tr=tr+Math.imul(Br,cn)|0,rr=rr+Math.imul(Cr,Jr)|0,yt=yt+Math.imul(Cr,fn)|0,yt=yt+Math.imul(wr,Jr)|0,tr=tr+Math.imul(wr,fn)|0,rr=rr+Math.imul(Ar,Hr)|0,yt=yt+Math.imul(Ar,en)|0,yt=yt+Math.imul(Tr,Hr)|0,tr=tr+Math.imul(Tr,en)|0,rr=rr+Math.imul(cr,Kr)|0,yt=yt+Math.imul(cr,Mn)|0,yt=yt+Math.imul(yr,Kr)|0,tr=tr+Math.imul(yr,Mn)|0,rr=rr+Math.imul($r,Yr)|0,yt=yt+Math.imul($r,Un)|0,yt=yt+Math.imul(pr,Yr)|0,tr=tr+Math.imul(pr,Un)|0,rr=rr+Math.imul(_r,Qr)|0,yt=yt+Math.imul(_r,Ln)|0,yt=yt+Math.imul(dr,Qr)|0,tr=tr+Math.imul(dr,Ln)|0;var zi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(zi>>>26)|0,zi&=67108863,rr=Math.imul(Gr,Zr),yt=Math.imul(Gr,an),yt=yt+Math.imul(rn,Zr)|0,tr=Math.imul(rn,an),rr=rr+Math.imul(jr,Wr)|0,yt=yt+Math.imul(jr,Tn)|0,yt=yt+Math.imul(Fr,Wr)|0,tr=tr+Math.imul(Fr,Tn)|0,rr=rr+Math.imul(Ir,Xr)|0,yt=yt+Math.imul(Ir,cn)|0,yt=yt+Math.imul(Dr,Xr)|0,tr=tr+Math.imul(Dr,cn)|0,rr=rr+Math.imul(kr,Jr)|0,yt=yt+Math.imul(kr,fn)|0,yt=yt+Math.imul(Br,Jr)|0,tr=tr+Math.imul(Br,fn)|0,rr=rr+Math.imul(Cr,Hr)|0,yt=yt+Math.imul(Cr,en)|0,yt=yt+Math.imul(wr,Hr)|0,tr=tr+Math.imul(wr,en)|0,rr=rr+Math.imul(Ar,Kr)|0,yt=yt+Math.imul(Ar,Mn)|0,yt=yt+Math.imul(Tr,Kr)|0,tr=tr+Math.imul(Tr,Mn)|0,rr=rr+Math.imul(cr,Yr)|0,yt=yt+Math.imul(cr,Un)|0,yt=yt+Math.imul(yr,Yr)|0,tr=tr+Math.imul(yr,Un)|0,rr=rr+Math.imul($r,Qr)|0,yt=yt+Math.imul($r,Ln)|0,yt=yt+Math.imul(pr,Qr)|0,tr=tr+Math.imul(pr,Ln)|0;var Gi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,rr=Math.imul(Gr,Wr),yt=Math.imul(Gr,Tn),yt=yt+Math.imul(rn,Wr)|0,tr=Math.imul(rn,Tn),rr=rr+Math.imul(jr,Xr)|0,yt=yt+Math.imul(jr,cn)|0,yt=yt+Math.imul(Fr,Xr)|0,tr=tr+Math.imul(Fr,cn)|0,rr=rr+Math.imul(Ir,Jr)|0,yt=yt+Math.imul(Ir,fn)|0,yt=yt+Math.imul(Dr,Jr)|0,tr=tr+Math.imul(Dr,fn)|0,rr=rr+Math.imul(kr,Hr)|0,yt=yt+Math.imul(kr,en)|0,yt=yt+Math.imul(Br,Hr)|0,tr=tr+Math.imul(Br,en)|0,rr=rr+Math.imul(Cr,Kr)|0,yt=yt+Math.imul(Cr,Mn)|0,yt=yt+Math.imul(wr,Kr)|0,tr=tr+Math.imul(wr,Mn)|0,rr=rr+Math.imul(Ar,Yr)|0,yt=yt+Math.imul(Ar,Un)|0,yt=yt+Math.imul(Tr,Yr)|0,tr=tr+Math.imul(Tr,Un)|0,rr=rr+Math.imul(cr,Qr)|0,yt=yt+Math.imul(cr,Ln)|0,yt=yt+Math.imul(yr,Qr)|0,tr=tr+Math.imul(yr,Ln)|0;var Vi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,rr=Math.imul(Gr,Xr),yt=Math.imul(Gr,cn),yt=yt+Math.imul(rn,Xr)|0,tr=Math.imul(rn,cn),rr=rr+Math.imul(jr,Jr)|0,yt=yt+Math.imul(jr,fn)|0,yt=yt+Math.imul(Fr,Jr)|0,tr=tr+Math.imul(Fr,fn)|0,rr=rr+Math.imul(Ir,Hr)|0,yt=yt+Math.imul(Ir,en)|0,yt=yt+Math.imul(Dr,Hr)|0,tr=tr+Math.imul(Dr,en)|0,rr=rr+Math.imul(kr,Kr)|0,yt=yt+Math.imul(kr,Mn)|0,yt=yt+Math.imul(Br,Kr)|0,tr=tr+Math.imul(Br,Mn)|0,rr=rr+Math.imul(Cr,Yr)|0,yt=yt+Math.imul(Cr,Un)|0,yt=yt+Math.imul(wr,Yr)|0,tr=tr+Math.imul(wr,Un)|0,rr=rr+Math.imul(Ar,Qr)|0,yt=yt+Math.imul(Ar,Ln)|0,yt=yt+Math.imul(Tr,Qr)|0,tr=tr+Math.imul(Tr,Ln)|0;var Wi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,rr=Math.imul(Gr,Jr),yt=Math.imul(Gr,fn),yt=yt+Math.imul(rn,Jr)|0,tr=Math.imul(rn,fn),rr=rr+Math.imul(jr,Hr)|0,yt=yt+Math.imul(jr,en)|0,yt=yt+Math.imul(Fr,Hr)|0,tr=tr+Math.imul(Fr,en)|0,rr=rr+Math.imul(Ir,Kr)|0,yt=yt+Math.imul(Ir,Mn)|0,yt=yt+Math.imul(Dr,Kr)|0,tr=tr+Math.imul(Dr,Mn)|0,rr=rr+Math.imul(kr,Yr)|0,yt=yt+Math.imul(kr,Un)|0,yt=yt+Math.imul(Br,Yr)|0,tr=tr+Math.imul(Br,Un)|0,rr=rr+Math.imul(Cr,Qr)|0,yt=yt+Math.imul(Cr,Ln)|0,yt=yt+Math.imul(wr,Qr)|0,tr=tr+Math.imul(wr,Ln)|0;var Hi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,rr=Math.imul(Gr,Hr),yt=Math.imul(Gr,en),yt=yt+Math.imul(rn,Hr)|0,tr=Math.imul(rn,en),rr=rr+Math.imul(jr,Kr)|0,yt=yt+Math.imul(jr,Mn)|0,yt=yt+Math.imul(Fr,Kr)|0,tr=tr+Math.imul(Fr,Mn)|0,rr=rr+Math.imul(Ir,Yr)|0,yt=yt+Math.imul(Ir,Un)|0,yt=yt+Math.imul(Dr,Yr)|0,tr=tr+Math.imul(Dr,Un)|0,rr=rr+Math.imul(kr,Qr)|0,yt=yt+Math.imul(kr,Ln)|0,yt=yt+Math.imul(Br,Qr)|0,tr=tr+Math.imul(Br,Ln)|0;var Ki=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,rr=Math.imul(Gr,Kr),yt=Math.imul(Gr,Mn),yt=yt+Math.imul(rn,Kr)|0,tr=Math.imul(rn,Mn),rr=rr+Math.imul(jr,Yr)|0,yt=yt+Math.imul(jr,Un)|0,yt=yt+Math.imul(Fr,Yr)|0,tr=tr+Math.imul(Fr,Un)|0,rr=rr+Math.imul(Ir,Qr)|0,yt=yt+Math.imul(Ir,Ln)|0,yt=yt+Math.imul(Dr,Qr)|0,tr=tr+Math.imul(Dr,Ln)|0;var Zi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,rr=Math.imul(Gr,Yr),yt=Math.imul(Gr,Un),yt=yt+Math.imul(rn,Yr)|0,tr=Math.imul(rn,Un),rr=rr+Math.imul(jr,Qr)|0,yt=yt+Math.imul(jr,Ln)|0,yt=yt+Math.imul(Fr,Qr)|0,tr=tr+Math.imul(Fr,Ln)|0;var Xi=(er+rr|0)+((yt&8191)<<13)|0;er=(tr+(yt>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,rr=Math.imul(Gr,Qr),yt=Math.imul(Gr,Ln),yt=yt+Math.imul(rn,Qr)|0,tr=Math.imul(rn,Ln);var Ji=(er+rr|0)+((yt&8191)<<13)|0;return er=(tr+(yt>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,Et[0]=ti,Et[1]=Fn,Et[2]=ei,Et[3]=Ti,Et[4]=ki,Et[5]=Oi,Et[6]=Ii,Et[7]=Pi,Et[8]=ji,Et[9]=Ui,Et[10]=zi,Et[11]=Gi,Et[12]=Vi,Et[13]=Wi,Et[14]=Hi,Et[15]=Ki,Et[16]=Zi,Et[17]=Xi,Et[18]=Ji,er!==0&&(Et[19]=er,tt.length++),tt};Math.imul||(ze=Ue);function Ze(ar,Lt,Vt){Vt.negative=Lt.negative^ar.negative,Vt.length=ar.length+Lt.length;for(var tt=0,Ye=0,ot=0;ot<Vt.length-1;ot++){var Et=Ye;Ye=0;for(var er=tt&67108863,rr=Math.min(ot,Lt.length-1),yt=Math.max(0,ot-ar.length+1);yt<=rr;yt++){var tr=ot-yt,Ut=ar.words[tr]|0,Ft=Lt.words[yt]|0,sr=Ut*Ft,vr=sr&67108863;Et=Et+(sr/67108864|0)|0,vr=vr+er|0,er=vr&67108863,Et=Et+(vr>>>26)|0,Ye+=Et>>>26,Et&=67108863}Vt.words[ot]=er,tt=Et,Et=Ye}return tt!==0?Vt.words[ot]=tt:Vt.length--,Vt.strip()}function Qe(ar,Lt,Vt){var tt=new ct;return tt.mulp(ar,Lt,Vt)}a.prototype.mulTo=function(Lt,Vt){var tt,Ye=this.length+Lt.length;return this.length===10&&Lt.length===10?tt=ze(this,Lt,Vt):Ye<63?tt=Ue(this,Lt,Vt):Ye<1024?tt=Ze(this,Lt,Vt):tt=Qe(this,Lt,Vt),tt};function ct(ar,Lt){this.x=ar,this.y=Lt}ct.prototype.makeRBT=function(Lt){for(var Vt=new Array(Lt),tt=a.prototype._countBits(Lt)-1,Ye=0;Ye<Lt;Ye++)Vt[Ye]=this.revBin(Ye,tt,Lt);return Vt},ct.prototype.revBin=function(Lt,Vt,tt){if(Lt===0||Lt===tt-1)return Lt;for(var Ye=0,ot=0;ot<Vt;ot++)Ye|=(Lt&1)<<Vt-ot-1,Lt>>=1;return Ye},ct.prototype.permute=function(Lt,Vt,tt,Ye,ot,Et){for(var er=0;er<Et;er++)Ye[er]=Vt[Lt[er]],ot[er]=tt[Lt[er]]},ct.prototype.transform=function(Lt,Vt,tt,Ye,ot,Et){this.permute(Et,Lt,Vt,tt,Ye,ot);for(var er=1;er<ot;er<<=1)for(var rr=er<<1,yt=Math.cos(2*Math.PI/rr),tr=Math.sin(2*Math.PI/rr),Ut=0;Ut<ot;Ut+=rr)for(var Ft=yt,sr=tr,vr=0;vr<er;vr++){var _r=tt[Ut+vr],dr=Ye[Ut+vr],gr=tt[Ut+vr+er],$r=Ye[Ut+vr+er],pr=Ft*gr-sr*$r;$r=Ft*$r+sr*gr,gr=pr,tt[Ut+vr]=_r+gr,Ye[Ut+vr]=dr+$r,tt[Ut+vr+er]=_r-gr,Ye[Ut+vr+er]=dr-$r,vr!==rr&&(pr=yt*Ft-tr*sr,sr=yt*sr+tr*Ft,Ft=pr)}},ct.prototype.guessLen13b=function(Lt,Vt){var tt=Math.max(Vt,Lt)|1,Ye=tt&1,ot=0;for(tt=tt/2|0;tt;tt=tt>>>1)ot++;return 1<<ot+1+Ye},ct.prototype.conjugate=function(Lt,Vt,tt){if(!(tt<=1))for(var Ye=0;Ye<tt/2;Ye++){var ot=Lt[Ye];Lt[Ye]=Lt[tt-Ye-1],Lt[tt-Ye-1]=ot,ot=Vt[Ye],Vt[Ye]=-Vt[tt-Ye-1],Vt[tt-Ye-1]=-ot}},ct.prototype.normalize13b=function(Lt,Vt){for(var tt=0,Ye=0;Ye<Vt/2;Ye++){var ot=Math.round(Lt[2*Ye+1]/Vt)*8192+Math.round(Lt[2*Ye]/Vt)+tt;Lt[Ye]=ot&67108863,ot<67108864?tt=0:tt=ot/67108864|0}return Lt},ct.prototype.convert13b=function(Lt,Vt,tt,Ye){for(var ot=0,Et=0;Et<Vt;Et++)ot=ot+(Lt[Et]|0),tt[2*Et]=ot&8191,ot=ot>>>13,tt[2*Et+1]=ot&8191,ot=ot>>>13;for(Et=2*Vt;Et<Ye;++Et)tt[Et]=0;i(ot===0),i((ot&-8192)===0)},ct.prototype.stub=function(Lt){for(var Vt=new Array(Lt),tt=0;tt<Lt;tt++)Vt[tt]=0;return Vt},ct.prototype.mulp=function(Lt,Vt,tt){var Ye=2*this.guessLen13b(Lt.length,Vt.length),ot=this.makeRBT(Ye),Et=this.stub(Ye),er=new Array(Ye),rr=new Array(Ye),yt=new Array(Ye),tr=new Array(Ye),Ut=new Array(Ye),Ft=new Array(Ye),sr=tt.words;sr.length=Ye,this.convert13b(Lt.words,Lt.length,er,Ye),this.convert13b(Vt.words,Vt.length,tr,Ye),this.transform(er,Et,rr,yt,Ye,ot),this.transform(tr,Et,Ut,Ft,Ye,ot);for(var vr=0;vr<Ye;vr++){var _r=rr[vr]*Ut[vr]-yt[vr]*Ft[vr];yt[vr]=rr[vr]*Ft[vr]+yt[vr]*Ut[vr],rr[vr]=_r}return this.conjugate(rr,yt,Ye),this.transform(rr,yt,sr,Et,Ye,ot),this.conjugate(sr,Et,Ye),this.normalize13b(sr,Ye),tt.negative=Lt.negative^Vt.negative,tt.length=Lt.length+Vt.length,tt.strip()},a.prototype.mul=function(Lt){var Vt=new a(null);return Vt.words=new Array(this.length+Lt.length),this.mulTo(Lt,Vt)},a.prototype.mulf=function(Lt){var Vt=new a(null);return Vt.words=new Array(this.length+Lt.length),Qe(this,Lt,Vt)},a.prototype.imul=function(Lt){return this.clone().mulTo(Lt,this)},a.prototype.imuln=function(Lt){i(typeof Lt=="number"),i(Lt<67108864);for(var Vt=0,tt=0;tt<this.length;tt++){var Ye=(this.words[tt]|0)*Lt,ot=(Ye&67108863)+(Vt&67108863);Vt>>=26,Vt+=Ye/67108864|0,Vt+=ot>>>26,this.words[tt]=ot&67108863}return Vt!==0&&(this.words[tt]=Vt,this.length++),this},a.prototype.muln=function(Lt){return this.clone().imuln(Lt)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(Lt){var Vt=Ee(Lt);if(Vt.length===0)return new a(1);for(var tt=this,Ye=0;Ye<Vt.length&&Vt[Ye]===0;Ye++,tt=tt.sqr());if(++Ye<Vt.length)for(var ot=tt.sqr();Ye<Vt.length;Ye++,ot=ot.sqr())Vt[Ye]!==0&&(tt=tt.mul(ot));return tt},a.prototype.iushln=function(Lt){i(typeof Lt=="number"&&Lt>=0);var Vt=Lt%26,tt=(Lt-Vt)/26,Ye=67108863>>>26-Vt<<26-Vt,ot;if(Vt!==0){var Et=0;for(ot=0;ot<this.length;ot++){var er=this.words[ot]&Ye,rr=(this.words[ot]|0)-er<<Vt;this.words[ot]=rr|Et,Et=er>>>26-Vt}Et&&(this.words[ot]=Et,this.length++)}if(tt!==0){for(ot=this.length-1;ot>=0;ot--)this.words[ot+tt]=this.words[ot];for(ot=0;ot<tt;ot++)this.words[ot]=0;this.length+=tt}return this.strip()},a.prototype.ishln=function(Lt){return i(this.negative===0),this.iushln(Lt)},a.prototype.iushrn=function(Lt,Vt,tt){i(typeof Lt=="number"&&Lt>=0);var Ye;Vt?Ye=(Vt-Vt%26)/26:Ye=0;var ot=Lt%26,Et=Math.min((Lt-ot)/26,this.length),er=67108863^67108863>>>ot<<ot,rr=tt;if(Ye-=Et,Ye=Math.max(0,Ye),rr){for(var yt=0;yt<Et;yt++)rr.words[yt]=this.words[yt];rr.length=Et}if(Et!==0)if(this.length>Et)for(this.length-=Et,yt=0;yt<this.length;yt++)this.words[yt]=this.words[yt+Et];else this.words[0]=0,this.length=1;var tr=0;for(yt=this.length-1;yt>=0&&(tr!==0||yt>=Ye);yt--){var Ut=this.words[yt]|0;this.words[yt]=tr<<26-ot|Ut>>>ot,tr=Ut&er}return rr&&tr!==0&&(rr.words[rr.length++]=tr),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(Lt,Vt,tt){return i(this.negative===0),this.iushrn(Lt,Vt,tt)},a.prototype.shln=function(Lt){return this.clone().ishln(Lt)},a.prototype.ushln=function(Lt){return this.clone().iushln(Lt)},a.prototype.shrn=function(Lt){return this.clone().ishrn(Lt)},a.prototype.ushrn=function(Lt){return this.clone().iushrn(Lt)},a.prototype.testn=function(Lt){i(typeof Lt=="number"&&Lt>=0);var Vt=Lt%26,tt=(Lt-Vt)/26,Ye=1<<Vt;if(this.length<=tt)return!1;var ot=this.words[tt];return!!(ot&Ye)},a.prototype.imaskn=function(Lt){i(typeof Lt=="number"&&Lt>=0);var Vt=Lt%26,tt=(Lt-Vt)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=tt)return this;if(Vt!==0&&tt++,this.length=Math.min(tt,this.length),Vt!==0){var Ye=67108863^67108863>>>Vt<<Vt;this.words[this.length-1]&=Ye}return this.strip()},a.prototype.maskn=function(Lt){return this.clone().imaskn(Lt)},a.prototype.iaddn=function(Lt){return i(typeof Lt=="number"),i(Lt<67108864),Lt<0?this.isubn(-Lt):this.negative!==0?this.length===1&&(this.words[0]|0)<Lt?(this.words[0]=Lt-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(Lt),this.negative=1,this):this._iaddn(Lt)},a.prototype._iaddn=function(Lt){this.words[0]+=Lt;for(var Vt=0;Vt<this.length&&this.words[Vt]>=67108864;Vt++)this.words[Vt]-=67108864,Vt===this.length-1?this.words[Vt+1]=1:this.words[Vt+1]++;return this.length=Math.max(this.length,Vt+1),this},a.prototype.isubn=function(Lt){if(i(typeof Lt=="number"),i(Lt<67108864),Lt<0)return this.iaddn(-Lt);if(this.negative!==0)return this.negative=0,this.iaddn(Lt),this.negative=1,this;if(this.words[0]-=Lt,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var Vt=0;Vt<this.length&&this.words[Vt]<0;Vt++)this.words[Vt]+=67108864,this.words[Vt+1]-=1;return this.strip()},a.prototype.addn=function(Lt){return this.clone().iaddn(Lt)},a.prototype.subn=function(Lt){return this.clone().isubn(Lt)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(Lt,Vt,tt){var Ye=Lt.length+tt,ot;this._expand(Ye);var Et,er=0;for(ot=0;ot<Lt.length;ot++){Et=(this.words[ot+tt]|0)+er;var rr=(Lt.words[ot]|0)*Vt;Et-=rr&67108863,er=(Et>>26)-(rr/67108864|0),this.words[ot+tt]=Et&67108863}for(;ot<this.length-tt;ot++)Et=(this.words[ot+tt]|0)+er,er=Et>>26,this.words[ot+tt]=Et&67108863;if(er===0)return this.strip();for(i(er===-1),er=0,ot=0;ot<this.length;ot++)Et=-(this.words[ot]|0)+er,er=Et>>26,this.words[ot]=Et&67108863;return this.negative=1,this.strip()},a.prototype._wordDiv=function(Lt,Vt){var tt=this.length-Lt.length,Ye=this.clone(),ot=Lt,Et=ot.words[ot.length-1]|0,er=this._countBits(Et);tt=26-er,tt!==0&&(ot=ot.ushln(tt),Ye.iushln(tt),Et=ot.words[ot.length-1]|0);var rr=Ye.length-ot.length,yt;if(Vt!=="mod"){yt=new a(null),yt.length=rr+1,yt.words=new Array(yt.length);for(var tr=0;tr<yt.length;tr++)yt.words[tr]=0}var Ut=Ye.clone()._ishlnsubmul(ot,1,rr);Ut.negative===0&&(Ye=Ut,yt&&(yt.words[rr]=1));for(var Ft=rr-1;Ft>=0;Ft--){var sr=(Ye.words[ot.length+Ft]|0)*67108864+(Ye.words[ot.length+Ft-1]|0);for(sr=Math.min(sr/Et|0,67108863),Ye._ishlnsubmul(ot,sr,Ft);Ye.negative!==0;)sr--,Ye.negative=0,Ye._ishlnsubmul(ot,1,Ft),Ye.isZero()||(Ye.negative^=1);yt&&(yt.words[Ft]=sr)}return yt&&yt.strip(),Ye.strip(),Vt!=="div"&&tt!==0&&Ye.iushrn(tt),{div:yt||null,mod:Ye}},a.prototype.divmod=function(Lt,Vt,tt){if(i(!Lt.isZero()),this.isZero())return{div:new a(0),mod:new a(0)};var Ye,ot,Et;return this.negative!==0&&Lt.negative===0?(Et=this.neg().divmod(Lt,Vt),Vt!=="mod"&&(Ye=Et.div.neg()),Vt!=="div"&&(ot=Et.mod.neg(),tt&&ot.negative!==0&&ot.iadd(Lt)),{div:Ye,mod:ot}):this.negative===0&&Lt.negative!==0?(Et=this.divmod(Lt.neg(),Vt),Vt!=="mod"&&(Ye=Et.div.neg()),{div:Ye,mod:Et.mod}):this.negative&Lt.negative?(Et=this.neg().divmod(Lt.neg(),Vt),Vt!=="div"&&(ot=Et.mod.neg(),tt&&ot.negative!==0&&ot.isub(Lt)),{div:Et.div,mod:ot}):Lt.length>this.length||this.cmp(Lt)<0?{div:new a(0),mod:this}:Lt.length===1?Vt==="div"?{div:this.divn(Lt.words[0]),mod:null}:Vt==="mod"?{div:null,mod:new a(this.modn(Lt.words[0]))}:{div:this.divn(Lt.words[0]),mod:new a(this.modn(Lt.words[0]))}:this._wordDiv(Lt,Vt)},a.prototype.div=function(Lt){return this.divmod(Lt,"div",!1).div},a.prototype.mod=function(Lt){return this.divmod(Lt,"mod",!1).mod},a.prototype.umod=function(Lt){return this.divmod(Lt,"mod",!0).mod},a.prototype.divRound=function(Lt){var Vt=this.divmod(Lt);if(Vt.mod.isZero())return Vt.div;var tt=Vt.div.negative!==0?Vt.mod.isub(Lt):Vt.mod,Ye=Lt.ushrn(1),ot=Lt.andln(1),Et=tt.cmp(Ye);return Et<0||ot===1&&Et===0?Vt.div:Vt.div.negative!==0?Vt.div.isubn(1):Vt.div.iaddn(1)},a.prototype.modn=function(Lt){i(Lt<=67108863);for(var Vt=(1<<26)%Lt,tt=0,Ye=this.length-1;Ye>=0;Ye--)tt=(Vt*tt+(this.words[Ye]|0))%Lt;return tt},a.prototype.idivn=function(Lt){i(Lt<=67108863);for(var Vt=0,tt=this.length-1;tt>=0;tt--){var Ye=(this.words[tt]|0)+Vt*67108864;this.words[tt]=Ye/Lt|0,Vt=Ye%Lt}return this.strip()},a.prototype.divn=function(Lt){return this.clone().idivn(Lt)},a.prototype.egcd=function(Lt){i(Lt.negative===0),i(!Lt.isZero());var Vt=this,tt=Lt.clone();Vt.negative!==0?Vt=Vt.umod(Lt):Vt=Vt.clone();for(var Ye=new a(1),ot=new a(0),Et=new a(0),er=new a(1),rr=0;Vt.isEven()&&tt.isEven();)Vt.iushrn(1),tt.iushrn(1),++rr;for(var yt=tt.clone(),tr=Vt.clone();!Vt.isZero();){for(var Ut=0,Ft=1;!(Vt.words[0]&Ft)&&Ut<26;++Ut,Ft<<=1);if(Ut>0)for(Vt.iushrn(Ut);Ut-- >0;)(Ye.isOdd()||ot.isOdd())&&(Ye.iadd(yt),ot.isub(tr)),Ye.iushrn(1),ot.iushrn(1);for(var sr=0,vr=1;!(tt.words[0]&vr)&&sr<26;++sr,vr<<=1);if(sr>0)for(tt.iushrn(sr);sr-- >0;)(Et.isOdd()||er.isOdd())&&(Et.iadd(yt),er.isub(tr)),Et.iushrn(1),er.iushrn(1);Vt.cmp(tt)>=0?(Vt.isub(tt),Ye.isub(Et),ot.isub(er)):(tt.isub(Vt),Et.isub(Ye),er.isub(ot))}return{a:Et,b:er,gcd:tt.iushln(rr)}},a.prototype._invmp=function(Lt){i(Lt.negative===0),i(!Lt.isZero());var Vt=this,tt=Lt.clone();Vt.negative!==0?Vt=Vt.umod(Lt):Vt=Vt.clone();for(var Ye=new a(1),ot=new a(0),Et=tt.clone();Vt.cmpn(1)>0&&tt.cmpn(1)>0;){for(var er=0,rr=1;!(Vt.words[0]&rr)&&er<26;++er,rr<<=1);if(er>0)for(Vt.iushrn(er);er-- >0;)Ye.isOdd()&&Ye.iadd(Et),Ye.iushrn(1);for(var yt=0,tr=1;!(tt.words[0]&tr)&&yt<26;++yt,tr<<=1);if(yt>0)for(tt.iushrn(yt);yt-- >0;)ot.isOdd()&&ot.iadd(Et),ot.iushrn(1);Vt.cmp(tt)>=0?(Vt.isub(tt),Ye.isub(ot)):(tt.isub(Vt),ot.isub(Ye))}var Ut;return Vt.cmpn(1)===0?Ut=Ye:Ut=ot,Ut.cmpn(0)<0&&Ut.iadd(Lt),Ut},a.prototype.gcd=function(Lt){if(this.isZero())return Lt.abs();if(Lt.isZero())return this.abs();var Vt=this.clone(),tt=Lt.clone();Vt.negative=0,tt.negative=0;for(var Ye=0;Vt.isEven()&&tt.isEven();Ye++)Vt.iushrn(1),tt.iushrn(1);do{for(;Vt.isEven();)Vt.iushrn(1);for(;tt.isEven();)tt.iushrn(1);var ot=Vt.cmp(tt);if(ot<0){var Et=Vt;Vt=tt,tt=Et}else if(ot===0||tt.cmpn(1)===0)break;Vt.isub(tt)}while(!0);return tt.iushln(Ye)},a.prototype.invm=function(Lt){return this.egcd(Lt).a.umod(Lt)},a.prototype.isEven=function(){return(this.words[0]&1)===0},a.prototype.isOdd=function(){return(this.words[0]&1)===1},a.prototype.andln=function(Lt){return this.words[0]&Lt},a.prototype.bincn=function(Lt){i(typeof Lt=="number");var Vt=Lt%26,tt=(Lt-Vt)/26,Ye=1<<Vt;if(this.length<=tt)return this._expand(tt+1),this.words[tt]|=Ye,this;for(var ot=Ye,Et=tt;ot!==0&&Et<this.length;Et++){var er=this.words[Et]|0;er+=ot,ot=er>>>26,er&=67108863,this.words[Et]=er}return ot!==0&&(this.words[Et]=ot,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(Lt){var Vt=Lt<0;if(this.negative!==0&&!Vt)return-1;if(this.negative===0&&Vt)return 1;this.strip();var tt;if(this.length>1)tt=1;else{Vt&&(Lt=-Lt),i(Lt<=67108863,"Number is too big");var Ye=this.words[0]|0;tt=Ye===Lt?0:Ye<Lt?-1:1}return this.negative!==0?-tt|0:tt},a.prototype.cmp=function(Lt){if(this.negative!==0&&Lt.negative===0)return-1;if(this.negative===0&&Lt.negative!==0)return 1;var Vt=this.ucmp(Lt);return this.negative!==0?-Vt|0:Vt},a.prototype.ucmp=function(Lt){if(this.length>Lt.length)return 1;if(this.length<Lt.length)return-1;for(var Vt=0,tt=this.length-1;tt>=0;tt--){var Ye=this.words[tt]|0,ot=Lt.words[tt]|0;if(Ye!==ot){Ye<ot?Vt=-1:Ye>ot&&(Vt=1);break}}return Vt},a.prototype.gtn=function(Lt){return this.cmpn(Lt)===1},a.prototype.gt=function(Lt){return this.cmp(Lt)===1},a.prototype.gten=function(Lt){return this.cmpn(Lt)>=0},a.prototype.gte=function(Lt){return this.cmp(Lt)>=0},a.prototype.ltn=function(Lt){return this.cmpn(Lt)===-1},a.prototype.lt=function(Lt){return this.cmp(Lt)===-1},a.prototype.lten=function(Lt){return this.cmpn(Lt)<=0},a.prototype.lte=function(Lt){return this.cmp(Lt)<=0},a.prototype.eqn=function(Lt){return this.cmpn(Lt)===0},a.prototype.eq=function(Lt){return this.cmp(Lt)===0},a.red=function(Lt){return new hr(Lt)},a.prototype.toRed=function(Lt){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),Lt.convertTo(this)._forceRed(Lt)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(Lt){return this.red=Lt,this},a.prototype.forceRed=function(Lt){return i(!this.red,"Already a number in reduction context"),this._forceRed(Lt)},a.prototype.redAdd=function(Lt){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,Lt)},a.prototype.redIAdd=function(Lt){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,Lt)},a.prototype.redSub=function(Lt){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,Lt)},a.prototype.redISub=function(Lt){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,Lt)},a.prototype.redShl=function(Lt){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,Lt)},a.prototype.redMul=function(Lt){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,Lt),this.red.mul(this,Lt)},a.prototype.redIMul=function(Lt){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,Lt),this.red.imul(this,Lt)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(Lt){return i(this.red&&!Lt.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,Lt)};var wt={k256:null,p224:null,p192:null,p25519:null};function qt(ar,Lt){this.name=ar,this.p=new a(Lt,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}qt.prototype._tmp=function(){var Lt=new a(null);return Lt.words=new Array(Math.ceil(this.n/13)),Lt},qt.prototype.ireduce=function(Lt){var Vt=Lt,tt;do this.split(Vt,this.tmp),Vt=this.imulK(Vt),Vt=Vt.iadd(this.tmp),tt=Vt.bitLength();while(tt>this.n);var Ye=tt<this.n?-1:Vt.ucmp(this.p);return Ye===0?(Vt.words[0]=0,Vt.length=1):Ye>0?Vt.isub(this.p):Vt.strip!==void 0?Vt.strip():Vt._strip(),Vt},qt.prototype.split=function(Lt,Vt){Lt.iushrn(this.n,0,Vt)},qt.prototype.imulK=function(Lt){return Lt.imul(this.k)};function nr(){qt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(nr,qt),nr.prototype.split=function(Lt,Vt){for(var tt=4194303,Ye=Math.min(Lt.length,9),ot=0;ot<Ye;ot++)Vt.words[ot]=Lt.words[ot];if(Vt.length=Ye,Lt.length<=9){Lt.words[0]=0,Lt.length=1;return}var Et=Lt.words[9];for(Vt.words[Vt.length++]=Et&tt,ot=10;ot<Lt.length;ot++){var er=Lt.words[ot]|0;Lt.words[ot-10]=(er&tt)<<4|Et>>>22,Et=er}Et>>>=22,Lt.words[ot-10]=Et,Et===0&&Lt.length>10?Lt.length-=10:Lt.length-=9},nr.prototype.imulK=function(Lt){Lt.words[Lt.length]=0,Lt.words[Lt.length+1]=0,Lt.length+=2;for(var Vt=0,tt=0;tt<Lt.length;tt++){var Ye=Lt.words[tt]|0;Vt+=Ye*977,Lt.words[tt]=Vt&67108863,Vt=Ye*64+(Vt/67108864|0)}return Lt.words[Lt.length-1]===0&&(Lt.length--,Lt.words[Lt.length-1]===0&&Lt.length--),Lt};function ir(){qt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ir,qt);function or(){qt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(or,qt);function ur(){qt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ur,qt),ur.prototype.imulK=function(Lt){for(var Vt=0,tt=0;tt<Lt.length;tt++){var Ye=(Lt.words[tt]|0)*19+Vt,ot=Ye&67108863;Ye>>>=26,Lt.words[tt]=ot,Vt=Ye}return Vt!==0&&(Lt.words[Lt.length++]=Vt),Lt},a._prime=function(Lt){if(wt[Lt])return wt[Lt];var Vt;if(Lt==="k256")Vt=new nr;else if(Lt==="p224")Vt=new ir;else if(Lt==="p192")Vt=new or;else if(Lt==="p25519")Vt=new ur;else throw new Error("Unknown prime "+Lt);return wt[Lt]=Vt,Vt};function hr(ar){if(typeof ar=="string"){var Lt=a._prime(ar);this.m=Lt.p,this.prime=Lt}else i(ar.gtn(1),"modulus must be greater than 1"),this.m=ar,this.prime=null}hr.prototype._verify1=function(Lt){i(Lt.negative===0,"red works only with positives"),i(Lt.red,"red works only with red numbers")},hr.prototype._verify2=function(Lt,Vt){i((Lt.negative|Vt.negative)===0,"red works only with positives"),i(Lt.red&&Lt.red===Vt.red,"red works only with red numbers")},hr.prototype.imod=function(Lt){return this.prime?this.prime.ireduce(Lt)._forceRed(this):Lt.umod(this.m)._forceRed(this)},hr.prototype.neg=function(Lt){return Lt.isZero()?Lt.clone():this.m.sub(Lt)._forceRed(this)},hr.prototype.add=function(Lt,Vt){this._verify2(Lt,Vt);var tt=Lt.add(Vt);return tt.cmp(this.m)>=0&&tt.isub(this.m),tt._forceRed(this)},hr.prototype.iadd=function(Lt,Vt){this._verify2(Lt,Vt);var tt=Lt.iadd(Vt);return tt.cmp(this.m)>=0&&tt.isub(this.m),tt},hr.prototype.sub=function(Lt,Vt){this._verify2(Lt,Vt);var tt=Lt.sub(Vt);return tt.cmpn(0)<0&&tt.iadd(this.m),tt._forceRed(this)},hr.prototype.isub=function(Lt,Vt){this._verify2(Lt,Vt);var tt=Lt.isub(Vt);return tt.cmpn(0)<0&&tt.iadd(this.m),tt},hr.prototype.shl=function(Lt,Vt){return this._verify1(Lt),this.imod(Lt.ushln(Vt))},hr.prototype.imul=function(Lt,Vt){return this._verify2(Lt,Vt),this.imod(Lt.imul(Vt))},hr.prototype.mul=function(Lt,Vt){return this._verify2(Lt,Vt),this.imod(Lt.mul(Vt))},hr.prototype.isqr=function(Lt){return this.imul(Lt,Lt.clone())},hr.prototype.sqr=function(Lt){return this.mul(Lt,Lt)},hr.prototype.sqrt=function(Lt){if(Lt.isZero())return Lt.clone();var Vt=this.m.andln(3);if(i(Vt%2===1),Vt===3){var tt=this.m.add(new a(1)).iushrn(2);return this.pow(Lt,tt)}for(var Ye=this.m.subn(1),ot=0;!Ye.isZero()&&Ye.andln(1)===0;)ot++,Ye.iushrn(1);i(!Ye.isZero());var Et=new a(1).toRed(this),er=Et.redNeg(),rr=this.m.subn(1).iushrn(1),yt=this.m.bitLength();for(yt=new a(2*yt*yt).toRed(this);this.pow(yt,rr).cmp(er)!==0;)yt.redIAdd(er);for(var tr=this.pow(yt,Ye),Ut=this.pow(Lt,Ye.addn(1).iushrn(1)),Ft=this.pow(Lt,Ye),sr=ot;Ft.cmp(Et)!==0;){for(var vr=Ft,_r=0;vr.cmp(Et)!==0;_r++)vr=vr.redSqr();i(_r<sr);var dr=this.pow(tr,new a(1).iushln(sr-_r-1));Ut=Ut.redMul(dr),tr=dr.redSqr(),Ft=Ft.redMul(tr),sr=_r}return Ut},hr.prototype.invm=function(Lt){var Vt=Lt._invmp(this.m);return Vt.negative!==0?(Vt.negative=0,this.imod(Vt).redNeg()):this.imod(Vt)},hr.prototype.pow=function(Lt,Vt){if(Vt.isZero())return new a(1).toRed(this);if(Vt.cmpn(1)===0)return Lt.clone();var tt=4,Ye=new Array(1<<tt);Ye[0]=new a(1).toRed(this),Ye[1]=Lt;for(var ot=2;ot<Ye.length;ot++)Ye[ot]=this.mul(Ye[ot-1],Lt);var Et=Ye[0],er=0,rr=0,yt=Vt.bitLength()%26;for(yt===0&&(yt=26),ot=Vt.length-1;ot>=0;ot--){for(var tr=Vt.words[ot],Ut=yt-1;Ut>=0;Ut--){var Ft=tr>>Ut&1;if(Et!==Ye[0]&&(Et=this.sqr(Et)),Ft===0&&er===0){rr=0;continue}er<<=1,er|=Ft,rr++,!(rr!==tt&&(ot!==0||Ut!==0))&&(Et=this.mul(Et,Ye[er]),rr=0,er=0)}yt=26}return Et},hr.prototype.convertTo=function(Lt){var Vt=Lt.umod(this.m);return Vt===Lt?Vt.clone():Vt},hr.prototype.convertFrom=function(Lt){var Vt=Lt.clone();return Vt.red=null,Vt},a.mont=function(Lt){return new fr(Lt)};function fr(ar){hr.call(this,ar),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(fr,hr),fr.prototype.convertTo=function(Lt){return this.imod(Lt.ushln(this.shift))},fr.prototype.convertFrom=function(Lt){var Vt=this.imod(Lt.mul(this.rinv));return Vt.red=null,Vt},fr.prototype.imul=function(Lt,Vt){if(Lt.isZero()||Vt.isZero())return Lt.words[0]=0,Lt.length=1,Lt;var tt=Lt.imul(Vt),Ye=tt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ot=tt.isub(Ye).iushrn(this.shift),Et=ot;return ot.cmp(this.m)>=0?Et=ot.isub(this.m):ot.cmpn(0)<0&&(Et=ot.iadd(this.m)),Et._forceRed(this)},fr.prototype.mul=function(Lt,Vt){if(Lt.isZero()||Vt.isZero())return new a(0)._forceRed(this);var tt=Lt.mul(Vt),Ye=tt.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ot=tt.isub(Ye).iushrn(this.shift),Et=ot;return ot.cmp(this.m)>=0?Et=ot.isub(this.m):ot.cmpn(0)<0&&(Et=ot.iadd(this.m)),Et._forceRed(this)},fr.prototype.invm=function(Lt){var Vt=this.imod(Lt._invmp(this.m).mul(this.r2));return Vt._forceRed(this)}})(t,commonjsGlobal$1)}(bn$2)),bn$2.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var t;brorand.exports=function(s){return t||(t=new e(null)),t.generate(s)};function e(i){this.rand=i}if(brorand.exports.Rand=e,e.prototype.generate=function(s){return this._rand(s)},e.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var a=new Uint8Array(s),l=0;l<a.length;l++)a[l]=this.rand.getByte();return a},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.crypto.getRandomValues(a),a}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(s){var a=new Uint8Array(s);return self.msCrypto.getRandomValues(a),a}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=requireCryptoBrowserify();if(typeof n.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(s){return n.randomBytes(s)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=requireBn(),e=requireBrorand();function n(i){this.rand=i||new e.Rand}return mr=n,n.create=function(s){return new n(s)},n.prototype._randbelow=function(s){var a=s.bitLength(),l=Math.ceil(a/8);do var f=new t(this.rand.generate(l));while(f.cmp(s)>=0);return f},n.prototype._randrange=function(s,a){var l=a.sub(s);return s.add(this._randbelow(l))},n.prototype.test=function(s,a,l){var f=s.bitLength(),p=t.mont(s),C=new t(1).toRed(p);a||(a=Math.max(1,f/48|0));for(var B=s.subn(1),N=0;!B.testn(N);N++);for(var le=s.shrn(N),Ee=B.toRed(p),Ue=!0;a>0;a--){var ze=this._randrange(new t(2),B);l&&l(ze);var Ze=ze.toRed(p).redPow(le);if(!(Ze.cmp(C)===0||Ze.cmp(Ee)===0)){for(var Qe=1;Qe<N;Qe++){if(Ze=Ze.redSqr(),Ze.cmp(C)===0)return!1;if(Ze.cmp(Ee)===0)break}if(Qe===N)return!1}}return Ue},n.prototype.getDivisor=function(s,a){var l=s.bitLength(),f=t.mont(s),p=new t(1).toRed(f);a||(a=Math.max(1,l/48|0));for(var C=s.subn(1),B=0;!C.testn(B);B++);for(var N=s.shrn(B),le=C.toRed(f);a>0;a--){var Ee=this._randrange(new t(2),C),Ue=s.gcd(Ee);if(Ue.cmpn(1)!==0)return Ue;var ze=Ee.toRed(f).redPow(N);if(!(ze.cmp(p)===0||ze.cmp(le)===0)){for(var Ze=1;Ze<B;Ze++){if(ze=ze.redSqr(),ze.cmp(p)===0)return ze.fromRed().subn(1).gcd(s);if(ze.cmp(le)===0)break}if(Ze===B)return ze=ze.redSqr(),ze.fromRed().subn(1).gcd(s)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=requireBrowser$b();generatePrime=Ze,Ze.simpleSieve=Ue,Ze.fermatTest=ze;var e=requireBn(),n=new e(24),i=requireMr(),s=new i,a=new e(1),l=new e(2),f=new e(5);new e(16),new e(8);var p=new e(10),C=new e(3);new e(7);var B=new e(11),N=new e(4);new e(12);var le=null;function Ee(){if(le!==null)return le;var Qe=1048576,ct=[];ct[0]=2;for(var wt=1,qt=3;qt<Qe;qt+=2){for(var nr=Math.ceil(Math.sqrt(qt)),ir=0;ir<wt&&ct[ir]<=nr&&qt%ct[ir]!==0;ir++);wt!==ir&&ct[ir]<=nr||(ct[wt++]=qt)}return le=ct,ct}function Ue(Qe){for(var ct=Ee(),wt=0;wt<ct.length;wt++)if(Qe.modn(ct[wt])===0)return Qe.cmpn(ct[wt])===0;return!0}function ze(Qe){var ct=e.mont(Qe);return l.toRed(ct).redPow(Qe.subn(1)).fromRed().cmpn(1)===0}function Ze(Qe,ct){if(Qe<16)return ct===2||ct===5?new e([140,123]):new e([140,39]);ct=new e(ct);for(var wt,qt;;){for(wt=new e(t(Math.ceil(Qe/8)));wt.bitLength()>Qe;)wt.ishrn(1);if(wt.isEven()&&wt.iadd(a),wt.testn(1)||wt.iadd(l),ct.cmp(l)){if(!ct.cmp(f))for(;wt.mod(p).cmp(C);)wt.iadd(N)}else for(;wt.mod(n).cmp(B);)wt.iadd(N);if(qt=wt.shrn(1),Ue(qt)&&Ue(wt)&&ze(qt)&&ze(wt)&&s.test(qt)&&s.test(wt))return wt}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=requireBn(),e=requireMr(),n=new e,i=new t(24),s=new t(11),a=new t(10),l=new t(3),f=new t(7),p=requireGeneratePrime(),C=requireBrowser$b();dh=Ue;function B(Ze,Qe){return Qe=Qe||"utf8",Buffer$1.isBuffer(Ze)||(Ze=new Buffer$1(Ze,Qe)),this._pub=new t(Ze),this}function N(Ze,Qe){return Qe=Qe||"utf8",Buffer$1.isBuffer(Ze)||(Ze=new Buffer$1(Ze,Qe)),this._priv=new t(Ze),this}var le={};function Ee(Ze,Qe){var ct=Qe.toString("hex"),wt=[ct,Ze.toString(16)].join("_");if(wt in le)return le[wt];var qt=0;if(Ze.isEven()||!p.simpleSieve||!p.fermatTest(Ze)||!n.test(Ze))return qt+=1,ct==="02"||ct==="05"?qt+=8:qt+=4,le[wt]=qt,qt;n.test(Ze.shrn(1))||(qt+=2);var nr;switch(ct){case"02":Ze.mod(i).cmp(s)&&(qt+=8);break;case"05":nr=Ze.mod(a),nr.cmp(l)&&nr.cmp(f)&&(qt+=8);break;default:qt+=4}return le[wt]=qt,qt}function Ue(Ze,Qe,ct){this.setGenerator(Qe),this.__prime=new t(Ze),this._prime=t.mont(this.__prime),this._primeLen=Ze.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,ct?(this.setPublicKey=B,this.setPrivateKey=N):this._primeCode=8}Object.defineProperty(Ue.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=Ee(this.__prime,this.__gen)),this._primeCode}}),Ue.prototype.generateKeys=function(){return this._priv||(this._priv=new t(C(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},Ue.prototype.computeSecret=function(Ze){Ze=new t(Ze),Ze=Ze.toRed(this._prime);var Qe=Ze.redPow(this._priv).fromRed(),ct=new Buffer$1(Qe.toArray()),wt=this.getPrime();if(ct.length<wt.length){var qt=new Buffer$1(wt.length-ct.length);qt.fill(0),ct=Buffer$1.concat([qt,ct])}return ct},Ue.prototype.getPublicKey=function(Qe){return ze(this._pub,Qe)},Ue.prototype.getPrivateKey=function(Qe){return ze(this._priv,Qe)},Ue.prototype.getPrime=function(Ze){return ze(this.__prime,Ze)},Ue.prototype.getGenerator=function(Ze){return ze(this._gen,Ze)},Ue.prototype.setGenerator=function(Ze,Qe){return Qe=Qe||"utf8",Buffer$1.isBuffer(Ze)||(Ze=new Buffer$1(Ze,Qe)),this.__gen=Ze,this._gen=new t(Ze),this};function ze(Ze,Qe){var ct=new Buffer$1(Ze.toArray());return Qe?ct.toString(Qe):ct}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var t=requireGeneratePrime(),e=require$$1$1,n=requireDh();function i(l){var f=new Buffer$1(e[l].prime,"hex"),p=new Buffer$1(e[l].gen,"hex");return new n(f,p)}var s={binary:!0,hex:!0,base64:!0};function a(l,f,p,C){return Buffer$1.isBuffer(f)||s[f]===void 0?a(l,"binary",f,p):(f=f||"binary",C=C||"binary",p=p||new Buffer$1([2]),Buffer$1.isBuffer(p)||(p=new Buffer$1(p,C)),typeof l=="number"?new n(t(l,p),p,!0):(Buffer$1.isBuffer(l)||(l=new Buffer$1(l,f)),new n(l,p,!0)))}return browser$4.DiffieHellmanGroup=browser$4.createDiffieHellmanGroup=browser$4.getDiffieHellman=i,browser$4.createDiffieHellman=browser$4.DiffieHellman=a,browser$4}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:t}:processNextickArgs.exports=process$1;function t(e,n,i,s){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,l,f;switch(a){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,n)});case 3:return process$1.nextTick(function(){e.call(null,n,i)});case 4:return process$1.nextTick(function(){e.call(null,n,i,s)});default:for(l=new Array(a-1),f=0;f<l.length;)l[f++]=arguments[f];return process$1.nextTick(function(){e.apply(null,l)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var t={}.toString;return isarray=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(t,e){var n=require$$1$3,i=n.Buffer;function s(l,f){for(var p in l)f[p]=l[p]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(s(n,e),e.Buffer=a);function a(l,f,p){return i(l,f,p)}s(i,a),a.from=function(l,f,p){if(typeof l=="number")throw new TypeError("Argument must not be a number");return i(l,f,p)},a.alloc=function(l,f,p){if(typeof l!="number")throw new TypeError("Argument must be a number");var C=i(l);return f!==void 0?typeof p=="string"?C.fill(f,p):C.fill(f):C.fill(0),C},a.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return i(l)},a.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$3={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util$3;hasRequiredUtil=1;function t(ze){return Array.isArray?Array.isArray(ze):Ue(ze)==="[object Array]"}util$3.isArray=t;function e(ze){return typeof ze=="boolean"}util$3.isBoolean=e;function n(ze){return ze===null}util$3.isNull=n;function i(ze){return ze==null}util$3.isNullOrUndefined=i;function s(ze){return typeof ze=="number"}util$3.isNumber=s;function a(ze){return typeof ze=="string"}util$3.isString=a;function l(ze){return typeof ze=="symbol"}util$3.isSymbol=l;function f(ze){return ze===void 0}util$3.isUndefined=f;function p(ze){return Ue(ze)==="[object RegExp]"}util$3.isRegExp=p;function C(ze){return typeof ze=="object"&&ze!==null}util$3.isObject=C;function B(ze){return Ue(ze)==="[object Date]"}util$3.isDate=B;function N(ze){return Ue(ze)==="[object Error]"||ze instanceof Error}util$3.isError=N;function le(ze){return typeof ze=="function"}util$3.isFunction=le;function Ee(ze){return ze===null||typeof ze=="boolean"||typeof ze=="number"||typeof ze=="string"||typeof ze=="symbol"||typeof ze>"u"}util$3.isPrimitive=Ee,util$3.isBuffer=require$$1$3.Buffer.isBuffer;function Ue(ze){return Object.prototype.toString.call(ze)}return util$3}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(t){function e(a,l){if(!(a instanceof l))throw new TypeError("Cannot call a class as a function")}var n=requireSafeBuffer().Buffer,i=requireUtil$1();function s(a,l,f){a.copy(l,f)}t.exports=function(){function a(){e(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(f){var p={data:f,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length},a.prototype.unshift=function(f){var p={data:f,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length},a.prototype.shift=function(){if(this.length!==0){var f=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,f}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(f){if(this.length===0)return"";for(var p=this.head,C=""+p.data;p=p.next;)C+=f+p.data;return C},a.prototype.concat=function(f){if(this.length===0)return n.alloc(0);for(var p=n.allocUnsafe(f>>>0),C=this.head,B=0;C;)s(C.data,p,B),B+=C.data.length,C=C.next;return p},a}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var a=i.inspect({length:this.length});return this.constructor.name+" "+a})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var t=requireProcessNextickArgs();function e(s,a){var l=this,f=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return f||p?(a?a(s):s&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(i,this,s)):t.nextTick(i,this,s)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(s||null,function(C){!a&&C?l._writableState?l._writableState.errorEmitted||(l._writableState.errorEmitted=!0,t.nextTick(i,l,C)):t.nextTick(i,l,C):a&&a(C)}),this)}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(s,a){s.emit("error",a)}return destroy_1={destroy:e,undestroy:n},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var t=requireProcessNextickArgs();_stream_writable=ze;function e(Et){var er=this;this.next=null,this.entry=null,this.finish=function(){ot(er,Et)}}var n=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:t.nextTick,i;ze.WritableState=Ee;var s=Object.create(requireUtil());s.inherits=requireInherits_browser();var a={deprecate:requireBrowser$a()},l=requireStreamBrowser(),f=requireSafeBuffer().Buffer,p=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function C(Et){return f.from(Et)}function B(Et){return f.isBuffer(Et)||Et instanceof p}var N=requireDestroy();s.inherits(ze,l);function le(){}function Ee(Et,er){i=i||require_stream_duplex(),Et=Et||{};var rr=er instanceof i;this.objectMode=!!Et.objectMode,rr&&(this.objectMode=this.objectMode||!!Et.writableObjectMode);var yt=Et.highWaterMark,tr=Et.writableHighWaterMark,Ut=this.objectMode?16:16*1024;yt||yt===0?this.highWaterMark=yt:rr&&(tr||tr===0)?this.highWaterMark=tr:this.highWaterMark=Ut,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ft=Et.decodeStrings===!1;this.decodeStrings=!Ft,this.defaultEncoding=Et.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(sr){or(er,sr)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}Ee.prototype.getBuffer=function(){for(var er=this.bufferedRequest,rr=[];er;)rr.push(er),er=er.next;return rr},function(){try{Object.defineProperty(Ee.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var Ue;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ue=Function.prototype[Symbol.hasInstance],Object.defineProperty(ze,Symbol.hasInstance,{value:function(Et){return Ue.call(this,Et)?!0:this!==ze?!1:Et&&Et._writableState instanceof Ee}})):Ue=function(Et){return Et instanceof this};function ze(Et){if(i=i||require_stream_duplex(),!Ue.call(ze,this)&&!(this instanceof i))return new ze(Et);this._writableState=new Ee(Et,this),this.writable=!0,Et&&(typeof Et.write=="function"&&(this._write=Et.write),typeof Et.writev=="function"&&(this._writev=Et.writev),typeof Et.destroy=="function"&&(this._destroy=Et.destroy),typeof Et.final=="function"&&(this._final=Et.final)),l.call(this)}ze.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Ze(Et,er){var rr=new Error("write after end");Et.emit("error",rr),t.nextTick(er,rr)}function Qe(Et,er,rr,yt){var tr=!0,Ut=!1;return rr===null?Ut=new TypeError("May not write null values to stream"):typeof rr!="string"&&rr!==void 0&&!er.objectMode&&(Ut=new TypeError("Invalid non-string/buffer chunk")),Ut&&(Et.emit("error",Ut),t.nextTick(yt,Ut),tr=!1),tr}ze.prototype.write=function(Et,er,rr){var yt=this._writableState,tr=!1,Ut=!yt.objectMode&&B(Et);return Ut&&!f.isBuffer(Et)&&(Et=C(Et)),typeof er=="function"&&(rr=er,er=null),Ut?er="buffer":er||(er=yt.defaultEncoding),typeof rr!="function"&&(rr=le),yt.ended?Ze(this,rr):(Ut||Qe(this,yt,Et,rr))&&(yt.pendingcb++,tr=wt(this,yt,Ut,Et,er,rr)),tr},ze.prototype.cork=function(){var Et=this._writableState;Et.corked++},ze.prototype.uncork=function(){var Et=this._writableState;Et.corked&&(Et.corked--,!Et.writing&&!Et.corked&&!Et.bufferProcessing&&Et.bufferedRequest&&fr(this,Et))},ze.prototype.setDefaultEncoding=function(er){if(typeof er=="string"&&(er=er.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((er+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+er);return this._writableState.defaultEncoding=er,this};function ct(Et,er,rr){return!Et.objectMode&&Et.decodeStrings!==!1&&typeof er=="string"&&(er=f.from(er,rr)),er}Object.defineProperty(ze.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function wt(Et,er,rr,yt,tr,Ut){if(!rr){var Ft=ct(er,yt,tr);yt!==Ft&&(rr=!0,tr="buffer",yt=Ft)}var sr=er.objectMode?1:yt.length;er.length+=sr;var vr=er.length<er.highWaterMark;if(vr||(er.needDrain=!0),er.writing||er.corked){var _r=er.lastBufferedRequest;er.lastBufferedRequest={chunk:yt,encoding:tr,isBuf:rr,callback:Ut,next:null},_r?_r.next=er.lastBufferedRequest:er.bufferedRequest=er.lastBufferedRequest,er.bufferedRequestCount+=1}else qt(Et,er,!1,sr,yt,tr,Ut);return vr}function qt(Et,er,rr,yt,tr,Ut,Ft){er.writelen=yt,er.writecb=Ft,er.writing=!0,er.sync=!0,rr?Et._writev(tr,er.onwrite):Et._write(tr,Ut,er.onwrite),er.sync=!1}function nr(Et,er,rr,yt,tr){--er.pendingcb,rr?(t.nextTick(tr,yt),t.nextTick(tt,Et,er),Et._writableState.errorEmitted=!0,Et.emit("error",yt)):(tr(yt),Et._writableState.errorEmitted=!0,Et.emit("error",yt),tt(Et,er))}function ir(Et){Et.writing=!1,Et.writecb=null,Et.length-=Et.writelen,Et.writelen=0}function or(Et,er){var rr=Et._writableState,yt=rr.sync,tr=rr.writecb;if(ir(rr),er)nr(Et,rr,yt,er,tr);else{var Ut=ar(rr);!Ut&&!rr.corked&&!rr.bufferProcessing&&rr.bufferedRequest&&fr(Et,rr),yt?n(ur,Et,rr,Ut,tr):ur(Et,rr,Ut,tr)}}function ur(Et,er,rr,yt){rr||hr(Et,er),er.pendingcb--,yt(),tt(Et,er)}function hr(Et,er){er.length===0&&er.needDrain&&(er.needDrain=!1,Et.emit("drain"))}function fr(Et,er){er.bufferProcessing=!0;var rr=er.bufferedRequest;if(Et._writev&&rr&&rr.next){var yt=er.bufferedRequestCount,tr=new Array(yt),Ut=er.corkedRequestsFree;Ut.entry=rr;for(var Ft=0,sr=!0;rr;)tr[Ft]=rr,rr.isBuf||(sr=!1),rr=rr.next,Ft+=1;tr.allBuffers=sr,qt(Et,er,!0,er.length,tr,"",Ut.finish),er.pendingcb++,er.lastBufferedRequest=null,Ut.next?(er.corkedRequestsFree=Ut.next,Ut.next=null):er.corkedRequestsFree=new e(er),er.bufferedRequestCount=0}else{for(;rr;){var vr=rr.chunk,_r=rr.encoding,dr=rr.callback,gr=er.objectMode?1:vr.length;if(qt(Et,er,!1,gr,vr,_r,dr),rr=rr.next,er.bufferedRequestCount--,er.writing)break}rr===null&&(er.lastBufferedRequest=null)}er.bufferedRequest=rr,er.bufferProcessing=!1}ze.prototype._write=function(Et,er,rr){rr(new Error("_write() is not implemented"))},ze.prototype._writev=null,ze.prototype.end=function(Et,er,rr){var yt=this._writableState;typeof Et=="function"?(rr=Et,Et=null,er=null):typeof er=="function"&&(rr=er,er=null),Et!=null&&this.write(Et,er),yt.corked&&(yt.corked=1,this.uncork()),yt.ending||Ye(this,yt,rr)};function ar(Et){return Et.ending&&Et.length===0&&Et.bufferedRequest===null&&!Et.finished&&!Et.writing}function Lt(Et,er){Et._final(function(rr){er.pendingcb--,rr&&Et.emit("error",rr),er.prefinished=!0,Et.emit("prefinish"),tt(Et,er)})}function Vt(Et,er){!er.prefinished&&!er.finalCalled&&(typeof Et._final=="function"?(er.pendingcb++,er.finalCalled=!0,t.nextTick(Lt,Et,er)):(er.prefinished=!0,Et.emit("prefinish")))}function tt(Et,er){var rr=ar(er);return rr&&(Vt(Et,er),er.pendingcb===0&&(er.finished=!0,Et.emit("finish"))),rr}function Ye(Et,er,rr){er.ending=!0,tt(Et,er),rr&&(er.finished?t.nextTick(rr):Et.once("finish",rr)),er.ended=!0,Et.writable=!1}function ot(Et,er,rr){var yt=Et.entry;for(Et.entry=null;yt;){var tr=yt.callback;er.pendingcb--,tr(rr),yt=yt.next}er.corkedRequestsFree.next=Et}return Object.defineProperty(ze.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Et){this._writableState&&(this._writableState.destroyed=Et)}}),ze.prototype.destroy=N.destroy,ze.prototype._undestroy=N.undestroy,ze.prototype._destroy=function(Et,er){this.end(),er(Et)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=requireProcessNextickArgs(),e=Object.keys||function(N){var le=[];for(var Ee in N)le.push(Ee);return le};_stream_duplex=p;var n=Object.create(requireUtil());n.inherits=requireInherits_browser();var i=require_stream_readable(),s=require_stream_writable();n.inherits(p,i);for(var a=e(s.prototype),l=0;l<a.length;l++){var f=a[l];p.prototype[f]||(p.prototype[f]=s.prototype[f])}function p(N){if(!(this instanceof p))return new p(N);i.call(this,N),s.call(this,N),N&&N.readable===!1&&(this.readable=!1),N&&N.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,N&&N.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",C)}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function C(){this.allowHalfOpen||this._writableState.ended||t.nextTick(B,this)}function B(N){N.end()}return Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(N){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=N,this._writableState.destroyed=N)}}),p.prototype._destroy=function(N,le){this.push(null),this.end(),t.nextTick(le,N)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var t=requireProcessNextickArgs();_stream_readable=ct;var e=requireIsarray(),n;ct.ReadableState=Qe,requireEvents().EventEmitter;var i=function(dr,gr){return dr.listeners(gr).length},s=requireStreamBrowser(),a=requireSafeBuffer().Buffer,l=(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(dr){return a.from(dr)}function p(dr){return a.isBuffer(dr)||dr instanceof l}var C=Object.create(requireUtil());C.inherits=requireInherits_browser();var B=requireUtil$1(),N=void 0;B&&B.debuglog?N=B.debuglog("stream"):N=function(){};var le=requireBufferList(),Ee=requireDestroy(),Ue;C.inherits(ct,s);var ze=["error","close","destroy","pause","resume"];function Ze(dr,gr,$r){if(typeof dr.prependListener=="function")return dr.prependListener(gr,$r);!dr._events||!dr._events[gr]?dr.on(gr,$r):e(dr._events[gr])?dr._events[gr].unshift($r):dr._events[gr]=[$r,dr._events[gr]]}function Qe(dr,gr){n=n||require_stream_duplex(),dr=dr||{};var $r=gr instanceof n;this.objectMode=!!dr.objectMode,$r&&(this.objectMode=this.objectMode||!!dr.readableObjectMode);var pr=dr.highWaterMark,lr=dr.readableHighWaterMark,cr=this.objectMode?16:16*1024;pr||pr===0?this.highWaterMark=pr:$r&&(lr||lr===0)?this.highWaterMark=lr:this.highWaterMark=cr,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new le,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=dr.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,dr.encoding&&(Ue||(Ue=requireString_decoder().StringDecoder),this.decoder=new Ue(dr.encoding),this.encoding=dr.encoding)}function ct(dr){if(n=n||require_stream_duplex(),!(this instanceof ct))return new ct(dr);this._readableState=new Qe(dr,this),this.readable=!0,dr&&(typeof dr.read=="function"&&(this._read=dr.read),typeof dr.destroy=="function"&&(this._destroy=dr.destroy)),s.call(this)}Object.defineProperty(ct.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(dr){this._readableState&&(this._readableState.destroyed=dr)}}),ct.prototype.destroy=Ee.destroy,ct.prototype._undestroy=Ee.undestroy,ct.prototype._destroy=function(dr,gr){this.push(null),gr(dr)},ct.prototype.push=function(dr,gr){var $r=this._readableState,pr;return $r.objectMode?pr=!0:typeof dr=="string"&&(gr=gr||$r.defaultEncoding,gr!==$r.encoding&&(dr=a.from(dr,gr),gr=""),pr=!0),wt(this,dr,gr,!1,pr)},ct.prototype.unshift=function(dr){return wt(this,dr,null,!0,!1)};function wt(dr,gr,$r,pr,lr){var cr=dr._readableState;if(gr===null)cr.reading=!1,fr(dr,cr);else{var yr;lr||(yr=nr(cr,gr)),yr?dr.emit("error",yr):cr.objectMode||gr&&gr.length>0?(typeof gr!="string"&&!cr.objectMode&&Object.getPrototypeOf(gr)!==a.prototype&&(gr=f(gr)),pr?cr.endEmitted?dr.emit("error",new Error("stream.unshift() after end event")):qt(dr,cr,gr,!0):cr.ended?dr.emit("error",new Error("stream.push() after EOF")):(cr.reading=!1,cr.decoder&&!$r?(gr=cr.decoder.write(gr),cr.objectMode||gr.length!==0?qt(dr,cr,gr,!1):Vt(dr,cr)):qt(dr,cr,gr,!1))):pr||(cr.reading=!1)}return ir(cr)}function qt(dr,gr,$r,pr){gr.flowing&&gr.length===0&&!gr.sync?(dr.emit("data",$r),dr.read(0)):(gr.length+=gr.objectMode?1:$r.length,pr?gr.buffer.unshift($r):gr.buffer.push($r),gr.needReadable&&ar(dr)),Vt(dr,gr)}function nr(dr,gr){var $r;return!p(gr)&&typeof gr!="string"&&gr!==void 0&&!dr.objectMode&&($r=new TypeError("Invalid non-string/buffer chunk")),$r}function ir(dr){return!dr.ended&&(dr.needReadable||dr.length<dr.highWaterMark||dr.length===0)}ct.prototype.isPaused=function(){return this._readableState.flowing===!1},ct.prototype.setEncoding=function(dr){return Ue||(Ue=requireString_decoder().StringDecoder),this._readableState.decoder=new Ue(dr),this._readableState.encoding=dr,this};var or=8388608;function ur(dr){return dr>=or?dr=or:(dr--,dr|=dr>>>1,dr|=dr>>>2,dr|=dr>>>4,dr|=dr>>>8,dr|=dr>>>16,dr++),dr}function hr(dr,gr){return dr<=0||gr.length===0&&gr.ended?0:gr.objectMode?1:dr!==dr?gr.flowing&&gr.length?gr.buffer.head.data.length:gr.length:(dr>gr.highWaterMark&&(gr.highWaterMark=ur(dr)),dr<=gr.length?dr:gr.ended?gr.length:(gr.needReadable=!0,0))}ct.prototype.read=function(dr){N("read",dr),dr=parseInt(dr,10);var gr=this._readableState,$r=dr;if(dr!==0&&(gr.emittedReadable=!1),dr===0&&gr.needReadable&&(gr.length>=gr.highWaterMark||gr.ended))return N("read: emitReadable",gr.length,gr.ended),gr.length===0&&gr.ended?sr(this):ar(this),null;if(dr=hr(dr,gr),dr===0&&gr.ended)return gr.length===0&&sr(this),null;var pr=gr.needReadable;N("need readable",pr),(gr.length===0||gr.length-dr<gr.highWaterMark)&&(pr=!0,N("length less than watermark",pr)),gr.ended||gr.reading?(pr=!1,N("reading or ended",pr)):pr&&(N("do read"),gr.reading=!0,gr.sync=!0,gr.length===0&&(gr.needReadable=!0),this._read(gr.highWaterMark),gr.sync=!1,gr.reading||(dr=hr($r,gr)));var lr;return dr>0?lr=yt(dr,gr):lr=null,lr===null?(gr.needReadable=!0,dr=0):gr.length-=dr,gr.length===0&&(gr.ended||(gr.needReadable=!0),$r!==dr&&gr.ended&&sr(this)),lr!==null&&this.emit("data",lr),lr};function fr(dr,gr){if(!gr.ended){if(gr.decoder){var $r=gr.decoder.end();$r&&$r.length&&(gr.buffer.push($r),gr.length+=gr.objectMode?1:$r.length)}gr.ended=!0,ar(dr)}}function ar(dr){var gr=dr._readableState;gr.needReadable=!1,gr.emittedReadable||(N("emitReadable",gr.flowing),gr.emittedReadable=!0,gr.sync?t.nextTick(Lt,dr):Lt(dr))}function Lt(dr){N("emit readable"),dr.emit("readable"),rr(dr)}function Vt(dr,gr){gr.readingMore||(gr.readingMore=!0,t.nextTick(tt,dr,gr))}function tt(dr,gr){for(var $r=gr.length;!gr.reading&&!gr.flowing&&!gr.ended&&gr.length<gr.highWaterMark&&(N("maybeReadMore read 0"),dr.read(0),$r!==gr.length);)$r=gr.length;gr.readingMore=!1}ct.prototype._read=function(dr){this.emit("error",new Error("_read() is not implemented"))},ct.prototype.pipe=function(dr,gr){var $r=this,pr=this._readableState;switch(pr.pipesCount){case 0:pr.pipes=dr;break;case 1:pr.pipes=[pr.pipes,dr];break;default:pr.pipes.push(dr);break}pr.pipesCount+=1,N("pipe count=%d opts=%j",pr.pipesCount,gr);var lr=(!gr||gr.end!==!1)&&dr!==process$1.stdout&&dr!==process$1.stderr,cr=lr?Sr:Rr;pr.endEmitted?t.nextTick(cr):$r.once("end",cr),dr.on("unpipe",yr);function yr(Ir,Dr){N("onunpipe"),Ir===$r&&Dr&&Dr.hasUnpiped===!1&&(Dr.hasUnpiped=!0,xr())}function Sr(){N("onend"),dr.end()}var Ar=Ye($r);dr.on("drain",Ar);var Tr=!1;function xr(){N("cleanup"),dr.removeListener("close",kr),dr.removeListener("finish",Br),dr.removeListener("drain",Ar),dr.removeListener("error",Er),dr.removeListener("unpipe",yr),$r.removeListener("end",Sr),$r.removeListener("end",Rr),$r.removeListener("data",wr),Tr=!0,pr.awaitDrain&&(!dr._writableState||dr._writableState.needDrain)&&Ar()}var Cr=!1;$r.on("data",wr);function wr(Ir){N("ondata"),Cr=!1;var Dr=dr.write(Ir);Dr===!1&&!Cr&&((pr.pipesCount===1&&pr.pipes===dr||pr.pipesCount>1&&_r(pr.pipes,dr)!==-1)&&!Tr&&(N("false write response, pause",pr.awaitDrain),pr.awaitDrain++,Cr=!0),$r.pause())}function Er(Ir){N("onerror",Ir),Rr(),dr.removeListener("error",Er),i(dr,"error")===0&&dr.emit("error",Ir)}Ze(dr,"error",Er);function kr(){dr.removeListener("finish",Br),Rr()}dr.once("close",kr);function Br(){N("onfinish"),dr.removeListener("close",kr),Rr()}dr.once("finish",Br);function Rr(){N("unpipe"),$r.unpipe(dr)}return dr.emit("pipe",$r),pr.flowing||(N("pipe resume"),$r.resume()),dr};function Ye(dr){return function(){var gr=dr._readableState;N("pipeOnDrain",gr.awaitDrain),gr.awaitDrain&&gr.awaitDrain--,gr.awaitDrain===0&&i(dr,"data")&&(gr.flowing=!0,rr(dr))}}ct.prototype.unpipe=function(dr){var gr=this._readableState,$r={hasUnpiped:!1};if(gr.pipesCount===0)return this;if(gr.pipesCount===1)return dr&&dr!==gr.pipes?this:(dr||(dr=gr.pipes),gr.pipes=null,gr.pipesCount=0,gr.flowing=!1,dr&&dr.emit("unpipe",this,$r),this);if(!dr){var pr=gr.pipes,lr=gr.pipesCount;gr.pipes=null,gr.pipesCount=0,gr.flowing=!1;for(var cr=0;cr<lr;cr++)pr[cr].emit("unpipe",this,{hasUnpiped:!1});return this}var yr=_r(gr.pipes,dr);return yr===-1?this:(gr.pipes.splice(yr,1),gr.pipesCount-=1,gr.pipesCount===1&&(gr.pipes=gr.pipes[0]),dr.emit("unpipe",this,$r),this)},ct.prototype.on=function(dr,gr){var $r=s.prototype.on.call(this,dr,gr);if(dr==="data")this._readableState.flowing!==!1&&this.resume();else if(dr==="readable"){var pr=this._readableState;!pr.endEmitted&&!pr.readableListening&&(pr.readableListening=pr.needReadable=!0,pr.emittedReadable=!1,pr.reading?pr.length&&ar(this):t.nextTick(ot,this))}return $r},ct.prototype.addListener=ct.prototype.on;function ot(dr){N("readable nexttick read 0"),dr.read(0)}ct.prototype.resume=function(){var dr=this._readableState;return dr.flowing||(N("resume"),dr.flowing=!0,Et(this,dr)),this};function Et(dr,gr){gr.resumeScheduled||(gr.resumeScheduled=!0,t.nextTick(er,dr,gr))}function er(dr,gr){gr.reading||(N("resume read 0"),dr.read(0)),gr.resumeScheduled=!1,gr.awaitDrain=0,dr.emit("resume"),rr(dr),gr.flowing&&!gr.reading&&dr.read(0)}ct.prototype.pause=function(){return N("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(N("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function rr(dr){var gr=dr._readableState;for(N("flow",gr.flowing);gr.flowing&&dr.read()!==null;);}ct.prototype.wrap=function(dr){var gr=this,$r=this._readableState,pr=!1;dr.on("end",function(){if(N("wrapped end"),$r.decoder&&!$r.ended){var yr=$r.decoder.end();yr&&yr.length&&gr.push(yr)}gr.push(null)}),dr.on("data",function(yr){if(N("wrapped data"),$r.decoder&&(yr=$r.decoder.write(yr)),!($r.objectMode&&yr==null)&&!(!$r.objectMode&&(!yr||!yr.length))){var Sr=gr.push(yr);Sr||(pr=!0,dr.pause())}});for(var lr in dr)this[lr]===void 0&&typeof dr[lr]=="function"&&(this[lr]=function(yr){return function(){return dr[yr].apply(dr,arguments)}}(lr));for(var cr=0;cr<ze.length;cr++)dr.on(ze[cr],this.emit.bind(this,ze[cr]));return this._read=function(yr){N("wrapped _read",yr),pr&&(pr=!1,dr.resume())},this},Object.defineProperty(ct.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),ct._fromList=yt;function yt(dr,gr){if(gr.length===0)return null;var $r;return gr.objectMode?$r=gr.buffer.shift():!dr||dr>=gr.length?(gr.decoder?$r=gr.buffer.join(""):gr.buffer.length===1?$r=gr.buffer.head.data:$r=gr.buffer.concat(gr.length),gr.buffer.clear()):$r=tr(dr,gr.buffer,gr.decoder),$r}function tr(dr,gr,$r){var pr;return dr<gr.head.data.length?(pr=gr.head.data.slice(0,dr),gr.head.data=gr.head.data.slice(dr)):dr===gr.head.data.length?pr=gr.shift():pr=$r?Ut(dr,gr):Ft(dr,gr),pr}function Ut(dr,gr){var $r=gr.head,pr=1,lr=$r.data;for(dr-=lr.length;$r=$r.next;){var cr=$r.data,yr=dr>cr.length?cr.length:dr;if(yr===cr.length?lr+=cr:lr+=cr.slice(0,dr),dr-=yr,dr===0){yr===cr.length?(++pr,$r.next?gr.head=$r.next:gr.head=gr.tail=null):(gr.head=$r,$r.data=cr.slice(yr));break}++pr}return gr.length-=pr,lr}function Ft(dr,gr){var $r=a.allocUnsafe(dr),pr=gr.head,lr=1;for(pr.data.copy($r),dr-=pr.data.length;pr=pr.next;){var cr=pr.data,yr=dr>cr.length?cr.length:dr;if(cr.copy($r,$r.length-dr,0,yr),dr-=yr,dr===0){yr===cr.length?(++lr,pr.next?gr.head=pr.next:gr.head=gr.tail=null):(gr.head=pr,pr.data=cr.slice(yr));break}++lr}return gr.length-=lr,$r}function sr(dr){var gr=dr._readableState;if(gr.length>0)throw new Error('"endReadable()" called on non-empty stream');gr.endEmitted||(gr.ended=!0,t.nextTick(vr,gr,dr))}function vr(dr,gr){!dr.endEmitted&&dr.length===0&&(dr.endEmitted=!0,gr.readable=!1,gr.emit("end"))}function _r(dr,gr){for(var $r=0,pr=dr.length;$r<pr;$r++)if(dr[$r]===gr)return $r;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=i;var t=require_stream_duplex(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(i,t);function n(l,f){var p=this._transformState;p.transforming=!1;var C=p.writecb;if(!C)return this.emit("error",new Error("write callback called multiple times"));p.writechunk=null,p.writecb=null,f!=null&&this.push(f),C(l);var B=this._readableState;B.reading=!1,(B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}function i(l){if(!(this instanceof i))return new i(l);t.call(this,l),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",s)}function s(){var l=this;typeof this._flush=="function"?this._flush(function(f,p){a(l,f,p)}):a(this,null,null)}i.prototype.push=function(l,f){return this._transformState.needTransform=!1,t.prototype.push.call(this,l,f)},i.prototype._transform=function(l,f,p){throw new Error("_transform() is not implemented")},i.prototype._write=function(l,f,p){var C=this._transformState;if(C.writecb=p,C.writechunk=l,C.writeencoding=f,!C.transforming){var B=this._readableState;(C.needTransform||B.needReadable||B.length<B.highWaterMark)&&this._read(B.highWaterMark)}},i.prototype._read=function(l){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},i.prototype._destroy=function(l,f){var p=this;t.prototype._destroy.call(this,l,function(C){f(C),p.emit("close")})};function a(l,f,p){if(f)return l.emit("error",f);if(p!=null&&l.push(p),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=n;var t=require_stream_transform(),e=Object.create(requireUtil());e.inherits=requireInherits_browser(),e.inherits(n,t);function n(i){if(!(this instanceof n))return new n(i);t.call(this,i)}return n.prototype._transform=function(i,s,a){a(null,i)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var t=bnExports,e=requireBrowser$b(),n=requireSafeBuffer$1().Buffer;function i(l){var f=l.modulus.byteLength(),p;do p=new t(e(f));while(p.cmp(l.modulus)>=0||!p.umod(l.prime1)||!p.umod(l.prime2));return p}function s(l){var f=i(l),p=f.toRed(t.mont(l.modulus)).redPow(new t(l.publicExponent)).fromRed();return{blinder:p,unblinder:f.invm(l.modulus)}}function a(l,f){var p=s(f),C=f.modulus.byteLength(),B=new t(l).mul(p.blinder).umod(f.modulus),N=B.toRed(t.mont(f.prime1)),le=B.toRed(t.mont(f.prime2)),Ee=f.coefficient,Ue=f.prime1,ze=f.prime2,Ze=N.redPow(f.exponent1).fromRed(),Qe=le.redPow(f.exponent2).fromRed(),ct=Ze.isub(Qe).imul(Ee).umod(Ue).imul(ze);return Qe.iadd(ct).imul(p.unblinder).umod(f.modulus).toArrayLike(n,"be",C)}return a.getr=i,browserifyRsa=a,browserifyRsa}var elliptic={};const version="6.6.1",require$$0={version};var utils$2={},utils$1={},hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(t){var e=t;function n(a,l){if(Array.isArray(a))return a.slice();if(!a)return[];var f=[];if(typeof a!="string"){for(var p=0;p<a.length;p++)f[p]=a[p]|0;return f}if(l==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var p=0;p<a.length;p+=2)f.push(parseInt(a[p]+a[p+1],16))}else for(var p=0;p<a.length;p++){var C=a.charCodeAt(p),B=C>>8,N=C&255;B?f.push(B,N):f.push(N)}return f}e.toArray=n;function i(a){return a.length===1?"0"+a:a}e.zero2=i;function s(a){for(var l="",f=0;f<a.length;f++)l+=i(a[f].toString(16));return l}e.toHex=s,e.encode=function(l,f){return f==="hex"?s(l):l}}(utils$1)),utils$1}var hasRequiredUtils$1;function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,function(t){var e=t,n=requireBn(),i=requireMinimalisticAssert(),s=requireUtils$2();e.assert=i,e.toArray=s.toArray,e.zero2=s.zero2,e.toHex=s.toHex,e.encode=s.encode;function a(B,N,le){var Ee=new Array(Math.max(B.bitLength(),le)+1),Ue;for(Ue=0;Ue<Ee.length;Ue+=1)Ee[Ue]=0;var ze=1<<N+1,Ze=B.clone();for(Ue=0;Ue<Ee.length;Ue++){var Qe,ct=Ze.andln(ze-1);Ze.isOdd()?(ct>(ze>>1)-1?Qe=(ze>>1)-ct:Qe=ct,Ze.isubn(Qe)):Qe=0,Ee[Ue]=Qe,Ze.iushrn(1)}return Ee}e.getNAF=a;function l(B,N){var le=[[],[]];B=B.clone(),N=N.clone();for(var Ee=0,Ue=0,ze;B.cmpn(-Ee)>0||N.cmpn(-Ue)>0;){var Ze=B.andln(3)+Ee&3,Qe=N.andln(3)+Ue&3;Ze===3&&(Ze=-1),Qe===3&&(Qe=-1);var ct;Ze&1?(ze=B.andln(7)+Ee&7,(ze===3||ze===5)&&Qe===2?ct=-Ze:ct=Ze):ct=0,le[0].push(ct);var wt;Qe&1?(ze=N.andln(7)+Ue&7,(ze===3||ze===5)&&Ze===2?wt=-Qe:wt=Qe):wt=0,le[1].push(wt),2*Ee===ct+1&&(Ee=1-Ee),2*Ue===wt+1&&(Ue=1-Ue),B.iushrn(1),N.iushrn(1)}return le}e.getJSF=l;function f(B,N,le){var Ee="_"+N;B.prototype[N]=function(){return this[Ee]!==void 0?this[Ee]:this[Ee]=le.call(this)}}e.cachedProperty=f;function p(B){return typeof B=="string"?e.toArray(B,"hex"):B}e.parseBytes=p;function C(B){return new n(B,"hex","le")}e.intFromLE=C}(utils$2)),utils$2}var curve={},base$1,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var t=requireBn(),e=requireUtils$1(),n=e.getNAF,i=e.getJSF,s=e.assert;function a(f,p){this.type=f,this.p=new t(p.p,16),this.red=p.prime?t.red(p.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=p.n&&new t(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var C=this.n&&this.p.div(this.n);!C||C.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$1=a,a.prototype.point=function(){throw new Error("Not implemented")},a.prototype.validate=function(){throw new Error("Not implemented")},a.prototype._fixedNafMul=function(p,C){s(p.precomputed);var B=p._getDoubles(),N=n(C,1,this._bitLength),le=(1<<B.step+1)-(B.step%2===0?2:1);le/=3;var Ee=[],Ue,ze;for(Ue=0;Ue<N.length;Ue+=B.step){ze=0;for(var Ze=Ue+B.step-1;Ze>=Ue;Ze--)ze=(ze<<1)+N[Ze];Ee.push(ze)}for(var Qe=this.jpoint(null,null,null),ct=this.jpoint(null,null,null),wt=le;wt>0;wt--){for(Ue=0;Ue<Ee.length;Ue++)ze=Ee[Ue],ze===wt?ct=ct.mixedAdd(B.points[Ue]):ze===-wt&&(ct=ct.mixedAdd(B.points[Ue].neg()));Qe=Qe.add(ct)}return Qe.toP()},a.prototype._wnafMul=function(p,C){var B=4,N=p._getNAFPoints(B);B=N.wnd;for(var le=N.points,Ee=n(C,B,this._bitLength),Ue=this.jpoint(null,null,null),ze=Ee.length-1;ze>=0;ze--){for(var Ze=0;ze>=0&&Ee[ze]===0;ze--)Ze++;if(ze>=0&&Ze++,Ue=Ue.dblp(Ze),ze<0)break;var Qe=Ee[ze];s(Qe!==0),p.type==="affine"?Qe>0?Ue=Ue.mixedAdd(le[Qe-1>>1]):Ue=Ue.mixedAdd(le[-Qe-1>>1].neg()):Qe>0?Ue=Ue.add(le[Qe-1>>1]):Ue=Ue.add(le[-Qe-1>>1].neg())}return p.type==="affine"?Ue.toP():Ue},a.prototype._wnafMulAdd=function(p,C,B,N,le){var Ee=this._wnafT1,Ue=this._wnafT2,ze=this._wnafT3,Ze=0,Qe,ct,wt;for(Qe=0;Qe<N;Qe++){wt=C[Qe];var qt=wt._getNAFPoints(p);Ee[Qe]=qt.wnd,Ue[Qe]=qt.points}for(Qe=N-1;Qe>=1;Qe-=2){var nr=Qe-1,ir=Qe;if(Ee[nr]!==1||Ee[ir]!==1){ze[nr]=n(B[nr],Ee[nr],this._bitLength),ze[ir]=n(B[ir],Ee[ir],this._bitLength),Ze=Math.max(ze[nr].length,Ze),Ze=Math.max(ze[ir].length,Ze);continue}var or=[C[nr],null,null,C[ir]];C[nr].y.cmp(C[ir].y)===0?(or[1]=C[nr].add(C[ir]),or[2]=C[nr].toJ().mixedAdd(C[ir].neg())):C[nr].y.cmp(C[ir].y.redNeg())===0?(or[1]=C[nr].toJ().mixedAdd(C[ir]),or[2]=C[nr].add(C[ir].neg())):(or[1]=C[nr].toJ().mixedAdd(C[ir]),or[2]=C[nr].toJ().mixedAdd(C[ir].neg()));var ur=[-3,-1,-5,-7,0,7,5,1,3],hr=i(B[nr],B[ir]);for(Ze=Math.max(hr[0].length,Ze),ze[nr]=new Array(Ze),ze[ir]=new Array(Ze),ct=0;ct<Ze;ct++){var fr=hr[0][ct]|0,ar=hr[1][ct]|0;ze[nr][ct]=ur[(fr+1)*3+(ar+1)],ze[ir][ct]=0,Ue[nr]=or}}var Lt=this.jpoint(null,null,null),Vt=this._wnafT4;for(Qe=Ze;Qe>=0;Qe--){for(var tt=0;Qe>=0;){var Ye=!0;for(ct=0;ct<N;ct++)Vt[ct]=ze[ct][Qe]|0,Vt[ct]!==0&&(Ye=!1);if(!Ye)break;tt++,Qe--}if(Qe>=0&&tt++,Lt=Lt.dblp(tt),Qe<0)break;for(ct=0;ct<N;ct++){var ot=Vt[ct];ot!==0&&(ot>0?wt=Ue[ct][ot-1>>1]:ot<0&&(wt=Ue[ct][-ot-1>>1].neg()),wt.type==="affine"?Lt=Lt.mixedAdd(wt):Lt=Lt.add(wt))}}for(Qe=0;Qe<N;Qe++)Ue[Qe]=null;return le?Lt:Lt.toP()};function l(f,p){this.curve=f,this.type=p,this.precomputed=null}return a.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},a.prototype.decodePoint=function(p,C){p=e.toArray(p,C);var B=this.p.byteLength();if((p[0]===4||p[0]===6||p[0]===7)&&p.length-1===2*B){p[0]===6?s(p[p.length-1]%2===0):p[0]===7&&s(p[p.length-1]%2===1);var N=this.point(p.slice(1,1+B),p.slice(1+B,1+2*B));return N}else if((p[0]===2||p[0]===3)&&p.length-1===B)return this.pointFromX(p.slice(1,1+B),p[0]===3);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(p){return this.encode(p,!0)},l.prototype._encode=function(p){var C=this.curve.p.byteLength(),B=this.getX().toArray("be",C);return p?[this.getY().isEven()?2:3].concat(B):[4].concat(B,this.getY().toArray("be",C))},l.prototype.encode=function(p,C){return e.encode(this._encode(C),p)},l.prototype.precompute=function(p){if(this.precomputed)return this;var C={doubles:null,naf:null,beta:null};return C.naf=this._getNAFPoints(8),C.doubles=this._getDoubles(4,p),C.beta=this._getBeta(),this.precomputed=C,this},l.prototype._hasDoubles=function(p){if(!this.precomputed)return!1;var C=this.precomputed.doubles;return C?C.points.length>=Math.ceil((p.bitLength()+1)/C.step):!1},l.prototype._getDoubles=function(p,C){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var B=[this],N=this,le=0;le<C;le+=p){for(var Ee=0;Ee<p;Ee++)N=N.dbl();B.push(N)}return{step:p,points:B}},l.prototype._getNAFPoints=function(p){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var C=[this],B=(1<<p)-1,N=B===1?null:this.dbl(),le=1;le<B;le++)C[le]=C[le-1].add(N);return{wnd:p,points:C}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(p){for(var C=this,B=0;B<p;B++)C=C.dbl();return C},base$1}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var t=requireUtils$1(),e=requireBn(),n=requireInherits_browser(),i=requireBase$1(),s=t.assert;function a(p){i.call(this,"short",p),this.a=new e(p.a,16).toRed(this.red),this.b=new e(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}n(a,i),short=a,a.prototype._getEndomorphism=function(C){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var B,N;if(C.beta)B=new e(C.beta,16).toRed(this.red);else{var le=this._getEndoRoots(this.p);B=le[0].cmp(le[1])<0?le[0]:le[1],B=B.toRed(this.red)}if(C.lambda)N=new e(C.lambda,16);else{var Ee=this._getEndoRoots(this.n);this.g.mul(Ee[0]).x.cmp(this.g.x.redMul(B))===0?N=Ee[0]:(N=Ee[1],s(this.g.mul(N).x.cmp(this.g.x.redMul(B))===0))}var Ue;return C.basis?Ue=C.basis.map(function(ze){return{a:new e(ze.a,16),b:new e(ze.b,16)}}):Ue=this._getEndoBasis(N),{beta:B,lambda:N,basis:Ue}}},a.prototype._getEndoRoots=function(C){var B=C===this.p?this.red:e.mont(C),N=new e(2).toRed(B).redInvm(),le=N.redNeg(),Ee=new e(3).toRed(B).redNeg().redSqrt().redMul(N),Ue=le.redAdd(Ee).fromRed(),ze=le.redSub(Ee).fromRed();return[Ue,ze]},a.prototype._getEndoBasis=function(C){for(var B=this.n.ushrn(Math.floor(this.n.bitLength()/2)),N=C,le=this.n.clone(),Ee=new e(1),Ue=new e(0),ze=new e(0),Ze=new e(1),Qe,ct,wt,qt,nr,ir,or,ur=0,hr,fr;N.cmpn(0)!==0;){var ar=le.div(N);hr=le.sub(ar.mul(N)),fr=ze.sub(ar.mul(Ee));var Lt=Ze.sub(ar.mul(Ue));if(!wt&&hr.cmp(B)<0)Qe=or.neg(),ct=Ee,wt=hr.neg(),qt=fr;else if(wt&&++ur===2)break;or=hr,le=N,N=hr,ze=Ee,Ee=fr,Ze=Ue,Ue=Lt}nr=hr.neg(),ir=fr;var Vt=wt.sqr().add(qt.sqr()),tt=nr.sqr().add(ir.sqr());return tt.cmp(Vt)>=0&&(nr=Qe,ir=ct),wt.negative&&(wt=wt.neg(),qt=qt.neg()),nr.negative&&(nr=nr.neg(),ir=ir.neg()),[{a:wt,b:qt},{a:nr,b:ir}]},a.prototype._endoSplit=function(C){var B=this.endo.basis,N=B[0],le=B[1],Ee=le.b.mul(C).divRound(this.n),Ue=N.b.neg().mul(C).divRound(this.n),ze=Ee.mul(N.a),Ze=Ue.mul(le.a),Qe=Ee.mul(N.b),ct=Ue.mul(le.b),wt=C.sub(ze).sub(Ze),qt=Qe.add(ct).neg();return{k1:wt,k2:qt}},a.prototype.pointFromX=function(C,B){C=new e(C,16),C.red||(C=C.toRed(this.red));var N=C.redSqr().redMul(C).redIAdd(C.redMul(this.a)).redIAdd(this.b),le=N.redSqrt();if(le.redSqr().redSub(N).cmp(this.zero)!==0)throw new Error("invalid point");var Ee=le.fromRed().isOdd();return(B&&!Ee||!B&&Ee)&&(le=le.redNeg()),this.point(C,le)},a.prototype.validate=function(C){if(C.inf)return!0;var B=C.x,N=C.y,le=this.a.redMul(B),Ee=B.redSqr().redMul(B).redIAdd(le).redIAdd(this.b);return N.redSqr().redISub(Ee).cmpn(0)===0},a.prototype._endoWnafMulAdd=function(C,B,N){for(var le=this._endoWnafT1,Ee=this._endoWnafT2,Ue=0;Ue<C.length;Ue++){var ze=this._endoSplit(B[Ue]),Ze=C[Ue],Qe=Ze._getBeta();ze.k1.negative&&(ze.k1.ineg(),Ze=Ze.neg(!0)),ze.k2.negative&&(ze.k2.ineg(),Qe=Qe.neg(!0)),le[Ue*2]=Ze,le[Ue*2+1]=Qe,Ee[Ue*2]=ze.k1,Ee[Ue*2+1]=ze.k2}for(var ct=this._wnafMulAdd(1,le,Ee,Ue*2,N),wt=0;wt<Ue*2;wt++)le[wt]=null,Ee[wt]=null;return ct};function l(p,C,B,N){i.BasePoint.call(this,p,"affine"),C===null&&B===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(C,16),this.y=new e(B,16),N&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}n(l,i.BasePoint),a.prototype.point=function(C,B,N){return new l(this,C,B,N)},a.prototype.pointFromJSON=function(C,B){return l.fromJSON(this,C,B)},l.prototype._getBeta=function(){if(this.curve.endo){var C=this.precomputed;if(C&&C.beta)return C.beta;var B=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(C){var N=this.curve,le=function(Ee){return N.point(Ee.x.redMul(N.endo.beta),Ee.y)};C.beta=B,B.precomputed={beta:null,naf:C.naf&&{wnd:C.naf.wnd,points:C.naf.points.map(le)},doubles:C.doubles&&{step:C.doubles.step,points:C.doubles.points.map(le)}}}return B}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(C,B,N){typeof B=="string"&&(B=JSON.parse(B));var le=C.point(B[0],B[1],N);if(!B[2])return le;function Ee(ze){return C.point(ze[0],ze[1],N)}var Ue=B[2];return le.precomputed={beta:null,doubles:Ue.doubles&&{step:Ue.doubles.step,points:[le].concat(Ue.doubles.points.map(Ee))},naf:Ue.naf&&{wnd:Ue.naf.wnd,points:[le].concat(Ue.naf.points.map(Ee))}},le},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(C){if(this.inf)return C;if(C.inf)return this;if(this.eq(C))return this.dbl();if(this.neg().eq(C))return this.curve.point(null,null);if(this.x.cmp(C.x)===0)return this.curve.point(null,null);var B=this.y.redSub(C.y);B.cmpn(0)!==0&&(B=B.redMul(this.x.redSub(C.x).redInvm()));var N=B.redSqr().redISub(this.x).redISub(C.x),le=B.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,le)},l.prototype.dbl=function(){if(this.inf)return this;var C=this.y.redAdd(this.y);if(C.cmpn(0)===0)return this.curve.point(null,null);var B=this.curve.a,N=this.x.redSqr(),le=C.redInvm(),Ee=N.redAdd(N).redIAdd(N).redIAdd(B).redMul(le),Ue=Ee.redSqr().redISub(this.x.redAdd(this.x)),ze=Ee.redMul(this.x.redSub(Ue)).redISub(this.y);return this.curve.point(Ue,ze)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(C){return C=new e(C,16),this.isInfinity()?this:this._hasDoubles(C)?this.curve._fixedNafMul(this,C):this.curve.endo?this.curve._endoWnafMulAdd([this],[C]):this.curve._wnafMul(this,C)},l.prototype.mulAdd=function(C,B,N){var le=[this,B],Ee=[C,N];return this.curve.endo?this.curve._endoWnafMulAdd(le,Ee):this.curve._wnafMulAdd(1,le,Ee,2)},l.prototype.jmulAdd=function(C,B,N){var le=[this,B],Ee=[C,N];return this.curve.endo?this.curve._endoWnafMulAdd(le,Ee,!0):this.curve._wnafMulAdd(1,le,Ee,2,!0)},l.prototype.eq=function(C){return this===C||this.inf===C.inf&&(this.inf||this.x.cmp(C.x)===0&&this.y.cmp(C.y)===0)},l.prototype.neg=function(C){if(this.inf)return this;var B=this.curve.point(this.x,this.y.redNeg());if(C&&this.precomputed){var N=this.precomputed,le=function(Ee){return Ee.neg()};B.precomputed={naf:N.naf&&{wnd:N.naf.wnd,points:N.naf.points.map(le)},doubles:N.doubles&&{step:N.doubles.step,points:N.doubles.points.map(le)}}}return B},l.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var C=this.curve.jpoint(this.x,this.y,this.curve.one);return C};function f(p,C,B,N){i.BasePoint.call(this,p,"jacobian"),C===null&&B===null&&N===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(C,16),this.y=new e(B,16),this.z=new e(N,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return n(f,i.BasePoint),a.prototype.jpoint=function(C,B,N){return new f(this,C,B,N)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var C=this.z.redInvm(),B=C.redSqr(),N=this.x.redMul(B),le=this.y.redMul(B).redMul(C);return this.curve.point(N,le)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(C){if(this.isInfinity())return C;if(C.isInfinity())return this;var B=C.z.redSqr(),N=this.z.redSqr(),le=this.x.redMul(B),Ee=C.x.redMul(N),Ue=this.y.redMul(B.redMul(C.z)),ze=C.y.redMul(N.redMul(this.z)),Ze=le.redSub(Ee),Qe=Ue.redSub(ze);if(Ze.cmpn(0)===0)return Qe.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var ct=Ze.redSqr(),wt=ct.redMul(Ze),qt=le.redMul(ct),nr=Qe.redSqr().redIAdd(wt).redISub(qt).redISub(qt),ir=Qe.redMul(qt.redISub(nr)).redISub(Ue.redMul(wt)),or=this.z.redMul(C.z).redMul(Ze);return this.curve.jpoint(nr,ir,or)},f.prototype.mixedAdd=function(C){if(this.isInfinity())return C.toJ();if(C.isInfinity())return this;var B=this.z.redSqr(),N=this.x,le=C.x.redMul(B),Ee=this.y,Ue=C.y.redMul(B).redMul(this.z),ze=N.redSub(le),Ze=Ee.redSub(Ue);if(ze.cmpn(0)===0)return Ze.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Qe=ze.redSqr(),ct=Qe.redMul(ze),wt=N.redMul(Qe),qt=Ze.redSqr().redIAdd(ct).redISub(wt).redISub(wt),nr=Ze.redMul(wt.redISub(qt)).redISub(Ee.redMul(ct)),ir=this.z.redMul(ze);return this.curve.jpoint(qt,nr,ir)},f.prototype.dblp=function(C){if(C===0)return this;if(this.isInfinity())return this;if(!C)return this.dbl();var B;if(this.curve.zeroA||this.curve.threeA){var N=this;for(B=0;B<C;B++)N=N.dbl();return N}var le=this.curve.a,Ee=this.curve.tinv,Ue=this.x,ze=this.y,Ze=this.z,Qe=Ze.redSqr().redSqr(),ct=ze.redAdd(ze);for(B=0;B<C;B++){var wt=Ue.redSqr(),qt=ct.redSqr(),nr=qt.redSqr(),ir=wt.redAdd(wt).redIAdd(wt).redIAdd(le.redMul(Qe)),or=Ue.redMul(qt),ur=ir.redSqr().redISub(or.redAdd(or)),hr=or.redISub(ur),fr=ir.redMul(hr);fr=fr.redIAdd(fr).redISub(nr);var ar=ct.redMul(Ze);B+1<C&&(Qe=Qe.redMul(nr)),Ue=ur,Ze=ar,ct=fr}return this.curve.jpoint(Ue,ct.redMul(Ee),Ze)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var C,B,N;if(this.zOne){var le=this.x.redSqr(),Ee=this.y.redSqr(),Ue=Ee.redSqr(),ze=this.x.redAdd(Ee).redSqr().redISub(le).redISub(Ue);ze=ze.redIAdd(ze);var Ze=le.redAdd(le).redIAdd(le),Qe=Ze.redSqr().redISub(ze).redISub(ze),ct=Ue.redIAdd(Ue);ct=ct.redIAdd(ct),ct=ct.redIAdd(ct),C=Qe,B=Ze.redMul(ze.redISub(Qe)).redISub(ct),N=this.y.redAdd(this.y)}else{var wt=this.x.redSqr(),qt=this.y.redSqr(),nr=qt.redSqr(),ir=this.x.redAdd(qt).redSqr().redISub(wt).redISub(nr);ir=ir.redIAdd(ir);var or=wt.redAdd(wt).redIAdd(wt),ur=or.redSqr(),hr=nr.redIAdd(nr);hr=hr.redIAdd(hr),hr=hr.redIAdd(hr),C=ur.redISub(ir).redISub(ir),B=or.redMul(ir.redISub(C)).redISub(hr),N=this.y.redMul(this.z),N=N.redIAdd(N)}return this.curve.jpoint(C,B,N)},f.prototype._threeDbl=function(){var C,B,N;if(this.zOne){var le=this.x.redSqr(),Ee=this.y.redSqr(),Ue=Ee.redSqr(),ze=this.x.redAdd(Ee).redSqr().redISub(le).redISub(Ue);ze=ze.redIAdd(ze);var Ze=le.redAdd(le).redIAdd(le).redIAdd(this.curve.a),Qe=Ze.redSqr().redISub(ze).redISub(ze);C=Qe;var ct=Ue.redIAdd(Ue);ct=ct.redIAdd(ct),ct=ct.redIAdd(ct),B=Ze.redMul(ze.redISub(Qe)).redISub(ct),N=this.y.redAdd(this.y)}else{var wt=this.z.redSqr(),qt=this.y.redSqr(),nr=this.x.redMul(qt),ir=this.x.redSub(wt).redMul(this.x.redAdd(wt));ir=ir.redAdd(ir).redIAdd(ir);var or=nr.redIAdd(nr);or=or.redIAdd(or);var ur=or.redAdd(or);C=ir.redSqr().redISub(ur),N=this.y.redAdd(this.z).redSqr().redISub(qt).redISub(wt);var hr=qt.redSqr();hr=hr.redIAdd(hr),hr=hr.redIAdd(hr),hr=hr.redIAdd(hr),B=ir.redMul(or.redISub(C)).redISub(hr)}return this.curve.jpoint(C,B,N)},f.prototype._dbl=function(){var C=this.curve.a,B=this.x,N=this.y,le=this.z,Ee=le.redSqr().redSqr(),Ue=B.redSqr(),ze=N.redSqr(),Ze=Ue.redAdd(Ue).redIAdd(Ue).redIAdd(C.redMul(Ee)),Qe=B.redAdd(B);Qe=Qe.redIAdd(Qe);var ct=Qe.redMul(ze),wt=Ze.redSqr().redISub(ct.redAdd(ct)),qt=ct.redISub(wt),nr=ze.redSqr();nr=nr.redIAdd(nr),nr=nr.redIAdd(nr),nr=nr.redIAdd(nr);var ir=Ze.redMul(qt).redISub(nr),or=N.redAdd(N).redMul(le);return this.curve.jpoint(wt,ir,or)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var C=this.x.redSqr(),B=this.y.redSqr(),N=this.z.redSqr(),le=B.redSqr(),Ee=C.redAdd(C).redIAdd(C),Ue=Ee.redSqr(),ze=this.x.redAdd(B).redSqr().redISub(C).redISub(le);ze=ze.redIAdd(ze),ze=ze.redAdd(ze).redIAdd(ze),ze=ze.redISub(Ue);var Ze=ze.redSqr(),Qe=le.redIAdd(le);Qe=Qe.redIAdd(Qe),Qe=Qe.redIAdd(Qe),Qe=Qe.redIAdd(Qe);var ct=Ee.redIAdd(ze).redSqr().redISub(Ue).redISub(Ze).redISub(Qe),wt=B.redMul(ct);wt=wt.redIAdd(wt),wt=wt.redIAdd(wt);var qt=this.x.redMul(Ze).redISub(wt);qt=qt.redIAdd(qt),qt=qt.redIAdd(qt);var nr=this.y.redMul(ct.redMul(Qe.redISub(ct)).redISub(ze.redMul(Ze)));nr=nr.redIAdd(nr),nr=nr.redIAdd(nr),nr=nr.redIAdd(nr);var ir=this.z.redAdd(ze).redSqr().redISub(N).redISub(Ze);return this.curve.jpoint(qt,nr,ir)},f.prototype.mul=function(C,B){return C=new e(C,B),this.curve._wnafMul(this,C)},f.prototype.eq=function(C){if(C.type==="affine")return this.eq(C.toJ());if(this===C)return!0;var B=this.z.redSqr(),N=C.z.redSqr();if(this.x.redMul(N).redISub(C.x.redMul(B)).cmpn(0)!==0)return!1;var le=B.redMul(this.z),Ee=N.redMul(C.z);return this.y.redMul(Ee).redISub(C.y.redMul(le)).cmpn(0)===0},f.prototype.eqXToP=function(C){var B=this.z.redSqr(),N=C.toRed(this.curve.red).redMul(B);if(this.x.cmp(N)===0)return!0;for(var le=C.clone(),Ee=this.curve.redN.redMul(B);;){if(le.iadd(this.curve.n),le.cmp(this.curve.p)>=0)return!1;if(N.redIAdd(Ee),this.x.cmp(N)===0)return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var t=requireBn(),e=requireInherits_browser(),n=requireBase$1(),i=requireUtils$1();function s(l){n.call(this,"mont",l),this.a=new t(l.a,16).toRed(this.red),this.b=new t(l.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(s,n),mont=s,s.prototype.validate=function(f){var p=f.normalize().x,C=p.redSqr(),B=C.redMul(p).redAdd(C.redMul(this.a)).redAdd(p),N=B.redSqrt();return N.redSqr().cmp(B)===0};function a(l,f,p){n.BasePoint.call(this,l,"projective"),f===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(f,16),this.z=new t(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(a,n.BasePoint),s.prototype.decodePoint=function(f,p){return this.point(i.toArray(f,p),1)},s.prototype.point=function(f,p){return new a(this,f,p)},s.prototype.pointFromJSON=function(f){return a.fromJSON(this,f)},a.prototype.precompute=function(){},a.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},a.fromJSON=function(f,p){return new a(f,p[0],p[1]||f.one)},a.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},a.prototype.isInfinity=function(){return this.z.cmpn(0)===0},a.prototype.dbl=function(){var f=this.x.redAdd(this.z),p=f.redSqr(),C=this.x.redSub(this.z),B=C.redSqr(),N=p.redSub(B),le=p.redMul(B),Ee=N.redMul(B.redAdd(this.curve.a24.redMul(N)));return this.curve.point(le,Ee)},a.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.diffAdd=function(f,p){var C=this.x.redAdd(this.z),B=this.x.redSub(this.z),N=f.x.redAdd(f.z),le=f.x.redSub(f.z),Ee=le.redMul(C),Ue=N.redMul(B),ze=p.z.redMul(Ee.redAdd(Ue).redSqr()),Ze=p.x.redMul(Ee.redISub(Ue).redSqr());return this.curve.point(ze,Ze)},a.prototype.mul=function(f){for(var p=f.clone(),C=this,B=this.curve.point(null,null),N=this,le=[];p.cmpn(0)!==0;p.iushrn(1))le.push(p.andln(1));for(var Ee=le.length-1;Ee>=0;Ee--)le[Ee]===0?(C=C.diffAdd(B,N),B=B.dbl()):(B=C.diffAdd(B,N),C=C.dbl());return B},a.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},a.prototype.eq=function(f){return this.getX().cmp(f.getX())===0},a.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},a.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var t=requireUtils$1(),e=requireBn(),n=requireInherits_browser(),i=requireBase$1(),s=t.assert;function a(f){this.twisted=(f.a|0)!==1,this.mOneA=this.twisted&&(f.a|0)===-1,this.extended=this.mOneA,i.call(this,"edwards",f),this.a=new e(f.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(f.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(f.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(f.c|0)===1}n(a,i),edwards=a,a.prototype._mulA=function(p){return this.mOneA?p.redNeg():this.a.redMul(p)},a.prototype._mulC=function(p){return this.oneC?p:this.c.redMul(p)},a.prototype.jpoint=function(p,C,B,N){return this.point(p,C,B,N)},a.prototype.pointFromX=function(p,C){p=new e(p,16),p.red||(p=p.toRed(this.red));var B=p.redSqr(),N=this.c2.redSub(this.a.redMul(B)),le=this.one.redSub(this.c2.redMul(this.d).redMul(B)),Ee=N.redMul(le.redInvm()),Ue=Ee.redSqrt();if(Ue.redSqr().redSub(Ee).cmp(this.zero)!==0)throw new Error("invalid point");var ze=Ue.fromRed().isOdd();return(C&&!ze||!C&&ze)&&(Ue=Ue.redNeg()),this.point(p,Ue)},a.prototype.pointFromY=function(p,C){p=new e(p,16),p.red||(p=p.toRed(this.red));var B=p.redSqr(),N=B.redSub(this.c2),le=B.redMul(this.d).redMul(this.c2).redSub(this.a),Ee=N.redMul(le.redInvm());if(Ee.cmp(this.zero)===0){if(C)throw new Error("invalid point");return this.point(this.zero,p)}var Ue=Ee.redSqrt();if(Ue.redSqr().redSub(Ee).cmp(this.zero)!==0)throw new Error("invalid point");return Ue.fromRed().isOdd()!==C&&(Ue=Ue.redNeg()),this.point(Ue,p)},a.prototype.validate=function(p){if(p.isInfinity())return!0;p.normalize();var C=p.x.redSqr(),B=p.y.redSqr(),N=C.redMul(this.a).redAdd(B),le=this.c2.redMul(this.one.redAdd(this.d.redMul(C).redMul(B)));return N.cmp(le)===0};function l(f,p,C,B,N){i.BasePoint.call(this,f,"projective"),p===null&&C===null&&B===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(p,16),this.y=new e(C,16),this.z=B?new e(B,16):this.curve.one,this.t=N&&new e(N,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return n(l,i.BasePoint),a.prototype.pointFromJSON=function(p){return l.fromJSON(this,p)},a.prototype.point=function(p,C,B,N){return new l(this,p,C,B,N)},l.fromJSON=function(p,C){return new l(p,C[0],C[1],C[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},l.prototype._extDbl=function(){var p=this.x.redSqr(),C=this.y.redSqr(),B=this.z.redSqr();B=B.redIAdd(B);var N=this.curve._mulA(p),le=this.x.redAdd(this.y).redSqr().redISub(p).redISub(C),Ee=N.redAdd(C),Ue=Ee.redSub(B),ze=N.redSub(C),Ze=le.redMul(Ue),Qe=Ee.redMul(ze),ct=le.redMul(ze),wt=Ue.redMul(Ee);return this.curve.point(Ze,Qe,wt,ct)},l.prototype._projDbl=function(){var p=this.x.redAdd(this.y).redSqr(),C=this.x.redSqr(),B=this.y.redSqr(),N,le,Ee,Ue,ze,Ze;if(this.curve.twisted){Ue=this.curve._mulA(C);var Qe=Ue.redAdd(B);this.zOne?(N=p.redSub(C).redSub(B).redMul(Qe.redSub(this.curve.two)),le=Qe.redMul(Ue.redSub(B)),Ee=Qe.redSqr().redSub(Qe).redSub(Qe)):(ze=this.z.redSqr(),Ze=Qe.redSub(ze).redISub(ze),N=p.redSub(C).redISub(B).redMul(Ze),le=Qe.redMul(Ue.redSub(B)),Ee=Qe.redMul(Ze))}else Ue=C.redAdd(B),ze=this.curve._mulC(this.z).redSqr(),Ze=Ue.redSub(ze).redSub(ze),N=this.curve._mulC(p.redISub(Ue)).redMul(Ze),le=this.curve._mulC(Ue).redMul(C.redISub(B)),Ee=Ue.redMul(Ze);return this.curve.point(N,le,Ee)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(p){var C=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),B=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),N=this.t.redMul(this.curve.dd).redMul(p.t),le=this.z.redMul(p.z.redAdd(p.z)),Ee=B.redSub(C),Ue=le.redSub(N),ze=le.redAdd(N),Ze=B.redAdd(C),Qe=Ee.redMul(Ue),ct=ze.redMul(Ze),wt=Ee.redMul(Ze),qt=Ue.redMul(ze);return this.curve.point(Qe,ct,qt,wt)},l.prototype._projAdd=function(p){var C=this.z.redMul(p.z),B=C.redSqr(),N=this.x.redMul(p.x),le=this.y.redMul(p.y),Ee=this.curve.d.redMul(N).redMul(le),Ue=B.redSub(Ee),ze=B.redAdd(Ee),Ze=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(N).redISub(le),Qe=C.redMul(Ue).redMul(Ze),ct,wt;return this.curve.twisted?(ct=C.redMul(ze).redMul(le.redSub(this.curve._mulA(N))),wt=Ue.redMul(ze)):(ct=C.redMul(ze).redMul(le.redSub(N)),wt=this.curve._mulC(Ue).redMul(ze)),this.curve.point(Qe,ct,wt)},l.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},l.prototype.mul=function(p){return this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve._wnafMul(this,p)},l.prototype.mulAdd=function(p,C,B){return this.curve._wnafMulAdd(1,[this,C],[p,B],2,!1)},l.prototype.jmulAdd=function(p,C,B){return this.curve._wnafMulAdd(1,[this,C],[p,B],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var p=this.z.redInvm();return this.x=this.x.redMul(p),this.y=this.y.redMul(p),this.t&&(this.t=this.t.redMul(p)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(p){return this===p||this.getX().cmp(p.getX())===0&&this.getY().cmp(p.getY())===0},l.prototype.eqXToP=function(p){var C=p.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(C)===0)return!0;for(var B=p.clone(),N=this.curve.redN.redMul(this.z);;){if(B.iadd(this.curve.n),B.cmp(this.curve.p)>=0)return!1;if(C.redIAdd(N),this.x.cmp(C)===0)return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(t){var e=t;e.base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;var t=requireMinimalisticAssert(),e=requireInherits_browser();utils.inherits=e;function n(Lt,Vt){return(Lt.charCodeAt(Vt)&64512)!==55296||Vt<0||Vt+1>=Lt.length?!1:(Lt.charCodeAt(Vt+1)&64512)===56320}function i(Lt,Vt){if(Array.isArray(Lt))return Lt.slice();if(!Lt)return[];var tt=[];if(typeof Lt=="string")if(Vt){if(Vt==="hex")for(Lt=Lt.replace(/[^a-z0-9]+/ig,""),Lt.length%2!==0&&(Lt="0"+Lt),ot=0;ot<Lt.length;ot+=2)tt.push(parseInt(Lt[ot]+Lt[ot+1],16))}else for(var Ye=0,ot=0;ot<Lt.length;ot++){var Et=Lt.charCodeAt(ot);Et<128?tt[Ye++]=Et:Et<2048?(tt[Ye++]=Et>>6|192,tt[Ye++]=Et&63|128):n(Lt,ot)?(Et=65536+((Et&1023)<<10)+(Lt.charCodeAt(++ot)&1023),tt[Ye++]=Et>>18|240,tt[Ye++]=Et>>12&63|128,tt[Ye++]=Et>>6&63|128,tt[Ye++]=Et&63|128):(tt[Ye++]=Et>>12|224,tt[Ye++]=Et>>6&63|128,tt[Ye++]=Et&63|128)}else for(ot=0;ot<Lt.length;ot++)tt[ot]=Lt[ot]|0;return tt}utils.toArray=i;function s(Lt){for(var Vt="",tt=0;tt<Lt.length;tt++)Vt+=f(Lt[tt].toString(16));return Vt}utils.toHex=s;function a(Lt){var Vt=Lt>>>24|Lt>>>8&65280|Lt<<8&16711680|(Lt&255)<<24;return Vt>>>0}utils.htonl=a;function l(Lt,Vt){for(var tt="",Ye=0;Ye<Lt.length;Ye++){var ot=Lt[Ye];Vt==="little"&&(ot=a(ot)),tt+=p(ot.toString(16))}return tt}utils.toHex32=l;function f(Lt){return Lt.length===1?"0"+Lt:Lt}utils.zero2=f;function p(Lt){return Lt.length===7?"0"+Lt:Lt.length===6?"00"+Lt:Lt.length===5?"000"+Lt:Lt.length===4?"0000"+Lt:Lt.length===3?"00000"+Lt:Lt.length===2?"000000"+Lt:Lt.length===1?"0000000"+Lt:Lt}utils.zero8=p;function C(Lt,Vt,tt,Ye){var ot=tt-Vt;t(ot%4===0);for(var Et=new Array(ot/4),er=0,rr=Vt;er<Et.length;er++,rr+=4){var yt;Ye==="big"?yt=Lt[rr]<<24|Lt[rr+1]<<16|Lt[rr+2]<<8|Lt[rr+3]:yt=Lt[rr+3]<<24|Lt[rr+2]<<16|Lt[rr+1]<<8|Lt[rr],Et[er]=yt>>>0}return Et}utils.join32=C;function B(Lt,Vt){for(var tt=new Array(Lt.length*4),Ye=0,ot=0;Ye<Lt.length;Ye++,ot+=4){var Et=Lt[Ye];Vt==="big"?(tt[ot]=Et>>>24,tt[ot+1]=Et>>>16&255,tt[ot+2]=Et>>>8&255,tt[ot+3]=Et&255):(tt[ot+3]=Et>>>24,tt[ot+2]=Et>>>16&255,tt[ot+1]=Et>>>8&255,tt[ot]=Et&255)}return tt}utils.split32=B;function N(Lt,Vt){return Lt>>>Vt|Lt<<32-Vt}utils.rotr32=N;function le(Lt,Vt){return Lt<<Vt|Lt>>>32-Vt}utils.rotl32=le;function Ee(Lt,Vt){return Lt+Vt>>>0}utils.sum32=Ee;function Ue(Lt,Vt,tt){return Lt+Vt+tt>>>0}utils.sum32_3=Ue;function ze(Lt,Vt,tt,Ye){return Lt+Vt+tt+Ye>>>0}utils.sum32_4=ze;function Ze(Lt,Vt,tt,Ye,ot){return Lt+Vt+tt+Ye+ot>>>0}utils.sum32_5=Ze;function Qe(Lt,Vt,tt,Ye){var ot=Lt[Vt],Et=Lt[Vt+1],er=Ye+Et>>>0,rr=(er<Ye?1:0)+tt+ot;Lt[Vt]=rr>>>0,Lt[Vt+1]=er}utils.sum64=Qe;function ct(Lt,Vt,tt,Ye){var ot=Vt+Ye>>>0,Et=(ot<Vt?1:0)+Lt+tt;return Et>>>0}utils.sum64_hi=ct;function wt(Lt,Vt,tt,Ye){var ot=Vt+Ye;return ot>>>0}utils.sum64_lo=wt;function qt(Lt,Vt,tt,Ye,ot,Et,er,rr){var yt=0,tr=Vt;tr=tr+Ye>>>0,yt+=tr<Vt?1:0,tr=tr+Et>>>0,yt+=tr<Et?1:0,tr=tr+rr>>>0,yt+=tr<rr?1:0;var Ut=Lt+tt+ot+er+yt;return Ut>>>0}utils.sum64_4_hi=qt;function nr(Lt,Vt,tt,Ye,ot,Et,er,rr){var yt=Vt+Ye+Et+rr;return yt>>>0}utils.sum64_4_lo=nr;function ir(Lt,Vt,tt,Ye,ot,Et,er,rr,yt,tr){var Ut=0,Ft=Vt;Ft=Ft+Ye>>>0,Ut+=Ft<Vt?1:0,Ft=Ft+Et>>>0,Ut+=Ft<Et?1:0,Ft=Ft+rr>>>0,Ut+=Ft<rr?1:0,Ft=Ft+tr>>>0,Ut+=Ft<tr?1:0;var sr=Lt+tt+ot+er+yt+Ut;return sr>>>0}utils.sum64_5_hi=ir;function or(Lt,Vt,tt,Ye,ot,Et,er,rr,yt,tr){var Ut=Vt+Ye+Et+rr+tr;return Ut>>>0}utils.sum64_5_lo=or;function ur(Lt,Vt,tt){var Ye=Vt<<32-tt|Lt>>>tt;return Ye>>>0}utils.rotr64_hi=ur;function hr(Lt,Vt,tt){var Ye=Lt<<32-tt|Vt>>>tt;return Ye>>>0}utils.rotr64_lo=hr;function fr(Lt,Vt,tt){return Lt>>>tt}utils.shr64_hi=fr;function ar(Lt,Vt,tt){var Ye=Lt<<32-tt|Vt>>>tt;return Ye>>>0}return utils.shr64_lo=ar,utils}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var t=requireUtils(),e=requireMinimalisticAssert();function n(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=n,n.prototype.update=function(s,a){if(s=t.toArray(s,a),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var l=s.length%this._delta8;this.pending=s.slice(s.length-l,s.length),this.pending.length===0&&(this.pending=null),s=t.join32(s,0,s.length-l,this.endian);for(var f=0;f<s.length;f+=this._delta32)this._update(s,f,f+this._delta32)}return this},n.prototype.digest=function(s){return this.update(this._pad()),e(this.pending===null),this._digest(s)},n.prototype._pad=function(){var s=this.pendingTotal,a=this._delta8,l=a-(s+this.padLength)%a,f=new Array(l+this.padLength);f[0]=128;for(var p=1;p<l;p++)f[p]=0;if(s<<=3,this.endian==="big"){for(var C=8;C<this.padLength;C++)f[p++]=0;f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=s>>>24&255,f[p++]=s>>>16&255,f[p++]=s>>>8&255,f[p++]=s&255}else for(f[p++]=s&255,f[p++]=s>>>8&255,f[p++]=s>>>16&255,f[p++]=s>>>24&255,f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0,C=8;C<this.padLength;C++)f[p++]=0;return f},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var t=requireUtils(),e=t.rotr32;function n(B,N,le,Ee){if(B===0)return i(N,le,Ee);if(B===1||B===3)return a(N,le,Ee);if(B===2)return s(N,le,Ee)}common.ft_1=n;function i(B,N,le){return B&N^~B&le}common.ch32=i;function s(B,N,le){return B&N^B&le^N&le}common.maj32=s;function a(B,N,le){return B^N^le}common.p32=a;function l(B){return e(B,2)^e(B,13)^e(B,22)}common.s0_256=l;function f(B){return e(B,6)^e(B,11)^e(B,25)}common.s1_256=f;function p(B){return e(B,7)^e(B,18)^B>>>3}common.g0_256=p;function C(B){return e(B,17)^e(B,19)^B>>>10}return common.g1_256=C,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var t=requireUtils(),e=requireCommon$1(),n=requireCommon(),i=t.rotl32,s=t.sum32,a=t.sum32_5,l=n.ft_1,f=e.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function C(){if(!(this instanceof C))return new C;f.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(C,f),_1=C,C.blockSize=512,C.outSize=160,C.hmacStrength=80,C.padLength=64,C.prototype._update=function(N,le){for(var Ee=this.W,Ue=0;Ue<16;Ue++)Ee[Ue]=N[le+Ue];for(;Ue<Ee.length;Ue++)Ee[Ue]=i(Ee[Ue-3]^Ee[Ue-8]^Ee[Ue-14]^Ee[Ue-16],1);var ze=this.h[0],Ze=this.h[1],Qe=this.h[2],ct=this.h[3],wt=this.h[4];for(Ue=0;Ue<Ee.length;Ue++){var qt=~~(Ue/20),nr=a(i(ze,5),l(qt,Ze,Qe,ct),wt,Ee[Ue],p[qt]);wt=ct,ct=Qe,Qe=i(Ze,30),Ze=ze,ze=nr}this.h[0]=s(this.h[0],ze),this.h[1]=s(this.h[1],Ze),this.h[2]=s(this.h[2],Qe),this.h[3]=s(this.h[3],ct),this.h[4]=s(this.h[4],wt)},C.prototype._digest=function(N){return N==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var t=requireUtils(),e=requireCommon$1(),n=requireCommon(),i=requireMinimalisticAssert(),s=t.sum32,a=t.sum32_4,l=t.sum32_5,f=n.ch32,p=n.maj32,C=n.s0_256,B=n.s1_256,N=n.g0_256,le=n.g1_256,Ee=e.BlockHash,Ue=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ze(){if(!(this instanceof ze))return new ze;Ee.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Ue,this.W=new Array(64)}return t.inherits(ze,Ee),_256=ze,ze.blockSize=512,ze.outSize=256,ze.hmacStrength=192,ze.padLength=64,ze.prototype._update=function(Qe,ct){for(var wt=this.W,qt=0;qt<16;qt++)wt[qt]=Qe[ct+qt];for(;qt<wt.length;qt++)wt[qt]=a(le(wt[qt-2]),wt[qt-7],N(wt[qt-15]),wt[qt-16]);var nr=this.h[0],ir=this.h[1],or=this.h[2],ur=this.h[3],hr=this.h[4],fr=this.h[5],ar=this.h[6],Lt=this.h[7];for(i(this.k.length===wt.length),qt=0;qt<wt.length;qt++){var Vt=l(Lt,B(hr),f(hr,fr,ar),this.k[qt],wt[qt]),tt=s(C(nr),p(nr,ir,or));Lt=ar,ar=fr,fr=hr,hr=s(ur,Vt),ur=or,or=ir,ir=nr,nr=s(Vt,tt)}this.h[0]=s(this.h[0],nr),this.h[1]=s(this.h[1],ir),this.h[2]=s(this.h[2],or),this.h[3]=s(this.h[3],ur),this.h[4]=s(this.h[4],hr),this.h[5]=s(this.h[5],fr),this.h[6]=s(this.h[6],ar),this.h[7]=s(this.h[7],Lt)},ze.prototype._digest=function(Qe){return Qe==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var t=requireUtils(),e=require_256();function n(){if(!(this instanceof n))return new n;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(n,e),_224=n,n.blockSize=512,n.outSize=224,n.hmacStrength=192,n.padLength=64,n.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var t=requireUtils(),e=requireCommon$1(),n=requireMinimalisticAssert(),i=t.rotr64_hi,s=t.rotr64_lo,a=t.shr64_hi,l=t.shr64_lo,f=t.sum64,p=t.sum64_hi,C=t.sum64_lo,B=t.sum64_4_hi,N=t.sum64_4_lo,le=t.sum64_5_hi,Ee=t.sum64_5_lo,Ue=e.BlockHash,ze=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ze(){if(!(this instanceof Ze))return new Ze;Ue.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=ze,this.W=new Array(160)}t.inherits(Ze,Ue),_512=Ze,Ze.blockSize=1024,Ze.outSize=512,Ze.hmacStrength=192,Ze.padLength=128,Ze.prototype._prepareBlock=function(tt,Ye){for(var ot=this.W,Et=0;Et<32;Et++)ot[Et]=tt[Ye+Et];for(;Et<ot.length;Et+=2){var er=ar(ot[Et-4],ot[Et-3]),rr=Lt(ot[Et-4],ot[Et-3]),yt=ot[Et-14],tr=ot[Et-13],Ut=hr(ot[Et-30],ot[Et-29]),Ft=fr(ot[Et-30],ot[Et-29]),sr=ot[Et-32],vr=ot[Et-31];ot[Et]=B(er,rr,yt,tr,Ut,Ft,sr,vr),ot[Et+1]=N(er,rr,yt,tr,Ut,Ft,sr,vr)}},Ze.prototype._update=function(tt,Ye){this._prepareBlock(tt,Ye);var ot=this.W,Et=this.h[0],er=this.h[1],rr=this.h[2],yt=this.h[3],tr=this.h[4],Ut=this.h[5],Ft=this.h[6],sr=this.h[7],vr=this.h[8],_r=this.h[9],dr=this.h[10],gr=this.h[11],$r=this.h[12],pr=this.h[13],lr=this.h[14],cr=this.h[15];n(this.k.length===ot.length);for(var yr=0;yr<ot.length;yr+=2){var Sr=lr,Ar=cr,Tr=or(vr,_r),xr=ur(vr,_r),Cr=Qe(vr,_r,dr,gr,$r),wr=ct(vr,_r,dr,gr,$r,pr),Er=this.k[yr],kr=this.k[yr+1],Br=ot[yr],Rr=ot[yr+1],Ir=le(Sr,Ar,Tr,xr,Cr,wr,Er,kr,Br,Rr),Dr=Ee(Sr,Ar,Tr,xr,Cr,wr,Er,kr,Br,Rr);Sr=nr(Et,er),Ar=ir(Et,er),Tr=wt(Et,er,rr,yt,tr),xr=qt(Et,er,rr,yt,tr,Ut);var zr=p(Sr,Ar,Tr,xr),jr=C(Sr,Ar,Tr,xr);lr=$r,cr=pr,$r=dr,pr=gr,dr=vr,gr=_r,vr=p(Ft,sr,Ir,Dr),_r=C(sr,sr,Ir,Dr),Ft=tr,sr=Ut,tr=rr,Ut=yt,rr=Et,yt=er,Et=p(Ir,Dr,zr,jr),er=C(Ir,Dr,zr,jr)}f(this.h,0,Et,er),f(this.h,2,rr,yt),f(this.h,4,tr,Ut),f(this.h,6,Ft,sr),f(this.h,8,vr,_r),f(this.h,10,dr,gr),f(this.h,12,$r,pr),f(this.h,14,lr,cr)},Ze.prototype._digest=function(tt){return tt==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function Qe(Vt,tt,Ye,ot,Et){var er=Vt&Ye^~Vt&Et;return er<0&&(er+=4294967296),er}function ct(Vt,tt,Ye,ot,Et,er){var rr=tt&ot^~tt&er;return rr<0&&(rr+=4294967296),rr}function wt(Vt,tt,Ye,ot,Et){var er=Vt&Ye^Vt&Et^Ye&Et;return er<0&&(er+=4294967296),er}function qt(Vt,tt,Ye,ot,Et,er){var rr=tt&ot^tt&er^ot&er;return rr<0&&(rr+=4294967296),rr}function nr(Vt,tt){var Ye=i(Vt,tt,28),ot=i(tt,Vt,2),Et=i(tt,Vt,7),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function ir(Vt,tt){var Ye=s(Vt,tt,28),ot=s(tt,Vt,2),Et=s(tt,Vt,7),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function or(Vt,tt){var Ye=i(Vt,tt,14),ot=i(Vt,tt,18),Et=i(tt,Vt,9),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function ur(Vt,tt){var Ye=s(Vt,tt,14),ot=s(Vt,tt,18),Et=s(tt,Vt,9),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function hr(Vt,tt){var Ye=i(Vt,tt,1),ot=i(Vt,tt,8),Et=a(Vt,tt,7),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function fr(Vt,tt){var Ye=s(Vt,tt,1),ot=s(Vt,tt,8),Et=l(Vt,tt,7),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function ar(Vt,tt){var Ye=i(Vt,tt,19),ot=i(tt,Vt,29),Et=a(Vt,tt,6),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}function Lt(Vt,tt){var Ye=s(Vt,tt,19),ot=s(tt,Vt,29),Et=l(Vt,tt,6),er=Ye^ot^Et;return er<0&&(er+=4294967296),er}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var t=requireUtils(),e=require_512();function n(){if(!(this instanceof n))return new n;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(n,e),_384=n,n.blockSize=1024,n.outSize=384,n.hmacStrength=192,n.padLength=128,n.prototype._digest=function(s){return s==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var t=requireUtils(),e=requireCommon$1(),n=t.rotl32,i=t.sum32,s=t.sum32_3,a=t.sum32_4,l=e.BlockHash;function f(){if(!(this instanceof f))return new f;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(f,l),ripemd.ripemd160=f,f.blockSize=512,f.outSize=160,f.hmacStrength=192,f.padLength=64,f.prototype._update=function(Ze,Qe){for(var ct=this.h[0],wt=this.h[1],qt=this.h[2],nr=this.h[3],ir=this.h[4],or=ct,ur=wt,hr=qt,fr=nr,ar=ir,Lt=0;Lt<80;Lt++){var Vt=i(n(a(ct,p(Lt,wt,qt,nr),Ze[N[Lt]+Qe],C(Lt)),Ee[Lt]),ir);ct=ir,ir=nr,nr=n(qt,10),qt=wt,wt=Vt,Vt=i(n(a(or,p(79-Lt,ur,hr,fr),Ze[le[Lt]+Qe],B(Lt)),Ue[Lt]),ar),or=ar,ar=fr,fr=n(hr,10),hr=ur,ur=Vt}Vt=s(this.h[1],qt,fr),this.h[1]=s(this.h[2],nr,ar),this.h[2]=s(this.h[3],ir,or),this.h[3]=s(this.h[4],ct,ur),this.h[4]=s(this.h[0],wt,hr),this.h[0]=Vt},f.prototype._digest=function(Ze){return Ze==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function p(ze,Ze,Qe,ct){return ze<=15?Ze^Qe^ct:ze<=31?Ze&Qe|~Ze&ct:ze<=47?(Ze|~Qe)^ct:ze<=63?Ze&ct|Qe&~ct:Ze^(Qe|~ct)}function C(ze){return ze<=15?0:ze<=31?1518500249:ze<=47?1859775393:ze<=63?2400959708:2840853838}function B(ze){return ze<=15?1352829926:ze<=31?1548603684:ze<=47?1836072691:ze<=63?2053994217:0}var N=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],le=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ee=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Ue=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac$1,hasRequiredHmac$1;function requireHmac$1(){if(hasRequiredHmac$1)return hmac$1;hasRequiredHmac$1=1;var t=requireUtils(),e=requireMinimalisticAssert();function n(i,s,a){if(!(this instanceof n))return new n(i,s,a);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(s,a))}return hmac$1=n,n.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),e(s.length<=this.blockSize);for(var a=s.length;a<this.blockSize;a++)s.push(0);for(a=0;a<s.length;a++)s[a]^=54;for(this.inner=new this.Hash().update(s),a=0;a<s.length;a++)s[a]^=106;this.outer=new this.Hash().update(s)},n.prototype.update=function(s,a){return this.inner.update(s,a),this},n.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)},hmac$1}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(t){var e=t;e.utils=requireUtils(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac$1(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(t){var e=t,n=requireHash(),i=requireCurve(),s=requireUtils$1(),a=s.assert;function l(C){C.type==="short"?this.curve=new i.short(C):C.type==="edwards"?this.curve=new i.edwards(C):this.curve=new i.mont(C),this.g=this.curve.g,this.n=this.curve.n,this.hash=C.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=l;function f(C,B){Object.defineProperty(e,C,{configurable:!0,enumerable:!0,get:function(){var N=new l(B);return Object.defineProperty(e,C,{configurable:!0,enumerable:!0,value:N}),N}})}f("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),f("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),f("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),f("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),f("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),f("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),f("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=requireSecp256k1()}catch{p=void 0}f("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var t=requireHash(),e=requireUtils$2(),n=requireMinimalisticAssert();function i(s){if(!(this instanceof i))return new i(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var a=e.toArray(s.entropy,s.entropyEnc||"hex"),l=e.toArray(s.nonce,s.nonceEnc||"hex"),f=e.toArray(s.pers,s.persEnc||"hex");n(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(a,l,f)}return hmacDrbg=i,i.prototype._init=function(a,l,f){var p=a.concat(l).concat(f);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var C=0;C<this.V.length;C++)this.K[C]=0,this.V[C]=1;this._update(p),this._reseed=1,this.reseedInterval=281474976710656},i.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},i.prototype._update=function(a){var l=this._hmac().update(this.V).update([0]);a&&(l=l.update(a)),this.K=l.digest(),this.V=this._hmac().update(this.V).digest(),a&&(this.K=this._hmac().update(this.V).update([1]).update(a).digest(),this.V=this._hmac().update(this.V).digest())},i.prototype.reseed=function(a,l,f,p){typeof l!="string"&&(p=f,f=l,l=null),a=e.toArray(a,l),f=e.toArray(f,p),n(a.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(a.concat(f||[])),this._reseed=1},i.prototype.generate=function(a,l,f,p){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof l!="string"&&(p=f,f=l,l=null),f&&(f=e.toArray(f,p||"hex"),this._update(f));for(var C=[];C.length<a;)this.V=this._hmac().update(this.V).digest(),C=C.concat(this.V);var B=C.slice(0,a);return this._update(f),this._reseed++,e.encode(B,l)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var t=requireBn(),e=requireUtils$1(),n=e.assert;function i(s,a){this.ec=s,this.priv=null,this.pub=null,a.priv&&this._importPrivate(a.priv,a.privEnc),a.pub&&this._importPublic(a.pub,a.pubEnc)}return key$1=i,i.fromPublic=function(a,l,f){return l instanceof i?l:new i(a,{pub:l,pubEnc:f})},i.fromPrivate=function(a,l,f){return l instanceof i?l:new i(a,{priv:l,privEnc:f})},i.prototype.validate=function(){var a=this.getPublic();return a.isInfinity()?{result:!1,reason:"Invalid public key"}:a.validate()?a.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(a,l){return typeof a=="string"&&(l=a,a=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),l?this.pub.encode(l,a):this.pub},i.prototype.getPrivate=function(a){return a==="hex"?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(a,l){this.priv=new t(a,l||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(a,l){if(a.x||a.y){this.ec.curve.type==="mont"?n(a.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&n(a.x&&a.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(a.x,a.y);return}this.pub=this.ec.curve.decodePoint(a,l)},i.prototype.derive=function(a){return a.validate()||n(a.validate(),"public point not validated"),a.mul(this.priv).getX()},i.prototype.sign=function(a,l,f){return this.ec.sign(a,this,l,f)},i.prototype.verify=function(a,l,f){return this.ec.verify(a,l,this,void 0,f)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var t=requireBn(),e=requireUtils$1(),n=e.assert;function i(p,C){if(p instanceof i)return p;this._importDER(p,C)||(n(p.r&&p.s,"Signature without r or s"),this.r=new t(p.r,16),this.s=new t(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}signature$1=i;function s(){this.place=0}function a(p,C){var B=p[C.place++];if(!(B&128))return B;var N=B&15;if(N===0||N>4||p[C.place]===0)return!1;for(var le=0,Ee=0,Ue=C.place;Ee<N;Ee++,Ue++)le<<=8,le|=p[Ue],le>>>=0;return le<=127?!1:(C.place=Ue,le)}function l(p){for(var C=0,B=p.length-1;!p[C]&&!(p[C+1]&128)&&C<B;)C++;return C===0?p:p.slice(C)}i.prototype._importDER=function(C,B){C=e.toArray(C,B);var N=new s;if(C[N.place++]!==48)return!1;var le=a(C,N);if(le===!1||le+N.place!==C.length||C[N.place++]!==2)return!1;var Ee=a(C,N);if(Ee===!1||C[N.place]&128)return!1;var Ue=C.slice(N.place,Ee+N.place);if(N.place+=Ee,C[N.place++]!==2)return!1;var ze=a(C,N);if(ze===!1||C.length!==ze+N.place||C[N.place]&128)return!1;var Ze=C.slice(N.place,ze+N.place);if(Ue[0]===0)if(Ue[1]&128)Ue=Ue.slice(1);else return!1;if(Ze[0]===0)if(Ze[1]&128)Ze=Ze.slice(1);else return!1;return this.r=new t(Ue),this.s=new t(Ze),this.recoveryParam=null,!0};function f(p,C){if(C<128){p.push(C);return}var B=1+(Math.log(C)/Math.LN2>>>3);for(p.push(B|128);--B;)p.push(C>>>(B<<3)&255);p.push(C)}return i.prototype.toDER=function(C){var B=this.r.toArray(),N=this.s.toArray();for(B[0]&128&&(B=[0].concat(B)),N[0]&128&&(N=[0].concat(N)),B=l(B),N=l(N);!N[0]&&!(N[1]&128);)N=N.slice(1);var le=[2];f(le,B.length),le=le.concat(B),le.push(2),f(le,N.length);var Ee=le.concat(N),Ue=[48];return f(Ue,Ee.length),Ue=Ue.concat(Ee),e.encode(Ue,C)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var t=requireBn(),e=requireHmacDrbg(),n=requireUtils$1(),i=requireCurves(),s=requireBrorand(),a=n.assert,l=requireKey$1(),f=requireSignature$1();function p(C){if(!(this instanceof p))return new p(C);typeof C=="string"&&(a(Object.prototype.hasOwnProperty.call(i,C),"Unknown curve "+C),C=i[C]),C instanceof i.PresetCurve&&(C={curve:C}),this.curve=C.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=C.curve.g,this.g.precompute(C.curve.n.bitLength()+1),this.hash=C.hash||C.curve.hash}return ec=p,p.prototype.keyPair=function(B){return new l(this,B)},p.prototype.keyFromPrivate=function(B,N){return l.fromPrivate(this,B,N)},p.prototype.keyFromPublic=function(B,N){return l.fromPublic(this,B,N)},p.prototype.genKeyPair=function(B){B||(B={});for(var N=new e({hash:this.hash,pers:B.pers,persEnc:B.persEnc||"utf8",entropy:B.entropy||s(this.hash.hmacStrength),entropyEnc:B.entropy&&B.entropyEnc||"utf8",nonce:this.n.toArray()}),le=this.n.byteLength(),Ee=this.n.sub(new t(2));;){var Ue=new t(N.generate(le));if(!(Ue.cmp(Ee)>0))return Ue.iaddn(1),this.keyFromPrivate(Ue)}},p.prototype._truncateToN=function(B,N,le){var Ee;if(t.isBN(B)||typeof B=="number")B=new t(B,16),Ee=B.byteLength();else if(typeof B=="object")Ee=B.length,B=new t(B,16);else{var Ue=B.toString();Ee=Ue.length+1>>>1,B=new t(Ue,16)}typeof le!="number"&&(le=Ee*8);var ze=le-this.n.bitLength();return ze>0&&(B=B.ushrn(ze)),!N&&B.cmp(this.n)>=0?B.sub(this.n):B},p.prototype.sign=function(B,N,le,Ee){if(typeof le=="object"&&(Ee=le,le=null),Ee||(Ee={}),typeof B!="string"&&typeof B!="number"&&!t.isBN(B)){a(typeof B=="object"&&B&&typeof B.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),a(B.length>>>0===B.length);for(var Ue=0;Ue<B.length;Ue++)a((B[Ue]&255)===B[Ue])}N=this.keyFromPrivate(N,le),B=this._truncateToN(B,!1,Ee.msgBitLength),a(!B.isNeg(),"Can not sign a negative message");var ze=this.n.byteLength(),Ze=N.getPrivate().toArray("be",ze),Qe=B.toArray("be",ze);a(new t(Qe).eq(B),"Can not sign message");for(var ct=new e({hash:this.hash,entropy:Ze,nonce:Qe,pers:Ee.pers,persEnc:Ee.persEnc||"utf8"}),wt=this.n.sub(new t(1)),qt=0;;qt++){var nr=Ee.k?Ee.k(qt):new t(ct.generate(this.n.byteLength()));if(nr=this._truncateToN(nr,!0),!(nr.cmpn(1)<=0||nr.cmp(wt)>=0)){var ir=this.g.mul(nr);if(!ir.isInfinity()){var or=ir.getX(),ur=or.umod(this.n);if(ur.cmpn(0)!==0){var hr=nr.invm(this.n).mul(ur.mul(N.getPrivate()).iadd(B));if(hr=hr.umod(this.n),hr.cmpn(0)!==0){var fr=(ir.getY().isOdd()?1:0)|(or.cmp(ur)!==0?2:0);return Ee.canonical&&hr.cmp(this.nh)>0&&(hr=this.n.sub(hr),fr^=1),new f({r:ur,s:hr,recoveryParam:fr})}}}}}},p.prototype.verify=function(B,N,le,Ee,Ue){Ue||(Ue={}),B=this._truncateToN(B,!1,Ue.msgBitLength),le=this.keyFromPublic(le,Ee),N=new f(N,"hex");var ze=N.r,Ze=N.s;if(ze.cmpn(1)<0||ze.cmp(this.n)>=0||Ze.cmpn(1)<0||Ze.cmp(this.n)>=0)return!1;var Qe=Ze.invm(this.n),ct=Qe.mul(B).umod(this.n),wt=Qe.mul(ze).umod(this.n),qt;return this.curve._maxwellTrick?(qt=this.g.jmulAdd(ct,le.getPublic(),wt),qt.isInfinity()?!1:qt.eqXToP(ze)):(qt=this.g.mulAdd(ct,le.getPublic(),wt),qt.isInfinity()?!1:qt.getX().umod(this.n).cmp(ze)===0)},p.prototype.recoverPubKey=function(C,B,N,le){a((3&N)===N,"The recovery param is more than two bits"),B=new f(B,le);var Ee=this.n,Ue=new t(C),ze=B.r,Ze=B.s,Qe=N&1,ct=N>>1;if(ze.cmp(this.curve.p.umod(this.curve.n))>=0&&ct)throw new Error("Unable to find sencond key candinate");ct?ze=this.curve.pointFromX(ze.add(this.curve.n),Qe):ze=this.curve.pointFromX(ze,Qe);var wt=B.r.invm(Ee),qt=Ee.sub(Ue).mul(wt).umod(Ee),nr=Ze.mul(wt).umod(Ee);return this.g.mulAdd(qt,ze,nr)},p.prototype.getKeyRecoveryParam=function(C,B,N,le){if(B=new f(B,le),B.recoveryParam!==null)return B.recoveryParam;for(var Ee=0;Ee<4;Ee++){var Ue;try{Ue=this.recoverPubKey(C,B,Ee)}catch{continue}if(Ue.eq(N))return Ee}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var t=requireUtils$1(),e=t.assert,n=t.parseBytes,i=t.cachedProperty;function s(a,l){this.eddsa=a,this._secret=n(l.secret),a.isPoint(l.pub)?this._pub=l.pub:this._pubBytes=n(l.pub)}return s.fromPublic=function(l,f){return f instanceof s?f:new s(l,{pub:f})},s.fromSecret=function(l,f){return f instanceof s?f:new s(l,{secret:f})},s.prototype.secret=function(){return this._secret},i(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),i(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),i(s,"privBytes",function(){var l=this.eddsa,f=this.hash(),p=l.encodingLength-1,C=f.slice(0,l.encodingLength);return C[0]&=248,C[p]&=127,C[p]|=64,C}),i(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),i(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),i(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(l){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(l,this)},s.prototype.verify=function(l,f){return this.eddsa.verify(l,f,this)},s.prototype.getSecret=function(l){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),l)},s.prototype.getPublic=function(l){return t.encode(this.pubBytes(),l)},key=s,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var t=requireBn(),e=requireUtils$1(),n=e.assert,i=e.cachedProperty,s=e.parseBytes;function a(l,f){this.eddsa=l,typeof f!="object"&&(f=s(f)),Array.isArray(f)&&(n(f.length===l.encodingLength*2,"Signature has invalid size"),f={R:f.slice(0,l.encodingLength),S:f.slice(l.encodingLength)}),n(f.R&&f.S,"Signature without R or S"),l.isPoint(f.R)&&(this._R=f.R),f.S instanceof t&&(this._S=f.S),this._Rencoded=Array.isArray(f.R)?f.R:f.Rencoded,this._Sencoded=Array.isArray(f.S)?f.S:f.Sencoded}return i(a,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),i(a,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),i(a,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),i(a,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),a.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},a.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},signature=a,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var t=requireHash(),e=requireCurves(),n=requireUtils$1(),i=n.assert,s=n.parseBytes,a=requireKey(),l=requireSignature();function f(p){if(i(p==="ed25519","only tested with ed25519 so far"),!(this instanceof f))return new f(p);p=e[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=t.sha512}return eddsa=f,f.prototype.sign=function(C,B){C=s(C);var N=this.keyFromSecret(B),le=this.hashInt(N.messagePrefix(),C),Ee=this.g.mul(le),Ue=this.encodePoint(Ee),ze=this.hashInt(Ue,N.pubBytes(),C).mul(N.priv()),Ze=le.add(ze).umod(this.curve.n);return this.makeSignature({R:Ee,S:Ze,Rencoded:Ue})},f.prototype.verify=function(C,B,N){if(C=s(C),B=this.makeSignature(B),B.S().gte(B.eddsa.curve.n)||B.S().isNeg())return!1;var le=this.keyFromPublic(N),Ee=this.hashInt(B.Rencoded(),le.pubBytes(),C),Ue=this.g.mul(B.S()),ze=B.R().add(le.pub().mul(Ee));return ze.eq(Ue)},f.prototype.hashInt=function(){for(var C=this.hash(),B=0;B<arguments.length;B++)C.update(arguments[B]);return n.intFromLE(C.digest()).umod(this.curve.n)},f.prototype.keyFromPublic=function(C){return a.fromPublic(this,C)},f.prototype.keyFromSecret=function(C){return a.fromSecret(this,C)},f.prototype.makeSignature=function(C){return C instanceof l?C:new l(this,C)},f.prototype.encodePoint=function(C){var B=C.getY().toArray("le",this.encodingLength);return B[this.encodingLength-1]|=C.getX().isOdd()?128:0,B},f.prototype.decodePoint=function(C){C=n.parseBytes(C);var B=C.length-1,N=C.slice(0,B).concat(C[B]&-129),le=(C[B]&128)!==0,Ee=n.intFromLE(N);return this.curve.pointFromY(Ee,le)},f.prototype.encodeInt=function(C){return C.toArray("le",this.encodingLength)},f.prototype.decodeInt=function(C){return n.intFromLE(C)},f.prototype.isPoint=function(C){return C instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var e=t;e.version=require$$0.version,e.utils=requireUtils$1(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()}(elliptic)),elliptic}var asn1$1={},asn1={},api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch{return function(e,n,i){e[n]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,i=n.eval,s=n.execScript;!i&&s&&(s.call(n,"null"),i=n.eval),forEach(Object_keys(t),function(f){n[f]=t[f]}),forEach(globals,function(f){t[f]&&(n[f]=t[f])});var a=Object_keys(n),l=i.call(n,this.code);return forEach(Object_keys(n),function(f){(f in t||indexOf(a,f)===-1)&&(t[f]=n[f])}),forEach(globals,function(f){f in t||defineProp(t,f,n[f])}),document.body.removeChild(e),l},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return t&&forEach(Object_keys(e),function(i){t[i]=e[i]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return typeof t=="object"&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(t){var e=requireAsn1$1(),n=requireInherits_browser(),i=t;i.define=function(l,f){return new s(l,f)};function s(a,l){this.name=a,this.body=l,this.decoders={},this.encoders={}}s.prototype._createNamed=function(l){var f;try{f=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{f=function(C){this._initNamed(C)}}return n(f,l),f.prototype._initNamed=function(C){l.call(this,C)},new f(this)},s.prototype._getDecoder=function(l){return l=l||"der",this.decoders.hasOwnProperty(l)||(this.decoders[l]=this._createNamed(e.decoders[l])),this.decoders[l]},s.prototype.decode=function(l,f,p){return this._getDecoder(f).decode(l,p)},s.prototype._getEncoder=function(l){return l=l||"der",this.encoders.hasOwnProperty(l)||(this.encoders[l]=this._createNamed(e.encoders[l])),this.encoders[l]},s.prototype.encode=function(l,f,p){return this._getEncoder(f).encode(l,p)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var t=requireInherits_browser();function e(i){this._reporterState={obj:null,path:[],options:i||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(s){return s instanceof n},e.prototype.save=function(){var s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},e.prototype.restore=function(s){var a=this._reporterState;a.obj=s.obj,a.path=a.path.slice(0,s.pathLen)},e.prototype.enterKey=function(s){return this._reporterState.path.push(s)},e.prototype.exitKey=function(s){var a=this._reporterState;a.path=a.path.slice(0,s-1)},e.prototype.leaveKey=function(s,a,l){var f=this._reporterState;this.exitKey(s),f.obj!==null&&(f.obj[a]=l)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){var s=this._reporterState,a=s.obj;return s.obj={},a},e.prototype.leaveObject=function(s){var a=this._reporterState,l=a.obj;return a.obj=s,l},e.prototype.error=function(s){var a,l=this._reporterState,f=s instanceof n;if(f?a=s:a=new n(l.path.map(function(p){return"["+JSON.stringify(p)+"]"}).join(""),s.message||s,s.stack),!l.options.partial)throw a;return f||l.errors.push(a),a},e.prototype.wrapResult=function(s){var a=this._reporterState;return a.options.partial?{result:this.isError(s)?null:s,errors:a.errors}:s};function n(i,s){this.path=i,this.rethrow(s)}return t(n,Error),n.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,n),!this.stack)try{throw new Error(this.message)}catch(a){this.stack=a.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var t=requireInherits_browser(),e=requireBase().Reporter,n=require$$1$3.Buffer;function i(a,l){if(e.call(this,l),!n.isBuffer(a)){this.error("Input not Buffer");return}this.base=a,this.offset=0,this.length=a.length}t(i,e),buffer.DecoderBuffer=i,i.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},i.prototype.restore=function(l){var f=new i(this.base);return f.offset=l.offset,f.length=this.offset,this.offset=l.offset,e.prototype.restore.call(this,l.reporter),f},i.prototype.isEmpty=function(){return this.offset===this.length},i.prototype.readUInt8=function(l){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(l||"DecoderBuffer overrun")},i.prototype.skip=function(l,f){if(!(this.offset+l<=this.length))return this.error(f||"DecoderBuffer overrun");var p=new i(this.base);return p._reporterState=this._reporterState,p.offset=this.offset,p.length=this.offset+l,this.offset+=l,p},i.prototype.raw=function(l){return this.base.slice(l?l.offset:this.offset,this.length)};function s(a,l){if(Array.isArray(a))this.length=0,this.value=a.map(function(f){return f instanceof s||(f=new s(f,l)),this.length+=f.length,f},this);else if(typeof a=="number"){if(!(0<=a&&a<=255))return l.error("non-byte EncoderBuffer value");this.value=a,this.length=1}else if(typeof a=="string")this.value=a,this.length=n.byteLength(a);else if(n.isBuffer(a))this.value=a,this.length=a.length;else return l.error("Unsupported type: "+typeof a)}return buffer.EncoderBuffer=s,s.prototype.join=function(l,f){return l||(l=new n(this.length)),f||(f=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(p){p.join(l,f),f+=p.length}):(typeof this.value=="number"?l[f]=this.value:typeof this.value=="string"?l.write(this.value,f):n.isBuffer(this.value)&&this.value.copy(l,f),f+=this.length)),l},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var t=requireBase().Reporter,e=requireBase().EncoderBuffer,n=requireBase().DecoderBuffer,i=requireMinimalisticAssert(),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],a=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),l=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function f(C,B){var N={};this._baseState=N,N.enc=C,N.parent=B||null,N.children=null,N.tag=null,N.args=null,N.reverseArgs=null,N.choice=null,N.optional=!1,N.any=!1,N.obj=!1,N.use=null,N.useDecoder=null,N.key=null,N.default=null,N.explicit=null,N.implicit=null,N.contains=null,N.parent||(N.children=[],this._wrap())}node=f;var p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return f.prototype.clone=function(){var B=this._baseState,N={};p.forEach(function(Ee){N[Ee]=B[Ee]});var le=new this.constructor(N.parent);return le._baseState=N,le},f.prototype._wrap=function(){var B=this._baseState;a.forEach(function(N){this[N]=function(){var Ee=new this.constructor(this);return B.children.push(Ee),Ee[N].apply(Ee,arguments)}},this)},f.prototype._init=function(B){var N=this._baseState;i(N.parent===null),B.call(this),N.children=N.children.filter(function(le){return le._baseState.parent===this},this),i.equal(N.children.length,1,"Root node can have only one child")},f.prototype._useArgs=function(B){var N=this._baseState,le=B.filter(function(Ee){return Ee instanceof this.constructor},this);B=B.filter(function(Ee){return!(Ee instanceof this.constructor)},this),le.length!==0&&(i(N.children===null),N.children=le,le.forEach(function(Ee){Ee._baseState.parent=this},this)),B.length!==0&&(i(N.args===null),N.args=B,N.reverseArgs=B.map(function(Ee){if(typeof Ee!="object"||Ee.constructor!==Object)return Ee;var Ue={};return Object.keys(Ee).forEach(function(ze){ze==(ze|0)&&(ze|=0);var Ze=Ee[ze];Ue[Ze]=ze}),Ue}))},l.forEach(function(C){f.prototype[C]=function(){var N=this._baseState;throw new Error(C+" not implemented for encoding: "+N.enc)}}),s.forEach(function(C){f.prototype[C]=function(){var N=this._baseState,le=Array.prototype.slice.call(arguments);return i(N.tag===null),N.tag=C,this._useArgs(le),this}}),f.prototype.use=function(B){i(B);var N=this._baseState;return i(N.use===null),N.use=B,this},f.prototype.optional=function(){var B=this._baseState;return B.optional=!0,this},f.prototype.def=function(B){var N=this._baseState;return i(N.default===null),N.default=B,N.optional=!0,this},f.prototype.explicit=function(B){var N=this._baseState;return i(N.explicit===null&&N.implicit===null),N.explicit=B,this},f.prototype.implicit=function(B){var N=this._baseState;return i(N.explicit===null&&N.implicit===null),N.implicit=B,this},f.prototype.obj=function(){var B=this._baseState,N=Array.prototype.slice.call(arguments);return B.obj=!0,N.length!==0&&this._useArgs(N),this},f.prototype.key=function(B){var N=this._baseState;return i(N.key===null),N.key=B,this},f.prototype.any=function(){var B=this._baseState;return B.any=!0,this},f.prototype.choice=function(B){var N=this._baseState;return i(N.choice===null),N.choice=B,this._useArgs(Object.keys(B).map(function(le){return B[le]})),this},f.prototype.contains=function(B){var N=this._baseState;return i(N.use===null),N.contains=B,this},f.prototype._decode=function(B,N){var le=this._baseState;if(le.parent===null)return B.wrapResult(le.children[0]._decode(B,N));var Ee=le.default,Ue=!0,ze=null;if(le.key!==null&&(ze=B.enterKey(le.key)),le.optional){var Ze=null;if(le.explicit!==null?Ze=le.explicit:le.implicit!==null?Ze=le.implicit:le.tag!==null&&(Ze=le.tag),Ze===null&&!le.any){var Qe=B.save();try{le.choice===null?this._decodeGeneric(le.tag,B,N):this._decodeChoice(B,N),Ue=!0}catch{Ue=!1}B.restore(Qe)}else if(Ue=this._peekTag(B,Ze,le.any),B.isError(Ue))return Ue}var ct;if(le.obj&&Ue&&(ct=B.enterObject()),Ue){if(le.explicit!==null){var wt=this._decodeTag(B,le.explicit);if(B.isError(wt))return wt;B=wt}var qt=B.offset;if(le.use===null&&le.choice===null){if(le.any)var Qe=B.save();var nr=this._decodeTag(B,le.implicit!==null?le.implicit:le.tag,le.any);if(B.isError(nr))return nr;le.any?Ee=B.raw(Qe):B=nr}if(N&&N.track&&le.tag!==null&&N.track(B.path(),qt,B.length,"tagged"),N&&N.track&&le.tag!==null&&N.track(B.path(),B.offset,B.length,"content"),le.any?Ee=Ee:le.choice===null?Ee=this._decodeGeneric(le.tag,B,N):Ee=this._decodeChoice(B,N),B.isError(Ee))return Ee;if(!le.any&&le.choice===null&&le.children!==null&&le.children.forEach(function(ur){ur._decode(B,N)}),le.contains&&(le.tag==="octstr"||le.tag==="bitstr")){var ir=new n(Ee);Ee=this._getUse(le.contains,B._reporterState.obj)._decode(ir,N)}}return le.obj&&Ue&&(Ee=B.leaveObject(ct)),le.key!==null&&(Ee!==null||Ue===!0)?B.leaveKey(ze,le.key,Ee):ze!==null&&B.exitKey(ze),Ee},f.prototype._decodeGeneric=function(B,N,le){var Ee=this._baseState;return B==="seq"||B==="set"?null:B==="seqof"||B==="setof"?this._decodeList(N,B,Ee.args[0],le):/str$/.test(B)?this._decodeStr(N,B,le):B==="objid"&&Ee.args?this._decodeObjid(N,Ee.args[0],Ee.args[1],le):B==="objid"?this._decodeObjid(N,null,null,le):B==="gentime"||B==="utctime"?this._decodeTime(N,B,le):B==="null_"?this._decodeNull(N,le):B==="bool"?this._decodeBool(N,le):B==="objDesc"?this._decodeStr(N,B,le):B==="int"||B==="enum"?this._decodeInt(N,Ee.args&&Ee.args[0],le):Ee.use!==null?this._getUse(Ee.use,N._reporterState.obj)._decode(N,le):N.error("unknown tag: "+B)},f.prototype._getUse=function(B,N){var le=this._baseState;return le.useDecoder=this._use(B,N),i(le.useDecoder._baseState.parent===null),le.useDecoder=le.useDecoder._baseState.children[0],le.implicit!==le.useDecoder._baseState.implicit&&(le.useDecoder=le.useDecoder.clone(),le.useDecoder._baseState.implicit=le.implicit),le.useDecoder},f.prototype._decodeChoice=function(B,N){var le=this._baseState,Ee=null,Ue=!1;return Object.keys(le.choice).some(function(ze){var Ze=B.save(),Qe=le.choice[ze];try{var ct=Qe._decode(B,N);if(B.isError(ct))return!1;Ee={type:ze,value:ct},Ue=!0}catch{return B.restore(Ze),!1}return!0},this),Ue?Ee:B.error("Choice not matched")},f.prototype._createEncoderBuffer=function(B){return new e(B,this.reporter)},f.prototype._encode=function(B,N,le){var Ee=this._baseState;if(!(Ee.default!==null&&Ee.default===B)){var Ue=this._encodeValue(B,N,le);if(Ue!==void 0&&!this._skipDefault(Ue,N,le))return Ue}},f.prototype._encodeValue=function(B,N,le){var Ee=this._baseState;if(Ee.parent===null)return Ee.children[0]._encode(B,N||new t);var Qe=null;if(this.reporter=N,Ee.optional&&B===void 0)if(Ee.default!==null)B=Ee.default;else return;var Ue=null,ze=!1;if(Ee.any)Qe=this._createEncoderBuffer(B);else if(Ee.choice)Qe=this._encodeChoice(B,N);else if(Ee.contains)Ue=this._getUse(Ee.contains,le)._encode(B,N),ze=!0;else if(Ee.children)Ue=Ee.children.map(function(qt){if(qt._baseState.tag==="null_")return qt._encode(null,N,B);if(qt._baseState.key===null)return N.error("Child should have a key");var nr=N.enterKey(qt._baseState.key);if(typeof B!="object")return N.error("Child expected, but input is not object");var ir=qt._encode(B[qt._baseState.key],N,B);return N.leaveKey(nr),ir},this).filter(function(qt){return qt}),Ue=this._createEncoderBuffer(Ue);else if(Ee.tag==="seqof"||Ee.tag==="setof"){if(!(Ee.args&&Ee.args.length===1))return N.error("Too many args for : "+Ee.tag);if(!Array.isArray(B))return N.error("seqof/setof, but data is not Array");var Ze=this.clone();Ze._baseState.implicit=null,Ue=this._createEncoderBuffer(B.map(function(qt){var nr=this._baseState;return this._getUse(nr.args[0],B)._encode(qt,N)},Ze))}else Ee.use!==null?Qe=this._getUse(Ee.use,le)._encode(B,N):(Ue=this._encodePrimitive(Ee.tag,B),ze=!0);var Qe;if(!Ee.any&&Ee.choice===null){var ct=Ee.implicit!==null?Ee.implicit:Ee.tag,wt=Ee.implicit===null?"universal":"context";ct===null?Ee.use===null&&N.error("Tag could be omitted only for .use()"):Ee.use===null&&(Qe=this._encodeComposite(ct,ze,wt,Ue))}return Ee.explicit!==null&&(Qe=this._encodeComposite(Ee.explicit,!1,"context",Qe)),Qe},f.prototype._encodeChoice=function(B,N){var le=this._baseState,Ee=le.choice[B.type];return Ee||i(!1,B.type+" not found in "+JSON.stringify(Object.keys(le.choice))),Ee._encode(B.value,N)},f.prototype._encodePrimitive=function(B,N){var le=this._baseState;if(/str$/.test(B))return this._encodeStr(N,B);if(B==="objid"&&le.args)return this._encodeObjid(N,le.reverseArgs[0],le.args[1]);if(B==="objid")return this._encodeObjid(N,null,null);if(B==="gentime"||B==="utctime")return this._encodeTime(N,B);if(B==="null_")return this._encodeNull();if(B==="int"||B==="enum")return this._encodeInt(N,le.args&&le.reverseArgs[0]);if(B==="bool")return this._encodeBool(N);if(B==="objDesc")return this._encodeStr(N,B);throw new Error("Unsupported tag: "+B)},f.prototype._isNumstr=function(B){return/^[0-9 ]*$/.test(B)},f.prototype._isPrintstr=function(B){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(B)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(t){var e=t;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base)),base}var constants={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(t){var e=requireConstants();t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e._reverse(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e._reverse(t.tag)}(der)),der}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(t){var e=t;e._reverse=function(i){var s={};return Object.keys(i).forEach(function(a){(a|0)==a&&(a=a|0);var l=i[a];s[l]=a}),s},e.der=requireDer$2()}(constants)),constants}var decoders={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var t=requireInherits_browser(),e=requireAsn1$1(),n=e.base,i=e.bignum,s=e.constants.der;function a(C){this.enc="der",this.name=C.name,this.entity=C,this.tree=new l,this.tree._init(C.body)}der_1$1=a,a.prototype.decode=function(B,N){return B instanceof n.DecoderBuffer||(B=new n.DecoderBuffer(B,N)),this.tree._decode(B,N)};function l(C){n.Node.call(this,"der",C)}t(l,n.Node),l.prototype._peekTag=function(B,N,le){if(B.isEmpty())return!1;var Ee=B.save(),Ue=f(B,'Failed to peek tag: "'+N+'"');return B.isError(Ue)?Ue:(B.restore(Ee),Ue.tag===N||Ue.tagStr===N||Ue.tagStr+"of"===N||le)},l.prototype._decodeTag=function(B,N,le){var Ee=f(B,'Failed to decode tag of "'+N+'"');if(B.isError(Ee))return Ee;var Ue=p(B,Ee.primitive,'Failed to get length of "'+N+'"');if(B.isError(Ue))return Ue;if(!le&&Ee.tag!==N&&Ee.tagStr!==N&&Ee.tagStr+"of"!==N)return B.error('Failed to match tag: "'+N+'"');if(Ee.primitive||Ue!==null)return B.skip(Ue,'Failed to match body of: "'+N+'"');var ze=B.save(),Ze=this._skipUntilEnd(B,'Failed to skip indefinite length body: "'+this.tag+'"');return B.isError(Ze)?Ze:(Ue=B.offset-ze.offset,B.restore(ze),B.skip(Ue,'Failed to match body of: "'+N+'"'))},l.prototype._skipUntilEnd=function(B,N){for(;;){var le=f(B,N);if(B.isError(le))return le;var Ee=p(B,le.primitive,N);if(B.isError(Ee))return Ee;var Ue;if(le.primitive||Ee!==null?Ue=B.skip(Ee):Ue=this._skipUntilEnd(B,N),B.isError(Ue))return Ue;if(le.tagStr==="end")break}},l.prototype._decodeList=function(B,N,le,Ee){for(var Ue=[];!B.isEmpty();){var ze=this._peekTag(B,"end");if(B.isError(ze))return ze;var Ze=le.decode(B,"der",Ee);if(B.isError(Ze)&&ze)break;Ue.push(Ze)}return Ue},l.prototype._decodeStr=function(B,N){if(N==="bitstr"){var le=B.readUInt8();return B.isError(le)?le:{unused:le,data:B.raw()}}else if(N==="bmpstr"){var Ee=B.raw();if(Ee.length%2===1)return B.error("Decoding of string type: bmpstr length mismatch");for(var Ue="",ze=0;ze<Ee.length/2;ze++)Ue+=String.fromCharCode(Ee.readUInt16BE(ze*2));return Ue}else if(N==="numstr"){var Ze=B.raw().toString("ascii");return this._isNumstr(Ze)?Ze:B.error("Decoding of string type: numstr unsupported characters")}else{if(N==="octstr")return B.raw();if(N==="objDesc")return B.raw();if(N==="printstr"){var Qe=B.raw().toString("ascii");return this._isPrintstr(Qe)?Qe:B.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(N)?B.raw().toString():B.error("Decoding of string type: "+N+" unsupported")}},l.prototype._decodeObjid=function(B,N,le){for(var Ee,Ue=[],ze=0;!B.isEmpty();){var Ze=B.readUInt8();ze<<=7,ze|=Ze&127,Ze&128||(Ue.push(ze),ze=0)}Ze&128&&Ue.push(ze);var Qe=Ue[0]/40|0,ct=Ue[0]%40;if(le?Ee=Ue:Ee=[Qe,ct].concat(Ue.slice(1)),N){var wt=N[Ee.join(" ")];wt===void 0&&(wt=N[Ee.join(".")]),wt!==void 0&&(Ee=wt)}return Ee},l.prototype._decodeTime=function(B,N){var le=B.raw().toString();if(N==="gentime")var Ee=le.slice(0,4)|0,Ue=le.slice(4,6)|0,ze=le.slice(6,8)|0,Ze=le.slice(8,10)|0,Qe=le.slice(10,12)|0,ct=le.slice(12,14)|0;else if(N==="utctime"){var Ee=le.slice(0,2)|0,Ue=le.slice(2,4)|0,ze=le.slice(4,6)|0,Ze=le.slice(6,8)|0,Qe=le.slice(8,10)|0,ct=le.slice(10,12)|0;Ee<70?Ee=2e3+Ee:Ee=1900+Ee}else return B.error("Decoding "+N+" time is not supported yet");return Date.UTC(Ee,Ue-1,ze,Ze,Qe,ct,0)},l.prototype._decodeNull=function(B){return null},l.prototype._decodeBool=function(B){var N=B.readUInt8();return B.isError(N)?N:N!==0},l.prototype._decodeInt=function(B,N){var le=B.raw(),Ee=new i(le);return N&&(Ee=N[Ee.toString(10)]||Ee),Ee},l.prototype._use=function(B,N){return typeof B=="function"&&(B=B(N)),B._getDecoder("der").tree};function f(C,B){var N=C.readUInt8(B);if(C.isError(N))return N;var le=s.tagClass[N>>6],Ee=(N&32)===0;if((N&31)===31){var Ue=N;for(N=0;(Ue&128)===128;){if(Ue=C.readUInt8(B),C.isError(Ue))return Ue;N<<=7,N|=Ue&127}}else N&=31;var ze=s.tag[N];return{cls:le,primitive:Ee,tag:N,tagStr:ze}}function p(C,B,N){var le=C.readUInt8(N);if(C.isError(le))return le;if(!B&&le===128)return null;if(!(le&128))return le;var Ee=le&127;if(Ee>4)return C.error("length octect is too long");le=0;for(var Ue=0;Ue<Ee;Ue++){le<<=8;var ze=C.readUInt8(N);if(C.isError(ze))return ze;le|=ze}return le}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var t=requireInherits_browser(),e=require$$1$3.Buffer,n=requireDer$1();function i(s){n.call(this,s),this.enc="pem"}return t(i,n),pem$1=i,i.prototype.decode=function(a,l){for(var f=a.toString().split(/[\r\n]+/g),p=l.label.toUpperCase(),C=/^-----(BEGIN|END) ([^-]+)-----$/,B=-1,N=-1,le=0;le<f.length;le++){var Ee=f[le].match(C);if(Ee!==null&&Ee[2]===p)if(B===-1){if(Ee[1]!=="BEGIN")break;B=le}else{if(Ee[1]!=="END")break;N=le;break}}if(B===-1||N===-1)throw new Error("PEM section not found for: "+p);var Ue=f.slice(B+1,N).join("");Ue.replace(/[^a-z0-9\+\/=]+/gi,"");var ze=new e(Ue,"base64");return n.prototype.decode.call(this,ze,l)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(t){var e=t;e.der=requireDer$1(),e.pem=requirePem$1()}(decoders)),decoders}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var t=requireInherits_browser(),e=require$$1$3.Buffer,n=requireAsn1$1(),i=n.base,s=n.constants.der;function a(C){this.enc="der",this.name=C.name,this.entity=C,this.tree=new l,this.tree._init(C.body)}der_1=a,a.prototype.encode=function(B,N){return this.tree._encode(B,N).join()};function l(C){i.Node.call(this,"der",C)}t(l,i.Node),l.prototype._encodeComposite=function(B,N,le,Ee){var Ue=p(B,N,le,this.reporter);if(Ee.length<128){var Qe=new e(2);return Qe[0]=Ue,Qe[1]=Ee.length,this._createEncoderBuffer([Qe,Ee])}for(var ze=1,Ze=Ee.length;Ze>=256;Ze>>=8)ze++;var Qe=new e(2+ze);Qe[0]=Ue,Qe[1]=128|ze;for(var Ze=1+ze,ct=Ee.length;ct>0;Ze--,ct>>=8)Qe[Ze]=ct&255;return this._createEncoderBuffer([Qe,Ee])},l.prototype._encodeStr=function(B,N){if(N==="bitstr")return this._createEncoderBuffer([B.unused|0,B.data]);if(N==="bmpstr"){for(var le=new e(B.length*2),Ee=0;Ee<B.length;Ee++)le.writeUInt16BE(B.charCodeAt(Ee),Ee*2);return this._createEncoderBuffer(le)}else return N==="numstr"?this._isNumstr(B)?this._createEncoderBuffer(B):this.reporter.error("Encoding of string type: numstr supports only digits and space"):N==="printstr"?this._isPrintstr(B)?this._createEncoderBuffer(B):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(N)?this._createEncoderBuffer(B):N==="objDesc"?this._createEncoderBuffer(B):this.reporter.error("Encoding of string type: "+N+" unsupported")},l.prototype._encodeObjid=function(B,N,le){if(typeof B=="string"){if(!N)return this.reporter.error("string objid given, but no values map found");if(!N.hasOwnProperty(B))return this.reporter.error("objid not found in values map");B=N[B].split(/[\s\.]+/g);for(var Ee=0;Ee<B.length;Ee++)B[Ee]|=0}else if(Array.isArray(B)){B=B.slice();for(var Ee=0;Ee<B.length;Ee++)B[Ee]|=0}if(!Array.isArray(B))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(B));if(!le){if(B[1]>=40)return this.reporter.error("Second objid identifier OOB");B.splice(0,2,B[0]*40+B[1])}for(var Ue=0,Ee=0;Ee<B.length;Ee++){var ze=B[Ee];for(Ue++;ze>=128;ze>>=7)Ue++}for(var Ze=new e(Ue),Qe=Ze.length-1,Ee=B.length-1;Ee>=0;Ee--){var ze=B[Ee];for(Ze[Qe--]=ze&127;(ze>>=7)>0;)Ze[Qe--]=128|ze&127}return this._createEncoderBuffer(Ze)};function f(C){return C<10?"0"+C:C}l.prototype._encodeTime=function(B,N){var le,Ee=new Date(B);return N==="gentime"?le=[f(Ee.getFullYear()),f(Ee.getUTCMonth()+1),f(Ee.getUTCDate()),f(Ee.getUTCHours()),f(Ee.getUTCMinutes()),f(Ee.getUTCSeconds()),"Z"].join(""):N==="utctime"?le=[f(Ee.getFullYear()%100),f(Ee.getUTCMonth()+1),f(Ee.getUTCDate()),f(Ee.getUTCHours()),f(Ee.getUTCMinutes()),f(Ee.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+N+" time is not supported yet"),this._encodeStr(le,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(B,N){if(typeof B=="string"){if(!N)return this.reporter.error("String int or enum given, but no values map");if(!N.hasOwnProperty(B))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(B));B=N[B]}if(typeof B!="number"&&!e.isBuffer(B)){var le=B.toArray();!B.sign&&le[0]&128&&le.unshift(0),B=new e(le)}if(e.isBuffer(B)){var Ee=B.length;B.length===0&&Ee++;var ze=new e(Ee);return B.copy(ze),B.length===0&&(ze[0]=0),this._createEncoderBuffer(ze)}if(B<128)return this._createEncoderBuffer(B);if(B<256)return this._createEncoderBuffer([0,B]);for(var Ee=1,Ue=B;Ue>=256;Ue>>=8)Ee++;for(var ze=new Array(Ee),Ue=ze.length-1;Ue>=0;Ue--)ze[Ue]=B&255,B>>=8;return ze[0]&128&&ze.unshift(0),this._createEncoderBuffer(new e(ze))},l.prototype._encodeBool=function(B){return this._createEncoderBuffer(B?255:0)},l.prototype._use=function(B,N){return typeof B=="function"&&(B=B(N)),B._getEncoder("der").tree},l.prototype._skipDefault=function(B,N,le){var Ee=this._baseState,Ue;if(Ee.default===null)return!1;var ze=B.join();if(Ee.defaultBuffer===void 0&&(Ee.defaultBuffer=this._encodeValue(Ee.default,N,le).join()),ze.length!==Ee.defaultBuffer.length)return!1;for(Ue=0;Ue<ze.length;Ue++)if(ze[Ue]!==Ee.defaultBuffer[Ue])return!1;return!0};function p(C,B,N,le){var Ee;if(C==="seqof"?C="seq":C==="setof"&&(C="set"),s.tagByName.hasOwnProperty(C))Ee=s.tagByName[C];else if(typeof C=="number"&&(C|0)===C)Ee=C;else return le.error("Unknown tag: "+C);return Ee>=31?le.error("Multi-octet tag encoding unsupported"):(B||(Ee|=32),Ee|=s.tagClassByName[N||"universal"]<<6,Ee)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var t=requireInherits_browser(),e=requireDer();function n(i){e.call(this,i),this.enc="pem"}return t(n,e),pem=n,n.prototype.encode=function(s,a){for(var l=e.prototype.encode.call(this,s),f=l.toString("base64"),p=["-----BEGIN "+a.label+"-----"],C=0;C<f.length;C+=64)p.push(f.slice(C,C+64));return p.push("-----END "+a.label+"-----"),p.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(t){var e=t;e.der=requireDer(),e.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(t){var e=t;e.bignum=requireBn(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var t=requireAsn1$1(),e=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),n=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),i=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())}),a=t.define("RelativeDistinguishedName",function(){this.setof(n)}),l=t.define("RDNSequence",function(){this.seqof(a)}),f=t.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),p=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),C=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),B=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(i),this.key("issuer").use(f),this.key("validity").use(p),this.key("subject").use(f),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(C).optional())}),N=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(B),this.key("signatureAlgorithm").use(i),this.key("signatureValue").bitstr())});return certificate=N,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var t=requireAsn1$1();asn1$1.certificate=requireCertificate();var e=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=e;var n=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=n;var i=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),s=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(i),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=s;var a=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(i),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=a;var l=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=l;var f=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=f,asn1$1.DSAparam=t.define("DSAparam",function(){this.int()});var p=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),C=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=C,asn1$1.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,i=requireEvp_bytestokey(),s=requireBrowser$6(),a=requireSafeBuffer$1().Buffer;return fixProc=function(l,f){var p=l.toString(),C=p.match(t),B;if(C){var le="aes"+C[1],Ee=a.from(C[2],"hex"),Ue=a.from(C[3].replace(/[\r\n]/g,""),"base64"),ze=i(f,Ee.slice(0,8),parseInt(C[1],10)).key,Ze=[],Qe=s.createDecipheriv(le,ze,Ee);Ze.push(Qe.update(Ue)),Ze.push(Qe.final()),B=a.concat(Ze)}else{var N=p.match(n);B=a.from(N[2].replace(/[\r\n]/g,""),"base64")}var ct=p.match(e)[1];return{tag:ct,data:B}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var t=requireAsn1(),e=require$$1,n=requireFixProc(),i=requireBrowser$6(),s=requireBrowser$7(),a=requireSafeBuffer$1().Buffer;function l(p,C){var B=p.algorithm.decrypt.kde.kdeparams.salt,N=parseInt(p.algorithm.decrypt.kde.kdeparams.iters.toString(),10),le=e[p.algorithm.decrypt.cipher.algo.join(".")],Ee=p.algorithm.decrypt.cipher.iv,Ue=p.subjectPrivateKey,ze=parseInt(le.split("-")[1],10)/8,Ze=s.pbkdf2Sync(C,B,N,ze,"sha1"),Qe=i.createDecipheriv(le,Ze,Ee),ct=[];return ct.push(Qe.update(Ue)),ct.push(Qe.final()),a.concat(ct)}function f(p){var C;typeof p=="object"&&!a.isBuffer(p)&&(C=p.passphrase,p=p.key),typeof p=="string"&&(p=a.from(p));var B=n(p,C),N=B.tag,le=B.data,Ee,Ue;switch(N){case"CERTIFICATE":Ue=t.certificate.decode(le,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(Ue||(Ue=t.PublicKey.decode(le,"der")),Ee=Ue.algorithm.algorithm.join("."),Ee){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode(Ue.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return Ue.subjectPrivateKey=Ue.subjectPublicKey,{type:"ec",data:Ue};case"1.2.840.10040.4.1":return Ue.algorithm.params.pub_key=t.DSAparam.decode(Ue.subjectPublicKey.data,"der"),{type:"dsa",data:Ue.algorithm.params};default:throw new Error("unknown key id "+Ee)}case"ENCRYPTED PRIVATE KEY":le=t.EncryptedPrivateKey.decode(le,"der"),le=l(le,C);case"PRIVATE KEY":switch(Ue=t.PrivateKey.decode(le,"der"),Ee=Ue.algorithm.algorithm.join("."),Ee){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode(Ue.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:Ue.algorithm.curve,privateKey:t.ECPrivateKey.decode(Ue.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return Ue.algorithm.params.priv_key=t.DSAparam.decode(Ue.subjectPrivateKey,"der"),{type:"dsa",params:Ue.algorithm.params};default:throw new Error("unknown key id "+Ee)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(le,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(le,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(le,"der")};case"EC PRIVATE KEY":return le=t.ECPrivateKey.decode(le,"der"),{curve:le.parameters.value,privateKey:le.privateKey};default:throw new Error("unknown key type "+N)}}return f.signature=t.signature,parseAsn1=f,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var t=requireSafeBuffer$1().Buffer,e=requireBrowser$8(),n=requireBrowserifyRsa(),i=requireElliptic().ec,s=bnExports,a=requireParseAsn1(),l=require$$4,f=1;function p(Qe,ct,wt,qt,nr){var ir=a(ct);if(ir.curve){if(qt!=="ecdsa"&&qt!=="ecdsa/rsa")throw new Error("wrong private key type");return C(Qe,ir)}else if(ir.type==="dsa"){if(qt!=="dsa")throw new Error("wrong private key type");return B(Qe,ir,wt)}if(qt!=="rsa"&&qt!=="ecdsa/rsa")throw new Error("wrong private key type");if(ct.padding!==void 0&&ct.padding!==f)throw new Error("illegal or unsupported padding mode");Qe=t.concat([nr,Qe]);for(var or=ir.modulus.byteLength(),ur=[0,1];Qe.length+ur.length+1<or;)ur.push(255);ur.push(0);for(var hr=-1;++hr<Qe.length;)ur.push(Qe[hr]);var fr=n(ur,ir);return fr}function C(Qe,ct){var wt=l[ct.curve.join(".")];if(!wt)throw new Error("unknown curve "+ct.curve.join("."));var qt=new i(wt),nr=qt.keyFromPrivate(ct.privateKey),ir=nr.sign(Qe);return t.from(ir.toDER())}function B(Qe,ct,wt){for(var qt=ct.params.priv_key,nr=ct.params.p,ir=ct.params.q,or=ct.params.g,ur=new s(0),hr,fr=Ee(Qe,ir).mod(ir),ar=!1,Lt=le(qt,ir,Qe,wt);ar===!1;)hr=ze(ir,Lt,wt),ur=Ze(or,hr,nr,ir),ar=hr.invm(ir).imul(fr.add(qt.mul(ur))).mod(ir),ar.cmpn(0)===0&&(ar=!1,ur=new s(0));return N(ur,ar)}function N(Qe,ct){Qe=Qe.toArray(),ct=ct.toArray(),Qe[0]&128&&(Qe=[0].concat(Qe)),ct[0]&128&&(ct=[0].concat(ct));var wt=Qe.length+ct.length+4,qt=[48,wt,2,Qe.length];return qt=qt.concat(Qe,[2,ct.length],ct),t.from(qt)}function le(Qe,ct,wt,qt){if(Qe=t.from(Qe.toArray()),Qe.length<ct.byteLength()){var nr=t.alloc(ct.byteLength()-Qe.length);Qe=t.concat([nr,Qe])}var ir=wt.length,or=Ue(wt,ct),ur=t.alloc(ir);ur.fill(1);var hr=t.alloc(ir);return hr=e(qt,hr).update(ur).update(t.from([0])).update(Qe).update(or).digest(),ur=e(qt,hr).update(ur).digest(),hr=e(qt,hr).update(ur).update(t.from([1])).update(Qe).update(or).digest(),ur=e(qt,hr).update(ur).digest(),{k:hr,v:ur}}function Ee(Qe,ct){var wt=new s(Qe),qt=(Qe.length<<3)-ct.bitLength();return qt>0&&wt.ishrn(qt),wt}function Ue(Qe,ct){Qe=Ee(Qe,ct),Qe=Qe.mod(ct);var wt=t.from(Qe.toArray());if(wt.length<ct.byteLength()){var qt=t.alloc(ct.byteLength()-wt.length);wt=t.concat([qt,wt])}return wt}function ze(Qe,ct,wt){var qt,nr;do{for(qt=t.alloc(0);qt.length*8<Qe.bitLength();)ct.v=e(wt,ct.k).update(ct.v).digest(),qt=t.concat([qt,ct.v]);nr=Ee(qt,Qe),ct.k=e(wt,ct.k).update(ct.v).update(t.from([0])).digest(),ct.v=e(wt,ct.k).update(ct.v).digest()}while(nr.cmp(Qe)!==-1);return nr}function Ze(Qe,ct,wt,qt){return Qe.toRed(s.mont(wt)).redPow(ct).fromRed().mod(qt)}return sign.exports=p,sign.exports.getKey=le,sign.exports.makeKey=ze,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=requireSafeBuffer$1().Buffer,e=bnExports,n=requireElliptic().ec,i=requireParseAsn1(),s=require$$4;function a(C,B,N,le,Ee){var Ue=i(N);if(Ue.type==="ec"){if(le!=="ecdsa"&&le!=="ecdsa/rsa")throw new Error("wrong public key type");return l(C,B,Ue)}else if(Ue.type==="dsa"){if(le!=="dsa")throw new Error("wrong public key type");return f(C,B,Ue)}if(le!=="rsa"&&le!=="ecdsa/rsa")throw new Error("wrong public key type");B=t.concat([Ee,B]);for(var ze=Ue.modulus.byteLength(),Ze=[1],Qe=0;B.length+Ze.length+2<ze;)Ze.push(255),Qe+=1;Ze.push(0);for(var ct=-1;++ct<B.length;)Ze.push(B[ct]);Ze=t.from(Ze);var wt=e.mont(Ue.modulus);C=new e(C).toRed(wt),C=C.redPow(new e(Ue.publicExponent)),C=t.from(C.fromRed().toArray());var qt=Qe<8?1:0;for(ze=Math.min(C.length,Ze.length),C.length!==Ze.length&&(qt=1),ct=-1;++ct<ze;)qt|=C[ct]^Ze[ct];return qt===0}function l(C,B,N){var le=s[N.data.algorithm.curve.join(".")];if(!le)throw new Error("unknown curve "+N.data.algorithm.curve.join("."));var Ee=new n(le),Ue=N.data.subjectPrivateKey.data;return Ee.verify(B,C,Ue)}function f(C,B,N){var le=N.data.p,Ee=N.data.q,Ue=N.data.g,ze=N.data.pub_key,Ze=i.signature.decode(C,"der"),Qe=Ze.s,ct=Ze.r;p(Qe,Ee),p(ct,Ee);var wt=e.mont(le),qt=Qe.invm(Ee),nr=Ue.toRed(wt).redPow(new e(B).mul(qt).mod(Ee)).fromRed().mul(ze.toRed(wt).redPow(ct.mul(qt).mod(Ee)).fromRed()).mod(le).mod(Ee);return nr.cmp(ct)===0}function p(C,B){if(C.cmpn(0)<=0)throw new Error("invalid sig");if(C.cmp(B)>=0)throw new Error("invalid sig")}return verify_1=a,verify_1}var browser$3,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var t=requireSafeBuffer$1().Buffer,e=requireBrowser$9(),n=requireReadableBrowser(),i=requireInherits_browser(),s=requireSign(),a=requireVerify(),l=require$$6;Object.keys(l).forEach(function(N){l[N].id=t.from(l[N].id,"hex"),l[N.toLowerCase()]=l[N]});function f(N){n.Writable.call(this);var le=l[N];if(!le)throw new Error("Unknown message digest");this._hashType=le.hash,this._hash=e(le.hash),this._tag=le.id,this._signType=le.sign}i(f,n.Writable),f.prototype._write=function(le,Ee,Ue){this._hash.update(le),Ue()},f.prototype.update=function(le,Ee){return this._hash.update(typeof le=="string"?t.from(le,Ee):le),this},f.prototype.sign=function(le,Ee){this.end();var Ue=this._hash.digest(),ze=s(Ue,le,this._hashType,this._signType,this._tag);return Ee?ze.toString(Ee):ze};function p(N){n.Writable.call(this);var le=l[N];if(!le)throw new Error("Unknown message digest");this._hash=e(le.hash),this._tag=le.id,this._signType=le.sign}i(p,n.Writable),p.prototype._write=function(le,Ee,Ue){this._hash.update(le),Ue()},p.prototype.update=function(le,Ee){return this._hash.update(typeof le=="string"?t.from(le,Ee):le),this},p.prototype.verify=function(le,Ee,Ue){var ze=typeof Ee=="string"?t.from(Ee,Ue):Ee;this.end();var Ze=this._hash.digest();return a(ze,Ze,le,this._signType,this._tag)};function C(N){return new f(N)}function B(N){return new p(N)}return browser$3={Sign:C,Verify:B,createSign:C,createVerify:B},browser$3}var browser$2,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$2;hasRequiredBrowser$2=1;var t=requireElliptic(),e=requireBn();browser$2=function(l){return new i(l)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1;function i(a){this.curveType=n[a],this.curveType||(this.curveType={name:a}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}i.prototype.generateKeys=function(a,l){return this.keys=this.curve.genKeyPair(),this.getPublicKey(a,l)},i.prototype.computeSecret=function(a,l,f){l=l||"utf8",Buffer$1.isBuffer(a)||(a=new Buffer$1(a,l));var p=this.curve.keyFromPublic(a).getPublic(),C=p.mul(this.keys.getPrivate()).getX();return s(C,f,this.curveType.byteLength)},i.prototype.getPublicKey=function(a,l){var f=this.keys.getPublic(l==="compressed",!0);return l==="hybrid"&&(f[f.length-1]%2?f[0]=7:f[0]=6),s(f,a)},i.prototype.getPrivateKey=function(a){return s(this.keys.getPrivate(),a)},i.prototype.setPublicKey=function(a,l){return l=l||"utf8",Buffer$1.isBuffer(a)||(a=new Buffer$1(a,l)),this.keys._importPublic(a),this},i.prototype.setPrivateKey=function(a,l){l=l||"utf8",Buffer$1.isBuffer(a)||(a=new Buffer$1(a,l));var f=new e(a);return f=f.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(f),this};function s(a,l,f){Array.isArray(a)||(a=a.toArray());var p=new Buffer$1(a);if(f&&p.length<f){var C=new Buffer$1(f-p.length);C.fill(0),p=Buffer$1.concat([C,p])}return l?p.toString(l):p}return browser$2}var browser$1={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var t=requireBrowser$9(),e=requireSafeBuffer$1().Buffer;mgf=function(i,s){for(var a=e.alloc(0),l=0,f;a.length<s;)f=n(l++),a=e.concat([a,t("sha1").update(i).update(f).digest()]);return a.slice(0,s)};function n(i){var s=e.allocUnsafe(4);return s.writeUInt32BE(i,0),s}return mgf}var xor,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor=function(e,n){for(var i=e.length,s=-1;++s<i;)e[s]^=n[s];return e}),xor}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var t=requireBn(),e=requireSafeBuffer$1().Buffer;function n(i,s){return e.from(i.toRed(t.mont(s.modulus)).redPow(new t(s.publicExponent)).fromRed().toArray())}return withPublic_1=n,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var t=requireParseAsn1(),e=requireBrowser$b(),n=requireBrowser$9(),i=requireMgf(),s=requireXor(),a=requireBn(),l=requireWithPublic(),f=requireBrowserifyRsa(),p=requireSafeBuffer$1().Buffer;publicEncrypt=function(Ee,Ue,ze){var Ze;Ee.padding?Ze=Ee.padding:ze?Ze=1:Ze=4;var Qe=t(Ee),ct;if(Ze===4)ct=C(Qe,Ue);else if(Ze===1)ct=B(Qe,Ue,ze);else if(Ze===3){if(ct=new a(Ue),ct.cmp(Qe.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return ze?f(ct,Qe):l(ct,Qe)};function C(le,Ee){var Ue=le.modulus.byteLength(),ze=Ee.length,Ze=n("sha1").update(p.alloc(0)).digest(),Qe=Ze.length,ct=2*Qe;if(ze>Ue-ct-2)throw new Error("message too long");var wt=p.alloc(Ue-ze-ct-2),qt=Ue-Qe-1,nr=e(Qe),ir=s(p.concat([Ze,wt,p.alloc(1,1),Ee],qt),i(nr,qt)),or=s(nr,i(ir,Qe));return new a(p.concat([p.alloc(1),or,ir],Ue))}function B(le,Ee,Ue){var ze=Ee.length,Ze=le.modulus.byteLength();if(ze>Ze-11)throw new Error("message too long");var Qe;return Ue?Qe=p.alloc(Ze-ze-3,255):Qe=N(Ze-ze-3),new a(p.concat([p.from([0,Ue?1:2]),Qe,p.alloc(1),Ee],Ze))}function N(le){for(var Ee=p.allocUnsafe(le),Ue=0,ze=e(le*2),Ze=0,Qe;Ue<le;)Ze===ze.length&&(ze=e(le*2),Ze=0),Qe=ze[Ze++],Qe&&(Ee[Ue++]=Qe);return Ee}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var t=requireParseAsn1(),e=requireMgf(),n=requireXor(),i=requireBn(),s=requireBrowserifyRsa(),a=requireBrowser$9(),l=requireWithPublic(),f=requireSafeBuffer$1().Buffer;privateDecrypt=function(le,Ee,Ue){var ze;le.padding?ze=le.padding:Ue?ze=1:ze=4;var Ze=t(le),Qe=Ze.modulus.byteLength();if(Ee.length>Qe||new i(Ee).cmp(Ze.modulus)>=0)throw new Error("decryption error");var ct;Ue?ct=l(new i(Ee),Ze):ct=s(Ee,Ze);var wt=f.alloc(Qe-ct.length);if(ct=f.concat([wt,ct],Qe),ze===4)return p(Ze,ct);if(ze===1)return C(Ze,ct,Ue);if(ze===3)return ct;throw new Error("unknown padding")};function p(N,le){var Ee=N.modulus.byteLength(),Ue=a("sha1").update(f.alloc(0)).digest(),ze=Ue.length;if(le[0]!==0)throw new Error("decryption error");var Ze=le.slice(1,ze+1),Qe=le.slice(ze+1),ct=n(Ze,e(Qe,ze)),wt=n(Qe,e(ct,Ee-ze-1));if(B(Ue,wt.slice(0,ze)))throw new Error("decryption error");for(var qt=ze;wt[qt]===0;)qt++;if(wt[qt++]!==1)throw new Error("decryption error");return wt.slice(qt)}function C(N,le,Ee){for(var Ue=le.slice(0,2),ze=2,Ze=0;le[ze++]!==0;)if(ze>=le.length){Ze++;break}var Qe=le.slice(2,ze-1);if((Ue.toString("hex")!=="0002"&&!Ee||Ue.toString("hex")!=="0001"&&Ee)&&Ze++,Qe.length<8&&Ze++,Ze)throw new Error("decryption error");return le.slice(ze)}function B(N,le){N=f.from(N),le=f.from(le);var Ee=0,Ue=N.length;N.length!==le.length&&(Ee++,Ue=Math.min(N.length,le.length));for(var ze=-1;++ze<Ue;)Ee+=N[ze]^le[ze];return Ee}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(t){t.publicEncrypt=requirePublicEncrypt(),t.privateDecrypt=requirePrivateDecrypt(),t.privateEncrypt=function(n,i){return t.publicEncrypt(n,i,!0)},t.publicDecrypt=function(n,i){return t.privateDecrypt(n,i,!0)}}(browser$1)),browser$1}var browser={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser;hasRequiredBrowser=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=requireSafeBuffer$1(),n=requireBrowser$b(),i=e.Buffer,s=e.kMaxLength,a=commonjsGlobal$1.crypto||commonjsGlobal$1.msCrypto,l=Math.pow(2,32)-1;function f(le,Ee){if(typeof le!="number"||le!==le)throw new TypeError("offset must be a number");if(le>l||le<0)throw new TypeError("offset must be a uint32");if(le>s||le>Ee)throw new RangeError("offset out of range")}function p(le,Ee,Ue){if(typeof le!="number"||le!==le)throw new TypeError("size must be a number");if(le>l||le<0)throw new TypeError("size must be a uint32");if(le+Ee>Ue||le>s)throw new RangeError("buffer too small")}a&&a.getRandomValues||!process$1.browser?(browser.randomFill=C,browser.randomFillSync=N):(browser.randomFill=t,browser.randomFillSync=t);function C(le,Ee,Ue,ze){if(!i.isBuffer(le)&&!(le instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof Ee=="function")ze=Ee,Ee=0,Ue=le.length;else if(typeof Ue=="function")ze=Ue,Ue=le.length-Ee;else if(typeof ze!="function")throw new TypeError('"cb" argument must be a function');return f(Ee,le.length),p(Ue,Ee,le.length),B(le,Ee,Ue,ze)}function B(le,Ee,Ue,ze){if(process$1.browser){var Ze=le.buffer,Qe=new Uint8Array(Ze,Ee,Ue);if(a.getRandomValues(Qe),ze){process$1.nextTick(function(){ze(null,le)});return}return le}if(ze){n(Ue,function(wt,qt){if(wt)return ze(wt);qt.copy(le,Ee),ze(null,le)});return}var ct=n(Ue);return ct.copy(le,Ee),le}function N(le,Ee,Ue){if(typeof Ee>"u"&&(Ee=0),!i.isBuffer(le)&&!(le instanceof commonjsGlobal$1.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return f(Ee,le.length),Ue===void 0&&(Ue=le.length-Ee),p(Ue,Ee,le.length),B(le,Ee,Ue)}return browser}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var t=requireAlgos(),e=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return n};var i=requireBrowser$7();cryptoBrowserify.pbkdf2=i.pbkdf2,cryptoBrowserify.pbkdf2Sync=i.pbkdf2Sync;var s=requireBrowser$5();cryptoBrowserify.Cipher=s.Cipher,cryptoBrowserify.createCipher=s.createCipher,cryptoBrowserify.Cipheriv=s.Cipheriv,cryptoBrowserify.createCipheriv=s.createCipheriv,cryptoBrowserify.Decipher=s.Decipher,cryptoBrowserify.createDecipher=s.createDecipher,cryptoBrowserify.Decipheriv=s.Decipheriv,cryptoBrowserify.createDecipheriv=s.createDecipheriv,cryptoBrowserify.getCiphers=s.getCiphers,cryptoBrowserify.listCiphers=s.listCiphers;var a=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=a.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=a.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=a.getDiffieHellman,cryptoBrowserify.createDiffieHellman=a.createDiffieHellman,cryptoBrowserify.DiffieHellman=a.DiffieHellman;var l=requireBrowser$3();cryptoBrowserify.createSign=l.createSign,cryptoBrowserify.Sign=l.Sign,cryptoBrowserify.createVerify=l.createVerify,cryptoBrowserify.Verify=l.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var f=requireBrowser$1();cryptoBrowserify.publicEncrypt=f.publicEncrypt,cryptoBrowserify.privateEncrypt=f.privateEncrypt,cryptoBrowserify.publicDecrypt=f.publicDecrypt,cryptoBrowserify.privateDecrypt=f.privateDecrypt;var p=requireBrowser();return cryptoBrowserify.randomFill=p.randomFill,cryptoBrowserify.randomFillSync=p.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(t,e){(function(n,i){t.exports=i()})(commonjsGlobal$1,function(){var n=n||function(i,s){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof commonjsGlobal$1<"u"&&commonjsGlobal$1.crypto&&(a=commonjsGlobal$1.crypto),!a&&typeof commonjsRequire$1=="function")try{a=requireCryptoBrowserify()}catch{}var l=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function ct(){}return function(wt){var qt;return ct.prototype=wt,qt=new ct,ct.prototype=null,qt}}(),p={},C=p.lib={},B=C.Base=function(){return{extend:function(ct){var wt=f(this);return ct&&wt.mixIn(ct),(!wt.hasOwnProperty("init")||this.init===wt.init)&&(wt.init=function(){wt.$super.init.apply(this,arguments)}),wt.init.prototype=wt,wt.$super=this,wt},create:function(){var ct=this.extend();return ct.init.apply(ct,arguments),ct},init:function(){},mixIn:function(ct){for(var wt in ct)ct.hasOwnProperty(wt)&&(this[wt]=ct[wt]);ct.hasOwnProperty("toString")&&(this.toString=ct.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),N=C.WordArray=B.extend({init:function(ct,wt){ct=this.words=ct||[],wt!=s?this.sigBytes=wt:this.sigBytes=ct.length*4},toString:function(ct){return(ct||Ee).stringify(this)},concat:function(ct){var wt=this.words,qt=ct.words,nr=this.sigBytes,ir=ct.sigBytes;if(this.clamp(),nr%4)for(var or=0;or<ir;or++){var ur=qt[or>>>2]>>>24-or%4*8&255;wt[nr+or>>>2]|=ur<<24-(nr+or)%4*8}else for(var hr=0;hr<ir;hr+=4)wt[nr+hr>>>2]=qt[hr>>>2];return this.sigBytes+=ir,this},clamp:function(){var ct=this.words,wt=this.sigBytes;ct[wt>>>2]&=4294967295<<32-wt%4*8,ct.length=i.ceil(wt/4)},clone:function(){var ct=B.clone.call(this);return ct.words=this.words.slice(0),ct},random:function(ct){for(var wt=[],qt=0;qt<ct;qt+=4)wt.push(l());return new N.init(wt,ct)}}),le=p.enc={},Ee=le.Hex={stringify:function(ct){for(var wt=ct.words,qt=ct.sigBytes,nr=[],ir=0;ir<qt;ir++){var or=wt[ir>>>2]>>>24-ir%4*8&255;nr.push((or>>>4).toString(16)),nr.push((or&15).toString(16))}return nr.join("")},parse:function(ct){for(var wt=ct.length,qt=[],nr=0;nr<wt;nr+=2)qt[nr>>>3]|=parseInt(ct.substr(nr,2),16)<<24-nr%8*4;return new N.init(qt,wt/2)}},Ue=le.Latin1={stringify:function(ct){for(var wt=ct.words,qt=ct.sigBytes,nr=[],ir=0;ir<qt;ir++){var or=wt[ir>>>2]>>>24-ir%4*8&255;nr.push(String.fromCharCode(or))}return nr.join("")},parse:function(ct){for(var wt=ct.length,qt=[],nr=0;nr<wt;nr++)qt[nr>>>2]|=(ct.charCodeAt(nr)&255)<<24-nr%4*8;return new N.init(qt,wt)}},ze=le.Utf8={stringify:function(ct){try{return decodeURIComponent(escape(Ue.stringify(ct)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(ct){return Ue.parse(unescape(encodeURIComponent(ct)))}},Ze=C.BufferedBlockAlgorithm=B.extend({reset:function(){this._data=new N.init,this._nDataBytes=0},_append:function(ct){typeof ct=="string"&&(ct=ze.parse(ct)),this._data.concat(ct),this._nDataBytes+=ct.sigBytes},_process:function(ct){var wt,qt=this._data,nr=qt.words,ir=qt.sigBytes,or=this.blockSize,ur=or*4,hr=ir/ur;ct?hr=i.ceil(hr):hr=i.max((hr|0)-this._minBufferSize,0);var fr=hr*or,ar=i.min(fr*4,ir);if(fr){for(var Lt=0;Lt<fr;Lt+=or)this._doProcessBlock(nr,Lt);wt=nr.splice(0,fr),qt.sigBytes-=ar}return new N.init(wt,ar)},clone:function(){var ct=B.clone.call(this);return ct._data=this._data.clone(),ct},_minBufferSize:0});C.Hasher=Ze.extend({cfg:B.extend(),init:function(ct){this.cfg=this.cfg.extend(ct),this.reset()},reset:function(){Ze.reset.call(this),this._doReset()},update:function(ct){return this._append(ct),this._process(),this},finalize:function(ct){ct&&this._append(ct);var wt=this._doFinalize();return wt},blockSize:16,_createHelper:function(ct){return function(wt,qt){return new ct.init(qt).finalize(wt)}},_createHmacHelper:function(ct){return function(wt,qt){return new Qe.HMAC.init(ct,qt).finalize(wt)}}});var Qe=p.algo={};return p}(Math);return n})}(core)),core.exports}var x64Core={exports:{}},hasRequiredX64Core;function requireX64Core(){return hasRequiredX64Core||(hasRequiredX64Core=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(i){var s=n,a=s.lib,l=a.Base,f=a.WordArray,p=s.x64={};p.Word=l.extend({init:function(C,B){this.high=C,this.low=B}}),p.WordArray=l.extend({init:function(C,B){C=this.words=C||[],B!=i?this.sigBytes=B:this.sigBytes=C.length*8},toX32:function(){for(var C=this.words,B=C.length,N=[],le=0;le<B;le++){var Ee=C[le];N.push(Ee.high),N.push(Ee.low)}return f.create(N,this.sigBytes)},clone:function(){for(var C=l.clone.call(this),B=C.words=this.words.slice(0),N=B.length,le=0;le<N;le++)B[le]=B[le].clone();return C}})}(),n})}(x64Core)),x64Core.exports}var libTypedarrays={exports:{}},hasRequiredLibTypedarrays;function requireLibTypedarrays(){return hasRequiredLibTypedarrays||(hasRequiredLibTypedarrays=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(){if(typeof ArrayBuffer=="function"){var i=n,s=i.lib,a=s.WordArray,l=a.init,f=a.init=function(p){if(p instanceof ArrayBuffer&&(p=new Uint8Array(p)),(p instanceof Int8Array||typeof Uint8ClampedArray<"u"&&p instanceof Uint8ClampedArray||p instanceof Int16Array||p instanceof Uint16Array||p instanceof Int32Array||p instanceof Uint32Array||p instanceof Float32Array||p instanceof Float64Array)&&(p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),p instanceof Uint8Array){for(var C=p.byteLength,B=[],N=0;N<C;N++)B[N>>>2]|=p[N]<<24-N%4*8;l.call(this,B,C)}else l.apply(this,arguments)};f.prototype=a}}(),n.lib.WordArray})}(libTypedarrays)),libTypedarrays.exports}var encUtf16={exports:{}},hasRequiredEncUtf16;function requireEncUtf16(){return hasRequiredEncUtf16||(hasRequiredEncUtf16=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=i.enc;l.Utf16=l.Utf16BE={stringify:function(p){for(var C=p.words,B=p.sigBytes,N=[],le=0;le<B;le+=2){var Ee=C[le>>>2]>>>16-le%4*8&65535;N.push(String.fromCharCode(Ee))}return N.join("")},parse:function(p){for(var C=p.length,B=[],N=0;N<C;N++)B[N>>>1]|=p.charCodeAt(N)<<16-N%2*16;return a.create(B,C*2)}},l.Utf16LE={stringify:function(p){for(var C=p.words,B=p.sigBytes,N=[],le=0;le<B;le+=2){var Ee=f(C[le>>>2]>>>16-le%4*8&65535);N.push(String.fromCharCode(Ee))}return N.join("")},parse:function(p){for(var C=p.length,B=[],N=0;N<C;N++)B[N>>>1]|=f(p.charCodeAt(N)<<16-N%2*16);return a.create(B,C*2)}};function f(p){return p<<8&4278255360|p>>>8&16711935}}(),n.enc.Utf16})}(encUtf16)),encUtf16.exports}var encBase64={exports:{}},hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=i.enc;l.Base64={stringify:function(p){var C=p.words,B=p.sigBytes,N=this._map;p.clamp();for(var le=[],Ee=0;Ee<B;Ee+=3)for(var Ue=C[Ee>>>2]>>>24-Ee%4*8&255,ze=C[Ee+1>>>2]>>>24-(Ee+1)%4*8&255,Ze=C[Ee+2>>>2]>>>24-(Ee+2)%4*8&255,Qe=Ue<<16|ze<<8|Ze,ct=0;ct<4&&Ee+ct*.75<B;ct++)le.push(N.charAt(Qe>>>6*(3-ct)&63));var wt=N.charAt(64);if(wt)for(;le.length%4;)le.push(wt);return le.join("")},parse:function(p){var C=p.length,B=this._map,N=this._reverseMap;if(!N){N=this._reverseMap=[];for(var le=0;le<B.length;le++)N[B.charCodeAt(le)]=le}var Ee=B.charAt(64);if(Ee){var Ue=p.indexOf(Ee);Ue!==-1&&(C=Ue)}return f(p,C,N)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function f(p,C,B){for(var N=[],le=0,Ee=0;Ee<C;Ee++)if(Ee%4){var Ue=B[p.charCodeAt(Ee-1)]<<Ee%4*2,ze=B[p.charCodeAt(Ee)]>>>6-Ee%4*2,Ze=Ue|ze;N[le>>>2]|=Ze<<24-le%4*8,le++}return a.create(N,le)}}(),n.enc.Base64})}(encBase64)),encBase64.exports}var encBase64url={exports:{}},hasRequiredEncBase64url;function requireEncBase64url(){return hasRequiredEncBase64url||(hasRequiredEncBase64url=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=i.enc;l.Base64url={stringify:function(p,C){C===void 0&&(C=!0);var B=p.words,N=p.sigBytes,le=C?this._safe_map:this._map;p.clamp();for(var Ee=[],Ue=0;Ue<N;Ue+=3)for(var ze=B[Ue>>>2]>>>24-Ue%4*8&255,Ze=B[Ue+1>>>2]>>>24-(Ue+1)%4*8&255,Qe=B[Ue+2>>>2]>>>24-(Ue+2)%4*8&255,ct=ze<<16|Ze<<8|Qe,wt=0;wt<4&&Ue+wt*.75<N;wt++)Ee.push(le.charAt(ct>>>6*(3-wt)&63));var qt=le.charAt(64);if(qt)for(;Ee.length%4;)Ee.push(qt);return Ee.join("")},parse:function(p,C){C===void 0&&(C=!0);var B=p.length,N=C?this._safe_map:this._map,le=this._reverseMap;if(!le){le=this._reverseMap=[];for(var Ee=0;Ee<N.length;Ee++)le[N.charCodeAt(Ee)]=Ee}var Ue=N.charAt(64);if(Ue){var ze=p.indexOf(Ue);ze!==-1&&(B=ze)}return f(p,B,le)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function f(p,C,B){for(var N=[],le=0,Ee=0;Ee<C;Ee++)if(Ee%4){var Ue=B[p.charCodeAt(Ee-1)]<<Ee%4*2,ze=B[p.charCodeAt(Ee)]>>>6-Ee%4*2,Ze=Ue|ze;N[le>>>2]|=Ze<<24-le%4*8,le++}return a.create(N,le)}}(),n.enc.Base64url})}(encBase64url)),encBase64url.exports}var md5={exports:{}},hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(i){var s=n,a=s.lib,l=a.WordArray,f=a.Hasher,p=s.algo,C=[];(function(){for(var ze=0;ze<64;ze++)C[ze]=i.abs(i.sin(ze+1))*4294967296|0})();var B=p.MD5=f.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(ze,Ze){for(var Qe=0;Qe<16;Qe++){var ct=Ze+Qe,wt=ze[ct];ze[ct]=(wt<<8|wt>>>24)&16711935|(wt<<24|wt>>>8)&4278255360}var qt=this._hash.words,nr=ze[Ze+0],ir=ze[Ze+1],or=ze[Ze+2],ur=ze[Ze+3],hr=ze[Ze+4],fr=ze[Ze+5],ar=ze[Ze+6],Lt=ze[Ze+7],Vt=ze[Ze+8],tt=ze[Ze+9],Ye=ze[Ze+10],ot=ze[Ze+11],Et=ze[Ze+12],er=ze[Ze+13],rr=ze[Ze+14],yt=ze[Ze+15],tr=qt[0],Ut=qt[1],Ft=qt[2],sr=qt[3];tr=N(tr,Ut,Ft,sr,nr,7,C[0]),sr=N(sr,tr,Ut,Ft,ir,12,C[1]),Ft=N(Ft,sr,tr,Ut,or,17,C[2]),Ut=N(Ut,Ft,sr,tr,ur,22,C[3]),tr=N(tr,Ut,Ft,sr,hr,7,C[4]),sr=N(sr,tr,Ut,Ft,fr,12,C[5]),Ft=N(Ft,sr,tr,Ut,ar,17,C[6]),Ut=N(Ut,Ft,sr,tr,Lt,22,C[7]),tr=N(tr,Ut,Ft,sr,Vt,7,C[8]),sr=N(sr,tr,Ut,Ft,tt,12,C[9]),Ft=N(Ft,sr,tr,Ut,Ye,17,C[10]),Ut=N(Ut,Ft,sr,tr,ot,22,C[11]),tr=N(tr,Ut,Ft,sr,Et,7,C[12]),sr=N(sr,tr,Ut,Ft,er,12,C[13]),Ft=N(Ft,sr,tr,Ut,rr,17,C[14]),Ut=N(Ut,Ft,sr,tr,yt,22,C[15]),tr=le(tr,Ut,Ft,sr,ir,5,C[16]),sr=le(sr,tr,Ut,Ft,ar,9,C[17]),Ft=le(Ft,sr,tr,Ut,ot,14,C[18]),Ut=le(Ut,Ft,sr,tr,nr,20,C[19]),tr=le(tr,Ut,Ft,sr,fr,5,C[20]),sr=le(sr,tr,Ut,Ft,Ye,9,C[21]),Ft=le(Ft,sr,tr,Ut,yt,14,C[22]),Ut=le(Ut,Ft,sr,tr,hr,20,C[23]),tr=le(tr,Ut,Ft,sr,tt,5,C[24]),sr=le(sr,tr,Ut,Ft,rr,9,C[25]),Ft=le(Ft,sr,tr,Ut,ur,14,C[26]),Ut=le(Ut,Ft,sr,tr,Vt,20,C[27]),tr=le(tr,Ut,Ft,sr,er,5,C[28]),sr=le(sr,tr,Ut,Ft,or,9,C[29]),Ft=le(Ft,sr,tr,Ut,Lt,14,C[30]),Ut=le(Ut,Ft,sr,tr,Et,20,C[31]),tr=Ee(tr,Ut,Ft,sr,fr,4,C[32]),sr=Ee(sr,tr,Ut,Ft,Vt,11,C[33]),Ft=Ee(Ft,sr,tr,Ut,ot,16,C[34]),Ut=Ee(Ut,Ft,sr,tr,rr,23,C[35]),tr=Ee(tr,Ut,Ft,sr,ir,4,C[36]),sr=Ee(sr,tr,Ut,Ft,hr,11,C[37]),Ft=Ee(Ft,sr,tr,Ut,Lt,16,C[38]),Ut=Ee(Ut,Ft,sr,tr,Ye,23,C[39]),tr=Ee(tr,Ut,Ft,sr,er,4,C[40]),sr=Ee(sr,tr,Ut,Ft,nr,11,C[41]),Ft=Ee(Ft,sr,tr,Ut,ur,16,C[42]),Ut=Ee(Ut,Ft,sr,tr,ar,23,C[43]),tr=Ee(tr,Ut,Ft,sr,tt,4,C[44]),sr=Ee(sr,tr,Ut,Ft,Et,11,C[45]),Ft=Ee(Ft,sr,tr,Ut,yt,16,C[46]),Ut=Ee(Ut,Ft,sr,tr,or,23,C[47]),tr=Ue(tr,Ut,Ft,sr,nr,6,C[48]),sr=Ue(sr,tr,Ut,Ft,Lt,10,C[49]),Ft=Ue(Ft,sr,tr,Ut,rr,15,C[50]),Ut=Ue(Ut,Ft,sr,tr,fr,21,C[51]),tr=Ue(tr,Ut,Ft,sr,Et,6,C[52]),sr=Ue(sr,tr,Ut,Ft,ur,10,C[53]),Ft=Ue(Ft,sr,tr,Ut,Ye,15,C[54]),Ut=Ue(Ut,Ft,sr,tr,ir,21,C[55]),tr=Ue(tr,Ut,Ft,sr,Vt,6,C[56]),sr=Ue(sr,tr,Ut,Ft,yt,10,C[57]),Ft=Ue(Ft,sr,tr,Ut,ar,15,C[58]),Ut=Ue(Ut,Ft,sr,tr,er,21,C[59]),tr=Ue(tr,Ut,Ft,sr,hr,6,C[60]),sr=Ue(sr,tr,Ut,Ft,ot,10,C[61]),Ft=Ue(Ft,sr,tr,Ut,or,15,C[62]),Ut=Ue(Ut,Ft,sr,tr,tt,21,C[63]),qt[0]=qt[0]+tr|0,qt[1]=qt[1]+Ut|0,qt[2]=qt[2]+Ft|0,qt[3]=qt[3]+sr|0},_doFinalize:function(){var ze=this._data,Ze=ze.words,Qe=this._nDataBytes*8,ct=ze.sigBytes*8;Ze[ct>>>5]|=128<<24-ct%32;var wt=i.floor(Qe/4294967296),qt=Qe;Ze[(ct+64>>>9<<4)+15]=(wt<<8|wt>>>24)&16711935|(wt<<24|wt>>>8)&4278255360,Ze[(ct+64>>>9<<4)+14]=(qt<<8|qt>>>24)&16711935|(qt<<24|qt>>>8)&4278255360,ze.sigBytes=(Ze.length+1)*4,this._process();for(var nr=this._hash,ir=nr.words,or=0;or<4;or++){var ur=ir[or];ir[or]=(ur<<8|ur>>>24)&16711935|(ur<<24|ur>>>8)&4278255360}return nr},clone:function(){var ze=f.clone.call(this);return ze._hash=this._hash.clone(),ze}});function N(ze,Ze,Qe,ct,wt,qt,nr){var ir=ze+(Ze&Qe|~Ze&ct)+wt+nr;return(ir<<qt|ir>>>32-qt)+Ze}function le(ze,Ze,Qe,ct,wt,qt,nr){var ir=ze+(Ze&ct|Qe&~ct)+wt+nr;return(ir<<qt|ir>>>32-qt)+Ze}function Ee(ze,Ze,Qe,ct,wt,qt,nr){var ir=ze+(Ze^Qe^ct)+wt+nr;return(ir<<qt|ir>>>32-qt)+Ze}function Ue(ze,Ze,Qe,ct,wt,qt,nr){var ir=ze+(Qe^(Ze|~ct))+wt+nr;return(ir<<qt|ir>>>32-qt)+Ze}s.MD5=f._createHelper(B),s.HmacMD5=f._createHmacHelper(B)}(Math),n.MD5})}(md5)),md5.exports}var sha1={exports:{}},hasRequiredSha1;function requireSha1(){return hasRequiredSha1||(hasRequiredSha1=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=s.Hasher,f=i.algo,p=[],C=f.SHA1=l.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(B,N){for(var le=this._hash.words,Ee=le[0],Ue=le[1],ze=le[2],Ze=le[3],Qe=le[4],ct=0;ct<80;ct++){if(ct<16)p[ct]=B[N+ct]|0;else{var wt=p[ct-3]^p[ct-8]^p[ct-14]^p[ct-16];p[ct]=wt<<1|wt>>>31}var qt=(Ee<<5|Ee>>>27)+Qe+p[ct];ct<20?qt+=(Ue&ze|~Ue&Ze)+1518500249:ct<40?qt+=(Ue^ze^Ze)+1859775393:ct<60?qt+=(Ue&ze|Ue&Ze|ze&Ze)-1894007588:qt+=(Ue^ze^Ze)-899497514,Qe=Ze,Ze=ze,ze=Ue<<30|Ue>>>2,Ue=Ee,Ee=qt}le[0]=le[0]+Ee|0,le[1]=le[1]+Ue|0,le[2]=le[2]+ze|0,le[3]=le[3]+Ze|0,le[4]=le[4]+Qe|0},_doFinalize:function(){var B=this._data,N=B.words,le=this._nDataBytes*8,Ee=B.sigBytes*8;return N[Ee>>>5]|=128<<24-Ee%32,N[(Ee+64>>>9<<4)+14]=Math.floor(le/4294967296),N[(Ee+64>>>9<<4)+15]=le,B.sigBytes=N.length*4,this._process(),this._hash},clone:function(){var B=l.clone.call(this);return B._hash=this._hash.clone(),B}});i.SHA1=l._createHelper(C),i.HmacSHA1=l._createHmacHelper(C)}(),n.SHA1})}(sha1)),sha1.exports}var sha256={exports:{}},hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){return function(i){var s=n,a=s.lib,l=a.WordArray,f=a.Hasher,p=s.algo,C=[],B=[];(function(){function Ee(Qe){for(var ct=i.sqrt(Qe),wt=2;wt<=ct;wt++)if(!(Qe%wt))return!1;return!0}function Ue(Qe){return(Qe-(Qe|0))*4294967296|0}for(var ze=2,Ze=0;Ze<64;)Ee(ze)&&(Ze<8&&(C[Ze]=Ue(i.pow(ze,1/2))),B[Ze]=Ue(i.pow(ze,1/3)),Ze++),ze++})();var N=[],le=p.SHA256=f.extend({_doReset:function(){this._hash=new l.init(C.slice(0))},_doProcessBlock:function(Ee,Ue){for(var ze=this._hash.words,Ze=ze[0],Qe=ze[1],ct=ze[2],wt=ze[3],qt=ze[4],nr=ze[5],ir=ze[6],or=ze[7],ur=0;ur<64;ur++){if(ur<16)N[ur]=Ee[Ue+ur]|0;else{var hr=N[ur-15],fr=(hr<<25|hr>>>7)^(hr<<14|hr>>>18)^hr>>>3,ar=N[ur-2],Lt=(ar<<15|ar>>>17)^(ar<<13|ar>>>19)^ar>>>10;N[ur]=fr+N[ur-7]+Lt+N[ur-16]}var Vt=qt&nr^~qt&ir,tt=Ze&Qe^Ze&ct^Qe&ct,Ye=(Ze<<30|Ze>>>2)^(Ze<<19|Ze>>>13)^(Ze<<10|Ze>>>22),ot=(qt<<26|qt>>>6)^(qt<<21|qt>>>11)^(qt<<7|qt>>>25),Et=or+ot+Vt+B[ur]+N[ur],er=Ye+tt;or=ir,ir=nr,nr=qt,qt=wt+Et|0,wt=ct,ct=Qe,Qe=Ze,Ze=Et+er|0}ze[0]=ze[0]+Ze|0,ze[1]=ze[1]+Qe|0,ze[2]=ze[2]+ct|0,ze[3]=ze[3]+wt|0,ze[4]=ze[4]+qt|0,ze[5]=ze[5]+nr|0,ze[6]=ze[6]+ir|0,ze[7]=ze[7]+or|0},_doFinalize:function(){var Ee=this._data,Ue=Ee.words,ze=this._nDataBytes*8,Ze=Ee.sigBytes*8;return Ue[Ze>>>5]|=128<<24-Ze%32,Ue[(Ze+64>>>9<<4)+14]=i.floor(ze/4294967296),Ue[(Ze+64>>>9<<4)+15]=ze,Ee.sigBytes=Ue.length*4,this._process(),this._hash},clone:function(){var Ee=f.clone.call(this);return Ee._hash=this._hash.clone(),Ee}});s.SHA256=f._createHelper(le),s.HmacSHA256=f._createHmacHelper(le)}(Math),n.SHA256})}(sha256)),sha256.exports}var sha224={exports:{}},hasRequiredSha224;function requireSha224(){return hasRequiredSha224||(hasRequiredSha224=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireSha256())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=i.algo,f=l.SHA256,p=l.SHA224=f.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var C=f._doFinalize.call(this);return C.sigBytes-=4,C}});i.SHA224=f._createHelper(p),i.HmacSHA224=f._createHmacHelper(p)}(),n.SHA224})}(sha224)),sha224.exports}var sha512={exports:{}},hasRequiredSha512;function requireSha512(){return hasRequiredSha512||(hasRequiredSha512=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireX64Core())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.Hasher,l=i.x64,f=l.Word,p=l.WordArray,C=i.algo;function B(){return f.create.apply(f,arguments)}var N=[B(1116352408,3609767458),B(1899447441,602891725),B(3049323471,3964484399),B(3921009573,2173295548),B(961987163,4081628472),B(1508970993,3053834265),B(2453635748,2937671579),B(2870763221,3664609560),B(3624381080,2734883394),B(310598401,1164996542),B(607225278,1323610764),B(1426881987,3590304994),B(1925078388,4068182383),B(2162078206,991336113),B(2614888103,633803317),B(3248222580,3479774868),B(3835390401,2666613458),B(4022224774,944711139),B(264347078,2341262773),B(604807628,2007800933),B(770255983,1495990901),B(1249150122,1856431235),B(1555081692,3175218132),B(1996064986,2198950837),B(2554220882,3999719339),B(2821834349,766784016),B(2952996808,2566594879),B(3210313671,3203337956),B(3336571891,1034457026),B(3584528711,2466948901),B(113926993,3758326383),B(338241895,168717936),B(666307205,1188179964),B(773529912,1546045734),B(1294757372,1522805485),B(1396182291,2643833823),B(1695183700,2343527390),B(1986661051,1014477480),B(2177026350,1206759142),B(2456956037,344077627),B(2730485921,1290863460),B(2820302411,3158454273),B(3259730800,3505952657),B(3345764771,106217008),B(3516065817,3606008344),B(3600352804,1432725776),B(4094571909,1467031594),B(275423344,851169720),B(430227734,3100823752),B(506948616,1363258195),B(659060556,3750685593),B(883997877,3785050280),B(958139571,3318307427),B(1322822218,3812723403),B(1537002063,2003034995),B(1747873779,3602036899),B(1955562222,1575990012),B(2024104815,1125592928),B(2227730452,2716904306),B(2361852424,442776044),B(2428436474,593698344),B(2756734187,3733110249),B(3204031479,2999351573),B(3329325298,3815920427),B(3391569614,3928383900),B(3515267271,566280711),B(3940187606,3454069534),B(4118630271,4000239992),B(116418474,1914138554),B(174292421,2731055270),B(289380356,3203993006),B(460393269,320620315),B(685471733,587496836),B(852142971,1086792851),B(1017036298,365543100),B(1126000580,2618297676),B(1288033470,3409855158),B(1501505948,4234509866),B(1607167915,987167468),B(1816402316,1246189591)],le=[];(function(){for(var Ue=0;Ue<80;Ue++)le[Ue]=B()})();var Ee=C.SHA512=a.extend({_doReset:function(){this._hash=new p.init([new f.init(1779033703,4089235720),new f.init(3144134277,2227873595),new f.init(1013904242,4271175723),new f.init(2773480762,1595750129),new f.init(1359893119,2917565137),new f.init(2600822924,725511199),new f.init(528734635,4215389547),new f.init(1541459225,327033209)])},_doProcessBlock:function(Ue,ze){for(var Ze=this._hash.words,Qe=Ze[0],ct=Ze[1],wt=Ze[2],qt=Ze[3],nr=Ze[4],ir=Ze[5],or=Ze[6],ur=Ze[7],hr=Qe.high,fr=Qe.low,ar=ct.high,Lt=ct.low,Vt=wt.high,tt=wt.low,Ye=qt.high,ot=qt.low,Et=nr.high,er=nr.low,rr=ir.high,yt=ir.low,tr=or.high,Ut=or.low,Ft=ur.high,sr=ur.low,vr=hr,_r=fr,dr=ar,gr=Lt,$r=Vt,pr=tt,lr=Ye,cr=ot,yr=Et,Sr=er,Ar=rr,Tr=yt,xr=tr,Cr=Ut,wr=Ft,Er=sr,kr=0;kr<80;kr++){var Br,Rr,Ir=le[kr];if(kr<16)Rr=Ir.high=Ue[ze+kr*2]|0,Br=Ir.low=Ue[ze+kr*2+1]|0;else{var Dr=le[kr-15],zr=Dr.high,jr=Dr.low,Fr=(zr>>>1|jr<<31)^(zr>>>8|jr<<24)^zr>>>7,mn=(jr>>>1|zr<<31)^(jr>>>8|zr<<24)^(jr>>>7|zr<<25),Gr=le[kr-2],rn=Gr.high,Vn=Gr.low,Lr=(rn>>>19|Vn<<13)^(rn<<3|Vn>>>29)^rn>>>6,sn=(Vn>>>19|rn<<13)^(Vn<<3|rn>>>29)^(Vn>>>6|rn<<26),Gn=le[kr-7],qr=Gn.high,Vr=Gn.low,Zn=le[kr-16],Zr=Zn.high,an=Zn.low;Br=mn+Vr,Rr=Fr+qr+(Br>>>0<mn>>>0?1:0),Br=Br+sn,Rr=Rr+Lr+(Br>>>0<sn>>>0?1:0),Br=Br+an,Rr=Rr+Zr+(Br>>>0<an>>>0?1:0),Ir.high=Rr,Ir.low=Br}var Xn=yr&Ar^~yr&xr,Wr=Sr&Tr^~Sr&Cr,Tn=vr&dr^vr&$r^dr&$r,Jn=_r&gr^_r&pr^gr&pr,Xr=(vr>>>28|_r<<4)^(vr<<30|_r>>>2)^(vr<<25|_r>>>7),cn=(_r>>>28|vr<<4)^(_r<<30|vr>>>2)^(_r<<25|vr>>>7),Yn=(yr>>>14|Sr<<18)^(yr>>>18|Sr<<14)^(yr<<23|Sr>>>9),Jr=(Sr>>>14|yr<<18)^(Sr>>>18|yr<<14)^(Sr<<23|yr>>>9),fn=N[kr],Qn=fn.high,Hr=fn.low,en=Er+Jr,Wn=wr+Yn+(en>>>0<Er>>>0?1:0),en=en+Wr,Wn=Wn+Xn+(en>>>0<Wr>>>0?1:0),en=en+Hr,Wn=Wn+Qn+(en>>>0<Hr>>>0?1:0),en=en+Br,Wn=Wn+Rr+(en>>>0<Br>>>0?1:0),Kr=cn+Jn,Mn=Xr+Tn+(Kr>>>0<cn>>>0?1:0);wr=xr,Er=Cr,xr=Ar,Cr=Tr,Ar=yr,Tr=Sr,Sr=cr+en|0,yr=lr+Wn+(Sr>>>0<cr>>>0?1:0)|0,lr=$r,cr=pr,$r=dr,pr=gr,dr=vr,gr=_r,_r=en+Kr|0,vr=Wn+Mn+(_r>>>0<en>>>0?1:0)|0}fr=Qe.low=fr+_r,Qe.high=hr+vr+(fr>>>0<_r>>>0?1:0),Lt=ct.low=Lt+gr,ct.high=ar+dr+(Lt>>>0<gr>>>0?1:0),tt=wt.low=tt+pr,wt.high=Vt+$r+(tt>>>0<pr>>>0?1:0),ot=qt.low=ot+cr,qt.high=Ye+lr+(ot>>>0<cr>>>0?1:0),er=nr.low=er+Sr,nr.high=Et+yr+(er>>>0<Sr>>>0?1:0),yt=ir.low=yt+Tr,ir.high=rr+Ar+(yt>>>0<Tr>>>0?1:0),Ut=or.low=Ut+Cr,or.high=tr+xr+(Ut>>>0<Cr>>>0?1:0),sr=ur.low=sr+Er,ur.high=Ft+wr+(sr>>>0<Er>>>0?1:0)},_doFinalize:function(){var Ue=this._data,ze=Ue.words,Ze=this._nDataBytes*8,Qe=Ue.sigBytes*8;ze[Qe>>>5]|=128<<24-Qe%32,ze[(Qe+128>>>10<<5)+30]=Math.floor(Ze/4294967296),ze[(Qe+128>>>10<<5)+31]=Ze,Ue.sigBytes=ze.length*4,this._process();var ct=this._hash.toX32();return ct},clone:function(){var Ue=a.clone.call(this);return Ue._hash=this._hash.clone(),Ue},blockSize:1024/32});i.SHA512=a._createHelper(Ee),i.HmacSHA512=a._createHmacHelper(Ee)}(),n.SHA512})}(sha512)),sha512.exports}var sha384={exports:{}},hasRequiredSha384;function requireSha384(){return hasRequiredSha384||(hasRequiredSha384=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireX64Core(),requireSha512())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.x64,a=s.Word,l=s.WordArray,f=i.algo,p=f.SHA512,C=f.SHA384=p.extend({_doReset:function(){this._hash=new l.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var B=p._doFinalize.call(this);return B.sigBytes-=16,B}});i.SHA384=p._createHelper(C),i.HmacSHA384=p._createHmacHelper(C)}(),n.SHA384})}(sha384)),sha384.exports}var sha3={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireX64Core())})(commonjsGlobal$1,function(n){return function(i){var s=n,a=s.lib,l=a.WordArray,f=a.Hasher,p=s.x64,C=p.Word,B=s.algo,N=[],le=[],Ee=[];(function(){for(var Ze=1,Qe=0,ct=0;ct<24;ct++){N[Ze+5*Qe]=(ct+1)*(ct+2)/2%64;var wt=Qe%5,qt=(2*Ze+3*Qe)%5;Ze=wt,Qe=qt}for(var Ze=0;Ze<5;Ze++)for(var Qe=0;Qe<5;Qe++)le[Ze+5*Qe]=Qe+(2*Ze+3*Qe)%5*5;for(var nr=1,ir=0;ir<24;ir++){for(var or=0,ur=0,hr=0;hr<7;hr++){if(nr&1){var fr=(1<<hr)-1;fr<32?ur^=1<<fr:or^=1<<fr-32}nr&128?nr=nr<<1^113:nr<<=1}Ee[ir]=C.create(or,ur)}})();var Ue=[];(function(){for(var Ze=0;Ze<25;Ze++)Ue[Ze]=C.create()})();var ze=B.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var Ze=this._state=[],Qe=0;Qe<25;Qe++)Ze[Qe]=new C.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(Ze,Qe){for(var ct=this._state,wt=this.blockSize/2,qt=0;qt<wt;qt++){var nr=Ze[Qe+2*qt],ir=Ze[Qe+2*qt+1];nr=(nr<<8|nr>>>24)&16711935|(nr<<24|nr>>>8)&4278255360,ir=(ir<<8|ir>>>24)&16711935|(ir<<24|ir>>>8)&4278255360;var or=ct[qt];or.high^=ir,or.low^=nr}for(var ur=0;ur<24;ur++){for(var hr=0;hr<5;hr++){for(var fr=0,ar=0,Lt=0;Lt<5;Lt++){var or=ct[hr+5*Lt];fr^=or.high,ar^=or.low}var Vt=Ue[hr];Vt.high=fr,Vt.low=ar}for(var hr=0;hr<5;hr++)for(var tt=Ue[(hr+4)%5],Ye=Ue[(hr+1)%5],ot=Ye.high,Et=Ye.low,fr=tt.high^(ot<<1|Et>>>31),ar=tt.low^(Et<<1|ot>>>31),Lt=0;Lt<5;Lt++){var or=ct[hr+5*Lt];or.high^=fr,or.low^=ar}for(var er=1;er<25;er++){var fr,ar,or=ct[er],rr=or.high,yt=or.low,tr=N[er];tr<32?(fr=rr<<tr|yt>>>32-tr,ar=yt<<tr|rr>>>32-tr):(fr=yt<<tr-32|rr>>>64-tr,ar=rr<<tr-32|yt>>>64-tr);var Ut=Ue[le[er]];Ut.high=fr,Ut.low=ar}var Ft=Ue[0],sr=ct[0];Ft.high=sr.high,Ft.low=sr.low;for(var hr=0;hr<5;hr++)for(var Lt=0;Lt<5;Lt++){var er=hr+5*Lt,or=ct[er],vr=Ue[er],_r=Ue[(hr+1)%5+5*Lt],dr=Ue[(hr+2)%5+5*Lt];or.high=vr.high^~_r.high&dr.high,or.low=vr.low^~_r.low&dr.low}var or=ct[0],gr=Ee[ur];or.high^=gr.high,or.low^=gr.low}},_doFinalize:function(){var Ze=this._data,Qe=Ze.words;this._nDataBytes*8;var ct=Ze.sigBytes*8,wt=this.blockSize*32;Qe[ct>>>5]|=1<<24-ct%32,Qe[(i.ceil((ct+1)/wt)*wt>>>5)-1]|=128,Ze.sigBytes=Qe.length*4,this._process();for(var qt=this._state,nr=this.cfg.outputLength/8,ir=nr/8,or=[],ur=0;ur<ir;ur++){var hr=qt[ur],fr=hr.high,ar=hr.low;fr=(fr<<8|fr>>>24)&16711935|(fr<<24|fr>>>8)&4278255360,ar=(ar<<8|ar>>>24)&16711935|(ar<<24|ar>>>8)&4278255360,or.push(ar),or.push(fr)}return new l.init(or,nr)},clone:function(){for(var Ze=f.clone.call(this),Qe=Ze._state=this._state.slice(0),ct=0;ct<25;ct++)Qe[ct]=Qe[ct].clone();return Ze}});s.SHA3=f._createHelper(ze),s.HmacSHA3=f._createHmacHelper(ze)}(Math),n.SHA3})}(sha3)),sha3.exports}var ripemd160={exports:{}},hasRequiredRipemd160;function requireRipemd160(){return hasRequiredRipemd160||(hasRequiredRipemd160=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(i){var s=n,a=s.lib,l=a.WordArray,f=a.Hasher,p=s.algo,C=l.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),B=l.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),N=l.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),le=l.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),Ee=l.create([0,1518500249,1859775393,2400959708,2840853838]),Ue=l.create([1352829926,1548603684,1836072691,2053994217,0]),ze=p.RIPEMD160=f.extend({_doReset:function(){this._hash=l.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(ir,or){for(var ur=0;ur<16;ur++){var hr=or+ur,fr=ir[hr];ir[hr]=(fr<<8|fr>>>24)&16711935|(fr<<24|fr>>>8)&4278255360}var ar=this._hash.words,Lt=Ee.words,Vt=Ue.words,tt=C.words,Ye=B.words,ot=N.words,Et=le.words,er,rr,yt,tr,Ut,Ft,sr,vr,_r,dr;Ft=er=ar[0],sr=rr=ar[1],vr=yt=ar[2],_r=tr=ar[3],dr=Ut=ar[4];for(var gr,ur=0;ur<80;ur+=1)gr=er+ir[or+tt[ur]]|0,ur<16?gr+=Ze(rr,yt,tr)+Lt[0]:ur<32?gr+=Qe(rr,yt,tr)+Lt[1]:ur<48?gr+=ct(rr,yt,tr)+Lt[2]:ur<64?gr+=wt(rr,yt,tr)+Lt[3]:gr+=qt(rr,yt,tr)+Lt[4],gr=gr|0,gr=nr(gr,ot[ur]),gr=gr+Ut|0,er=Ut,Ut=tr,tr=nr(yt,10),yt=rr,rr=gr,gr=Ft+ir[or+Ye[ur]]|0,ur<16?gr+=qt(sr,vr,_r)+Vt[0]:ur<32?gr+=wt(sr,vr,_r)+Vt[1]:ur<48?gr+=ct(sr,vr,_r)+Vt[2]:ur<64?gr+=Qe(sr,vr,_r)+Vt[3]:gr+=Ze(sr,vr,_r)+Vt[4],gr=gr|0,gr=nr(gr,Et[ur]),gr=gr+dr|0,Ft=dr,dr=_r,_r=nr(vr,10),vr=sr,sr=gr;gr=ar[1]+yt+_r|0,ar[1]=ar[2]+tr+dr|0,ar[2]=ar[3]+Ut+Ft|0,ar[3]=ar[4]+er+sr|0,ar[4]=ar[0]+rr+vr|0,ar[0]=gr},_doFinalize:function(){var ir=this._data,or=ir.words,ur=this._nDataBytes*8,hr=ir.sigBytes*8;or[hr>>>5]|=128<<24-hr%32,or[(hr+64>>>9<<4)+14]=(ur<<8|ur>>>24)&16711935|(ur<<24|ur>>>8)&4278255360,ir.sigBytes=(or.length+1)*4,this._process();for(var fr=this._hash,ar=fr.words,Lt=0;Lt<5;Lt++){var Vt=ar[Lt];ar[Lt]=(Vt<<8|Vt>>>24)&16711935|(Vt<<24|Vt>>>8)&4278255360}return fr},clone:function(){var ir=f.clone.call(this);return ir._hash=this._hash.clone(),ir}});function Ze(ir,or,ur){return ir^or^ur}function Qe(ir,or,ur){return ir&or|~ir&ur}function ct(ir,or,ur){return(ir|~or)^ur}function wt(ir,or,ur){return ir&ur|or&~ur}function qt(ir,or,ur){return ir^(or|~ur)}function nr(ir,or){return ir<<or|ir>>>32-or}s.RIPEMD160=f._createHelper(ze),s.HmacRIPEMD160=f._createHmacHelper(ze)}(),n.RIPEMD160})}(ripemd160)),ripemd160.exports}var hmac={exports:{}},hasRequiredHmac;function requireHmac(){return hasRequiredHmac||(hasRequiredHmac=1,function(t,e){(function(n,i){t.exports=i(requireCore())})(commonjsGlobal$1,function(n){(function(){var i=n,s=i.lib,a=s.Base,l=i.enc,f=l.Utf8,p=i.algo;p.HMAC=a.extend({init:function(C,B){C=this._hasher=new C.init,typeof B=="string"&&(B=f.parse(B));var N=C.blockSize,le=N*4;B.sigBytes>le&&(B=C.finalize(B)),B.clamp();for(var Ee=this._oKey=B.clone(),Ue=this._iKey=B.clone(),ze=Ee.words,Ze=Ue.words,Qe=0;Qe<N;Qe++)ze[Qe]^=1549556828,Ze[Qe]^=909522486;Ee.sigBytes=Ue.sigBytes=le,this.reset()},reset:function(){var C=this._hasher;C.reset(),C.update(this._iKey)},update:function(C){return this._hasher.update(C),this},finalize:function(C){var B=this._hasher,N=B.finalize(C);B.reset();var le=B.finalize(this._oKey.clone().concat(N));return le}})})()})}(hmac)),hmac.exports}var pbkdf2={exports:{}},hasRequiredPbkdf2;function requirePbkdf2(){return hasRequiredPbkdf2||(hasRequiredPbkdf2=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireSha256(),requireHmac())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.Base,l=s.WordArray,f=i.algo,p=f.SHA256,C=f.HMAC,B=f.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:p,iterations:25e4}),init:function(N){this.cfg=this.cfg.extend(N)},compute:function(N,le){for(var Ee=this.cfg,Ue=C.create(Ee.hasher,N),ze=l.create(),Ze=l.create([1]),Qe=ze.words,ct=Ze.words,wt=Ee.keySize,qt=Ee.iterations;Qe.length<wt;){var nr=Ue.update(le).finalize(Ze);Ue.reset();for(var ir=nr.words,or=ir.length,ur=nr,hr=1;hr<qt;hr++){ur=Ue.finalize(ur),Ue.reset();for(var fr=ur.words,ar=0;ar<or;ar++)ir[ar]^=fr[ar]}ze.concat(nr),ct[0]++}return ze.sigBytes=wt*4,ze}});i.PBKDF2=function(N,le,Ee){return B.create(Ee).compute(N,le)}}(),n.PBKDF2})}(pbkdf2)),pbkdf2.exports}var evpkdf={exports:{}},hasRequiredEvpkdf;function requireEvpkdf(){return hasRequiredEvpkdf||(hasRequiredEvpkdf=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireSha1(),requireHmac())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.Base,l=s.WordArray,f=i.algo,p=f.MD5,C=f.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:p,iterations:1}),init:function(B){this.cfg=this.cfg.extend(B)},compute:function(B,N){for(var le,Ee=this.cfg,Ue=Ee.hasher.create(),ze=l.create(),Ze=ze.words,Qe=Ee.keySize,ct=Ee.iterations;Ze.length<Qe;){le&&Ue.update(le),le=Ue.update(B).finalize(N),Ue.reset();for(var wt=1;wt<ct;wt++)le=Ue.finalize(le),Ue.reset();ze.concat(le)}return ze.sigBytes=Qe*4,ze}});i.EvpKDF=function(B,N,le){return C.create(le).compute(B,N)}}(),n.EvpKDF})}(evpkdf)),evpkdf.exports}var cipherCore={exports:{}},hasRequiredCipherCore;function requireCipherCore(){return hasRequiredCipherCore||(hasRequiredCipherCore=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEvpkdf())})(commonjsGlobal$1,function(n){n.lib.Cipher||function(i){var s=n,a=s.lib,l=a.Base,f=a.WordArray,p=a.BufferedBlockAlgorithm,C=s.enc;C.Utf8;var B=C.Base64,N=s.algo,le=N.EvpKDF,Ee=a.Cipher=p.extend({cfg:l.extend(),createEncryptor:function(fr,ar){return this.create(this._ENC_XFORM_MODE,fr,ar)},createDecryptor:function(fr,ar){return this.create(this._DEC_XFORM_MODE,fr,ar)},init:function(fr,ar,Lt){this.cfg=this.cfg.extend(Lt),this._xformMode=fr,this._key=ar,this.reset()},reset:function(){p.reset.call(this),this._doReset()},process:function(fr){return this._append(fr),this._process()},finalize:function(fr){fr&&this._append(fr);var ar=this._doFinalize();return ar},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function fr(ar){return typeof ar=="string"?hr:ir}return function(ar){return{encrypt:function(Lt,Vt,tt){return fr(Vt).encrypt(ar,Lt,Vt,tt)},decrypt:function(Lt,Vt,tt){return fr(Vt).decrypt(ar,Lt,Vt,tt)}}}}()});a.StreamCipher=Ee.extend({_doFinalize:function(){var fr=this._process(!0);return fr},blockSize:1});var Ue=s.mode={},ze=a.BlockCipherMode=l.extend({createEncryptor:function(fr,ar){return this.Encryptor.create(fr,ar)},createDecryptor:function(fr,ar){return this.Decryptor.create(fr,ar)},init:function(fr,ar){this._cipher=fr,this._iv=ar}}),Ze=Ue.CBC=function(){var fr=ze.extend();fr.Encryptor=fr.extend({processBlock:function(Lt,Vt){var tt=this._cipher,Ye=tt.blockSize;ar.call(this,Lt,Vt,Ye),tt.encryptBlock(Lt,Vt),this._prevBlock=Lt.slice(Vt,Vt+Ye)}}),fr.Decryptor=fr.extend({processBlock:function(Lt,Vt){var tt=this._cipher,Ye=tt.blockSize,ot=Lt.slice(Vt,Vt+Ye);tt.decryptBlock(Lt,Vt),ar.call(this,Lt,Vt,Ye),this._prevBlock=ot}});function ar(Lt,Vt,tt){var Ye,ot=this._iv;ot?(Ye=ot,this._iv=i):Ye=this._prevBlock;for(var Et=0;Et<tt;Et++)Lt[Vt+Et]^=Ye[Et]}return fr}(),Qe=s.pad={},ct=Qe.Pkcs7={pad:function(fr,ar){for(var Lt=ar*4,Vt=Lt-fr.sigBytes%Lt,tt=Vt<<24|Vt<<16|Vt<<8|Vt,Ye=[],ot=0;ot<Vt;ot+=4)Ye.push(tt);var Et=f.create(Ye,Vt);fr.concat(Et)},unpad:function(fr){var ar=fr.words[fr.sigBytes-1>>>2]&255;fr.sigBytes-=ar}};a.BlockCipher=Ee.extend({cfg:Ee.cfg.extend({mode:Ze,padding:ct}),reset:function(){var fr;Ee.reset.call(this);var ar=this.cfg,Lt=ar.iv,Vt=ar.mode;this._xformMode==this._ENC_XFORM_MODE?fr=Vt.createEncryptor:(fr=Vt.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==fr?this._mode.init(this,Lt&&Lt.words):(this._mode=fr.call(Vt,this,Lt&&Lt.words),this._mode.__creator=fr)},_doProcessBlock:function(fr,ar){this._mode.processBlock(fr,ar)},_doFinalize:function(){var fr,ar=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(ar.pad(this._data,this.blockSize),fr=this._process(!0)):(fr=this._process(!0),ar.unpad(fr)),fr},blockSize:128/32});var wt=a.CipherParams=l.extend({init:function(fr){this.mixIn(fr)},toString:function(fr){return(fr||this.formatter).stringify(this)}}),qt=s.format={},nr=qt.OpenSSL={stringify:function(fr){var ar,Lt=fr.ciphertext,Vt=fr.salt;return Vt?ar=f.create([1398893684,1701076831]).concat(Vt).concat(Lt):ar=Lt,ar.toString(B)},parse:function(fr){var ar,Lt=B.parse(fr),Vt=Lt.words;return Vt[0]==1398893684&&Vt[1]==1701076831&&(ar=f.create(Vt.slice(2,4)),Vt.splice(0,4),Lt.sigBytes-=16),wt.create({ciphertext:Lt,salt:ar})}},ir=a.SerializableCipher=l.extend({cfg:l.extend({format:nr}),encrypt:function(fr,ar,Lt,Vt){Vt=this.cfg.extend(Vt);var tt=fr.createEncryptor(Lt,Vt),Ye=tt.finalize(ar),ot=tt.cfg;return wt.create({ciphertext:Ye,key:Lt,iv:ot.iv,algorithm:fr,mode:ot.mode,padding:ot.padding,blockSize:fr.blockSize,formatter:Vt.format})},decrypt:function(fr,ar,Lt,Vt){Vt=this.cfg.extend(Vt),ar=this._parse(ar,Vt.format);var tt=fr.createDecryptor(Lt,Vt).finalize(ar.ciphertext);return tt},_parse:function(fr,ar){return typeof fr=="string"?ar.parse(fr,this):fr}}),or=s.kdf={},ur=or.OpenSSL={execute:function(fr,ar,Lt,Vt,tt){if(Vt||(Vt=f.random(64/8)),tt)var Ye=le.create({keySize:ar+Lt,hasher:tt}).compute(fr,Vt);else var Ye=le.create({keySize:ar+Lt}).compute(fr,Vt);var ot=f.create(Ye.words.slice(ar),Lt*4);return Ye.sigBytes=ar*4,wt.create({key:Ye,iv:ot,salt:Vt})}},hr=a.PasswordBasedCipher=ir.extend({cfg:ir.cfg.extend({kdf:ur}),encrypt:function(fr,ar,Lt,Vt){Vt=this.cfg.extend(Vt);var tt=Vt.kdf.execute(Lt,fr.keySize,fr.ivSize,Vt.salt,Vt.hasher);Vt.iv=tt.iv;var Ye=ir.encrypt.call(this,fr,ar,tt.key,Vt);return Ye.mixIn(tt),Ye},decrypt:function(fr,ar,Lt,Vt){Vt=this.cfg.extend(Vt),ar=this._parse(ar,Vt.format);var tt=Vt.kdf.execute(Lt,fr.keySize,fr.ivSize,ar.salt,Vt.hasher);Vt.iv=tt.iv;var Ye=ir.decrypt.call(this,fr,ar,tt.key,Vt);return Ye}})}()})}(cipherCore)),cipherCore.exports}var modeCfb={exports:{}},hasRequiredModeCfb;function requireModeCfb(){return hasRequiredModeCfb||(hasRequiredModeCfb=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.mode.CFB=function(){var i=n.lib.BlockCipherMode.extend();i.Encryptor=i.extend({processBlock:function(a,l){var f=this._cipher,p=f.blockSize;s.call(this,a,l,p,f),this._prevBlock=a.slice(l,l+p)}}),i.Decryptor=i.extend({processBlock:function(a,l){var f=this._cipher,p=f.blockSize,C=a.slice(l,l+p);s.call(this,a,l,p,f),this._prevBlock=C}});function s(a,l,f,p){var C,B=this._iv;B?(C=B.slice(0),this._iv=void 0):C=this._prevBlock,p.encryptBlock(C,0);for(var N=0;N<f;N++)a[l+N]^=C[N]}return i}(),n.mode.CFB})}(modeCfb)),modeCfb.exports}var modeCtr={exports:{}},hasRequiredModeCtr;function requireModeCtr(){return hasRequiredModeCtr||(hasRequiredModeCtr=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.mode.CTR=function(){var i=n.lib.BlockCipherMode.extend(),s=i.Encryptor=i.extend({processBlock:function(a,l){var f=this._cipher,p=f.blockSize,C=this._iv,B=this._counter;C&&(B=this._counter=C.slice(0),this._iv=void 0);var N=B.slice(0);f.encryptBlock(N,0),B[p-1]=B[p-1]+1|0;for(var le=0;le<p;le++)a[l+le]^=N[le]}});return i.Decryptor=s,i}(),n.mode.CTR})}(modeCtr)),modeCtr.exports}var modeCtrGladman={exports:{}},hasRequiredModeCtrGladman;function requireModeCtrGladman(){return hasRequiredModeCtrGladman||(hasRequiredModeCtrGladman=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var i=n.lib.BlockCipherMode.extend();function s(f){if((f>>24&255)===255){var p=f>>16&255,C=f>>8&255,B=f&255;p===255?(p=0,C===255?(C=0,B===255?B=0:++B):++C):++p,f=0,f+=p<<16,f+=C<<8,f+=B}else f+=1<<24;return f}function a(f){return(f[0]=s(f[0]))===0&&(f[1]=s(f[1])),f}var l=i.Encryptor=i.extend({processBlock:function(f,p){var C=this._cipher,B=C.blockSize,N=this._iv,le=this._counter;N&&(le=this._counter=N.slice(0),this._iv=void 0),a(le);var Ee=le.slice(0);C.encryptBlock(Ee,0);for(var Ue=0;Ue<B;Ue++)f[p+Ue]^=Ee[Ue]}});return i.Decryptor=l,i}(),n.mode.CTRGladman})}(modeCtrGladman)),modeCtrGladman.exports}var modeOfb={exports:{}},hasRequiredModeOfb;function requireModeOfb(){return hasRequiredModeOfb||(hasRequiredModeOfb=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.mode.OFB=function(){var i=n.lib.BlockCipherMode.extend(),s=i.Encryptor=i.extend({processBlock:function(a,l){var f=this._cipher,p=f.blockSize,C=this._iv,B=this._keystream;C&&(B=this._keystream=C.slice(0),this._iv=void 0),f.encryptBlock(B,0);for(var N=0;N<p;N++)a[l+N]^=B[N]}});return i.Decryptor=s,i}(),n.mode.OFB})}(modeOfb)),modeOfb.exports}var modeEcb={exports:{}},hasRequiredModeEcb;function requireModeEcb(){return hasRequiredModeEcb||(hasRequiredModeEcb=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.mode.ECB=function(){var i=n.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(s,a){this._cipher.encryptBlock(s,a)}}),i.Decryptor=i.extend({processBlock:function(s,a){this._cipher.decryptBlock(s,a)}}),i}(),n.mode.ECB})}(modeEcb)),modeEcb.exports}var padAnsix923={exports:{}},hasRequiredPadAnsix923;function requirePadAnsix923(){return hasRequiredPadAnsix923||(hasRequiredPadAnsix923=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.pad.AnsiX923={pad:function(i,s){var a=i.sigBytes,l=s*4,f=l-a%l,p=a+f-1;i.clamp(),i.words[p>>>2]|=f<<24-p%4*8,i.sigBytes+=f},unpad:function(i){var s=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=s}},n.pad.Ansix923})}(padAnsix923)),padAnsix923.exports}var padIso10126={exports:{}},hasRequiredPadIso10126;function requirePadIso10126(){return hasRequiredPadIso10126||(hasRequiredPadIso10126=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.pad.Iso10126={pad:function(i,s){var a=s*4,l=a-i.sigBytes%a;i.concat(n.lib.WordArray.random(l-1)).concat(n.lib.WordArray.create([l<<24],1))},unpad:function(i){var s=i.words[i.sigBytes-1>>>2]&255;i.sigBytes-=s}},n.pad.Iso10126})}(padIso10126)),padIso10126.exports}var padIso97971={exports:{}},hasRequiredPadIso97971;function requirePadIso97971(){return hasRequiredPadIso97971||(hasRequiredPadIso97971=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.pad.Iso97971={pad:function(i,s){i.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(i,s)},unpad:function(i){n.pad.ZeroPadding.unpad(i),i.sigBytes--}},n.pad.Iso97971})}(padIso97971)),padIso97971.exports}var padZeropadding={exports:{}},hasRequiredPadZeropadding;function requirePadZeropadding(){return hasRequiredPadZeropadding||(hasRequiredPadZeropadding=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.pad.ZeroPadding={pad:function(i,s){var a=s*4;i.clamp(),i.sigBytes+=a-(i.sigBytes%a||a)},unpad:function(i){for(var s=i.words,a=i.sigBytes-1,a=i.sigBytes-1;a>=0;a--)if(s[a>>>2]>>>24-a%4*8&255){i.sigBytes=a+1;break}}},n.pad.ZeroPadding})}(padZeropadding)),padZeropadding.exports}var padNopadding={exports:{}},hasRequiredPadNopadding;function requirePadNopadding(){return hasRequiredPadNopadding||(hasRequiredPadNopadding=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(padNopadding)),padNopadding.exports}var formatHex={exports:{}},hasRequiredFormatHex;function requireFormatHex(){return hasRequiredFormatHex||(hasRequiredFormatHex=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(i){var s=n,a=s.lib,l=a.CipherParams,f=s.enc,p=f.Hex,C=s.format;C.Hex={stringify:function(B){return B.ciphertext.toString(p)},parse:function(B){var N=p.parse(B);return l.create({ciphertext:N})}}}(),n.format.Hex})}(formatHex)),formatHex.exports}var aes={exports:{}},hasRequiredAes;function requireAes(){return hasRequiredAes||(hasRequiredAes=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.BlockCipher,l=i.algo,f=[],p=[],C=[],B=[],N=[],le=[],Ee=[],Ue=[],ze=[],Ze=[];(function(){for(var wt=[],qt=0;qt<256;qt++)qt<128?wt[qt]=qt<<1:wt[qt]=qt<<1^283;for(var nr=0,ir=0,qt=0;qt<256;qt++){var or=ir^ir<<1^ir<<2^ir<<3^ir<<4;or=or>>>8^or&255^99,f[nr]=or,p[or]=nr;var ur=wt[nr],hr=wt[ur],fr=wt[hr],ar=wt[or]*257^or*16843008;C[nr]=ar<<24|ar>>>8,B[nr]=ar<<16|ar>>>16,N[nr]=ar<<8|ar>>>24,le[nr]=ar;var ar=fr*16843009^hr*65537^ur*257^nr*16843008;Ee[or]=ar<<24|ar>>>8,Ue[or]=ar<<16|ar>>>16,ze[or]=ar<<8|ar>>>24,Ze[or]=ar,nr?(nr=ur^wt[wt[wt[fr^ur]]],ir^=wt[wt[ir]]):nr=ir=1}})();var Qe=[0,1,2,4,8,16,32,64,128,27,54],ct=l.AES=a.extend({_doReset:function(){var wt;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var qt=this._keyPriorReset=this._key,nr=qt.words,ir=qt.sigBytes/4,or=this._nRounds=ir+6,ur=(or+1)*4,hr=this._keySchedule=[],fr=0;fr<ur;fr++)fr<ir?hr[fr]=nr[fr]:(wt=hr[fr-1],fr%ir?ir>6&&fr%ir==4&&(wt=f[wt>>>24]<<24|f[wt>>>16&255]<<16|f[wt>>>8&255]<<8|f[wt&255]):(wt=wt<<8|wt>>>24,wt=f[wt>>>24]<<24|f[wt>>>16&255]<<16|f[wt>>>8&255]<<8|f[wt&255],wt^=Qe[fr/ir|0]<<24),hr[fr]=hr[fr-ir]^wt);for(var ar=this._invKeySchedule=[],Lt=0;Lt<ur;Lt++){var fr=ur-Lt;if(Lt%4)var wt=hr[fr];else var wt=hr[fr-4];Lt<4||fr<=4?ar[Lt]=wt:ar[Lt]=Ee[f[wt>>>24]]^Ue[f[wt>>>16&255]]^ze[f[wt>>>8&255]]^Ze[f[wt&255]]}}},encryptBlock:function(wt,qt){this._doCryptBlock(wt,qt,this._keySchedule,C,B,N,le,f)},decryptBlock:function(wt,qt){var nr=wt[qt+1];wt[qt+1]=wt[qt+3],wt[qt+3]=nr,this._doCryptBlock(wt,qt,this._invKeySchedule,Ee,Ue,ze,Ze,p);var nr=wt[qt+1];wt[qt+1]=wt[qt+3],wt[qt+3]=nr},_doCryptBlock:function(wt,qt,nr,ir,or,ur,hr,fr){for(var ar=this._nRounds,Lt=wt[qt]^nr[0],Vt=wt[qt+1]^nr[1],tt=wt[qt+2]^nr[2],Ye=wt[qt+3]^nr[3],ot=4,Et=1;Et<ar;Et++){var er=ir[Lt>>>24]^or[Vt>>>16&255]^ur[tt>>>8&255]^hr[Ye&255]^nr[ot++],rr=ir[Vt>>>24]^or[tt>>>16&255]^ur[Ye>>>8&255]^hr[Lt&255]^nr[ot++],yt=ir[tt>>>24]^or[Ye>>>16&255]^ur[Lt>>>8&255]^hr[Vt&255]^nr[ot++],tr=ir[Ye>>>24]^or[Lt>>>16&255]^ur[Vt>>>8&255]^hr[tt&255]^nr[ot++];Lt=er,Vt=rr,tt=yt,Ye=tr}var er=(fr[Lt>>>24]<<24|fr[Vt>>>16&255]<<16|fr[tt>>>8&255]<<8|fr[Ye&255])^nr[ot++],rr=(fr[Vt>>>24]<<24|fr[tt>>>16&255]<<16|fr[Ye>>>8&255]<<8|fr[Lt&255])^nr[ot++],yt=(fr[tt>>>24]<<24|fr[Ye>>>16&255]<<16|fr[Lt>>>8&255]<<8|fr[Vt&255])^nr[ot++],tr=(fr[Ye>>>24]<<24|fr[Lt>>>16&255]<<16|fr[Vt>>>8&255]<<8|fr[tt&255])^nr[ot++];wt[qt]=er,wt[qt+1]=rr,wt[qt+2]=yt,wt[qt+3]=tr},keySize:256/32});i.AES=a._createHelper(ct)}(),n.AES})}(aes)),aes.exports}var tripledes={exports:{}},hasRequiredTripledes;function requireTripledes(){return hasRequiredTripledes||(hasRequiredTripledes=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.WordArray,l=s.BlockCipher,f=i.algo,p=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],C=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],B=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],N=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],le=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],Ee=f.DES=l.extend({_doReset:function(){for(var Qe=this._key,ct=Qe.words,wt=[],qt=0;qt<56;qt++){var nr=p[qt]-1;wt[qt]=ct[nr>>>5]>>>31-nr%32&1}for(var ir=this._subKeys=[],or=0;or<16;or++){for(var ur=ir[or]=[],hr=B[or],qt=0;qt<24;qt++)ur[qt/6|0]|=wt[(C[qt]-1+hr)%28]<<31-qt%6,ur[4+(qt/6|0)]|=wt[28+(C[qt+24]-1+hr)%28]<<31-qt%6;ur[0]=ur[0]<<1|ur[0]>>>31;for(var qt=1;qt<7;qt++)ur[qt]=ur[qt]>>>(qt-1)*4+3;ur[7]=ur[7]<<5|ur[7]>>>27}for(var fr=this._invSubKeys=[],qt=0;qt<16;qt++)fr[qt]=ir[15-qt]},encryptBlock:function(Qe,ct){this._doCryptBlock(Qe,ct,this._subKeys)},decryptBlock:function(Qe,ct){this._doCryptBlock(Qe,ct,this._invSubKeys)},_doCryptBlock:function(Qe,ct,wt){this._lBlock=Qe[ct],this._rBlock=Qe[ct+1],Ue.call(this,4,252645135),Ue.call(this,16,65535),ze.call(this,2,858993459),ze.call(this,8,16711935),Ue.call(this,1,1431655765);for(var qt=0;qt<16;qt++){for(var nr=wt[qt],ir=this._lBlock,or=this._rBlock,ur=0,hr=0;hr<8;hr++)ur|=N[hr][((or^nr[hr])&le[hr])>>>0];this._lBlock=or,this._rBlock=ir^ur}var fr=this._lBlock;this._lBlock=this._rBlock,this._rBlock=fr,Ue.call(this,1,1431655765),ze.call(this,8,16711935),ze.call(this,2,858993459),Ue.call(this,16,65535),Ue.call(this,4,252645135),Qe[ct]=this._lBlock,Qe[ct+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function Ue(Qe,ct){var wt=(this._lBlock>>>Qe^this._rBlock)&ct;this._rBlock^=wt,this._lBlock^=wt<<Qe}function ze(Qe,ct){var wt=(this._rBlock>>>Qe^this._lBlock)&ct;this._lBlock^=wt,this._rBlock^=wt<<Qe}i.DES=l._createHelper(Ee);var Ze=f.TripleDES=l.extend({_doReset:function(){var Qe=this._key,ct=Qe.words;if(ct.length!==2&&ct.length!==4&&ct.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var wt=ct.slice(0,2),qt=ct.length<4?ct.slice(0,2):ct.slice(2,4),nr=ct.length<6?ct.slice(0,2):ct.slice(4,6);this._des1=Ee.createEncryptor(a.create(wt)),this._des2=Ee.createEncryptor(a.create(qt)),this._des3=Ee.createEncryptor(a.create(nr))},encryptBlock:function(Qe,ct){this._des1.encryptBlock(Qe,ct),this._des2.decryptBlock(Qe,ct),this._des3.encryptBlock(Qe,ct)},decryptBlock:function(Qe,ct){this._des3.decryptBlock(Qe,ct),this._des2.encryptBlock(Qe,ct),this._des1.decryptBlock(Qe,ct)},keySize:192/32,ivSize:64/32,blockSize:64/32});i.TripleDES=l._createHelper(Ze)}(),n.TripleDES})}(tripledes)),tripledes.exports}var rc4={exports:{}},hasRequiredRc4;function requireRc4(){return hasRequiredRc4||(hasRequiredRc4=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.StreamCipher,l=i.algo,f=l.RC4=a.extend({_doReset:function(){for(var B=this._key,N=B.words,le=B.sigBytes,Ee=this._S=[],Ue=0;Ue<256;Ue++)Ee[Ue]=Ue;for(var Ue=0,ze=0;Ue<256;Ue++){var Ze=Ue%le,Qe=N[Ze>>>2]>>>24-Ze%4*8&255;ze=(ze+Ee[Ue]+Qe)%256;var ct=Ee[Ue];Ee[Ue]=Ee[ze],Ee[ze]=ct}this._i=this._j=0},_doProcessBlock:function(B,N){B[N]^=p.call(this)},keySize:256/32,ivSize:0});function p(){for(var B=this._S,N=this._i,le=this._j,Ee=0,Ue=0;Ue<4;Ue++){N=(N+1)%256,le=(le+B[N])%256;var ze=B[N];B[N]=B[le],B[le]=ze,Ee|=B[(B[N]+B[le])%256]<<24-Ue*8}return this._i=N,this._j=le,Ee}i.RC4=a._createHelper(f);var C=l.RC4Drop=f.extend({cfg:f.cfg.extend({drop:192}),_doReset:function(){f._doReset.call(this);for(var B=this.cfg.drop;B>0;B--)p.call(this)}});i.RC4Drop=a._createHelper(C)}(),n.RC4})}(rc4)),rc4.exports}var rabbit={exports:{}},hasRequiredRabbit;function requireRabbit(){return hasRequiredRabbit||(hasRequiredRabbit=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.StreamCipher,l=i.algo,f=[],p=[],C=[],B=l.Rabbit=a.extend({_doReset:function(){for(var le=this._key.words,Ee=this.cfg.iv,Ue=0;Ue<4;Ue++)le[Ue]=(le[Ue]<<8|le[Ue]>>>24)&16711935|(le[Ue]<<24|le[Ue]>>>8)&4278255360;var ze=this._X=[le[0],le[3]<<16|le[2]>>>16,le[1],le[0]<<16|le[3]>>>16,le[2],le[1]<<16|le[0]>>>16,le[3],le[2]<<16|le[1]>>>16],Ze=this._C=[le[2]<<16|le[2]>>>16,le[0]&4294901760|le[1]&65535,le[3]<<16|le[3]>>>16,le[1]&4294901760|le[2]&65535,le[0]<<16|le[0]>>>16,le[2]&4294901760|le[3]&65535,le[1]<<16|le[1]>>>16,le[3]&4294901760|le[0]&65535];this._b=0;for(var Ue=0;Ue<4;Ue++)N.call(this);for(var Ue=0;Ue<8;Ue++)Ze[Ue]^=ze[Ue+4&7];if(Ee){var Qe=Ee.words,ct=Qe[0],wt=Qe[1],qt=(ct<<8|ct>>>24)&16711935|(ct<<24|ct>>>8)&4278255360,nr=(wt<<8|wt>>>24)&16711935|(wt<<24|wt>>>8)&4278255360,ir=qt>>>16|nr&4294901760,or=nr<<16|qt&65535;Ze[0]^=qt,Ze[1]^=ir,Ze[2]^=nr,Ze[3]^=or,Ze[4]^=qt,Ze[5]^=ir,Ze[6]^=nr,Ze[7]^=or;for(var Ue=0;Ue<4;Ue++)N.call(this)}},_doProcessBlock:function(le,Ee){var Ue=this._X;N.call(this),f[0]=Ue[0]^Ue[5]>>>16^Ue[3]<<16,f[1]=Ue[2]^Ue[7]>>>16^Ue[5]<<16,f[2]=Ue[4]^Ue[1]>>>16^Ue[7]<<16,f[3]=Ue[6]^Ue[3]>>>16^Ue[1]<<16;for(var ze=0;ze<4;ze++)f[ze]=(f[ze]<<8|f[ze]>>>24)&16711935|(f[ze]<<24|f[ze]>>>8)&4278255360,le[Ee+ze]^=f[ze]},blockSize:128/32,ivSize:64/32});function N(){for(var le=this._X,Ee=this._C,Ue=0;Ue<8;Ue++)p[Ue]=Ee[Ue];Ee[0]=Ee[0]+1295307597+this._b|0,Ee[1]=Ee[1]+3545052371+(Ee[0]>>>0<p[0]>>>0?1:0)|0,Ee[2]=Ee[2]+886263092+(Ee[1]>>>0<p[1]>>>0?1:0)|0,Ee[3]=Ee[3]+1295307597+(Ee[2]>>>0<p[2]>>>0?1:0)|0,Ee[4]=Ee[4]+3545052371+(Ee[3]>>>0<p[3]>>>0?1:0)|0,Ee[5]=Ee[5]+886263092+(Ee[4]>>>0<p[4]>>>0?1:0)|0,Ee[6]=Ee[6]+1295307597+(Ee[5]>>>0<p[5]>>>0?1:0)|0,Ee[7]=Ee[7]+3545052371+(Ee[6]>>>0<p[6]>>>0?1:0)|0,this._b=Ee[7]>>>0<p[7]>>>0?1:0;for(var Ue=0;Ue<8;Ue++){var ze=le[Ue]+Ee[Ue],Ze=ze&65535,Qe=ze>>>16,ct=((Ze*Ze>>>17)+Ze*Qe>>>15)+Qe*Qe,wt=((ze&4294901760)*ze|0)+((ze&65535)*ze|0);C[Ue]=ct^wt}le[0]=C[0]+(C[7]<<16|C[7]>>>16)+(C[6]<<16|C[6]>>>16)|0,le[1]=C[1]+(C[0]<<8|C[0]>>>24)+C[7]|0,le[2]=C[2]+(C[1]<<16|C[1]>>>16)+(C[0]<<16|C[0]>>>16)|0,le[3]=C[3]+(C[2]<<8|C[2]>>>24)+C[1]|0,le[4]=C[4]+(C[3]<<16|C[3]>>>16)+(C[2]<<16|C[2]>>>16)|0,le[5]=C[5]+(C[4]<<8|C[4]>>>24)+C[3]|0,le[6]=C[6]+(C[5]<<16|C[5]>>>16)+(C[4]<<16|C[4]>>>16)|0,le[7]=C[7]+(C[6]<<8|C[6]>>>24)+C[5]|0}i.Rabbit=a._createHelper(B)}(),n.Rabbit})}(rabbit)),rabbit.exports}var rabbitLegacy={exports:{}},hasRequiredRabbitLegacy;function requireRabbitLegacy(){return hasRequiredRabbitLegacy||(hasRequiredRabbitLegacy=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.StreamCipher,l=i.algo,f=[],p=[],C=[],B=l.RabbitLegacy=a.extend({_doReset:function(){var le=this._key.words,Ee=this.cfg.iv,Ue=this._X=[le[0],le[3]<<16|le[2]>>>16,le[1],le[0]<<16|le[3]>>>16,le[2],le[1]<<16|le[0]>>>16,le[3],le[2]<<16|le[1]>>>16],ze=this._C=[le[2]<<16|le[2]>>>16,le[0]&4294901760|le[1]&65535,le[3]<<16|le[3]>>>16,le[1]&4294901760|le[2]&65535,le[0]<<16|le[0]>>>16,le[2]&4294901760|le[3]&65535,le[1]<<16|le[1]>>>16,le[3]&4294901760|le[0]&65535];this._b=0;for(var Ze=0;Ze<4;Ze++)N.call(this);for(var Ze=0;Ze<8;Ze++)ze[Ze]^=Ue[Ze+4&7];if(Ee){var Qe=Ee.words,ct=Qe[0],wt=Qe[1],qt=(ct<<8|ct>>>24)&16711935|(ct<<24|ct>>>8)&4278255360,nr=(wt<<8|wt>>>24)&16711935|(wt<<24|wt>>>8)&4278255360,ir=qt>>>16|nr&4294901760,or=nr<<16|qt&65535;ze[0]^=qt,ze[1]^=ir,ze[2]^=nr,ze[3]^=or,ze[4]^=qt,ze[5]^=ir,ze[6]^=nr,ze[7]^=or;for(var Ze=0;Ze<4;Ze++)N.call(this)}},_doProcessBlock:function(le,Ee){var Ue=this._X;N.call(this),f[0]=Ue[0]^Ue[5]>>>16^Ue[3]<<16,f[1]=Ue[2]^Ue[7]>>>16^Ue[5]<<16,f[2]=Ue[4]^Ue[1]>>>16^Ue[7]<<16,f[3]=Ue[6]^Ue[3]>>>16^Ue[1]<<16;for(var ze=0;ze<4;ze++)f[ze]=(f[ze]<<8|f[ze]>>>24)&16711935|(f[ze]<<24|f[ze]>>>8)&4278255360,le[Ee+ze]^=f[ze]},blockSize:128/32,ivSize:64/32});function N(){for(var le=this._X,Ee=this._C,Ue=0;Ue<8;Ue++)p[Ue]=Ee[Ue];Ee[0]=Ee[0]+1295307597+this._b|0,Ee[1]=Ee[1]+3545052371+(Ee[0]>>>0<p[0]>>>0?1:0)|0,Ee[2]=Ee[2]+886263092+(Ee[1]>>>0<p[1]>>>0?1:0)|0,Ee[3]=Ee[3]+1295307597+(Ee[2]>>>0<p[2]>>>0?1:0)|0,Ee[4]=Ee[4]+3545052371+(Ee[3]>>>0<p[3]>>>0?1:0)|0,Ee[5]=Ee[5]+886263092+(Ee[4]>>>0<p[4]>>>0?1:0)|0,Ee[6]=Ee[6]+1295307597+(Ee[5]>>>0<p[5]>>>0?1:0)|0,Ee[7]=Ee[7]+3545052371+(Ee[6]>>>0<p[6]>>>0?1:0)|0,this._b=Ee[7]>>>0<p[7]>>>0?1:0;for(var Ue=0;Ue<8;Ue++){var ze=le[Ue]+Ee[Ue],Ze=ze&65535,Qe=ze>>>16,ct=((Ze*Ze>>>17)+Ze*Qe>>>15)+Qe*Qe,wt=((ze&4294901760)*ze|0)+((ze&65535)*ze|0);C[Ue]=ct^wt}le[0]=C[0]+(C[7]<<16|C[7]>>>16)+(C[6]<<16|C[6]>>>16)|0,le[1]=C[1]+(C[0]<<8|C[0]>>>24)+C[7]|0,le[2]=C[2]+(C[1]<<16|C[1]>>>16)+(C[0]<<16|C[0]>>>16)|0,le[3]=C[3]+(C[2]<<8|C[2]>>>24)+C[1]|0,le[4]=C[4]+(C[3]<<16|C[3]>>>16)+(C[2]<<16|C[2]>>>16)|0,le[5]=C[5]+(C[4]<<8|C[4]>>>24)+C[3]|0,le[6]=C[6]+(C[5]<<16|C[5]>>>16)+(C[4]<<16|C[4]>>>16)|0,le[7]=C[7]+(C[6]<<8|C[6]>>>24)+C[5]|0}i.RabbitLegacy=a._createHelper(B)}(),n.RabbitLegacy})}(rabbitLegacy)),rabbitLegacy.exports}var blowfish={exports:{}},hasRequiredBlowfish;function requireBlowfish(){return hasRequiredBlowfish||(hasRequiredBlowfish=1,function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireEncBase64(),requireMd5(),requireEvpkdf(),requireCipherCore())})(commonjsGlobal$1,function(n){return function(){var i=n,s=i.lib,a=s.BlockCipher,l=i.algo;const f=16,p=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],C=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var B={pbox:[],sbox:[]};function N(Ze,Qe){let ct=Qe>>24&255,wt=Qe>>16&255,qt=Qe>>8&255,nr=Qe&255,ir=Ze.sbox[0][ct]+Ze.sbox[1][wt];return ir=ir^Ze.sbox[2][qt],ir=ir+Ze.sbox[3][nr],ir}function le(Ze,Qe,ct){let wt=Qe,qt=ct,nr;for(let ir=0;ir<f;++ir)wt=wt^Ze.pbox[ir],qt=N(Ze,wt)^qt,nr=wt,wt=qt,qt=nr;return nr=wt,wt=qt,qt=nr,qt=qt^Ze.pbox[f],wt=wt^Ze.pbox[f+1],{left:wt,right:qt}}function Ee(Ze,Qe,ct){let wt=Qe,qt=ct,nr;for(let ir=f+1;ir>1;--ir)wt=wt^Ze.pbox[ir],qt=N(Ze,wt)^qt,nr=wt,wt=qt,qt=nr;return nr=wt,wt=qt,qt=nr,qt=qt^Ze.pbox[1],wt=wt^Ze.pbox[0],{left:wt,right:qt}}function Ue(Ze,Qe,ct){for(let or=0;or<4;or++){Ze.sbox[or]=[];for(let ur=0;ur<256;ur++)Ze.sbox[or][ur]=C[or][ur]}let wt=0;for(let or=0;or<f+2;or++)Ze.pbox[or]=p[or]^Qe[wt],wt++,wt>=ct&&(wt=0);let qt=0,nr=0,ir=0;for(let or=0;or<f+2;or+=2)ir=le(Ze,qt,nr),qt=ir.left,nr=ir.right,Ze.pbox[or]=qt,Ze.pbox[or+1]=nr;for(let or=0;or<4;or++)for(let ur=0;ur<256;ur+=2)ir=le(Ze,qt,nr),qt=ir.left,nr=ir.right,Ze.sbox[or][ur]=qt,Ze.sbox[or][ur+1]=nr;return!0}var ze=l.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var Ze=this._keyPriorReset=this._key,Qe=Ze.words,ct=Ze.sigBytes/4;Ue(B,Qe,ct)}},encryptBlock:function(Ze,Qe){var ct=le(B,Ze[Qe],Ze[Qe+1]);Ze[Qe]=ct.left,Ze[Qe+1]=ct.right},decryptBlock:function(Ze,Qe){var ct=Ee(B,Ze[Qe],Ze[Qe+1]);Ze[Qe]=ct.left,Ze[Qe+1]=ct.right},blockSize:64/32,keySize:128/32,ivSize:64/32});i.Blowfish=a._createHelper(ze)}(),n.Blowfish})}(blowfish)),blowfish.exports}(function(t,e){(function(n,i,s){t.exports=i(requireCore(),requireX64Core(),requireLibTypedarrays(),requireEncUtf16(),requireEncBase64(),requireEncBase64url(),requireMd5(),requireSha1(),requireSha256(),requireSha224(),requireSha512(),requireSha384(),requireSha3(),requireRipemd160(),requireHmac(),requirePbkdf2(),requireEvpkdf(),requireCipherCore(),requireModeCfb(),requireModeCtr(),requireModeCtrGladman(),requireModeOfb(),requireModeEcb(),requirePadAnsix923(),requirePadIso10126(),requirePadIso97971(),requirePadZeropadding(),requirePadNopadding(),requireFormatHex(),requireAes(),requireTripledes(),requireRc4(),requireRabbit(),requireRabbitLegacy(),requireBlowfish())})(commonjsGlobal$1,function(n){return n})})(cryptoJs);var cryptoJsExports=cryptoJs.exports;const crypto$1=getDefaultExportFromCjs$2(cryptoJsExports);var __defProp$1=Object.defineProperty,__defNormalProp$1=(t,e,n)=>e in t?__defProp$1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__name=(t,e)=>__defProp$1(t,"name",{value:e,configurable:!0}),__publicField$1=(t,e,n)=>(__defNormalProp$1(t,typeof e!="symbol"?e+"":e,n),n),DEFAULT_HOST="https://pay.coinbase.com",generateOnRampURL=__name(({host:t=DEFAULT_HOST,...e})=>{const n=new URL(t);if(n.pathname="/buy/select-asset",e.destinationWallets&&e.addresses)throw new Error("Only one of destinationWallets or addresses can be provided");if(!e.destinationWallets&&!e.addresses)throw new Error("One of destinationWallets or addresses must be provided");return Object.keys(e).forEach(i=>{const s=e[i];s!==void 0&&(["string","number","boolean"].includes(typeof s)?n.searchParams.append(i,s.toString()):n.searchParams.append(i,JSON.stringify(s)))}),n.searchParams.sort(),n.toString()},"generateOnRampURL"),EMBEDDED_IFRAME_ID="cbpay-embedded-onramp",createEmbeddedContent=__name(({url:t,width:e="100%",height:n="100%",position:i="fixed",top:s="0px"})=>{const a=document.createElement("iframe");return a.style.border="unset",a.style.borderWidth="0",a.style.width=e.toString(),a.style.height=n.toString(),a.style.position=i,a.style.top=s,a.id=EMBEDDED_IFRAME_ID,a.src=t,a},"createEmbeddedContent"),MessageCodes;(function(t){t.LaunchEmbedded="launch_embedded",t.AppReady="app_ready",t.AppParams="app_params",t.SigninSuccess="signin_success",t.Success="success",t.Exit="exit",t.Event="event",t.Error="error",t.PixelReady="pixel_ready",t.OnAppParamsNonce="on_app_params_nonce"})(MessageCodes||(MessageCodes={}));var onBroadcastedPostMessage=__name((t,{onMessage:e,shouldUnsubscribe:n=!0,allowedOrigin:i,onValidateOrigin:s=__name(()=>Promise.resolve(!0),"onValidateOrigin")})=>{const a=__name(l=>{const{eventName:f,data:p}=parsePostMessage(l.data),C=!i||l.origin===i;f===t&&(async()=>C&&await s(l.origin)&&(e(p),n&&window.removeEventListener("message",a)))()},"onMessage");return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},"onBroadcastedPostMessage"),broadcastPostMessage=__name((t,e,{allowedOrigin:n="*",data:i}={})=>{const s=formatPostMessage(e,i);t.postMessage(s,n)},"broadcastPostMessage"),parsePostMessage=__name(t=>{try{return JSON.parse(t)}catch{return{eventName:t}}},"parsePostMessage"),formatPostMessage=__name((t,e)=>e?JSON.stringify({eventName:t,data:e}):t,"formatPostMessage"),generateOffRampURL=__name(({host:t=DEFAULT_HOST,...e})=>{const n=new URL(t);return n.pathname="/v3/sell/input",Object.keys(e).forEach(i=>{const s=e[i];s!==void 0&&(["string","number","boolean"].includes(typeof s)?n.searchParams.append(i,s.toString()):n.searchParams.append(i,JSON.stringify(s)))}),n.searchParams.sort(),n.toString()},"generateOffRampURL"),PopupSizes={signin:{width:460,height:730},widget:{width:430,height:600}},CoinbasePixel=class{constructor({host:t=DEFAULT_HOST,appId:e,appParams:n,debug:i,theme:s}){__publicField$1(this,"debug"),__publicField$1(this,"host"),__publicField$1(this,"appId"),__publicField$1(this,"eventStreamListeners",{}),__publicField$1(this,"unsubs",[]),__publicField$1(this,"appParams"),__publicField$1(this,"removeEventListener"),__publicField$1(this,"theme"),__publicField$1(this,"openExperience",__name(a=>{var N,le,Ee,Ue;this.log("Attempting to open experience"),this.setupExperienceListeners(a);const{experienceLoggedIn:l,experienceLoggedOut:f,embeddedContentStyles:p}=a,C=f||l;let B="";if(a.path==="/v3/sell"?B=generateOffRampURL({appId:this.appId,host:this.host,theme:this.theme??void 0,...this.appParams}):B=generateOnRampURL({appId:this.appId,host:this.host,theme:this.theme??void 0,...this.appParams}),this.log("Opening experience",{experience:C}),C==="embedded"){this.log("DEPRECATION WARNING: Two factor authentication does not work in an iframe, so the embedded experience should not be used. It will be removed in a future release");const ze=__name(()=>{var Qe;const Ze=createEmbeddedContent({url:B,...p});p!=null&&p.target?(Qe=document.querySelector(p==null?void 0:p.target))==null||Qe.replaceChildren(Ze):document.body.appendChild(Ze)},"openEmbeddedExperience");this.startDirectSignin(ze)}else C==="popup"&&((le=(N=window.chrome)==null?void 0:N.windows)!=null&&le.create)?window.chrome.windows.create({url:B,setSelfAsOpener:!0,type:"popup",focused:!0,width:PopupSizes.signin.width,height:PopupSizes.signin.height,left:window.screenLeft-PopupSizes.signin.width-10,top:window.screenTop},ze=>{const Ze=__name(()=>{ze!=null&&ze.id&&(chrome.windows.update(ze.id,{width:PopupSizes.widget.width,height:PopupSizes.widget.height,left:window.screenLeft-PopupSizes.widget.width-10,top:window.screenTop}),this.removeEventStreamListener("open",Ze))},"onOpenCallback");this.addEventStreamListener("open",Ze)}):C==="new_tab"&&((Ue=(Ee=window.chrome)==null?void 0:Ee.tabs)!=null&&Ue.create)?window.chrome.tabs.create({url:B}):openWindow(B,C)},"openExperience")),__publicField$1(this,"endExperience",__name(()=>{var a;(a=document.getElementById(EMBEDDED_IFRAME_ID))==null||a.remove()},"endExperience")),__publicField$1(this,"destroy",__name(()=>{this.unsubs.forEach(a=>a())},"destroy")),__publicField$1(this,"setupExperienceListeners",__name(({onSuccess:a,onExit:l,onEvent:f,onRequestedUrl:p})=>{this.removeEventListener&&this.removeEventListener(),this.removeEventListener=this.onMessage("event",{shouldUnsubscribe:!1,onMessage:C=>{var N;const B=C;(N=this.eventStreamListeners[B.eventName])==null||N.forEach(le=>le==null?void 0:le()),B.eventName==="success"&&(a==null||a()),B.eventName==="exit"&&(l==null||l(B.error)),B.eventName==="request_open_url"&&(p==null||p(B.url)),f==null||f(C)}})},"setupExperienceListeners")),__publicField$1(this,"startDirectSignin",__name(a=>{const l=new URLSearchParams;l.set("appId",this.appId),l.set("type","direct");const f=`${this.host}/signin?${l.toString()}`,p=openWindow(f,"popup");this.onMessage("signin_success",{onMessage:()=>{p==null||p.close(),a()}})},"startDirectSignin")),__publicField$1(this,"addEventStreamListener",__name((a,l)=>{var f;this.eventStreamListeners[a]?(f=this.eventStreamListeners[a])==null||f.push(l):this.eventStreamListeners[a]=[l]},"addEventStreamListener")),__publicField$1(this,"removeEventStreamListener",__name((a,l)=>{var f;if(this.eventStreamListeners[a]){const p=(f=this.eventStreamListeners[a])==null?void 0:f.filter(C=>C!==l);this.eventStreamListeners[a]=p}},"removeEventStreamListener")),__publicField$1(this,"onMessage",__name((...a)=>{const l=onBroadcastedPostMessage(a[0],{allowedOrigin:this.host,...a[1]});return this.unsubs.push(l),l},"onMessage")),__publicField$1(this,"log",__name((...a)=>{this.debug&&console.log("[CBPAY]",...a)},"log")),this.host=t,this.appId=e,this.appParams=n,this.debug=i||!1,this.theme=s}};__name(CoinbasePixel,"CoinbasePixel");function openWindow(t,e){return window.open(t,"Coinbase",e==="popup"?`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, height=${PopupSizes.signin.height},width=${PopupSizes.signin.width}`:void 0)}__name(openWindow,"openWindow");var widgetRoutes={buy:"/buy",checkout:"/checkout",sell:"/v3/sell"},CBPayInstance=class{constructor(t){if(__publicField$1(this,"pixel"),__publicField$1(this,"options"),__publicField$1(this,"open",__name(()=>{const{widget:e,experienceLoggedIn:n,experienceLoggedOut:i,embeddedContentStyles:s,onExit:a,onSuccess:l,onEvent:f,onRequestedUrl:p,closeOnSuccess:C,closeOnExit:B}=this.options;this.pixel.openExperience({path:widgetRoutes[e],experienceLoggedIn:n,experienceLoggedOut:i,embeddedContentStyles:s,onExit:()=>{a==null||a(),B&&this.pixel.endExperience()},onSuccess:()=>{l==null||l(),C&&this.pixel.endExperience()},onRequestedUrl:p,onEvent:f})},"open")),__publicField$1(this,"destroy",__name(()=>{this.pixel.destroy()},"destroy")),this.options=t,this.pixel=new CoinbasePixel({...t,appParams:{widget:t.widget,...t.appParams}}),t.target){const e=document.querySelector(t.target);e&&e.addEventListener("click",this.open)}}};__name(CBPayInstance,"CBPayInstance");function broadcastEvent(t,e){broadcastPostMessage(t,"event",{data:e})}__name(broadcastEvent,"broadcastEvent");function CustomToast(t){const{children:e,onClose:n}=t;return jsxRuntimeExports.jsxs(HStack,{w:"440px",bg:"background",border:"2px",borderColor:"border",borderRadius:"12px",p:"16px",position:"relative",gap:"16px",sx:{"@media screen and (max-width: 810px)":{w:"unset",minW:"330px",p:"16px"}},children:[jsxRuntimeExports.jsx(VStack,{w:"100%",alignItems:"start",children:e}),jsxRuntimeExports.jsx(Center,{onClick:n,position:"absolute",right:"16px",top:"16px",children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",variant:"gray"})})]})}const img_nodata_error="/assets/img_nodata@2x-BiWQ6WZn.png";function Notfound$1(){return jsxRuntimeExports.jsx(ChakraProvider,{theme,children:jsxRuntimeExports.jsxs(Flex,{w:"100%",h:"100%",justifyContent:"center",alignItems:"center",position:"fixed",backgroundColor:"background",direction:"column",left:"50%",top:"0px",transform:"translateX(-50%)",children:[jsxRuntimeExports.jsx(Text$1,{fontSize:"20px",mb:"-50px",textColor:"text_caption",children:"Oops..."}),jsxRuntimeExports.jsx(Image$1,{w:"350px",h:"529px",src:img_nodata_error}),jsxRuntimeExports.jsx(Text$1,{fontSize:"28px",textColor:"primary",mt:"-80px",children:"Something Error"}),jsxRuntimeExports.jsx(Button$1,{mt:"20px",w:"200px",onClick:()=>window.location.reload(),children:"Refresh"})]})})}const MAX_RETRY_COUNT=1;class ErrorBoundary extends React$2.Component{constructor(e){super(e),this.state={showErrorComponent:!1,hasError:!1,retryCount:0}}getRetryCountFromURL(){const e=new URLSearchParams(window.location.search);return parseInt(e.get("retryCount")||"0",10)}updateRetryCountInURL(e){const n=new URLSearchParams(window.location.search);n.set("retryCount",e.toString()),window.history.replaceState(null,"",`${window.location.pathname}?${n.toString()}`)}static getDerivedStateFromError(e){return{hasError:!0,showErrorComponent:!1}}componentDidCatch(e,n){if(console.error("Error caught in Error Boundary: ",e,n),e&&String(e).includes("Failed to fetch dynamically imported module")){const s=this.getRetryCountFromURL();if(s<MAX_RETRY_COUNT){const a=s+1;this.updateRetryCountInURL(a),console.log(`Retrying... (${a}/${MAX_RETRY_COUNT})`),window.location.reload()}else console.error("Max retry count reached. Showing fallback UI."),this.setState({showErrorComponent:!0,hasError:!0})}else this.setState({showErrorComponent:!0,hasError:!0})}render(){return this.state.hasError?this.state.showErrorComponent?jsxRuntimeExports.jsx(Notfound$1,{}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):this.props.children}}const LockInput=({text:t,...e})=>jsxRuntimeExports.jsxs(HStack,{h:"138px",gap:"16px",borderRadius:"20px",border:"1px solid",borderColor:"border",justify:"center",bg:"rgba(15,15,15,0.8)",backdropFilter:"blur(10px)",p:"32px",zIndex:99,...e,children:[jsxRuntimeExports.jsx(Center,{flex:"0 0 36px",h:"36px",borderRadius:"50%",border:"2px solid",borderColor:"border",boxShadow:"trade_icon_shadow",bg:"input_bg",children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_lock",fontSize:"20px",_hover:{cursor:"unset",svg:{fill:" text_paragraph"}}})}),t&&jsxRuntimeExports.jsx(Text$1,{color:"text_caption",lineHeight:"20px",children:t})]});function NavLink(t){const{children:e,link:n,type:i="reactRouterLink",isActive:s,fontSize:a,...l}=t,f={fontFamily:"Inter",color:s?"text_caption":"text_paragraph",fontSize:a||"15px",cursor:"pointer",height:"24px",lineHeight:"24px",_hover:{color:"text_caption"}};return i==="reactRouterLink"?jsxRuntimeExports.jsx(Link,{as:Link$1,to:n,...f,...l,children:e}):i==="_blank"?jsxRuntimeExports.jsx(Link,{href:n,target:"_blank",...f,...l,children:e}):jsxRuntimeExports.jsx(Box,{as:"a",...f,...l,children:e})}function splitArray(t,e){const n=[];for(let i=0;i<t.length;i+=e)n.push(t.slice(i,i+e));return n}function useTokenPrice(){const{coinPriceObj:t,setPriceObj:e,clearPriceObj:n}=useTokenPriceStore(),i=async(p,C=!1,B=!0)=>{console.log(" ~ fetchTokenPrices ~ coinTypeList:",p);const le=splitArray(p,10);console.log(" ~  ~ file: useRates.ts:8 ~ ~ subArrays:",le);try{const Ee=`${envConfigs$1==null?void 0:envConfigs$1.cetus_api}${C?"/v3/sui/market_price/change":"/v2/sui/market_price"}`,Ue=await Promise.all(le.map(Ze=>fetchGet(Ee,{base_symbol_address_pair:Ze.map(Qe=>fixCoinType(Qe,!1))})));console.log(" ~ file: useRates.ts:8 ~ fetchRates ~ results:",Ue);const ze=Ue.map(Ze=>Ze.prices).flat();if(console.log(" ~ file: useRates.ts:8 ~ fetchRates ~ list:",ze),ze&&ze.length>0){const Ze={},Qe=new Date().getTime();return ze.forEach(ct=>{const wt=fixCoinType(ct.base_symbol,!1),qt=s(wt);qt&&(ct.price_change=ct.price_change||qt.price_change),ct.update_time=Qe,Ze[wt]=ct}),e(Ze),Object.values(Ze)}return[]}catch(Ee){return console.log(" ~ file: useRates.ts:21 ~ fetchRates ~ error:",Ee),B&&n(p),[]}},s=reactExports.useCallback((p,C)=>{if(!p)return;const B=t[p]||t[fixCoinType(p,!1)];if(B&&!(C&&new Date().getTime()-B.update_time>C))return B},[t]),a=reactExports.useCallback((p,C,B)=>{const N=Number(C)==0||!B?"0":B;if(C&&p&&+C){const le=s(p);if(le)return d$3(C).mul(le.price).toString()}return N},[t]),l=reactExports.useCallback((p,C,B)=>{const N=Number(C)==0||!B?"0":B;if(C&&p&&+C){const le=s(p);if(le)return d$3(C).div(le.price).toString()}return N},[t]);return{getTokenAmountValue:a,getTokenAmount:l,getTokenPrice:s,fetchTokenPrices:i,getPriceKline:async(p,C)=>{var le;const B=p==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":p,N=`${envConfigs$1==null?void 0:envConfigs$1.cetus_api}/v2/sui/coin/kline?coin_address=${B}&interval=day&market=${C}`;try{const Ee=await fetchGet(N),Ue=Math.min(...Ee.list.map(ze=>Number(ze==null?void 0:ze.price)));return{price:((le=Ee==null?void 0:Ee.list)==null?void 0:le.reverse().map(ze=>({...ze,value:d$3(ze==null?void 0:ze.price).minus(Ue).toString()})))||[],daily_rate:Ee==null?void 0:Ee.daily_rate.replace("%","")}}catch{return{price:[],daily_rate:""}}},coinPriceObj:t}}var __defProp=Object.defineProperty,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField=(t,e,n)=>(__defNormalProp(t,e+"",n),n);Decimal$1.config({precision:64,rounding:Decimal$1.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var decimal_default=Decimal$1,ClmmpoolsError=class extends Error{constructor(e,n){super(e);Or(this,"message");Or(this,"errorCode");this.message=e,this.errorCode=n}static isClmmpoolsErrorCode(e,n){return e instanceof ClmmpoolsError&&e.errorCode===n}},ZERO=new BN(0),ONE=new BN(1),TWO=new BN(2);TWO.pow(new BN(128));var U64_MAX=TWO.pow(new BN(64)).sub(ONE),U128_MAX=TWO.pow(new BN(128)).sub(ONE),MathUtil=class{static toX64_BN(t){return t.mul(new BN(2).pow(new BN(64)))}static toX64_Decimal(t){return t.mul(decimal_default.pow(2,64))}static toX64(t){return new BN(t.mul(decimal_default.pow(2,64)).floor().toFixed())}static fromX64(t){return new decimal_default(t.toString()).mul(decimal_default.pow(2,-64))}static fromX64_Decimal(t){return t.mul(decimal_default.pow(2,-64))}static fromX64_BN(t){return t.div(new BN(2).pow(new BN(64)))}static shiftRightRoundUp(t){let e=t.shrn(64);return t.mod(U64_MAX).gt(ZERO)&&(e=e.add(ONE)),e}static divRoundUp(t,e){return t.mod(e).eq(ZERO)?t.div(e):t.div(e).add(new BN(1))}static subUnderflowU128(t,e){return t.lt(e)?t.sub(e).add(U128_MAX):t.sub(e)}static checkUnsignedSub(t,e){const n=t.sub(e);if(n.isNeg())throw new ClmmpoolsError("Unsigned integer sub overflow","UnsignedIntegerOverflow");return n}static checkMul(t,e,n){const i=t.mul(e);if(this.isOverflow(i,n))throw new ClmmpoolsError("Multiplication overflow","MultiplicationOverflow");return i}static checkMulDivFloor(t,e,n,i){if(n.eq(ZERO))throw new ClmmpoolsError("Devide by zero","DivideByZero");const s=t.mul(e).div(n);if(this.isOverflow(s,i))throw new ClmmpoolsError("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(t,e,n,i){if(n.eq(ZERO))throw new ClmmpoolsError("Devide by zero","DivideByZero");const s=t.mul(e).add(n.sub(ONE)).div(n);if(this.isOverflow(s,i))throw new ClmmpoolsError("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(t,e,n,i){if(n.eq(ZERO))throw new ClmmpoolsError("Devide by zero","DivideByZero");const s=t.mul(e.add(n.shrn(1))).div(n);if(this.isOverflow(s,i))throw new ClmmpoolsError("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(t,e,n,i){const s=t.mul(e).div(new BN(2).pow(new BN(n)));if(this.isOverflow(s,i))throw new ClmmpoolsError("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(t,e,n,i){const s=t.mul(e),l=i&&s.and(U64_MAX).gt(ZERO)?s.shrn(64).add(ONE):s.shrn(64);if(this.isOverflow(l,n))throw new ClmmpoolsError("Multiplication shift right overflow","MulShiftRightOverflow");return l}static checkMulShiftLeft(t,e,n,i){const s=t.mul(e).shln(n);if(this.isOverflow(s,i))throw new ClmmpoolsError("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(t,e,n){if(e.eq(ZERO))throw new ClmmpoolsError("Devide by zero","DivideByZero");return n?this.divRoundUp(t,e):t.div(e)}static isOverflow(t,e){return t.gte(TWO.pow(new BN(e)))}static sign(t){return t.testn(127)?1:0}static is_neg(t){return this.sign(t)===1}static abs_u128(t){return t.gt(ZERO)?t:this.u128_neg(t.subn(1))}static u128_neg(t){return t.uxor(new BN("ffffffffffffffffffffffffffffffff",16))}static neg(t){return this.is_neg(t)?t.abs():this.neg_from(t)}static abs(t){return this.sign(t)===0?t:this.u128_neg(t.sub(new BN(1)))}static neg_from(t){return t.eq(ZERO)?t:this.u128_neg(t).add(new BN(1)).or(new BN(1).shln(127))}},MAX_SQRT_PRICE="79226673515401279992447579055",MIN_SQRT_PRICE="4295048016",FEE_RATE_DENOMINATOR=new BN(1e6),CLOCK_ADDRESS="0x0000000000000000000000000000000000000000000000000000000000000006",ClmmIntegratePoolV2Module="pool_script_v2",ClmmIntegrateRouterModule="router",ClmmIntegrateRouterWithPartnerModule="router_with_partner",ClmmIntegrateUtilsModule="utils",DeepbookCustodianV2Moudle="custodian_v2",DeepbookClobV2Moudle="clob_v2",DeepbookEndpointsV2Moudle="endpoints_v2";function getPackagerConfigs(t){if(t.config===void 0)throw new ClmmpoolsError(`package: ${t.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return t.config}var BIT_PRECISION=14,LOG_B_2_X32="59543866431248",LOG_B_P_ERR_MARGIN_LOWER_X64="184467440737095516",LOG_B_P_ERR_MARGIN_UPPER_X64="15793534762490258745";function signedShiftLeft(t,e,n){const i=t.toTwos(n).shln(e);return i.imaskn(n+1),i.fromTwos(n)}function signedShiftRight(t,e,n){const i=t.toTwos(n).shrn(e);return i.imaskn(n-e+1),i.fromTwos(n-e)}function tickIndexToSqrtPricePositive(t){let e;return t&1?e=new BN("79232123823359799118286999567"):e=new BN("79228162514264337593543950336"),t&2&&(e=signedShiftRight(e.mul(new BN("79236085330515764027303304731")),96,256)),t&4&&(e=signedShiftRight(e.mul(new BN("79244008939048815603706035061")),96,256)),t&8&&(e=signedShiftRight(e.mul(new BN("79259858533276714757314932305")),96,256)),t&16&&(e=signedShiftRight(e.mul(new BN("79291567232598584799939703904")),96,256)),t&32&&(e=signedShiftRight(e.mul(new BN("79355022692464371645785046466")),96,256)),t&64&&(e=signedShiftRight(e.mul(new BN("79482085999252804386437311141")),96,256)),t&128&&(e=signedShiftRight(e.mul(new BN("79736823300114093921829183326")),96,256)),t&256&&(e=signedShiftRight(e.mul(new BN("80248749790819932309965073892")),96,256)),t&512&&(e=signedShiftRight(e.mul(new BN("81282483887344747381513967011")),96,256)),t&1024&&(e=signedShiftRight(e.mul(new BN("83390072131320151908154831281")),96,256)),t&2048&&(e=signedShiftRight(e.mul(new BN("87770609709833776024991924138")),96,256)),t&4096&&(e=signedShiftRight(e.mul(new BN("97234110755111693312479820773")),96,256)),t&8192&&(e=signedShiftRight(e.mul(new BN("119332217159966728226237229890")),96,256)),t&16384&&(e=signedShiftRight(e.mul(new BN("179736315981702064433883588727")),96,256)),t&32768&&(e=signedShiftRight(e.mul(new BN("407748233172238350107850275304")),96,256)),t&65536&&(e=signedShiftRight(e.mul(new BN("2098478828474011932436660412517")),96,256)),t&131072&&(e=signedShiftRight(e.mul(new BN("55581415166113811149459800483533")),96,256)),t&262144&&(e=signedShiftRight(e.mul(new BN("38992368544603139932233054999993551")),96,256)),signedShiftRight(e,32,256)}function tickIndexToSqrtPriceNegative(t){const e=Math.abs(t);let n;return e&1?n=new BN("18445821805675392311"):n=new BN("18446744073709551616"),e&2&&(n=signedShiftRight(n.mul(new BN("18444899583751176498")),64,256)),e&4&&(n=signedShiftRight(n.mul(new BN("18443055278223354162")),64,256)),e&8&&(n=signedShiftRight(n.mul(new BN("18439367220385604838")),64,256)),e&16&&(n=signedShiftRight(n.mul(new BN("18431993317065449817")),64,256)),e&32&&(n=signedShiftRight(n.mul(new BN("18417254355718160513")),64,256)),e&64&&(n=signedShiftRight(n.mul(new BN("18387811781193591352")),64,256)),e&128&&(n=signedShiftRight(n.mul(new BN("18329067761203520168")),64,256)),e&256&&(n=signedShiftRight(n.mul(new BN("18212142134806087854")),64,256)),e&512&&(n=signedShiftRight(n.mul(new BN("17980523815641551639")),64,256)),e&1024&&(n=signedShiftRight(n.mul(new BN("17526086738831147013")),64,256)),e&2048&&(n=signedShiftRight(n.mul(new BN("16651378430235024244")),64,256)),e&4096&&(n=signedShiftRight(n.mul(new BN("15030750278693429944")),64,256)),e&8192&&(n=signedShiftRight(n.mul(new BN("12247334978882834399")),64,256)),e&16384&&(n=signedShiftRight(n.mul(new BN("8131365268884726200")),64,256)),e&32768&&(n=signedShiftRight(n.mul(new BN("3584323654723342297")),64,256)),e&65536&&(n=signedShiftRight(n.mul(new BN("696457651847595233")),64,256)),e&131072&&(n=signedShiftRight(n.mul(new BN("26294789957452057")),64,256)),e&262144&&(n=signedShiftRight(n.mul(new BN("37481735321082")),64,256)),n}var TickMath=class{static priceToSqrtPriceX64(t,e,n){return MathUtil.toX64(t.mul(decimal_default.pow(10,n-e)).sqrt())}static sqrtPriceX64ToPrice(t,e,n){return MathUtil.fromX64(t).pow(2).mul(decimal_default.pow(10,e-n))}static tickIndexToSqrtPriceX64(t){return t>0?new BN(tickIndexToSqrtPricePositive(t)):new BN(tickIndexToSqrtPriceNegative(t))}static sqrtPriceX64ToTickIndex(t){if(t.gt(new BN(MAX_SQRT_PRICE))||t.lt(new BN(MIN_SQRT_PRICE)))throw new ClmmpoolsError("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");const e=t.bitLength()-1,n=new BN(e-64),i=signedShiftLeft(n,32,128);let s=new BN("8000000000000000","hex"),a=0,l=new BN(0),f=e>=64?t.shrn(e-63):t.shln(63-e);for(;s.gt(new BN(0))&&a<BIT_PRECISION;){f=f.mul(f);const Ue=f.shrn(127);f=f.shrn(63+Ue.toNumber()),l=l.add(s.mul(Ue)),s=s.shrn(1),a+=1}const p=l.shrn(32),B=i.add(p).mul(new BN(LOG_B_2_X32)),N=signedShiftRight(B.sub(new BN(LOG_B_P_ERR_MARGIN_LOWER_X64)),64,128).toNumber(),le=signedShiftRight(B.add(new BN(LOG_B_P_ERR_MARGIN_UPPER_X64)),64,128).toNumber();return N===le?N:TickMath.tickIndexToSqrtPriceX64(le).lte(t)?le:N}static tickIndexToPrice(t,e,n){return TickMath.sqrtPriceX64ToPrice(TickMath.tickIndexToSqrtPriceX64(t),e,n)}static priceToTickIndex(t,e,n){return TickMath.sqrtPriceX64ToTickIndex(TickMath.priceToSqrtPriceX64(t,e,n))}static priceToInitializableTickIndex(t,e,n,i){return TickMath.getInitializableTickIndex(TickMath.priceToTickIndex(t,e,n),i)}static getInitializableTickIndex(t,e){return t-t%e}static getNextInitializableTickIndex(t,e){return TickMath.getInitializableTickIndex(t,e)+e}static getPrevInitializableTickIndex(t,e){return TickMath.getInitializableTickIndex(t,e)-e}};new BN(365);new BN(24);new BN(3600);new BN(.5);var SwapUtils=class{static getDefaultSqrtPriceLimit(t){return new BN(t?MIN_SQRT_PRICE:MAX_SQRT_PRICE)}static getDefaultOtherAmountThreshold(t){return t?ZERO:U64_MAX}};function estimateLiquidityForCoinA(t,e,n){const i=BN.min(t,e),s=BN.max(t,e),a=MathUtil.fromX64_BN(n.mul(s).mul(i)),l=s.sub(i);return!a.isZero()&&!l.isZero()?a.div(l):new BN(0)}function estimateLiquidityForCoinB(t,e,n){const i=BN.min(t,e),a=BN.max(t,e).sub(i);return a.isZero()?new BN(0):n.shln(64).div(a)}var ClmmPoolUtil=class{static updateFeeRate(t,e,n,i,s){const a=MathUtil.checkMulDivCeil(e,new BN(i),FEE_RATE_DENOMINATOR,64),l=n===0?ZERO:MathUtil.checkMulDivFloor(e,new BN(n),FEE_RATE_DENOMINATOR,64),f=e.mul(a).mul(l);if(s?t.feeProtocolCoinA=t.feeProtocolCoinA.add(a):t.feeProtocolCoinB=t.feeProtocolCoinB.add(a),f.eq(ZERO)||t.liquidity.eq(ZERO))return{refFee:l,clmm:t};const p=f.shln(64).div(t.liquidity);return s?t.feeGrowthGlobalA=t.feeGrowthGlobalA.add(p):t.feeGrowthGlobalB=t.feeGrowthGlobalB.add(p),{refFee:l,clmm:t}}static getCoinAmountFromLiquidity(t,e,n,i,s){const a=new decimal_default(t.toString()),l=new decimal_default(e.toString()),f=new decimal_default(n.toString()),p=new decimal_default(i.toString());let C,B;return e.lt(n)?(C=MathUtil.toX64_Decimal(a).mul(p.sub(f)).div(f.mul(p)),B=new decimal_default(0)):e.lt(i)?(C=MathUtil.toX64_Decimal(a).mul(p.sub(l)).div(l.mul(p)),B=MathUtil.fromX64_Decimal(a.mul(l.sub(f)))):(C=new decimal_default(0),B=MathUtil.fromX64_Decimal(a.mul(p.sub(f)))),s?{coinA:new BN(C.ceil().toString()),coinB:new BN(B.ceil().toString())}:{coinA:new BN(C.floor().toString()),coinB:new BN(B.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(t,e,n,i,s,a,l){const f=TickMath.sqrtPriceX64ToTickIndex(l),p=TickMath.tickIndexToSqrtPriceX64(t),C=TickMath.tickIndexToSqrtPriceX64(e);let B;if(f<t){if(!i)throw new ClmmpoolsError("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");B=estimateLiquidityForCoinA(p,C,n)}else if(f>e){if(i)throw new ClmmpoolsError("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");B=estimateLiquidityForCoinB(C,p,n)}else i?B=estimateLiquidityForCoinA(l,C,n):B=estimateLiquidityForCoinB(l,p,n);const N=ClmmPoolUtil.getCoinAmountFromLiquidity(B,l,p,C,s),le=s?d(N.coinA.toString()).mul(1+a).toString():d(N.coinA.toString()).mul(1-a).toString(),Ee=s?d(N.coinB.toString()).mul(1+a).toString():d(N.coinB.toString()).mul(1-a).toString();return{coinAmountA:N.coinA,coinAmountB:N.coinB,tokenMaxA:s?new BN(decimal_default.ceil(le).toString()):new BN(decimal_default.floor(le).toString()),tokenMaxB:s?new BN(decimal_default.ceil(Ee).toString()):new BN(decimal_default.floor(Ee).toString()),liquidityAmount:B,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(t,e,n,i){if(e>n)throw new ClmmpoolsError("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");const s=TickMath.sqrtPriceX64ToTickIndex(t),a=TickMath.tickIndexToSqrtPriceX64(e),l=TickMath.tickIndexToSqrtPriceX64(n);if(s<e)return estimateLiquidityForCoinA(a,l,i.coinA);if(s>=n)return estimateLiquidityForCoinB(l,a,i.coinB);const f=estimateLiquidityForCoinA(t,l,i.coinA),p=estimateLiquidityForCoinB(t,a,i.coinB);return BN.min(f,p)}static estCoinAmountsFromTotalAmount(t,e,n,i,s,a){const{ratioA:l,ratioB:f}=ClmmPoolUtil.calculateDepositRatioFixTokenA(t,e,n),p=d(i).mul(l).div(s),C=d(i).mul(f).div(a);return{amountA:p,amountB:C}}static calculateDepositRatioFixTokenA(t,e,n){const i=new BN(1e8),{coinAmountB:s}=ClmmPoolUtil.estLiquidityAndcoinAmountFromOneAmounts(t,e,i,!0,!0,0,n),a=TickMath.sqrtPriceX64ToPrice(n,0,0),l=d(i.toString()).mul(a),f=l.add(s.toString()),p=l.div(f),C=d(s.toString()).div(f);return{ratioA:p,ratioB:C}}};function composeType(t,...e){const n=Array.isArray(e[e.length-1])?e.pop():[];let s=[t,...e].filter(Boolean).join("::");return n&&n.length&&(s+=`<${n.join(", ")}>`),s}function extractStructTagFromType(t){var e;try{let n=t.replace(/\s/g,"");const i=n.match(/(<.+>)$/),s=(e=i==null?void 0:i[0])==null?void 0:e.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){n=n.slice(0,n.indexOf("<"));const C={...extractStructTagFromType(n),type_arguments:s.map(B=>extractStructTagFromType(B).source_address)};return C.type_arguments=C.type_arguments.map(B=>CoinAssist.isSuiCoin(B)?B:extractStructTagFromType(B).source_address),C.source_address=composeType(C.full_address,C.type_arguments),C}const a=n.split("::"),f={full_address:n,address:n===GAS_TYPE_ARG||n===GAS_TYPE_ARG_LONG?"0x2":normalizeSuiObjectId$3(a[0]),module:a[1],name:a[2],type_arguments:[],source_address:""};return f.full_address=`${f.address}::${f.module}::${f.name}`,f.source_address=composeType(f.full_address,f.type_arguments),f}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function normalizeCoinType(t){return extractStructTagFromType(t).source_address}var COIN_TYPE="0x2::coin::Coin",COIN_TYPE_ARG_REGEX=/^0x2::coin::Coin<(.+)>$/,GAS_TYPE_ARG="0x2::sui::SUI",GAS_TYPE_ARG_LONG="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",CoinAssist=class{static getCoinTypeArg(t){const e=t.type.match(COIN_TYPE_ARG_REGEX);return e?e[1]:null}static isSUI(t){const e=CoinAssist.getCoinTypeArg(t);return e?CoinAssist.getCoinSymbol(e)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,e){let n=BigInt(0);return t.forEach(i=>{e===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${COIN_TYPE}<${t}>`}static getFaucetCoins(t){const{events:e}=t,n=[];return e==null||e.forEach(i=>{const{type:s}=i;if(extractStructTagFromType(s).name==="InitEvent"){const a=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:a.suplyID,decimals:a.decimals})}}),n}static getCoinAssets(t,e){const n=[];return e.forEach(i=>{normalizeCoinType(i.coinAddress)===normalizeCoinType(t)&&n.push(i)}),n}static isSuiCoin(t){return extractStructTagFromType(t).full_address===GAS_TYPE_ARG}static selectCoinObjectIdGreaterThanOrEqual(t,e,n=[]){const i=CoinAssist.selectCoinAssetGreaterThanOrEqual(t,e,n),s=i.selectedCoins.map(f=>f.coinObjectId),a=i.remainingCoins,l=i.selectedCoins.map(f=>f.balance.toString());return{objectArray:s,remainCoins:a,amountArray:l}}static selectCoinAssetGreaterThanOrEqual(t,e,n=[]){const i=CoinAssist.sortByBalance(t.filter(p=>!n.includes(p.coinObjectId))),s=CoinAssist.calculateTotalBalance(i);if(s<e)return{selectedCoins:[],remainingCoins:i};if(s===e)return{selectedCoins:i,remainingCoins:[]};let a=BigInt(0);const l=[],f=[...i];for(;a<s;){const p=e-a,C=f.findIndex(N=>N.balance>=p);if(C!==-1){l.push(f[C]),f.splice(C,1);break}const B=f.pop();B.balance>0&&(l.push(B),a+=B.balance)}return{selectedCoins:CoinAssist.sortByBalance(l),remainingCoins:CoinAssist.sortByBalance(f)}}static sortByBalance(t){return t.sort((e,n)=>e.balance<n.balance?-1:e.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((e,n)=>e.balance>n.balance?-1:e.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((e,n)=>e+n.balance,BigInt(0))}};function adjustForSlippage(t,{numerator:e,denominator:n},i){return i?t.mul(n.add(e)).div(n):t.mul(n).div(n.add(e))}function d(t){return Decimal$1.isDecimal(t)?t:new Decimal$1(t===void 0?0:t)}function asUintN(t,e=32){return BigInt.asUintN(e,BigInt(t)).toString()}function findAdjustCoin(t){const e=CoinAssist.isSuiCoin(t.coinTypeA),n=CoinAssist.isSuiCoin(t.coinTypeB);return{isAdjustCoinA:e,isAdjustCoinB:n}}function reverSlippageAmount(t,e){return Decimal$1.ceil(d(t).div(1+e)).toString()}var _TransactionUtil=class{static createCollectRewarderAndFeeParams(t,e,n,i,s,a){s===void 0&&(s=[...i]),a===void 0&&(a=[...i]);const l=normalizeCoinType(n.coinTypeA),f=normalizeCoinType(n.coinTypeB);if(n.collect_fee){const C=_TransactionUtil.buildCoinForAmount(e,s,BigInt(0),l,!1);s=C.remainCoins;const B=_TransactionUtil.buildCoinForAmount(e,a,BigInt(0),f,!1);a=B.remainCoins,e=t.Position.createCollectFeePaylod({pool_id:n.pool_id,pos_id:n.pos_id,coinTypeA:n.coinTypeA,coinTypeB:n.coinTypeB},e,C.targetCoin,B.targetCoin)}const p=[];return n.rewarder_coin_types.forEach(C=>{switch(normalizeCoinType(C)){case l:p.push(_TransactionUtil.buildCoinForAmount(e,s,BigInt(0),C,!1).targetCoin);break;case f:p.push(_TransactionUtil.buildCoinForAmount(e,a,BigInt(0),C,!1).targetCoin);break;default:p.push(_TransactionUtil.buildCoinForAmount(e,i,BigInt(0),C,!1).targetCoin);break}}),e=t.Rewarder.createCollectRewarderPaylod(n,e,p),e}static async adjustTransactionForGas(t,e,n,i){i.setSender(t.senderAddress);const s=CoinAssist.selectCoinAssetGreaterThanOrEqual(e,n).selectedCoins;if(s.length===0)throw new ClmmpoolsError("Insufficient balance","InsufficientBalance");const a=CoinAssist.calculateTotalBalance(e);if(a-n>1e9)return{fixAmount:n};const l=await t.fullClient.calculationTxGas(i);if(CoinAssist.selectCoinAssetGreaterThanOrEqual(e,BigInt(l),s.map(p=>p.coinObjectId)).selectedCoins.length===0){const p=BigInt(l)+BigInt(500);if(a-n<p){if(n-=p,n<0)throw new ClmmpoolsError("gas Insufficient balance","InsufficientBalance");const C=new Transaction$2;return{fixAmount:n,newTx:C}}}return{fixAmount:n}}static async buildAddLiquidityFixTokenForGas(t,e,n,i,s,a,l){s=await _TransactionUtil.buildAddLiquidityFixToken(t,e,n,s,a,l);const{isAdjustCoinA:f}=findAdjustCoin(n),p=f?n.amount_a:n.amount_b,C=await _TransactionUtil.adjustTransactionForGas(t,CoinAssist.getCoinAssets(f?n.coinTypeA:n.coinTypeB,e),BigInt(p),s),{fixAmount:B}=C,{newTx:N}=C;if(N!=null){let le,Ee;if(f)n.amount_a=Number(B),le=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(N,!n.fix_amount_a,B.toString(),n.slippage,n.coinTypeA,e,!1,!0),Ee=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(N,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,e,!1,!0);else return n.amount_b=Number(B),le=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(N,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,e,!1,!0),Ee=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(N,n.fix_amount_a,B.toString(),n.slippage,n.coinTypeB,e,!1,!0),n=_TransactionUtil.fixAddLiquidityFixTokenParams(n,i.slippage,i.curSqrtPrice),s=await _TransactionUtil.buildAddLiquidityFixTokenArgs(N,t,e,n,le,Ee),s}return s}static async buildAddLiquidityFixToken(t,e,n,i,s,a){if(t.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");i=i||new Transaction$2;let l,f;return s==null||a==null?(l=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(i,!n.fix_amount_a,n.amount_a,n.slippage,n.coinTypeA,e,!1,!0),f=_TransactionUtil.buildAddLiquidityFixTokenCoinInput(i,n.fix_amount_a,n.amount_b,n.slippage,n.coinTypeB,e,!1,!0)):(l={targetCoin:s,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},f={targetCoin:a,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),i=_TransactionUtil.buildAddLiquidityFixTokenArgs(i,t,e,n,l,f),i}static buildAddLiquidityFixTokenCoinInput(t,e,n,i,s,a,l=!0,f=!0){return e?_TransactionUtil.buildCoinForAmountInterval(t,a,{amountSecond:BigInt(reverSlippageAmount(n,i)),amountFirst:BigInt(n)},s,l,f):_TransactionUtil.buildCoinForAmount(t,a,BigInt(n),s,l,f)}static fixAddLiquidityFixTokenParams(t,e,n){const i=t.fix_amount_a?t.amount_a:t.amount_b,s=ClmmPoolUtil.estLiquidityAndcoinAmountFromOneAmounts(Number(t.tick_lower),Number(t.tick_upper),new BN(i),t.fix_amount_a,!0,e,n);return t.amount_a=t.fix_amount_a?t.amount_a:s.tokenMaxA.toNumber(),t.amount_b=t.fix_amount_a?s.tokenMaxB.toNumber():t.amount_b,t}static buildAddLiquidityFixTokenArgs(t,e,n,i,s,a){const l=[i.coinTypeA,i.coinTypeB],f=i.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:p,integrate:C}=e.sdkOptions;i.is_open||(t=_TransactionUtil.createCollectRewarderAndFeeParams(e,t,i,n,s.remainCoins,a.remainCoins));const B=getPackagerConfigs(p),N=i.is_open?[t.object(B.global_config_id),t.object(i.pool_id),t.pure.u32(Number(asUintN(BigInt(i.tick_lower)).toString())),t.pure.u32(Number(asUintN(BigInt(i.tick_upper)).toString())),s.targetCoin,a.targetCoin,t.pure.u64(i.amount_a),t.pure.u64(i.amount_b),t.pure.bool(i.fix_amount_a),t.object(CLOCK_ADDRESS)]:[t.object(B.global_config_id),t.object(i.pool_id),t.object(i.pos_id),s.targetCoin,a.targetCoin,t.pure.u64(i.amount_a),t.pure.u64(i.amount_b),t.pure.bool(i.fix_amount_a),t.object(CLOCK_ADDRESS)];return t.moveCall({target:`${C.published_at}::${ClmmIntegratePoolV2Module}::${f}`,typeArguments:l,arguments:N}),t}static async buildSwapTransactionForGas(t,e,n,i){let s=_TransactionUtil.buildSwapTransaction(t,e,n);s.setSender(t.senderAddress);const a=await _TransactionUtil.adjustTransactionForGas(t,CoinAssist.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,n),BigInt(e.by_amount_in?e.amount:e.amount_limit),s),{fixAmount:l,newTx:f}=a;if(f!==void 0){f.setSender(t.senderAddress),e.by_amount_in?e.amount=l.toString():e.amount_limit=l.toString(),e=await _TransactionUtil.fixSwapParams(t,e,i);const p=_TransactionUtil.buildCoinForAmount(s,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA),C=_TransactionUtil.buildCoinForAmount(s,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB);s=_TransactionUtil.buildSwapTransactionArgs(f,e,t.sdkOptions,p,C)}return s}static buildSwapTransaction(t,e,n){let i=new Transaction$2;i.setSender(t.senderAddress);const s=_TransactionUtil.buildCoinForAmount(i,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1),a=_TransactionUtil.buildCoinForAmount(i,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1);return i=_TransactionUtil.buildSwapTransactionArgs(i,e,t.sdkOptions,s,a),i}static buildSwapTransactionArgs(t,e,n,i,s){const{clmm_pool:a,integrate:l}=n,f=SwapUtils.getDefaultSqrtPriceLimit(e.a2b),p=[e.coinTypeA,e.coinTypeB],{global_config_id:C}=getPackagerConfigs(a);if(C===void 0)throw Error("clmm.config.global_config_id is undefined");const B=e.swap_partner!==void 0,N=B?e.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":e.a2b?"swap_a2b":"swap_b2a",le=B?[t.object(C),t.object(e.pool_id),t.object(e.swap_partner),i.targetCoin,s.targetCoin,t.pure.bool(e.by_amount_in),t.pure.u64(e.amount),t.pure.u64(e.amount_limit),t.pure.u128(f.toString()),t.object(CLOCK_ADDRESS)]:[t.object(C),t.object(e.pool_id),i.targetCoin,s.targetCoin,t.pure.bool(e.by_amount_in),t.pure.u64(e.amount),t.pure.u64(e.amount_limit),t.pure.u128(f.toString()),t.object(CLOCK_ADDRESS)];return t.moveCall({target:`${l.published_at}::${ClmmIntegratePoolV2Module}::${N}`,typeArguments:p,arguments:le}),t}static async buildSwapTransactionWithoutTransferCoinsForGas(t,e,n,i){let{tx:s,coinABs:a}=_TransactionUtil.buildSwapTransactionWithoutTransferCoins(t,e,n);s.setSender(t.senderAddress);const l=await _TransactionUtil.adjustTransactionForGas(t,CoinAssist.getCoinAssets(e.a2b?e.coinTypeA:e.coinTypeB,n),BigInt(e.by_amount_in?e.amount:e.amount_limit),s),{fixAmount:f,newTx:p}=l;if(p!==void 0){p.setSender(t.senderAddress),e.by_amount_in?e.amount=f.toString():e.amount_limit=f.toString(),e=await _TransactionUtil.fixSwapParams(t,e,i);const C=_TransactionUtil.buildCoinForAmount(s,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),B=_TransactionUtil.buildCoinForAmount(s,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),N=_TransactionUtil.buildSwapTransactionWithoutTransferCoinArgs(t,p,e,t.sdkOptions,C,B);s=N.tx,a=N.txRes}return{tx:s,coinABs:a}}static buildSwapTransactionWithoutTransferCoins(t,e,n){const i=new Transaction$2;i.setSender(t.senderAddress);const s=_TransactionUtil.buildCoinForAmount(i,n,e.a2b?BigInt(e.by_amount_in?e.amount:e.amount_limit):BigInt(0),e.coinTypeA,!1,!0),a=_TransactionUtil.buildCoinForAmount(i,n,e.a2b?BigInt(0):BigInt(e.by_amount_in?e.amount:e.amount_limit),e.coinTypeB,!1,!0),l=_TransactionUtil.buildSwapTransactionWithoutTransferCoinArgs(t,i,e,t.sdkOptions,s,a);return{tx:l.tx,coinABs:l.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(t,e,n,i,s,a){const{clmm_pool:l,integrate:f}=i,p=SwapUtils.getDefaultSqrtPriceLimit(n.a2b),{global_config_id:C}=getPackagerConfigs(l);if(C===void 0)throw Error("clmm.config.global_config_id is undefined");const B=n.swap_partner!==void 0,N=B?"swap_with_partner":"swap",le=B?ClmmIntegrateRouterWithPartnerModule:ClmmIntegrateRouterModule,Ee=B?[e.object(C),e.object(n.pool_id),e.object(n.swap_partner),s.targetCoin,a.targetCoin,e.pure.bool(n.a2b),e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u128(p.toString()),e.pure.bool(!1),e.object(CLOCK_ADDRESS)]:[e.object(C),e.object(n.pool_id),s.targetCoin,a.targetCoin,e.pure.bool(n.a2b),e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u128(p.toString()),e.pure.bool(!1),e.object(CLOCK_ADDRESS)],Ue=[n.coinTypeA,n.coinTypeB],ze=e.moveCall({target:`${f.published_at}::${le}::${N}`,typeArguments:Ue,arguments:Ee});if(n.by_amount_in){const Ze=n.a2b?n.coinTypeB:n.coinTypeA,Qe=n.a2b?ze[1]:ze[0],ct=Number(n.amount_limit);this.checkCoinThreshold(t,n.by_amount_in,e,Qe,ct,Ze)}return{tx:e,txRes:ze}}static async fixSwapParams(t,e,n){const{currentPool:i}=n;try{const s=await t.Swap.preswap({decimalsA:n.decimalsA,decimalsB:n.decimalsB,a2b:e.a2b,byAmountIn:e.by_amount_in,amount:e.amount,pool:i,currentSqrtPrice:i.current_sqrt_price,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB}),a=n.byAmountIn?s.estimatedAmountOut:s.estimatedAmountIn,l=adjustForSlippage(a,n.slippage,!n.byAmountIn);e.amount_limit=l.toString()}catch(s){console.log("fixSwapParams",s)}return e}static async syncBuildCoinInputForAmount(t,e,n,i,s=!0,a=!0){if(t.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const l=await t.getOwnerCoinAssets(t.senderAddress,i);return _TransactionUtil.buildCoinForAmount(e,l,n,i,s,a).targetCoin}static buildCoinForAmount(t,e,n,i,s=!0,a=!0){const l=CoinAssist.getCoinAssets(i,e);if(n===BigInt(0))return _TransactionUtil.buildZeroValueCoin(e,t,i,s);const f=CoinAssist.calculateTotalBalance(l);if(f<n)throw new ClmmpoolsError(`The amount(${f}) is Insufficient balance for ${i} , expect ${n} `,"InsufficientBalance");return _TransactionUtil.buildCoin(t,e,l,n,i,s,a)}static buildCoinWithBalance(t,e){return t===BigInt(0)&&CoinAssist.isSuiCoin(e)?coinWithBalance$1({balance:t,useGasCoin:!1}):coinWithBalance$1({balance:t,type:e})}static buildVectorCoin(t,e,n,i,s,a=!0){if(CoinAssist.isSuiCoin(s)){const N=t.splitCoins(t.gas,[t.pure.u64(i)]);return{targetCoin:t.makeMoveVec({elements:[N]}),remainCoins:e,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:t.gas}}const{targetCoin:l,originalSplitedCoin:f,tragetCoinAmount:p,selectedCoinsResult:C,coinObjectIds:B}=this.buildSpitTargeCoin(t,i,n,a);return a?{targetCoin:t.makeMoveVec({elements:[l]}),remainCoins:C.remainCoins,originalSplitedCoin:f,tragetCoinAmount:p,isMintZeroCoin:!1}:{targetCoin:t.makeMoveVec({elements:B.map(N=>t.object(N))}),remainCoins:C.remainCoins,tragetCoinAmount:C.amountArray.reduce((N,le)=>Number(N)+Number(le),0).toString(),isMintZeroCoin:!1}}static buildOneCoin(t,e,n,i,s=!0){if(CoinAssist.isSuiCoin(i)){if(n===0n&&e.length>1){const N=CoinAssist.selectCoinObjectIdGreaterThanOrEqual(e,n);return{targetCoin:t.object(N.objectArray[0]),remainCoins:N.remainCoins,tragetCoinAmount:N.amountArray[0],isMintZeroCoin:!1}}const C=CoinAssist.selectCoinObjectIdGreaterThanOrEqual(e,n);return{targetCoin:t.splitCoins(t.gas,[t.pure.u64(n)]),remainCoins:C.remainCoins,tragetCoinAmount:n.toString(),isMintZeroCoin:!1,originalSplitedCoin:t.gas}}const{targetCoin:a,originalSplitedCoin:l,tragetCoinAmount:f,selectedCoinsResult:p}=this.buildSpitTargeCoin(t,n,e,s);return{targetCoin:a,remainCoins:p.remainCoins,originalSplitedCoin:l,tragetCoinAmount:f,isMintZeroCoin:!1}}static buildSpitTargeCoin(t,e,n,i){const s=CoinAssist.selectCoinObjectIdGreaterThanOrEqual(n,e),a=s.amountArray.reduce((Ee,Ue)=>Number(Ee)+Number(Ue),0).toString(),l=s.objectArray,[f,...p]=l,C=t.object(f);let B=C;const N=s.amountArray.reduce((Ee,Ue)=>Number(Ee)+Number(Ue),0).toString();let le;return p.length>0&&t.mergeCoins(C,p.map(Ee=>t.object(Ee))),i&&Number(a)>Number(e)&&(B=t.splitCoins(C,[t.pure.u64(e)]),le=C),{originalSplitedCoin:le,targetCoin:B,tragetCoinAmount:N,selectedCoinsResult:s,coinObjectIds:l}}static buildCoin(t,e,n,i,s,a=!0,l=!0){return a?this.buildVectorCoin(t,e,n,i,s,l):this.buildOneCoin(t,n,i,s,l)}static buildZeroValueCoin(t,e,n,i=!0){const s=_TransactionUtil.callMintZeroValueCoin(e,n);let a;return i?a=e.makeMoveVec({elements:[s]}):a=s,{targetCoin:a,remainCoins:t,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(t,e,n,i,s=!0,a=!0){const l=CoinAssist.getCoinAssets(i,e);if(n.amountFirst===BigInt(0))return l.length>0?_TransactionUtil.buildCoin(t,[...e],[...l],n.amountFirst,i,s,a):_TransactionUtil.buildZeroValueCoin(e,t,i,s);const f=CoinAssist.calculateTotalBalance(l);if(f>=n.amountFirst)return _TransactionUtil.buildCoin(t,[...e],[...l],n.amountFirst,i,s,a);if(f<n.amountSecond)throw new ClmmpoolsError(`The amount(${f}) is Insufficient balance for ${i} , expect ${n.amountSecond} `,"InsufficientBalance");return _TransactionUtil.buildCoin(t,[...e],[...l],n.amountSecond,i,s,a)}static async buildRouterSwapTransaction(t,e,n,i,s){let a=new Transaction$2;return e.paths.length>1&&(e.partner=""),a=await this.buildRouterBasePathTx(t,e,n,i,a,s),a}static async buildRouterBasePathTx(t,e,n,i,s,a){const l=e.paths.filter(wt=>wt&&wt.poolAddress),f=Number(l.reduce((wt,qt)=>wt.add(qt.amountIn),ZERO).toString()),p=Number(l.reduce((wt,qt)=>wt.add(qt.amountOut),ZERO).toString()),C=Math.round(n?Number(p.toString())*(1-e.priceSlippagePoint):Number(f.toString())*(1+e.priceSlippagePoint)),B=e.paths[0].coinType[0],N=e.paths[0].coinType[e.paths[0].coinType.length-1],le=_TransactionUtil.buildCoinForAmount(s,i,BigInt(n?f:C),B,!1,!0),Ee=le.originalSplitedCoin!==void 0,Ue=_TransactionUtil.buildCoinForAmount(s,i,0n,N,!1),ze=await this.buildRouterBasePathReturnCoins(t,e,n,le,Ue,s),Ze=[],{toCoin:Qe,fromCoin:ct}=ze;if(s=ze.tx,Ue.isMintZeroCoin?Ze.push({coinType:N,coin:Qe}):Ue.originalSplitedCoin!==void 0?s.mergeCoins(Ue.originalSplitedCoin,[Qe]):s.mergeCoins(Ue.targetCoin,[Qe]),Ee){const wt=le==null?void 0:le.originalSplitedCoin;s.mergeCoins(wt,[ct])}else Ze.push({coinType:B,coin:ct});for(let wt=0;wt<Ze.length;wt++)this.buildTransferCoin(t,s,Ze[wt].coin,Ze[wt].coinType,a);return s}static async buildRouterBasePathReturnCoins(t,e,n,i,s,a){const{clmm_pool:l,integrate:f}=t.sdkOptions,p=getPackagerConfigs(l).global_config_id,C=e.paths.filter(wt=>wt&&wt.poolAddress),B=Number(C.reduce((wt,qt)=>wt.add(qt.amountIn),ZERO).toString()),N=Number(C.reduce((wt,qt)=>wt.add(qt.amountOut),ZERO).toString()),le=Math.round(n?Number(N.toString())*(1-e.priceSlippagePoint):Number(B.toString())*(1+e.priceSlippagePoint)),Ee=e.paths[0].coinType[0],Ue=e.paths[0].coinType[e.paths[0].coinType.length-1];let ze=i.targetCoin,Ze;s.isMintZeroCoin||s.originalSplitedCoin!==void 0?Ze=s.targetCoin:Ze=_TransactionUtil.callMintZeroValueCoin(a,Ue);const Qe=e.partner==="",ct=Qe?ClmmIntegrateRouterModule:ClmmIntegrateRouterWithPartnerModule;for(const wt of C)if(wt.poolAddress.length===1){const qt=wt.a2b[0],nr={amount:Number(wt.amountIn.toString()),poolCoinA:wt.a2b[0]?Ee:Ue,poolCoinB:wt.a2b[0]?Ue:Ee},ir=Qe?"swap":"swap_with_partner",or=qt?ze:Ze,ur=qt?Ze:ze,hr=n?wt.amountIn.toString():wt.amountOut.toString(),fr=SwapUtils.getDefaultSqrtPriceLimit(qt).toString(),ar=Qe?[a.object(p),a.object(wt.poolAddress[0]),or,ur,a.pure.bool(qt),a.pure.bool(n),a.pure.u64(hr),a.pure.u128(fr),a.pure.bool(!1),a.object(CLOCK_ADDRESS)]:[a.object(p),a.object(wt.poolAddress[0]),a.object(e.partner),or,ur,a.pure.bool(qt),a.pure.bool(n),a.pure.u64(hr),a.pure.u128(fr),a.pure.bool(!1),a.object(CLOCK_ADDRESS)],Lt=[nr.poolCoinA,nr.poolCoinB],Vt=a.moveCall({target:`${t.sdkOptions.integrate.published_at}::${ct}::${ir}`,typeArguments:Lt,arguments:ar});ze=qt?Vt[0]:Vt[1],Ze=qt?Vt[1]:Vt[0]}else{const qt=n?wt.amountIn:wt.rawAmountLimit[0],nr=n?0:wt.amountOut;let ir="";wt.a2b[0]?wt.a2b[1]?ir="swap_ab_bc":ir="swap_ab_cb":wt.a2b[1]?ir="swap_ba_bc":ir="swap_ba_cb",Qe||(ir=`${ir}_with_partner`);const or=SwapUtils.getDefaultSqrtPriceLimit(wt.a2b[0]),ur=SwapUtils.getDefaultSqrtPriceLimit(wt.a2b[1]),hr=Qe?[a.object(p),a.object(wt.poolAddress[0]),a.object(wt.poolAddress[1]),ze,Ze,a.pure.bool(n),a.pure.u64(qt.toString()),a.pure.u64(nr.toString()),a.pure.u128(or.toString()),a.pure.u128(ur.toString()),a.object(CLOCK_ADDRESS)]:[a.object(p),a.object(wt.poolAddress[0]),a.object(wt.poolAddress[1]),a.object(e.partner),ze,Ze,a.pure.bool(n),a.pure.u64(qt.toString()),a.pure.u64(nr.toString()),a.pure.u128(or.toString()),a.pure.u128(ur.toString()),a.object(CLOCK_ADDRESS)],fr=[wt.coinType[0],wt.coinType[1],wt.coinType[2]],ar=a.moveCall({target:`${f.published_at}::${ct}::${ir}`,typeArguments:fr,arguments:hr});ze=ar[0],Ze=ar[1]}return this.checkCoinThreshold(t,n,a,Ze,le,Ue),{fromCoin:ze,toCoin:Ze,tx:a}}static async buildAggregatorSwapReturnCoins(t,e,n,i,s,a,l,f){if(f==null){if(t.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");f=t.senderAddress}e.splitPaths.length>1&&(s="");let p,C;const B=e.splitPaths.some(N=>N.basePaths.some(le=>le.label==="Deepbook"));if((!e.byAmountIn||e.splitPaths.length===1)&&!B){const N=[];for(const Ue of e.splitPaths){const ze=[],Ze=[],Qe=[],ct=[];for(let qt=0;qt<Ue.basePaths.length;qt+=1){const nr=Ue.basePaths[qt];ze.push(nr.direction),Ze.push(nr.poolAddress),Qe.push(new BN(nr.inputAmount.toString())),qt===0?ct.push(nr.fromCoin,nr.toCoin):ct.push(nr.toCoin)}const wt={amountIn:new BN(Ue.inputAmount.toString()),amountOut:new BN(Ue.outputAmount.toString()),poolAddress:Ze,a2b:ze,rawAmountLimit:Qe,isExceed:!1,coinType:ct};N.push(wt)}const le={paths:N,partner:s,priceSlippagePoint:a},Ee=await this.buildRouterBasePathReturnCoins(t,le,e.byAmountIn,n,i,l);p=Ee.fromCoin,C=Ee.toCoin,l=Ee.tx}else{const N=Math.round(e.outputAmount*(1-a));p=n.targetCoin,i.isMintZeroCoin||i.originalSplitedCoin!==void 0?C=i.targetCoin:C=_TransactionUtil.callMintZeroValueCoin(l,e.toCoin);let le=!1,Ee;if(B){const[Ue,ze]=DeepbookUtils.createAccountCap(f,t.sdkOptions,l);l=ze,Ee=Ue,le=!0}for(let Ue=0;Ue<e.splitPaths.length;Ue+=1){const ze=e.splitPaths[Ue];let Ze;for(let Qe=0;Qe<ze.basePaths.length;Qe+=1){const ct=ze.basePaths[Qe];if(ct.label==="Deepbook")if(Qe===0)if(ze.basePaths.length===1){const wt=this.buildDeepbookBasePathTx(t,ct,l,Ee,p,C,!1);p=wt.from,C=wt.to}else{Ze=_TransactionUtil.callMintZeroValueCoin(l,ct.toCoin);const wt=this.buildDeepbookBasePathTx(t,ct,l,Ee,p,Ze,!1);p=wt.from,Ze=wt.to}else{const wt=this.buildDeepbookBasePathTx(t,ct,l,Ee,Ze,C,!0);Ze=wt.from,C=wt.to}if(ct.label==="Cetus")if(Qe===0)if(ze.basePaths.length===1){const wt=this.buildClmmBasePathTx(t,ct,l,e.byAmountIn,p,C,!1,s);p=wt.from,C=wt.to}else{Ze=_TransactionUtil.callMintZeroValueCoin(l,ct.toCoin);const wt=this.buildClmmBasePathTx(t,ct,l,e.byAmountIn,p,Ze,!1,s);p=wt.from,Ze=wt.to}else{const wt=this.buildClmmBasePathTx(t,ct,l,e.byAmountIn,Ze,C,!0,s);Ze=wt.from,C=wt.to,l.moveCall({target:`${t.sdkOptions.integrate.published_at}::${ClmmIntegrateUtilsModule}::send_coin`,typeArguments:[ct.fromCoin],arguments:[Ze,l.pure.address(f)]})}}}this.checkCoinThreshold(t,e.byAmountIn,l,C,N,e.toCoin),le&&(l=DeepbookUtils.deleteAccountCapByObject(Ee,t.sdkOptions,l))}return{fromCoin:p,toCoin:C,tx:l}}static async buildAggregatorSwapTransaction(t,e,n,i,s,a){let l=new Transaction$2;const f=e.byAmountIn?Math.round(e.outputAmount*(1-s)):Math.round(e.inputAmount*(1+s)),p=_TransactionUtil.buildCoinForAmount(l,n,e.byAmountIn?BigInt(e.inputAmount):BigInt(f),e.fromCoin,!1,!0),C=p.originalSplitedCoin!=null,B=_TransactionUtil.buildCoinForAmount(l,n,0n,e.toCoin,!1),N=await this.buildAggregatorSwapReturnCoins(t,e,p,B,i,s,l,a),{fromCoin:le,toCoin:Ee}=N;l=N.tx;const Ue=[];if(B.isMintZeroCoin?Ue.push({coinType:e.toCoin,coin:Ee}):B.originalSplitedCoin!=null?l.mergeCoins(B.originalSplitedCoin,[Ee]):l.mergeCoins(B.targetCoin,[Ee]),C){const ze=p.originalSplitedCoin;l.mergeCoins(ze,[le])}else Ue.push({coinType:e.fromCoin,coin:le});for(let ze=0;ze<Ue.length;ze++)this.buildTransferCoin(t,l,Ue[ze].coin,Ue[ze].coinType,a);return l}static checkCoinThreshold(t,e,n,i,s,a){e&&n.moveCall({target:`${t.sdkOptions.integrate.published_at}::${ClmmIntegrateRouterModule}::check_coin_threshold`,typeArguments:[a],arguments:[i,n.pure.u64(s)]})}static buildDeepbookBasePathTx(t,e,n,i,s,a,l){const f=e.direction?s:a,p=e.direction?a:s,C=[n.object(e.poolAddress),i,n.pure.u64(e.inputAmount),n.pure.u64(0),n.pure.bool(e.direction),f,p,n.pure.bool(l),n.object(CLOCK_ADDRESS)],B=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],N=n.moveCall({target:`${t.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:B,arguments:C});return s=e.direction?N[0]:N[1],a=e.direction?N[1]:N[0],{from:s,to:a,tx:n}}static buildClmmBasePathTx(t,e,n,i,s,a,l,f){const{clmm_pool:p,integrate:C}=t.sdkOptions,B=getPackagerConfigs(p).global_config_id;let N=e.direction?s:a,le=e.direction?a:s;const Ee=f==="",Ue=Ee?ClmmIntegrateRouterModule:ClmmIntegrateRouterWithPartnerModule,ze=Ee?"swap":"swap_with_partner",Ze=i?e.inputAmount.toString():e.outputAmount.toString(),Qe=SwapUtils.getDefaultSqrtPriceLimit(e.direction),ct=Ee?[n.object(B),n.object(e.poolAddress),N,le,n.pure.bool(e.direction),n.pure.bool(i),n.pure.u64(Ze),n.pure.u128(Qe.toString()),n.pure.bool(l),n.object(CLOCK_ADDRESS)]:[n.object(B),n.object(e.poolAddress),n.object(f),N,le,n.pure.bool(e.direction),n.pure.bool(i),n.pure.u64(Ze),n.pure.u128(Qe.toString()),n.pure.bool(l),n.object(CLOCK_ADDRESS)],wt=e.direction?[e.fromCoin,e.toCoin]:[e.toCoin,e.fromCoin],qt=n.moveCall({target:`${C.published_at}::${Ue}::${ze}`,typeArguments:wt,arguments:ct});return N=qt[0],le=qt[1],s=e.direction?N:le,a=e.direction?le:N,{from:s,to:a,tx:n}}static buildCoinTypePair(t,e){const n=[];if(t.length===2){const i=[];i.push(t[0],t[1]),n.push(i)}else{const i=[];i.push(t[0],t[t.length-1]),n.push(i);for(let s=1;s<t.length-1;s+=1){if(e[s-1]===0)continue;const a=[];a.push(t[0],t[s],t[t.length-1]),n.push(a)}}return n}static buildTransferCoinToSender(t,e,n,i){e.moveCall({target:`${t.sdkOptions.integrate.published_at}::${ClmmIntegrateUtilsModule}::transfer_coin_to_sender`,typeArguments:[i],arguments:[n]})}static buildTransferCoin(t,e,n,i,s){s!=null?e.transferObjects([n],e.pure.address(s)):_TransactionUtil.buildTransferCoinToSender(t,e,n,i)}},TransactionUtil=_TransactionUtil;__publicField(TransactionUtil,"callMintZeroValueCoin",(t,e)=>t.moveCall({target:"0x2::coin::zero",typeArguments:[e]}));var FLOAT_SCALING=new BN(1e9),DeepbookUtils=class{static createAccountCap(t,e,n,i=!1){if(t.length===0)throw Error("this config sdk senderAddress is empty");const{deepbook:s}=e,[a]=n.moveCall({target:`${s.published_at}::${DeepbookClobV2Moudle}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([a],n.pure.address(t)),[a,n]}static deleteAccountCap(t,e,n){const{deepbook:i}=e,s=[n.object(t)];return n.moveCall({target:`${i.published_at}::${DeepbookCustodianV2Moudle}::delete_account_cap`,typeArguments:[],arguments:s}),n}static deleteAccountCapByObject(t,e,n){const{deepbook:i}=e,s=[t];return n.moveCall({target:`${i.published_at}::${DeepbookCustodianV2Moudle}::delete_account_cap`,typeArguments:[],arguments:s}),n}static async getAccountCap(t,e=!0){const n=await t.fullClient.getOwnedObjectsByPage(t.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:e,showOwner:!0},filter:{MoveModule:{package:t.sdkOptions.deepbook.package_id,module:DeepbookCustodianV2Moudle}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(t){const e=t.sdkOptions.deepbook.package_id,n=[];try{(await t.fullClient.queryEventsByPage({MoveEventType:`${e}::clob_v2::PoolCreated`})).data.forEach(s=>{const a=s.parsedJson;a&&n.push({poolID:a.pool_id,tickSize:Number(a.tick_size),lotSize:Number(a.lot_size),takerFeeRate:Number(a.taker_fee_rate),makerRebateRate:Number(a.maker_rebate_rate),baseAsset:a.base_asset.name,quoteAsset:a.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(t,e,n,i){var le;const{simulationAccount:s}=t.sdkOptions,{deepbook_endpoint_v2:a}=t.sdkOptions,l=new Transaction$2,f=[],p=[n,i],C=[l.object(e),l.pure.u64("0"),l.pure.u64("999999999999"),l.object(CLOCK_ADDRESS)];l.moveCall({target:`${a.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:C,typeArguments:p});const N=(le=(await t.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:s.address})).events)==null?void 0:le.filter(Ee=>extractStructTagFromType(Ee.type).name==="BookStatus");if(N.length===0)return f;for(let Ee=0;Ee<N[0].parsedJson.depths.length;Ee++){const Ue=N[0].parsedJson.price[Ee],ze=N[0].parsedJson.depths[Ee],Ze={price:parseInt(Ue,10),quantity:parseInt(ze,10)};f.push(Ze)}return f}static async getPoolBids(t,e,n,i){var le;const{simulationAccount:s}=t.sdkOptions,{deepbook_endpoint_v2:a}=t.sdkOptions,l=new Transaction$2,f=[],p=[n,i],C=[l.object(e),l.pure.u64("0"),l.pure.u64("999999999999"),l.object(CLOCK_ADDRESS)];l.moveCall({target:`${a.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:C,typeArguments:p});const N=(le=(await t.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:s.address})).events)==null?void 0:le.filter(Ee=>extractStructTagFromType(Ee.type).name==="BookStatus");if(N.length===0)return f;for(let Ee=0;Ee<N[0].parsedJson.depths.length;Ee++){const Ue=N[0].parsedJson.price[Ee],ze=N[0].parsedJson.depths[Ee],Ze={price:parseInt(Ue,10),quantity:parseInt(ze,10)};f.push(Ze)}return f}static async preSwap(t,e,n,i){let s=!1,a=ZERO,l=new BN(i),f=ZERO;const p=new BN(i);if(n){let C=await this.getPoolBids(t,e.poolID,e.baseAsset,e.quoteAsset);C===null&&(s=!0),C=C.sort((B,N)=>N.price-B.price);for(let B=0;B<C.length;B+=1){const N=new BN(C[B].quantity),le=new BN(C[B].price),Ee=N.mul(new BN(le)).mul(new BN(e.takerFeeRate)).div(FLOAT_SCALING).div(FLOAT_SCALING);if(l.gt(N))l=l.sub(N),a=a.add(N.mul(le).div(FLOAT_SCALING).sub(Ee)),f=f.add(Ee);else{const Ue=l.mul(new BN(C[B].price)).div(FLOAT_SCALING),ze=Ue.mul(new BN(e.takerFeeRate)).div(FLOAT_SCALING);a=a.add(Ue.sub(ze)),l=l.sub(l),f=f.add(ze)}if(l.eq(ZERO))break}}else{const C=await this.getPoolAsks(t,e.poolID,e.baseAsset,e.quoteAsset);C===null&&(s=!0);for(let B=0;B<C.length;B+=1){const N=new BN(C[B].price).mul(new BN(C[B].quantity)).div(new BN(1e9)),le=N.mul(new BN(e.takerFeeRate)).div(FLOAT_SCALING),Ee=N.add(le);if(l.gt(N))a=a.add(new BN(C[B].quantity)),l=l.sub(Ee),f=f.add(le);else{const Ue=new BN(C[B].quantity).div(new BN(e.lotSize)),ze=Ee.div(Ue),Ze=l.div(ze);a=a.add(Ze.muln(e.lotSize)),l=l.sub(Ze.mul(ze)),f=f.add(Ze.div(Ue).mul(le))}if(l.eq(ZERO))break}}return{poolAddress:e.poolID,estimatedAmountIn:p.sub(l).toNumber(),estimatedAmountOut:a.toNumber(),estimatedFeeAmount:f,isExceed:s,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(t,e,n,i,s,a){var nr;const{deepbook_endpoint_v2:l}=t.sdkOptions;let f=new Transaction$2;const p=await this.getAccountCap(t);let C;if(p===""){const ir=this.createAccountCap(t.senderAddress,t.sdkOptions,f),or=ir[0];f=ir[1],C=or}else C=f.object(p);const B=await t.getOwnerCoinAssets(t.senderAddress),N=TransactionUtil.buildCoinForAmount(f,B,BigInt(a),n,!1),le=N==null?void 0:N.targetCoin,Ee=TransactionUtil.buildCoinForAmount(f,B,BigInt(a),i,!1),Ue=Ee==null?void 0:Ee.targetCoin,ze=[n,i],Ze=[f.object(e),C,f.pure.u64(a),f.pure.u64(0),f.pure.bool(s),le,Ue,f.object(CLOCK_ADDRESS)];f.moveCall({target:`${l.published_at}::${DeepbookEndpointsV2Moudle}::swap`,arguments:Ze,typeArguments:ze});const{simulationAccount:Qe}=t.sdkOptions,wt=(nr=(await t.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:Qe.address})).events)==null?void 0:nr.filter(ir=>extractStructTagFromType(ir.type).name==="DeepbookSwapEvent");if(wt.length===0)return null;const qt=wt[0].parsedJson;return{poolAddress:qt.pool,estimatedAmountIn:qt.amount_in,estimatedAmountOut:qt.amount_out,aToB:qt.atob}}};getFullnodeUrl$2("testnet");function useTokenSelect(){const{verifiedTokenMap:t,setVerifiedTokenMap:e}=useTokenStore(),{setCollectList:n,collectList:i,setFilterTokenLoading:s,setFilterTokenList:a,importTokenList:l,setImportTokenList:f,liquidityTrustTokenList:p,setLiquidityTrustTokenList:C,setShowImportBtn:B,setTrustedListLabel:N,setUserCollectList:le,userCollectList:Ee}=useTokenSelectStore(),{tokenBalanceObj:Ue}=useTokenBalanceStore(),{currentAccount:ze}=useAccountStore(),{getTokenPrice:Ze}=useTokenPrice(),{clmmSdk:Qe}=useClmmSDKStore(),{showCommonToast:ct}=useGlobalToast(),wt=async()=>{const yt=Array.from(t==null?void 0:t.values()).filter(vr=>vr.suggested_priority),Ut=yt.sort((vr,_r)=>Number(_r.suggested_priority)-Number(vr.suggested_priority));VariousTokensTable.setItem(COLLECT_TOKEN_LIST,Ut);const Ft=[...yt,...Ut],sr=[...new Map(Ft.map(vr=>[extractStructTagFromType((vr==null?void 0:vr.coin_type)||(vr==null?void 0:vr.address)).full_address||(vr==null?void 0:vr.address),vr])).values()];n(sr)},qt=async()=>{const yt=await VariousTokensTable.getItem(USER_COLLECT_TOKEN_LIST)||[];le(yt)},nr=yt=>{const tr=Ee.filter(Ut=>Ut.coin_type!==yt.coin_type);le(tr),VariousTokensTable.setItem(USER_COLLECT_TOKEN_LIST,tr),ct("Removed","success")},ir=yt=>{const tr=yt.map(Ft=>Ft.coin_type),Ut=Ee.filter(Ft=>!tr.includes(Ft.coin_type));le(Ut),VariousTokensTable.setItem(USER_COLLECT_TOKEN_LIST,Ut)},or=yt=>{const tr=[...Ee,yt];le(tr),VariousTokensTable.setItem(USER_COLLECT_TOKEN_LIST,tr),ct("Added","success")},ur=async()=>{const yt=await VariousTokensTable.getItem(IMPORT_TOKEN_LIST);yt&&f(yt)},hr=yt=>{const tr=[...l,...yt];f(tr),VariousTokensTable.setItem(IMPORT_TOKEN_LIST,tr),ct("Imported","success")},fr=yt=>{const tr=yt.map(Ft=>Ft.coin_type),Ut=l.filter(Ft=>!tr.includes(Ft.coin_type));f(Ut),VariousTokensTable.setItem(IMPORT_TOKEN_LIST,Ut),ir(yt),ct((yt==null?void 0:yt.length)==(l==null?void 0:l.length)?"Cleared":"Removed","success")},ar=()=>{const yt=Array.from(t==null?void 0:t.values()).map(Ut=>Ut.coin_type),tr=l.filter(Ut=>!yt.includes(Ut.coin_type));f(tr),VariousTokensTable.setItem(IMPORT_TOKEN_LIST,tr)},Lt=yt=>{const tr=[...p,...yt];console.log(" ~ file: useTokenSelect.ts:100 ~ addImportTokenList ~ list:",tr),C(tr),VariousTokensTable.setItem(LIQUIDITY_TRUST_TOKEN_LIST,tr)},Vt=yt=>{const tr=yt.map(Ft=>Ft.coin_type),Ut=p.filter(Ft=>!tr.includes(Ft.coin_type));C(Ut),VariousTokensTable.setItem(LIQUIDITY_TRUST_TOKEN_LIST,Ut)},tt=(yt,tr)=>Ue[yt]&&(ze!=null&&ze.address)?bnToAmount(Ue[yt].totalBalance,tr):0,Ye=(yt,tr,Ut=!0)=>{console.log(" ~ useTokenSelect.ts:160 ~ sortWithTokenList ~ keyword:",tr);const Ft=tr&&tr.toLocaleLowerCase(),sr=yt.map(_r=>{var cr;let dr=0,gr=0;_r.symbol.toLowerCase()===Ft||_r.name.toLowerCase()===Ft||_r.coin_type.toLowerCase()===Ft?(dr=1e3,gr=2):_r.symbol.toLowerCase().indexOf(Ft)>-1?(dr=100,gr=0):_r.name.toLowerCase().indexOf(Ft)>-1?(dr=10,gr=0):_r.coin_type.toLowerCase().indexOf(Ft)>-1?(dr=1,gr=0):(_r.coin_type.toLowerCase()=="0x2::sui::sui"||_r.coin_type.toLocaleLowerCase()=="0000000000000000000000000000000000000000000000000000000000000002::sui::sui")&&(gr=1);const $r=Ut&&tt(extractStructTagFromType(_r.coin_type).full_address,_r.decimals)||0,pr=Ut&&((cr=Ze(_r.coin_type))==null?void 0:cr.price)||void 0,lr=Array.isArray(_r==null?void 0:_r.coin_priority)?Number(_r.coin_priority[0])||0:Number(_r==null?void 0:_r.coin_priority)||0;return{..._r,coin_priority_sort:lr,mark:dr,sort:gr,balance:$r,price:pr,balanceUSD:pr?d$2($r).mul(d$2(pr)).toNumber():"0"}}),vr=orderBy(sr,["sort","mark","balanceUSD","balance","coin_priority_sort","symbol"],["desc","desc","desc","desc","desc","asc"]);return console.log(" ~ useTokenSelect.ts:202 ~ sortWithTokenList ~ sortedTokens:",vr),vr},ot=()=>{const yt=[],tr=[],Ut=[{label:"All",value:"All"},{label:"Native",value:"Native"}];console.log(" ~ file: useTokenSelect.ts:199 ~ getDefaultTokenList ~ tokenMap.values():",Array.from(t==null?void 0:t.values()));for(const _r of Array.from(t==null?void 0:t.values()))(_r.is_verified===void 0?_r!=null&&_r.is_trusted:_r!=null&&_r.is_verified)&&_r.coin_type!=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"&&(yt.push(_r),_r.labels&&_r.labels[0]&&tr.push({label:_r.labels[0],value:_r.labels[0]}));const Ft=Ye(yt,"");console.log(" ~ file: useTokenSelect.ts:211 ~ getDefaultTokenList ~ result:",yt),console.log(" ~ file: useTokenSelect.ts:221 ~ getDefaultTokenList ~ sortResult:",Ft);const sr=new Map(Ft==null?void 0:Ft.map(_r=>[_r==null?void 0:_r.coin_type,_r]));e(sr);const vr=Array.from(new Set(tr.map(_r=>_r.label))).map(_r=>tr.find(dr=>dr.label===_r));N(Ut.concat(vr)),console.log(" ~ file: useTokenSelect.ts:194 ~ getDefaultTokenList ~ trustedListLabel.concat(Array.from(new Set(labelList))):",Ut.concat(Array.from(new Set(tr))))},Et=async(yt,tr,Ut,Ft=!0,sr=!0)=>{let vr=!1;B(!1);const _r=getSuiObjectType(yt),dr=isSuiObjectType(yt)?suiAddressLongToShort(extractStructTagFromType(suiAddressLongToShort(yt).toLowerCase()).full_address).toLocaleLowerCase():yt.toLowerCase(),gr=tr.filter(cr=>{var yr;return cr.symbol.toLowerCase().indexOf(dr)!==-1||cr.coin_type.toLowerCase().indexOf(dr)!==-1||cr.name.toLowerCase().indexOf(dr)!==-1||(cr==null?void 0:cr.coin_type)&&((yr=cr==null?void 0:cr.coin_type)==null?void 0:yr.toLowerCase().indexOf(dr))!==-1}),$r=Ut.filter(cr=>cr.symbol.toLowerCase().indexOf(dr)!==-1||cr.coin_type.toLowerCase().indexOf(dr)!==-1||cr.name.toLowerCase().indexOf(dr)!==-1);let pr=gr.concat($r);if(pr&&pr.length==0&&_r.split("::").length==3&&sr)try{const cr=await Qe.CetusConfig.getTokenListByCoinTypes([_r]);if(cr[_r])pr=[{...cr[_r],is_verified:!1,coin_type:extractStructTagFromType(_r).full_address,description:""}],vr=!0;else{const{data:yr}=await fetch(`/data/hop-coin-info.json?timestamp=${new Date().getTime()}`).then(Ar=>Ar.json()),Sr=yr[_r];yr&&Sr&&(pr=[{...Sr,is_verified:!1,logo_url:Sr.iconUrl,coin_type:extractStructTagFromType(_r).full_address}],vr=!0)}}catch(cr){console.log(" ~ file: useTokenSelect.ts:90 ~ filterTokenList ~ error:",cr)}const lr=Ye(pr,_r);a(lr),B(Ft?vr:!1),s(!1),console.log(" ~ file: useTokenSelect.ts:238 ~ filterTokenListFun ~ filterTokenListFun:",lr)},er=(yt,tr)=>{const Ut=tr.filter(sr=>yt=="Native"?!sr.labels||sr.labels.length==0||sr.labels=="Native":sr.labels&&sr.labels.length>0&&sr.labels[0].toLowerCase()==yt.toLowerCase());console.log(" ~ file: useTokenSelect.ts:279 ~ filterTokenWithLabel ~ result:",Ut);const Ft=Ye(Ut,"");a(Ft)},rr=(yt,tr,Ut)=>{let Ft=tr.findIndex(sr=>sr.coin_type.toLowerCase()==yt.toLowerCase());return Ft>=0?"Default":(Ft=Ut.findIndex(sr=>sr.coin_type.toLowerCase()==yt.toLowerCase()),Ft>=0?"Imported":"Default")};return reactExports.useEffect(()=>()=>{B(!1)},[]),{getCollectList:wt,getDefaultTokenList:ot,filterTokenListFun:Et,filterTokenWithLabel:er,getImportTokenList:ur,addImportTokenList:hr,delImportTokenList:fr,addLiquidityTrustTokenList:Lt,removeLiquidityTrustTokenList:Vt,updateImportTokenList:ar,sortWithTokenList:Ye,getTabByAddress:rr,getUserCollectList:qt,delUserCollectTokens:ir,addUserCollectToken:or,delUserCollectToken:nr}}function useExplorer(){const{currentExplorer:t}=useRpcConfigStore();return{getExplorerUrl:(n,i="account",s=t)=>{const a=s.name.toLocaleLowerCase().indexOf("suivision")>-1?"SuiVision":s.name.toLocaleLowerCase().indexOf("suiscan")>-1?"Suiscan":"";let l;return a=="SuiVision"?l=`${s.link}/${getSuiVisionKey(i)}/${n}`:l=`${s.link}/${getSuiscanKey(i)}/${n}`,l}}}const getSuiscanKey=t=>{switch(t){case"account":return"address";case"token":return"object";case"tx":return"tx";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}},getSuiVisionKey=t=>{switch(t){case"account":return"account";case"token":return"object";case"tx":return"txblock";case"poolAddress":return"object";case"nftAddress":return"object";case"coin":return"coin"}},useFetch=()=>{const{domains:t,currentDomain:e,setCurrentDomain:n,setUnhealthyDomains:i,unhealthyDomains:s}=useGlobalApiDomainStore(),a=()=>{const f=t.length;if(f>1&&s.length<f-1){i(e);const p=t.indexOf(e);let C="";return p!==f-1?C=t[p+1]:C=t[0],C}return""},l=async(f,p,C,B)=>{console.log(" ~ file: useFetch.ts:30 ~ fetchByApi ~ params:",{path:f,type:p,options:C,domain:B||e});try{return p==="GET"?await fetchGet(`${B||e}${f}`,C):await fetchPost(`${B||e}${f}`,C)}catch(N){console.log(" ~ file: useFetch.ts:41 ~ fetchByApi ~ error:",N);const le=a();if(le)return n(le),l(f,p,C,le);throw N}};return{fetchByApi:l}},StatsPoolsPath="/v2/sui/stats_pools",PriceRangePath="/v3/sui/clmm/pool_price_range",TransactionsHistory="/v2/sui/pool/history",StatisticsPath="/v2/sui/statistics",StatisticsPools="/v2/sui/statistics_pools",StatisticsTokens="/market/clmm/prices",TransactionTxPath="/v2/sui/current_tx",HistogramPathV3="/v3/sui/clmm/histogram",HistogramPathTotalVolV3="/v3/sui/histogram",DcaConfigPath="/dca/quote_config",DcaQuotePath="/dca/quote",DcaOrderHistoryPath="/v3/sui/dca/query_event_list",LimitOrderHistoryPath="/v3/sui/limit_order",aggregatorStatusPath="/router_v2/status",VaultUnstableHistogram="/v3/sui/vaults/unstable/tvl/histogram",VaultUnstablePriceRange="/v3/sui/vaults/unstable/pricerange/histogram",VaultApyAndFeesPath="/v3/sui/vaults/unstable/LPFee/histogram",VerifiedCoinsPath="/v3/sui/clmm/verified_coins_info",CoinsInfoPath="/v3/sui/clmm/coins_info";function useGetTokens(){const{fetchByApi:t}=useFetch(),{verifiedTokenMap:e,setVerifiedTokenMap:n,addTokenList:i,addToken:s}=useTokenStore(),{clmmSdk:a}=useClmmSDKStore(),l=async()=>{var N;try{const le=await t(VerifiedCoinsPath,"GET");if(le&&le.list&&le.list.length>0){const Ee=(N=le==null?void 0:le.list)==null?void 0:N.map(ze=>formatToken(ze)),Ue=Ee==null?void 0:Ee.reduce((ze,Ze)=>(ze.set(Ze.coin_type,formatToken(Ze)),ze),new Map);Ue&&Ue.size>0&&(n(Ue),i(Ee))}}catch(le){console.error(" ~ getVerifiedCoins ~ 38:",le)}},f=async N=>{try{const le=await a.fullClient.getCoinMetadata({coinType:N});if(le){CoinAssist$1.isSuiCoin(N)&&(le.iconUrl="https://archive.cetus.zone/assets/image/sui/sui.png");const Ee=coinMetadataToCoinInfo(le,N);return s(Ee),Ee}}catch(le){console.log(" ~ getTokenFromClient ~ error:",le)}},p=async N=>{var le,Ee,Ue,ze;try{if(!N)return;const Ze=fixCoinType(N,!1),Qe=await t(CoinsInfoPath,"POST",{coinTypes:[Ze]});if(Qe&&(Qe!=null&&Qe.data)&&((le=Qe==null?void 0:Qe.data)!=null&&le.list)&&((Ue=(Ee=Qe==null?void 0:Qe.data)==null?void 0:Ee.list)==null?void 0:Ue.length)>0){const ct=await B((ze=Qe==null?void 0:Qe.data)==null?void 0:ze.list[0]),wt=formatToken(ct);return s(wt),wt}else return await f(N)}catch(Ze){return console.error(" ~ getTokenInfo ~ 57:",Ze),await f(N)}},C=async N=>{var le,Ee,Ue,ze,Ze,Qe,ct;try{if((N==null?void 0:N.length)===0)return;let wt=[];if(wt=N.map(nr=>fixCoinType(nr,!1)),wt=uniq(wt),wt.length===0)return;const qt=await t(CoinsInfoPath,"POST",{coinTypes:wt});if(qt&&(qt!=null&&qt.data)&&((le=qt==null?void 0:qt.data)!=null&&le.list)&&((Ue=(Ee=qt==null?void 0:qt.data)==null?void 0:Ee.list)==null?void 0:Ue.length)>0){const nr=(Ze=(ze=qt==null?void 0:qt.data)==null?void 0:ze.list)==null?void 0:Ze.map(or=>formatToken(or)),ir=[];for(let or=0;or<nr.length;or++){const ur=await B(nr[or]);ir.push(ur)}if(((ct=(Qe=qt==null?void 0:qt.data)==null?void 0:Qe.list)==null?void 0:ct.length)<wt.length){const or=ir.map(hr=>hr.coin_type),ur=wt.filter(hr=>!or.includes(hr));for(const hr of ur){const fr=await a.fullClient.getCoinMetadata({coinType:hr});if(fr){CoinAssist$1.isSuiCoin(hr)&&(fr.iconUrl="https://archive.cetus.zone/assets/image/sui/sui.png");const ar=coinMetadataToCoinInfo(fr,extractStructTagFromType$2(hr).full_address);ir.push(ar)}}}i(ir)}else{const nr=[];for(const ir of wt){const or=await a.fullClient.getCoinMetadata({coinType:ir});if(or){CoinAssist$1.isSuiCoin(ir)&&(or.iconUrl="https://archive.cetus.zone/assets/image/sui/sui.png");const ur=coinMetadataToCoinInfo(or,ir);nr.push(ur)}}i(nr)}console.log("getTokenListInfo",qt)}catch(wt){console.error(" ~ getTokenListInfo ~ 75:",wt)}},B=async N=>{var le;if(N&&(N==null?void 0:N.decimals)==null){console.log(" ~ useGetTokens.ts:133 ~ checkTokenDecimals ~ tokenInfo?.decimals == undefined:",(N==null?void 0:N.decimals)==null,N.coin_type,N);const Ee=await a.fullClient.getCoinMetadata({coinType:(le=formatToken(N))==null?void 0:le.coin_type});Ee&&(N.decimals=Ee.decimals)}return N};return{getVerifiedCoins:l,verifiedTokenMap:e,getToken:p,getTokenList:C}}const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(ERROR_MSG_INPUT);return e}function toHex(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function uint32ToHex(t){return(4294967296+t).toString(16).substring(1)}function debugPrint(t,e,n){let i=`
`+t+" = ";for(let s=0;s<e.length;s+=2){if(n===32)i+=uint32ToHex(e[s]).toUpperCase(),i+=" ",i+=uint32ToHex(e[s+1]).toUpperCase();else if(n===64)i+=uint32ToHex(e[s+1]).toUpperCase(),i+=uint32ToHex(e[s]).toUpperCase();else throw new Error("Invalid size "+n);s%6===4?i+=`
`+new Array(t.length+4).join(" "):s<e.length-2&&(i+=" ")}console.log(i)}function testSpeed(t,e,n){let i=new Date().getTime();const s=new Uint8Array(e);for(let l=0;l<e;l++)s[l]=l%256;const a=new Date().getTime();console.log("Generated random input in "+(a-i)+"ms"),i=a;for(let l=0;l<n;l++){const f=t(s),p=new Date().getTime(),C=p-i;i=p,console.log("Hashed in "+C+"ms: "+f.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(C/1e3)*100)/100+" MB PER SECOND")}}var util$2={normalizeInput,toHex,debugPrint,testSpeed};const util$1=util$2;function ADD64AA(t,e,n){const i=t[e]+t[n];let s=t[e+1]+t[n+1];i>=4294967296&&s++,t[e]=i,t[e+1]=s}function ADD64AC(t,e,n,i){let s=t[e]+n;n<0&&(s+=4294967296);let a=t[e+1]+i;s>=4294967296&&a++,t[e]=s,t[e+1]=a}function B2B_GET32(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function B2B_G(t,e,n,i,s,a){const l=m$2[s],f=m$2[s+1],p=m$2[a],C=m$2[a+1];ADD64AA(v$1,t,e),ADD64AC(v$1,t,l,f);let B=v$1[i]^v$1[t],N=v$1[i+1]^v$1[t+1];v$1[i]=N,v$1[i+1]=B,ADD64AA(v$1,n,i),B=v$1[e]^v$1[n],N=v$1[e+1]^v$1[n+1],v$1[e]=B>>>24^N<<8,v$1[e+1]=N>>>24^B<<8,ADD64AA(v$1,t,e),ADD64AC(v$1,t,p,C),B=v$1[i]^v$1[t],N=v$1[i+1]^v$1[t+1],v$1[i]=B>>>16^N<<16,v$1[i+1]=N>>>16^B<<16,ADD64AA(v$1,n,i),B=v$1[e]^v$1[n],N=v$1[e+1]^v$1[n+1],v$1[e]=N>>>31^B<<1,v$1[e+1]=B>>>31^N<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],SIGMA82=new Uint8Array(SIGMA8.map(function(t){return t*2})),v$1=new Uint32Array(32),m$2=new Uint32Array(32);function blake2bCompress(t,e){let n=0;for(n=0;n<16;n++)v$1[n]=t.h[n],v$1[n+16]=BLAKE2B_IV32[n];for(v$1[24]=v$1[24]^t.t,v$1[25]=v$1[25]^t.t/4294967296,e&&(v$1[28]=~v$1[28],v$1[29]=~v$1[29]),n=0;n<32;n++)m$2[n]=B2B_GET32(t.b,4*n);for(n=0;n<12;n++)B2B_G(0,8,16,24,SIGMA82[n*16+0],SIGMA82[n*16+1]),B2B_G(2,10,18,26,SIGMA82[n*16+2],SIGMA82[n*16+3]),B2B_G(4,12,20,28,SIGMA82[n*16+4],SIGMA82[n*16+5]),B2B_G(6,14,22,30,SIGMA82[n*16+6],SIGMA82[n*16+7]),B2B_G(0,10,20,30,SIGMA82[n*16+8],SIGMA82[n*16+9]),B2B_G(2,12,22,24,SIGMA82[n*16+10],SIGMA82[n*16+11]),B2B_G(4,14,16,26,SIGMA82[n*16+12],SIGMA82[n*16+13]),B2B_G(6,8,18,28,SIGMA82[n*16+14],SIGMA82[n*16+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^v$1[n]^v$1[n+16]}const parameterBlock=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function blake2bInit(t,e,n,i){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(i&&i.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const s={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};parameterBlock.fill(0),parameterBlock[0]=t,e&&(parameterBlock[1]=e.length),parameterBlock[2]=1,parameterBlock[3]=1,n&&parameterBlock.set(n,32),i&&parameterBlock.set(i,48);for(let a=0;a<16;a++)s.h[a]=BLAKE2B_IV32[a]^B2B_GET32(parameterBlock,a*4);return e&&(blake2bUpdate(s,e),s.c=128),s}function blake2bUpdate(t,e){for(let n=0;n<e.length;n++)t.c===128&&(t.t+=t.c,blake2bCompress(t,!1),t.c=0),t.b[t.c++]=e[n]}function blake2bFinal(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;blake2bCompress(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3);return e}function blake2b(t,e,n,i,s){n=n||64,t=util$1.normalizeInput(t),i&&(i=util$1.normalizeInput(i)),s&&(s=util$1.normalizeInput(s));const a=blake2bInit(n,e,i,s);return blake2bUpdate(a,t),blake2bFinal(a)}function blake2bHex(t,e,n,i,s){const a=blake2b(t,e,n,i,s);return util$1.toHex(a)}var blake2b_1={blake2b,blake2bHex,blake2bInit,blake2bUpdate,blake2bFinal};const util=util$2;function B2S_GET32(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function B2S_G(t,e,n,i,s,a){v[t]=v[t]+v[e]+s,v[i]=ROTR32(v[i]^v[t],16),v[n]=v[n]+v[i],v[e]=ROTR32(v[e]^v[n],12),v[t]=v[t]+v[e]+a,v[i]=ROTR32(v[i]^v[t],8),v[n]=v[n]+v[i],v[e]=ROTR32(v[e]^v[n],7)}function ROTR32(t,e){return t>>>e^t<<32-e}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),v=new Uint32Array(16),m$1=new Uint32Array(16);function blake2sCompress(t,e){let n=0;for(n=0;n<8;n++)v[n]=t.h[n],v[n+8]=BLAKE2S_IV[n];for(v[12]^=t.t,v[13]^=t.t/4294967296,e&&(v[14]=~v[14]),n=0;n<16;n++)m$1[n]=B2S_GET32(t.b,4*n);for(n=0;n<10;n++)B2S_G(0,4,8,12,m$1[SIGMA[n*16+0]],m$1[SIGMA[n*16+1]]),B2S_G(1,5,9,13,m$1[SIGMA[n*16+2]],m$1[SIGMA[n*16+3]]),B2S_G(2,6,10,14,m$1[SIGMA[n*16+4]],m$1[SIGMA[n*16+5]]),B2S_G(3,7,11,15,m$1[SIGMA[n*16+6]],m$1[SIGMA[n*16+7]]),B2S_G(0,5,10,15,m$1[SIGMA[n*16+8]],m$1[SIGMA[n*16+9]]),B2S_G(1,6,11,12,m$1[SIGMA[n*16+10]],m$1[SIGMA[n*16+11]]),B2S_G(2,7,8,13,m$1[SIGMA[n*16+12]],m$1[SIGMA[n*16+13]]),B2S_G(3,4,9,14,m$1[SIGMA[n*16+14]],m$1[SIGMA[n*16+15]]);for(n=0;n<8;n++)t.h[n]^=v[n]^v[n+8]}function blake2sInit(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=e?e.length:0;if(e&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const i={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:t};return i.h[0]^=16842752^n<<8^t,n>0&&(blake2sUpdate(i,e),i.c=64),i}function blake2sUpdate(t,e){for(let n=0;n<e.length;n++)t.c===64&&(t.t+=t.c,blake2sCompress(t,!1),t.c=0),t.b[t.c++]=e[n]}function blake2sFinal(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;blake2sCompress(t,!0);const e=new Uint8Array(t.outlen);for(let n=0;n<t.outlen;n++)e[n]=t.h[n>>2]>>8*(n&3)&255;return e}function blake2s(t,e,n){n=n||32,t=util.normalizeInput(t);const i=blake2sInit(n,e);return blake2sUpdate(i,t),blake2sFinal(i)}function blake2sHex(t,e,n){const i=blake2s(t,e,n);return util.toHex(i)}var blake2s_1={blake2s,blake2sHex,blake2sInit,blake2sUpdate,blake2sFinal};const b2b=blake2b_1,b2s=blake2s_1;var blakejs={blake2b:b2b.blake2b,blake2bHex:b2b.blake2bHex,blake2bInit:b2b.blake2bInit,blake2bUpdate:b2b.blake2bUpdate,blake2bFinal:b2b.blake2bFinal,blake2s:b2s.blake2s,blake2sHex:b2s.blake2sHex,blake2sInit:b2s.blake2sInit,blake2sUpdate:b2s.blake2sUpdate,blake2sFinal:b2s.blake2sFinal},_t$1="router",ge$2=1e4,ne$1=class{static buildPoolImmutables(e){let{fields:n}=e.value.fields.value;return{clmm_pool_id:extractStructTagFromType$2(n.clmm_pool_id).address,booster_type:extractStructTagFromType$2(n.booster_type.fields.name).source_address,pool_id:extractStructTagFromType$2(n.pool_id).address,coinTypeA:extractStructTagFromType$2(n.coin_type_a.fields.name).source_address,coinTypeB:extractStructTagFromType$2(n.coin_type_b.fields.name).source_address}}static buildPoolState(e){let n=getObjectFields(e),i=[];return n.config.fields.contents.forEach(s=>{i.push({lock_day:Number(s.fields.key),multiplier:Number(d$3(s.fields.value).div(ge$2))})}),{basic_percent:Number(d$3(n.basic_percent).div(ge$2)),balances:{balances_handle:n.balances.fields.id.id,size:n.balances.fields.size},config:i,lock_positions:{lock_positions_handle:n.lock_positions.fields.id.id,size:n.lock_positions.fields.size},is_open:n.is_open,index:Number(n.index),pool_id:getObjectId(e)}}static buildLockNFT(e){let n=extractStructTagFromType$2(getObjectId(e)).address;return{lock_clmm_position:buildPosition(e),locked_nft_id:n}}static buildLockPositionInfo(e){let n=getObjectFields(e),{value:i}=n.value.fields;return{type:i.type,position_id:i.fields.position_id,start_time:Number(i.fields.start_time),lock_period:Number(i.fields.lock_period),end_time:Number(i.fields.end_time),growth_rewarder:i.fields.growth_rewarder,rewarder_owned:i.fields.rewarder_owned,is_settled:i.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},mt$1=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var l;let{booster:n}=this._sdk.sdkOptions,i=`${n.package_id}_getPoolImmutables`,s=this.getCache(i,e),a=[];if(s!==void 0)a.push(...s);else{let f=[];(l=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(getPackagerConfigs$1(n).booster_pool_handle)).data)==null||l.forEach(C=>{f.push(C.objectId)});let p=await this._sdk.ClmmSDK.fullClient.batchGetObjects(f,{showContent:!0});for(let C of p){let B=getObjectFields(C);if(B){let N=ne$1.buildPoolImmutables(B);this.updateCache(`${N.pool_id}_getPoolImmutable`,N,cacheTime24h),a.push(N)}}}return this.updateCache(i,a,cacheTime24h),a}async getPoolImmutable(e){let{booster:n}=this._sdk.sdkOptions,i=`${e}_getPoolImmutable`,s=this.getCache(i);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:getPackagerConfigs$1(n).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),l=getObjectFields(a),f=ne$1.buildPoolImmutables(l);return this.updateCache(i,f,cacheTime24h),f}async getPools(){let e=[],n=(await this.getPoolImmutables()).map(s=>s.pool_id),i=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(let s of i){let a=ne$1.buildPoolState(s);if(a){let l={...await this.getPoolImmutable(a.pool_id),...a};e.push(l);let f=`${l.pool_id}_getPoolObject`;this.updateCache(f,l,cacheTime24h)}}return e}async getPool(e,n=!0){let i=`${e}_getPoolObject`,s=this.getCache(i,n),a=await this.getPoolImmutable(e);if(s!==void 0)return{...a,...s};let l=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),f=ne$1.buildPoolState(l),p={...a,...f};return this.updateCache(i,p,cacheTime24h),p}async getPoolHandleId(e){let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=getObjectFields(n);return i?i.list.fields.id.id:""}async getBoosterInitConfigs(){var s;let{package_id:e}=this.sdk.sdkOptions.booster,n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:s.data,i={booster_config_id:"",booster_pool_handle:""};return n.length>0&&n.forEach(a=>{let l=a.parsedJson;l&&(i.booster_config_id=l.config_id)}),i.booster_pool_handle=await this.getPoolHandleId(i.booster_config_id),i}async getOwnerBoosterPositions(e,n,i){let{booster:s}=this.sdk.sdkOptions,a=[],l=[],f=`${s.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,p=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:f}});for(let B of p.data)if(extractStructTagFromType$2(getMoveObjectType(B)).source_address===f&&B.data){let N=ne$1.buildLockNFT(B);this.updateCache(`${N.locked_nft_id}_getBoosterPositionById`,N,cacheTime24h),N&&(n===void 0||n===N.lock_clmm_position.pool)&&a.push(N)}let C=await this.getLockPositionInfos(i,a.map(B=>B.locked_nft_id));for(let B of a)for(let N of C)if(B.lock_clmm_position.pos_object_id===N.position_id){l.push({...B,...N});break}return l}async getBoosterPosition(e,n){let i=`${n}_getBoosterPositionById`,s=this.getCache(i),a;if(s!==void 0)a=s;else{let f=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0,showOwner:!0}});a=ne$1.buildLockNFT(f),this.updateCache(i,a,cacheTime24h)}let l=await this.getLockPositionInfo(e,n);return{...a,...l}}async getLockPositionInfos(e,n=[]){var l;let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),s=[],a=[];return(l=i.data)==null||l.forEach(f=>{n.length>0?n.includes(f.name.value)&&s.push(f.objectId):s.push(f.objectId)}),s.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showContent:!0})).forEach(f=>{let p=ne$1.buildLockPositionInfo(f);p&&a.push(p)}),a}async getLockPositionInfo(e,n){let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}});return ne$1.buildLockPositionInfo(i)}calculateXCetusRewarder(e,n,i){let s=n.basic_percent,a="0";e.forEach(f=>{f.coin_address===n.booster_type&&(a=f.amount_owed.toString())}),i.is_settled||n.config.forEach(f=>{f.lock_day===i.lock_period&&(s=f.multiplier)});let l=d$3(a).sub(i.growth_rewarder).mul(s);return d$3(i.rewarder_owned).add(l).toString()}lockPositionPayload(e){let{booster:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new Transaction$1;return s.moveCall({target:`${n.published_at}::${_t$1}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[s.object(getPackagerConfigs$1(n).booster_config_id),s.object(getPackagerConfigs$1(i).global_config_id),s.object(e.booster_pool_id),s.object(e.clmm_pool_id),s.object(e.clmm_position_id),s.pure.u16(e.lock_day),s.object(CLOCK_ADDRESS$2)]}),s}canceLockPositionPayload(e){let{booster:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${_t$1}::cancel_lock`,typeArguments:[e.booster_type],arguments:[i.object(getPackagerConfigs$1(n).booster_config_id),i.object(e.booster_pool_id),i.object(e.lock_nft_id),i.object(CLOCK_ADDRESS$2)]}),i}redeemPayload(e){let{booster:n,xcetus:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions,a=new Transaction$1,l=getPackagerConfigs$1(i);return a.moveCall({target:`${n.published_at}::${_t$1}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[a.object(getPackagerConfigs$1(n).booster_config_id),a.object(getPackagerConfigs$1(s).global_config_id),a.object(e.booster_pool_id),a.object(e.lock_nft_id),a.object(e.clmm_pool_id),a.object(l.lock_manager_id),a.object(l.xcetus_manager_id),a.object(e.ve_nft_id),a.object(CLOCK_ADDRESS$2)]}),a}updateCache(e,n,i=cacheTime5min){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},K$1="router",pt$2=1e9,yi=(t=>(t.Upcoming="Upcoming",t.Live="Live",t.Settle="Settle",t.Ended="Ended",t.Failed="Failed",t.Canceled="Canceled",t))(yi||{}),I$2=class{static priceRealToFix(e,n,i){let s=d$3(n-i).toNumber();return Number(d$3(e).div(d$3(10).pow(d$3(s))).toString())}static priceFixToReal(e,n,i){let s=d$3(n-i).toNumber();return Number(d$3(e).mul(d$3(10).pow(d$3(s))).toString())}static raiseTotalAmount(e,n,i){let s=d$3(n-i).abs().toNumber();return n>i?Number(d$3(e.total_supply).mul(e.current_price).div(d$3(10).pow(d$3(s))).toString()):Number(d$3(e.total_supply).mul(e.current_price).mul(d$3(10).pow(d$3(s))).toString())}static buildLaunchPadPool(e){let n=getMoveObjectType(e),i=extractStructTagFromType$2(n),s=getObjectFields(e),a={coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],pool_address:normalizeSuiObjectId$2(getObjectId(e)),is_settle:s.is_settle,current_price:d$3(s.initialize_price).div(d$3(pt$2)).toString(),price:s.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:s.sale_coin,raise_coin_amount:s.raise_coin,total_purchase_amount:s.reality_raise_total,total_supply:s.sale_total,min_purchase:s.min_purchase,max_purchase:s.max_purchase,complete_raise_limit:s.least_raise_amount,softcap:s.softcap,max_raise_amount:s.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(s.liquidity_rate)/1e4,is_cancel:s.is_cancel,duration_summary:{start_time:Number(s.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(s.duration_manager.fields.activity_duration),settle_duration:Number(s.duration_manager.fields.settle_duration),lock_up_duration:Number(s.duration_manager.fields.locked_duration)},white_summary:{white_handle:s.white_list.fields.users.fields.id.id,protection_hard_cap:s.white_list.fields.hard_cap_total,protection_limit_used:s.white_list.fields.purchase_total,size:Number(s.white_list.fields.users.fields.size)},unused_sale:s.unused_sale,harvest_raise:s.harvest_raise,tick_spacing:Number(s.tick_spacing),owner:s.recipient,purchase_summary:{purchase_handle:s.purchase_list.fields.id.id,size:Number(s.purchase_list.fields.size)},pool_status:"Failed"};return I$2.updatePoolStatus(a),a}static updatePoolStatus(e){let n=Number(d$3(Date.now()/1e3).toFixed(0)),{duration_summary:i}=e,s=i.start_time+i.purchase_duration,a=s+i.settle_duration;if(i.end_time=s,i.settle_end_time=a,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(n<i.start_time)e.pool_status="Upcoming";else if(n>i.start_time&&n<s)e.pool_status="Live";else if(n>s&&n<a){let l=e.raise_coin_amount;Number(l)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,n){let i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([n.coin_type_sale,n.coin_type_raise]),s=i[n.coin_type_sale].decimals,a=i[n.coin_type_raise].decimals;n.min_price=this.priceFixToReal(Number(d$3(n.softcap).div(d$3(n.total_supply))),s,a).toString(),n.max_price=this.priceFixToReal(Number(d$3(n.max_raise_amount).div(d$3(n.total_supply))),s,a).toString(),n.current_price=this.priceFixToReal(Number(n.current_price),s,a).toString(),n.sale_decimals=s,n.raise_decimals=a}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,n){if(n.pool_status==="Ended"){if(d$3(n.harvest_raise).equals(d$3(0))){let s=await e.Launchpad.getSettleEvent(n.pool_address);s&&(n.harvest_raise=s.unused_raise)}let i=bnExports.min(new BN(n.total_purchase_amount),new BN(n.max_raise_amount));return d$3(i.toString()).mul(1-n.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,n){if(n.pool_status==="Ended"){let i=await e.Launchpad.getSettleEvent(n.pool_address);return i&&(n.unused_sale=i.unused_sale),n.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,n){let i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[n.pool_address],!1);if(i.length>0){let s=i[0].purchased_raise_amount,a=(await e.Launchpad.getPurchaseAmount(n.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:l}=n.white_summary;return d$3(s).sub(a).div(d$3(n.total_purchase_amount).sub(l)).mul(d$3(n.total_purchase_amount).sub(n.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,n){let i=await I$2.getOverrecruitReverseAmount(e,n),s=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[n.pool_address],!1);if(s){let a=s[0].purchased_raise_amount;d$3(a).sub(i).div(n.current_price)}return"0"}},ft$2=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],n=0,i=100,s=!1){var N;let{package_id:a}=this._sdk.sdkOptions.launchpad;if(a===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");let l=`${a}_getPoolImmutables`,f=this.getCache(l,s),p=[],C=[];if(f!==void 0&&p.push(...f),p.length===0)try{((N=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${a}::factory::CreatePoolEvent`}))==null?void 0:N.data).forEach(le=>{let Ee=le.parsedJson;Ee&&p.push({pool_address:Ee.pool_id,coin_type_sale:extractStructTagFromType$2(Ee.sale_coin.name).full_address,coin_type_raise:extractStructTagFromType$2(Ee.raise_coin.name).full_address})}),this.updateCache(l,p,cacheTime24h)}catch(le){console.log("getPoolImmutables",le)}let B=e.length>0;for(let le=0;le<p.length;le+=1){let Ee=p[le];if(!(B&&!e.includes(Ee.pool_address))){if(!B){let Ue=le;if(Ue<n||Ue>=n+i)continue}C.push(Ee)}}return C}async getPoolImmutablesWithPage(e="all",n=!1){let{package_id:i}=this._sdk.sdkOptions.launchpad,s=`${i}_getPoolImmutables`,a=[],l={data:[],hasNextPage:!1},f=e==="all";if(f){let p=this.getCache(s,n);p&&a.push(...p)}if(a.length===0)try{let p=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`},e);l.hasNextPage=p.hasNextPage,l.nextCursor=p.nextCursor,p.data.forEach(C=>{let B=C.parsedJson;B&&a.push({pool_address:B.pool_id,coin_type_sale:extractStructTagFromType$2(B.sale_coin.name).full_address,coin_type_raise:extractStructTagFromType$2(B.raise_coin.name).full_address})})}catch(p){console.log("getPoolImmutables",p)}return l.data=a,f&&this.updateCache(s,a,cacheTime24h),l}async getPools(e=[],n=0,i=100){let s=[],a=[];e.length>0?a=[...e]:(await this.getPoolImmutables([],n,i,!1)).forEach(f=>{a.push(f.pool_address)});let l=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showType:!0,showContent:!0});for(let f of l){let p=I$2.buildLaunchPadPool(f);await I$2.calculatePoolPrice(this._sdk,p),s.push(p);let C=`${p.pool_address}_getPoolObject`;this.updateCache(C,p,cacheTime24h)}return s}async getPool(e,n=!0){let i=`${e}_getPoolObject`,s=this.getCache(i,n);if(s!==void 0){let f=s;return I$2.updatePoolStatus(f),f}let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),l=I$2.buildLaunchPadPool(a);return await I$2.calculatePoolPrice(this._sdk,l),this.updateCache(i,l),l}async getInitConfig(e=!1){var C;let n=this._sdk.sdkOptions.launchpad.package_id,i=`${n}_getInitEvent`,s=this.getCache(i,e);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showPreviousTransaction:!0}}),l=getObjectPreviousTransactionDigest(a),f=(C=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:l}))==null?void 0:C.data,p={pools_id:"",admin_cap_id:"",config_cap_id:""};return f.length>0&&(f.forEach(B=>{let N=B.parsedJson;if(N)switch(extractStructTagFromType$2(B.type).full_address){case`${n}::config::InitConfigEvent`:p.admin_cap_id=N.admin_cap_id,p.config_cap_id=N.config_cap_id;break;case`${n}::factory::InitFactoryEvent`:p.pools_id=N.pools_id;break}}),this.updateCache(i,p,cacheTime24h)),p}async getLockNFT(e,n=!1){let i=`${e}_getLockNFT`,s=this.getCache(i,n);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!a.error)return buildPosition(a)}async getLockNFTList(e){var a;let{package_id:n}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:i}=this._sdk,s=[];try{let l=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:a.data;for(let f of l){let p=f.parsedJson;if(p){let C={locked_time:Number(p.locked_time),end_lock_time:Number(p.end_lock_time),nft_type:p.nft_type_name.name,lock_nft_id:p.lock_nft_id,recipient:p.recipient};if(e===C.recipient&&`${n}`===extractStructTagFromType$2(C.nft_type).address){let B=await this.getLockNFT(C.lock_nft_id);if(B){let N=extractStructTagFromType$2(B.coin_type_a).full_address,le=extractStructTagFromType$2(B.coin_type_b).full_address;s.push({...B,coin_type_a:N,coin_type_b:le,...C})}}}}return s}catch(l){return console.log("getLockNFTList:",l),[]}}async creatPoolTransactionPayload(e){let{launchpad:n}=this.sdk.sdkOptions,i=getPackagerConfigs$1(n);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let s=I$2.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),a=new Transaction$1,l=d$3(e.total_supply).add(d$3(e.total_supply).mul(d$3(e.liquidity_rate))).toNumber(),f=await TransactionUtil$1.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,a,BigInt(l),e.coin_type_sale),p=[a.object(i.admin_cap_id),a.object(i.config_cap_id),a.object(i.pools_id),a.object(normalizeSuiAddress$2(e.recipient)),a.pure.u128((s*pt$2).toString()),f,a.pure.u64(e.total_supply.toString()),a.pure.u64(e.min_purchase.toString()),a.pure.u64(e.max_purchase.toString()),a.pure.u64(e.least_raise_amount.toString()),a.pure.u64(e.hardcap.toString()),a.pure.u64((e.liquidity_rate*1e3).toString()),a.pure.u64(e.start_time.toString()),a.pure.u64(e.activity_duration.toString()),a.pure.u64(e.settle_duration.toString()),a.pure.u64(e.locked_duration.toString()),a.pure.u32(e.tick_spacing),a.object(CLOCK_ADDRESS$2)],C=[e.coin_type_sale,e.coin_type_raise];return a.moveCall({target:`${n.published_at}::${K$1}::create_launch_pool`,typeArguments:C,arguments:p}),a}async creatPurchasePayload(e){let{launchpad:n}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=new Transaction$1,s=await TransactionUtil$1.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.purchase_amount),e.coin_type_raise),a=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],l=[e.coin_type_sale,e.coin_type_raise],f;return a?f=[i.object(e.pool_address),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(a.id),s,i.pure.u64(e.purchase_amount.toString()),i.object(CLOCK_ADDRESS$2)]:f=[i.object(e.pool_address),i.object(getPackagerConfigs$1(n).config_cap_id),s,i.pure.u64(e.purchase_amount.toString()),i.object(CLOCK_ADDRESS$2)],i.moveCall({target:`${n.published_at}::${K$1}::${a===void 0?"create_and_purchase":"purchase"}`,typeArguments:l,arguments:f}),i}async creatClaimPayload(e){let{launchpad:n}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let i=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],s=new Transaction$1,a=[e.coin_type_sale,e.coin_type_raise],l=[s.object(e.pool_address),s.object(getPackagerConfigs$1(n).config_cap_id),s.object(i==null?void 0:i.id),s.object(CLOCK_ADDRESS$2)];return s.moveCall({target:`${n.published_at}::${K$1}::claim`,typeArguments:a,arguments:l}),s}async creatSettlePayload(e){let{launchpad:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();let s=getPackagerConfigs$1(i),{clmm_args:a}=e,l=new Transaction$1;l.setSender(this.sdk.ClmmSDK.senderAddress);let f=[e.coin_type_sale,e.coin_type_raise];if(a){let p=a.opposite?TickMath$1.priceToSqrtPriceX64(d$3(1).div(a.current_price),a.raise_decimals,a.sale_decimals).toString():TickMath$1.priceToSqrtPriceX64(d$3(a.current_price),a.sale_decimals,a.raise_decimals).toString(),C=BigInt(p)<BigInt(a.clmm_sqrt_price),B=a.opposite?C?e.coin_type_raise:e.coin_type_sale:C?e.coin_type_sale:e.coin_type_raise,N=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,B),le=CoinAssist$1.calculateTotalBalance(N);CoinAssist$1.isSuiCoin(B)&&(le-=BigInt(2e8));let Ee=TransactionUtil$1.buildCoinForAmount(l,N,le,B).targetCoin,Ue=a.opposite?C?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":C?"settle_only_with_a":"settle_only_with_b",ze=[l.object(e.pool_address),l.object(getPackagerConfigs$1(n).config_cap_id),l.object(a.clmm_pool_address),l.object(s.global_config_id),l.pure.u128(p),Ee,l.object(CLOCK_ADDRESS$2)];l.moveCall({target:`${n.published_at}::${K$1}::${Ue}`,typeArguments:f,arguments:ze})}else l.moveCall({target:`${n.published_at}::${K$1}::settle`,typeArguments:f,arguments:[l.object(e.pool_address),l.object(getPackagerConfigs$1(n).config_cap_id),l.object(CLOCK_ADDRESS$2)]});return l}creatWithdrawPayload(e){let{launchpad:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(e.pool_address),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(CLOCK_ADDRESS$2)];return e.sale_amount>BigInt(0)&&i.moveCall({target:`${n.published_at}::${K$1}::withdraw_sale`,typeArguments:s,arguments:a}),e.raise_amount>BigInt(0)&&i.moveCall({target:`${n.published_at}::${K$1}::withdraw_raise`,typeArguments:s,arguments:a}),i}addUserToWhitelisPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(a=>{let l=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.object(a),i.pure.u64(e.safe_limit_amount),i.object(CLOCK_ADDRESS$2)];i.moveCall({target:`${n.published_at}::${K$1}::add_user_to_whitelist`,typeArguments:s,arguments:l})}),i}updateWhitelistCapPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&i.moveCall({target:`${n.published_at}::${K$1}::update_whitelist_member_safe_limit_amount`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.pure.address(e.white_list_member),i.pure.u64(e.safe_limit_amount),i.object(CLOCK_ADDRESS$2)]}),e.hard_cap_total>0&&i.moveCall({target:`${n.published_at}::${K$1}::update_whitelist_hard_cap_total`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.pure.u64(e.hard_cap_total),i.object(CLOCK_ADDRESS$2)]}),i}creatRemoveWhitelistPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(a=>{let l=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.object(a),i.object(CLOCK_ADDRESS$2)];i.moveCall({target:`${n.published_at}::${K$1}::remove_user_from_whitelist`,typeArguments:s,arguments:l})}),i}creatCancelPoolPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${K$1}::cancel`,typeArguments:s,arguments:a}),i}updateRecipientPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.object(e.new_recipient),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${K$1}::update_recipient_address`,typeArguments:s,arguments:a}),i}updatePoolDuractionPayload(e){let{launchpad:n}=this.sdk.sdkOptions;this.assertLuanchpadConfig();let i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).config_cap_id),i.object(e.pool_address),i.pure.u64(e.activity_duration),i.pure.u64(e.settle_duration),i.pure.u64(e.lock_duration),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${K$1}::update_pool_duration`,typeArguments:s,arguments:a}),i}creatUnlockNftPayload(e){let{launchpad:n}=this.sdk.sdkOptions;if(getPackagerConfigs$1(n)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");let i=new Transaction$1,s=[e.nft_type],a=[i.object(e.lock_nft),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::lock::unlock_nft`,typeArguments:s,arguments:a}),i}async isAdminCap(e){let{launchpad:n}=this._sdk.sdkOptions;if(getPackagerConfigs$1(n)===void 0)throw Error("launchpad config is empty");let i=`${e}_isAdminCap`,s=this.getCache(i);if(s)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:getPackagerConfigs$1(n).admin_cap_id,options:{showType:!0,showOwner:!0}}),l=getObjectType(a),f=getObjectOwner(a),p=!1;return f&&l&&extractStructTagFromType$2(l).source_address===`${n.package_id}::config::AdminCap`&&(p=normalizeSuiAddress$2(f.AddressOwner)===normalizeSuiAddress$2(e)),this.updateCache(i,p,cacheTime24h),p}async isWhiteListUser(e,n){let i={type:"address",value:n};try{let s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i});return!!(s&&s.data)}catch{return!1}}async getPurchaseAmount(e,n){var s;let i={type:"address",value:n};try{let a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),l=getObjectFields(a);if(l)return(s=l==null?void 0:l.value)==null?void 0:s.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,n=[],i=!0){let{launchpad:s}=this._sdk.sdkOptions,a=`${n}_getPurchaseMark`,l=this.getCache(a,i);if(!i&&l!==void 0)return l;let f=null,p=[];for(;;){let C=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:f});for(let B of C.data){let{fields:N}=B.data.content;if(extractStructTagFromType$2(getMoveObjectType(B)).source_address===`${s.package_id}::pool::PurchaseMark`){console.log("fields: ",N);let le={id:N.id.id,pool_id:extractStructTagFromType$2(N.pool_id).address,purchased_raise_amount:N.purchase_total,obtain_sale_amount:N.obtain_sale_amount,used_raise_amount:N.used_raise_amount};n.length>0?n.includes(le.pool_id)&&p.push(le):p.push(le)}}if(C.hasNextPage)f=C.nextCursor;else break}return this.updateCache(a,p,cacheTime24h),p}async getSettleEvent(e){let{launchpad:n}=this._sdk.sdkOptions,i=`${e}_getPurchaseMark`,s=this.getCache(i);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n.package_id}::pool::SettleEvent`});for(let l of a.data){let f=l.parsedJson;if(e===normalizeSuiObjectId$2(f.pool_id)){let p={pool_id:f.pool_id,settle_price:f.settle_price,unused_sale:f.unused_sale,unused_raise:f.unused_raise,white_purchase_total:f.white_purchase_total};return this.updateCache(i,p,cacheTime24h),p}}}buildLaunchpadCoinType(e,n){return composeType$2(this._sdk.sdkOptions.launchpad.package_id,"pool","PoolLiquidityCoin",[e,n])}assertLuanchpadConfig(){let{launchpad:e}=this.sdk.sdkOptions;if(getPackagerConfigs$1(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,n,i=cacheTime5min){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},ae$1=class{static buildPoolImmutables(e){let{fields:n}=e.value.fields.value;return{clmm_pool_id:extractStructTagFromType$2(n.clmm_pool_id).address,bonus_type:extractStructTagFromType$2(n.bonus_type.fields.name).source_address,pool_id:extractStructTagFromType$2(n.pool_id).address,coinTypeA:extractStructTagFromType$2(n.coin_type_a.fields.name).source_address,coinTypeB:extractStructTagFromType$2(n.coin_type_b.fields.name).source_address}}static buildPoolState(e){let n=getObjectFields(e),i=[];return n.config.fields.contents.forEach(s=>{i.push({rate:Number(d$3(s.fields.key).div(ge$2)),multiplier:Number(d$3(s.fields.value).div(ge$2))})}),{balance:n.balance,config:i,is_open:n.is_open,index:Number(n.index),start_time:Number(n.start_time),interval_day:Number(n.interval_day),minimum_percent_to_reward:Number(d$3(n.minimum_percent_to_reward).div(ge$2)),rewarders:{rewarder_handle:n.rewarders.fields.id.id,size:Number(n.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:n.whale_nfts.fields.id.id,size:Number(n.whale_nfts.fields.size)},points:{point_handle:n.points.fields.id.id,size:Number(n.points.fields.size)}}}static buildMarkerPositions(e){let{contents:n}=e.value.fields.value.fields,i=[],s=e.id.id;return n.forEach(a=>{let{key:l,value:f}=a.fields,p={id:l,period_id:s,bonus_num:f.fields.bonus_num,point:f.fields.point,is_burn:f.fields.is_burn,point_after_multiplier:f.fields.point_after_multiplier,percent:Number(d$3(f.fields.percent).div(ge$2)),fee_share_rate:0,is_redeemed:f.fields.is_redeemed};i.push(p)}),i}static buildPoolBonusInfo(e){let{fields:n,type:i}=e.value.fields.value;return{type:i,time:Number(n.time),settle_time:Number(n.settle_time),settled_num:n.settled_num,is_settled:n.is_settled,basis_bonus:n.basis_bonus,total_bonus:n.total_bonus,is_vacant:n.is_vacant,redeemed_num:n.redeemed_num}}static getBonusPercent(e,n){let i=0;for(let s of e)n>=s.rate&&s.rate>i&&(i=s.multiplier);return i}},Gt="router",ht$1=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var l;let{maker_bonus:n}=this._sdk.sdkOptions,i=`${n.package_id}_getPoolImmutables`,s=this.getCache(i,e),a=[];if(s!==void 0)a.push(...s);else{let f=[];(l=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(getPackagerConfigs$1(n).maker_pool_handle)).data)==null||l.forEach(C=>{f.push(C.objectId)});let p=await this._sdk.ClmmSDK.fullClient.batchGetObjects(f,{showContent:!0});for(let C of p){let B=getObjectFields(C);B&&a.push(ae$1.buildPoolImmutables(B))}}return a}async getPoolImmutable(e){let{maker_bonus:n}=this._sdk.sdkOptions,i=`${n.package_id}_getPoolImmutables`,s=this.getCache(i);if(s!==void 0){let f=s.filter(p=>e===p.pool_id);if(f.length>0)return f[0]}let a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:getPackagerConfigs$1(n).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),l=getObjectFields(a);return ae$1.buildPoolImmutables(l)}async getPools(){let e=[],n=await this.getPoolImmutables(),i=n.map(l=>l.pool_id),s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0}),a=0;for(let l of s){let f=ae$1.buildPoolState(l);if(f){let p={...n[a],...f};e.push(p);let C=`${p.pool_id}_getPoolObject`;this.updateCache(C,p,cacheTime24h)}a+=1}return e}async getPool(e,n=!0){let i=`${e}_getPoolObject`,s=this.getCache(i,n),a=await this.getPoolImmutable(e);if(s!==void 0)return s;let l=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),f=ae$1.buildPoolState(l),p={...a,...f};return this.updateCache(i,p,cacheTime24h),p}async getPoolHandleId(e){let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=getObjectFields(n);return i?i.list.fields.id.id:""}async getMakerPoolPeriods(e,n=!1){let i=[],s=`${e.pool_id}_getMakerPoolPeriods`,a=this.getCache(s,n);return a!==void 0?a:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(l=>{let f={id:l.objectId,start_time:0,end_time:0,period:Number(l.name.value)};f.start_time=Number(d$3(e.start_time).add(d$3(e.interval_day).mul(24*3600).mul(f.period)).toFixed(0,Decimal$1.ROUND_DOWN)),f.end_time=Number(d$3(f.start_time).add(d$3(e.interval_day).mul(24*3600)).toFixed(0,Decimal$1.ROUND_DOWN)),i.push(f)}),this.updateCache(s,i,cacheTime24h),i)}async getMakerBonusInitConfigs(){var s;let{package_id:e}=this.sdk.sdkOptions.maker_bonus,n=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:s.data,i={maker_config_id:"",maker_pool_handle:""};return n.length>0&&n.forEach(a=>{let l=a.parsedJson;l&&(i.maker_config_id=l.config_id)}),i.maker_pool_handle=await this.getPoolHandleId(i.maker_config_id),i}async getPoolMarkerPositionList(e,n,i=!1){let s={},a=[];i||n.forEach(l=>{let f=`${e}_${l.period}_getPoolMarkerPositionList`,p=this.getCache(f);p!==void 0?s[l.period]=p:(s[l.period]=[],a.push(l))});try{a.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(a.map(f=>f.id),{showContent:!0})).forEach(f=>{let p=getObjectFields(f),C=ae$1.buildMarkerPositions(p);if(C.length>0){let{period_id:B}=C[0],N=n.filter(le=>le.id===B)[0];s[N.period]=C}});let l=[];for(let f in s)s[f].forEach(p=>{l.push(p)});if(l.length>0){let f=await this._sdk.ClmmSDK.Position.getSipmlePositionList(l.map(p=>p.id));for(let p of l)for(let C of f)if(p.id===C.pos_object_id){p.clmm_position=C;break}}}catch(l){console.log(l)}for(let l in s){let f=`${e}_${l}_getPoolMarkerPositionList`;this.updateCache(f,s[l],cacheTime24h)}return s}async updateXCetusRewarderAndFee(e,n,i){let s=await this.calculateTotalPointsAfterMultiper(e,i);for(let a of n)await this.calculateXCetusRewarder(e,a,i.period,s);return n}async calculateXCetusRewarder(e,n,i,s){let a=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,i),{fee_share_rate:l}=this.calculateFeeShareRate(e,n,s),f=d$3(l).mul(a.total_bonus);return n.is_redeemed?n.bonus_num="0":n.bonus_num=f.toString(),n.bonus_num}calculateFeeShareRate(e,n,i){let s=ae$1.getBonusPercent(e.config,n.percent),a=d$3(n.point).mul(s),l=d$3(a).div(i);return n.point_after_multiplier=a.toString(),n.fee_share_rate=Number(l),{fee_share_rate:Number(l),points_after_multiper:a.toString()}}async calculateTotalPointsAfterMultiper(e,n){let i=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[n]),s=d$3(0),a=i[n.period];for(let l of a){let f=ae$1.getBonusPercent(e.config,l.percent),p=d$3(l.point).mul(f);s=s.add(p)}return s.toString()}async calculateAllXCetusRewarder(e){let n=this._sdk.ClmmSDK.senderAddress,i=d$3(0),s=[];for(let a of e){let l=await this._sdk.MakerModule.getMakerPoolPeriods(a),f=await this._sdk.MakerModule.getPoolMarkerPositionList(a.whale_nfts.whale_nfts_handle,l),p=[];for(let C of l){let B=f[C.period].filter(N=>{var le;return n.length===0?!1:((le=N.clmm_position)==null?void 0:le.owner)===n});B.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(a,B,C),B.forEach(N=>{var le;((le=N.clmm_position)==null?void 0:le.position_status)===ClmmPositionStatus.Exists&&d$3(N.bonus_num).greaterThan(0)&&(i=i.add(N.bonus_num),p.includes(N.clmm_position.pos_object_id)||p.push(N.clmm_position.pos_object_id))}))}s.push({bonus_type:a.bonus_type,pool_id:a.pool_id,nft_ids:p})}return{claimtotal:i,claimRecord:s}}async getPoolBonusInfo(e,n,i=!1){let s=`${e}_${n}_getPoolBonusInfo`,a=this.getCache(s,i);if(a!==void 0)return a;let l=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:n.toString()}}),f=getObjectFields(l),p=ae$1.buildPoolBonusInfo(f);return this.updateCache(s,p,cacheTime5min),p}claimPayload(e){let{maker_bonus:n,xcetus:i}=this.sdk.sdkOptions,s=new Transaction$1;return s.moveCall({target:`${n.published_at}::${Gt}::claim`,typeArguments:[e.bonus_type],arguments:[s.object(getPackagerConfigs$1(n).maker_config_id),s.object(e.market_pool_id),s.object(e.position_nft_id),s.pure.u8(e.phase),s.object(getPackagerConfigs$1(i).lock_manager_id),s.object(getPackagerConfigs$1(i).xcetus_manager_id),s.object(e.ve_nft_id)]}),s}claimAllPayload(e){let{maker_bonus:n,xcetus:i}=this.sdk.sdkOptions,s=new Transaction$1;return e.whale_nfts.forEach(a=>{a.nft_ids.forEach(l=>{s.moveCall({target:`${n.published_at}::${Gt}::claim_all`,typeArguments:[a.bonus_type],arguments:[s.object(getPackagerConfigs$1(n).maker_config_id),s.object(a.pool_id),s.object(l),s.object(getPackagerConfigs$1(i).lock_manager_id),s.object(getPackagerConfigs$1(i).xcetus_manager_id),s.object(e.ve_nft_id)]})})}),s}updateCache(e,n,i=cacheTime5min){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},je="router",nt$1="router",Oe$1=24*3600,Be=1e3,U$2=1e11,z={min_lock_day:15,max_lock_day:180,max_percent_numerator:1e3,min_percent_numerator:500},W$2=class{static buildVeNFTDividendInfo(e){let n={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let s=[];i.fields.value.fields.contents.forEach(a=>{s.push({coin_type:extractStructTagFromType$2(a.fields.key.fields.name).source_address,amount:a.fields.value})}),n.rewards.push({period:Number(i.fields.key),rewards:s,vesrion:"v1"})}),n}static buildDividendManager(e){let n={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{n.bonus_types.push(extractStructTagFromType$2(i.fields.name).source_address)}),n}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:normalizeCoinType$2(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){let n=e.fields,i={id:n.id.id,type:extractStructTagFromType$2(e.type).source_address,locked_start_time:Number(n.locked_start_time),locked_until_time:Number(n.locked_until_time),cetus_amount:n.balance,xcetus_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/Oe$1,i}static getAvailableXCetus(e,n){let i=d$3(0);return n.forEach(s=>{i=i.add(s.xcetus_amount)}),d$3(e.xcetus_balance).sub(i).toString()}static getWaitUnLockCetuss(e){return e.filter(n=>!W$2.isLocked(n))}static getLockingCetuss(e){return e.filter(n=>W$2.isLocked(n))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e,n){let i=new Set;return e==null||e.forEach(s=>{s.rewards.forEach(a=>{d$3(a.amount).gt(0)&&i.add(a.coin_type)})}),n==null||n.forEach(s=>{s.rewards.forEach(a=>{d$3(a.amount).gt(0)&&i.add(a.coin_type)})}),Array.from(i)}static buildDividendRewardTypeListV2(e){let n={};return e==null||e.forEach(i=>{i.vesrion==="v2"&&i.rewards.forEach(s=>{n[s.coin_type]||(n[s.coin_type]=[]),n[s.coin_type].push(i.period)})}),n}static getNextStartTime(e){let n=Date.now()/1e3,{start_time:i,interval_day:s}=e,a=Math.ceil((n-i)/(s*Oe$1));return i+a*s*Oe$1}},Ct$2=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,n=!0){let{xcetus:i}=this.sdk.sdkOptions,s=`${e}_getLockUpManagerEvent`,a=this.getCache(s,n);if(a!==void 0)return a;let l,f=`${i.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:f}})).data.forEach(p=>{let C=extractStructTagFromType$2(getMoveObjectType(p)).source_address;if(C===f&&p.data&&p.data.content){let{fields:B}=p.data.content;l={...buildNFT(p),id:B.id.id,index:B.index,type:C,xcetus_balance:B.xcetus_balance},this.updateCache(s,l,cacheTime24h)}}),l}async getOwnerLockCetuss(e){let{xcetus:n}=this.sdk.sdkOptions,i=[],s=`${n.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:s}});for(let l of a.data)if(extractStructTagFromType$2(getMoveObjectType(l)).source_address===s&&l.data){let f=W$2.buildLockCetus(l.data.content);f.xcetus_amount=await this.getXCetusAmount(f.id),i.push(f)}return i}async getLockCetus(e){var i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=n.data)!=null&&i.content){let s=W$2.buildLockCetus(n.data.content);return s.xcetus_amount=await this.getXCetusAmount(s.id),s}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:e}=this.sdk.sdkOptions,n=new Transaction$1;return n.moveCall({target:`${e.published_at}::${je}::mint_venft`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(e).xcetus_manager_id)]}),n}async convertPayload(e,n){let{xcetus:i}=this.sdk.sdkOptions;n=n||new Transaction$1;let s=this.buileCetusCoinType(),a=await TransactionUtil$1.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),s);return e.venft_id===void 0?n.moveCall({target:`${i.published_at}::${je}::mint_and_convert`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(i).lock_manager_id),n.object(getPackagerConfigs$1(i).xcetus_manager_id),a,n.pure.u64(e.amount)]}):n.moveCall({target:`${i.published_at}::${je}::convert`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(i).lock_manager_id),n.object(getPackagerConfigs$1(i).xcetus_manager_id),a,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){let{xcetus:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${je}::redeem_lock`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xcetus_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(CLOCK_ADDRESS$2)]}),i}redeemPayload(e){let{xcetus:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${je}::redeem`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(CLOCK_ADDRESS$2)]}),i}redeemDividendPayload(e,n){let{xcetus:i,xcetus_dividends:s}=this.sdk.sdkOptions,a=new Transaction$1;return n.forEach(l=>{a.moveCall({target:`${i.published_at}::${nt$1}::redeem`,typeArguments:[l],arguments:[a.object(getPackagerConfigs$1(s).dividend_manager_id),a.object(e)]})}),a}redeemDividendV2Payload(e,n,i){let{xcetus_dividends:s}=this.sdk.sdkOptions,a=new Transaction$1;return n.filter(l=>i.includes(l)).length>0&&(a=this.redeemDividendXTokenPayload(e,a)),n.forEach(l=>{i.includes(l)||a.moveCall({target:`${s.published_at}::${nt$1}::redeem_v2`,typeArguments:[l],arguments:[a.object(getPackagerConfigs$1(s).dividend_manager_id),a.object(e),a.object(CLOCK_ADDRESS$2)]})}),a}redeemDividendV3Payload(e,n){let{xcetus_dividends:i}=this.sdk.sdkOptions,s=new Transaction$1,a=W$2.buildDividendRewardTypeList(n),l=W$2.buildDividendRewardTypeListV2(n);return a.forEach(f=>{s.moveCall({target:`${i.published_at}::${nt$1}::redeem_v3`,typeArguments:[f],arguments:[s.object(getPackagerConfigs$1(i).dividend_manager_id),s.object(getPackagerConfigs$1(i).venft_dividends_id),s.makeMoveVec({elements:l[f].map(p=>s.pure.u64(p)),type:"u64"}),s.object(e),s.object(CLOCK_ADDRESS$2)]})}),s}redeemDividendXTokenPayload(e,n){let{xcetus_dividends:i,xcetus:s}=this.sdk.sdkOptions,{xcetus_manager_id:a,lock_manager_id:l}=getPackagerConfigs$1(s),{dividend_manager_id:f}=getPackagerConfigs$1(i);return n=n===void 0?new Transaction$1:n,n.moveCall({target:`${i.published_at}::${nt$1}::redeem_xtoken`,typeArguments:[],arguments:[n.object(l),n.object(a),n.object(f),n.object(e),n.object(CLOCK_ADDRESS$2)]}),n}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,n="xcetus",i="XCETUS"){return`${e}::${n}::${i}`}cancelRedeemPayload(e){let{xcetus:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${je}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xcetus_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(CLOCK_ADDRESS$2)]}),i}async getInitConfigs(){var f,p;let{package_id:e}=this.sdk.sdkOptions.xcetus,n=`${e}_getInitFactoryEvent`,i=this.getCache(n);if(i!==void 0)return i;let s=(f=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:f.data,a={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};s.length>0&&s.forEach(C=>{let B=C.parsedJson;B&&(a.xcetus_manager_id=B.xcetus_manager)});let l=(p=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:p.data;return l.length>0&&l.forEach(C=>{let B=C.parsedJson;B&&(a.lock_manager_id=B.lock_manager)}),a.lock_manager_id.length>0&&(a.lock_handle_id=(await this.getLockUpManager(a.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(n,a,cacheTime24h),a}async getLockUpManager(e=getPackagerConfigs$1(this.sdk.sdkOptions.xcetus).lock_manager_id,n=!1){let i=`${e}_getLockUpManager`,s=this.getCache(i,n);if(s!==void 0)return s;let a=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),l=W$2.buildLockUpManager(getObjectFields(a));return this.updateCache(i,l,cacheTime24h),l}async getDividendConfigs(){var B,N,le;let{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:n,venft_dividends_id:i}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus_dividends),s=`${e}_getDividendManagerEvent`,a=this.getCache(s);if(a!==void 0)return a;let l=(B=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:B.data,f=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),p={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};l.length>0&&l.forEach(Ee=>{let Ue=Ee.parsedJson;Ue&&(p.dividend_manager_id=Ue.manager_id,p.dividend_admin_id=Ue.admin_id,p.dividend_settle_id=Ue.settle_id,this.updateCache(s,p,cacheTime24h))}),f&&f.data&&f.data.content&&(p.venft_dividends_id=(le=(N=f.data.content)==null?void 0:N.fields)==null?void 0:le.value,this.updateCache(s,p,cacheTime24h));let C=await this._sdk.ClmmSDK.fullClient.getObject({id:i,options:{showContent:!0}});return p.venft_dividends_id_v2=C.data.content.fields.venft_dividends.fields.id.id,p}async getDividendManager(e=!1){let{dividend_manager_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus_dividends),i=`${n}_getDividendManager`,s=this.getCache(i,e);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}}),l=getObjectFields(a),f=W$2.buildDividendManager(l);return this.updateCache(i,f,cacheTime24h),f}async getXcetusManager(e=!0){let{xcetus_manager_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus),i=`${n}_getXcetusManager`,s=this.getCache(i,e);if(s)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}}),l=getObjectFields(a),f={id:l.id.id,index:Number(l.index),has_venft:{handle:l.has_venft.fields.id.id,size:l.has_venft.fields.size},nfts:{handle:l.nfts.fields.id.id,size:l.nfts.fields.size},total_locked:l.total_locked,treasury:l.treasury.fields.total_supply.fields.value};return this.updateCache(i,f),f}async getVeNFTDividendInfoV2(e){let{xcetus_dividends:n}=this._sdk.sdkOptions,{dividend_manager_id:i,venft_dividends_id:s}=getPackagerConfigs$1(n),a=new Transaction$1;a.moveCall({target:`${n.published_at}::dividend::fetch_dividend_info_v2`,typeArguments:[],arguments:[a.object(i),a.object(s),a.object(e)]});let l=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:this._sdk.ClmmSDK.senderAddress}),{contents:f}=l.events[0].parsedJson.info,p={id:"",ve_nft_id:e,rewards:[]};return f.forEach(C=>{let B=[],N=C.key,{contents:le}=C.value;le.forEach(Ee=>{B.push({coin_type:extractStructTagFromType$2(Ee.key.name).source_address,amount:Ee.value})}),p.rewards.push({period:Number(N),rewards:B,vesrion:Number(N)>66?"v2":"v1"})}),p}async getVeNFTDividendInfo(e,n,i){let s,a={id:"",ve_nft_id:i,rewards:[]};try{s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:i}});let f=getObjectFields(s);a=W$2.buildVeNFTDividendInfo(f)}catch{s=void 0}let l=[];try{let f=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:i}}),p=getObjectFields(f).value.fields.value.fields.dividends.fields.id.id,C=null,B=50,N=[];for(;;){let le=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:p,cursor:C,limit:B});if(le.data.forEach(Ee=>{N.push(Ee.objectId)}),C=le.nextCursor,C===null||le.data.length<B)break}(await this._sdk.ClmmSDK.fullClient.batchGetObjects(N,{showType:!0,showContent:!0})).forEach(le=>{l.push({period:Number(le.data.content.fields.name),vesrion:"v2",rewards:le.data.content.fields.value.fields.contents.map(Ee=>({coin_type:extractStructTagFromType$2(Ee.fields.key.fields.name).source_address,amount:Ee.fields.value}))})})}catch(f){console.log("error:",f)}return{...a,rewards:[...a.rewards,...l]}}redeemNum(e,n){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=d$3(U$2).mul(d$3(z.max_lock_day).sub(d$3(n))).mul(d$3(z.max_percent_numerator).sub(d$3(z.min_percent_numerator))).div(d$3(z.max_lock_day).sub(d$3(z.min_lock_day))),s=d$3(U$2).mul(d$3(z.max_percent_numerator)).sub(i).div(d$3(Be)).div(U$2);return{amountOut:d$3(s).mul(d$3(e)).round().toString(),percent:s.toString()}}reverseRedeemNum(e,n){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=d$3(U$2).mul(d$3(z.max_lock_day).sub(d$3(n))).mul(d$3(z.max_percent_numerator).sub(d$3(z.min_percent_numerator))).div(d$3(z.max_lock_day).sub(d$3(z.min_lock_day))),s=d$3(U$2).mul(d$3(z.max_percent_numerator)).sub(i).div(d$3(Be)).div(U$2);return{amountOut:d$3(e).div(s).toFixed(0,Decimal$1.ROUND_UP),percent:s.toString()}}async getXCetusAmount(e){let{lock_handle_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus),i=`${e}_getXCetusAmount`,s=this.getCache(i);if(s!==void 0)return s;try{let a=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:e}}),l=getObjectFields(a);if(l){let{xcetus_amount:f}=l.value.fields.value.fields;return this.updateCache(i,f,cacheTime24h),f}}catch{}return"0"}async getVeNftAmount(e,n){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}}),s=getObjectFields(i);if(s){let{lock_amount:a,xcetus_amount:l}=s.value.fields.value.fields;return{lock_amount:a,xcetus_amount:l}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,n=!1){let i=(await this.getDividendManager()).dividends.id,s=`${i}_${e}_getPhaseDividendInfo`,a=this._sdk.getCache(s,n);if(a)return a;try{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),f=getObjectFields(l),p=f.value.fields.value.fields,C=p.redeemed_num.fields.contents.map(Ee=>({name:Ee.fields.key.fields.name,value:Ee.fields.value})),B=p.bonus_types.map(Ee=>Ee.fields.name),N=p.bonus.fields.contents.map(Ee=>({name:Ee.fields.key.fields.name,value:Ee.fields.value})),le={id:getObjectId(l),phase:f.name,settled_num:p.settled_num,register_time:p.register_time,redeemed_num:C,is_settled:p.is_settled,bonus_types:B,bonus:N,phase_end_time:""};return this.updateCache(s,le),le}catch{}}updateCache(e,n,i=cacheTime5min){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Ai="factory",H$1="oversubscribe_pool",Pt$1=1e6,ke$2=1e18,xi=(t=>(t.Upcoming="Upcoming",t.Live="Live",t.Ended="Ended",t.Failed="Failed",t.Canceled="Canceled",t))(xi||{}),xe$1="router",Tt$1="router",st$2="router",Di=(t=>(t.BOTH="both",t.LEFT="left",t.Right="right",t))(Di||{}),Li=(t=>(t[t.CURVE=3]="CURVE",t[t.BID_ASK=4]="BID_ASK",t))(Li||{}),Zt$1={curve:{strategy:3,both_side:{div_width:10,ratios:[.333333,.266666,.2,.133333,.066666]},one_side:{div_width:5,ratios:[.333333,.266666,.2,.133333,.066666]}},bidAsk:{strategy:4,both_side:{div_width:10,ratios:[.172413793,.137931034,.103448276,.068965517,.034482759,.068965517,.103448276,.137931034,.172413793]},one_side:{div_width:5,ratios:[.066666667,.13333333,.2,.266666667,.333333333]}}};function Fi(t){return"master_address"in t}var Mi="router",Ri="vaults",qi=1e4,Ni=(t=>(t.STATUS_RUNNING="STATUS_RUNNING",t.STATUS_REBALANCING="STATUS_REBALANCING",t))(Ni||{}),Bi=(t=>(t.Haedal="Haedal",t.Volo="Volo",t.Aftermath="aftermath",t))(Bi||{}),Ei=(t=>(t.Running="Running",t.PartialCompleted="PartialCompleted",t.Completed="Completed",t.Cancelled="Cancelled",t))(Ei||{}),A=class{static buildIdoPoolImmutables(t){return{pool_address:normalizeSuiObjectId$2(t.pool_id),coin_type_sale:extractStructTagFromType$2(t.sale_coin_type.name).full_address,coin_type_raise:extractStructTagFromType$2(t.raise_coin_type.name).full_address,tick_spacing:Number(t.tick_spacing),total_supply:t.total_supply,min_purchase:t.min_purchase_amount,max_purchase:t.max_purchase_amount}}static buildIdoPool(t){let e=getMoveObjectType(t),n=extractStructTagFromType$2(e),i=getObjectFields(t),s={pool_address:normalizeSuiObjectId$2(i.id.id),coin_type_sale:n.type_arguments[0],coin_type_raise:n.type_arguments[1],tick_spacing:Number(i.tick_spacing),total_supply:i.total_supply,min_purchase:i.min_purchase_amount,max_purchase:i.max_purchase_amount},a={start_time:Number(i.duration_manager.fields.start_time),lock_up_duration:Number(i.duration_manager.fields.lock_up_duration),purchase_duration:Number(i.duration_manager.fields.purchase_duration),end_time:0};a.end_time=a.start_time+a.purchase_duration;let l={complete_raise_limit:i.complete_raise_limit,liquidity_injection_ratio:d$3(i.liquidity_injection_ratio).div(Pt$1).toNumber(),current_sqrt_price_min:i.current_sqrt_price_min,current_sqrt_price_max:i.current_sqrt_price_max,owner:i.owner,sale_coin_amount:i.sale_coin,raise_coin_amount:i.raise_coin,price:i.price,current_price:i.price,duration_summary:a,is_cancelled:i.is_cancelled,is_liquidity_injected:i.is_liquidity_injected,liquidity_used_raise_amount:i.liquidity_used_raise_amount,liquidity_used_sale_amount:i.liquidity_used_sale_amount,purchase_summary:{size:Number(i.purchase_manager.fields.purchases.fields.size),purchase_handle:i.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:i.total_purchase_amount,white_summary:{white_list_id:i.white_list.fields.id.id,protection_limit_used:i.white_list.fields.protection_limit_used,protection_hard_cap:i.white_list.fields.protection_hard_cap,white_handle:i.white_list.fields.addresses.fields.id.id,size:Number(i.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:i.is_withdrawn};return A.updatePoolStatus(l),{...s,...l}}static is_init_period(t){return Number(d$3(Date.now()/1e3).toFixed(0))<t.start_time}static is_purchase_period(t){let e=Number(d$3(Date.now()/1e3).toFixed(0));return e>=t.start_time&&e<=t.start_time+t.purchase_duration}static is_claim_period(t){let e=Number(d$3(Date.now()/1e3).toFixed(0)),n=t.start_time+t.purchase_duration;return e>n}static is_can_inject_liquidity(t){return!t.is_cancelled&&t.liquidity_injection_ratio!==0&&A.is_claim_period(t.duration_summary)&&!t.is_liquidity_injected}static is_can_withdraw(t){return t.is_withdrawn?!1:A.is_sale_failed(t)?!0:(t.liquidity_injection_ratio===0||t.is_liquidity_injected)&&A.is_claim_period(t.duration_summary)}static is_sale_failed(t){return!!(t.is_cancelled||A.is_claim_period(t.duration_summary)&&d$3(t.total_purchase_amount).lessThan(t.complete_raise_limit))}static buildPurchaseInfo(t){return{...t.value.fields.value.fields,owner:t.name}}static calculateRedeemAmount(t,e){let n,i;if(A.is_sale_failed(t))n="0",i="0";else if(e.is_redeemed)n=e.obtained_sale_amount,i=e.used_raise_amount;else if(d$3(t.total_purchase_amount).lessThanOrEqualTo(t.max_raise_amount))n=d$3(e.purchased_raise_amount).mul(ke$2).div(t.price).toString(),i=e.purchased_raise_amount;else{let a=A.redeemForSaleOversubcribeV2(t,e);n=a.user_obtained_sale_amount,i=a.user_used_raise_amount_ceil}n=Decimal$1.floor(n);let s=Decimal$1.floor(d$3(e.purchased_raise_amount).sub(i).toString());return{obtained_sale_amount:n,refunded_raise_amount:s}}static calculateWithdrawAmount(t){let e,n,i=d$3(t.total_supply).mul(t.liquidity_injection_ratio);if(A.is_sale_failed(t))e="0",n=d$3(i).add(t.total_supply);else{let{max_raise_amount:s}=t;d$3(t.total_purchase_amount).greaterThanOrEqualTo(s)?(e=d$3(s).sub(t.liquidity_used_raise_amount).toString(),n="0"):(e=d$3(t.total_purchase_amount).sub(t.liquidity_used_raise_amount),n=d$3(t.total_supply).add(i).sub(t.liquidity_used_sale_amount).sub(A.get_sold_amount(t)))}return{obtained_raise_amount:Decimal$1.floor(e).toString(),refunded_sale_amount:Decimal$1.ceil(n).toString()}}static get_sold_amount(t){return d$3(t.total_purchase_amount).greaterThanOrEqualTo(t.max_raise_amount)?t.total_supply:d$3(t.total_purchase_amount).mul(ke$2).div(t.price)}static redeemForSaleOversubcribe(t,e){let n=e.protection_raise_amount,i=d$3(e.purchased_raise_amount).sub(n),s=t.max_raise_amount,{protection_limit_used:a}=t.white_summary,l=d$3(s).sub(a),f=d$3(t.total_purchase_amount).sub(a),p=Decimal$1.ceil(i.mul(l).div(f).add(n)),C=Decimal$1.floor(i.mul(l).div(f).add(n));return{user_obtained_sale_amount:Decimal$1.floor(d$3(t.total_supply).mul(C).div(s)),user_used_raise_amount_ceil:p}}static redeemForSaleOversubcribeV2(t,e){let n=e.protection_raise_amount,i=d$3(e.purchased_raise_amount).sub(n),s=t.max_raise_amount,{protection_limit_used:a}=t.white_summary,l=d$3(s).sub(a),f=d$3(t.total_purchase_amount).sub(a),p=d$3(n).mul(f).add(d$3(i).mul(l)).mul(ke$2).div(d$3(f).mul(t.price)),C=Decimal$1.ceil(p.mul(t.price).div(ke$2));return{user_obtained_sale_amount:p,user_used_raise_amount_ceil:C}}static raiseTotalAmount(t){let e=d$3(t.sale_decimals-t.raise_decimals).abs().toNumber();return t.sale_decimals>t.raise_decimals?d$3(t.total_supply).mul(t.current_price).div(d$3(10).pow(d$3(e))).toString():d$3(t.total_supply).mul(t.current_price).mul(d$3(10).pow(d$3(e))).toString()}static updatePoolStatus(t){let e=Number(d$3(Date.now()/1e3).toFixed(0)),n=t.duration_summary,i=n.start_time+n.purchase_duration;t.is_cancelled?t.pool_status="Canceled":e<n.start_time?t.pool_status="Upcoming":e>n.start_time&&e<i?t.pool_status="Live":d$3(t.total_purchase_amount).lessThan(t.complete_raise_limit)?t.pool_status="Failed":t.pool_status="Ended"}static async calculatePoolUiPrice(t,e){let n=await t.ClmmSDK.CetusConfig.getTokenListByCoinTypes([e.coin_type_sale,e.coin_type_raise]),i=n[e.coin_type_sale].decimals,s=n[e.coin_type_raise].decimals;e.current_price=I$2.priceFixToReal(Number(d$3(e.price).div(d$3(ke$2)).toString()),i,s).toString(),e.sale_decimals=i,e.raise_decimals=s,e.max_raise_amount=this.raiseTotalAmount(e)}},bn$1=(t=>(t.V1="1",t.V2="2",t))(bn$1||{}),ce$1=class{static buildVeNFTDividendInfo(e){let n={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{let s=[];i.fields.value.fields.contents.forEach(a=>{s.push({coin_type:extractStructTagFromType$2(a.fields.key.fields.name).source_address,amount:a.fields.value})}),n.rewards.push({period:Number(i.fields.key),rewards:s})}),n}static buildDividendManager(e){let n={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{n.bonus_types.push(extractStructTagFromType$2(i.fields.name).source_address)}),n}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:normalizeCoinType$2(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){let n=e.fields,i={id:n.id.id,type:extractStructTagFromType$2(e.type).source_address,locked_start_time:Number(n.locked_start_time),locked_until_time:Number(n.locked_until_time),token_amount:n.balance,xtoken_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/Oe$1,i}static getAvailableXToken(e,n){let i=d$3(0);return n.forEach(s=>{i=i.add(s.xtoken_amount)}),d$3(e.xtoken_balance).sub(i).toString()}static getWaitUnLockTokens(e){return e.filter(n=>!ce$1.isLocked(n))}static getLockingTokens(e){return e.filter(n=>ce$1.isLocked(n))}static buildDividendRewardTypeList(e){let n=new Set;return e.forEach(i=>{i.rewards.forEach(s=>{n.add(s.coin_type)})}),Array.from(n)}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,n=Oe$1){let i=Date.now()/1e3,{start_time:s,interval_day:a}=e,l=Math.ceil((i-s)/(a*n));return s+l*a*n}},J$2=class{static getDefaultStrategyConfig(e){let n;switch(e){case 4:n=Zt$1.bidAsk;break;default:n=Zt$1.curve;break}return n}static geTickIndexRange(e,n,i,s){let a,l;switch(e=TickMath$1.getInitializableTickIndex(e,n),s){case"left":e>0?(l=d$3(e).sub(n).toNumber(),a=d$3(e).mul(d$3(1).add(i)).toDecimalPlaces(0).toNumber()):(l=d$3(e).sub(n).toNumber(),a=d$3(e).mul(d$3(1).sub(i)).toDecimalPlaces(0).toNumber());break;case"right":e>0?(l=d$3(e).mul(d$3(1).add(i)).toDecimalPlaces(0).toNumber(),a=d$3(e).add(n).toNumber()):(l=d$3(e).mul(d$3(1).sub(i)).toDecimalPlaces(0).toNumber(),a=d$3(e).add(n).toNumber());break;default:e>0?(a=d$3(e).mul(d$3(1).sub(i)).toDecimalPlaces(0).toNumber(),l=d$3(e).mul(d$3(1).add(i)).toDecimalPlaces(0).toNumber()):(a=d$3(e).mul(d$3(1).add(i)).toDecimalPlaces(0).toNumber(),l=d$3(e).mul(d$3(1).sub(i)).toDecimalPlaces(0).toNumber());break}if(a=TickMath$1.getInitializableTickIndex(a,n),l=TickMath$1.getInitializableTickIndex(l,n),a<MIN_TICK_INDEX)throw Error("Tick lower value is below the minimum allowed value.");if(l>MAX_TICK_INDEX)throw Error("Tick upper value is above the maximum allowed value.");return{tick_lower:a,tick_upper:l}}static getCreateLiquidityBins(e,n){let i=[];switch(n){case 4:i=J$2.getCreateBidAskLiquidityBins(e);break;default:i=J$2.getCreateCurveLiquidityBins(e);break}return i}static getCreateBidAskLiquidityBins(e){let n=d$3(Math.floor(d$3(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],s=e.ratios,a,l;for(let f=0;f<s.length;f++){let p,C;e.tick_upper<=e.curr_tick?(C=d$3(e.tick_upper).sub(n.mul(f)).toNumber(),p=d$3(C).sub(n).toNumber()):e.tick_lower>=e.curr_tick?(p=d$3(e.tick_lower).add(n.mul(f)).toNumber(),C=d$3(e.tick_lower).add(n.mul(f+1)).toNumber()):f===4?(p=d$3(e.tick_lower).add(n.mul(f)).toNumber(),C=d$3(p).add(n.mul(2)).toNumber()):f>4?(p=d$3(e.tick_lower).add(n.mul(f+1)).toNumber(),C=d$3(p).add(n).toNumber()):(p=d$3(e.tick_lower).add(n.mul(f)).toNumber(),C=d$3(p).add(n).toNumber()),a=TickMath$1.getInitializableTickIndex(p,e.tick_spacing),l=TickMath$1.getInitializableTickIndex(C,e.tick_spacing),i.push({tick_lower:a,tick_upper:l,ratio:s[f],liquidity:"0"})}return i}static getCreateCurveLiquidityBins(e){let n=d$3(Math.floor(d$3(e.tick_upper).sub(e.tick_lower).div(e.div_width).toNumber())).abs(),i=[],s=e.ratios;for(let a=0;a<s.length;a++){let l,f;e.tick_upper<=e.curr_tick?(f=e.tick_upper,l=d$3(e.tick_upper).sub(n.mul(a+1)).toNumber()):e.tick_lower>=e.curr_tick?(l=e.tick_lower,f=d$3(l).add(n.mul(a+1)).toNumber()):(l=d$3(e.curr_tick).sub(n.mul(a+1)).toNumber(),f=d$3(e.curr_tick).add(n.mul(a+1)).toNumber()),i.push({tick_lower:TickMath$1.getInitializableTickIndex(l,e.tick_spacing),tick_upper:TickMath$1.getInitializableTickIndex(f,e.tick_spacing),ratio:s[a],liquidity:"0"})}return i}static calculateAddLiquidityInputs(e){let n=new BN(TickMath$1.tickIndexToSqrtPriceX64(e.curr_tick)),i=J$2.calculateCoinRatios(e.curr_tick,e.liquidity_bins),s=e.liquidity_bins.map((a,l)=>{let f=i[l],p=d$3(e.coin_amount).mul(e.fix_amount_a?f.coinRatioA:f.coinRatioB).toFixed(0).toString();try{return{...ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(a.tick_lower,a.tick_upper,new BN(p),e.fix_amount_a,!0,e.slippage,n),...a}}catch{return{coinAmountA:new BN(0),coinAmountB:new BN(0),tokenMaxA:new BN(0),tokenMaxB:new BN(0),liquidityAmount:new BN(0),fix_amount_a:!e.fix_amount_a,...a}}});return J$2.fixLiquidityInputs(n,e.slippage,s,!0)}static fixLiquidityInputs(e,n,i,s){let a=i.filter(f=>f.liquidityAmount.gt(ZERO$2));if(a.length===0)return[];let l=a[0];return i.map(f=>{if(f.liquidityAmount.eq(ZERO$2)){let p=d$3(l.liquidityAmount.toString()).mul(f.ratio).div(l.ratio).toFixed(0),C=TickMath$1.tickIndexToSqrtPriceX64(f.tick_lower),B=TickMath$1.tickIndexToSqrtPriceX64(f.tick_upper),N=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(p.toString()),e,C,B,!1);return{coinAmountA:N.coinA,coinAmountB:N.coinB,liquidityAmount:new BN(p.toString()),fix_amount_a:f.fix_amount_a,...adjustForCoinSlippage(N,Percentage.fromDecimal(d$3(n).mul(100)),s)}}return f})}static calculateCoinRatios(e,n){let i=new BN(TickMath$1.tickIndexToSqrtPriceX64(e)),s=[],a=d$3(0),l=d$3(0),f=n.map(B=>{let N=d$3(toDecimalsAmount(100,6).toString()).mul(B.ratio).toFixed(0).toString(),le=TickMath$1.tickIndexToSqrtPriceX64(B.tick_lower),Ee=TickMath$1.tickIndexToSqrtPriceX64(B.tick_upper),Ue=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(N),i,le,Ee,!0);return a=a.add(Ue.coinA.toString()),l=l.add(Ue.coinB.toString()),{...Ue,liquidity:N}}),p=[],C=[];return f.forEach((B,N)=>{let le={coinRatioA:a.eq(d$3(0))?0:d$3(B.coinA.toString()).div(a).toNumber(),coinRatioB:l.eq(d$3(0))?0:d$3(B.coinB.toString()).div(l).toNumber(),liquiditys:B.liquidity,tick_lower:n[N].tick_lower,tick_upper:n[N].tick_upper};s.push(le),p.push(a.eq(d$3(0))?0:d$3(B.coinA.toString()).div(a).toNumber()),C.push(l.eq(d$3(0))?0:d$3(B.coinB.toString()).div(l).toNumber())}),s}static calculateCloseMasterLiquidityInputs(e){let n=new BN(TickMath$1.tickIndexToSqrtPriceX64(e.curr_tick));return e.positions.map(i=>{let s=new BN(i.liquidity),a=TickMath$1.tickIndexToSqrtPriceX64(i.tick_lower_index),l=TickMath$1.tickIndexToSqrtPriceX64(i.tick_upper_index),f=ClmmPoolUtil$1.getCoinAmountFromLiquidity(s,n,a,l,!1),p=Percentage.fromDecimal(d$3(e.slippage).mul(100)),{tokenMaxA:C,tokenMaxB:B}=adjustForCoinSlippage(f,p,!1);return{coinAmountA:f.coinA,coinAmountB:f.coinB,tokenMaxA:C,tokenMaxB:B,liquidityAmount:s,fix_amount_a:!1}})}static calculateRemoveMasterLiquidityInputs(e){let n=new BN(TickMath$1.tickIndexToSqrtPriceX64(e.curr_tick)),{fix_token:i}=e;if(i){let s=e.positions.map((f,p)=>({tick_lower:f.tick_lower_index,tick_upper:f.tick_upper_index,ratio:e.ratios[p]})),a=J$2.calculateCoinRatios(e.curr_tick,s),l=e.positions.map((f,p)=>{let C=a[p],B=d$3(i.coin_amount).mul(i.fix_amount_a?C.coinRatioA:C.coinRatioB).toFixed(0).toString();try{let N=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(f.tick_lower_index,f.tick_upper_index,new BN(B),i.fix_amount_a,!1,e.slippage,n);return{...N,tick_lower:f.tick_lower_index,tick_upper:f.tick_upper_index,liquidity:N.liquidityAmount.toString(),ratio:e.ratios[p]}}catch{return{coinAmountA:new BN(0),coinAmountB:new BN(0),tokenMaxA:new BN(0),tokenMaxB:new BN(0),liquidityAmount:new BN(0),fix_amount_a:!i.fix_amount_a,tick_lower:f.tick_lower_index,tick_upper:f.tick_upper_index,liquidity:"0",ratio:e.ratios[p]}}});return J$2.fixLiquidityInputs(n,e.slippage,l,!1)}return e.positions.map((s,a)=>{let l=e.ratios[a],f=d$3(e.liquidity).mul(l).toFixed(0);d$3(f).greaterThan(s.liquidity)&&(f=s.liquidity);let p=TickMath$1.tickIndexToSqrtPriceX64(s.tick_lower_index),C=TickMath$1.tickIndexToSqrtPriceX64(s.tick_upper_index),B=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(f),n,p,C,!1),N=Percentage.fromDecimal(d$3(e.slippage).mul(100)),{tokenMaxA:le,tokenMaxB:Ee}=adjustForCoinSlippage(B,N,!1);return{coinAmountA:B.coinA,coinAmountB:B.coinB,tokenMaxA:le,tokenMaxB:Ee,liquidityAmount:new BN(f),fix_amount_a:!1}})}static buildMasterPosition(e){return{coin_type_a:extractStructTagFromType$2(e.coin_type_a.fields.name).full_address,coin_type_b:extractStructTagFromType$2(e.coin_type_b.fields.name).full_address,description:e.description,id:e.id.id,index:e.index,liquidity:e.liquidity,name:e.name,pool:e.pool,tick_lower_index:asIntN(BigInt(e.tick_lower_index.fields.bits)),tick_upper_index:asIntN(BigInt(e.tick_upper_index.fields.bits)),url:e.url}}static buildMasterNFT(e){let n=getObjectFields(e);if(n){let i={id:n.id.id,pool_id:n.pool_id,index:Number(n.index),strategy:Number(n.strategy),tick_lower_index:asIntN(BigInt(n.tick_lower_index)),tick_upper_index:asIntN(BigInt(n.tick_upper_index)),positions:[],...buildNFT(e)};return i.positions=n.positions.map(s=>J$2.buildMasterPosition(s.fields)),i}}},q$1=class{static generateNextTickRange(e,n,i){let s=e-n/2,a=e+n/2;return{new_tick_lower:q$1.getValidTickIndex(s,i),new_tick_upper:q$1.getValidTickIndex(a,i)}}static calculateDepositRatio(e,n,i){let s=TickMath$1.sqrtPriceX64ToTickIndex(i);if(s<e)return{ratioA:new Decimal$1(1),ratioB:new Decimal$1(0)};if(s>n)return{ratioA:new Decimal$1(0),ratioB:new Decimal$1(1)};let a=new BN(1e8),{coinAmountB:l}=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(e,n,a,!0,!0,0,i),f=TickMath$1.sqrtPriceX64ToPrice(i,0,0),p=d$3(a.toString()).mul(f),C=p.add(l.toString()),B=p.div(C),N=d$3(l.toString()).div(C);return{ratioA:B,ratioB:N}}static getValidTickIndex(e,n){if(e%n===0)return e;let i;if(e>0?i=e-e%n+n:e<0?i=e+Math.abs(e)%n-n:i=e,i%n!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(i)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return i}static get_lp_amount_by_liquidity(e,n){return e.total_supply==="0"?"0":d$3(e.total_supply).mul(n).div(e.liquidity).toFixed(0,Decimal$1.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,n){return e.total_supply==="0"?"0":d$3(n).mul(e.liquidity).div(e.total_supply).toFixed(0,Decimal$1.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,n){return d$3(n).mul(e.protocol_fee_rate).div(qi).toFixed(0,Decimal$1.ROUND_CEIL)}static buildFramsPositionNFT(e){let n=e.clmm_postion.fields;return{id:e.id.id,url:n.url,pool_id:e.pool_id,coinTypeA:extractStructTagFromType$2(n.coin_type_a.fields.name).full_address,coinTypeB:extractStructTagFromType$2(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:asIntN(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:asIntN(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let n=getObjectFields(e),i=getObjectType(e),{positions:s}=n;if(n&&s.length>0){let a=q$1.buildFramsPositionNFT(s[0].fields);return{id:n.id.id,pool_id:n.pool,protocol_fee_rate:n.protocol_fee_rate,is_pause:n.is_pause,harvest_assets:{harvest_assets_handle:n.harvest_assets.fields.id.id,size:Number(n.harvest_assets.fields.size)},lp_token_type:extractStructTagFromType$2(i).type_arguments[0],total_supply:n.lp_token_treasury.fields.total_supply.fields.value,liquidity:n.liquidity,max_quota:n.max_quota,status:n.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:n.quota_based_type.fields.name,position:a}}}static async getSuiCoin(e,n,i){let s=await e.ClmmSDK.getOwnerCoinAssets(e.getVerifySenderAddress(),GAS_TYPE_ARG$2);i=i||new Transaction$1;let a;if(n>95e10){let[l,...f]=s;f.length>0&&i.mergeCoins(i.object(l.coinObjectId),f.map(p=>i.object(p.coinObjectId))),a=i.splitCoins(i.object(l.coinObjectId),[n])}else a=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(n),GAS_TYPE_ARG$2,!1,!0).targetCoin;return a}},Le=class{static calculatePositionShare(t,e,n,i,s,a,l){if(e<=s||t>=a)return"0";let f=0;t<s?f=s:f=t;let p=0;e<a?p=e:p=a;let C=TickMath$1.tickIndexToSqrtPriceX64(f),B=TickMath$1.tickIndexToSqrtPriceX64(p),{coinA:N,coinB:le}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(n),new BN(l),C,B,!0);return d$3(N.toString()).mul(i).div(1e12).add(le.toString()).toString()}static buildFramsPool(t){let e=getObjectFields(t);if(e)try{let n=[];return e.rewarders.forEach(i=>{n.push({reward_coin:extractStructTagFromType$2(i.fields.name).full_address,last_reward_time:"",emission_per_second:"",total_allocate_point:"",allocate_point:""})}),{id:e.id.id,clmm_pool_id:e.clmm_pool_id,effective_tick_lower:asIntN(BigInt(e.effective_tick_lower.fields.bits)),effective_tick_upper:asIntN(BigInt(e.effective_tick_upper.fields.bits)),total_share:e.total_share,rewarders:n,positions:{positions_handle:e.positions.fields.id.id,size:e.positions.fields.size},sqrt_price:e.sqrt_price}}catch(n){console.log(n)}}static buildFramsPositionNFT(t){let e=getObjectFields(t);if(e){let n=e.clmm_postion.fields;return{id:e.id.id,url:n.url,pool_id:e.pool_id,coinTypeA:extractStructTagFromType$2(n.coin_type_a.fields.name).full_address,coinTypeB:extractStructTagFromType$2(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:asIntN(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:asIntN(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}}},Pe$1=class{static buildOrderLimitEvent(e,n){let{events:i}=e,s=[];return i&&i.forEach(a=>{let l=extractStructTagFromType$2(a.type).name;if(n.includes(l)){let f={digest:e.digest,type:l,timestampMs:e.timestampMs,parsedJson:a.parsedJson};s.push(f)}}),s}static buildLimitOrderInfo(e){let n=getObjectFields(e),i=getObjectType(e);if(n&&i)try{let s=extractStructTagFromType$2(i),a={pay_coin_type:s.type_arguments[0],target_coin_type:s.type_arguments[1],canceled_ts:n.canceled_ts==="18446744073709551615"?0:Number(n.canceled_ts),id:n.id.id,obtained_amount:n.obtained_amount,owner:n.owner,rate:n.rate,rate_order_indexer_id:n.rate_order_indexer_id,expire_ts:Number(n.expire_ts),total_pay_amount:n.total_pay_amount,pay_balance:n.pay_balance,target_balance:n.target_balance,claimed_amount:n.claimed_amount,status:"Running",created_ts:Number(n.created_ts)};return a.canceled_ts===0?(a.status="Running",d$3(a.pay_balance).eq(0)?a.status="Completed":d$3(a.pay_balance).lessThan(a.total_pay_amount)&&(a.status="PartialCompleted")):a.status="Cancelled",a}catch(s){console.log(s)}}static rateToPrice(e,n,i){let s=18+n-i;return d$3(10**s).div(e).toString()}static priceToRate(e,n,i){let s=18+n-i;return d$3(10).pow(s).div(d$3(e)).toFixed(0).toString()}},Ve$1=class{static async getExchangeRateForStake(e,n,i){let{vaults:s}=e.sdkOptions,{haedal:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the haedal config is undefined");let{simulationAccount:l}=e.ClmmSDK.sdkOptions,{staking_id:f}=getPackagerConfigs$1(a);try{let p=new Transaction$1;n?await this.requestStake(e,i||1e9,p):p.moveCall({target:`${a.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[p.object(f)]});let C=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:n?e.ClmmSDK.senderAddress:l.address});if(n){let N=C.events.find(Ue=>Ue.type.includes("UserStaked")),{sui_amount:le,st_amount:Ee}=N.parsedJson;return d$3(le).div(Ee).toString()}let B=C.results[0].returnValues[0][0];return d$3(suiBcs$2.u64().parse(Uint8Array.from(B))).div(1e6).toString()}catch(p){console.log("getExchangeRateForHaedal",p)}return"0"}static async requestStake(e,n,i){var l,f;let{vaults:s}=e.sdkOptions;i=i||new Transaction$1;let a=await q$1.getSuiCoin(e,n,i);return i.moveCall({target:`${(f=(l=s.config)==null?void 0:l.haedal)==null?void 0:f.published_at}::interface::request_stake`,typeArguments:[],arguments:[i.object(normalizeSuiObjectId$2("0x5")),i.object(s.config.haedal.config.staking_id),a,i.pure.address(normalizeSuiObjectId$2("0x0"))]}),i}static requestStakeCoin(e,n,i){let{haedal:s}=e.sdkOptions.vaults.config;return n.moveCall({target:`${s.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[n.object(normalizeSuiObjectId$2("0x5")),n.object(s.config.staking_id),i,n.pure.address(normalizeSuiObjectId$2("0x0"))]})}},Xe$1=class{static async getExchangeRateForStake(e,n,i){let{vaults:s}=e.sdkOptions,{volo:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the volo config is undefined");let{simulationAccount:l}=e.ClmmSDK.sdkOptions,{native_pool:f,vsui_metadata:p}=getPackagerConfigs$1(a);try{let C=new Transaction$1;n?await this.requestStake(e,i||1e9,C):C.moveCall({target:`${a.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[C.object(f),C.object(p)]});let B=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:C,sender:n?e.ClmmSDK.senderAddress:l.address});if(n){let Ee=B.events.find(Ze=>Ze.type.includes("StakedEvent")),{cert_amount:Ue,sui_amount:ze}=Ee.parsedJson;return d$3(ze).div(Ue).toString()}let N=B.results[0].returnValues[0][0],le=d$3(suiBcs$2.u256().parse(Uint8Array.from(N))).div("1000000000000000000").toNumber();return d$3(1).div(le).toString()}catch(C){console.log("getExchangeRateForHaedal",C)}return"0"}static async requestStake(e,n,i){let{vaults:s}=e.sdkOptions,{volo:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the volo config is undefined");i=i||new Transaction$1;let{native_pool:l,vsui_metadata:f}=getPackagerConfigs$1(a),p=await q$1.getSuiCoin(e,n,i);return i.moveCall({target:`${a.published_at}::native_pool::stake`,typeArguments:[],arguments:[i.object(l),i.object(f),i.object(normalizeSuiObjectId$2("0x5")),p]}),i}static requestStakeCoin(e,n,i){let{vaults:s}=e.sdkOptions,{volo:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the volo config is undefined");n=n||new Transaction$1;let{native_pool:l,vsui_metadata:f}=getPackagerConfigs$1(a);return n.moveCall({target:`${a.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[n.object(l),n.object(f),n.object(normalizeSuiObjectId$2("0x5")),i]})}},We$1=class{static async getExchangeRateForStake(e,n,i){let{vaults:s}=e.sdkOptions,{aftermath:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:l}=e.ClmmSDK.sdkOptions,{staked_sui_vault:f,safe:p}=getPackagerConfigs$1(a);try{let C=new Transaction$1;n?await this.requestStake(e,i||1e9,C):C.moveCall({target:`${a.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[C.object(f),C.object(p)]});let B=await e.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:C,sender:n?e.ClmmSDK.senderAddress:l.address});if(n){let le=B.events.find(ze=>ze.type.includes("StakedEvent")),{afsui_amount:Ee,sui_amount:Ue}=le.parsedJson;return d$3(Ue).div(Ee).toString()}let N=B.results[0].returnValues[0][0];return d$3(suiBcs$2.u128().parse(Uint8Array.from(N))).div(1e18).toString()}catch(C){console.log("getExchangeRateForHaedal",C)}return"0"}static async requestStake(e,n,i){let{vaults:s}=e.sdkOptions,{aftermath:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the aftermath config is undefined");i=i||new Transaction$1;let{staked_sui_vault:l,referral_vault:f,safe:p,validator_address:C}=getPackagerConfigs$1(a),B=await q$1.getSuiCoin(e,n,i);return i.moveCall({target:`${a.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[i.object(l),i.object(p),i.object(normalizeSuiObjectId$2("0x5")),i.object(f),B,i.pure.address(normalizeSuiObjectId$2(C))]}),i}static requestStakeCoin(e,n,i){let{vaults:s}=e.sdkOptions,{aftermath:a}=getPackagerConfigs$1(s);if(a===void 0)throw Error("the aftermath config is undefined");n=n||new Transaction$1;let{staked_sui_vault:l,referral_vault:f,safe:p,validator_address:C}=getPackagerConfigs$1(a);return n.moveCall({target:`${a.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[n.object(l),n.object(p),n.object(normalizeSuiObjectId$2("0x5")),n.object(f),i,n.pure.address(normalizeSuiObjectId$2(C))]})}},Ot$1=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",n=!1){let{package_id:i}=this._sdk.sdkOptions.ido,s=`${i}_getPoolImmutables`,a=this.getCache(s,n),l={data:[],hasNextPage:!1},f=[];if(a!==void 0&&f.push(...a),f.length===0)try{let p=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::oversubscribe_pool::CreatePoolEvent`},e);p.data.forEach(C=>{let B=C.parsedJson;if(B){let N=A.buildIdoPoolImmutables(B);f.push(N)}}),l.hasNextPage=p.hasNextPage,l.nextCursor=p.nextCursor,this.updateCache(s,f,cacheTime24h)}catch(p){console.log("getPoolImmutables",p)}return l.data=f,l}async getPools(e=[],n=!1){let i=[],s=[];e.length>0?s=[...e]:(await this.getPoolImmutables("all",n)).data.forEach(l=>{s.push(l.pool_address)});let a=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(let l of a){let f=A.buildIdoPool(l);await A.calculatePoolUiPrice(this._sdk,f),i.push(f);let p=`${f.pool_address}_getPoolObject`;this.updateCache(p,f,cacheTime24h)}return i}async getPool(e,n=!0){let i=`${e}_getPoolObject`,s=this.getCache(i,n);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),l=A.buildIdoPool(a);return await A.calculatePoolUiPrice(this._sdk,l),this.updateCache(i,l),l}async getIdoConfigs(e=!1){var C;let{package_id:n}=this._sdk.sdkOptions.ido,i=`${n}_getInitEvent`,s=this.getCache(i,e);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showPreviousTransaction:!0}}),l=getObjectPreviousTransactionDigest(a),f=(C=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:l}))==null?void 0:C.data,p={pools_id:"",admin_cap_id:"",package_version_id:""};return f.length>0&&(f.forEach(B=>{let N=B.parsedJson;if(N)switch(extractStructTagFromType$2(B.type).full_address){case`${n}::config::InitConfigEvent`:p.admin_cap_id=N.admin_cap_id,p.package_version_id=N.package_version_id;break;case`${n}::factory::InitFactoryEvent`:p.pools_id=N.pools_id;break}}),this.updateCache(i,p,cacheTime24h)),p}async getPurchaseInfo(e,n,i=!0){let s=`${e}_${n}_getPurchaseInfo`,a=this.getCache(s,i);if(a)return a;try{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:n}}),f=A.buildPurchaseInfo(getObjectFields(l));return this.updateCache(s,f,cacheTime5min),f}catch{return}}async getLockNFT(e,n=!1){let i=`${e}_getLockNFT`,s=this.getCache(i,n);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!a.error)return buildPosition(a)}async getLockNFTList(e){var a;let{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,{ido:i}=this._sdk.sdkOptions,s=[];try{let l=(a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${i.package_id}::lock::LockedNFT<${n.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:a.data;for(let f of l){let p=getObjectFields(f);if(p){let C=p.nft.fields,B={locked_at:Number(p.locked_at),lock_duration:Number(p.lock_duration),lock_nft_id:p.id.id,type:p.nft.type,...C};B.end_lock_time=B.locked_at+B.lock_duration,B.coin_type_a=extractStructTagFromType$2(C.coin_type_a.fields.name).full_address,B.coin_type_b=extractStructTagFromType$2(C.coin_type_b.fields.name).full_address,B.id=C.id.id,B.tick_lower_index=asIntN(BigInt(C.tick_lower_index.fields.bits)),B.tick_upper_index=asIntN(BigInt(C.tick_upper_index.fields.bits)),s.push(B)}}return s}catch(l){return console.log("getLockNFTList:",l),[]}}async creatPool(e){let{ido:n}=this.sdk.sdkOptions;isSortedSymbols(normalizeSuiAddress$2(e.coin_type_sale),normalizeSuiAddress$2(e.coin_type_raise))&&(e.price_min=d$3(1).div(e.price_max).toNumber(),e.price_max=d$3(1).div(e.price_min).toNumber());let i=I$2.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),s=TickMath$1.priceToSqrtPriceX64(d$3(e.price_min),e.sale_decimals,e.raise_decimals).toString(),a=TickMath$1.priceToSqrtPriceX64(d$3(e.price_max),e.sale_decimals,e.raise_decimals).toString(),l=new Transaction$1,f=d$3(e.total_supply).add(d$3(e.total_supply).mul(d$3(e.liquidity_injection_ratio))).toNumber(),p=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),C=TransactionUtil$1.buildCoinForAmount(l,p,BigInt(f),e.coin_type_sale,!1),B=[l.object(getPackagerConfigs$1(n).admin_cap_id),l.object(getPackagerConfigs$1(n).package_version_id),l.object(getPackagerConfigs$1(n).pools_id),l.object(normalizeSuiAddress$2(e.owner)),l.pure.u128(d$3(i).mul(ke$2).toString()),l.pure.u64(e.total_supply),l.pure.u64(e.complete_raise_limit),l.pure.u64(e.min_purchase_amount),l.pure.u64(e.max_purchase_amount),l.pure.u64(e.start_time),l.pure.u64(e.purchase_duration),l.pure.u64(e.lock_up_duration),l.pure.u64((e.liquidity_injection_ratio*Pt$1).toString()),l.pure.u128(s),l.pure.u128(a),l.pure.u32(e.tick_spacing),C.targetCoin,l.pure.u64(e.protection_hard_cap.toString()),l.object(CLOCK_ADDRESS$2)],N=[e.coin_type_sale,e.coin_type_raise];return l.moveCall({target:`${n.published_at}::${Ai}::create_oversubscribe_pool`,typeArguments:N,arguments:B}),l}async creatPurchasePayload(e){let{ido:n}=this.sdk.sdkOptions,i=new Transaction$1,s=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),l=TransactionUtil$1.buildCoinForAmount(i,a,BigInt(e.raise_amount),e.coin_type_raise,!1),f=[e.coin_type_sale,e.coin_type_raise],p,C;return s?(C="purchase",p=[i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.object(s.purchase_certificate_id),i.pure.u64(e.raise_amount.toString()),l.targetCoin,i.object(CLOCK_ADDRESS$2)]):(C="create_certificate_and_purchase",p=[i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.pure.u64(e.raise_amount.toString()),l.targetCoin,i.object(CLOCK_ADDRESS$2)]),i.moveCall({target:`${n.published_at}::${H$1}::${C}`,typeArguments:f,arguments:p}),i}async redeemPayload(e){let{ido:n}=this.sdk.sdkOptions,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(i===void 0)throw Error("get purchase certificate fail");let s=new Transaction$1,a=[e.coin_type_sale,e.coin_type_raise],l=[s.object(getPackagerConfigs$1(n).package_version_id),s.object(e.pool_address),s.object(i.purchase_certificate_id),s.object(CLOCK_ADDRESS$2)];return s.moveCall({target:`${n.published_at}::${H$1}::redeem`,typeArguments:a,arguments:l}),s}injectLiquidityPayload(e){let{ido:n}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,s=new Transaction$1,a=[e.coin_type_sale,e.coin_type_raise],l=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",f=[s.object(getPackagerConfigs$1(n).package_version_id),s.object(e.pool_address),s.object(getPackagerConfigs$1(i).global_config_id),s.object(e.clmm_pool_address),s.object(CLOCK_ADDRESS$2)];return s.moveCall({target:`${n.published_at}::${H$1}::${l}`,typeArguments:a,arguments:f}),s}unPauseInjectLiquidity(e){let{ido:n}=this.sdk.sdkOptions,{integrate:i,clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions,a=new Transaction$1;a.moveCall({target:`${i.published_at}::${ClmmIntegratePoolModule}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[a.object(getPackagerConfigs$1(s).global_config_id),a.object(e.clmm_pool_address)]});let l=[e.coin_type_sale,e.coin_type_raise],f=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",p=[a.object(getPackagerConfigs$1(n).package_version_id),a.object(e.pool_address),a.object(getPackagerConfigs$1(s).global_config_id),a.object(e.clmm_pool_address),a.object(CLOCK_ADDRESS$2)];return a.moveCall({target:`${n.published_at}::${H$1}::${f}`,typeArguments:l,arguments:p}),a}async findClmmPoolForLiquidity(e){let n=null,i=!1,s=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(let a of s){if(a.coinTypeA===e.coin_type_sale&&a.coinTypeB===e.coin_type_raise&&Number(a.tickSpacing)===e.tick_spacing){n=await this._sdk.ClmmSDK.Pool.getPool(a.poolAddress);break}if(a.coinTypeA===e.coin_type_raise&&a.coinTypeB===e.coin_type_sale&&Number(a.tickSpacing)===e.tick_spacing){n=await this._sdk.ClmmSDK.Pool.getPool(a.poolAddress),i=!0;break}}return n&&(d$3(n.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||d$3(n.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?{is_reverse:i,clmmPool:null}:{is_reverse:i,clmmPool:n}}withdrawPayload(e){let{ido:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${H$1}::withdraw`,typeArguments:s,arguments:a}),i}updateWhitelistCapPayload(e){let{ido:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&i.moveCall({target:`${n.published_at}::${H$1}::add_white_listed_addresses`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.add_whites.addresses.map(a=>i.pure.address(normalizeSuiObjectId$2(a)))}),i.pure.u64(e.add_whites.protection_limit),i.object(CLOCK_ADDRESS$2)]}),e.remove_whites&&e.remove_whites.length>0&&i.moveCall({target:`${n.published_at}::${H$1}::remove_white_listed_addresses`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",elements:e.remove_whites.map(a=>i.pure.address(normalizeSuiObjectId$2(a)))}),i.object(CLOCK_ADDRESS$2)]}),e.update_whites&&e.update_whites.forEach(a=>{i.moveCall({target:`${n.published_at}::${H$1}::update_white_listed_address`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.object(a.address),i.pure.u64(a.protection_limit),i.object(CLOCK_ADDRESS$2)]})}),i}creatCancelPoolPayload(e){let{ido:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[e.coin_type_sale,e.coin_type_raise],a=[i.object(getPackagerConfigs$1(n).admin_cap_id),i.object(getPackagerConfigs$1(n).package_version_id),i.object(e.pool_address),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${H$1}::cancel`,typeArguments:s,arguments:a}),i}updatePoolOwnerPayload(e,n){let{ido:i}=this.sdk.sdkOptions;n=n===void 0?new Transaction$1:n;let s=[e.coin_type_sale,e.coin_type_raise],a=[n.object(getPackagerConfigs$1(i).admin_cap_id),n.object(getPackagerConfigs$1(i).package_version_id),n.object(e.pool_address),n.object(e.new_owner),n.object(CLOCK_ADDRESS$2)];return n.moveCall({target:`${i.published_at}::${H$1}::update_pool_owner`,typeArguments:s,arguments:a}),n}updatePoolDuractionPayload(e,n){let{ido:i}=this.sdk.sdkOptions;n=n===void 0?new Transaction$1:n;let s=[e.coin_type_sale,e.coin_type_raise],a=[n.object(getPackagerConfigs$1(i).admin_cap_id),n.object(getPackagerConfigs$1(i).package_version_id),n.object(e.pool_address),n.pure.u64(e.start_time),n.pure.u64(e.purchase_duration),n.pure.u64(e.lock_duration),n.object(CLOCK_ADDRESS$2)];return n.moveCall({target:`${i.published_at}::${H$1}::update_pool_duration`,typeArguments:s,arguments:a}),n}updateProtectionHardCapPayload(e,n){let{ido:i}=this.sdk.sdkOptions;n=n===void 0?new Transaction$1:n;let s=[e.coin_type_sale,e.coin_type_raise],a=[n.object(getPackagerConfigs$1(i).admin_cap_id),n.object(getPackagerConfigs$1(i).package_version_id),n.object(e.pool_address),n.pure.u64(e.protection_hard_cap),n.object(CLOCK_ADDRESS$2)];return n.moveCall({target:`${i.published_at}::${H$1}::update_protection_hard_cap`,typeArguments:s,arguments:a}),n}unlockNftPayload(e){let{ido:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[e.nft_type],a=[i.object(e.lock_nft_id),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::lock::unlock_nft`,typeArguments:s,arguments:a}),i}async isAdminCap(e){let{ido:n}=this._sdk.sdkOptions,i=`${n.package_id}_${e}_isAdminCap`,s=this.getCache(i);if(s)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:getPackagerConfigs$1(n).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(a);let l=getObjectType(a),f=getObjectOwner(a),p=!1;return f&&l&&extractStructTagFromType$2(l).source_address===`${n.package_id}::config::AdminCap`&&(p=normalizeSuiAddress$2(f.AddressOwner)===normalizeSuiAddress$2(e)),this.updateCache(i,p,cacheTime24h),p}async getWhiteProtectionLimit(e,n,i=!0){let s=`${e}_${n}_getWhiteProtectionLimit`,a=this._sdk.getCache(s,i);if(a)return a;try{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:n}});if(l&&l.data){let f=getObjectFields(l);return this._sdk.updateCache(s,f.value),f.value}return}catch{return}}async getWhiteList(e,n){var s;let i={type:"address",value:n};try{let a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),l=getObjectFields(a);if(console.log(l),l)return(s=l==null?void 0:l.value)==null?void 0:s.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){let{ido:e}=this._sdk.sdkOptions,n=`${getPackagerConfigs$1(e).admin_cap_id}_getAdminAddress`,i=this.getCache(n);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:getPackagerConfigs$1(e).admin_cap_id,options:{showType:!0,showOwner:!0}}),a=getObjectType(s),l=getObjectOwner(s);if(l&&a&&extractStructTagFromType$2(a).source_address===`${e.package_id}::config::AdminCap`){let f=normalizeSuiAddress$2(l.AddressOwner);return this.updateCache(n,f,cacheTime24h),f}return""}updateCache(e,n,i=cacheTime24h){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},At$1=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,n=!0){let{xtoken:i}=this.sdk.sdkOptions,s=`${e}_getLockUpManagerEvent`,a=this.getCache(s,n);if(a!==void 0)return a;let l,f=`${i.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:f}})).data.forEach(p=>{let C=extractStructTagFromType$2(getMoveObjectType(p)).source_address;if(C===f&&p.data&&p.data.content){let{fields:B}=p.data.content;l={...buildNFT(p),id:B.id.id,index:B.index,type:C,xtoken_balance:B.xtoken_balance},this.updateCache(s,l,cacheTime24h)}}),l}async getOwnerLockTokens(e){let{xtoken:n}=this.sdk.sdkOptions,i=[],s=`${n.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,a=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:s}});for(let l of a.data)if(extractStructTagFromType$2(getMoveObjectType(l)).source_address===s&&l.data){let f=ce$1.buildLockToken(l.data.content),p=await this.getLockXToken(f.id);p&&(f.xtoken_amount=p.xtoken_amount),i.push(f)}return i}async getLockToken(e){var i;let n=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=n.data)!=null&&i.content){let s=ce$1.buildLockToken(n.data.content),a=await this.getLockXToken(s.id);return a&&(s.xtoken_amount=a.xtoken_amount),s}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){let{xtoken:e}=this.sdk.sdkOptions,n=new Transaction$1;return n.moveCall({target:`${e.published_at}::${xe$1}::mint_venft`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(e).xtoken_manager_id)]}),n}async convertPayload(e,n){let{xtoken:i}=this.sdk.sdkOptions;n=n||new Transaction$1;let s=this.buileTokenCoinType(),a=await TransactionUtil$1.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,n,BigInt(e.amount),s);return e.venft_id===void 0?n.moveCall({target:`${i.published_at}::${xe$1}::mint_and_convert`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(i).lock_manager_id),n.object(getPackagerConfigs$1(i).xtoken_manager_id),a,n.pure.u64(e.amount)]}):n.moveCall({target:`${i.published_at}::${xe$1}::convert`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(i).lock_manager_id),n.object(getPackagerConfigs$1(i).xtoken_manager_id),a,n.pure.u64(e.amount),n.object(e.venft_id)]}),n}redeemLockPayload(e){let{xtoken:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${xe$1}::redeem_lock`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xtoken_manager_id),i.object(e.venft_id),i.pure.u64(e.amount),i.pure.u64(e.lock_day),i.object(CLOCK_ADDRESS$2)]}),i}redeemPayload(e){let{xtoken:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${xe$1}::redeem`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(CLOCK_ADDRESS$2)]}),i}redeemDividendPayload(e,n){let{xtoken_dividends:i}=this.sdk.sdkOptions,s=new Transaction$1;return n.forEach(a=>{s.moveCall({target:`${i.published_at}::${Tt$1}::redeem`,typeArguments:[a],arguments:[s.object(getPackagerConfigs$1(i).dividend_manager_id),s.object(e)]})}),s}redeemDividendV2Payload(e,n,i){let{xtoken_dividends:s}=this.sdk.sdkOptions,a=new Transaction$1;return n.filter(l=>i.includes(l)).length>0&&(a=this.redeemDividendXTokenPayload(e,a)),n.forEach(l=>{i.includes(l)||a.moveCall({target:`${s.published_at}::${Tt$1}::redeem_v2`,typeArguments:[l],arguments:[a.object(getPackagerConfigs$1(s).dividend_manager_id),a.object(e),a.object(CLOCK_ADDRESS$2)]})}),a}redeemDividendXTokenPayload(e,n){let{xtoken_dividends:i,xtoken:s}=this.sdk.sdkOptions,{xtoken_manager_id:a,lock_manager_id:l}=getPackagerConfigs$1(s),{dividend_manager_id:f}=getPackagerConfigs$1(i);return n=n===void 0?new Transaction$1:n,n.moveCall({target:`${i.published_at}::${Tt$1}::redeem_xtoken`,typeArguments:[],arguments:[n.object(l),n.object(a),n.object(f),n.object(e),n.object(CLOCK_ADDRESS$2)]}),n}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}buileXTokenCoinType(e=this._sdk.sdkOptions.xtoken.package_id,n="xtoken",i="XTOKEN"){return`${e}::${n}::${i}`}cancelRedeemPayload(e){let{xtoken:n}=this.sdk.sdkOptions,i=new Transaction$1;return i.moveCall({target:`${n.published_at}::${xe$1}::cancel_redeem_lock`,typeArguments:[],arguments:[i.object(getPackagerConfigs$1(n).lock_manager_id),i.object(getPackagerConfigs$1(n).xtoken_manager_id),i.object(e.venft_id),i.object(e.lock_id),i.object(CLOCK_ADDRESS$2)]}),i}async getInitConfigs(){var f,p;let{package_id:e}=this.sdk.sdkOptions.xtoken,n=`${e}_getInitFactoryEvent`,i=this.getCache(n);if(i!==void 0)return i;let s=(f=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:f.data,a={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};s.length>0&&s.forEach(C=>{let B=C.parsedJson;B&&(a.xtoken_manager_id=B.xtoken_manager)});let l=(p=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:p.data;return l.length>0&&l.forEach(C=>{let B=C.parsedJson;B&&(a.lock_manager_id=B.lock_manager)}),a.lock_handle_id=(await this.getLockUpManager(a.lock_manager_id)).lock_infos.lock_handle_id,this.updateCache(n,a,cacheTime24h),a}async getLockUpManager(e=getPackagerConfigs$1(this.sdk.sdkOptions.xtoken).lock_manager_id,n=!1){let i=`${e}_getLockUpManagerEvent`,s=this.getCache(i,n);if(s!==void 0)return s;let a=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),l=ce$1.buildLockUpManager(getObjectFields(a));return this.updateCache(i,l,cacheTime24h),l}async getLockInfoHandle(e){let n=`${e}_getLockInfoHandle`,i=this.getCache(n);if(i!==void 0)return i;let s="",a=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),l=getObjectFields(a);return l&&(s=l.lock_infos.fields.id.id,this.updateCache(n,s,cacheTime24h)),s}async getDividendConfigs(){var l;let{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,n=`${e}_getDividendManagerEvent`,i=this.getCache(n);if(i!==void 0)return i;let s=(l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:l.data,a={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return s.length>0&&s.forEach(f=>{let p=f.parsedJson;p&&(a.dividend_manager_id=p.manager_id,a.dividend_admin_id=p.admin_id,a.dividend_settle_id=p.settle_id,this.updateCache(n,a,cacheTime24h))}),a}async getDividendManager(e=!1){let{dividend_manager_id:n}=getPackagerConfigs$1(this.sdk.sdkOptions.xtoken_dividends),i=`${n}_getDividendManager`,s=this.getCache(i,e);if(s!==void 0)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}}),l=getObjectFields(a),f=ce$1.buildDividendManager(l);return this.updateCache(i,f,cacheTime24h),f}async getXcetusManager(e=!0){let{xtoken_manager_id:n}=getPackagerConfigs$1(this.sdk.sdkOptions.xtoken),i=`${n}_getXcetusManager`,s=this.getCache(i,e);if(s)return s;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:n,options:{showContent:!0}}),l=getObjectFields(a),f={id:l.id.id,index:Number(l.index),has_venft:{handle:l.has_venft.fields.id.id,size:l.has_venft.fields.size},nfts:{handle:l.nfts.fields.id.id,size:l.nfts.fields.size},total_locked:l.total_locked,treasury:l.treasury.fields.total_supply.fields.value};return this.updateCache(i,f),f}async getVeNFTDividendInfo(e,n){try{let i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}}),s=getObjectFields(i);return ce$1.buildVeNFTDividendInfo(s)}catch{return}}async redeemNum(e,n){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),s=d$3(U$2).mul(d$3(i.max_lock_day).sub(d$3(n))).mul(d$3(i.max_percent_numerator).sub(d$3(i.min_percent_numerator))).div(d$3(i.max_lock_day).sub(d$3(i.min_lock_day))),a=d$3(U$2).mul(d$3(i.max_percent_numerator)).sub(s).div(d$3(Be)).div(U$2);return{amountOut:d$3(a).mul(d$3(e)).round().toString(),percent:a.toString()}}async reverseRedeemNum(e,n){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};let i=await this.getLockUpManager(),s=d$3(U$2).mul(d$3(i.max_lock_day).sub(d$3(n))).mul(d$3(i.max_percent_numerator).sub(d$3(i.min_percent_numerator))).div(d$3(i.max_lock_day).sub(d$3(i.min_lock_day))),a=d$3(U$2).mul(d$3(i.max_percent_numerator)).sub(s).div(d$3(Be)).div(U$2);return{amountOut:d$3(e).div(a).toFixed(0,Decimal$1.ROUND_UP),percent:a.toString()}}async getLockXToken(e){let{lock_handle_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.xtoken),i=`${e}_getXTokenAmount`,s=this.getCache(i);if(s)return s;try{let a=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:e}}),l=getObjectFields(a);if(l){let f=l.value.fields.value.fields;return this.updateCache(i,f,cacheTime24h),f}}catch{}}async getVeNftAmount(e,n){try{let i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:n}}),s=getObjectFields(i);if(s){let{lock_amount:a,xtoken_amount:l}=s.value.fields.value.fields;return{lock_amount:a,xtoken_amount:l}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,n=!1){let i=(await this.getDividendManager()).dividends.id,s=`${i}_${e}_getPhaseDividendInfo`,a=this._sdk.getCache(s,n);if(a)return a;try{let l=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"u64",value:e}}),f=getObjectFields(l),p=f.value.fields.value.fields,C=p.redeemed_num.fields.contents.map(Ee=>({name:Ee.fields.key.fields.name,value:Ee.fields.value})),B=p.bonus_types.map(Ee=>Ee.fields.name),N=p.bonus.fields.contents.map(Ee=>({name:Ee.fields.key.fields.name,value:Ee.fields.value})),le={id:getObjectId(l),phase:f.name,settled_num:p.settled_num,register_time:p.register_time,redeemed_num:C,is_settled:p.is_settled,bonus_types:B,bonus:N,phase_end_time:""};return this.updateCache(s,le),le}catch{}}updateCache(e,n,i=cacheTime5min){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Dt=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async addMasterLiquidity(t){var ze,Ze;let{liquidity_stratefy:e}=this._sdk.sdkOptions,{clmm_pool:n}=this._sdk.ClmmSDK.sdkOptions,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),s=d$3(0),a=d$3(0),l=[],f=[],p=[],C=[],B=[];t.liquidity_bins.forEach((Qe,ct)=>{let wt=t.amounts_a[ct],qt=t.amounts_b[ct],nr=t.bins_fix_amount_a[ct];s=s.add(wt),a=a.add(qt),l.push(wt),f.push(qt),p.push(asUintN$1(BigInt(Qe.tick_lower)).toString()),C.push(asUintN$1(BigInt(Qe.tick_upper)).toString()),B.push(nr)});let N=[t.coinTypeA,t.coinTypeB],le=new Transaction$1,Ee=(ze=TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,!t.fix_amount_a,s.toString(),t.slippage,t.coinTypeA,i,!1))==null?void 0:ze.targetCoin,Ue=(Ze=TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(le,t.fix_amount_a,a.toString(),t.slippage,t.coinTypeB,i,!1))==null?void 0:Ze.targetCoin;return Fi(t)?le.moveCall({target:`${e.published_at}::router::increase_liquidity`,typeArguments:N,arguments:[le.object(getPackagerConfigs$1(e).master_manger_id),le.object(t.master_address),le.object(getPackagerConfigs$1(n).global_config_id),le.object(t.pool_address),Ee,Ue,le.makeMoveVec({elements:l.map(Qe=>le.pure.u64(Qe))}),le.makeMoveVec({elements:f.map(Qe=>le.pure.u64(Qe))}),le.makeMoveVec({elements:B.map(Qe=>le.pure.bool(Qe))}),le.object(CLOCK_ADDRESS$2)]}):le.moveCall({target:`${e.published_at}::router::create_master_liquidity`,typeArguments:N,arguments:[le.object(getPackagerConfigs$1(e).master_manger_id),le.object(getPackagerConfigs$1(n).global_config_id),le.object(t.pool_address),Ee,Ue,le.makeMoveVec({elements:p.map(Qe=>le.pure.u32(Number(Qe)))}),le.makeMoveVec({elements:C.map(Qe=>le.pure.u32(Number(Qe)))}),le.makeMoveVec({elements:l.map(Qe=>le.pure.u64(Qe))}),le.makeMoveVec({elements:f.map(Qe=>le.pure.u64(Qe))}),le.makeMoveVec({elements:B.map(Qe=>le.pure.bool(Qe))}),le.pure.u8(t.strategy),le.pure.u32(Number(asUintN$1(BigInt(t.tick_lower)).toString())),le.pure.u32(Number(asUintN$1(BigInt(t.tick_upper)).toString())),le.object(CLOCK_ADDRESS$2)]}),le}buildMasterNFTType(){return`${this._sdk.sdkOptions.liquidity_stratefy.package_id}::master_liquidity::MasterLiquidity`}async getMasterNFTList(t,e=[]){let n=[],i=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{Package:this._sdk.sdkOptions.liquidity_stratefy.package_id}}),s=e.length>0;for(let a of i.data)if(extractStructTagFromType$2(a.data.type).full_address===this.buildMasterNFTType()){let l=J$2.buildMasterNFT(a);if(l){let f=`${l.id}_masterNFT`;this.updateCache(f,l,cacheTime24h),s?e.includes(l.pool_id)&&n.push(l):n.push(l)}}return n}async getMasterNFT(t,e=!1){let n="$masterId}_masterNFT",i=this.getCache(n,e);if(i)return i;try{let s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(extractStructTagFromType$2(s.data.type).full_address===this.buildMasterNFTType()){let a=J$2.buildMasterNFT(s);return a&&this.updateCache(n,a,cacheTime24h),a}}catch(s){console.log(s)}}async fetchMasterPositionInfos(t){var l;let e={},{clmm_pool:n,integrate:i,simulationAccount:s}=this.sdk.ClmmSDK.sdkOptions,a=new Transaction$1;return t.forEach(f=>{f.position_ids.forEach(p=>{let C=[f.coinTypeA,f.coinTypeB],B=[a.object(getPackagerConfigs$1(n).global_config_id),a.object(f.pool_id),a.object(p)];a.moveCall({target:`${i.published_at}::${ClmmFetcherModule}::fetch_position_fees`,arguments:B,typeArguments:C}),a.moveCall({target:`${i.published_at}::${ClmmFetcherModule}::fetch_position_rewards`,arguments:[...B,a.object(CLOCK_ADDRESS$2)],typeArguments:C})})}),(l=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:s.address})).events)==null||l.forEach(f=>{let{parsedJson:p}=f,{position_id:C}=p,B=e[C];switch(B===void 0&&(B={position_id:C,feeOwedA:"0",feeOwedB:"0",rewarders:[]},e[C]=B),extractStructTagFromType$2(f.type).name){case"FetchPositionFeesEvent":B.feeOwedA=p.fee_owned_a,B.feeOwedB=p.fee_owned_b;break;case"FetchPositionRewardsEvent":B.rewarders=p.data;break}}),e}async getLiquidityStrategyConfigs(t=!1){let{package_id:e}=this._sdk.sdkOptions.liquidity_stratefy,n=`${e}_getLiquidityStrategyConfigst`,i=this.getCache(n,t);if(i!==void 0)return i;let s=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::master_liquidity::MasterLiquidityManagerCreatedEvent`})).data,a={master_manger_id:"",master_liquidity_handle:""};if(s.length>0){for(let l of s){let f=l.parsedJson;a.master_manger_id=f.id;let p=await this._sdk.ClmmSDK.fullClient.getObject({id:f.id,options:{showContent:!0}}),C=getObjectFields(p);a.master_liquidity_handle=C.position_maps.fields.id.id;break}this.updateCache(n,a,cacheTime24h)}return a}removeMasterLiquidity(t){let{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[t.coinTypeA,t.coinTypeB];this.collectReward({coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collect_fee:!1,rewarder_coin_types:t.rewarder_coin_types,master_address:t.master_address,pool_address:t.pool_address},i);let a=[i.object(getPackagerConfigs$1(n).master_manger_id),i.object(t.pool_address),i.object(t.master_address),i.object(getPackagerConfigs$1(e).global_config_id),i.makeMoveVec({elements:t.delta_liquidities.map(l=>i.pure.u128(l))}),i.makeMoveVec({elements:t.min_amounts_a.map(l=>i.pure.u64(l))}),i.makeMoveVec({elements:t.min_amounts_a.map(l=>i.pure.u64(l))}),i.object(CLOCK_ADDRESS$2)];return i.moveCall({target:`${n.published_at}::${st$2}::remove_liquidity`,typeArguments:s,arguments:a}),i}closeMasterLiquidity(t){let{clmm_pool:e}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:n}=this.sdk.sdkOptions,i=new Transaction$1,s=[t.coinTypeA,t.coinTypeB];return this.collectReward({coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,collect_fee:!1,rewarder_coin_types:t.rewarder_coin_types,master_address:t.master_address,pool_address:t.pool_address},i),i.moveCall({target:`${n.published_at}::${st$2}::close_master_liquidity`,typeArguments:s,arguments:[i.object(getPackagerConfigs$1(n).master_manger_id),i.object(t.master_address),i.object(getPackagerConfigs$1(e).global_config_id),i.object(t.pool_address),i.makeMoveVec({elements:t.min_amounts_a.map(a=>i.pure.u64(a))}),i.makeMoveVec({elements:t.min_amounts_a.map(a=>i.pure.u64(a))}),i.object(CLOCK_ADDRESS$2)]}),i}collectFee(t,e){let{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;e=e===void 0?new Transaction$1:e;let s=[t.coinTypeA,t.coinTypeB],a=[e.object(getPackagerConfigs$1(i).master_manger_id),e.object(t.master_address),e.object(getPackagerConfigs$1(n).global_config_id),e.object(t.pool_address)];return e.moveCall({target:`${i.published_at}::${st$2}::collect_fee`,typeArguments:s,arguments:a}),e}collectReward(t,e){let{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,{liquidity_stratefy:i}=this.sdk.sdkOptions;return e=e===void 0?new Transaction$1:e,t.collect_fee&&this.collectFee({...t},e),t.rewarder_coin_types.forEach(s=>{let a=[t.coinTypeA,t.coinTypeB,s];if(e){let l=[e.object(getPackagerConfigs$1(i).master_manger_id),e.object(t.master_address),e.object(getPackagerConfigs$1(n).global_config_id),e.object(t.pool_address),e.object(getPackagerConfigs$1(n).global_vault_id),e.object(CLOCK_ADDRESS$2)];e.moveCall({target:`${i.published_at}::${st$2}::collect_reward`,typeArguments:a,arguments:l})}}),e}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},Mt=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}buildCoinInput(t,e,n,i,s){let{selectedCoins:a,remainingCoins:l}=CoinAssist$1.selectCoinAssetGreaterThanOrEqual(e,BigInt(i)),f=CoinAssist$1.calculateTotalBalance(a);if(f<BigInt(i))throw new Error(`The amount(${f}) is Insufficient balance for ${n} , expect ${i} `);let p=f-BigInt(i),C;if(CoinAssist$1.isSuiCoin(n))C=t.splitCoins(t.gas,[t.pure.u64(i)]);else{let[B,...N]=a.map(le=>le.coinObjectId);C=t.object(B),N.length>0?s?t.mergeCoins(C,[...N.map(le=>t.object(le)),s]):t.mergeCoins(C,[...N.map(le=>t.object(le))]):s&&t.mergeCoins(C,[s])}return{selectedUnusedAmount:p,coinInput:C,remainingCoins:l}}async deposit(t){var N,le;let{vaults:e,frams:n}=this._sdk.sdkOptions,{clmm_pool:i}=this._sdk.ClmmSDK.sdkOptions,s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress()),a=new Transaction$1,l,f;if(t.swapParams){let Ee=await this.handleDepositSwap(t,a,s);l=Ee.primaryCoinAInputs,f=Ee.primaryCoinBInputs}else l=(N=TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(a,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,s,!1))==null?void 0:N.targetCoin,f=(le=TransactionUtil$1.buildAddLiquidityFixTokenCoinInput(a,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,s,!1))==null?void 0:le.targetCoin;let p=getPackagerConfigs$1(e),C=getPackagerConfigs$1(n),B=getPackagerConfigs$1(i);return a.moveCall({target:`${e.published_at}::${Mi}::deposit`,typeArguments:[t.coinTypeA,t.coinTypeB,t.lp_token_type],arguments:[a.object(p.vaults_manager_id),a.object(t.vault_id),a.object(C.rewarder_manager_id),a.object(C.global_config_id),a.object(t.farming_pool),a.object(B.global_config_id),a.object(t.clmm_pool),l,f,a.pure.u64(t.amount_a),a.pure.u64(t.amount_b),a.pure.bool(t.fix_amount_a),a.object(CLOCK_ADDRESS$2)]}),a}async handleDepositSwap(t,e,n){let{clmm_pool:i,integrate:s}=this._sdk.ClmmSDK.sdkOptions,{swap_amount:a,a2b:l,route_obj:f,stakeProtocol:p}=t.swapParams,C=l?t.coinTypeA:t.coinTypeB,B=TransactionUtil$1.buildCoinForAmount(e,n,BigInt(a),C,!1),N=BigInt(B.tragetCoinAmount)-BigInt(a),le=[];if(p){let Qe=this.requestStakeCoin(p,e,B.targetCoin),ct=TransactionUtil$1.buildCoinForAmount(e,B.remainCoins,BigInt(0),C,!1).targetCoin;le=l?[ct,Qe]:[Qe,ct]}else if(f){let Qe=TransactionUtil$1.buildCoinForAmount(e,n,0n,l?t.coinTypeB:t.coinTypeA,!1),ct=await TransactionUtil$1.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,f,B,Qe,"",t.slippage,e);le=l?[ct.fromCoin,ct.toCoin]:[ct.toCoin,ct.fromCoin],!Qe.isMintZeroCoin&&Qe.originalSplitedCoin===void 0&&e.transferObjects([Qe.targetCoin],e.pure.address(this._sdk.getVerifySenderAddress()))}else{let Qe=TransactionUtil$1.buildCoinForAmount(e,n,0n,l?t.coinTypeB:t.coinTypeA,!1),ct=SwapUtils$1.getDefaultSqrtPriceLimit(l).toString();le=e.moveCall({target:`${s.published_at}::${ClmmIntegrateRouterModule$1}::swap`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[e.object(getPackagerConfigs$1(i).global_config_id),e.object(t.clmm_pool),l?B.targetCoin:Qe.targetCoin,l?Qe.targetCoin:B.targetCoin,e.pure.bool(l),e.pure.bool(!0),e.pure.u64(a),e.pure.u128(ct),e.pure.bool(!1),e.object(CLOCK_ADDRESS$2)]})}let Ee,Ue,ze=le[0],Ze=le[1];if(l){let Qe=BigInt(t.amount_a)-N;CoinAssist$1.isSuiCoin(C)?(e.transferObjects([ze],e.pure.address(this._sdk.getVerifySenderAddress())),Ee=e.splitCoins(e.gas,[e.pure.u64(t.amount_a)])):Qe>0n?Ee=this.buildCoinInput(e,B.remainCoins,C,Qe,ze).coinInput:Ee=ze,Ue=Ze}else{Ee=ze;let Qe=BigInt(t.amount_b)-N;CoinAssist$1.isSuiCoin(C)?(e.transferObjects([Ze],e.pure.address(this._sdk.getVerifySenderAddress())),Ue=e.splitCoins(e.gas,[e.pure.u64(t.amount_b)])):Qe>0n?Ue=this.buildCoinInput(e,B.remainCoins,C,Qe,Ze).coinInput:Ue=Ze}return{primaryCoinAInputs:Ee,primaryCoinBInputs:Ue}}async remove(t){let{vaults:e,frams:n}=this.sdk.sdkOptions,{clmm_pool:i,integrate:s}=this._sdk.ClmmSDK.sdkOptions,a=new Transaction$1,l=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.getVerifySenderAddress(),t.lp_token_type),f=TransactionUtil$1.buildCoinForAmount(a,l,BigInt(t.lp_token_amount),t.lp_token_type,!1).targetCoin,p=getPackagerConfigs$1(e),C=getPackagerConfigs$1(n),B=getPackagerConfigs$1(i),N=[t.coinTypeA,t.coinTypeB,t.lp_token_type],le=a.moveCall({target:`${e.published_at}::${Ri}::remove`,typeArguments:N,arguments:[a.object(p.vaults_manager_id),a.object(t.vault_id),a.object(C.rewarder_manager_id),a.object(C.global_config_id),a.object(t.farming_pool),a.object(B.global_config_id),a.object(t.clmm_pool),f,a.pure.u64(t.lp_token_amount),a.pure.u64(t.min_amount_a),a.pure.u64(t.min_amount_b),a.object(CLOCK_ADDRESS$2)]}),Ee=le[0],Ue=le[1];if(t.swapParams){let{a2b:ze,swap_amount:Ze,route_obj:Qe}=t.swapParams;if(Qe){let ct={targetCoin:ze?Ee:Ue,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},wt={targetCoin:ze?Ue:Ee,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:""},qt=await TransactionUtil$1.buildAggregatorSwapReturnCoins(this._sdk.ClmmSDK,Qe,ct,wt,"",t.slippage,a),nr=ze?[qt.fromCoin,qt.toCoin]:[qt.toCoin,qt.fromCoin];ze?a.mergeCoins(nr[1],[Ue]):a.mergeCoins(nr[0],[Ee]),a.transferObjects([...nr],a.pure.address(this._sdk.getVerifySenderAddress()))}else{let ct=SwapUtils$1.getDefaultSqrtPriceLimit(ze).toString(),wt=a.moveCall({target:`${s.published_at}::${ClmmIntegrateRouterModule$1}::swap`,typeArguments:[t.coinTypeA,t.coinTypeB],arguments:[a.object(getPackagerConfigs$1(i).global_config_id),a.object(t.clmm_pool),Ee,Ue,a.pure.bool(ze),a.pure.bool(!0),a.pure.u64(Ze),a.pure.u128(ct),a.pure.bool(!0),a.object(CLOCK_ADDRESS$2)]});a.transferObjects([wt[0],wt[1]],a.pure.address(this._sdk.getVerifySenderAddress()))}}else a.transferObjects([Ee,Ue],a.pure.address(this._sdk.getVerifySenderAddress()));return a}async getVaultList(t="all"){let{vaults:e}=this._sdk.sdkOptions,n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e.package_id}::vaults::CreateEvent`},t),i=n.data.map(l=>l.parsedJson.id),s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),a=[];return s.forEach(l=>{let f=q$1.buildPool(l);f&&(f.stake_protocol=this.findStakeProtocol(f.position.coinTypeA,f.position.coinTypeB),this.savePoolToCache(f),a.push(f))}),n.data=a,n}findStakeProtocol(t,e){let{haedal:n,volo:i,aftermath:s}=getPackagerConfigs$1(this._sdk.sdkOptions.vaults),a=extractStructTagFromType$2(t).full_address,l=extractStructTagFromType$2(e).full_address;if(CoinAssist$1.isSuiCoin(a)||CoinAssist$1.isSuiCoin(l)){if(n){let f=extractStructTagFromType$2(getPackagerConfigs$1(n).coin_type).full_address;if(a===f||l===f)return"Haedal"}if(i){let f=extractStructTagFromType$2(getPackagerConfigs$1(i).coin_type).full_address;if(a===f||l===f)return"Volo"}if(s){let f=extractStructTagFromType$2(getPackagerConfigs$1(s).coin_type).full_address;if(a===f||l===f)return"aftermath"}}}savePoolToCache(t){let e=`${t.id}_mirrorPool`;this.updateCache(e,t,cacheTime24h)}readPoolFromCache(t,e=!1){let n=`${t}_mirrorPool`;return this.getCache(n,e)}async calculateMaxAvailable(t){var Ue;let{integrate:e,simulationAccount:n}=this.sdk.ClmmSDK.sdkOptions,i=new Transaction$1,s=TickMath$1.tickIndexToSqrtPriceX64(t.lowerTick),a=TickMath$1.tickIndexToSqrtPriceX64(t.upperTick),l=new BN(t.curSqrtPrice),f=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(t.input_amount),l,s,a,!1),p=[t.coinTypeA,t.coinTypeB];i.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::calculate_swap_result`,arguments:[i.object(t.clmm_pool),i.pure.bool(!0),i.pure.bool(!0),i.pure.u64(f.coinA.toString())],typeArguments:p}),i.moveCall({target:`${e.published_at}::${ClmmFetcherModule}::calculate_swap_result`,arguments:[i.object(t.clmm_pool),i.pure.bool(!1),i.pure.bool(!0),i.pure.u64(f.coinB.toString())],typeArguments:p});let C=(Ue=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:n.address})).events)==null?void 0:Ue.filter(ze=>extractStructTagFromType$2(ze.type).name==="CalculatedSwapResultEvent");if(C.length===0)return null;let B=C[0].parsedJson.data,N=C[1].parsedJson.data,le=d$3(f.coinB.toString()).add(B.amount_out),Ee=d$3(f.coinA.toString()).add(N.amount_out);return{maxAmountB:le,maxAmountA:Ee}}async calculateRemoveSwapAmount(t,e){let n=q$1.calculateDepositRatio(t.lowerTick,t.upperTick,new BN(t.curSqrtPrice)),i=t.fix_amount_a?n.ratioA:n.ratioB,s=d$3(t.receive_amount).mul(i),a,l;if(t.removeLiquidity){let ze=TickMath$1.tickIndexToSqrtPriceX64(t.lowerTick),Ze=TickMath$1.tickIndexToSqrtPriceX64(t.upperTick),Qe=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(t.removeLiquidity),new BN(t.curSqrtPrice),ze,Ze,!1);l=t.removeLiquidity,a=t.fix_amount_a?Qe.coinB.toString():Qe.coinA.toString(),s=t.fix_amount_a?d$3(Qe.coinA.toString()):d$3(Qe.coinB.toString())}else{let ze=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,new BN(s.toFixed(0)),t.fix_amount_a,!1,.2,new BN(t.curSqrtPrice));l=ze.liquidityAmount.toString(),a=t.fix_amount_a?ze.coinAmountB.toString():ze.coinAmountA.toString()}let f=!t.fix_amount_a,p=await this.clmmPreSwap(t.clmm_pool,t.curSqrtPrice,f,d$3(a),t.coinTypeA,t.coinTypeB,!0,t.priceSplitPoint,t.use_route,[{pool_id:t.clmm_pool,tick_lower:t.lowerTick,tick_upper:t.upperTick,delta_liquidity:Number(l),is_increase:!1}]),C=s.add(p.amount_out),B=d$3(t.receive_amount),N=B.sub(C);if((!t.removeLiquidity||t.removeLiquidity&&e)&&N.abs().greaterThan(B.mul(.01))){let ze=C.lessThan(B),Ze,Qe;e?ze?(Ze=d$3(l),Qe=e.right):(Ze=e.left,Qe=d$3(l)):(Ze=d$3(ze?l:0),Qe=d$3(ze?t.maxLiquidity:l));let ct=d$3(Ze).add(Qe).div(2).toFixed(0);if(!e||e&&e.count<15&&Ze<Qe)return await this.calculateRemoveSwapAmount({...t,removeLiquidity:ct},{left:Ze,right:Qe,count:e?e.count+1:0})}let le=p.amount_in&&p.fee_amount?new BN(p.amount_in).add(new BN(p.fee_amount)).toString():p.amount_in,Ee=p.amount_out,{is_exceed:Ue}=p;return{swapInAmount:le,swapOutAmount:Ee,liquidity:l,is_exceed:Ue,routeObj:p.route_obj,request_id:t.request_id}}async calculateStakeDepositFixSui(t){let e=t.inputSuiAmount.mul(t.remainRate),n=t.inputSuiAmount.sub(t.swapSuiAmount),i=t.exchangeRate?t.exchangeRate:await this.getExchangeRateForStake(t.stakeProtocol,t.shouldRequestStake,Number(t.swapSuiAmount.toFixed(0))),s=t.swapSuiAmount.div(i).toFixed(0),a=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,new BN(s.toString()),!t.fixCoinA,!0,0,new BN(t.curSqrtPrice)),l=t.fixCoinA?a.coinAmountA.toString():a.coinAmountB.toString(),f=d$3(n).sub(l);return f.greaterThanOrEqualTo(0)&&f.lessThanOrEqualTo(e)||t.rebalanceCount>12||t.leftSuiAmount.greaterThanOrEqualTo(t.rightSuiAmount)?{swapInAmount:t.swapSuiAmount.toFixed(0),swapOutAmount:s,afterSqrtPrice:t.curSqrtPrice,fixAmountA:!t.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:t.stakeProtocol}:f.lessThan(0)?await this.calculateStakeDepositFixSui({...t,rightSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):f.greaterThan(e)?await this.calculateStakeDepositFixSui({...t,leftSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):null}async calculateDepositSwapAmount(t,e=!1){let n=TickMath$1.sqrtPriceX64ToTickIndex(new BN(t.curSqrtPrice)),{ratioA:i,ratioB:s}=q$1.calculateDepositRatio(t.lowerTick,t.upperTick,new BN(t.curSqrtPrice)),a=d$3(t.input_amount).mul(t.fix_amount_a?i:s),l=d$3(t.input_amount).sub(a),f=t.fix_amount_a;if(l.toFixed(0)==="0")return null;if(t.stakeProtocol){if(CoinAssist$1.isSuiCoin(t.coinTypeA)&&t.fix_amount_a||CoinAssist$1.isSuiCoin(t.coinTypeB)&&!t.fix_amount_a){let nr=await this.calculateStakeDepositFixSui({inputSuiAmount:d$3(t.input_amount),swapSuiAmount:l,lowerTick:t.lowerTick,upperTick:t.upperTick,curSqrtPrice:t.curSqrtPrice,remainRate:t.remainRate?t.remainRate:.01,fixCoinA:t.fix_amount_a,rebalanceCount:0,shouldRequestStake:t.shouldRequestStake,leftSuiAmount:f?new Decimal$1(l.toFixed(0)):new Decimal$1(0),rightSuiAmount:f?new Decimal$1(t.input_amount):new Decimal$1(l.toFixed(0)),stakeProtocol:t.stakeProtocol});return nr?{...nr,request_id:t.request_id}:null}throw Error("Only support fix sui")}let p=n<t.lowerTick||n>t.upperTick,C={clmm_pool:t.clmm_pool,curSqrtPrice:t.curSqrtPrice,a2b:f,amount_a:f?new Decimal$1(t.input_amount):new Decimal$1(0),amount_b:f?new Decimal$1(0):new Decimal$1(t.input_amount),amount_left:f?new Decimal$1(l.toFixed(0)):new Decimal$1(0),amount_right:f?new Decimal$1(t.input_amount):new Decimal$1(l.toFixed(0)),lowerTick:t.lowerTick,upperTick:t.upperTick,tick_spacing:2,coinTypeA:t.coinTypeA,coinTypeB:t.coinTypeB,useRoute:t.use_route,remainRate:t.remainRate?t.remainRate:.01,priceSplitPoint:t.priceSplitPoint},B=e&&n<=t.upperTick,N=B?await this.calculateRebalance(C):await this.clmmPreSwap(t.clmm_pool,t.curSqrtPrice,f,l,t.coinTypeA,t.coinTypeB,!0,t.priceSplitPoint,t.use_route),le=N.after_sqrt_price,Ee=TickMath$1.sqrtPriceX64ToTickIndex(new BN(le)),Ue=Ee<t.lowerTick||Ee>t.upperTick;if(p!==Ue&&!B&&Ee<=t.upperTick){let{ratioA:nr,ratioB:ir}=q$1.calculateDepositRatio(t.lowerTick,t.upperTick,new BN(le));l=d$3(t.input_amount).sub(d$3(t.input_amount).mul(t.fix_amount_a?nr:ir)),C.amount_left=f?new Decimal$1(l.toFixed(0)):new Decimal$1(0),C.amount_right=f?new Decimal$1(t.input_amount):new Decimal$1(l.toFixed(0)),N=await this.calculateRebalance(C),le=N.after_sqrt_price,TickMath$1.sqrtPriceX64ToTickIndex(new BN(le))}let{ratioA:ze,ratioB:Ze}=q$1.calculateDepositRatio(t.lowerTick,t.upperTick,new BN(le)),Qe=Ze.div(ze).sub(s.div(i)).greaterThan("0"),ct=N.amount_in&&N.fee_amount?new BN(N.amount_in).add(new BN(N.fee_amount)).toString():N.amount_in,wt=N.amount_out,{is_exceed:qt}=N;if(Ee<t.lowerTick)Qe=!0;else if(Ee>t.upperTick)Qe=!1;else{let nr=Qe===f?new BN(d$3(t.input_amount).sub(ct).toString()):new BN(wt),ir=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,nr,Qe,!0,0,new BN(le)),or=ir.coinAmountA,ur=ir.coinAmountB;d$3(t.fix_amount_a?or.toString():ur.toString()).add(ct).greaterThanOrEqualTo(t.input_amount)&&(Qe=!Qe)}return{swapInAmount:ct,swapOutAmount:wt,afterSqrtPrice:le,is_exceed:qt,fixAmountA:Qe,routeObj:N.route_obj,request_id:t.request_id,use_Haedal_stake:!1}}async calculateHaedalDepositSwapAmount(t){TickMath$1.sqrtPriceX64ToTickIndex(new BN(t.curSqrtPrice));let{ratioA:e,ratioB:n}=q$1.calculateDepositRatio(t.lowerTick,t.upperTick,new BN(t.curSqrtPrice)),i=d$3(t.input_amount).mul(t.fix_amount_a?e:n),s=d$3(t.input_amount).sub(i),a=t.fix_amount_a;if(s.toFixed(0)==="0")return null;if(t.stakeProtocol){if(CoinAssist$1.isSuiCoin(t.coinTypeA)&&t.fix_amount_a||CoinAssist$1.isSuiCoin(t.coinTypeB)&&!t.fix_amount_a){let l=await this.calculateStakeDepositFixSui({inputSuiAmount:d$3(t.input_amount),swapSuiAmount:s,lowerTick:t.lowerTick,upperTick:t.upperTick,curSqrtPrice:t.curSqrtPrice,remainRate:t.remainRate?t.remainRate:.01,fixCoinA:t.fix_amount_a,rebalanceCount:0,shouldRequestStake:t.shouldRequestStake,leftSuiAmount:a?new Decimal$1(s.toFixed(0)):new Decimal$1(0),rightSuiAmount:a?new Decimal$1(t.input_amount):new Decimal$1(s.toFixed(0)),stakeProtocol:t.stakeProtocol});return l?{...l,request_id:t.request_id}:null}throw Error("Only support fix sui")}return null}async calculateRebalance(t){let{clmm_pool:e,a2b:n,curSqrtPrice:i,amount_a:s,amount_b:a,lowerTick:l,upperTick:f,amount_left:p,amount_right:C,coinTypeA:B,coinTypeB:N,useRoute:le,priceSplitPoint:Ee,remainRate:Ue}=t,ze=async(Ze,Qe,ct)=>{let wt=Ze.plus(Qe).div(2),qt=await this.clmmPreSwap(e,i,n,wt,B,N,!0,Ee,le);if(qt.amount_out==="0")return qt;if(qt.after_sqrt_price||(qt.after_sqrt_price=t.curSqrtPrice),qt.is_exceed)return Qe=wt,ze(Ze,Qe);let nr=n?s.sub(qt.amount_in):s.add(qt.amount_out),ir=n?a.add(qt.amount_out):a.sub(qt.amount_in);TickMath$1.sqrtPriceX64ToTickIndex(new BN(qt.after_sqrt_price));let or=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(l,f,new BN(nr.toString()),!0,!0,1,new BN(qt.after_sqrt_price)),ur=new Decimal$1(or.coinAmountA.toString()),hr=new Decimal$1(or.coinAmountB.toString());if(ur.toString()!==nr.toString())throw new Error("usedA does not match afterA");if(ir.lessThan(hr))n?Ze=wt:Qe=wt;else{n?Qe=wt:Ze=wt;let fr=ir.sub(hr);if(ir.mul(Ue).sub(fr).greaterThanOrEqualTo(0))return{...qt,remainingB:fr}}return Ze.greaterThan(Qe)||Qe.sub(Ze).lessThan(10)?qt:ze(Ze,Qe)};return p.greaterThanOrEqualTo(C)?ze(new Decimal$1(0),p):ze(p,C)}async clmmPreSwap(t,e,n,i,s,a,l,f,p,C){var Ze;if(p)try{let Qe=await this._sdk.ClmmSDK.RouterV2.getBestRouter(n?s:a,n?a:s,Number(i.toFixed(0)),l,f,"",void 0,void 0,!0,!1,C);if(!Qe.result)throw new Error("route unavailable");let{result:ct}=Qe,wt=e;return ct.splitPaths.forEach(qt=>{let nr=qt.basePaths.find(ir=>ir.poolAddress.toLowerCase()===t.toLowerCase());nr&&(wt=nr.afterSqrtPrice.toString())}),{amount_in:ct.inputAmount.toString(),amount_out:ct.outputAmount.toString(),after_sqrt_price:wt,is_exceed:ct.isExceed,route_obj:ct}}catch{throw new Error("route unavailable")}let{integrate:B,simulationAccount:N}=this.sdk.ClmmSDK.sdkOptions,le=new Transaction$1,Ee=[s,a],Ue=[le.object(t),le.pure.bool(n),le.pure.bool(l),le.pure.u64(i.toFixed(0))];le.moveCall({target:`${B.published_at}::${ClmmFetcherModule}::calculate_swap_result`,arguments:Ue,typeArguments:Ee});let ze=(Ze=(await this.sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:le,sender:N.address})).events)==null?void 0:Ze.filter(Qe=>extractStructTagFromType$2(Qe.type).name==="CalculatedSwapResultEvent");return ze.length===0?null:ze[0].parsedJson.data}async getVault(t,e=!1){let n=this.readPoolFromCache(t,e);if(n)return n;try{let i=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),s=q$1.buildPool(i);if(s)return s.stake_protocol=this.findStakeProtocol(s.position.coinTypeA,s.position.coinTypeB),this.savePoolToCache(s),s}catch(i){console.log(i)}}async getVaultsConfigs(t=!1){let{package_id:e}=this._sdk.sdkOptions.vaults,n=`${e}_getMirrorPoolConfigs`,i=this.getCache(n,t);if(i!==void 0)return i;let s=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::vaults::InitEvent`})).data,a={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(s.length>0){for(let l of s){let f=l.parsedJson;a.admin_cap_id=f.admin_cap_id,a.vaults_manager_id=f.manager_id;let p=await this._sdk.ClmmSDK.fullClient.getObject({id:a.vaults_manager_id,options:{showContent:!0}}),C=getObjectFields(p);a.vaults_pool_handle=C.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,a,cacheTime24h)}return a}async getExchangeRateForStake(t,e,n){return t==="Haedal"?await Ve$1.getExchangeRateForStake(this._sdk,e,n):t==="Volo"?await Xe$1.getExchangeRateForStake(this._sdk,e,n):t==="aftermath"?await We$1.getExchangeRateForStake(this._sdk,e,n):"0"}requestStakeCoin(t,e,n){if(t==="Haedal")return Ve$1.requestStakeCoin(this._sdk,e,n);if(t==="Volo")return Xe$1.requestStakeCoin(this._sdk,e,n);if(t==="aftermath")return We$1.requestStakeCoin(this._sdk,e,n)}async requestStake(t,e,n){if(t==="Haedal")return await Ve$1.requestStake(this._sdk,e,n);if(t==="Volo")return await Xe$1.requestStake(this._sdk,e,n);if(t==="aftermath")return await We$1.requestStake(this._sdk,e,n)}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},Nt=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getLimitOrderTokenList(){let{limit_order:t}=this._sdk.sdkOptions,{token_list_handle:e}=getPackagerConfigs$1(t),{fullClient:n}=this._sdk.ClmmSDK,i=(await n.getDynamicFieldsByPage(e)).data.map(s=>s.objectId);return(await n.batchGetObjects(i,{showContent:!0})).map(s=>{let{fields:a}=s.data.content;return{coin_type:extractStructTagFromType$2(a.name.fields.name).full_address,min_trade_amount:Number(a.value)}})}async getLimitOrderPoolList(){let{limit_order:t}=this._sdk.sdkOptions,{rate_orders_indexer_handle:e}=getPackagerConfigs$1(t),{fullClient:n}=this._sdk.ClmmSDK,i=(await n.getDynamicFieldsByPage(e)).data.map(s=>s.objectId);return(await n.batchGetObjects(i,{showContent:!0})).map(s=>{let{fields:a}=s.data.content.fields.value,l={pay_coin_type:extractStructTagFromType$2(a.pay_coin.fields.name).full_address,target_coin_type:extractStructTagFromType$2(a.target_coin.fields.name).full_address,indexer_id:a.indexer_id,indexer_key:a.indexer_key};return this._sdk.updateCache(`${l.pay_coin_type}_${l.target_coin_type}`,l.indexer_id),l})}async getLimitOrderPool(t,e){let{limit_order:n}=this._sdk.sdkOptions,{rate_orders_indexer_handle:i}=getPackagerConfigs$1(n),{fullClient:s}=this._sdk.ClmmSDK;try{let a=await s.getDynamicFieldObject({parentId:i,name:{type:"0x2::object::ID",value:this.buildPoolKey(fixCoinType(t,!0),fixCoinType(e,!0))}}),{fields:l}=getObjectFields(a).value,f={pay_coin_type:extractStructTagFromType$2(l.pay_coin.fields.name).full_address,target_coin_type:extractStructTagFromType$2(l.target_coin.fields.name).full_address,indexer_id:l.indexer_id,indexer_key:l.indexer_key};return this._sdk.updateCache(`${f.pay_coin_type}_${f.target_coin_type}`,f.indexer_id),f}catch(a){console.log(" ~ file: LimitOrderModule.ts:122 ~ LimitOrderModule ~ getLimitOrderPool ~ error:",a)}}async getPoolIndexerId(t,e){let n=this._sdk.getCache(`${t}_${e}`);try{if(n===void 0){let i=await this.getLimitOrderPool(t,e);if(i)return i.indexer_id}}catch{}return n}async getOwnerLimitOrderList(t,e){let{fullClient:n}=this._sdk.ClmmSDK,i={data:[],hasNextPage:!1};try{let s=await this.getUserIndexerHandle(t);if(!s)return i;let a=await n.getDynamicFieldsByPage(s,e);i.hasNextPage=a.hasNextPage,i.nextCursor=a.nextCursor;let l=a.data.map(p=>p.name.value),f=(await n.batchGetObjects(l,{showContent:!0})).map(p=>Pe$1.buildLimitOrderInfo(p)).filter(p=>p!==void 0);i.data=f}catch(s){console.log("Error in getOwnerLimitOrderList:",s)}return i}async getLimitOrderConfigs(){let{package_id:t}=this._sdk.sdkOptions.limit_order,e={rate_orders_indexer_id:"",rate_orders_indexer_handle:"",global_config_id:"",token_list_handle:"",user_orders_indexer_id:"",user_orders_indexer_handle:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::limit_order::InitEvent`})).data;if(n.length>0){let s=n[0].parsedJson;e.rate_orders_indexer_id=s.rate_orders_indexer_id,e.user_orders_indexer_id=s.user_orders_indexer_id;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e.rate_orders_indexer_id,options:{showContent:!0}});e.rate_orders_indexer_handle=getObjectFields(a).list.fields.id.id;let l=await this._sdk.ClmmSDK.fullClient.getObject({id:e.user_orders_indexer_id,options:{showContent:!0}});e.user_orders_indexer_handle=getObjectFields(l).indexer.fields.id.id}let i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitFactoryEvent`})).data;if(i.length>0){let s=i[0].parsedJson;e.global_config_id=s.global_config_id;let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e.global_config_id,options:{showContent:!0}}),l=getObjectFields(a);e.token_list_handle=l.token_white_list.fields.id.id}return e}async getLimitOrder(t){let{fullClient:e}=this._sdk.ClmmSDK;try{let n=await e.getObject({id:t,options:{showContent:!0}});return Pe$1.buildLimitOrderInfo(n)}catch(n){console.log("Error in getLimitOrder:",n);return}}async getLimitOrderLogs(t){let{fullClient:e}=this._sdk.ClmmSDK;try{let n=await e.queryTransactionBlocks({filter:{ChangedObject:t},options:{showEvents:!0}}),i=[];return n.data.forEach(s=>{i.push(...Pe$1.buildOrderLimitEvent(s,["OrderPlacedEvent","OrderCanceledEvent","FlashLoanEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}async getLimitOrderClaimLogs(t){let{fullClient:e}=this._sdk.ClmmSDK;try{let n=await e.queryTransactionBlocks({filter:{ChangedObject:t},options:{showEvents:!0}}),i=[];return n.data.forEach(s=>{i.push(...Pe$1.buildOrderLimitEvent(s,["ClaimTargetCoinEvent"]))}),i}catch(n){return console.log("Error in getLimitOrderLogs:",n),[]}}buildRateOrdersIndexerType(t){let{limit_order:e}=this._sdk.sdkOptions;return composeType$2(`${e.package_id}::limit_order::RateOrdersIndexer`,[t.pay_coin_type,t.target_coin_type])}buildPoolKey(t,e){let n=Buffer$1.from(t,"ascii"),i=Buffer$1.from(e,"ascii"),s=Buffer$1.concat([n,i]),a=blakejs.blake2b(s,void 0,32);return`0x${Buffer$1.from(a).toString("hex")}`}async placeLimitOrder(t){let{limit_order:e}=this._sdk.sdkOptions,{user_orders_indexer_id:n,global_config_id:i,rate_orders_indexer_id:s}=getPackagerConfigs$1(e),a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,t.pay_coin_type),l=new Transaction$1,f=await this.getPoolIndexerId(t.pay_coin_type,t.target_coin_type),p=TransactionUtil$1.buildCoinForAmount(l,a,BigInt(t.pay_coin_amount),t.pay_coin_type,!1,!0);return l.moveCall({target:`${e.published_at}::limit_order::${f===void 0?"create_indexer_and_place_limit_order":"place_limit_order"}`,typeArguments:[t.pay_coin_type,t.target_coin_type],arguments:[l.object(i),f===void 0?l.object(s):l.object(f),l.object(n),p.targetCoin,l.pure.u128(Pe$1.priceToRate(t.price,t.pay_decimal,t.target_decimal)),l.pure.u64(t.expired_ts),l.object(CLOCK_ADDRESS$2)]}),l}async claimTargetCoin(t){let{limit_order:e}=this._sdk.sdkOptions,{global_config_id:n}=getPackagerConfigs$1(e),i=new Transaction$1;return i.moveCall({target:`${e.published_at}::limit_order::claim_target_coin`,typeArguments:[t.pay_coin_type,t.target_coin_type],arguments:[i.object(n),i.object(t.order_id)]}),i}async cancelOrdersByOwner(t){let{limit_order:e}=this._sdk.sdkOptions,{global_config_id:n}=getPackagerConfigs$1(e),i=new Transaction$1,s={};for(let a=0;a<t.length;a++){let l=t[a],f=await this.getPoolIndexerId(l.pay_coin_type,l.target_coin_type);if(f===void 0)throw Error("not found indexerId");s[l.order_id]=f}return t.forEach(a=>{i.moveCall({target:`${e.published_at}::limit_order::cancel_order_by_owner`,typeArguments:[a.pay_coin_type,a.target_coin_type],arguments:[i.object(n),i.object(s[a.order_id]),i.object(a.order_id),i.object(CLOCK_ADDRESS$2)]})}),i}async getUserIndexerHandle(t){let{fullClient:e}=this._sdk.ClmmSDK,{limit_order:n}=this._sdk.sdkOptions,i=this.getUserIndexerHandleByCache(t);if(i===void 0){let s=new Transaction$1;s.moveCall({target:`${n.published_at}::limit_order::get_orders_indexer_by_owner`,typeArguments:[],arguments:[s.pure.address(t),s.object(getPackagerConfigs$1(n).user_orders_indexer_id)]}),i=(await e.devInspectTransactionBlock({transactionBlock:s,sender:this._sdk.ClmmSDK.sdkOptions.simulationAccount.address})).events[0].parsedJson.orders_table_id,i&&this.saveUserIndexerHandleByCache(t,i)}return i}getUserIndexerHandleByCache(t){let e=`getUserIndexerHandleByCache_${t}`;return this.getCache(e)}saveUserIndexerHandleByCache(t,e){let n=`getUserIndexerHandleByCache_${t}`;return this.updateCache(n,e)}updateCache(t,e,n=cacheTime24h){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},Bt$1=class{constructor(e){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getFramsPoolList(e="all"){let{package_id:n}=this._sdk.sdkOptions.frams,i={data:[],hasNextPage:!1};try{let s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${n}::pool::CreatePoolEvent`},e),a=s.data.map(l=>l.parsedJson.pool_id);if(i.hasNextPage=s.hasNextPage,i.nextCursor=s.nextCursor,a.length>0){let l=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showType:!0,showContent:!0});for(let f of l){let p=Le.buildFramsPool(f);p&&(p.rewarders=await this.getFramsRewarderConfig(p.clmm_pool_id,p.rewarders.map(C=>C.reward_coin)),i.data.push(p),this.updateCache(p.id,p))}}}catch(s){console.log("getFramsPoolList error ",s)}return i}async getFramsPool(e,n=!1){let i=this.getCache(e,n);if(i)return i;let s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}}),a=Le.buildFramsPool(s.data);return a&&(a.rewarders=await this.getFramsRewarderConfig(a.clmm_pool_id,a.rewarders.map(l=>l.reward_coin)),this.updateCache(a.id,a)),a}async getFramsRewarderConfig(e,n,i=!1){let{frams:s}=this._sdk.sdkOptions,a=[];for(let l of n){let f=`getFramsRewarderConfig_${l}_${e}`,p=this.getCache(f,i);if(p)a.push(p);else try{let C=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:getPackagerConfigs$1(s).rewarder_manager_handle,name:{type:"0x1::type_name::TypeName",value:removeHexPrefix(l)}}),{fields:B}=C.data.content.fields.value.fields.value,N={reward_coin:l,last_reward_time:B.last_reward_time,emission_per_second:B.emission_per_second,total_allocate_point:B.total_allocate_point,allocate_point:""},le=B.pools.fields.id.id,Ee=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:le,name:{type:"0x2::object::ID",value:e}}),{allocate_point:Ue}=Ee.data.content.fields.value.fields.value.fields;N.allocate_point=Ue,this.updateCache(f,N),a.push(N)}catch(C){console.log(C)}}return a}async getOwnedFramsPositionNFTList(e,n=[],i=!1,s="all"){let{package_id:a}=this._sdk.sdkOptions.frams,l={data:[],hasNextPage:!1},f={},p=[],C=n.length>0,B=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${a}::pool::WrappedPositionNFT`},options:{showContent:!0}},s);l.hasNextPage=B.hasNextPage,l.nextCursor=B.nextCursor;for(let N of B.data){let le=Le.buildFramsPositionNFT(N);if(le)if(C){if(n.includes(le.pool_id)){p.push(le);let Ee=f[le.pool_id];Ee?Ee.push(le):Ee=[le],f[le.pool_id]=Ee}}else p.push(le)}if(i&&p.length>0){let N=await this.calculateFarmingRewards(p.map(le=>({pool_id:le.pool_id,position_nft_id:le.id,clmm_pool_id:le.clmm_pool_id})));C?(f={},p.forEach(le=>{N[le.id]&&(le.rewards=N[le.id]);let Ee=f[le.pool_id];Ee?Ee.push(le):Ee=[le],f[le.pool_id]=Ee})):p.forEach(le=>{N[le.id]&&(le.rewards=N[le.id])})}return C?f:(l.data=p,l)}async getFramsPositionNFT(e,n=!0){let i=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),s=Le.buildFramsPositionNFT(i);if(n&&s){let a=await this.calculateFarmingRewards([{pool_id:s.pool_id,position_nft_id:s.id}]);a[s.id]&&(s.rewards=a[s.id])}return s}async calculateFarmingRewards(e){var f,p;let{frams:n}=this._sdk.sdkOptions,i=new Transaction$1,{rewarder_manager_id:s,global_config_id:a}=getPackagerConfigs$1(n);e.forEach(C=>{i.moveCall({target:`${n.published_at}::router::accumulated_position_rewards`,typeArguments:[],arguments:[i.object(a),i.object(s),i.object(C.pool_id),i.pure.address(C.position_nft_id),i.object(CLOCK_ADDRESS$2)]})});let l={};try{let C=(p=(f=await this._sdk.ClmmSDK.fullClient.devInspectTransactionBlock({transactionBlock:i,sender:this.sdk.ClmmSDK.senderAddress}))==null?void 0:f.events)==null?void 0:p.filter(B=>extractStructTagFromType$2(B.type).name==="AccumulatedPositionRewardsEvent");if(C&&C.length>0)for(let B=0;B<C.length;B+=1){let{parsedJson:N}=C[B],le=[];N.rewards.contents.forEach(Ee=>{le.push({rewarder_type:extractStructTagFromType$2(Ee.key.name).full_address,rewarder_amount:Ee.value})}),l[N.wrapped_position_id]=le}}catch(C){console.log(C)}return l}depositPayload(e,n){let{frams:i}=this.sdk.sdkOptions;n=n||new Transaction$1;let{global_config_id:s,rewarder_manager_id:a}=getPackagerConfigs$1(i);return n.moveCall({target:`${i.published_at}::router::deposit`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(e.pool_id),n.object(e.clmm_position_id),n.object(CLOCK_ADDRESS$2)]}),n}async withdrawPayload(e,n){let{frams:i}=this.sdk.sdkOptions,{global_config_id:s,rewarder_manager_id:a}=getPackagerConfigs$1(i);return n=n||new Transaction$1,n=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id},n),n.moveCall({target:`${i.published_at}::router::withdraw`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(e.pool_id),n.object(e.position_nft_id),n.object(CLOCK_ADDRESS$2)]}),n}async batchHarvestPayload(e,n){n=n||new Transaction$1;for(let i of e)await this.harvestPayload(i,n);return n}async batchHarvestAndClmmFeePayload(e,n){if(!checkInvalidSuiAddress$1(this._sdk.ClmmSDK.senderAddress))throw new Error("this config sdk senderAddress is not set right");let i=new Transaction$1,s={},a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,null);for(let C of n)this.collectClmmFeeInternal(C,s,i,a),this.collectClmmRewardInternal(C,s,i,a);let{frams:l}=this.sdk.sdkOptions,{global_config_id:f,rewarder_manager_id:p}=getPackagerConfigs$1(l);for(let C of e){let B=await this.getFramsPool(C.pool_id,!1);if(B===void 0)throw Error(`not found ${C.pool_id}`);C.collect_fee&&this.collectFeeInternal(C,s,i,a),C.clmm_rewarder_types.length>0&&await this.collectRewardInternal(C,s,i,a),C.collect_frams_rewarder&&B.rewarders.forEach(N=>{i&&i.moveCall({target:`${l.published_at}::router::harvest`,typeArguments:[N.reward_coin],arguments:[i.object(f),i.object(p),i.object(C.pool_id),i.object(C.position_nft_id),i.object(CLOCK_ADDRESS$2)]})})}return Object.keys(s).forEach(C=>{let B=s[C],{originalSplitedCoin:N}=B;(B.isMintZeroCoin||N&&(N==null?void 0:N.$kind)==="GasCoin")&&TransactionUtil$1.buildTransferCoin(this._sdk.ClmmSDK,i,B.targetCoin,C,this._sdk.ClmmSDK.senderAddress)}),i}async collectRewardInternal(e,n,i,s){let a=[];e.clmm_rewarder_types.forEach(l=>{let f=normalizeCoinType$2(l),p=n[l];p===void 0&&(p=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),f,!1),n[f]=p),a.push(p.targetCoin)}),await this.collectClmmRewardNoSendPayload(e,i)}collectFeeInternal(e,n,i,s){let{frams:a}=this.sdk.sdkOptions,{global_config_id:l}=getPackagerConfigs$1(a),{clmm_pool:f,integrate:p}=this.sdk.ClmmSDK.sdkOptions,C=getPackagerConfigs$1(f),B=normalizeCoinType$2(e.coinTypeA),N=normalizeCoinType$2(e.coinTypeB),le=n[B];le===void 0&&(le=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),B,!1),n[B]=le);let Ee=n[N];Ee===void 0&&(Ee=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),N,!1),n[N]=Ee),i.moveCall({target:`${p.published_at}::stable_farming::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[i.object(l),i.object(C.global_config_id),i.object(e.clmm_pool_id),i.object(e.position_nft_id),le.targetCoin,Ee.targetCoin]})}collectClmmRewardInternal(e,n,i,s){let a=[];e.rewarder_coin_types.forEach(l=>{let f=normalizeCoinType$2(l),p=n[l];p===void 0&&(p=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),f,!1),n[f]=p),a.push(p.targetCoin)}),this._sdk.ClmmSDK.Rewarder.createCollectRewarderNoSendPaylod(e,i,a)}collectClmmFeeInternal(e,n,i,s){if(e.collect_fee){let a=normalizeCoinType$2(e.coinTypeA),l=normalizeCoinType$2(e.coinTypeB),f=n[a];f===void 0&&(f=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),a,!1),n[a]=f);let p=n[l];p===void 0&&(p=TransactionUtil$1.buildCoinForAmount(i,s,BigInt(0),l,!1),n[l]=p),this._sdk.ClmmSDK.Position.createCollectFeeNoSendPaylod({pool_id:e.pool_id,pos_id:e.pos_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},i,f.targetCoin,p.targetCoin)}}async harvestPayload(e,n){let{frams:i}=this.sdk.sdkOptions;n=n||new Transaction$1;let s=await this.getFramsPool(e.pool_id,!1);if(s===void 0)throw Error(`not found ${e.pool_id}`);let{global_config_id:a,rewarder_manager_id:l}=getPackagerConfigs$1(i);if("collect_fee"in e&&(e.collect_fee||e.clmm_rewarder_types.length>0)){let f=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);n=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},n,f)}return s.rewarders.forEach(f=>{n&&n.moveCall({target:`${i.published_at}::router::harvest`,typeArguments:[f.reward_coin],arguments:[n.object(a),n.object(l),n.object(e.pool_id),n.object(e.position_nft_id),n.object(CLOCK_ADDRESS$2)]})}),n}async claimFeeAndClmmReward(e){let n=new Transaction$1,i=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);return await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},n,i),n}async openPositionAddLiquidityStakePaylod(e){let n=new Transaction$1,{clmm_pool:i,integrate:s}=this._sdk.ClmmSDK.sdkOptions,a=getPackagerConfigs$1(i),l=n.moveCall({target:`${i.published_at}::pool::open_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(e.clmm_pool_id),n.pure.u32(Number(asUintN$1(BigInt(e.tick_lower)).toString())),n.pure.u32(Number(asUintN$1(BigInt(e.tick_upper)).toString()))]}),f=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),p=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_a),e.coinTypeA,!1),C=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_b),e.coinTypeB,!1);n.moveCall({target:`${s.published_at}::${ClmmIntegratePoolV2Module$1}::add_liquidity_by_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(e.clmm_pool_id),l,p.targetCoin,C.targetCoin,n.pure.u64(e.amount_a.toString()),n.pure.u64(e.amount_b.toString()),n.pure.bool(e.fix_amount_a),n.object(CLOCK_ADDRESS$2)]});let{frams:B}=this.sdk.sdkOptions,{global_config_id:N,rewarder_manager_id:le}=getPackagerConfigs$1(B);return n.moveCall({target:`${B.published_at}::router::deposit`,typeArguments:[],arguments:[n.object(N),n.object(le),n.object(e.pool_id),l,n.object(CLOCK_ADDRESS$2)]}),n}async addLiquidityPayload(e,n){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions;n=n||new Transaction$1;let a=getPackagerConfigs$1(i),l=getPackagerConfigs$1(s),f=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),p=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_limit_a),e.coinTypeA,!1),C=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_limit_b),e.coinTypeB,!1);if(e.collect_rewarder&&(n=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},n)),e.collect_fee||e.clmm_rewarder_types.length>0){let B=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);n=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},n,B,p.remainCoins,C.remainCoins)}return n.moveCall({target:`${i.published_at}::router::add_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(l.global_config_id),n.object(a.rewarder_manager_id),n.object(e.pool_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),p.targetCoin,C.targetCoin,n.pure.u64(e.amount_limit_a),n.pure.u64(e.amount_limit_b),n.pure.u128(e.delta_liquidity),n.object(CLOCK_ADDRESS$2)]}),n}async addLiquidityFixCoinPayload(e,n){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions;n=n||new Transaction$1;let a=getPackagerConfigs$1(i),l=getPackagerConfigs$1(s),f=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress),p=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_a),e.coinTypeA,!1),C=TransactionUtil$1.buildCoinForAmount(n,f,BigInt(e.amount_b),e.coinTypeB,!1);if(e.collect_rewarder&&(n=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},n)),e.collect_fee||e.clmm_rewarder_types.length>0){let B=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);n=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:e.collect_fee,clmm_rewarder_types:e.clmm_rewarder_types},n,B,p.remainCoins,C.remainCoins)}return n.moveCall({target:`${i.published_at}::router::add_liquidity_fix_coin`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(l.global_config_id),n.object(a.rewarder_manager_id),n.object(e.pool_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),p.targetCoin,C.targetCoin,n.pure.u64(e.amount_a.toString()),n.pure.u64(e.amount_b.toString()),n.pure.bool(e.fix_amount_a),n.object(CLOCK_ADDRESS$2)]}),n}async removeLiquidityPayload(e,n){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions;n=n||new Transaction$1;let a=getPackagerConfigs$1(i),l=getPackagerConfigs$1(s);if(e.collect_rewarder&&(!e.unstake||e.close_position)&&(n=await this.harvestPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id,clmm_pool_id:e.clmm_pool_id},n)),e.clmm_rewarder_types.length>0){let f=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);n=await this.buildCollectRewarderAndFeeParams({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,collectFee:!1,clmm_rewarder_types:e.clmm_rewarder_types},n,f)}if(e.close_position){if(e.clmm_position_id===void 0)throw Error("close_position need clmm_position_id");n.moveCall({target:`${i.published_at}::router::close_position`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(a.rewarder_manager_id),n.object(e.pool_id),n.object(l.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),n.pure.u64(e.min_amount_a),n.pure.u64(e.min_amount_b),n.object(CLOCK_ADDRESS$2)]})}else n.moveCall({target:`${i.published_at}::router::remove_liquidity`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(l.global_config_id),n.object(a.rewarder_manager_id),n.object(e.pool_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),n.pure.u128(e.delta_liquidity),n.pure.u64(e.min_amount_a),n.pure.u64(e.min_amount_b),n.object(CLOCK_ADDRESS$2)]}),e.unstake&&this.withdrawPayload({pool_id:e.pool_id,position_nft_id:e.position_nft_id});return n}async buildCollectRewarderAndFeeParams(e,n,i,s,a){s===void 0&&(s=[...i]),a===void 0&&(a=[...i]);let l=normalizeCoinType$2(e.coinTypeA),f=normalizeCoinType$2(e.coinTypeB);e.collectFee&&this.collectFeePayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB},n);let p=[];return e.clmm_rewarder_types.forEach(C=>{switch(normalizeCoinType$2(C)){case l:p.push(TransactionUtil$1.buildCoinForAmount(n,s,BigInt(0),C,!1).targetCoin);break;case f:p.push(TransactionUtil$1.buildCoinForAmount(n,a,BigInt(0),C,!1).targetCoin);break;default:p.push(TransactionUtil$1.buildCoinForAmount(n,i,BigInt(0),C,!1).targetCoin);break}}),this.collectClmmRewardPayload({clmm_pool_id:e.clmm_pool_id,position_nft_id:e.position_nft_id,clmm_rewarder_types:e.clmm_rewarder_types,coinTypeA:e.coinTypeA,coinTypeB:e.coinTypeB,reward_coins:p},n),n}collectFeePayload(e,n){let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions;n=n||new Transaction$1;let a=getPackagerConfigs$1(i),l=getPackagerConfigs$1(s);return n.moveCall({target:`${i.published_at}::router::collect_fee`,typeArguments:[e.coinTypeA,e.coinTypeB],arguments:[n.object(a.global_config_id),n.object(l.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id)]}),n}async collectClmmRewardPayload(e,n){var p;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s}=this.sdk.ClmmSDK.sdkOptions;n=n||new Transaction$1;let a=e.reward_coins;if(e.clmm_rewarder_types.length>0&&a===void 0){a=[];let C=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(B=>{a.push(TransactionUtil$1.buildCoinForAmount(n,C,BigInt(0),B,!1).targetCoin)})}let l=getPackagerConfigs$1(i),f=getPackagerConfigs$1(s);return(p=e.clmm_rewarder_types)==null||p.forEach((C,B)=>{n&&n.moveCall({target:`${i.published_at}::router::collect_clmm_reward`,typeArguments:[C,e.coinTypeA,e.coinTypeB],arguments:[n.object(l.global_config_id),n.object(f.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),n.object(f.global_vault_id),a[B],n.object(CLOCK_ADDRESS$2)]})}),n}async collectClmmRewardNoSendPayload(e,n){var C;let{frams:i}=this.sdk.sdkOptions,{clmm_pool:s,integrate:a}=this.sdk.ClmmSDK.sdkOptions,l=e.reward_coins;if(e.clmm_rewarder_types.length>0&&l===void 0){l=[];let B=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress);e.clmm_rewarder_types.forEach(N=>{l.push(TransactionUtil$1.buildCoinForAmount(n,B,BigInt(0),N,!1).targetCoin)})}let f=getPackagerConfigs$1(i),p=getPackagerConfigs$1(s);return(C=e.clmm_rewarder_types)==null||C.forEach((B,N)=>{n&&n.moveCall({target:`${a.published_at}::stable_farming::collect_clmm_reward`,typeArguments:[B,e.coinTypeA,e.coinTypeB],arguments:[n.object(f.global_config_id),n.object(p.global_config_id),n.object(e.clmm_pool_id),n.object(e.position_nft_id),n.object(p.global_vault_id),l[N],n.object(CLOCK_ADDRESS$2)]})}),n}async getFrarmsConfigs(){let{package_id:e}=this._sdk.sdkOptions.frams,n={global_config_id:"",rewarder_manager_id:"",rewarder_manager_handle:""},i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitConfigEvent`})).data;if(i.length>0){let a=i[0].parsedJson;n.global_config_id=a.global_config_id,n.admin_cap_id=a.admin_cap_id}let s=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::rewarder::InitRewarderManagerEvent`})).data;if(s.length>0){let a=s[0].parsedJson;n.rewarder_manager_id=a.id;let l=await this._sdk.ClmmSDK.fullClient.getObject({id:n.rewarder_manager_id,options:{showContent:!0}});n.rewarder_manager_handle=l.data.content.fields.rewarders.fields.id.id}return n}updateCache(e,n,i=cacheTime24h){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},lt=class{static buildDcaOrderList(t){let{parsedJson:e}=t;if(e&&e.order_id)return{created_at:e.created_at,cycle_count:e.cycle_count,cycle_frequency:e.cycle_frequency,in_coin:extractStructTagFromType$2(e.in_coin.name).full_address,in_deposited:e.in_deposited,order_id:e.order_id,out_coin:extractStructTagFromType$2(e.out_coin.name).full_address,per_cycle_in_amount_limit:e.per_cycle_in_amount_limit,per_cycle_max_out_amount:e.per_cycle_max_out_amount,per_cycle_min_out_amount:e.per_cycle_min_out_amount}}static buildDcaGlobalConfig(t){if(t&&t.id.id)return{min_cycle_count:t.min_cycle_count,min_cycle_frequency:t.min_cycle_frequency,whitelist_mode:t.whitelist_mode}}static buildOrderHistoryList(t,e){let{events:n}=t,i=[];return n&&n.forEach(s=>{let a=extractStructTagFromType$2(s.type).name;if(e.includes(a)){let l={digest:t.digest,type:a,timestampMs:t.timestampMs,parsedJson:s.parsedJson};i.push(l)}}),i}},$t=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async dcaOpenOrderPayload(t){let{dca:e}=this._sdk.sdkOptions,{global_config_id:n,indexer_id:i}=getPackagerConfigs$1(e),s=new Transaction$1,a=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,t.in_coin_type),l=TransactionUtil$1.buildCoinForAmount(s,a,BigInt(t.in_coin_amount),t.in_coin_type,!1,!0);return s.moveCall({target:`${e.published_at}::order::open_order`,typeArguments:[t.in_coin_type,t.out_coin_type],arguments:[s.object(n),l.targetCoin,s.pure.u64(t.cycle_frequency),s.pure.u64(t.cycle_count),s.pure.u64(t.per_cycle_min_out_amount),s.pure.u64(t.per_cycle_max_out_amount),s.pure.u64(t.per_cycle_in_amount_limit),s.pure.u64(t.fee_rate),s.pure.u64(t.timestamp),s.pure.string(t.signature),s.object(CLOCK_ADDRESS$2),s.object(i)]}),s}dcaCloseOrderPayload(t){let{dca:e}=this._sdk.sdkOptions,{global_config_id:n,indexer_id:i}=getPackagerConfigs$1(e),s=new Transaction$1;return t.forEach(a=>{let l=s.moveCall({target:`${e.published_at}::order::cancle_order`,typeArguments:[a.in_coin_type,a.out_coin_type],arguments:[s.object(n),s.object(a.order_id),s.object(i),s.object(CLOCK_ADDRESS$2)]});s.transferObjects([l[0],l[1]],s.pure.address(this._sdk.getVerifySenderAddress()))}),s}async getDcaOrders(t){let e={data:[],hasNextPage:!1},{dca:n}=this._sdk.sdkOptions,{user_indexer_id:i}=getPackagerConfigs$1(n);try{let s,a=this.getCache(`${t}_dca_table_id`);if(a)s=a;else{let N=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:i,name:{type:"address",value:t}});s=getObjectFields(N).value.fields.id.id,this.updateCache(`${t}_dca_table_id`,s)}let l=null,f=50,p=[];for(;;){let N=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:s,cursor:l,limit:f});if(N.data.forEach(le=>{p.push(le.name.value)}),l=N.nextCursor,l===null||N.data.length<f)break}let C=[],B=await this._sdk.ClmmSDK.fullClient.batchGetObjects(p,{showType:!0,showContent:!0});for(let N=0;N<B.length;N++){let le=B[N],Ee=extractStructTagFromType$2(le.data.type),Ue=Ee.type_arguments[0],ze=Ee.type_arguments[1];C.push({in_coin_type:Ue,out_coin_type:ze,...le.data.content.fields,id:le.data.content.fields.id.id,version:le.data.version})}return e.data=C,e}catch{return e}}async withdraw(t){let{dca:e}=this._sdk.sdkOptions,{global_config_id:n}=getPackagerConfigs$1(e),i=new Transaction$1,s=i.moveCall({target:`${e.published_at}::order::withdraw`,typeArguments:[t.in_coin_type,t.out_coin_type],arguments:[i.object(n),i.object(t.order_id),i.object(CLOCK_ADDRESS$2)]});return i.transferObjects([s[0]],i.pure.address(this._sdk.getVerifySenderAddress())),i}async withdrawAll(t){let{dca:e}=this._sdk.sdkOptions,{global_config_id:n}=getPackagerConfigs$1(e),i=new Transaction$1;for(let s=0;s<t.length;s++){let a=i.moveCall({target:`${e.published_at}::order::withdraw`,typeArguments:[t[s].in_coin_type,t[s].out_coin_type],arguments:[i.object(n),i.object(t[s].order_id),i.object(CLOCK_ADDRESS$2)]});i.transferObjects([a[0]],i.pure.address(this._sdk.getVerifySenderAddress()))}return i}async getDcaOrdersMakeDeal(t){let e=this.getCache(`${t}_tx`),n=[],i=null,s=50;for(;;){let f=await this._sdk.ClmmSDK.fullClient.queryTransactionBlocks({filter:{ChangedObject:t},limit:s});if(f.data.forEach(p=>{n.push(p.digest)}),i=f.nextCursor,i===null||f.data.length<s)break}if(this.updateCache(`${t}_tx`,n),e&&e.length===n.length)return this.getCache(`${t}_history_list`);let a=await this._sdk.ClmmSDK.fullClient.multiGetTransactionBlocks({digests:n,options:{showInput:!0,showEffects:!0,showEvents:!0}}),l=[];return a.forEach(f=>{l.push(...lt.buildOrderHistoryList(f,["MakeDealEvent"]))}),this.updateCache(`${t}_history_list`,l),l}async getDcaCoinWhiteList(t){let{in_coin_whitelist_id:e,out_coin_whitelist_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.dca),i=[],s=[];if(t===1||t===3){let a=null,l=50;for(;;){let f=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:e,cursor:a,limit:l});if(f.data.forEach(p=>{i.push(extractStructTagFromType$2(p.name.value.name).full_address)}),a=f.nextCursor,a===null||f.data.length<l)break}}if(t===2||t===3){let a=null,l=50;for(;;){let f=await this._sdk.ClmmSDK.fullClient.getDynamicFields({parentId:n,cursor:a,limit:l});if(f.data.forEach(p=>{s.push(extractStructTagFromType$2(p.name.value.name).full_address)}),a=f.nextCursor,a===null||f.data.length<l)break}}return{inCoinList:i,outCoinList:s}}async getDcaGlobalConfig(){let{global_config_id:t}=getPackagerConfigs$1(this._sdk.sdkOptions.dca),e=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});return lt.buildDcaGlobalConfig(e.data.content.fields)}async getDcaConfigs(){var s;let{package_id:t}=this._sdk.sdkOptions.dca,e={admin_cap_id:"",global_config_id:"",indexer_id:"",user_indexer_id:"",in_coin_whitelist_id:"",out_coin_whitelist_id:""},n=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::config::InitEvent`})).data,i=(await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t}::order::InitEvent`})).data;if(n&&n.length>0){let{parsedJson:a}=n[0];e.admin_cap_id=a.admin_cap_id,e.global_config_id=a.global_config_id}if(i&&i.length>0){let{parsedJson:a}=i[0];e.indexer_id=a.indexer_id;let l=await this._sdk.ClmmSDK.fullClient.getObject({id:a.indexer_id,options:{showType:!0,showContent:!0}});e.user_indexer_id=(s=l.data)==null?void 0:s.content.fields.user_orders.fields.id.id}if(e.global_config_id){let a=await this._sdk.ClmmSDK.fullClient.getObject({id:e.global_config_id,options:{showType:!0,showContent:!0}});e.in_coin_whitelist_id=a.data.content.fields.in_coin_whitelist.fields.id.id,e.out_coin_whitelist_id=a.data.content.fields.out_coin_whitelist.fields.id.id}return e}updateCache(t,e,n=cacheTime24h){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},ve$1=class{constructor(e,n){Or(this,"_cache",{});Or(this,"_sdkOptions");Or(this,"_launchpad");Or(this,"_ido");Or(this,"_xcetusModule");Or(this,"_xtokenModule");Or(this,"_boosterModule");Or(this,"_makerModule");Or(this,"_clmmSDK");Or(this,"_liquidityStrategy");Or(this,"_vaults");Or(this,"_limitOrder");Or(this,"_farmsModule");Or(this,"_dcaModule");this._sdkOptions=e;let i=e.env||"mainnet";this._clmmSDK=n||initCetusSDK({network:i,fullNodeUrl:e.fullRpcUrl}),this._launchpad=new ft$2(this),this._ido=new Ot$1(this),this._xcetusModule=new Ct$2(this),this._xtokenModule=new At$1(this),this._boosterModule=new mt$1(this),this._makerModule=new ht$1(this),this._vaults=new Mt(this),this._limitOrder=new Nt(this),this._farmsModule=new Bt$1(this),this._dcaModule=new $t(this),this._liquidityStrategy=new Dt(this),patchFixSuiObjectId(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}get LiquidityStrategy(){return this._liquidityStrategy}get Vaults(){return this._vaults}get LimitOrder(){return this._limitOrder}get Farms(){return this._farmsModule}get Dca(){return this._dcaModule}set senderAddress(e){this.ClmmSDK.senderAddress=e}getVerifySenderAddress(){let{senderAddress:e}=this.ClmmSDK;if(e.length===0||!isValidSuiAddress$2(e))throw Error("this clmm config sdk senderAddess is illegal");return e}updateCache(e,n,i=cacheTime24h){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e];if(!n&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},oe$1={launchpadConfig:{pools_id:"0xfd8d37f7a1276878972d240302c8efe32f577220c1bbc6c8984d8b60dddfcab3",admin_cap_id:"0x66c70d58c69353714cc6fe2d3a62492d605a96a9821e2bd8274de17219c69980",config_cap_id:"0x02b8d23f033687579966e182c776fe0287cacdbb18bff56c29f141e29a18a4d1"},idoConfig:{pools_id:"0xefc209b47acf1f23b29d166440904600229e520ad36228aaf2329b7c16be9762",admin_cap_id:"0x281859d366951830aeeda90779aa170d8ee6845875545470d33ecb890e78c8ce",package_version_id:"0xc93dc996106770af5f4e979b6808518f8cee080f22f35b936f071f59d834bb22"},xcetusConfig:{xcetus_manager_id:"0x838b3dbade12b1e602efcaf8c8b818fae643e43176462bf14fd196afa59d1d9d",lock_manager_id:"0x288b59d9dedb51d0bb6cb5e13bfb30885ecf44f8c9076b6f5221c5ef6644fd28",lock_handle_id:"0x7c534bb7b8a2cc21538d0dbedd2437cc64f47106cb4c259b9ff921b5c3cb1a49"},xcetusDividendsConfig:{dividend_manager_id:"0x721c990bfc031d074341c6059a113a59c1febfbd2faeb62d49dcead8408fa6b5",dividend_admin_id:"0x682ba823134f156eac2bcfb27d85a284954a0e61998dc628c40b9bcb4a46ff30",dividend_settle_id:"0xade40abe9f6dd10b83b11085be18f07b63b681cf1c169b041fa16854403388c5",venft_dividends_id:"0x9dcdb97b4307684bedaeaf803d381b12321a31ecbb9dad7df2cd5f64384f9456",venft_dividends_id_v2:"0xaa21fbc1707786d56302952f8327362f4eb9a431a5bc574834e6d46125390de3"},xtokenConfig:{xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""},xtokenDividendsConfig:{dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""},boosterConfig:{booster_config_id:"",booster_pool_handle:""},makerBonusConfig:{maker_config_id:"",maker_pool_handle:""},vaultConfig:{admin_cap_id:"0xf213ff94ccda65ff3847c7f6ee26bc593629a5a1b210d30c8dfe6abdfe038b14",vaults_manager_id:"0xb1e6aeb556965eb05e2464e36e4f19cc67dca34023c2aa72187c5813d4475689",vaults_pool_handle:"0x7ba5434152bd9a3794830cf2748e73c03df37b203cfe42f59b1aa62676510b4a",haedal:{package_id:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d",published_at:"0x1d56b8ec33c3fae897eb7bb1acb79914e8152faed614868928e684c25c8b198d",version:1,config:{staking_id:"0x47b224762220393057ebf4f70501b6e657c3e56684737568439a04f80849b2ca",coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"}},volo:{package_id:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",published_at:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55",version:1,config:{native_pool:"0x7fa2faa111b8c65bea48a23049bfd81ca8f971a262d981dcd9a17c3825cb5baf",vsui_metadata:"0x680cd26af32b2bde8d3361e804c53ec1d1cfe24c7f039eb7f549e8dfde389a60",coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"}},aftermath:{package_id:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",published_at:"0x7f6ce7ade63857c4fd16ef7783fed2dfc4d7fb7e40615abdb653030b76aef0c6",version:1,config:{staked_sui_vault:"0x2f8f6d5da7f13ea37daa397724280483ed062769813b6f31e9788e59cc88994d",referral_vault:"0x4ce9a19b594599536c53edb25d22532f82f18038dc8ef618afd00fbbfb9845ef",safe:"0xeb685899830dd5837b47007809c76d91a098d52aabbf61e8ac467c59e5cc4610",validator_address:"0xd30018ec3f5ff1a3c75656abf927a87d7f0529e6dc89c7ddd1bd27ecb05e3db2",coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"}}},limitOrderConfig:{rate_orders_indexer_id:"0xe7fa62b6fc095ed5659b85c735f4322059e1f4616dcf3343adece6e7eb52bf47",rate_orders_indexer_handle:"0x81a95c812cab1c9cc7a1c10446d93d2d9517097211c72b544f7efed33b540bcc",global_config_id:"0xd3403f23a053b52e5c4ef0c2a8be316120c435ec338f2596647b6befd569fd9c",token_list_handle:"0x644a7f05eff2a1b4c266d7ce849c8494fb068a4e29037c7c523e5eb822389d8d",user_orders_indexer_id:"0x7f851ac19e438f97e78a5335eed4f12766a3a0ae94340bab7956a402f0e6212e",user_orders_indexer_handle:"0x84703679acd2eeaee8de4945be79d029ab94966bc22e0f6cfd696032fd31bbc7"},framsConfig:{global_config_id:"0x21215f2f6de04b57dd87d9be7bb4e15499aec935e36078e2488f36436d64996e",rewarder_manager_id:"0xe0e155a88c77025056da08db5b1701a91b79edb6167462f768e387c3ed6614d5",rewarder_manager_handle:"0xb32e312cbb3367d6f3d2b4e57c9225e903d29b7b9f612dae2ddf75bdeb26a5aa",admin_cap_id:"0xf10fbf1fea5b7aeaa524b87769461a28c5c977613046360093673991f26d886c"},dcaConfig:{admin_cap_id:"0xbcdd7391245dd8d6118a39bc83e6d9a7cfca899d06cc283c1a4cae41b2508574",global_config_id:"0x5db218756f8486fa2ac26fab590c4be4e439be54e6d932c9a30b20573a5b706a",indexer_id:"0x713f0968d042b48f4ec57e4e21bd7e346d06355f59776faedc9497ca990a9f77",user_indexer_id:"0x0ae365f60f2fa692831f9496c9e49b2440c74f14e8eab6f88dbb418c443b5020",in_coin_whitelist_id:"0x845643253afdfef9c4202e7af5e2de374b7f4766f78694903e8b2c0f83dab3ce",out_coin_whitelist_id:"0xe398b24a2b28f1ffd18394eaa78538d6ec8111dcb5fd919424bd3d42764c19f7"}},xo={env:"mainnet",fullRpcUrl:"https://fullnode.mainnet.sui.io",launchpad:{package_id:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",published_at:"0x80d114c5d474eabc2eb2fcd1a0903f1eb5b5096a8dc4184d72453f7a9be728e4",config:oe$1.launchpadConfig},ido:{package_id:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",published_at:"0x1192c9e20b4b0a8848a73a8c711b43e38f7ea1f307b556aab6ffab4e982e9c59",config:oe$1.idoConfig},xcetus:{package_id:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",published_at:"0x9e69acc50ca03bc943c4f7c5304c2a6002d507b51c11913b247159c60422c606",config:oe$1.xcetusConfig},xcetus_dividends:{package_id:"0x785248249ac457dfd378bdc6d2fbbfec9d1daf65e9d728b820eb4888c8da2c10",published_at:"0x5aa58e1623885bd93de2331d05c29bf4930e54e56beeabcab8fe5385de2d31dc",version:4,config:oe$1.xcetusDividendsConfig},cetus_faucet:{package_id:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b",published_at:"0x6864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b"},xtoken:{package_id:"",published_at:"",config:oe$1.xtokenConfig},xtoken_dividends:{package_id:"",published_at:"",config:oe$1.xtokenDividendsConfig},token_faucet:{package_id:"",published_at:""},booster:{package_id:"",published_at:"",config:oe$1.boosterConfig},maker_bonus:{package_id:"",published_at:"",config:oe$1.makerBonusConfig},liquidity_stratefy:{package_id:"",published_at:"",version:void 0,config:void 0},vaults:{package_id:"0x60ee1c0627b8bbe6f3179d5484ab629e16531fb793fe38070ab2f4149105a74c",published_at:"0x60ee1c0627b8bbe6f3179d5484ab629e16531fb793fe38070ab2f4149105a74c",version:1,config:oe$1.vaultConfig},limit_order:{package_id:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",published_at:"0x533fab9a116080e2cb1c87f1832c1bf4231ab4c32318ced041e75cc28604bba9",version:1,config:oe$1.limitOrderConfig},frams:{package_id:"0x11ea791d82b5742cc8cab0bf7946035c97d9001d7c3803a93f119753da66f526",published_at:"0x585381670c3d7c1f78caeb6c803f449442659743f4047a01b942da08bbfa19f6",version:1,config:oe$1.framsConfig},dca:{package_id:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",published_at:"0x587614620d0d30aed66d86ffd3ba385a661a86aa573a4d579017068f561c6d8f",version:1,config:oe$1.dcaConfig}};function Do(t){return t&&(xo.fullRpcUrl=t),new ve$1(xo)}var Z$3={launchpadConfig:{pools_id:"0xccc10403ab3da4ae943847908e0e674fe1fdab81c6383e4c6dcd0eea0edade3d",admin_cap_id:"0x8a72713049dbcfc40902ff209dc5e6066fe455d152baa235957c84d7a3b875ed",config_cap_id:"0x16492b4252b01debb60f8a825334020d7fdb9d895b52f8139c98618de30817fc",config_pools_id:"0x3b8a3b1fb77e7b21d1f6b6b3afbe083a35621fd8a0fcf40e87cee5c0ef0c51e0"},idoConfig:{pools_id:"0x9c20f0b805f5e25dd33361b06106b52b846d11bae25d13abfbc0b59f254dbe35",admin_cap_id:"0xcb0a5794a1238ba0df101b0033b93735ffed5df09dd9f3251ad73d31ddd080a5",package_version_id:"0x8572dc3980bcd8c0043a65d79dadd69b37aeb372ad6125ba34606b7349a3a13f"},xcetusConfig:{xcetus_manager_id:"0x3be34cbad122c8b100ed7157d762b9610e68b3c65734e08bc3c3baf857da807d",lock_manager_id:"0x7c67e805182e3fecd098bd68a6b06c317f28f8c6249bd771e07904a10b424e60",lock_handle_id:"0xc5f3bbfefe9a45c13da7a34bc72cac122ee45d633690476a8ac56bd2c4e78c86"},xcetusDividendsConfig:{dividend_manager_id:"0x9d1be1a6b1146b30448a266bc87127466c0bae1585750c42adffce3e25e1ab6d",dividend_admin_id:"0x36d63c1a588bd93775aff8f47538a0063960564f0a171d100a9f49526a872b92",dividend_settle_id:"0x9eb78595419560b1dcaa9fb0ca307921ab1664a5f63c877c6887ab696344b400",venft_dividends_id:"0xc31a85fa5a77fc1def0dc5b2aadc5317a9d744ffda24b472e56a646711770676",venft_dividends_id_v2:"0x53b24031120730f6e4a733526147917650b1ecd3c56b43164b69eaa74f9b9ff7"},xtokenConfig:{xtoken_manager_id:"0x55c31788940b720721ab9f96b87c6d8a37437b79561cdc5adeda10dd37d292eb",lock_manager_id:"0xafae084f60b5f4f93fbac31882cfbde24a7b80c4c48d4f9ae7134959ac3198bd",lock_handle_id:"0x3d15e12c76a0dd39909a5f4571a17cfc4e2646f8c8188e2ece1f72c3c01eff0b"},xtokenDividendsConfig:{dividend_manager_id:"0x50e23ce7d8cff4c4d9761e8776351ccbec678273e72175c5cf5b8c5a0f03c328",dividend_admin_id:"0x9723e05490b204f4cd4e3b03029309a191bf8bae5bdeb72f3e21bfb64f4ee65b",dividend_settle_id:"0x7ac98cd67c86692dfcf6f52c7cac113572ad3b774a6debd0899612756ec1801c",venft_dividends_manager_id:""},boosterConfig:{booster_config_id:"0xeba41bf99086b0140713d7dd102e1374281a608bf524cc38f62c1d2bd792715c",booster_pool_handle:"0x01f9ba86234f661157366b8393eaeba82c8b78bf40fd9728604c3cc142811629"},liquidityStrategyConfig:{master_manger_id:"0x562f2c9a90ffc3cdbe492b8cedb2e911954c81e8d20b47c4d2b0b2782bd7cad2",master_liquidity_handle:"0x323179fcd8fc2c01f146a902aaec56221e791fb0f1965907c97b25cba5eac515"},vaultConfig:{admin_cap_id:"0x9b2d6f5be2650d16d27cd630c4539a76d7793970343ed3cbb023e13f1637c07c",vaults_manager_id:"0xc0a1a937df08880e395d85014ff40c74f13abe7a53abdbffea36f51adaaaf79e",vaults_pool_handle:"0x3ab02203de753de9c8198cc0ce7594dc960878f2c34c5c5a4b7742082241860a",haedal:{package_id:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472",published_at:"0x9dac9c5770e5f930d2223ff68782958701acfaee9337e8d8363978ce7670dffb",version:1,config:{staking_id:"0x6e384d2da5b040b27f973155e25bbe4beb0ad5ca8ee0a36e20dff356094c9fc0",coin_type:"0xac2afb455cbcdc2ff1a2e9bbb8aa4ccb4506a544b08c740886892a5cdf92f472::hasui::HASUI"}},volo:{package_id:"",published_at:"",version:1,config:{native_pool:"",vsui_metadata:"",coin_type:"::cert::CERT"}},aftermath:{package_id:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",published_at:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4",version:1,config:{staked_sui_vault:"0xe498a8c07ec62200c519a0092eda233abdab879e8f332c11bdc1819eb7b12fbb",referral_vault:"0x8d357115058f22976cd01c5415116d9aca806d1ded37eecd75d87978f404e927",safe:"0x38710a6e0bd885c158e52ec7a42c8a9a1826c6696b626b4a5e2d1dcb15cfd9b7",validator_address:"0x9336c4c9d891e263cfac99adc397853a7392e5cf84cbd5df92207a57c7fbdadc",coin_type:"0x5e8c0fc2b3d8aa1b06eec36c08d9d835c73c0626a1efaebc0fb03aa52f1a3ff4::afsui::AFSUI"}}},limitOrderConfig:{rate_orders_indexer_id:"0xeaa7dc3a4b70c14b434aed2cef0bdd272a781c630ea3c54c25fa53c72fb3cf96",rate_orders_indexer_handle:"0x62eea7ce7be125e6b43fac6158d0ac8a6b0f263446d4631ad5a3629d82fef2ed",global_config_id:"0xd4d98f126233057b3a01f17adfb5bc77d7bdb0332fe982ab44c6c7a2f66443dc",token_list_handle:"0x81233cdf2165f013a57c3ab180b079e0f411483ba7f80dd6fbcb74426d2045f9",user_orders_indexer_id:"0x18ff28ae25ea50c703a0dfcc49653cc7dd7035207e26c8f86fa9e4aea49037d0",user_orders_indexer_handle:"0xbe3301b85fb0fc99deacb68c31d971837ae23a65c38680cf79a6b8562518b4c7"},framsConfig:{global_config_id:"0x499132a4baf342a0fe9528a3666a77b2aece3be129f4a3ada469fef4b9c34fb4",rewarder_manager_id:"0x960c7800e301fd1e47b79037927b426db57b643bd2934f7069d81c2dae092230",rewarder_manager_handle:"0x1274149371876b60742cd02071a09f2aa72ffee75b76fdfc45724d98f18ea5b5",admin_cap_id:"0x110175e641c1ea8f9287f4fd59cb6a1fb97a3f3ec595aa30d0e6ed93ac4caa0c"},dcaConfig:{admin_cap_id:"0xf54334a5cf41874d151cc610f7575f2b9ca8aab32103be3ed87f07f73388dcf2",global_config_id:"0xdac150723df0b51c1407ea942036d7f9d4e3b064ff35a4136dd31ffb397497e0",indexer_id:"0xacd0ab94883a8785c5258388618b6252f0c2e9384b23f91fc23f6c8ef44d445c",user_indexer_id:"0xc4ca05342746468383922650a3137bd3efc49d4c7a37431ed11a94c08dbfb677",in_coin_whitelist_id:"0xe72cdb8a0777bbcb5105b7045b90f5fdc8c7b946d48fd4cec0607d201a45a9b7",out_coin_whitelist_id:"0xbe67538ca0e4683fef704b374d034f5a4f79cdc756ea47cec82df55b37d4ff0a"},makerBonusConfig:{maker_config_id:"",maker_pool_handle:""}},Lo={env:"testnet",fullRpcUrl:"https://fullnode.testnet.sui.io",launchpad:{package_id:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",published_at:"0x3beee8416089a5cbff9cfd5c0a2ce2937b0452dc7e2a3ab4dc431c7be05c2335",config:Z$3.launchpadConfig},ido:{package_id:"0xa071153ae753b1ec2459bad2bcfcd9329d9e6e4a32acc6b2f488eef79c622121",published_at:"0x80fe8d97e17c7200e11277a41d2977926aefb4f5bb23f2304803e23af0fc69e6",config:Z$3.idoConfig},xcetus:{package_id:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",published_at:"0xdebaab6b851fd3414c0a62dbdf8eb752d6b0d31f5cfce5e38541bc6c6daa8966",version:1,config:Z$3.xcetusConfig},xcetus_dividends:{package_id:"0x4061e279415a3c45cfd31554d38c5b3bb0e06c65833811a98a66f469e04c69c3",published_at:"0xfeda040996e722ba532ab2203d13333484024456ca38bf4adeb526ce1457332d",version:1,config:Z$3.xcetusDividendsConfig},cetus_faucet:{package_id:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7",published_at:"0x1a69aee6be709054750949959a67aedbb4200583b39586d5e3eabe57f40012c7"},xtoken:{package_id:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91",published_at:"0x04792c459e2c20d1d48c85ab2eed98ef115d5b3e36ccf6ce8d0d3c79ca548c91",version:1,config:Z$3.xtokenConfig},xtoken_dividends:{package_id:"0x8c98600371ec4db052f39a2ec0e2cbfe146b2abf45ae9a24ff52853a55d7b201",published_at:"0x8c98600371ec4db052f39a2ec0e2cbfe146b2abf45ae9a24ff52853a55d7b201",version:1,config:Z$3.xtokenDividendsConfig},token_faucet:{package_id:"0xe994bc5944035e714764245eab89d6fa5aa3f51445b62449ba60542bff554bb1",published_at:"0xe994bc5944035e714764245eab89d6fa5aa3f51445b62449ba60542bff554bb1"},booster:{package_id:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",published_at:"0xffa4c477b7d991a05ebd4e8cb635d05d8bec129799ddd6407068cfefa8913870",config:Z$3.boosterConfig},maker_bonus:{package_id:"",published_at:"",config:Z$3.makerBonusConfig},liquidity_stratefy:{package_id:"0x9b894cff0422a6acc41dadab3c8e2f52da7b5f0b366821a80d62eaf650565c3f",published_at:"0xc76c30d0a7b3e0a4372b6e7f24d73ef4d7740eaf920789e658795502c2fd252a",version:3,config:Z$3.liquidityStrategyConfig},vaults:{package_id:"0x25cff94bdb454bae6a5565d09047bfe2b230025ef3bd2199622ec48d854b86b9",published_at:"0xcbb2e08e148db4b49c0c2f8eb54be250f4ec45881694347041df02688157c998",version:1,config:Z$3.vaultConfig},limit_order:{package_id:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",published_at:"0xc65bc51d2bc2fdbce8c701f8d812da80fb37dba9cdf97ce38f60ab18c5202b17",version:1,config:Z$3.limitOrderConfig},frams:{package_id:"0xcc38686ca84d1dca949b6966dcdb66b698b58a4bba247d8db4d6a3a1dbeca26e",published_at:"0xcc38686ca84d1dca949b6966dcdb66b698b58a4bba247d8db4d6a3a1dbeca26e",version:1,config:Z$3.framsConfig},dca:{package_id:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",published_at:"0x484d2be08b58b8dc00a08c0ff8a2a9cd0542c4249ea2d5934ef9b15a10585d88",version:1,config:Z$3.dcaConfig}};function Fo(t){return t&&(Lo.fullRpcUrl=t),new ve$1(Lo)}function S_(t){let{env:e,fullNodeUrl:n}=t;return e==="mainnet"?Do(n):Fo(n)}var F_=ve$1,b$1="router",D="router",O$1=24*3600,I$1=1e3,k=1e11,_={min_lock_day:15,max_lock_day:180,max_percent_numerator:1e3,min_percent_numerator:500},m=class{static buildVeNFTDividendInfo(t){let e={id:t.id.id,ve_nft_id:t.name,rewards:[]};return t.value.fields.value.fields.dividends.fields.contents.forEach(n=>{let i=[];n.fields.value.fields.contents.forEach(s=>{let a=s.fields.value;d$3(a).gt(0)&&i.push({coin_type:extractStructTagFromType$2(s.fields.key.fields.name).source_address,amount:a})}),i.length>0&&e.rewards.push({period:Number(n.fields.key),rewards:i,vesrion:"v1"})}),e}static buildDividendManager(t){let e={id:t.id.id,dividends:{id:t.dividends.fields.id.id,size:t.dividends.fields.size},venft_dividends:{id:t.venft_dividends.fields.id.id,size:t.venft_dividends.fields.size},bonus_types:[],start_time:Number(t.start_time),interval_day:Number(t.interval_day),balances:{id:t.balances.fields.id.id,size:t.balances.fields.size},is_open:t.is_open};return t.bonus_types.forEach(n=>{e.bonus_types.push(extractStructTagFromType$2(n.fields.name).source_address)}),e}static buildLockUpManager(t){return{id:t.id.id,balance:t.balance,treasury_manager:t.treasury_manager,extra_treasury:t.extra_treasury,lock_infos:{lock_handle_id:t.lock_infos.fields.id.id,size:Number(t.lock_infos.fields.size)},type_name:normalizeCoinType$2(t.type_name.fields.name),min_lock_day:Number(t.min_lock_day),max_lock_day:Number(t.max_lock_day),package_version:Number(t.package_version),max_percent_numerator:Number(t.max_percent_numerator),min_percent_numerator:Number(t.min_percent_numerator)}}static buildLockCetus(t){let e=t.fields,n={id:e.id.id,type:extractStructTagFromType$2(t.type).source_address,locked_start_time:Number(e.locked_start_time),locked_until_time:Number(e.locked_until_time),cetus_amount:e.balance,xcetus_amount:"0",lock_day:0};return n.lock_day=(n.locked_until_time-n.locked_start_time)/O$1,n}static getAvailableXCetus(t,e){let n=d$3(0);return e.forEach(i=>{n=n.add(i.xcetus_amount)}),d$3(t.xcetus_balance).sub(n).toString()}static getWaitUnLockCetuss(t){return t.filter(e=>!m.isLocked(e))}static getLockingCetuss(t){return t.filter(e=>m.isLocked(e))}static isLocked(t){return t.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(t,e){let n=new Set;return t==null||t.forEach(i=>{i.rewards.forEach(s=>{n.add(s.coin_type)})}),e==null||e.forEach(i=>{i.rewards.forEach(s=>{n.add(s.coin_type)})}),Array.from(n)}static buildDividendRewardTypeListV2(t){let e={};return t==null||t.forEach(n=>{n.vesrion==="v2"&&n.rewards.forEach(i=>{e[i.coin_type]||(e[i.coin_type]=[]),e[i.coin_type].push(n.period)})}),e}static getNextStartTime(t){let e=Date.now()/1e3,{start_time:n,interval_day:i}=t,s=Math.ceil((e-n)/(i*O$1));return n+s*i*O$1}},w=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getOwnerVeNFT(t,e=!0){let{xcetus:n}=this.sdk.sdkOptions,i=`${t}_getLockUpManagerEvent`,s=this.getCache(i,e);if(s!==void 0)return s;let a,l=`${n.package_id}::xcetus::VeNFT`;return(await this._sdk.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:l}})).data.forEach(f=>{let p=extractStructTagFromType$2(getMoveObjectType(f)).source_address;if(p===l&&f.data&&f.data.content){let{fields:C}=f.data.content;a={...buildNFT(f),id:C.id.id,index:C.index,type:p,xcetus_balance:C.xcetus_balance},this.updateCache(i,a,cacheTime24h)}}),a}async getOwnerRedeemLockList(t){let{xcetus:e}=this.sdk.sdkOptions,n=[],i=`${e.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,s=await this._sdk.fullClient.getOwnedObjectsByPage(t,{options:{showType:!0,showContent:!0},filter:{StructType:i}});for(let a of s.data)if(extractStructTagFromType$2(getMoveObjectType(a)).source_address===i&&a.data){let l=m.buildLockCetus(a.data.content);l.xcetus_amount=await this.getXCetusAmount(l.id),n.push(l)}return n}async getLockCetus(t){var n;let e=await this._sdk.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if((n=e.data)!=null&&n.content){let i=m.buildLockCetus(e.data.content);return i.xcetus_amount=await this.getXCetusAmount(i.id),i}}async getOwnerCetusCoins(t){return await this._sdk.getOwnerCoinAssets(t,this.buileCetusCoinType())}mintVeNFTPayload(){let{xcetus:t}=this.sdk.sdkOptions,e=new Transaction$1;return e.moveCall({target:`${t.published_at}::${b$1}::mint_venft`,typeArguments:[],arguments:[e.object(getPackagerConfigs$1(t).xcetus_manager_id)]}),e}convertPayload(t,e){let{xcetus:n}=this.sdk.sdkOptions;e=e||new Transaction$1;let i=this.buileCetusCoinType();if(this._sdk.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");e.setSender(this._sdk.senderAddress);let s=TransactionUtil$1.buildCoinWithBalance(BigInt(t.amount),i);return t.venft_id===void 0?e.moveCall({target:`${n.published_at}::${b$1}::mint_and_convert`,typeArguments:[],arguments:[e.object(getPackagerConfigs$1(n).lock_manager_id),e.object(getPackagerConfigs$1(n).xcetus_manager_id),e.makeMoveVec({elements:[s]}),e.pure.u64(t.amount)]}):e.moveCall({target:`${n.published_at}::${b$1}::convert`,typeArguments:[],arguments:[e.object(getPackagerConfigs$1(n).lock_manager_id),e.object(getPackagerConfigs$1(n).xcetus_manager_id),e.makeMoveVec({elements:[s]}),e.pure.u64(t.amount),e.object(t.venft_id)]}),e}redeemLockPayload(t){let{xcetus:e}=this.sdk.sdkOptions,n=new Transaction$1;return n.moveCall({target:`${e.published_at}::${b$1}::redeem_lock`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(e).lock_manager_id),n.object(getPackagerConfigs$1(e).xcetus_manager_id),n.object(t.venft_id),n.pure.u64(t.amount),n.pure.u64(t.lock_day),n.object(CLOCK_ADDRESS$2)]}),n}redeemPayload(t){let{xcetus:e}=this.sdk.sdkOptions,n=new Transaction$1;return n.moveCall({target:`${e.published_at}::${b$1}::redeem`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(e).lock_manager_id),n.object(getPackagerConfigs$1(e).xcetus_manager_id),n.object(t.venft_id),n.object(t.lock_id),n.object(CLOCK_ADDRESS$2)]}),n}redeemDividendPayload(t,e){let{xcetus:n,xcetus_dividends:i}=this.sdk.sdkOptions,s=new Transaction$1;return e.forEach(a=>{s.moveCall({target:`${n.published_at}::${D}::redeem`,typeArguments:[a],arguments:[s.object(getPackagerConfigs$1(i).dividend_manager_id),s.object(t)]})}),s}redeemDividendV2Payload(t,e,n){let{xcetus_dividends:i}=this.sdk.sdkOptions,s=new Transaction$1;return e.filter(a=>n.includes(a)).length>0&&(s=this.redeemDividendXTokenPayload(t,s)),e.forEach(a=>{n.includes(a)||s.moveCall({target:`${i.published_at}::${D}::redeem_v2`,typeArguments:[a],arguments:[s.object(getPackagerConfigs$1(i).dividend_manager_id),s.object(t),s.object(CLOCK_ADDRESS$2)]})}),s}redeemDividendV3Payload(t,e){let{xcetus_dividends:n}=this.sdk.sdkOptions,i=new Transaction$1,s=m.buildDividendRewardTypeList(e),a=m.buildDividendRewardTypeListV2(e),l=extractStructTagFromType$2(this.buileXTokenCoinType()).full_address;return s.find(f=>extractStructTagFromType$2(f).full_address===l)!==void 0&&this.redeemDividendXTokenPayload(t,i),s.forEach(f=>{i.moveCall({target:`${n.published_at}::${D}::redeem_v3`,typeArguments:[f],arguments:[i.object(getPackagerConfigs$1(n).dividend_manager_id),i.object(getPackagerConfigs$1(n).venft_dividends_id),i.makeMoveVec({elements:a[f].map(p=>i.pure.u64(p)),type:"u64"}),i.object(t),i.object(CLOCK_ADDRESS$2)]})}),i}redeemDividendXTokenPayload(t,e){let{xcetus_dividends:n,xcetus:i}=this.sdk.sdkOptions,{xcetus_manager_id:s,lock_manager_id:a}=getPackagerConfigs$1(i),{dividend_manager_id:l}=getPackagerConfigs$1(n);return e=e===void 0?new Transaction$1:e,e.moveCall({target:`${n.published_at}::${D}::redeem_xtoken`,typeArguments:[],arguments:[e.object(a),e.object(s),e.object(l),e.object(t),e.object(CLOCK_ADDRESS$2)]}),e}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(t=this._sdk.sdkOptions.xcetus.package_id,e="xcetus",n="XCETUS"){return`${t}::${e}::${n}`}cancelRedeemPayload(t){let{xcetus:e}=this.sdk.sdkOptions,n=new Transaction$1;return n.moveCall({target:`${e.published_at}::${b$1}::cancel_redeem_lock`,typeArguments:[],arguments:[n.object(getPackagerConfigs$1(e).lock_manager_id),n.object(getPackagerConfigs$1(e).xcetus_manager_id),n.object(t.venft_id),n.object(t.lock_id),n.object(CLOCK_ADDRESS$2)]}),n}async getInitConfigs(){var l,f;let{package_id:t}=this.sdk.sdkOptions.xcetus,e=`${t}_getInitFactoryEvent`,n=this.getCache(e);if(n!==void 0)return n;let i=(l=await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${t}::xcetus::InitEvent`}))==null?void 0:l.data,s={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};i.length>0&&i.forEach(p=>{let C=p.parsedJson;C&&(s.xcetus_manager_id=C.xcetus_manager)});let a=(f=await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${t}::locking::InitializeEvent`}))==null?void 0:f.data;return a.length>0&&a.forEach(p=>{let C=p.parsedJson;C&&(s.lock_manager_id=C.lock_manager)}),s.lock_manager_id.length>0&&(s.lock_handle_id=(await this.getLockUpManager(s.lock_manager_id)).lock_infos.lock_handle_id),this.updateCache(e,s,cacheTime24h),s}async getLockUpManager(t=getPackagerConfigs$1(this.sdk.sdkOptions.xcetus).lock_manager_id,e=!1){let n=`${t}_getLockUpManager`,i=this.getCache(n,e);if(i!==void 0)return i;let s=await this.sdk.fullClient.getObject({id:t,options:{showContent:!0}}),a=m.buildLockUpManager(getObjectFields(s));return this.updateCache(n,a,cacheTime24h),a}async getDividendConfigs(){var C,B,N;let{package_id:t}=this.sdk.sdkOptions.xcetus_dividends,{dividend_manager_id:e,venft_dividends_id:n}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus_dividends),i=`${t}_getDividendManagerEvent`,s=this.getCache(i);if(s!==void 0)return s;let a=(C=await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${t}::dividend::InitEvent`}))==null?void 0:C.data,l=await this._sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x1::string::String",value:"VeNFTDividends"}}),f={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:"",venft_dividends_id:"",venft_dividends_id_v2:""};a.length>0&&a.forEach(le=>{let Ee=le.parsedJson;Ee&&(f.dividend_manager_id=Ee.manager_id,f.dividend_admin_id=Ee.admin_id,f.dividend_settle_id=Ee.settle_id,this.updateCache(i,f,cacheTime24h))}),l&&l.data&&l.data.content&&(f.venft_dividends_id=(N=(B=l.data.content)==null?void 0:B.fields)==null?void 0:N.value,this.updateCache(i,f,cacheTime24h));let p=await this._sdk.fullClient.getObject({id:n,options:{showContent:!0}});return f.venft_dividends_id_v2=p.data.content.fields.venft_dividends.fields.id.id,f}async getDividendManager(t=!1){let{dividend_manager_id:e}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus_dividends),n=`${e}_getDividendManager`,i=this.getCache(n,t);if(i!==void 0)return i;let s=await this._sdk.fullClient.getObject({id:e,options:{showContent:!0}}),a=getObjectFields(s),l=m.buildDividendManager(a);return this.updateCache(n,l,cacheTime24h),l}async getXcetusManager(t=!0){let{xcetus_manager_id:e}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus),n=`${e}_getXcetusManager`,i=this.getCache(n,t);if(i)return i;let s=await this._sdk.fullClient.getObject({id:e,options:{showContent:!0}}),a=getObjectFields(s),l={id:a.id.id,index:Number(a.index),has_venft:{handle:a.has_venft.fields.id.id,size:a.has_venft.fields.size},nfts:{handle:a.nfts.fields.id.id,size:a.nfts.fields.size},total_locked:a.total_locked,treasury:a.treasury.fields.total_supply.fields.value};return this.updateCache(n,l),l}async fetchDividendInfo(t){let{xcetus_dividends:e}=this._sdk.sdkOptions,{dividend_manager_id:n,venft_dividends_id:i}=getPackagerConfigs$1(e),s=new Transaction$1;s.moveCall({target:`${e.published_at}::dividend::fetch_dividend_info_v2`,typeArguments:[],arguments:[s.object(n),s.object(i),s.object(t)]});let a=await this._sdk.fullClient.devInspectTransactionBlock({transactionBlock:s,sender:this._sdk.senderAddress}),{contents:l}=a.events[0].parsedJson.info,f={id:"",ve_nft_id:t,rewards:[]};return l.forEach(p=>{let C=[],B=p.key,{contents:N}=p.value;N.forEach(le=>{d$3(le.value).gt(0)&&C.push({coin_type:extractStructTagFromType$2(le.key.name).source_address,amount:le.value})}),C.length>0&&f.rewards.push({period:Number(B),rewards:C,vesrion:Number(B)>66?"v2":"v1"})}),f}async getVeNFTDividendInfo(t){try{return await this.fetchDividendInfo(t)}catch{return await this.getVeNFTDividendInfoV2(t)}}async getVeNFTDividendInfoV2(t){let{xcetus_dividends:e}=this._sdk.sdkOptions,{venft_dividends_id_v2:n}=getPackagerConfigs$1(e),i={id:"",ve_nft_id:t,rewards:[]},s=[];try{let a=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:t}}),l=getObjectFields(a).value.fields.value.fields.dividends.fields.id.id,f=null,p=50,C=[];for(;;){let B=await this._sdk.fullClient.getDynamicFields({parentId:l,cursor:f,limit:p});if(B.data.forEach(N=>{C.push(N.objectId)}),f=B.nextCursor,f===null||B.data.length<p)break}(await this._sdk.fullClient.batchGetObjects(C,{showType:!0,showContent:!0})).forEach(B=>{s.push({period:Number(B.data.content.fields.name),vesrion:"v2",rewards:B.data.content.fields.value.fields.contents.map(N=>({coin_type:extractStructTagFromType$2(N.fields.key.fields.name).source_address,amount:N.fields.value}))})})}catch(a){console.log(a)}return{...i,rewards:[...s]}}async getVeNFTDividendInfoV1(t){let{xcetus_dividends:e}=this._sdk.sdkOptions,{venft_dividends_id:n}=getPackagerConfigs$1(e),i={id:"",ve_nft_id:t,rewards:[]};try{let s=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"0x2::object::ID",value:t}}),a=getObjectFields(s);i=m.buildVeNFTDividendInfo(a)}catch(s){console.log(" ~ file: xcetusModule.ts:839 ~ XCetusModule ~ error:",s)}return i}redeemNum(t,e){if(BigInt(t)===BigInt(0))return{amount_out:"0",percent:"0"};let n=d$3(k).mul(d$3(_.max_lock_day).sub(d$3(e))).mul(d$3(_.max_percent_numerator).sub(d$3(_.min_percent_numerator))).div(d$3(_.max_lock_day).sub(d$3(_.min_lock_day))),i=d$3(k).mul(d$3(_.max_percent_numerator)).sub(n).div(d$3(I$1)).div(k);return{amount_out:d$3(i).mul(d$3(t)).round().toString(),percent:i.toString()}}reverseRedeemNum(t,e){if(BigInt(t)===BigInt(0))return{amount_out:"0",percent:"0"};let n=d$3(k).mul(d$3(_.max_lock_day).sub(d$3(e))).mul(d$3(_.max_percent_numerator).sub(d$3(_.min_percent_numerator))).div(d$3(_.max_lock_day).sub(d$3(_.min_lock_day))),i=d$3(k).mul(d$3(_.max_percent_numerator)).sub(n).div(d$3(I$1)).div(k);return{amount_out:d$3(t).div(i).toFixed(0,Decimal$1.ROUND_UP),percent:i.toString()}}async getXCetusAmount(t){let{lock_handle_id:e}=getPackagerConfigs$1(this._sdk.sdkOptions.xcetus),n=`${t}_getXCetusAmount`,i=this.getCache(n);if(i!==void 0)return i;try{let s=await this.sdk.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),a=getObjectFields(s);if(a){let{xcetus_amount:l}=a.value.fields.value.fields;return this.updateCache(n,l,cacheTime24h),l}}catch{}return"0"}async getVeNftAmount(t,e){try{let n=await this.sdk.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),i=getObjectFields(n);if(i){let{lock_amount:s,xcetus_amount:a}=i.value.fields.value.fields;return{lock_amount:s,xcetus_amount:a}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(t,e=!1){let n=(await this.getDividendManager()).dividends.id,i=`${n}_${t}_getPhaseDividendInfo`,s=this._sdk.getCache(i,e);if(s)return s;try{let a=await this._sdk.fullClient.getDynamicFieldObject({parentId:n,name:{type:"u64",value:t}}),l=getObjectFields(a),f=l.value.fields.value.fields,p=f.redeemed_num.fields.contents.map(le=>({name:le.fields.key.fields.name,value:le.fields.value})),C=f.bonus_types.map(le=>le.fields.name),B=f.bonus.fields.contents.map(le=>({name:le.fields.key.fields.name,value:le.fields.value})),N={id:getObjectId(a),phase:l.name,settled_num:f.settled_num,register_time:f.register_time,redeemed_num:p,is_settled:f.is_settled,bonus_types:C,bonus:B,phase_end_time:""};return this.updateCache(i,N),N}catch{}}updateCache(t,e,n=cacheTime5min){let i=this._cache[t];i?(i.overdueTime=getFutureTime(n),i.value=e):i=new CachedContent(e,getFutureTime(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},S$1=class extends SuiClient$1{async queryEventsByPage(e,n="all"){let i=[],s=!0,a=n==="all",l=a?null:n.cursor;do{let f=await this.queryEvents({query:e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async getOwnedObjectsByPage(e,n,i="all"){let s=[],a=!0,l=i==="all",f=l?null:i.cursor;do{let p=await this.getOwnedObjects({owner:e,...n,cursor:f,limit:l?null:i.limit});p.data?(s=[...s,...p.data],a=p.hasNextPage,f=p.nextCursor):a=!1}while(l&&a);return{data:s,nextCursor:f,hasNextPage:a}}async getDynamicFieldsByPage(e,n="all"){let i=[],s=!0,a=n==="all",l=a?null:n.cursor;do{let f=await this.getDynamicFields({parentId:e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async batchGetObjects(e,n,i=50){let s=[];try{for(let a=0;a<Math.ceil(e.length/i);a++){let l=await this.multiGetObjects({ids:e.slice(a*i,i*(a+1)),options:n});s=[...s,...l]}}catch(a){console.log(a)}return s}async calculationTxGas(e){let{sender:n}=e.blockData;if(n===void 0)throw Error("sdk sender is empty");let i=await this.devInspectTransactionBlock({transactionBlock:e,sender:n}),{gasUsed:s}=i.effects;return Number(s.computationCost)+Number(s.storageCost)-Number(s.storageRebate)}async sendTransaction(e,n){try{return await this.signAndExecuteTransaction({transaction:n,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(i){console.log("error: ",i)}}async sendSimulationTransaction(e,n,i=!0){try{if(i)return await this.devInspectTransactionBlock({transactionBlock:e,sender:n})}catch(s){console.log("devInspectTransactionBlock error",s)}}},j$1=class{constructor(e){Or(this,"_cache",{});Or(this,"_rpcModule");Or(this,"_xcetusModule");Or(this,"_sdkOptions");Or(this,"_senderAddress","");this._sdkOptions=e,this._rpcModule=new S$1({url:e.fullRpcUrl}),this._xcetusModule=new w(this),patchFixSuiObjectId(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(e){this._senderAddress=e}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get XCetusModule(){return this._xcetusModule}getVerifySenderAddress(){if(this.senderAddress.length===0||!isValidSuiAddress$2(this.senderAddress))throw Error("this clmm config sdk senderAddess is illegal");return this.senderAddress}async getOwnerCoinAssets(e,n,i=!0){let s=[],a=null,l=`${this.sdkOptions.fullRpcUrl}_${e}_${n}_getOwnerCoinAssets`,f=this.getCache(l,i);if(f)return f;for(;;){let p=await(n?this.fullClient.getCoins({owner:e,coinType:n,cursor:a}):this.fullClient.getAllCoins({owner:e,cursor:a}));if(p.data.forEach(C=>{BigInt(C.balance)>0&&s.push({coinAddress:extractStructTagFromType$2(C.coinType).source_address,coinObjectId:C.coinObjectId,balance:BigInt(C.balance)})}),a=p.nextCursor,!p.hasNextPage)break}return this.updateCache(l,s,30*1e3),s}async getOwnerCoinBalances(e,n){let i=[];return n?i=[await this.fullClient.getBalance({owner:e,coinType:n})]:i=[...await this.fullClient.getAllBalances({owner:e})],i}updateCache(e,n,i=cacheTime24h){let s=this._cache[e];s?(s.overdueTime=getFutureTime(i),s.value=n):s=new CachedContent(n,getFutureTime(i)),this._cache[e]=s}getCache(e,n=!1){let i=this._cache[e],s=i==null?void 0:i.isValid();if(!n&&s)return i.value;s||delete this._cache[e]}},xt$1=j$1;function et(t,e,n){let i=TickMath$1.sqrtPriceX64ToTickIndex(n);if(i<t)return{ratioA:new Decimal$1(1),ratioB:new Decimal$1(0)};if(i>e)return{ratioA:new Decimal$1(0),ratioB:new Decimal$1(1)};let s=new BN(1e8),{coinAmountB:a}=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(t,e,s,!0,!0,0,n),l=TickMath$1.sqrtPriceX64ToPrice(n,0,0),f=d$3(s.toString()).mul(l),p=f.add(a.toString()),C=f.div(p),B=d$3(a.toString()).div(p);return{ratioA:C,ratioB:B}}function st$1(t,e,n){return t>=e&&t<=n?"inRange":t<e?"left":"right"}function Y(t,e,n,i,s,a,l){let f=l?new BN(t):new BN(e),p=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(i,s,f,l,!0,a,new BN(n)),C=l?f.toString():p.coinAmountA.toString(),B=l?p.coinAmountB.toString():f.toString(),N=d$3(t).sub(C),le=d$3(e).sub(B);return{is_enough_amount:l?le.gte(0):N.gte(0),use_amount_a:C,use_amount_b:B,liquidity:p.liquidityAmount.toString(),amount_limit_a:p.tokenMaxA.toString(),amount_limit_b:p.tokenMaxB.toString(),remain_amount:l?le:N}}function nt(t,e,n,i,s,a,l){let f=TickMath$1.sqrtPriceX64ToTickIndex(new BN(n)),p=l;f<i?p=!0:f>s&&(p=!1);let C=Y(t,e,n,i,s,a,p);return C.is_enough_amount||(p=!p,C=Y(t,e,n,i,s,a,p)),{fix_liquidity_amount_a:p,...C}}function at$1(t,e,n,i,s,a,l,f){let{after_sqrt_price:p,swap_in_amount:C,swap_out_amount:B}=t,N=TickMath$1.sqrtPriceX64ToTickIndex(new BN(p)),le=TickMath$1.sqrtPriceX64ToTickIndex(new BN(n)),Ee=st$1(N,s,a),Ue=st$1(le,s,a);if(Ee!==Ue)throw new Error("Swap price out of range");let ze=d$3(B).mul(1-f).toFixed(0),Ze=i?d$3(e).sub(C):d$3(ze),Qe=i?d$3(ze):d$3(e).sub(C),{fix_liquidity_amount_a:ct,use_amount_a:wt,use_amount_b:qt,liquidity:nr,amount_limit_a:ir,amount_limit_b:or,is_enough_amount:ur,remain_amount:hr}=nt(Ze.toString(),Qe.toString(),n,s,a,l,i);return console.log(" ~ is_enough_amount:",{is_enough_amount:ur,original_input_amount:e,fix_liquidity_amount_a:ct,remain_amount:hr}),{remain_amount:hr,fix_liquidity_amount_a:ct,is_valid_swap_result:ur,amount_a:wt,amount_b:qt,liquidity:nr,amount_limit_a:ir,amount_limit_b:or}}function ut(t){if(t.length!==8)throw new Error("Invalid u64 byte array length");let e=t.map(n=>n.toString(16).padStart(2,"0")).reverse().join("");return BigInt(`0x${e}`).toString()}function Z$2(t,e,n){return n.moveCall({target:"0x2::coin::from_balance",typeArguments:[e],arguments:[t]})}function K(t,e){let n=t.amountCoinArray.find(i=>!i.used&&d$3(i.amount).eq(e)?(i.used=!0,!0):!1);if(!n)throw new Error("Coin not found");return n.coinObjectId}function T$2(t,e,n,i){let s=CoinAssist$1.getCoinAssets(n,e);if(CoinAssist$1.isSuiCoin(n)){let B=t.splitCoins(t.gas,i.map(N=>t.pure.u64(N)));return{amountCoinArray:i.map((N,le)=>({coinObjectId:B[le],amount:N.toString(),used:!1})),coinType:n,remainCoins:s}}let a=i.reduce((B,N)=>B+N,BigInt(0)),l=CoinAssist$1.selectCoinObjectIdGreaterThanOrEqual(s,a);if(l.objectArray.length===0)throw new Error("No enough coins");let[f,...p]=l.objectArray;p.length>0&&t.mergeCoins(f,[...p]);let C=t.splitCoins(f,i.map(B=>t.pure.u64(B)));return{amountCoinArray:i.map((B,N)=>({coinObjectId:C[N],amount:B.toString(),used:!1})),remainCoins:l.remainCoins,coinType:n}}var Ct$1=(t,e,n=!0)=>{if(`${t}`=="0")return!parseFloat(e)||!n?"0":"0.".padEnd(e+2,"0");if(!t)return"--";let i=parseFloat(t),s=t.toString(),a=i<0,l=s;if(s.toLowerCase().includes("e")){let f=s.match(/(\d+?)(?:\.(\d*))?e([+-])(\d+)/);if(!f)return t.toString();let p=f[1]||"0",C=f[2]||"",B=f[3],N=parseInt(f[4],10),le="",Ee=C.substring(N)||"";if(Ee&&(Ee=`.${Ee}`),B!=="-"){for(let Ue=0;Ue<N;Ue++)le+=C[Ue]||"0";l=p+le+Ee}else{let Ue="0";for(let ze=0;ze<N;ze++)le=(p[p.length-ze-1]||"0")+le;p.length>N&&(Ue=p.substring(0,p.length-N)),l=`${Ue}.${le}${C}`}}if(e&&n){let f=`${l.split(".")[0]}.`,p=l.split(".")[1]||"";for(let C=0;C<e;C++)f+=p[C]||"0";l=f}return`${a?"-":""}${l}`};function it$1(t,e=9){if(t===void 0)return"";let n=t==null?void 0:t.toLowerCase();if(n.includes("e")){if(n.includes("+"))return Ct$1(n,e);let[i,s]=n.split("e"),a=i,l=Math.abs(parseInt(s,10)),f="",p=a.length;if(i.includes(".")){let[C,B]=i.split(".");a=C+B,p=C.length}for(let C=0;C<l-p;C++)f+="0";return`0.${f}${a}`.slice(0,e+2)}return t}var G=class{constructor(t){Or(this,"_sdk");this._sdk=t}get sdk(){return this._sdk}async buildWithdrawPayload(t,e){console.log(" ~ ZapModule ~ buildWithdrawPayload ~ options:",t);let{clmm_pool:n}=this._sdk.CetusClmmSDK.sdkOptions,{withdraw_obj:i,pool_id:s,farms_pool_id:a,pos_id:l,close_pos:f,collect_fee:p,collect_rewarder_types:C,coin_type_a:B,coin_type_b:N,slippage:le,swap_slippage:Ee=.02}=t,{swap_result:Ue,amount_a:ze,amount_b:Ze,mode:Qe,burn_liquidity:ct}=i;e=e||new Transaction$1;let wt=d$3(ze).mul(1-le).toFixed(0),qt=d$3(Ze).mul(1-le).toFixed(0);if(Qe==="FixedOneSide")return a?await this._sdk.PeripherySDK.Farms.removeLiquidityPayload({coinTypeA:B,coinTypeB:N,delta_liquidity:ct,pool_id:a,clmm_pool_id:s,position_nft_id:l,min_amount_a:wt,min_amount_b:qt,collect_rewarder:!1,unstake:!1,close_position:f,clmm_rewarder_types:C},e):await this._sdk.CetusClmmSDK.Position.removeLiquidityTransactionPayload({coinTypeA:B,coinTypeB:N,delta_liquidity:ct,min_amount_a:wt,min_amount_b:qt,pool_id:s,pos_id:l,rewarder_coin_types:C,collect_fee:p},e);let nr=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress);e=await this.buildCollectRewarderAndFeePayload(e,s,B,N,l,p,C,nr,a);let ir=getPackagerConfigs$1(n),or,ur;if(a){let{frams:hr}=this._sdk.PeripherySDK.sdkOptions,fr=getPackagerConfigs$1(hr);if(f){e=await this._sdk.PeripherySDK.Farms.harvestPayload({pool_id:a,position_nft_id:l},e);let[ar,Lt]=e.moveCall({target:`${hr.published_at}::pool::close_position`,typeArguments:[B,N],arguments:[e.object(fr.global_config_id),e.object(fr.rewarder_manager_id),e.object(a),e.object(ir.global_config_id),e.object(s),e.object(l),e.pure.u64(wt),e.pure.u64(qt),e.object(CLOCK_ADDRESS$1)]});or=Z$2(ar,B,e),ur=Z$2(Lt,N,e)}else{let[ar,Lt]=e.moveCall({target:`${hr.published_at}::pool::remove_liquidity`,typeArguments:[B,N],arguments:[e.object(fr.global_config_id),e.object(ir.global_config_id),e.object(fr.rewarder_manager_id),e.object(a),e.object(s),e.object(l),e.pure.u128(ct),e.pure.u64(wt),e.pure.u64(qt),e.object(CLOCK_ADDRESS$1)]});or=Z$2(ar,B,e),ur=Z$2(Lt,N,e)}}else{let[hr,fr]=e.moveCall({target:`${n.published_at}::pool::remove_liquidity`,typeArguments:[B,N],arguments:[e.object(getPackagerConfigs$1(n).global_config_id),e.object(s),e.object(l),e.pure.u128(ct),e.object(CLOCK_ADDRESS$1)]});or=Z$2(hr,B,e),ur=Z$2(fr,N,e)}if(Ue!=null&&Ue.route_obj){let hr=Qe==="OnlyCoinA",fr=hr?ur:or,ar={routers:Ue.route_obj,inputCoin:fr,slippage:Ee,txb:e},Lt=await this._sdk.AggregatorClient.fixableRouterSwap(ar);e.transferObjects([hr?or:ur,Lt],this._sdk.senderAddress)}else e.transferObjects([or,ur],this._sdk.senderAddress);return f&&!a&&e.moveCall({target:`${n.published_at}::pool::close_position`,typeArguments:[B,N],arguments:[e.object(getPackagerConfigs$1(n).global_config_id),e.object(s),e.object(l)]}),e}async buildDepositPayload(t,e){console.log(" ~ ZapModule ~ buildDepositOptions ~ options:",t);let{deposit_obj:n}=t,{mode:i}=n;if(e=e||new Transaction$1,i==="FixedOneSide")return await this.buildDepositOneSidePayload(t,e);if(i==="FlexibleBoth")return await this.buildDepositFlexibleBothPayload(t,e);if(i==="OnlyCoinA"||i==="OnlyCoinB")return await this.buildDepositOnlyCoinPayload(t,e);throw new Error(`Unsupported deposit mode: ${i}`)}buildOpenPositionPayload(t,e){let{pool_id:n,coin_type_a:i,coin_type_b:s,tick_lower:a,tick_upper:l}=t,{clmm_pool:f}=this._sdk.CetusClmmSDK.sdkOptions,p=getPackagerConfigs$1(f);return e.moveCall({target:`${f.published_at}::pool::open_position`,typeArguments:[i,s],arguments:[e.object(p.global_config_id),e.object(n),e.pure.u32(Number(asUintN$1(BigInt(a)))),e.pure.u32(Number(asUintN$1(BigInt(l))))]})}async buildAddLiquidityPayload(t,e,n,i,s,a,l,f){let{pool_id:p,farms_pool_id:C,coin_type_a:B,coin_type_b:N,deposit_obj:le}=t,{fixed_liquidity_coin_a:Ee}=le,{clmm_pool:Ue,integrate:ze}=this._sdk.CetusClmmSDK.sdkOptions,Ze=getPackagerConfigs$1(Ue),{frams:Qe}=this._sdk.PeripherySDK.sdkOptions,ct=getPackagerConfigs$1(Qe);return C&&!f?l.moveCall({target:`${Qe.published_at}::router::add_liquidity_fix_coin`,typeArguments:[B,N],arguments:[l.object(ct.global_config_id),l.object(Ze.global_config_id),l.object(ct.rewarder_manager_id),l.object(C),l.object(p),typeof e=="string"?l.object(e):e,s,a,l.pure.u64(n),l.pure.u64(i),l.pure.bool(Ee),l.object(CLOCK_ADDRESS$1)]}):l.moveCall({target:`${ze.published_at}::${ClmmIntegratePoolV2Module$1}::add_liquidity_by_fix_coin`,typeArguments:[B,N],arguments:[l.object(Ze.global_config_id),l.object(p),typeof e=="string"?l.object(e):e,s,a,l.pure.u64(n),l.pure.u64(i),l.pure.bool(Ee),l.object(CLOCK_ADDRESS$1)]}),l}buildFarmsDepositPayload(t,e,n){let{frams:i}=this._sdk.PeripherySDK.sdkOptions,{global_config_id:s,rewarder_manager_id:a}=getPackagerConfigs$1(i);return n.moveCall({target:`${i.published_at}::router::deposit`,typeArguments:[],arguments:[n.object(s),n.object(a),n.object(e),typeof t=="string"?n.object(t):t,n.object(CLOCK_ADDRESS$1)]}),n}async buildCollectRewarderAndFeePayload(t,e,n,i,s,a,l,f,p,C,B){return p?t=await this._sdk.PeripherySDK.Farms.buildCollectRewarderAndFeeParams({clmm_pool_id:e,position_nft_id:s,collectFee:a||!1,clmm_rewarder_types:l||[],coinTypeA:n,coinTypeB:i},t,f,C,B):t=TransactionUtil$1.createCollectRewarderAndFeeParams(this._sdk.CetusClmmSDK,t,{pool_id:e,pos_id:s,collect_fee:a||!1,rewarder_coin_types:l||[],coinTypeA:n,coinTypeB:i},f,C,B),t}async buildDepositOneSidePayload(t,e){let{pos_obj:n,deposit_obj:i,coin_type_a:s,coin_type_b:a,farms_pool_id:l,pool_id:f}=t,{amount_a:p,amount_b:C,amount_limit_a:B,amount_limit_b:N,fixed_liquidity_coin_a:le}=i,Ee=n===void 0,Ue=n==null?void 0:n.pos_id;if(Ee&&(Ue=this.buildOpenPositionPayload(t,e)),Ue===void 0)throw new Error("Position ID is undefined");let ze=d$3(p).eq(0)||d$3(C).eq(0),Ze=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress),Qe=ze||le?p:B,ct=ze||le?C:N,wt=T$2(e,Ze,s,[BigInt(Qe)]),qt=T$2(e,Ze,a,[BigInt(ct)]);return Ee||(e=await this.buildCollectRewarderAndFeePayload(e,f,s,a,Ue,(n==null?void 0:n.collect_fee)||!1,(n==null?void 0:n.collect_rewarder_types)||[],Ze,l,wt.remainCoins,qt.remainCoins)),await this.buildAddLiquidityPayload(t,Ue,Qe,ct,wt.amountCoinArray[0].coinObjectId,qt.amountCoinArray[0].coinObjectId,e,Ee),Ee&&(l?this.buildFarmsDepositPayload(Ue,l,e):e.transferObjects([Ue],this.sdk.senderAddress)),e}async buildDepositFlexibleBothPayload(t,e){let{pool_id:n,slippage:i,swap_slippage:s=.02,coin_type_a:a,coin_type_b:l,pos_obj:f,deposit_obj:p,farms_pool_id:C}=t,{sub_deposit_result:B,amount_a:N,amount_b:le,amount_limit_a:Ee,amount_limit_b:Ue,fixed_liquidity_coin_a:ze}=p,Ze=f===void 0,Qe=f==null?void 0:f.pos_id;if(Ze&&(Qe=this.buildOpenPositionPayload(t,e)),Qe===void 0)throw new Error("Position ID is undefined");let ct=d$3(N).eq(0)||d$3(le).eq(0),wt=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress),qt=ct||ze?N:Ee,nr=ct||ze?le:Ue,ir,or;if(B!==void 0){let{amount_a:fr,amount_b:ar,fixed_liquidity_coin_a:Lt,mode:Vt,swap_result:tt}=B,Ye=Vt==="OnlyCoinA",{swap_in_amount:ot,route_obj:Et}=tt;Ye?(ir=T$2(e,wt,a,[BigInt(ot),BigInt(qt),BigInt(fr)]),or=T$2(e,wt,l,[BigInt(nr)])):(ir=T$2(e,wt,a,[BigInt(qt)]),or=T$2(e,wt,l,[BigInt(ot),BigInt(ar),BigInt(nr)]));let er=K(Ye?ir:or,ot),rr={routers:Et,slippage:s,txb:e,inputCoin:er},yt=await this._sdk.AggregatorClient.fixableRouterSwap(rr),tr=Ye?K(ir,fr):yt,Ut=Ye?yt:K(or,ar);await this.buildAddLiquidityPayload(t,Qe,Lt?qt:"999999999999999",Lt?"999999999999999":nr,tr,Ut,e,Ze)}else ir=T$2(e,wt,a,[BigInt(qt)]),or=T$2(e,wt,l,[BigInt(nr)]);Ze||(e=await this.buildCollectRewarderAndFeePayload(e,n,a,l,Qe,(f==null?void 0:f.collect_fee)||!1,(f==null?void 0:f.collect_rewarder_types)||[],wt,C,ir.remainCoins,or.remainCoins));let ur=K(ir,qt),hr=K(or,nr);return await this.buildAddLiquidityPayload(t,Qe,qt,nr,ur,hr,e,Ze),Ze&&(C?this.buildFarmsDepositPayload(Qe,C,e):e.transferObjects([Qe],this.sdk.senderAddress)),e}async buildDepositOnlyCoinPayload(t,e){let{swap_slippage:n=.005,coin_type_a:i,coin_type_b:s,pos_obj:a,deposit_obj:l,farms_pool_id:f,pool_id:p}=t,{amount_a:C,amount_b:B,mode:N,fixed_liquidity_coin_a:le,swap_result:Ee,original_input_amount_a:Ue,original_input_amount_b:ze}=l,Ze=a===void 0,Qe=N==="OnlyCoinA",ct=await this._sdk.getOwnerCoinAssets(this.sdk.senderAddress),{swap_in_amount:wt,swap_out_amount:qt,route_obj:nr}=Ee,ir;d$3(C).eq(0)||d$3(B).eq(0);let or=d$3(qt).mul(1-n).toFixed(0),ur=Qe?Ue:ze,hr=Qe?d$3(ur).sub(wt).toFixed(0):or,fr=Qe?or:d$3(ur).sub(wt).toFixed(0);console.log(" ~ ZapModule ~ buildDepositOnlyCoinPayload ~ fixed_amount_a:",hr),console.log(" ~ ZapModule ~ buildDepositOnlyCoinPayload ~ fixed_amount_b:",fr),Qe?ir=T$2(e,ct,i,[BigInt(wt),BigInt(hr)]):ir=T$2(e,ct,s,[BigInt(wt),BigInt(fr)]);let ar=K(ir,wt),Lt={routers:nr,slippage:n,txb:e,inputCoin:ar},Vt=await this._sdk.AggregatorClient.fixableRouterSwap(Lt),tt=Qe?K(ir,hr):Vt,Ye=Qe?Vt:K(ir,fr),ot=a==null?void 0:a.pos_id;if(Ze&&(ot=this.buildOpenPositionPayload(t,e)),ot===void 0)throw new Error("Position ID is undefined");return Ze||(e=await this.buildCollectRewarderAndFeePayload(e,p,i,s,ot,(a==null?void 0:a.collect_fee)||!1,(a==null?void 0:a.collect_rewarder_types)||[],ct,f,Qe?ir.remainCoins:void 0,Qe?void 0:ir.remainCoins)),await this.buildAddLiquidityPayload(t,ot,le?hr:"999999999999999",le?"999999999999999":fr,tt,Ye,e,Ze),Ze&&(f?this.buildFarmsDepositPayload(ot,f,e):e.transferObjects([ot],this.sdk.senderAddress)),e}async preCalculateWithdrawAmount(t){let{mode:e}=t;switch(console.log(" ~ ZapModule ~ preCalculateDepositAmount ~ options:",t),e){case"FixedOneSide":{let{fixed_amount:n,fixed_coin_a:i}=t;return this.calculateWithdrawOtherSide(t,n,i)}case"OnlyCoinA":{let{receive_amount_a:n,available_liquidity:i,max_remain_rate:s}=t;return this.calculateWithdrawOnlyCoin(t,i,!0,n,s)}case"OnlyCoinB":{let{receive_amount_b:n,available_liquidity:i,max_remain_rate:s}=t;return this.calculateWithdrawOnlyCoin(t,i,!1,n,s)}default:throw new Error(`Unsupported withdraw mode: ${e}`)}}async calculateWithdrawOnlyCoin(t,e,n,i,s=.02){let{tick_lower:a,tick_upper:l,current_sqrt_price:f,mode:p,burn_liquidity:C}=t;if(C){let{swapResult:ar,amount_a:Lt,amount_b:Vt,total_receive_amount:tt}=await this.calculateWithdrawOnlyCoinByLpAmount(t,C,n);return{burn_liquidity:C,amount_a:Lt,amount_b:Vt,mode:p,total_receive_amount:tt,swap_result:ar}}if(!i)throw Error("receive_amount is missing or invalid");if(n===void 0)throw Error("is_receive_coin_a is missing or invalid");let{ratioA:B,ratioB:N}=et(Number(a),Number(l),new BN(f)),le=n?B:N,Ee=d$3(i).mul(le),Ue=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(a,l,new BN(Ee.toFixed(0)),n,!1,1,new BN(f)),ze=new BN(0),Ze=new BN(e),Qe="0",ct="0",wt=s,qt=10,nr=Number.MAX_VALUE,ir=0,or;for(;nr>wt&&ir<qt;){let ar=ir===0?Ue.liquidityAmount.toString():ze.add(Ze).div(new BN(2)).toString();if(ir++,or=await this.calculateWithdrawOnlyCoinByLpAmount(t,ar,n),or===void 0)break;let{total_receive_amount:Lt}=or,Vt=new BN(i||"0"),tt=d$3(Lt).sub(i).div(i).abs().toNumber();if(console.log(" ~ ZapModule ~ error:",tt),tt<=wt){Qe=ar,ct=Lt,nr=tt;break}if(new BN(Lt).lt(Vt)?ze=new BN(ar).add(new BN(1)):Ze=new BN(ar).sub(new BN(1)),Ze.sub(ze).lte(new BN(1)))break}if(ir>=qt)throw new Error("Reached maximum iterations, could not find optimal LP amount.");if(d$3(Qe).eq(0))throw new Error("Best liquidity is 0");let{amount_a:ur,amount_b:hr,swapResult:fr}=or;return{burn_liquidity:Qe,amount_a:ur,amount_b:hr,mode:p,total_receive_amount:ct,swap_result:fr}}async calculateWithdrawOnlyCoinByLpAmount(t,e,n,i){let{tick_lower:s,tick_upper:a,current_sqrt_price:l,coin_type_a:f,coin_type_b:p,pool_id:C,coin_decimal_a:B,coin_decimal_b:N}=t,le=TickMath$1.tickIndexToSqrtPriceX64(s),Ee=TickMath$1.tickIndexToSqrtPriceX64(a),{coinA:Ue,coinB:ze}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(e),new BN(l),le,Ee,!1),Ze=Ue.toString(),Qe=ze.toString(),ct=n?p:f,wt=n?f:p,qt=n?Qe:Ze;if(d$3(qt).eq(0))return{amount_a:Ze,amount_b:Qe,total_receive_amount:n?Ze:Qe,swap_price:i};let nr;if(i)nr={swap_in_amount:qt,swap_out_amount:d$3(qt).mul(i).toFixed(0,Decimal$1.ROUND_DOWN),after_sqrt_price:l,swap_price:i};else{let ur=n?N:B,hr=n?B:N;nr=await this.findRouters(C,l,ct,wt,d$3(qt),!n,ur,hr)}let{swap_out_amount:ir}=nr,or=n?d$3(Ze).add(ir).toString():d$3(Qe).add(ir).toString();return{swapResult:nr,amount_a:Ze,amount_b:Qe,total_receive_amount:or,swap_price:nr.swap_price}}async calculateWithdrawOtherSide(t,e,n){let{tick_lower:i,tick_upper:s,current_sqrt_price:a,burn_liquidity:l}=t;if(l){let B=TickMath$1.tickIndexToSqrtPriceX64(i),N=TickMath$1.tickIndexToSqrtPriceX64(s),{coinA:le,coinB:Ee}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(l),new BN(a),B,N,!1),Ue=le.toString(),ze=Ee.toString();return{burn_liquidity:l,amount_a:Ue,amount_b:ze,mode:"FixedOneSide"}}if(e===void 0||n===void 0)throw Error("fixed_coin_a or fixed_amount is undefined");let f=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(i,s,new BN(e),n,!1,1,new BN(a)),p=n?e:f.coinAmountA.toString(),C=n?f.coinAmountB.toString():e;return{burn_liquidity:f.liquidityAmount.toString(),amount_a:p,amount_b:C,mode:"FixedOneSide"}}async preCalculateDepositAmount(t,e){let{mode:n}=e;switch(console.log(" ~ ZapModule ~ preCalculateDepositAmount ~ options:",{options:t,modeOptions:e}),n){case"FixedOneSide":return this.calculateFixedOneSide(t,e);case"FlexibleBoth":return this.calculateFlexibleBoth(t,e);case"OnlyCoinA":return this.calculateDepositOnlyCoin(t,e);case"OnlyCoinB":return this.calculateDepositOnlyCoin(t,e);default:throw new Error(`Unsupported deposit mode: ${n}`)}}async calculateFlexibleBoth(t,e){let{tick_lower:n,tick_upper:i,current_sqrt_price:s,slippage:a}=t,{coin_amount_a:l,coin_amount_b:f,coin_type_a:p,coin_type_b:C,max_remain_rate:B=.002,coin_decimal_a:N,coin_decimal_b:le}=e;if(d$3(l).gt(0)&&d$3(f).eq(0))return this.calculateDepositOnlyCoin(t,{mode:"OnlyCoinA",coin_amount:l,coin_type_a:p,coin_type_b:C,max_remain_rate:B,coin_decimal_a:N,coin_decimal_b:le});if(d$3(f).gt(0)&&d$3(l).eq(0))return this.calculateDepositOnlyCoin(t,{mode:"OnlyCoinB",coin_amount:f,coin_type_a:p,coin_type_b:C,max_remain_rate:B,coin_decimal_a:N,coin_decimal_b:le});let{liquidity:Ee,use_amount_a:Ue,use_amount_b:ze,amount_limit_a:Ze,amount_limit_b:Qe,fix_liquidity_amount_a:ct,remain_amount:wt}=nt(l,f,s,n,i,a,!0);console.log(" ~ ZapModule ~ calculateFlexibleBoth ~ remain_amount:",wt);let qt;return wt.gt(0)&&(qt=await this.calculateDepositOnlyCoin(t,{mode:ct?"OnlyCoinB":"OnlyCoinA",coin_amount:wt.toFixed(0,Decimal$1.ROUND_DOWN),coin_type_a:p,coin_type_b:C,max_remain_rate:B,coin_decimal_a:N,coin_decimal_b:le})),{mode:"FlexibleBoth",liquidity:Ee,amount_a:Ue,amount_b:ze,amount_limit_a:Ze,amount_limit_b:Qe,fixed_liquidity_coin_a:ct,sub_deposit_result:qt,original_input_amount_a:l,original_input_amount_b:f}}async findRouters(t,e,n,i,s,a,l,f,p){var N,le;if(d$3(s.toFixed(0).toString()).lt(1))throw new Error("bestSwapAmount is less than the minimum precision");let{providers:C}=this._sdk.sdkOptions,B=this._sdk.AggregatorClient;try{let Ee={from:n,target:i,amount:new BN(s.toFixed(0).toString()),byAmountIn:!0,depth:3,providers:C};p&&p.poolID&&(Ee.liquidityChanges=[p]);let Ue=await B.findRouters(Ee);if(Ue!=null&&Ue.error)throw Error(`Aggregator findRouters error: ${(N=Ue==null?void 0:Ue.error)==null?void 0:N.code}`);if(!(Ue!=null&&Ue.routes)||((le=Ue==null?void 0:Ue.routes)==null?void 0:le.length)===0)throw Error("Aggregator findRouters error: no router");let ze=e;Ue.routes.forEach(wt=>{let qt=wt.path.find(nr=>nr.id.toLowerCase()===t.toLowerCase());qt&&qt.extendedDetails&&qt.extendedDetails.afterSqrtPrice&&(ze=it$1(String(qt.extendedDetails.afterSqrtPrice),0))});let Ze=Ue.amountIn.toString(),Qe=Ue.amountOut.toString(),ct=d$3(fromDecimalsAmount(Qe,f)).div(fromDecimalsAmount(Ze,l)).toString();return{swap_in_amount:Ue.amountIn.toString(),swap_out_amount:Ue.amountOut.toString(),after_sqrt_price:ze,route_obj:Ue,swap_price:ct}}catch(Ee){console.log(" ~ ZapModule ~ error:",Ee);try{let Ue=await B.swapInPools({from:n,target:i,amount:new BN(s.toFixed(0).toString()),byAmountIn:a,pools:[t]});if(Ue===null||!Ue.routeData||Ue.isExceed)throw Error("Aggregator findRouters error: no router");let ze=e;return Ue.routeData.routes.forEach(Ze=>{let Qe=Ze.path.find(ct=>ct.id.toLowerCase()===t.toLowerCase());Qe&&(ze=it$1(String(Qe.extendedDetails.afterSqrtPrice)))}),{swap_in_amount:Ue.routeData.amountIn.toString(),swap_out_amount:Ue.routeData.amountOut.toString(),after_sqrt_price:ze,route_obj:Ue.routeData,swap_price:""}}catch(Ue){throw Ue}}}async getCoinValue(t,e,n){try{n.moveCall({target:"0x2::coin::value",typeArguments:[e],arguments:[t]});let i=await this._sdk.FullClient.devInspectTransactionBlock({sender:normalizeSuiAddress$2("0x0"),transactionBlock:n});return console.log(" ~ ZapModule ~ getCoinValue ~ res:",i),ut(Object.values(i==null?void 0:i.results[1].returnValues[0][0]))}catch(i){console.log(" ~ ZapModule ~ getCoinValue ~ error:",i)}}async calculateDepositOnlyCoin(t,e){let{tick_lower:n,tick_upper:i,current_sqrt_price:s,slippage:a,pool_id:l,mark_price:f,swap_slippage:p=.05}=t,{coin_amount:C,coin_type_a:B,coin_type_b:N,max_remain_rate:le=.004,mode:Ee,coin_decimal_a:Ue,coin_decimal_b:ze}=e,Ze=Ee==="OnlyCoinA",{swapAmount:Qe,receiveAmount:ct,remainingA:wt,remainingB:qt,swapResult:nr}=await this.calculateSwapAmountByQuantity(l,B,N,n,i,s,Ue,ze,C,Ze,le,f,le),ir=d$3(C).sub(Qe);if(console.log(" ~ ZapModule ~ swapAmount2:",{swapAmount:Qe,receiveAmount:ct,fixAmount:ir,remainingA:wt,remainingB:qt,calculateSwapResult:nr}),d$3(Qe).eq(0))return this.calculateFixedOneSide(t,{mode:"FixedOneSide",fixed_amount:C,fixed_coin_a:Ze});let or=Ze?B:N,ur=Ze?N:B,hr,fr=d$3(Qe),ar,Lt=5,Vt=0;do if(Vt++,ar=nr||await this.findRouters(l,ar?ar.after_sqrt_price:s,or,ur,fr,Ze,Ze?Ue:ze,Ze?ze:Ue),hr=at$1(ar,C,s,Ze,n,i,a,p),console.log(" ~ ZapModule ~ resultFormat:",{resultFormat:hr,swapResult:ar,bestSwapAmount:fr,loopCount:Vt}),!hr.is_valid_swap_result)fr=d$3(fr).mul(1+.01);else{let tt=d$3(ar.swap_out_amount).mul(le);d$3(tt).lt(d$3(hr.remain_amount))&&(fr=d$3(fr).mul(1-.01))}while(hr&&!hr.is_valid_swap_result&&Vt<Lt);return{liquidity:hr.liquidity,amount_a:hr.amount_a,amount_b:hr.amount_b,amount_limit_a:hr.amount_limit_a,amount_limit_b:hr.amount_limit_b,fixed_liquidity_coin_a:hr.fix_liquidity_amount_a,mode:Ze?"OnlyCoinA":"OnlyCoinB",swap_result:ar,original_input_amount_a:Ze?C:"0",original_input_amount_b:Ze?"0":C}}calculateFixedOneSide(t,e){let{tick_lower:n,tick_upper:i,current_sqrt_price:s,slippage:a}=t,{fixed_amount:l,fixed_coin_a:f,mode:p}=e,C=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(n,i,new BN(l),f,!0,a,new BN(s));return{liquidity:C.liquidityAmount.toString(),amount_a:f?l:C.coinAmountA.toString(),amount_b:f?C.coinAmountB.toString():l,amount_limit_a:C.tokenMaxA.toString(),fixed_liquidity_coin_a:f,amount_limit_b:C.tokenMaxB.toString(),mode:p,original_input_amount_a:f?l:"0",original_input_amount_b:f?"0":l}}async calculateSwapAmountByQuantity(t,e,n,i,s,a,l,f,p,C,B,N,le=0){let{ratioA:Ee,ratioB:Ue}=et(i,s,new BN(a));console.log(" ~ ratioA:",{ratioA:Ee,ratioB:Ue,mark_price:N});let ze=TickMath$1.sqrtPriceX64ToPrice(new BN(a),l,f),Ze=d$3(fromDecimalsAmount(p,C?l:f)),Qe=N?d$3(N):ze;if(C){if(Ee.eq(1))return{swapAmount:"0",receiveAmount:"0",remainingA:p,remainingB:"0"};if(Ue.eq(1))return{swapAmount:p,receiveAmount:toDecimalsAmount(Ze.mul(Qe).toFixed(f),f).toString(),remainingA:"0",remainingB:toDecimalsAmount(Ze.mul(Qe).toFixed(f),f).toString()}}else{if(Ee.eq(1))return{swapAmount:p,receiveAmount:toDecimalsAmount(Ze.div(Qe).toFixed(l),l).toString(),remainingA:"0",remainingB:toDecimalsAmount(Ze.div(Qe).toFixed(l),l).toString()};if(Ue.eq(1))return{swapAmount:"0",receiveAmount:"0",remainingA:p,remainingB:"0"}}let ct=200,wt=d$3(B),qt=d$3(p).mul(C?Ee:Ue);console.log(" ~ bestSwapAmount:",qt,le);let nr=d$3(0),ir,or,ur=d$3(0),hr=d$3(p);for(let Lt=0;Lt<ct;Lt++){qt=Lt===0?qt:ur.add(hr).div(2),C?(nr=d$3(toDecimalsAmount(d$3(fromDecimalsAmount(qt.toString(),l)).mul(Qe).toString(),f)),ir=d$3(p).sub(qt),or=nr):(nr=d$3(toDecimalsAmount(d$3(fromDecimalsAmount(qt.toString(),f)).div(Qe).toString(),l)),ir=nr,or=d$3(p).sub(qt));let Vt=Y(ir.toFixed(0),or.toFixed(0),a,i,s,0,C);if(Vt.is_enough_amount){let tt=d$3(C?or:ir).mul(wt);if(d$3(tt).lt(d$3(Vt.remain_amount)))hr=qt.sub(1);else{console.log("",{bestSwapAmount:qt,receiveAmount:nr,left:ur,right:hr,index:Lt,maxRemainAmount:tt,res:Vt,verify_price_loop:le});break}}else ur=qt.add(1);if(ur.gt(hr))break}if(qt.lt(1))throw new Error("bestSwapAmount is less than the minimum precision");let fr,ar=!1;try{fr=await this.findRouters(t,a,C?e:n,C?n:e,qt,!0,C?l:f,C?f:l);let Lt=C?d$3(fr.swap_price):d$3(1).div(d$3(fr.swap_price)),Vt=d$3(fr.swap_out_amount).sub(nr).div(fr.swap_out_amount);if(ar=Vt.abs().lt(d$3(.03)),console.log(" ~ calculateSwapAmountByQuantity ~ priceDifference:",{priceDifference:Vt,receiveAmount:nr,swap_in_amount:fr.swap_in_amount,swap_out_amount:fr.swap_out_amount,routerPrice:Lt,swapPrice:Qe,verify_price_loop:le}),!ar&&le<3)return await this.calculateSwapAmountByQuantity(t,e,n,i,s,a,l,f,p,C,B,Lt.toString(),le+1)}catch(Lt){console.log(" ~ calculateSwapAmountByQuantity ~ error:",Lt)}return{swapAmount:qt.toFixed(0),receiveAmount:nr.toFixed(0),remainingA:ir.toFixed(0),remainingB:or.toFixed(0),swapResult:ar?fr:void 0}}},W$1=class{constructor(e){Or(this,"_cache",{});Or(this,"_sdkOptions");Or(this,"_zapModule");Or(this,"_aggregatorClient");Or(this,"_peripherySDK");Or(this,"_cetusClmmSDK");this._sdkOptions=e,this._cetusClmmSDK=e.env==="testnet"?initTestnetSDK(e.fullRpcUrl):initMainnetSDK(e.fullRpcUrl),this._peripherySDK=S_({fullNodeUrl:e.fullRpcUrl,env:e.env}),this._zapModule=new G(this),this._aggregatorClient=new AggregatorClient25({signer:normalizeSuiAddress$2("0x0"),client:new SuiClient$1({url:e.fullRpcUrl}),env:e.env==="testnet"?Env.Testnet:Env.Mainnet,pythUrls:e.pythUrls}),patchFixSuiObjectId(this._sdkOptions)}get senderAddress(){return this.CetusClmmSDK.senderAddress}set senderAddress(e){this.CetusClmmSDK.senderAddress=e,this._aggregatorClient.signer=e}get sdkOptions(){return this._sdkOptions}get Zap(){return this._zapModule}get FullClient(){return this._cetusClmmSDK.fullClient}get AggregatorClient(){return this._aggregatorClient}get CetusClmmSDK(){return this._cetusClmmSDK}get PeripherySDK(){return this._peripherySDK}getVerifySenderAddress(){if(this.senderAddress.length===0||!isValidSuiAddress$2(this.senderAddress))throw Error("this sdk senderAddress is illegal");return this.senderAddress}async getOwnerCoinAssets(e,n,i=!0){return await this._cetusClmmSDK.getOwnerCoinAssets(e,n,i)}async getOwnerCoinBalances(e,n){return await this._cetusClmmSDK.getOwnerCoinBalances(e,n)}updateProviders(e){if(e.length===0)throw new Error("providers is empty");this._sdkOptions.providers=e}updateCache(e,n,i=cacheTime24h){this.CetusClmmSDK.updateCache(e,n,i)}getCache(e,n=!1){return this.CetusClmmSDK.getCache(e,n)}},pt$1={env:"mainnet",fullRpcUrl:"https://fullnode.mainnet.sui.io",aggregatorUrl:"https://api-sui.cetus.zone/router_v2",providers:["CETUS","TURBOS","STEAMM","SPRINGSUI","HAEDAL","FLOWX","AFTERMATH","ALPHAFI","BLUEFIN","METASTABLE","VOLO","SCALLOP","KRIYA","FLOWXV3","DEEPBOOKV3","AFSUI","BLUEMOVE","KRIYAV3","HAEDALPMM","OBRIC"]};function gt$1(t){return t&&(pt$1.fullRpcUrl=t),new W$1(pt$1)}var _t={env:"testnet",fullRpcUrl:"https://fullnode.testnet.sui.io",aggregatorUrl:"https://api-sui.devcetus.com/router_v2",providers:["CETUS","DEEPBOOK","KRIYA","KRIYAV3","FLOWX","FLOWXV3","AFTERMATH","TURBOS","HAEDAL","VOLO","AFSUI"]};function ft$1(t){return t&&(_t.fullRpcUrl=t),new W$1(_t)}var Tt=(t=>(t.mainnet="mainnet",t.testnet="testnet",t))(Tt||{});function ke$1(t){let{env:e,fullNodeUrl:n}=t;return e==="mainnet"?gt$1(n):ft$1(n)}var se;(function(t){t[t.EQUAL=0]="EQUAL",t[t.GREATER=1]="GREATER",t[t.LESS=-1]="LESS"})(se||(se={}));var Kt=function(){function t(e){this.compare=e||t.defaultCompareFunction}return t.defaultCompareFunction=function(e,n){return e===n?se.EQUAL:e<n?se.LESS:se.GREATER},t.prototype.equal=function(e,n){return this.compare(e,n)===se.EQUAL},t.prototype.lessThan=function(e,n){return this.compare(e,n)===se.LESS},t.prototype.greaterThan=function(e,n){return this.compare(e,n)===se.GREATER},t.prototype.lessThanOrEqual=function(e,n){return this.lessThan(e,n)||this.equal(e,n)},t.prototype.greaterThanOrEqual=function(e,n){return this.greaterThan(e,n)||this.equal(e,n)},t.prototype.reverse=function(){var e=this.compare;this.compare=function(n,i){return e(i,n)}},t}(),it=Kt,rt=function(){function t(e){this.value=e,this.next=null}return t}(),st=function(){function t(e){this.value=e,this.next=null,this.prev=null}return t}(),Ne$1=function(t,e){return Ne$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)i.hasOwnProperty(s)&&(n[s]=i[s])},Ne$1(t,e)};function de$1(t,e){Ne$1(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function _e$1(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,s,a,l;return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(C){return function(B){return p([C,B])}}function p(C){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,s&&(a=C[0]&2?s.return:C[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,C[1])).done)return a;switch(s=0,a&&(C=[C[0]&2,a.value]),C[0]){case 0:case 1:a=C;break;case 4:return n.label++,{value:C[1],done:!1};case 5:n.label++,s=C[1],C=[0];continue;case 7:C=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(C[0]===6||C[0]===2)){n=0;continue}if(C[0]===3&&(!a||C[1]>a[0]&&C[1]<a[3])){n.label=C[1];break}if(C[0]===6&&n.label<a[1]){n.label=a[1],a=C;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(C);break}a[2]&&n.ops.pop(),n.trys.pop();continue}C=e.call(t,n)}catch(B){C=[6,B],s=0}finally{i=a=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}}function Wt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Z$1(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wt(arguments[e]));return t}var Xt="obfuse error occur";function Te(t,e){if(!t)throw new Error("[linked-list] "+(e||Xt))}var Jt=-1,at=function(){function t(){for(var e=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this._head=null,this._tail=null,this._length=0,this.compare=new it,n.length>0&&n.forEach(function(s){e.append(s)})}return Object.defineProperty(t.prototype,"head",{get:function(){return this._head?this._head.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this._tail?this._tail.value:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loopLength",{get:function(){var e=!1,n=1;if(!this._head)return 0;for(var i=this._head,s=this._head;s.next&&s.next.next;)if(s=s.next.next,i=i.next,i===s){e=!0;break}if(e){for(s=s.next;i!==s;)n++,s=s.next;return n}else return 0},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e){var n=this._length;Te(n>0&&e>=0&&e<n,"[linked-list] index "+e+" out of scope of list, which length is "+n);for(var i=this._head,s=0;s<e;)i=i.next,s++;return i},t.prototype.get=function(e){var n=this.getNode(e);return n?n.value:null},t.prototype.find=function(e){var n=e.value,i=e.callback;if(!this._head)return null;for(var s=this._head;s;){if(i&&i(s.value)||n!==void 0&&this.compare.equal(s.value,n))return s;s=s.next}return null},t.prototype.indexOf=function(e){if(!this._head)return Jt;for(var n=this._head,i=-1;n.next;){if(i++,this.compare.equal(n.value,e))return i;n=n.next}return n===this._tail&&this.compare.equal(n.value,e)&&(i+=1),i},t.prototype.first=function(e){Te(e>=0,"[linked-list] param 'num' ("+e+") should not less than 0");for(var n=this.iterator(),i=[],s=Math.min(e,this.length),a=0;a<s;a++){var l=n.next();i.push(l.value)}return i},t.prototype.toArray=function(){return Z$1(this)},t.prototype.isEmpty=function(){return this._head===null},t.prototype.iterator=function(){var e;return _e$1(this,function(n){switch(n.label){case 0:e=this._head,n.label=1;case 1:return e?[4,e.value]:[3,3];case 2:return n.sent(),e=e.next,[3,1];case 3:return[2]}})},t.prototype[Symbol.iterator]=function(){return this.iterator()},t}(),ue=function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.apply(this,Z$1(n))||this}return e.prototype.append=function(n){var i=new rt(n);return this._tail?(this._tail.next=i,this._tail=i):this._head=this._tail=i,this._length++,!0},e.prototype.prepend=function(n){var i=new rt(n);return this._head?(i.next=this._head,this._head=i):this._head=this._tail=i,this._length++,!0},e.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,i.next=null):this._head=this._tail=null,this._length--,n;for(var s=i;;){if(this.compare.equal(i.value,n))return i.next?s.next=i.next:(this._tail=s,this._tail.next=null),i.next=null,this._length--,n;if(i.next)s=i,i=i.next;else return}}},e.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.removeTail=function(){var n=this._tail;if(n){if(!this._head.next)this._head=null,this._tail=null;else{for(var i=this._head;i.next!==n;)i=i.next;i.next=null,this._tail=i}return this._length--,n.value}},e.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,i=n,n=s;this._head=i}},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,Z$1([void 0],n)))},e}(at),zt=function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,Z$1(n))||this;return s.cyclization(),s}return e.prototype.iterator=function(){var n;return _e$1(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var n;return _e$1(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var a=t.prototype[n].apply(this,i);return this.cyclization(),a},e.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},e.prototype.append=function(n){return this.mapToNormalListFn("append",n)},e.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},e.prototype.find=function(n){return this.mapToNormalListFn("find",n)},e.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},e.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(n){Te(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],a=0;a<n;a++){var l=i.next();s.push(l.value)}return s},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(ue);(function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,Z$1(n))||this;return s.cyclization(),s}return e.prototype.breakCircle=function(){this._tail&&this._tail.next===this._head&&(this._tail.next=null)},e.prototype.cyclization=function(){this._tail&&this._tail.next===null&&(this._tail.next=this._head)},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,Z$1([void 0],n)))},e})(zt);var Ht=function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return t.apply(this,Z$1(n))||this}return e.prototype.append=function(n){var i=new st(n);return this._tail?(this._tail.next=i,i.prev=this._tail,this._tail=i):this._head=this._tail=i,this._length++,!0},e.prototype.prepend=function(n){var i=new st(n);return this._head?(i.next=this._head,this._head.prev=i,this._head=i):this._head=this._tail=i,this._length++,!0},e.prototype.remove=function(n){var i=this._head;if(i){if(this.compare.equal(i.value,n))return i.next?(this._head=i.next,this._head.prev=null,i.next=i.prev=null):this._head=this._tail=null,this._length--,n;for(;;){if(this.compare.equal(i.value,n))return i.next?(i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null):(i.prev.next=null,this._tail=i.prev,i.next=i.prev=null),this._length--,i.value;if(i.next)i=i.next;else return}}},e.prototype.removeHead=function(){var n=this._head;if(n)return this._head.next?(n.next.prev=null,this._head=n.next,n.next=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.removeTail=function(){var n=this._tail;if(n)return this._head.next?(n.prev.next=null,this._tail=n.prev,n.next=n.prev=null):(this._head=null,this._tail=null),this._length--,n.value},e.prototype.reverse=function(){if(this._head){var n=this._head,i=null,s;for(this._tail=this._head;n!==null;)s=n.next,n.next=i,n.prev=s,i=n,n=s;this._head=i}},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,Z$1([void 0],n)))},e}(at),Zt=function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,Z$1(n))||this;return s.cyclization(),s}return e.prototype.iterator=function(){var n;return _e$1(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,n===this._head&&(n=null),[3,1];case 3:return[2]}})},e.prototype.circleIterator=function(){var n;return _e$1(this,function(i){switch(i.label){case 0:n=this._head,i.label=1;case 1:return n?[4,n.value]:[3,3];case 2:return i.sent(),n=n.next,[3,1];case 3:return[2]}})},e.prototype[Symbol.iterator]=function(){return this.iterator()},e.prototype.mapToNormalListFn=function(n){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];this.breakCircle();var a=t.prototype[n].apply(this,i);return this.cyclization(),a},e.prototype.getNode=function(n){return this.mapToNormalListFn("getNode",n)},e.prototype.append=function(n){return this.mapToNormalListFn("append",n)},e.prototype.prepend=function(n){return this.mapToNormalListFn("prepend",n)},e.prototype.find=function(n){return this.mapToNormalListFn("find",n)},e.prototype.indexOf=function(n){return this.mapToNormalListFn("indexOf",n)},e.prototype.remove=function(n){return this.mapToNormalListFn("remove",n)},e.prototype.removeHead=function(){return this.mapToNormalListFn("removeHead")},e.prototype.removeTail=function(){return this.mapToNormalListFn("removeTail")},e.prototype.first=function(n){Te(n>=0,"[linked-list] param 'num' ("+n+") should not less than 0");for(var i=this.circleIterator(),s=[],a=0;a<n;a++){var l=i.next();s.push(l.value)}return s},e.prototype.toArray=function(){return this.mapToNormalListFn("toArray")},e.prototype.reverse=function(){return this.mapToNormalListFn("reverse")},e}(Ht);(function(t){de$1(e,t);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=t.apply(this,Z$1(n))||this;return s.cyclization(),s}return e.prototype.breakCircle=function(){this._tail&&this._head&&this._tail.next===this._head&&(this._tail.next=null,this._head.prev=null)},e.prototype.cyclization=function(){this._head&&this._tail&&this._tail.next===null&&(this._tail.next=this._head,this._head.prev=this._tail)},e.prototype.clone=function(){var n=this.toArray();return new(e.bind.apply(e,Z$1([void 0],n)))},e})(Zt);function Qt(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function Yt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qt(arguments[e]));return t}(function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.queue=new(ue.bind.apply(ue,Yt([void 0],e)))}return Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peek",{get:function(){return this.queue.head},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.queue.isEmpty()},t.prototype.enqueue=function(e){return this.queue.append(e)},t.prototype.dequeue=function(){var e=this.queue.removeHead();return typeof e<"u"?e:void 0},t.prototype.toArray=function(){return this.queue.toArray()},t})();function tn(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),s,a=[],l;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)a.push(s.value)}catch(f){l={error:f}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(l)throw l.error}}return a}function nn(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(tn(arguments[e]));return t}(function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.stack=new(ue.bind.apply(ue,nn([void 0],e)))}return Object.defineProperty(t.prototype,"length",{get:function(){return this.stack.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"peek",{get:function(){return this.stack.tail},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this.stack.isEmpty()},t.prototype.push=function(e){return this.stack.append(e)},t.prototype.pop=function(){var e=this.stack.removeTail();return typeof e<"u"?e:void 0},t.prototype.popBottom=function(){var e=this.stack.removeHead();return typeof e<"u"?e:void 0},t.prototype.toArray=function(){return this.stack.toArray()},t})();var un=Object.defineProperty,ln=(t,e,n)=>e in t?un(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dn=(t,e,n)=>(ln(t,e+"",n),n),At=5*60*1e3,te=24*60*60*1e3;function ie(t){return Date.parse(new Date().toString())+t}var me$1=class{constructor(e,n=0){Or(this,"overdueTime");Or(this,"value");this.overdueTime=n,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};Decimal$1.config({precision:64,rounding:Decimal$1.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var W=Decimal$1,q=class extends Error{constructor(e,n){super(e);Or(this,"message");Or(this,"errorCode");this.message=e,this.errorCode=n}static isClmmpoolsErrorCode(e,n){return e instanceof q&&e.errorCode===n}},E=new BN(0),he$1=new BN(1),xe=new BN(2);xe.pow(new BN(128));var Ge=xe.pow(new BN(64)).sub(he$1),pn=xe.pow(new BN(128)).sub(he$1),ee$1=class{static toX64_BN(e){return e.mul(new BN(2).pow(new BN(64)))}static toX64_Decimal(e){return e.mul(W.pow(2,64))}static toX64(e){return new BN(e.mul(W.pow(2,64)).floor().toFixed())}static fromX64(e){return new W(e.toString()).mul(W.pow(2,-64))}static fromX64_Decimal(e){return e.mul(W.pow(2,-64))}static fromX64_BN(e){return e.div(new BN(2).pow(new BN(64)))}static shiftRightRoundUp(e){let n=e.shrn(64);return e.mod(Ge).gt(E)&&(n=n.add(he$1)),n}static divRoundUp(e,n){return e.mod(n).eq(E)?e.div(n):e.div(n).add(new BN(1))}static subUnderflowU128(e,n){return e.lt(n)?e.sub(n).add(pn):e.sub(n)}static checkUnsignedSub(e,n){let i=e.sub(n);if(i.isNeg())throw new q("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,n,i){let s=e.mul(n);if(this.isOverflow(s,i))throw new q("Multiplication overflow","MultiplicationOverflow");return s}static checkMulDivFloor(e,n,i,s){if(i.eq(E))throw new q("Devide by zero","DivideByZero");let a=e.mul(n).div(i);if(this.isOverflow(a,s))throw new q("Multiplication div overflow","MulDivOverflow");return a}static checkMulDivCeil(e,n,i,s){if(i.eq(E))throw new q("Devide by zero","DivideByZero");let a=e.mul(n).add(i.sub(he$1)).div(i);if(this.isOverflow(a,s))throw new q("Multiplication div overflow","MulDivOverflow");return a}static checkMulDivRound(e,n,i,s){if(i.eq(E))throw new q("Devide by zero","DivideByZero");let a=e.mul(n.add(i.shrn(1))).div(i);if(this.isOverflow(a,s))throw new q("Multiplication div overflow","MulDivOverflow");return a}static checkMulShiftRight(e,n,i,s){let a=e.mul(n).div(new BN(2).pow(new BN(i)));if(this.isOverflow(a,s))throw new q("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftRight64RoundUpIf(e,n,i,s){let a=e.mul(n),l=s&&a.and(Ge).gt(E)?a.shrn(64).add(he$1):a.shrn(64);if(this.isOverflow(l,i))throw new q("Multiplication shift right overflow","MulShiftRightOverflow");return l}static checkMulShiftLeft(e,n,i,s){let a=e.mul(n).shln(i);if(this.isOverflow(a,s))throw new q("Multiplication shift left overflow","MulShiftLeftOverflow");return a}static checkDivRoundUpIf(e,n,i){if(n.eq(E))throw new q("Devide by zero","DivideByZero");return i?this.divRoundUp(e,n):e.div(n)}static isOverflow(e,n){return e.gte(xe.pow(new BN(n)))}static sign(e){return e.testn(127)?1:0}static is_neg(e){return this.sign(e)===1}static abs_u128(e){return e.gt(E)?e:this.u128_neg(e.subn(1))}static u128_neg(e){return e.uxor(new BN("ffffffffffffffffffffffffffffffff",16))}static neg(e){return this.is_neg(e)?e.abs():this.neg_from(e)}static abs(e){return this.sign(e)===0?e:this.u128_neg(e.sub(new BN(1)))}static neg_from(e){return e.eq(E)?e:this.u128_neg(e).add(new BN(1)).or(new BN(1).shln(127))}},vt="79226673515401279992447579055",Ct="4295048016",dt=new BN(1e6),J$1="0x0000000000000000000000000000000000000000000000000000000000000006",ft="pool_script_v2",Se="router",Me="router_with_partner",pt="utils",$e="custodian_v2",_n="clob_v2",hn="endpoints_v2";function F(t){if(t.config===void 0)throw new q(`package: ${t.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return t.config}var gn=14,bn="59543866431248",wn="184467440737095516",yn="15793534762490258745";function An(t,e,n){let i=t.toTwos(n).shln(e);return i.imaskn(n+1),i.fromTwos(n)}function S(t,e,n){let i=t.toTwos(n).shrn(e);return i.imaskn(n-e+1),i.fromTwos(n-e)}function vn(t){let e;return t&1?e=new BN("79232123823359799118286999567"):e=new BN("79228162514264337593543950336"),t&2&&(e=S(e.mul(new BN("79236085330515764027303304731")),96,256)),t&4&&(e=S(e.mul(new BN("79244008939048815603706035061")),96,256)),t&8&&(e=S(e.mul(new BN("79259858533276714757314932305")),96,256)),t&16&&(e=S(e.mul(new BN("79291567232598584799939703904")),96,256)),t&32&&(e=S(e.mul(new BN("79355022692464371645785046466")),96,256)),t&64&&(e=S(e.mul(new BN("79482085999252804386437311141")),96,256)),t&128&&(e=S(e.mul(new BN("79736823300114093921829183326")),96,256)),t&256&&(e=S(e.mul(new BN("80248749790819932309965073892")),96,256)),t&512&&(e=S(e.mul(new BN("81282483887344747381513967011")),96,256)),t&1024&&(e=S(e.mul(new BN("83390072131320151908154831281")),96,256)),t&2048&&(e=S(e.mul(new BN("87770609709833776024991924138")),96,256)),t&4096&&(e=S(e.mul(new BN("97234110755111693312479820773")),96,256)),t&8192&&(e=S(e.mul(new BN("119332217159966728226237229890")),96,256)),t&16384&&(e=S(e.mul(new BN("179736315981702064433883588727")),96,256)),t&32768&&(e=S(e.mul(new BN("407748233172238350107850275304")),96,256)),t&65536&&(e=S(e.mul(new BN("2098478828474011932436660412517")),96,256)),t&131072&&(e=S(e.mul(new BN("55581415166113811149459800483533")),96,256)),t&262144&&(e=S(e.mul(new BN("38992368544603139932233054999993551")),96,256)),S(e,32,256)}function Cn(t){let e=Math.abs(t),n;return e&1?n=new BN("18445821805675392311"):n=new BN("18446744073709551616"),e&2&&(n=S(n.mul(new BN("18444899583751176498")),64,256)),e&4&&(n=S(n.mul(new BN("18443055278223354162")),64,256)),e&8&&(n=S(n.mul(new BN("18439367220385604838")),64,256)),e&16&&(n=S(n.mul(new BN("18431993317065449817")),64,256)),e&32&&(n=S(n.mul(new BN("18417254355718160513")),64,256)),e&64&&(n=S(n.mul(new BN("18387811781193591352")),64,256)),e&128&&(n=S(n.mul(new BN("18329067761203520168")),64,256)),e&256&&(n=S(n.mul(new BN("18212142134806087854")),64,256)),e&512&&(n=S(n.mul(new BN("17980523815641551639")),64,256)),e&1024&&(n=S(n.mul(new BN("17526086738831147013")),64,256)),e&2048&&(n=S(n.mul(new BN("16651378430235024244")),64,256)),e&4096&&(n=S(n.mul(new BN("15030750278693429944")),64,256)),e&8192&&(n=S(n.mul(new BN("12247334978882834399")),64,256)),e&16384&&(n=S(n.mul(new BN("8131365268884726200")),64,256)),e&32768&&(n=S(n.mul(new BN("3584323654723342297")),64,256)),e&65536&&(n=S(n.mul(new BN("696457651847595233")),64,256)),e&131072&&(n=S(n.mul(new BN("26294789957452057")),64,256)),e&262144&&(n=S(n.mul(new BN("37481735321082")),64,256)),n}var O=class{static priceToSqrtPriceX64(t,e,n){return ee$1.toX64(t.mul(W.pow(10,n-e)).sqrt())}static sqrtPriceX64ToPrice(t,e,n){return ee$1.fromX64(t).pow(2).mul(W.pow(10,e-n))}static tickIndexToSqrtPriceX64(t){return t>0?new BN(vn(t)):new BN(Cn(t))}static sqrtPriceX64ToTickIndex(t){if(t.gt(new BN(vt))||t.lt(new BN(Ct)))throw new q("Provided sqrtPrice is not within the supported sqrtPrice range.","InvalidSqrtPrice");let e=t.bitLength()-1,n=new BN(e-64),i=An(n,32,128),s=new BN("8000000000000000","hex"),a=0,l=new BN(0),f=e>=64?t.shrn(e-63):t.shln(63-e);for(;s.gt(new BN(0))&&a<gn;){f=f.mul(f);let le=f.shrn(127);f=f.shrn(63+le.toNumber()),l=l.add(s.mul(le)),s=s.shrn(1),a+=1}let p=l.shrn(32),C=i.add(p).mul(new BN(bn)),B=S(C.sub(new BN(wn)),64,128).toNumber(),N=S(C.add(new BN(yn)),64,128).toNumber();return B===N?B:O.tickIndexToSqrtPriceX64(N).lte(t)?N:B}static tickIndexToPrice(t,e,n){return O.sqrtPriceX64ToPrice(O.tickIndexToSqrtPriceX64(t),e,n)}static priceToTickIndex(t,e,n){return O.sqrtPriceX64ToTickIndex(O.priceToSqrtPriceX64(t,e,n))}static priceToInitializableTickIndex(t,e,n,i){return O.getInitializableTickIndex(O.priceToTickIndex(t,e,n),i)}static getInitializableTickIndex(t,e){return t-t%e}static getNextInitializableTickIndex(t,e){return O.getInitializableTickIndex(t,e)+e}static getPrevInitializableTickIndex(t,e){return O.getInitializableTickIndex(t,e)-e}};new BN(365);new BN(24);new BN(3600);new BN(.5);var ne=class{static getDefaultSqrtPriceLimit(t){return new BN(t?Ct:vt)}static getDefaultOtherAmountThreshold(t){return t?E:Ge}};function Pe(t,e,n){let i=BN.min(t,e),s=BN.max(t,e),a=ee$1.fromX64_BN(n.mul(s).mul(i)),l=s.sub(i);return!a.isZero()&&!l.isZero()?a.div(l):new BN(0)}function Ie(t,e,n){let i=BN.min(t,e),s=BN.max(t,e).sub(i);return s.isZero()?new BN(0):n.shln(64).div(s)}var V=class{static updateFeeRate(t,e,n,i,s){let a=ee$1.checkMulDivCeil(e,new BN(i),dt,64),l=n===0?E:ee$1.checkMulDivFloor(e,new BN(n),dt,64),f=e.mul(a).mul(l);if(s?t.feeProtocolCoinA=t.feeProtocolCoinA.add(a):t.feeProtocolCoinB=t.feeProtocolCoinB.add(a),f.eq(E)||t.liquidity.eq(E))return{refFee:l,clmm:t};let p=f.shln(64).div(t.liquidity);return s?t.feeGrowthGlobalA=t.feeGrowthGlobalA.add(p):t.feeGrowthGlobalB=t.feeGrowthGlobalB.add(p),{refFee:l,clmm:t}}static getCoinAmountFromLiquidity(t,e,n,i,s){let a=new W(t.toString()),l=new W(e.toString()),f=new W(n.toString()),p=new W(i.toString()),C,B;return e.lt(n)?(C=ee$1.toX64_Decimal(a).mul(p.sub(f)).div(f.mul(p)),B=new W(0)):e.lt(i)?(C=ee$1.toX64_Decimal(a).mul(p.sub(l)).div(l.mul(p)),B=ee$1.fromX64_Decimal(a.mul(l.sub(f)))):(C=new W(0),B=ee$1.fromX64_Decimal(a.mul(p.sub(f)))),s?{coinA:new BN(C.ceil().toString()),coinB:new BN(B.ceil().toString())}:{coinA:new BN(C.floor().toString()),coinB:new BN(B.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(t,e,n,i,s,a,l){let f=O.sqrtPriceX64ToTickIndex(l),p=O.tickIndexToSqrtPriceX64(t),C=O.tickIndexToSqrtPriceX64(e),B;if(f<t){if(!i)throw new q("lower tick cannot calculate liquidity by coinB","NotSupportedThisCoin");B=Pe(p,C,n)}else if(f>e){if(i)throw new q("upper tick cannot calculate liquidity by coinA","NotSupportedThisCoin");B=Ie(C,p,n)}else i?B=Pe(l,C,n):B=Ie(l,p,n);let N=V.getCoinAmountFromLiquidity(B,l,p,C,s),le=s?b(N.coinA.toString()).mul(1+a).toString():b(N.coinA.toString()).mul(1-a).toString(),Ee=s?b(N.coinB.toString()).mul(1+a).toString():b(N.coinB.toString()).mul(1-a).toString();return{coinAmountA:N.coinA,coinAmountB:N.coinB,tokenMaxA:s?new BN(W.ceil(le).toString()):new BN(W.floor(le).toString()),tokenMaxB:s?new BN(W.ceil(Ee).toString()):new BN(W.floor(Ee).toString()),liquidityAmount:B,fix_amount_a:i}}static estimateLiquidityFromcoinAmounts(t,e,n,i){if(e>n)throw new q("lower tick cannot be greater than lower tick","InvalidTwoTickIndex");let s=O.sqrtPriceX64ToTickIndex(t),a=O.tickIndexToSqrtPriceX64(e),l=O.tickIndexToSqrtPriceX64(n);if(s<e)return Pe(a,l,i.coinA);if(s>=n)return Ie(l,a,i.coinB);let f=Pe(t,l,i.coinA),p=Ie(t,a,i.coinB);return BN.min(f,p)}static estCoinAmountsFromTotalAmount(t,e,n,i,s,a){let{ratioA:l,ratioB:f}=V.calculateDepositRatioFixTokenA(t,e,n),p=b(i).mul(l).div(s),C=b(i).mul(f).div(a);return{amountA:p,amountB:C}}static calculateDepositRatioFixTokenA(t,e,n){let i=new BN(1e8),{coinAmountB:s}=V.estLiquidityAndcoinAmountFromOneAmounts(t,e,i,!0,!0,0,n),a=O.sqrtPriceX64ToPrice(n,0,0),l=b(i.toString()).mul(a),f=l.add(s.toString()),p=l.div(f),C=b(s.toString()).div(f);return{ratioA:p,ratioB:C}}};function mt(t,...e){let n=Array.isArray(e[e.length-1])?e.pop():[],i=[t,...e].filter(Boolean).join("::");return n&&n.length&&(i+=`<${n.join(", ")}>`),i}function P(t){var e,n;try{let i=t.replace(/\s/g,""),s=(n=(e=i.match(/(<.+>)$/))==null?void 0:e[0])==null?void 0:n.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){i=i.slice(0,i.indexOf("<"));let f={...P(i),type_arguments:s.map(p=>P(p).source_address)};return f.type_arguments=f.type_arguments.map(p=>I.isSuiCoin(p)?p:P(p).source_address),f.source_address=mt(f.full_address,f.type_arguments),f}let a=i.split("::"),l={full_address:i,address:i===be$1||i===In?"0x2":normalizeSuiObjectId$2(a[0]),module:a[1],name:a[2],type_arguments:[],source_address:""};return l.full_address=`${l.address}::${l.module}::${l.name}`,l.source_address=mt(l.full_address,l.type_arguments),l}catch{return{full_address:t,address:"",module:"",name:"",type_arguments:[],source_address:t}}}function ge$1(t){return P(t).source_address}function kn(t){return t.toLowerCase().startsWith("0x")?normalizeSuiObjectId$2(t):t}function Ke(t){for(let e in t){let n=typeof t[e];if(n==="object")Ke(t[e]);else if(n==="string"){let i=t[e];i&&!i.includes("::")&&(t[e]=kn(i))}}}var Sn="0x2::coin::Coin",Pn=/^0x2::coin::Coin<(.+)>$/,be$1="0x2::sui::SUI",In="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",I=class{static getCoinTypeArg(t){let e=t.type.match(Pn);return e?e[1]:null}static isSUI(t){let e=I.getCoinTypeArg(t);return e?I.getCoinSymbol(e)==="SUI":!1}static getCoinSymbol(t){return t.substring(t.lastIndexOf(":")+1)}static getBalance(t){return BigInt(t.fields.balance)}static totalBalance(t,e){let n=BigInt(0);return t.forEach(i=>{e===i.coinAddress&&(n+=BigInt(i.balance))}),n}static getID(t){return t.fields.id.id}static getCoinTypeFromArg(t){return`${Sn}<${t}>`}static getFaucetCoins(t){let{events:e}=t,n=[];return e==null||e.forEach(i=>{let{type:s}=i;if(P(s).name==="InitEvent"){let a=i.parsedJson;n.push({transactionModule:i.transactionModule,suplyID:a.suplyID,decimals:a.decimals})}}),n}static getCoinAssets(t,e){let n=[];return e.forEach(i=>{ge$1(i.coinAddress)===ge$1(t)&&n.push(i)}),n}static isSuiCoin(t){return P(t).full_address===be$1}static selectCoinObjectIdGreaterThanOrEqual(t,e,n=[]){let i=I.selectCoinAssetGreaterThanOrEqual(t,e,n),s=i.selectedCoins.map(f=>f.coinObjectId),a=i.remainingCoins,l=i.selectedCoins.map(f=>f.balance.toString());return{objectArray:s,remainCoins:a,amountArray:l}}static selectCoinAssetGreaterThanOrEqual(t,e,n=[]){let i=I.sortByBalance(t.filter(p=>!n.includes(p.coinObjectId))),s=I.calculateTotalBalance(i);if(s<e)return{selectedCoins:[],remainingCoins:i};if(s===e)return{selectedCoins:i,remainingCoins:[]};let a=BigInt(0),l=[],f=[...i];for(;a<s;){let p=e-a,C=f.findIndex(N=>N.balance>=p);if(C!==-1){l.push(f[C]),f.splice(C,1);break}let B=f.pop();B.balance>0&&(l.push(B),a+=B.balance)}return{selectedCoins:I.sortByBalance(l),remainingCoins:I.sortByBalance(f)}}static sortByBalance(t){return t.sort((e,n)=>e.balance<n.balance?-1:e.balance>n.balance?1:0)}static sortByBalanceDes(t){return t.sort((e,n)=>e.balance>n.balance?-1:e.balance<n.balance?0:1)}static calculateTotalBalance(t){return t.reduce((e,n)=>e+n.balance,BigInt(0))}};function On(t,{numerator:e,denominator:n},i){return i?t.mul(n.add(e)).div(n):t.mul(n).div(n.add(e))}function b(t){return Decimal$1.isDecimal(t)?t:new Decimal$1(t===void 0?0:t)}function kt(t){return t.data}function xn(t){if(t.error&&"object_id"in t.error&&"version"in t.error&&"digest"in t.error){let{error:e}=t;return{objectId:e.object_id,version:e.version,digest:e.digest}}}function Bn(t){if(t.error&&"object_id"in t.error&&!("version"in t.error)&&!("digest"in t.error))return t.error.object_id}function Rn(t){if("reference"in t)return t.reference;let e=kt(t);return e?{objectId:e.objectId,version:e.version,digest:e.digest}:xn(t)}function ht(t){var e;return"objectId"in t?t.objectId:((e=Rn(t))==null?void 0:e.objectId)??Bn(t)}function jn(t){return t.data!==void 0}function qn(t){return t.content!==void 0}function St(t){let e="data"in t?kt(t):t;if(!(!e||!qn(e)||e.content.dataType!=="moveObject"))return e.content}function Pt(t){var e;return(e=St(t))==null?void 0:e.type}function It(t){var n;let e=jn(t)?t.data:t;return!(e!=null&&e.type)&&"data"in t?((n=e==null?void 0:e.content)==null?void 0:n.dataType)==="package"?"package":Pt(t):e==null?void 0:e.type}function ae(t){var n;let e=(n=St(t))==null?void 0:n.fields;if(e)return"fields"in e?e.fields:e}function gt(t,e=32){return BigInt.asUintN(e,BigInt(t)).toString()}function re(t,e=32){return Number(BigInt.asIntN(e,BigInt(t)))}function Dn(t,e,n){let i=P(t).name,s=P(e).name;return`${i}-${s}[${n}]`}function We(t){let e=Pt(t),n=P(e),i=ae(t);if(i==null)throw new q(`Pool id ${ht(t)} not exists.`,"InvalidPoolObject");let s=[];i.rewarder_manager.fields.rewarders.forEach(l=>{let{emissions_per_second:f}=l.fields,p=ee$1.fromX64(new BN(f)),C=Math.floor(p.toNumber()*60*60*24);s.push({emissions_per_second:f,coinAddress:P(l.fields.reward_coin.fields.name).source_address,growth_global:l.fields.growth_global,emissionsEveryDay:C})});let a={poolAddress:ht(t),poolType:e,coinTypeA:n.type_arguments[0],coinTypeB:n.type_arguments[1],coinAmountA:i.coin_a,coinAmountB:i.coin_b,current_sqrt_price:i.current_sqrt_price,current_tick_index:re(BigInt(i.current_tick_index.fields.bits)),fee_growth_global_a:i.fee_growth_global_a,fee_growth_global_b:i.fee_growth_global_b,fee_protocol_coin_a:i.fee_protocol_coin_a,fee_protocol_coin_b:i.fee_protocol_coin_b,fee_rate:i.fee_rate,is_pause:i.is_pause,liquidity:i.liquidity,position_manager:{positions_handle:i.position_manager.fields.positions.fields.id.id,size:i.position_manager.fields.positions.fields.size},rewarder_infos:s,rewarder_last_updated_time:i.rewarder_manager.fields.last_updated_time,tickSpacing:i.tick_spacing,ticks_handle:i.tick_manager.fields.ticks.fields.id.id,uri:i.url,index:Number(i.index),name:""};return a.name=Dn(a.coinTypeA,a.coinTypeB,a.tickSpacing),a}function En(t){let e=I.isSuiCoin(t.coinTypeA),n=I.isSuiCoin(t.coinTypeB);return{isAdjustCoinA:e,isAdjustCoinB:n}}function Nn(t,e){return Decimal$1.ceil(b(t).div(1+e)).toString()}var T$1=class{static createCollectRewarderAndFeeParams(e,n,i,s,a,l){a===void 0&&(a=[...s]),l===void 0&&(l=[...s]);let f=ge$1(i.coinTypeA),p=ge$1(i.coinTypeB);if(i.collect_fee){let B=T$1.buildCoinForAmount(n,a,BigInt(0),f,!1);a=B.remainCoins;let N=T$1.buildCoinForAmount(n,l,BigInt(0),p,!1);l=N.remainCoins,n=e.Position.createCollectFeePaylod({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB},n,B.targetCoin,N.targetCoin)}let C=[];return i.rewarder_coin_types.forEach(B=>{switch(ge$1(B)){case f:C.push(T$1.buildCoinForAmount(n,a,BigInt(0),B,!1).targetCoin);break;case p:C.push(T$1.buildCoinForAmount(n,l,BigInt(0),B,!1).targetCoin);break;default:C.push(T$1.buildCoinForAmount(n,s,BigInt(0),B,!1).targetCoin);break}}),n=e.Rewarder.createCollectRewarderPaylod(i,n,C),n}static async adjustTransactionForGas(e,n,i,s){s.setSender(e.senderAddress);let a=I.selectCoinAssetGreaterThanOrEqual(n,i).selectedCoins;if(a.length===0)throw new q("Insufficient balance","InsufficientBalance");let l=I.calculateTotalBalance(n);if(l-i>1e9)return{fixAmount:i};let f=await e.fullClient.calculationTxGas(s);if(I.selectCoinAssetGreaterThanOrEqual(n,BigInt(f),a.map(p=>p.coinObjectId)).selectedCoins.length===0){let p=BigInt(f)+BigInt(500);if(l-i<p){if(i-=p,i<0)throw new q("gas Insufficient balance","InsufficientBalance");let C=new Transaction$1;return{fixAmount:i,newTx:C}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,n,i,s,a,l,f){a=await T$1.buildAddLiquidityFixToken(e,n,i,a,l,f);let{isAdjustCoinA:p}=En(i),C=p?i.amount_a:i.amount_b,B=await T$1.adjustTransactionForGas(e,I.getCoinAssets(p?i.coinTypeA:i.coinTypeB,n),BigInt(C),a),{fixAmount:N}=B,{newTx:le}=B;if(le!=null){let Ee,Ue;if(p)i.amount_a=Number(N),Ee=T$1.buildAddLiquidityFixTokenCoinInput(le,!i.fix_amount_a,N.toString(),i.slippage,i.coinTypeA,n,!1,!0),Ue=T$1.buildAddLiquidityFixTokenCoinInput(le,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,n,!1,!0);else return i.amount_b=Number(N),Ee=T$1.buildAddLiquidityFixTokenCoinInput(le,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,n,!1,!0),Ue=T$1.buildAddLiquidityFixTokenCoinInput(le,i.fix_amount_a,N.toString(),i.slippage,i.coinTypeB,n,!1,!0),i=T$1.fixAddLiquidityFixTokenParams(i,s.slippage,s.curSqrtPrice),a=await T$1.buildAddLiquidityFixTokenArgs(le,e,n,i,Ee,Ue),a}return a}static async buildAddLiquidityFixToken(e,n,i,s,a,l){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");s=s||new Transaction$1;let f,p;return a==null||l==null?(f=T$1.buildAddLiquidityFixTokenCoinInput(s,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,n,!1,!0),p=T$1.buildAddLiquidityFixTokenCoinInput(s,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,n,!1,!0)):(f={targetCoin:a,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"},p={targetCoin:l,remainCoins:[],isMintZeroCoin:!1,tragetCoinAmount:"0"}),s=T$1.buildAddLiquidityFixTokenArgs(s,e,n,i,f,p),s}static buildAddLiquidityFixTokenCoinInput(e,n,i,s,a,l,f=!0,p=!0){return n?T$1.buildCoinForAmountInterval(e,l,{amountSecond:BigInt(Nn(i,s)),amountFirst:BigInt(i)},a,f,p):T$1.buildCoinForAmount(e,l,BigInt(i),a,f,p)}static fixAddLiquidityFixTokenParams(e,n,i){let s=e.fix_amount_a?e.amount_a:e.amount_b,a=V.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new BN(s),e.fix_amount_a,!0,n,i);return e.amount_a=e.fix_amount_a?e.amount_a:a.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?a.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,n,i,s,a,l){let f=[s.coinTypeA,s.coinTypeB],p=s.is_open?"open_position_with_liquidity_by_fix_coin":"add_liquidity_by_fix_coin",{clmm_pool:C,integrate:B}=n.sdkOptions;s.is_open||(e=T$1.createCollectRewarderAndFeeParams(n,e,s,i,a.remainCoins,l.remainCoins));let N=F(C),le=s.is_open?[e.object(N.global_config_id),e.object(s.pool_id),e.pure.u32(Number(gt(BigInt(s.tick_lower)).toString())),e.pure.u32(Number(gt(BigInt(s.tick_upper)).toString())),a.targetCoin,l.targetCoin,e.pure.u64(s.amount_a),e.pure.u64(s.amount_b),e.pure.bool(s.fix_amount_a),e.object(J$1)]:[e.object(N.global_config_id),e.object(s.pool_id),e.object(s.pos_id),a.targetCoin,l.targetCoin,e.pure.u64(s.amount_a),e.pure.u64(s.amount_b),e.pure.bool(s.fix_amount_a),e.object(J$1)];return e.moveCall({target:`${B.published_at}::${ft}::${p}`,typeArguments:f,arguments:le}),e}static async buildSwapTransactionForGas(e,n,i,s){let a=T$1.buildSwapTransaction(e,n,i);a.setSender(e.senderAddress);let l=await T$1.adjustTransactionForGas(e,I.getCoinAssets(n.a2b?n.coinTypeA:n.coinTypeB,i),BigInt(n.by_amount_in?n.amount:n.amount_limit),a),{fixAmount:f,newTx:p}=l;if(p!==void 0){p.setSender(e.senderAddress),n.by_amount_in?n.amount=f.toString():n.amount_limit=f.toString(),n=await T$1.fixSwapParams(e,n,s);let C=T$1.buildCoinForAmount(a,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA),B=T$1.buildCoinForAmount(a,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB);a=T$1.buildSwapTransactionArgs(p,n,e.sdkOptions,C,B)}return a}static buildSwapTransaction(e,n,i){let s=new Transaction$1;s.setSender(e.senderAddress);let a=T$1.buildCoinForAmount(s,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1),l=T$1.buildCoinForAmount(s,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1);return s=T$1.buildSwapTransactionArgs(s,n,e.sdkOptions,a,l),s}static buildSwapTransactionArgs(e,n,i,s,a){let{clmm_pool:l,integrate:f}=i,p=ne.getDefaultSqrtPriceLimit(n.a2b),C=[n.coinTypeA,n.coinTypeB],{global_config_id:B}=F(l);if(B===void 0)throw Error("clmm.config.global_config_id is undefined");let N=n.swap_partner!==void 0,le=N?n.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":n.a2b?"swap_a2b":"swap_b2a",Ee=N?[e.object(B),e.object(n.pool_id),e.object(n.swap_partner),s.targetCoin,a.targetCoin,e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u64(n.amount_limit),e.pure.u128(p.toString()),e.object(J$1)]:[e.object(B),e.object(n.pool_id),s.targetCoin,a.targetCoin,e.pure.bool(n.by_amount_in),e.pure.u64(n.amount),e.pure.u64(n.amount_limit),e.pure.u128(p.toString()),e.object(J$1)];return e.moveCall({target:`${f.published_at}::${ft}::${le}`,typeArguments:C,arguments:Ee}),e}static async buildSwapTransactionWithoutTransferCoinsForGas(e,n,i,s){let{tx:a,coinABs:l}=T$1.buildSwapTransactionWithoutTransferCoins(e,n,i);a.setSender(e.senderAddress);let f=await T$1.adjustTransactionForGas(e,I.getCoinAssets(n.a2b?n.coinTypeA:n.coinTypeB,i),BigInt(n.by_amount_in?n.amount:n.amount_limit),a),{fixAmount:p,newTx:C}=f;if(C!==void 0){C.setSender(e.senderAddress),n.by_amount_in?n.amount=p.toString():n.amount_limit=p.toString(),n=await T$1.fixSwapParams(e,n,s);let B=T$1.buildCoinForAmount(a,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1,!0),N=T$1.buildCoinForAmount(a,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1,!0),le=T$1.buildSwapTransactionWithoutTransferCoinArgs(e,C,n,e.sdkOptions,B,N);a=le.tx,l=le.txRes}return{tx:a,coinABs:l}}static buildSwapTransactionWithoutTransferCoins(e,n,i){let s=new Transaction$1;s.setSender(e.senderAddress);let a=T$1.buildCoinForAmount(s,i,n.a2b?BigInt(n.by_amount_in?n.amount:n.amount_limit):BigInt(0),n.coinTypeA,!1,!0),l=T$1.buildCoinForAmount(s,i,n.a2b?BigInt(0):BigInt(n.by_amount_in?n.amount:n.amount_limit),n.coinTypeB,!1,!0),f=T$1.buildSwapTransactionWithoutTransferCoinArgs(e,s,n,e.sdkOptions,a,l);return{tx:f.tx,coinABs:f.txRes}}static buildSwapTransactionWithoutTransferCoinArgs(e,n,i,s,a,l){let{clmm_pool:f,integrate:p}=s,C=ne.getDefaultSqrtPriceLimit(i.a2b),{global_config_id:B}=F(f);if(B===void 0)throw Error("clmm.config.global_config_id is undefined");let N=i.swap_partner!==void 0,le=N?"swap_with_partner":"swap",Ee=N?Me:Se,Ue=N?[n.object(B),n.object(i.pool_id),n.object(i.swap_partner),a.targetCoin,l.targetCoin,n.pure.bool(i.a2b),n.pure.bool(i.by_amount_in),n.pure.u64(i.amount),n.pure.u128(C.toString()),n.pure.bool(!1),n.object(J$1)]:[n.object(B),n.object(i.pool_id),a.targetCoin,l.targetCoin,n.pure.bool(i.a2b),n.pure.bool(i.by_amount_in),n.pure.u64(i.amount),n.pure.u128(C.toString()),n.pure.bool(!1),n.object(J$1)],ze=[i.coinTypeA,i.coinTypeB],Ze=n.moveCall({target:`${p.published_at}::${Ee}::${le}`,typeArguments:ze,arguments:Ue});if(i.by_amount_in){let Qe=i.a2b?i.coinTypeB:i.coinTypeA,ct=i.a2b?Ze[1]:Ze[0],wt=Number(i.amount_limit);this.checkCoinThreshold(e,i.by_amount_in,n,ct,wt,Qe)}return{tx:n,txRes:Ze}}static async fixSwapParams(e,n,i){let{currentPool:s}=i;try{let a=await e.Swap.preswap({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:n.a2b,byAmountIn:n.by_amount_in,amount:n.amount,pool:s,currentSqrtPrice:s.current_sqrt_price,coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB}),l=i.byAmountIn?a.estimatedAmountOut:a.estimatedAmountIn,f=On(l,i.slippage,!i.byAmountIn);n.amount_limit=f.toString()}catch(a){console.log("fixSwapParams",a)}return n}static async syncBuildCoinInputForAmount(e,n,i,s,a=!0,l=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let f=await e.getOwnerCoinAssets(e.senderAddress,s);return T$1.buildCoinForAmount(n,f,i,s,a,l).targetCoin}static buildCoinForAmount(e,n,i,s,a=!0,l=!0){let f=I.getCoinAssets(s,n);if(i===BigInt(0))return T$1.buildZeroValueCoin(n,e,s,a);let p=I.calculateTotalBalance(f);if(p<i)throw new q(`The amount(${p}) is Insufficient balance for ${s} , expect ${i} `,"InsufficientBalance");return T$1.buildCoin(e,n,f,i,s,a,l)}static buildVectorCoin(e,n,i,s,a,l=!0){if(I.isSuiCoin(a)){let le=e.splitCoins(e.gas,[e.pure.u64(s)]);return{targetCoin:e.makeMoveVec({elements:[le]}),remainCoins:n,tragetCoinAmount:s.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}let{targetCoin:f,originalSplitedCoin:p,tragetCoinAmount:C,selectedCoinsResult:B,coinObjectIds:N}=this.buildSpitTargeCoin(e,s,i,l);return l?{targetCoin:e.makeMoveVec({elements:[f]}),remainCoins:B.remainCoins,originalSplitedCoin:p,tragetCoinAmount:C,isMintZeroCoin:!1}:{targetCoin:e.makeMoveVec({elements:N.map(le=>e.object(le))}),remainCoins:B.remainCoins,tragetCoinAmount:B.amountArray.reduce((le,Ee)=>Number(le)+Number(Ee),0).toString(),isMintZeroCoin:!1}}static buildOneCoin(e,n,i,s,a=!0){if(I.isSuiCoin(s)){if(i===0n&&n.length>1){let N=I.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.object(N.objectArray[0]),remainCoins:N.remainCoins,tragetCoinAmount:N.amountArray[0],isMintZeroCoin:!1}}let B=I.selectCoinObjectIdGreaterThanOrEqual(n,i);return{targetCoin:e.splitCoins(e.gas,[e.pure.u64(i)]),remainCoins:B.remainCoins,tragetCoinAmount:i.toString(),isMintZeroCoin:!1,originalSplitedCoin:e.gas}}let{targetCoin:l,originalSplitedCoin:f,tragetCoinAmount:p,selectedCoinsResult:C}=this.buildSpitTargeCoin(e,i,n,a);return{targetCoin:l,remainCoins:C.remainCoins,originalSplitedCoin:f,tragetCoinAmount:p,isMintZeroCoin:!1}}static buildSpitTargeCoin(e,n,i,s){let a=I.selectCoinObjectIdGreaterThanOrEqual(i,n),l=a.amountArray.reduce((Ue,ze)=>Number(Ue)+Number(ze),0).toString(),f=a.objectArray,[p,...C]=f,B=e.object(p),N=B,le=a.amountArray.reduce((Ue,ze)=>Number(Ue)+Number(ze),0).toString(),Ee;return C.length>0&&e.mergeCoins(B,C.map(Ue=>e.object(Ue))),s&&Number(l)>Number(n)&&(N=e.splitCoins(B,[e.pure.u64(n)]),Ee=B),{originalSplitedCoin:Ee,targetCoin:N,tragetCoinAmount:le,selectedCoinsResult:a,coinObjectIds:f}}static buildCoin(e,n,i,s,a,l=!0,f=!0){return l?this.buildVectorCoin(e,n,i,s,a,f):this.buildOneCoin(e,i,s,a,f)}static buildZeroValueCoin(e,n,i,s=!0){let a=T$1.callMintZeroValueCoin(n,i),l;return s?l=n.makeMoveVec({elements:[a]}):l=a,{targetCoin:l,remainCoins:e,isMintZeroCoin:!0,tragetCoinAmount:"0"}}static buildCoinForAmountInterval(e,n,i,s,a=!0,l=!0){let f=I.getCoinAssets(s,n);if(i.amountFirst===BigInt(0))return f.length>0?T$1.buildCoin(e,[...n],[...f],i.amountFirst,s,a,l):T$1.buildZeroValueCoin(n,e,s,a);let p=I.calculateTotalBalance(f);if(p>=i.amountFirst)return T$1.buildCoin(e,[...n],[...f],i.amountFirst,s,a,l);if(p<i.amountSecond)throw new q(`The amount(${p}) is Insufficient balance for ${s} , expect ${i.amountSecond} `,"InsufficientBalance");return T$1.buildCoin(e,[...n],[...f],i.amountSecond,s,a,l)}static async buildRouterSwapTransaction(e,n,i,s,a){let l=new Transaction$1;return n.paths.length>1&&(n.partner=""),l=await this.buildRouterBasePathTx(e,n,i,s,l,a),l}static async buildRouterBasePathTx(e,n,i,s,a,l){let f=n.paths.filter(qt=>qt&&qt.poolAddress),p=Number(f.reduce((qt,nr)=>qt.add(nr.amountIn),E).toString()),C=Number(f.reduce((qt,nr)=>qt.add(nr.amountOut),E).toString()),B=Math.round(i?Number(C.toString())*(1-n.priceSlippagePoint):Number(p.toString())*(1+n.priceSlippagePoint)),N=n.paths[0].coinType[0],le=n.paths[0].coinType[n.paths[0].coinType.length-1],Ee=T$1.buildCoinForAmount(a,s,BigInt(i?p:B),N,!1,!0),Ue=Ee.originalSplitedCoin!==void 0,ze=T$1.buildCoinForAmount(a,s,0n,le,!1),Ze=await this.buildRouterBasePathReturnCoins(e,n,i,Ee,ze,a),Qe=[],{toCoin:ct,fromCoin:wt}=Ze;if(a=Ze.tx,ze.isMintZeroCoin?Qe.push({coinType:le,coin:ct}):ze.originalSplitedCoin!==void 0?a.mergeCoins(ze.originalSplitedCoin,[ct]):a.mergeCoins(ze.targetCoin,[ct]),Ue){let qt=Ee==null?void 0:Ee.originalSplitedCoin;a.mergeCoins(qt,[wt])}else Qe.push({coinType:N,coin:wt});for(let qt=0;qt<Qe.length;qt++)this.buildTransferCoin(e,a,Qe[qt].coin,Qe[qt].coinType,l);return a}static async buildRouterBasePathReturnCoins(e,n,i,s,a,l){let{clmm_pool:f,integrate:p}=e.sdkOptions,C=F(f).global_config_id,B=n.paths.filter(qt=>qt&&qt.poolAddress),N=Number(B.reduce((qt,nr)=>qt.add(nr.amountIn),E).toString()),le=Number(B.reduce((qt,nr)=>qt.add(nr.amountOut),E).toString()),Ee=Math.round(i?Number(le.toString())*(1-n.priceSlippagePoint):Number(N.toString())*(1+n.priceSlippagePoint)),Ue=n.paths[0].coinType[0],ze=n.paths[0].coinType[n.paths[0].coinType.length-1],Ze=s.targetCoin,Qe;a.isMintZeroCoin||a.originalSplitedCoin!==void 0?Qe=a.targetCoin:Qe=T$1.callMintZeroValueCoin(l,ze);let ct=n.partner==="",wt=ct?Se:Me;for(let qt of B)if(qt.poolAddress.length===1){let nr=qt.a2b[0],ir={amount:Number(qt.amountIn.toString()),poolCoinA:qt.a2b[0]?Ue:ze,poolCoinB:qt.a2b[0]?ze:Ue},or=ct?"swap":"swap_with_partner",ur=nr?Ze:Qe,hr=nr?Qe:Ze,fr=i?qt.amountIn.toString():qt.amountOut.toString(),ar=ne.getDefaultSqrtPriceLimit(nr).toString(),Lt=ct?[l.object(C),l.object(qt.poolAddress[0]),ur,hr,l.pure.bool(nr),l.pure.bool(i),l.pure.u64(fr),l.pure.u128(ar),l.pure.bool(!1),l.object(J$1)]:[l.object(C),l.object(qt.poolAddress[0]),l.object(n.partner),ur,hr,l.pure.bool(nr),l.pure.bool(i),l.pure.u64(fr),l.pure.u128(ar),l.pure.bool(!1),l.object(J$1)],Vt=[ir.poolCoinA,ir.poolCoinB],tt=l.moveCall({target:`${e.sdkOptions.integrate.published_at}::${wt}::${or}`,typeArguments:Vt,arguments:Lt});Ze=nr?tt[0]:tt[1],Qe=nr?tt[1]:tt[0]}else{let nr=i?qt.amountIn:qt.rawAmountLimit[0],ir=i?0:qt.amountOut,or="";qt.a2b[0]?qt.a2b[1]?or="swap_ab_bc":or="swap_ab_cb":qt.a2b[1]?or="swap_ba_bc":or="swap_ba_cb",ct||(or=`${or}_with_partner`);let ur=ne.getDefaultSqrtPriceLimit(qt.a2b[0]),hr=ne.getDefaultSqrtPriceLimit(qt.a2b[1]),fr=ct?[l.object(C),l.object(qt.poolAddress[0]),l.object(qt.poolAddress[1]),Ze,Qe,l.pure.bool(i),l.pure.u64(nr.toString()),l.pure.u64(ir.toString()),l.pure.u128(ur.toString()),l.pure.u128(hr.toString()),l.object(J$1)]:[l.object(C),l.object(qt.poolAddress[0]),l.object(qt.poolAddress[1]),l.object(n.partner),Ze,Qe,l.pure.bool(i),l.pure.u64(nr.toString()),l.pure.u64(ir.toString()),l.pure.u128(ur.toString()),l.pure.u128(hr.toString()),l.object(J$1)],ar=[qt.coinType[0],qt.coinType[1],qt.coinType[2]],Lt=l.moveCall({target:`${p.published_at}::${wt}::${or}`,typeArguments:ar,arguments:fr});Ze=Lt[0],Qe=Lt[1]}return this.checkCoinThreshold(e,i,l,Qe,Ee,ze),{fromCoin:Ze,toCoin:Qe,tx:l}}static async buildAggregatorSwapReturnCoins(e,n,i,s,a,l,f,p){if(p==null){if(e.senderAddress.length===0)throw Error("recipient and this config sdk senderAddress all not set");p=e.senderAddress}n.splitPaths.length>1&&(a="");let C,B,N=n.splitPaths.some(le=>le.basePaths.some(Ee=>Ee.label==="Deepbook"));if((!n.byAmountIn||n.splitPaths.length===1)&&!N){let le=[];for(let ze of n.splitPaths){let Ze=[],Qe=[],ct=[],wt=[];for(let nr=0;nr<ze.basePaths.length;nr+=1){let ir=ze.basePaths[nr];Ze.push(ir.direction),Qe.push(ir.poolAddress),ct.push(new BN(ir.inputAmount.toString())),nr===0?wt.push(ir.fromCoin,ir.toCoin):wt.push(ir.toCoin)}let qt={amountIn:new BN(ze.inputAmount.toString()),amountOut:new BN(ze.outputAmount.toString()),poolAddress:Qe,a2b:Ze,rawAmountLimit:ct,isExceed:!1,coinType:wt};le.push(qt)}let Ee={paths:le,partner:a,priceSlippagePoint:l},Ue=await this.buildRouterBasePathReturnCoins(e,Ee,n.byAmountIn,i,s,f);C=Ue.fromCoin,B=Ue.toCoin,f=Ue.tx}else{let le=Math.round(n.outputAmount*(1-l));C=i.targetCoin,s.isMintZeroCoin||s.originalSplitedCoin!==void 0?B=s.targetCoin:B=T$1.callMintZeroValueCoin(f,n.toCoin);let Ee=!1,Ue;if(N){let[ze,Ze]=bt.createAccountCap(p,e.sdkOptions,f);f=Ze,Ue=ze,Ee=!0}for(let ze=0;ze<n.splitPaths.length;ze+=1){let Ze=n.splitPaths[ze],Qe;for(let ct=0;ct<Ze.basePaths.length;ct+=1){let wt=Ze.basePaths[ct];if(wt.label==="Deepbook")if(ct===0)if(Ze.basePaths.length===1){let qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,C,B,!1);C=qt.from,B=qt.to}else{Qe=T$1.callMintZeroValueCoin(f,wt.toCoin);let qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,C,Qe,!1);C=qt.from,Qe=qt.to}else{let qt=this.buildDeepbookBasePathTx(e,wt,f,Ue,Qe,B,!0);Qe=qt.from,B=qt.to}if(wt.label==="Cetus")if(ct===0)if(Ze.basePaths.length===1){let qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,C,B,!1,a);C=qt.from,B=qt.to}else{Qe=T$1.callMintZeroValueCoin(f,wt.toCoin);let qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,C,Qe,!1,a);C=qt.from,Qe=qt.to}else{let qt=this.buildClmmBasePathTx(e,wt,f,n.byAmountIn,Qe,B,!0,a);Qe=qt.from,B=qt.to,f.moveCall({target:`${e.sdkOptions.integrate.published_at}::${pt}::send_coin`,typeArguments:[wt.fromCoin],arguments:[Qe,f.pure.address(p)]})}}}this.checkCoinThreshold(e,n.byAmountIn,f,B,le,n.toCoin),Ee&&(f=bt.deleteAccountCapByObject(Ue,e.sdkOptions,f))}return{fromCoin:C,toCoin:B,tx:f}}static async buildAggregatorSwapTransaction(e,n,i,s,a,l){let f=new Transaction$1,p=n.byAmountIn?Math.round(n.outputAmount*(1-a)):Math.round(n.inputAmount*(1+a)),C=T$1.buildCoinForAmount(f,i,n.byAmountIn?BigInt(n.inputAmount):BigInt(p),n.fromCoin,!1,!0),B=C.originalSplitedCoin!=null,N=T$1.buildCoinForAmount(f,i,0n,n.toCoin,!1),le=await this.buildAggregatorSwapReturnCoins(e,n,C,N,s,a,f,l),{fromCoin:Ee,toCoin:Ue}=le;f=le.tx;let ze=[];if(N.isMintZeroCoin?ze.push({coinType:n.toCoin,coin:Ue}):N.originalSplitedCoin!=null?f.mergeCoins(N.originalSplitedCoin,[Ue]):f.mergeCoins(N.targetCoin,[Ue]),B){let Ze=C.originalSplitedCoin;f.mergeCoins(Ze,[Ee])}else ze.push({coinType:n.fromCoin,coin:Ee});for(let Ze=0;Ze<ze.length;Ze++)this.buildTransferCoin(e,f,ze[Ze].coin,ze[Ze].coinType,l);return f}static checkCoinThreshold(e,n,i,s,a,l){n&&i.moveCall({target:`${e.sdkOptions.integrate.published_at}::${Se}::check_coin_threshold`,typeArguments:[l],arguments:[s,i.pure.u64(a)]})}static buildDeepbookBasePathTx(e,n,i,s,a,l,f){let p=n.direction?a:l,C=n.direction?l:a,B=[i.object(n.poolAddress),s,i.pure.u64(n.inputAmount),i.pure.u64(0),i.pure.bool(n.direction),p,C,i.pure.bool(f),i.object(J$1)],N=n.direction?[n.fromCoin,n.toCoin]:[n.toCoin,n.fromCoin],le=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:N,arguments:B});return a=n.direction?le[0]:le[1],l=n.direction?le[1]:le[0],{from:a,to:l,tx:i}}static buildClmmBasePathTx(e,n,i,s,a,l,f,p){let{clmm_pool:C,integrate:B}=e.sdkOptions,N=F(C).global_config_id,le=n.direction?a:l,Ee=n.direction?l:a,Ue=p==="",ze=Ue?Se:Me,Ze=Ue?"swap":"swap_with_partner",Qe=s?n.inputAmount.toString():n.outputAmount.toString(),ct=ne.getDefaultSqrtPriceLimit(n.direction),wt=Ue?[i.object(N),i.object(n.poolAddress),le,Ee,i.pure.bool(n.direction),i.pure.bool(s),i.pure.u64(Qe),i.pure.u128(ct.toString()),i.pure.bool(f),i.object(J$1)]:[i.object(N),i.object(n.poolAddress),i.object(p),le,Ee,i.pure.bool(n.direction),i.pure.bool(s),i.pure.u64(Qe),i.pure.u128(ct.toString()),i.pure.bool(f),i.object(J$1)],qt=n.direction?[n.fromCoin,n.toCoin]:[n.toCoin,n.fromCoin],nr=i.moveCall({target:`${B.published_at}::${ze}::${Ze}`,typeArguments:qt,arguments:wt});return le=nr[0],Ee=nr[1],a=n.direction?le:Ee,l=n.direction?Ee:le,{from:a,to:l,tx:i}}static buildCoinTypePair(e,n){let i=[];if(e.length===2){let s=[];s.push(e[0],e[1]),i.push(s)}else{let s=[];s.push(e[0],e[e.length-1]),i.push(s);for(let a=1;a<e.length-1;a+=1){if(n[a-1]===0)continue;let l=[];l.push(e[0],e[a],e[e.length-1]),i.push(l)}}return i}static buildTransferCoinToSender(e,n,i,s){n.moveCall({target:`${e.sdkOptions.integrate.published_at}::${pt}::transfer_coin_to_sender`,typeArguments:[s],arguments:[i]})}static buildTransferCoin(e,n,i,s,a){a!=null?n.transferObjects([i],n.pure.address(a)):T$1.buildTransferCoinToSender(e,n,i,s)}},oe=T$1;dn(oe,"callMintZeroValueCoin",(t,e)=>t.moveCall({target:"0x2::coin::zero",typeArguments:[e]}));var pe=new BN(1e9),bt=class{static createAccountCap(t,e,n,i=!1){if(t.length===0)throw Error("this config sdk senderAddress is empty");let{deepbook:s}=e,[a]=n.moveCall({target:`${s.published_at}::${_n}::create_account`,typeArguments:[],arguments:[]});return i&&n.transferObjects([a],n.pure.address(t)),[a,n]}static deleteAccountCap(t,e,n){let{deepbook:i}=e,s=[n.object(t)];return n.moveCall({target:`${i.published_at}::${$e}::delete_account_cap`,typeArguments:[],arguments:s}),n}static deleteAccountCapByObject(t,e,n){let{deepbook:i}=e,s=[t];return n.moveCall({target:`${i.published_at}::${$e}::delete_account_cap`,typeArguments:[],arguments:s}),n}static async getAccountCap(t,e=!0){let n=await t.fullClient.getOwnedObjectsByPage(t.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:e,showOwner:!0},filter:{MoveModule:{package:t.sdkOptions.deepbook.package_id,module:$e}}});return n.data.length===0?"":n.data[0].data.objectId}static async getPools(t){let e=t.sdkOptions.deepbook.package_id,n=[];try{(await t.fullClient.queryEventsByPage({MoveEventType:`${e}::clob_v2::PoolCreated`})).data.forEach(i=>{let s=i.parsedJson;s&&n.push({poolID:s.pool_id,tickSize:Number(s.tick_size),lotSize:Number(s.lot_size),takerFeeRate:Number(s.taker_fee_rate),makerRebateRate:Number(s.maker_rebate_rate),baseAsset:s.base_asset.name,quoteAsset:s.quote_asset.name})})}catch(i){console.log("getPoolImmutables",i)}return n}static async getPoolAsks(t,e,n,i){var N;let{simulationAccount:s}=t.sdkOptions,{deepbook_endpoint_v2:a}=t.sdkOptions,l=new Transaction$1,f=[],p=[n,i],C=[l.object(e),l.pure.u64("0"),l.pure.u64("999999999999"),l.object(J$1)];l.moveCall({target:`${a.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:C,typeArguments:p});let B=(N=(await t.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:s.address})).events)==null?void 0:N.filter(le=>P(le.type).name==="BookStatus");if(B.length===0)return f;for(let le=0;le<B[0].parsedJson.depths.length;le++){let Ee=B[0].parsedJson.price[le],Ue=B[0].parsedJson.depths[le],ze={price:parseInt(Ee,10),quantity:parseInt(Ue,10)};f.push(ze)}return f}static async getPoolBids(t,e,n,i){var N;let{simulationAccount:s}=t.sdkOptions,{deepbook_endpoint_v2:a}=t.sdkOptions,l=new Transaction$1,f=[],p=[n,i],C=[l.object(e),l.pure.u64("0"),l.pure.u64("999999999999"),l.object(J$1)];l.moveCall({target:`${a.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:C,typeArguments:p});let B=(N=(await t.fullClient.devInspectTransactionBlock({transactionBlock:l,sender:s.address})).events)==null?void 0:N.filter(le=>P(le.type).name==="BookStatus");if(B.length===0)return f;for(let le=0;le<B[0].parsedJson.depths.length;le++){let Ee=B[0].parsedJson.price[le],Ue=B[0].parsedJson.depths[le],ze={price:parseInt(Ee,10),quantity:parseInt(Ue,10)};f.push(ze)}return f}static async preSwap(t,e,n,i){let s=!1,a=E,l=new BN(i),f=E,p=new BN(i);if(n){let C=await this.getPoolBids(t,e.poolID,e.baseAsset,e.quoteAsset);C===null&&(s=!0),C=C.sort((B,N)=>N.price-B.price);for(let B=0;B<C.length;B+=1){let N=new BN(C[B].quantity),le=new BN(C[B].price),Ee=N.mul(new BN(le)).mul(new BN(e.takerFeeRate)).div(pe).div(pe);if(l.gt(N))l=l.sub(N),a=a.add(N.mul(le).div(pe).sub(Ee)),f=f.add(Ee);else{let Ue=l.mul(new BN(C[B].price)).div(pe),ze=Ue.mul(new BN(e.takerFeeRate)).div(pe);a=a.add(Ue.sub(ze)),l=l.sub(l),f=f.add(ze)}if(l.eq(E))break}}else{let C=await this.getPoolAsks(t,e.poolID,e.baseAsset,e.quoteAsset);C===null&&(s=!0);for(let B=0;B<C.length;B+=1){let N=new BN(C[B].price).mul(new BN(C[B].quantity)).div(new BN(1e9)),le=N.mul(new BN(e.takerFeeRate)).div(pe),Ee=N.add(le);if(l.gt(N))a=a.add(new BN(C[B].quantity)),l=l.sub(Ee),f=f.add(le);else{let Ue=new BN(C[B].quantity).div(new BN(e.lotSize)),ze=Ee.div(Ue),Ze=l.div(ze);a=a.add(Ze.muln(e.lotSize)),l=l.sub(Ze.mul(ze)),f=f.add(Ze.div(Ue).mul(le))}if(l.eq(E))break}}return{poolAddress:e.poolID,estimatedAmountIn:p.sub(l).toNumber(),estimatedAmountOut:a.toNumber(),estimatedFeeAmount:f,isExceed:s,amount:Number(i),aToB:n,byAmountIn:!0}}static async simulateSwap(t,e,n,i,s,a){var ct,wt,qt;let{deepbook_endpoint_v2:l}=t.sdkOptions,f=new Transaction$1,p=await this.getAccountCap(t),C;if(p===""){let nr=this.createAccountCap(t.senderAddress,t.sdkOptions,f),ir=nr[0];f=nr[1],C=ir}else C=f.object(p);let B=await t.getOwnerCoinAssets(t.senderAddress),N=(ct=oe.buildCoinForAmount(f,B,BigInt(a),n,!1))==null?void 0:ct.targetCoin,le=(wt=oe.buildCoinForAmount(f,B,BigInt(a),i,!1))==null?void 0:wt.targetCoin,Ee=[n,i],Ue=[f.object(e),C,f.pure.u64(a),f.pure.u64(0),f.pure.bool(s),N,le,f.object(J$1)];f.moveCall({target:`${l.published_at}::${hn}::swap`,arguments:Ue,typeArguments:Ee});let{simulationAccount:ze}=t.sdkOptions,Ze=(qt=(await t.fullClient.devInspectTransactionBlock({transactionBlock:f,sender:ze.address})).events)==null?void 0:qt.filter(nr=>P(nr.type).name==="DeepbookSwapEvent");if(Ze.length===0)return null;let Qe=Ze[0].parsedJson;return{poolAddress:Qe.pool,estimatedAmountIn:Qe.amount_in,estimatedAmountOut:Qe.amount_out,aToB:Qe.atob}}};getFullnodeUrl$1("mainnet");getFullnodeUrl$1("testnet");var Ot="router",Xe="vaults",xt=1e4,Bt=(t=>(t.STATUS_RUNNING="STATUS_RUNNING",t.STATUS_REBALANCING="STATUS_REBALANCING",t))(Bt||{}),$n=(t=>(t.Haedal="Haedal",t.Volo="Volo",t.Aftermath="aftermath",t))($n||{}),Rt=(t=>(t.Cetus="Cetus",t.Haedal="Haedal",t.Volo="Volo",t.Aftermath="aftermath",t))(Rt||{}),jt=(t=>(t.Both="both",t.OneSide="oneSide",t))(jt||{}),Q=class extends Error{constructor(e,n){super(e);Or(this,"message");Or(this,"errorCode");this.message=e,this.errorCode=n}static isClmmpoolsErrorCode(e,n){return e instanceof Q&&e.errorCode===n}},we="0x0000000000000000000000000000000000000000000000000000000000000006",Je="router";function U$1(t){if(t.config===void 0)throw new Q(`package: ${t.package_id}  not config in sdk SdkOptions`,"InvalidConfig");return t.config}var R$1=class{static generateNextTickRange(e,n,i){let s=e-n/2,a=e+n/2;return{new_tick_lower:R$1.getValidTickIndex(s,i),new_tick_upper:R$1.getValidTickIndex(a,i)}}static calculateDepositRatio(e,n,i){let s=O.sqrtPriceX64ToTickIndex(i);if(s<e)return{ratioA:new Decimal$1(1),ratioB:new Decimal$1(0)};if(s>n)return{ratioA:new Decimal$1(0),ratioB:new Decimal$1(1)};let a=new BN(1e8),{coinAmountB:l}=V.estLiquidityAndcoinAmountFromOneAmounts(e,n,a,!0,!0,0,i),f=O.sqrtPriceX64ToPrice(i,0,0),p=b(a.toString()).mul(f),C=p.add(l.toString()),B=p.div(C),N=b(l.toString()).div(C);return{ratioA:B,ratioB:N}}static getValidTickIndex(e,n){if(e%n===0)return e;let i;if(e>0?i=e-e%n+n:e<0?i=e+Math.abs(e)%n-n:i=e,i%n!==0)throw new Error("Assertion failed: res % tickSpacing == 0");if(Math.abs(i)<Math.abs(e))throw new Error("Assertion failed: res.abs() >= tickIndex");return i}static get_lp_amount_by_liquidity(e,n){return e.total_supply==="0"?"0":b(e.total_supply).mul(n).div(e.liquidity).toFixed(0,Decimal$1.ROUND_DOWN).toString()}static get_share_liquidity_by_amount(e,n){return e.total_supply==="0"?"0":b(n).mul(e.liquidity).div(e.total_supply).toFixed(0,Decimal$1.ROUND_DOWN).toString()}static get_protocol_fee_amount(e,n){return b(n).mul(e.protocol_fee_rate).div(xt).toFixed(0,Decimal$1.ROUND_CEIL)}static buildFramsPositionNFT(e){let n=e.clmm_postion.fields;return{id:e.id.id,url:n.url,pool_id:e.pool_id,coinTypeA:P(n.coin_type_a.fields.name).full_address,coinTypeB:P(n.coin_type_b.fields.name).full_address,description:n.description,name:n.name,liquidity:n.liquidity,clmm_position_id:n.id.id,clmm_pool_id:n.pool,tick_lower_index:re(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:re(BigInt(n.tick_upper_index.fields.bits)),rewards:[]}}static buildPool(e){let n=ae(e),i=It(e),{positions:s}=n;if(n&&s.length>0){let a=R$1.buildFramsPositionNFT(s[0].fields);return{id:n.id.id,pool_id:n.pool,protocol_fee_rate:n.protocol_fee_rate,is_pause:n.is_pause,harvest_assets:{harvest_assets_handle:n.harvest_assets.fields.id.id,size:Number(n.harvest_assets.fields.size)},lp_token_type:P(i).type_arguments[0],total_supply:n.lp_token_treasury.fields.total_supply.fields.value,liquidity:n.liquidity,max_quota:n.max_quota,status:n.status===1?"STATUS_RUNNING":"STATUS_REBALANCING",quota_based_type:n.quota_based_type.fields.name,position:a}}}static async getSuiCoin(e,n,i){let s=await e.getOwnerCoinAssets(e.getVerifySenderAddress(),be$1);i=i||new Transaction$1;let a;if(n>95e10){let[l,...f]=s;f.length>0&&i.mergeCoins(i.object(l.coinObjectId),f.map(p=>i.object(p.coinObjectId))),a=i.splitCoins(i.object(l.coinObjectId),[n])}else a=oe.buildCoinForAmount(i,s,BigInt(n),be$1,!1,!0).targetCoin;return a}static buildCoinWithBalance(e,n,i){return e===BigInt(0)&&I.isSuiCoin(n)?i.add(coinWithBalance({balance:e,useGasCoin:!1})):i.add(coinWithBalance({balance:e,type:n}))}},ye$1=class{static async getExchangeRateForStake(e,n,i){let{vaults:s}=e.sdkOptions,{haedal:a}=F(s);if(a===void 0)throw Error("the haedal config is undefined");let{simulationAccount:l}=e.sdkOptions,{staking_id:f}=F(a);try{let p=new Transaction$1;n?await this.requestStake(e,i||1e9,p):p.moveCall({target:`${a.published_at}::staking::get_exchange_rate`,typeArguments:[],arguments:[p.object(f)]});let C=await e.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:n?e.senderAddress:l.address});if(n){let N=C.events.find(Ue=>Ue.type.includes("UserStaked")),{sui_amount:le,st_amount:Ee}=N.parsedJson;return b(le).div(Ee).toString()}let B=C.results[0].returnValues[0][0];return b(suiBcs$2.u64().parse(Uint8Array.from(B))).div(1e6).toString()}catch(p){console.log("getExchangeRateForHaedal",p)}return"0"}static async requestStake(e,n,i){var l,f;let{vaults:s}=e.sdkOptions;i=i||new Transaction$1;let a=await R$1.getSuiCoin(e,n,i);return i.moveCall({target:`${(f=(l=s.config)==null?void 0:l.haedal)==null?void 0:f.published_at}::interface::request_stake`,typeArguments:[],arguments:[i.object(normalizeSuiObjectId$2("0x5")),i.object(s.config.haedal.config.staking_id),a,i.pure.address(normalizeSuiObjectId$2("0x0"))]}),i}static requestStakeCoin(e,n,i){let{haedal:s}=e.sdkOptions.vaults.config;return n.moveCall({target:`${s.published_at}::staking::request_stake_coin`,typeArguments:[],arguments:[n.object(normalizeSuiObjectId$2("0x5")),n.object(s.config.staking_id),i,n.pure.address(normalizeSuiObjectId$2("0x0"))]})}},Ae=class{static async getExchangeRateForStake(t,e,n){let{vaults:i}=t.sdkOptions,{volo:s}=F(i);if(s===void 0)throw Error("the volo config is undefined");let{simulationAccount:a}=t.sdkOptions,{native_pool:l,vsui_metadata:f}=F(s);try{let p=new Transaction$1;e?await this.requestStake(t,n||1e9,p):p.moveCall({target:`${s.published_at}::native_pool::get_ratio`,typeArguments:[],arguments:[p.object(l),p.object(f)]});let C=await t.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:e?t.senderAddress:a.address});if(e){let le=C.events.find(ze=>ze.type.includes("StakedEvent")),{cert_amount:Ee,sui_amount:Ue}=le.parsedJson;return b(Ue).div(Ee).toString()}let B=C.results[0].returnValues[0][0],N=b(suiBcs$2.u256().parse(Uint8Array.from(B))).div("1000000000000000000").toNumber();return b(1).div(N).toString()}catch(p){console.log("getExchangeRateForHaedal",p)}return"0"}static async requestStake(t,e,n){let{vaults:i}=t.sdkOptions,{volo:s}=F(i);if(s===void 0)throw Error("the volo config is undefined");n=n||new Transaction$1;let{native_pool:a,vsui_metadata:l}=F(s),f=await R$1.getSuiCoin(t,e,n);return n.moveCall({target:`${s.published_at}::native_pool::stake`,typeArguments:[],arguments:[n.object(a),n.object(l),n.object(normalizeSuiObjectId$2("0x5")),f]}),n}static requestStakeCoin(t,e,n){let{vaults:i}=t.sdkOptions,{volo:s}=F(i);if(s===void 0)throw Error("the volo config is undefined");e=e||new Transaction$1;let{native_pool:a,vsui_metadata:l}=F(s);return e.moveCall({target:`${s.published_at}::native_pool::stake_non_entry`,typeArguments:[],arguments:[e.object(a),e.object(l),e.object(normalizeSuiObjectId$2("0x5")),n]})}},ve=class{static async getExchangeRateForStake(t,e,n){let{vaults:i}=t.sdkOptions,{aftermath:s}=F(i);if(s===void 0)throw Error("the aftermath config is undefined");let{simulationAccount:a}=t.sdkOptions,{staked_sui_vault:l,safe:f}=F(s);try{let p=new Transaction$1;e?await this.requestStake(t,n||1e9,p):p.moveCall({target:`${s.published_at}::staked_sui_vault::afsui_to_sui_exchange_rate`,typeArguments:[],arguments:[p.object(l),p.object(f)]});let C=await t.fullClient.devInspectTransactionBlock({transactionBlock:p,sender:e?t.senderAddress:a.address});if(e){let N=C.events.find(Ue=>Ue.type.includes("StakedEvent")),{afsui_amount:le,sui_amount:Ee}=N.parsedJson;return b(Ee).div(le).toString()}let B=C.results[0].returnValues[0][0];return b(suiBcs$2.u128().parse(Uint8Array.from(B))).div(1e18).toString()}catch(p){console.log("getExchangeRateForHaedal",p)}return"0"}static async requestStake(t,e,n){let{vaults:i}=t.sdkOptions,{aftermath:s}=F(i);if(s===void 0)throw Error("the aftermath config is undefined");n=n||new Transaction$1;let{staked_sui_vault:a,referral_vault:l,safe:f,validator_address:p}=F(s),C=await R$1.getSuiCoin(t,e,n);return n.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake_and_keep`,typeArguments:[],arguments:[n.object(a),n.object(f),n.object(normalizeSuiObjectId$2("0x5")),n.object(l),C,n.pure.address(normalizeSuiObjectId$2(p))]}),n}static requestStakeCoin(t,e,n){let{vaults:i}=t.sdkOptions,{aftermath:s}=F(i);if(s===void 0)throw Error("the aftermath config is undefined");e=e||new Transaction$1;let{staked_sui_vault:a,referral_vault:l,safe:f,validator_address:p}=F(s);return e.moveCall({target:`${s.published_at}::staked_sui_vault::request_stake`,typeArguments:[],arguments:[e.object(a),e.object(f),e.object(normalizeSuiObjectId$2("0x5")),e.object(l),n,e.pure.address(normalizeSuiObjectId$2(p))]})}},qe=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});Or(this,"getOwnerVaultsBalance",async t=>{let{data:e}=await this.getVaultList(),n=[];for(let i=0;i<e.length;i++){let s=e[i],a=await this._sdk.fullClient.getBalance({owner:t,coinType:s.lp_token_type}),l=await this._sdk.Pool.getPool(s.pool_id,!0),f=R$1.get_share_liquidity_by_amount(s,a.totalBalance),{tick_lower_index:p,tick_upper_index:C,coinTypeA:B,coinTypeB:N}=s.position,le=O.tickIndexToSqrtPriceX64(p),Ee=O.tickIndexToSqrtPriceX64(C),Ue=V.getCoinAmountFromLiquidity(new bnExports.BN(f),new bnExports.BN(l.current_sqrt_price),le,Ee,!0);n.push({vault_id:e[i].id,clmm_pool_id:s.pool_id,owner:t,lp_token_type:s.lp_token_type,lp_token_balance:a.totalBalance,liquidity:f,tick_lower_index:p,tick_upper_index:C,amount_a:Ue.coinA.toString(),amount_b:Ue.coinB.toString(),coin_type_a:B,coin_type_b:N})}return n});this._sdk=t}get sdk(){return this._sdk}async calculateDepositAmount(t,e=!0,n=!1){return t.side==="both"?await this.calculateAmountFromBoth(t,!0):await this.calculateDepositAmountFromOneSide(t,e,n)}async calculateWithdrawAmount(t){if(t.side==="both"){if(t.is_ft_input)return{...await this.estLiquidityAmountFromFtAmount({...t,input_ft_amount:t.input_amount}),request_id:t.input_amount,burn_ft_amount:t.input_amount,side:t.side};let i=await this.calculateAmountFromBoth(t,!1);return{...i,request_id:t.input_amount,burn_ft_amount:i.ft_amount,side:t.side}}let{vault:e}=await this.getVaultAndPool(t.vault_id),n=R$1.get_share_liquidity_by_amount(e,t.max_ft_amount);return await this.calculateWithdrawAmountFromOneSide({fix_amount_a:t.fix_amount_a,vault_id:t.vault_id,receive_amount:t.is_ft_input?"0":t.input_amount,slippage:t.slippage,maxLiquidity:n,removeLiquidity:t.is_ft_input?R$1.get_share_liquidity_by_amount(e,t.input_amount):void 0},!0)}async calculateWithdrawAmountFromOneSide(t,e,n){try{let{vault_id:i,removeLiquidity:s,maxLiquidity:a}=t,{vault:l,pool:f}=await this.getVaultAndPool(i),{position:p}=l,C=p.tick_lower_index,B=p.tick_upper_index,N=s===a,le=R$1.calculateDepositRatio(C,B,new bnExports.BN(f.current_sqrt_price)),Ee=t.fix_amount_a?le.ratioA:le.ratioB,Ue=b(t.receive_amount).mul(Ee),ze,Ze;if(s){let ar=O.tickIndexToSqrtPriceX64(C),Lt=O.tickIndexToSqrtPriceX64(B),Vt=V.getCoinAmountFromLiquidity(new bnExports.BN(s),new bnExports.BN(f.current_sqrt_price),ar,Lt,!1);Ze=s,ze=t.fix_amount_a?Vt.coinB.toString():Vt.coinA.toString(),Ue=t.fix_amount_a?b(Vt.coinA.toString()):b(Vt.coinB.toString())}else{let ar=V.estLiquidityAndcoinAmountFromOneAmounts(C,B,new bnExports.BN(Ue.toFixed(0)),t.fix_amount_a,!1,t.slippage,new bnExports.BN(f.current_sqrt_price));Ze=ar.liquidityAmount.toString(),ze=t.fix_amount_a?ar.coinAmountB.toString():ar.coinAmountA.toString()}let Qe=!t.fix_amount_a,ct=await this.findRouters(f.poolAddress,f.current_sqrt_price.toString(),t.fix_amount_a?f.coinTypeB:f.coinTypeA,t.fix_amount_a?f.coinTypeA:f.coinTypeB,b(ze),!0,[f.poolAddress],{poolID:f.poolAddress,ticklower:C,tickUpper:B,deltaLiquidity:Number(Ze)}),wt=Ue.add(ct.amount_out),qt=b(t.receive_amount),nr=qt.sub(wt);if(!N&&(!t.removeLiquidity||t.removeLiquidity&&n)&&nr.abs().greaterThan(qt.mul(.01))){let ar=wt.lessThan(qt),Lt,Vt;n?ar?(Lt=b(Ze),Vt=n.right):(Lt=n.left,Vt=b(Ze)):(Lt=b(ar?Ze:0),Vt=b(ar?t.maxLiquidity:Ze));let tt=b(Lt).add(Vt).div(2).toFixed(0);if(!n||n&&n.count<15&&b(Lt).lt(b(Vt)))return await this.calculateWithdrawAmountFromOneSide({...t,removeLiquidity:tt},e,{left:Lt,right:Vt,count:n?n.count+1:0})}let ir=ct.amount_in&&ct.fee_amount?new bnExports.BN(ct.amount_in).add(new bnExports.BN(ct.fee_amount)).toString():ct.amount_in,or=ct.amount_out,{is_exceed:ur}=ct,hr=R$1.get_lp_amount_by_liquidity(l,Ze.toString());return{side:"oneSide",...await this.estLiquidityAmountFromFtAmount({vault_id:i,input_ft_amount:hr,slippage:t.slippage}),burn_ft_amount:hr,request_id:t.receive_amount,swap_result:{swap_in_amount:ir,swap_out_amount:or,a2b:Qe,is_exceed:ur,sui_stake_protocol:"Cetus",route_obj:ct.route_obj}}}catch(i){if(e&&(String(i)==="Error: route unavailable"||String(i)==="Error: router timeout"))return await this.calculateWithdrawAmountFromOneSide(t,!1);throw i}}async calculateDepositAmountFromOneSide(t,e,n=!1,i=!0,s=5,a=.02){try{let{vault_id:l,input_amount:f,fix_amount_a:p,slippage:C}=t,{vault:B,pool:N}=await this.getVaultAndPool(l),{position:le}=B,Ee=le.tick_lower_index,Ue=le.tick_upper_index,ze=O.sqrtPriceX64ToTickIndex(new bnExports.BN(N.current_sqrt_price)),{ratioA:Ze,ratioB:Qe}=R$1.calculateDepositRatio(Ee,Ue,new bnExports.BN(N.current_sqrt_price)),ct=b(f).mul(p?Ze:Qe),wt=b(f).sub(ct),qt=p;if(wt.toFixed(0)==="0")return await this.calculateAmountFromBoth(t,!0);let nr,ir,or,ur,hr,fr,ar,Lt=this.findSuiStakeProtocol(le.coinTypeA,le.coinTypeB,p);if(Lt!=="Cetus")nr=await this.calculateStakeDepositFixSui({inputSuiAmount:b(t.input_amount),swapSuiAmount:wt,lowerTick:Ee,upperTick:Ue,curSqrtPrice:N.current_sqrt_price.toString(),remainRate:.01,fixCoinA:t.fix_amount_a,rebalanceCount:0,shouldRequestStake:e,leftSuiAmount:qt?new Decimal$1(wt.toFixed(0)):new Decimal$1(0),rightSuiAmount:qt?new Decimal$1(t.input_amount):new Decimal$1(wt.toFixed(0)),slippage:C,stakeProtocol:Lt}),or=N.current_sqrt_price.toString(),ur=nr.fixAmountA,hr=nr.swapInAmount,fr=nr.swapOutAmount,ar=nr.swapOutAmountLimit;else{nr=await this.findRouters(N.poolAddress,N.current_sqrt_price.toString(),qt?N.coinTypeA:N.coinTypeB,qt?N.coinTypeB:N.coinTypeA,wt,!0,[N.poolAddress]),ir=this.paresSwapData(nr,t.input_amount,t.fix_amount_a,qt,Ee,Ue,Ze,Qe,C),ar=ir.swapOutAmountLimit;let er=b(t.input_amount).mul(a);if(b(t.input_amount).sub(ir.preAmountTotal).gt(er)){let rr={clmm_pool:N.poolAddress,curSqrtPrice:N.current_sqrt_price.toString(),a2b:qt,amount_a:b(qt?f:0),amount_b:b(qt?0:t.input_amount),amount_left:b(qt?wt.toFixed(0):0),amount_right:b(qt?f:wt.toFixed(0)),lowerTick:Ee,upperTick:Ue,tick_spacing:2,coinTypeA:le.coinTypeA,coinTypeB:le.coinTypeB,remainRate:.02,priceSplitPoint:C,useRoute:i,maxLoopLimit:s};nr=n&&ze<=Ue?await this.calculateRebalance(rr):await this.findRouters(N.poolAddress,N.current_sqrt_price.toString(),qt?N.coinTypeA:N.coinTypeB,qt?N.coinTypeB:N.coinTypeA,wt,!0,[N.poolAddress])}or=nr.after_sqrt_price,ir=this.paresSwapData(nr,t.input_amount,t.fix_amount_a,qt,Ee,Ue,Ze,Qe,C),ar=ir.swapOutAmountLimit,ur=ir.fixAmountA,hr=ir.swapInAmount,fr=ir.swapOutAmount,or=ir.afterSqrtPrice}let Vt=ur===p?b(f).sub(hr).toFixed(0):Lt==="Cetus"?ar:fr,tt=V.estLiquidityAndcoinAmountFromOneAmounts(Ee,Ue,new bnExports.BN(Vt),ur,!0,C,new bnExports.BN(or)),Ye=tt.coinAmountA.toString(),ot=tt.coinAmountB.toString(),Et=R$1.get_lp_amount_by_liquidity(B,tt.liquidityAmount.toString());return{request_id:t.input_amount,side:"oneSide",amount_a:Ye,amount_b:ot,amount_limit_a:tt.tokenMaxA.toString(),amount_limit_b:tt.tokenMaxB.toString(),ft_amount:Et,original_input_amount:t.input_amount,fix_amount_a:ur,swap_result:{swap_in_amount:hr,swap_out_amount:fr,a2b:p,sui_stake_protocol:Lt,route_obj:nr.route_obj,is_exceed:nr.is_exceed,afterSqrtPrice:or}}}catch(l){if(i&&(String(l)==="Error: route unavailable"||String(l)==="Error: router timeout"))return await this.calculateDepositAmountFromOneSide(t,e,!1);throw l}}paresSwapData(t,e,n,i,s,a,l,f,p){let C=t.after_sqrt_price,B=O.sqrtPriceX64ToTickIndex(new bnExports.BN(C)),{ratioA:N,ratioB:le}=R$1.calculateDepositRatio(s,a,new bnExports.BN(C)),Ee=le.div(N).sub(f.div(l)).greaterThan("0"),Ue=t.amount_in&&t.fee_amount?new bnExports.BN(t.amount_in).add(new bnExports.BN(t.fee_amount)).toString():t.amount_in,ze=t.amount_out,Ze=b(t.amount_out).mul(1-p).toFixed(0),Qe=Ee===i?new bnExports.BN(b(e).sub(Ue).toString()):new bnExports.BN(Ze),ct=b(e);if(B<s)Ee=!0;else if(B>a)Ee=!1;else{let wt=V.estLiquidityAndcoinAmountFromOneAmounts(s,a,Qe,Ee,!0,0,new bnExports.BN(C)),qt=wt.coinAmountA,nr=wt.coinAmountB;ct=b(n?qt.toString():nr.toString()).add(Ue),ct.greaterThanOrEqualTo(e)&&(Ee=!Ee)}return{preAmountTotal:ct,fixAmountA:Ee,swapInAmount:Ue,swapOutAmount:ze,swapOutAmountLimit:Ze,afterSqrtPrice:C}}async calculateStakeDepositFixSui(t){let e=t.inputSuiAmount.mul(t.remainRate),n=t.inputSuiAmount.sub(t.swapSuiAmount),i;t.shouldRequestStake?i=await this.getExchangeRateForStake(t.stakeProtocol,t.shouldRequestStake,Number(t.swapSuiAmount.toFixed(0))):i=t.exchangeRate?t.exchangeRate:await this.getExchangeRateForStake(t.stakeProtocol,t.shouldRequestStake,Number(t.swapSuiAmount.toFixed(0)));let s=t.swapSuiAmount.div(i).toFixed(0,Decimal$1.ROUND_DOWN),a=V.estLiquidityAndcoinAmountFromOneAmounts(t.lowerTick,t.upperTick,new bnExports.BN(s.toString()),!t.fixCoinA,!0,0,new bnExports.BN(t.curSqrtPrice)),l=t.fixCoinA?a.coinAmountA.toString():a.coinAmountB.toString(),f=b(n).sub(l);return f.greaterThanOrEqualTo(0)&&f.lessThanOrEqualTo(e)||t.rebalanceCount>12||t.leftSuiAmount.greaterThanOrEqualTo(t.rightSuiAmount)?{swapInAmount:t.swapSuiAmount.toFixed(0),swapOutAmount:s,swapOutAmountLimit:b(s).mul(1-t.slippage).toFixed(0),afterSqrtPrice:t.curSqrtPrice,fixAmountA:!t.fixCoinA,is_exceed:!0,request_id:"",stake_protocol:t.stakeProtocol}:f.lessThan(0)?await this.calculateStakeDepositFixSui({...t,rightSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.leftSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):f.greaterThan(e)?await this.calculateStakeDepositFixSui({...t,leftSuiAmount:t.swapSuiAmount,swapSuiAmount:t.swapSuiAmount.add(t.rightSuiAmount).div(2),exchangeRate:i,rebalanceCount:t.rebalanceCount+1}):null}async getExchangeRateForStake(t,e,n){return t==="Haedal"?await ye$1.getExchangeRateForStake(this._sdk,e,n):t==="Volo"?await Ae.getExchangeRateForStake(this._sdk,e,n):t==="aftermath"?await ve.getExchangeRateForStake(this._sdk,e,n):"0"}async findRouters(t,e,n,i,s,a,l,f,p=!1){var Ee,Ue;let{aggregator:C}=this._sdk.sdkOptions,B=`${C.walletAddress}_getAggregatorClient`,N=this.getCache(B,p),le;if(N!==void 0)le=N;else{let ze=new SuiClient$1({url:this.sdk.sdkOptions.fullRpcUrl});le=new AggregatorClient25({endpoint:C.endPoint,signer:C.walletAddress,client:ze,env:C.env,pythUrls:C.pythUrls})}try{let ze={from:n,target:i,amount:new bnExports.BN(s.toFixed(0).toString()),byAmountIn:a,depth:3,providers:C.providers};f&&f.poolID&&(ze.liquidityChanges=[f]);let Ze=await le.findRouters(ze);if(((Ee=Ze==null?void 0:Ze.error)==null?void 0:Ee.code)===10001)return{...Ze,is_exceed:Ze.insufficientLiquidity};if(Ze!=null&&Ze.insufficientLiquidity)return{...Ze,is_exceed:Ze.insufficientLiquidity};if(!(Ze!=null&&Ze.routes)||((Ue=Ze==null?void 0:Ze.routes)==null?void 0:Ue.length)===0)throw Error("Aggregator no router");let Qe=e;return Ze.routes.forEach(ct=>{let wt=ct.path.find(qt=>qt.id.toLowerCase()===t.toLowerCase());wt&&wt.extendedDetails&&wt.extendedDetails.afterSqrtPrice&&(Qe=String(wt.extendedDetails.afterSqrtPrice))}),{amount_in:Ze.amountIn.toString(),amount_out:Ze.amountOut.toString(),is_exceed:Ze.insufficientLiquidity,after_sqrt_price:Qe,route_obj:Ze,byAmountIn:!0,liquidity:f==null?void 0:f.deltaLiquidity,originRes:Ze}}catch{try{if(l){let ze=await le.swapInPools({from:n,target:i,amount:new bnExports.BN(s.toFixed(0).toString()),byAmountIn:a,pools:l});if(ze){let Ze=e;return ze.routeData.routes.forEach(Qe=>{let ct=Qe.path.find(wt=>wt.id.toLowerCase()===t.toLowerCase());ct&&(Ze=String(ct.extendedDetails.afterSqrtPrice))}),{amount_in:ze.routeData.amountIn.toString(),amount_out:ze.routeData.amountOut.toString(),is_exceed:ze.isExceed,after_sqrt_price:Ze,route_obj:ze.routeData,byAmountIn:!0,liquidity:f==null?void 0:f.deltaLiquidity,originRes:ze}}return null}return null}catch{return null}}}async calculateRebalance(t){let{clmm_pool:e,a2b:n,curSqrtPrice:i,amount_a:s,amount_b:a,lowerTick:l,upperTick:f,amount_left:p,amount_right:C,coinTypeA:B,coinTypeB:N,useRoute:le,priceSplitPoint:Ee,remainRate:Ue,maxLoopLimit:ze=5}=t,Ze=async(Qe,ct,wt)=>{let qt=Qe.plus(ct).div(2),nr=await this.findRouters(e,i,B,N,qt,n,[e]);if(nr.amount_out==="0")return nr;if(nr.after_sqrt_price||(nr.after_sqrt_price=t.curSqrtPrice),nr.is_exceed)return ct=qt,Ze(Qe,ct,wt+1);let ir=n?s.sub(nr.amount_in):s.add(nr.amount_out),or=n?a.add(nr.amount_out):a.sub(nr.amount_in),ur=V.estLiquidityAndcoinAmountFromOneAmounts(l,f,new bnExports.BN(ir.toString()),!0,!0,1,new bnExports.BN(nr.after_sqrt_price)),hr=new Decimal$1(ur.coinAmountA.toString()),fr=new Decimal$1(ur.coinAmountB.toString());if(hr.toString()!==ir.toString())throw new Error("usedA does not match afterA");if(or.lessThan(fr))n?Qe=qt:ct=qt;else{n?ct=qt:Qe=qt;let ar=or.sub(fr);if(or.mul(Ue).sub(ar).greaterThanOrEqualTo(0)||wt>=ze)return{...nr,remainingB:ar}}return Qe.greaterThan(ct)||ct.sub(Qe).lessThan(10)?nr:Ze(Qe,ct,wt+1)};return p.greaterThanOrEqualTo(C)?Ze(new Decimal$1(0),p,0):Ze(p,C,0)}async calculateAmountFromBoth(t,e){let{vault_id:n,input_amount:i,fix_amount_a:s,slippage:a}=t,{vault:l,pool:f}=await this.getVaultAndPool(n),{position:p}=l,C=p.tick_lower_index,B=p.tick_upper_index,N=V.estLiquidityAndcoinAmountFromOneAmounts(C,B,new bnExports.BN(i),s,e,a,new bnExports.BN(f.current_sqrt_price)),le=R$1.get_lp_amount_by_liquidity(l,N.liquidityAmount.toString());return{request_id:t.input_amount,amount_a:N.coinAmountA.toString(),amount_b:N.coinAmountB.toString(),amount_limit_a:N.tokenMaxA.toString(),amount_limit_b:N.tokenMaxB.toString(),original_input_amount:t.input_amount,ft_amount:le,fix_amount_a:s,side:"both"}}async estLiquidityAmountFromFtAmount(t){let{vault_id:e,input_ft_amount:n,slippage:i}=t,{vault:s,pool:a}=await this.getVaultAndPool(e),{position:l}=s,f=l.tick_lower_index,p=l.tick_upper_index,C=O.tickIndexToSqrtPriceX64(f),B=O.tickIndexToSqrtPriceX64(p),N=new bnExports.BN(n),le=R$1.get_share_liquidity_by_amount(s,N.toString()),Ee=new bnExports.BN(a.current_sqrt_price),Ue=V.getCoinAmountFromLiquidity(new bnExports.BN(le),Ee,C,B,!1),ze=b(Ue.coinA.toString()).mul(b(1-i)),Ze=b(Ue.coinB.toString()).mul(b(1-i));return{amount_a:Ue.coinA.toString(),amount_b:Ue.coinB.toString(),amount_limit_a:ze.toFixed(0),amount_limit_b:Ze.toFixed(0)}}async deposit(t,e){let{vault_id:n,slippage:i,coin_object_a:s,coin_object_b:a,return_lp_token:l,deposit_result:f}=t,{swap_result:p,amount_a:C,amount_b:B,fix_amount_a:N,partner:le,side:Ee,original_input_amount:Ue}=f,{vault:ze,pool:Ze}=await this.getVaultAndPool(n,!1),Qe,ct,wt;if(Ee==="oneSide"&&p){wt=(p.a2b?s:a)||e.add(coinWithBalance({balance:BigInt(Ue),type:p.a2b?Ze.coinTypeA:Ze.coinTypeB}));let ur=[p.swap_in_amount,b(Ue).sub(b(p.swap_in_amount)).toFixed(0,Decimal$1.ROUND_DOWN)],[hr,fr]=e.splitCoins(wt,ur);console.log("spitCoins spitAmounts:",ur);let{swap_out_coin:ar}=await this.handleDepositSwap({coinTypeA:Ze.coinTypeA,coinTypeB:Ze.coinTypeB,slippage:i,clmm_pool_address:Ze.poolAddress,partner:le,swap_in_amount:p.swap_in_amount,swap_in_coin:hr,a2b:p.a2b,sui_stake_protocol:p.sui_stake_protocol,route_obj:p.route_obj},e);p.a2b?(Qe=fr,ct=ar):(Qe=ar,ct=fr)}let qt=b(C).mul(b(1).add(i)).toFixed(0,Decimal$1.ROUND_DOWN).toString(),nr=b(B).mul(b(1).add(i)).toFixed(0,Decimal$1.ROUND_DOWN).toString(),ir=N?C:B;Ee==="oneSide"&&p?(qt="18446744073709551615",nr="18446744073709551615",p.a2b?(ir=b(ir).mul(b(1).sub(.001)).toFixed(0,Decimal$1.ROUND_DOWN).toString(),Qe=Qe||R$1.buildCoinWithBalance(BigInt(N?C:f.amount_limit_a),Ze.coinTypeA,e)):ct=ct||R$1.buildCoinWithBalance(BigInt(N?f.amount_limit_b:f.amount_b),Ze.coinTypeB,e)):(Qe=s||R$1.buildCoinWithBalance(BigInt(N?C:qt),Ze.coinTypeA,e),ct=a||R$1.buildCoinWithBalance(BigInt(N?nr:B),Ze.coinTypeB,e));let or=await this.depositInternal({coinTypeA:Ze.coinTypeA,coinTypeB:Ze.coinTypeB,lp_token_type:ze.lp_token_type,farming_pool:ze.position.pool_id,clmm_pool:Ze.poolAddress,primaryCoinAInputs:Qe,primaryCoinBInputs:ct,vault_id:n,slippage:t.slippage,amount_a:N?ir:qt,amount_b:N?nr:ir,fix_amount_a:N,return_lp_token:l},e);if(p&&wt&&e.transferObjects([wt],e.pure.address(this._sdk.getVerifySenderAddress())),l)return or}async handleDepositSwap(t,e){let{partner:n,coinTypeA:i,coinTypeB:s,slippage:a,clmm_pool_address:l,swap_in_amount:f,a2b:p,sui_stake_protocol:C,route_obj:B,swap_in_coin:N}=t,{clmm_pool:le,integrate:Ee}=this._sdk.sdkOptions,Ue=N;if(C!=="Cetus")return{swap_out_coin:this.requestStakeCoin(C,e,Ue)};if(B){let qt={routers:B,inputCoin:Ue,slippage:a,txb:e,partner:n},{aggregator:nr}=this._sdk.sdkOptions,ir=`${nr.walletAddress}_getAggregatorClient`,or=this.getCache(ir,!1),ur;if(or!==void 0)ur=or;else{let hr=new SuiClient$1({url:this.sdk.sdkOptions.fullRpcUrl});ur=new AggregatorClient25({endpoint:nr.endPoint,signer:nr.walletAddress,client:hr,env:nr.env,pythUrls:nr.pythUrls})}return{swap_out_coin:await ur.fixableRouterSwap(qt)}}let ze=R$1.buildCoinWithBalance(BigInt(0),p?t.coinTypeB:t.coinTypeA,e),Ze=ne.getDefaultSqrtPriceLimit(p).toString(),Qe=e.moveCall({target:`${Ee.published_at}::${Je}::swap`,typeArguments:[i,s],arguments:[e.object(U$1(le).global_config_id),e.object(l),p?Ue:ze,p?ze:Ue,e.pure.bool(p),e.pure.bool(!0),e.pure.u64(f),e.pure.u128(Ze),e.pure.bool(!1),e.object(we)]}),ct=p?Qe[1]:Qe[0],wt=p?Qe[0]:Qe[1];return e.transferObjects([wt],e.pure.address(this._sdk.getVerifySenderAddress())),{swap_out_coin:ct}}requestStakeCoin(t,e,n){if(t==="Haedal")return ye$1.requestStakeCoin(this._sdk,e,n);if(t==="Volo")return Ae.requestStakeCoin(this._sdk,e,n);if(t==="aftermath")return ve.requestStakeCoin(this._sdk,e,n)}async depositInternal(t,e){var le,Ee;let{vaults:n,frams:i,clmm_pool:s}=this._sdk.sdkOptions,a=U$1(n),l=U$1(i),f=U$1(s),{primaryCoinAInputs:p,primaryCoinBInputs:C}=t;if(p===void 0||C===void 0){let Ue=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress);p=(le=oe.buildAddLiquidityFixTokenCoinInput(e,!t.fix_amount_a,t.amount_a,t.slippage,t.coinTypeA,Ue,!1))==null?void 0:le.targetCoin,C=(Ee=oe.buildAddLiquidityFixTokenCoinInput(e,t.fix_amount_a,t.amount_b,t.slippage,t.coinTypeB,Ue,!1))==null?void 0:Ee.targetCoin}let B=[e.object(a.vaults_manager_id),e.object(t.vault_id),e.object(l.rewarder_manager_id),e.object(l.global_config_id),e.object(t.farming_pool),e.object(f.global_config_id),e.object(t.clmm_pool),p,C,e.pure.u64(t.amount_a),e.pure.u64(t.amount_b),e.pure.bool(t.fix_amount_a),e.object(we)],N=[t.coinTypeA,t.coinTypeB,t.lp_token_type];if(t.return_lp_token)return e.moveCall({target:`${n.published_at}::${Xe}::deposit`,typeArguments:N,arguments:B});e.moveCall({target:`${n.published_at}::${Ot}::deposit`,typeArguments:N,arguments:B})}async withdraw(t,e){let n="is_ft_input"in t,{vault:i,pool:s}=await this.getVaultAndPool(t.vault_id,!0),a=t.return_coin??!1,l,f,p,C;if(n)C=await this._sdk.Vaults.calculateWithdrawAmount({...t,side:"oneSide"}),f=C.amount_limit_a,p=C.amount_limit_b,l=t.is_ft_input?t.input_amount:C.burn_ft_amount;else{let{vault_id:le,ft_amount:Ee,slippage:Ue}=t;l=Ee;let ze=await this.estLiquidityAmountFromFtAmount({vault_id:le,input_ft_amount:Ee,slippage:Ue});f=ze.amount_limit_a,p=ze.amount_limit_b}let{reciveCoinA:B,reciveCoinB:N}=await this.withdrawInternal({coinTypeA:s.coinTypeA,coinTypeB:s.coinTypeB,lp_token_type:i.lp_token_type,farming_pool:i.position.pool_id,clmm_pool:s.poolAddress,min_amount_a:f,min_amount_b:p,vault_id:t.vault_id,ft_amount:l},e);if(n&&C){let{a2b:le,swap_in_amount:Ee,route_obj:Ue}=C.swap_result;if(Ue){let ze={targetCoin:le?B:N},Ze={routers:Ue,inputCoin:ze.targetCoin,slippage:t.slippage,txb:e,partner:t.partner},{aggregator:Qe}=this._sdk.sdkOptions,ct=`${Qe.walletAddress}_getAggregatorClient`,wt=this.getCache(ct,!1),qt;if(wt!==void 0)qt=wt;else{let or=new SuiClient$1({url:this.sdk.sdkOptions.fullRpcUrl});qt=new AggregatorClient25({endpoint:Qe.endPoint,signer:Qe.walletAddress,client:or,env:Qe.env,pythUrls:Qe.pythUrls})}let nr=await qt.fixableRouterSwap(Ze),ir=le?[ze.targetCoin,nr]:[nr,ze.targetCoin];if(le?e.mergeCoins(ir[1],[N]):e.mergeCoins(ir[0],[B]),a)return{return_coin_a:le?void 0:nr,return_coin_b:le?nr:void 0};e.transferObjects([nr],e.pure.address(this._sdk.getVerifySenderAddress()))}else{let{clmm_pool:ze,integrate:Ze}=this._sdk.sdkOptions,Qe=ne.getDefaultSqrtPriceLimit(le).toString(),ct=e.moveCall({target:`${Ze.published_at}::${Je}::swap`,typeArguments:[s.coinTypeA,s.coinTypeB],arguments:[e.object(U$1(ze).global_config_id),e.object(s.poolAddress),B,N,e.pure.bool(le),e.pure.bool(!0),e.pure.u64(Ee),e.pure.u128(Qe),e.pure.bool(!0),e.object(we)]});if(a)return{return_coin_a:ct[0],return_coin_b:ct[1]};e.transferObjects([ct[0],ct[1]],e.pure.address(this._sdk.senderAddress))}}else{if(a)return{return_coin_a:B,return_coin_b:N};e.transferObjects([B,N],e.pure.address(this._sdk.senderAddress))}return{}}async withdrawInternal(t,e){let{vaults:n,frams:i,clmm_pool:s}=this._sdk.sdkOptions,a=U$1(n),l=U$1(i),f=U$1(s),{primaryCoinInputs:p}=t;if(p===void 0){let N=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,t.lp_token_type);p=oe.buildCoinForAmount(e,N,BigInt(t.ft_amount),t.lp_token_type,!1,!0).targetCoin}let C=[t.coinTypeA,t.coinTypeB,t.lp_token_type],B=e.moveCall({target:`${n.published_at}::${Xe}::remove`,typeArguments:C,arguments:[e.object(a.vaults_manager_id),e.object(t.vault_id),e.object(l.rewarder_manager_id),e.object(l.global_config_id),e.object(t.farming_pool),e.object(f.global_config_id),e.object(t.clmm_pool),p,e.pure.u64(t.ft_amount),e.pure.u64(t.min_amount_a),e.pure.u64(t.min_amount_b),e.object(we)]});return e.transferObjects([p],e.pure.address(this._sdk.senderAddress)),{reciveCoinA:B[0],reciveCoinB:B[1]}}async getVaultAndPool(t,e=!1){let n=await this.sdk.Vaults.getVault(t);if(n===void 0)throw new Error("please check config and vault id");let i=await this._sdk.Pool.getPool(n.pool_id,e);return{vault:n,pool:i}}async getVaultList(t="all"){let{vaults_pool_handle:e}=U$1(this._sdk.sdkOptions.vaults),n=await this._sdk.fullClient.getDynamicFields({parentId:e}),i=n.data.map(l=>l.name.value),s=await this._sdk.fullClient.batchGetObjects(i,{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}),a=[];return s.forEach(l=>{let f=R$1.buildPool(l);f&&(f.stake_protocol=this.findStakeProtocol(f.position.coinTypeA,f.position.coinTypeB),this.savePoolToCache(f),a.push(f))}),n.data=a,n}findStakeProtocol(t,e){let{haedal:n,volo:i,aftermath:s}=U$1(this._sdk.sdkOptions.vaults),a=P(t).full_address,l=P(e).full_address;if(I.isSuiCoin(a)||I.isSuiCoin(l)){if(n){let f=P(U$1(n).coin_type).full_address;if(a===f||l===f)return"Haedal"}if(i){let f=P(U$1(i).coin_type).full_address;if(a===f||l===f)return"Volo"}if(s){let f=P(U$1(s).coin_type).full_address;if(a===f||l===f)return"aftermath"}}}async getVault(t,e=!1){let n=this.readPoolFromCache(t,e);if(n)return n;try{let i=await this._sdk.fullClient.getObject({id:t,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}}),s=R$1.buildPool(i);if(s)return this.savePoolToCache(s),s}catch(i){console.log(i)}}savePoolToCache(t){let e=`${t.id}_mirrorPool`;this.updateCache(e,t,te)}readPoolFromCache(t,e=!1){let n=`${t}_mirrorPool`;return this.getCache(n,e)}findSuiStakeProtocol(t,e,n){let{haedal:i,volo:s,aftermath:a}=U$1(this._sdk.sdkOptions.vaults),l=P(t).full_address,f=P(e).full_address;if(I.isSuiCoin(l)&&n||I.isSuiCoin(f)&&!n){if(i){let p=P(U$1(i).coin_type).full_address;if(l===p||f===p)return"Haedal"}if(s){let p=P(U$1(s).coin_type).full_address;if(l===p||f===p)return"Volo"}if(a){let p=P(U$1(a).coin_type).full_address;if(l===p||f===p)return"aftermath"}}return"Cetus"}buildCoinInput(t,e,n,i,s){let{selectedCoins:a,remainingCoins:l}=I.selectCoinAssetGreaterThanOrEqual(e,BigInt(i)),f=I.calculateTotalBalance(a);if(f<BigInt(i))throw new Error(`The amount(${f}) is Insufficient balance for ${n} , expect ${i} `);let p=f-BigInt(i),C;if(I.isSuiCoin(n))C=t.splitCoins(t.gas,[t.pure.u64(i)]);else{let[B,...N]=a.map(le=>le.coinObjectId);C=t.object(B),N.length>0?s?t.mergeCoins(C,[...N.map(le=>t.object(le)),s]):t.mergeCoins(C,[...N.map(le=>t.object(le))]):s&&t.mergeCoins(C,[s])}return{selectedUnusedAmount:p,coinInput:C,remainingCoins:l}}async getVaultsConfigs(t=!1){let{package_id:e}=this._sdk.sdkOptions.vaults,n=`${e}_getMirrorPoolConfigs`,i=this.getCache(n,t);if(i!==void 0)return i;let s=(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${e}::vaults::InitEvent`})).data,a={admin_cap_id:"",vaults_manager_id:"",vaults_pool_handle:""};if(s.length>0){for(let l of s){let f=l.parsedJson;a.admin_cap_id=f.admin_cap_id,a.vaults_manager_id=f.manager_id;let p=await this._sdk.fullClient.getObject({id:a.vaults_manager_id,options:{showContent:!0}}),C=ae(p);a.vaults_pool_handle=C.vault_to_pool_maps.fields.id.id;break}this.updateCache(n,a,te)}return a}updateCache(t,e,n=te){let i=this._cache[t];i?(i.overdueTime=ie(n),i.value=e):i=new me$1(e,ie(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t];if(!e&&(n!=null&&n.isValid()))return n.value;delete this._cache[t]}},De=class{constructor(t){Or(this,"_sdk");Or(this,"_cache",{});this._sdk=t}get sdk(){return this._sdk}async getPoolImmutables(t=[],e=0,n=100,i=!1){let{package_id:s}=this._sdk.sdkOptions.clmm_pool,a=`${s}_getInitPoolEvent`,l=this.getCache(a,i),f=[],p=[];if(l!==void 0&&f.push(...l),f.length===0)try{(await this._sdk.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`})).data.forEach(B=>{let N=B.parsedJson;N&&f.push({poolAddress:N.pool_id,tickSpacing:N.tick_spacing,coinTypeA:P(N.coin_type_a).full_address,coinTypeB:P(N.coin_type_b).full_address})}),this.updateCache(a,f,te)}catch(B){console.log("getPoolImmutables",B)}let C=t.length>0;for(let B=0;B<f.length;B+=1){let N=f[B];C&&!t.includes(N.poolAddress)||!C&&(B<e||B>=e+n)||p.push(N)}return p}async getPools(t=[],e=0,n=100){var l,f,p;let i=[],s=[];t.length>0?s=[...t]:(await this.getPoolImmutables([],e,n,!1)).forEach(C=>s.push(C.poolAddress));let a=await this._sdk.fullClient.batchGetObjects(s,{showContent:!0,showType:!0});for(let C of a){if(C.error!=null||((f=(l=C.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Q(`getPools error code: ${((p=C.error)==null?void 0:p.code)??"unknown error"}, please check config and object ids`,"InvalidPoolObject");let B=We(C);i.push(B);let N=`${B.poolAddress}_getPoolObject`;this.updateCache(N,B,te)}return i}async getPool(t,e=!0){var l,f,p;let n=`${t}_getPoolObject`,i=this.getCache(n,e);if(i!==void 0)return i;let s=await this._sdk.fullClient.getObject({id:t,options:{showType:!0,showContent:!0}});if(s.error!=null||((f=(l=s.data)==null?void 0:l.content)==null?void 0:f.dataType)!=="moveObject")throw new Q(`getPool error code: ${((p=s.error)==null?void 0:p.code)??"unknown error"}, please check config and object id`,"InvalidPoolObject");let a=We(s);return this.updateCache(n,a),a}async getSuiTransactionResponse(t,e=!1){let n=`${t}_getSuiTransactionResponse`,i=this.getCache(n,e);if(i!==void 0)return i;let s;try{s=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0,showBalanceChanges:!0,showInput:!0,showObjectChanges:!0}})}catch{s=await this._sdk.fullClient.getTransactionBlock({digest:t,options:{showEvents:!0,showEffects:!0}})}return this.updateCache(n,s,te),s}updateCache(t,e,n=At){let i=this._cache[t];i?(i.overdueTime=ie(n),i.value=e):i=new me$1(e,ie(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}},Fe$1=class extends SuiClient$1{async queryEventsByPage(e,n="all"){let i=[],s=!0,a=n==="all",l=a?null:n.cursor;do{let f=await this.queryEvents({query:e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async getOwnedObjectsByPage(e,n,i="all"){let s=[],a=!0,l=i==="all",f=l?null:i.cursor;do{let p=await this.getOwnedObjects({owner:e,...n,cursor:f,limit:l?null:i.limit});p.data?(s=[...s,...p.data],a=p.hasNextPage,f=p.nextCursor):a=!1}while(l&&a);return{data:s,nextCursor:f,hasNextPage:a}}async getDynamicFieldsByPage(e,n="all"){let i=[],s=!0,a=n==="all",l=a?null:n.cursor;do{let f=await this.getDynamicFields({parentId:e,cursor:l,limit:a?null:n.limit});f.data?(i=[...i,...f.data],s=f.hasNextPage,l=f.nextCursor):s=!1}while(a&&s);return{data:i,nextCursor:l,hasNextPage:s}}async batchGetObjects(e,n,i=50){let s=[];try{for(let a=0;a<Math.ceil(e.length/i);a++){let l=await this.multiGetObjects({ids:e.slice(a*i,i*(a+1)),options:n});s=[...s,...l]}}catch(a){console.log(a)}return s}async calculationTxGas(e){let{sender:n}=e.blockData;if(n===void 0)throw Error("sdk sender is empty");let i=await this.devInspectTransactionBlock({transactionBlock:e,sender:n}),{gasUsed:s}=i.effects;return Number(s.computationCost)+Number(s.storageCost)-Number(s.storageRebate)}async sendTransaction(e,n){try{return await this.signAndExecuteTransaction({transaction:n,signer:e,options:{showEffects:!0,showEvents:!0}})}catch(i){console.log("error: ",i)}}async sendSimulationTransaction(e,n,i=!0){try{if(i)return await this.devInspectTransactionBlock({transactionBlock:e,sender:n})}catch(s){console.log("devInspectTransactionBlock error",s)}}},ce=class{constructor(t){Or(this,"_cache",{});Or(this,"_rpcModule");Or(this,"_vaults");Or(this,"_sdkOptions");Or(this,"_senderAddress","");Or(this,"_pool");this._sdkOptions=t,this._rpcModule=new Fe$1({url:t.fullRpcUrl}),this._vaults=new qe(this),this._pool=new De(this),Ke(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(t){this._senderAddress=t}get fullClient(){return this._rpcModule}get sdkOptions(){return this._sdkOptions}get Vaults(){return this._vaults}get Pool(){return this._pool}getVerifySenderAddress(){if(this.senderAddress.length===0||!isValidSuiAddress$2(this.senderAddress))throw Error("this clmm config sdk senderAdders is illegal");return this.senderAddress}async getOwnerCoinAssets(t,e,n=!0){let i=[],s=null,a=`${this.sdkOptions.fullRpcUrl}_${t}_${e}_getOwnerCoinAssets`,l=this.getCache(a,n);if(l)return l;for(;;){let f=await(e?this.fullClient.getCoins({owner:t,coinType:e,cursor:s}):this.fullClient.getAllCoins({owner:t,cursor:s}));if(f.data.forEach(p=>{BigInt(p.balance)>0&&i.push({coinAddress:P(p.coinType).source_address,coinObjectId:p.coinObjectId,balance:BigInt(p.balance)})}),s=f.nextCursor,!f.hasNextPage)break}return this.updateCache(a,i,30*1e3),i}async getOwnerCoinBalances(t,e){let n=[];return e?n=[await this.fullClient.getBalance({owner:t,coinType:e})]:n=[...await this.fullClient.getAllBalances({owner:t})],n}updateCache(t,e,n=te){let i=this._cache[t];i?(i.overdueTime=ie(n),i.value=e):i=new me$1(e,ie(n)),this._cache[t]=i}getCache(t,e=!1){let n=this._cache[t],i=n==null?void 0:n.isValid();if(!e&&i)return n.value;i||delete this._cache[t]}};getFullnodeUrl$1("mainnet"),Env.Mainnet;getFullnodeUrl$1("testnet"),Env.Mainnet;/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

ss-linked-list/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

ss-queue/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

ss-stack/dist/index.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)
*/function Ve(t,e,n,i,s){let a=new BN(10).pow(new BN(i)),{coinAmountB:l}=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(t,e,a,!0,!0,0,n),f=TickMath$1.sqrtPriceX64ToPrice(n,i,s),p=d$3(a.toString()).mul(f).div(new Decimal$1(10).pow(i)).mul(new Decimal$1(10).pow(s)),C=p.add(l.toString()),B=p.div(C),N=d$3(l.toString()).div(C);return{ratioA:B,ratioB:N}}function U(t,e,n,i,s,a,l){let f=d$3(toDecimalsAmount(d$3(n).mul(t).div(i).toString(),a)).toFixed(0),p=d$3(toDecimalsAmount(d$3(n).mul(e).div(s).toString(),l)).toFixed(0);return{amountA:f,amountB:p}}function de(t,e,n,i,s,a,l,f){let{ratioA:p,ratioB:C}=Ve(t,e,n,l,f);return U(p,C,i,s,a,l,f)}var R=10n;function J(t){let{fields:e,type:n}=t,{liquidity_range:i,pool_id:s,wrapped_position:a}=e.clmm_vault.fields,l=a.fields,f={clmm_pool_id:s,liquidity_range:{lower_offset:i.fields.lower_offset,rebalance_threshold:i.fields.rebalance_threshold,upper_offset:i.fields.upper_offset},wrapped_position:{coin_type_a:fixCoinType(l.coin_type_a.fields.name,!1),coin_type_b:fixCoinType(l.coin_type_b.fields.name,!1),description:l.description,id:l.id.id,index:l.index,liquidity:l.liquidity,name:l.name,pool:l.pool,tick_lower_index:asIntN(BigInt(l.tick_lower_index.fields.bits)),tick_upper_index:asIntN(BigInt(l.tick_upper_index.fields.bits)),url:l.url}},{balances:p}=e.buffer_assets.fields,C=p.fields.contents.map(B=>{let{key:N,value:le}=B.fields;return{coin_type:fixCoinType(N.fields.name,!1),value:le}});return{id:e.id.id,is_pause:e.is_pause,clmm_vault:f,lp_token_treasury:e.lp_token_treasury.fields.total_supply.fields.value,protocol_fees_handle:e.protocol_fees.fields.id.id,hard_cap:e.hard_cap,quote_type:extractStructTagFromType$2(e.quote_type.fields.name).full_address,lp_token_type:extractStructTagFromType$2(n).type_arguments[0],balances:C,protocol_fee_rate:e.protocol_fee_rate}}function _e(t,e){let n=d$3(t).div(e).toString(),i=d$3(e).div(t).toString();return{quote_per_base:n,base_per_quote:i}}function Re(t,e,n,i){let s=10n**(R+i-n),a=10n**(R+n-i),l=MathUtil$1.checkMulDivFloor(new BN(t.toString()),new BN(s.toString()),new BN(e.toString()),64),f=MathUtil$1.checkMulDivFloor(new BN(e.toString()),new BN(a.toString()),new BN(t.toString()),64);return{primitive_base_price:BigInt(l.toString()),primitive_quote_price:BigInt(f.toString())}}function Z(t,e){let n=e?t[e].price:{coin_decimals:6,oracle_price:1000000000000000000000000n},i=new BN("0");for(let[s,{price:a,value:l}]of Object.entries(t)){let{primitive_quote_price:f}=Re(BigInt(n.oracle_price),BigInt(a.oracle_price),BigInt(n.coin_decimals),BigInt(a.coin_decimals)),p=MathUtil$1.checkMulDivFloor(new BN(f.toString()),new BN(l),new BN((BigInt(10)**R).toString()),64);i=i.add(p)}return i.toString()}async function fe(t,e,n,i,s=!1){let{clmm_vault:a,quote_type:l}=e,{wrapped_position:f}=a,{tick_lower_index:p,tick_upper_index:C,liquidity:B}=f,{current_sqrt_price:N,coinTypeA:le,coinTypeB:Ee}=n,Ue=[...i],ze=l&&fixCoinType(e.quote_type,!1),Ze=TickMath$1.tickIndexToSqrtPriceX64(p),Qe=TickMath$1.tickIndexToSqrtPriceX64(C),{coinA:ct,coinB:wt}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(B),new BN(N),new BN(Ze),new BN(Qe),!1);Ue.push({coin_type:le,value:ct.toString()}),Ue.push({coin_type:Ee,value:wt.toString()});let qt={};Ue.forEach(ur=>{let hr=fixCoinType(ur.coin_type,!1),fr=d$3(ur.value),ar=qt[hr]||0;qt[hr]=fr.add(ar).toString()});let nr=Object.entries(qt).filter(([ur,hr])=>d$3(hr).gt(0)).map(([ur])=>ur);if(ze&&!nr.includes(ze)&&nr.push(ze),nr.length===0)return"0";let ir=await t.sdk.PythPrice.getLatestPrice(nr,s),or={};return nr.forEach(ur=>{let hr=ir[ur];if(hr)or[ur]={price:hr,value:qt[ur]||"0"};else throw Error(`find ${ur} price fail `)}),Z(or,ze).toString()}function me(t,e,n){return d$3(t).eq(0)?e:d$3(t).mul(e).div(n).toFixed(0,Decimal$1.ROUND_HALF_UP)}function j(t,e,n){return d$3(t).eq(0)?"0":d$3(e).mul(n).div(t).toFixed(0,Decimal$1.ROUND_HALF_UP)}function $(t,e){let{balances:n,lp_token_treasury:i}=e,s={};return n.forEach(a=>{let l=j(i,t,a.value),f={coin_type:a.coin_type,value:l};s[f.coin_type]=f}),s}function ge(t,e,n,i){var ct,wt;let{tick_lower_index:s,tick_upper_index:a,coin_type_a:l,coin_type_b:f,liquidity:p}=n.clmm_vault.wrapped_position,C=j(n.lp_token_treasury,e,p),B=TickMath$1.tickIndexToSqrtPriceX64(s),N=TickMath$1.tickIndexToSqrtPriceX64(a),le=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(C),new BN(i.current_sqrt_price),B,N,!0),Ee=le.coinA.toString(),Ue=le.coinB.toString(),ze=$(e,n);console.log(" ~ buildVaultsBalance:",{share_buffer_assets:ze,liquidity_amount_a:Ee,liquidity_amount_b:Ue,token_amount:e,pool:n});let Ze=d$3(Ee).add(((ct=ze[l])==null?void 0:ct.value)||"0").toFixed(0),Qe=d$3(Ue).add(((wt=ze[f])==null?void 0:wt.value)||"0").toFixed(0);return{vault_id:n.id,clmm_pool_id:i.poolAddress,owner:t,lp_token_type:n.lp_token_type,lp_token_balance:e,liquidity:C,tick_lower_index:s,tick_upper_index:a,amount_a:Ze,amount_b:Qe,coin_type_a:l,coin_type_b:f}}function ee(t,e,n){let i=[];return e.forEach(s=>{d$3(s.value).gt(0)&&i.push(s)}),n.forEach(s=>{d$3(s.value).gt(0)&&i.push(s)}),t.balances.forEach(s=>{d$3(s.value).gt(0)&&i.push(s)}),i}function he(t,e,n){let{coin_type_a:i,coin_type_b:s}=t.clmm_vault.wrapped_position,a=ee(t,e,n),l=new Set;return a.forEach(f=>l.add(f.coin_type)),l.add(i),l.add(s),Array.from(l)}function be(t,e){if(!R)throw new Error("oraclePriceMultiplierDecimal is required");if(t===0n)throw new Error("Invalid oracle price");if(e<0n){let n=10n**(R- -e);return t*n}return t/10n**(e+R)}function ye(t){return`0x${Buffer$1.from(t).toString("hex")}`}var H=class{constructor(t){Or(this,"_sdk");this._sdk=t}get sdk(){return this._sdk}async getProtocolFeeRate(){let t="getProtocolFeeRate",e=this._sdk.getCache(t);if(e)return e;let{configs:n}=this._sdk.sdkOptions.vaults,i=(await this._sdk.FullClient.getObject({id:n.global_config_id,options:{showContent:!0}})).data.content.fields.protocol_fee_rate;return this._sdk.updateCache(t,i),i}async getOwnerVaultsBalance(t,e){let{pool:n,clmmPool:i}=await this.getVaultAndPool(e,!0),s=(await this._sdk.FullClient.getBalance({owner:t,coinType:n.lp_token_type})).totalBalance;return ge(t,s,n,i)}async getOwnerVaultsBalanceList(t){let{data:e}=await this.getPoolList(),n=[];for(let i=0;i<e.length;i++){let s=await this.getOwnerVaultsBalance(t,e[i].id);n.push(s)}return n}async getVaultsPositionRewarderAndFee(t){try{let{package_id:e}=this._sdk.sdkOptions.vaults,{pool:n,clmmPool:i}=await this.getVaultAndPool(t,!1),s=`getVaultsPositionRewarderAndFee_${t}`,a=this._sdk.getCache(s);if(a)return a;let{lp_token_type:l}=n,{rewarder_infos:f,poolAddress:p,coinTypeA:C,coinTypeB:B}=i,N=new Transaction$1;this.buildCollectRewardPayload({reward_coin_types:[...f.map(Qe=>Qe.coinAddress)],lp_token_type:l,pool_id:t,clmm_pool_id:p,coin_type_a:C,coin_type_b:B},N),this.buildCollectFeePayload({lp_token_type:l,pool_id:t,clmm_pool_id:p,coin_type_a:C,coin_type_b:B},N);let le=await this._sdk.FullClient.sendSimulationTransaction(N,normalizeSuiAddress$2("0x0")),Ee=`${e}::pool::FeeClaimedEvent`,Ue=`${e}::pool::RewardClaimedEvent`,ze=[],Ze=[];return le==null||le.events.forEach(Qe=>{let{parsedJson:ct,type:wt}=Qe;wt===Ee&&(ze.push({coin_type:fixCoinType(C,!1),value:ct.amount_a}),ze.push({coin_type:fixCoinType(B,!1),value:ct.amount_b})),wt===Ue&&Ze.push({coin_type:fixCoinType(ct.reward_type.name,!1),value:ct.amount})}),this._sdk.updateCache(s,{feeList:ze,rewarderList:Ze},10*1e3),{feeList:ze,rewarderList:Ze}}catch(e){console.log(" ~ VaultsModule ~ getVaultsPositionRewarderAndFee ~ error:",e)}return{feeList:[],rewarderList:[]}}async getPoolList(t="all"){let e={data:[],hasNextPage:!1},{vaults:n}=this._sdk.sdkOptions,{FullClient:i}=this._sdk,s=await i.getDynamicFieldsByPage(n.configs.pools_handle,t),a=s.data.map(l=>l.name.value);return a.length>0&&((await i.batchGetObjects(a,{showContent:!0})).forEach(l=>{let f=J(l.data.content);this._sdk.updateCache(`getPool_${f.id}`,f),e.data.push(f)}),e.nextCursor=s.nextCursor,e.hasNextPage=s.hasNextPage),e}async getPool(t,e=!0){let n=`getPool_${t}`,i=this._sdk.getCache(n,e);if(i)return i;let s=await this._sdk.FullClient.getObject({id:t,options:{showContent:!0}}),a=J(s.data.content);return this._sdk.updateCache(n,a),a}buildCollectRewardPayload(t,e){let{coin_type_a:n,coin_type_b:i,pool_id:s,clmm_pool_id:a,lp_token_type:l,reward_coin_types:f}=t,{published_at:p,configs:C,clmm_configs:B}=this._sdk.sdkOptions.vaults;return e=e||new Transaction$1,f.forEach(N=>{e.moveCall({target:`${p}::pool::collect_reward`,typeArguments:[n,i,l,N],arguments:[e.object(s),e.object(C.global_config_id),e.object(B.global_config_id),e.object(a),e.object(B.global_vault_id),e.object(CLOCK_ADDRESS$2)]})}),e}buildCollectFeePayload(t,e){let{coin_type_a:n,coin_type_b:i,pool_id:s,clmm_pool_id:a,lp_token_type:l}=t,{published_at:f,configs:p,clmm_configs:C}=this._sdk.sdkOptions.vaults;return e=e||new Transaction$1,e.moveCall({target:`${f}::pool::collect_fee`,typeArguments:[n,i,l],arguments:[e.object(s),e.object(p.global_config_id),e.object(C.global_config_id),e.object(a)]}),e}async buildDepositPayload(t,e){let{pool_id:n,amount_a:i,amount_b:s,return_lp_coin:a}=t,{pool:l,clmmPool:f}=await this.getVaultAndPool(n,!0),{rewarderList:p,feeList:C}=await this.getVaultsPositionRewarderAndFee(n),B=he(l,p,C),{lp_token_type:N}=l,{rewarder_infos:le,poolAddress:Ee,coinTypeA:Ue,coinTypeB:ze}=f,Ze=p.length>0?p.filter(hr=>d$3(hr.value.toString()).gt(0)).map(hr=>fixCoinType(hr.coin_type,!1)):le.map(hr=>fixCoinType(hr.coinAddress,!1)),{published_at:Qe,configs:ct,clmm_configs:wt}=this._sdk.sdkOptions.vaults;e=e||new Transaction$1,e=this.buildCollectRewardPayload({reward_coin_types:Ze,lp_token_type:N,pool_id:n,clmm_pool_id:Ee,coin_type_a:Ue,coin_type_b:ze},e),e=this.buildCollectFeePayload({lp_token_type:N,pool_id:n,clmm_pool_id:Ee,coin_type_a:Ue,coin_type_b:ze},e),e=await this._sdk.PythPrice.buildUpdatePythPricePayload(B,e),e.moveCall({target:`${Qe}::pool::calculate_aum`,typeArguments:[Ue,ze,N],arguments:[e.object(n),e.object(ct.global_config_id),e.object(ct.pyth_oracle_id),e.object(wt.global_config_id),e.object(Ee),e.object(CLOCK_ADDRESS$2)]});let qt=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,Ue),nr=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,ze),ir=TransactionUtil$1.buildCoinForAmount(e,qt,BigInt(i),Ue,!1,!0),or=TransactionUtil$1.buildCoinForAmount(e,nr,BigInt(s),ze,!1,!0),ur=e.moveCall({target:`${Qe}::pool::${a?"deposit_for":"deposit"}`,typeArguments:[Ue,ze,N],arguments:[e.object(n),e.object(ct.global_config_id),e.object(ct.pyth_oracle_id),e.object(wt.global_config_id),e.object(Ee),ir.targetCoin,or.targetCoin,e.object(CLOCK_ADDRESS$2)]});return a?ur:void 0}async buildWithdrawPayload(t,e){let{pool_id:n,burn_lp_amount:i,mode:s,slippage:a,partner:l}=t,{pool:f,clmmPool:p}=await this.getVaultAndPool(n,!0),{rewarderList:C}=await this.getVaultsPositionRewarderAndFee(n),{published_at:B,configs:N,clmm_configs:le}=this._sdk.sdkOptions.vaults;e=e||new Transaction$1;let{lp_token_type:Ee,clmm_vault:Ue,lp_token_treasury:ze}=f,{rewarder_infos:Ze,poolAddress:Qe,coinTypeA:ct,coinTypeB:wt,liquidity:qt}=p,nr=C.length>0?C.filter(Lt=>d$3(Lt.value.toString()).gt(0)).map(Lt=>fixCoinType(Lt.coin_type,!1)):Ze.map(Lt=>fixCoinType(Lt.coinAddress,!1));e=this.buildCollectRewardPayload({reward_coin_types:nr,lp_token_type:Ee,pool_id:n,clmm_pool_id:Qe,coin_type_a:ct,coin_type_b:wt},e),e=this.buildCollectFeePayload({lp_token_type:Ee,pool_id:n,clmm_pool_id:Qe,coin_type_a:ct,coin_type_b:wt},e);let ir=await this._sdk.getOwnerCoinAssets(this._sdk.senderAddress,Ee),or=TransactionUtil$1.buildCoinForAmount(e,ir,BigInt(i),Ee,!1,!0),[ur,hr,fr]=e.moveCall({target:`${B}::pool::withdraw`,typeArguments:[ct,wt,Ee],arguments:[e.object(n),e.object(N.global_config_id),e.object(le.global_config_id),e.object(Qe),or.targetCoin,e.object(CLOCK_ADDRESS$2)]}),ar=this.buildWithdrawBufferReward({reward_coin_types:nr.filter(Lt=>![fixCoinType(ct,!1),fixCoinType(wt,!1)].includes(Lt)),pool_id:n,withdraw_cert:fr,lp_token_type:Ee},e);if(e.moveCall({target:`${B}::pool::destory_withdraw_cert`,typeArguments:[Ee],arguments:[e.object(n),e.object(N.global_config_id),fr]}),s!=="FixedOneSide"){if(a===void 0)throw Error("the slippage is undefined");let Lt=s==="OnlyCoinA",Vt=Lt?hr:ur,tt=j(ze,i,qt.toString());await this.handleWithSwap(e,Vt,ct,wt,i,n,Lt,a,l,[{poolID:Qe,ticklower:Ue.wrapped_position.tick_lower_index,tickUpper:Ue.wrapped_position.tick_upper_index,deltaLiquidity:Number(tt)}]),e.transferObjects([Lt?ur:hr,...ar],this._sdk.senderAddress)}else e.transferObjects([ur,hr,...ar],this._sdk.senderAddress);return e}async handleWithSwap(t,e,n,i,s,a,l,f,p,C){let{receive_amount_a:B,receive_amount_b:N}=await this.preCalculateWithdrawAmount({pool_id:a,mode:"FixedOneSide",burn_lp_amount:s}),le=l?i:n,Ee=l?n:i,Ue=l?N:B,ze={from:le,target:Ee,amount:new BN(Ue),byAmountIn:!0,depth:3,splitAlgorithm:void 0,splitFactor:void 0,splitCount:void 0,providers:this._sdk.sdkOptions.providers,liquidityChanges:C},Ze=await this._sdk.AggregatorClient.findRouters(ze);if(!Ze)throw Error("not find Router");if(Ze.error!==void 0)throw Error(`find Router error : ${Ze.error}`);let Qe={routers:Ze,inputCoin:e,slippage:f,txb:t,partner:p},ct=await this._sdk.AggregatorClient.fixableRouterSwap(Qe);t.transferObjects([ct],t.pure.address(this._sdk.getVerifySenderAddress()))}buildWithdrawBufferReward({reward_coin_types:t,pool_id:e,withdraw_cert:n,lp_token_type:i},s){let{published_at:a,configs:l}=this._sdk.sdkOptions.vaults;return t.map(f=>s.moveCall({target:`${a}::pool::withdraw_buffer_reward`,typeArguments:[i,f],arguments:[s.object(e),s.object(l.global_config_id),n]}))}async preCalculateDepositValue(t,e){let{amount_usd:n,pool_id:i,mode:s,uuid:a}=t,{pool:l,clmmPool:f}=await this.getVaultAndPool(i,!1),{current_sqrt_price:p}=f,{tick_lower_index:C,tick_upper_index:B,coin_type_a:N,coin_type_b:le}=l.clmm_vault.wrapped_position,Ee="0",Ue="0",ze=await this._sdk.PythPrice.getLatestPrice([N,le]);console.log(" ~ VaultsModule ~ preCalculateDepositValue ~ priceMap:",ze);let Ze=ze[N],Qe=ze[le];if(!Ze||!Qe)throw new Error("get coin price failed");switch(s){case"FixedOneSide":{let{amountA:ct,amountB:wt}=de(C,B,new BN(p),n,Ze.price,Qe.price,Ze.coin_decimals,Qe.coin_decimals);Ee=ct.toString(),Ue=wt.toString();break}case"FlexibleBoth":{let{amountA:ct,amountB:wt}=U(d$3(.5),d$3(.5),n,Ze.price,Qe.price,Ze.coin_decimals,Qe.coin_decimals);Ee=ct.toString(),Ue=wt.toString();break}case"OnlyCoinA":{let{amountA:ct,amountB:wt}=U(d$3(1),d$3(0),n,Ze.price,Qe.price,Ze.coin_decimals,Qe.coin_decimals);Ee=ct.toString(),Ue=wt.toString();break}case"OnlyCoinB":{let{amountA:ct,amountB:wt}=U(d$3(0),d$3(1),n,Ze.price,Qe.price,Ze.coin_decimals,Qe.coin_decimals);Ee=ct.toString(),Ue=wt.toString();break}default:throw new Error(`Unsupported deposit mode: ${s}`)}return e&&this.calculateDepositLpAmountBoth(l,f,Ee,Ue).then(ct=>{e.onSuccess(ct,a)}).catch(ct=>{e.onError(ct,a)}),{deposit_amount_a:Ee,deposit_amount_b:Ue,mode:s}}async preCalculateDepositAmount(t,e){let{mode:n,pool_id:i,uuid:s}=t,a="0",l="0",{pool:f,clmmPool:p}=await this.getVaultAndPool(i,!1);switch(n){case"FixedOneSide":{let{fixed_amount:C,fixed_coin_a:B}=t,{other_amount:N}=this.calculateDepositOtherSide(f,p,C,B,e,s);B?(a=C,l=N):(l=C,a=N);break}case"FlexibleBoth":{let{coin_amount_a:C,coin_amount_b:B}=t;a=C,l=B,this.calculateDepositLpAmountBoth(f,p,C,B).then(N=>{e.onSuccess(N,s)}).catch(N=>{e.onError(N,s)});break}case"OnlyCoinA":{a=t.coin_amount_a,this.calculateDepositLpAmountBoth(f,p,a,"0").then(C=>{e.onSuccess(C,s)}).catch(C=>{e.onError(C,s)});break}case"OnlyCoinB":{l=t.coin_amount_b,this.calculateDepositLpAmountBoth(f,p,"0",l).then(C=>{e.onSuccess(C,s)}).catch(C=>{e.onError(C,s)});break}default:throw new Error(`Unsupported deposit mode: ${n}`)}return{deposit_amount_a:a,deposit_amount_b:l,mode:n}}async getVaultAndPool(t,e=!1){let n=await this.getPool(t,e);if(n===void 0)throw new Error("get vaults pool failed");let i=await this._sdk.CetusClmmSDK.Pool.getPool(n.clmm_vault.clmm_pool_id,e);if(i===void 0)throw new Error("get vaults clmmPool failed");return{clmmPool:i,pool:n}}calculateDepositOtherSide(t,e,n,i,s,a){let{clmm_vault:l}=t,{current_sqrt_price:f}=e,p=l.wrapped_position.tick_lower_index,C=l.wrapped_position.tick_upper_index,B=ClmmPoolUtil$1.estLiquidityAndcoinAmountFromOneAmounts(p,C,new BN(n),i,!0,1,new BN(f)),{coinAmountA:N,coinAmountB:le}=B;return this.calculateDepositLpAmountBoth(t,e,N.toString(),le.toString()).then(Ee=>{s.onSuccess(Ee,a)}).catch(Ee=>{s.onError(Ee,a)}),{other_amount:i?le.toString():N.toString()}}async calculateDepositLpAmountBoth(t,e,n,i){let{lp_token_treasury:s,hard_cap:a}=t,l=fixCoinType(e.coinTypeA,!1),f=fixCoinType(e.coinTypeB,!1),{rewarderList:p,feeList:C}=await this.getVaultsPositionRewarderAndFee(t.id),B=ee(t,C,p),N=await fe(this,t,e,B,!0),le=await this._sdk.PythPrice.getLatestPrice([l,f],!0),Ee=le[l],Ue=le[f];if(console.log(" ~ VaultsModule ~ calculateDepositLpAmountBoth ~ price:",{price_a:Ee,price_b:Ue}),!Ee)throw Error(`not find ${l} price`);if(!Ue)throw Error(`not find ${f} price`);let ze={};ze[l]={price:Ee,value:n.toString()},ze[f]={price:Ue,value:i.toString()};let Ze=Z(ze,t.quote_type),Qe=me(s,Ze,N);return console.log(" ~ VaultsModule ~ calculateDepositLpAmountBoth :",{lp_token_treasury:s,userTvl:Ze,aum:N,lp_amount:Qe}),Qe}async preCalculateWithdrawAmount(t){let{mode:e,pool_id:n}=t,i="0",s="0",a="0",l="0",f,{pool:p,clmmPool:C}=await this.getVaultAndPool(n,!1);switch(e){case"FixedOneSide":let B=await this.calculateWithdrawOtherSide(p,C,t.burn_lp_amount);a=B.burn_lp_amount,i=B.receive_amount_a,s=B.receive_amount_b,l=B.remove_liquidity;break;case"OnlyCoinA":{let N=await this.calculateWithdrawOnlyCoin(p,C,t.burn_lp_amount,!0);a=N.burn_lp_amount,i=N.receive_amount_a,s=N.receive_amount_b,l=N.remove_liquidity,f=N.swap;break}case"OnlyCoinB":{let N=await this.calculateWithdrawOnlyCoin(p,C,t.burn_lp_amount,!1);a=N.burn_lp_amount,i=N.receive_amount_a,s=N.receive_amount_b,l=N.remove_liquidity,f=N.swap;break}default:throw new Error(`Unsupported withdraw mode: ${e}`)}return{remove_liquidity:l,burn_lp_amount:a,receive_amount_a:i,receive_amount_b:s,mode:e,swap:f}}async calculateWithdrawOtherSide(t,e,n){var wt,qt;let{clmm_vault:i,lp_token_treasury:s}=t,{current_sqrt_price:a}=e,{coin_type_a:l,coin_type_b:f}=t.clmm_vault.wrapped_position,p=i.wrapped_position.tick_lower_index,C=i.wrapped_position.tick_upper_index,B=i.wrapped_position.liquidity,N=TickMath$1.tickIndexToSqrtPriceX64(p),le=TickMath$1.tickIndexToSqrtPriceX64(C),Ee=j(s,n,B),{coinA:Ue,coinB:ze}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(Ee),new BN(a),N,le,!1),Ze=$(n,t),Qe=d$3(Ue.toString()).add(((wt=Ze[l])==null?void 0:wt.value)||"0").toFixed(0),ct=d$3(ze.toString()).add(((qt=Ze[f])==null?void 0:qt.value)||"0").toFixed(0);return{receive_amount_a:Qe,receive_amount_b:ct,burn_lp_amount:n,mode:"FixedOneSide",remove_liquidity:Ee}}async calculateWithdrawOnlyCoin(t,e,n,i){let{totalReceiveAmount:s,swapAmountIn:a,swapAmountOut:l,removeLiquidity:f}=await this.calculateWithdrawOnlyCoinByLpAmount(t,e,i,n);return{receive_amount_a:i?s:"0",receive_amount_b:i?"0":s,burn_lp_amount:n,remove_liquidity:f,swap:{swap_amount_in:a,swap_amount_out:l},mode:"FixedOneSide"}}async calculateWithdrawOnlyCoinByLpAmount(t,e,n,i){var tt,Ye;let{clmm_vault:s,lp_token_treasury:a}=t,{current_sqrt_price:l}=e,{coin_type_a:f,coin_type_b:p}=s.wrapped_position,C=s.wrapped_position.tick_lower_index,B=s.wrapped_position.tick_upper_index,N=s.wrapped_position.liquidity,le=TickMath$1.tickIndexToSqrtPriceX64(C),Ee=TickMath$1.tickIndexToSqrtPriceX64(B),Ue=j(a,i,N),{coinA:ze,coinB:Ze}=ClmmPoolUtil$1.getCoinAmountFromLiquidity(new BN(Ue),new BN(l),le,Ee,!1),Qe=await this._sdk.PythPrice.getLatestPrice([f,p],!0),ct=Qe[f],wt=Qe[p];if(!ct)throw Error(`not find ${f} price`);if(!wt)throw Error(`not find ${p} price`);let qt=n?wt:ct,nr=n?ct:wt,{quote_per_base:ir}=_e(qt.price,nr.price),or=$(i,t),ur=d$3(ze.toString()).add(((tt=or[f])==null?void 0:tt.value)||"0").toFixed(0),hr=d$3(Ze.toString()).add(((Ye=or[p])==null?void 0:Ye.value)||"0").toFixed(0),fr=n?ur:hr,ar=n?hr:ur,Lt=toDecimalsAmount(d$3(fromDecimalsAmount(ar,n?wt.coin_decimals:ct.coin_decimals)).mul(ir).toString(),n?ct.coin_decimals:wt.coin_decimals).toString(),Vt=d$3(fr).add(Lt).toFixed(0);return{burn_lp_amount:i,removeLiquidity:Ue,is_coin_a:n,originAmount:fr,swapAmountIn:ar,swapAmountOut:d$3(Lt).toFixed(0,Decimal$1.ROUND_DOWN),totalReceiveAmount:Vt}}async getPackageConfigs(){let t={registry_id:"1",pools_handle:"",pyth_oracle_id:"1",oracle_infos_handle:"",prices_handle:"1",global_config_id:"1"},{package_id:e}=this._sdk.sdkOptions.vaults,n=await this._sdk.FullClient.getObject({id:e,options:{showPreviousTransaction:!0}}),i=getObjectPreviousTransactionDigest(n);(await this._sdk.FullClient.queryEventsByPage({Transaction:i})).data.forEach(p=>{let C=p.parsedJson;if(p.type)switch(extractStructTagFromType$1(p.type).full_address){case`${e}::pool::InitEvent`:t.registry_id=C.registry_id;break;case`${e}::pyth_oracle::InitEvent`:t.pyth_oracle_id=C.pyth_oracle_id;break;case`${e}::config::InitConfigEvent`:t.global_config_id=C.global_config;break}});let s=await this._sdk.FullClient.getObject({id:t.registry_id,options:{showContent:!0}}),a=getObjectFields(s);t.pools_handle=a.pools.fields.id.id;let l=await this._sdk.FullClient.getObject({id:t.pyth_oracle_id,options:{showContent:!0}}),f=getObjectFields(l);return t.oracle_infos_handle=f.oracle_infos.fields.id.id,t.prices_handle=f.prices.fields.id.id,this._sdk.sdkOptions.vaults.configs=t,this._sdk.sdkOptions}},Ce={"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC":{coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",price_feed_id:"0xeaa020c61cc479712813461ce153894a96a6c00b21ed0cfc2798d1f9a9e9c94a",coin_decimals:6},"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":{coin_type:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",price_feed_id:"0x23d7315113f5b1d3ba7a83604c44b94d79f4fd69af77f804fc7f920a6dc65744",coin_decimals:9},"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS":{coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",price_feed_id:"0xe5b274b2611143df055d6e7cd8d93fe1961716bcd4dca1cad87a83bc1e78c1ef",coin_decimals:9},"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP":{coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",price_feed_id:"0x29bdd5248234e33bd93d3b81100b5fa32eaa5997843847e2c2cb16d7c6d9f7ff",coin_decimals:6},"0xa99b8952d4f7d947ea77fe0ecdcc9e5fc0bcab2841d6e2a5aa00c3044e5544b5::navx::NAVX":{coin_type:"0xa99b8952d4f7d947ea77fe0ecdcc9e5fc0bcab2841d6e2a5aa00c3044e5544b5::navx::NAVX",price_feed_id:"0x88250f854c019ef4f88a5c073d52a18bb1c6ac437033f5932cd017d24917ab46",coin_decimals:9},"0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN":{coin_type:"0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN",price_feed_id:"0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43",coin_decimals:9},"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI":{coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",price_feed_id:"0x6120ffcf96395c70aa77e72dcb900bf9d40dccab228efca59a17b90ce423d5e8",coin_decimals:9},"0xd0e89b2af5e4910726fbcd8b8dd37bb79b29e5f83f7491bca830e94f7f226d29::eth::ETH":{coin_type:"0xd0e89b2af5e4910726fbcd8b8dd37bb79b29e5f83f7491bca830e94f7f226d29::eth::ETH",price_feed_id:"0xff61491a931112ddf1bd8147cd1b641375f79f5825126d665480874634fd0ace",coin_decimals:8}},ke={},Ne=(t=>(t.mainnet="mainnet",t.testnet="testnet",t))(Ne||{}),Oe=["CETUS","TURBOS","STEAMM","SPRINGSUI","HAEDAL","FLOWX","AFTERMATH","ALPHAFI","BLUEFIN","METASTABLE","VOLO","SCALLOP","KRIYA","FLOWXV3","DEEPBOOKV3","AFSUI","BLUEMOVE","KRIYAV3","HAEDALPMM","OBRIC"];function Fe(t){try{let{request_time:e,error:n,request_params:i,request_url:s,action:a}=t;if(window!=null&&window.gtag){let l=n.message==="Request Timeout";window.gtag("event","API_Error",{request_action:a,request_url:s,request_time:e,request_params:JSON.stringify(i),error_msg:String(n)}),console.error(`[GA] Logged API ${l?"Timeout":"Error"}:`,s,n)}else console.error("[GA] gtag is not defined. Skipping analytics logging.")}catch(e){console.log(" ~ trackPythError ~ error:",e)}}var He=16*1024,X=class{constructor(t){Or(this,"_sdk");Or(this,"connection");Or(this,"suiPythClient");Or(this,"hasChangeConnection",!1);Or(this,"errorList",[]);let{pyth_configs:e}=t.sdkOptions.vaults,{pyth_state_id:n,wormhole_state_id:i}=e;this._sdk=t,this.hasChangeConnection=!1;let{primary:s}=t.sdkOptions.vaults.pyth_configs.hermes_service_urls;if(s.length===0)throw new Error("primary url is empty");this.connection=new lib$2.SuiPriceServiceConnection(s),this.suiPythClient=new lib$2.SuiPythClient(this._sdk.FullClient,n,i)}get sdk(){return this._sdk}recordError(t,e,n){let{secondary:i,primary:s}=this._sdk.sdkOptions.vaults.pyth_configs.hermes_service_urls,a={error:t,request_params:e,request_url:this.hasChangeConnection&&i?i:s,action:n,request_time:Date.now()};Fe(a),this.errorList.push(a)}readErrorList(){let t=this.errorList;return this.errorList=[],t}async getFeedInfoList(t){let e=t.map(n=>this.getFeedInfo(n,!1));return await Promise.all(e)}priceCheck(t,e=60){let n=Math.floor(Date.now()/1e3);if(!(Math.abs(n-t.last_update_time)>e))return t}async getLatestPrice(t,e=!1){var a;let n={},i=[];if(e?t.forEach(l=>{let f=this._sdk.getCache(`getLatestPrice_${l}`);f&&this.priceCheck(f,60)?n[l]=f:i.push(l)}):i=[...t],i.length===0)return n;let s=await this.getFeedInfoList(i);return(a=await this.getLatestPriceFeeds(s.map(l=>l.price_feed_id)))==null||a.forEach((l,f)=>{let p=l.getPriceUnchecked();if(p){let{price:C,expo:B}=p,N=d$3(C).mul(d$3(10).pow(d$3(B))).toString(),le=s[f],Ee={coin_type:le.coin_type,price:N,coin_decimals:le.coin_decimals,oracle_price:0n,last_update_time:p.publishTime};Ee.oracle_price=be(BigInt(C),BigInt(B)),n[i[f]]=Ee,this._sdk.updateCache(`getLatestPrice_${Ee.coin_type}`,Ee)}}),n}async getPriceFeedsUpdateData(t){try{return await this.connection.getPriceFeedsUpdateData(t)}catch(e){this.recordError(e,t,"getPriceFeedsUpdateData");let{secondary:n}=this._sdk.sdkOptions.vaults.pyth_configs.hermes_service_urls;if(n){this.hasChangeConnection=!0,this.connection=new lib$2.SuiPriceServiceConnection(n);try{return await this.connection.getPriceFeedsUpdateData(t)}catch(i){console.log(" ~ PythPriceModule ~ getPriceFeedsUpdateData ~ error:",i),this.recordError(i,t,"getPriceFeedsUpdateData")}}}}async getLatestPriceFeeds(t){try{return await this.connection.getLatestPriceFeeds(t)}catch(e){this.recordError(e,t,"getLatestPriceFeeds");let{secondary:n}=this._sdk.sdkOptions.vaults.pyth_configs.hermes_service_urls;if(n){this.hasChangeConnection=!0,this.connection=new lib$2.SuiPriceServiceConnection(n);try{return await this.connection.getLatestPriceFeeds(t)}catch(i){this.recordError(i,t,"getLatestPriceFeeds")}}}}async buildUpdatePythPricePayload(t,e){let{pyth_configs:n,published_at:i,configs:s}=this._sdk.sdkOptions.vaults,{pyth_state_id:a,pyth_published_at:l,pyth_package_id:f}=n,{global_config_id:p,pyth_oracle_id:C}=s,B=(await this.getFeedInfoList(t)).map(Ze=>Ze.price_feed_id);if(t.length!==B.length)throw Error("find feed id fail");let N=await this.getPriceFeedsUpdateData(B);if(!N)throw new Error("get price update data fail");if(N.length>1)throw new Error("SDK does not support sending multiple accumulator messages in a single transaction");let le=this.suiPythClient.extractVaaBytesFromAccumulatorMessage(N[0]),Ee=await this.suiPythClient.verifyVaas([le],e),[Ue]=e.moveCall({target:`${l}::pyth::create_authenticated_price_infos_using_accumulator`,typeArguments:[],arguments:[e.object(a),e.pure(suiBcs$2.vector(suiBcs$2.U8).serialize(Array.from(N[0]),{maxSize:He}).toBytes()),Ee[0],e.object(CLOCK_ADDRESS$2)]}),ze=0;for(let Ze of B){let Qe=await this.suiPythClient.getPriceFeedObjectId(Ze);if(!Qe)throw new Error(`Price feed ${Ze} not found, please create it first`);[Ue]=e.moveCall({target:`${i}::pyth_oracle::update_price`,typeArguments:[t[ze]],arguments:[e.object(C),e.object(p),e.object(a),Ue,e.object(Qe),e.object(CLOCK_ADDRESS$2)]}),ze+=1}return e.moveCall({target:`${l}::hot_potato_vector::destroy`,arguments:[Ue],typeArguments:[`${f}::price_info::PriceInfo`]}),e}getFeedInfoByJson(t){let{env:e}=this._sdk.sdkOptions,n=fixCoinType(t,!1);return e==="mainnet"?Ce[n]:ke[n]}async getFeedInfo(t,e){let n=`getFeedInfo_${t}`,i=this._sdk.getCache(n,e);if(i)return i;let s=this.getFeedInfoByJson(t);if(s)return s;let{configs:a}=this._sdk.sdkOptions.vaults,l=await this._sdk.FullClient.getDynamicFieldObject({parentId:a.oracle_infos_handle,name:{type:"0x1::type_name::TypeName",value:fixCoinType(t,!0)}}),{fields:f}=l.data.content.fields.value,p={coin_type:t,price_feed_id:ye(f.price_feed_id),coin_decimals:f.coin_decimals};return console.log(" ~ PythPriceModule ~ getFeedInfo ~ info:",p),this._sdk.updateCache(n,p),p}},T=class{constructor(t){Or(this,"_cache",{});Or(this,"_sdkOptions");Or(this,"_senderAddress","");Or(this,"_vaults");Or(this,"_pythPrice");Or(this,"_aggregatorClient");Or(this,"_cetusClmmSDK");(!t.providers||t.providers.length===0)&&(t.providers=Oe),this._sdkOptions=t,this._cetusClmmSDK=t.env==="testnet"?initTestnetSDK(t.fullRpcUrl):initMainnetSDK(t.fullRpcUrl),this._vaults=new H(this),this._pythPrice=new X(this);let{primary:e,secondary:n}=t.vaults.pyth_configs.hermes_service_urls,i=[e,n].filter(Boolean);this._aggregatorClient=new AggregatorClient25({endpoint:t.aggregatorUrl,signer:normalizeSuiAddress$2("0x0"),client:new SuiClient$1({url:t.fullRpcUrl}),env:t.env==="testnet"?Env.Testnet:Env.Mainnet,pythUrls:i}),patchFixSuiObjectId(this._sdkOptions)}get senderAddress(){return this._senderAddress}set senderAddress(t){this._senderAddress=t,this.CetusClmmSDK.senderAddress=t}get sdkOptions(){return this._sdkOptions}get Vaults(){return this._vaults}get PythPrice(){return this._pythPrice}get FullClient(){return this._cetusClmmSDK.fullClient}get AggregatorClient(){return this._aggregatorClient}get CetusClmmSDK(){return this._cetusClmmSDK}getVerifySenderAddress(){if(this.senderAddress.length===0||!isValidSuiAddress$2(this.senderAddress))throw Error("this sdk senderAddress is illegal");return this.senderAddress}async getOwnerCoinAssets(t,e,n=!0){return await this._cetusClmmSDK.getOwnerCoinAssets(t,e,n)}async getOwnerCoinBalances(t,e){return await this._cetusClmmSDK.getOwnerCoinBalances(t,e)}updateCache(t,e,n=cacheTime24h){this.CetusClmmSDK.updateCache(t,e,n)}getCache(t,e=!1){return this.CetusClmmSDK.getCache(t,e)}},Co=T;const store=(t,e)=>({peripherySdk:new ve$1(envConfigs$1.periphery_sdk_options),setPeripherySdk:n=>{t(()=>({peripherySdk:n}))},burnSdk:new _$1(envConfigs$1.burn_sdk_options),setBurnSdk:n=>{t(()=>({burnSdk:n}))},vaultsSdk:new ce(envConfigs$1.vaults_sdk_options),setVaultsSDK:n=>{t(()=>({vaultsSdk:n}))},xCetusSdk:new xt$1(envConfigs$1.xcetus_sdk_options),setXCetusSdk:n=>{t(()=>({xCetusSdk:n}))},zapSdk:ke$1({env:Tt.mainnet}),setZapSDK:n=>{t(()=>({zapSdk:n}))},volatileVaultsSdk:new Co(envConfigs$1.volatile_vaults_sdk_options),setVolatileVaultsSdk:n=>{t(()=>({volatileVaultsSdk:n}))}}),usePeripherySDKStore=create(store),isMenuActive=(t,e)=>e.startsWith(t.path)||!!t.children&&t.children.some(n=>isMenuActive(n,e)),getCroppedImg=(t,e,n,i="image/jpeg")=>new Promise((s,a)=>{const l=new Image;l.src=t,l.crossOrigin="anonymous",l.onload=()=>{const f=document.createElement("canvas"),p=f.getContext("2d");f.width=e.width,f.height=e.height,p.drawImage(l,e.x,e.y,e.width,e.height,0,0,e.width,e.height),f.toDataURL(i),f.toBlob(C=>{if(C){const B=new File([C],n,{type:i});s(B)}},i)},l.onerror=f=>{a(f)}}),calcNumber=t=>typeof t=="string"&&t.includes("px")?parseInt(t.replace("px","")):t.toString(),replaceFilename=(t,e)=>{const n=new Blob([t],{type:t.type});return new File([n],e,{type:t.type,lastModified:t.lastModified})},ExcludeCNCharRegex=/^[^\u4e00-\u9fa5]+$/,ExcludeSpecialCharRegex=/^[a-zA-Z0-9\s]+$/,SymbolExcludeSpecialCharRegex=/^[a-zA-Z0-9_]+$/,SymbolLimitRegex=/^[A-Z][A-Za-z_0-9]*$/,BlankSpaceRegex=/\s/,WebSiteUrlRegex=/^(https?:\/\/)?(www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(\/[^\s]*)?$/,XUrlRegex=/^(https?:\/\/)?(www\.)?x\.com\/([a-zA-Z0-9_\/\-]*)$/,DiscordRegex=/^(https?:\/\/)?(www\.)?discord\.com(\/[a-zA-Z0-9_\/\-]*)?$/,TelegramRegex=/^(https?:\/\/)?(www\.)?(t\.me|telegram\.org)(\/[a-zA-Z0-9_\-]*)?$/;function SelectTab(t){const{type:e,tabList:n,currentTab:i,isActive:s,handleChangeTab:a,wrapStyle:l={h:"60px",p:"8px"},itemStyle:f={fontSize:"14px"},selectTabItemTextStyle:p,...C}=t,{isApp:B}=useWindowWidth(),N=le=>s?s(i,le):i===(le.key||le.label);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e==="outlineTab"&&jsxRuntimeExports.jsx(Flex,{bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",...l,children:n==null?void 0:n.map(le=>{const Ee=N(le);return jsxRuntimeExports.jsxs(Flex,{borderRadius:"4px",align:"center",justify:"center",cursor:"pointer",bg:Ee?"card_bg":"none",onClick:()=>a(le),_hover:{p:{color:B?"none":"primary"}},...f,children:[le.imgInfo&&(le!=null&&le.isToken?jsxRuntimeExports.jsx(SingleCoinImage,{...le.imgInfo,imageUrl:le.imgInfo.src}):jsxRuntimeExports.jsx(Image$1,{...le.imgInfo,src:le.imgInfo.src})),le.beforeIcon&&(le!=null&&le.tooltip?jsxRuntimeExports.jsx(TooltipCon,{tooltip:le.tooltip,children:jsxRuntimeExports.jsx(Icon,{...le.beforeIcon,isActive:Ee})}):jsxRuntimeExports.jsx(Icon,{...le.beforeIcon,isActive:Ee})),jsxRuntimeExports.jsx(Text$1,{fontSize:f.fontSize,whiteSpace:"nowrap",color:Ee?"primary":"primary_gray",_hover:{color:B?"none":"primary"},...p,children:le!=null&&le.isToken?textEllipses(le.label,10):le.label}),(le==null?void 0:le.num)!==""&&((le==null?void 0:le.num)||Number(le==null?void 0:le.num)==0)&&jsxRuntimeExports.jsx(Block,{w:"unset",lineHeight:"1",ml:"8px",p:"2px 6px",borderRadius:"8px",fontSize:"12px",color:"primary",children:le==null?void 0:le.num}),le.afterIcon&&(le!=null&&le.tooltip?jsxRuntimeExports.jsx(TooltipCon,{tooltip:le.tooltip,children:jsxRuntimeExports.jsx(Icon,{...le.afterIcon,isActive:Ee})}):jsxRuntimeExports.jsx(Icon,{...le.afterIcon,isActive:Ee}))]},(le==null?void 0:le.key)||le.label)})}),e==="borderTab"&&jsxRuntimeExports.jsx(Flex,{borderRadius:"12px",bg:"bg_secondary",border:"1px solid",borderColor:"border",...l,children:n==null?void 0:n.map(le=>jsxRuntimeExports.jsxs(Flex,{align:"center",justify:"center",cursor:"pointer",onClick:()=>a(le),_hover:{p:{color:"primary"}},...f,...C,children:[le.imgInfo&&jsxRuntimeExports.jsx(Image$1,{...le.imgInfo,src:le.imgInfo.src,mr:"8px"}),le.beforeIcon&&(le!=null&&le.tooltip?jsxRuntimeExports.jsx(TooltipCon,{tooltip:le.tooltip,children:jsxRuntimeExports.jsx(Icon,{...le.beforeIcon,isActive:N(le)})}):jsxRuntimeExports.jsx(Icon,{...le.beforeIcon,isActive:N(le)})),jsxRuntimeExports.jsx(Text$1,{color:N(le)?"primary":"primary_gray",fontSize:f.fontSize,h:f.fontSize,lineHeight:f.fontSize,position:"relative",sx:Object.assign({_hover:{color:"primary"},_before:N(le)?{content:"''",width:"20px",height:"2px",background:"primary",position:"absolute",left:"calc(50% - 10px)",bottom:-d$2(calcNumber(l.h)).minus(calcNumber(f.fontSize||"14px")).div(2).toString()+"px"}:{}},(f==null?void 0:f.sx)||{}),children:le.label}),(le==null?void 0:le.num)!==""&&((le==null?void 0:le.num)||Number(le==null?void 0:le.num)==0)&&jsxRuntimeExports.jsx(Block,{w:"unset",lineHeight:"1",ml:"8px",p:"2px 6px",borderRadius:"8px",fontSize:"12px",color:"primary",children:le==null?void 0:le.num}),le.afterIcon&&(le!=null&&le.tooltip?jsxRuntimeExports.jsx(TooltipCon,{tooltip:le.tooltip,children:jsxRuntimeExports.jsx(Icon,{...le.afterIcon,isActive:N(le)})}):jsxRuntimeExports.jsx(Icon,{...le.afterIcon,isActive:N(le)})),(le==null?void 0:le.beta)&&jsxRuntimeExports.jsx(Image$1,{src:"/images/icon_beta@2x.png",position:"absolute",right:"-30px",top:"10px",h:"12px"})]},(le==null?void 0:le.key)||le.label))})]})}const TooltipCon=({children:t,tooltip:e})=>jsxRuntimeExports.jsx(CetusTooltip,{placement:"bottom-end",tooltip:jsxRuntimeExports.jsx(Text$1,{fontSize:"12px",lineHeight:"20px",children:e}),children:jsxRuntimeExports.jsx(Center,{children:t})});function SearchInput({inputValue:t,changeInputValue:e,isFrom:n="",inputFontSize:i="sm",isWidget:s=!1}){const a=reactExports.useRef(null),{isApp:l}=useWindowWidth();return reactExports.useEffect(()=>{l||a.current.focus()},[l]),jsxRuntimeExports.jsxs(InputGroup,{children:[jsxRuntimeExports.jsx(Input,{_hover:{bg:s?"swap_bg_secondary":"bg_secondary"},bg:s?"swap_bg_secondary":"bg_secondary",ref:a,borderRadius:"8px",h:"36px",border:"none",variant:"outline",value:t,onChange:f=>{e(f.target.value)},fontWeight:"500",textAlign:"left",fontSize:i,placeholder:"Search by token or address",pr:n=="pools"?"22px":{base:"28px",md:"28px",lg:"28px"},pl:n=="pools"?"8px":{md:"12px",lg:"16px"}}),jsxRuntimeExports.jsx(InputRightElement,{children:t?jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",position:"absolute",top:"8px",right:n=="pools"?"4px":"8px",onClick:f=>{f.stopPropagation(),e("")}}):null})]})}var _populated=!1,_ie,_firefox,_opera,_webkit,_chrome,_ie_real_version,_osx,_windows,_linux,_android,_win64,_iphone,_ipad,_native,_mobile;function _populate(){if(!_populated){_populated=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(_iphone=/\b(iPhone|iP[ao]d)/.exec(t),_ipad=/\b(iP[ao]d)/.exec(t),_android=/Android/i.exec(t),_native=/FBAN\/\w+;/i.exec(t),_mobile=/Mobile/i.exec(t),_win64=!!/Win64/.exec(t),e){_ie=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,_ie&&document&&document.documentMode&&(_ie=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(t);_ie_real_version=i?parseFloat(i[1])+4:_ie,_firefox=e[2]?parseFloat(e[2]):NaN,_opera=e[3]?parseFloat(e[3]):NaN,_webkit=e[4]?parseFloat(e[4]):NaN,_webkit?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),_chrome=e&&e[1]?parseFloat(e[1]):NaN):_chrome=NaN}else _ie=_firefox=_opera=_chrome=_webkit=NaN;if(n){if(n[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);_osx=s?parseFloat(s[1].replace("_",".")):!0}else _osx=!1;_windows=!!n[2],_linux=!!n[3]}else _osx=_windows=_linux=!1}}var UserAgent_DEPRECATED$1={ie:function(){return _populate()||_ie},ieCompatibilityMode:function(){return _populate()||_ie_real_version>_ie},ie64:function(){return UserAgent_DEPRECATED$1.ie()&&_win64},firefox:function(){return _populate()||_firefox},opera:function(){return _populate()||_opera},webkit:function(){return _populate()||_webkit},safari:function(){return UserAgent_DEPRECATED$1.webkit()},chrome:function(){return _populate()||_chrome},windows:function(){return _populate()||_windows},osx:function(){return _populate()||_osx},linux:function(){return _populate()||_linux},iphone:function(){return _populate()||_iphone},mobile:function(){return _populate()||_iphone||_ipad||_android||_mobile},nativeApp:function(){return _populate()||_native},android:function(){return _populate()||_android},ipad:function(){return _populate()||_ipad}},UserAgent_DEPRECATED_1=UserAgent_DEPRECATED$1,canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),ExecutionEnvironment$1={canUseDOM},ExecutionEnvironment_1=ExecutionEnvironment$1,ExecutionEnvironment=ExecutionEnvironment_1,useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function isEventSupported$1(t,e){if(!ExecutionEnvironment.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var s=document.createElement("div");s.setAttribute(n,"return;"),i=typeof s[n]=="function"}return!i&&useHasFeature&&t==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var isEventSupported_1=isEventSupported$1,UserAgent_DEPRECATED=UserAgent_DEPRECATED_1,isEventSupported=isEventSupported_1,PIXEL_STEP=10,LINE_HEIGHT=40,PAGE_HEIGHT=800;function normalizeWheel$2(t){var e=0,n=0,i=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=e*PIXEL_STEP,s=n*PIXEL_STEP,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||s)&&t.deltaMode&&(t.deltaMode==1?(i*=LINE_HEIGHT,s*=LINE_HEIGHT):(i*=PAGE_HEIGHT,s*=PAGE_HEIGHT)),i&&!e&&(e=i<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:s}}normalizeWheel$2.getEventType=function(){return UserAgent_DEPRECATED.firefox()?"DOMMouseScroll":isEventSupported("wheel")?"wheel":"mousewheel"};var normalizeWheel_1=normalizeWheel$2,normalizeWheel=normalizeWheel_1;const normalizeWheel$1=getDefaultExportFromCjs$2(normalizeWheel);function getCropSize(t,e,n,i,s,a){a===void 0&&(a=0);var l=rotateSize(t,e,a),f=l.width,p=l.height,C=Math.min(f,n),B=Math.min(p,i);return C>B*s?{width:B*s,height:B}:{width:C,height:C/s}}function getMediaZoom(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function restrictPosition(t,e,n,i,s){s===void 0&&(s=0);var a=rotateSize(e.width,e.height,s),l=a.width,f=a.height;return{x:restrictPositionCoord(t.x,l,n.width,i),y:restrictPositionCoord(t.y,f,n.height,i)}}function restrictPositionCoord(t,e,n,i){var s=e*i/2-n/2;return clamp(t,-s,s)}function getDistanceBetweenPoints(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function getRotationBetweenPoints(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function computeCroppedArea(t,e,n,i,s,a,l){a===void 0&&(a=0),l===void 0&&(l=!0);var f=l?limitArea:noOp,p=rotateSize(e.width,e.height,a),C=rotateSize(e.naturalWidth,e.naturalHeight,a),B={x:f(100,((p.width-n.width/s)/2-t.x/s)/p.width*100),y:f(100,((p.height-n.height/s)/2-t.y/s)/p.height*100),width:f(100,n.width/p.width*100/s),height:f(100,n.height/p.height*100/s)},N=Math.round(f(C.width,B.width*C.width/100)),le=Math.round(f(C.height,B.height*C.height/100)),Ee=C.width>=C.height*i,Ue=Ee?{width:Math.round(le*i),height:le}:{width:N,height:Math.round(N/i)},ze=__assign(__assign({},Ue),{x:Math.round(f(C.width-Ue.width,B.x*C.width/100)),y:Math.round(f(C.height-Ue.height,B.y*C.height/100))});return{croppedAreaPercentages:B,croppedAreaPixels:ze}}function limitArea(t,e){return Math.min(t,Math.max(0,e))}function noOp(t,e){return e}function getInitialCropFromCroppedAreaPercentages(t,e,n,i,s,a){var l=rotateSize(e.width,e.height,n),f=clamp(i.width/l.width*(100/t.width),s,a),p={x:f*l.width/2-i.width/2-l.width*f*(t.x/100),y:f*l.height/2-i.height/2-l.height*f*(t.y/100)};return{crop:p,zoom:f}}function getZoomFromCroppedAreaPixels(t,e,n){var i=getMediaZoom(e);return n.height>n.width?n.height/(t.height*i):n.width/(t.width*i)}function getInitialCropFromCroppedAreaPixels(t,e,n,i,s,a){n===void 0&&(n=0);var l=rotateSize(e.naturalWidth,e.naturalHeight,n),f=clamp(getZoomFromCroppedAreaPixels(t,e,i),s,a),p=i.height>i.width?i.height/t.height:i.width/t.width,C={x:((l.width-t.width)/2-t.x)*p,y:((l.height-t.height)/2-t.y)*p};return{crop:C,zoom:f}}function getCenter(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function getRadianAngle(t){return t*Math.PI/180}function rotateSize(t,e,n){var i=getRadianAngle(n);return{width:Math.abs(Math.cos(i)*t)+Math.abs(Math.sin(i)*e),height:Math.abs(Math.sin(i)*t)+Math.abs(Math.cos(i)*e)}}function clamp(t,e,n){return Math.min(Math.max(t,e),n)}function classNames(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var css_248z=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,MIN_ZOOM=1,MAX_ZOOM=3,KEYBOARD_STEP=1,Cropper=function(t){__extends$1(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=reactExports.createRef(),n.imageRef=reactExports.createRef(),n.videoRef=reactExports.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var i=!0;n.resizeObserver=new window.ResizeObserver(function(s){if(i){i=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(i){return i.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturemove",n.onGestureMove),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var i=n.computeSizes();i&&(n.emitCropData(),n.setInitialCrop(i)),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(i){if(n.props.initialCroppedAreaPercentages){var s=getInitialCropFromCroppedAreaPercentages(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,i,n.props.minZoom,n.props.maxZoom),a=s.crop,l=s.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(l)}else if(n.props.initialCroppedAreaPixels){var f=getInitialCropFromCroppedAreaPixels(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,i,n.props.minZoom,n.props.maxZoom),a=f.crop,l=f.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(l)}},n.computeSizes=function(){var i,s,a,l,f,p,C=n.imageRef.current||n.videoRef.current;if(C&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var B=n.containerRect.width/n.containerRect.height,N=((i=n.imageRef.current)===null||i===void 0?void 0:i.naturalWidth)||((s=n.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,le=((a=n.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((l=n.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,Ee=C.offsetWidth<N||C.offsetHeight<le,Ue=N/le,ze=void 0;if(Ee)switch(n.state.mediaObjectFit){default:case"contain":ze=B>Ue?{width:n.containerRect.height*Ue,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/Ue};break;case"horizontal-cover":ze={width:n.containerRect.width,height:n.containerRect.width/Ue};break;case"vertical-cover":ze={width:n.containerRect.height*Ue,height:n.containerRect.height};break}else ze={width:C.offsetWidth,height:C.offsetHeight};n.mediaSize=__assign(__assign({},ze),{naturalWidth:N,naturalHeight:le}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var Ze=n.props.cropSize?n.props.cropSize:getCropSize(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((f=n.state.cropSize)===null||f===void 0?void 0:f.height)!==Ze.height||((p=n.state.cropSize)===null||p===void 0?void 0:p.width)!==Ze.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(Ze),n.setState({cropSize:Ze},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(Ze),Ze}},n.saveContainerPosition=function(){if(n.containerRef){var i=n.containerRef.getBoundingClientRect();n.containerPosition={x:i.left,y:i.top}}},n.onMouseDown=function(i){n.currentDoc&&(i.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(i)))},n.onMouseMove=function(i){return n.onDrag(e.getMousePoint(i))},n.onScroll=function(i){n.currentDoc&&(i.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(i){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(i))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),i.touches.length===2?n.onPinchStart(i):i.touches.length===1&&n.onDragStart(e.getTouchPoint(i.touches[0]))))},n.onTouchMove=function(i){i.preventDefault(),i.touches.length===2?n.onPinchMove(i):i.touches.length===1&&n.onDrag(e.getTouchPoint(i.touches[0]))},n.onGestureStart=function(i){n.currentDoc&&(i.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureMove),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureMove=function(i){if(i.preventDefault(),!n.isTouching){var s=e.getMousePoint(i),a=n.gestureZoomStart-1+i.scale;if(n.setNewZoom(a,s,{shouldUpdatePosition:!0}),n.props.onRotationChange){var l=n.gestureRotationStart+i.rotation;n.props.onRotationChange(l)}}},n.onGestureEnd=function(i){n.cleanEvents()},n.onDragStart=function(i){var s,a,l=i.x,f=i.y;n.dragStartPosition={x:l,y:f},n.dragStartCrop=__assign({},n.props.crop),(a=(s=n.props).onInteractionStart)===null||a===void 0||a.call(s)},n.onDrag=function(i){var s=i.x,a=i.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(s===void 0||a===void 0)){var l=s-n.dragStartPosition.x,f=a-n.dragStartPosition.y,p={x:n.dragStartCrop.x+l,y:n.dragStartCrop.y+f},C=n.props.restrictPosition?restrictPosition(p,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):p;n.props.onCropChange(C)}}))},n.onDragStopped=function(){var i,s;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n.onWheel=function(i){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(i))){i.preventDefault();var s=e.getMousePoint(i),a=normalizeWheel$1(i).pixelY,l=n.props.zoom-a*n.props.zoomSpeed/200;n.setNewZoom(l,s,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var f,p;return(p=(f=n.props).onInteractionStart)===null||p===void 0?void 0:p.call(f)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var f,p;return(p=(f=n.props).onInteractionEnd)===null||p===void 0?void 0:p.call(f)})},250)}},n.getPointOnContainer=function(i,s){var a=i.x,l=i.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(a-s.x),y:n.containerRect.height/2-(l-s.y)}},n.getPointOnMedia=function(i){var s=i.x,a=i.y,l=n.props,f=l.crop,p=l.zoom;return{x:(s+f.x)/p,y:(a+f.y)/p}},n.setNewZoom=function(i,s,a){var l=a===void 0?{}:a,f=l.shouldUpdatePosition,p=f===void 0?!0:f;if(!(!n.state.cropSize||!n.props.onZoomChange)){var C=clamp(i,n.props.minZoom,n.props.maxZoom);if(p){var B=n.getPointOnContainer(s,n.containerPosition),N=n.getPointOnMedia(B),le={x:N.x*C-B.x,y:N.y*C-B.y},Ee=n.props.restrictPosition?restrictPosition(le,n.mediaSize,n.state.cropSize,C,n.props.rotation):le;n.props.onCropChange(Ee)}n.props.onZoomChange(C)}},n.getCropData=function(){if(!n.state.cropSize)return null;var i=n.props.restrictPosition?restrictPosition(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return computeCroppedArea(i,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var i=n.getCropData();if(i){var s=i.croppedAreaPercentages,a=i.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(s,a),n.props.onCropAreaChange&&n.props.onCropAreaChange(s,a)}},n.emitCropAreaChange=function(){var i=n.getCropData();if(i){var s=i.croppedAreaPercentages,a=i.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(s,a)}},n.recomputeCropPosition=function(){if(n.state.cropSize){var i=n.props.restrictPosition?restrictPosition(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;n.props.onCropChange(i),n.emitCropData()}},n.onKeyDown=function(i){var s,a,l=n.props,f=l.crop,p=l.onCropChange,C=l.keyboardStep,B=l.zoom,N=l.rotation,le=C;if(n.state.cropSize){i.shiftKey&&(le*=.2);var Ee=__assign({},f);switch(i.key){case"ArrowUp":Ee.y-=le,i.preventDefault();break;case"ArrowDown":Ee.y+=le,i.preventDefault();break;case"ArrowLeft":Ee.x-=le,i.preventDefault();break;case"ArrowRight":Ee.x+=le,i.preventDefault();break;default:return}n.props.restrictPosition&&(Ee=restrictPosition(Ee,n.mediaSize,n.state.cropSize,B,N)),i.repeat||(a=(s=n.props).onInteractionStart)===null||a===void 0||a.call(s),p(Ee)}},n.onKeyUp=function(i){var s,a;switch(i.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":i.preventDefault();break;default:return}n.emitCropData(),(a=(s=n.props).onInteractionEnd)===null||a===void 0||a.call(s)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=css_248z,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,i;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((i=this.styleRef.parentNode)===null||i===void 0||i.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var i,s,a,l,f,p,C,B,N;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((i=n.cropSize)===null||i===void 0?void 0:i.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((a=n.cropSize)===null||a===void 0?void 0:a.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((f=n.crop)===null||f===void 0?void 0:f.x)!==((p=this.props.crop)===null||p===void 0?void 0:p.x)||((C=n.crop)===null||C===void 0?void 0:C.y)!==((B=this.props.crop)===null||B===void 0?void 0:B.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((N=this.videoRef.current)===null||N===void 0||N.load());var le=this.getObjectFit();le!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:le},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,i=n.cropSize,s=n.aspect;return i?i.width/i.height:s},e.prototype.getObjectFit=function(){var n,i,s,a;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var f=this.containerRect.width/this.containerRect.height,p=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,C=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,B=p/C;return B<f?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=getDistanceBetweenPoints(i,s),this.lastPinchRotation=getRotationBetweenPoints(i,s),this.onDragStart(getCenter(i,s))},e.prototype.onPinchMove=function(n){var i=this;if(!(!this.currentDoc||!this.currentWindow)){var s=e.getTouchPoint(n.touches[0]),a=e.getTouchPoint(n.touches[1]),l=getCenter(s,a);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var f=getDistanceBetweenPoints(s,a),p=i.props.zoom*(f/i.lastPinchDistance);i.setNewZoom(p,l,{shouldUpdatePosition:!1}),i.lastPinchDistance=f;var C=getRotationBetweenPoints(s,a),B=i.props.rotation+(C-i.lastPinchRotation);i.props.onRotationChange&&i.props.onRotationChange(B),i.lastPinchRotation=C})}},e.prototype.render=function(){var n=this,i,s=this.props,a=s.image,l=s.video,f=s.mediaProps,p=s.cropperProps,C=s.transform,B=s.crop,N=B.x,le=B.y,Ee=s.rotation,Ue=s.zoom,ze=s.cropShape,Ze=s.showGrid,Qe=s.style,ct=Qe.containerStyle,wt=Qe.cropAreaStyle,qt=Qe.mediaStyle,nr=s.classes,ir=nr.containerClassName,or=nr.cropAreaClassName,ur=nr.mediaClassName,hr=(i=this.state.mediaObjectFit)!==null&&i!==void 0?i:this.getObjectFit();return reactExports.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(ar){return n.containerRef=ar},"data-testid":"container",style:ct,className:classNames("reactEasyCrop_Container",ir)},a?reactExports.createElement("img",__assign({alt:"",className:classNames("reactEasyCrop_Image",hr==="contain"&&"reactEasyCrop_Contain",hr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",hr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",ur)},f,{src:a,ref:this.imageRef,style:__assign(__assign({},qt),{transform:C||"translate(".concat(N,"px, ").concat(le,"px) rotate(").concat(Ee,"deg) scale(").concat(Ue,")")}),onLoad:this.onMediaLoad})):l&&reactExports.createElement("video",__assign({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:classNames("reactEasyCrop_Video",hr==="contain"&&"reactEasyCrop_Contain",hr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",hr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",ur)},f,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:__assign(__assign({},qt),{transform:C||"translate(".concat(N,"px, ").concat(le,"px) rotate(").concat(Ee,"deg) scale(").concat(Ue,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(fr){return reactExports.createElement("source",__assign({key:fr.src},fr))})),this.state.cropSize&&reactExports.createElement("div",__assign({ref:this.cropperRef,style:__assign(__assign({},wt),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:classNames("reactEasyCrop_CropArea",ze==="round"&&"reactEasyCrop_CropAreaRound",Ze&&"reactEasyCrop_CropAreaGrid",or)},p)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:MAX_ZOOM,minZoom:MIN_ZOOM,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:KEYBOARD_STEP},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(reactExports.Component);function CropImage({src:t,dataUrl:e,file:n,open:i,onClose:s,onCancel:a,onOk:l}){const[f,p]=reactExports.useState({x:0,y:0}),[C,B]=reactExports.useState(1),[N,le]=reactExports.useState(!1),[Ee,Ue]=reactExports.useState(null),ze=async(Qe,ct)=>{Ue({croppedArea:Qe,croppedAreaPixels:ct})},Ze=async()=>{le(!0);try{const Qe=await getCroppedImg(e,Ee.croppedAreaPixels,n.name,n.type);await l(Qe)}catch(Qe){console.error(Qe)}finally{le(!1)}};return jsxRuntimeExports.jsxs(Modal,{autoFocus:!1,returnFocusOnClose:!1,isOpen:i,onClose:s,isCentered:!0,children:[jsxRuntimeExports.jsx(ModalOverlay,{}),jsxRuntimeExports.jsxs(ModalContent,{children:[jsxRuntimeExports.jsx(ModalHeader,{children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Text$1,{fontFamily:"Inter",color:"text_caption",fontSize:"16px",children:"Edit file"}),jsxRuntimeExports.jsx(Text$1,{fontFamily:"Inter",children:"Crop and zoom on your image."})]})}),jsxRuntimeExports.jsx(ModalCloseButton,{}),jsxRuntimeExports.jsxs(ModalBody,{children:[jsxRuntimeExports.jsx(Box,{position:"relative",h:"280px",w:"100%",mb:"12px",children:jsxRuntimeExports.jsx(Cropper,{image:t,crop:f,zoom:C,aspect:1,showGrid:!1,onCropChange:p,onCropComplete:ze,onZoomChange:B,style:{cropAreaStyle:{border:"2px solid #76C8FF"}}})}),jsxRuntimeExports.jsxs(HStack,{p:"0px 60px",gap:"24px",children:[jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-a-icon_zoomin",fontSize:"20px",svgFill:C-.2<.1?"primary_disabled":"text_paragraph",svgHover:C-.2<.1?"primary_disabled":"text_caption",onClick:()=>{C-.2>=0&&B(C-.2)}}),jsxRuntimeExports.jsxs(Slider,{"aria-label":"slider-ex-1",min:.1,max:3,step:.2,value:C,onChange:Qe=>B(Qe),children:[jsxRuntimeExports.jsx(SliderTrack,{h:"4px",bg:"crop_slider_tracker",children:jsxRuntimeExports.jsx(SliderFilledTrack,{})}),jsxRuntimeExports.jsx(SliderThumb,{boxSize:"4"})]}),jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-a-icon_zoomout",fontSize:"20px",svgFill:C+.2>3?"primary_disabled":"text_paragraph",svgHover:C+.2>3?"primary_disabled":"text_caption",onClick:()=>{C+.2<=3&&B(C+.2)}})]})]}),jsxRuntimeExports.jsxs(ModalFooter,{justifyContent:"space-between",gap:"16px",children:[jsxRuntimeExports.jsx(Button$1,{variant:"ghost",onClick:a||s,flex:"1",fontSize:"14px",children:"Cancel"}),jsxRuntimeExports.jsx(Button$1,{flex:"1",fontSize:"14px",onClick:Ze,isLoading:N,children:"Save"})]})]})]})}function ImageViewer({src:t,open:e,onClose:n}){const[i,s]=reactExports.useState(1);return jsxRuntimeExports.jsxs(Modal,{autoFocus:!1,returnFocusOnClose:!1,isOpen:e,onClose:n,colorScheme:"blackAlpha",size:"full",isCentered:!0,children:[jsxRuntimeExports.jsx(ModalOverlay,{}),jsxRuntimeExports.jsxs(ModalContent,{bg:"transparent",backdropFilter:"blur(6px)",backgroundColor:"rgba(0, 0, 0, 0.1)",children:[jsxRuntimeExports.jsx(ModalCloseButton,{size:"lg"}),jsxRuntimeExports.jsxs(ModalBody,{display:"flex",justifyContent:"center",alignItems:"center",children:[jsxRuntimeExports.jsx(Center,{children:jsxRuntimeExports.jsx(Image$1,{src:t,transform:`scale(${i})`,w:"100%"})}),jsxRuntimeExports.jsxs(HStack,{position:"absolute",bottom:"100px",left:"calc(50% - 44px)",w:"88px",justify:"space-between",children:[jsxRuntimeExports.jsx(Icon,{fontSize:"28px",svgFill:"primary_gray",xlinkHref:"#icon-a-icon_zoomin",cursor:"pointer",onClick:()=>s(i-.2)}),jsxRuntimeExports.jsx(Icon,{fontSize:"28px",svgFill:"primary_gray",xlinkHref:"#icon-a-icon_zoomout",cursor:"pointer",onClick:()=>s(i+.2)})]})]})]})]})}const TokenPlaceholder="/images/token_placeholder.png",btnStyle={w:{base:"32px",lg:"28px"},h:{base:"32px",lg:"28px"},bg:"bg_secondary",borderRadius:"8px",border:"1px solid",borderColor:"border",p:"3px",display:{base:"block",lg:"none"},cursor:"pointer"};function PreView({src:t,editable:e,onEdit:n,onDelete:i,file:s}){const[a,l]=reactExports.useState(!1),[f,p]=reactExports.useState(!1),C=async B=>{n&&await n({origin:s,cropped:B}),l(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Box,{display:{base:"flex",lg:"block"},position:{base:"static",lg:"relative"},_hover:{div:{display:"flex"}},children:[jsxRuntimeExports.jsx(Image$1,{src:t,fallbackSrc:TokenPlaceholder,alt:"preview",objectFit:"cover",w:{base:"200px",lg:"160px"},h:{base:"200px",lg:"160px"},borderRadius:"12px"}),jsxRuntimeExports.jsxs(Stack$2,{flexDir:{base:"column",lg:"row"},position:{base:"static",lg:"absolute"},justify:{base:"space-between",lg:"center"},ml:{base:"20px",lg:"0"},w:"100%",gap:"12px",bottom:"8px",children:[e&&jsxRuntimeExports.jsx(Tooltip,{label:"Edit file",children:jsxRuntimeExports.jsx(Box,{...btnStyle,onClick:B=>{B.stopPropagation(),l(!a)},children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_edit",fontSize:{base:"24px",lg:"20px"}})})}),jsxRuntimeExports.jsx(Tooltip,{label:"Preview file",children:jsxRuntimeExports.jsx(Box,{...btnStyle,onClick:B=>{B.stopPropagation(),p(!f)},children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-a-icon_zoomout",fontSize:{base:"24px",lg:"20px"}})})}),jsxRuntimeExports.jsx(Tooltip,{label:"Remove file",children:jsxRuntimeExports.jsx(Box,{...btnStyle,onClick:B=>{B.stopPropagation(),i(s)},children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_del",fontSize:{base:"24px",lg:"20px"}})})})]})]}),f&&jsxRuntimeExports.jsx(ImageViewer,{src:t,open:f,onClose:()=>p(!1)}),a&&jsxRuntimeExports.jsx(CropImage,{src:t,dataUrl:s.dataUrl,file:s,open:a,onClose:()=>l(!1),onOk:C})]})}const CollectListBox=reactExports.lazy(()=>__vitePreload(()=>import("./CollectListBox-BYCJagDY.js"),__vite__mapDeps([0,1,2,3,4]))),TokenList=reactExports.lazy(()=>__vitePreload(()=>import("./TokenList-VwAu4B46.js"),__vite__mapDeps([5,1,6,7,2,3,4,8,9,10,11,12,13])));function TokenSelectCard(t){const{isWidget:e=!1,isOpen:n,onClose:i,onSelectToken:s,haveImport:a,lastSelectedToken:l,isDisableSelectTokenItem:f=!1,isDcaSelect:p,whiteTokenList:C,isShowCollectListBox:B=!0,isShowHotList:N=!0,isShowTokenListTab:le=!0,isShowLabelTab:Ee=!0,tokenListMaxHeight:Ue,noDataHaveImg:ze=!0,noClickImportItem:Ze=!1,bg:Qe,onGoplusTokenClick:ct}=t,{filterTokenListFun:wt,filterTokenWithLabel:qt,getImportTokenList:nr,delImportTokenList:ir,updateImportTokenList:or,sortWithTokenList:ur}=useTokenSelect(),{setFilterTokenLoading:hr,setShowImportBtn:fr,importTokenList:ar,filterTokenLoading:Lt,filterTokenList:Vt,setTokenModalOpacity:tt,userCollectList:Ye}=useTokenSelectStore(),{verifiedTokenMap:ot}=useTokenStore(),[Et,er]=reactExports.useState(""),rr=Er=>{const kr=Er.replace(/[^[a-zA-Z0-9\s]+$/g,"");er(kr),kr&&(hr(!0),yt(kr))},yt=useDebounceFunction(Er=>{console.log(" ~ TokenSelectCard.tsx:86 ~ debouncedFilter ~ useDebounceFunction:"),C&&C.length>0?wt(Er,C,[],!1,!1):wt(Er,Array.from(ot==null?void 0:ot.values()),ar,a)},500),tr=Er=>{console.log(f,l,Er.coin_type,"selectToken"),f?l!==Er.coin_type&&(s(Er),i()):(s(Er),i())},Ut=[{label:"Watchlist",value:"Watchlist"},{label:"Default",value:"Default"},{label:"Imported",value:"Imported"}],Ft=[{label:"All",value:"All"},{label:"Wormhole",value:"Wormhole"}],[sr,vr]=reactExports.useState("Default"),[_r,dr]=reactExports.useState("All"),{getCollectList:gr,getDefaultTokenList:$r,getTabByAddress:pr,getUserCollectList:lr}=useTokenSelect(),[cr,yr]=reactExports.useState(!1);reactExports.useEffect(()=>{yr(!0)},[]),reactExports.useEffect(()=>{cr&&ot&&ot.size>0&&$r(),cr&&(nr(),lr())},[ot==null?void 0:ot.size,cr]),reactExports.useEffect(()=>{ot.size>0&&gr()},[ot]);const[Sr,Ar]=reactExports.useState(!1),Tr=!Sr&&ot.size>0&&(ar==null?void 0:ar.length)>0;reactExports.useEffect(()=>{Tr&&(or(),Ar(!0))},[Tr]),reactExports.useEffect(()=>{tt(1),n||(console.log(" ~ file: index.tsx:164 ~ useEffect ~ tab22222"),vr("Default"),dr("All"),er(""),fr(!1))},[n]);const{coinPriceObj:xr}=useTokenPriceStore(),{currentAccount:Cr}=useAccountStore(),wr=reactExports.useMemo(()=>Lt?[]:Et?Vt:C&&C.length>0?ur(_r!=="All"?Vt:C,l):sr=="Default"?ur(_r!=="All"?Vt:Array.from(ot==null?void 0:ot.values()),l):sr=="Imported"?ur(ar,l):ur(Ye,l),[Et,Vt,Lt,_r,sr,ar,C,ot,xr,Cr==null?void 0:Cr.address,Ye]);return reactExports.useEffect(()=>{console.log(" ~ TokenSelectCard ~ tokenList:",wr)},[wr]),reactExports.useEffect(()=>{if(l&&ot&&ot.size>0){const Er=pr(l,Array.from(ot==null?void 0:ot.values()),ar);console.log(" ~ file: index.tsx:164 ~ useEffect ~ tab:",Er),vr(Er)}},[l,ot,ar]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Box,{p:"0px 16px",children:[jsxRuntimeExports.jsx(HStack,{children:jsxRuntimeExports.jsx(SearchInput,{isWidget:e,inputValue:Et,changeInputValue:Er=>rr(Er)})}),N?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Flex,{marginTop:"16px",width:{base:"100%",lg:"428px"},flexWrap:"wrap",justifyContent:"space-between",children:[...Array(12)].map((Er,kr)=>jsxRuntimeExports.jsx(Skeleton,{width:"94px",height:"16px",margin:"0 8px 8px 0"},kr))}),children:jsxRuntimeExports.jsx(CollectListBox,{whiteTokenList:C,onSelectToken:Er=>tr(Er)})}):null,!Et&&le?jsxRuntimeExports.jsx(SelectTab,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"395px"},h:"34px",bg:"none",border:"none",marginTop:N?"":"12px"},itemStyle:{marginRight:"40px",fontSize:"14px"},tabList:Ut,currentTab:sr,handleChangeTab:Er=>{vr(Er.value),hr(!0),setTimeout(()=>{hr(!1)},300)}}):null,!Et&&sr=="Default"&&Ee?jsxRuntimeExports.jsx(SelectTab,{type:"outlineTab",wrapStyle:{w:{base:"100%"},h:"34px",bg:e?"swap_bg_secondary":"bg_secondary",padding:"4px",marginTop:"12px"},itemStyle:{w:`${100/Ft.length}%`,fontSize:"14px",borderRadius:"8px"},tabList:Ft,currentTab:_r,handleChangeTab:Er=>{dr(Er.value),qt(Er.value,p?C:Array.from(ot==null?void 0:ot.values()))}}):null,sr=="Imported"&&ar&&ar.length>0&&!Et?jsxRuntimeExports.jsxs(Flex,{p:"16px 0 0",justifyContent:"space-between",children:[jsxRuntimeExports.jsxs(Text$1,{children:[ar&&ar.length," Custom Tokens"]}),jsxRuntimeExports.jsx(Text$1,{cursor:"pointer",_hover:{color:"text_caption"},onClick:()=>{ir(ar)},children:"Clear All"})]}):null]}),jsxRuntimeExports.jsx(Box,{p:"0px",children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Flex,{marginTop:"16px",flexDirection:"column",children:[...Array(5)].map((Er,kr)=>jsxRuntimeExports.jsxs(HStack,{gap:"0",height:"64px",padding:"0 16px",children:[jsxRuntimeExports.jsx(SkeletonCircle,{size:"9"}),jsxRuntimeExports.jsxs(VStack,{gap:"4px",ml:"4px",align:"flex-start",children:[jsxRuntimeExports.jsx(Skeleton,{height:"4",width:"100px"}),jsxRuntimeExports.jsx(Skeleton,{height:"4",width:"150px"})]})]},kr))}),children:jsxRuntimeExports.jsx(TokenList,{onGoplusTokenClick:ct,tokenList:wr,keyword:Et,currentLabel:_r,currentTab:sr,lastSelectedToken:l,isDisableSelectTokenItem:f,isShowCollectListBox:B,isShowTokenListTab:le,tokenListMaxHeight:Ue,noDataHaveImg:ze,noClickImportItem:Ze,bg:Qe,onSelectToken:Er=>tr(Er),onClose:i})})})]})}function TokenSelectModal(t){const{isApp:e}=useWindowWidth(),{isOpen:n,onClose:i}=t,{tokenModalOpacity:s}=useTokenSelectStore(),[a,l]=reactExports.useState("400px"),f=()=>{const C=window.innerHeight-380;console.log(" ~ index.tsx:36 ~ calculateMaxHeight ~ remainingHeight:",C),l(`${C}px`)};return reactExports.useEffect(()=>(f(),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f)}),[]),jsxRuntimeExports.jsxs(Modal,{autoFocus:!1,returnFocusOnClose:!1,isOpen:n,onClose:i,isCentered:!0,motionPreset:"none",children:[jsxRuntimeExports.jsx(ModalOverlay,{}),jsxRuntimeExports.jsxs(ModalContent,{minW:e?"80%":"462px",opacity:s,transition:"opacity 0.3s",children:[jsxRuntimeExports.jsx(ModalHeader,{p:"18px 16px",children:jsxRuntimeExports.jsx(Heading$1,{fontWeight:"500",fontSize:"16px",children:"Select a token"})}),jsxRuntimeExports.jsx(ModalCloseButton,{}),jsxRuntimeExports.jsx(ModalBody,{p:"0",textAlign:"center",overflow:"hidden",children:jsxRuntimeExports.jsx(TokenSelectCard,{...t,tokenListMaxHeight:a})})]})]})}const index=reactExports.memo(TokenSelectModal),index$1=Object.freeze(Object.defineProperty({__proto__:null,default:index},Symbol.toStringTag,{value:"Module"})),CoinSelect=reactExports.lazy(()=>__vitePreload(()=>Promise.resolve().then(()=>CoinSelect$3),void 0)),TradeInput=reactExports.forwardRef(function t({title:e,value:n,amountValue:i,onFocusChange:s,onChange:a,placeholder:l="0.0",balance:f,selectable:p,onTokenChange:C,token:B,half:N=!0,max:le=!0,lock:Ee,loading:Ue,inputAllowed:ze=!0,hideSelf:Ze=!1,needRemainBalance:Qe=!0,balanceLabel:ct,wrapStyle:wt={},calculateAvailableLoading:qt=!1,currentCoinKey:nr,whiteTokenList:ir,isWidget:or=!1,isDcaTo:ur=!1,inputTabOptions:hr,openSelectTokenModal:fr},ar){const{type:Lt="borderTab",tabList:Vt=[],currentTab:tt="",handleChangeTab:Ye=()=>{},wrapStyle:ot={h:"60px",p:"8px"},itemStyle:Et={fontSize:"14px"}}=hr||{},er=reactExports.useRef(null),[rr,yt]=reactExports.useState(!1),{currentAccount:tr}=useAccountStore(),Ut=()=>{const sr=d$2(f||0).div(2);n&&sr.eq(n)||a==null||a(formatNumberWithDown(sr.toString(),B==null?void 0:B.decimals,!0,!0).toString(),!1,!0)},Ft=()=>{const sr=d$2(f||0),vr=CoinAssist.isSuiCoin((B==null?void 0:B.coin_type)||""),_r=vr&&Qe?.05:0;let dr=sr;vr&&d$2(sr).gt(_r)&&(dr=dr.sub(_r)),!(n&&d$2(dr).eq(n))&&d$2(dr).gte(0)&&(a==null||a(dr.toString()||"0",!0,!1))};return reactExports.useImperativeHandle(ar,()=>({focused:rr}),[rr]),Ze?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}):jsxRuntimeExports.jsxs(Box,{ref:er,w:"100%",onFocus:()=>{yt(!0)},onBlur:()=>{yt(!1)},borderRadius:"16px",p:{base:"16px 8px",lg:"16px"},h:"122px",border:"1px solid",backgroundColor:ze?"bg_secondary":"card_bg",...wt,borderColor:rr?"token_active_border":wt!=null&&wt.borderColor?wt==null?void 0:wt.borderColor:"border",boxShadow:rr?"0px 0px 6px 0px #0067AD":"",pos:"relative",children:[jsxRuntimeExports.jsxs(HStack,{w:"100%",justify:"space-between",children:[e&&jsxRuntimeExports.jsx(Text$1,{color:"text_paragraph",fontSize:"13px",fontWeight:"500",h:"16px",mb:ur?"0px":"4px",textAlign:"left",children:e}),jsxRuntimeExports.jsx(HStack,{mt:"-16px",mr:{base:"0",lg:"-8px"},children:hr&&Vt&&(Vt==null?void 0:Vt.length)>0&&jsxRuntimeExports.jsx(SelectTab,{type:Lt,tabList:Vt,currentTab:tt,handleChangeTab:sr=>Ye(sr),wrapStyle:ot,itemStyle:Et})})]}),jsxRuntimeExports.jsxs(VStack,{gap:ur?"0px":"8px",flexDirection:ur?"column-reverse":"column",children:[jsxRuntimeExports.jsxs(InputGroup,{h:"38px",fontFamily:"Inter",justifyContent:ur?"center":"space-between",gap:"12px",children:[!ur&&jsxRuntimeExports.jsx(Skeleton,{isLoaded:!Ue,height:"38px",width:"calc(100% - 8px)",borderRadius:"8px",children:jsxRuntimeExports.jsx(NumericFormatInput,{value:convertScientificToDecimal(n,9),onChange:sr=>{a==null||a(sr,d$2(sr).eq(f||"0"))},decimals:B==null?void 0:B.decimals,placeholder:l,inputAllowed:ze,onFocus:()=>{s&&s(!0)},onBlur:()=>{s&&s(!1)},style:{width:"calc(100% - 8px)",background:"none",whiteSpace:"nowrap",opacity:1,outline:"none",color:"var(--chakra-colors-text_caption)",fontSize:or?"24px":"28px",height:"38px",lineHeight:"38px",touchAction:"manipulation",transition:"all 0.3s",fontWeight:"500"}})}),jsxRuntimeExports.jsx(InputRightAddon,{w:ur?"100%":"unset",children:p?jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Skeleton,{h:"20px",w:"100px",borderRadius:"8px"}),children:jsxRuntimeExports.jsx(CoinSelect,{openSelectTokenModal:fr,selectModalCallback:sr=>{yt(!!sr)},currentCoinKey:nr,whiteTokenList:ir,value:B,onSelect:C})}):jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(SingleCoinImage,{imageUrl:B==null?void 0:B.logo_url,w:"28px",h:"28px",coinType:B==null?void 0:B.coin_type},(B==null?void 0:B.symbol)+"Icon"),jsxRuntimeExports.jsx(Text$1,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:textEllipses((B==null?void 0:B.symbol)||"",10)})]})})]}),jsxRuntimeExports.jsxs(HStack,{justify:"space-between",w:"100%",mt:ur&&tr?"-20px":0,children:[jsxRuntimeExports.jsx(Text$1,{width:"50%",flex:"0",fontWeight:"500",children:i&&+i?`${formatCurrencyWithKMB(i,2)}`:null}),!!tr&&jsxRuntimeExports.jsxs(HStack,{justify:"flex-end",gap:"8px",children:[jsxRuntimeExports.jsx(Skeleton,{isLoaded:!qt,children:jsxRuntimeExports.jsxs(HStack,{gap:"4px",children:[ct?jsxRuntimeExports.jsx(Text$1,{children:ct}):jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_wallet",svgHover:"text_paragraph",cursor:"default"}),jsxRuntimeExports.jsx(Text$1,{children:!f||f==="0"?"0.0":formatNumberWithDown(f)})]})}),N&&jsxRuntimeExports.jsx(Button$1,{onClick:Ut,fontSize:"12px",fontWeight:"500",lineHeight:"20px",color:"text_paragraph",w:"42px",h:"20px",bg:or?"swap_bg_secondary":"button_outline_bg",borderRadius:"4px",variant:"outline",children:"HALF"}),le&&jsxRuntimeExports.jsx(Button$1,{onClick:Ft,fontSize:"12px",fontWeight:"500",lineHeight:"20px",color:"text_paragraph",w:"42px",h:"20px",bg:or?"swap_bg_secondary":"button_outline_bg",borderRadius:"4px",variant:"outline",children:"MAX"})]})]})]}),(typeof Ee=="boolean"&&Ee||typeof Ee=="object"&&(Ee==null?void 0:Ee.isLock))&&jsxRuntimeExports.jsx(LockInput,{position:"absolute",top:"-1px",borderRadius:"16px",h:(wt==null?void 0:wt.h)||"108px",left:"-1px",w:"calc(100% + 2px)",text:typeof Ee=="object"?Ee==null?void 0:Ee.text:void 0,...typeof Ee=="object"?(Ee==null?void 0:Ee.style)||{}:{}})]})}),Upload=reactExports.forwardRef(function t({w:e="160px",h:n="160px",loading:i,borderRadius:s="12px",children:a,accept:l="image/png, image/jpeg",multiple:f=!1,fileSize:p,field:C,form:B,onChange:N,onSuccess:le,onError:Ee,onDelete:Ue,...ze},Ze){const Qe=reactExports.useRef(null),{uploadLoading:ct,doUploadFile:wt}=useFileUpload(),qt=async ar=>{if(ar)return await wt(ar)},[nr,ir]=reactExports.useState([]),or=async ar=>{var Lt;try{if((Lt=ar.target.files)!=null&&Lt.length){const Vt=ar.target.files[0],tt=Vt.name.slice(Vt.name.lastIndexOf(".")+1),Ye=`cetus_pump_${dayjs().unix()}.${tt}`,ot=replaceFilename(Vt,Ye);if(p){const rr=p.split("MB")[0];if(ot.size>Number(rr)*1024*1024)throw new Error("file size is over limit")}const Et=await qt(ot);if(Et!=null&&Et.error)throw new Error(Et==null?void 0:Et.error);Et!=null&&Et.url&&(le==null||le());const er=new FileReader;er.readAsDataURL(ot),er.onload=rr=>{var yt,tr;if(rr.type==="load")if(f){const Ut=[...nr,{name:Ye,type:ot.type,size:ot.size,lastModified:ot.lastModified,dataUrl:(yt=rr.target)==null?void 0:yt.result,fileUrl:Et==null?void 0:Et.url,sig:Et==null?void 0:Et.sig}];ir(Ut)}else{const Ut=[{name:Ye,type:ot.type,size:ot.size,lastModified:ot.lastModified,dataUrl:(tr=rr.target)==null?void 0:tr.result,fileUrl:Et==null?void 0:Et.url,sig:Et==null?void 0:Et.sig}];ir(Ut)}}}}catch(Vt){console.log(Vt.message,"(error as unknown as Error).message"),Ee==null||Ee(Vt.message)}finally{B==null||B.setFieldTouched(C.name,!0)}};useDeepCompareEffect(()=>{var ar;nr&&(N==null||N(nr),C.name&&((ar=B==null?void 0:B.setFieldValue)==null||ar.call(B,C.name,nr)))},[nr]);const ur=async ar=>{const Lt=await qt(ar.cropped),Vt=new FileReader;Vt.readAsDataURL(ar.cropped),Vt.onload=tt=>{var Ye;if(tt.type==="load")if(f){const ot=nr.map(Et=>{var er;return Et.name===ar.cropped.name?{...Et,size:ar.cropped.size,lastModified:ar.cropped.lastModified,dataUrl:(er=tt.target)==null?void 0:er.result,fileUrl:Lt==null?void 0:Lt.url,sig:Lt==null?void 0:Lt.sig}:Et});ir(ot)}else{const ot=[{name:ar.cropped.name,type:ar.cropped.type,size:ar.cropped.size,lastModified:ar.cropped.lastModified,dataUrl:(Ye=tt.target)==null?void 0:Ye.result,fileUrl:Lt==null?void 0:Lt.url,sig:Lt==null?void 0:Lt.sig}];ir(ot)}}},hr=ar=>{Ue==null||Ue(),ir(nr.filter(Lt=>Lt.name!==ar.name)),Qe.current&&(Qe.current.value="")},fr=()=>{ir([]),Qe.current&&(Qe.current.value="")};return reactExports.useImperativeHandle(Ze,()=>({handleClear:fr}),[Qe.current]),jsxRuntimeExports.jsxs(Box,{w:e,h:n,borderRadius:s,onClick:()=>{var ar;return(ar=Qe.current)==null?void 0:ar.click()},...ze,cursor:"pointer",children:[i||ct?jsxRuntimeExports.jsx(Spinner,{}):nr.length?nr==null?void 0:nr.map((ar,Lt)=>ar.type.startsWith("image")?jsxRuntimeExports.jsx(PreView,{editable:!0,src:ar.fileUrl,file:ar,onEdit:ur,onDelete:hr},ar.sig||Lt):jsxRuntimeExports.jsx(Box,{as:"a",target:"_blank",download:ar.fileUrl,children:ar.name},ar.sig||Lt)):a,jsxRuntimeExports.jsx(Input,{ref:Qe,id:"file",name:"file",type:"file",display:"none",accept:l,multiple:f,onChange:or})]})});function ToastDescription(t){const{status:e="confirmation",tx:n,info:i}=t,{getExplorerUrl:s}=useExplorer(),a=i==null?void 0:i.toastDescriptionContent;return e==="submitted"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[a&&(typeof a=="function"?jsxRuntimeExports.jsx(DescriptionText,{children:a()}):jsxRuntimeExports.jsx(DescriptionText,{text:a})),!a&&n&&jsxRuntimeExports.jsxs(Box,{as:"div",children:[jsxRuntimeExports.jsx(DescriptionText,{text:"Confirmation is in progress. Check your transaction on",as:"span"}),"",jsxRuntimeExports.jsx(Link,{href:s(n,"tx"),target:"_blank",color:"primary_green",fontSize:"sm",textDecoration:"none",children:"here"})]})]}):e==="rejected"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[a&&(typeof a=="function"?jsxRuntimeExports.jsx(DescriptionText,{children:a()}):jsxRuntimeExports.jsx(DescriptionText,{text:a})),!a&&jsxRuntimeExports.jsx(DescriptionText,{text:"Something went wrong"})]}):e==="success"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:a&&(typeof a=="function"?jsxRuntimeExports.jsx(DescriptionText,{children:a()}):jsxRuntimeExports.jsx(DescriptionText,{text:a}))}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function DescriptionText(t){const{text:e,children:n,...i}=t;return n?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n}):jsxRuntimeExports.jsx(Text$1,{fontSize:"14px",color:"primary_gray",...i,children:jsxRuntimeExports.jsx(Comma,{value:e||""})})}function ToastTitle(t){const{status:e="confirmation",info:n}=t;return e==="submitted"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(HStack,{justify:"flex-start",align:"flex-start",children:[jsxRuntimeExports.jsx(Spinner$1,{w:"20px",h:"20px"}),jsxRuntimeExports.jsx(TitleText,{text:"Transaction in progress"})]})}):e==="rejected"?jsxRuntimeExports.jsxs(HStack,{justify:"flex-start",gap:"0px",align:"flex-start",children:[jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",variant:"error"}),"(",jsxRuntimeExports.jsx(HStack,{children:jsxRuntimeExports.jsx(TitleText,{text:(n==null?void 0:n.toastTitleText)||"Transaction failed",color:"primary_red"})}),")"]}):e==="success"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(HStack,{justify:"flex-start",align:"flex-start",children:[n!=null&&n.iconUrl?jsxRuntimeExports.jsx(Image$1,{src:n.iconUrl,h:"20px",alt:"icon",borderRadius:"4px"}):jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_check",svgFill:"primary"}),jsxRuntimeExports.jsx(TitleText,{text:(n==null?void 0:n.toastTitleText)||"Transaction Successful"})]})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function TitleText(t){const{text:e,color:n="text_caption"}=t;return jsxRuntimeExports.jsx(Heading$1,{fontSize:"14px",lineHeight:"20px",fontWeight:"400",color:n,whiteSpace:{base:"pre-wrap",lg:"wrap"},children:e})}function Toast(t){const{status:e="confirmation",link:n,tx:i,getShowInfo:s,actionType:a,executeTime:l,linkLabel:f="View transaction",onClose:p}=t,{getExplorerUrl:C}=useExplorer(),B=reactExports.useMemo(()=>{if(s)return s(e)},[e]);return jsxRuntimeExports.jsxs(HStack,{w:{base:"calc(100vw - 16px)",lg:"360px"},minW:{base:"calc(100vw - 16px)",lg:"360px"},maxW:{base:"calc(100vw - 16px)",lg:"420px"},bg:"background",border:"1px",borderColor:"border",borderRadius:"12px",p:"16px",gap:"16px",justify:"space-between",alignItems:"flex-start",children:[jsxRuntimeExports.jsxs(VStack,{alignItems:"start",children:[jsxRuntimeExports.jsx(ToastTitle,{info:B,status:e}),((B==null?void 0:B.toastDescriptionContent)||i)&&jsxRuntimeExports.jsx(ToastDescription,{info:B,status:e,tx:i}),e!=="submitted"&&n&&jsxRuntimeExports.jsx(Text$1,{fontSize:"12px",children:"View on Explorer"}),e!=="submitted"&&!n&&i&&jsxRuntimeExports.jsxs(HStack,{children:[a==="swap"&&l&&l>0?jsxRuntimeExports.jsx(Text$1,{fontSize:"12px",children:`Txn finalized in ${d(l).div(1e3).toString()}s! View Transaction`}):jsxRuntimeExports.jsx(Text$1,{fontSize:"12px",children:"View on Explorer"}),defaultExplorers.map(N=>jsxRuntimeExports.jsx(Image$1,{onClick:le=>{window.open(C(i,"tx",N),"_blank")},cursor:"pointer",src:N.img,alt:"SVG Image",boxSize:"16px",objectFit:"cover",borderRadius:"8px"},N.name))]})]}),jsxRuntimeExports.jsx(Center,{onClick:p,children:jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",variant:"gray"})})]})}const UserActions$1=reactExports.lazy(()=>__vitePreload(()=>import("./index-DWO-tGuU.js").then(t=>t.i),__vite__mapDeps([14,1,15,16,17,18,19,7,4,20,9,21,22]))),H5Header=({menus:t,logo:e,setting:n,notifications:i,jump:s,isCetusPump:a,children:l})=>{const{pathname:f}=useLocation(),{scrollYgtZero:p}=useGlobalStore(),C=reactExports.useMemo(()=>f!=="/profile"||p,[p,f]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs(Flex,{w:"100%",justifyContent:"space-between",align:"center",p:"0px 8px 0px 12px",h:"48px",position:"sticky",zIndex:"999",top:"0px",background:C?"bg_primary":"transparent",children:[jsxRuntimeExports.jsx(Image$1,{src:"/images/img-logo@2x.png",h:"32px",alt:"logo",onClick:()=>s("/")}),jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx("div",{}),children:jsxRuntimeExports.jsx(UserActions$1,{menus:t,logo:e,setting:n,notifications:i,jump:s,isCetusPump:a,children:l})})]})})};function NavMenu(t){const{title:e,list:n,isActive:i,socials:s,...a}=t;useNavigate();const{pathname:l}=useLocation(),[f,p]=reactExports.useState(!1),[C,B]=reactExports.useState(!1),N=Ee=>{Ee==null||Ee.stopPropagation(),p(!0)},le=Ee=>{Ee==null||Ee.stopPropagation(),p(!1)};return jsxRuntimeExports.jsx(Box,{mb:"-8px",h:{md:f?"140px":"auto",lg:"auto"},children:jsxRuntimeExports.jsx(Box,{pb:"8px",onClick:()=>p(!f),onMouseLeave:le,onMouseEnter:N,children:jsxRuntimeExports.jsx(Menu,{isLazy:!0,id:"more",isOpen:f,onClose:()=>le(),placement:"bottom-start",strategy:"fixed",...a,children:({isOpen:Ee})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(MenuButton,{p:"0",isActive:Ee,as:Button$1,bg:"none",_hover:{bg:"none",p:{color:"text_caption"},svg:{fill:"text_caption"}},_active:{bg:"none"},children:jsxRuntimeExports.jsxs(Center,{gap:"4px",children:[jsxRuntimeExports.jsx(Text$1,{color:i?"text_caption":"primary_gray",position:"relative",fontSize:"15px",fontWeight:"500",children:e}),jsxRuntimeExports.jsx(Icon,{svgH:"12px",svgW:"12px",boxH:"12px",boxW:"12px",xlinkHref:"#icon-icon_arrow",variant:"gray",svgFill:"primary_gray",transition:"transform 0.5s",transform:Ee?"rotate(180deg)":"rotate(0deg)"})]})}),jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(MenuList,{zIndex:"999999",p:"8px",display:"flex",flexDir:"column",gap:"8px",minW:"unset",ml:{md:"-16px",lg:"0px"},mt:{md:"-20px",lg:"0px"},bg:{md:"bg_secondary",lg:"bg_secondary"},backdropFilter:{md:"none",lg:"blur(80px)"},children:[n.map(Ue=>{const ze=l.startsWith(Ue.path);return Ue.children?jsxRuntimeExports.jsx(MenuItemWithChildren,{item:Ue,active:ze,isActive:i},Ue.title):jsxRuntimeExports.jsx(Item,{item:Ue,active:ze},Ue.title)}),s&&jsxRuntimeExports.jsx(HStack,{minW:"192px",gap:"8px",children:s==null?void 0:s.map(Ue=>jsxRuntimeExports.jsx(MenuItem,{as:"a",href:Ue.path,target:"_blank",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",flex:"0 0 42px",sx:{h:"42px",p:{color:"text_paragraph"},svg:{fill:"text_paragraph"}},_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}},children:Ue.icon?jsxRuntimeExports.jsx(Box,{children:typeof Ue.icon=="string"?jsxRuntimeExports.jsx(Icon,{xlinkHref:Ue.icon}):jsxRuntimeExports.jsx(Icon,{xlinkHref:Ue.icon.xlinkHref,variant:Ue.icon.variant||""})}):null},Ue.title))})]})})]})})})})}const MenuItemWithChildren=({item:t,active:e,isActive:n})=>{const[i,s]=reactExports.useState(!1);return jsxRuntimeExports.jsxs(Box,{bg:"menu_item_bg",borderRadius:"8px",p:"0 16px",children:[jsxRuntimeExports.jsx(MenuItem,{as:Button$1,variant:"unstyled",w:"100%",h:"42px",bg:"menu_item_bg",borderRadius:"8px",padding:"10px 0px",sx:{p:{color:e?"text_caption":"text_paragraph"},svg:{fill:e?"text_caption":"text_paragraph"}},_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}},onClick:a=>{cancelBubble(a),s(!i)},closeOnSelect:!1,children:jsxRuntimeExports.jsxs(Flex,{align:"center",w:"100%",justify:"space-between",children:[jsxRuntimeExports.jsxs(HStack,{gap:"0px",children:[t.icon?jsxRuntimeExports.jsx(Box,{mr:"12px",children:typeof t.icon=="string"?jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon}):jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon.xlinkHref,variant:t.icon.variant||""})}):null,jsxRuntimeExports.jsx(Text$1,{mr:"4px",color:n?"text_caption":"text_paragraph",position:"relative",fontSize:"14px",children:t.title})]}),jsxRuntimeExports.jsx(Icon,{svgH:"12px",svgW:"12px",boxH:"12px",boxW:"12px",xlinkHref:"#icon-icon_arrow",variant:"gray",svgFill:"primary_gray",transition:"transform 0.5s",transform:i?"rotate(180deg)":"rotate(0deg)"})]})}),i&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Divider$1,{borderColor:"border"}),jsxRuntimeExports.jsx(Box,{overflow:"hidden",display:"flex",flexDirection:"column",padding:"16px 0px",gap:"20px",border:"none",boxShadow:"none",borderRadius:"0px 0px 8px 8px",bg:"menu_item_bg",minW:"unset",children:(t.children||[]).map(a=>jsxRuntimeExports.jsx(Item,{item:a,active:e,isChild:!0},a.title))})]})]})},Item=({item:t,active:e,isChild:n=!1})=>t.type==="onClick"?jsxRuntimeExports.jsxs(MenuItem,{as:Button$1,variant:"unstyled",justifyContent:"flex-start",onClick:t==null?void 0:t.onClick,...n?{padding:"0px",bg:"menu_item_bg"}:{bg:"menu_item_bg",borderRadius:"8px",padding:"11px",minW:"192px"},sx:{p:{color:e?"text_caption":"text_paragraph"},svg:{fill:e?"text_caption":"text_paragraph"}},_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}},children:[t.icon?jsxRuntimeExports.jsx(Box,{mr:"12px",children:typeof t.icon=="string"?jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon}):jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon.xlinkHref,variant:t.icon.variant||""})}):null,jsxRuntimeExports.jsxs(Box,{position:"relative",children:[jsxRuntimeExports.jsx(Text$1,{children:t.title}),(t==null?void 0:t.beta)&&jsxRuntimeExports.jsx(Image$1,{src:"/images/icon_beta@2x.png",position:"absolute",right:"-32px",top:"-4px",h:"12px"})]})]}):t.type==="_blank"?jsxRuntimeExports.jsxs(MenuItem,{as:"a",href:t.path,target:"_blank",...n?{padding:"0px",bg:"menu_item_bg"}:{bg:"menu_item_bg",borderRadius:"8px",padding:"11px",minW:"192px"},sx:{p:{color:e?"text_caption":"text_paragraph"},svg:{fill:e?"text_caption":"text_paragraph"}},_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}},children:[t.icon?jsxRuntimeExports.jsx(Box,{mr:"12px",children:typeof t.icon=="string"?jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon}):jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon.xlinkHref,variant:t.icon.variant||""})}):null,jsxRuntimeExports.jsxs(Box,{position:"relative",children:[jsxRuntimeExports.jsx(Text$1,{children:t.title}),(t==null?void 0:t.beta)&&jsxRuntimeExports.jsx(Image$1,{src:"/images/icon_beta@2x.png",position:"absolute",right:"-32px",top:"-4px",h:"12px"})]})]}):jsxRuntimeExports.jsxs(MenuItem,{as:Link$1,to:t.path,...n?{padding:"0px",bg:"menu_item_bg"}:{bg:"menu_item_bg",borderRadius:"8px",padding:"11px",minW:"192px"},sx:{h:n?"20px":"42px",p:{color:e?"text_caption":"text_paragraph"},svg:{fill:e?"text_caption":"text_paragraph"}},_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}},children:[t.icon?jsxRuntimeExports.jsx(Box,{mr:"12px",children:typeof t.icon=="string"?jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon}):jsxRuntimeExports.jsx(Icon,{xlinkHref:t.icon.xlinkHref,variant:t.icon.variant||""})}):null,jsxRuntimeExports.jsxs(Box,{pos:"relative",children:[jsxRuntimeExports.jsx(Text$1,{children:t.title}),(t==null?void 0:t.beta)&&jsxRuntimeExports.jsx(Image$1,{src:"/images/icon_beta@2x.png",position:"absolute",right:"-32px",top:"-4px",h:"12px"})]})]}),PCMenus=({menus:t,logo:e,jump:n})=>{const{pathname:i}=useLocation();return jsxRuntimeExports.jsxs(Flex,{align:"center",gap:{lg:"32px",xl:"48px"},children:[jsxRuntimeExports.jsx(Image$1,{src:e==null?void 0:e.image,h:"32px",alt:"logo",onClick:()=>n(e==null?void 0:e.url)}),jsxRuntimeExports.jsx(Flex,{align:"center",gap:"32px",children:t==null?void 0:t.map(s=>"children"in s?jsxRuntimeExports.jsx(NavMenu,{title:s.title,isActive:isMenuActive(s,i),list:s.children,socials:s.socials},s.title):jsxRuntimeExports.jsx(NavLink,{type:s==null?void 0:s.type,link:s.path,isActive:isMenuActive(s,i),children:jsxRuntimeExports.jsx(Text$1,{color:isMenuActive(s,i)?"text_caption":"primary_gray",fontSize:"15px",fontWeight:"500",children:s.title})},s.title))})]})},UserActions=reactExports.lazy(()=>__vitePreload(()=>import("./index-DWO-tGuU.js").then(t=>t.i),__vite__mapDeps([14,1,15,16,17,18,19,7,4,20,9,21,22]))),PCHeader=({menus:t,logo:e,setting:n,notifications:i,jump:s,isCetusPump:a,children:l})=>{const{pathname:f}=useLocation(),{scrollYgtZero:p}=useGlobalStore(),C=reactExports.useMemo(()=>f!=="/profile"||p,[p,f]);return jsxRuntimeExports.jsxs(Flex,{w:"100%",justifyContent:"space-between",align:"center",h:"80px",p:"0px 20px",position:"sticky",zIndex:"999",top:"0px",background:C?"bg_primary":"transparent",transition:"background-color 0.2s ease",children:[jsxRuntimeExports.jsx(PCMenus,{menus:t,logo:e,jump:s}),jsxRuntimeExports.jsx(UserActions,{isCetusPump:a,notifications:i,setting:n,children:l})]})},SUI_DEVNET_CHAIN="sui:devnet",SUI_TESTNET_CHAIN="sui:testnet",SUI_LOCALNET_CHAIN="sui:localnet",SUI_MAINNET_CHAIN="sui:mainnet",SUI_CHAINS=[SUI_DEVNET_CHAIN,SUI_TESTNET_CHAIN,SUI_LOCALNET_CHAIN,SUI_MAINNET_CHAIN];var c=class{constructor(){Or(this,"_listeners",{})}on(t,e,n=0){this._listeners[t]||(this._listeners[t]=[]),e._priority=n,this._listeners[t].indexOf(e)===-1&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}listenerSorter(t,e){return t._priority-e._priority}off(t,e){if(this._listeners[t]===void 0)return;if(e===void 0){delete this._listeners[t];return}let n=this._listeners[t].indexOf(e);-1<n&&this._listeners[t].splice(n,1)}trigger(t,e={}){if(typeof t=="string"&&(t={type:t,data:typeof e=="object"&&e!==null?e:{}}),typeof this._listeners[t.type]<"u")for(let n=this._listeners[t.type].length-1;n>=0;n--)this._listeners[t.type][n](t)}destroy(){this._listeners={}}},r=class extends c{constructor(e=Math.random()*100|0){super();Or(this,"id");Or(this,"connected");Or(this,"connecting");Or(this,"isChild");Or(this,"debug");Or(this,"supported");Or(this,"origin");Or(this,"_sendLater");Or(this,"iframe");this.id=`BELLHOP:${e}`,this.connected=!1,this.isChild=!0,this.connecting=!1,this.debug=!1,this.origin="*",this._sendLater=[],this.iframe=null,this.receive=this.receive.bind(this)}receive(e){if(this.target===e.source){if(this.logDebugMessage(!0,e),e.data!=="connected"){let n=e.data;if(typeof n=="string")try{n=JSON.parse(n)}catch(i){console.warn("Bellhop error: ",i)}this.connected&&typeof n=="object"&&n.type&&this.trigger(n);return}this.onConnectionReceived(e.data)}}onConnectionReceived(e){if(this.connecting=!1,this.connected=!0,!this.isChild){if(!this.target)return;this.target.postMessage(e,this.origin)}for(let n=0;n<this._sendLater.length;n++){let{type:i,data:s}=this._sendLater[n];this.send(i,s)}this._sendLater.length=0,this.trigger("connected")}connect(e,n="*"){var i;this.connecting||(this.disconnect(),this.connecting=!0,e instanceof HTMLIFrameElement&&(this.iframe=e),this.isChild=e===void 0,this.supported=!0,this.isChild&&(this.supported=window!=e),this.origin=n,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):(i=this.target)==null||i.postMessage("connected",this.origin)))}disconnect(){this.connected=!1,this.connecting=!1,this.origin="",this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}send(e,n={}){var s;if(typeof e!="string")throw"The event type must be a string";let i={type:e,data:n};this.logDebugMessage(!1,i),this.connecting?this._sendLater.push(i):(s=this.target)==null||s.postMessage(JSON.stringify(i,(a,l)=>typeof l=="bigint"?l.toString():l),this.origin)}fetch(e,n,i={},s=!1){if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";let a=l=>{s&&this.off(l.type,a),n(l)};this.on(e,a),this.send(e,i)}respond(e,n={},i=!1){let s=this,a=async function(l){i&&s.off(l,a),typeof n=="function"?s.send(l.type,await n()):s.send(l.type,n)};this.on(e,a)}logDebugMessage(e=!1,n){this.debug&&typeof this.debug=="function"?console.log({isChild:this.isChild,received:e,message:n}):this.debug&&console.log(`Bellhop Instance (${this.isChild?"Child":"Parent"}) ${e?"Received":"Sent"}`,n)}destroy(){super.destroy(),this.disconnect(),this._sendLater.length=0}get target(){var e;return this.isChild?window.parent:(e=this.iframe)==null?void 0:e.contentWindow}},M=class{constructor(t,e,n){Or(this,"accounts",[]);Or(this,"currentAccount");Or(this,"bellhop",new r);Or(this,"walletMessageListener");Or(this,"onAccountChangeListner");Or(this,"version","1.0.0");Or(this,"name","MSafe Wallet");Or(this,"icon","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQ3IiBoZWlnaHQ9IjE3MCIgdmlld0JveD0iMCAwIDI0NyAxNzAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAyLjU5MyAyMy4wMTNDMTA3LjQ5OSAyNi4wNTU4IDExMC43OTQgMzAuODc4NSAxNDAuOTEyIDc5LjEwMzlDMTcyLjQxOSAxMjkuNTUyIDE3My44NjQgMTMyLjExNCAxNzMuODY0IDEzNy41MzZDMTczLjg2NCAxNDIuNDUxIDE3My4zNCAxNDMuNzI1IDE2OS45MTcgMTQ3LjExMkMxNjYuNDc2IDE1MC41MTggMTY1LjIyMiAxNTEuMDE5IDE2MC4xMzggMTUxLjAxOUMxNTUuNTg0IDE1MS4wMTkgMTUzLjUzNiAxNTAuMzc4IDE1MC43OTcgMTQ4LjA5N0MxNDguODY4IDE0Ni40OTEgMTM5Ljg2MiAxMzMuMTc1IDEzMC43ODUgMTE4LjUwOEMxMDMuNzE5IDc0Ljc3NDEgOTAuMDYxIDUzLjE2NzYgODkuNzI2NyA1My41NTQ5Qzg2LjY2ODUgNTcuMTAzMyA3OC42NjEgNzIuMzY1NiA3OC42NjEgNzQuNjQ0M0M3OC42NjEgNzYuNTM4IDg0LjQ0NjMgODcuMzAwNCA5My43MjA1IDEwMi42NThDMTAyLjAwMyAxMTYuMzc0IDEwOS41OTQgMTI5LjUyNCAxMTAuNTg5IDEzMS44ODFDMTE0LjQ2NCAxNDEuMDYyIDEwNy43NTQgMTUxLjAxOSA5Ny42ODc3IDE1MS4wMTlDOTQuODQwOSAxNTEuMDE5IDkxLjIxNTEgMTUwLjE3OCA4OS42MzAzIDE0OS4xNTFDODguMDQ1NSAxNDguMTIyIDgwLjk3OTUgMTM3Ljc4IDczLjkyODcgMTI2LjE2OUM2Ni44Nzc4IDExNC41NTYgNjAuNjc0NSAxMDUuMDU1IDYwLjE0MjggMTA1LjA1NUM1OS42MTEgMTA1LjA1NSA1My42OTMzIDExNC4yMzQgNDYuOTkzMSAxMjUuNDUyQzQwLjI5MjkgMTM2LjY2OSAzMy43MjYyIDE0Ni44MTUgMzIuNDAxNSAxNDcuOTk1QzMxLjA3NjcgMTQ5LjE3NiAyNy43MDYzIDE1MC4zOTYgMjQuOTEyOSAxNTAuNzA5QzE1LjgzODQgMTUxLjcyMSA5IDE0NS44NzggOSAxMzcuMTFDOSAxMzIuODQyIDkuMDQ4NzYgMTMyLjc1MiA0My41MzU2IDc0LjAyOTVDNTcuODI1NCA0OS42OTczIDcxLjIyMTIgMjguMDc5MyA3My4zMDQxIDI1Ljk4OTFDODEuMDc3MSAxOC4xODc5IDkyLjg4IDE2Ljk4OTQgMTAyLjU5MyAyMy4wMTNaTTE2Ni45MDEgMjMuMDIzM0MxNzAuMzA4IDI2LjQ4MjEgMjMzLjQ5OSAxMjcuMTE2IDIzNS40NDcgMTMyLjE4NUMyMzguMjU4IDEzOS41MDQgMjM1LjI3NyAxNDYuMzEyIDIyNy42NjUgMTQ5Ljk2QzIyMy41NDcgMTUxLjkzMyAyMjIuMDczIDE1Mi4xMSAyMTguMjQ1IDE1MS4wODlDMjE1Ljc0OSAxNTAuNDI0IDIxMi44NjYgMTQ4Ljk2IDIxMS44MzggMTQ3LjgzNUMyMTAuODA5IDE0Ni43MSAxOTQuNzk2IDEyMS41IDE3Ni4yNTMgOTEuODExOEMxNDAuMDU0IDMzLjg1NyAxNDAuMDQ0IDMzLjgzNTIgMTQ0LjI3NCAyNS43Mzk4QzE0OC4yNjMgMTguMTAxNyAxNjAuNTk0IDE2LjYyMjggMTY2LjkwMSAyMy4wMjMzWiIgZmlsbD0iIzQ4QjVBNyIvPgo8L3N2Zz4K");Or(this,"chains",[SUI_MAINNET_CHAIN,SUI_TESTNET_CHAIN]);Or(this,"features",{"standard:connect":{version:"1.0.0",connect:async()=>{this.bellhop.send("connect");let t=await this.fetch("account");return this.accounts=t,t.length>0&&(this.currentAccount=t[0]),{accounts:t}}},"standard:events":{version:"1.0.0",on:t=>()=>{}},"sui:signMessage":{version:"1.0.0",signMessage:async()=>{throw new Error("No impl")}},"sui:signPersonalMessage":{version:"1.0.0",signPersonalMessage:async()=>{throw new Error("No impl")}},"sui:signTransactionBlock":{version:"1.0.0",signTransactionBlock:async t=>this.proposeIntention(t)},"sui:signAndExecuteTransactionBlock":{version:"1.0.0",signAndExecuteTransactionBlock:async t=>this.proposeIntention(t)}});this.appName=t,this.clientUrl=e,this.network=n,this.bellhop.connect(),this.bellhop.on("walletMessage",async i=>{this.walletMessageListener&&this.walletMessageListener.onMessage(i.data)}),this.bellhop.on("accountChange",async i=>{this.currentAccount=i.data,this.onAccountChangeListner&&this.onAccountChangeListner.onAccountChange(this.currentAccount)})}setWalletMessageListener(t){this.walletMessageListener=t}setOnAccountChangeListener(t){this.onAccountChangeListner=t}static inMSafeWallet(){return typeof window<"u"&&typeof document<"u"&&typeof parent<"u"&&typeof parent.window<"u"&&parent.window!==window}async proposeIntention(t){if(!this.currentAccount)throw new Error("Wallet not connected");let e=t.transactionBlock.serialize();this.bellhop.send("proposeIntention",{application:this.appName,...t,transactionBlockSerialize:e,clientUrl:this.clientUrl,network:this.network,account:this.currentAccount,isTransaction:!0});let n;return this.bellhop.on("cancel",async()=>{n&&n("User canceled")}),new Promise((i,s)=>{n=s})}async fetch(t){return new Promise(e=>{this.bellhop.fetch(t,n=>{e(n.data)})})}};function ConnectWalletModal(t){const{isOpen:e,onClose:n}=t,i=useWallets(),{isApp:s}=useWindowWidth(),{mutateAsync:a}=useConnectWallet(),{customToast:l,successTsToast:f}=useGlobalToast(),{saveCurrentAccount:p,accountServiceNameObj:C,setAccountServiceNameObj:B,connectCallback:N,setConnectCallback:le}=useAccountStore(),{phantomInstance:Ee}=useGlobalStore(),Ue=reactExports.useMemo(()=>s?suiWalletList:suiWalletList.filter(Qe=>Qe.name!=="Sui Wallet")||[],[suiWalletList,s]),ze=Qe=>{l(jsxRuntimeExports.jsxs(VStack,{gap:"8px",alignItems:"start",children:[jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(Icon,{xlinkHref:"#icon-icon_close",variant:"error"}),jsxRuntimeExports.jsx(Heading$1,{fontSize:"14px",fontWeight:"400",whiteSpace:"nowrap",color:"primary_red",children:"Wallet Not Ready Error"})]}),jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(Text$1,{fontSize:"14px",color:"primary_gray",wordBreak:"break-all",children:"Please install"}),jsxRuntimeExports.jsx(Text$1,{cursor:"pointer",fontSize:"14px",color:"primary",wordBreak:"break-all",onClick:()=>{window.open(Qe.url,"_blank")},children:Qe.name}),jsxRuntimeExports.jsx(Text$1,{fontSize:"14px",color:"primary_gray",wordBreak:"break-all",children:"extension first"})]})]}))},Ze=async Qe=>{var nr;console.log(" ~ file: ConnectWalletModal.tsx:30 ~ ConnectWalletModal ~ supportWalletList:",{supportWalletList:i,wallet:Qe});const ct=(M==null?void 0:M.inMSafeWallet())&&(Qe==null?void 0:Qe.name)==="MSafe",wt=i.find(ir=>Qe.walletName.includes("Slush")?ir.name.includes("Slush"):ir.name===Qe.walletName);if(console.log(" ~ handleConnectWal ~ wallet.walletName:",{supportWalletList:i,walletObj:wt,phantomInstance:Ee}),!ct&&!wt){ze(Qe);return}const qt=ct?{wallet:new M("cetus",getFullnodeUrl$1("mainnet"),"sui:mainnet"),silent:!0}:{wallet:wt};console.log(" ~ handleConnectWal ~ walletArg sui:",wt,(nr=Ee==null?void 0:Ee.solana)==null?void 0:nr.sui);try{Ee&&((wt==null?void 0:wt.name)==="Phantom"?Ee.show():Ee.hide())}catch(ir){console.log(" ~ handleConnectWal ~ error:",ir)}await a(qt,{onSuccess:(ir,or,ur)=>{f({getShowInfo:hr=>({iconUrl:Qe.icon.startsWith("http")?Qe.icon:`/images/wallet/${Qe.icon}.png`,toastTitleText:"Wallet Connected"})}),console.log(" ~ file: ConnectWalletMode.tsx:29 ~ handleConnectWallet ~ onSuccess:",{data:ir,variables:or,context:ur}),n(),N&&N()},onError:(ir,or,ur)=>{console.log(" ~ file: ConnectWalletMode.tsx:29 ~ handleConnectWallet ~ onError:",{error:ir,variables:or,context:ur}),String(ir).includes("MetaMask not detected")&&ze(Qe)}}),n(),N&&le(null)};return jsxRuntimeExports.jsxs(Modal,{autoFocus:!1,returnFocusOnClose:!1,isOpen:e,onClose:n,isCentered:!0,children:[jsxRuntimeExports.jsx(ModalOverlay,{}),jsxRuntimeExports.jsxs(ModalContent,{minW:s?"300px":"552px",children:[jsxRuntimeExports.jsx(ModalHeader,{children:"Connect a Wallet"}),jsxRuntimeExports.jsx(ModalCloseButton,{}),jsxRuntimeExports.jsx(ModalBody,{p:"16px",textAlign:"center",children:jsxRuntimeExports.jsx(VStack,{children:jsxRuntimeExports.jsx(Grid,{templateColumns:s?"repeat(2, 1fr)":"repeat(3, 1fr)",gap:13,w:"100%",children:Ue.map(Qe=>jsxRuntimeExports.jsx(GridItem,{colSpan:1,children:jsxRuntimeExports.jsxs(HStack,{p:"0 12px",h:"60px",bg:"bg_six",borderRadius:"8px",border:"1px solid",borderColor:"border",cursor:"pointer",_hover:{p:{color:"primary"}},onClick:()=>{Ze(Qe)},children:[jsxRuntimeExports.jsx(Image$1,{src:Qe.icon.startsWith("http")?Qe.icon:`/images/wallet/${Qe.icon}.png`,alt:"SVG Image",boxSize:{base:"28px",lg:"36px"},objectFit:"cover",borderRadius:"8px",loading:"lazy"}),jsxRuntimeExports.jsxs(VStack,{align:"flex-start",gap:"4px",children:[Qe.name=="SuiMetaMaskSnap"?jsxRuntimeExports.jsxs(VStack,{align:"flex-start",gap:"0px",children:[jsxRuntimeExports.jsx(Text$1,{color:"text_caption",textAlign:"left",children:"Sui"}),jsxRuntimeExports.jsx(Text$1,{textAlign:"left",color:"text_caption",children:"MetaMask"}),jsxRuntimeExports.jsx(Text$1,{textAlign:"left",color:"text_caption",children:"Snap"})]}):jsxRuntimeExports.jsx(Text$1,{lineHeight:"16px",textAlign:"left",color:"text_caption",whiteSpace:"normal",wordBreak:"break-word",overflowWrap:"break-word",children:Qe.name}),Qe.name=="Binance"&&jsxRuntimeExports.jsx(Text$1,{fontWeight:"500",fontSize:"10px",p:"2px 6px",textAlign:"center",borderRadius:"4px",bg:"primary_opacity.10",color:"primary",children:"Mobile"})]})]})},Qe.name))})})})]})]})}const ConnectWalletModal$1=reactExports.memo(ConnectWalletModal),CetusLayout=reactExports.lazy(()=>__vitePreload(()=>import("./CetusLayout-CFPNehgW.js").then(t=>t.C),__vite__mapDeps([23,1,24,25,3,26,27,28,29,30,31,32,20,17,33,9,8,34,35,36,37,38,39,2,4,12,40,41,42,43,22,44,45,11,10,46,47,48,49,16,15])));function Layout(){const{currentAccount:t,addressChangeVersion:e}=useAccountStore(),{clearData:n}=useXCetusStore(),{getVerifiedCoins:i}=useGetTokens();return console.log(e,"clearXCetusData"),reactExports.useEffect(()=>{i()},[]),reactExports.useEffect(()=>{(t===void 0||e>0)&&n()},[t,e]),jsxRuntimeExports.jsx(ErrorBoundary,{children:jsxRuntimeExports.jsx(ChakraProvider,{theme,children:jsxRuntimeExports.jsx(CetusLayout,{})})})}const Stats=reactExports.lazy(()=>__vitePreload(()=>import("./Stats-DzROUUCh.js"),__vite__mapDeps([50,1,51,52,28,53,54,42,55,56,48,57,58,59,7,60,61,62,63,2,3,4,64,65,43]))),Swap=reactExports.lazy(()=>__vitePreload(()=>import("./Swap-_9HNp1pm.js"),__vite__mapDeps([66,1,67,26,68]))),Dca=reactExports.lazy(()=>__vitePreload(()=>import("./Dca-DdnLntqL.js"),__vite__mapDeps([69,1,70,26,71,67,72,73,9,32,20,17,74,3,59,12,7,75,43,76,31,25,27,28,8,34,77,37,45,41,42,78,21,2,4,79,80,22,81,82]))),Pools=reactExports.lazy(()=>__vitePreload(()=>import("./Pools-D8A3BBJe.js"),__vite__mapDeps([83,1,84,85,27,28,21,43,86,87,6,2,3,4,45,88,89,90,91,73,32,20,17,7,9,63,64,92,93,74,94,95,51,52,53,54,42,55,56,48,57,96,49,97,58,59,60,61,13,62,98,99,29,8,26,39,35,34,25,12,44,22,100,101,102,103,15,104,47,81,82]))),Liquidity=reactExports.lazy(()=>__vitePreload(()=>import("./Liquidity-CtoqCtDz.js"),__vite__mapDeps([105,1,44,26,39,45,8,9,52,94,91,3,85,27,28,95,2,4,92,93,74,47,48,49,58,59,7,65,54,42,55,56,57,53,89,12,81,82,62,106,101,107,108,109,35,110,111,97,36,25,75,103,15,104,40,112,32,20,17,113,114,46,87,21,6,115,90,116,79,98,99,29,34,64,43,22,100,41,24,10,37,78]))),PositionDetail=reactExports.lazy(()=>__vitePreload(()=>import("./PositionDetail-KctHtrdF.js"),__vite__mapDeps([117,1,62,63,2,3,4,64,44,26,39,45,8,9,106,12,101,27,28,52,57,107,82,108,32,20,17,88,89,90,91,85,103,15,104,47,48,49,95,92,93,74,109,35,110,111,97,36,25,75,118,115,41,42,119,76,29,10,43,81]))),Farms=reactExports.lazy(()=>__vitePreload(()=>import("./Farms-6HB31QDH.js"),__vite__mapDeps([120,1,119,32,20,17,9,90,91,3,85,27,28,2,4,92,93,74,7,62,121,63,64,43,60,81,82]))),CreatePool=reactExports.lazy(()=>__vitePreload(()=>import("./CreatePool-DERnTznC.js"),__vite__mapDeps([122,1,113,3,39,75,114,46,47,48,49,87,21,6,2,4,45,110,12,112,93,27,28,40,8,9,41,42,116,79,108,123,115,26,90,107,32,20,17,82,43]))),Limit=reactExports.lazy(()=>__vitePreload(()=>import("./Limit-ChWuEG7s.js"),__vite__mapDeps([124,1,59,7,125,102,32,20,17,9,3,2,4,74,121,91,85,27,28,62,119,90,92,93,63,64,31,25,26,8,76,34,41,42,78,21,70,71,67,33,68,126,45,97,111,40,79,80,22,81,82,43]))),SelectForLiquidity=reactExports.lazy(()=>__vitePreload(()=>import("./SelectForLiquidity-5J4eJOxS.js"),__vite__mapDeps([127,1,113,3,39,75,114,46,47,48,49,87,21,6,2,4,45,123,115,26,90,107,27,28,10]))),Vaults=reactExports.lazy(()=>__vitePreload(()=>import("./Vaults-CPCZH0a0.js"),__vite__mapDeps([128,1,129,99,29,28,85,27,3,8,9,32,20,17,26,90,39,35,34,25,12,7,130,64,101,63,2,4,86,87,21,6,45,43,60,22]))),XCetus=reactExports.lazy(()=>__vitePreload(()=>import("./XCetus-DspgX3ec.js"),__vite__mapDeps([131,1,132,32,20,17,90,9,8,104,3,47,48,49,41,42,12,21,38,73,101,81,82]))),VaultsDetailPage=reactExports.lazy(()=>__vitePreload(()=>import("./VaultsDetailPage-BauCts9M.js"),__vite__mapDeps([133,1,44,26,39,45,8,9,99,29,28,85,27,3,32,20,17,90,35,34,25,12,10,7,43,22,101,2,4,100,77,54,42,55,56,48,57,134,65,129,40,135,112,21,41,130,64,118,109,110,111,97,36,75,103,15,104,47,49,91,95,52,115,62,119,92,93,74]))),ProfilePage=reactExports.lazy(()=>__vitePreload(()=>import("./Profile-DQPmyeVJ.js"),__vite__mapDeps([136,1,26,7,19,4,137,138,72,73,9,32,20,17,74,3,59,12,75,102,58,125,2,81,82,43,91,85,27,28,84,21,86,87,6,45,88,89,90,63,64,92,93,94,95,132,8,104,47,48,49,41,42,38,60,61]))),Notfound=reactExports.lazy(()=>__vitePreload(()=>import("./404-peUMPe_j.js"),__vite__mapDeps([139,1]))),ErrorPage=reactExports.lazy(()=>__vitePreload(()=>import("./Error-DoRdu_x7.js"),__vite__mapDeps([140,1]))),TestCoin=reactExports.lazy(()=>__vitePreload(()=>import("./TestCoin-s6pqeqeU.js"),__vite__mapDeps([141,1,17]))),TestNotifi=reactExports.lazy(()=>__vitePreload(()=>import("./TestNotifi-DBxzlLAh.js"),__vite__mapDeps([142,1,103,15,104,3,47,48,49,91,85,27,28,95]))),RedirectToPools=()=>jsxRuntimeExports.jsx(Navigate,{to:"/pools",replace:!0}),router=[{path:"/",element:jsxRuntimeExports.jsx(Layout,{}),children:[{path:"swap",element:jsxRuntimeExports.jsx(Swap,{}),children:[{path:":from/:to",element:jsxRuntimeExports.jsx(Swap,{})}]},{path:"limit",element:jsxRuntimeExports.jsx(Limit,{}),children:[{path:":pay/:target",element:jsxRuntimeExports.jsx(Limit,{})}]},{path:"dca",element:jsxRuntimeExports.jsx(Dca,{}),children:[{path:":from/:to",element:jsxRuntimeExports.jsx(Dca,{})}]},{path:"pools/*",element:jsxRuntimeExports.jsx(Pools,{})},{path:"profile/*",element:jsxRuntimeExports.jsx(ProfilePage,{})},{path:"pool/list",element:jsxRuntimeExports.jsx(RedirectToPools,{})},{path:"position-detail",element:jsxRuntimeExports.jsx(PositionDetail,{}),children:[{path:":position_nft_id",element:jsxRuntimeExports.jsx(PositionDetail,{})}]},{path:"select-pool",element:jsxRuntimeExports.jsx(SelectForLiquidity,{})},{path:"liquidity/*",element:jsxRuntimeExports.jsx(Liquidity,{})},{path:"create-pool",element:jsxRuntimeExports.jsx(CreatePool,{}),children:[{path:":base/:quote/:fee",element:jsxRuntimeExports.jsx(CreatePool,{})},{path:":base/:quote/",element:jsxRuntimeExports.jsx(CreatePool,{})}]},{path:"farms",element:jsxRuntimeExports.jsx(Farms,{})},{path:"vaults",element:jsxRuntimeExports.jsx(Vaults,{})},{path:"vaults-detail",element:jsxRuntimeExports.jsx(VaultsDetailPage,{}),children:[{path:":vaultId/:category?",element:jsxRuntimeExports.jsx(VaultsDetailPage,{})}]},{path:"xCetus",element:jsxRuntimeExports.jsx(XCetus,{})},{path:"buy-crypto",element:jsxRuntimeExports.jsx("div",{children:"buy-crypto"})},{path:"stats",element:jsxRuntimeExports.jsx(Stats,{})},{path:"error",element:jsxRuntimeExports.jsx(ErrorPage,{})},{path:"test-notifi",element:jsxRuntimeExports.jsx(TestNotifi,{})},{path:"test-coin",element:jsxRuntimeExports.jsx(TestCoin,{})},{path:"/",element:jsxRuntimeExports.jsx(Navigate,{to:"/swap"})}]},{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/404"})},{path:"/404",element:jsxRuntimeExports.jsx(Notfound,{})}],router$1=createBrowserRouter(router),{networkConfig}=createNetworkConfig({mainnet:{url:getFullnodeUrl$1("mainnet")}}),queryClient=new QueryClient;function App(){const{setPhantomInstance:t}=useGlobalStore();return jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(SuiClientProvider,{networks:networkConfig,defaultNetwork:"mainnet",children:jsxRuntimeExports.jsx(WalletProvider,{autoConnect:!0,slushWallet:{name:"Cetus"},children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(GeneralLoading,{}),children:jsxRuntimeExports.jsx(RouterProvider,{router:router$1})})})})})}client$1.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(App,{})}));export{useDeepCompareEffect as $,useTokenSelectStore as A,Block as B,addComma as C,DcaConfigPath as D,useGlobalToast as E,CetusTooltip as F,cancelBubble as G,useGetTokenSource as H,Icon as I,useTokenStore as J,IconTipsTriangle as K,fixRounding as L,fromDecimalsAmountFix as M,NumericFormatInput as N,formatCurrency$1 as O,useNotifiStore as P,extractStructTagFromType$2 as Q,create as R,StatisticsPools as S,TransactionTxPath as T,StatisticsPath as U,useClmmSDKStore as V,TransactionsHistory as W,textEllipses as X,removeComma as Y,CoinPairImage as Z,__vitePreload as _,useWindowWidth as a,H5MapTableItem as a$,d$3 as a0,amountToBN as a1,TickUtil as a2,isAvailableObject as a3,getBalanceChanges as a4,parsePositionIdFromEvent as a5,getNearestTickByTick as a6,formatTickPrice as a7,fetchGet as a8,PriceRangePath as a9,castPath as aA,toKey as aB,isIndex as aC,baseGet as aD,arrayMap as aE,formatNumberWithKMB as aF,root as aG,formatCurrencyWithKMB as aH,BN as aI,TradeInput as aJ,ee$2 as aK,ClmmPoolUtil$1 as aL,persist as aM,VAULT_FILTER as aN,ge as aO,fromDecimalsAmount as aP,R$1 as aQ,Transaction$1 as aR,CoinAssist$1 as aS,jt as aT,addressAbridge as aU,utcTimeFormatted as aV,Pe$1 as aW,Ei as aX,getPackagerConfigs$1 as aY,getObjectFields as aZ,DcaOrderHistoryPath as a_,TickMath$1 as aa,useWebConfigStore as ab,timeFormat as ac,HistogramPathTotalVolV3 as ad,HistogramPathV3 as ae,identity as af,getTickDataFromUrlData as ag,process$1 as ah,convertScientificToDecimal as ai,LockInput as aj,isSortedSymbols as ak,normalizeSuiAddress$2 as al,formatPercentage as am,isSymbol as an,baseIteratee as ao,fixDown as ap,formatNumberWithThreshold as aq,W$2 as ar,useXCetusStore as as,Comma as at,clsx as au,VaultUnstablePriceRange as av,formatTimestamp as aw,VaultUnstableHistogram as ax,VaultApyAndFeesPath as ay,isObject$1 as az,StatisticsTokens as b,useCurrentAccount as b$,transColumns2H5 as b0,bnExports as b1,LimitOrderHistoryPath as b2,useRpcConfigStore as b3,theme as b4,coinWithBalance as b5,TransactionUtil$1 as b6,buildPosition as b7,Le as b8,g as b9,M as bA,getFullnodeUrl$1 as bB,getWallets as bC,ReadonlyWalletAccount as bD,useCryptoStore as bE,useGlobalStore as bF,GeneralLoading as bG,useTokenSelect as bH,useTokenBalanceStore as bI,extractStructTagFromType as bJ,aggregatorStatusPath as bK,dayjs as bL,baseIsEqual as bM,isSuiObjectType as bN,sleepTime as bO,dealWithFastRouterSwapParamsForMsafe as bP,getNative as bQ,eq as bR,isPrototype as bS,arrayLikeKeys as bT,isArrayLike as bU,overArg as bV,stubArray as bW,arrayPush as bX,getSymbols as bY,baseGetAllKeys as bZ,useCurrentWallet as b_,VariousTokensTable as ba,POOL_FAVORITE_LIST as bb,IS_INCENTIVIZED_ONLY as bc,IS_ALL_POOLS as bd,IS_WATCH_LIST as be,StatsPoolsPath as bf,getMoveObjectType as bg,buildNFT as bh,defaultNodes as bi,ke$1 as bj,Tt as bk,src_default as bl,AggregatorClient25 as bm,Env as bn,SuiClient$1 as bo,F_ as bp,_$1 as bq,ce as br,j$1 as bs,Co as bt,H5Header as bu,PCHeader as bv,defaultExplorers as bw,TokenSelectCard as bx,useTransactionStore as by,useConnectWallet as bz,SingleCoinImage as c,axios_1$1 as c0,base64ToUint8Array as c1,TransactionDataBuilder$1 as c2,parseOwnerBalanceChanges as c3,normalizeCoinType$2 as c4,removePercentSign as c5,useSignTransaction as c6,useSignPersonalMessage as c7,useSignAndExecuteTransaction as c8,fromBase64 as c9,index as cA,Upload as cB,ToastTitle as cC,TitleText as cD,ConnectWalletModal$1 as cE,useFileUpload as cF,isMenuActive as cG,getCroppedImg as cH,calcNumber as cI,replaceFilename as cJ,ExcludeCNCharRegex as cK,ExcludeSpecialCharRegex as cL,SymbolExcludeSpecialCharRegex as cM,SymbolLimitRegex as cN,BlankSpaceRegex as cO,WebSiteUrlRegex as cP,XUrlRegex as cQ,DiscordRegex as cR,TelegramRegex as cS,useSwitchAccount as cT,SearchInput as cU,useWallets as cV,useDisconnectWallet as cW,suiWalletList as cX,formatDateTime as cY,useGetTokens as ca,AllTokensTable as cb,Symbol$1 as cc,isArray$1 as cd,isArguments$1 as ce,isObjectLike as cf,baseGetTag as cg,keys as ch,Uint8Array$1 as ci,getTag as cj,baseUnary as ck,nodeUtil as cl,isBuffer$1 as cm,Stack as cn,getAllKeys as co,crypto$1 as cp,generateOnRampURL as cq,SUI_CHAINS as cr,Toast as cs,CoinSelect$2 as ct,CustomToast as cu,Notfound$1 as cv,ErrorBoundary as cw,NavLink as cx,PreView as cy,TokenAvatar as cz,d$2 as d,useExplorer as e,formatPrice as f,getTimeDifferenceString as g,TextWrap as h,SelectTab as i,useAccountStore as j,usePeripherySDKStore as k,DcaQuotePath as l,useTokenPriceStore as m,useTokenPrice as n,d$1 as o,Decimal$1 as p,bnToAmount as q,useDebounceFunction as r,symbolDataDisplayProcessing as s,toDecimalsAmount as t,useFetch as u,formatNumber as v,envConfigs$1 as w,timeFormatUTC as x,formatNumberWithDown as y,fixCoinType as z};
//# sourceMappingURL=index-CE2038XS.js.map
