import{j as e,H as r,T as a,aq as ke,a as _,f as X,P as Ve,h as qe,C as $e,I as Ee,k as Ge,m as Ze,n as Ke,V as w,q as $,S as Me,p as q,W as cs,X as ps,Y as hs,Z as us,a7 as gs,$ as js,a0 as bs,O as ys,a6 as Xe,aa as ms}from"./vendor-BFGDaAdA.js";import{a as ws}from"./useFavoritePool-Ci6fokX7.js";import{a as pe,B as H,I as J,F as Ce,O as N,f as ne,k as he,o as Te,n as Re,d as z,a2 as Ss,G as oe}from"./index-R0MuIW_z.js";import{C as Ae}from"./CheckBox-CGZOoh6g.js";import{R as Ye}from"./RefreshButton-zZWmIqq1.js";import{S as _s}from"./SearchInputBlock-BrmsYCOG.js";import{H as de,a as fs}from"./PositionListLoading-CeHUgrPw.js";import{u as ks,a as Je,P as Cs}from"./PositionCurrentPrice-CJDs-X_z.js";import{a as E,d as vs,u as Ts}from"./usePositionList-BajI2m9G.js";import{u as Rs}from"./activeOrders-D4Chz1hv.js";import{a as As,i as zs}from"./VaultsAprBlock-BgLyPn1g.js";import{u as Ps}from"./useTransaction-Dzcjo88k.js";import{N as ve}from"./NoData-DtiZhmrM.js";import{u as Bs}from"./useAccountBalance-BLVXJ9S1.js";import{S as te}from"./SingleTokenInfo-CaAfAkey.js";import{P as Qe}from"./CoinPairInfo-CsoK-LTr.js";import{L as Ls}from"./ExpendItem-Dt-E5F21.js";function nn({handleIsWatchList:s=()=>{},handleIsDisplayChecked:i=()=>{},onClickIncentiveTypes:x,handleRefresh:b,selectCoinList:y,onClickSelectCoinList:o,onDeleteSelectCoinList:p,isPools:C=!0,isProfile:h=!1,isRefreshed:S}){const{isWatchList:u,isAllPools:v,isIncentivizedOnly:T}=ws(),{isApp:l,windowWidth:n}=pe();return e.jsxs(r,{w:h?l?"100%":"unset":"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(r,{w:{base:"100%",lg:C||h?"unset":"100%"},justify:"space-between",sx:{">button":{">div":{borderRadius:h?"8px":"12px"}}},children:[e.jsx(_s,{isProfile:h,selectCoinList:y,onClickSelectCoinList:o,onDeleteSelectCoinList:p}),!h&&(l||!C)&&e.jsx(Ye,{handleRefresh:b,isRefreshed:C?S:void 0})]}),C&&e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(H,{w:{base:n<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:n<=350?e.jsx(r,{h:"38px",justify:"center",align:"center",children:e.jsx(J,{xlinkHref:"#icon-icon_star",svgFill:u?"primary":"text_paragraph"})}):e.jsxs(r,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(Ae,{checked:u,onClick:()=>{}}),e.jsx(a,{color:u?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx(H,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:l?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",gap:l?"4px":"8px",children:[e.jsx(a,{color:T?"text_caption":"text_paragraph",children:l?"Incentivized":"Incentivized Only"}),e.jsx(ke,{isChecked:T,onChange:x})]})}),e.jsx(H,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:l?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",children:[e.jsxs(a,{color:v?"text_caption":"text_paragraph",children:[" ",l?"All":"All pools"]}),e.jsx(ke,{isChecked:v,onChange:i})]})})]}),!h&&!l&&e.jsx(Ye,{handleRefresh:b,isRefreshed:S})]})]})}const Ns=({posInfo:s})=>{var p,C,h,S,u,v,T,l;const[i,x]=_.useState(!1),{posApiPoolData:b}=E(),y=(p=b[s==null?void 0:s.clmmPool])==null?void 0:p.haveMining,o=(C=b[s==null?void 0:s.clmmPool])==null?void 0:C.haveFarming;return e.jsx(X,{p:"12px 0",onClick:n=>Ce(n),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ve,{isLazy:!0,isOpen:i,children:[e.jsx(qe,{children:e.jsxs($e,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:[y&&e.jsx(Ee,{w:"14px",h:"14px",src:"/images/icon_mining.png",mr:"4px"}),o&&e.jsx(Ee,{w:"14px",h:"14px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(a,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:N(s==null?void 0:s.totalRewardUsd,2)})]})}),i&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(Ge,{children:e.jsx(Ze,{zIndex:"2",w:"fit-content",children:e.jsx(Ke,{children:e.jsxs(w,{align:"flex-start",minW:"300px",children:[((h=s==null?void 0:s.pendingFeesList)==null?void 0:h.length)>0&&e.jsxs(w,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Fees"}),e.jsxs(a,{color:"primary",children:[" ",N(s==null?void 0:s.feeOwedUsd,2)]})]}),(S=s==null?void 0:s.pendingFeesList)==null?void 0:S.map(n=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",n),e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(te,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(w,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:ne(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:N(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address)))]}),((u=s==null?void 0:s.pendingRewarderList)==null?void 0:u.length)>0&&e.jsxs(w,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(a,{color:"primary",children:[" ",N(s==null?void 0:s.rewarderUsd,2)]})]}),(v=s==null?void 0:s.pendingRewarderList)==null?void 0:v.map(n=>e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(te,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(w,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:ne(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:N(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address))]}),((T=s==null?void 0:s.pendingFarmsList)==null?void 0:T.length)>0&&e.jsxs(w,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Farming rewards"}),e.jsxs(a,{color:"primary",children:[" ",N(s==null?void 0:s.farmsUsd,2)]})]}),(l=s==null?void 0:s.pendingFarmsList)==null?void 0:l.map(n=>{var f;return e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(te,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(w,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:ne(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:N(n==null?void 0:n.amountUSD,2)})]})]},(f=n==null?void 0:n.token)==null?void 0:f.coin_type)})]})]})})})})]})})};function Ie({posInfo:s,onClickCheckBox:i,checked:x,pageFrom:b,cursor:y="pointer"}){var u;const{getClmmPosName:o}=vs(),{posPoolsOriginalData:p}=E(),C=_.useMemo(()=>{var v;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const T=(v=p==null?void 0:p[s==null?void 0:s.clmmPool])==null?void 0:v.index;return o(s==null?void 0:s.index,T)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,p]),{posPoolsRelatedData:h}=E(),S=((u=h[s==null?void 0:s.posId])==null?void 0:u.displayFee)+"%";return e.jsxs(H,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(w,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Qe,{poolInfo:{...s,feeDisplay:S},symbolEllipsesDecimals:10}),e.jsx(a,{fontSize:"12px",color:"primary_gray",children:C})]}),i&&e.jsx(Ae,{cursor:y,checked:x||!1,onClick:()=>i(s)})]}),b=="pendingYieldModal"?e.jsxs(r,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(a,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(Ns,{posInfo:s})]}):e.jsxs(r,{justify:"space-between",p:"0 16px",children:[e.jsx(a,{color:"primary_gray",children:"Liquidity"}),e.jsx(Ls,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:b!="lpBurnNext"})]})]})}function tn({onClose:s,onClickLock:i,currentLockItem:x,onClickCheckBox:b}){const{currentAccount:y,onWalletModal:o}=he(),{fullRangePosBaseList:p,fullRangePosBaseListLoading:C}=E();return e.jsxs(w,{w:"100%",gap:"20px",children:[e.jsxs(w,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(w,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:y!=null&&y.address?C?[{},{}].map((h,S)=>e.jsx(es,{},S)):(p==null?void 0:p.length)>0?p==null?void 0:p.map(h=>e.jsx(Ie,{posInfo:h,checked:(h==null?void 0:h.posId)==(x==null?void 0:x.posId),onClickCheckBox:S=>b(S),pageFrom:"lpBurnPrev"},h==null?void 0:h.posId)):e.jsxs(H,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ve,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(a,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ve,{type:"nowallet",onboard:()=>o(!0),bg:"none",border:"none"})}),e.jsxs(w,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx($,{disabled:Object.values(x).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:i,children:"Lock Liquidity"}),e.jsx($,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const es=()=>e.jsxs(H,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(r,{gap:"0",children:[e.jsx(Me,{size:"9"}),e.jsx(Me,{size:"9"}),e.jsx(w,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(q,{height:"4",width:"100px"})})]})}),e.jsx(X,{w:"100%",p:"16px",children:e.jsx(q,{height:"5",width:"250px"})})]}),Fs="/assets/tvl_bg-D80TUrdU.png",Os="/assets/yield_bg-CcCC1tTK.png";function Hs(){const{isAutoRefresh:s}=Rs(),{currentAccount:i}=he(),{posBaseList:x,posLiquidityData:b,posBaseListLoading:y,posLiquidityDataLoading:o}=E(),{getTokenAmountValue:p}=Te(),{coinPriceObj:C}=Re(),{vaultsPositionObj:h}=As(),{getTokenAmountValueByPyth:S}=zs(),u=_.useMemo(()=>{let l=0,n=0;if(s||!y&&!o)return(x==null?void 0:x.length)>0&&(i!=null&&i.address)?(x.forEach(f=>{var L,U;const k=b[f==null?void 0:f.posId],B=p((L=f==null?void 0:f.displayTokenA)==null?void 0:L.coin_type,k==null?void 0:k.displayCoinAmountA),W=p((U=f==null?void 0:f.displayTokenB)==null?void 0:U.coin_type,k==null?void 0:k.displayCoinAmountB);l=z(l).plus(B).plus(W).toString(),n=z(n).plus((k==null?void 0:k.displayCoinAmountA)||0).plus((k==null?void 0:k.displayCoinAmountB)||0).toString()}),console.log("ðŸš€ ~ clmmTotalTvl ~ total:",n,l),z(l).lte(0)&&z(n).gt(0)?"--":l):"0"},[s,x,y,b,o,i==null?void 0:i.address,C]),v=_.useMemo(()=>{let l=z(0);return Ss(h)?(Object.values(h).forEach(n=>{const{category:f,displayCoinTypeA:k,displayAmountA:B,displayCoinTypeB:W,displayAmountB:L}=n,U=f=="haedal"?S(k,B):p(k,B),F=f=="haedal"?S(W,L):p(W,L),Q=z(U).plus(F||0);l=l.add(Q)}),l.toString()):"0"},[h,i==null?void 0:i.address]),T=_.useMemo(()=>(console.log("ðŸš€ ~ liquidityTotalTvl ~ clmmTotalTvl:",u,v),u=="--"||v=="--"?"0":z(u).plus(v).toString()),[u,v]);return{clmmTotalTvl:u,vaultTotalTvl:v,liquidityTotalTvl:T}}function Us({isOpen:s,claimLoading:i,onClose:x,changeClaimLoading:b}){const[y,o]=_.useState(!1),{coinPriceObj:p}=Re(),{getPosRelatedData:C,getPositionBaseList:h}=Ts(),{signAndExecuteTransaction:S}=Ps(),{currentAccount:u}=he(),{getBatchHarvestFeeAndRewardsTxPayload:v}=ks(),{getTokenAmountValue:T}=Te(),[l,n]=_.useState([]),[f,k]=_.useState(!0),[B,W]=_.useState(!0),[L,U]=_.useState(.01),[F,Q]=_.useState([]),[R,M]=_.useState([]),[Y,P]=_.useState(""),[I,ze]=_.useState(""),[G,Pe]=_.useState([]),{myPosYieldValue:ss,posBaseList:ee,posBaseListLoading:ue,posFeeDataLoading:ge,posRewardsDataLoading:je,farmsPosRewardsDataLoading:be,posFeeData:ae,posRewardsData:ie,farmsPosRewardsData:le}=E(),ns=t=>{const j=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(j,"$1"),U(t.target.value)},ts=()=>{(!L||L<.01)&&U(.01)},as=ue||ge||je||be;_.useEffect(()=>{const t=[];let j="0";const m=[];if((ee==null?void 0:ee.length)>0&&!ue&&!ge&&!je&&!be){ee.forEach((c,Be)=>{var Ne,Fe,Oe,He,Ue,We,De;let ye="0",me="0",we="0",se="0",Z="0",K="0";const Se=[],_e=[],fe=[];if(((Ne=Object.values(ae))==null?void 0:Ne.length)>0){const g=ae[c==null?void 0:c.posId],d=T((Fe=c==null?void 0:c.displayTokenA)==null?void 0:Fe.coin_type,g==null?void 0:g.displayFeeOwedA,"--"),D=T((Oe=c==null?void 0:c.displayTokenB)==null?void 0:Oe.coin_type,g==null?void 0:g.displayFeeOwedB,"--");ye=z(ye).plus((g==null?void 0:g.displayFeeOwedA)||0).plus((g==null?void 0:g.displayFeeOwedB)||0).toString(),d!=="--"&&D!=="--"&&(se=z(d).plus(D).toString()),_e.push({coin_address:oe((He=c==null?void 0:c.displayTokenA)==null?void 0:He.coin_type,!1),amount:g==null?void 0:g.displayFeeOwedA,amountUSD:d,token:c==null?void 0:c.displayTokenA},{coin_address:oe((Ue=c==null?void 0:c.displayTokenB)==null?void 0:Ue.coin_type,!1),amount:g==null?void 0:g.displayFeeOwedB,amountUSD:D,token:c==null?void 0:c.displayTokenB})}if(((We=Object.values(ie))==null?void 0:We.length)>0){const g=ie[c==null?void 0:c.posId];(g==null?void 0:g.length)>0&&g.forEach(d=>{var D;if(me=z(me).plus(d.display_amount_owed||0).toString(),Number(d==null?void 0:d.display_amount_owed)>0){const V=T(d==null?void 0:d.token.coin_type,d.display_amount_owed);V!=="--"&&(Z=z(Z).plus(V).toString()),Se.push({coin_address:oe((D=d==null?void 0:d.token)==null?void 0:D.coin_type,!1),amount:d.display_amount_owed,amountUSD:V,token:d==null?void 0:d.token})}})}if(((De=Object.values(le))==null?void 0:De.length)>0){const g=le[c==null?void 0:c.id];(g==null?void 0:g.length)>0&&g.forEach(d=>{var D;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",d),we=z(we).plus(d.display_amount_owed||0).toString(),Number(d==null?void 0:d.display_amount_owed)>0){const V=T(d==null?void 0:d.token.coin_type,d.display_amount_owed);V!=="--"&&(K=z(K).plus(V).toString()),fe.push({coin_address:oe(((D=d==null?void 0:d.token)==null?void 0:D.coin_type)||"",!1),amount:d.display_amount_owed,amountUSD:V,token:d==null?void 0:d.token})}})}const Le=z(Z).plus(se).plus(K).toString(),re=(z(ye).gt(0)||z(me).gt(0)||z(we).gt(0))&&Number(Le)==0?"--":Le;j=z(j).plus(Z).plus(se).plus(K).toString(),Number(re)!==0&&m.push(c),B&&Number(re)>Number(L)&&t.push({...c,totalRewardUsd:re,pendingRewarderList:Se,pendingFeesList:_e,pendingFarmsList:fe,rewarderUsd:Z,feeOwedUsd:se,farmsUsd:K}),B||t.push({...c,totalRewardUsd:re,pendingRewarderList:Se,pendingFeesList:_e,pendingFarmsList:fe,rewarderUsd:Z,feeOwedUsd:se,farmsUsd:K})}),Q(m);const A=t.filter(c=>Number(c.totalRewardUsd)!==0);M(A),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",A,R),B?(A==null?void 0:A.length)!==t.length?P(""):P("all"):(A==null?void 0:A.length)!==m.length?P(""):P("all");const O=t.sort((c,Be)=>Be.totalRewardUsd-c.totalRewardUsd);n(O),k(!1)}},[L,ee,B,ue,ge,je,be,p]);const{calculatePendingYield:is}=Je();_.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",R),(R==null?void 0:R.length)>0){const{total:t,rewardAndFeeList:j}=is(R,ae,ie,le);console.log("ðŸš€ ~ useEffect ~ total:",R,t,j),ze(t),Pe(j)}else ze(""),Pe([])},[R==null?void 0:R.length,ae,ie,le]);const ls=t=>{if(console.log("ðŸš€ ~ selectItem ~ item:",t),Number(t==null?void 0:t.totalRewardUsd)<=0)return;const j=R,m=(j==null?void 0:j.filter(A=>(A==null?void 0:A.posId)!==(t==null?void 0:t.posId)))||[];j!=null&&j.some(A=>(A==null?void 0:A.posId)===(t==null?void 0:t.posId))||m.push(t),console.log("ðŸš€ ~ selectItem ~ updatedList:",m),M(m),B?(m==null?void 0:m.length)!==(l==null?void 0:l.length)?P(""):P("all"):(m==null?void 0:m.length)!==(F==null?void 0:F.length)?P(""):P("all")};_.useEffect(()=>{U(.01),o(!1),W(!0)},[s]);const rs=()=>{if(Y=="all")P(""),M([]);else{P("all");const t=R,j=Object.fromEntries(R.map(m=>[m==null?void 0:m.posId,m]));l.forEach(m=>{!j[m==null?void 0:m.posId]&&Number(m.totalRewardUsd)!==0&&t.push(m)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",j,t),M(t)}},{fetchAccountBalance:os}=Bs(),ds=async()=>{b(!0);try{const t=Object.fromEntries(R.map(O=>[O==null?void 0:O.posId,O==null?void 0:O.pendingRewarderList])),{tx:j,txb:m}=await v(R,t,u==null?void 0:u.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",j);const A=await S(m,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});if(console.log("ðŸš€ ~ toClaimYield ~ res:",A),A){os();const O=await h(u==null?void 0:u.address);C(O)}b(!1)}catch(t){b(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",t)}finally{x()}},{isApp:xs}=pe();return e.jsxs(cs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:x,isCentered:!0,children:[e.jsx(ps,{}),e.jsxs(hs,{minWidth:xs?"300px":"446px",children:[e.jsx(us,{children:e.jsx(gs,{fontWeight:"500",fontSize:"16px",children:y?"Claim Yield":"Details"})}),e.jsx(js,{}),e.jsx(bs,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(X,{children:[e.jsxs(w,{w:"100%",children:[e.jsx(X,{w:"100%",p:"0 16px",children:e.jsx(w,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(q,{isLoaded:!as,children:e.jsxs(w,{gap:"4px",align:"center",children:[e.jsx(a,{color:"primary_gray",children:y?"Total Claim":"Pending Yield"}),e.jsx(a,{color:"primary",fontSize:"20px",fontWeight:"500",children:N(y?I:ss,2)})]})})})}),!y&&e.jsxs(r,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(a,{color:"text_caption",children:"Position"}),e.jsxs(r,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(ke,{isChecked:B,onChange:()=>W(!B)}),e.jsx(a,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(H,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(ys,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${L}`,onChange:ns,onBlur:ts})})]})]}),e.jsx(w,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(l==null?void 0:l.length)>2?"16px":"20px",mr:"-4px",children:y?G==null?void 0:G.map(t=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",t),e.jsx(H,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(r,{w:"100%",justify:"space-between",children:[e.jsx(te,{token:t==null?void 0:t.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(w,{align:"flex-end",gap:"4px",children:[e.jsx(a,{color:"text_caption",children:ne(t==null?void 0:t.amount,6)}),e.jsxs(a,{children:["(",N(t==null?void 0:t.amountUSD,2),")"]})]})]})},t==null?void 0:t.coin_address))):(l==null?void 0:l.length)>0?l==null?void 0:l.map(t=>e.jsx(Ie,{posInfo:t,onClickCheckBox:j=>ls(j),pageFrom:"pendingYieldModal",cursor:Number(t==null?void 0:t.totalRewardUsd)<=0?"not-allowed":"pointer",checked:R.some(j=>(j==null?void 0:j.posId)===(t==null?void 0:t.posId))},t==null?void 0:t.posId)):f?[{},{}].map((t,j)=>e.jsx(es,{},j)):e.jsx(ve,{type:"nodata"})}),y?e.jsx(r,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(H,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>o(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(r,{justify:"center",gap:"4px",children:[e.jsx(J,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(a,{children:"Back"})]})})}):e.jsx(X,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(r,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(w,{gap:"4px",align:"flex-start",children:[e.jsx(a,{color:"primary_gray",children:"Amount selected"}),e.jsx(a,{color:"primary",fontSize:"18px",fontWeight:"500",children:N(I,2)})]}),e.jsxs(r,{children:[e.jsx(a,{color:"text_caption",children:"Select All"}),e.jsx(Ae,{checked:Y=="all",onClick:rs})]})]})})]}),y?e.jsx($,{mb:"-1px",isLoading:i,disabled:(G==null?void 0:G.length)==0||i,w:"100%",h:"52px",fontWeight:"500",onClick:ds,children:"Confirm"}):e.jsx($,{mb:"-1px",disabled:Number(I)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>o(!0),children:"Claim Yield"})]})})]})]})}const xe=({yieldList:s})=>{const[i,x]=_.useState(!1),{myPosYieldValue:b}=E(),{isApp:y}=pe();return e.jsx(w,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:y?()=>x(!i):()=>x(!1),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ve,{isLazy:!0,isOpen:i,placement:"bottom-end",children:[e.jsx(qe,{children:e.jsx($e,{as:"button",children:e.jsx(a,{cursor:Number(b)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(b)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:N(b,2)})})}),i&&Number(b)>0&&(s==null?void 0:s.length)>0&&e.jsx(Ge,{children:e.jsx(Ze,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(Ke,{p:"0px",children:e.jsx(w,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(o=>{var p;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",o),e.jsxs(r,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(te,{token:o==null?void 0:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:ne(o==null?void 0:o.amount,6)}),e.jsxs(a,{fontSize:"12px",children:["(",N(o==null?void 0:o.amountUSD,2),")"]})]})]},(p=o==null?void 0:o.token)==null?void 0:p.coin_type)})})})})})]})})};function an({isProfile:s=!1}){const{currentAccount:i}=he(),[x,b]=_.useState(!1),[y,o]=_.useState(!1),[p,C]=_.useState([]);Te();const{coinPriceObj:h}=Re(),{myPosYieldValue:S,setMyPosYieldValue:u,posFeeDataLoading:v,posRewardsDataLoading:T,farmsPosRewardsDataLoading:l,posBaseList:n,posLiquidityData:f,posBaseListLoading:k,posLiquidityDataLoading:B,posFeeData:W,posRewardsData:L,farmsPosRewardsData:U}=E(),{clmmTotalTvl:F}=Hs();i!=null&&i.address;const{calculatePendingYield:Q}=Je();_.useEffect(()=>{if(!(i!=null&&i.address))u(""),C([]);else if(!k&&(n==null?void 0:n.length)<=0&&(u("0"),C([])),(n==null?void 0:n.length)>0&&(i!=null&&i.address)&&!k&&!v&&!T&&!l){const{total:P,rewardAndFeeList:I}=Q(n,W,L,U);u(P),C(I)}},[n,k,v,T,l,i,h]);const R=i!=null&&i.address?!S:!1,{isApp:M}=pe(),Y=_.useMemo(()=>Number(S)<=0||x,[S,x]);return e.jsxs(e.Fragment,{children:[s&&M?e.jsx(H,{borderRadius:"12px",children:e.jsxs(r,{w:"100%",gap:"12px",justify:"space-between",children:[e.jsxs(w,{w:"50%",align:"flex-start",children:[e.jsx(a,{children:"Total Liquidity"}),e.jsx(q,{isLoaded:!!F,children:s?e.jsx(de,{size:"l",children:e.jsx(ce,{clmmTotalTvl:F})}):e.jsx(ce,{clmmTotalTvl:F})})]}),e.jsx(X,{h:"44px",w:"1px",bg:"border"}),e.jsxs(w,{w:"50%",align:"flex-start",children:[e.jsxs(r,{w:"100%",justify:"space-between",children:[e.jsx(a,{children:" Pending Yield"}),e.jsx(a,{fontSize:"12px",color:Y?"":"primary",onClick:Y?()=>{}:()=>o(!0),children:"Claim"})]}),e.jsx(q,{isLoaded:!R,children:e.jsx(de,{size:"l",children:e.jsx(xe,{yieldList:p})})})]})]})}):e.jsxs(Xe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(r,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Fs,backgroundSize:"100% 100%",children:[e.jsx(a,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(q,{isLoaded:!!F,children:s?e.jsx(de,{size:"l",children:e.jsx(ce,{clmmTotalTvl:F})}):e.jsx(ce,{clmmTotalTvl:F})})]}),e.jsxs(r,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Os,backgroundSize:"100% 100%",children:[e.jsx(a,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(q,{isLoaded:!R,children:M?e.jsxs(r,{gap:"20px",children:[e.jsxs(w,{align:"flex-end",children:[e.jsx(xe,{yieldList:p}),e.jsx($,{isLoading:x,disabled:Y,w:"100px",h:"24px",onClick:()=>o(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(S)>0&&e.jsx(J,{xlinkHref:"#icon-icon_spread",onClick:()=>o(!0)})]}):e.jsxs(r,{onClick:()=>o(!0),children:[s?e.jsx(de,{size:"l",children:e.jsx(xe,{yieldList:p})}):e.jsx(xe,{yieldList:p}),Number(S)>0&&e.jsx(J,{xlinkHref:"#icon-icon_spread"}),e.jsx($,{isLoading:x,disabled:Y,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]})]}),e.jsx(Us,{isOpen:y,claimLoading:x,onClose:()=>o(!1),changeClaimLoading:P=>b(P)})]})}const ce=({clmmTotalTvl:s})=>e.jsx(a,{fontSize:"20px",color:"primary",children:"$"+s=="--"?"--":N(s,2)});function ln({poolInfo:s,isProfile:i=!1}){var S,u,v,T,l,n;const x=ms(),{posPoolsRelatedData:b,posApiPoolData:y}=E(),o=(S=y[s==null?void 0:s.clmmPoolAddress])==null?void 0:S.haveFarming,p=(((v=b[(u=s==null?void 0:s.list[0])==null?void 0:u.posId])==null?void 0:v.displayFee)||"--")+"%",[C,h]=_.useState(!0);return e.jsxs(w,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(Xe,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>h(!C),children:[e.jsx(Qe,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:p,...s},haveName:!0}),e.jsxs(r,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(a,{color:"primary_gray",children:"Current Price"}),e.jsx(Cs,{symbolEllipsesDecimals:10,posId:(T=s==null?void 0:s.list[0])==null?void 0:T.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),o&&e.jsxs(r,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:f=>{Ce(f),x("/farms")},border:"1px solid",borderColor:"transparent",cursor:"pointer",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(a,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(J,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx($,{onClick:f=>{Ce(f),x(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(H,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(r,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(a,{fontSize:"12px",color:"primary",children:[(l=s==null?void 0:s.list)==null?void 0:l.length," ",((n=s==null?void 0:s.list)==null?void 0:n.length)>1?"Positions":"Position"]}),e.jsx(J,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:C?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),C&&e.jsx(w,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((f,k)=>e.jsx(fs,{positionInfo:f,isProfile:i},k))})]})}export{tn as L,Ie as M,nn as P,an as a,ln as b,Hs as u};
//# sourceMappingURL=PoolItem-FvwI_s0B.js.map
