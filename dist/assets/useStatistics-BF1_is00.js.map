{"version":3,"file":"useStatistics-BF1_is00.js","sources":["../../src/assets/images/icon_pools@2x.png","../../src/hooks/liquidity/useNavigateToLiquidity.ts","../../src/components/stats/VolChartPageBlock.tsx","../../src/store/stats/index.ts","../../src/hooks/stats/useStatistics.ts"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAAAXNSR0IArs4c6QAABW1JREFUaEPtmX9MlVUYxz+viaCJSAoxDDFBmFG6wLUcWGDNsmxhUJLxhxQ11x9ZgTgwWsvwR2JkW2urNFspOFGhtazVBENileSy1gJ/DZ0oohUqyq/xdh/ee/VygXvfc1+S5jjbu9299/k+5/me57zPOed7NG6wpt1gfBgm9H/P6HCGhjN0nUfAmyl3M/AQ8AgQAYTaHwm90f4cBb4CvgFaXThZxbsdIhVCdwP5wHzAz+TAtwF7gFV2eyv4g2b6NEMoHCgAFgMamqYTf4dGcjzETYPQCcbTk5/zxlN7GMqqofoPHV2XPnR7MBpoOgHxGkHJMC4OfENhlCQZ6GiE9ka4UAvNZdBSrcNV/DZgJdDgjpgnQpKNYiAAXx+dZQs1slIgONDMYEHxXliyATo6YYQvhC2DyVkwKtgcvuMsnNgAJzfqdLdLrC3A0/as9+vDHaEs4G1gBCkJULQUwkwGIl1tKIXlH4GuQ1AKRBWBX5g5Iq5WbSeh/hVo3in/dAM50kN/zgYiJGQKe6ZKQYZGngyKQhMy2R8agKkFcHueAtiN6fHVcGylTF+JO7s/Uv0Rkmn2ZQ+oJE9jUaJaMHt+gkfzjczcWQK3LlLDe7Ju2g6/pwkpeRa4Tj9XQlIAfu35ZgoyUM5MQxPMWAoXWgc3M64kjxfAsdfkrXxTM50LhSuhz4Fner6Z0tc9jVXf/9PXwta9xjczo1Qdr4I4lOr4prYC6Q6oMyFZZ2rx9YHDn2hKBUC8HTwCsS8a1Wz2Ye8LgFlSUihqpkn1E0ScRCA/nAntBpLJeQrWZZp1e81u4RtQ9gOE50DkOnW8N4gjK6BBCjES+xPOhGQ7cg5N8+VMiWZ6nXEE0XoFJqRCexfMOWN+nfGGhDNG1qmqEFl8JU0TZZvlyJCw20lCDFQVqXezaz+kvAkBCTCrSh1vBXFgDrTsFw8pwC4HoY+B5yh8AbJS1d1nvgObvobIQgiXJew6toZCOLJcOtwEZDoIVQCJVKyHRKmCii0pGyoPQWwFBCquW4pd9TH/uxJ+SZLXlUCSg1AdEEXdZoi6Tb2L6AyoPwWz62BMlDreCuJyPdREi4d6274z2kHoom2rM5aL5TB2tLp7bZ46pj/E3G7QPO2XXYBdl2Cfv7y8ZNsK+fcmdKEM/MeoBzdmAVzpUMc5IzQfmOuFj66LsG9cH0LWppwVKkcbIXIJ+E2FeDnoKrYBppy1oqAYQy/zb2thXi4EPgCx36l7GqAoWCvb6mFcQ2zcDS9/AKHPw3T7kUPF3wBl29rCqhKAq+39WfD9bxBTDCFp6p4GWFitbX3UwzAQp8/DpMWg+cJ95+AmCUOhudn6iBdrm1OFOK6a5m+Bt7ZBcCrctUPdg5vNqTizdnxQDefEWYh+Fto6YNaPEHCPmgcTxwdxaO2ApxLSk6ugtApC0iHmMxWkYWvigCdm1o7gZsNaWwK5m41v5t4/wU9xu6VwBJeQrIkknkhtr4S01cbZckY5BD3mCdH7f0WRxAG2JmMNFOKaYli5xVCEpr0Lk5epkfFSxnIm5b3Q6BzqqXPw0vuwq9rITMQamLLCPJlBEBodnVmTgpv/gfU74L0ynfZOrUdAmf4phJjU6gZZCnaQ8izWTwkx9OvTfxli/c918EWNIdZ3dzvEemNnr43UCXxQY+J88I+D0REwcjzoXU5i/QFoLv9PxHrnaSHrlIh1D/e5TkmaCRWiT/Zpom6eBl61i4G59qLjY3K+OV/HDNp1imvf/V1YSRZH2a47Om1C+mWgybZQl9u157MuDm6xaWiP2y7DZgOxwCRgPNBl8sLM7VgoHg9NjusQmg0TGsLBN9X1cIZMDdMQGg1naAgH31TX/wKFcsNAOFcQtQAAAABJRU5ErkJggg==\"","import useLiquidityStore from '@/store/liquidity'\nimport { useNavigate } from 'react-router-dom'\nimport useWrapPoolData from '../pool/useWrapPoolData'\n\nexport default function useNavigateToLiquidity() {\n  const navigate = useNavigate()\n  const { setApiPoolInfo } = useLiquidityStore()\n  const { wrapPoolData } = useWrapPoolData()\n  const goLiquidity = (url: string, poolApiInfo: any) => {\n    setApiPoolInfo(wrapPoolData(poolApiInfo))\n    navigate(url)\n  }\n\n  return {\n    goLiquidity\n  }\n}\n","import { useChartTime } from '@/hooks/common/useChartTime'\nimport useGetHistogramData, { GetHistogramDataParams } from '@/hooks/stats/useGetHistogramData'\nimport { SelectTab } from '@cetus/design'\nimport { symbolDataDisplayProcessing } from '@cetus/utils'\nimport { Box, HStack, Skeleton, Spinner, Text, VStack } from '@chakra-ui/react'\nimport { useEffect, useState } from 'react'\nimport VolumeChart from '../chart/VolumeChart'\n\nexport default function VolChartPageBlock({\n  statisticsData,\n  pageFrom = 'stats',\n  isRefresh\n}: {\n  statisticsData: any\n  pageFrom?: 'stats' | 'pools'\n  isRefresh: boolean\n}) {\n  const chartTypeList = [\n    {\n      label: 'D'\n    },\n    {\n      label: 'W'\n    },\n    {\n      label: 'M'\n    }\n  ]\n  const [titleDate, setTitleDate] = useState('(24H)')\n  const [isLoading, setIsLoading] = useState(true)\n  const [volType, setVolType] = useState<'D' | 'W' | 'M'>('D')\n  // 图表数据\n  const { time, getHoverTime, getCurrentTime } = useChartTime()\n  const { getHistogramData } = useGetHistogramData()\n  const [volChartData, setVolChartData] = useState([])\n  const [volCurrentData, setVolCurrentData] = useState(statisticsData?.cumulativeVolume24h)\n  const [currentTime, setCurrentTime] = useState(time)\n\n  const handleGetHistogramVolData = async () => {\n    setIsLoading(true)\n    const params: GetHistogramDataParams = {\n      type: 'vol',\n      date_type: volType == 'D' ? 'day' : volType == 'W' ? 'wek' : 'mon'\n    }\n    // 选择D 默认为近期一个月 选择w，默认为近期1年 选择M 可展示近5年，无数据则不展示，当前时刻即展示历史全部数据\n    // if (pageFrom !== 'stats') {\n    params['limit'] = volType == 'D' ? 31 : volType == 'W' ? 52 : 60\n    // }\n    const vol_res = await getHistogramData(params)\n    console.log('🚀 ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:', vol_res)\n    setVolChartData(vol_res)\n    setIsLoading(false)\n  }\n  const handleChangeVol = (data: any) => {\n    console.log('🚀 ~ file: TestData.tsx:88 ~ handleChangeVol ~ data:', data)\n    if (data) {\n      getHoverTime(data.date, volType)\n      setVolCurrentData(symbolDataDisplayProcessing(data.num, '$'))\n      setTitleDate(volType == 'D' ? '(24H)' : volType == 'W' ? '(7D)' : '(30D)')\n    } else {\n      setTitleDate('(24H)')\n      getCurrentTime()\n      setVolCurrentData(statisticsData?.cumulativeVolume24h)\n    }\n  }\n  useEffect(() => {\n    if (isRefresh) {\n      handleGetHistogramVolData()\n    }\n  }, [isRefresh])\n  useEffect(() => {\n    getCurrentTime()\n  }, [])\n\n  useEffect(() => {\n    handleGetHistogramVolData()\n  }, [volType])\n\n  useEffect(() => {\n    if (statisticsData) {\n      setVolCurrentData(statisticsData?.cumulativeVolume24h)\n    }\n  }, [statisticsData])\n\n  useEffect(() => {\n    if (time) {\n      console.log('🚀 ~ useEffect ~ time:', time)\n      setCurrentTime(time)\n    }\n  }, [time])\n  return (\n    <Box\n      w={pageFrom == 'pools' ? '100%' : { base: '100%', lg: '50%' }}\n      mt={{\n        base: '12px',\n        lg: '0'\n      }}\n    >\n      <HStack w=\"100%\" justify=\"space-between\">\n        <VStack align=\"flex-start\" gap=\"4px\">\n          <Text fontWeight=\"500\">Trading Volume {titleDate}</Text>\n          <Skeleton isLoaded={!!volCurrentData} m=\"4px 0\">\n            <Text fontWeight={pageFrom == 'pools' ? '600' : '500'} fontSize=\"20px\" color=\"text_caption\">\n              {volCurrentData}\n            </Text>\n          </Skeleton>\n          {pageFrom == 'stats' && <Text fontWeight=\"500\">{currentTime}</Text>}\n        </VStack>\n        <SelectTab\n          type=\"outlineTab\"\n          tabList={chartTypeList}\n          currentTab={volType}\n          handleChangeTab={tab => setVolType(tab.label)}\n          wrapStyle={{\n            w: '128px',\n            h: '32px',\n            p: '3px',\n            borderRadius: '8px'\n          }}\n          itemStyle={{\n            flex: '1',\n            fontSize: '14px',\n            margin: '0px'\n          }}\n        />\n      </HStack>\n\n      <Box w=\"100%\" h={pageFrom == 'pools' ? '270px' : '260px'} position=\"relative\" pt={pageFrom == 'pools' ? '12px' : '20px'}>\n        {isLoading && (\n          <Box position=\"absolute\" top=\"38%\" left=\"50%\" transform=\"translate(-50%,-50%)\">\n            <Spinner />\n          </Box>\n        )}\n        <VolumeChart data={volChartData} onChangeValue={handleChangeVol} pageFrom={pageFrom} />\n      </Box>\n    </Box>\n  )\n}\n","import { create, StateCreator } from 'zustand'\n\ninterface statsState {\n  statisticsData: string\n  setStatisticsData: (data: any) => void\n}\n\nconst store: StateCreator<statsState> = (set, get) => ({\n  statisticsData: '',\n  setStatisticsData: (data: any) => {\n    set(() => ({\n      statisticsData: data\n    }))\n  }\n})\n\nconst useStatsStore = create(store)\nexport default useStatsStore\n","import { StatisticsPath } from '@/apis/path'\nimport useStatsStore from '@/store/stats'\nimport { useFetch } from '@cetus/hooks'\nimport { addComma, symbolDataDisplayProcessing } from '@cetus/utils'\n\nexport default function useStatistics() {\n  const { fetchByApi } = useFetch()\n  const { setStatisticsData } = useStatsStore()\n\n  const getStatistics = async () => {\n    const res = await fetchByApi(StatisticsPath, 'GET')\n    console.log('🚀 ~ file: useStatistics.ts:8 ~ getStatistics ~ res:', res)\n\n    if (res) {\n      const result = {\n        cumulativeVolume: symbolDataDisplayProcessing(res?.vol_in_usd, '$'),\n        cumulativeVolume24h: symbolDataDisplayProcessing(res?.vol_in_usd_24h, '$'),\n        totalValueLocked: symbolDataDisplayProcessing(res?.pure_tvl_in_usd, '$'),\n        cumulativeTransactions: addComma(res?.tx_num),\n        totalAccounts: addComma(res?.user_num)\n      }\n      setStatisticsData(result)\n      return result\n    }\n\n    return null\n  }\n\n  return {\n    getStatistics\n  }\n}\n"],"names":["icon_pools","useNavigateToLiquidity","navigate","useNavigate","setApiPoolInfo","useLiquidityStore","wrapPoolData","useWrapPoolData","url","poolApiInfo","VolChartPageBlock","statisticsData","pageFrom","isRefresh","chartTypeList","titleDate","setTitleDate","useState","isLoading","setIsLoading","volType","setVolType","time","getHoverTime","getCurrentTime","useChartTime","getHistogramData","useGetHistogramData","volChartData","setVolChartData","volCurrentData","setVolCurrentData","currentTime","setCurrentTime","handleGetHistogramVolData","params","vol_res","handleChangeVol","data","symbolDataDisplayProcessing","useEffect","jsxs","Box","HStack","VStack","Text","jsx","Skeleton","SelectTab","tab","Spinner","VolumeChart","store","set","get","useStatsStore","create","useStatistics","fetchByApi","useFetch","setStatisticsData","res","StatisticsPath","result","addComma"],"mappings":"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"}