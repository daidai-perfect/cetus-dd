const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SourceGrid-Fzh8DonN.js","assets/vendor-BowHGuwE.js","assets/useSwapHelper-B0yOkkbM.js","assets/useToken-CQONILEW.js","assets/index-C10POeB7.js","assets/index-CteIxbgC.css","assets/global-C6vh2RR7.js","assets/useGetPoolList-BTM-c6TE.js","assets/useWrapPoolData-B4Ejf7Ww.js","assets/CheckBox-h6TTd1Hz.js","assets/aggregator-oFKtN55h.js","assets/swapConfig-DNLKvr7m.js","assets/TooltipIcon-DwzOcTXu.js","assets/FreshProgressV2-CLru0dhy.js"])))=>i.map(i=>d[i]);
import{bB as K,a8 as Q,Z as N,I as W,$ as ee,_ as se}from"./index-C10POeB7.js";import{a,j as e,aq as re,W as G,X as B,Y as V,Z as J,$ as te,a0 as U,H as b,T as j,a5 as $,q as _,V as T,a6 as oe,ae as ne,af as le,ag as ie,p as ae}from"./vendor-BowHGuwE.js";import{A as ce,a as de}from"./aggregator-oFKtN55h.js";import{u as ue}from"./swapConfig-DNLKvr7m.js";import{a as g}from"./useSwapHelper-B0yOkkbM.js";import{T as xe}from"./TooltipIcon-DwzOcTXu.js";import{u as he,a as fe}from"./FreshProgressV2-CLru0dhy.js";function pe(i,n){return K(i,n)}var ge=function(i,n){var t=he(i),r=a.useRef(null),d=a.useCallback(function(){r.current&&clearTimeout(r.current)},[]);return a.useEffect(function(){if(!(!fe(n)||n<0))return r.current=setTimeout(t,n),d},[n]),d};const z=i=>i.reduce((n,t)=>n+(t!=null&&t.subItems?t.subItems.length:1),0),R=(i,n)=>i.reduce((t,r)=>r!=null&&r.subItems?t+r.subItems.reduce((d,u)=>d+(n[u.id]?1:0),0):t+(n[r.id]?1:0),0),M=[g.HAWAL,g.STEAMM_OMM_V2],je=[{parent:g.HAEDAL,child:g.HAWAL},{parent:g.STEAMM_OMM,child:g.STEAMM_OMM_V2}];function Se(){const{providersSwitchStates:i,setProvidersSwitchStates:n}=ue(),{providers:t}=Q(),[r,d]=a.useState({...i}),[u,O]=a.useState([]),[x,m]=a.useState([]);N(()=>{d({...i})},[i]),N(()=>{const o={},s=[],l=[],H={};t.filter(p=>!M.includes(p)).forEach(p=>{const c=ce[p];if(c){const v=i[c.id];v===void 0?H[c.id]=!0:H[c.id]=v;const k=E(p);if(k){const I=o[k.groupName]||[];I.push(c),o[k.groupName]=I}else c.type==="dex"?l.push(c):s.push(c)}});for(const[p,c]of Object.entries(o))if(c.length>0){const v=c[0],k={...v,id:v.groupId,name:p,subItems:c.sort((I,X)=>X.sort-I.sort)};v.type==="dex"?l.push(k):s.push(k)}s.sort((p,c)=>c.sort-p.sort),l.sort((p,c)=>c.sort-p.sort),O([...s]),m([...l]),n(H)},[t]);const E=o=>de.find(s=>s.items.includes(o)),y=o=>{if(o){const s={};t.forEach(l=>s[l]=!0),M.forEach(l=>{t.includes(l)&&(s[l]=!0)}),d(s)}else{const s={};t.forEach(l=>s[l]=!1),M.forEach(l=>{t.includes(l)&&(s[l]=!1)}),d({...s,[g.CETUS]:!0})}},P=o=>{o?x.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=!0}):r[s.id]=!0}):x.forEach(s=>{s.id===g.CETUS?r[s.id]=!0:s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=!1}):r[s.id]=!1}),d({...r})},D=o=>{u.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=o}):r[s.id]=o}),M.forEach(s=>{t.includes(s)&&(r[s]=o)}),d({...r})},C=(o,s)=>{r[o]=s,je.forEach(l=>{o===l.parent&&t.includes(l.child)&&(r[l.child]=s)}),d({...r})},A=a.useMemo(()=>x.every(o=>o!=null&&o.subItems?o.subItems.every(s=>r[s.id]):r[o.id]),[JSON.stringify(x),JSON.stringify(r)]),S=a.useMemo(()=>u.every(o=>o!=null&&o.subItems?o.subItems.every(s=>r[s.id]):r[o.id]),[JSON.stringify(u),JSON.stringify(r)]),L=a.useMemo(()=>A&&S,[A,S]),h=a.useMemo(()=>(t==null?void 0:t.filter(o=>o!==g.CETUS&&!!r[o]).length)>=1,[r,t]),f=()=>{n({...r})},w=a.useMemo(()=>{var o;return(o=t==null?void 0:t.filter(s=>!M.includes(s)))==null?void 0:o.length},[t==null?void 0:t.length]),Y=a.useMemo(()=>({checked:R(x,r),total:z(x)}),[x,r]),Z=a.useMemo(()=>({checked:R(u,r),total:z(u)}),[u,r]);return{handleSelectAllProviderClick:y,handleSelectAllDexProviderClick:P,handleSelectAllOtherProviderClick:D,handleProviderClick:C,selectAllProviders:L,selectAllDexProviders:A,otherProviderList:u,selectAllOtherProviders:S,dexProviderList:x,currProvidersSwitchStates:r,providersSwitchStates:i,isOpenAggregatorMode:h,handleSaveClick:f,allSourceNum:w,dexSourceNumMap:Y,otherSourceNumMap:Z}}function ve(i){const[n,t]=a.useState(!1),r=ge(()=>{t(!0)},300);return a.useEffect(()=>()=>r(),[]),e.jsx(re,{sx:{".chakra-switch__track":{p:"0px",transitionDuration:n?"var(--chakra-transition-duration-fast) !important":"0s"},".chakra-switch__thumb":{transitionDuration:n?"var(--chakra-transition-duration-normal) !important":"0s"}},...i})}function ke({isOpen:i,onOk:n,onClose:t}){return e.jsxs(G,{autoFocus:!1,returnFocusOnClose:!1,isOpen:i,onClose:t,isCentered:!0,children:[e.jsx(B,{}),e.jsxs(V,{children:[e.jsx(J,{children:"Tips"}),e.jsx(te,{}),e.jsx(U,{children:e.jsxs(b,{children:[e.jsx(W,{xlinkHref:"#icon-icon_tips",svgHover:"text_paragraph",cursor:"default"}),e.jsx(j,{color:"text_caption",children:"Do you want to save your changes?"})]})}),e.jsxs($,{gap:"16px",children:[e.jsx(_,{flex:"1",onClick:n,h:"40px",borderRadius:"8px",children:"Confirm"}),e.jsx(_,{flex:"1",variant:"outline",h:"40px",borderRadius:"8px",onClick:t,children:"No"})]})]})]})}function be({num:i,total:n}){return e.jsxs(b,{h:"16px",lineHeight:"16px",p:"2px 8px",borderRadius:"8px",bg:"aggregator_switch",gap:"0px",children:[e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"primary",children:[i,"Â "]}),n!==void 0&&e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"text_paragraph",children:["/ ",n]})]})}const q=a.lazy(()=>se(()=>import("./SourceGrid-Fzh8DonN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Ce=({isOpen:i,onClose:n})=>{const[t,r]=a.useState(!1),{handleSelectAllProviderClick:d,handleSelectAllDexProviderClick:u,handleSelectAllOtherProviderClick:O,handleProviderClick:x,selectAllProviders:m,selectAllDexProviders:E,otherProviderList:y,selectAllOtherProviders:P,dexProviderList:D,currProvidersSwitchStates:C,providersSwitchStates:A,handleSaveClick:S,allSourceNum:L,dexSourceNumMap:h,otherSourceNumMap:f}=Se(),w=()=>{pe(A,C)?n():r(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{autoFocus:!1,returnFocusOnClose:!1,isOpen:i,onClose:w,isCentered:!0,children:[e.jsx(B,{}),e.jsxs(V,{bg:"background",w:{base:"calc(100vw - 16px)",lg:"540px"},maxW:"unset",children:[e.jsx(J,{children:e.jsxs(b,{w:"100%",justify:"space-between",children:[e.jsx(j,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Aggregator Settings"}),e.jsx(W,{xlinkHref:"#icon-icon_close",onClick:w})]})}),e.jsx(U,{children:e.jsxs(T,{w:"100%",gap:"24px",children:[e.jsxs(b,{w:"100%",justify:"space-between",align:"flex-end",children:[e.jsxs(T,{w:"100%",gap:"8px",align:"flex-start",children:[e.jsxs(b,{gap:"4px",children:[e.jsx(j,{fontSize:"16px",color:"text_caption",fontWeight:"500",children:"Liquidity Sources"}),e.jsx(xe,{tooltipCon:"Your trade is routed through one or more of these liquidity sources."})]}),e.jsx(j,{lineHeight:{base:"12px",lg:"16px"},fontSize:{base:"12px",lg:"16px"},children:"Disable/Enable Liquidity Sources"})]}),e.jsxs(T,{align:"flex-end",flex:"0 0 108px",children:[e.jsx(j,{children:"Select all"}),e.jsxs(b,{justifyContent:"flex-end",h:"16px",gap:"4px",children:[e.jsx(be,{num:ee((h==null?void 0:h.checked)||0).plus((f==null?void 0:f.checked)||0).toNumber(),total:L}),e.jsx(ve,{id:"select-all",isChecked:!!m,onChange:()=>d(!m)})]})]})]}),e.jsxs(oe,{flexDir:"column",w:"100%",p:"0",gap:"20px",align:"flex-start",maxH:{base:"calc(100vh - 280px)",lg:"600px"},overflow:"hidden",children:[e.jsx(a.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(q,{title:"Dex",isAllChecked:E,onAllSelect:()=>u(!E),onItemSelect:x,list:D,checkedMap:C,totalNum:h==null?void 0:h.total,checkedNum:h==null?void 0:h.checked})}),e.jsx(ne,{orientation:"horizontal"}),e.jsx(a.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(q,{title:"Other",isAllChecked:P,onAllSelect:()=>O(!P),onItemSelect:x,list:y,checkedMap:C,totalNum:f==null?void 0:f.total,checkedNum:f==null?void 0:f.checked})})]})]})}),e.jsxs($,{gap:"16px",p:"8px 16px 16px",children:[e.jsx(_,{flex:"1",variant:"outline",p:"0 15px",onClick:n,children:"Cancel"}),e.jsx(_,{flex:"1",onClick:()=>{S(),n()},children:"Save"})]})]})]}),t&&e.jsx(ke,{isOpen:t,onClose:()=>{r(!1),n()},onOk:()=>{S(),r(!1),n()}})]})};function F(){return e.jsx(le,{w:"100%",templateColumns:{base:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},maxH:{base:"unset",lg:"152px"},overflow:"scroll",gap:"8px",children:[1,2,3,4,5,6,7,8,9].map(i=>e.jsx(ie,{children:e.jsx(ae,{w:"100%",h:"36px"})},i))})}const Oe=a.memo(Ce);export{Oe as A,be as N,ve as a,Se as u};
//# sourceMappingURL=AggregatorModal-CEDJRuBi.js.map
