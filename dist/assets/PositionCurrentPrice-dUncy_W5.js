import{r as P,G as C,d as x,X as D,I as O,K as Y}from"./index-C2ps9-Dy.js";import{a as F,j as S,H as E,p as H,T as j}from"./vendor-BowHGuwE.js";import{u as L}from"./usePositionList-B802Vh58.js";function V(){const{getTokenAmountValue:b}=P(),o=(r,u,t,c)=>{if(!(r!=null&&r.length))return{total:"0",rewardAndFeeList:[]};let s="0";const f=[];r.forEach(n=>{const g=u[n==null?void 0:n.posId],d=t[n==null?void 0:n.posId]||[],I=c?c[n==null?void 0:n.id]:[],N=d.concat(I);if(g){const e=m(n==null?void 0:n.displayTokenA,g==null?void 0:g.displayFeeOwedA),a=m(n==null?void 0:n.displayTokenB,g==null?void 0:g.displayFeeOwedB);e&&f.push(e),a&&f.push(a),s=U(s,e==null?void 0:e.amountUSD,a==null?void 0:a.amountUSD)}N.forEach(e=>{var a;if(Number(e==null?void 0:e.display_amount_owed)>0){const _=m(e==null?void 0:e.token,e==null?void 0:e.display_amount_owed,(a=e==null?void 0:e.token)==null?void 0:a.coin_type);_&&(f.push(_),s=U(s,_==null?void 0:_.amountUSD))}})});const l=h(f);return console.log("ðŸš€ ~ calculatePendingYield ~  total,:",l,s,l.length==1&&(s=="--"||Number(s)==0)),{total:(l==null?void 0:l.length)>0&&Number(s)==0?"--":s,rewardAndFeeList:l}},m=(r,u,t)=>{if(!r||!u)return null;const c=t||r.coin_type;if(!c)return null;const s=b(c,u);return{coin_address:C(c,!1),amount:u,amountUSD:x(u).gt(0)&&x(s).lte(0)?"--":s,token:r}},U=(r,...u)=>{console.log("ðŸš€ ~ useCalculatePendingYield ~ amounts:",u);let t=x(r);return u.forEach(c=>{c&&c!=="--"&&t!=="--"&&(t=t.plus(c))}),t.toString()},h=r=>{const u={};return r.forEach(t=>{var l,n;const{coin_address:c,amount:s,amountUSD:f}=t;u[c]||(u[c]={...t,amount:"0",amountUSD:"0"}),f=="--"?u[c].amountUSD="--":u[c].amountUSD=u[c].amountUSD=="--"?"--":x((l=u[c])==null?void 0:l.amountUSD).plus(f||0).toString(),u[c].amount=x((n=u[c])==null?void 0:n.amount).plus(s||0).toString()}),Object.values(u).filter(t=>Number(t.amount)>0).sort((t,c)=>x(c.amountUSD=="--"?0:c.amountUSD).minus(t.amountUSD=="--"?0:t.amountUSD).toNumber())};return{calculatePendingYield:o}}function X({posId:b,displayTokenA:o,displayTokenB:m,symbolEllipsesDecimals:U=10}){const[h,r]=F.useState(!0),{posPoolsRelatedData:u}=L(),t=u[b];return S.jsxs(E,{children:[S.jsx(H,{isLoaded:!!(t!=null&&t.currentPrice),children:S.jsx(j,{color:"text_caption",children:h?t==null?void 0:t.currentPrice:t==null?void 0:t.currentPriceReverse})}),S.jsxs(E,{gap:"0",children:[S.jsx(j,{color:"primary_gray",children:D(h?m==null?void 0:m.symbol:o==null?void 0:o.symbol,U)}),S.jsx(j,{color:"primary_gray",children:"Â perÂ "}),S.jsx(j,{color:"primary_gray",children:D(h?o==null?void 0:o.symbol:m==null?void 0:m.symbol,U)})]}),S.jsx(O,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:c=>{Y(c),r(!h)}})]})}export{X as P,V as u};
//# sourceMappingURL=PositionCurrentPrice-dUncy_W5.js.map
