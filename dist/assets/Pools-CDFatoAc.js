const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RewardsContent-B-007NWQ.js","assets/index-CHLr8WBT.js","assets/index-CteIxbgC.css"])))=>i.map(i=>d[i]);
import{r as c,b as ce,j as e,ap as Ye,aq as Oe,C as he,W as L,H as u,ar as es,I as oe,T as d,g as Ve,as as cs,c as pe,at as qe,au as De,av as ss,an as Qe,a as me,aw as Rs,ab as Hs,ax as Es,V as b,$ as K,ay as ns,_ as Ws,az as Fs,B as I,a2 as $e,S as Se,am as Ns,l as Vs,aA as $,Y as Ue,a1 as Te,a4 as Le,ak as hs,ad as us,ae as js,af as fs,ag as ys,ah as bs,ai as ws,aj as Ss,k as Us,aB as Ms,a3 as vs,d as J,aC as Ze,m as Cs,aD as Ys}from"./index-CHLr8WBT.js";import{u as Ge,a as _s,b as Os,c as xe,d as ts}from"./usePositionList-COSCP2-2.js";import{R as ps}from"./RefreshButton-C1qwawBE.js";import{P as qs}from"./index-BPHwk_tg.js";import{S as Ie}from"./switch-BiiHAgyb.js";import{u as is,a as ks,b as Ds,i as Qs,V as Ls}from"./useStatistics-BDG3aP7P.js";import{u as Gs}from"./useGetPoolList-CUnDlVFh.js";import{H as Xs,T as Ks}from"./VolumeChart-DdisTAF8.js";import{N as ve}from"./NoData-C4RUpH8b.js";import{S as Zs}from"./SortDropBlock-OKhJncZA.js";import{T as Ne}from"./TableSortTh-DpfH1lFR.js";import{u as Js}from"./index-Cm3KzQec.js";import{A as $s}from"./index-DpYV1rxW.js";import{C as Is,P as As}from"./CoinPairInfo-Djso5quW.js";import{F as en,u as ms,P as sn,a as nn}from"./PositionListLoading-CtrfKl4B.js";import{C as Xe}from"./CetusTooltip-D6K7ROoy.js";import{u as tn}from"./useToken-CUbDlqoG.js";import{V as ds}from"./VTextLabelBox-DkmtZjgn.js";import{u as on}from"./useBurn-7xY35hDE.js";import{u as Ts}from"./useTransaction-Cpn9lJJz.js";import{S as Me}from"./SingleTokenInfo-DSlHFcJf.js";import{L as ln}from"./PriceRange-DrurIzCw.js";import{u as an}from"./useNotifiSubscription-C7AG3-6d.js";import{u as rn}from"./useRpcListener-BPWnNsjh.js";import{u as xn,a as Ps,P as cn}from"./PositionCurrentPrice-CDPqH09K.js";import{u as pn}from"./useAccountBalance-C808azbd.js";import"./api-data-utils-C7YZCm61.js";import"./Loading-DiSDG9hb.js";import"./TooltipIcon--IGZm1TS.js";import"./index-CKtSmGUk.js";import"./Pagination-E7PViZOx.js";import"./tr-B2OMVv02.js";import"./_getAllKeysIn-BdX03Ct2.js";import"./YAxis-BR7Ttjva.js";import"./throttle-Bd39IVMs.js";import"./debounce-Dnj-Su9E.js";import"./generateCategoricalChart-BHc4pvO9.js";import"./linear-Cl5vGKe1.js";import"./index-CUYDzILD.js";import"./AddressCopyLink-CQIa6RW4.js";import"./AddressUnderline-W4FZ8DYL.js";import"./useCurrentPos-hcsN5k1R.js";import"./PositionStatus-BZDtjqPc.js";import"./RangeValue-qILU4Yqg.js";import"./useXCetusHelper-DDMnDS-o.js";import"./usePreviousValue-Bt7rb2_J.js";import"./msafe-oYBkW7LJ.js";function dn({selectCoinList:s,onClickSelectCoinList:n,onDeleteSelectCoinList:x}){const[r,t]=c.useState(!1),{isApp:i}=ce(),l=c.useRef(null);return e.jsxs(Ye,{isLazy:!0,placement:"bottom-start",trigger:"click",modifiers:[{name:"flip",enabled:!1},{name:"shift",enabled:!1}],initialFocusRef:l,children:[e.jsx(Oe,{children:e.jsx(he,{ref:l,as:"button",minW:{base:"calc(100% - 48px)",lg:"292px"},children:e.jsx(L,{cursor:s.length>=2?"not-allowed":"pointer",h:"40px",borderRadius:"12px",minW:"100%",w:"unset",p:"0px 4px 0 10px",onClick:()=>t(!0),children:e.jsxs(u,{w:"100%",justify:"space-between",h:"100%",align:"center",children:[e.jsxs(es,{align:"center",h:"100%",children:[e.jsx(oe,{xlinkHref:"#icon-icon_search",svgHover:"text_paragraph"}),e.jsx(d,{ml:"4px",children:i&&s.length>=2?"":"Filter by token"})]}),e.jsx(u,{children:s==null?void 0:s.map(o=>e.jsxs(u,{gap:"4px",align:"center",bg:"button_ghost_bg",borderRadius:"8px",p:"5px 8px",children:[e.jsx(Ve,{imageUrl:o==null?void 0:o.logo_url,w:"20px",h:"20px"}),e.jsx(d,{ml:"2px",color:"text_caption",children:i?cs((o==null?void 0:o.symbol)||"",5):cs((o==null?void 0:o.symbol)||"",10)}),e.jsx(oe,{xlinkHref:"#icon-icon_close",onClick:g=>{pe(g),x(o),t(!1)}})]},o==null?void 0:o.coin_type))})]})})})}),r&&(s==null?void 0:s.length)<2&&e.jsx(qe,{w:{base:"calc(100vw - 68px)",lg:"292px"},children:e.jsx(De,{p:"0px",children:e.jsx(qs,{selectTokenList:s,onDeleteToken:x,onClickToken:n})})})]})}function zs({handleIsWatchList:s=()=>{},handleIsDisplayChecked:n=()=>{},onClickIncentiveTypes:x,handleRefresh:r,selectCoinList:t,onClickSelectCoinList:i,onDeleteSelectCoinList:l,isPools:o=!0,isRefreshed:g}){const{isWatchList:j,isAllPools:C,isIncentivizedOnly:T}=Ge(),{isApp:w,windowWidth:f}=ce();return e.jsxs(u,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(u,{w:{base:"100%",lg:o?"unset":"100%"},justify:"space-between",children:[e.jsx(dn,{selectCoinList:t,onClickSelectCoinList:i,onDeleteSelectCoinList:l}),(w||!o)&&e.jsx(ps,{handleRefresh:r,isRefreshed:o?g:void 0})]}),o&&e.jsxs(u,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(L,{w:{base:f<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:f<=350?e.jsx(u,{h:"38px",justify:"center",align:"center",children:e.jsx(oe,{xlinkHref:"#icon-icon_star",svgFill:j?"primary":"text_paragraph"})}):e.jsxs(u,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(ss,{checked:j,onClick:()=>{}}),e.jsx(d,{color:j?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[e.jsx(L,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:w?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",gap:w?"4px":"8px",children:[e.jsx(d,{color:T?"text_caption":"text_paragraph",children:w?"Incentivized":"Incentivized Only"}),e.jsx(Ie,{isChecked:T,onChange:x})]})}),e.jsx(L,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:w?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",children:[e.jsxs(d,{color:C?"text_caption":"text_paragraph",children:[" ",w?"All":"All pools"]}),e.jsx(Ie,{isChecked:C,onChange:n})]})})]}),!w&&e.jsx(ps,{handleRefresh:r,isRefreshed:g})]})]})}const gn=()=>e.jsx(u,{w:"18px",h:"18px",onClick:s=>{pe(s)},children:e.jsx(Xe,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(he,{children:e.jsx(Qe,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),hn=()=>{const s=me(),{isApp:n}=ce();return e.jsx(u,{w:"20px",h:"20px",onClick:x=>{pe(x),n||s("/vaults")},children:e.jsx(Xe,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Vault available"}),children:e.jsx(he,{children:e.jsx(Qe,{w:"100%",h:"100%",src:"/images/icon_vaults.png"})})})})},un=({coinTypeA:s,coinTypeB:n})=>{const{getShowCoinTag:x}=Rs(),{trustedTokenList:r,importTokenList:t}=Hs(),i=c.useMemo(()=>(s||n)&&(r==null?void 0:r.length)>0?x(s)||x(n):!1,[s,n,r,t]);return e.jsx(e.Fragment,{children:i&&e.jsx(u,{w:"20px",h:"20px",onClick:l=>{pe(l)},children:e.jsx(Xe,{placement:"top",tooltip:e.jsx(d,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(he,{children:e.jsx(Qe,{w:"100%",h:"100%",src:Es})})})})})};function jn({poolInfo:s}){const n=me(),{addFavorites:x,removeFavorites:r}=_s(),{poolFavoriteIds:t}=Ge(),{goLiquidity:i}=is(),l=c.useMemo(()=>t==null?void 0:t.includes((s==null?void 0:s.poolAddress)||""),[JSON.stringify(t),s==null?void 0:s.poolAddress]);return e.jsxs(b,{align:"flex-start",padding:"8px",children:[e.jsx(Je,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{i(`/liquidity?tab=analytics&poolAddress=${s==null?void 0:s.poolAddress}`,s)}}),e.jsx(Je,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var o,g;n(`/swap/${(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type}/${(g=s==null?void 0:s.displayTokenB)==null?void 0:g.coin_type}`)}}),e.jsx(Je,{text:"Add to Watchlist",xlinkHref:l?"#icon-icon_star_sel":"#icon-icon_star",svgFill:l?"primary":"text_paragraph",onClick:()=>{l?r(s==null?void 0:s.poolAddress):x(s==null?void 0:s.poolAddress)}})]})}const Je=({text:s,xlinkHref:n,svgFill:x="text_paragraph",onClick:r})=>e.jsxs(u,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:t=>{pe(t),r()},children:[e.jsx(oe,{svgFill:x,xlinkHref:n,svgHover:"primary",svgW:s=="Add to Watchlist"?"22px":"20px",svgH:s=="Add to Watchlist"?"22px":"20px",minW:s=="Add to Watchlist"?"22px":"20px",minH:s=="Add to Watchlist"?"22px":"20px",ml:s=="Add to Watchlist"?"-2px":"0px"}),e.jsx(d,{fontSize:"13px",children:s})]});function fn({poolInfo:s}){const{isApp:n}=ce(),{goLiquidity:x}=is();return e.jsxs(u,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:n?"space-between":"flex-end",gap:"8px",children:[e.jsx(K,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{x(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(Ye,{isLazy:!0,trigger:n?"click":"hover",placement:n?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(Oe,{children:e.jsx(he,{onClick:r=>{pe(r)},children:e.jsx(K,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(oe,{svgFill:n?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(ns,{children:e.jsx(qe,{borderRadius:"12px",w:"fit-content",children:e.jsx(De,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsx(jn,{poolInfo:s})})})})]})]})}const yn=c.lazy(()=>Ws(()=>import("./RewardsContent-B-007NWQ.js"),__vite__mapDeps([0,1,2])));function bn({miningRewardList:s,farmsRewarderList:n}){const{getTokenInfo:x}=tn(),[r,t]=c.useState([]),i=async()=>{if((s==null?void 0:s.length)>0||(n==null?void 0:n.length)>0)try{let l=[],o=[];(s==null?void 0:s.length)>0&&(l=await Promise.all(s.map(async g=>{const j=await x(g==null?void 0:g.coinType);return{...g,tokenInfo:j,isMining:!0}}))),(n==null?void 0:n.length)>0&&(o=await Promise.all(n.map(async g=>{const j=await x(g==null?void 0:g.coinType);return{...g,tokenInfo:j,isFarming:!0}}))),console.log("ðŸš€ ~ list:",l.concat(o),l,o),t(l.concat(o))}catch(l){console.error("Error processing list:",l)}};return Fs(()=>{i()},[s,n]),e.jsx(u,{w:"100%",justify:"flex-end",children:r.map(l=>{var o;return e.jsx(I,{onClick:g=>g.stopPropagation(),children:e.jsx(Xe,{placement:"top",tooltip:e.jsx(c.Suspense,{fallback:e.jsxs(u,{children:[e.jsx($e,{w:"24px",h:"24px"}),e.jsx(Se,{w:"200px",h:"14px"})]}),children:e.jsx(yn,{item:l})}),children:e.jsx(he,{as:"button",children:e.jsx(Ve,{imageUrl:(o=l==null?void 0:l.tokenInfo)==null?void 0:o.logo_url,w:"24px",h:"24px"})})})},l==null?void 0:l.coinType)})})}function wn({isRefreshed:s,handleIsRefreshed:n}){var we;const{getStatistics:x}=ks(),{poolRefreshStatus:r,setPoolRefreshStatus:t,setPoolListLength:i,poolFavoriteIds:l,isWatchList:o,setIsWatchList:g,isIncentivizedOnly:j,setIsIncentivizedOnly:C,isAllPools:T,setIsAllPools:w,poolFavoriteIdsChange:f,setPoolFavoriteIdsChange:V}=Ge(),{getPoolList:P}=Gs(),{getFavoritePoolList:de}=_s(),{goLiquidity:D}=is(),[M,Q]=c.useState(j?["mining","farming"]:["mining","farming","noIncentives"]),ee=()=>{C(!j),w(!1),Q(a=>a!=null&&a.includes("noIncentives")?["mining","farming"]:["mining","farming","noIncentives"])},se=()=>{w(!T),g(!1),C(!1),Q(["mining","farming","noIncentives"])},ne=()=>{w(!1),g(!o),V(!1)};c.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",f,l),o&&f&&(V(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",o),le({offset:0,isWatchList:o}))},[o,l==null?void 0:l.length,f]);const S=c.useRef(null),W=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),t("pending"),le({offset:0,isListLoading:!1}),S.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",r),r=="pending"&&t("timeout")},1e4),x()},[H,A]=c.useState([]),h=a=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",a),A(k=>[...k,a])},z=a=>{A(k=>k.filter(q=>(q==null?void 0:q.coin_type)!==(a==null?void 0:a.coin_type)))};c.useEffect(()=>{console.log("ðŸš€ ~ PoolsContent ~ selectCoinList:",o,M,H),typeof o=="boolean"&&le({offset:0})},[o,M,H]);const y=20,[U,N]=c.useState(!0),[Y,O]=c.useState(!0),[G,ge]=c.useState("desc"),[B,ue]=c.useState({label:"Volume (24H)",value:"vol"}),[X,Ce]=c.useState([]),[Pe,ze]=c.useState(0),[ye,Be]=c.useState(1),le=async a=>{var ls,as,rs,xs;const k=(a==null?void 0:a.isListLoading)??!0,q=(a==null?void 0:a.isWatchList)??o;console.log("ðŸš€ ~  ~ params:",a,q);const ke=H.length==2?`${(ls=H[0])==null?void 0:ls.coin_type},${(as=H[1])==null?void 0:as.coin_type}`:H.length==1?`${(rs=H[0])==null?void 0:rs.coin_type}`:"",{is_vaults:Ae=!1,display_all_pools:je=q?!0:T??!0,has_mining:Re=M.includes("mining"),has_farming:He=M.includes("farming"),no_incentives:Ee=M.includes("noIncentives"),order_by:We=G=="desc"?`-${B==null?void 0:B.value}`:`${B==null?void 0:B.value}`,limit:Fe=y,offset:fe=0,coin_type:R=ke,pool:E=""}=a;fe==0&&Be(1),Number(fe)>=y?N(!0):O(k);const re={is_vaults:Ae,display_all_pools:je,has_mining:Re,has_farming:He,no_incentives:Ee,order_by:We,limit:Fe,offset:fe,coin_type:R,pool:E};let Z;try{q?(re.pools=l,Z=await de(re)):Z=await P(re),console.log("ðŸš€ ~  ~ result:",Z),Z&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",Z),Number(fe)>=y?Ce(ie=>ie.concat(Z.list)):Ce(Z.list),ze(Z.total),i((Z.total||0).toString()),O(!1),t("success"))}catch(ie){console.log("ðŸš€ ~  ~ error:",ie),ie!=null&&ie.list&&((xs=ie==null?void 0:ie.list)==null?void 0:xs.length)>0&&(t("error"),Ce(ie.list),ze(ie.total),i(""),O(!1))}};c.useEffect(()=>{U&&N(!1)},[X.length]);const{failedTsToast:Ke}=Ns();c.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",r),r!=="pending"){const a={linkLabel:"",getShowInfo:()=>({toastTitleText:r=="error"?"Request Error":r=="timeout"?"Please check the network status.":""})};(r=="success"||r=="error")&&clearTimeout(S.current),(r=="error"||r=="timeout")&&Ke(a),n(!0)}},[r]);const{isApp:_e}=ce(),p=a=>{if(console.log("ðŸš€ ~ clickSort ~ item:",a),_e)(a==null?void 0:a.value)!==(B==null?void 0:B.value)&&(le({offset:0,order_by:`-${a==null?void 0:a.value}`}),ge("desc"),ue(a));else if((a==null?void 0:a.value)==(B==null?void 0:B.value)){le({offset:0,order_by:G=="desc"?`${a==null?void 0:a.value}`:`-${a==null?void 0:a.value}`});const k=G=="desc"?"asc":"desc";ge(k)}else le({offset:0,order_by:`-${a==null?void 0:a.value}`}),ge("desc"),ue(a)},_=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],m=_.reduce((a,k)=>(a[k.value]=k,a),{}),F=a=>{const k=a*y;le({offset:k}),Be(q=>q+1)};me();const te=c.useMemo(()=>{const a=(ye-1)*y+(X==null?void 0:X.length);return r!=="error"&&Number(Pe)>a},[Pe,ye,y]);c.useEffect(()=>(x(),S.current&&(clearTimeout(S.current),S.current=null),()=>{i(""),S.current&&(clearTimeout(S.current),S.current=null)}),[]);const v=Js({count:X.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),be=c.useRef(null);c.useEffect(()=>{let a=null;return!Y&&be.current&&(a=new IntersectionObserver(k=>{const q=k[0];q&&q.isIntersecting&&te&&!U&&(console.log("ðŸš€ ~ useEffect ~ entry:",q),F(ye))},{threshold:.5,rootMargin:"100px"}),a.observe(be.current)),()=>{a&&a.disconnect()}},[Y,ye,te,U]);const ae=Sn(G,B,p,m,_e);return e.jsxs(b,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(zs,{handleIsDisplayChecked:se,handleIsWatchList:ne,onClickIncentiveTypes:ee,handleRefresh:W,selectCoinList:H,onClickSelectCoinList:h,onDeleteSelectCoinList:z,isRefreshed:s}),e.jsx(I,{h:"1px",w:"100%",bg:"border"}),e.jsxs(b,{w:"100%",position:"relative",gap:"20px",children:[!Y&&(X==null?void 0:X.length)==0?e.jsx(ve,{type:"nodata",text:"No pools found",children:e.jsx(d,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):_e?e.jsxs(b,{w:"100%",gap:"4px",children:[e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(d,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Zs,{sortText:"Sort by",minW:"180px",currentSort:B,sortByList:_,onSortByChange:p,xlinkHref:G=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{le({offset:0,order_by:G=="desc"?`${B==null?void 0:B.value}`:`-${B==null?void 0:B.value}`});const a=G=="desc"?"asc":"desc";ge(a)}})]}),e.jsx(Xs,{rowKey:"poolAddress",dataSource:X,columns:ae,loading:Y,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(a,k)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:a=>{D(`/liquidity?poolAddress=${a.poolAddress}`,a)}})]}):Y?e.jsx(Ks,{rowKey:"poolAddress",columns:ae,dataSource:X,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):e.jsxs(b,{w:"100%",gap:"0",children:[e.jsx(I,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.56fr) minmax(0px, 1.66fr) minmax(0px, 1.4fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(136px, 1.4fr)",h:"36px",columnGap:"12px",p:"0 16px",children:ae==null?void 0:ae.map((a,k)=>e.jsx(es,{as:"div",align:"center",justify:k===0?"flex-start":"flex-end",children:a.title},a.key))}),e.jsx(I,{w:"100%",h:`${X.length*80}px`,pos:"relative",children:(we=v.getVirtualItems())==null?void 0:we.map(a=>{const k=X[a.index];return e.jsx(vn,{item:k,columns:ae,virtualRow:a,goLiquidity:D},k==null?void 0:k.poolAddress)})})]}),e.jsx(I,{ref:be,children:U?e.jsx(Vs,{size:"sm",color:"text_caption"}):""})]})]})}const Sn=(s,n,x,r,t)=>[{title:e.jsx(d,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:i=>{var l,o;return e.jsxs(u,{children:[e.jsx(Is,{poolInfo:i,symbolEllipsesDecimals:10}),(i==null?void 0:i.haveFarming)&&e.jsx(en,{}),(i==null?void 0:i.haveMining)&&e.jsx(gn,{}),(i==null?void 0:i.isVaults)&&e.jsx(hn,{}),e.jsx(un,{coinTypeA:(l=i==null?void 0:i.tokenA)==null?void 0:l.coin_type,coinTypeB:(o=i==null?void 0:i.tokenB)==null?void 0:o.coin_type})]})}},{title:e.jsx(Ne,{labelInfo:r.tvl,sortRule:s,sortBy:n,clickSort:i=>x(i)}),key:"tvlDisplay"},{title:e.jsx(Ne,{labelInfo:r.vol,sortRule:s,sortBy:n,clickSort:i=>x(i)}),key:"volume24Display"},{title:e.jsx(Ne,{labelInfo:r.fees,sortRule:s,sortBy:n,clickSort:i=>x(i)}),key:"fees24Display"},{title:e.jsx(d,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:i,farmsRewarderList:l})=>i&&(i==null?void 0:i.length)<=0&&l&&(l==null?void 0:l.length)<=0,render:({miningRewardList:i,farmsRewarderList:l})=>e.jsx(bn,{miningRewardList:i,farmsRewarderList:l})},{title:e.jsx(Ne,{labelInfo:r.totalApr,sortRule:s,sortBy:n,tooltip:{type:"apr24"},clickSort:i=>x(i),justifyContent:"flex-end"}),key:"apr24h",render:i=>e.jsx($s,{poolInfo:i,placement:t?"auto-start":"top"})},{title:e.jsx(d,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:i=>e.jsx(fn,{poolInfo:i})}],vn=({item:s,columns:n,virtualRow:x,goLiquidity:r})=>e.jsx(I,{as:"div",pos:"absolute",top:`${x.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>r(`/liquidity?poolAddress=${s.poolAddress}`,s),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.56fr) minmax(0px, 1.66fr) minmax(0px, 1.4fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(136px, 1.4fr)",_hover:{bg:"primary_opacity.10"},children:n==null?void 0:n.map((t,i)=>e.jsx(es,{align:"center",justify:i===0?"flex-start":"flex-end",children:t!=null&&t.render?t==null?void 0:t.render(s):e.jsx(d,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:s==null?void 0:s[t==null?void 0:t.key]})},t.key))}),Cn="data:image/png;base64,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",_n="/assets/pool_bg-DIChGQZi.png",kn=({posInfo:s})=>{var r,t,i,l;const[n,x]=c.useState(!1);return e.jsx(I,{p:"12px 0",onClick:o=>pe(o),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:n,children:[e.jsx(Oe,{children:e.jsx(he,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:e.jsx(d,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:$(s==null?void 0:s.totalRewardUsd,2)})})}),n&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(ns,{children:e.jsx(qe,{zIndex:"2",w:"fit-content",children:e.jsx(De,{children:e.jsxs(b,{align:"flex-start",minW:"300px",children:[((r=s==null?void 0:s.pendingFeesList)==null?void 0:r.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(u,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Fees"}),e.jsxs(d,{color:"primary",children:[" ",$(s==null?void 0:s.feeOwedUsd,2)]})]}),(t=s==null?void 0:s.pendingFeesList)==null?void 0:t.map(o=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",o),e.jsxs(u,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Me,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:Ue(o==null?void 0:o.amount,6)}),e.jsx(d,{fontSize:"12px",children:$(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address)))]}),((i=s==null?void 0:s.pendingRewarderList)==null?void 0:i.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(u,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(d,{color:"primary",children:[" ",$(s==null?void 0:s.rewarderUsd,2)]})]}),(l=s==null?void 0:s.pendingRewarderList)==null?void 0:l.map(o=>e.jsxs(u,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Me,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:Ue(o==null?void 0:o.amount,6)}),e.jsx(d,{fontSize:"12px",children:$(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address))]})]})})})})]})})};function os({posInfo:s,onClickCheckBox:n,checked:x,pageFrom:r,cursor:t="pointer"}){var C;const{getClmmPosName:i}=Os(),{posPoolsOriginalData:l}=xe(),o=c.useMemo(()=>{var T;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const w=(T=l==null?void 0:l[s==null?void 0:s.clmmPool])==null?void 0:T.index;return i(s==null?void 0:s.index,w)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,l]),{posPoolsRelatedData:g}=xe(),j=((C=g[s==null?void 0:s.posId])==null?void 0:C.displayFee)+"%";return e.jsxs(L,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(u,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(As,{poolInfo:{...s,feeDisplay:j},symbolEllipsesDecimals:10}),e.jsx(d,{fontSize:"12px",color:"primary_gray",children:o})]}),n&&e.jsx(ss,{cursor:t,checked:x||!1,onClick:()=>n(s)})]}),r=="pendingYieldModal"?e.jsxs(u,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(kn,{posInfo:s})]}):e.jsxs(u,{justify:"space-between",p:"0 16px",children:[e.jsx(d,{color:"primary_gray",children:"Liquidity"}),e.jsx(ln,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:r!="lpBurnNext"})]})]})}function An({onClose:s,currentLockItem:n}){var Q,ee,se,ne,S,W,H,A;const{currentAccount:x}=Te(),{signAndExecuteTransaction:r}=Ts(),{getBurnTxPayload:t}=on(),{getPositionBaseList:i}=ts(),{posLiquidityData:l}=xe(),[o,g]=c.useState(!1),[j,C]=c.useState(""),[T,w]=c.useState(!1),f=h=>{const y=h.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");C(y),console.log("ðŸš€ ~ inputChange ~ e:",h.target.value,h.target.value.toLowerCase()),h.target.value.toLowerCase()=="lock my liquidity forever"?w(!0):w(!1)},{getTokenAmountValue:V}=Le(),P=l[n==null?void 0:n.posId],de=V((Q=n==null?void 0:n.displayTokenA)==null?void 0:Q.coin_type,P==null?void 0:P.displayCoinAmountA,"--"),D=V((ee=n==null?void 0:n.displayTokenB)==null?void 0:ee.coin_type,P==null?void 0:P.displayCoinAmountB,"--"),M=async()=>{console.log("ðŸš€ ~ currentLockItem:",n),g(!0);try{const h=t(n);console.log("ðŸš€ ~ toBurn ~ tx:",h);const z=await r(h,{getShowInfo:y=>{var N,Y;const U={modalDescriptionText:`${(N=n==null?void 0:n.displayTokenA)==null?void 0:N.symbol} - ${(Y=n==null?void 0:n.displayTokenB)==null?void 0:Y.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",y),U}});console.log("ðŸš€ ~ toBurn ~ res:",z),z&&(await i(x==null?void 0:x.address),s()),g(!1)}catch(h){g(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",h)}};return e.jsxs(b,{w:"100%",gap:"12px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(d,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(b,{w:"100%",children:[e.jsx(os,{posInfo:n,pageFrom:"lpBurnNext"}),e.jsx(L,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(L,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(b,{gap:"16px",children:[e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsxs(u,{children:[e.jsx(Ve,{imageUrl:(se=n==null?void 0:n.displayTokenA)==null?void 0:se.logo_url,w:"20px",h:"20px",coinType:(ne=n==null?void 0:n.displayTokenA)==null?void 0:ne.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[P==null?void 0:P.displayCoinAmountA," ",(S=n==null?void 0:n.displayTokenA)==null?void 0:S.symbol]})]}),e.jsx(d,{color:"text_caption",children:$(de,2)})]}),e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsxs(u,{children:[e.jsx(Ve,{imageUrl:(W=n==null?void 0:n.displayTokenB)==null?void 0:W.logo_url,w:"20px",h:"20px",coinType:(H=n==null?void 0:n.displayTokenB)==null?void 0:H.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[P==null?void 0:P.displayCoinAmountB," ",(A=n==null?void 0:n.displayTokenB)==null?void 0:A.symbol]})]}),e.jsx(d,{color:"text_caption",children:$(D,2)})]})]})})})]}),e.jsxs(u,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(oe,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(d,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(L,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(d,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(d,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(L,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(hs,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:j,onChange:f})})]}),e.jsxs(b,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx(K,{isLoading:o,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!T||o,onClick:M,children:"Confirm"}),e.jsx(K,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function mn({onClose:s,onClickLock:n,currentLockItem:x,onClickCheckBox:r}){const{currentAccount:t,onWalletModal:i}=Te(),{fullRangePosBaseList:l,fullRangePosBaseListLoading:o}=xe();return e.jsxs(b,{w:"100%",gap:"20px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(b,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:t!=null&&t.address?o?[{},{}].map((g,j)=>e.jsx(Bs,{},j)):(l==null?void 0:l.length)>0?l==null?void 0:l.map(g=>e.jsx(os,{posInfo:g,checked:(g==null?void 0:g.posId)==(x==null?void 0:x.posId),onClickCheckBox:j=>r(j),pageFrom:"lpBurnPrev"},g==null?void 0:g.posId)):e.jsxs(L,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ve,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(d,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ve,{type:"nowallet",onboard:()=>i(!0),bg:"none",border:"none"})}),e.jsxs(b,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(K,{disabled:Object.values(x).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:n,children:"Lock Liquidity"}),e.jsx(K,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Bs=()=>e.jsxs(L,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(u,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(u,{gap:"0",children:[e.jsx($e,{size:"9"}),e.jsx($e,{size:"9"}),e.jsx(b,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(Se,{height:"4",width:"100px"})})]})}),e.jsx(I,{w:"100%",p:"16px",children:e.jsx(Se,{height:"5",width:"250px"})})]});function Tn({isOpen:s,onClose:n}){const[x,r]=c.useState(!1),[t,i]=c.useState({});c.useEffect(()=>{i({}),r(!1)},[s]);const l=g=>{(g==null?void 0:g.posId)==(t==null?void 0:t.posId)?i({}):i(g)},{isApp:o}=ce();return e.jsxs(us,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:n,isCentered:!0,children:[e.jsx(js,{}),e.jsxs(fs,{minWidth:o?"300px":"482px",children:[e.jsx(ys,{children:e.jsx(bs,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(ws,{}),e.jsxs(Ss,{p:"16px 16px 0",textAlign:"center",children:[!x&&e.jsx(mn,{onClose:n,currentLockItem:t,onClickCheckBox:g=>l(g),onClickLock:()=>r(!0)}),x&&e.jsx(An,{onClose:n,currentLockItem:t})]})]})]})}function Pn({isRefreshed:s}){var w;const{tab:n}=ms(),x=me(),[r,t]=c.useState(!1),{statisticsData:i}=Ds(),{poolListLength:l}=Ge(),{showPosListLength:o}=xe(),g=c.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",l),[{label:"Pools",value:"pools",num:l,imgInfo:{src:Qs,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:o,imgInfo:{src:Cn,w:"22px",h:"22px"}}]),[l,o]),{isApp:j}=ce(),[C,T]=c.useState(!1);return e.jsxs(b,{w:"100%",children:[e.jsxs(u,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(b,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(d,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(b,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:_n,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(ds,{wrapStyle:{alignItems:j?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(i==null?void 0:i.totalValueLocked)||"",isLoading:!i}),e.jsx(ds,{wrapStyle:{alignItems:j?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(i==null?void 0:i.cumulativeVolume)||"",isLoading:!i})]})]}),e.jsx(I,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(Ls,{statisticsData:i,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(u,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Us,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:g,currentTab:((w=g==null?void 0:g.find(f=>(f==null?void 0:f.value)===n))==null?void 0:w.label)||"Pools",handleChangeTab:f=>{x(`/pools?tab=${f.value}`)}}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[n=="positions"?e.jsx(Ms,{isOpen:C,label:e.jsx(d,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx(K,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:()=>{T(!1),t(!0)},children:"LP Burn"})}):e.jsx(K,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>x("/create-pool"),children:"Create a new pool"}),e.jsx(K,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>x("/select-pool"),children:"Add Liquidity"})]})]}),r&&e.jsx(Tn,{isOpen:r,onClose:()=>t(!1)})]})}const zn="/assets/tvl_bg-D80TUrdU.png",Bn="/assets/yield_bg-CcCC1tTK.png";function Rn({isOpen:s,claimLoading:n,onClose:x,changeClaimLoading:r}){const[t,i]=c.useState(!1),{coinPriceObj:l}=vs(),{getPosRelatedData:o,getPositionBaseList:g}=ts(),{signAndExecuteTransaction:j}=Ts(),{currentAccount:C}=Te(),{getBatchHarvestFeeAndRewardsTxPayload:T}=xn(),{getTokenAmountValue:w}=Le(),[f,V]=c.useState([]),[P,de]=c.useState(!0),[D,M]=c.useState(!0),[Q,ee]=c.useState(.01),[se,ne]=c.useState([]),[S,W]=c.useState([]),[H,A]=c.useState(""),[h,z]=c.useState(""),[y,U]=c.useState([]),{myPosYieldValue:N,posBaseList:Y,posBaseListLoading:O,posFeeDataLoading:G,posRewardsDataLoading:ge,posFeeData:B,posRewardsData:ue}=xe(),X=p=>{const _=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");p.target.value=p.target.value.replace(_,"$1"),ee(p.target.value)},Ce=()=>{(!Q||Q<.01)&&ee(.01)},Pe=O||G||ge;c.useEffect(()=>{const p=[];let _="0";const m=[];if((Y==null?void 0:Y.length)>0&&!O&&!G&&!ge){Y.forEach((v,be)=>{var Re,He,Ee,We,Fe,fe;let ae="0",we="0",a="0",k="0";const q=[],ke=[];if(((Re=Object.values(B))==null?void 0:Re.length)>0){const R=B[v==null?void 0:v.posId],E=w((He=v==null?void 0:v.displayTokenA)==null?void 0:He.coin_type,R==null?void 0:R.displayFeeOwedA,"--"),re=w((Ee=v==null?void 0:v.displayTokenB)==null?void 0:Ee.coin_type,R==null?void 0:R.displayFeeOwedB,"--");ae=J(ae).plus((R==null?void 0:R.displayFeeOwedA)||0).plus((R==null?void 0:R.displayFeeOwedB)||0).toString(),E!=="--"&&re!=="--"&&(a=J(E).plus(re).toString()),ke.push({coin_address:Ze((We=v==null?void 0:v.displayTokenA)==null?void 0:We.coin_type,!1),amount:R==null?void 0:R.displayFeeOwedA,amountUSD:E,token:v==null?void 0:v.displayTokenA},{coin_address:Ze((Fe=v==null?void 0:v.displayTokenB)==null?void 0:Fe.coin_type,!1),amount:R==null?void 0:R.displayFeeOwedB,amountUSD:re,token:v==null?void 0:v.displayTokenB})}if(((fe=Object.values(ue))==null?void 0:fe.length)>0){const R=ue[v==null?void 0:v.posId];(R==null?void 0:R.length)>0&&R.forEach(E=>{var re;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",E),we=J(we).plus(E.display_amount_owed||0).toString(),Number(E==null?void 0:E.display_amount_owed)>0){const Z=w(E==null?void 0:E.token.coin_type,E.display_amount_owed);Z!=="--"&&(k=J(k).plus(Z).toString()),q.push({coin_address:Ze((re=E==null?void 0:E.token)==null?void 0:re.coin_type,!1),amount:E.display_amount_owed,amountUSD:Z,token:E==null?void 0:E.token})}})}const Ae=J(k).plus(a).toString(),je=(J(ae).gt(0)||J(we).gt(0))&&Number(Ae)==0?"--":Ae;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Ae,je),_=J(_).plus(k).plus(a).toString(),Number(je)!==0&&m.push(v),D&&Number(je)>Number(Q)&&p.push({...v,totalRewardUsd:je,pendingRewarderList:q,pendingFeesList:ke,rewarderUsd:k,feeOwedUsd:a}),D||p.push({...v,totalRewardUsd:je,pendingRewarderList:q,pendingFeesList:ke,rewarderUsd:k,feeOwedUsd:a})}),ne(m);const F=p.filter(v=>Number(v.totalRewardUsd)!==0);W(F),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",F,S),D?(F==null?void 0:F.length)!==p.length?A(""):A("all"):(F==null?void 0:F.length)!==m.length?A(""):A("all");const te=p.sort((v,be)=>be.totalRewardUsd-v.totalRewardUsd);V(te),de(!1)}},[Q,Y,D,O,G,ge,l]);const{calculatePendingYield:ze}=Ps();c.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",S),(S==null?void 0:S.length)>0){const{total:p,rewardAndFeeList:_}=ze(S,B,ue);console.log("ðŸš€ ~ useEffect ~ total:",S,p,_),z(p),U(_)}else z(""),U([])},[S==null?void 0:S.length,B,ue]);const ye=p=>{if(console.log("ðŸš€ ~ selectItem ~ item:",p),Number(p==null?void 0:p.totalRewardUsd)<=0)return;const _=S,m=(_==null?void 0:_.filter(F=>(F==null?void 0:F.posId)!==(p==null?void 0:p.posId)))||[];_!=null&&_.some(F=>(F==null?void 0:F.posId)===(p==null?void 0:p.posId))||m.push(p),console.log("ðŸš€ ~ selectItem ~ updatedList:",m),W(m),D?(m==null?void 0:m.length)!==(f==null?void 0:f.length)?A(""):A("all"):(m==null?void 0:m.length)!==(se==null?void 0:se.length)?A(""):A("all")};c.useEffect(()=>{ee(.01),i(!1),M(!0)},[s]);const Be=()=>{if(H=="all")A(""),W([]);else{A("all");const p=S,_=Object.fromEntries(S.map(m=>[m==null?void 0:m.posId,m]));f.forEach(m=>{!_[m==null?void 0:m.posId]&&Number(m.totalRewardUsd)!==0&&p.push(m)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",_,p),W(p)}},{fetchAccountBalance:le}=pn(),Ke=async()=>{r(!0);try{const p=Object.fromEntries(S.map(te=>[te==null?void 0:te.posId,te==null?void 0:te.pendingRewarderList])),{tx:_,txb:m}=await T(S,p,C==null?void 0:C.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",_);const F=await j(m,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});console.log("ðŸš€ ~ toClaimYield ~ res:",F),F&&(le(),await g(C==null?void 0:C.address)),r(!1)}catch(p){r(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",p)}finally{x()}},{isApp:_e}=ce();return e.jsxs(us,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:x,isCentered:!0,children:[e.jsx(js,{}),e.jsxs(fs,{minWidth:_e?"300px":"446px",children:[e.jsx(ys,{children:e.jsx(bs,{fontWeight:"500",fontSize:"16px",children:t?"Claim Yield":"Details"})}),e.jsx(ws,{}),e.jsx(Ss,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(I,{children:[e.jsxs(b,{w:"100%",children:[e.jsx(I,{w:"100%",p:"0 16px",children:e.jsx(b,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(Se,{isLoaded:!Pe,children:e.jsxs(b,{gap:"4px",align:"center",children:[e.jsx(d,{color:"primary_gray",children:t?"Total Claim":"Pending Yield"}),e.jsx(d,{color:"primary",fontSize:"20px",fontWeight:"500",children:$(t?h:N,2)})]})})})}),!t&&e.jsxs(u,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(d,{color:"text_caption",children:"Position"}),e.jsxs(u,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(Ie,{isChecked:D,onChange:()=>M(!D)}),e.jsx(d,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(L,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(hs,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${Q}`,onChange:X,onBlur:Ce})})]})]}),e.jsx(b,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(f==null?void 0:f.length)>2?"16px":"20px",mr:"-4px",children:t?y==null?void 0:y.map(p=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",p),e.jsx(L,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(Me,{token:p==null?void 0:p.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{color:"text_caption",children:Ue(p==null?void 0:p.amount,6)}),e.jsxs(d,{children:["(",$(p==null?void 0:p.amountUSD,2),")"]})]})]})},p==null?void 0:p.coin_address))):(f==null?void 0:f.length)>0?f==null?void 0:f.map(p=>e.jsx(os,{posInfo:p,onClickCheckBox:_=>ye(_),pageFrom:"pendingYieldModal",cursor:Number(p==null?void 0:p.totalRewardUsd)<=0?"not-allowed":"pointer",checked:S.some(_=>(_==null?void 0:_.posId)===(p==null?void 0:p.posId))},p==null?void 0:p.posId)):P?[{},{}].map((p,_)=>e.jsx(Bs,{},_)):e.jsx(ve,{type:"nodata"})}),t?e.jsx(u,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(L,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>i(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(u,{justify:"center",gap:"4px",children:[e.jsx(oe,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(d,{children:"Back"})]})})}):e.jsx(I,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(u,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(b,{gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",children:"Amount selected"}),e.jsx(d,{color:"primary",fontSize:"18px",fontWeight:"500",children:$(h,2)})]}),e.jsxs(u,{children:[e.jsx(d,{color:"text_caption",children:"Select All"}),e.jsx(ss,{checked:H=="all",onClick:Be})]})]})})]}),t?e.jsx(K,{isLoading:n,disabled:(y==null?void 0:y.length)==0||n,w:"100%",h:"52px",fontWeight:"500",onClick:Ke,children:"Confirm"}):e.jsx(K,{disabled:Number(h)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>i(!0),children:"Claim Yield"})]})})]})]})}const gs=({yieldList:s})=>{const[n,x]=c.useState(!1),{myPosYieldValue:r}=xe(),{isApp:t}=ce();return e.jsx(b,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:t?()=>x(!n):()=>x(!1),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:n,placement:"bottom-end",children:[e.jsx(Oe,{children:e.jsx(he,{as:"button",children:e.jsx(d,{cursor:Number(r)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(r)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:$(r,2)})})}),n&&Number(r)>0&&(s==null?void 0:s.length)>0&&e.jsx(ns,{children:e.jsx(qe,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(De,{p:"0px",children:e.jsx(b,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(i=>{var l;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",i),e.jsxs(u,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(Me,{token:i==null?void 0:i.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(u,{gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:Ue(i==null?void 0:i.amount,6)}),e.jsxs(d,{fontSize:"12px",children:["(",$(i==null?void 0:i.amountUSD,2),")"]})]})]},(l=i==null?void 0:i.token)==null?void 0:l.coin_type)})})})})})]})})};function Hn(){const{currentAccount:s}=Te(),[n,x]=c.useState(!1),[r,t]=c.useState(!1),[i,l]=c.useState([]),{getTokenAmountValue:o}=Le(),{coinPriceObj:g}=vs(),{myPosYieldValue:j,setMyPosYieldValue:C,posFeeDataLoading:T,posRewardsDataLoading:w,posBaseList:f,posLiquidityData:V,posBaseListLoading:P,posLiquidityDataLoading:de,posFeeData:D,posRewardsData:M}=xe(),Q=c.useMemo(()=>{let W=0,H=0;return(f==null?void 0:f.length)>0&&(s!=null&&s.address)?(f.forEach(A=>{var U,N;const h=V[A==null?void 0:A.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",h);const z=o((U=A==null?void 0:A.displayTokenA)==null?void 0:U.coin_type,h==null?void 0:h.displayCoinAmountA),y=o((N=A==null?void 0:A.displayTokenB)==null?void 0:N.coin_type,h==null?void 0:h.displayCoinAmountB);W=J(W).plus(z).plus(y).toString(),H=J(H).plus((h==null?void 0:h.displayCoinAmountA)||0).plus((h==null?void 0:h.displayCoinAmountB)||0).toString()}),J(W).lte(0)&&J(H).gt(0)?"$--":$(W,2)):"$0"},[f,V,s,g]),ee=s!=null&&s.address?P:!1,{calculatePendingYield:se}=Ps();c.useEffect(()=>{if(!(s!=null&&s.address))C(""),l([]);else if(!P&&(f==null?void 0:f.length)<=0&&(C("0"),l([])),(f==null?void 0:f.length)>0&&(s!=null&&s.address)&&!P&&!T&&!w){const{total:W,rewardAndFeeList:H}=se(f,D,M);C(W),l(H)}},[f,P,T,w,s,g]);const ne=s!=null&&s.address?!j:!1,{isApp:S}=ce();return e.jsxs(Cs,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(u,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:zn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(Se,{isLoaded:!ee,children:e.jsx(d,{fontSize:"20px",color:"primary",children:Q})})]}),e.jsxs(u,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Bn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(Se,{isLoaded:!ne,children:S?e.jsxs(u,{gap:"20px",children:[e.jsxs(b,{align:"flex-end",children:[e.jsx(gs,{yieldList:i}),e.jsx(K,{isLoading:n,disabled:Number(j)<=0||n,w:"100px",h:"24px",onClick:()=>t(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(j)>0&&e.jsx(oe,{xlinkHref:"#icon-icon_spread",onClick:()=>t(!0)})]}):e.jsxs(u,{onClick:()=>t(!0),children:[e.jsx(gs,{yieldList:i}),Number(j)>0&&e.jsx(oe,{xlinkHref:"#icon-icon_spread"}),e.jsx(K,{isLoading:n,disabled:Number(j)<=0||n,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(Rn,{isOpen:r,claimLoading:n,onClose:()=>t(!1),changeClaimLoading:W=>x(W)})]})}function En({poolInfo:s}){var g,j,C,T,w,f;const n=me(),{posPoolsRelatedData:x,posApiPoolData:r}=xe(),t=(g=r[s==null?void 0:s.clmmPoolAddress])==null?void 0:g.haveFarming,i=(((C=x[(j=s==null?void 0:s.list[0])==null?void 0:j.posId])==null?void 0:C.displayFee)||"--")+"%",[l,o]=c.useState(!0);return e.jsxs(b,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(Cs,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>o(!l),children:[e.jsx(As,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:i,...s},haveName:!0}),e.jsxs(u,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(u,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(d,{color:"primary_gray",children:"Current Price"}),e.jsx(cn,{symbolEllipsesDecimals:10,posId:(T=s==null?void 0:s.list[0])==null?void 0:T.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),t&&e.jsxs(u,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:V=>{pe(V),n("/farms")},border:"1px solid",borderColor:"transparent",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(Qe,{src:"/images/icon_farms.png",w:"20px",h:"20px"}),e.jsx(d,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(oe,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[e.jsx(K,{onClick:V=>{pe(V),n(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(L,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(u,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(d,{fontSize:"12px",color:"primary",children:[(w=s==null?void 0:s.list)==null?void 0:w.length," ",((f=s==null?void 0:s.list)==null?void 0:f.length)>1?"Positions":"Position"]}),e.jsx(oe,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:l?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),l&&e.jsx(b,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((V,P)=>e.jsx(sn,{positionInfo:V},P))})]})}function Wn({isRefreshed:s,handleIsRefreshed:n}){var A;const{getStatistics:x}=ks(),{fetchTokenPrices:r}=Le(),{currentAccount:t,onWalletModal:i}=Te(),{getPositionBaseList:l,getPosRelatedData:o}=ts(),{posRewardsData:g,posBaseList:j,setShowPosListLength:C,setMyPosYieldValue:T,posBaseListLoading:w,posBaseListGroupByPool:f}=xe(),[V,P]=c.useState([]),{getNotifiPositionTransfer:de}=an(),D=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),T(""),x(),H(),t!=null&&t.address&&ne(t==null?void 0:t.address),setTimeout(()=>{n(!0)},1e3)};rn({onRpcChange:()=>{t!=null&&t.address&&ne(t==null?void 0:t.address)}});const[M,Q]=c.useState([]),ee=h=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",h),Q(z=>[...z,h])},se=h=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",h),Q(z=>z.filter(y=>(y==null?void 0:y.coin_type)!==(h==null?void 0:h.coin_type)))};c.useEffect(()=>{T(""),t!=null&&t.address?ne(t==null?void 0:t.address):C("")},[t==null?void 0:t.address]);const ne=async h=>{await l(h)};c.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ posBaseList:",j),(j==null?void 0:j.length)>0&&o(j)},[j]);const{notifiClient:S,notifiSources:W}=Ys();c.useEffect(()=>{de(j,S,W)},[j,S,W]),c.useEffect(()=>{var N,Y;const h=(N=M[0])==null?void 0:N.coin_type,z=(Y=M[1])==null?void 0:Y.coin_type,y=Object.values(f).filter(O=>h&&z?O.tokenA.coin_type==h&&O.tokenB.coin_type==z||O.tokenA.coin_type==z&&O.tokenB.coin_type==h:h?O.tokenA.coin_type==h||O.tokenB.coin_type==h:O);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(f),y),P(y);const U=y.reduce((O,G)=>O+(G.list?G.list.length:0),0);t!=null&&t.address&&C(U.toString())},[M,f]);const H=()=>{const h=[];if((j==null?void 0:j.length)>0){j.map(y=>{h.push(y==null?void 0:y.coinTypeA),h.push(y==null?void 0:y.coinTypeB);const U=g[y==null?void 0:y.posId];U==null||U.map(N=>{J(N==null?void 0:N.display_amount_owed).gt(0)&&h.push(N==null?void 0:N.coin_address)})});const z=Array.from(new Set(h));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",j,h,z),r(z)}};return c.useEffect(()=>{H()},[j==null?void 0:j.length,g]),c.useEffect(()=>(x(),()=>{C("")}),[]),c.useEffect(()=>{w&&C("")},[w]),e.jsxs(b,{gap:"20px",w:"100%",children:[e.jsx(zs,{isPools:!1,handleRefresh:D,selectCoinList:M,onClickSelectCoinList:ee,onDeleteSelectCoinList:se}),e.jsx(I,{h:"1px",w:"100%",bg:"border"}),e.jsx(Hn,{}),t!=null&&t.address?w?[{},{},{},{}].map((h,z)=>e.jsx(nn,{},z)):((A=Object.values(V))==null?void 0:A.length)>0?Object.values(V).map((h,z)=>e.jsx(En,{poolInfo:h},z)):e.jsx(ve,{type:"nodata",text:"No liquidity positions"}):e.jsx(ve,{type:"nowallet",onboard:()=>i(!0)})]})}function Pt(){const{tab:s}=ms(),[n,x]=c.useState(!0),r=t=>{x(t)};return e.jsxs(b,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(Pn,{isRefreshed:n}),(s=="pools"||s===void 0)&&e.jsx(wn,{isRefreshed:n,handleIsRefreshed:r}),s=="positions"&&e.jsx(Wn,{isRefreshed:n,handleIsRefreshed:r})]})}export{Pt as default};
