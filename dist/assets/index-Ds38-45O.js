const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DepositMode-C9ZWhz-S.js","assets/vendor-DXHkIl66.js","assets/useGetPythLastPrice-B_djGy3u.js","assets/VaultsAprBlock-CFWgDqc2.js","assets/swapWidget-B3FU05CN.js","assets/index-kyUQkV0u.js","assets/index-CteIxbgC.css","assets/useWrapPoolData-CShxRWjZ.js","assets/useFavoritePool-g1BGOkIQ.js","assets/useGetPoolList-C1CvDnhh.js","assets/useToken-DX7Pn68W.js","assets/useTokenBalance-BzrxWKLg.js","assets/useAccountBalance-B_xeHqrX.js","assets/useTransaction-B4SsAvX4.js","assets/useTrack-DtugX5rf.js","assets/useSigner-D-QeL5Td.js","assets/global-HfANoqcU.js","assets/msafe-oYBkW7LJ.js","assets/index-BT2bG9uf.js","assets/v4-C6aID195.js","assets/useFindBestRouting-B2fq98Bc.js","assets/useSwapHelper-ChsEPMW1.js","assets/HTextLabelBox-MEowE9sl.js","assets/AvailableCapacity-5ZFVxjDl.js","assets/TotalAmount-D4YoLrf6.js","assets/CheckBox-DQX8O2AC.js","assets/useInterval-Cb1zlf7x.js","assets/TradeInputGroup-ZMEoDzmO.js","assets/_getAllKeysIn-DOF9IPDG.js","assets/WithdrawMode-CujDvN67.js"])))=>i.map(i=>d[i]);
import{ab as Z,j as e,H as z,C as pe,I as xe,T as y,a as c,F as A,f as R,P as de,h as he,m as be,n as me,V as P,X as fe,Y as ge,Z as je,a1 as ve,a0 as we,a7 as q,u as w}from"./vendor-DXHkIl66.js";import{a as H,F as ye,G as Se,i as U,d,y as M,a3 as Ce,Z as Pe,B as _e,j as Re,_ as Y}from"./index-kyUQkV0u.js";import{b as De,c as Ae,u as ze,a as We,V as Ie,d as Le,v as Me,e as Oe}from"./VaultsAprBlock-CFWgDqc2.js";import{u as Ee}from"./useAccountBalance-B_xeHqrX.js";import{P as Ve}from"./PoweredByHaedal-990R--7x.js";import{S as $e}from"./Slippage-BTNZBMV0.js";import{R as Fe}from"./RefreshButton-CTCjyZ_x.js";import{u as qe}from"./useInterval-Cb1zlf7x.js";import{Z as Ue,u as Ze}from"./useDisplayTickPrice-y4xjQAUw.js";import{V as He}from"./VTextLabelBox-Cmezufwl.js";const at=({tooltip:m,...t})=>{const o=Z(),{isApp:a}=H();return e.jsx(z,{w:"20px",h:"20px",onClick:i=>{Se(i),a||o("/farms")},...t,children:e.jsx(ye,{placement:"top",tooltip:m||e.jsx(y,{fontSize:"12px",children:"Farm rewards available"}),children:e.jsx(pe,{children:e.jsx(xe,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_farms.png"})})})})},Ye="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",Ge=(m,t)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${t} via ${m} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Ne(m){const{displayTokenA:t,displayTokenB:o,currentActionToken:a,setCurrentActionToken:i,isCheckedZAP:n,setIsCheckedZAP:S,currentActionTab:l,setAssetAction:h,setCurrentActionTab:b,isUnstableVault:r,autoRefresh:p}=m,{stakeProtocolName:j}=De(t==null?void 0:t.coin_type),{setAmountInputA:_,setAmountInputB:C}=Ae(),x=c.useMemo(()=>{if(l=="Deposit"){const u=[{label:(t==null?void 0:t.symbol)+" only",value:(t==null?void 0:t.symbol)+" only",action:t==null?void 0:t.coin_type,afterIcon:n&&!r?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:r?`You can add liquidity in this pool with only ${t==null?void 0:t.symbol}.`:Ye},{label:`${t==null?void 0:t.symbol}+${o==null?void 0:o.symbol}`,value:`${t==null?void 0:t.symbol}+${o==null?void 0:o.symbol}`,action:"both",afterIcon:n&&!r?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:r&&n?"You can add any value you want from both assets.":""},{label:(o==null?void 0:o.symbol)+" only",value:(o==null?void 0:o.symbol)+" only",action:o==null?void 0:o.coin_type,afterIcon:n&&!r?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:r?`You can add liquidity in this pool with only ${o==null?void 0:o.symbol}.`:Ge(j,t==null?void 0:t.symbol)}];return r?u:u.filter(W=>W.action!=="both")}else return[{label:(t==null?void 0:t.symbol)+" only",value:(t==null?void 0:t.symbol)+" only",action:t==null?void 0:t.coin_type},{label:(o==null?void 0:o.symbol)+" only",value:(o==null?void 0:o.symbol)+" only",action:o==null?void 0:o.coin_type}]},[t,o,l,r,n,j]),f=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}],[g,v]=c.useState(0);qe({interval:1e3,callback:()=>{v(g+1),g>=20&&s()}});const s=()=>{v(0),p()},D=c.useMemo(()=>l=="Deposit"?r?"customDeposit":"deposit":"withdraw",[l,r]);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{width:"100%",alignItems:"center",children:[e.jsx(U,{type:"borderTab",wrapStyle:{w:"100%",h:"54px",border:"none",bg:"none"},itemStyle:{fontSize:"14px",mr:"28px",fontWeight:"500"},tabList:f,currentTab:l,handleChangeTab:u=>{b(u.value),h(n?t==null?void 0:t.coin_type:"both"),i((t==null?void 0:t.symbol)+" only")}}),e.jsx($e,{slippageType:"vaults",compact:!0}),e.jsx(Fe,{handleRefresh:s,w:"28px",h:"28px",minW:"28px",minH:"28px",innerStyle:{w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"}})]}),e.jsxs(A,{width:"100%",alignItems:"center",justify:"space-between",mt:"8px",children:[e.jsxs(y,{children:[l," Amounts"]}),e.jsx(Ue,{isCheckedZAP:n,zapText:l=="Deposit"?"Zap In":"Zap Out",tooltipType:D,zapSwitchChange:u=>{_(""),C(""),S(!n),h(u?t==null?void 0:t.coin_type:"both"),i((t==null?void 0:t.symbol)+" only")}})]}),n?e.jsx(U,{type:"outlineTab",wrapStyle:{w:{base:"100%"},h:"42px",padding:"4px",marginTop:"8px"},itemStyle:{w:`${100/x.length}%`,fontSize:"14px",borderRadius:"8px"},tabList:x,currentTab:a,handleChangeTab:u=>{i(u.value),h(u.action)}}):null]})}function Be(m){const{displayTokenASymbol:t,displayTokenBSymbol:o,minPrice:a,maxPrice:i,currPrice:n}=m,[S,l]=c.useState(0),[h,b]=c.useState(0),r=c.useRef(null),p=c.useRef(null);c.useEffect(()=>{const x=()=>{r.current&&l(r.current.offsetWidth)},f=()=>{p.current&&b(p.current.offsetWidth)};x(),f();const g=new ResizeObserver(x),v=new ResizeObserver(f);return r.current&&g.observe(r.current),p.current&&v.observe(p.current),()=>{r.current&&g.unobserve(r.current),p.current&&v.unobserve(p.current)}},[]);const j=c.useMemo(()=>{if(i==="âˆž")return"0px";if(n&&a&&i){if(d(n).lessThanOrEqualTo(i)&&d(n).greaterThanOrEqualTo(a)){const x=d(n).sub(a).div(d(i).sub(d(a))).toString();return`${d(S).mul(x).toFixed(0)}px`}if(d(n).lt(a))return"-36px";if(d(n).gt(i))return"calc(100% + 36px)"}return"0px"},[n,a,i,S]),_=c.useMemo(()=>{const x=j.replace("px","");return Number(x)-h/2+"px"},[j,h]),{isApp:C}=H();return e.jsx(e.Fragment,{children:a!=="undefined"&&i!=="undefined"?e.jsx(z,{w:"100%",height:"60px",background:"primary_opacity.10",borderRadius:"16px",p:"0px 0px 8px",children:e.jsxs(R,{w:"100%",padding:a&&d(n).lt(a)?"0 40px 0 60px":i&&d(n).gt(i)?"0 60px 0 40px":"0 40px",position:"relative",children:[e.jsx(y,{whiteSpace:"nowrap",position:"absolute",top:"20px",left:a&&d(n).lt(a)?"60px":"40px",fontSize:"12px",color:"text_caption",children:M(a)}),e.jsx(R,{w:"100%",position:"relative",height:"14px",ref:r,bgImage:"url('/images/img_range@2x.png')",bgSize:"100% 14px",bgPosition:"center",children:e.jsxs(de,{isLazy:!0,placement:"top",trigger:C?"click":"hover",autoFocus:!1,returnFocusOnClose:!1,gutter:4,children:[e.jsx(he,{children:e.jsx(R,{as:"button",children:e.jsx(R,{bg:"#fff",borderRadius:"8px",w:"4px",height:"15px",position:"absolute",top:"50%",transform:"translateY(-50%)",left:j,ml:"-2px",zIndex:"5"})})}),e.jsx(be,{w:"fit-content",bg:"none",border:"none",ref:p,position:"absolute",top:"-32px !important",left:_,zIndex:"5",children:e.jsx(me,{fontSize:"12px",w:"fit-content",bg:"none",border:"none",children:e.jsx(y,{whiteSpace:"nowrap",fontSize:"12px",color:"primary",children:M(n)})})})]})}),e.jsx(y,{whiteSpace:"nowrap",position:"absolute",top:"20px",right:i&&d(n).gt(i)?"60px":"40px",fontSize:"12px",color:"text_caption",children:M(i)})]})}):null})}function Qe(m){var f,g,v,s,D;const{displayTokenA:t,displayTokenB:o,feeDisplay:a,clmmPool:i,isReverse:n,minPrice:S,maxPrice:l,isUnstableVault:h,currPrice:b}=m,{vaultStatsObj:r}=ze(),{getVaultsStats:p}=We(),[j,_]=c.useState("");c.useEffect(()=>{var u;Ce(r)&&r[i]?_((u=r[i])==null?void 0:u.vaultsApyDisplay):p()},[r,i]);const{displayMaxPrice:C,displayMinPrice:x}=Ze({minPrice:S,maxPrice:l,changeSide:n});return e.jsxs(P,{width:"calc(100% + 32px)",padding:"0 16px",alignItems:"left",paddingBottom:"16px",borderBottom:"1px solid",borderColor:"border",children:[e.jsxs(A,{children:[e.jsx(Pe,{coinAIconUrl:t==null?void 0:t.logo_url,coinBIconUrl:o==null?void 0:o.logo_url,imageStyle:{w:"32px",h:"32px"},imgBoxStyle:{w:"32px",h:"32px"}}),e.jsxs(A,{marginLeft:"8px",justifyContent:"space-between",alignItems:"center",width:"100%",children:[e.jsx(R,{children:e.jsxs(A,{alignItems:"center",children:[e.jsx(y,{fontSize:"16px",color:"text_caption",children:`${t==null?void 0:t.symbol} - ${o==null?void 0:o.symbol}`}),e.jsx(_e,{w:"unset",p:"3px 12px 2px",borderRadius:"12px",bg:"none",borderColor:"primary",marginLeft:"8px",children:e.jsx(y,{fontSize:"12px",color:"primary",children:a})})]})}),e.jsx(A,{flexDirection:"column",children:e.jsx(He,{wrapStyle:{gap:"2px",alignItems:"flex-end !important"},title:"APY",titleStyle:{color:"primary",fontSize:"12px"},valueTooltip:e.jsx(Ie,{vaultsLstApyDisplay:((f=r[i])==null?void 0:f.vaultsLstApyDisplay)||"",vaultsApyDisplay:((g=r[i])==null?void 0:g.vaultsApyDisplay)||"",vaultsTotalApyDisplay:((v=r[i])==null?void 0:v.vaultsTotalApyDisplay)||"",vaultsAprDisplay:((s=r[i])==null?void 0:s.vaultsAprDisplay)||"",category:(D=r[i])==null?void 0:D.category}),value:j||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})})]})]}),e.jsx(Be,{displayTokenASymbol:o==null?void 0:o.symbol,displayTokenBSymbol:t==null?void 0:t.symbol,minPrice:x,maxPrice:C,currPrice:b})]})}const Xe=c.lazy(()=>Y(()=>import("./DepositMode-C9ZWhz-S.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28]))),Je=c.lazy(()=>Y(()=>import("./WithdrawMode-CujDvN67.js"),__vite__mapDeps([29,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,27,28])));function lt(m){const{isOpen:t,setIsOpen:o,displayTokenA:a,displayTokenB:i,feeDisplay:n,clmmPool:S,vaultId:l,isReverse:h,isUnstableVault:b}=m,[r,p]=c.useState("Deposit"),[j,_]=c.useState((a==null?void 0:a.symbol)+" only"),[C,x]=c.useState("both"),[f,g]=c.useState(!1),v=Me.useGetContractVaultInfo(b),{apiVaultInfo:s,getApiVaultInfo:D}=Le(l),{fetchVaultInfoFromContract:u,contractVault:W,lpTokenInfo:O,fetchClmmPoolFromContract:E,holdCoinAmounts:G,maxPrice:N,currPrice:V,minPrice:B,fetchVaultBalance:$,isBalanceLoading:Q,vaultTvl:X,hardCapUSD:J,depositRatio:K,refreshPythPrice:T,calculateVaultTvlLoading:k,maxCapNum:ee,quoteCoin:te,baseCoin:oe,holdLpAmount:se,availableCapacityWithQuoteCoin:re,availableCapacityWithBaseCoin:ie,gtAumLimit:ne}=v(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse,!0),{fetchAccountBalance:ae}=Ee(),le=Z(),{currentAccount:I,isOpenWalletModal:ce}=Re(),L=()=>{var F;ae(),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:57 ~ autoRefresh ~ apiVaultInfo:",s),(s==null?void 0:s.category)=="haedal"&&$(I==null?void 0:I.address,l,(F=s==null?void 0:s.tokenA)==null?void 0:F.decimals),s&&E(s.clmmPoolAddress,!0),l&&(u(l,!0),D(l,!0))};c.useEffect(()=>{g(!1),x("both")},[r]),c.useEffect(()=>{s&&E(s.clmmPoolAddress,!0)},[s==null?void 0:s.clmmPoolAddress]),c.useEffect(()=>{l&&u(l,!0)},[l]);const{setVaultCoinAmounts:ue}=Oe();return c.useEffect(()=>{ue({coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"})},[]),e.jsxs(fe,{isCentered:!0,isOpen:t&&!ce,onClose:()=>{o(!1),p("Deposit")},children:[e.jsx(ge,{}),e.jsx(je,{width:{base:"100%",lg:"420px"},children:e.jsx(ve,{p:"0 0 8px",children:e.jsxs(P,{width:"100%",children:[e.jsxs(P,{width:"100%",p:"6px 16px 16px",mb:"-16px",gap:"0",borderRadius:"12px",sx:{backgroundImage:"url('/images/vault_modal_bg@2x.png')",backgroundPosition:"top center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[e.jsxs(z,{h:"36px",w:"100%",mb:"12px",children:[e.jsx(y,{color:"text_caption",fontWeight:"500",fontSize:"16px",children:"Auto Vault"}),e.jsx(we,{})]}),e.jsx(Qe,{displayTokenA:a,displayTokenB:i,feeDisplay:n,clmmPool:S,isReverse:h,minPrice:B,maxPrice:N,currPrice:h?d(1).div(d(V)).toString():V,isUnstableVault:b}),e.jsx(Ne,{displayTokenA:a,displayTokenB:i,currentActionTab:r,setCurrentActionTab:p,currentActionToken:j,setCurrentActionToken:_,isCheckedZAP:f,setIsCheckedZAP:g,setAssetAction:x,isUnstableVault:b,autoRefresh:L})]}),e.jsxs(P,{w:"100%",p:"0 16px",children:[e.jsx(c.Suspense,{fallback:e.jsxs(q,{w:"100%",height:"292px",children:[e.jsxs(P,{align:"flex-end",w:"100%",h:"108px",p:"16px",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",children:[e.jsx(w,{w:"100%",height:"20px"}),e.jsx(w,{w:"40%",height:"20px"})]}),e.jsxs(P,{align:"flex-end",w:"100%",h:"108px",p:"16px",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",children:[e.jsx(w,{w:"100%",height:"20px"}),e.jsx(w,{w:"40%",height:"20px"})]}),e.jsx(R,{w:"100%",h:"52px",mb:"8px",borderRadius:"12px",children:e.jsx(w,{w:"100%",height:"52px",borderRadius:"12px"})})]}),children:r=="Deposit"&&e.jsx(Xe,{isUnstableVault:b,displayTokenA:a,displayTokenB:i,vaultId:l,isReverse:h,assetAction:C,isCheckedZAP:f,currentActionTab:r,autoRefresh:L,apiVaultInfo:s,quoteCoin:te,lpTokenInfo:O,baseCoin:oe,maxCapNum:ee,availableCapacityWithQuoteCoin:re,availableCapacityWithBaseCoin:ie,hardCapUSD:J,vaultTvl:X,depositRatio:K,calculateVaultTvlLoading:k,contractVault:W,refreshPythPrice:T,gtAumLimit:ne},l)}),e.jsx(c.Suspense,{fallback:e.jsxs(q,{w:"100%",height:"292px",children:[e.jsxs(P,{align:"flex-end",w:"100%",h:"108px",p:"16px",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",children:[e.jsx(w,{w:"100%",height:"20px"}),e.jsx(w,{w:"60%",height:"20px"})]}),e.jsxs(P,{align:"flex-end",w:"100%",h:"108px",p:"16px",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",children:[e.jsx(w,{w:"100%",height:"20px"}),e.jsx(w,{w:"40%",height:"20px"})]}),e.jsx(R,{w:"100%",h:"52px",mb:"8px",borderRadius:"12px",children:e.jsx(w,{w:"100%",height:"52px",borderRadius:"12px"})})]}),children:r=="Withdraw"&&e.jsx(Je,{isUnstableVault:b,displayTokenA:a,displayTokenB:i,vaultId:l,isReverse:h,assetAction:C,isCheckedZAP:f,autoRefresh:L,apiVaultInfo:s,lpTokenInfo:O,holdCoinAmounts:G,fetchVaultBalance:$,isBalanceLoading:Q,holdLpAmount:se})}),e.jsxs(z,{borderTop:"1px solid",borderColor:"border",width:"calc(100% + 32px)",padding:"12px 16px 4px",justifyContent:b?"space-between":"center",children:[e.jsx(Ve,{mt:"0",category:b?"Haedal":"Cetus"}),e.jsx(y,{fontSize:"12px",_hover:{color:"primary"},whiteSpace:"nowrap",cursor:"pointer",onClick:()=>le(`/vaults-detail/${l}/${s==null?void 0:s.category}`),children:"Vault Details >"})]})]})]})})})]})}export{at as F,lt as V};
//# sourceMappingURL=index-Ds38-45O.js.map
