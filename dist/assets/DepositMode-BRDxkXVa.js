import{a as d,j as o,f as _e,V as O,T as z,v as Se}from"./vendor-DXHkIl66.js";import{u as ke}from"./useGetPythLastPrice-CkO0L687.js";import{v as Y,l as ve,k as je,c as Re}from"./VaultsAprBlock-Cc_O_ENb.js";import{u as we}from"./global-DhYiu20h.js";import{u as Ae,A as Me,V as De,R as Fe}from"./AvailableCapacity-qzYBQ6fq.js";import{j as Le,a as Pe,z as v,B as We}from"./index-COrObqhs.js";import{u as Be}from"./useInterval-Cb1zlf7x.js";import{T as Oe}from"./TradeInputGroup-F01zgmGz.js";import{v as q}from"./v4-C6aID195.js";import"./swapWidget-UE5Kw3h4.js";import"./useWrapPoolData-fdYmV8CX.js";import"./useFavoritePool-CH5NkXpI.js";import"./useGetPoolList-B9bUsMZ5.js";import"./useToken-tdeKOG5n.js";import"./useTokenBalance-DKaSilR5.js";import"./useAccountBalance-JIpp1bm5.js";import"./useTransaction-19_gbWik.js";import"./useTrack-pnnm1Ell.js";import"./useSigner-C6u4-fR7.js";import"./msafe-oYBkW7LJ.js";import"./index-BgfP77Mo.js";import"./useFindBestRouting-B2G_AVeI.js";import"./useSwapHelper-BEAhr1pE.js";import"./HTextLabelBox-BHTpNjoy.js";import"./TotalAmount-CcqMNWAV.js";import"./CheckBox-rv3qIDs9.js";import"./_getAllKeysIn-BvQOU9sJ.js";function mt(I){var K,X;const{isUnstableVault:j,displayTokenA:i,displayTokenB:r,vaultId:E,isReverse:p,assetAction:l,isCheckedZAP:g,autoRefresh:ee,apiVaultInfo:e,quoteCoin:n,baseCoin:R,maxCapNum:te,availableCapacityWithQuoteCoin:_,availableCapacityWithBaseCoin:w,hardCapUSD:H,vaultTvl:T,depositRatio:oe,calculateVaultTvlLoading:se,contractVault:m,gtAumLimit:A,lpTokenInfo:S}=I;console.log("ðŸš€ðŸš€ðŸš€ ~ DepositMode.tsx:66 ~ VaultDepositMode ~ lpTokenInfo:",S);const ae=Y.useVaultsAdd(j),ie=Y.useAddButtonStatus(j),{currentAccount:t,onWalletModal:re}=Le(),b=d.useMemo(()=>l==(n==null?void 0:n.coin_type),[l,n]),{amountInputA:u,amountInputB:c,balanceInfoA:h,balanceInfoB:x,amountValueA:le,amountValueB:ne,preCalculateLoading:f,fixAmountA:y,inputTotalValue:pe,handleAmountInputChange:N,calculateResult:a,showOnlySideTips:k,doAddAction:V,overHardtop:G,zapNumError:M,calculateLpLoading:de,inputTotalValueError:D,percentage:F,setPercentage:me,setIsSlider:L,debouncedPreCalculateDepositValue:U,isSlider:ue,setUuid:Z}=ae(l,ee,E,p?r:i,p?i:r,p,g,H,T,A,_,w,n,R,b),{btnText:ce,btnDisabled:he}=ie(g,l,!0,u,c,y,h==null?void 0:h.balanceFormat,x==null?void 0:x.balanceFormat,i,r,M,a,G,D),{vaultsSlippage:xe}=we(),{amountLimit:ge}=ve(Number(xe),a==null?void 0:a.ft_amount,!1),{lpRate:be}=je(a==null?void 0:a.ft_amount,j?m==null?void 0:m.lp_token_treasury:m==null?void 0:m.total_supply),{isApp:fe}=Pe(),{pythPriceMap:P}=Re(),ye=d.useMemo(()=>{if(P)return P},[P]),{getPythLastPrice:$}=ke();d.useEffect(()=>{if(ue){const s=q();Z(s),U(F,s,b?_:w,b?n:R)}},[ye]),Be({interval:20*1e3,callback:()=>{$([v(e.tokenA.coin_type),v(e.tokenB.coin_type)])}});const Q=d.useRef(!1);d.useEffect(()=>{var s,C;!Q.current&&((s=e==null?void 0:e.tokenA)!=null&&s.coin_type)&&((C=e==null?void 0:e.tokenB)!=null&&C.coin_type)&&($([v(e.tokenA.coin_type),v(e.tokenB.coin_type)]),Q.current=!0)},[(K=e==null?void 0:e.tokenA)==null?void 0:K.coin_type,(X=e==null?void 0:e.tokenB)==null?void 0:X.coin_type]);const{isCheckedAcceptWalletObj:ze,isCheckedDontRemindWalletObj:W}=Ae(),[J,B]=d.useState(!1),Ce=d.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:211 ~ isShowRiskModal ~ isCheckedDontRemindWalletObj[currentAccount?.address]:",W[t==null?void 0:t.address]),!W[t==null?void 0:t.address]),[W,t==null?void 0:t.address]);return o.jsxs(o.Fragment,{children:[o.jsx(_e,{w:"100%",position:"relative",children:o.jsx(Oe,{onClick:()=>{},from:{wrapStyle:{h:"108px"},balance:(h==null?void 0:h.balanceFormat)||"",value:u,amountValue:u&&le,loading:(p?y:!y)&&f&&!g,hideSelf:l!=="both"&&l!==(i==null?void 0:i.coin_type),onChange:s=>{(e==null?void 0:e.category)=="haedal"&&L(!1),N(s,!p,!0,c)},selectable:!1,placeholder:"0.0",token:i,onFocusChange:s=>{}},to:{wrapStyle:{h:"108px"},balance:(x==null?void 0:x.balanceFormat)||"",value:c,amountValue:c&&ne,loading:(p?!y:y)&&f&&!g,onFocusChange:s=>{},onChange:s=>{(e==null?void 0:e.category)=="haedal"&&L(!1),N(s,p,!0,u)},selectable:!1,hideSelf:l!=="both"&&l!==(r==null?void 0:r.coin_type),placeholder:"0.0",token:r},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})}),M&&F>0&&(u||c)?o.jsx(O,{w:"100%",pb:a||k?"0px":"20px",alignItems:"start",gap:"20px",children:o.jsx(z,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,o.jsx(Se,{width:"100%",height:"52px",borderRadius:"12px",marginBottom:"8px",fontWeight:"500",fontSize:M?fe?"12px":"15px":"16px",isLoading:f,disabled:he||f||(t==null?void 0:t.address)&&(A||G),onClick:()=>{t!=null&&t.address?Ce?B(!0):V():re(!0)},children:ce||(g?"Zap In":"Deposit")}),(e==null?void 0:e.category)=="haedal"&&o.jsx(We,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"16px",mb:"8px",children:o.jsx(Me,{depositRatio:oe,percentage:F,hardCapUSD:H,vaultTvl:T,calculateVaultTvlLoading:se,quoteCoin:n,maxCapNum:te,gtAumLimit:A,availableCapacityWithQuoteCoin:_,onChange:s=>{L(!0),me(s);const C=q();Z(C),U(s,C,b?_:w,b?n:R)}},E)}),D&&o.jsx(O,{w:"100%",alignItems:"start",children:o.jsx(z,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(a||k)&&!D&&(u||c)&&o.jsxs(O,{w:"100%",pb:"20px",alignItems:"start",gap:"0",children:[l!=="both"&&k&&o.jsx(z,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:a?"20px":"0",children:k}),a&&o.jsx(De,{amountLimit:ge,inputTotalValue:pe,preCalculateLoading:f,calculateLpLoading:de,lpRate:be,lpDecimals:S==null?void 0:S.decimals,poolName:`${i==null?void 0:i.symbol} - ${r==null?void 0:r.symbol}`,labelColor:"primary_gray"})]}),J&&o.jsx(Fe,{isOpen:J,setIsOpen:B,continueFunc:()=>{B(!1),V()}})]})}export{mt as default};
//# sourceMappingURL=DepositMode-BRDxkXVa.js.map
