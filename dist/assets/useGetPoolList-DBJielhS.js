import{a as M,b as H,p as ie,m as be}from"./api-data-utils-D656F-wl.js";import{d as u,aK as Z,bx as _e,aQ as o,aa as ue,aX as E,s as L,a6 as p,bc as ee,u as xe,dp as ce}from"./index-D49RffYW.js";const ge={100:2,500:10,1e3:20,2500:60,1e4:200,2e4:220},ae=Object.values(ge),de=["0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_usdc_coin::CELER_USDC_COIN","0xcf72ec52c0f8ddead746252481fb44ff6e8485a39b803825bde6b00d77cdb0bb::coin::COIN","0xe32d3ebafa42e6011b87ef1087bbc6053b499bf6f095807b9013aff5a6ecd7bb::coin::COIN","0xc3f8927de33d3deb52c282a836082a413bc73c6ee0bd4d7ec7e3b6b4c28e9abf::coin::COIN","0x909cba62ce96d54de25bec9502de5ca7b4f28901747bbf96b76c2e63ec5f1cba::coin::COIN","0xb231fcda8bbddb31f2ef02e6161444aec64a514e2c89279584ac9806ce9cf037::coin::COIN","0xc060006111016b8a020ad5b33834984a437aaa7d3c74c18e09a95d48aceab08c::coin::COIN","0x2053d08c1e2bd02791056171aab0fd12bd7cd7efad2ab8f6b9c8902f14df2ff2::ausd::AUSD","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_usdt_coin::CELER_USDT_COIN","0xf16e6b723f242ec745dfd7634ad072c42d5c1d9ac9d62a39c381303eaa57693a::fdusd::FDUSD","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_dai_coin::CELER_DAI_COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_wsteth_coin::CELER_WSTETH_COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_frax_coin::CELER_FRAX_COIN","0xce7ff77a83ea0cb6fd39bd8748e2ec89a3f41e8efdc3f4eb123e0ca37b184db2::buck::BUCK","0x2::sui::SUI","0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","0x7016aae72cfc67f2fadf55769c0a7dd54291a583b63051a5ed71081cce836ac6::sca::SCA","0x5ca17430c1d046fae9edeaa8fd76c7b4193a00d764a0ecfa9418d733ad27bc1e::scallop_sca::SCALLOP_SCA","0xaf8cd5edc19c4512f4259f0bee101a40d41ebed738ade5874359610ef8eeced5::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_weth_coin::CELER_WETH_COIN","0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0x027792d9fed7f9844eb4839566001bb6f6cb4804f66aa2da6fe1ee242d896881::coin::COIN","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_wbtc_coin::CELER_WBTC_COIN","0xb7844e289a8410e50fb3ca48d69eb9cf29e27d223ef90353fe1bd8e27ff8f3f8::coin::COIN","0xb848cce11ef3a8f62eccea6eb5b35a12c4c2b1ee1af7755d02d7bd6218e8226f::coin::COIN","0xdbe380b13a6d0f5cdedd58de8f04625263f113b3f9db32b3e1983f49e2841676::coin::COIN","0x1e8b532cca6569cab9f9b9ebc73f8c13885012ade714729aa3b450e0339ac766::coin::COIN","0x6081300950a4f1e2081580e919c210436a1bed49080502834950d31ee55a2396::coin::COIN","0xa198f3be41cda8c07b3bf3fee02263526e535d682499806979a111e88a5a8d0f::coin::COIN","0x66f87084e49c38f76502d17f87d17f943f183bb94117561eb573e075fdc5ff75::coin::COIN","0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0xe4239cd951f6c53d9c41e25270d80d31f925ad1655e5ba5b543843d4a66975ee::SUIP::SUIP","0x1d58e26e85fbf9ee8596872686da75544342487f95b1773be3c9a49ab1061b19::suia_token::SUIA_TOKEN","0x3a5143bb1196e3bcdfab6203d1683ae29edd26294fc8bfeafe4aaa9d2704df37::coin::COIN","0x202591744d54ee4f4af736ef3b8508f3d46d982c36747d9587032bd549122179::luck::LUCK","0xd2013e206f7983f06132d5b61f7c577638ff63171221f4f600a98863febdfb47::toce::TOCE","0x934692a74595c4f5a0c026130eb2143eea6fc313742f5d7dd9e45fd6ddbb00f1::suime::SUIME","0x94e7a8e71830d2b34b3edaa195dc24c45d142584f06fa257b73af753d766e690::celer_fxs_coin::CELER_FXS_COIN","0x6907963ca849faff0957b9a8269a7a07065e3def2eef49cc33b50ab946ea5a9f::coin::COIN","0x361dd589b98e8fcda9a7ee53b85efabef3569d00416640d2faa516e3801d7ffc::TOKEN::TOKEN","0x9a7ca7b6de5b6e9a4dadec42fada7cd84068aebd7adbd1faeb713622c4628ca9::meadow::MEADOW","0x32d5056aaac1be1f9ae44c1d0728792255a05f1475d458287ee463cc26806ca0::mover_usd::MOVER_USD","0x9fe1780ac27ec50c9c441fb31822f5c148f841f09ee455c6a0daf7c634a30a27::aifrens::AIFRENS","0xbff8dc60d3f714f678cd4490ff08cabbea95d308c6de47a150c79cc875e0c7c6::sbox::SBOX","0x9a5502414b5d51d01c8b5641db7436d789fa15a245694b24aa37c25c2a6ce001::scb::SCB","0x4e56b39acd75721999cf833062dfb77b1d51e749b02d90f049a5688e21919a64::prl::PRL","0x76cb819b01abed502bee8a702b4c2d547532c12f25001c9dea795a5e631c26f1::fud::FUD","0xc44d97a4bc4e5a33ca847b72b123172c88a6328196b71414f32c3070233604b2::slp::SLP","0x8f16fb4ed30b4ff29cec3ddf82ed2ecae3836d20dbd31c8ba9e85d1ef6bfc172::sbbg::SBBG","0xb6baa75577e4bbffba70207651824606e51d38ae23aa94fb9fb700e0ecf50064::kimchi::KIMCHI","0x9c6d76eb273e6b5ba2ec8d708b7fa336a5531f6be59f326b5be8d4d8b12348a4::coin::COIN"];function we(f,i){const g=de.indexOf(f),e=de.indexOf(i);return g===-1&&e===-1?!0:g!==-1&&e===-1?!1:g===-1&&e!==-1?!0:g>e}const he=(f,i,g,e)=>{if(e)return{percentA:"50",percentB:"50"};if(u(f).eq(0)&&u(i).eq(0))return{percentA:"0",percentB:"0"};const C=u(i).plus(u(f).mul(g)),A=u(i).div(C).mul(100),c=u(100).sub(A),x=c.lt(.01)&&c.gt(0)?"<0.01":Z(c.toString(),2),n=A.lt(.01)&&A.gt(0)?"<0.01":Z(A.toString(),2);return{percentA:x,percentB:n}},Ce=f=>{var e;if(!f)return"";const i=f==null?void 0:f.split(",");return(e=i==null?void 0:i.map(C=>_e(C,!1)))==null?void 0:e.join(",")},Ae=f=>f==="0"||!f?"∞":f==="∞"?"0":u(1).div(f).toString(),ye=f=>f==="∞"?"∞":ue(f,6),De=f=>ye(Ae(f)),fe=(f,i)=>{for(let g=0;g<ae.length;g++){const e=ae[g];if(i==="min"){if(f==o.getMinIndex(e))return!0}else if(f==o.getMaxIndex(e))return!0}return!1},Pe=(f,i)=>{const g=fe(f,"min"),e=fe(i,"max");return!!(g&&e)};function Se(){const f=e=>{var n,b,t;const C=!!(e!=null&&e.is_display_rewarder&&(e!=null&&e.rewarder_display1||e!=null&&e.rewarder_display2||e!=null&&e.rewarder_display3));let A=u(0);const c=[],x=[];if(C){const s=((t=(b=(n=e==null?void 0:e.object)==null?void 0:n.rewarder_manager)==null?void 0:b.fields)==null?void 0:t.rewarders)||[],d=(e==null?void 0:e.rewarder_apr)||[];s==null||s.forEach((r,S)=>{var a,_,w,h,I;const y=u((a=r==null?void 0:r.fields)==null?void 0:a.emissions_per_second).mul(p.pow(2,-64)).toString();if(e!=null&&e[`rewarder_display${S+1}`]&&u(y).gt(0)){const v=M(d[S]);A=A.add(v);const P=(I=E((h=(w=(_=r==null?void 0:r.fields)==null?void 0:_.reward_coin)==null?void 0:w.fields)==null?void 0:h.name))==null?void 0:I.source_address;c.push({coinType:P,emissionsEveryDay:ie(y)}),x.push({coinType:P,apr:v,aprDisplay:M(v,!0)})}})}return{haveMining:C&&c.length>0,miningRewardList:c,miningAprList:x,miningAprTotal:A.toString()}},i=e=>{var a,_,w,h,I,v,P,k,F,O,T,m,l,B;const C=(e==null?void 0:e.is_forward)===!1,A=!!(e!=null&&e.stable_farming&&((a=e==null?void 0:e.stable_farming)!=null&&a.show_rewarder_1||(_=e==null?void 0:e.stable_farming)!=null&&_.show_rewarder_2||(w=e==null?void 0:e.stable_farming)!=null&&w.show_rewarder_3)&&((h=e==null?void 0:e.stable_farming)!=null&&h.stable_rewarder)),c=[];let x="",n="",b="",t="",s=0,d=0,r="",S="",y=u(0);if(A){x=(I=e==null?void 0:e.stable_farming)==null?void 0:I.stable_farming_pool;const N=(v=e==null?void 0:e.stable_farming)==null?void 0:v.stable_rewarder;N==null||N.forEach((D,$)=>{const U=u(D==null?void 0:D.amount_second);if(e!=null&&e.stable_farming[`show_rewarder_${$+1}`]&&U.gt(0)){const K=M(D==null?void 0:D.apr);y=y==null?void 0:y.add(K),c.push({coinType:E(D.coin).source_address,emissionsEveryDay:U.mul(86400).toDP(2,p.ROUND_HALF_UP).toString()})}}),n=(P=e==null?void 0:e.stable_farming)==null?void 0:P.tvl,b=L((k=e==null?void 0:e.stable_farming)==null?void 0:k.tvl,"$"),t=L(u(y).mul(100).toString(),"%"),s=(F=e==null?void 0:e.stable_farming)==null?void 0:F.effective_tick_lower,d=(O=e==null?void 0:e.stable_farming)==null?void 0:O.effective_tick_upper;const j=ee.tickIndexToPrice(s,(T=e==null?void 0:e.coin_a)==null?void 0:T.decimals,(m=e==null?void 0:e.coin_b)==null?void 0:m.decimals).toString(),R=ee.tickIndexToPrice(d,(l=e==null?void 0:e.coin_a)==null?void 0:l.decimals,(B=e==null?void 0:e.coin_b)==null?void 0:B.decimals).toString();r=C?u(1).div(R).toString():j,S=C?u(1).div(j).toString():R}return{haveFarming:A,farmsRewarderList:c,farmsApr:y.toString(),farmingAprDisplay:t,farmsStatedTvl:n,farmsStatedTvlDisplay:b,farmsEffectiveTickLower:s,farmsEffectiveTickUpper:d,displayFarmsEffectMinPrice:r,displayFarmsEffectMaxPrice:S,farmsPoolAddress:x}};return{wrapPoolData:(e,C=!1)=>{var G,X,q,V,z,Q,Y;const A=e==null?void 0:e.object,c=(G=e==null?void 0:e.object)==null?void 0:G.index,x=e.address,n=(e==null?void 0:e.is_forward)===!1,b={...e==null?void 0:e.coin_a,coin_type:(q=E((X=e==null?void 0:e.coin_a)==null?void 0:X.address))==null?void 0:q.source_address},t={...e==null?void 0:e.coin_b,coin_type:(z=E((V=e==null?void 0:e.coin_b)==null?void 0:V.address))==null?void 0:z.source_address},s=n?t:b,d=n?b:t,r=`${s==null?void 0:s.symbol} - ${d==null?void 0:d.symbol}`,S=u(e.fee).mul(1e4).toString(),y=u(e.fee).mul(100).toString()+"%",a=e==null?void 0:e.tick_spacing,_=L(e.pure_tvl_in_usd||0),w=L(e.vol_in_usd_24h||0),h=L(e.fee_24_h||0),I=M((Q=e==null?void 0:e.apr)==null?void 0:Q.fee_apr_24h),v=M((Y=e==null?void 0:e.apr)==null?void 0:Y.fee_apr_24h,!0),{haveMining:P,miningRewardList:k,miningAprList:F,miningAprTotal:O}=f(e),{haveFarming:T,farmsRewarderList:m,farmsApr:l,farmingAprDisplay:B,farmsStatedTvl:N,farmsStatedTvlDisplay:j,farmsEffectiveTickLower:R,farmsEffectiveTickUpper:D,displayFarmsEffectMinPrice:$,displayFarmsEffectMaxPrice:U,farmsPoolAddress:K}=i(e),W=H([I,O]),te=u(W).gt(1e4)?">1,000,000%":L(u(W).mul(100).toString(),"%"),se=H([W,l]),ne=H([I,l],!0),re=H([W,l],!0),J=e.is_vaults;return C?{poolAddress:x,name:r,isReverse:n,tokenA:b,tokenB:t,displayTokenA:s,displayTokenB:d,haveMining:P,miningRewardList:null,miningAprList:null,haveFarming:T,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:S,fee:e.fee,feeDisplay:y,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:J,isLocalData:C,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:R,farmsEffectiveTickUpper:D,displayFarmsEffectMinPrice:$,displayFarmsEffectMaxPrice:U,farmsPoolAddress:K,tickSpacing:a,index:c,object:A}:{poolAddress:x,name:r,isReverse:n,tokenA:b,tokenB:t,displayTokenA:s,displayTokenB:d,haveMining:P,miningRewardList:k,miningAprList:F,haveFarming:T,farmsRewarderList:m,farmsApr:l,farmingAprDisplay:B,feeApr:I,feeAprDisplay:v,miningAprTotal:O,feeAndMiningAprDisplay:te,totalAprDisplay:re,fee:e.fee,feeRate:S,feeDisplay:y,tvlDisplay:_,tvl:e.pure_tvl_in_usd||0,volume24Display:w,fees24Display:h,isVaults:J,farmsStatedTvl:N,farmsStatedTvlDisplay:j,feeAndFarmsApr:se,feeAndFarmsAprDisplay:ne,farmsEffectiveTickLower:R,farmsEffectiveTickUpper:D,displayFarmsEffectMinPrice:$,displayFarmsEffectMaxPrice:U,farmsPoolAddress:K,tickSpacing:a,index:c,object:A}}}}function le(){const{fetchByApi:f}=xe(),{wrapPoolData:i}=Se(),g=async c=>{var x;try{const n={...c},b=Ce(c==null?void 0:c.coin_type);b&&(n.coin_type=b);const t=await f(be,"GET",n);if(t!=null&&t.lp_list)return{list:(x=t==null?void 0:t.lp_list)==null?void 0:x.map(d=>i(d)),total:t==null?void 0:t.total}}catch{return await e(c)}return{list:[],total:0}},e=async c=>{var x,n,b,t;try{const s=await fetch("/data/pools.json").then(d=>d.json());if((x=s==null?void 0:s.data)!=null&&x.lp_list){const d=(n=s==null?void 0:s.data)==null?void 0:n.lp_list;let r=d;if(c!=null&&c.pool&&(r=d==null?void 0:d.filter(a=>{var _;return((_=c==null?void 0:c.pool)==null?void 0:_.toLocaleLowerCase())==(a==null?void 0:a.address.toLocaleLowerCase())})),c!=null&&c.coin_type){const a=(t=(b=c==null?void 0:c.coin_type)==null?void 0:b.split(","))==null?void 0:t.map(_=>E(_).source_address);r=d==null?void 0:d.filter(_=>{var I,v;const w=E((I=_==null?void 0:_.coin_a)==null?void 0:I.address).source_address,h=E((v=_==null?void 0:_.coin_b)==null?void 0:v.address).source_address;return(a==null?void 0:a.length)>1&&a.includes(w)&&a.includes(h)?!0:!!((a==null?void 0:a.length)===1&&(a.includes(w)||a.includes(h)))})}c!=null&&c.is_vaults&&(r=d==null?void 0:d.filter(a=>a==null?void 0:a.is_vaults)),c!=null&&c.has_farming&&!(c!=null&&c.is_vaults)&&!(c!=null&&c.has_mining)&&!(c!=null&&c.no_incentives)&&(r=d==null?void 0:d.filter(a=>a==null?void 0:a.has_farming));const S=r.splice(0,40);return{list:S==null?void 0:S.map(a=>i(a,!0)),total:(r==null?void 0:r.length)||0}}}catch(s){console.error("getLocalJsonPoolList Error:",s)}return{list:[],total:0}},C=c=>ce(c)==="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":ce(c);return{getPoolList:g,getLocalJsonPoolList:e,getLocalJsonPoolAddress:async(c,x)=>{try{const n=C(c),b=C(x),t=await fetch("/data/all-pools.json").then(s=>s.json());if(t)return t[`${n.toLocaleLowerCase()}-${b.toLocaleLowerCase()}`]||t[`${b.toLocaleLowerCase()}-${n.toLocaleLowerCase()}`]}catch(n){console.error("getLocalJsonPoolAddress Error:",n)}return[]}}}export{ge as T,De as a,Ae as b,he as c,Se as d,Pe as e,fe as f,ye as g,we as h,le as u};
