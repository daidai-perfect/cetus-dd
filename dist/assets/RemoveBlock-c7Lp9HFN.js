<<<<<<< HEAD:dist/assets/RemoveBlock-c7Lp9HFN.js
import{a as d,j as o,f as Ve,V as Ae,q as De,H as K,T as H,p as Je,S as Ut,aa as wt,I as Ht,R as Gt,aq as Tt,P as zt,h as Xt,m as Jt,n as Kt,a1 as Qt,a2 as Yt,a3 as Bt,a4 as It}from"./vendor-BFGDaAdA.js";import{ak as Pt,av as dt,b0 as ei,j as kt,Q as Rt,o as it,a8 as vt,aJ as jt,d as b,b1 as ti,k as Ke,l as et,V as Ct,t as pt,am as Ze,x as ke,a2 as Ge,r as Fe,a as ut,b2 as Lt,I as Pe,c as gt,e as ii,Z as We,$ as si,f as xt,a1 as oi,q as Ie,B as mt,C as ni,P as ai}from"./index-ChSVVHaJ.js";import{u as li}from"./useTokenBalance-D943AjPe.js";import{u as Qe}from"./global-jK9B4_lU.js";import{v as tt,u as ri,M as ci,S as di}from"./usePriceImpact-BcGZX8m-.js";import{D as pi}from"./DepositRatio-C6F0gF13.js";import{F as ui}from"./FreshProgressV2-DeDOre2e.js";import{d as mi,c as gi,e as xi}from"./useGetPoolList-Cf87pFZm.js";import{E as yt}from"./ErrorTips-3iAafdyK.js";import{a as yi,u as hi}from"./useTransaction-BbmVBjAH.js";import{f as bi,a as st,d as qt,g as fi}from"./usePositionList-CQEFjGgG.js";import{b as Zt,a as ot,c as ht,u as _i}from"./useNotifiSubscription-BB1HBC_N.js";import{f as bt}from"./index-BmEYB-eP.js";import{u as Ai}from"./useAccountBalance-xCFNREy3.js";import{u as Ft}from"./index-zvNes5JD.js";import{u as Si}from"./useToken-DnukIxF2.js";import{u as wi}from"./usePosAdd-Dm3omEQQ.js";import{M as rt}from"./msafe-oYBkW7LJ.js";import{T as Ti}from"./TradeInputGroup-DXz0vdlf.js";import{A as ki}from"./index-C4qWJUp8.js";import{u as Ri,R as ft}from"./ExpendItem-DEfRHsFF.js";var vi=/\s/;function ji(t){for(var i=t.length;i--&&vi.test(t.charAt(i)););return i}var Ci=/^\s+/;function Li(t){return t&&t.slice(0,ji(t)+1).replace(Ci,"")}var _t=NaN,qi=/^[-+]0x[0-9a-f]+$/i,Zi=/^0b[01]+$/i,Fi=/^0o[0-7]+$/i,Wi=parseInt;function At(t){if(typeof t=="number")return t;if(Pt(t))return _t;if(dt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=dt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Li(t);var s=Zi.test(t);return s||Fi.test(t)?Wi(t.slice(2),s?2:8):qi.test(t)?_t:+t}var ct=function(){return ei.Date.now()},Ei="Expected a function",Mi=Math.max,Ni=Math.min;function Vi(t,i,s){var e,g,x,a,n,_,T=0,W=!1,q=!1,k=!0;if(typeof t!="function")throw new TypeError(Ei);i=At(i)||0,dt(s)&&(W=!!s.leading,q="maxWait"in s,x=q?Mi(At(s.maxWait)||0,i):x,k="trailing"in s?!!s.trailing:k);function R(u){var L=e,E=g;return e=g=void 0,T=u,a=t.apply(E,L),a}function c(u){return T=u,n=setTimeout(Z,i),W?R(u):a}function m(u){var L=u-_,E=u-T,Q=i-L;return q?Ni(Q,x-E):Q}function l(u){var L=u-_,E=u-T;return _===void 0||L>=i||L<0||q&&E>=x}function Z(){var u=ct();if(l(u))return U(u);n=setTimeout(Z,m(u))}function U(u){return n=void 0,k&&e?R(u):(e=g=void 0,a)}function A(){n!==void 0&&clearTimeout(n),T=0,e=_=g=n=void 0}function S(){return n===void 0?a:U(ct())}function C(){var u=ct(),L=l(u);if(e=arguments,g=this,_=u,L){if(n===void 0)return c(_);if(q)return clearTimeout(n),n=setTimeout(Z,i),R(_)}return n===void 0&&(n=setTimeout(Z,i)),a}return C.cancel=A,C.flush=S,C}function $i({tokens:t,current:i,onSelect:s}){const e=d.useMemo(()=>t==null?void 0:t.map(a=>({label:a==null?void 0:a.symbol,value:a==null?void 0:a.coin_type})),[t]),g=d.useMemo(()=>{var a;return(a=e==null?void 0:e.filter(n=>(n==null?void 0:n.value)===(i==null?void 0:i.coin_type)))==null?void 0:a[0]},[e,i==null?void 0:i.coin_type]),x=a=>{var _;const n=(_=t==null?void 0:t.filter(T=>(T==null?void 0:T.coin_type)===(a==null?void 0:a.value)))==null?void 0:_[0];s(n)};return o.jsx(Ve,{w:"100%",mb:"8px",children:o.jsx(kt,{wrapStyle:{w:"100%",h:"48px",borderRadius:"12px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"8px",fontWeight:"500"},type:"outlineTab",currentTab:g==null?void 0:g.label,tabList:e,handleChangeTab:x})})}const Oi=(t,i)=>({currentTokens:[],setCurrentTokens:s=>{t(()=>({currentTokens:s}))},zapAmount:"",setZapAmount:s=>{t(()=>({zapAmount:s}))},currentZapToken:void 0,setCurrentZapToken:s=>{t(()=>({currentZapToken:s}))},zapAmountRate:"",setZapAmountRate:s=>{t(()=>({zapAmountRate:s}))},zapTokenBalance:void 0,setZapTokenBalance:s=>{t(()=>({zapTokenBalance:s}))},isPreLoading:!1,setIsPreLoading:s=>{t(()=>({isPreLoading:s}))},preDepositeData:void 0,setPreDepositeData:s=>{t(()=>({preDepositeData:s,isPreLoading:!1}))},zapApiPool:void 0,setZapApiPool:s=>{t(()=>({zapApiPool:s}))},lower:0,setLower:s=>{t(()=>({lower:s}))},upper:0,setUpper:s=>{t(()=>({upper:s}))},liquidity:"",setLiquidity:s=>{t(()=>({liquidity:s}))},zapCurrPriceData:{},setZapCurrPriceData:s=>{t(()=>({zapCurrPriceData:s}))},zapSlideValue:0,setZapSlideValue:s=>{t(()=>({zapSlideValue:Number(s==="--"?0:s)}))},posOriginAmounts:{},setPosOriginAmounts:s=>{t(()=>({posOriginAmounts:s}))},resetZapData:()=>{t(()=>({zapAmount:"",zapAmountRate:"",lower:0,upper:0,preDepositeData:void 0,isPreLoading:!1,liquidity:"",zapSlideValue:0,posOriginAmounts:{}}))}}),Ye=Rt(Oi);function Di(t,i,s,e,g,x,a,n,_,T){const{currentTokens:W,setCurrentTokens:q,zapAmount:k,setZapAmount:R,currentZapToken:c,setCurrentZapToken:m,zapAmountRate:l,setZapAmountRate:Z,setZapTokenBalance:U,zapTokenBalance:A,setPreDepositeData:S,setIsPreLoading:C,setZapApiPool:u,lower:L,upper:E,setLower:Q,setUpper:I,setZapCurrPriceData:v,resetZapData:de,setLiquidity:be,setZapSlideValue:V,setPosOriginAmounts:p}=Ye(),{zapSlippage:F}=Qe(),{balanceInfo:j}=li(c),{getTokenAmountValue:M}=it(),[pe,ye]=d.useState("");d.useEffect(()=>{Q(e)},[e]),d.useEffect(()=>{I(g)},[g]),d.useEffect(()=>{be(n||"")},[n]),d.useEffect(()=>{V(_||0)},[_]),d.useEffect(()=>{p({coinAmountA:T==null?void 0:T.coinAmountA,coinAmountB:T==null?void 0:T.coinAmountB})},[T]),d.useEffect(()=>{var Y,G;if(i!=null&&i.poolAddress&&s){const ne=(Y=i==null?void 0:i.tokenA)==null?void 0:Y.decimals,P=(G=i==null?void 0:i.tokenB)==null?void 0:G.decimals,ae=vt.sqrtPriceX64ToPrice(new jt(s),ne,P).toString();v({currentPrice:ae,currentSqrtPrice:s})}},[s,i==null?void 0:i.poolAddress]),d.useEffect(()=>{let Y=[];i!=null&&i.poolAddress&&(Y=[i==null?void 0:i.displayTokenA,i==null?void 0:i.displayTokenB],m(i==null?void 0:i.displayTokenA)),q(Y),u(i)},[i==null?void 0:i.poolAddress]);const Re=Y=>{R(Y)},ue=Y=>{m(Y),R("")};return d.useEffect(()=>{let Y;k&&(c!=null&&c.coin_type)&&(Y=M(c==null?void 0:c.coin_type,k)),Z(Y||"")},[k,c==null?void 0:c.coin_type]),d.useEffect(()=>{var Y;if(t==="Deposit")U(j);else{const G=(c==null?void 0:c.coin_type)===((Y=i==null?void 0:i.tokenA)==null?void 0:Y.coin_type);U(G?{balanceFormat:x}:{balanceFormat:a})}},[t,j,x,a,c==null?void 0:c.coin_type,i==null?void 0:i.poolAddress]),d.useEffect(()=>()=>{de()},[]),{currentTokens:W,zapAmount:k,zapAmountRate:l,handleChangeAmount:Re,currentZapToken:c,handleChangeZapToken:ue,zapTokenBalance:A,zapSlippage:F}}function Ui({action:t,apiPoolInfo:i,currentSqrtPrice:s,lowerTick:e,upperTick:g,onlyAmountA:x,onlyAmountB:a,liquidity:n,slideValue:_,currentPosLiquidityData:T}){const{currentTokens:W,currentZapToken:q,handleChangeZapToken:k,zapAmount:R,zapAmountRate:c,handleChangeAmount:m,zapTokenBalance:l}=Di(t,i,s,e,g,x,a,n,_,T);return d.useEffect(()=>{t==="Withdraw"&&b(R).gt((l==null?void 0:l.balanceFormat)||"0")&&m(l==null?void 0:l.balanceFormat)},[R,t,l==null?void 0:l.balanceFormat]),o.jsxs(Ae,{w:"100%",children:[o.jsx($i,{tokens:W,current:q,onSelect:k}),o.jsx(ti,{wrapStyle:{h:"108px"},placeholder:"0.0",value:R,onChange:m,balance:(l==null?void 0:l.balanceFormat)||"",amountValue:c,token:q,needRemainBalance:t!=="Withdraw",balanceLabel:t==="Withdraw"?"Available":void 0})]})}const Hi=(t,i)=>({fromAmount:"",setFromAmount:s=>{t(()=>({fromAmount:s}))},fromAmountValue:"",setFromAmountValue:s=>{t(()=>({fromAmountValue:s}))},toAmount:"",setToAmount:s=>{t(()=>({toAmount:s}))},toAmountValue:"",setToAmountValue:s=>{t(()=>({toAmountValue:s}))},liquidityAmount:"",setLiquidityAmount:s=>{t(()=>({liquidityAmount:s}))},tokenMaxA:"",setTokenMaxA:s=>{t(()=>({tokenMaxA:s}))},tokenMaxB:"",setTokenMaxB:s=>{t(()=>({tokenMaxB:s}))},byAmountIn:!0,setByAmountIn:s=>{t(()=>({byAmountIn:s}))},isTokenA:!0,setIsTokenA:s=>{t(()=>({isTokenA:s}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:s=>{t(()=>({percentMap:s}))},isFullRange:!1,setIsFullRange:s=>{t(()=>({isFullRange:s}))},fromToken:void 0,setFromToken:s=>{t(()=>({fromToken:s}))},fromTokenLock:!1,setFromTokenLock:s=>{t(()=>({fromTokenLock:s}))},toToken:void 0,setToToken:s=>{t(()=>({toToken:s}))},toTokenLock:!1,setToTokenLock:s=>{t(()=>({toTokenLock:s}))},totalAmount:void 0,setTotalAmount:s=>{t(()=>({totalAmount:s}))},autoStakePosition:!1,setAutoStakePosition:s=>{t(()=>({autoStakePosition:s}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:s=>{t(()=>({isFarmRewardsRange:s}))},useZapIn:!1,setUseZapIn:s=>{t(()=>({useZapIn:s}))},confirmModalOpen:!1,setConfirmModalOpen:s=>{t(()=>({confirmModalOpen:s}))},nftOpen:!1,setNftOpen:s=>{t(()=>({nftOpen:s}))},relatedPosId:"",setRelatedPosId:s=>{t(()=>({relatedPosId:s}))},resetAddLiquidity:()=>{t(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0,useZapIn:!1,nftOpen:!1,relatedPosId:""}))}}),Wt=Rt(Hi);function Et(t="Deposit"){var ve,je;const{zapAmount:i,currentZapToken:s,zapAmountRate:e,zapTokenBalance:g,isPreLoading:x,preDepositeData:a,zapApiPool:n,setIsPreLoading:_,lower:T,upper:W,liquidity:q,zapCurrPriceData:k,setPreDepositeData:R,zapSlideValue:c}=Ye();console.log("ðŸš€ ~ useZapSubmit ~ zapCurrPriceData:",k);const{currentAccount:m,onWalletModal:l}=Ke(),{setConfirmModalOpen:Z}=Wt(),U=et("zap"),{zapSlippage:A,slippage:S}=Qe(),[C,u]=d.useState(""),[L,E]=d.useState(!1),{getTokenPrice:Q}=it(),I=Q((ve=n==null?void 0:n.tokenA)==null?void 0:ve.coin_type),v=Q((je=n==null?void 0:n.tokenB)==null?void 0:je.coin_type),de=d.useMemo(()=>{if(I&&v)return b(I.price).div(v.price).toString()},[I==null?void 0:I.price,v==null?void 0:v.price]),be=d.useMemo(()=>{const y={text:t==="Withdraw"?"Zap Out":"Zap In",disabled:!1};return m!=null&&m.address?!i||i&&!+i?(y.text="Enter an amount",y.disabled=!0,y):b(i).gt((g==null?void 0:g.balanceFormat)||0)?(y.disabled=!0,y.text=`Insufficient ${Ct(g==null?void 0:g.symbol,10)} Balance`,y):((b(e).gt(1e4)||b(e).gt(0)&&b(e).lt(1e-4))&&(y.disabled=!0),y):(y.text="Connect Wallet",y.disabled=!1,y)},[m==null?void 0:m.address,i,s==null?void 0:s.coin_type,x,t,g==null?void 0:g.balanceFormat]),V=Vi(()=>{m?Z(!0):l(!0)},300,{leading:!0,trailing:!1}),p=()=>{const y=a==null?void 0:a.amount_a,h=a==null?void 0:a.amount_b,r=n==null?void 0:n.tokenA,w=n==null?void 0:n.tokenB,$=n==null?void 0:n.displayTokenA,le=n==null?void 0:n.displayTokenB,ee=Fe(n!=null&&n.isReverse?h:y,n!=null&&n.isReverse?w==null?void 0:w.decimals:r==null?void 0:r.decimals),te=Fe(n!=null&&n.isReverse?y:h,n!=null&&n.isReverse?r==null?void 0:r.decimals:w==null?void 0:w.decimals);return{amountA:y,amountB:h,tokenA:r,tokenB:w,displayTokenA:$,displayTokenB:le,dispalyAmountA:ee,dispalyAmountB:te}},F=()=>{const{displayTokenA:y,displayTokenB:h,dispalyAmountA:r,dispalyAmountB:w}=p();return{getShowInfo:(le,ee)=>{const te=!r&&!w?`Add ${r} ${y==null?void 0:y.symbol} and ${w} ${h==null?void 0:h.symbol}`:r?w?"Add Liquidity":`Add ${w} ${h==null?void 0:h.symbol}`:`Add ${r} ${y==null?void 0:y.symbol}`,X={modalDescriptionText:te,toastTitleText:te};if(le==="success"){let re=r,se=w;ee&&(re=Ge(ee,y)||r,se=Ge(ee,h)||w);const me=!r&&!w?`Add ${re} ${y==null?void 0:y.symbol} and ${se} ${h==null?void 0:h.symbol}`:!r&&w?`Add ${re} ${y==null?void 0:y.symbol}`:!w&&r?`Add ${se} ${h==null?void 0:h.symbol}`:"Add Liquidity";X.toastDescriptionContent=me,X.modalDescriptionText=me,X.toastTitleText="Supplied Successful"}return X}}},j=async(y,h,r,w)=>{console.log("ðŸš€ ~ getZapDepositTx ~ isFarm:",r);const{tokenA:$,tokenB:le}=p(),ee={deposit_obj:a,pool_id:n==null?void 0:n.poolAddress,coin_type_a:$==null?void 0:$.coin_type,coin_type_b:le==null?void 0:le.coin_type,tick_lower:y,tick_upper:h,slippage:Number(S),swap_slippage:Number(A)};w&&(ee.pos_obj=w),r&&(ee.farms_pool_id=n==null?void 0:n.farmsPoolAddress),console.log("getZapTx buildDepositPayload params: ",ee);const te=await U.Zap.buildDepositPayload(ee);return console.log("ðŸš€ ~ getZapTx ~ tx:",te),te},M=(y,h)=>{const{displayTokenA:r,displayTokenB:w,dispalyAmountA:$,dispalyAmountB:le}=p();return{getShowInfo:(te,X)=>{const re=`Withdraw ${ke(i,s==null?void 0:s.decimals)} ${s==null?void 0:s.symbol}`,se={modalDescriptionText:re,toastTitleText:re};return te==="success"&&(X&&(Ge(X,r),Ge(X,w)),se.toastDescriptionContent="",se.modalDescriptionText="",se.toastTitleText="Remove Liquidity Successful"),se}}},pe=async(y,h,r,w,$,le)=>{console.log("ðŸš€ ~ getZapWithdrawTx ~ isFarm:",le),console.log("ðŸš€ ~ useZapSubmit ~ getZapWithdrawTx preDepositeData:",a);const{tokenA:ee,tokenB:te}=p(),X={withdraw_obj:a,pool_id:n==null?void 0:n.poolAddress,pos_id:y,close_pos:(a==null?void 0:a.burn_liquidity)===h,collect_fee:!0,collect_rewarder_types:$,coin_type_a:ee==null?void 0:ee.coin_type,coin_type_b:te==null?void 0:te.coin_type,tick_lower:r,tick_upper:w,slippage:Number(S),swap_slippage:Number(A)};return le&&(X.farms_pool_id=n==null?void 0:n.farmsPoolAddress),console.log("ðŸš€ ~ useZapSubmit ~ getZapWithdrawTx params:",X),await U.Zap.buildWithdrawPayload(X)},ye=d.useRef({}),Re=d.useRef(null),ue=d.useRef("");d.useEffect(()=>{ye.current={currentZapToken:s,zapApiPool:n,zapAmount:i,currentSqrtPrice:k==null?void 0:k.currentSqrtPrice,lower:T,upper:W,liquidity:q,zapSlippage:A,zapAmountRate:e,marketPrice:de}},[s==null?void 0:s.coin_type,n==null?void 0:n.poolAddress,i,k==null?void 0:k.currentSqrtPrice,T,W,q,A,e,de]);const Y=d.useMemo(()=>!!(s!=null&&s.decimals&&b(i).mul(Math.pow(10,s==null?void 0:s.decimals)).eq(1)),[s==null?void 0:s.decimals,i]),G=async y=>{var N,J,D,z,Le;console.log("ðŸš€ ~ preZapIn ~ preZapIn:",G);const{currentZapToken:h,zapApiPool:r,zapAmount:w,currentSqrtPrice:$,lower:le,upper:ee,liquidity:te,zapSlippage:X,marketPrice:re}=ye.current;_(!0);const me=(h==null?void 0:h.coin_type)===((N=r==null?void 0:r.tokenA)==null?void 0:N.coin_type)?"OnlyCoinA":"OnlyCoinB",Ce=Ze(b(w).mul(Math.pow(10,h==null?void 0:h.decimals)).toString(),0);console.log("ðŸš€ ~ preZapIn ~ options.zapSlippage:",S,X);const Se={pool_id:r==null?void 0:r.poolAddress,tick_lower:le,tick_upper:ee,current_sqrt_price:$,slippage:Number(S),swap_slippage:Number(X),mark_price:re};console.log("ðŸš€ ~ preZapIn ~ options123:",Se);const fe={mode:me,coin_amount:Ce,coin_type_a:(J=r==null?void 0:r.tokenA)==null?void 0:J.coin_type,coin_type_b:(D=r==null?void 0:r.tokenB)==null?void 0:D.coin_type,coin_decimal_a:(z=r==null?void 0:r.tokenA)==null?void 0:z.decimals,coin_decimal_b:(Le=r==null?void 0:r.tokenB)==null?void 0:Le.decimals,max_remain_rate:.01};console.log("ðŸš€ ~ preZapIn ~ modeOptions:",fe);let _e;try{_e=await U.Zap.preCalculateDepositAmount(Se,fe),console.log("ðŸš€ ~ preZapIn ~ res:",_e)}catch(ce){console.log("ðŸš€ ~ preZapIn ~ error:",ce),E(!0)}y===ue.current&&R(_e),_(!1)},ne=async y=>{var Se,fe,_e,N,J;_(!0);const{currentZapToken:h,zapApiPool:r,zapAmount:w,currentSqrtPrice:$,lower:le,upper:ee,liquidity:te,zapSlippage:X}=ye.current,se=(h==null?void 0:h.coin_type)===((Se=r==null?void 0:r.tokenA)==null?void 0:Se.coin_type)?"OnlyCoinA":"OnlyCoinB";b(w).mul(Math.pow(10,h==null?void 0:h.decimals)).toString();const me={mode:se,pool_id:r==null?void 0:r.poolAddress,tick_lower:le,tick_upper:ee,current_sqrt_price:$,coin_type_a:(fe=r==null?void 0:r.tokenA)==null?void 0:fe.coin_type,coin_type_b:(_e=r==null?void 0:r.tokenB)==null?void 0:_e.coin_type,coin_decimal_a:(N=r==null?void 0:r.tokenA)==null?void 0:N.decimals,coin_decimal_b:(J=r==null?void 0:r.tokenB)==null?void 0:J.decimals};b(w).gte(g==null?void 0:g.balanceFormat)?me.burn_liquidity=te:me.burn_liquidity=Ze(b(te).mul(b(c).div(100)).toString(),0),console.log("ðŸš€ ~ preZapInRemove ~ options:",me);let Ce;try{Ce=await U.Zap.preCalculateWithdrawAmount(me),console.log("ðŸš€ ~ preZapInRemove ~ res:",Ce)}catch(D){console.log("ðŸš€ ~ preZapOut ~ error:",D),E(!0)}y===ue.current&&R(Ce),_(!1)},P=pt(G,300),ae=pt(ne,300);d.useEffect(()=>{Te()},[i,s==null?void 0:s.coin_type,k==null?void 0:k.currentSqrtPrice,T,W,c,e]);const Ee=()=>{var y;(y=Re.current)==null||y.reset()},Te=()=>{E(!1);const{zapAmount:y,zapAmountRate:h}=ye.current;if(console.log("ðŸš€ ~ reCalculateZapData ~ zapAmount:",y),console.log("ðŸš€ ~ reCalculateZapData ~ zapAmountRate:",h),console.log("ðŸš€ ~ reCalculateZapData ~ zapAmountRate:",h),!Number(y)||b(h).gt(1e4)||b(h).lt(1e-4)||Y){const w=tt();ue.current=w,R(void 0),_(!1);return}_(!0);const r=tt();ue.current=r,t=="Deposit"?P(r):ae(r)};return d.useEffect(()=>{Ee()},[i,n==null?void 0:n.poolAddress,t]),d.useEffect(()=>()=>{Ee(),ye.current=null},[]),{btnText:be.text,btnDisabled:be.disabled,handleZapIn:V,isPreLoading:x,getZapDepositToastInfo:F,getZapDepositTx:j,getZapWithdrawToastInfo:M,getZapWithdrawTx:pe,zapProgressRef:Re,handleResetZapProgress:Ee,reCalculateZapData:Te,isMinimumPrecision:Y,zapNotAvailable:L}}function Gi({action:t,onClick:i,hideAmountInfo:s,otherLoading:e,isReverse:g,inConfirmModal:x,hideDepositRatio:a}){const{currentAccount:n,onWalletModal:_}=Ke(),{btnDisabled:T,btnText:W,handleZapIn:q,zapProgressRef:k,reCalculateZapData:R,isMinimumPrecision:c,zapNotAvailable:m}=Et(t),l=()=>{if(!n){_(!0);return}i?i():q()},[Z,U]=d.useState(!1),{zapSlippage:A}=Qe(),{getTokenAmountValue:S}=it(),{zapSlideValue:C,preDepositeData:u,currentTokens:L,currentZapToken:E,zapAmount:Q,isPreLoading:I,zapApiPool:v,lower:de,upper:be,zapCurrPriceData:V,posOriginAmounts:p,zapAmountRate:F}=Ye(),{fromCoin:j,toCoin:M}=d.useMemo(()=>{var D;const N=E,J=(D=L==null?void 0:L.filter(z=>(z==null?void 0:z.coin_type)!==(E==null?void 0:E.coin_type)))==null?void 0:D[0];return t==="Withdraw"?{fromCoin:J,toCoin:N}:{fromCoin:N,toCoin:J}},[E==null?void 0:E.coin_type,L,t]),{fromAmount:pe,toAmount:ye}=d.useMemo(()=>{var D,z;let N,J;return u&&(j!=null&&j.coin_type)&&(M!=null&&M.coin_type)&&(N=Fe((D=u==null?void 0:u.swap_result)==null?void 0:D.swap_in_amount,j==null?void 0:j.decimals),J=Fe((z=u==null?void 0:u.swap_result)==null?void 0:z.swap_out_amount,M==null?void 0:M.decimals)),{fromAmount:N,toAmount:J}},[u,j==null?void 0:j.coin_type,M==null?void 0:M.coin_type]),{sources:Re,priceImpactTextInfo:ue,showPriceImpactTips:Y}=ri(j,M,pe,ye),[G,ne]=d.useState(!1),P=()=>{ne(!G)},ae=d.useMemo(()=>ye?ke(b(ye).sub(b(ye).mul(A)).toString()):"--",[A,ye]),Ee=d.useMemo(()=>{var N;return(N=u==null?void 0:u.swap_result)==null?void 0:N.swap_price},[u]),Te=()=>{console.log("ZapRoute handleRefresh"),R()},{tokenA:ve,tokenB:je,coinAmountA:y,coinAmountB:h,displayCoinAmountA:r,displayCoinAmountB:w,displayTokenA:$,displayTokenB:le,displayAmountARate:ee,displayAmountBRate:te,amountARate:X,amountBRate:re}=d.useMemo(()=>{let N,J,D,z,Le,ce;const Me=v==null?void 0:v.isReverse;return u&&(v!=null&&v.poolAddress)&&(D=v==null?void 0:v.tokenA,z=v==null?void 0:v.tokenB,N=Fe(u==null?void 0:u.amount_a,D==null?void 0:D.decimals),J=Fe(u==null?void 0:u.amount_b,z==null?void 0:z.decimals),Le=S(D==null?void 0:D.coin_type,N),ce=S(z==null?void 0:z.coin_type,J)),{displayCoinAmountA:Me?J:N,displayCoinAmountB:Me?N:J,displayTokenA:Me?z:D,displayTokenB:Me?D:z,displayAmountARate:Me?ce:Le,displayAmountBRate:Me?Le:ce,tokenA:D,tokenB:z,coinAmountA:N,coinAmountB:J,amountARate:Le,amountBRate:ce}},[u,v==null?void 0:v.poolAddress]),{originPosAmountA:se,originPosAmountB:me}=d.useMemo(()=>{let N="",J="";if(v!=null&&v.poolAddress&&(p!=null&&p.coinAmountA||p!=null&&p.coinAmountB)){const D=v==null?void 0:v.tokenA,z=v==null?void 0:v.tokenB;N=Fe(p==null?void 0:p.coinAmountA,D==null?void 0:D.decimals),J=Fe(p==null?void 0:p.coinAmountB,z==null?void 0:z.decimals)}return{originPosAmountA:N,originPosAmountB:J}},[p,v==null?void 0:v.poolAddress]),[Ce,Se]=d.useState({});d.useEffect(()=>{if(y||h){const N=mi(de,be),J=gi(y||0,h||0,V==null?void 0:V.currentPrice,N);Se(J)}},[y,h,V==null?void 0:V.currentPrice]);const{isApp:fe}=ut(),_e=d.useMemo(()=>b(F).gt(1e4)?"In Zap mode, each request should be within $10,000.":b(F).gt(0)&&(b(F).lt(1e-4)||c)?"The input is too small. Zap mode is not available.":m?"Zap mode is not available.":"",[F,t,c,m]);return o.jsx(o.Fragment,{children:o.jsxs(Ae,{gap:"0px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:x?"rgba(0,0,0,0)":"border",bg:x?"none":"bg_six",p:{base:x?"0px":"0px 8px",lg:x?"0px":"0px 16px"},children:[!x&&o.jsx(De,{w:{base:"calc(100% + 16px)",lg:"calc(100% + 34px)"},h:"52px",margin:"-1px -1px 0px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:(I||T||e||Y||!!_e)&&(n==null?void 0:n.address),isLoading:I||e,onClick:l,children:W}),!!Number(Q)&&o.jsx(Ae,{w:"100%",gap:"0px",children:_e?o.jsx(Ve,{w:"100%",p:"12px 0px",children:o.jsx(yt,{tips:_e})}):o.jsxs(o.Fragment,{children:[Y&&o.jsx(Ve,{w:"100%",pt:"12px",children:o.jsx(yt,{tips:"High price difference. Be cautious before submitting your order."})}),x&&o.jsxs(K,{w:"100%",justify:"space-between",children:[o.jsx(H,{fontSize:"14px",color:"text_paragraph",children:"Zap Amount"}),o.jsx(H,{fontSize:"14px",color:"text_caption",children:Lt(F,2)})]}),Number(Q)>0&&Number(pe)>0&&o.jsxs(Ae,{w:"100%",gap:"12px",pt:"16px",pb:x?"0px":"16px",children:[o.jsx(K,{w:"100%",justify:"space-between",children:o.jsx(H,{fontSize:"14px",color:"text_paragraph",children:"Zap Route"})}),o.jsxs(Ae,{w:"100%",bg:x?"bg_secondary":"none",borderRadius:"12px",p:x?"0px 12px":"0px",gap:x?"4px":"12px",border:"1px solid",borderColor:x?"border":"rgba(0,0,0,0)",flexDirection:t==="Withdraw"?"column-reverse":"column",children:[o.jsxs(Ae,{w:"100%",align:"flex-start",bg:x?"none":"button_outline_hov_bg",p:x?"16px 0px":"16px 12px",borderRadius:x?"0px":"12px",borderBottom:"1px solid",borderColor:x?"border":"rgba(0,0,0,0)",children:[o.jsx(K,{w:"100%",align:"center",children:o.jsxs(Ae,{w:"100%",align:"flex-start",onClick:()=>{U(!Z)},children:[o.jsx(K,{w:"100%",justify:"flex-start",children:I?o.jsx(Je,{w:"100%",h:"16px"}):o.jsxs(H,{w:"100%",fontSize:"12px",color:"text_caption",textAlign:"left",children:["Swap ",ke(pe)," ",j==null?void 0:j.symbol," for ",ae," ",M==null?void 0:M.symbol]})}),I?o.jsx(Je,{w:"150px",h:"16px"}):o.jsxs(K,{w:"100%",justify:"space-between",align:{base:"flex-start",lg:"center"},flexDirection:{base:"column",lg:"row"},children:[o.jsxs(K,{gap:"4px",justify:"space-between",w:{base:"100%",lg:"unset"},children:[o.jsxs(K,{gap:"4px",children:[o.jsx(ui,{callbackInterval:20,ref:k,min:0,max:20,size:"14px",noBg:!0,thickness:"16px",onClick:Te}),o.jsxs(K,{flexWrap:"wrap",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Price Difference"}),o.jsx(H,{color:ue==null?void 0:ue.textColor,fontSize:"12px",children:ue==null?void 0:ue.priceImpactText}),Re==null?void 0:Re.map(N=>o.jsx(ci,{market:N},N))]})]}),fe&&o.jsx(Pe,{xlinkHref:"#icon-icon_arrow",svgW:"12px",svgH:"12px",transform:Z?"rotate(180deg)":"rotate(0deg)"})]}),o.jsxs(K,{align:"center",gap:"2px",children:[x?o.jsxs(K,{gap:"4px",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Slippage"}),o.jsxs(H,{fontSize:"12px",color:"text_caption",children:[b(A).mul(100).toString(),"%"]})]}):o.jsx(di,{slippageType:"zap",toolTipText:"Slippage Tolerance"}),!fe&&o.jsx(Pe,{xlinkHref:"#icon-icon_arrow",svgW:"12px",svgH:"12px",transform:Z?"rotate(180deg)":"rotate(0deg)"})]})]})]})}),Z&&o.jsxs(K,{w:"100%",justify:"space-between",bg:"bg_fifth",h:"52px",borderRadius:"12px",p:"0px 8px",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Swap Rate"}),I?o.jsx(Je,{w:"150px",h:"16px"}):o.jsxs(K,{children:[G?o.jsxs(H,{fontSize:"12px",color:"text_caption",children:["1 ",M==null?void 0:M.symbol," = ",gt(1/Ee)," ",j==null?void 0:j.symbol]}):o.jsxs(H,{fontSize:"12px",color:"text_caption",children:["1 ",j==null?void 0:j.symbol," = ",gt(Ee)," ",M==null?void 0:M.symbol]}),o.jsx(Pe,{xlinkHref:"#icon-icon_swap1",svgW:"16px",svgH:"16px",onClick:P})]})]})]}),o.jsxs(Ae,{w:"100%",p:x?"16px 0px":"16px 12px",bg:x?"none":"button_outline_hov_bg",borderRadius:"12px",gap:"12px",children:[a?o.jsx(H,{w:"100%",textAlign:"left",fontSize:"12px",color:"text_caption",children:t==="Withdraw"?"Expected Amounts of Remove":"Expected Amounts to Add"}):o.jsx(pi,{tokenA:ve,tokenB:je,percentMap:Ce,type:"zap",isLoading:I,isReverse:g,label:"Expected Amounts to Add"}),o.jsxs(K,{bg:"text_highlight_opacity.10",w:"100%",h:"52px",justify:"space-between",align:"center",borderRadius:"12px",children:[o.jsx(St,{token:g?je:ve,amount:g?ke(C==100?me:h):ke(C==100?se:y),rate:g?re:X,loading:I}),o.jsx(Ve,{bg:"bg_fifth",w:"1px",h:"100%"}),o.jsx(St,{token:g?ve:je,amount:g?ke(C==100?se:y):ke(C==100?me:h),loading:I,rate:g?X:re,align:"right"})]})]})]})]})]})})]})})}function St({token:t,amount:i,rate:s,loading:e,align:g="left"}){return o.jsxs(K,{flex:"1",gap:"8px",p:"12px",justify:"flex-start",flexDirection:g==="left"?"row":"row-reverse",children:[e?o.jsx(Ut,{size:"20px"}):o.jsx(ii,{imageUrl:t==null?void 0:t.logo_url,w:"20px",h:"20px"}),o.jsxs(Ae,{align:`flex-${g==="left"?"start":"end"}`,gap:"4px",children:[e?o.jsx(Je,{w:"50px",h:"14px"}):o.jsxs(H,{fontSize:"12px",color:"text_caption",textAlign:`${g==="left"?"left":"right"}`,children:[i," ",Ct(t==null?void 0:t.symbol,10)]}),e?o.jsx(Je,{w:{base:"70px",lg:"100px"},h:"12px"}):o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:Lt(s,2)})]})]})}function zi(t,i){return{currentApiPoolInfo:d.useMemo(()=>{if(t!=null&&t.clmmPool)return i==null?void 0:i[t==null?void 0:t.clmmPool]},[t==null?void 0:t.clmmPool,i])}}function Xi(){const{setCurrentPriceData:t}=Ft();return{getCurrentPrice:(s,e)=>{if(e.tokenA&&e.tokenB){const g=e.tokenA.decimals,x=e.tokenB.decimals,a=vt.sqrtPriceX64ToPrice(new jt(s),g,x).toString(),n=b(1).div(a).toString(),_={currentPrice:a,reverseCurrentPrice:n,currentSqrtPrice:s,pool:e.poolAddress};t(_)}}}}function Ji(){const t=et("clmm"),{fetchTokenInfo:i}=Si(),{contractPoolInfo:s,setContractPoolInfo:e,setContractPoolInfoLoading:g,apiPoolInfo:x,setApiPoolInfo:a,setApiPoolInfoLoading:n}=Ft(),{setFromToken:_,setToToken:T}=Wt(),{getCurrentPrice:W}=Xi(),q=async R=>{g(!0);let c=null;try{const m=await t.Pool.getPool(R);if(c={...m,coinAmountA:String(m.coin_amount_a),coinAmountB:String(m.coin_amount_b),coinTypeA:m.coin_type_a,coinTypeB:m.coin_type_b,poolAddress:m.id,poolType:m.pool_type,tickSpacing:Number(m.tick_spacing),current_sqrt_price:String(m.current_sqrt_price),fee_growth_global_a:String(m.fee_growth_global_a),fee_growth_global_b:String(m.fee_growth_global_b),fee_protocol_coin_a:String(m.fee_protocol_coin_a),fee_protocol_coin_b:String(m.fee_protocol_coin_b),fee_rate:String(m.fee_rate),liquidity:String(m.liquidity),rewarder_infos:m.rewarder_infos.map(l=>({coinAddress:l.coin_type,emissionsEveryDay:l.emissions_per_second,emissions_per_second:String(l.emissions_per_second),growth_global:String(l.growth_global)}))},console.log(R,c,"poolAddress"),console.log("ðŸš€ ~ getContractPoolInfo ~ poolInfo:",{poolInfo:c,apiPoolInfo:x}),(x==null?void 0:x.displayTokenA)===void 0){const l=await k(c);l&&(a(l),n(!1),W(c==null?void 0:c.current_sqrt_price,l),_(l==null?void 0:l.displayTokenA),T(l==null?void 0:l.displayTokenB))}}catch(m){console.log("getContractPoolInfo ~ error:",m)}finally{g(!1)}return s?c?(e(c),c):s:(e(c||null),c)};async function k(R){const c=await i(R.coinTypeA),m=await i(R.coinTypeB);if(c&&m){const l=`${c==null?void 0:c.symbol} - ${m==null?void 0:m.symbol}`,Z=We(R.fee_rate).div(100).toString(),U=We(R.fee_rate).div(1e4).toString(),A=We(Z).div(100).toString()+"%",S=!xi(R.coinTypeA,R.coinTypeB);return{poolAddress:R.poolAddress,name:l,isReverse:S,tokenA:c,tokenB:m,displayTokenA:S?m:c,displayTokenB:S?c:m,haveMining:!1,miningRewardList:null,miningAprList:null,haveFarming:!1,farmsRewarderList:null,farmsApr:"",farmingAprDisplay:"",feeApr:"",feeAprDisplay:"",miningAprTotal:"",feeAndMiningAprDisplay:"",totalAprDisplay:"",fee:U,feeRate:Z,feeDisplay:A,tvlDisplay:"0",volume24Display:"0",fees24Display:"0",isVaults:!1,tickSpacing:R.tickSpacing.toString()}}}return{getContractPoolInfo:q}}function Ki(){const t=et("clmm"),i=et("farms"),{slippage:s}=Qe();return{getRemoveTsPayload:async x=>{const{posId:a,poolAddress:n,coinTypeA:_,coinTypeB:T,amountA:W,amountB:q,liquidity:k,lowerTick:R,upperTick:c,posType:m,rewarderCoinTypes:l,farmsPoolId:Z,farmsPosId:U}=x,A=b(W).mul(b(1).sub(b(s))),S=b(q.toString()).mul(b(1).sub(b(s)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",A,S),m==="clmm"){const C={coin_type_a:_,coin_type_b:T,pool_id:n,pos_id:a,delta_liquidity:k,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_fee:!0,rewarder_coin_types:l};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",C);const u=await t.Position.removeLiquidityPayload(C),L={action:rt.DecreaseLiquidity,txbParams:C};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",u,L),{tx:u,msafeParams:L}}else{const C={pool_id:Z||"",coin_type_a:_,coin_type_b:T,position_nft_id:U||"",clmm_pool_id:n,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:l,delta_liquidity:k,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",C);const u=await i.Farms.removeLiquidityPayload(C),L={action:"FarmingDecreaseLiquidity",txbParams:C};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",L,u),{tx:u,msafeParams:L}}},getCloseTsPayload:async x=>{const{posId:a,poolAddress:n,coinTypeA:_,coinTypeB:T,amountA:W,amountB:q,liquidity:k,lowerTick:R,upperTick:c,posType:m,rewarderCoinTypes:l,farmsPoolId:Z,farmsPosId:U}=x,A=b(W).mul(b(1).sub(b(s))),S=b(q.toString()).mul(b(1).sub(b(s)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",x,A.toString(),S.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",l),m==="clmm"){const C={coin_type_a:_,coin_type_b:T,pool_id:n,pos_id:a||"",min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",rewarder_coin_types:l,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",C);const u=await t.Position.closePositionPayload(C),L={action:rt.RemoveLiquidity,txbParams:C};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",u,L),{tx:u,msafeParams:L}}else{const C={pool_id:Z||"",coin_type_a:_,coin_type_b:T,position_nft_id:U||"",clmm_pool_id:n,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:l,delta_liquidity:k,unstake:!0,close_position:!0,clmm_position_id:a};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",C);const u=await i.Farms.removeLiquidityPayload(C),L={action:rt.FarmingRemoveLiquidity,txbParams:C};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",L,u),{tx:u,msafeParams:L}}}}}function Qi(){const{transactionConfirmation:t}=yi(),{getTokenAmountValue:i}=it(),{getCoinAmountFromLiquidity:s}=bi(),{currentPosBaseInfo:e,posLiquidityData:g,posRewardsData:x,setPosBaseList:a,posApiPoolData:n}=st(),{getCurrentPosBaseInfo:_}=Zt(),{preAdd:T}=wi(),{getRemoveTsPayload:W,getCloseTsPayload:q}=Ki(),{getTokenALock:k,getTokenBLock:R}=qt(),{setTokenAmountAfterA:c,setTokenAmountAfterB:m,currentPosPoolInfo:l,currentPoolSqrtPrice:Z,setIsFixedDisplayTokenA:U,slideValue:A,setSlideValue:S,isFixedDisplayTokenA:C,isPosDetailRefresh:u,currentPosDetailTab:L,useZapIn:E,curPosContractPoolInfo:Q}=ot(),{getZapWithdrawToastInfo:I,getZapWithdrawTx:v,reCalculateZapData:de}=Et("Withdraw"),{getContractPoolInfo:be}=Ji(),{preDepositeData:V,currentZapToken:p,setZapAmount:F,zapAmount:j}=Ye(),{currentApiPoolInfo:M}=zi(e,n),pe=x[e==null?void 0:e.posId],{mevProtect:ye,maxCapForGas:Re,transactionMode:ue,customGasPrice:Y}=Qe(),[G,ne]=d.useState(""),[P,ae]=d.useState(""),[Ee,Te]=d.useState(!1),[ve,je]=d.useState(""),y=e==null?void 0:e.displayTokenA,h=e==null?void 0:e.displayTokenB,r=g[e==null?void 0:e.posId],w=ke(r==null?void 0:r.displayCoinAmountA,void 0,!0),$=ke(r==null?void 0:r.displayCoinAmountB,void 0,!0),le=i(y==null?void 0:y.coin_type,G),ee=i(h==null?void 0:h.coin_type,P);d.useEffect(()=>{if(+G||+P){const f=+G,O=+P,B=b(+w).sub(f),oe=b($).sub(O);console.log("ðŸš€ ~ useEffect ~ numA.gt(0):",B.toString(),oe.toString()),c(B.gt(0)?B.toString():"0"),m(oe.gt(0)?oe.toString():"0")}else c(""),m("")},[G,P]);const[te,X]=d.useState(""),re=d.useRef("");d.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",te),re.current=te},[te]);const se=()=>{ne(""),ae(""),Te(!1),X(""),S("--")},me=d.useMemo(()=>k(e,Q),[Q==null?void 0:Q.current_tick_index,e]),Ce=d.useMemo(()=>R(e,Q),[Q==null?void 0:Q.current_tick_index,e]),Se=e!=null&&e.isReverse?Ce:me,fe=e!=null&&e.isReverse?me:Ce;d.useEffect(()=>{se()},[Se,fe]);const _e=pt((f,O,B)=>{var ze,Oe;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",f);const oe=O?(ze=e==null?void 0:e.displayTokenA)==null?void 0:ze.decimals:(Oe=e==null?void 0:e.displayTokenB)==null?void 0:Oe.decimals,ge=si(f,oe),ie=e==null?void 0:e.tokenA,xe=e==null?void 0:e.tokenB,qe=e==null?void 0:e.lowerTick,Ue=e==null?void 0:e.upperTick,he=e==null?void 0:e.isReverse,we={amount:ge,tokenA:ie,tokenB:xe,isTokenA:he?!O:O,lowerTick:qe,upperTick:Ue,curSqrtPrice:Z,isReverse:he,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",we);const{displayCoinAmountA:Ne,displayCoinAmountB:Be,liquidityAmount:$e}=T(we);if(console.log("ðŸš€ ~ debouncedPreCalculate:",Ne,Be,we,O,B),re.current===B){je($e),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",ve,$e);const Xe=xt(b($e).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);b(Xe).gt(100)||b(Xe).eq(100)?(S(100),ne(w),ae($)):(S(Xe),O?ae(Be||""):ne(Ne||""))}else se();Te(!1)},500),[N,J]=d.useState(!1),D=()=>{if((G||P)&&oi(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",N,A),A==="--")return;if(N||Number(A)==100)Le(Number(A));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const f=C?G:P;if(+f){const O=tt();X(O),_e(f,C,O)}}}};d.useEffect(()=>{L=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",u,w,$),D())},[w,$]);const z=(f,O)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",f),J(!1),je(""),!f){se();return}if(Te(!0),U(O),O){if(ne(f),b(f).eq(w)){ae($),S(100),X(""),Te(!1);return}}else if(ae(f),b(f).eq($)){ne(w),S(100),X(""),Te(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",f,+f),+f){const B=tt();X(B),console.log("ðŸš€ ~ handleAmountChange ~ params:",f),_e(f,O,B)}else Te(!1),O?ae(""):ne("")},Le=f=>{var O;if(J(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",w,$,f),E){const oe=((O=M==null?void 0:M.tokenA)==null?void 0:O.coin_type)===(p==null?void 0:p.coin_type)?at:lt;if(f===100)F(oe);else{const ge=b(oe).mul(b(f).div(100)).toString();F(ge)}}else if(f==100)ne(w),ae($);else{const B=e==null?void 0:e.tokenA,oe=e==null?void 0:e.tokenB,ge=ke(b(e==null?void 0:e.liquidity).mul(f).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,ge);const ie=e==null?void 0:e.lowerTick,xe=e==null?void 0:e.upperTick,qe=e==null?void 0:e.isReverse,Ue={tokenA:B,tokenB:oe,liquidity:ge,currentSqrtPrice:Z,lowerTick:ie,upperTick:xe,roundUp:!1};try{const{amountA:he,amountB:He}=s(Ue);je(ge);const we=qe?He:he,Ne=qe?he:He;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",he,He),ne(b(we).gt(0)?we:""),ae(b(Ne).gt(0)?Ne:"")}catch(he){console.log("ðŸš€ ~ changeSlideFun ~ error:",he),ne(""),ae("")}}},{currentAccount:ce}=Ke(),Me=d.useMemo(()=>{const f={text:"Remove",disabled:!1};return ce!=null&&ce.address?!+G&&!+P?(f.text="Enter an amount",f.disabled=!0,f):!Se&&G&&b(G).gt(w||0)||!fe&&P&&b(P).gt($||0)?(f.disabled=!0,f.text="Invalid Amount",f):((e==null?void 0:e.posType)=="burn"&&(f.disabled=!0),f):(f.text="Connect Wallet",f.disabled=!1,f)},[G,P,w,$,ce==null?void 0:ce.address]),{signAndExecuteTransaction:Mt}=hi(),{fetchAccountBalance:Nt}=Ai(),[Vt,nt]=d.useState(!1),$t=wt(),Ot=async()=>{var B,oe,ge;nt(!0);const f=A==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",pe),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",l==null?void 0:l.miningRewardList);const O=f?!pe||(pe==null?void 0:pe.length)==0?(B=(l==null?void 0:l.miningRewardList)||[])==null?void 0:B.reduce((ie,xe)=>(ie.push(xe.coinType),ie),[]):(oe=pe||[])==null?void 0:oe.reduce((ie,xe)=>(ie.push(xe.coin_address),ie),[]):(ge=pe||[])==null?void 0:ge.reduce((ie,xe)=>(b(xe==null?void 0:xe.amount_owed).gt(0)&&ie.push(xe.coin_address),ie),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",O);try{let ie,xe,qe;if(E){const he=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;qe=I(Se,fe),t(qe),ie=await v(he,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,O,(e==null?void 0:e.posType)=="farms")}else{const he=e!=null&&e.isReverse?b(P).mul(Ie.pow(10,h.decimals)).toString():b(G).mul(Ie.pow(10,y.decimals)).toString(),He=e!=null&&e.isReverse?b(G).mul(Ie.pow(10,y.decimals)).toString():b(P).mul(Ie.pow(10,h.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",l,pe,O);const we={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:he,amountB:He,liquidity:ve,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:O};(e==null?void 0:e.posType)=="farms"&&(we.farmsPoolId=e==null?void 0:e.farmsPool,we.farmsPosId=e==null?void 0:e.id),qe={getShowInfo:(Be,$e)=>{const ze="Remove "+[bt(G,y==null?void 0:y.symbol),bt(P,h==null?void 0:h.symbol)].filter(Boolean).join(" and "),Oe={modalDescriptionText:ze,toastTitleText:ze};if(Be==="success"){let Xe=G,Dt=P;$e&&(Xe=Ge($e,y)||G,Dt=Ge($e,h)||P),Oe.toastDescriptionContent="",Oe.modalDescriptionText="",Oe.toastTitleText="Remove Liquidity Successful"}return Oe}},t(qe),console.log("ðŸš€ ~ toAdd ~ params:",ve,f,A,we);const Ne=f?await q(we):await W(we);ie=Ne.tx,xe=Ne.msafeParams}const Ue=await Mt(ie,qe,{useMev:ye,useFastMode:ue==="Fast Mode",maxCapForGas:Re,customGasPrice:Y,msafeParams:xe});console.log("ðŸš€ ~ toClaim ~ res:",Ue),Ue?(Nt(),se(),F(""),f?(a([]),$t("/pools?tab=positions")):_(ce==null?void 0:ce.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&be(e==null?void 0:e.clmmPool).then(he=>{console.log("ðŸš€ ~ toClaim ~ res:",he),E?de():D()}),nt(!1)}catch(ie){D(),nt(!1),console.log("ðŸš€ ~ toClaim ~ error:",ie)}};d.useMemo(()=>{if(e!=null&&e.posId){const f=e==null?void 0:e.tokenA,O=e==null?void 0:e.tokenB,B=e==null?void 0:e.liquidity,oe=e==null?void 0:e.lowerTick,ge=e==null?void 0:e.upperTick;s({tokenA:f,tokenB:O,liquidity:B,currentSqrtPrice:Z,lowerTick:oe,upperTick:ge,roundUp:!1})}},[e==null?void 0:e.posId,Z]);const{onlyAmountA:at,onlyAmountB:lt}=d.useMemo(()=>({onlyAmountA:r==null?void 0:r.onlyAmountA,onlyAmountB:r==null?void 0:r.onlyAmountB}),[r]);return d.useEffect(()=>{var f;if(E)if(j){const B=((f=M==null?void 0:M.tokenA)==null?void 0:f.coin_type)===(p==null?void 0:p.coin_type)?at:lt;if(B){const oe=xt(b(j).div(B).mul(100).toString(),2,!0);S(oe)}else S("--")}else S("--");else S("--")},[E,j]),d.useEffect(()=>{if(L!=="increase"&&E){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",V),V!=null&&V.amount_a||V!=null&&V.amount_b){const f=e==null?void 0:e.tokenA,O=e==null?void 0:e.tokenB,B=Fe(V==null?void 0:V.amount_a,f==null?void 0:f.decimals),oe=Fe(V==null?void 0:V.amount_b,O==null?void 0:O.decimals);if(A==100)ne(String(w)),ae(String($));else{const ge=e!=null&&e.isReverse?oe:B,ie=e!=null&&e.isReverse?B:oe;ne(b(ge).gt(w)?String(w):ge),ae(b(ie).gt($)?String($):ie)}return}ne(""),ae("")}},[E,V,A]),d.useEffect(()=>{ne(""),ae("")},[]),{tokenAmountA:G,tokenAmountB:P,resetInputAmount:se,showDisplayTokenALock:Se,showDisplayTokenBLock:fe,currentPosLiquidityData:r,tokenABalance:w,tokenBBalance:$,displayTokenA:y,displayTokenB:h,tokenAmountValueA:le,tokenAmountValueB:ee,preRemoveLoading:Ee,handleAmountChange:z,btnStatusText:Me,changeSlideFun:Le,toRemove:Ot,isRemoveLoading:Vt,onlyAmountA:at,onlyAmountB:lt,currentApiPoolInfo:M,currentPoolSqrtPrice:Z}}const Yi="/assets/img_farming@2x-CwRUS-3E.png";function Bi({haveFarming:t}){ut();const{currentPosBaseInfo:i,farmsPosRewardsData:s,posPoolsRelatedData:e,posBaseListLoading:g,posPoolsOriginalData:x}=st(),{currentPosPoolInfo:a}=ot(),{currentAccount:n}=Ke(),{getCurrentPosBaseInfo:_}=Zt(),{getFarmsRewardsData:T}=fi(),{getClmmPosName:W}=qt(),q=d.useMemo(()=>{var p;if(i!=null&&i.tokenName)return i==null?void 0:i.tokenName;{const F=(p=x==null?void 0:x[i==null?void 0:i.clmmPool])==null?void 0:p.index;return W(i==null?void 0:i.index,F)||""}},[i==null?void 0:i.tokenName,i==null?void 0:i.index,i==null?void 0:i.clmmPool,x]),k=e[i==null?void 0:i.posId],R=(k==null?void 0:k.currentStatus)=="Active",c=s[i==null?void 0:i.id],m=(a==null?void 0:a.farmsRewarderList)||[],l=c==null?void 0:c.reduce((p,F)=>p+F.display_amount_owed,0),{toStakePos:Z,toUnStakePos:U,toClaimPos:A,unstakeLoading:S,claimLoading:C}=Ri(),u=wt(),L=p=>{u(`/position-detail/${p[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{_(n==null?void 0:n.address,p[0].parsedJson.wrapped_position_id,!0)},2e3)},E=async()=>{Z(i==null?void 0:i.id,a==null?void 0:a.farmsPoolAddress,q,L)},Q=()=>{u(`/position-detail/${i==null?void 0:i.posId}`,{replace:!0}),setTimeout(()=>{_(n==null?void 0:n.address,i==null?void 0:i.posId,!0)},2e3)},I=async()=>{U(i==null?void 0:i.id,i==null?void 0:i.farmsPool,q,Q)},v=()=>{setTimeout(()=>{T([i])},2e3)},de=async()=>{A(i==null?void 0:i.id,i==null?void 0:i.farmsPool,v)},be=d.useMemo(()=>(c==null?void 0:c.length)>0?c.reduce((p,F)=>We(p).plus(F==null?void 0:F.display_amount_owed).toString(),"0"):"0",[c,n==null?void 0:n.address,C,S]),V=d.useMemo(()=>i&&a?i.posType=="clmm"&&a.haveFarming===!0:!1,[i==null?void 0:i.posType,a==null?void 0:a.haveFarming]);return!t&&We(l).eq(0)?null:o.jsx(o.Fragment,{children:((a==null?void 0:a.farmsPoolAddress)||We(be).gt(0))&&o.jsxs(Ae,{w:"100%",children:[t&&o.jsxs(K,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Yi,bgSize:"100% 100%",justify:"space-between",children:[o.jsxs(Ae,{align:"flex-start",children:[o.jsxs(K,{children:[o.jsx(Ht,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),o.jsx(H,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),o.jsx(H,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),o.jsxs(K,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[o.jsx(H,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),o.jsx(H,{color:"primary",fontSize:"12px",fontWeight:"500",children:o.jsx(ki,{poolInfo:a,isPosition:!0,showAprSize:"12px"})}),o.jsxs(K,{gap:"4px",cursor:"pointer",onClick:()=>u("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[o.jsx(H,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),o.jsx(Pe,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),o.jsxs(mt,{mt:t?"-20px":"0px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:t?"0 0 12px 12px":"12px",borderTop:t?"none":"border",children:[o.jsx(H,{children:"Farming Rewards"}),o.jsx(K,{w:"100%",flexWrap:"wrap",children:(c==null?void 0:c.length)>0&&We(be).gt(0)?c==null?void 0:c.map(p=>{var F;return o.jsx(Gt.Fragment,{children:We(p==null?void 0:p.display_amount_owed).gt(0)&&o.jsx(ft,{coinType:(F=p==null?void 0:p.token)==null?void 0:F.coin_type,amount:p==null?void 0:p.display_amount_owed,tokenInfo:p==null?void 0:p.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},p==null?void 0:p.coinType)},p==null?void 0:p.rewarder_type)}):(m==null?void 0:m.length)>0?m==null?void 0:m.map(p=>o.jsx(ft,{coinType:p==null?void 0:p.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},p==null?void 0:p.coinType)):o.jsx(H,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),o.jsxs(K,{w:"100%",justify:"space-between",mt:"16px",children:[(i==null?void 0:i.posType)=="farms"&&o.jsx(De,{disabled:C||S,isLoading:S,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:I,children:"Unstake"}),V&&!R&&o.jsx(Ve,{w:"50%",sx:{">button":{w:"100%"}},children:o.jsx(ni,{placement:"top",tooltip:o.jsx(H,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:o.jsx(Ve,{w:"100%",children:o.jsx(De,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),V&&R&&o.jsx(De,{disabled:C||S,isLoading:S,h:"40px",w:"50%",fontSize:"14px",onClick:E,children:"Stake"}),o.jsx(De,{disabled:C||S||We(l).eq(0),isLoading:C,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:de,children:"Claim rewards"})]})]})]})})}const Ii="/assets/bg_alerts@2x-BsIoiXpE.png";function Pi({subscriptionSource:t,title:i="Range Alerts",description:s="Receive alerts via Telegram, SMS, or email when this position goes out of range.",wrapStyle:e={}}){const{getPositionNotifiStatus:g}=ht(),{isChecked:x,setIsChecked:a,notifiAuthenticated:n,notifiSourceGroups:_,setIsShowNotifi:T,notifiSubscriptionLoading:W,notifiStatus:q,notifiSources:k}=ai(),{currentAccount:R}=Ke(),{notifiUnSubscription:c,notifiSubscription:m}=_i(),{currentPosBaseInfo:l}=st();console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:29 ~ currentPosBaseInfo:",l),d.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: RangeAlerts.tsx:42 ~ notifiSubscriptionLoading:",W),R!=null&&R.address&&t=="PositionDetail"&&l&&q=="authenticated"&&!W){const{isSubscription:A}=g(l.posId,String(l.index));a(A)}},[R,t,l,n,_,W,k]);const{createNotifiSubscriptionVerify:Z}=ht(),U=async A=>{if(a(A),console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:46 ~ changeSwitch ~ checked:",A),A){const S=await Z();if(console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:49 ~ changeSwitch ~ canSubscription:",S),!S)return a(!1),!1}if(t=="AddLiquidity")a(A);else if(t=="PositionDetail")if(console.log("ðŸš€ðŸš€ðŸš€ ~ changeSwitch ~ checked:",A),A){const S={subscriptionSource:"PositionDetail",position:l==null?void 0:l.posId,pool:l==null?void 0:l.clmmPool,posIndex:String(l==null?void 0:l.index)};m(S)}else c(l==null?void 0:l.posId,l==null?void 0:l.clmmPool,l==null?void 0:l.index)};return d.useEffect(()=>()=>{a(!1)},[]),o.jsx(K,{w:"100%",bgImage:Ii,bgSize:"100% 100%",p:"16px",borderRadius:"8px",...e,children:o.jsxs(Ae,{w:"100%",gap:"8px",children:[o.jsxs(K,{w:"100%",justify:"space-between",children:[o.jsx(H,{color:"primary",children:i}),q=="authenticated"?o.jsx(Tt,{isChecked:x,disabled:W,onChange:A=>U(A.target.checked)}):o.jsx(De,{w:"112px",h:"28px",borderRadius:"8px",fontWeight:"500",fontSize:"14px",onClick:()=>T(!0),children:"Set up"})]}),o.jsx(H,{color:"primary_gray",lineHeight:"20px",textAlign:"left",children:s})]})})}function es(t){const{value:i,action:s,onChange:e}=t,{isApp:g}=ut();return o.jsx(mt,{padding:"6px 8px",borderRadius:"8px",width:"unset",children:o.jsxs(zt,{isLazy:!0,trigger:g?"click":"hover",placement:"top",autoFocus:!1,returnFocusOnClose:!1,children:[o.jsx(Xt,{children:o.jsxs(K,{h:"14px",cursor:"pointer",children:[o.jsxs(H,{whiteSpace:"nowrap",fontSize:"14px",color:i?"primary":"",fontWeight:"500",children:["Zap ",s==="Deposit"?"In":"Out"]}),o.jsx(Tt,{isChecked:i,onChange:()=>{e()}})]})}),o.jsx(Jt,{children:o.jsx(Kt,{p:"12px",lineHeight:"20px",fontSize:"12px",children:s=="Deposit"?"Through Zap-In, you can deposit your liquidity in single token or with customized token ratio. Tokens will be auto converted to match the required ratio. ":"Through Zap-Out, you can withdraw your liquidity in one token. The liquidity will be auto converted to one token you selected."})})]})})}function ts({action:t,haveZap:i,resetInputAmount:s}){const{useZapIn:e,setUseZapIn:g}=ot(),{setZapAmount:x,setPreDepositeData:a}=Ye(),n=()=>{s==null||s(),g(!e),x("")};return d.useEffect(()=>{g(!1),a(void 0)},[t]),o.jsxs(K,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[o.jsx(H,{color:"primary_gray",fontSize:"14px",children:t==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),o.jsx(es,{action:t,value:e,onChange:n})]})}function ks(){const{currentPosBaseInfo:t,posPoolsRelatedData:i,posApiPoolData:s}=st(),{isFixedDisplayTokenA:e,slideValue:g,setSlideValue:x,curPosContractPoolInfo:a,useZapIn:n,currentPosPoolInfo:_}=ot(),{tokenAmountA:T,tokenAmountB:W,tokenABalance:q,tokenBBalance:k,displayTokenA:R,displayTokenB:c,tokenAmountValueA:m,tokenAmountValueB:l,preRemoveLoading:Z,handleAmountChange:U,changeSlideFun:A,btnStatusText:S,toRemove:C,isRemoveLoading:u,showDisplayTokenALock:L,showDisplayTokenBLock:E,resetInputAmount:Q,onlyAmountA:I,onlyAmountB:v,currentApiPoolInfo:de,currentPoolSqrtPrice:be,currentPosLiquidityData:V}=Qi();d.useEffect(()=>()=>{Q()},[]);const p=j=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",j),j=="MAX"||j==100?(x(100),A(100)):(x(Number((j+"").split("%")[0])),A(Number((j+"").split("%")[0])))};d.useEffect(()=>x("--"),[]);const F=i[t==null?void 0:t.posId];return o.jsxs(Ae,{w:"100%",gap:"8px",children:[o.jsxs(Ve,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(de==null?void 0:de.haveZap)&&(t==null?void 0:t.posType)!=="burn"&&!L&&!E&&o.jsx(ts,{action:"Withdraw",resetInputAmount:Q}),n?o.jsx(Ui,{action:"Withdraw",apiPoolInfo:de,currentSqrtPrice:be,onlyAmountA:I,onlyAmountB:v,liquidity:t==null?void 0:t.liquidity,lowerTick:t==null?void 0:t.lowerTick,upperTick:t==null?void 0:t.upperTick,slideValue:String(g),currentPosLiquidityData:V,changeSlideValue:p}):o.jsx(o.Fragment,{children:o.jsx(Ti,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:q||"",value:T,amountValue:m,loading:!e&&Z,onChange:j=>{U(j,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:R,half:!1,lock:{isLock:t&&a&&L,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:k||"",value:W,amountValue:l,loading:e&&Z,onChange:j=>{U(j,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:c,half:!1,lock:{isLock:t&&a&&E,style:{borderRadius:"12px"}}},lock:{isLock:!t||!a||t&&(t==null?void 0:t.posType)=="burn",text:t&&(t==null?void 0:t.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(t==null?void 0:t.posType)!=="burn"&&o.jsxs(mt,{borderRadius:"12px",p:"16px",mt:"8px",children:[o.jsx(H,{color:"primary_gray",children:"Amount"}),o.jsx(ss,{percentage:g,onChange:j=>p(j)})]})]}),n?o.jsx(Gi,{action:"Withdraw",onClick:C,hideDepositRatio:!0,otherLoading:u,isReverse:t==null?void 0:t.isReverse}):o.jsx(De,{isLoading:u,onClick:C,disabled:S.disabled||u,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:S.text}),(t==null?void 0:t.posType)!=="burn"&&o.jsx(Bi,{haveFarming:_==null?void 0:_.haveFarming}),F&&(F==null?void 0:F.minPrice)!=="0"&&(F==null?void 0:F.maxPrice)!=="âˆž"&&o.jsx(Pi,{subscriptionSource:"PositionDetail"})]})}function is(t){const{percentage:i,onChange:s,wrapStyle:e,textFontSize:g,selectTabStyle:x,selectTabItemStyle:a,selectTabItemTextStyle:n,isShowPercentageText:_=!0,percentageTextMinW:T="62px"}=t,W=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}],q=d.useMemo(()=>i!==100?`${i}%`:"MAX",[i]);return o.jsxs(K,{w:"100%",...e,children:[_&&o.jsxs(H,{minW:T,fontSize:g,color:"text_caption",children:[i=="--"?"--":b(i).gt(0)&&Number(i)<.01?"<0.01":ke(i,2),"%"]}),o.jsx(kt,{type:"outlineTab",tabList:W,currentTab:q,handleChangeTab:k=>{k.label==="MAX"?s(100):s(k.label.replace("%",""))},wrapStyle:x,itemStyle:a,selectTabItemTextStyle:n})]})}function ss(t){const{percentage:i,onChange:s,percentageTextMinW:e}=t;return o.jsxs(Ve,{w:"100%",children:[o.jsx(is,{percentage:i,onChange:s,percentageTextMinW:e,wrapStyle:{justifyContent:"space-between",m:"10px 0"},selectTabStyle:{w:{base:"220px",lg:"310px"},h:"32px",p:"3px",borderRadius:"8px"},selectTabItemStyle:{flex:"1",fontSize:"14px",margin:"0px"},textFontSize:"24px"}),o.jsxs(Qt,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:i=="--"?0:Number(i),onChange:g=>s(g+"%"),children:[o.jsx(Yt,{children:o.jsx(Bt,{})}),o.jsx(It,{})]})]})}export{Bi as F,ss as P,Pi as R,ts as T,Gi as Z,Ji as a,Xi as b,Et as c,Vi as d,Ye as e,es as f,Ui as g,zi as h,ks as i,Wt as u};
//# sourceMappingURL=RemoveBlock-c7Lp9HFN.js.map
=======
import{a as d,j as o,f as Ve,V as Ae,q as De,H as K,T as H,p as Je,S as Ut,aa as wt,I as Ht,R as Gt,aq as Tt,P as zt,h as Xt,m as Jt,n as Kt,a1 as Qt,a2 as Yt,a3 as Bt,a4 as It}from"./vendor-BFGDaAdA.js";import{ak as Pt,av as dt,b0 as ei,j as kt,Q as Rt,o as it,a8 as vt,aJ as jt,d as b,b1 as ti,k as Ke,l as et,V as Ct,t as pt,am as Ze,x as ke,a2 as Ge,r as Fe,a as ut,b2 as Lt,I as Pe,c as gt,e as ii,Z as We,$ as si,f as xt,a1 as oi,q as Ie,B as mt,C as ni,P as ai}from"./index-Fe2tZAmL.js";import{u as li}from"./useTokenBalance-DP5kgkCW.js";import{u as Qe}from"./global-DcBmTUHf.js";import{v as tt,u as ri,M as ci,S as di}from"./usePriceImpact-Cr2BxG0A.js";import{D as pi}from"./DepositRatio-B77PAm5C.js";import{F as ui}from"./FreshProgressV2-Bnti4onk.js";import{d as mi,c as gi,e as xi}from"./useGetPoolList-B1Mv5UcY.js";import{E as yt}from"./ErrorTips-DZBggIX6.js";import{a as yi,u as hi}from"./useTransaction-C_My4i0J.js";import{f as bi,a as st,d as qt,g as fi}from"./usePositionList-CXKX6qAY.js";import{b as Zt,a as ot,c as ht,u as _i}from"./useNotifiSubscription-CMLj3q5J.js";import{f as bt}from"./index-DRyIuzDp.js";import{u as Ai}from"./useAccountBalance-Byib0voT.js";import{u as Ft}from"./index-II9hi5D5.js";import{u as Si}from"./useToken-BKskvPZm.js";import{u as wi}from"./usePosAdd-Bd-iI5ys.js";import{M as rt}from"./msafe-oYBkW7LJ.js";import{T as Ti}from"./TradeInputGroup-eK__EKBF.js";import{A as ki}from"./index-tHpjDD3i.js";import{u as Ri,R as ft}from"./ExpendItem-9562kN34.js";var vi=/\s/;function ji(t){for(var i=t.length;i--&&vi.test(t.charAt(i)););return i}var Ci=/^\s+/;function Li(t){return t&&t.slice(0,ji(t)+1).replace(Ci,"")}var _t=NaN,qi=/^[-+]0x[0-9a-f]+$/i,Zi=/^0b[01]+$/i,Fi=/^0o[0-7]+$/i,Wi=parseInt;function At(t){if(typeof t=="number")return t;if(Pt(t))return _t;if(dt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=dt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Li(t);var s=Zi.test(t);return s||Fi.test(t)?Wi(t.slice(2),s?2:8):qi.test(t)?_t:+t}var ct=function(){return ei.Date.now()},Ei="Expected a function",Mi=Math.max,Ni=Math.min;function Vi(t,i,s){var e,g,x,a,n,_,T=0,W=!1,q=!1,k=!0;if(typeof t!="function")throw new TypeError(Ei);i=At(i)||0,dt(s)&&(W=!!s.leading,q="maxWait"in s,x=q?Mi(At(s.maxWait)||0,i):x,k="trailing"in s?!!s.trailing:k);function R(u){var L=e,E=g;return e=g=void 0,T=u,a=t.apply(E,L),a}function c(u){return T=u,n=setTimeout(Z,i),W?R(u):a}function m(u){var L=u-_,E=u-T,Q=i-L;return q?Ni(Q,x-E):Q}function l(u){var L=u-_,E=u-T;return _===void 0||L>=i||L<0||q&&E>=x}function Z(){var u=ct();if(l(u))return U(u);n=setTimeout(Z,m(u))}function U(u){return n=void 0,k&&e?R(u):(e=g=void 0,a)}function A(){n!==void 0&&clearTimeout(n),T=0,e=_=g=n=void 0}function S(){return n===void 0?a:U(ct())}function C(){var u=ct(),L=l(u);if(e=arguments,g=this,_=u,L){if(n===void 0)return c(_);if(q)return clearTimeout(n),n=setTimeout(Z,i),R(_)}return n===void 0&&(n=setTimeout(Z,i)),a}return C.cancel=A,C.flush=S,C}function $i({tokens:t,current:i,onSelect:s}){const e=d.useMemo(()=>t==null?void 0:t.map(a=>({label:a==null?void 0:a.symbol,value:a==null?void 0:a.coin_type})),[t]),g=d.useMemo(()=>{var a;return(a=e==null?void 0:e.filter(n=>(n==null?void 0:n.value)===(i==null?void 0:i.coin_type)))==null?void 0:a[0]},[e,i==null?void 0:i.coin_type]),x=a=>{var _;const n=(_=t==null?void 0:t.filter(T=>(T==null?void 0:T.coin_type)===(a==null?void 0:a.value)))==null?void 0:_[0];s(n)};return o.jsx(Ve,{w:"100%",mb:"8px",children:o.jsx(kt,{wrapStyle:{w:"100%",h:"48px",borderRadius:"12px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"8px",fontWeight:"500"},type:"outlineTab",currentTab:g==null?void 0:g.label,tabList:e,handleChangeTab:x})})}const Oi=(t,i)=>({currentTokens:[],setCurrentTokens:s=>{t(()=>({currentTokens:s}))},zapAmount:"",setZapAmount:s=>{t(()=>({zapAmount:s}))},currentZapToken:void 0,setCurrentZapToken:s=>{t(()=>({currentZapToken:s}))},zapAmountRate:"",setZapAmountRate:s=>{t(()=>({zapAmountRate:s}))},zapTokenBalance:void 0,setZapTokenBalance:s=>{t(()=>({zapTokenBalance:s}))},isPreLoading:!1,setIsPreLoading:s=>{t(()=>({isPreLoading:s}))},preDepositeData:void 0,setPreDepositeData:s=>{t(()=>({preDepositeData:s,isPreLoading:!1}))},zapApiPool:void 0,setZapApiPool:s=>{t(()=>({zapApiPool:s}))},lower:0,setLower:s=>{t(()=>({lower:s}))},upper:0,setUpper:s=>{t(()=>({upper:s}))},liquidity:"",setLiquidity:s=>{t(()=>({liquidity:s}))},zapCurrPriceData:{},setZapCurrPriceData:s=>{t(()=>({zapCurrPriceData:s}))},zapSlideValue:0,setZapSlideValue:s=>{t(()=>({zapSlideValue:Number(s==="--"?0:s)}))},posOriginAmounts:{},setPosOriginAmounts:s=>{t(()=>({posOriginAmounts:s}))},resetZapData:()=>{t(()=>({zapAmount:"",zapAmountRate:"",lower:0,upper:0,preDepositeData:void 0,isPreLoading:!1,liquidity:"",zapSlideValue:0,posOriginAmounts:{}}))}}),Ye=Rt(Oi);function Di(t,i,s,e,g,x,a,n,_,T){const{currentTokens:W,setCurrentTokens:q,zapAmount:k,setZapAmount:R,currentZapToken:c,setCurrentZapToken:m,zapAmountRate:l,setZapAmountRate:Z,setZapTokenBalance:U,zapTokenBalance:A,setPreDepositeData:S,setIsPreLoading:C,setZapApiPool:u,lower:L,upper:E,setLower:Q,setUpper:I,setZapCurrPriceData:v,resetZapData:de,setLiquidity:be,setZapSlideValue:V,setPosOriginAmounts:p}=Ye(),{zapSlippage:F}=Qe(),{balanceInfo:j}=li(c),{getTokenAmountValue:M}=it(),[pe,ye]=d.useState("");d.useEffect(()=>{Q(e)},[e]),d.useEffect(()=>{I(g)},[g]),d.useEffect(()=>{be(n||"")},[n]),d.useEffect(()=>{V(_||0)},[_]),d.useEffect(()=>{p({coinAmountA:T==null?void 0:T.coinAmountA,coinAmountB:T==null?void 0:T.coinAmountB})},[T]),d.useEffect(()=>{var Y,G;if(i!=null&&i.poolAddress&&s){const ne=(Y=i==null?void 0:i.tokenA)==null?void 0:Y.decimals,P=(G=i==null?void 0:i.tokenB)==null?void 0:G.decimals,ae=vt.sqrtPriceX64ToPrice(new jt(s),ne,P).toString();v({currentPrice:ae,currentSqrtPrice:s})}},[s,i==null?void 0:i.poolAddress]),d.useEffect(()=>{let Y=[];i!=null&&i.poolAddress&&(Y=[i==null?void 0:i.displayTokenA,i==null?void 0:i.displayTokenB],m(i==null?void 0:i.displayTokenA)),q(Y),u(i)},[i==null?void 0:i.poolAddress]);const Re=Y=>{R(Y)},ue=Y=>{m(Y),R("")};return d.useEffect(()=>{let Y;k&&(c!=null&&c.coin_type)&&(Y=M(c==null?void 0:c.coin_type,k)),Z(Y||"")},[k,c==null?void 0:c.coin_type]),d.useEffect(()=>{var Y;if(t==="Deposit")U(j);else{const G=(c==null?void 0:c.coin_type)===((Y=i==null?void 0:i.tokenA)==null?void 0:Y.coin_type);U(G?{balanceFormat:x}:{balanceFormat:a})}},[t,j,x,a,c==null?void 0:c.coin_type,i==null?void 0:i.poolAddress]),d.useEffect(()=>()=>{de()},[]),{currentTokens:W,zapAmount:k,zapAmountRate:l,handleChangeAmount:Re,currentZapToken:c,handleChangeZapToken:ue,zapTokenBalance:A,zapSlippage:F}}function Ui({action:t,apiPoolInfo:i,currentSqrtPrice:s,lowerTick:e,upperTick:g,onlyAmountA:x,onlyAmountB:a,liquidity:n,slideValue:_,currentPosLiquidityData:T}){const{currentTokens:W,currentZapToken:q,handleChangeZapToken:k,zapAmount:R,zapAmountRate:c,handleChangeAmount:m,zapTokenBalance:l}=Di(t,i,s,e,g,x,a,n,_,T);return d.useEffect(()=>{t==="Withdraw"&&b(R).gt((l==null?void 0:l.balanceFormat)||"0")&&m(l==null?void 0:l.balanceFormat)},[R,t,l==null?void 0:l.balanceFormat]),o.jsxs(Ae,{w:"100%",children:[o.jsx($i,{tokens:W,current:q,onSelect:k}),o.jsx(ti,{wrapStyle:{h:"108px"},placeholder:"0.0",value:R,onChange:m,balance:(l==null?void 0:l.balanceFormat)||"",amountValue:c,token:q,needRemainBalance:t!=="Withdraw",balanceLabel:t==="Withdraw"?"Available":void 0})]})}const Hi=(t,i)=>({fromAmount:"",setFromAmount:s=>{t(()=>({fromAmount:s}))},fromAmountValue:"",setFromAmountValue:s=>{t(()=>({fromAmountValue:s}))},toAmount:"",setToAmount:s=>{t(()=>({toAmount:s}))},toAmountValue:"",setToAmountValue:s=>{t(()=>({toAmountValue:s}))},liquidityAmount:"",setLiquidityAmount:s=>{t(()=>({liquidityAmount:s}))},tokenMaxA:"",setTokenMaxA:s=>{t(()=>({tokenMaxA:s}))},tokenMaxB:"",setTokenMaxB:s=>{t(()=>({tokenMaxB:s}))},byAmountIn:!0,setByAmountIn:s=>{t(()=>({byAmountIn:s}))},isTokenA:!0,setIsTokenA:s=>{t(()=>({isTokenA:s}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:s=>{t(()=>({percentMap:s}))},isFullRange:!1,setIsFullRange:s=>{t(()=>({isFullRange:s}))},fromToken:void 0,setFromToken:s=>{t(()=>({fromToken:s}))},fromTokenLock:!1,setFromTokenLock:s=>{t(()=>({fromTokenLock:s}))},toToken:void 0,setToToken:s=>{t(()=>({toToken:s}))},toTokenLock:!1,setToTokenLock:s=>{t(()=>({toTokenLock:s}))},totalAmount:void 0,setTotalAmount:s=>{t(()=>({totalAmount:s}))},autoStakePosition:!1,setAutoStakePosition:s=>{t(()=>({autoStakePosition:s}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:s=>{t(()=>({isFarmRewardsRange:s}))},useZapIn:!1,setUseZapIn:s=>{t(()=>({useZapIn:s}))},confirmModalOpen:!1,setConfirmModalOpen:s=>{t(()=>({confirmModalOpen:s}))},nftOpen:!1,setNftOpen:s=>{t(()=>({nftOpen:s}))},relatedPosId:"",setRelatedPosId:s=>{t(()=>({relatedPosId:s}))},resetAddLiquidity:()=>{t(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0,useZapIn:!1,nftOpen:!1,relatedPosId:""}))}}),Wt=Rt(Hi);function Et(t="Deposit"){var ve,je;const{zapAmount:i,currentZapToken:s,zapAmountRate:e,zapTokenBalance:g,isPreLoading:x,preDepositeData:a,zapApiPool:n,setIsPreLoading:_,lower:T,upper:W,liquidity:q,zapCurrPriceData:k,setPreDepositeData:R,zapSlideValue:c}=Ye();console.log("ðŸš€ ~ useZapSubmit ~ zapCurrPriceData:",k);const{currentAccount:m,onWalletModal:l}=Ke(),{setConfirmModalOpen:Z}=Wt(),U=et("zap"),{zapSlippage:A,slippage:S}=Qe(),[C,u]=d.useState(""),[L,E]=d.useState(!1),{getTokenPrice:Q}=it(),I=Q((ve=n==null?void 0:n.tokenA)==null?void 0:ve.coin_type),v=Q((je=n==null?void 0:n.tokenB)==null?void 0:je.coin_type),de=d.useMemo(()=>{if(I&&v)return b(I.price).div(v.price).toString()},[I==null?void 0:I.price,v==null?void 0:v.price]),be=d.useMemo(()=>{const y={text:t==="Withdraw"?"Zap Out":"Zap In",disabled:!1};return m!=null&&m.address?!i||i&&!+i?(y.text="Enter an amount",y.disabled=!0,y):b(i).gt((g==null?void 0:g.balanceFormat)||0)?(y.disabled=!0,y.text=`Insufficient ${Ct(g==null?void 0:g.symbol,10)} Balance`,y):((b(e).gt(1e4)||b(e).gt(0)&&b(e).lt(1e-4))&&(y.disabled=!0),y):(y.text="Connect Wallet",y.disabled=!1,y)},[m==null?void 0:m.address,i,s==null?void 0:s.coin_type,x,t,g==null?void 0:g.balanceFormat]),V=Vi(()=>{m?Z(!0):l(!0)},300,{leading:!0,trailing:!1}),p=()=>{const y=a==null?void 0:a.amount_a,h=a==null?void 0:a.amount_b,r=n==null?void 0:n.tokenA,w=n==null?void 0:n.tokenB,$=n==null?void 0:n.displayTokenA,le=n==null?void 0:n.displayTokenB,ee=Fe(n!=null&&n.isReverse?h:y,n!=null&&n.isReverse?w==null?void 0:w.decimals:r==null?void 0:r.decimals),te=Fe(n!=null&&n.isReverse?y:h,n!=null&&n.isReverse?r==null?void 0:r.decimals:w==null?void 0:w.decimals);return{amountA:y,amountB:h,tokenA:r,tokenB:w,displayTokenA:$,displayTokenB:le,dispalyAmountA:ee,dispalyAmountB:te}},F=()=>{const{displayTokenA:y,displayTokenB:h,dispalyAmountA:r,dispalyAmountB:w}=p();return{getShowInfo:(le,ee)=>{const te=!r&&!w?`Add ${r} ${y==null?void 0:y.symbol} and ${w} ${h==null?void 0:h.symbol}`:r?w?"Add Liquidity":`Add ${w} ${h==null?void 0:h.symbol}`:`Add ${r} ${y==null?void 0:y.symbol}`,X={modalDescriptionText:te,toastTitleText:te};if(le==="success"){let re=r,se=w;ee&&(re=Ge(ee,y)||r,se=Ge(ee,h)||w);const me=!r&&!w?`Add ${re} ${y==null?void 0:y.symbol} and ${se} ${h==null?void 0:h.symbol}`:!r&&w?`Add ${re} ${y==null?void 0:y.symbol}`:!w&&r?`Add ${se} ${h==null?void 0:h.symbol}`:"Add Liquidity";X.toastDescriptionContent=me,X.modalDescriptionText=me,X.toastTitleText="Supplied Successful"}return X}}},j=async(y,h,r,w)=>{console.log("ðŸš€ ~ getZapDepositTx ~ isFarm:",r);const{tokenA:$,tokenB:le}=p(),ee={deposit_obj:a,pool_id:n==null?void 0:n.poolAddress,coin_type_a:$==null?void 0:$.coin_type,coin_type_b:le==null?void 0:le.coin_type,tick_lower:y,tick_upper:h,slippage:Number(S),swap_slippage:Number(A)};w&&(ee.pos_obj=w),r&&(ee.farms_pool_id=n==null?void 0:n.farmsPoolAddress),console.log("getZapTx buildDepositPayload params: ",ee);const te=await U.Zap.buildDepositPayload(ee);return console.log("ðŸš€ ~ getZapTx ~ tx:",te),te},M=(y,h)=>{const{displayTokenA:r,displayTokenB:w,dispalyAmountA:$,dispalyAmountB:le}=p();return{getShowInfo:(te,X)=>{const re=`Withdraw ${ke(i,s==null?void 0:s.decimals)} ${s==null?void 0:s.symbol}`,se={modalDescriptionText:re,toastTitleText:re};return te==="success"&&(X&&(Ge(X,r),Ge(X,w)),se.toastDescriptionContent="",se.modalDescriptionText="",se.toastTitleText="Remove Liquidity Successful"),se}}},pe=async(y,h,r,w,$,le)=>{console.log("ðŸš€ ~ getZapWithdrawTx ~ isFarm:",le),console.log("ðŸš€ ~ useZapSubmit ~ getZapWithdrawTx preDepositeData:",a);const{tokenA:ee,tokenB:te}=p(),X={withdraw_obj:a,pool_id:n==null?void 0:n.poolAddress,pos_id:y,close_pos:(a==null?void 0:a.burn_liquidity)===h,collect_fee:!0,collect_rewarder_types:$,coin_type_a:ee==null?void 0:ee.coin_type,coin_type_b:te==null?void 0:te.coin_type,tick_lower:r,tick_upper:w,slippage:Number(S),swap_slippage:Number(A)};return le&&(X.farms_pool_id=n==null?void 0:n.farmsPoolAddress),console.log("ðŸš€ ~ useZapSubmit ~ getZapWithdrawTx params:",X),await U.Zap.buildWithdrawPayload(X)},ye=d.useRef({}),Re=d.useRef(null),ue=d.useRef("");d.useEffect(()=>{ye.current={currentZapToken:s,zapApiPool:n,zapAmount:i,currentSqrtPrice:k==null?void 0:k.currentSqrtPrice,lower:T,upper:W,liquidity:q,zapSlippage:A,zapAmountRate:e,marketPrice:de}},[s==null?void 0:s.coin_type,n==null?void 0:n.poolAddress,i,k==null?void 0:k.currentSqrtPrice,T,W,q,A,e,de]);const Y=d.useMemo(()=>!!(s!=null&&s.decimals&&b(i).mul(Math.pow(10,s==null?void 0:s.decimals)).eq(1)),[s==null?void 0:s.decimals,i]),G=async y=>{var N,J,D,z,Le;console.log("ðŸš€ ~ preZapIn ~ preZapIn:",G);const{currentZapToken:h,zapApiPool:r,zapAmount:w,currentSqrtPrice:$,lower:le,upper:ee,liquidity:te,zapSlippage:X,marketPrice:re}=ye.current;_(!0);const me=(h==null?void 0:h.coin_type)===((N=r==null?void 0:r.tokenA)==null?void 0:N.coin_type)?"OnlyCoinA":"OnlyCoinB",Ce=Ze(b(w).mul(Math.pow(10,h==null?void 0:h.decimals)).toString(),0);console.log("ðŸš€ ~ preZapIn ~ options.zapSlippage:",S,X);const Se={pool_id:r==null?void 0:r.poolAddress,tick_lower:le,tick_upper:ee,current_sqrt_price:$,slippage:Number(S),swap_slippage:Number(X),mark_price:re};console.log("ðŸš€ ~ preZapIn ~ options123:",Se);const fe={mode:me,coin_amount:Ce,coin_type_a:(J=r==null?void 0:r.tokenA)==null?void 0:J.coin_type,coin_type_b:(D=r==null?void 0:r.tokenB)==null?void 0:D.coin_type,coin_decimal_a:(z=r==null?void 0:r.tokenA)==null?void 0:z.decimals,coin_decimal_b:(Le=r==null?void 0:r.tokenB)==null?void 0:Le.decimals,max_remain_rate:.01};console.log("ðŸš€ ~ preZapIn ~ modeOptions:",fe);let _e;try{_e=await U.Zap.preCalculateDepositAmount(Se,fe),console.log("ðŸš€ ~ preZapIn ~ res:",_e)}catch(ce){console.log("ðŸš€ ~ preZapIn ~ error:",ce),E(!0)}y===ue.current&&R(_e),_(!1)},ne=async y=>{var Se,fe,_e,N,J;_(!0);const{currentZapToken:h,zapApiPool:r,zapAmount:w,currentSqrtPrice:$,lower:le,upper:ee,liquidity:te,zapSlippage:X}=ye.current,se=(h==null?void 0:h.coin_type)===((Se=r==null?void 0:r.tokenA)==null?void 0:Se.coin_type)?"OnlyCoinA":"OnlyCoinB";b(w).mul(Math.pow(10,h==null?void 0:h.decimals)).toString();const me={mode:se,pool_id:r==null?void 0:r.poolAddress,tick_lower:le,tick_upper:ee,current_sqrt_price:$,coin_type_a:(fe=r==null?void 0:r.tokenA)==null?void 0:fe.coin_type,coin_type_b:(_e=r==null?void 0:r.tokenB)==null?void 0:_e.coin_type,coin_decimal_a:(N=r==null?void 0:r.tokenA)==null?void 0:N.decimals,coin_decimal_b:(J=r==null?void 0:r.tokenB)==null?void 0:J.decimals};b(w).gte(g==null?void 0:g.balanceFormat)?me.burn_liquidity=te:me.burn_liquidity=Ze(b(te).mul(b(c).div(100)).toString(),0),console.log("ðŸš€ ~ preZapInRemove ~ options:",me);let Ce;try{Ce=await U.Zap.preCalculateWithdrawAmount(me),console.log("ðŸš€ ~ preZapInRemove ~ res:",Ce)}catch(D){console.log("ðŸš€ ~ preZapOut ~ error:",D),E(!0)}y===ue.current&&R(Ce),_(!1)},P=pt(G,300),ae=pt(ne,300);d.useEffect(()=>{Te()},[i,s==null?void 0:s.coin_type,k==null?void 0:k.currentSqrtPrice,T,W,c,e]);const Ee=()=>{var y;(y=Re.current)==null||y.reset()},Te=()=>{E(!1);const{zapAmount:y,zapAmountRate:h}=ye.current;if(console.log("ðŸš€ ~ reCalculateZapData ~ zapAmount:",y),console.log("ðŸš€ ~ reCalculateZapData ~ zapAmountRate:",h),console.log("ðŸš€ ~ reCalculateZapData ~ zapAmountRate:",h),!Number(y)||b(h).gt(1e4)||b(h).lt(1e-4)||Y){const w=tt();ue.current=w,R(void 0),_(!1);return}_(!0);const r=tt();ue.current=r,t=="Deposit"?P(r):ae(r)};return d.useEffect(()=>{Ee()},[i,n==null?void 0:n.poolAddress,t]),d.useEffect(()=>()=>{Ee(),ye.current=null},[]),{btnText:be.text,btnDisabled:be.disabled,handleZapIn:V,isPreLoading:x,getZapDepositToastInfo:F,getZapDepositTx:j,getZapWithdrawToastInfo:M,getZapWithdrawTx:pe,zapProgressRef:Re,handleResetZapProgress:Ee,reCalculateZapData:Te,isMinimumPrecision:Y,zapNotAvailable:L}}function Gi({action:t,onClick:i,hideAmountInfo:s,otherLoading:e,isReverse:g,inConfirmModal:x,hideDepositRatio:a}){const{currentAccount:n,onWalletModal:_}=Ke(),{btnDisabled:T,btnText:W,handleZapIn:q,zapProgressRef:k,reCalculateZapData:R,isMinimumPrecision:c,zapNotAvailable:m}=Et(t),l=()=>{if(!n){_(!0);return}i?i():q()},[Z,U]=d.useState(!1),{zapSlippage:A}=Qe(),{getTokenAmountValue:S}=it(),{zapSlideValue:C,preDepositeData:u,currentTokens:L,currentZapToken:E,zapAmount:Q,isPreLoading:I,zapApiPool:v,lower:de,upper:be,zapCurrPriceData:V,posOriginAmounts:p,zapAmountRate:F}=Ye(),{fromCoin:j,toCoin:M}=d.useMemo(()=>{var D;const N=E,J=(D=L==null?void 0:L.filter(z=>(z==null?void 0:z.coin_type)!==(E==null?void 0:E.coin_type)))==null?void 0:D[0];return t==="Withdraw"?{fromCoin:J,toCoin:N}:{fromCoin:N,toCoin:J}},[E==null?void 0:E.coin_type,L,t]),{fromAmount:pe,toAmount:ye}=d.useMemo(()=>{var D,z;let N,J;return u&&(j!=null&&j.coin_type)&&(M!=null&&M.coin_type)&&(N=Fe((D=u==null?void 0:u.swap_result)==null?void 0:D.swap_in_amount,j==null?void 0:j.decimals),J=Fe((z=u==null?void 0:u.swap_result)==null?void 0:z.swap_out_amount,M==null?void 0:M.decimals)),{fromAmount:N,toAmount:J}},[u,j==null?void 0:j.coin_type,M==null?void 0:M.coin_type]),{sources:Re,priceImpactTextInfo:ue,showPriceImpactTips:Y}=ri(j,M,pe,ye),[G,ne]=d.useState(!1),P=()=>{ne(!G)},ae=d.useMemo(()=>ye?ke(b(ye).sub(b(ye).mul(A)).toString()):"--",[A,ye]),Ee=d.useMemo(()=>{var N;return(N=u==null?void 0:u.swap_result)==null?void 0:N.swap_price},[u]),Te=()=>{console.log("ZapRoute handleRefresh"),R()},{tokenA:ve,tokenB:je,coinAmountA:y,coinAmountB:h,displayCoinAmountA:r,displayCoinAmountB:w,displayTokenA:$,displayTokenB:le,displayAmountARate:ee,displayAmountBRate:te,amountARate:X,amountBRate:re}=d.useMemo(()=>{let N,J,D,z,Le,ce;const Me=v==null?void 0:v.isReverse;return u&&(v!=null&&v.poolAddress)&&(D=v==null?void 0:v.tokenA,z=v==null?void 0:v.tokenB,N=Fe(u==null?void 0:u.amount_a,D==null?void 0:D.decimals),J=Fe(u==null?void 0:u.amount_b,z==null?void 0:z.decimals),Le=S(D==null?void 0:D.coin_type,N),ce=S(z==null?void 0:z.coin_type,J)),{displayCoinAmountA:Me?J:N,displayCoinAmountB:Me?N:J,displayTokenA:Me?z:D,displayTokenB:Me?D:z,displayAmountARate:Me?ce:Le,displayAmountBRate:Me?Le:ce,tokenA:D,tokenB:z,coinAmountA:N,coinAmountB:J,amountARate:Le,amountBRate:ce}},[u,v==null?void 0:v.poolAddress]),{originPosAmountA:se,originPosAmountB:me}=d.useMemo(()=>{let N="",J="";if(v!=null&&v.poolAddress&&(p!=null&&p.coinAmountA||p!=null&&p.coinAmountB)){const D=v==null?void 0:v.tokenA,z=v==null?void 0:v.tokenB;N=Fe(p==null?void 0:p.coinAmountA,D==null?void 0:D.decimals),J=Fe(p==null?void 0:p.coinAmountB,z==null?void 0:z.decimals)}return{originPosAmountA:N,originPosAmountB:J}},[p,v==null?void 0:v.poolAddress]),[Ce,Se]=d.useState({});d.useEffect(()=>{if(y||h){const N=mi(de,be),J=gi(y||0,h||0,V==null?void 0:V.currentPrice,N);Se(J)}},[y,h,V==null?void 0:V.currentPrice]);const{isApp:fe}=ut(),_e=d.useMemo(()=>b(F).gt(1e4)?"In Zap mode, each request should be within $10,000.":b(F).gt(0)&&(b(F).lt(1e-4)||c)?"The input is too small. Zap mode is not available.":m?"Zap mode is not available.":"",[F,t,c,m]);return o.jsx(o.Fragment,{children:o.jsxs(Ae,{gap:"0px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:x?"rgba(0,0,0,0)":"border",bg:x?"none":"bg_six",p:{base:x?"0px":"0px 8px",lg:x?"0px":"0px 16px"},children:[!x&&o.jsx(De,{w:{base:"calc(100% + 16px)",lg:"calc(100% + 34px)"},h:"52px",margin:"-1px -1px 0px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:(I||T||e||Y||!!_e)&&(n==null?void 0:n.address),isLoading:I||e,onClick:l,children:W}),!!Number(Q)&&o.jsx(Ae,{w:"100%",gap:"0px",children:_e?o.jsx(Ve,{w:"100%",p:"12px 0px",children:o.jsx(yt,{tips:_e})}):o.jsxs(o.Fragment,{children:[Y&&o.jsx(Ve,{w:"100%",pt:"12px",children:o.jsx(yt,{tips:"High price difference. Be cautious before submitting your order."})}),x&&o.jsxs(K,{w:"100%",justify:"space-between",children:[o.jsx(H,{fontSize:"14px",color:"text_paragraph",children:"Zap Amount"}),o.jsx(H,{fontSize:"14px",color:"text_caption",children:Lt(F,2)})]}),Number(Q)>0&&Number(pe)>0&&o.jsxs(Ae,{w:"100%",gap:"12px",pt:"16px",pb:x?"0px":"16px",children:[o.jsx(K,{w:"100%",justify:"space-between",children:o.jsx(H,{fontSize:"14px",color:"text_paragraph",children:"Zap Route"})}),o.jsxs(Ae,{w:"100%",bg:x?"bg_secondary":"none",borderRadius:"12px",p:x?"0px 12px":"0px",gap:x?"4px":"12px",border:"1px solid",borderColor:x?"border":"rgba(0,0,0,0)",flexDirection:t==="Withdraw"?"column-reverse":"column",children:[o.jsxs(Ae,{w:"100%",align:"flex-start",bg:x?"none":"button_outline_hov_bg",p:x?"16px 0px":"16px 12px",borderRadius:x?"0px":"12px",borderBottom:"1px solid",borderColor:x?"border":"rgba(0,0,0,0)",children:[o.jsx(K,{w:"100%",align:"center",children:o.jsxs(Ae,{w:"100%",align:"flex-start",onClick:()=>{U(!Z)},children:[o.jsx(K,{w:"100%",justify:"flex-start",children:I?o.jsx(Je,{w:"100%",h:"16px"}):o.jsxs(H,{w:"100%",fontSize:"12px",color:"text_caption",textAlign:"left",children:["Swap ",ke(pe)," ",j==null?void 0:j.symbol," for ",ae," ",M==null?void 0:M.symbol]})}),I?o.jsx(Je,{w:"150px",h:"16px"}):o.jsxs(K,{w:"100%",justify:"space-between",align:{base:"flex-start",lg:"center"},flexDirection:{base:"column",lg:"row"},children:[o.jsxs(K,{gap:"4px",justify:"space-between",w:{base:"100%",lg:"unset"},children:[o.jsxs(K,{gap:"4px",children:[o.jsx(ui,{callbackInterval:20,ref:k,min:0,max:20,size:"14px",noBg:!0,thickness:"16px",onClick:Te}),o.jsxs(K,{flexWrap:"wrap",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Price Difference"}),o.jsx(H,{color:ue==null?void 0:ue.textColor,fontSize:"12px",children:ue==null?void 0:ue.priceImpactText}),Re==null?void 0:Re.map(N=>o.jsx(ci,{market:N},N))]})]}),fe&&o.jsx(Pe,{xlinkHref:"#icon-icon_arrow",svgW:"12px",svgH:"12px",transform:Z?"rotate(180deg)":"rotate(0deg)"})]}),o.jsxs(K,{align:"center",gap:"2px",children:[x?o.jsxs(K,{gap:"4px",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Slippage"}),o.jsxs(H,{fontSize:"12px",color:"text_caption",children:[b(A).mul(100).toString(),"%"]})]}):o.jsx(di,{slippageType:"zap",toolTipText:"Slippage Tolerance"}),!fe&&o.jsx(Pe,{xlinkHref:"#icon-icon_arrow",svgW:"12px",svgH:"12px",transform:Z?"rotate(180deg)":"rotate(0deg)"})]})]})]})}),Z&&o.jsxs(K,{w:"100%",justify:"space-between",bg:"bg_fifth",h:"52px",borderRadius:"12px",p:"0px 8px",children:[o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:"Swap Rate"}),I?o.jsx(Je,{w:"150px",h:"16px"}):o.jsxs(K,{children:[G?o.jsxs(H,{fontSize:"12px",color:"text_caption",children:["1 ",M==null?void 0:M.symbol," = ",gt(1/Ee)," ",j==null?void 0:j.symbol]}):o.jsxs(H,{fontSize:"12px",color:"text_caption",children:["1 ",j==null?void 0:j.symbol," = ",gt(Ee)," ",M==null?void 0:M.symbol]}),o.jsx(Pe,{xlinkHref:"#icon-icon_swap1",svgW:"16px",svgH:"16px",onClick:P})]})]})]}),o.jsxs(Ae,{w:"100%",p:x?"16px 0px":"16px 12px",bg:x?"none":"button_outline_hov_bg",borderRadius:"12px",gap:"12px",children:[a?o.jsx(H,{w:"100%",textAlign:"left",fontSize:"12px",color:"text_caption",children:t==="Withdraw"?"Expected Amounts of Remove":"Expected Amounts to Add"}):o.jsx(pi,{tokenA:ve,tokenB:je,percentMap:Ce,type:"zap",isLoading:I,isReverse:g,label:"Expected Amounts to Add"}),o.jsxs(K,{bg:"text_highlight_opacity.10",w:"100%",h:"52px",justify:"space-between",align:"center",borderRadius:"12px",children:[o.jsx(St,{token:g?je:ve,amount:g?ke(C==100?me:h):ke(C==100?se:y),rate:g?re:X,loading:I}),o.jsx(Ve,{bg:"bg_fifth",w:"1px",h:"100%"}),o.jsx(St,{token:g?ve:je,amount:g?ke(C==100?se:y):ke(C==100?me:h),loading:I,rate:g?X:re,align:"right"})]})]})]})]})]})})]})})}function St({token:t,amount:i,rate:s,loading:e,align:g="left"}){return o.jsxs(K,{flex:"1",gap:"8px",p:"12px",justify:"flex-start",flexDirection:g==="left"?"row":"row-reverse",children:[e?o.jsx(Ut,{size:"20px"}):o.jsx(ii,{imageUrl:t==null?void 0:t.logo_url,w:"20px",h:"20px"}),o.jsxs(Ae,{align:`flex-${g==="left"?"start":"end"}`,gap:"4px",children:[e?o.jsx(Je,{w:"50px",h:"14px"}):o.jsxs(H,{fontSize:"12px",color:"text_caption",textAlign:`${g==="left"?"left":"right"}`,children:[i," ",Ct(t==null?void 0:t.symbol,10)]}),e?o.jsx(Je,{w:{base:"70px",lg:"100px"},h:"12px"}):o.jsx(H,{fontSize:"12px",color:"text_paragraph",children:Lt(s,2)})]})]})}function zi(t,i){return{currentApiPoolInfo:d.useMemo(()=>{if(t!=null&&t.clmmPool)return i==null?void 0:i[t==null?void 0:t.clmmPool]},[t==null?void 0:t.clmmPool,i])}}function Xi(){const{setCurrentPriceData:t}=Ft();return{getCurrentPrice:(s,e)=>{if(e.tokenA&&e.tokenB){const g=e.tokenA.decimals,x=e.tokenB.decimals,a=vt.sqrtPriceX64ToPrice(new jt(s),g,x).toString(),n=b(1).div(a).toString(),_={currentPrice:a,reverseCurrentPrice:n,currentSqrtPrice:s,pool:e.poolAddress};t(_)}}}}function Ji(){const t=et("clmm"),{fetchTokenInfo:i}=Si(),{contractPoolInfo:s,setContractPoolInfo:e,setContractPoolInfoLoading:g,apiPoolInfo:x,setApiPoolInfo:a,setApiPoolInfoLoading:n}=Ft(),{setFromToken:_,setToToken:T}=Wt(),{getCurrentPrice:W}=Xi(),q=async R=>{g(!0);let c=null;try{const m=await t.Pool.getPool(R);if(c={...m,coinAmountA:String(m.coin_amount_a),coinAmountB:String(m.coin_amount_b),coinTypeA:m.coin_type_a,coinTypeB:m.coin_type_b,poolAddress:m.id,poolType:m.pool_type,tickSpacing:Number(m.tick_spacing),current_sqrt_price:String(m.current_sqrt_price),fee_growth_global_a:String(m.fee_growth_global_a),fee_growth_global_b:String(m.fee_growth_global_b),fee_protocol_coin_a:String(m.fee_protocol_coin_a),fee_protocol_coin_b:String(m.fee_protocol_coin_b),fee_rate:String(m.fee_rate),liquidity:String(m.liquidity),rewarder_infos:m.rewarder_infos.map(l=>({coinAddress:l.coin_type,emissionsEveryDay:l.emissions_per_second,emissions_per_second:String(l.emissions_per_second),growth_global:String(l.growth_global)}))},console.log(R,c,"poolAddress"),console.log("ðŸš€ ~ getContractPoolInfo ~ poolInfo:",{poolInfo:c,apiPoolInfo:x}),(x==null?void 0:x.displayTokenA)===void 0){const l=await k(c);l&&(a(l),n(!1),W(c==null?void 0:c.current_sqrt_price,l),_(l==null?void 0:l.displayTokenA),T(l==null?void 0:l.displayTokenB))}}catch(m){console.log("getContractPoolInfo ~ error:",m)}finally{g(!1)}return s?c?(e(c),c):s:(e(c||null),c)};async function k(R){const c=await i(R.coinTypeA),m=await i(R.coinTypeB);if(c&&m){const l=`${c==null?void 0:c.symbol} - ${m==null?void 0:m.symbol}`,Z=We(R.fee_rate).div(100).toString(),U=We(R.fee_rate).div(1e4).toString(),A=We(Z).div(100).toString()+"%",S=!xi(R.coinTypeA,R.coinTypeB);return{poolAddress:R.poolAddress,name:l,isReverse:S,tokenA:c,tokenB:m,displayTokenA:S?m:c,displayTokenB:S?c:m,haveMining:!1,miningRewardList:null,miningAprList:null,haveFarming:!1,farmsRewarderList:null,farmsApr:"",farmingAprDisplay:"",feeApr:"",feeAprDisplay:"",miningAprTotal:"",feeAndMiningAprDisplay:"",totalAprDisplay:"",fee:U,feeRate:Z,feeDisplay:A,tvlDisplay:"0",volume24Display:"0",fees24Display:"0",isVaults:!1,tickSpacing:R.tickSpacing.toString()}}}return{getContractPoolInfo:q}}function Ki(){const t=et("clmm"),i=et("farms"),{slippage:s}=Qe();return{getRemoveTsPayload:async x=>{const{posId:a,poolAddress:n,coinTypeA:_,coinTypeB:T,amountA:W,amountB:q,liquidity:k,lowerTick:R,upperTick:c,posType:m,rewarderCoinTypes:l,farmsPoolId:Z,farmsPosId:U}=x,A=b(W).mul(b(1).sub(b(s))),S=b(q.toString()).mul(b(1).sub(b(s)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",A,S),m==="clmm"){const C={coin_type_a:_,coin_type_b:T,pool_id:n,pos_id:a,delta_liquidity:k,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_fee:!0,rewarder_coin_types:l};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",C);const u=await t.Position.removeLiquidityPayload(C),L={action:rt.DecreaseLiquidity,txbParams:C};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",u,L),{tx:u,msafeParams:L}}else{const C={pool_id:Z||"",coin_type_a:_,coin_type_b:T,position_nft_id:U||"",clmm_pool_id:n,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:l,delta_liquidity:k,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",C);const u=await i.Farms.removeLiquidityPayload(C),L={action:"FarmingDecreaseLiquidity",txbParams:C};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",L,u),{tx:u,msafeParams:L}}},getCloseTsPayload:async x=>{const{posId:a,poolAddress:n,coinTypeA:_,coinTypeB:T,amountA:W,amountB:q,liquidity:k,lowerTick:R,upperTick:c,posType:m,rewarderCoinTypes:l,farmsPoolId:Z,farmsPosId:U}=x,A=b(W).mul(b(1).sub(b(s))),S=b(q.toString()).mul(b(1).sub(b(s)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",x,A.toString(),S.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",l),m==="clmm"){const C={coin_type_a:_,coin_type_b:T,pool_id:n,pos_id:a||"",min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",rewarder_coin_types:l,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",C);const u=await t.Position.closePositionPayload(C),L={action:rt.RemoveLiquidity,txbParams:C};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",u,L),{tx:u,msafeParams:L}}else{const C={pool_id:Z||"",coin_type_a:_,coin_type_b:T,position_nft_id:U||"",clmm_pool_id:n,min_amount_a:Ze(A.toString(),0)||"",min_amount_b:Ze(S.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:l,delta_liquidity:k,unstake:!0,close_position:!0,clmm_position_id:a};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",C);const u=await i.Farms.removeLiquidityPayload(C),L={action:rt.FarmingRemoveLiquidity,txbParams:C};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",L,u),{tx:u,msafeParams:L}}}}}function Qi(){const{transactionConfirmation:t}=yi(),{getTokenAmountValue:i}=it(),{getCoinAmountFromLiquidity:s}=bi(),{currentPosBaseInfo:e,posLiquidityData:g,posRewardsData:x,setPosBaseList:a,posApiPoolData:n}=st(),{getCurrentPosBaseInfo:_}=Zt(),{preAdd:T}=wi(),{getRemoveTsPayload:W,getCloseTsPayload:q}=Ki(),{getTokenALock:k,getTokenBLock:R}=qt(),{setTokenAmountAfterA:c,setTokenAmountAfterB:m,currentPosPoolInfo:l,currentPoolSqrtPrice:Z,setIsFixedDisplayTokenA:U,slideValue:A,setSlideValue:S,isFixedDisplayTokenA:C,isPosDetailRefresh:u,currentPosDetailTab:L,useZapIn:E,curPosContractPoolInfo:Q}=ot(),{getZapWithdrawToastInfo:I,getZapWithdrawTx:v,reCalculateZapData:de}=Et("Withdraw"),{getContractPoolInfo:be}=Ji(),{preDepositeData:V,currentZapToken:p,setZapAmount:F,zapAmount:j}=Ye(),{currentApiPoolInfo:M}=zi(e,n),pe=x[e==null?void 0:e.posId],{mevProtect:ye,maxCapForGas:Re,transactionMode:ue,customGasPrice:Y}=Qe(),[G,ne]=d.useState(""),[P,ae]=d.useState(""),[Ee,Te]=d.useState(!1),[ve,je]=d.useState(""),y=e==null?void 0:e.displayTokenA,h=e==null?void 0:e.displayTokenB,r=g[e==null?void 0:e.posId],w=ke(r==null?void 0:r.displayCoinAmountA,void 0,!0),$=ke(r==null?void 0:r.displayCoinAmountB,void 0,!0),le=i(y==null?void 0:y.coin_type,G),ee=i(h==null?void 0:h.coin_type,P);d.useEffect(()=>{if(+G||+P){const f=+G,O=+P,B=b(+w).sub(f),oe=b($).sub(O);console.log("ðŸš€ ~ useEffect ~ numA.gt(0):",B.toString(),oe.toString()),c(B.gt(0)?B.toString():"0"),m(oe.gt(0)?oe.toString():"0")}else c(""),m("")},[G,P]);const[te,X]=d.useState(""),re=d.useRef("");d.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",te),re.current=te},[te]);const se=()=>{ne(""),ae(""),Te(!1),X(""),S("--")},me=d.useMemo(()=>k(e,Q),[Q==null?void 0:Q.current_tick_index,e]),Ce=d.useMemo(()=>R(e,Q),[Q==null?void 0:Q.current_tick_index,e]),Se=e!=null&&e.isReverse?Ce:me,fe=e!=null&&e.isReverse?me:Ce;d.useEffect(()=>{se()},[Se,fe]);const _e=pt((f,O,B)=>{var ze,Oe;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",f);const oe=O?(ze=e==null?void 0:e.displayTokenA)==null?void 0:ze.decimals:(Oe=e==null?void 0:e.displayTokenB)==null?void 0:Oe.decimals,ge=si(f,oe),ie=e==null?void 0:e.tokenA,xe=e==null?void 0:e.tokenB,qe=e==null?void 0:e.lowerTick,Ue=e==null?void 0:e.upperTick,he=e==null?void 0:e.isReverse,we={amount:ge,tokenA:ie,tokenB:xe,isTokenA:he?!O:O,lowerTick:qe,upperTick:Ue,curSqrtPrice:Z,isReverse:he,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",we);const{displayCoinAmountA:Ne,displayCoinAmountB:Be,liquidityAmount:$e}=T(we);if(console.log("ðŸš€ ~ debouncedPreCalculate:",Ne,Be,we,O,B),re.current===B){je($e),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",ve,$e);const Xe=xt(b($e).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);b(Xe).gt(100)||b(Xe).eq(100)?(S(100),ne(w),ae($)):(S(Xe),O?ae(Be||""):ne(Ne||""))}else se();Te(!1)},500),[N,J]=d.useState(!1),D=()=>{if((G||P)&&oi(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",N,A),A==="--")return;if(N||Number(A)==100)Le(Number(A));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const f=C?G:P;if(+f){const O=tt();X(O),_e(f,C,O)}}}};d.useEffect(()=>{L=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",u,w,$),D())},[w,$]);const z=(f,O)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",f),J(!1),je(""),!f){se();return}if(Te(!0),U(O),O){if(ne(f),b(f).eq(w)){ae($),S(100),X(""),Te(!1);return}}else if(ae(f),b(f).eq($)){ne(w),S(100),X(""),Te(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",f,+f),+f){const B=tt();X(B),console.log("ðŸš€ ~ handleAmountChange ~ params:",f),_e(f,O,B)}else Te(!1),O?ae(""):ne("")},Le=f=>{var O;if(J(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",w,$,f),E){const oe=((O=M==null?void 0:M.tokenA)==null?void 0:O.coin_type)===(p==null?void 0:p.coin_type)?at:lt;if(f===100)F(oe);else{const ge=b(oe).mul(b(f).div(100)).toString();F(ge)}}else if(f==100)ne(w),ae($);else{const B=e==null?void 0:e.tokenA,oe=e==null?void 0:e.tokenB,ge=ke(b(e==null?void 0:e.liquidity).mul(f).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,ge);const ie=e==null?void 0:e.lowerTick,xe=e==null?void 0:e.upperTick,qe=e==null?void 0:e.isReverse,Ue={tokenA:B,tokenB:oe,liquidity:ge,currentSqrtPrice:Z,lowerTick:ie,upperTick:xe,roundUp:!1};try{const{amountA:he,amountB:He}=s(Ue);je(ge);const we=qe?He:he,Ne=qe?he:He;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",he,He),ne(b(we).gt(0)?we:""),ae(b(Ne).gt(0)?Ne:"")}catch(he){console.log("ðŸš€ ~ changeSlideFun ~ error:",he),ne(""),ae("")}}},{currentAccount:ce}=Ke(),Me=d.useMemo(()=>{const f={text:"Remove",disabled:!1};return ce!=null&&ce.address?!+G&&!+P?(f.text="Enter an amount",f.disabled=!0,f):!Se&&G&&b(G).gt(w||0)||!fe&&P&&b(P).gt($||0)?(f.disabled=!0,f.text="Invalid Amount",f):((e==null?void 0:e.posType)=="burn"&&(f.disabled=!0),f):(f.text="Connect Wallet",f.disabled=!1,f)},[G,P,w,$,ce==null?void 0:ce.address]),{signAndExecuteTransaction:Mt}=hi(),{fetchAccountBalance:Nt}=Ai(),[Vt,nt]=d.useState(!1),$t=wt(),Ot=async()=>{var B,oe,ge;nt(!0);const f=A==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",pe),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",l==null?void 0:l.miningRewardList);const O=f?!pe||(pe==null?void 0:pe.length)==0?(B=(l==null?void 0:l.miningRewardList)||[])==null?void 0:B.reduce((ie,xe)=>(ie.push(xe.coinType),ie),[]):(oe=pe||[])==null?void 0:oe.reduce((ie,xe)=>(ie.push(xe.coin_address),ie),[]):(ge=pe||[])==null?void 0:ge.reduce((ie,xe)=>(b(xe==null?void 0:xe.amount_owed).gt(0)&&ie.push(xe.coin_address),ie),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",O);try{let ie,xe,qe;if(E){const he=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;qe=I(Se,fe),t(qe),ie=await v(he,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,O,(e==null?void 0:e.posType)=="farms")}else{const he=e!=null&&e.isReverse?b(P).mul(Ie.pow(10,h.decimals)).toString():b(G).mul(Ie.pow(10,y.decimals)).toString(),He=e!=null&&e.isReverse?b(G).mul(Ie.pow(10,y.decimals)).toString():b(P).mul(Ie.pow(10,h.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",l,pe,O);const we={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:he,amountB:He,liquidity:ve,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:O};(e==null?void 0:e.posType)=="farms"&&(we.farmsPoolId=e==null?void 0:e.farmsPool,we.farmsPosId=e==null?void 0:e.id),qe={getShowInfo:(Be,$e)=>{const ze="Remove "+[bt(G,y==null?void 0:y.symbol),bt(P,h==null?void 0:h.symbol)].filter(Boolean).join(" and "),Oe={modalDescriptionText:ze,toastTitleText:ze};if(Be==="success"){let Xe=G,Dt=P;$e&&(Xe=Ge($e,y)||G,Dt=Ge($e,h)||P),Oe.toastDescriptionContent="",Oe.modalDescriptionText="",Oe.toastTitleText="Remove Liquidity Successful"}return Oe}},t(qe),console.log("ðŸš€ ~ toAdd ~ params:",ve,f,A,we);const Ne=f?await q(we):await W(we);ie=Ne.tx,xe=Ne.msafeParams}const Ue=await Mt(ie,qe,{useMev:ye,useFastMode:ue==="Fast Mode",maxCapForGas:Re,customGasPrice:Y,msafeParams:xe});console.log("ðŸš€ ~ toClaim ~ res:",Ue),Ue?(Nt(),se(),F(""),f?(a([]),$t("/pools?tab=positions")):_(ce==null?void 0:ce.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&be(e==null?void 0:e.clmmPool).then(he=>{console.log("ðŸš€ ~ toClaim ~ res:",he),E?de():D()}),nt(!1)}catch(ie){D(),nt(!1),console.log("ðŸš€ ~ toClaim ~ error:",ie)}};d.useMemo(()=>{if(e!=null&&e.posId){const f=e==null?void 0:e.tokenA,O=e==null?void 0:e.tokenB,B=e==null?void 0:e.liquidity,oe=e==null?void 0:e.lowerTick,ge=e==null?void 0:e.upperTick;s({tokenA:f,tokenB:O,liquidity:B,currentSqrtPrice:Z,lowerTick:oe,upperTick:ge,roundUp:!1})}},[e==null?void 0:e.posId,Z]);const{onlyAmountA:at,onlyAmountB:lt}=d.useMemo(()=>({onlyAmountA:r==null?void 0:r.onlyAmountA,onlyAmountB:r==null?void 0:r.onlyAmountB}),[r]);return d.useEffect(()=>{var f;if(E)if(j){const B=((f=M==null?void 0:M.tokenA)==null?void 0:f.coin_type)===(p==null?void 0:p.coin_type)?at:lt;if(B){const oe=xt(b(j).div(B).mul(100).toString(),2,!0);S(oe)}else S("--")}else S("--");else S("--")},[E,j]),d.useEffect(()=>{if(L!=="increase"&&E){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",V),V!=null&&V.amount_a||V!=null&&V.amount_b){const f=e==null?void 0:e.tokenA,O=e==null?void 0:e.tokenB,B=Fe(V==null?void 0:V.amount_a,f==null?void 0:f.decimals),oe=Fe(V==null?void 0:V.amount_b,O==null?void 0:O.decimals);if(A==100)ne(String(w)),ae(String($));else{const ge=e!=null&&e.isReverse?oe:B,ie=e!=null&&e.isReverse?B:oe;ne(b(ge).gt(w)?String(w):ge),ae(b(ie).gt($)?String($):ie)}return}ne(""),ae("")}},[E,V,A]),d.useEffect(()=>{ne(""),ae("")},[]),{tokenAmountA:G,tokenAmountB:P,resetInputAmount:se,showDisplayTokenALock:Se,showDisplayTokenBLock:fe,currentPosLiquidityData:r,tokenABalance:w,tokenBBalance:$,displayTokenA:y,displayTokenB:h,tokenAmountValueA:le,tokenAmountValueB:ee,preRemoveLoading:Ee,handleAmountChange:z,btnStatusText:Me,changeSlideFun:Le,toRemove:Ot,isRemoveLoading:Vt,onlyAmountA:at,onlyAmountB:lt,currentApiPoolInfo:M,currentPoolSqrtPrice:Z}}const Yi="/assets/img_farming@2x-CwRUS-3E.png";function Bi({haveFarming:t}){ut();const{currentPosBaseInfo:i,farmsPosRewardsData:s,posPoolsRelatedData:e,posBaseListLoading:g,posPoolsOriginalData:x}=st(),{currentPosPoolInfo:a}=ot(),{currentAccount:n}=Ke(),{getCurrentPosBaseInfo:_}=Zt(),{getFarmsRewardsData:T}=fi(),{getClmmPosName:W}=qt(),q=d.useMemo(()=>{var p;if(i!=null&&i.tokenName)return i==null?void 0:i.tokenName;{const F=(p=x==null?void 0:x[i==null?void 0:i.clmmPool])==null?void 0:p.index;return W(i==null?void 0:i.index,F)||""}},[i==null?void 0:i.tokenName,i==null?void 0:i.index,i==null?void 0:i.clmmPool,x]),k=e[i==null?void 0:i.posId],R=(k==null?void 0:k.currentStatus)=="Active",c=s[i==null?void 0:i.id],m=(a==null?void 0:a.farmsRewarderList)||[],l=c==null?void 0:c.reduce((p,F)=>p+F.display_amount_owed,0),{toStakePos:Z,toUnStakePos:U,toClaimPos:A,unstakeLoading:S,claimLoading:C}=Ri(),u=wt(),L=p=>{u(`/position-detail/${p[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{_(n==null?void 0:n.address,p[0].parsedJson.wrapped_position_id,!0)},2e3)},E=async()=>{Z(i==null?void 0:i.id,a==null?void 0:a.farmsPoolAddress,q,L)},Q=()=>{u(`/position-detail/${i==null?void 0:i.posId}`,{replace:!0}),setTimeout(()=>{_(n==null?void 0:n.address,i==null?void 0:i.posId,!0)},2e3)},I=async()=>{U(i==null?void 0:i.id,i==null?void 0:i.farmsPool,q,Q)},v=()=>{setTimeout(()=>{T([i])},2e3)},de=async()=>{A(i==null?void 0:i.id,i==null?void 0:i.farmsPool,v)},be=d.useMemo(()=>(c==null?void 0:c.length)>0?c.reduce((p,F)=>We(p).plus(F==null?void 0:F.display_amount_owed).toString(),"0"):"0",[c,n==null?void 0:n.address,C,S]),V=d.useMemo(()=>i&&a?i.posType=="clmm"&&a.haveFarming===!0:!1,[i==null?void 0:i.posType,a==null?void 0:a.haveFarming]);return!t&&We(l).eq(0)?null:o.jsx(o.Fragment,{children:((a==null?void 0:a.farmsPoolAddress)||We(be).gt(0))&&o.jsxs(Ae,{w:"100%",children:[t&&o.jsxs(K,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Yi,bgSize:"100% 100%",justify:"space-between",children:[o.jsxs(Ae,{align:"flex-start",children:[o.jsxs(K,{children:[o.jsx(Ht,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),o.jsx(H,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),o.jsx(H,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),o.jsxs(K,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[o.jsx(H,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),o.jsx(H,{color:"primary",fontSize:"12px",fontWeight:"500",children:o.jsx(ki,{poolInfo:a,isPosition:!0,showAprSize:"12px"})}),o.jsxs(K,{gap:"4px",cursor:"pointer",onClick:()=>u("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[o.jsx(H,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),o.jsx(Pe,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),o.jsxs(mt,{mt:t?"-20px":"0px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:t?"0 0 12px 12px":"12px",borderTop:t?"none":"border",children:[o.jsx(H,{children:"Farming Rewards"}),o.jsx(K,{w:"100%",flexWrap:"wrap",children:(c==null?void 0:c.length)>0&&We(be).gt(0)?c==null?void 0:c.map(p=>{var F;return o.jsx(Gt.Fragment,{children:We(p==null?void 0:p.display_amount_owed).gt(0)&&o.jsx(ft,{coinType:(F=p==null?void 0:p.token)==null?void 0:F.coin_type,amount:p==null?void 0:p.display_amount_owed,tokenInfo:p==null?void 0:p.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},p==null?void 0:p.coinType)},p==null?void 0:p.rewarder_type)}):(m==null?void 0:m.length)>0?m==null?void 0:m.map(p=>o.jsx(ft,{coinType:p==null?void 0:p.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},p==null?void 0:p.coinType)):o.jsx(H,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),o.jsxs(K,{w:"100%",justify:"space-between",mt:"16px",children:[(i==null?void 0:i.posType)=="farms"&&o.jsx(De,{disabled:C||S,isLoading:S,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:I,children:"Unstake"}),V&&!R&&o.jsx(Ve,{w:"50%",sx:{">button":{w:"100%"}},children:o.jsx(ni,{placement:"top",tooltip:o.jsx(H,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:o.jsx(Ve,{w:"100%",children:o.jsx(De,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),V&&R&&o.jsx(De,{disabled:C||S,isLoading:S,h:"40px",w:"50%",fontSize:"14px",onClick:E,children:"Stake"}),o.jsx(De,{disabled:C||S||We(l).eq(0),isLoading:C,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:de,children:"Claim rewards"})]})]})]})})}const Ii="/assets/bg_alerts@2x-BsIoiXpE.png";function Pi({subscriptionSource:t,title:i="Range Alerts",description:s="Receive alerts via Telegram, SMS, or email when this position goes out of range.",wrapStyle:e={}}){const{getPositionNotifiStatus:g}=ht(),{isChecked:x,setIsChecked:a,notifiAuthenticated:n,notifiSourceGroups:_,setIsShowNotifi:T,notifiSubscriptionLoading:W,notifiStatus:q,notifiSources:k}=ai(),{currentAccount:R}=Ke(),{notifiUnSubscription:c,notifiSubscription:m}=_i(),{currentPosBaseInfo:l}=st();console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:29 ~ currentPosBaseInfo:",l),d.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: RangeAlerts.tsx:42 ~ notifiSubscriptionLoading:",W),R!=null&&R.address&&t=="PositionDetail"&&l&&q=="authenticated"&&!W){const{isSubscription:A}=g(l.posId,String(l.index));a(A)}},[R,t,l,n,_,W,k]);const{createNotifiSubscriptionVerify:Z}=ht(),U=async A=>{if(a(A),console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:46 ~ changeSwitch ~ checked:",A),A){const S=await Z();if(console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:49 ~ changeSwitch ~ canSubscription:",S),!S)return a(!1),!1}if(t=="AddLiquidity")a(A);else if(t=="PositionDetail")if(console.log("ðŸš€ðŸš€ðŸš€ ~ changeSwitch ~ checked:",A),A){const S={subscriptionSource:"PositionDetail",position:l==null?void 0:l.posId,pool:l==null?void 0:l.clmmPool,posIndex:String(l==null?void 0:l.index)};m(S)}else c(l==null?void 0:l.posId,l==null?void 0:l.clmmPool,l==null?void 0:l.index)};return d.useEffect(()=>()=>{a(!1)},[]),o.jsx(K,{w:"100%",bgImage:Ii,bgSize:"100% 100%",p:"16px",borderRadius:"8px",...e,children:o.jsxs(Ae,{w:"100%",gap:"8px",children:[o.jsxs(K,{w:"100%",justify:"space-between",children:[o.jsx(H,{color:"primary",children:i}),q=="authenticated"?o.jsx(Tt,{isChecked:x,disabled:W,onChange:A=>U(A.target.checked)}):o.jsx(De,{w:"112px",h:"28px",borderRadius:"8px",fontWeight:"500",fontSize:"14px",onClick:()=>T(!0),children:"Set up"})]}),o.jsx(H,{color:"primary_gray",lineHeight:"20px",textAlign:"left",children:s})]})})}function es(t){const{value:i,action:s,onChange:e}=t,{isApp:g}=ut();return o.jsx(mt,{padding:"6px 8px",borderRadius:"8px",width:"unset",children:o.jsxs(zt,{isLazy:!0,trigger:g?"click":"hover",placement:"top",autoFocus:!1,returnFocusOnClose:!1,children:[o.jsx(Xt,{children:o.jsxs(K,{h:"14px",cursor:"pointer",children:[o.jsxs(H,{whiteSpace:"nowrap",fontSize:"14px",color:i?"primary":"",fontWeight:"500",children:["Zap ",s==="Deposit"?"In":"Out"]}),o.jsx(Tt,{isChecked:i,onChange:()=>{e()}})]})}),o.jsx(Jt,{children:o.jsx(Kt,{p:"12px",lineHeight:"20px",fontSize:"12px",children:s=="Deposit"?"Through Zap-In, you can deposit your liquidity in single token or with customized token ratio. Tokens will be auto converted to match the required ratio. ":"Through Zap-Out, you can withdraw your liquidity in one token. The liquidity will be auto converted to one token you selected."})})]})})}function ts({action:t,haveZap:i,resetInputAmount:s}){const{useZapIn:e,setUseZapIn:g}=ot(),{setZapAmount:x,setPreDepositeData:a}=Ye(),n=()=>{s==null||s(),g(!e),x("")};return d.useEffect(()=>{g(!1),a(void 0)},[t]),o.jsxs(K,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[o.jsx(H,{color:"primary_gray",fontSize:"14px",children:t==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),o.jsx(es,{action:t,value:e,onChange:n})]})}function ks(){const{currentPosBaseInfo:t,posPoolsRelatedData:i,posApiPoolData:s}=st(),{isFixedDisplayTokenA:e,slideValue:g,setSlideValue:x,curPosContractPoolInfo:a,useZapIn:n,currentPosPoolInfo:_}=ot(),{tokenAmountA:T,tokenAmountB:W,tokenABalance:q,tokenBBalance:k,displayTokenA:R,displayTokenB:c,tokenAmountValueA:m,tokenAmountValueB:l,preRemoveLoading:Z,handleAmountChange:U,changeSlideFun:A,btnStatusText:S,toRemove:C,isRemoveLoading:u,showDisplayTokenALock:L,showDisplayTokenBLock:E,resetInputAmount:Q,onlyAmountA:I,onlyAmountB:v,currentApiPoolInfo:de,currentPoolSqrtPrice:be,currentPosLiquidityData:V}=Qi();d.useEffect(()=>()=>{Q()},[]);const p=j=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",j),j=="MAX"||j==100?(x(100),A(100)):(x(Number((j+"").split("%")[0])),A(Number((j+"").split("%")[0])))};d.useEffect(()=>x("--"),[]);const F=i[t==null?void 0:t.posId];return o.jsxs(Ae,{w:"100%",gap:"8px",children:[o.jsxs(Ve,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(de==null?void 0:de.haveZap)&&(t==null?void 0:t.posType)!=="burn"&&!L&&!E&&o.jsx(ts,{action:"Withdraw",resetInputAmount:Q}),n?o.jsx(Ui,{action:"Withdraw",apiPoolInfo:de,currentSqrtPrice:be,onlyAmountA:I,onlyAmountB:v,liquidity:t==null?void 0:t.liquidity,lowerTick:t==null?void 0:t.lowerTick,upperTick:t==null?void 0:t.upperTick,slideValue:String(g),currentPosLiquidityData:V,changeSlideValue:p}):o.jsx(o.Fragment,{children:o.jsx(Ti,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:q||"",value:T,amountValue:m,loading:!e&&Z,onChange:j=>{U(j,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:R,half:!1,lock:{isLock:t&&a&&L,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:k||"",value:W,amountValue:l,loading:e&&Z,onChange:j=>{U(j,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:c,half:!1,lock:{isLock:t&&a&&E,style:{borderRadius:"12px"}}},lock:{isLock:!t||!a||t&&(t==null?void 0:t.posType)=="burn",text:t&&(t==null?void 0:t.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(t==null?void 0:t.posType)!=="burn"&&o.jsxs(mt,{borderRadius:"12px",p:"16px",mt:"8px",children:[o.jsx(H,{color:"primary_gray",children:"Amount"}),o.jsx(ss,{percentage:g,onChange:j=>p(j)})]})]}),n?o.jsx(Gi,{action:"Withdraw",onClick:C,hideDepositRatio:!0,otherLoading:u,isReverse:t==null?void 0:t.isReverse}):o.jsx(De,{isLoading:u,onClick:C,disabled:S.disabled||u,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:S.text}),(t==null?void 0:t.posType)!=="burn"&&o.jsx(Bi,{haveFarming:_==null?void 0:_.haveFarming}),F&&(F==null?void 0:F.minPrice)!=="0"&&(F==null?void 0:F.maxPrice)!=="âˆž"&&o.jsx(Pi,{subscriptionSource:"PositionDetail"})]})}function is(t){const{percentage:i,onChange:s,wrapStyle:e,textFontSize:g,selectTabStyle:x,selectTabItemStyle:a,selectTabItemTextStyle:n,isShowPercentageText:_=!0,percentageTextMinW:T="62px"}=t,W=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}],q=d.useMemo(()=>i!==100?`${i}%`:"MAX",[i]);return o.jsxs(K,{w:"100%",...e,children:[_&&o.jsxs(H,{minW:T,fontSize:g,color:"text_caption",children:[i=="--"?"--":b(i).gt(0)&&Number(i)<.01?"<0.01":ke(i,2),"%"]}),o.jsx(kt,{type:"outlineTab",tabList:W,currentTab:q,handleChangeTab:k=>{k.label==="MAX"?s(100):s(k.label.replace("%",""))},wrapStyle:x,itemStyle:a,selectTabItemTextStyle:n})]})}function ss(t){const{percentage:i,onChange:s,percentageTextMinW:e}=t;return o.jsxs(Ve,{w:"100%",children:[o.jsx(is,{percentage:i,onChange:s,percentageTextMinW:e,wrapStyle:{justifyContent:"space-between",m:"10px 0"},selectTabStyle:{w:{base:"220px",lg:"310px"},h:"32px",p:"3px",borderRadius:"8px"},selectTabItemStyle:{flex:"1",fontSize:"14px",margin:"0px"},textFontSize:"24px"}),o.jsxs(Qt,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:i=="--"?0:Number(i),onChange:g=>s(g+"%"),children:[o.jsx(Yt,{children:o.jsx(Bt,{})}),o.jsx(It,{})]})]})}export{Bi as F,ss as P,Pi as R,ts as T,Gi as Z,Ji as a,Xi as b,Et as c,Vi as d,Ye as e,es as f,Ui as g,zi as h,ks as i,Wt as u};
//# sourceMappingURL=RemoveBlock-Do4y-GzG.js.map
>>>>>>> 618a0176653140f5c93e017a1cc36f7fe995b39f:dist/assets/RemoveBlock-Do4y-GzG.js
