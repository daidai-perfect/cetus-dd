import{j as e,a7 as ce,v as ue,ab as Te,H as g,V as w,T as i,C as se,f as he,aq as _e,R as ke,au as q,av as A,a as b,S as je,u as R,aw as He,ax as ze,ay as K,az as We}from"./vendor-DXHkIl66.js";import{u as Ee}from"./useGetPythLastPrice-CkO0L687.js";import{I as $,j as Q,a as ie,c as X,aq as me,B as le,v as be,F as re,Q as Ue,Z as Fe,O as ge,n as Oe,z as W,i as Ye,d as ve,a3 as Me}from"./index-COrObqhs.js";import{N as oe}from"./NoData-CqJO7NcS.js";import{f as Ce,v as Ne,g as qe,a as Ge,u as fe,h as $e,i as ne}from"./VaultsAprBlock-Cc_O_ENb.js";import{H as G}from"./HTextLabelBox-BHTpNjoy.js";import{A as Ae}from"./AumLimit-CRGbvanV.js";import{P as Qe}from"./PoweredByHaedal-990R--7x.js";import{V as we}from"./VTextLabelBox-BdnErnl8.js";import{u as Le}from"./useToken-tdeKOG5n.js";import{C as Ze}from"./CoinPairInfo-7k2UwLTZ.js";import{S as Je}from"./SearchInputBlock-DN2rxiUQ.js";import{C as Se}from"./CheckBox-rv3qIDs9.js";import{R as Ke}from"./RefreshButton-DMtB0j6U.js";import{S as Xe}from"./SortDropBlock-9CSyx9W_.js";import{u as Ie}from"./useTokenBalance-DKaSilR5.js";import{u as et}from"./useAccountBalance-JIpp1bm5.js";import{u as tt}from"./useInterval-Cb1zlf7x.js";import"./swapWidget-UE5Kw3h4.js";import"./useWrapPoolData-fdYmV8CX.js";import"./useFavoritePool-CH5NkXpI.js";import"./useGetPoolList-B9bUsMZ5.js";import"./useTransaction-19_gbWik.js";import"./useTrack-pnnm1Ell.js";import"./useSigner-C6u4-fR7.js";import"./global-DhYiu20h.js";import"./msafe-oYBkW7LJ.js";import"./index-BgfP77Mo.js";import"./v4-C6aID195.js";import"./useFindBestRouting-B2G_AVeI.js";import"./useSwapHelper-BEAhr1pE.js";import"./SingleTokenInfo-Cu4rhuHx.js";import"./CopyButton-0PPlBtQz.js";import"./index-BMgKM0Tl.js";import"./Loading-BH2b7hW0.js";import"./TooltipIcon-QGHwK_uy.js";function Ve(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:a}=l;return e.jsxs(ce,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(ue,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(ue,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg",svg:{fill:"text_caption"}},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:a||(()=>{}),children:e.jsx($,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function De(l){var u,f,D,_;const{apiInfo:r,logo_url:s,balanceDisplay:a,holdCoinAmounts:t,sharePoolRate:p,rewardPerA:j,rewardPerB:m}=l,v=Te(),{currentAccount:o,onWalletModal:d}=Q(),{isApp:n}=ie();return o?e.jsxs(ce,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{v(`/vaults-detail/${r.vaultsId}/${r.category}`)},children:[e.jsxs(g,{gap:"15px",children:[e.jsx(X,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(w,{gap:"4px",alignItems:"start",children:[e.jsx(i,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(i,{color:"text_caption",children:`${a||"0"} LP`})]})]}),e.jsx(ce,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:n?e.jsxs(e.Fragment,{children:[e.jsx(G,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(ce,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(g,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(i,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(i,{color:"text_caption",children:(u=r==null?void 0:r.displayTokenA)==null?void 0:u.symbol})]}),e.jsxs(g,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(i,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(i,{color:"text_caption",children:(f=r==null?void 0:r.displayTokenB)==null?void 0:f.symbol})]})]})}),e.jsx(G,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:`${me(p,2,6)}%`}),e.jsxs(ue,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(i,{color:"primary_gray",children:"Details"}),e.jsx(le,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(se,{w:"20px",h:"20px",children:e.jsx($,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{mr:"90px",children:e.jsx(we,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(g,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(i,{color:"text_caption",children:be(t==null?void 0:t.displayCoinA)}),e.jsx(i,{color:"text_caption",mr:"8px",children:(D=r==null?void 0:r.displayTokenA)==null?void 0:D.symbol}),e.jsx(X,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(i,{color:"text_caption",children:be(t==null?void 0:t.displayCoinB)}),e.jsx(i,{color:"text_caption",children:(_=r==null?void 0:r.displayTokenB)==null?void 0:_.symbol})]})})}),e.jsx(se,{mr:"110px",children:e.jsx(we,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:`${me(p,2,6)}%`})}),e.jsxs(g,{gap:"8px",children:[e.jsx(i,{color:"primary_gray",children:"Details"}),e.jsx(le,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(se,{w:"20px",h:"20px",children:e.jsx($,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(oe,{type:"nowallet",onboard:()=>{d(!0)}})}function Re({rewardList:l}){return e.jsx(re,{tooltip:e.jsx(i,{fontSize:"12px",lineHeight:"20px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(g,{justifyContent:"end",gap:"4px",children:l==null?void 0:l.map(r=>e.jsx(st,{coinType:r},r))})})}function st({coinType:l}){var s;const{tokenInfo:r}=Le((s=Ue(l))==null?void 0:s.full_address);return e.jsx(se,{children:e.jsx(X,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"})})}function lt({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:p,holdCoinAmounts:j,balanceDisplay:m,sharePoolRate:v,currentAccount:o,totalValue:d,jumpVaultsDetail:n,isShowPowered:u,isShowAprTips:f,isShowAumLimit:D}){var _,E,L,S,B,H;return e.jsxs(w,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(g,{children:[e.jsx(Fe,{coinAIconUrl:(_=t==null?void 0:t.displayTokenA)==null?void 0:_.logo_url,coinBIconUrl:(E=t==null?void 0:t.displayTokenB)==null?void 0:E.logo_url,coinACoinType:(L=t==null?void 0:t.displayTokenA)==null?void 0:L.coin_type,coinBCoinType:(S=t==null?void 0:t.displayTokenB)==null?void 0:S.coin_type,w:"40px",h:"40px"}),e.jsxs(w,{children:[e.jsxs(g,{children:[e.jsxs(i,{color:"text_caption",fontWeight:"500",children:[(B=t==null?void 0:t.displayTokenA)==null?void 0:B.symbol," - ",(H=t==null?void 0:t.displayTokenB)==null?void 0:H.symbol]}),e.jsx(he,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(i,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),(t==null?void 0:t.category)=="haedal"&&u&&e.jsx(Qe,{category:"Haedal"})]})]}),e.jsxs(w,{w:"100%",gap:"16px",mt:"4px",children:[D?e.jsx(G,{label:"TVL",value:e.jsx(w,{alignItems:"flex-end",children:t.hardCapUSD==0?e.jsx(re,{tooltip:" No capacity limit ",children:e.jsxs(w,{gap:"4px",children:[e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(i,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"âˆž"})]})}):e.jsx(Ae,{depositRatio:t.depositRatio,hardCapUSD:t.hardCapUSD,vaultTvl:t.vaultsTvl,textStyle:{textDecoration:"none"},value:e.jsxs(w,{alignItems:"flex-end",children:[e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(_e,{h:"4px",w:"80px",value:t.depositRatio,bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}):e.jsx(G,{label:"TVL",value:e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(G,{label:e.jsxs(g,{justify:"flex-end",gap:"2px",children:[e.jsx(i,{children:"APY"}),e.jsx(re,{placement:"auto-start",tooltip:e.jsx(i,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx($,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(Ce,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(G,{label:"Rewards",value:e.jsx(Re,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(G,{label:"Your Holdings",value:o?ge(d,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(w,{w:"100%",gap:"8px",children:[e.jsx(Ve,{isOpen:l,jumpVaultsDetail:()=>{n(t.vaultsId)},onExpand:r}),l&&e.jsx(De,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:p,holdCoinAmounts:j,balanceDisplay:m,sharePoolRate:v})]})]})}function rt({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:p,holdCoinAmounts:j,balanceDisplay:m,sharePoolRate:v,currentAccount:o,totalValue:d,jumpVaultsDetail:n,isShowPowered:u,isShowAumLimit:f}){return e.jsxs(ke.Fragment,{children:[e.jsxs(q,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(A,{children:e.jsx(Ze,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},isShowPowered:u,symbolFontSize:"15px"})}),f?e.jsx(A,{textAlign:"right",children:t.hardCapUSD==0?e.jsx(re,{tooltip:" No capacity limit ",children:e.jsxs(w,{gap:"4px",children:[e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(i,{h:"12px",lineHeight:"12px",color:"primary",bg:"primary_opacity.10",p:"0px 8px",borderRadius:"12px",children:"âˆž"})]})}):e.jsx(Ae,{depositRatio:t.depositRatio,hardCapUSD:t.hardCapUSD,vaultTvl:t.vaultsTvl,textStyle:{textDecoration:"none"},value:e.jsxs(w,{alignItems:"flex-end",children:[e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay}),e.jsx(_e,{h:"4px",w:"80px",value:t.depositRatio,bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})})}):e.jsx(A,{textAlign:"right",children:e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),e.jsx(A,{textAlign:"right",w:"13%",children:e.jsx(Ce,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category})}),e.jsx(A,{textAlign:"right",w:"13%",children:e.jsx(Re,{rewardList:t.vaultsRewards})}),e.jsx(A,{textAlign:"right",children:e.jsx(i,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:o?ge(d,2):"--"})}),e.jsx(A,{textAlign:"right",children:e.jsx(Ve,{isOpen:l,jumpVaultsDetail:()=>{n(t.vaultsId)}})})]}),!l&&e.jsx(q,{h:"16px"}),e.jsx(q,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(A,{colSpan:6,children:e.jsx(le,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(De,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:p,holdCoinAmounts:j,balanceDisplay:m,sharePoolRate:v})})})})]},t.vaultsId)}function Be(l){const r=Te(),{apiInfo:s,isShowPowered:a,isShowAumLimit:t}=l,{currentAccount:p}=Q(),j=Ne.useGetContractVaultInfo((s==null?void 0:s.category)=="haedal"),{fetchVaultInfoFromContract:m,fetchClmmPoolFromContract:v,lpTokenInfo:o,balanceInfo:d,sharePoolRate:n,holdCoinAmounts:u,totalValue:f,fetchVaultBalance:D}=j(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);b.useEffect(()=>{m(s.vaultsId)},[s.vaultsId]),b.useEffect(()=>{v(s.poolAddress)},[s.poolAddress]),b.useEffect(()=>{p!=null&&p.address&&s.vaultsId&&(o!=null&&o.decimals)&&(s==null?void 0:s.category)=="haedal"&&D(p==null?void 0:p.address,s.vaultsId,o==null?void 0:o.decimals)},[p==null?void 0:p.address,s.vaultsId,o==null?void 0:o.decimals,s==null?void 0:s.category]);const[_,E]=b.useState(!1),L=I=>{r(`/vaults-detail/${I}/${s==null?void 0:s.category}`)},{rewardPerA:S,rewardPerB:B}=qe(d==null?void 0:d.balanceFormat,s),H=()=>{E(!_)},{isApp:Z}=ie();return Z?e.jsx(lt,{openExpend:_,onExpand:H,rewardPerA:S,rewardPerB:B,apiInfo:s,logo_url:o==null?void 0:o.logo_url,holdCoinAmounts:u,balanceDisplay:d==null?void 0:d.balanceDisplay,sharePoolRate:n,currentAccount:p,totalValue:f,jumpVaultsDetail:L,isShowPowered:a,isShowAumLimit:t}):e.jsx(rt,{openExpend:_,onExpand:H,rewardPerA:S,rewardPerB:B,apiInfo:s,logo_url:o==null?void 0:o.logo_url,holdCoinAmounts:u,balanceDisplay:d==null?void 0:d.balanceDisplay,sharePoolRate:n,currentAccount:p,totalValue:f,jumpVaultsDetail:L,isShowPowered:a,isShowAumLimit:t})}function ot({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a,isShowPowered:t,isShowAumLimit:p}){const{onWalletModal:j}=Q();return!a&&!s&&l.length===0?e.jsx(oe,{type:"nodata",text:"No vaults found",border:"none"}):a?e.jsx(oe,{type:"nowallet",onboard:()=>j(!0),border:"none"}):s?e.jsx(it,{itemList:[1,2,3]}):e.jsx(w,{w:"100%",mt:"20px",children:l==null?void 0:l.map(m=>e.jsx(Be,{apiInfo:m,isShowPowered:t,isShowAumLimit:p},m.clmmPoolAddress))})}function it(l){const{itemList:r}=l;return e.jsx(w,{w:"100%",mt:"20px",children:r.map(s=>e.jsxs(w,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(g,{gap:"0",children:[e.jsx(je,{size:"9"}),e.jsx(je,{size:"9"}),e.jsxs(g,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(R,{height:"4",width:"100px"}),e.jsx(R,{height:"4",width:"60px"})]})]}),e.jsx(w,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(a=>e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(R,{height:"4",width:"100px"}),e.jsx(R,{height:"4",width:"100px"})]},a))}),e.jsxs(w,{w:"100%",gap:"8px",children:[e.jsx(R,{height:"8",width:"100%"}),e.jsx(R,{height:"8",width:"100%"})]})]},s))})}function at({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a,isShowPowered:t,isShowAumLimit:p}){const{onWalletModal:j}=Q();return e.jsxs(He,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(ze,{children:e.jsxs(q,{children:[e.jsx(K,{children:"Vaults"}),e.jsx(K,{textAlign:"right",children:"TVL"}),e.jsx(K,{textAlign:"right",children:e.jsxs(g,{justify:"flex-end",gap:"2px",children:[e.jsx(i,{children:"APY"}),e.jsx(re,{tooltip:e.jsx(i,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx($,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(K,{textAlign:"right",children:"Earnings"}),e.jsx(K,{textAlign:"right",children:"Your Holdings"}),e.jsx(K,{textAlign:"right",children:"Action"})]})}),e.jsxs(We,{children:[!a&&!s&&l.length===0&&e.jsx(q,{children:e.jsx(A,{colSpan:6,w:"100%",children:e.jsx(oe,{type:"nodata",text:"No vaults found",border:"none"})})}),a&&e.jsx(q,{children:e.jsx(A,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(oe,{type:"nowallet",onboard:()=>j(!0),border:"none"})})}),s&&e.jsx(nt,{itemList:[1,2,3]}),!s&&l.map(m=>e.jsx(Be,{apiInfo:m,isShowPowered:t,isShowAumLimit:p},m.clmmPoolAddress))]})]})}function nt(l){const{itemList:r}=l;return r.map(s=>e.jsxs(ke.Fragment,{children:[e.jsxs(q,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(A,{children:e.jsx(R,{w:"220px"})}),e.jsx(A,{textAlign:"right",children:e.jsx(g,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(g,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(g,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(g,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(g,{justifyContent:"end",children:e.jsx(R,{})})})]}),e.jsx(q,{h:"16px"})]},s))}function ct(l){const{fetchTokenPrices:r}=Oe(),{dataList:s,isAll:a,showSkeletonLoading:t,isShowPowered:p}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:13 ~ VaultsList ~ isShowPowered:",p);const{getPythLastPrice:j}=Ee();b.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:18 ~ useEffect ~ dataList:",s),s&&(s==null?void 0:s.length)==0)return;const d=[],n=[];s.forEach(u=>{u&&(d.includes(u.tokenA.coin_type)||d.push(u.tokenA.coin_type),d.includes(u.tokenB.coin_type)||d.push(u.tokenB.coin_type),u.category=="haedal"&&(n.push(W(u.tokenA.coin_type)),n.push(W(u.tokenB.coin_type))))}),d.length>0&&(r(d),setTimeout(()=>{j([...new Set([...n])])},500))},[s==null?void 0:s.length]);const{isApp:m}=ie(),v=window.location.host,o=b.useMemo(()=>!v.includes("app.cetus.zone")&&!v.includes("cetus-cmm-pro.netlify.app")&&!v.includes("localhost:5173"),[v]);return m?e.jsx(ot,{...l,isShowAumLimit:o}):e.jsx(at,{...l,isShowAumLimit:o})}function xt(l){const{sortByList:r,currTab:s,tabList:a,handleChangeTab:t,currSortType:p,onSortByChange:j,sortRule:m,handleRefresh:v,handleChangeSortRule:o,selectCoinList:d,onClickSelectCoinList:n,onDeleteSelectCoinList:u,isYourHoldings:f,onClickIsYourHoldings:D,whiteTokenList:_,showSkeletonLoading:E}=l,{isApp:L}=ie(),{currentAccount:S}=Q();return e.jsxs(w,{w:"100%",mt:{base:"20px",lg:"40px"},justify:"space-between",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(Ye,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"415px"},h:"46px",borderRadius:{base:"8px",lg:"12px"}},itemStyle:{w:"50%",fontSize:"16px"},tabList:a,currentTab:s.label,handleChangeTab:t}),!L&&(S==null?void 0:S.address)&&e.jsx(le,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",children:[e.jsx(Se,{checked:f,onClick:D}),e.jsx(i,{color:f?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]}),e.jsxs(g,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsx(he,{w:{base:"100%",lg:"292px"},sx:{"> button":{minW:"100% !important"}},children:e.jsx(Je,{selectCoinList:d,onClickSelectCoinList:n,onDeleteSelectCoinList:u,whiteTokenList:_})}),e.jsxs(g,{children:[e.jsx(Xe,{sortText:"Sort by",xlinkHref:m=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{o(m==="asc"?"desc":"asc")},minW:L?"calc(100vw - 126px)":"120px",currentSort:p,sortByList:r,onSortByChange:j,wrapStyle:{borderRadius:{base:"8px",lg:"12px"}}}),e.jsx(Ke,{handleRefresh:()=>{E||v()},borderRadius:{base:"8px",lg:"12px"}})]})]}),L&&e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(i,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),(S==null?void 0:S.address)&&e.jsx(le,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",children:[e.jsx(Se,{checked:f,onClick:D}),e.jsx(i,{color:f?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]})]})}function pt(l){const{isLoading:r,total_tvl:s}=l,{isApp:a}=ie();return e.jsx(w,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(w,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(g,{w:"100%",justify:"space-between",children:e.jsx(i,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(i,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease.Â ",a&&e.jsxs(g,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(i,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx($,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!a&&e.jsxs(g,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(i,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx($,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(i,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(R,{isLoaded:!!s,children:e.jsx(i,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:ge(s,2)})})]})})}function dt(){const{getVaultList:l,getVaultListFromCache:r}=Ge(),{vaultStatsObj:s,lpTokenInfo:a,setLpTokenInfo:t}=fe(),{getBalanceInfoFromCache:p}=Ie(),{currentAccount:j}=Q(),[m,v]=b.useState(!0),[o,d]=b.useState([]),[n,u]=b.useState([]),{contractVaultObj:f}=fe(),{contractVaultObj:D}=$e(),{fetchTokenInfo:_}=Le(),E=y=>{u(c=>[...c,y])},L=y=>{u(c=>c.filter(h=>(h==null?void 0:h.coin_type)!==(y==null?void 0:y.coin_type)))},[S,B]=b.useState([]),[H,Z]=b.useState([]),[I,xe]=b.useState({sortRule:"desc",sortType:"tvl"}),pe=b.useMemo(()=>{let y=ve(0);return Object.values(s).forEach(c=>{y=y.add((c==null?void 0:c.vaultsTvl)||"0")}),y.toString()},[s]),de=async(y,c="all",h=!1)=>{var V,U,M;const k=r(y);B(Y(k,c,h));const x=await l(y);if((x==null?void 0:x.length)>0){if(!Me(a)||Object.values(a).length!==x.length){const C={},ee=[];x.forEach(N=>{var J,ye;const O=(N==null?void 0:N.lpTokentype)||((ye=(J=ne[N.clmmPoolAddress])==null?void 0:J.lpToken)==null?void 0:ye.coin_type);typeof O=="string"&&ee.push(O)});const te=await _(ee);for(let N=0;N<x.length;N++){const O=x[N],J=(O==null?void 0:O.lpTokenType)||((U=(V=ne[O.clmmPoolAddress])==null?void 0:V.lpToken)==null?void 0:U.coin_type);typeof J=="string"&&(C[J]=O.category=="haedal"?te==null?void 0:te.get(J):(M=ne[O.clmmPoolAddress])==null?void 0:M.lpToken)}t(C)}const T=x.flatMap(C=>[C==null?void 0:C.displayTokenA,C==null?void 0:C.displayTokenB]).filter(Boolean),z=T.map(C=>C==null?void 0:C.coin_type).filter(Boolean),F=await _(z),Pe=new Map(T.map(C=>{const ee=W(C.coin_type),te=F==null?void 0:F.get(C.coin_type);return[ee,{...te||{},coin_type:ee}]}));d([...Pe.values()])}if(Z(x),console.log("ðŸš€ ~ fetchVaultList ~ list:",x,Y(x,c,h)),x.length>0){B(Y(x,c,h));const T=x.map(z=>{var F;return(F=f[z==null?void 0:z.vaultsId]||D[z==null?void 0:z.vaultsId])==null?void 0:F.lp_token_type}).filter(Boolean);(T==null?void 0:T.length)>0&&await _(T)}v(!1)},ae=y=>{var x,V,U,M;const c=(x=n[0])!=null&&x.coin_type?W((V=n[0])==null?void 0:V.coin_type):void 0,h=(U=n[1])!=null&&U.coin_type?W((M=n[1])==null?void 0:M.coin_type):void 0;return y==null?void 0:y.filter(T=>c&&h?W(T.displayTokenA.coin_type)==c&&W(T.displayTokenB.coin_type)==h||W(T.displayTokenA.coin_type)==h&&W(T.displayTokenB.coin_type)==c:c?W(T.displayTokenA.coin_type)==c||W(T.displayTokenB.coin_type)==c:T)},Y=(y,c="all",h=!1)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:142 ~ filterVaultList ~ filterVaultList:");let k=[],x=[];return(n==null?void 0:n.length)>0?x=ae(y):x=y,c==="all"&&(k=x),c=="cetus"&&(k=x.filter(V=>V.category=="cetus")),c=="haedal"&&(k=x.filter(V=>V.category=="haedal")),h&&(j!=null&&j.address)?P(k):k},P=y=>y.filter(c=>{var x;const h=a[c.lpTokenType]||((x=ne[c.clmmPoolAddress])==null?void 0:x.lpToken),k=p(h);return!!(k&&ve(k.balance).gt(0))});return{totalTvl:pe,filterMyVaultList:P,fetchVaultList:de,vaultList:S,queryOptions:I,setQueryOptions:xe,allVaultList:H,getCurrentTabNum:(y,c=!1)=>{let h;const k=ae(H);return y=="all"?h=k:y=="cetus"?h=k.filter(x=>x.category=="cetus"):h=k.filter(x=>x.category=="haedal"),c&&(j!=null&&j.address)&&h&&h.length?String(P(h).length):String(h&&h.length||"")},selectCoinList:n,onClickSelectCoinList:E,onDeleteSelectCoinList:L,whiteTokenList:o,showSkeletonLoading:m,setShowSkeletonLoading:v,filterVaultList:Y,setVaultList:B,sortVaultList:(y,c)=>{const{sortRule:h,sortType:k}=y;return c==null?void 0:c.sort((V,U)=>{var M,T,z,F;return k==="apr"?h==="desc"?((M=U.vaultsTotalApy)==null?void 0:M.replace("%",""))-((T=V.vaultsTotalApy)==null?void 0:T.replace("%","")):((z=V.vaultsTotalApy)==null?void 0:z.replace("%",""))-((F=U.vaultsTotalApy)==null?void 0:F.replace("%","")):h==="desc"?U.vaultsTvl-V.vaultsTvl:V.vaultsTvl-U.vaultsTvl})}}}function Kt(){const[l,r]=b.useState(!1),{fetchAccountBalance:s}=et(),{currentAccount:a}=Q(),[t,p]=b.useState({label:"All Vaults",value:"all"}),{totalTvl:j,vaultList:m,fetchVaultList:v,queryOptions:o,setQueryOptions:d,allVaultList:n,getCurrentTabNum:u,selectCoinList:f,onClickSelectCoinList:D,onDeleteSelectCoinList:_,whiteTokenList:E,showSkeletonLoading:L,setShowSkeletonLoading:S,filterVaultList:B,setVaultList:H,sortVaultList:Z}=dt(),I=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[xe,pe]=b.useState({label:"TVL",value:"TVL"}),de=b.useMemo(()=>[{label:"All Vaults",value:"all",num:u("all",l)},{label:"Cetus",value:"cetus",num:u("cetus",l)},{label:"Haedal",value:"haedal",num:u("haedal",l)}],[n,l,f]),[ae,Y]=b.useState(6e4);return tt({interval:ae,callback:()=>{v(o,t.value,l)}}),b.useEffect(()=>{n&&n.length>0&&H(B(n,t.value,l))},[l,t.value,n]),b.useEffect(()=>{v(o,t.value)},[]),b.useEffect(()=>{a!=null&&a.address||r(!1)},[a==null?void 0:a.address]),b.useEffect(()=>{f&&n&&n.length>0&&H(B(n,t.value,l))},[f,t.value,l]),e.jsxs(w,{gap:"0px",w:"100%",children:[e.jsx(pt,{isLoading:L,total_tvl:j}),e.jsx(he,{h:{base:"260px",lg:"240px"}}),e.jsx(xt,{sortByList:I,currTab:t,tabList:de,whiteTokenList:E,selectCoinList:f,onClickSelectCoinList:D,onDeleteSelectCoinList:_,showSkeletonLoading:L,handleChangeTab:P=>{t.value!==P.value&&(p(P),S(!0),setTimeout(()=>{S(!1)},200))},currSortType:xe,onSortByChange:P=>{o.sortType=P.value,d({...o}),pe(P),Z({...o},m),Y(6e4)},sortRule:o.sortRule,handleChangeSortRule:P=>{o.sortRule=P,d({...o}),Z({...o},m),Y(6e4)},handleRefresh:()=>{S(!0),s(),Y(6e4),v(o,t.value,l)},isYourHoldings:l,onClickIsYourHoldings:()=>{r(!l)}}),e.jsx(ct,{isShowPowered:t.label!=="Haedal",dataList:m,showSkeletonLoading:L})]})}export{Kt as default};
//# sourceMappingURL=Vaults-DaDeYdpI.js.map
