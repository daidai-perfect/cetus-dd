<<<<<<<< HEAD:dist/assets/PositionCurrentPrice-BQflLr3I.js
import{n as U,aK as H,d as S,V as j,k as v,X as C,I as R,G as D}from"./index-CE2038XS.js";import{a as B,j as i,H as F,u as E,T as b}from"./vendor-BulRdKUe.js";import{u as I}from"./useBurn-ChOgUIWU.js";import{M as N}from"./msafe-oYBkW7LJ.js";import{a as O}from"./usePositionList-_KFcUc_Y.js";function G(){const{getTokenAmountValue:h}=U(),f=(l,t,e,r)=>{if(!(l!=null&&l.length))return{total:"0",rewardAndFeeList:[]};let n="0";const u=[];l.forEach(c=>{const _=t[c==null?void 0:c.posId],x=e[c==null?void 0:c.posId]||[],P=r?r[c==null?void 0:c.id]:[],y=x.concat(P);if(_){const s=d(c==null?void 0:c.displayTokenA,_==null?void 0:_.displayFeeOwedA),a=d(c==null?void 0:c.displayTokenB,_==null?void 0:_.displayFeeOwedB);s&&u.push(s),a&&u.push(a),n=g(n,s==null?void 0:s.amountUSD,a==null?void 0:a.amountUSD)}y.forEach(s=>{var a;if(Number(s==null?void 0:s.display_amount_owed)>0){const m=d(s==null?void 0:s.token,s==null?void 0:s.display_amount_owed,(a=s==null?void 0:s.token)==null?void 0:a.coin_type);m&&(u.push(m),n=g(n,m==null?void 0:m.amountUSD))}})});const o=p(u);return console.log("ðŸš€ ~ calculatePendingYield ~  total,:",o,n,o.length==1&&(n=="--"||Number(n)==0)),{total:(o==null?void 0:o.length)>0&&Number(n)==0?"--":n,rewardAndFeeList:o}},d=(l,t,e)=>{if(!l||!t)return null;const r=e||l.coin_type,n=h(r,t);return{coin_address:H(r,!1),amount:t,amountUSD:S(t).gt(0)&&S(n).lte(0)?"--":n,token:l}},g=(l,...t)=>{console.log("ðŸš€ ~ useCalculatePendingYield ~ amounts:",t);let e=S(l);return t.forEach(r=>{r&&r!=="--"&&e!=="--"&&(e=e.plus(r))}),e.toString()},p=l=>{const t={};return l.forEach(e=>{var o,c;const{coin_address:r,amount:n,amountUSD:u}=e;t[r]||(t[r]={...e,amount:"0",amountUSD:"0"}),u=="--"?t[r].amountUSD="--":t[r].amountUSD=t[r].amountUSD=="--"?"--":S((o=t[r])==null?void 0:o.amountUSD).plus(u||0).toString(),t[r].amount=S((c=t[r])==null?void 0:c.amount).plus(n||0).toString()}),Object.values(t).filter(e=>Number(e.amount)>0).sort((e,r)=>S(r.amountUSD=="--"?0:r.amountUSD).minus(e.amountUSD=="--"?0:e.amountUSD).toNumber())};return{calculatePendingYield:f}}const A=h=>h.startsWith("0x")?h.slice(2):h;function W(){const{clmmSdk:h}=j(),{peripherySdk:f,burnSdk:d}=v(),{getBurnClaimTxPayload:g}=I();return{getPosClaimFeeAndRewardTxPayload:async t=>{const{posType:e,id:r,clmmPool:n,coinTypeA:u,coinTypeB:o,rewarderCoinTypes:c,account:_}=t;let x,P;if(e==="clmm"){const y={pool_id:n,pos_id:r,rewarder_coin_types:c,coinTypeA:u,coinTypeB:o,collect_fee:!0};x=await h.Rewarder.collectRewarderTransactionPayload(y),P={action:N.ClaimFeeAndMining,txbParams:y}}else if(e==="farms"){const y={coinTypeA:u,coinTypeB:o,clmm_pool_id:n,position_nft_id:r,clmm_rewarder_types:c,collect_fee:!0};x=await f.Farms.claimFeeAndClmmReward(y),P={action:"FarmingClaimFeeAndReward",txbParams:y}}else e==="burn"&&(x=g({poolAddress:n,posId:r,coinTypeA:u,coinTypeB:o,account:_,rewarderCoinTypes:c}));return{tx:x,msafeParams:P}},getBatchHarvestFeeAndRewardsTxPayload:async(t,e,r)=>{console.log("ðŸš€ ~ getBatchHarvestFeeAndRewardsTxPayload ~ posBaseList:",t,e,r);const n=[],u=[],o=[],c=[];t.forEach(a=>{var T;const m=((T=e[a.posId])==null?void 0:T.map(w=>w.coin_address))||[];console.log("ðŸš€ ~ getBatchHarvestFeeAndRewardsTxPayload ~ rewarderCoinTypes:",m),a.posType=="clmm"?n.push({pool_id:a.clmmPool,pos_id:a.id,collect_fee:!0,rewarder_coin_types:m,coinTypeA:A(a.coinTypeA),coinTypeB:A(a.coinTypeB)}):a.posType=="farms"?(u.push({pool_id:a.farmsPool,position_nft_id:a.id,clmm_pool_id:a.clmmPool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:m,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB}),c.push({pool_id:a.farmsPool,position_nft_id:a.id})):o.push({pos:a==null?void 0:a.id,pool:a.clmmPool,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB,rewarderCoinTypes:m,account:r})});const _=await f.Farms.batchHarvestAndClmmFeePayload(u,n),x=[];for(let a=0;a<o.length;a++){const m=o[a];(m==null?void 0:m.rewarderCoinTypes.length)>0&&x.push(m)}const P=d.Burn.createCollectFeesPaylaod(o,_),y=d.Burn.crateCollectRewardsPayload(x,P),s=await f.Farms.batchHarvestPayload(c,y);return{txb:P,tx:y,txf:s}}}}function X({posId:h,displayTokenA:f,displayTokenB:d,symbolEllipsesDecimals:g=10}){const[p,l]=B.useState(!0),{posPoolsRelatedData:t}=O(),e=t[h];return i.jsxs(F,{children:[i.jsx(E,{isLoaded:!!(e!=null&&e.currentPrice),children:i.jsx(b,{color:"text_caption",children:p?e==null?void 0:e.currentPrice:e==null?void 0:e.currentPriceReverse})}),i.jsxs(F,{gap:"0",children:[i.jsx(b,{color:"primary_gray",children:C(p?d==null?void 0:d.symbol:f==null?void 0:f.symbol,g)}),i.jsx(b,{color:"primary_gray",children:"Â perÂ "}),i.jsx(b,{color:"primary_gray",children:C(p?f==null?void 0:f.symbol:d==null?void 0:d.symbol,g)})]}),i.jsx(R,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:r=>{D(r),l(!p)}})]})}export{X as P,G as a,W as u};
//# sourceMappingURL=PositionCurrentPrice-BQflLr3I.js.map
========
import{n as U,aK as H,d as S,V as j,k as v,X as C,I as R,G as D}from"./index-BnmCMmyx.js";import{a as B,j as i,H as F,u as E,T as b}from"./vendor-BulRdKUe.js";import{u as I}from"./useBurn-DaBvXLNN.js";import{M as N}from"./msafe-oYBkW7LJ.js";import{a as O}from"./usePositionList-BZBW5cXP.js";function G(){const{getTokenAmountValue:h}=U(),f=(l,t,e,r)=>{if(!(l!=null&&l.length))return{total:"0",rewardAndFeeList:[]};let n="0";const u=[];l.forEach(c=>{const _=t[c==null?void 0:c.posId],x=e[c==null?void 0:c.posId]||[],P=r?r[c==null?void 0:c.id]:[],y=x.concat(P);if(_){const s=d(c==null?void 0:c.displayTokenA,_==null?void 0:_.displayFeeOwedA),a=d(c==null?void 0:c.displayTokenB,_==null?void 0:_.displayFeeOwedB);s&&u.push(s),a&&u.push(a),n=g(n,s==null?void 0:s.amountUSD,a==null?void 0:a.amountUSD)}y.forEach(s=>{var a;if(Number(s==null?void 0:s.display_amount_owed)>0){const m=d(s==null?void 0:s.token,s==null?void 0:s.display_amount_owed,(a=s==null?void 0:s.token)==null?void 0:a.coin_type);m&&(u.push(m),n=g(n,m==null?void 0:m.amountUSD))}})});const o=p(u);return console.log("ðŸš€ ~ calculatePendingYield ~  total,:",o,n,o.length==1&&(n=="--"||Number(n)==0)),{total:(o==null?void 0:o.length)>0&&Number(n)==0?"--":n,rewardAndFeeList:o}},d=(l,t,e)=>{if(!l||!t)return null;const r=e||l.coin_type,n=h(r,t);return{coin_address:H(r,!1),amount:t,amountUSD:S(t).gt(0)&&S(n).lte(0)?"--":n,token:l}},g=(l,...t)=>{console.log("ðŸš€ ~ useCalculatePendingYield ~ amounts:",t);let e=S(l);return t.forEach(r=>{r&&r!=="--"&&e!=="--"&&(e=e.plus(r))}),e.toString()},p=l=>{const t={};return l.forEach(e=>{var o,c;const{coin_address:r,amount:n,amountUSD:u}=e;t[r]||(t[r]={...e,amount:"0",amountUSD:"0"}),u=="--"?t[r].amountUSD="--":t[r].amountUSD=t[r].amountUSD=="--"?"--":S((o=t[r])==null?void 0:o.amountUSD).plus(u||0).toString(),t[r].amount=S((c=t[r])==null?void 0:c.amount).plus(n||0).toString()}),Object.values(t).filter(e=>Number(e.amount)>0).sort((e,r)=>S(r.amountUSD=="--"?0:r.amountUSD).minus(e.amountUSD=="--"?0:e.amountUSD).toNumber())};return{calculatePendingYield:f}}const A=h=>h.startsWith("0x")?h.slice(2):h;function W(){const{clmmSdk:h}=j(),{peripherySdk:f,burnSdk:d}=v(),{getBurnClaimTxPayload:g}=I();return{getPosClaimFeeAndRewardTxPayload:async t=>{const{posType:e,id:r,clmmPool:n,coinTypeA:u,coinTypeB:o,rewarderCoinTypes:c,account:_}=t;let x,P;if(e==="clmm"){const y={pool_id:n,pos_id:r,rewarder_coin_types:c,coinTypeA:u,coinTypeB:o,collect_fee:!0};x=await h.Rewarder.collectRewarderTransactionPayload(y),P={action:N.ClaimFeeAndMining,txbParams:y}}else if(e==="farms"){const y={coinTypeA:u,coinTypeB:o,clmm_pool_id:n,position_nft_id:r,clmm_rewarder_types:c,collect_fee:!0};x=await f.Farms.claimFeeAndClmmReward(y),P={action:"FarmingClaimFeeAndReward",txbParams:y}}else e==="burn"&&(x=g({poolAddress:n,posId:r,coinTypeA:u,coinTypeB:o,account:_,rewarderCoinTypes:c}));return{tx:x,msafeParams:P}},getBatchHarvestFeeAndRewardsTxPayload:async(t,e,r)=>{console.log("ðŸš€ ~ getBatchHarvestFeeAndRewardsTxPayload ~ posBaseList:",t,e,r);const n=[],u=[],o=[],c=[];t.forEach(a=>{var T;const m=((T=e[a.posId])==null?void 0:T.map(w=>w.coin_address))||[];console.log("ðŸš€ ~ getBatchHarvestFeeAndRewardsTxPayload ~ rewarderCoinTypes:",m),a.posType=="clmm"?n.push({pool_id:a.clmmPool,pos_id:a.id,collect_fee:!0,rewarder_coin_types:m,coinTypeA:A(a.coinTypeA),coinTypeB:A(a.coinTypeB)}):a.posType=="farms"?(u.push({pool_id:a.farmsPool,position_nft_id:a.id,clmm_pool_id:a.clmmPool,collect_fee:!0,collect_frams_rewarder:!1,clmm_rewarder_types:m,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB}),c.push({pool_id:a.farmsPool,position_nft_id:a.id})):o.push({pos:a==null?void 0:a.id,pool:a.clmmPool,coinTypeA:a.coinTypeA,coinTypeB:a.coinTypeB,rewarderCoinTypes:m,account:r})});const _=await f.Farms.batchHarvestAndClmmFeePayload(u,n),x=[];for(let a=0;a<o.length;a++){const m=o[a];(m==null?void 0:m.rewarderCoinTypes.length)>0&&x.push(m)}const P=d.Burn.createCollectFeesPaylaod(o,_),y=d.Burn.crateCollectRewardsPayload(x,P),s=await f.Farms.batchHarvestPayload(c,y);return{txb:P,tx:y,txf:s}}}}function X({posId:h,displayTokenA:f,displayTokenB:d,symbolEllipsesDecimals:g=10}){const[p,l]=B.useState(!0),{posPoolsRelatedData:t}=O(),e=t[h];return i.jsxs(F,{children:[i.jsx(E,{isLoaded:!!(e!=null&&e.currentPrice),children:i.jsx(b,{color:"text_caption",children:p?e==null?void 0:e.currentPrice:e==null?void 0:e.currentPriceReverse})}),i.jsxs(F,{gap:"0",children:[i.jsx(b,{color:"primary_gray",children:C(p?d==null?void 0:d.symbol:f==null?void 0:f.symbol,g)}),i.jsx(b,{color:"primary_gray",children:"Â perÂ "}),i.jsx(b,{color:"primary_gray",children:C(p?f==null?void 0:f.symbol:d==null?void 0:d.symbol,g)})]}),i.jsx(R,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:r=>{D(r),l(!p)}})]})}export{X as P,G as a,W as u};
//# sourceMappingURL=PositionCurrentPrice-CWZIK3xd.js.map
>>>>>>>> 48e3e63a7d52715810f0754e6a7d258ba01f9a12:dist/assets/PositionCurrentPrice-CWZIK3xd.js
