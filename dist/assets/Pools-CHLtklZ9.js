const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ActionContent-D37XC-_r.js","assets/index-CD8o7Tgq.js","assets/index-CteIxbgC.css","assets/useStatistics-B7O-JpRT.js","assets/index-DRD3QXrd.js","assets/VolumeChart-uSXXCD1X.js","assets/Pagination-CLxr5QYQ.js","assets/tr-DLz7AT98.js","assets/api-data-utils-BMfEKTJs.js","assets/_getAllKeysIn-DseNun9b.js","assets/YAxis-IBXBHOn3.js","assets/throttle-DRZ5XVjD.js","assets/debounce-ByMFVA6T.js","assets/generateCategoricalChart-DBW2lr36.js","assets/linear-DYpwdEgO.js","assets/index-BwcamBjO.js","assets/usePositionList-DZ03E6Tv.js","assets/useToken-4qhWaGbr.js","assets/useGetPoolList-DBnveNLG.js","assets/RewardsContent-234DRBrQ.js"])))=>i.map(i=>d[i]);
import{r as p,b as pe,j as e,ap as Ye,aq as Me,C as je,W as Q,H as g,ar as $e,I as ae,T as d,g as Ve,as as rs,c as ue,at as Oe,au as qe,av as Ie,ao as De,a as Qe,aw as Rs,ac as Bs,ax as Es,$ as Z,ay as es,V as b,S as de,_ as ds,az as Ns,B as I,a3 as Ze,an as Fs,l as Hs,aA as $,Y as We,a1 as _e,a5 as Le,al as hs,ae as gs,af as us,ag as js,ah as fs,ai as ys,aj as bs,ak as ws,k as Vs,aB as Ws,a4 as Ss,d as J,aC as Ke,m as vs,aD as Us}from"./index-CD8o7Tgq.js";import{u as ss,a as Ys,b as Ms,c as re,d as ns}from"./usePositionList-DZ03E6Tv.js";import{R as ps}from"./RefreshButton-76TnqRgC.js";import{P as Os}from"./index-Bh98g90v.js";import{S as Je}from"./switch-DOWVQztC.js";import{u as Cs,a as _s,b as qs,i as Ds,V as Qs}from"./useStatistics-B7O-JpRT.js";import{u as Ls}from"./useGetPoolList-DBnveNLG.js";import{H as Gs,T as Xs}from"./VolumeChart-uSXXCD1X.js";import{N as Se}from"./NoData-DB1zg78d.js";import{S as Ks}from"./SortDropBlock-7NYoolow.js";import{T as He}from"./TableSortTh-D8ElleOw.js";import{u as Zs}from"./index-CyVhW0S_.js";import{A as Js}from"./index-Bdvh4I48.js";import{C as $s,P as ks}from"./CoinPairInfo-By88mITv.js";import{F as Is,P as en,a as sn}from"./PositionListLoading-CQ1qZiAA.js";import{C as Ge}from"./CetusTooltip-CZouQm69.js";import{u as nn}from"./useToken-4qhWaGbr.js";import{V as xs}from"./VTextLabelBox-CjYK5Q5k.js";import{u as ms}from"./useQueryParams-Be8uwq7t.js";import{u as tn}from"./useBurn-DiMCnbIk.js";import{u as Ts}from"./useTransaction-c8ZdQlNm.js";import{S as Ue}from"./SingleTokenInfo-Bx1S7BMo.js";import{L as on}from"./PriceRange-VWU4CZRZ.js";import{u as ln}from"./useNotifiSubscription-D2K2OW1X.js";import{u as an}from"./useRpcListener-jH0JmhqL.js";import{u as rn,a as As,P as pn}from"./PositionCurrentPrice-B39I2hGI.js";import{u as xn}from"./useAccountBalance-DEiJnZq7.js";import"./api-data-utils-BMfEKTJs.js";import"./Loading-CYFgKsTi.js";import"./TooltipIcon-DtD2_lPx.js";import"./index-DRD3QXrd.js";import"./Pagination-CLxr5QYQ.js";import"./tr-DLz7AT98.js";import"./_getAllKeysIn-DseNun9b.js";import"./YAxis-IBXBHOn3.js";import"./throttle-DRZ5XVjD.js";import"./debounce-ByMFVA6T.js";import"./generateCategoricalChart-DBW2lr36.js";import"./linear-DYpwdEgO.js";import"./index-BwcamBjO.js";import"./AddressCopyLink-Ccgb_Bpp.js";import"./AddressUnderline-QFx9LUlt.js";import"./useCurrentPos-B8vvlcJx.js";import"./PositionStatus-B76sVmF4.js";import"./RangeValue-Cw3Hqqv_.js";import"./useXCetusHelper-DfRhdJBu.js";import"./usePreviousValue-cP6YzcPX.js";import"./msafe-oYBkW7LJ.js";function cn({selectCoinList:s,onClickSelectCoinList:n,onDeleteSelectCoinList:x}){const[r,o]=p.useState(!1),{isApp:t}=pe(),i=p.useRef(null);return e.jsxs(Ye,{isLazy:!0,placement:"bottom-start",trigger:"click",modifiers:[{name:"flip",enabled:!1},{name:"shift",enabled:!1}],initialFocusRef:i,children:[e.jsx(Me,{children:e.jsx(je,{ref:i,as:"button",minW:{base:"calc(100% - 48px)",lg:"292px"},children:e.jsx(Q,{cursor:s.length>=2?"not-allowed":"pointer",h:"40px",borderRadius:"12px",minW:"100%",w:"unset",p:"0px 4px 0 10px",onClick:()=>o(!0),children:e.jsxs(g,{w:"100%",justify:"space-between",h:"100%",align:"center",children:[e.jsxs($e,{align:"center",h:"100%",children:[e.jsx(ae,{xlinkHref:"#icon-icon_search",svgHover:"text_paragraph"}),e.jsx(d,{ml:"4px",children:t&&s.length>=2?"":"Filter by token"})]}),e.jsx(g,{children:s==null?void 0:s.map(l=>e.jsxs(g,{gap:"4px",align:"center",bg:"button_ghost_bg",borderRadius:"8px",p:"5px 8px",children:[e.jsx(Ve,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"}),e.jsx(d,{ml:"2px",color:"text_caption",children:t?rs((l==null?void 0:l.symbol)||"",5):rs((l==null?void 0:l.symbol)||"",10)}),e.jsx(ae,{xlinkHref:"#icon-icon_close",onClick:h=>{ue(h),x(l),o(!1)}})]},l==null?void 0:l.coin_type))})]})})})}),r&&(s==null?void 0:s.length)<2&&e.jsx(Oe,{w:{base:"calc(100vw - 68px)",lg:"292px"},children:e.jsx(qe,{p:"0px",children:e.jsx(Os,{selectTokenList:s,onDeleteToken:x,onClickToken:n})})})]})}function Ps({handleIsWatchList:s=()=>{},handleIsDisplayChecked:n=()=>{},onClickIncentiveTypes:x,handleRefresh:r,selectCoinList:o,onClickSelectCoinList:t,onDeleteSelectCoinList:i,isPools:l=!0,isRefreshed:h}){const{isWatchList:u,isAllPools:z,isIncentivizedOnly:T}=ss(),{isApp:f,windowWidth:y}=pe();return e.jsxs(g,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(g,{w:{base:"100%",lg:l?"unset":"100%"},justify:"space-between",children:[e.jsx(cn,{selectCoinList:o,onClickSelectCoinList:t,onDeleteSelectCoinList:i}),(f||!l)&&e.jsx(ps,{handleRefresh:r,isRefreshed:l?h:void 0})]}),l&&e.jsxs(g,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(Q,{w:{base:y<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:y<=350?e.jsx(g,{h:"38px",justify:"center",align:"center",children:e.jsx(ae,{xlinkHref:"#icon-icon_star",svgFill:u?"primary":"text_paragraph"})}):e.jsxs(g,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(Ie,{checked:u,onClick:()=>{}}),e.jsx(d,{color:u?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[e.jsx(Q,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",gap:f?"4px":"8px",children:[e.jsx(d,{color:T?"text_caption":"text_paragraph",children:f?"Incentivized":"Incentivized Only"}),e.jsx(Je,{isChecked:T,onChange:x})]})}),e.jsx(Q,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",children:[e.jsxs(d,{color:z?"text_caption":"text_paragraph",children:[" ",f?"All":"All pools"]}),e.jsx(Je,{isChecked:z,onChange:n})]})})]}),!f&&e.jsx(ps,{handleRefresh:r,isRefreshed:h})]})]})}const dn=()=>e.jsx(g,{w:"18px",h:"18px",onClick:s=>{ue(s)},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(je,{children:e.jsx(De,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),hn=()=>{const s=Qe(),{isApp:n}=pe();return e.jsx(g,{w:"20px",h:"20px",onClick:x=>{ue(x),n||s("/vaults")},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Vault available"}),children:e.jsx(je,{children:e.jsx(De,{w:"100%",h:"100%",src:"/images/icon_vaults.png"})})})})},gn=({coinTypeA:s,coinTypeB:n})=>{const{getShowCoinTag:x}=Rs(),{trustedTokenList:r,importTokenList:o}=Bs(),t=p.useMemo(()=>(s||n)&&(r==null?void 0:r.length)>0?x(s)||x(n):!1,[s,n,r,o]);return e.jsx(e.Fragment,{children:t&&e.jsx(g,{w:"20px",h:"20px",onClick:i=>{ue(i)},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(je,{children:e.jsx(De,{w:"100%",h:"100%",src:Es})})})})})},un=p.lazy(()=>ds(()=>import("./ActionContent-D37XC-_r.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18])));function jn({poolInfo:s}){const{isApp:n}=pe(),{goLiquidity:x}=Cs();return e.jsxs(g,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:n?"space-between":"flex-end",gap:"8px",children:[e.jsx(Z,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{x(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(Ye,{isLazy:!0,trigger:n?"click":"hover",placement:n?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(Me,{children:e.jsx(je,{onClick:r=>{ue(r)},children:e.jsx(Z,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(ae,{svgFill:n?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(es,{children:e.jsx(Oe,{borderRadius:"12px",w:"fit-content",children:e.jsx(qe,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsx(p.Suspense,{fallback:e.jsxs(b,{w:"168px",h:"162px",children:[e.jsx(g,{w:"100%",borderRadius:"8px",h:"42px",p:"11px",bg:"menu_item_bg",children:e.jsx(de,{h:"16px",w:"80%"})}),e.jsx(g,{w:"100%",borderRadius:"8px",h:"42px",p:"11px",bg:"menu_item_bg",children:e.jsx(de,{h:"16px",w:"80%"})}),e.jsx(g,{w:"100%",borderRadius:"8px",h:"42px",p:"11px",bg:"menu_item_bg",children:e.jsx(de,{h:"16px",w:"80%"})})]}),children:e.jsx(un,{poolInfo:s})})})})})]})]})}const fn=p.lazy(()=>ds(()=>import("./RewardsContent-234DRBrQ.js"),__vite__mapDeps([19,1,2])));function yn({miningRewardList:s,farmsRewarderList:n}){const{getTokenInfo:x}=nn(),[r,o]=p.useState([]),t=async()=>{if((s==null?void 0:s.length)>0||(n==null?void 0:n.length)>0)try{let i=[],l=[];(s==null?void 0:s.length)>0&&(i=await Promise.all(s.map(async h=>{const u=await x(h==null?void 0:h.coinType);return{...h,tokenInfo:u,isMining:!0}}))),(n==null?void 0:n.length)>0&&(l=await Promise.all(n.map(async h=>{const u=await x(h==null?void 0:h.coinType);return{...h,tokenInfo:u,isFarming:!0}}))),console.log("ðŸš€ ~ list:",i.concat(l),i,l),o(i.concat(l))}catch(i){console.error("Error processing list:",i)}};return Ns(()=>{t()},[s,n]),e.jsx(g,{w:"100%",justify:"flex-end",children:r.map(i=>{var l;return e.jsx(I,{onClick:h=>h.stopPropagation(),children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(p.Suspense,{fallback:e.jsxs(g,{children:[e.jsx(Ze,{w:"24px",h:"24px"}),e.jsx(de,{w:"200px",h:"14px"})]}),children:e.jsx(fn,{item:i})}),children:e.jsx(je,{as:"button",children:e.jsx(Ve,{imageUrl:(l=i==null?void 0:i.tokenInfo)==null?void 0:l.logo_url,w:"24px",h:"24px"})})})},i==null?void 0:i.coinType)})})}function bn({isRefreshed:s,handleIsRefreshed:n}){var he;const{getStatistics:x}=_s(),{poolRefreshStatus:r,setPoolRefreshStatus:o,setPoolListLength:t,poolFavoriteIds:i,isWatchList:l,setIsWatchList:h,isIncentivizedOnly:u,setIsIncentivizedOnly:z,isAllPools:T,setIsAllPools:f,poolFavoriteIdsChange:y,setPoolFavoriteIdsChange:U}=ss(),{getPoolList:R}=Ls(),{getFavoritePoolList:L}=Ys(),{goLiquidity:se}=Cs(),[W,G]=p.useState(u?["mining","farming"]:["mining","farming","noIncentives"]),ee=()=>{z(!u),f(!1),G(a=>a!=null&&a.includes("noIncentives")?["mining","farming"]:["mining","farming","noIncentives"])},oe=()=>{f(!T),h(!1),z(!1),G(["mining","farming","noIncentives"])},A=()=>{f(!1),h(!l),U(!1)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",y,i),l&&y&&(U(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",l),le({offset:0,isWatchList:l}))},[l,i==null?void 0:i.length,y]);const H=p.useRef(null),Y=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),o("pending"),le({offset:0,isListLoading:!1}),H.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",r),r=="pending"&&o("timeout")},1e4),x()},[v,N]=p.useState([]),j=a=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",a),N(P=>[...P,a])},_=a=>{N(P=>P.filter(q=>(q==null?void 0:q.coin_type)!==(a==null?void 0:a.coin_type)))};p.useEffect(()=>{console.log("ðŸš€ ~ PoolsContent ~ selectCoinList:",l,W,v),typeof l=="boolean"&&le({offset:0})},[l,W,v]);const S=20,[M,E]=p.useState(!0),[D,O]=p.useState(!0),[X,xe]=p.useState("desc"),[B,ke]=p.useState({label:"Volume (24H)",value:"vol"}),[K,ve]=p.useState([]),[me,Te]=p.useState(0),[we,Ae]=p.useState(1),le=async a=>{var os,ls,is,as;const P=(a==null?void 0:a.isListLoading)??!0,q=(a==null?void 0:a.isWatchList)??l;console.log("ðŸš€ ~  ~ params:",a,q);const Ce=v.length==2?`${(os=v[0])==null?void 0:os.coin_type},${(ls=v[1])==null?void 0:ls.coin_type}`:v.length==1?`${(is=v[0])==null?void 0:is.coin_type}`:"",{is_vaults:ye=!1,display_all_pools:ze=q?!0:T??!0,has_mining:Re=W.includes("mining"),has_farming:Be=W.includes("farming"),no_incentives:Ee=W.includes("noIncentives"),order_by:Ne=X=="desc"?`-${B==null?void 0:B.value}`:`${B==null?void 0:B.value}`,limit:Fe=S,offset:m=0,coin_type:F=Ce,pool:ge=""}=a;m==0&&Ae(1),Number(m)>=S?E(!0):O(P);const be={is_vaults:ye,display_all_pools:ze,has_mining:Re,has_farming:Be,no_incentives:Ee,order_by:Ne,limit:Fe,offset:m,coin_type:F,pool:ge};let ce;try{q?(be.pools=i,ce=await L(be)):ce=await R(be),console.log("ðŸš€ ~  ~ result:",ce),ce&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",ce),Number(m)>=S?ve(te=>te.concat(ce.list)):ve(ce.list),Te(ce.total),t((ce.total||0).toString()),O(!1),o("success"))}catch(te){console.log("ðŸš€ ~  ~ error:",te),te!=null&&te.list&&((as=te==null?void 0:te.list)==null?void 0:as.length)>0&&(o("error"),ve(te.list),Te(te.total),t(""),O(!1))}};p.useEffect(()=>{M&&E(!1)},[K.length]);const{failedTsToast:Xe}=Fs();p.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",r),r!=="pending"){const a={linkLabel:"",getShowInfo:()=>({toastTitleText:r=="error"?"Request Error":r=="timeout"?"Please check the network status.":""})};(r=="success"||r=="error")&&clearTimeout(H.current),(r=="error"||r=="timeout")&&Xe(a),n(!0)}},[r]);const{isApp:c}=pe(),C=a=>{if(console.log("ðŸš€ ~ clickSort ~ item:",a),c)(a==null?void 0:a.value)!==(B==null?void 0:B.value)&&(le({offset:0,order_by:`-${a==null?void 0:a.value}`}),xe("desc"),ke(a));else if((a==null?void 0:a.value)==(B==null?void 0:B.value)){le({offset:0,order_by:X=="desc"?`${a==null?void 0:a.value}`:`-${a==null?void 0:a.value}`});const P=X=="desc"?"asc":"desc";xe(P)}else le({offset:0,order_by:`-${a==null?void 0:a.value}`}),xe("desc"),ke(a)},k=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],V=k.reduce((a,P)=>(a[P.value]=P,a),{}),ne=a=>{const P=a*S;le({offset:P}),Ae(q=>q+1)};Qe();const w=p.useMemo(()=>{const a=(we-1)*S+(K==null?void 0:K.length);return r!=="error"&&Number(me)>a},[me,we,S]);p.useEffect(()=>(x(),H.current&&(clearTimeout(H.current),H.current=null),()=>{t(""),H.current&&(clearTimeout(H.current),H.current=null)}),[]);const Pe=Zs({count:K.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),fe=p.useRef(null);p.useEffect(()=>{let a=null;return!D&&fe.current&&(a=new IntersectionObserver(P=>{const q=P[0];q&&q.isIntersecting&&w&&!M&&(console.log("ðŸš€ ~ useEffect ~ entry:",q),ne(we))},{threshold:.5,rootMargin:"100px"}),a.observe(fe.current)),()=>{a&&a.disconnect()}},[D,we,w,M]);const ie=wn(X,B,C,V,c);return e.jsxs(b,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(Ps,{handleIsDisplayChecked:oe,handleIsWatchList:A,onClickIncentiveTypes:ee,handleRefresh:Y,selectCoinList:v,onClickSelectCoinList:j,onDeleteSelectCoinList:_,isRefreshed:s}),e.jsx(I,{h:"1px",w:"100%",bg:"border"}),e.jsxs(b,{w:"100%",position:"relative",gap:"20px",children:[!D&&(K==null?void 0:K.length)==0?e.jsx(Se,{type:"nodata",text:"No pools found",children:e.jsx(d,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):c?e.jsxs(b,{w:"100%",gap:"4px",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(d,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Ks,{sortText:"Sort by",minW:"180px",currentSort:B,sortByList:k,onSortByChange:C,xlinkHref:X=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{le({offset:0,order_by:X=="desc"?`${B==null?void 0:B.value}`:`-${B==null?void 0:B.value}`});const a=X=="desc"?"asc":"desc";xe(a)}})]}),e.jsx(Gs,{rowKey:"poolAddress",dataSource:K,columns:ie,loading:D,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(a,P)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:a=>{se(`/liquidity?poolAddress=${a.poolAddress}`,a)}})]}):D?e.jsx(Xs,{rowKey:"poolAddress",columns:ie,dataSource:K,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):e.jsxs(b,{w:"100%",gap:"0",children:[e.jsx(I,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.56fr) minmax(0px, 1.66fr) minmax(0px, 1.4fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(136px, 1.4fr)",h:"36px",columnGap:"12px",p:"0 16px",children:ie==null?void 0:ie.map((a,P)=>e.jsx($e,{as:"div",align:"center",justify:P===0?"flex-start":"flex-end",children:a.title},a.key))}),e.jsx(I,{w:"100%",h:`${K.length*80}px`,pos:"relative",children:(he=Pe.getVirtualItems())==null?void 0:he.map(a=>{const P=K[a.index];return e.jsx(Sn,{item:P,columns:ie,virtualRow:a,goLiquidity:se},P==null?void 0:P.poolAddress)})})]}),e.jsx(I,{ref:fe,children:M?e.jsx(Hs,{size:"sm",color:"text_caption"}):""})]})]})}const wn=(s,n,x,r,o)=>[{title:e.jsx(d,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:t=>{var i,l;return e.jsxs(g,{children:[e.jsx($s,{poolInfo:t,symbolEllipsesDecimals:10}),(t==null?void 0:t.haveFarming)&&e.jsx(Is,{}),(t==null?void 0:t.haveMining)&&e.jsx(dn,{}),(t==null?void 0:t.isVaults)&&e.jsx(hn,{}),e.jsx(gn,{coinTypeA:(i=t==null?void 0:t.tokenA)==null?void 0:i.coin_type,coinTypeB:(l=t==null?void 0:t.tokenB)==null?void 0:l.coin_type})]})}},{title:e.jsx(He,{labelInfo:r.tvl,sortRule:s,sortBy:n,clickSort:t=>x(t)}),key:"tvlDisplay"},{title:e.jsx(He,{labelInfo:r.vol,sortRule:s,sortBy:n,clickSort:t=>x(t)}),key:"volume24Display"},{title:e.jsx(He,{labelInfo:r.fees,sortRule:s,sortBy:n,clickSort:t=>x(t)}),key:"fees24Display"},{title:e.jsx(d,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:t,farmsRewarderList:i})=>t&&(t==null?void 0:t.length)<=0&&i&&(i==null?void 0:i.length)<=0,render:({miningRewardList:t,farmsRewarderList:i})=>e.jsx(yn,{miningRewardList:t,farmsRewarderList:i})},{title:e.jsx(He,{labelInfo:r.totalApr,sortRule:s,sortBy:n,tooltip:{type:"apr24"},clickSort:t=>x(t),justifyContent:"flex-end"}),key:"apr24h",render:t=>e.jsx(Js,{poolInfo:t,placement:o?"auto-start":"top"})},{title:e.jsx(d,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:t=>e.jsx(jn,{poolInfo:t})}],Sn=({item:s,columns:n,virtualRow:x,goLiquidity:r})=>e.jsx(I,{as:"div",pos:"absolute",top:`${x.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>r(`/liquidity?poolAddress=${s.poolAddress}`,s),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.56fr) minmax(0px, 1.66fr) minmax(0px, 1.4fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(136px, 1.4fr)",_hover:{bg:"primary_opacity.10"},children:n==null?void 0:n.map((o,t)=>e.jsx($e,{align:"center",justify:t===0?"flex-start":"flex-end",children:o!=null&&o.render?o==null?void 0:o.render(s):e.jsx(d,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:s==null?void 0:s[o==null?void 0:o.key]})},o.key))}),vn="data:image/png;base64,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",Cn="/assets/pool_bg-DIChGQZi.png",_n=({posInfo:s})=>{var r,o,t,i;const[n,x]=p.useState(!1);return e.jsx(I,{p:"12px 0",onClick:l=>ue(l),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:n,children:[e.jsx(Me,{children:e.jsx(je,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:e.jsx(d,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:$(s==null?void 0:s.totalRewardUsd,2)})})}),n&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(es,{children:e.jsx(Oe,{zIndex:"2",w:"fit-content",children:e.jsx(qe,{children:e.jsxs(b,{align:"flex-start",minW:"300px",children:[((r=s==null?void 0:s.pendingFeesList)==null?void 0:r.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(g,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Fees"}),e.jsxs(d,{color:"primary",children:[" ",$(s==null?void 0:s.feeOwedUsd,2)]})]}),(o=s==null?void 0:s.pendingFeesList)==null?void 0:o.map(l=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",l),e.jsxs(g,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ue,{token:l.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:We(l==null?void 0:l.amount,6)}),e.jsx(d,{fontSize:"12px",children:$(l==null?void 0:l.amountUSD,2)})]})]},l==null?void 0:l.coin_address)))]}),((t=s==null?void 0:s.pendingRewarderList)==null?void 0:t.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(g,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(d,{color:"primary",children:[" ",$(s==null?void 0:s.rewarderUsd,2)]})]}),(i=s==null?void 0:s.pendingRewarderList)==null?void 0:i.map(l=>e.jsxs(g,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ue,{token:l.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:We(l==null?void 0:l.amount,6)}),e.jsx(d,{fontSize:"12px",children:$(l==null?void 0:l.amountUSD,2)})]})]},l==null?void 0:l.coin_address))]})]})})})})]})})};function ts({posInfo:s,onClickCheckBox:n,checked:x,pageFrom:r,cursor:o="pointer"}){var z;const{getClmmPosName:t}=Ms(),{posPoolsOriginalData:i}=re(),l=p.useMemo(()=>{var T;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const f=(T=i==null?void 0:i[s==null?void 0:s.clmmPool])==null?void 0:T.index;return t(s==null?void 0:s.index,f)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,i]),{posPoolsRelatedData:h}=re(),u=((z=h[s==null?void 0:s.posId])==null?void 0:z.displayFee)+"%";return e.jsxs(Q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(g,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(ks,{poolInfo:{...s,feeDisplay:u},symbolEllipsesDecimals:10}),e.jsx(d,{fontSize:"12px",color:"primary_gray",children:l})]}),n&&e.jsx(Ie,{cursor:o,checked:x||!1,onClick:()=>n(s)})]}),r=="pendingYieldModal"?e.jsxs(g,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(_n,{posInfo:s})]}):e.jsxs(g,{justify:"space-between",p:"0 16px",children:[e.jsx(d,{color:"primary_gray",children:"Liquidity"}),e.jsx(on,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:r!="lpBurnNext"})]})]})}function kn({onClose:s,currentLockItem:n}){var G,ee,oe,A,H,Y,v,N;const{currentAccount:x}=_e(),{signAndExecuteTransaction:r}=Ts(),{getBurnTxPayload:o}=tn(),{getPositionBaseList:t}=ns(),{posLiquidityData:i}=re(),[l,h]=p.useState(!1),[u,z]=p.useState(""),[T,f]=p.useState(!1),y=j=>{const S=j.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");z(S),console.log("ðŸš€ ~ inputChange ~ e:",j.target.value,j.target.value.toLowerCase()),j.target.value.toLowerCase()=="lock my liquidity forever"?f(!0):f(!1)},{getTokenAmountValue:U}=Le(),R=i[n==null?void 0:n.posId],L=U((G=n==null?void 0:n.displayTokenA)==null?void 0:G.coin_type,R==null?void 0:R.displayCoinAmountA,"--"),se=U((ee=n==null?void 0:n.displayTokenB)==null?void 0:ee.coin_type,R==null?void 0:R.displayCoinAmountB,"--"),W=async()=>{console.log("ðŸš€ ~ currentLockItem:",n),h(!0);try{const j=o(n);console.log("ðŸš€ ~ toBurn ~ tx:",j);const _=await r(j,{getShowInfo:S=>{var E,D;const M={modalDescriptionText:`${(E=n==null?void 0:n.displayTokenA)==null?void 0:E.symbol} - ${(D=n==null?void 0:n.displayTokenB)==null?void 0:D.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",S),M}});console.log("ðŸš€ ~ toBurn ~ res:",_),_&&(await t(x==null?void 0:x.address),s()),h(!1)}catch(j){h(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",j)}};return e.jsxs(b,{w:"100%",gap:"12px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(d,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(b,{w:"100%",children:[e.jsx(ts,{posInfo:n,pageFrom:"lpBurnNext"}),e.jsx(Q,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(Q,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(b,{gap:"16px",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsxs(g,{children:[e.jsx(Ve,{imageUrl:(oe=n==null?void 0:n.displayTokenA)==null?void 0:oe.logo_url,w:"20px",h:"20px",coinType:(A=n==null?void 0:n.displayTokenA)==null?void 0:A.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[R==null?void 0:R.displayCoinAmountA," ",(H=n==null?void 0:n.displayTokenA)==null?void 0:H.symbol]})]}),e.jsx(d,{color:"text_caption",children:$(L,2)})]}),e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsxs(g,{children:[e.jsx(Ve,{imageUrl:(Y=n==null?void 0:n.displayTokenB)==null?void 0:Y.logo_url,w:"20px",h:"20px",coinType:(v=n==null?void 0:n.displayTokenB)==null?void 0:v.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[R==null?void 0:R.displayCoinAmountB," ",(N=n==null?void 0:n.displayTokenB)==null?void 0:N.symbol]})]}),e.jsx(d,{color:"text_caption",children:$(se,2)})]})]})})})]}),e.jsxs(g,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(ae,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(d,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(Q,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(d,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(d,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(Q,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(hs,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:u,onChange:y})})]}),e.jsxs(b,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx(Z,{isLoading:l,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!T||l,onClick:W,children:"Confirm"}),e.jsx(Z,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function mn({onClose:s,onClickLock:n,currentLockItem:x,onClickCheckBox:r}){const{currentAccount:o,onWalletModal:t}=_e(),{fullRangePosBaseList:i,fullRangePosBaseListLoading:l}=re();return e.jsxs(b,{w:"100%",gap:"20px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(b,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:o!=null&&o.address?l?[{},{}].map((h,u)=>e.jsx(zs,{},u)):(i==null?void 0:i.length)>0?i==null?void 0:i.map(h=>e.jsx(ts,{posInfo:h,checked:(h==null?void 0:h.posId)==(x==null?void 0:x.posId),onClickCheckBox:u=>r(u),pageFrom:"lpBurnPrev"},h==null?void 0:h.posId)):e.jsxs(Q,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(Se,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(d,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(Se,{type:"nowallet",onboard:()=>t(!0),bg:"none",border:"none"})}),e.jsxs(b,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(Z,{disabled:Object.values(x).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:n,children:"Lock Liquidity"}),e.jsx(Z,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const zs=()=>e.jsxs(Q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(g,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(g,{gap:"0",children:[e.jsx(Ze,{size:"9"}),e.jsx(Ze,{size:"9"}),e.jsx(b,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(de,{height:"4",width:"100px"})})]})}),e.jsx(I,{w:"100%",p:"16px",children:e.jsx(de,{height:"5",width:"250px"})})]});function Tn({isOpen:s,onClose:n}){const[x,r]=p.useState(!1),[o,t]=p.useState({});p.useEffect(()=>{t({}),r(!1)},[s]);const i=h=>{(h==null?void 0:h.posId)==(o==null?void 0:o.posId)?t({}):t(h)},{isApp:l}=pe();return e.jsxs(gs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:n,isCentered:!0,children:[e.jsx(us,{}),e.jsxs(js,{minWidth:l?"300px":"482px",children:[e.jsx(fs,{children:e.jsx(ys,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(bs,{}),e.jsxs(ws,{p:"16px 16px 0",textAlign:"center",children:[!x&&e.jsx(mn,{onClose:n,currentLockItem:o,onClickCheckBox:h=>i(h),onClickLock:()=>r(!0)}),x&&e.jsx(kn,{onClose:n,currentLockItem:o})]})]})]})}function An({isRefreshed:s}){var f;const{tab:n}=ms(),x=Qe(),[r,o]=p.useState(!1),{statisticsData:t}=qs(),{poolListLength:i}=ss(),{showPosListLength:l}=re(),h=p.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",i),[{label:"Pools",value:"pools",num:i,imgInfo:{src:Ds,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:l,imgInfo:{src:vn,w:"22px",h:"22px"}}]),[i,l]),{isApp:u}=pe(),[z,T]=p.useState(!1);return e.jsxs(b,{w:"100%",children:[e.jsxs(g,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(b,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(d,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(b,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:Cn,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(xs,{wrapStyle:{alignItems:u?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(t==null?void 0:t.totalValueLocked)||"",isLoading:!t}),e.jsx(xs,{wrapStyle:{alignItems:u?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(t==null?void 0:t.cumulativeVolume)||"",isLoading:!t})]})]}),e.jsx(I,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(Qs,{statisticsData:t,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(g,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Vs,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:h,currentTab:((f=h==null?void 0:h.find(y=>(y==null?void 0:y.value)===n))==null?void 0:f.label)||"Pools",handleChangeTab:y=>{x(`/pools?tab=${y.value}`)}}),e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[n=="positions"?e.jsx(Ws,{isOpen:z,label:e.jsx(d,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx(Z,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onClick:()=>{T(!1),o(!0)},children:"LP Burn"})}):e.jsx(Z,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>x("/create-pool"),children:"Create a new pool"}),e.jsx(Z,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>x("/select-pool"),children:"Add Liquidity"})]})]}),r&&e.jsx(Tn,{isOpen:r,onClose:()=>o(!1)})]})}const Pn="/assets/tvl_bg-D80TUrdU.png",zn="/assets/yield_bg-CcCC1tTK.png";function Rn({isOpen:s,claimLoading:n,onClose:x,changeClaimLoading:r}){const[o,t]=p.useState(!1),{coinPriceObj:i}=Ss(),{getPositionBaseList:l}=ns(),{signAndExecuteTransaction:h}=Ts(),{currentAccount:u}=_e(),{getBatchHarvestFeeAndRewardsTxPayload:z}=rn(),{getTokenAmountValue:T}=Le(),[f,y]=p.useState([]),[U,R]=p.useState(!0),[L,se]=p.useState(!0),[W,G]=p.useState(.01),[ee,oe]=p.useState([]),[A,H]=p.useState([]),[Y,v]=p.useState(""),[N,j]=p.useState(""),[_,S]=p.useState([]),{myPosYieldValue:M,posBaseList:E,posBaseListLoading:D,posFeeDataLoading:O,posRewardsDataLoading:X,posFeeData:xe,posRewardsData:B}=re(),ke=c=>{const C=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");c.target.value=c.target.value.replace(C,"$1"),G(c.target.value)},K=()=>{(!W||W<.01)&&G(.01)},ve=D||O||X;p.useEffect(()=>{const c=[];let C="0";const k=[];if((E==null?void 0:E.length)>0&&!D&&!O&&!X){E.forEach((w,Pe)=>{var ze,Re,Be,Ee,Ne,Fe;let fe="0",ie="0",he="0",a="0";const P=[],q=[];if(((ze=Object.values(xe))==null?void 0:ze.length)>0){const m=xe[w==null?void 0:w.posId],F=T((Re=w==null?void 0:w.displayTokenA)==null?void 0:Re.coin_type,m==null?void 0:m.displayFeeOwedA,"--"),ge=T((Be=w==null?void 0:w.displayTokenB)==null?void 0:Be.coin_type,m==null?void 0:m.displayFeeOwedB,"--");fe=J(fe).plus((m==null?void 0:m.displayFeeOwedA)||0).plus((m==null?void 0:m.displayFeeOwedB)||0).toString(),F!=="--"&&ge!=="--"&&(he=J(F).plus(ge).toString()),q.push({coin_address:Ke((Ee=w==null?void 0:w.displayTokenA)==null?void 0:Ee.coin_type,!1),amount:m==null?void 0:m.displayFeeOwedA,amountUSD:F,token:w==null?void 0:w.displayTokenA},{coin_address:Ke((Ne=w==null?void 0:w.displayTokenB)==null?void 0:Ne.coin_type,!1),amount:m==null?void 0:m.displayFeeOwedB,amountUSD:ge,token:w==null?void 0:w.displayTokenB})}if(((Fe=Object.values(B))==null?void 0:Fe.length)>0){const m=B[w==null?void 0:w.posId];(m==null?void 0:m.length)>0&&m.forEach(F=>{var ge;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",F),ie=J(ie).plus(F.display_amount_owed||0).toString(),Number(F==null?void 0:F.display_amount_owed)>0){const be=T(F==null?void 0:F.token.coin_type,F.display_amount_owed);be!=="--"&&(a=J(a).plus(be).toString()),P.push({coin_address:Ke((ge=F==null?void 0:F.token)==null?void 0:ge.coin_type,!1),amount:F.display_amount_owed,amountUSD:be,token:F==null?void 0:F.token})}})}const Ce=J(a).plus(he).toString(),ye=(J(fe).gt(0)||J(ie).gt(0))&&Number(Ce)==0?"--":Ce;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Ce,ye),C=J(C).plus(a).plus(he).toString(),Number(ye)!==0&&k.push(w),L&&Number(ye)>Number(W)&&c.push({...w,totalRewardUsd:ye,pendingRewarderList:P,pendingFeesList:q,rewarderUsd:a,feeOwedUsd:he}),L||c.push({...w,totalRewardUsd:ye,pendingRewarderList:P,pendingFeesList:q,rewarderUsd:a,feeOwedUsd:he})}),oe(k);const V=c.filter(w=>Number(w.totalRewardUsd)!==0);H(V),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",V,A),L?(V==null?void 0:V.length)!==c.length?v(""):v("all"):(V==null?void 0:V.length)!==k.length?v(""):v("all");const ne=c.sort((w,Pe)=>Pe.totalRewardUsd-w.totalRewardUsd);y(ne),R(!1)}},[W,E,L,D,O,X,i]);const{calculatePendingYield:me}=As();p.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",A),(A==null?void 0:A.length)>0){const{total:c,rewardAndFeeList:C}=me(A,xe,B);console.log("ðŸš€ ~ useEffect ~ total:",A,c,C),j(c),S(C)}else j(""),S([])},[A==null?void 0:A.length,xe,B]);const Te=c=>{if(console.log("ðŸš€ ~ selectItem ~ item:",c),Number(c==null?void 0:c.totalRewardUsd)<=0)return;const C=A,k=(C==null?void 0:C.filter(V=>(V==null?void 0:V.posId)!==(c==null?void 0:c.posId)))||[];C!=null&&C.some(V=>(V==null?void 0:V.posId)===(c==null?void 0:c.posId))||k.push(c),console.log("ðŸš€ ~ selectItem ~ updatedList:",k),H(k),L?(k==null?void 0:k.length)!==(f==null?void 0:f.length)?v(""):v("all"):(k==null?void 0:k.length)!==(ee==null?void 0:ee.length)?v(""):v("all")};p.useEffect(()=>{G(.01),t(!1),se(!0)},[s]);const we=()=>{if(Y=="all")v(""),H([]);else{v("all");const c=A,C=Object.fromEntries(A.map(k=>[k==null?void 0:k.posId,k]));f.forEach(k=>{!C[k==null?void 0:k.posId]&&Number(k.totalRewardUsd)!==0&&c.push(k)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",C,c),H(c)}},{fetchAccountBalance:Ae}=xn(),le=async()=>{r(!0);try{const c=Object.fromEntries(A.map(ne=>[ne==null?void 0:ne.posId,ne==null?void 0:ne.pendingRewarderList])),{tx:C,txb:k}=await z(A,c,u==null?void 0:u.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",C);const V=await h(k,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});console.log("ðŸš€ ~ toClaimYield ~ res:",V),V&&(Ae(),await l(u==null?void 0:u.address)),r(!1)}catch(c){r(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",c)}finally{x()}},{isApp:Xe}=pe();return e.jsxs(gs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:x,isCentered:!0,children:[e.jsx(us,{}),e.jsxs(js,{minWidth:Xe?"300px":"446px",children:[e.jsx(fs,{children:e.jsx(ys,{fontWeight:"500",fontSize:"16px",children:o?"Claim Yield":"Details"})}),e.jsx(bs,{}),e.jsx(ws,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(I,{children:[e.jsxs(b,{w:"100%",children:[e.jsx(I,{w:"100%",p:"0 16px",children:e.jsx(b,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(de,{isLoaded:!ve,children:e.jsxs(b,{gap:"4px",align:"center",children:[e.jsx(d,{color:"primary_gray",children:o?"Total Claim":"Pending Yield"}),e.jsx(d,{color:"primary",fontSize:"20px",fontWeight:"500",children:$(o?N:M,2)})]})})})}),!o&&e.jsxs(g,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(d,{color:"text_caption",children:"Position"}),e.jsxs(g,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(Je,{isChecked:L,onChange:()=>se(!L)}),e.jsx(d,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(Q,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(hs,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${W}`,onChange:ke,onBlur:K})})]})]}),e.jsx(b,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(f==null?void 0:f.length)>2?"16px":"20px",mr:"-4px",children:o?_==null?void 0:_.map(c=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",c),e.jsx(Q,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(Ue,{token:c==null?void 0:c.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(d,{color:"text_caption",children:We(c==null?void 0:c.amount,6)}),e.jsxs(d,{children:["(",$(c==null?void 0:c.amountUSD,2),")"]})]})]})},c==null?void 0:c.coin_address))):(f==null?void 0:f.length)>0?f==null?void 0:f.map(c=>e.jsx(ts,{posInfo:c,onClickCheckBox:C=>Te(C),pageFrom:"pendingYieldModal",cursor:Number(c==null?void 0:c.totalRewardUsd)<=0?"not-allowed":"pointer",checked:A.some(C=>(C==null?void 0:C.posId)===(c==null?void 0:c.posId))},c==null?void 0:c.posId)):U?[{},{}].map((c,C)=>e.jsx(zs,{},C)):e.jsx(Se,{type:"nodata"})}),o?e.jsx(g,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(Q,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>t(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(g,{justify:"center",gap:"4px",children:[e.jsx(ae,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(d,{children:"Back"})]})})}):e.jsx(I,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(g,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(b,{gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",children:"Amount selected"}),e.jsx(d,{color:"primary",fontSize:"18px",fontWeight:"500",children:$(N,2)})]}),e.jsxs(g,{children:[e.jsx(d,{color:"text_caption",children:"Select All"}),e.jsx(Ie,{checked:Y=="all",onClick:we})]})]})})]}),o?e.jsx(Z,{isLoading:n,disabled:(_==null?void 0:_.length)==0||n,w:"100%",h:"52px",fontWeight:"500",onClick:le,children:"Confirm"}):e.jsx(Z,{disabled:Number(N)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>t(!0),children:"Claim Yield"})]})})]})]})}const cs=({yieldList:s})=>{const[n,x]=p.useState(!1),{myPosYieldValue:r}=re(),{isApp:o}=pe();return e.jsx(b,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:o?()=>x(!n):()=>x(!1),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:n,placement:"bottom-end",children:[e.jsx(Me,{children:e.jsx(je,{as:"button",children:e.jsx(d,{cursor:Number(r)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(r)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:$(r,2)})})}),n&&Number(r)>0&&(s==null?void 0:s.length)>0&&e.jsx(es,{children:e.jsx(Oe,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(qe,{p:"0px",children:e.jsx(b,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(t=>{var i;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",t),e.jsxs(g,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(Ue,{token:t==null?void 0:t.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(g,{gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:We(t==null?void 0:t.amount,6)}),e.jsxs(d,{fontSize:"12px",children:["(",$(t==null?void 0:t.amountUSD,2),")"]})]})]},(i=t==null?void 0:t.token)==null?void 0:i.coin_type)})})})})})]})})};function Bn(){const{currentAccount:s}=_e(),[n,x]=p.useState(!1),[r,o]=p.useState(!1),[t,i]=p.useState([]),{getTokenAmountValue:l}=Le(),{coinPriceObj:h}=Ss(),{myPosYieldValue:u,setMyPosYieldValue:z,posFeeDataLoading:T,posRewardsDataLoading:f,posBaseList:y,posLiquidityData:U,posBaseListLoading:R,posLiquidityDataLoading:L,posFeeData:se,posRewardsData:W}=re(),G=p.useMemo(()=>{let Y=0,v=0;return(y==null?void 0:y.length)>0&&(s!=null&&s.address)?(y.forEach(N=>{var M,E;const j=U[N==null?void 0:N.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",j);const _=l((M=N==null?void 0:N.displayTokenA)==null?void 0:M.coin_type,j==null?void 0:j.displayCoinAmountA),S=l((E=N==null?void 0:N.displayTokenB)==null?void 0:E.coin_type,j==null?void 0:j.displayCoinAmountB);Y=J(Y).plus(_).plus(S).toString(),v=J(v).plus((j==null?void 0:j.displayCoinAmountA)||0).plus((j==null?void 0:j.displayCoinAmountB)||0).toString()}),J(Y).lte(0)&&J(v).gt(0)?"$--":$(Y,2)):"$0"},[y,U,s,h]),ee=s!=null&&s.address?R:!1,{calculatePendingYield:oe}=As();p.useEffect(()=>{if(!(s!=null&&s.address))z(""),i([]);else if(!R&&(y==null?void 0:y.length)<=0&&(z("0"),i([])),(y==null?void 0:y.length)>0&&(s!=null&&s.address)&&!R&&!T&&!f){const{total:Y,rewardAndFeeList:v}=oe(y,se,W);z(Y),i(v)}},[y,R,T,f,s,h]);const A=s!=null&&s.address?!u:!1,{isApp:H}=pe();return e.jsxs(vs,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(g,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Pn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(de,{isLoaded:!ee,children:e.jsx(d,{fontSize:"20px",color:"primary",children:G})})]}),e.jsxs(g,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:zn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(de,{isLoaded:!A,children:H?e.jsxs(g,{gap:"20px",children:[e.jsxs(b,{align:"flex-end",children:[e.jsx(cs,{yieldList:t}),e.jsx(Z,{isLoading:n,disabled:Number(u)<=0||n,w:"100px",h:"24px",onClick:()=>o(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(u)>0&&e.jsx(ae,{xlinkHref:"#icon-icon_spread",onClick:()=>o(!0)})]}):e.jsxs(g,{onClick:()=>o(!0),children:[e.jsx(cs,{yieldList:t}),Number(u)>0&&e.jsx(ae,{xlinkHref:"#icon-icon_spread"}),e.jsx(Z,{isLoading:n,disabled:Number(u)<=0||n,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(Rn,{isOpen:r,claimLoading:n,onClose:()=>o(!1),changeClaimLoading:Y=>x(Y)})]})}function En({poolInfo:s}){var h,u,z,T,f,y;const n=Qe(),{posPoolsRelatedData:x,posApiPoolData:r}=re(),o=(h=r[s==null?void 0:s.clmmPoolAddress])==null?void 0:h.haveFarming,t=(((z=x[(u=s==null?void 0:s.list[0])==null?void 0:u.posId])==null?void 0:z.displayFee)||"--")+"%",[i,l]=p.useState(!0);return e.jsxs(b,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(vs,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>l(!i),children:[e.jsx(ks,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:t,...s},haveName:!0}),e.jsxs(g,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(g,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(d,{color:"primary_gray",children:"Current Price"}),e.jsx(pn,{symbolEllipsesDecimals:10,posId:(T=s==null?void 0:s.list[0])==null?void 0:T.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),o&&e.jsxs(g,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:U=>{ue(U),n("/farms")},border:"1px solid",borderColor:"transparent",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(De,{src:"/images/icon_farms.png",w:"20px",h:"20px"}),e.jsx(d,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(ae,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[e.jsx(Z,{onClick:U=>{ue(U),n(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(Q,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(g,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(d,{fontSize:"12px",color:"primary",children:[(f=s==null?void 0:s.list)==null?void 0:f.length," ",((y=s==null?void 0:s.list)==null?void 0:y.length)>1?"Positions":"Position"]}),e.jsx(ae,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:i?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),i&&e.jsx(b,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((U,R)=>e.jsx(en,{positionInfo:U},R))})]})}function Nn({isRefreshed:s,handleIsRefreshed:n}){var N;const{getStatistics:x}=_s(),{fetchTokenPrices:r}=Le(),{currentAccount:o,onWalletModal:t}=_e(),{getPositionBaseList:i,getPosRelatedData:l}=ns(),{posRewardsData:h,posBaseList:u,setShowPosListLength:z,setMyPosYieldValue:T,posBaseListLoading:f,posBaseListGroupByPool:y}=re(),[U,R]=p.useState([]),{getNotifiPositionTransfer:L}=ln(),se=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),T(""),x(),v(),o!=null&&o.address&&A(o==null?void 0:o.address),setTimeout(()=>{n(!0)},1e3)};an({onRpcChange:()=>{o!=null&&o.address&&A(o==null?void 0:o.address)}});const[W,G]=p.useState([]),ee=j=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",j),G(_=>[..._,j])},oe=j=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",j),G(_=>_.filter(S=>(S==null?void 0:S.coin_type)!==(j==null?void 0:j.coin_type)))};p.useEffect(()=>{T(""),o!=null&&o.address?A(o==null?void 0:o.address):z("")},[o==null?void 0:o.address]);const A=async j=>{await i(j)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ posBaseList:",u),(u==null?void 0:u.length)>0&&l(u)},[u]);const{notifiClient:H,notifiSources:Y}=Us();p.useEffect(()=>{L(u,H,Y)},[u,H,Y]),p.useEffect(()=>{var E,D;const j=(E=W[0])==null?void 0:E.coin_type,_=(D=W[1])==null?void 0:D.coin_type,S=Object.values(y).filter(O=>j&&_?O.tokenA.coin_type==j&&O.tokenB.coin_type==_||O.tokenA.coin_type==_&&O.tokenB.coin_type==j:j?O.tokenA.coin_type==j||O.tokenB.coin_type==j:O);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(y),S),R(S);const M=S.reduce((O,X)=>O+(X.list?X.list.length:0),0);o!=null&&o.address&&z(M.toString())},[W,y]);const v=()=>{const j=[];if((u==null?void 0:u.length)>0){u.map(S=>{j.push(S==null?void 0:S.coinTypeA),j.push(S==null?void 0:S.coinTypeB);const M=h[S==null?void 0:S.posId];M==null||M.map(E=>{J(E==null?void 0:E.display_amount_owed).gt(0)&&j.push(E==null?void 0:E.coin_address)})});const _=Array.from(new Set(j));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",u,j,_),r(_)}};return p.useEffect(()=>{v()},[u==null?void 0:u.length,h]),p.useEffect(()=>(x(),()=>{z("")}),[]),p.useEffect(()=>{f&&z("")},[f]),e.jsxs(b,{gap:"20px",w:"100%",children:[e.jsx(Ps,{isPools:!1,handleRefresh:se,selectCoinList:W,onClickSelectCoinList:ee,onDeleteSelectCoinList:oe}),e.jsx(I,{h:"1px",w:"100%",bg:"border"}),e.jsx(Bn,{}),o!=null&&o.address?f?[{},{},{},{}].map((j,_)=>e.jsx(sn,{},_)):((N=Object.values(U))==null?void 0:N.length)>0?Object.values(U).map((j,_)=>e.jsx(En,{poolInfo:j},_)):e.jsx(Se,{type:"nodata",text:"No liquidity positions"}):e.jsx(Se,{type:"nowallet",onboard:()=>t(!0)})]})}function Pt(){const{tab:s}=ms(),[n,x]=p.useState(!0),r=o=>{x(o)};return e.jsxs(b,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(An,{isRefreshed:n}),(s=="pools"||s===void 0)&&e.jsx(bn,{isRefreshed:n,handleIsRefreshed:r}),s=="positions"&&e.jsx(Nn,{isRefreshed:n,handleIsRefreshed:r})]})}export{Pt as default};
