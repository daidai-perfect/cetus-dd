import{j as s,H as k,C as I,I as Ws,T as f,a as r,ab as qs,V as _,v as O,P as $s,h as Is,k as se,m as ee,n as oe,f as Q,F as Ns,aa as te,O as ne,X as ie,Y as le,Z as ae,$ as re,a8 as pe,a0 as ce,a1 as xe,t as de}from"./vendor-DXHkIl66.js";import{P as Qs,M as ue,L as ge,a as he,b as fe}from"./PoolItem-0uWgLeaK.js";import{u as js,a as Us,b as ye,i as je,V as be}from"./useStatistics-DP84Z_Co.js";import{u as Ds,a as bs}from"./useFavoritePool-g1BGOkIQ.js";import{u as ve}from"./useGetPoolList-C1CvDnhh.js";import{F as rs,G as vs,H as Se,A as Te,J as Ce,K as Ae,a as ps,I as fs,c as as,v as Fs,L as Es,M as Pe,E as we,j as Gs,n as Ys,B as is,O as Hs,i as ke,P as _e,z as Y,Q as gs,d as Be}from"./index-kyUQkV0u.js";import{u as me}from"./useRequest-Ch6jk_8p.js";import{H as Ve,T as ze}from"./Table-QkiArPrT.js";import{N as ys}from"./NoData-CqJO7NcS.js";import{S as Fe}from"./SortDropBlock-Do9FYZUz.js";import{T as ls}from"./TableSortTh-BBugiXPb.js";import{u as Ee}from"./index-BUWkTazT.js";import{A as He}from"./index-aVqM4a2c.js";import{C as Me}from"./CoinPairInfo-BDmYqfIN.js";import{V as We,F as qe}from"./index-Ds38-45O.js";import{I as hs}from"./IconText-BzA2jU-J.js";import{u as Ne}from"./useToken-DX7Pn68W.js";import{u as Os,a as Ss}from"./usePositionList-CI3d_5dL.js";import{V as Ms}from"./VTextLabelBox-Cmezufwl.js";import{u as Rs,P as Qe}from"./PositionListLoading-OraOp8Oy.js";import{u as Ue}from"./useBurn-ACj-AYrf.js";import{u as De}from"./useTransaction-B4SsAvX4.js";import{u as Ge}from"./useNotifiSubscription-CslBSVuB.js";import{u as Ye}from"./useRpcListener-D-qxiGPP.js";import"./CheckBox-DQX8O2AC.js";import"./RefreshButton-CTCjyZ_x.js";import"./SearchInputBlock-Dq6kTTjG.js";import"./index-uDW4ys5e.js";import"./Loading-BH2b7hW0.js";import"./SingleTokenInfo-CH35Ug0b.js";import"./CopyButton-Ch6NufqW.js";import"./TooltipIcon-COraj9ZQ.js";import"./PositionCurrentPrice-DNMY6mcU.js";import"./msafe-oYBkW7LJ.js";import"./activeOrders-Du6enxqH.js";import"./useAccountBalance-B_xeHqrX.js";import"./PriceRange-CgXC2e6L.js";import"./PositionStatus-6TxsjP4h.js";import"./RangeValue-CUu5lLFJ.js";import"./index-CpndVCnN.js";import"./useWrapPoolData-CShxRWjZ.js";import"./VolumeChart-CpRwJ43H.js";import"./EmptyTooltip-CXIVDRPI.js";import"./_getAllKeysIn-DOF9IPDG.js";import"./YAxis-BzsWINjE.js";import"./generateCategoricalChart-BPlzNego.js";import"./debounce-BgSgg6I6.js";import"./linear-DYpwdEgO.js";import"./index-DKPh1ief.js";import"./index-Ct3YeWBa.js";import"./Pagination-CZ7x-s8t.js";import"./PoweredByHaedal-990R--7x.js";import"./VaultsAprBlock-CFWgDqc2.js";import"./swapWidget-B3FU05CN.js";import"./useTokenBalance-BzrxWKLg.js";import"./global-HfANoqcU.js";import"./index-BT2bG9uf.js";import"./v4-C6aID195.js";import"./useFindBestRouting-B2fq98Bc.js";import"./useSwapHelper-ChsEPMW1.js";import"./HTextLabelBox-MEowE9sl.js";import"./Slippage-BTNZBMV0.js";import"./useInterval-Cb1zlf7x.js";import"./useDisplayTickPrice-y4xjQAUw.js";import"./detail-CdyhQDcs.js";import"./useTrack-DtugX5rf.js";import"./useSigner-D-QeL5Td.js";import"./useNotifiAlerts-Bz96u_ka.js";import"./useXCetusHelper-CxP_Iahd.js";import"./index-CptRizr3.js";import"./usePreviousValue-BBpD8e7r.js";const Oe=()=>s.jsx(k,{w:"18px",h:"18px",onClick:t=>{vs(t)},children:s.jsx(rs,{placement:"top",tooltip:s.jsx(f,{fontSize:"12px",children:"Mining rewards available"}),children:s.jsx(I,{children:s.jsx(Ws,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),Re=({coinTypeA:t,coinTypeB:o})=>{const{getShowCoinTag:x}=Se(),{importTokenList:l}=Te(),{verifiedTokenMap:n}=Ce(),e=r.useMemo(()=>(t||o)&&(n==null?void 0:n.size)>0?x(t)||x(o):!1,[t,o,n,l]);return s.jsx(s.Fragment,{children:e&&s.jsx(k,{w:"20px",h:"20px",onClick:a=>{vs(a)},children:s.jsx(rs,{placement:"top",tooltip:s.jsx(f,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:s.jsx(I,{children:s.jsx(Ws,{w:"100%",h:"100%",src:Ae})})})})})};function Xe({poolInfo:t}){const o=qs(),{addFavorites:x,removeFavorites:l}=Ds(),{poolFavoriteIds:n}=bs(),{goLiquidity:e}=js(),a=r.useMemo(()=>n==null?void 0:n.includes((t==null?void 0:t.poolAddress)||""),[JSON.stringify(n),t==null?void 0:t.poolAddress]);return s.jsxs(_,{align:"flex-start",padding:"8px",children:[s.jsx(hs,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{e(`/liquidity?tab=analytics&poolAddress=${t==null?void 0:t.poolAddress}`,t)}}),s.jsx(hs,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var u,g;o(`/swap/${(u=t==null?void 0:t.displayTokenA)==null?void 0:u.coin_type}/${(g=t==null?void 0:t.displayTokenB)==null?void 0:g.coin_type}`)}}),s.jsx(hs,{text:"Add to Watchlist",xlinkHref:a?"#icon-icon_star_sel":"#icon-icon_star",svgFill:a?"primary":"text_paragraph",svgSize:"22px",svgMl:"-2px",onClick:()=>{a?l(t==null?void 0:t.poolAddress):x(t==null?void 0:t.poolAddress)}})]})}function Ke({poolInfo:t}){const{isApp:o}=ps(),{goLiquidity:x}=js(),[l,n]=r.useState(!1),[e,a]=r.useState(!1);return s.jsxs(k,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:o?"space-between":"flex-end",gap:"8px",children:[t.isVaults||t.isUnstableVault?s.jsx(rs,{placement:"bottom-end",tooltip:s.jsx(f,{_hover:{color:"primary"},cursor:"pointer",color:o?"primary":"text_paragraph",children:"Auto"}),showTooltip:e,children:s.jsx(I,{w:o?"calc(100%)":"unset",children:s.jsxs(O,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:o?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:u=>{u.stopPropagation(),n(!l)},onMouseMove:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[s.jsx(fs,{svgFill:o?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),o&&s.jsx(f,{color:o?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,s.jsx(O,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{x(`/liquidity?poolAddress=${t==null?void 0:t.poolAddress}`,t)},children:"Deposit"}),s.jsxs($s,{isLazy:!0,trigger:o?"click":"hover",placement:o?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[s.jsx(Is,{children:s.jsx(I,{onClick:u=>{vs(u)},children:s.jsx(O,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:s.jsx(fs,{svgFill:o?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),s.jsx(se,{children:s.jsx(ee,{borderRadius:"12px",w:"fit-content",children:s.jsx(oe,{p:"0",fontSize:"12px",w:"fit-content",children:s.jsx(Xe,{poolInfo:t})})})})]}),l?s.jsx(We,{isOpen:l,setIsOpen:n,displayTokenA:t.displayTokenA,displayTokenB:t.displayTokenB,feeDisplay:t.feeDisplay,clmmPool:t.poolAddress,isUnstableVault:t.isUnstableVault,vaultId:t.vaultId,isReverse:t.isReverse}):null]})}function Ze({miningRewardList:t,farmsRewarderList:o}){const{getTokenListInfo:x}=Ne(),[l,n]=r.useState([]);return r.useEffect(()=>{(async()=>{if((t==null?void 0:t.length)>0||(o==null?void 0:o.length)>0)try{let a=[],u=[];if((t==null?void 0:t.length)>0){const g=t==null?void 0:t.map(p=>p==null?void 0:p.coinType),y=await x(g);a=t.map(p=>{const b=y==null?void 0:y.get(p==null?void 0:p.coinType);return{...p,tokenInfo:b,isMining:!0}})}if((o==null?void 0:o.length)>0){const g=o==null?void 0:o.map(p=>p==null?void 0:p.coinType),y=await x(g);u=o.map(p=>{const b=y==null?void 0:y.get(p==null?void 0:p.coinType);return{...p,tokenInfo:b,isFarming:!0}})}n(a.concat(u))}catch(a){console.error("Error processing list:",a)}})()},[t,o]),s.jsx(k,{w:"100%",justify:"flex-end",children:l.map(e=>{var a,u,g,y,p;return s.jsx(Q,{onClick:b=>b.stopPropagation(),children:s.jsx(rs,{placement:"top",tooltip:s.jsxs(k,{gap:"4px",children:[s.jsx(Q,{children:s.jsx(as,{imageUrl:(a=e==null?void 0:e.tokenInfo)==null?void 0:a.logo_url,w:"24px",h:"24px"})}),(e==null?void 0:e.isMining)&&s.jsxs(f,{color:"primary",display:"inline-block",children:[Fs(Es(Pe(e==null?void 0:e.emissionsEveryDay,(u=e==null?void 0:e.tokenInfo)==null?void 0:u.decimals),2))," ",(g=e==null?void 0:e.tokenInfo)==null?void 0:g.symbol," per day in Mining"]}),(e==null?void 0:e.isFarming)&&s.jsxs(f,{color:"primary",display:"inline-block",children:[Fs(Es(e==null?void 0:e.emissionsEveryDay,2))," ",(y=e==null?void 0:e.tokenInfo)==null?void 0:y.symbol," per day in Farming"]})]},e==null?void 0:e.coinType),children:s.jsx(I,{as:"button",children:s.jsx(as,{imageUrl:(p=e==null?void 0:e.tokenInfo)==null?void 0:p.logo_url,w:"24px",h:"24px"})})})},e==null?void 0:e.coinType)})})}function Je({isRefreshed:t,handleIsRefreshed:o}){var _s;const{getStatistics:x}=Us(),{poolRefreshStatus:l,setPoolRefreshStatus:n,setPoolListLength:e,poolFavoriteIds:a,isWatchList:u,setIsWatchList:g,isIncentivizedOnly:y,setIsIncentivizedOnly:p,isAllPools:b,setIsAllPools:H,poolFavoriteIdsChange:S,setPoolFavoriteIdsChange:U}=bs(),{getPoolList:R}=ve(),{getFavoritePoolList:T}=Ds(),{goLiquidity:Z}=js(),[X,W]=r.useState({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:20,offset:0,coin_type:"",pool:""}),C=i=>{W(h=>({...h,isListLoading:!0,...i}))},J=i=>{var h;C({offset:0}),p((h=i.target)==null?void 0:h.checked),H(!1)},L=i=>{var h;C({offset:0}),H((h=i.target)==null?void 0:h.checked),g(!1),p(!1)},D=()=>{C({offset:0}),H(!1),g(!u),U(!1)};r.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",S,a),u&&S&&(U(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",u),C({offset:0}),g(!0))},[a==null?void 0:a.length,S]);const B=r.useRef(null),K=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),o(!1),n("pending"),os(1),C({offset:0,isListLoading:!1}),B.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",l),l=="pending"&&n("timeout")},1e4),x()},[V,G]=r.useState([]),c=i=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",i),G(h=>[...h,i])},j=i=>{G(h=>h.filter(E=>(E==null?void 0:E.coin_type)!==(i==null?void 0:i.coin_type)))},d=20,[q,N]=r.useState(!0),[A,z]=r.useState(!0),[F,m]=r.useState("desc"),[v,Ts]=r.useState({label:"Volume (24H)",value:"vol"}),[P,ss]=r.useState([]),[Cs,cs]=r.useState(0),[es,os]=r.useState(1),As=async i=>{var Bs,ms,Vs,zs;const h=(i==null?void 0:i.isListLoading)??!0,E=u,Ls=V.length==2?`${(Bs=V[0])==null?void 0:Bs.coin_type},${(ms=V[1])==null?void 0:ms.coin_type}`:V.length==1?`${(Vs=V[0])==null?void 0:Vs.coin_type}`:"",{offset:ts=0}=i;ts==0&&os(1),Number(ts)>=d?N(!0):z(h);const us=y?["mining","farming"]:["mining","farming","noIncentives"],ns={...i,coin_type:Ls,display_all_pools:E?!0:b??!0,offset:ts,has_mining:us.includes("mining"),has_farming:us.includes("farming"),no_incentives:us.includes("noIncentives")};console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ query:",ns,b);let w;try{E?(ns.pools=a,w=await T(ns)):w=await R(ns),console.log("ðŸš€ ~  ~ result:",w),w&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",w),w!=null&&w.isLocal?(n("error"),ss(w.list),cs(w.total),e(w.total||"0"),os(1)):(Number(ts)>=d?ss(M=>M.concat(w.list)):ss(w.list),cs(w.total),e((w.total||0).toString()),n("success")),z(!1))}catch(M){console.log("ðŸš€ ~  ~ error:",M),M!=null&&M.list&&((zs=M==null?void 0:M.list)==null?void 0:zs.length)>0&&(n("error"),ss(M.list),cs(M.total),e(""),z(!1))}};me(()=>As(X),{refreshDeps:[X,V,u,b,u,y],manual:!1,debounceWait:150}),r.useEffect(()=>{q&&N(!1)},[P.length]);const{failedTsToast:Xs}=we();r.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",l),l!=="pending"){const i={linkLabel:"",getShowInfo:()=>({toastTitleText:l=="error"?"Request Error":l=="timeout"?"Please check the network status.":""})};(l=="success"||l=="error")&&clearTimeout(B.current),(l=="error"||l=="timeout")&&Xs(i),o(!0)}},[l]);const{isApp:xs}=ps(),Ps=i=>{if(console.log("ðŸš€ ~ clickSort ~ item:",i),xs)(i==null?void 0:i.value)!==(v==null?void 0:v.value)&&(C({offset:0,order_by:`-${i==null?void 0:i.value}`}),m("desc"),Ts(i));else if((i==null?void 0:i.value)==(v==null?void 0:v.value)){C({offset:0,order_by:F=="desc"?`${i==null?void 0:i.value}`:`-${i==null?void 0:i.value}`});const h=F=="desc"?"asc":"desc";m(h)}else C({offset:0,order_by:`-${i==null?void 0:i.value}`}),m("desc"),Ts(i)},ws=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],Ks=ws.reduce((i,h)=>(i[h.value]=h,i),{}),Zs=i=>{const h=i*d;As({...X,offset:h}),os(E=>E+1)},ks=r.useMemo(()=>{const i=(es-1)*d+(P==null?void 0:P.length);return l!=="error"&&Number(Cs)>i},[Cs,es,d,l,P==null?void 0:P.length]);r.useEffect(()=>(x(),B.current&&(clearTimeout(B.current),B.current=null),()=>{e(""),B.current&&(clearTimeout(B.current),B.current=null)}),[]);const Js=Ee({count:P.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),ds=r.useRef(null);r.useEffect(()=>{let i=null;return!A&&ds.current&&(i=new IntersectionObserver(h=>{const E=h[0];E&&E.isIntersecting&&ks&&!q&&(console.log("ðŸš€ ~ useEffect ~ entry:",E),Zs(es))},{threshold:.5,rootMargin:"100px"}),i.observe(ds.current)),()=>{i&&i.disconnect()}},[A,es,ks,q]);const $=Le(F,v,Ps,Ks,xs);return s.jsxs(_,{gap:"20px",w:"100%",background:"bg_primary",children:[s.jsx(Qs,{handleIsDisplayChecked:L,handleIsWatchList:D,onClickIncentiveTypes:J,handleRefresh:K,selectCoinList:V,onClickSelectCoinList:c,onDeleteSelectCoinList:j,isRefreshed:t}),s.jsx(Q,{h:"1px",w:"100%",bg:"border"}),s.jsxs(_,{w:"100%",position:"relative",gap:"20px",children:[!A&&(P==null?void 0:P.length)==0?s.jsx(ys,{type:"nodata",text:"No pools found",children:s.jsx(f,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):xs?s.jsxs(_,{w:"100%",gap:"4px",children:[s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsx(f,{fontSize:"24px",color:"text_caption",children:"Pools"}),s.jsx(Fe,{sortText:"Sort by",minW:"180px",currentSort:v,sortByList:ws,onSortByChange:Ps,xlinkHref:F=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{C({offset:0,order_by:F=="desc"?`${v==null?void 0:v.value}`:`-${v==null?void 0:v.value}`});const i=F=="desc"?"asc":"desc";m(i)}})]}),s.jsx(Ve,{rowKey:"poolAddress",dataSource:P,columns:$,loading:A,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(i,h)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:i=>{Z(`/liquidity?poolAddress=${i.poolAddress}`,i)}})]}):A?s.jsx(ze,{rowKey:"poolAddress",columns:$,dataSource:P,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):s.jsxs(_,{w:"100%",gap:"0",children:[s.jsx(Q,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",h:"36px",columnGap:"12px",p:"0 16px",children:$==null?void 0:$.map((i,h)=>s.jsx(Ns,{as:"div",align:"center",justify:h===0?"flex-start":"flex-end",children:i.title},i.key))}),s.jsx(Q,{w:"100%",h:`${P.length*80}px`,pos:"relative",children:(_s=Js.getVirtualItems())==null?void 0:_s.map(i=>{const h=P[i.index];return s.jsx($e,{item:h,columns:$,virtualRow:i,goLiquidity:Z},h==null?void 0:h.poolAddress)})})]}),s.jsx(Q,{ref:ds,children:q?s.jsx(te,{size:"sm",color:"text_caption"}):""})]})]})}const Le=(t,o,x,l,n)=>[{title:s.jsx(f,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:e=>{var a,u;return s.jsxs(k,{children:[s.jsx(Me,{poolInfo:e,symbolEllipsesDecimals:10}),(e==null?void 0:e.haveFarming)&&s.jsx(qe,{}),(e==null?void 0:e.haveMining)&&s.jsx(Oe,{}),s.jsx(Re,{coinTypeA:(a=e==null?void 0:e.tokenA)==null?void 0:a.coin_type,coinTypeB:(u=e==null?void 0:e.tokenB)==null?void 0:u.coin_type})]})}},{title:s.jsx(ls,{labelInfo:l.tvl,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"tvlDisplay"},{title:s.jsx(ls,{labelInfo:l.vol,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"volume24Display"},{title:s.jsx(ls,{labelInfo:l.fees,sortRule:t,sortBy:o,clickSort:e=>x(e)}),key:"fees24Display"},{title:s.jsx(f,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:e,farmsRewarderList:a})=>e&&(e==null?void 0:e.length)<=0&&a&&(a==null?void 0:a.length)<=0,render:({miningRewardList:e,farmsRewarderList:a})=>s.jsx(Ze,{miningRewardList:e,farmsRewarderList:a})},{title:s.jsx(ls,{labelInfo:l.totalApr,sortRule:t,sortBy:o,tooltip:{type:"apr24"},clickSort:e=>x(e),justifyContent:"flex-end"}),key:"apr24h",render:e=>s.jsx(He,{poolInfo:e,placement:n?"auto-start":"top"})},{title:s.jsx(f,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:e=>s.jsx(Ke,{poolInfo:e})}],$e=({item:t,columns:o,virtualRow:x,goLiquidity:l})=>s.jsx(Q,{as:"div",pos:"absolute",top:`${x.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>l(`/liquidity?poolAddress=${t.poolAddress}`,t),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",_hover:{bg:"primary_opacity.10"},children:o==null?void 0:o.map((n,e)=>s.jsx(Ns,{align:"center",justify:e===0?"flex-start":"flex-end",children:n!=null&&n.render?n==null?void 0:n.render(t):s.jsx(f,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:t==null?void 0:t[n==null?void 0:n.key]})},n.key))}),Ie="data:image/png;base64,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",so="/assets/pool_bg-DIChGQZi.png";function eo({onClose:t,currentLockItem:o}){var C,J,L,D,B,K,V,G;const{currentAccount:x}=Gs(),{signAndExecuteTransaction:l}=De(),{getBurnTxPayload:n}=Ue(),{getPositionBaseList:e,getPosRelatedData:a}=Os(),{posLiquidityData:u}=Ss(),[g,y]=r.useState(!1),[p,b]=r.useState(""),[H,S]=r.useState(!1),U=c=>{const d=c.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");b(d),console.log("ðŸš€ ~ inputChange ~ e:",c.target.value,c.target.value.toLowerCase()),c.target.value.toLowerCase()=="lock my liquidity forever"?S(!0):S(!1)},{getTokenAmountValue:R}=Ys(),T=u[o==null?void 0:o.posId],Z=R((C=o==null?void 0:o.displayTokenA)==null?void 0:C.coin_type,T==null?void 0:T.displayCoinAmountA,"--"),X=R((J=o==null?void 0:o.displayTokenB)==null?void 0:J.coin_type,T==null?void 0:T.displayCoinAmountB,"--"),W=async()=>{console.log("ðŸš€ ~ currentLockItem:",o),y(!0);try{const c=n(o);console.log("ðŸš€ ~ toBurn ~ tx:",c);const j=await l(c,{getShowInfo:d=>{var N,A;const q={modalDescriptionText:`${(N=o==null?void 0:o.displayTokenA)==null?void 0:N.symbol} - ${(A=o==null?void 0:o.displayTokenB)==null?void 0:A.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",d),q}});if(console.log("ðŸš€ ~ toBurn ~ res:",j),j){const d=await e(x==null?void 0:x.address);a(d),t()}y(!1)}catch(c){y(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",c)}};return s.jsxs(_,{w:"100%",gap:"12px",children:[s.jsxs(_,{w:"100%",align:"flex-start",gap:"20px",children:[s.jsx(f,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),s.jsx(f,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),s.jsxs(_,{w:"100%",children:[s.jsx(ue,{posInfo:o,pageFrom:"lpBurnNext"}),s.jsx(is,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:s.jsx(is,{p:"16px 12px",borderRadius:"12px",children:s.jsxs(_,{gap:"16px",children:[s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsxs(k,{children:[s.jsx(as,{imageUrl:(L=o==null?void 0:o.displayTokenA)==null?void 0:L.logo_url,w:"20px",h:"20px",coinType:(D=o==null?void 0:o.displayTokenA)==null?void 0:D.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(f,{color:"text_caption",children:[T==null?void 0:T.displayCoinAmountA," ",(B=o==null?void 0:o.displayTokenA)==null?void 0:B.symbol]})]}),s.jsx(f,{color:"text_caption",children:Hs(Z,2)})]}),s.jsxs(k,{w:"100%",justify:"space-between",children:[s.jsxs(k,{children:[s.jsx(as,{imageUrl:(K=o==null?void 0:o.displayTokenB)==null?void 0:K.logo_url,w:"20px",h:"20px",coinType:(V=o==null?void 0:o.displayTokenB)==null?void 0:V.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),s.jsxs(f,{color:"text_caption",children:[T==null?void 0:T.displayCoinAmountB," ",(G=o==null?void 0:o.displayTokenB)==null?void 0:G.symbol]})]}),s.jsx(f,{color:"text_caption",children:Hs(X,2)})]})]})})})]}),s.jsxs(k,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[s.jsx(fs,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),s.jsx(f,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),s.jsxs(is,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[s.jsx(f,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),s.jsx(f,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),s.jsx(is,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:s.jsx(ne,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:p,onChange:U})})]}),s.jsxs(_,{w:"100%",gap:"8px",pb:"16px",children:[s.jsx(O,{isLoading:g,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!H||g,onClick:W,children:"Confirm"}),s.jsx(O,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:t,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function oo({isOpen:t,onClose:o}){const[x,l]=r.useState(!1),[n,e]=r.useState({});r.useEffect(()=>{e({}),l(!1)},[t]);const a=g=>{(g==null?void 0:g.posId)==(n==null?void 0:n.posId)?e({}):e(g)},{isApp:u}=ps();return s.jsxs(ie,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:o,isCentered:!0,children:[s.jsx(le,{}),s.jsxs(ae,{minWidth:u?"300px":"482px",children:[s.jsx(re,{children:s.jsx(pe,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),s.jsx(ce,{}),s.jsxs(xe,{p:"16px 16px 0",textAlign:"center",children:[!x&&s.jsx(ge,{onClose:o,currentLockItem:n,onClickCheckBox:g=>a(g),onClickLock:()=>l(!0)}),x&&s.jsx(eo,{onClose:o,currentLockItem:n})]})]})]})}function to({isRefreshed:t}){var H;const{tab:o}=Rs(),x=qs(),[l,n]=r.useState(!1),{statisticsData:e}=ye(),{poolListLength:a}=bs(),{showPosListLength:u}=Ss(),g=r.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",a),[{label:"Pools",value:"pools",num:a,imgInfo:{src:je,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:u,imgInfo:{src:Ie,w:"22px",h:"22px"}}]),[a,u]),{isApp:y}=ps(),[p,b]=r.useState(!1);return s.jsxs(_,{w:"100%",children:[s.jsxs(k,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[s.jsxs(_,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[s.jsx(f,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),s.jsxs(_,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:so,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[s.jsx(Ms,{wrapStyle:{alignItems:y?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(e==null?void 0:e.totalValueLocked)||"",isLoading:!e}),s.jsx(Ms,{wrapStyle:{alignItems:y?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(e==null?void 0:e.cumulativeVolume)||"",isLoading:!e})]})]}),s.jsx(Q,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:s.jsx(be,{statisticsData:e,pageFrom:"pools",isRefresh:!t})})]}),s.jsxs(k,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[s.jsx(ke,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:g,currentTab:((H=g==null?void 0:g.find(S=>(S==null?void 0:S.value)===o))==null?void 0:H.label)||"Pools",handleChangeTab:S=>{x(`/pools?tab=${S.value}`)}}),s.jsxs(k,{w:{base:"100%",lg:"unset"},children:[o=="positions"?s.jsx(de,{isOpen:p,label:s.jsx(f,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:s.jsx(O,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),onClick:()=>{b(!1),n(!0)},children:"LP Burn"})}):s.jsx(O,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>x("/create-pool"),children:"Create a new pool"}),s.jsx(O,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>x("/select-pool"),children:"Add Liquidity"})]})]}),l&&s.jsx(oo,{isOpen:l,onClose:()=>n(!1)})]})}function no({isRefreshed:t,handleIsRefreshed:o}){var G;const{getStatistics:x}=Us(),{fetchTokenPrices:l}=Ys(),{currentAccount:n,onWalletModal:e}=Gs(),{getPositionBaseList:a,getPosRelatedData:u}=Os(),{posRewardsData:g,farmsPosRewardsData:y,posBaseList:p,setShowPosListLength:b,setMyPosYieldValue:H,posBaseListLoading:S,posBaseListGroupByPool:U}=Ss(),[R,T]=r.useState([]),{getNotifiPositionTransfer:Z}=Ge(),X=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),o(!1),H(""),x(),V(),n!=null&&n.address&&D(n==null?void 0:n.address),setTimeout(()=>{o(!0)},1e3)};Ye({onRpcChange:()=>{n!=null&&n.address&&D(n==null?void 0:n.address)}});const[W,C]=r.useState([]),J=c=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",c),C(j=>[...j,c])},L=c=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",c),C(j=>j.filter(d=>(d==null?void 0:d.coin_type)!==(c==null?void 0:c.coin_type)))};r.useEffect(()=>{H(""),n!=null&&n.address?(console.log("ðŸš€ ~ useEffect ~ currentAccount?.address:",n==null?void 0:n.address),D(n==null?void 0:n.address)):b("")},[n==null?void 0:n.address]);const D=async c=>{const j=await a(c);u(j)},{notifiClient:B,notifiSources:K}=_e();r.useEffect(()=>{Z(p,B,K)},[p,B,K]),r.useEffect(()=>{var N,A,z,F;const c=(N=W[0])!=null&&N.coin_type?Y((A=W[0])==null?void 0:A.coin_type):void 0,j=(z=W[1])!=null&&z.coin_type?Y((F=W[1])==null?void 0:F.coin_type):void 0,d=Object.values(U).filter(m=>c&&j?Y(m.tokenA.coin_type)==c&&Y(m.tokenB.coin_type)==j||Y(m.tokenA.coin_type)==j&&Y(m.tokenB.coin_type)==c:c?Y(m.tokenA.coin_type)==c||Y(m.tokenB.coin_type)==c:m);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(U),d),T(d);const q=d.reduce((m,v)=>m+(v.list?v.list.length:0),0);n!=null&&n.address&&b(q.toString())},[W,U]);const V=()=>{const c=[];if((p==null?void 0:p.length)>0){p.map(d=>{c.push(gs(d==null?void 0:d.coinTypeA).full_address),c.push(gs(d==null?void 0:d.coinTypeB).full_address);const q=g[d==null?void 0:d.posId]||[],N=y[d==null?void 0:d.id]||[],A=q.concat(N);A==null||A.map(z=>{var F;Be(z==null?void 0:z.display_amount_owed).gt(0)&&c.push(gs((F=z==null?void 0:z.token)==null?void 0:F.coin_type).full_address)})});const j=Array.from(new Set(c));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",p,c,j),l(j)}};return r.useEffect(()=>{V()},[p==null?void 0:p.length,g]),r.useEffect(()=>(x(),()=>{b("")}),[]),r.useEffect(()=>{S&&b("")},[S]),s.jsxs(_,{gap:"20px",w:"100%",children:[s.jsx(Qs,{isPools:!1,handleRefresh:X,selectCoinList:W,onClickSelectCoinList:J,onDeleteSelectCoinList:L}),s.jsx(Q,{h:"1px",w:"100%",bg:"border"}),s.jsx(he,{}),n!=null&&n.address?S?[{},{},{},{}].map((c,j)=>s.jsx(Qe,{},j)):((G=Object.values(R))==null?void 0:G.length)>0?Object.values(R).map((c,j)=>s.jsx(fe,{poolInfo:c},j)):s.jsx(ys,{type:"nodata",text:"No liquidity positions"}):s.jsx(ys,{type:"nowallet",onboard:()=>e(!0)})]})}function Ct(){const{tab:t}=Rs(),[o,x]=r.useState(!0),l=n=>{x(n)};return s.jsxs(_,{gap:"20px",w:"100%",pt:"40px",children:[s.jsx(to,{isRefreshed:o}),(t=="pools"||t===void 0)&&s.jsx(Je,{isRefreshed:o,handleIsRefreshed:l}),t=="positions"&&s.jsx(no,{isRefreshed:o,handleIsRefreshed:l})]})}export{Ct as default};
//# sourceMappingURL=Pools-BwPeq38Q.js.map
