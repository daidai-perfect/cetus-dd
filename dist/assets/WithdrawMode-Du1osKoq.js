import{a,j as l,f as le,v as re,V as P,T as U}from"./vendor-DYqnJE5Q.js";import{c as ie,v as B,j as me,h as ne,i as de}from"./VaultsAprBlock-DnfhvGaf.js";import{k as ue,d as Z,j as ce,G as he,H as xe}from"./index-WWPS4_2e.js";import{H as D}from"./HTextLabelBox-CabGGlmQ.js";import{u as fe}from"./useAccountBalance-Bh-NvyHs.js";import{T as be}from"./TradeInputGroup-BIsIP9JC.js";import"./swapWidget-CTmuvVSU.js";import"./useWrapPoolData-C8NJOF2n.js";import"./useFavoritePool-CnJfzn94.js";import"./useGetPoolList-CMRSGTVw.js";import"./useToken-DKo5fk0k.js";import"./useTokenBalance-L-7JdNBo.js";import"./useTransaction-B0xyNeQf.js";import"./useSigner-rKW8msZz.js";import"./global-Bo5w7aOL.js";import"./msafe-oYBkW7LJ.js";import"./index-BQdM0Oaf.js";import"./v4-C6aID195.js";import"./useFindBestRouting-CBVbnGqc.js";import"./useSwapHelper-C0YC34Fy.js";import"./_getAllKeysIn-DOxZoQuX.js";function Ue(T){const{isUnstableVault:p,displayTokenA:r,displayTokenB:i,vaultId:m,isReverse:s,assetAction:h,isCheckedZAP:v,currentActionTab:ge,apiVaultInfo:e}=T,N=B.useVaultsRemove(p),q=B.useAddButtonStatus(p),J=B.useGetContractVaultInfo(p),{getApiVaultInfo:K}=ie(m),{currentAccount:o,isOpenWalletModal:pe,onWalletModal:Q}=ue(),{fetchAccountBalance:X}=fe(),{contractVault:n,lpTokenInfo:t,balanceInfo:C,fetchClmmPoolFromContract:y,fetchVaultInfoFromContract:E,holdCoinAmounts:M,fromTokenLock:Y,toTokenLock:V,fetchVaultBalance:S,isBalanceLoading:R}=J(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse),W=()=>{var d;X(),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:57 ~ autoRefresh ~ apiVaultInfo:",e),(e==null?void 0:e.category)=="haedal"&&S(o==null?void 0:o.address,m,(d=e==null?void 0:e.tokenA)==null?void 0:d.decimals),e&&y(e.clmmPoolAddress,!0),m&&(E(m,!0),K(m,!0)),console.log("ðŸš€ðŸš€ðŸš€ ~ index.tsx:68 ~ autoRefresh ~ autoRefresh:",W)};console.log("ðŸš€ðŸš€ðŸš€ ~ WithdrawMode.tsx:69 ~ VaultWithdrawMode ~ holdCoinAmounts:",M);const{contractClmmPoolObj:A}=me();a.useMemo(()=>{if(A&&A[e==null?void 0:e.clmmPoolAddress])return A[e==null?void 0:e.clmmPoolAddress]},[e==null?void 0:e.clmmPoolAddress,A]);const{amountInputA:F,amountInputB:H,availableAmountA:x,availableAmountB:f,amountValueA:I,amountValueB:ee,preCalculateLoading:u,fixAmountA:b,inputTotalValue:g,handleAmountInputChange:z,calculateResult:c,showOnlySideTips:G,doRemoveAction:te,removePercent:ve,isPercentInput:w,reCalculateResult:O,calculateAvailableLoading:$}=N(h,W,M,n==null?void 0:n.lp_token_treasury,C==null?void 0:C.balance,m,s?i:r,s?r:i,s,Y,V,v,A),L=a.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",g),g&&v?Z(g).gt(0)&&Z(g).lt(1e-4):!1),[v,g]),{btnText:oe,btnDisabled:se}=q(v,h,!1,F,H,s?!b:b,x,f,r,i,p,"",c,L);ne(c==null?void 0:c.burn_ft_amount,p?n==null?void 0:n.lp_token_treasury:n==null?void 0:n.total_supply);const{amountLimit:k}=de(0,c==null?void 0:c.burn_ft_amount,!1);a.useMemo(()=>s?f:x,[f,x,s]),a.useMemo(()=>s?x:f,[x,f,s]),a.useMemo(()=>u?w?!0:s?b:!b:!1,[u,w]),a.useMemo(()=>u?w?!0:s?!b:b:!1,[u,w]),a.useEffect(()=>{O()},[e==null?void 0:e.vaultsId]),a.useEffect(()=>{e&&(e!=null&&e.clmmPoolAddress)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:170 ~ useEffect ~ apiVaultInfo:",e),y(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),a.useEffect(()=>{m&&E(m)},[m]),a.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ lpTokenInfo:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:188 ~ useEffect ~ apiVaultInfo:",e),o!=null&&o.address&&(e!=null&&e.vaultsId)&&(t!=null&&t.decimals)&&(e!=null&&e.isUnstableVault)&&(console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:189 ~ useEffect ~ fetchVaultBalance:",S),S(o==null?void 0:o.address,e.vaultsId,t==null?void 0:t.decimals))},[o==null?void 0:o.address,e==null?void 0:e.vaultsId,t==null?void 0:t.decimals]),a.useEffect(()=>{O()},[x,f]);const ae=a.useMemo(()=>ce(he(k||"0",t==null?void 0:t.decimals),t==null?void 0:t.decimals),[k,t]);return l.jsxs(l.Fragment,{children:[l.jsx(le,{w:"100%",position:"relative",children:l.jsx(be,{onClick:()=>{},from:{wrapStyle:{h:"108px"},balance:x||"",value:F,amountValue:I,loading:!1,calculateAvailableLoading:R||$,hideSelf:h!=="both"&&h!==(r==null?void 0:r.coin_type),onChange:(d,_,j)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ withdraw-mode.tsx:194 ~ VaultWithdrawMode ~ value:",d),z(d,!s,_,j)},selectable:!1,placeholder:"0.0",token:r,balanceLabel:"Available",onFocusChange:d=>{}},to:{wrapStyle:{h:"108px"},balance:f||"",value:H,amountValue:ee,loading:!1,calculateAvailableLoading:R||$,onFocusChange:d=>{},onChange:(d,_,j)=>{z(d,s,_,j)},selectable:!1,hideSelf:h!=="both"&&h!==(i==null?void 0:i.coin_type),placeholder:"0.0",token:i,balanceLabel:"Available"},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})}),l.jsx(re,{width:"100%",height:"52px",borderRadius:"12px",marginBottom:"8px",fontWeight:"500",isLoading:u,disabled:se||u,onClick:()=>o!=null&&o.address?te():Q(!0),children:oe||(v?"Zap Out":"Withdraw")}),L&&l.jsx(P,{w:"100%",alignItems:"start",mb:"8px",children:l.jsx(U,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(c||G)&&!L&&l.jsxs(P,{w:"100%",gap:"20px",pb:"20px",children:[h!=="both"&&l.jsx(U,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",children:G}),l.jsxs(P,{w:"100%",gap:"20px",children:[l.jsx(D,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:xe(g,2),valueStyle:{fontSize:"14px"},isLoading:u}),l.jsx(D,{label:"LP Burn Amount",value:`${ae} ${`${r==null?void 0:r.symbol} - ${i==null?void 0:i.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:u})]})]})]})}export{Ue as default};
//# sourceMappingURL=WithdrawMode-Du1osKoq.js.map
