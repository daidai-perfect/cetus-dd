import{a as n,j as s,C as v,F as b,f as R,aa as C}from"./vendor-DsVemle5.js";import{I as w,K as I}from"./index-DIvDX_Yh.js";function _(l,f,...x){let t=null;const o=async()=>{try{await l(...x)}catch(e){console.error("Callback error:",e),clearTimeout(t)}t=setTimeout(o,f)};return t=setTimeout(o,f),{clear:()=>{t&&clearTimeout(t)}}}function E(l){const{variant:f,handleRefresh:x,isAutoRefresh:t,refreshInterval:o,innerStyle:e={},isRefreshed:h,...g}=l,[p,a]=n.useState(!1),[k,i]=n.useState(0),u=n.useRef(null),r=n.useRef(null),m=async c=>{i(360),a(!0);try{await x(c)}catch(T){console.error("RefreshButton refresh error",T),a(!1),i(0)}},d=()=>{if(r.current&&r.current(),t&&o){const{clear:c}=_(()=>{m(!1)},o*1e3);r.current=c}},j=async c=>{I(c),r.current&&r.current(),await m(!0),d()};return n.useEffect(()=>(d(),()=>{u.current&&(clearTimeout(u.current),u.current=null),r.current&&(r.current(),r.current=null)}),[]),n.useEffect(()=>{typeof h=="boolean"?h&&(a(!1),i(0)):p&&(u.current=setTimeout(()=>{a(!1),i(0)},1e3))},[p,h]),s.jsx(v,{h:"40px",w:"40px",borderRadius:"8px",bg:e!=null&&e.bg?e==null?void 0:e.bg:"bg_secondary",border:"1px solid",borderColor:"border",cursor:"pointer",onClick:j,_hover:{color:"text_caption",svg:{fill:"text_caption"}},...g,children:s.jsx(b,{w:"24px",h:"24px",bg:"checked_bg",alignItems:"center",justifyContent:"center",borderRadius:"4px",...e,children:s.jsx(R,{children:p?s.jsx(b,{w:"20px",h:"20px",alignItems:"center",justifyContent:"center",children:s.jsx(C,{w:"16px",h:"16px",speed:"1.2s",sx:{color:"text_paragraph"}})}):s.jsx(R,{children:s.jsx(w,{xlinkHref:"#icon-icon_refresh",variant:"gray"})})})})})}export{E as R};
//# sourceMappingURL=RefreshButton-DvOwcCPC.js.map
