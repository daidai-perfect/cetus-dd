import{j as t,V as M,f as X,C as V,ar as N,as as H,at as L,F as $,p as q,au as S,av as Z,aw as _,ax as Q,a as Y}from"./vendor-BowHGuwE.js";import{P as F}from"./Pagination-C6HZIV-U.js";import{ab as R,ac as K,ad as b,u as ee,ae as te,af as se,ag as ae}from"./index-DfOjREq-.js";import{d as ne}from"./useWrapPoolData-D60a6YLy.js";import{p as re,C as oe,E as ce}from"./EmptyTooltip-CfyDeVsE.js";import{X as E,Y as B,R as le}from"./YAxis-BjAYmmwM.js";import{g as ie,B as z,f as me,T as ue}from"./generateCategoricalChart-B80wnRuZ.js";function ve({dataSource:e,columns:p,itemSkeletonLength:h,skeletonLength:c=3,rowKey:a,loading:s,pagination:n,rowStyle:l,wrapStyle:m,onRowClick:r,itemHeight:x}){var T;const u=new Array(c).fill(0);return t.jsxs(M,{w:"100%",...m||{},children:[(T=e&&(e!=null&&e.length)&&!s?e:u)==null?void 0:T.map((o,i)=>t.jsxs(M,{w:"100%",children:[t.jsx(R,{data:K(p,o,i),loading:s,skeletonLength:h,onClick:()=>r==null?void 0:r(o,i),style:typeof l=="function"?l(o,i):l,itemHeight:x},s?i:typeof a=="function"?a(o):a?o[a]:i),t.jsx(X,{w:"100%",h:"1px",bg:"border",mt:"12px"})]},s?i:typeof a=="function"?a(o):a?o[a]:i)),n&&(n==null?void 0:n.total)>(n==null?void 0:n.size)&&t.jsx(V,{mt:"16px",children:t.jsx(F,{...n})})]})}function pe(e){const{rowStyle:p,minW:h,tableListLength:c,tdListLength:a,firstTd:s}=e,n=new Array(c).fill(0),l=new Array(a).fill(0);return t.jsx(N,{children:n==null?void 0:n.map((m,r)=>t.jsx(H,{sx:{td:{_last:{">div":{justifyContent:"flex-end"}}}},...typeof p=="function"?p(m,r):p,children:t.jsxs(t.Fragment,{children:[s&&t.jsx(L,{children:s}),l==null?void 0:l.map((x,u)=>t.jsx(L,{children:t.jsx($,{w:"100%",justifyContent:!s&&u==0?"flex-start":"flex-end",children:t.jsx(q,{})})},u))]})},m+`${r}`))})}function be({dataSource:e,skeletonLength:p=3,columns:h,rowKey:c,loading:a,tdBorder:s,firstTdSkeleton:n,theadConfig:l,tbodyConfig:m,rowStyle:r={},onRowClick:x,pagination:u,...T}){return t.jsxs(t.Fragment,{children:[t.jsx(S,{w:"100%",children:t.jsxs(Z,{size:"sm",...T,children:[t.jsx(_,{...l,children:t.jsx(H,{children:h.map(({title:o,key:i,thConfig:f})=>t.jsx(Q,{...f,children:typeof o=="function"?o():o},typeof i=="function"?i():i))})}),a?t.jsx(pe,{tableListLength:p,tdListLength:h.length,firstTd:typeof n=="function"?n():n,rowStyle:r}):t.jsx(N,{...m,children:e==null?void 0:e.map((o,i)=>t.jsx(H,{borderBottom:s?"1px solid":"none",borderColor:s?"border":"transparent",onClick:()=>x&&x(o,i),...typeof r=="function"?r(o,i):r,children:h.map(({render:f,key:j,tdConfig:g})=>t.jsx(L,{...g,fontWeight:"500",children:typeof f=="function"?f(o,i):f||o[j]},j))},c?typeof c=="function"?c(o):o[`${c}`]:(o==null?void 0:o.key)||i))})]})}),u&&(u==null?void 0:u.total)>(u==null?void 0:u.size)&&t.jsx(V,{mt:"16px",children:t.jsx(F,{...u})})]})}var xe=ie({chartName:"BarChart",GraphicalChild:z,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:E},{axisType:"yAxis",AxisComp:B}],formatAxisMap:me}),d=(e=>(e[e.Jan=1]="Jan",e[e.Feb=2]="Feb",e[e.Mar=3]="Mar",e[e.Apr=4]="Apr",e[e.May=5]="May",e[e.Jun=6]="Jun",e[e.Jul=7]="Jul",e[e.Aug=8]="Aug",e[e.Sep=9]="Sep",e[e.Oct=10]="Oct",e[e.Nov=11]="Nov",e[e.Dec=12]="Dec",e))(d||{});function Ae(){const[e,p]=Y.useState("");return{time:e,getCurrentTime:()=>{const a=b(Date.parse(new Date().toUTCString()),"YMD")||"",s=a.slice(5,7),n=d[Number(s)],l=a.slice(8,10),m=n,r=a.slice(0,4),x=m+" "+l+", "+r+" (UTC)";p(x)},getHoverTime:(a,s)=>{const n=Date.parse(a),l=new Date(n);l.setDate(l.getDate()+7);const m=new Date(n);m.setDate(m.getDate()+31);const r=l.toUTCString(),x=m.toUTCString(),u=b(Date.parse(x),"YMD")||"",T=b(Date.parse(new Date().toUTCString()),"YMD")||"",o=Date.parse(r)>Date.parse(new Date().toUTCString())?b(Date.parse(new Date().toUTCString()),"YMD")||"":b(Date.parse(r),"YMD")||"",i=T.slice(5,7),f=d[Number(i)],j=T.slice(8,10),g=f,P=T.slice(0,4),y=a.slice(5,7),U=d[Number(y)],C=a.slice(8,10),D=U,v=a.slice(0,4),w=o.slice(5,7),k=d[Number(w)],J=o.slice(8,10),W=k,G=o.slice(0,4),I=Number(y)==12?d[1]:d[Number(y)+1],O=u.slice(0,4);let A;s=="D"?A=D+" "+C+", "+v+" (UTC)":s=="W"?A=C+" "+D+"-"+J+" "+W+" , "+G+" (UTC)":A=Date.parse(x)>=Date.parse(new Date().toUTCString())?D+" 01-"+g+" "+j+", "+P+" (UTC)":D+" 01-"+I+" 01, "+O+" (UTC)",p(A)}}}function we(){const{fetchByApi:e}=ee();return{getHistogramData:async h=>{const{type:c,date_type:a="day",limit:s,address:n="all"}=h;console.log("ðŸš€ ~ getHistogramData ~ limit:",c,a,s);const l=n=="all"&&c=="vol",r={day:"day",wek:"week",mon:"month"}[a],x=Date.now(),i=s?a=="day"?s*86400:a=="wek"?s*604800:s*2592e3:void 0,f=i?String(Math.floor(x/1e3-i)):0,g=re(l?{dataType:c,dateType:r,beginTimestamp:f}:{dataType:c,dateType:r,address:n,beginTimestamp:f},ae),y=await e(l?te:se,"GET",g);console.log("ðŸš€ ~ getHistogramData response:",y);const C=[...((y==null?void 0:y.list)||[]).map(D=>{const v=new Date(D.timestamp*1e3).toISOString().split(".")[0]+"Z",w=Number(v.slice(5,7)),k=d[w];return{num:Number(D.value),date:v,xAxis:a==="mon"?k:ne(v)}})].reverse();return console.log("ðŸš€ ~ getHistogramData ~ isPureTvl:",C),C}}}const ke=({data:e,onChangeValue:p,noXAxis:h,pageFrom:c="stats"})=>{const[a,s]=Y.useState(""),n=r=>{if(r&&r.activePayload&&r.activePayload.length){const x=r.activePayload[0].payload.date;p(r.activePayload[0].payload);const u=x.slice(5,7),T=d[Number(u)],o=x.slice(8,10),i=T,f=x.slice(0,4);s(o+" "+i+" "+f)}},l=()=>{p(null)};(e==null?void 0:e.length)>0&&Math.floor(Math.min(...e.map(r=>r.num)));const m=Math.ceil(Math.max(...e.map(r=>r.num)));return t.jsx(le,{width:"100%",height:"100%",children:t.jsxs(xe,{barCategoryGap:"25%",data:e,onMouseMove:n,onMouseLeave:l,maxBarSize:24,children:[!h&&t.jsx(E,{type:"category",dataKey:"xAxis",minTickGap:18,tickLine:!1,axisLine:!1,tick:t.jsx(oe,{})}),m&&t.jsx(B,{domain:[0,m*1.05],hide:!0,axisLine:!1,tickLine:!1}),t.jsx(ue,{content:t.jsx(ce,{value:c!=="stats"?a:""}),cursor:t.jsx(he,{})}),t.jsx(z,{dataKey:"num",fill:"#75C8FF",isAnimationActive:!1})]})})};function he(e){var l,m;const{x:p,y:h,width:c,height:a,payload:s}=e;if(!s||!(s!=null&&s[0])||!((m=(l=s==null?void 0:s[0])==null?void 0:l.payload)!=null&&m.num))return;const n=c>192?c/1.2:c>96?c/1.5:c>48?c/2:c>24?c/4:c/8;return t.jsx("g",{children:t.jsx("rect",{width:c-n,height:a,x:p+n/2,fill:"rgba(118,200,255,0.5)",y:h+1})})}export{ve as H,be as T,ke as V,we as a,Ae as u};
//# sourceMappingURL=VolumeChart-DFCEtPdt.js.map
