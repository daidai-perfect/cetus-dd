import{a as d,j as t,F as Te,V as _,T as b,u as ne,H as v,f as K,I as Jt,C as Ke,aa as Xe,R as k,a7 as Ge,X as Qt,Y as Vt,Z as It,$ as es,a8 as ts,a0 as ss,a1 as rs,v as Je,as as Dt,aq as os,ab as is}from"./vendor-DXHkIl66.js";import{S as ns}from"./Slippage-u5yjQ90x.js";import{j as as,v as Be,k as Rt,l as zt,c as ls,V as bt,C as vt,h as cs,d as ps,u as xs,g as us,e as ds}from"./VaultsAprBlock-D_THQbUU.js";import{d as T,at as ot,v as O,p as it,au as hs,a as ae,B as L,aq as ms,O as ee,X as Q,a0 as at,c as gs,I as ys,u as pt,af as xt,av as fs,aw as ut,i as Me,ax as bs,ay as vs,Z as kt,j as dt,s as Re,e as js,F as jt,M as Ss,a3 as As,z as $e}from"./index-z4pUiXVL.js";import{B as ws}from"./BackButton-C4qGPpeM.js";import{N as Ot}from"./NoData-CqJO7NcS.js";import{R as _s}from"./RefreshButton-CJmC-Yhv.js";import{u as Ps}from"./useAccountBalance-Bj6kHpBe.js";import{u as Cs}from"./useInterval-Cb1zlf7x.js";import{H as te}from"./HTextLabelBox-D0TrMTJ-.js";import{V as se}from"./VTextLabelBox-B2YM7uKR.js";import{S as de,A as St}from"./SingleTokenInfo-BwCztUxM.js";import{u as Ts,Z as Ds}from"./useDisplayTickPrice-DJYijekL.js";import{i as Rs}from"./icon_currentprice@2x-DeObnx8l.js";import{a as zs,p as ht,b as ks,c as Os}from"./EmptyTooltip-A9lvnm_Y.js";import{X as mt,Y as Ze,R as Bt}from"./YAxis-D_y96wKM.js";import{L as ze,a as Bs}from"./LineChart-Bxm5Ooua.js";import{S as At,a as Ms,b as nt,L as De,c as Fs,A as Ls,i as Ne,d as Ws,e as Mt,E as Es,h as Ue,j as Hs,k as $s,C as Ns,l as Se,m as Us,G as Ks,n as Gs,o as wt,u as Zs,g as Ys,B as Ft,f as qs,T as Lt,p as Wt}from"./generateCategoricalChart-CHI-BmI9.js";import{d as Xs}from"./useWrapPoolData-DygVSJRO.js";import{A as Js,T as Qs,a as Vs}from"./TvlChart-QdpzoEWV.js";import{u as Is}from"./useGetPythLastPrice-DcWp3uGD.js";import{T as er}from"./TradeConfirmAmountInfo-C2NCm8SN.js";import{V as Et,u as tr,A as sr,R as rr}from"./AvailableCapacity-Denhe87M.js";import{u as or}from"./global-BdG6Ba89.js";import{T as Ht}from"./TradeInputGroup-DpUDZe3I.js";import{v as _t}from"./v4-C6aID195.js";import{A as ir}from"./AumLimit-CsTzTr-U.js";import{T as Pt}from"./TooltipIcon-DCQFSMw9.js";import{P as nr}from"./PoweredByHaedal-990R--7x.js";import{P as ar}from"./RemoveBlock-CY6Lt7NM.js";import"./index-BRzM0TzB.js";import"./useTokenBalance-HeugYKlV.js";import"./swapWidget-DltqLvnk.js";import"./useFavoritePool-oaa3ZXSX.js";import"./useGetPoolList-DZOzZEqD.js";import"./useToken-AKkGKeik.js";import"./useTransaction-Djn-I0bO.js";import"./useTrack-D6wG9wqq.js";import"./useSigner-ChLOfT6R.js";import"./msafe-oYBkW7LJ.js";import"./useFindBestRouting-CNP0eAWK.js";import"./useSwapHelper-hyZ_vSpC.js";import"./CopyButton-CZFl6Fvu.js";import"./_getAllKeysIn-wUTYc5Eb.js";import"./debounce-BgSgg6I6.js";import"./linear-DYpwdEgO.js";import"./TotalAmount-Cy20r4qh.js";import"./CheckBox-M5fL4yxU.js";import"./ZapSwitch-DGdCcRgo.js";import"./DepositRatio-9OTevO03.js";import"./FreshProgressV2-CBk2xMvX.js";import"./index-Ct3YeWBa.js";import"./usePriceImpact-CZnhsTFC.js";import"./ErrorTips-DduTlMG8.js";import"./useNotifiSubscription-DEm03jwr.js";import"./useNotifiAlerts-CXMtDwwp.js";import"./useXCetusHelper-wRFDNkyC.js";import"./index-CptRizr3.js";import"./index-DKPh1ief.js";import"./usePositionList-B_ysosd0.js";import"./detail-DtzavPik.js";import"./index-BEL1GW0X.js";import"./usePosAdd-JaIJLxiQ.js";import"./index-2OCTGFwf.js";import"./ExpendItem-CzSxxWCg.js";import"./PriceRange-Dkajk6iZ.js";import"./PositionStatus-Dknu-0uP.js";import"./RangeValue-B5QGeZFs.js";function lr(o){const{displayMaxPrice:r,displayMinPrice:s,displayPrice:e,isLoading:i}=o,[n,l]=d.useState(0),u=d.useRef(null),h=d.useMemo(()=>!(s&&r&&e),[r,s,e]);d.useEffect(()=>{const x=()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:30 ~ getElementWidth ~ elementRef.current:",u.current),u.current&&l(u.current.offsetWidth)};x();const p=new ResizeObserver(x);return u.current&&p.observe(u.current),()=>{u.current&&p.unobserve(u.current)}},[h]);const m=d.useMemo(()=>{if(r==="âˆž")return"center";if(e&&s&&r){if(T(e).greaterThanOrEqualTo(r))return"end";if(T(s).greaterThanOrEqualTo(e))return"start"}return"center"},[e,s,r]),c=d.useMemo(()=>{if(r==="âˆž")return"0px";if(e&&s&&r&&T(n).gt(0)&&T(e).lessThanOrEqualTo(r)&&T(e).greaterThanOrEqualTo(s)){const x=T(e).sub(s).div(T(r).sub(T(s))).toString();return console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:119 ~ sliderML ~ `${d(elementWidth).mul(relativePosition).toFixed(0)}px`:",`${T(n).mul(x).toFixed(0)}px`),console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:123 ~ sliderML ~ elementWidth:",n),`${T(n).mul(x).toFixed(0)}px`}return"0px"},[e,s,r,n]);return t.jsx(t.Fragment,{children:h?t.jsx(Te,{h:"202px",width:"100%",align:"center",position:"relative",children:t.jsx(K,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Xe,{})})}):t.jsxs(Te,{w:"88%",direction:"column",alignItems:m,ref:u,justifyContent:"flex-end",children:[t.jsxs(_,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",position:"absolute",left:c,top:"62px",children:[t.jsxs(_,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[t.jsx(b,{fontSize:"xs",h:"14px",children:"Current Price"}),i?t.jsx(Te,{h:"18px",align:"center",children:t.jsx(ne,{})}):t.jsx(v,{children:t.jsx(b,{fontSize:"16px",color:"text_highlight",children:t.jsx(ot,{value:O(e,6,!0,it.ROUND_DOWN)})})})]}),t.jsxs(_,{zIndex:"100",children:[t.jsx(K,{w:"2px",h:"98px",bg:"#76C8FF"}),t.jsx(Jt,{src:Rs,w:"30px",h:"30px",mt:"-18px"})]})]}),t.jsx(Ke,{zIndex:"99",position:"absolute",top:"164px",pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"90%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:t.jsx(Ke,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),t.jsxs(v,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"80%"},position:"absolute","z-index":"100",bottom:"22px",children:[t.jsxs(_,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(b,{fontSize:"12px",children:"Min Price"}),i?t.jsx(Te,{h:"18px",align:"center",children:t.jsx(ne,{})}):t.jsx(b,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(ot,{value:O(s,6,!0,it.ROUND_DOWN)})})]}),t.jsxs(_,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(b,{fontSize:"12px",children:"Max Price"}),i?t.jsx(Te,{h:"18px",align:"center",children:t.jsx(ne,{})}):t.jsx(b,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(ot,{value:O(r,6,!0,it.ROUND_DOWN)})})]})]})]})})}function Ae(o){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ae(o)}function cr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function pr(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Ut(e.key),e)}}function xr(o,r,s){return r&&pr(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function ur(o,r,s){return r=Ye(r),dr(o,$t()?Reflect.construct(r,s||[],Ye(o).constructor):r.apply(o,s))}function dr(o,r){if(r&&(Ae(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hr(o)}function hr(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function $t(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!o})()}function Ye(o){return Ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ye(o)}function mr(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&lt(o,r)}function lt(o,r){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},lt(o,r)}function Nt(o,r,s){return r=Ut(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Ut(o){var r=gr(o,"string");return Ae(r)=="symbol"?r:r+""}function gr(o,r){if(Ae(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(Ae(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var Qe=function(o){function r(){return cr(this,r),ur(this,r,arguments)}return mr(r,o),xr(r,[{key:"render",value:function(){return null}}])}(k.Component);Nt(Qe,"displayName","ZAxis");Nt(Qe,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var yr=["option","isActive"];function ke(){return ke=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},ke.apply(this,arguments)}function fr(o,r){if(o==null)return{};var s=br(o,r),e,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);for(i=0;i<n.length;i++)e=n[i],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(s[e]=o[e])}return s}function br(o,r){if(o==null)return{};var s={};for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)){if(r.indexOf(e)>=0)continue;s[e]=o[e]}return s}function vr(o){var r=o.option,s=o.isActive,e=fr(o,yr);return typeof r=="string"?k.createElement(At,ke({option:k.createElement(Ms,ke({type:r},e)),isActive:s,shapeType:"symbols"},e)):k.createElement(At,ke({option:r,isActive:s,shapeType:"symbols"},e))}function we(o){"@babel/helpers - typeof";return we=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},we(o)}function Oe(){return Oe=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},Oe.apply(this,arguments)}function Ct(o,r){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),s.push.apply(s,e)}return s}function J(o){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?Ct(Object(s),!0).forEach(function(e){he(o,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):Ct(Object(s)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(s,e))})}return o}function jr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function Tt(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Gt(e.key),e)}}function Sr(o,r,s){return r&&Tt(o.prototype,r),s&&Tt(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function Ar(o,r,s){return r=qe(r),wr(o,Kt()?Reflect.construct(r,s||[],qe(o).constructor):r.apply(o,s))}function wr(o,r){if(r&&(we(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _r(o)}function _r(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Kt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kt=function(){return!!o})()}function qe(o){return qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},qe(o)}function Pr(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&ct(o,r)}function ct(o,r){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},ct(o,r)}function he(o,r,s){return r=Gt(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Gt(o){var r=Cr(o,"string");return we(r)=="symbol"?r:r+""}function Cr(o,r){if(we(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(we(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var Ve=function(o){function r(){var s;jr(this,r);for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return s=Ar(this,r,[].concat(i)),he(s,"state",{isAnimationFinished:!1}),he(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),he(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),he(s,"id",Zs("recharts-scatter-")),s}return Pr(r,o),Sr(r,[{key:"renderSymbolsStatically",value:function(e){var i=this,n=this.props,l=n.shape,u=n.activeShape,h=n.activeIndex,m=nt(this.props,!1);return e.map(function(c,x){var p=h===x,a=p?u:l,y=J(J({},m),c);return k.createElement(De,Oe({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(x)},Fs(i.props,c,x),{role:"img"}),k.createElement(vr,Oe({option:a,isActive:p,key:"symbol-".concat(x)},y)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,i=this.props,n=i.points,l=i.isAnimationActive,u=i.animationBegin,h=i.animationDuration,m=i.animationEasing,c=i.animationId,x=this.state.prevPoints;return k.createElement(Ls,{begin:u,duration:h,isActive:l,easing:m,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var a=p.t,y=n.map(function(g,j){var f=x&&x[j];if(f){var A=Ne(f.cx,g.cx),S=Ne(f.cy,g.cy),P=Ne(f.size,g.size);return J(J({},g),{},{cx:A(a),cy:S(a),size:P(a)})}var w=Ne(0,g.size);return J(J({},g),{},{size:w(a)})});return k.createElement(De,null,e.renderSymbolsStatically(y))})}},{key:"renderSymbols",value:function(){var e=this.props,i=e.points,n=e.isAnimationActive,l=this.state.prevPoints;return n&&i&&i.length&&(!l||!Ws(l,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var e=this.props.isAnimationActive;if(e&&!this.state.isAnimationFinished)return null;var i=this.props,n=i.points,l=i.xAxis,u=i.yAxis,h=i.children,m=Mt(h,Es);return m?m.map(function(c,x){var p=c.props,a=p.direction,y=p.dataKey;return k.cloneElement(c,{key:"".concat(a,"-").concat(y,"-").concat(n[x]),data:n,xAxis:l,yAxis:u,layout:a==="x"?"vertical":"horizontal",dataPointFormatter:function(j,f){return{x:j.cx,y:j.cy,value:a==="x"?+j.node.x:+j.node.y,errorVal:Ue(j,f)}}})}):null}},{key:"renderLine",value:function(){var e=this.props,i=e.points,n=e.line,l=e.lineType,u=e.lineJointType,h=nt(this.props,!1),m=nt(n,!1),c,x;if(l==="joint")c=i.map(function(S){return{x:S.cx,y:S.cy}});else if(l==="fitting"){var p=Hs(i),a=p.xmin,y=p.xmax,g=p.a,j=p.b,f=function(P){return g*P+j};c=[{x:a,y:f(a)},{x:y,y:f(y)}]}var A=J(J(J({},h),{},{fill:"none",stroke:h&&h.fill},m),{},{points:c});return k.isValidElement(n)?x=k.cloneElement(n,A):$s(n)?x=n(A):x=k.createElement(Ns,Oe({},A,{type:u})),k.createElement(De,{className:"recharts-scatter-line",key:"recharts-scatter-line"},x)}},{key:"render",value:function(){var e=this.props,i=e.hide,n=e.points,l=e.line,u=e.className,h=e.xAxis,m=e.yAxis,c=e.left,x=e.top,p=e.width,a=e.height,y=e.id,g=e.isAnimationActive;if(i||!n||!n.length)return null;var j=this.state.isAnimationFinished,f=hs("recharts-scatter",u),A=h&&h.allowDataOverflow,S=m&&m.allowDataOverflow,P=A||S,w=Se(y)?this.id:y;return k.createElement(De,{className:f,clipPath:P?"url(#clipPath-".concat(w,")"):null},A||S?k.createElement("defs",null,k.createElement("clipPath",{id:"clipPath-".concat(w)},k.createElement("rect",{x:A?c:c-p/2,y:S?x:x-a/2,width:A?p:p*2,height:S?a:a*2}))):null,l&&this.renderLine(),this.renderErrorBar(),k.createElement(De,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!g||j)&&Us.renderCallByParent(this.props,n))}}],[{key:"getDerivedStateFromProps",value:function(e,i){return e.animationId!==i.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:i.curPoints}:e.points!==i.curPoints?{curPoints:e.points}:null}}])}(d.PureComponent);he(Ve,"displayName","Scatter");he(Ve,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Ks.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});he(Ve,"getComposedData",function(o){var r=o.xAxis,s=o.yAxis,e=o.zAxis,i=o.item,n=o.displayedData,l=o.xAxisTicks,u=o.yAxisTicks,h=o.offset,m=i.props.tooltipType,c=Mt(i.props.children,Gs),x=Se(r.dataKey)?i.props.dataKey:r.dataKey,p=Se(s.dataKey)?i.props.dataKey:s.dataKey,a=e&&e.dataKey,y=e?e.range:Qe.defaultProps.range,g=y&&y[0],j=r.scale.bandwidth?r.scale.bandwidth():0,f=s.scale.bandwidth?s.scale.bandwidth():0,A=n.map(function(S,P){var w=Ue(S,x),G=Ue(S,p),B=!Se(a)&&Ue(S,a)||"-",D=[{name:Se(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:w,payload:S,dataKey:x,type:m},{name:Se(s.dataKey)?i.props.name:s.name||s.dataKey,unit:s.unit||"",value:G,payload:S,dataKey:p,type:m}];B!=="-"&&D.push({name:e.name||e.dataKey,unit:e.unit||"",value:B,payload:S,dataKey:a,type:m});var N=wt({axis:r,ticks:l,bandSize:j,entry:S,index:P,dataKey:x}),z=wt({axis:s,ticks:u,bandSize:f,entry:S,index:P,dataKey:p}),le=B!=="-"?e.scale(B):g,C=Math.sqrt(Math.max(le,0)/Math.PI);return J(J({},S),{},{cx:N,cy:z,x:N-C,y:z-C,xAxis:r,yAxis:s,zAxis:e,width:2*C,height:2*C,size:le,node:{x:w,y:G,z:B},tooltipPayload:D,tooltipPosition:{x:N,y:z},payload:S},c&&c[P]&&c[P].props)});return J({points:A},h)});var Tr=Ys({chartName:"ComposedChart",GraphicalChild:[ze,Js,Ft,Ve],axisComponents:[{axisType:"xAxis",AxisComp:mt},{axisType:"yAxis",AxisComp:Ze},{axisType:"zAxis",AxisComp:Qe}],formatAxisMap:qs});function Dr(o){const{holdCoinAmounts:r,lpTokenInfo:s,displayTokenA:e,displayTokenB:i,sharePoolRate:n,balanceInfo:l,isReverse:u,holdCoinAValue:h,holdCoinBValue:m,rewardPerA:c,rewardPerB:x}=o,p=d.useMemo(()=>u?m:h,[u,h,m]),a=d.useMemo(()=>u?h:m,[u,h,m]),y=d.useMemo(()=>T(p).add(T(a)),[p,a,e,i]),{isApp:g}=ae();return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:t.jsxs(_,{w:"100%",gap:{base:"24px",lg:"8px"},children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(v,{children:t.jsx(b,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),t.jsxs(v,{gap:"8px",children:[t.jsx(b,{whiteSpace:"nowrap",children:"Your share of pool"}),t.jsxs(b,{color:"text_highlight",fontWeight:"500",children:[ms(n,2,6),"%"]})]})]}),g?t.jsxs(_,{w:"100%",gap:"16px",children:[t.jsx(te,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(de,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsxs(b,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[l!=null&&l.balanceFormat?O(l==null?void 0:l.balanceFormat,9):"-"," LP"]})]}),subValue:t.jsx(b,{children:l!=null&&l.balanceFormat&&y?ee(y,2):"-"}),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Q(e==null?void 0:e.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(de,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(b,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${O(r==null?void 0:r.displayCoinA,6)} ${Q(e==null?void 0:e.symbol,10)}`})]}),subValue:ee(p,2),subValueStyle:{fontSize:"13px"}}),t.jsx(te,{label:Q(i==null?void 0:i.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(de,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(b,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${O(r==null?void 0:r.displayCoinB,6)} ${Q(i==null?void 0:i.symbol,10)}`})]}),subValue:ee(a,2),subValueStyle:{fontSize:"13px"}})]}):t.jsxs(t.Fragment,{children:[t.jsxs(Ge,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[t.jsx(b,{children:"LP Token Balance"}),t.jsxs(b,{color:"text_caption",ml:"4px",fontWeight:"500",children:[l!=null&&l.balanceFormat?O(l==null?void 0:l.balanceFormat,9):"-"," LP"]}),t.jsx(b,{children:l!=null&&l.balanceFormat?ee(y,2):"-"})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[t.jsxs(_,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[t.jsxs(v,{children:[t.jsx(de,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsx(b,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Q(e==null?void 0:e.symbol,10)})]}),t.jsx(se,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${O(r==null?void 0:r.displayCoinA,6)} ${Q(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(p,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsxs(_,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[t.jsxs(v,{children:[t.jsx(b,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Q(i==null?void 0:i.symbol,10)}),t.jsx(de,{token:i,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),t.jsx(se,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:`${O(r==null?void 0:r.displayCoinB,6)} ${Q(i==null?void 0:i.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:ee(a,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsx(L,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:t.jsxs(_,{justify:"center",gap:"4px",children:[t.jsx(de,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),t.jsx(b,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function Rr(o){const{price:r,changeSide:s}=o;return{displayPrice:d.useMemo(()=>{if(r)return s?O(at(1).div(r).toString(),10,!0).toString():r},[r,s])}}function zr(o){const[r,s]=d.useState(!1),{currentPrice:e,minPrice:i,maxPrice:n,displayTokenA:l,displayTokenB:u,isLoading:h,isReverse:m}=o,{displayPrice:c}=Rr({price:e,changeSide:m?!r:r}),{displayMaxPrice:x,displayMinPrice:p}=Ts({minPrice:i,maxPrice:n,changeSide:r});d.useEffect(()=>{s(m)},[m]);const a=d.useMemo(()=>r?u:l,[l,u,r]),y=d.useMemo(()=>a!=null&&a.logo_url?a==null?void 0:a.logo_url:"",[a==null?void 0:a.logo_url]);return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},position:"relative",height:"290px",children:t.jsxs(_,{w:"100%",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",mb:"6px",children:[t.jsx(b,{fontSize:"16px",color:"text_caption",children:"Position Range"}),t.jsxs(v,{gap:"0px",children:[y&&t.jsx(gs,{imageUrl:y,imageStyle:{w:"20px",h:"20px"}}),t.jsxs(b,{color:"text_caption",children:[" ",a==null?void 0:a.symbol]}),t.jsxs(v,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>s(!r),children:[t.jsx(b,{fontSize:"12px",children:" Base coin"}),t.jsx(ys,{xlinkHref:"#icon-icon_swap1"})]})]})]}),t.jsx(lr,{displayPrice:c,displayMaxPrice:x,displayMinPrice:p})]})})}function kr({payload:o,label:r}){return o&&o.length&&t.jsxs(_,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[t.jsx(b,{fontSize:"12px",children:o[0].payload.tooltipTime}),t.jsxs(v,{textAlign:"left",children:[t.jsx(b,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),t.jsx(b,{color:"#68FFD8",fontSize:"12px",children:O(o[0].payload.real)})]}),t.jsxs(v,{children:[t.jsx(b,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),t.jsxs(b,{color:"#6FBCF0",fontSize:"12px",children:[O(o[0].payload.lower),"-",O(o[0].payload.upper)]})]})]})}function Or({data:o=[],dateType:r,isTabLoading:s}){const e=d.useMemo(()=>o,[o]),[i,n]=d.useState({lower:!1,upper:!1,real:!1}),l=d.useMemo(()=>{if(e.length){const m=Math.min(...e.map(y=>y.lower)),c=Math.max(...e.map(y=>y.upper)),x=T(c).mul(1.1),p=T(m).mul(.9),a=x.sub(p).div(4);return Array.from({length:5},(y,g)=>p.add(a.mul(g)).toNumber())}return[]},[e]),u=(m,c)=>{const x=new Date(c*1e3),p=x.getUTCHours(),a=x.getUTCMinutes(),y=x.getUTCDate(),g=x.getUTCMonth()+1;if(m<24||r==="24H"){const j=p>=12?"PM":"AM",f=p%12||12;return`${String(f).padStart(2,"0")}:${String(a).padStart(2,"0")} ${j}`}return`${g}/${y}`},{isApp:h}=ae();return t.jsx(Bt,{width:"100%",height:"100%",children:t.jsxs(Bs,{data:e,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(mt,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:m=>s?"":u(e.length,m),minTickGap:(e==null?void 0:e.length)>8?36:void 0,interval:(e==null?void 0:e.length)<=8?0:void 0}),t.jsx(Ze,{fontSize:"12px",ticks:l,domain:[l[0],l[l.length-1]],axisLine:!1,tickLine:!1,tickFormatter:m=>O(m,4),tick:t.jsx(zs,{})}),t.jsx(Lt,{content:t.jsx(kr,{})}),t.jsx(Wt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:h?-8:-41,right:h?4:100,fontSize:12},formatter:m=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[m]||m}),t.jsx(ze,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:i.real,dot:!1,isAnimationActive:!1}),t.jsx(ze,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:i.lower,isAnimationActive:!1}),t.jsx(ze,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:i.upper,isAnimationActive:!1})]})})}function Br(){const{fetchByApi:o}=pt();return{getPriceRangeData:async s=>{try{const e=ht(s,xt),i=await o(fs,"GET",e);return i!=null&&i.list?i.list.map(n=>{const l=n.Timestamp*1e3,u=new Date(l);return{lower:n.value.lower,upper:n.value.upper,real:n.value.real,date:n.Timestamp,xAxis:Xs(u.toISOString().slice(0,10)),tooltipTime:ut(l),hour:u.getHours()}}):[]}catch(e){return console.error("ðŸš€ ~ useGetPriceRangeData ~ getPriceRangeData Error:",e),[]}}}}function Mr({isRefresh:o,vaultsId:r,isReverse:s}){const[e,i]=d.useState(!1),{getPriceRangeData:n}=Br(),[l,u]=d.useState(),h=[{label:"24H"},{label:"1W"}],[m,c]=d.useState("1W"),[x,p]=d.useState(!1),a=async g=>{const j=Date.now(),A=String(Math.floor(j/1e3-86400));try{i(!0);const P=(await n({vaultID:r,dateType:g=="24H"?"min":"hour",beginTimestamp:g=="24H"?A:"",endTimestamp:T(new Date().getTime()).toFixed(0)})).map(w=>{const G=s?T(1).div(T(w.upper)).toString():w.lower,B=s?T(1).div(T(w.lower)).toString():w.upper,D=s?T(1).div(w.real).toString():w.real;return{...w,lower:G,upper:B,real:D}});u(P),p(!1),i(!1)}catch(S){i(!1),p(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",S)}};d.useEffect(()=>{r&&a(m)},[r,m]),d.useEffect(()=>{o&&a(m)},[o]);const{isApp:y}=ae();return t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:y?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsxs(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[t.jsx(b,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),t.jsx(Me,{type:"outlineTab",tabList:h,currentTab:m,handleChangeTab:g=>{p(!0),c(g.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),t.jsx(K,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(K,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(K,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Xe,{})}),t.jsx(Or,{data:l,dateType:m,isTabLoading:x})]})})]})}function Fr(){const{fetchByApi:o}=pt(),r=async e=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",e);const i={...e};i.dateType=e.type=="day"||e.type=="week"?"hour":"day",delete i.type;try{const n=ht(i,xt),l=await o(bs,"GET",n);return l!=null&&l.list?l==null?void 0:l.list.map((u,h)=>{var a;const m=u.Timestamp*1e3,c=new Date(m),x=Number(c.toISOString().slice(5,7)),p=s((a=l==null?void 0:l.list)==null?void 0:a.length,c,e==null?void 0:e.type,h);return{num:+u.value,date:u.Timestamp,xAxis:p,tooltipTime:ut(m)}}):[]}catch(n){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",n),[]}},s=(e,i,n="D",l)=>{const u=n=="D"||n=="day"?"D":n=="W"||n=="week"?"W":"M";console.log("ðŸš€ ~ getXData ~ type:",n);const h=i,m=h.getUTCHours();let c=h.getUTCHours();const x=h.getUTCMinutes(),p=h.getUTCDate(),a=h.getUTCMonth()+1,y=c>=12?"PM":"AM";if(c=c%12||12,u=="D")return`${String(c).padStart(2,"0")}:${String(x).padStart(2,"0")} ${y}`;if(u=="M")return`${a}/${p}`;if(console.log("ðŸš€ ~ getXData ~ noShowHours:",m),e<24){const g=Math.floor(e/2);if(console.log("ðŸš€ ~ getXData ~ step:",e,l,l%g===0,g),l%g===0)return`${a}/${p}`}return e>=24&&e<120&&(m===0||m===12)?`${a}/${p}`:e>=120&&m===0&&x===0?`${a}/${p}`:""};return{getVaultHistogram:r}}function Lr({isRefresh:o,vaultsId:r}){console.log("ðŸš€ðŸš€ðŸš€ ~ TvlChartPageBlock.tsx:11 ~ TvlChartPageBlock ~ isRefresh:",o);const s=[{label:"24H"},{label:"1W"},{label:"1M"}],[e,i]=d.useState(!0),[n,l]=d.useState("24H"),{getVaultHistogram:u}=Fr(),[h,m]=d.useState([]),[c,x]=d.useState(),[p,a]=d.useState(),y=async()=>{var G,B;i(!0);const f=Date.now(),A=86400,S=n=="24H"?1*A:n=="1W"?7*A:30*A,P=S?String(Math.floor(f/1e3-S)):0,w=await u({type:n=="24H"?"day":n=="1W"?"week":"month",vaultID:r,beginTimestamp:P,endTimestamp:String(Math.floor(f/1e3))});a((G=w[w.length-1])==null?void 0:G.num),x((B=w[w.length-1])==null?void 0:B.num),console.log("ðŸš€ ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",w),m(w),i(!1)},g=f=>{console.log("ðŸš€ ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",f),x(f?f.num:p)};d.useEffect(()=>{r&&y()},[n,r]),d.useEffect(()=>{o&&y()},[o]);const{isApp:j}=ae();return t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:j?"12px":"20px",children:[t.jsxs(v,{justify:"space-between",children:[c?t.jsxs(_,{align:"flex-start",gap:"4px",children:[t.jsx(b,{fontWeight:"500",fontSize:"12px",children:"TVL"}),t.jsx(b,{fontSize:"16px",color:"text_caption",mt:"8px",children:ee(c,2)})]}):t.jsx(_,{align:"flex-start",gap:"4px"}),t.jsx(Me,{type:"outlineTab",tabList:s,currentTab:n,handleChangeTab:f=>l(f.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsx(K,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(K,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(K,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Xe,{})}),h.length>0&&t.jsx(Qs,{data:h,onChangeValue:g,isShowYAxis:!0,toolTipsType:"tvl"}),!e&&h.length===0&&t.jsx(Ot,{type:"nodata"})]})})]})}function Wr({data:o=[],dateType:r,quoteCoin:s}){const[e,i]=d.useState({apy:!1,lp_fee:!1}),n=[{value:"Cumulative Yields",type:"line",id:"lp_fee",color:"#07EBAD"},{value:"APY",type:"line",id:"apy",color:"#75C8FF"}],l=d.useMemo(()=>{if(o.length){const c=Math.min(...o.map(g=>g.apy)),x=Math.max(...o.map(g=>g.apy)),p=T(x).mul(1.05),a=T(c),y=p.sub(a).div(4);return Array.from({length:5},(g,j)=>a.add(y.mul(j)).toNumber())}return[]},[o]),u=d.useMemo(()=>{if(o.length){const c=Math.min(...o.map(g=>g.lp_fee)),x=Math.max(...o.map(g=>g.lp_fee)),p=T(x).mul(1.05),a=T(c),y=p.sub(a).div(4);return Array.from({length:5},(g,j)=>a.add(y.mul(j)).toNumber())}return[]},[o]),h=(c,x)=>{const p=new Date(x*1e3),a=p.getUTCHours(),y=p.getUTCMinutes(),g=p.getUTCDate(),j=p.getUTCMonth()+1;if(c<24||r==="24H"){const f=a>=12?"PM":"AM",A=a%12||12;return`${String(A).padStart(2,"0")}:${String(y).padStart(2,"0")} ${f}`}return`${j}/${g}`},{isApp:m}=ae();return t.jsx(Bt,{width:"100%",height:"100%",children:t.jsxs(Tr,{data:o,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(mt,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:c=>h(o.length,c),minTickGap:(o==null?void 0:o.length)>8?36:void 0,interval:(o==null?void 0:o.length)<=8?0:void 0}),t.jsx(Ze,{yAxisId:"bar",xAxisId:"x",fontSize:"12px",orientation:"left",width:50,tickLine:!1,position:"insideRight",ticks:l,domain:[l[0],l[l.length-1]],tickFormatter:c=>(console.log("ðŸš€ ~ ApyAndFeesChart 323~ value:",c),O(c,2)),tick:t.jsx(ks,{})}),t.jsx(Ze,{yAxisId:"line",orientation:"right",fontSize:"12px",tickLine:!1,ticks:u,domain:[u[0],u[u.length-1]],tick:t.jsx(Os,{isRight:!0,isApp:m,symbol:s==null?void 0:s.symbol})}),t.jsx(Lt,{content:t.jsx(Vs,{symbol:s==null?void 0:s.symbol})}),t.jsx(Wt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:-32,right:0,fontSize:12},payload:n}),t.jsx(Ft,{yAxisId:"bar",barSize:1,dataKey:"apy",fill:"#75C8FF",isAnimationActive:!1,hide:e.apy}),t.jsx(ze,{yAxisId:"line",type:"monotone",dataKey:"lp_fee",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},dot:!1,isAnimationActive:!1,hide:e.lp_fee})]})})}function Er(){const{fetchByApi:o}=pt();return{getVaultApyAndFeesHistogram:async s=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",s);const e={...s};e.dateType="hour";try{const i=ht(e,xt),n=await o(vs,"GET",i);return console.log("ðŸš€ ~ getVaultApyAndFeesHistogram ~ res:",n),n!=null&&n.list?n==null?void 0:n.list.map((l,u)=>{const h=l.Timestamp*1e3,m=new Date(h),c=Number(m.toISOString().slice(5,7));return{apy:+l.value.apy*100,lp_fee:+l.value.lp_fee,date:l.Timestamp,tooltipTime:ut(h)}}):[]}catch(i){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",i),[]}}}}function Hr({isRefresh:o,vaultsId:r,isReverse:s,quoteCoin:e}){const[i,n]=d.useState(!1),[l,u]=d.useState(),{isApp:h}=ae(),{getVaultApyAndFeesHistogram:m}=Er(),c=async()=>{n(!0);const x=Date.now(),p=86400,a=h?2*p:7*p,y=a?String(Math.floor(x/1e3-a)):0,g=await m({vaultID:r,beginTimestamp:y,endTimestamp:String(Math.floor(x/1e3))});u(g),console.log("ðŸš€ ~ fetchPricerangeHistogram ~ tvl_res:",g),n(!1)};return d.useEffect(()=>{r&&c()},[r]),d.useEffect(()=>{o&&c()},[o]),t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",padding:h?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsx(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:t.jsx(b,{fontWeight:"500",fontSize:"14px",children:"APY & Yields"})})}),t.jsx(K,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(K,{w:"100%",h:"260px",position:"relative",children:[i&&t.jsx(K,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Xe,{})}),t.jsx(Wr,{data:l,dateType:"",quoteCoin:e})]})})]})}function $r(o){const{isOpen:r,onClose:s,data:e,onSubmitClick:i,calculateLpLoading:n}=o,{feeTier:l,displayTokenA:u,displayTokenB:h,displayAmountA:m,displayAmountB:c,totalAmountValue:x,sharePool:p,lpAmountLimit:a,lpDecimals:y}=e;return t.jsxs(Qt,{autoFocus:!1,returnFocusOnClose:!1,isOpen:r,onClose:s,isCentered:!0,children:[t.jsx(Vt,{}),t.jsxs(It,{children:[t.jsx(es,{children:t.jsx(ts,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),t.jsx(ss,{}),t.jsx(rs,{textAlign:"center",p:"0px",children:t.jsxs(_,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(kt,{coinAIconUrl:u==null?void 0:u.logo_url,coinBIconUrl:h==null?void 0:h.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(b,{fontSize:"16px",color:"text_caption",children:`${u==null?void 0:u.symbol} - ${h==null?void 0:h.symbol}`})]}),t.jsx(L,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:t.jsxs(v,{children:[t.jsx(b,{children:"Fee Tier"}),t.jsx(b,{color:"primary",children:l})]})})]}),t.jsx(er,{coinA:{amount:m,...u},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:c,...h}}),t.jsx(Et,{amountLimit:a,inputTotalValue:x,preCalculateLoading:!1,calculateLpLoading:n,lpRate:p,lpDecimals:y,poolName:`${u==null?void 0:u.symbol} - ${h==null?void 0:h.symbol}`}),t.jsx(K,{h:"52px"}),t.jsx(Je,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{i()},children:"Deposit"})]})})]})]})}const Nr="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",Ur=(o,r)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${r} via ${o} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Zt(o){const{displayTokenA:r,displayTokenB:s,onSelectAssetTab:e,showAfterIcon:i=!1,label:n="Deposit Amounts",handleRefreshClick:l,refreshCount:u,isCheckedZAP:h,setIsCheckedZAP:m,assetAction:c,setAssetAction:x,isUnstableVault:p,currentActionTab:a}=o,{stakeProtocolName:y}=as(r==null?void 0:r.coin_type),[g,j]=d.useState("both"),f=d.useMemo(()=>{if(r&&s){const P=[{label:`${r.symbol} only`,action:r.coin_type,afterIcon:h&&a=="Deposit"&&!p?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:p?a=="Deposit"?`You can add liquidity in this pool with only ${r.symbol}.`:"":Nr},{label:`${s.symbol} only`,action:s.coin_type,afterIcon:h&&a=="Deposit"&&!p?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:p?a=="Deposit"?`You can add liquidity in this pool with only ${s.symbol}.`:"":Ur(y,r==null?void 0:r.symbol)}];return p&&a=="Deposit"&&P.splice(1,0,{label:`${r.symbol}+${s.symbol}`,action:"both",afterIcon:h&&!p&&a=="Deposit"?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:a=="Deposit"?"You can add any value you want from both assets.":""}),P}return[]},[r,y,h]),A=d.useMemo(()=>{if(f.length!==0){if(p){if(c===(r==null?void 0:r.coin_type))return f[0].label;if(c===(s==null?void 0:s.coin_type))return a=="Withdraw"?f[1].label:f[2].label}else{if(c===(r==null?void 0:r.coin_type))return f[0].label;if(c===(s==null?void 0:s.coin_type))return f[1].label}return f[1].label}},[c,f,h]),S=d.useMemo(()=>a=="Deposit"?p?"customDeposit":"deposit":"withdraw",[a,p]);return t.jsxs(_,{w:"100%",gap:"16px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(b,{fontWeight:"500",children:n}),t.jsx(Ds,{isCheckedZAP:h,zapText:a=="Deposit"?"Zap In":"Zap Out",tooltipType:S,zapSwitchChange:P=>{m(!h),x(P?r==null?void 0:r.coin_type:"both"),j((r==null?void 0:r.symbol)+" only")}})]}),h?t.jsx(Me,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:A,tabList:f,handleChangeTab:P=>{x(P.action),console.log("ðŸš€ðŸš€ðŸš€ ~ item.action:",P.action),e(P.action)}}):null]})}function Kr(o){const{category:r}=Dt(),{apiVaultInfo:s,tokenA:e,tokenB:i,isReverse:n,vaultsId:l,totalLp:u,feeTier:h,handleRefreshClick:m,currentActionTab:c,hardCapUSD:x,vaultTvl:p,lpTokenInfo:a,depositRatio:y,gtAumLimit:g,quoteCoin:j,maxCapNum:f,isRefresh:A,availableCapacityWithQuoteCoin:S,availableCapacityWithBaseCoin:P,baseCoin:w}=o,G=Be.useVaultsAdd(r=="haedal"),B=Be.useAddButtonStatus(r=="haedal"),[D,N]=d.useState("both");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:67 ~ VaultsAdd ~ assetAction:",D);const[z,le]=d.useState(!1),{currentAccount:C,onWalletModal:Z}=dt(),W=d.useMemo(()=>D==(j==null?void 0:j.coin_type),[D,j]),{amountInputA:E,amountInputB:Y,balanceInfoA:R,balanceInfoB:H,amountValueA:_e,amountValueB:Pe,preCalculateLoading:re,fixAmountA:M,inputTotalValue:be,handleAmountInputChange:ce,calculateResult:F,showOnlySideTips:q,doAddAction:ve,reCalculateResult:me,overHardtop:ge,zapNumError:U,calculateLpLoading:X,inputTotalValueError:ye,debouncedPreCalculateDepositValue:je,percentage:fe,setPercentage:I,setIsSlider:oe,isSlider:pe,setUuid:Ce}=G(D,m,l,n?i:e,n?e:i,s==null?void 0:s.isReverse,z,x,p,g,S,P,j,w,W),{vaultsSlippage:Fe}=or(),{btnText:Le,btnDisabled:$}=B(z,D,!0,E,Y,M,R==null?void 0:R.balanceFormat,H==null?void 0:H.balanceFormat,e,i,U,F,ge,ye),{lpRate:ie}=Rt(F==null?void 0:F.ft_amount,u),{amountLimit:We}=zt(Number(Fe),F==null?void 0:F.ft_amount,!1),[Ee,He]=d.useState(!1),Ie=d.useMemo(()=>R,[R==null?void 0:R.balance,H==null?void 0:H.balance,n]),et=d.useMemo(()=>H,[R==null?void 0:R.balance,H==null?void 0:H.balance,n]),xe=d.useMemo(()=>e,[n,e,i]),ue=d.useMemo(()=>i,[n,e,i]),Yt=()=>({feeTier:h||"",displayTokenA:xe,displayTokenB:ue,displayAmountA:E,displayAmountB:Y,totalAmountValue:be,sharePool:ie,lpAmountLimit:We||"0",lpDecimals:a==null?void 0:a.decimals}),{isApp:qt}=ae(),{pythPriceMap:tt}=ls(),gt=d.useMemo(()=>tt||{},[tt]);d.useEffect(()=>{if(pe){const V=_t();Ce(V),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:200 ~ VaultsAdd ~ priceMap:",gt),je(fe,V,W?S:P,W?j:w)}},[gt]);const{isCheckedAcceptWalletObj:Xr,isCheckedDontRemindWalletObj:st}=tr(),[yt,rt]=d.useState(!1),Xt=d.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:211 ~ isShowRiskModal ~ isCheckedDontRemindWalletObj[currentAccount?.address]:",st[C==null?void 0:C.address]),!st[C==null?void 0:C.address]),[st,C==null?void 0:C.address]);return t.jsxs(_,{gap:"12px",w:"100%",align:"flex-start",children:[t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Zt,{showAfterIcon:!0,displayTokenB:i,displayTokenA:e,onSelectAssetTab:N,assetAction:D,isCheckedZAP:z,setIsCheckedZAP:le,setAssetAction:N,isUnstableVault:r=="haedal",currentActionTab:c,handleRefreshClick:()=>{m(),me()}}),t.jsx(_,{mt:"16px",position:"relative",children:t.jsx(Ht,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:D!=="both"&&D!==(xe==null?void 0:xe.coin_type),balance:(Ie==null?void 0:Ie.balanceFormat)||"",value:E,amountValue:E&&_e,loading:(n?M:!M)&&re&&!z,onChange:V=>{(s==null?void 0:s.category)=="haedal"&&oe(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:183 ~ VaultsAdd ~ value,amountInputB:",V,Y),ce(V,!n,!0,Y)},selectable:!1,placeholder:"0.0",token:xe},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:D!=="both"&&D!==(ue==null?void 0:ue.coin_type),balance:(et==null?void 0:et.balanceFormat)||"",value:Y,amountValue:Y&&Pe,loading:(n?!M:M)&&re&&!z,onChange:V=>{(s==null?void 0:s.category)=="haedal"&&oe(!1),ce(V,n,!0,E)},selectable:!1,placeholder:"0.0",token:ue},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),(s==null?void 0:s.category)=="haedal"&&t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"16px",children:t.jsx(sr,{depositRatio:y,percentage:fe,hardCapUSD:x,vaultTvl:p,gtAumLimit:g,quoteCoin:j,maxCapNum:f,availableCapacityWithQuoteCoin:S,onChange:V=>{oe(!0),I(V);const ft=_t();Ce(ft),je(V,ft,W?S:P,W?j:w)}})}),t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(_,{w:"100%",gap:"20px",children:[t.jsx(Je,{m:"-1px",isLoading:re||Ee,w:"100%",borderRadius:"12px",h:"52px",fontSize:qt&&U?"14px":"18px",fontWeight:"500",disabled:$||re||Ee||(C==null?void 0:C.address)&&(g||ge),onClick:()=>{C?Xt&&r=="haedal"?rt(!0):He(!0):Z(!0)},children:Le||(z?"Zap In":"Deposit")}),U&&fe>0&&(E||Y)?t.jsx(_,{w:"100%",pl:"16px",pr:"16px",pb:F||q?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(b,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,ye&&t.jsx(_,{w:"100%",pl:"16px",pb:"20px",pr:"16px",alignItems:"start",children:t.jsx(b,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(F||q)&&!ye&&(E||Y)&&t.jsxs(_,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[D!=="both"&&q&&t.jsx(b,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:F?"20px":"0",children:q}),F&&t.jsx(Et,{amountLimit:We,inputTotalValue:be,preCalculateLoading:re,calculateLpLoading:X,lpRate:ie,lpDecimals:a==null?void 0:a.decimals,poolName:`${xe==null?void 0:xe.symbol} - ${ue==null?void 0:ue.symbol}`,labelColor:"primary_gray"})]})]})}),yt&&t.jsx(rr,{isOpen:yt,setIsOpen:rt,continueFunc:()=>{rt(!1),He(!0)}}),Ee&&t.jsx($r,{data:Yt(),isOpen:Ee,calculateLpLoading:X,onClose:()=>{He(!1)},onSubmitClick:()=>{He(!1),ve()}})]})}function Gr(o){const{vaultsCoinPercent:r,displayTokenB:s,displayTokenA:e,vaultCoinAmounts:i,vaultsCoinAValue:n,vaultsCoinBValue:l,isReverse:u,depositRatio:h,hardCapUSD:m,vaultTvl:c}=o,x=d.useMemo(()=>u?l:n,[u,n,l]),p=d.useMemo(()=>u?n:l,[u,n,l]),a=d.useMemo(()=>u?r==null?void 0:r.percentB:r==null?void 0:r.percentA,[u,r]),y=d.useMemo(()=>u?r==null?void 0:r.percentA:r==null?void 0:r.percentB,[u,r]),{isApp:g}=ae();return t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(_,{w:"100%",gap:"0px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(b,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),m&&t.jsx(ir,{depositRatio:h,hardCapUSD:m,vaultTvl:c,label:"Capacity",value:Re(m,"$")})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[t.jsxs(v,{children:[t.jsx(de,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!g}),t.jsx(se,{wrapStyle:{gap:"4px"},title:Q(e==null?void 0:e.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:a?`${a}%`:t.jsx(ne,{w:"40px",h:"12px"}),valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),t.jsx(os,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:a,bg:Number(a)!==0&&Number(y)!==0?"quote_green":"process_bg_gray",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{children:[t.jsx(se,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:Q(s==null?void 0:s.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:y?`${y}%`:t.jsx(ne,{w:"40px",h:"12px"}),valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),t.jsx(de,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[t.jsx(se,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:i!=null&&i.displayCoinA?`${O(i==null?void 0:i.displayCoinA,6)} ${Q(e==null?void 0:e.symbol,10)}`:t.jsx(ne,{w:"120px",h:"14px"}),titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:x?ee(x,2):t.jsx(ne,{w:"80px",h:"14px"}),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),t.jsx(se,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:i!=null&&i.displayCoinB?`${O(i==null?void 0:i.displayCoinB,6)} ${Q(s==null?void 0:s.symbol,10)}`:t.jsx(ne,{w:"120px",h:"14px"}),titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:p?ee(p,2):t.jsx(ne,{w:"80px",h:"14px"}),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function Zr(o){var u,h,m,c,x,p;const{isApp:r}=ae(),{apiVaultInfo:s,isUnstableVault:e,vaultTvl:i,performanceFee:n}=o,{getExplorerUrl:l}=js();return t.jsxs(Ge,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(kt,{coinACoinType:(u=s==null?void 0:s.displayTokenA)==null?void 0:u.coin_type,coinBCoinType:(h=s==null?void 0:s.displayTokenB)==null?void 0:h.coin_type,coinAIconUrl:(m=s==null?void 0:s.displayTokenA)==null?void 0:m.logo_url,coinBIconUrl:(c=s==null?void 0:s.displayTokenB)==null?void 0:c.logo_url}),t.jsxs(_,{alignItems:"start",flexDirection:e?"column":"row",gap:"2px",children:[t.jsxs(v,{children:[t.jsx(b,{fontSize:"16px",color:"text_caption",children:(s==null?void 0:s.name)||`${(x=s==null?void 0:s.displayTokenA)==null?void 0:x.symbol} - ${(p=s==null?void 0:s.displayTokenB)==null?void 0:p.symbol}`}),t.jsx(L,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:t.jsx(v,{children:t.jsx(b,{fontSize:"12px",color:"primary",children:s==null?void 0:s.feeDisplay})})})]}),t.jsx(v,{mt:"4px",children:e&&t.jsx(nr,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"Haedal"})})]}),!r&&t.jsxs(v,{ml:"12px",gap:"4px",children:[t.jsx(b,{fontSize:"14px",children:"Vault Address"}),t.jsx(St,{fontSize:"14px",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})]})]}),t.jsx(Ge,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:r?t.jsxs(t.Fragment,{children:[t.jsx(te,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:t.jsx(St,{fontSize:"14px",color:"text_caption",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"APY",labelStyle:{fontSize:"14px"},rightValueTip:t.jsx(bt,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"Earnings",labelStyle:{fontSize:"14px"},value:t.jsx(jt,{placement:"top",tooltip:t.jsx(b,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Ke,{children:t.jsx(v,{w:"100px",justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(vt,{coinType:a},a))})})}),valueStyle:{h:"20px",lineHeight:"20px"}}),t.jsx(te,{wrapStyle:{gap:"6px"},label:"TVL",labelStyle:{fontSize:"14px"},value:(e?Re(i,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e&&t.jsx(te,{wrapStyle:{gap:"6px"},label:t.jsxs(v,{children:[t.jsx(b,{children:"Performance Fee"}),t.jsx(Pt,{type:"vaultDetailFee"})]}),labelStyle:{fontSize:"14px"},value:Re(n,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})]}):t.jsxs(t.Fragment,{children:[t.jsx(se,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"APY",titleStyle:{fontSize:"12px"},valueTooltip:t.jsx(bt,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontWeight:"500"}}),t.jsx(se,{wrapStyle:{gap:"6px",alignItems:"flex-end"},title:"Earnings",titleStyle:{fontSize:"12px"},value:t.jsx(jt,{placement:"top",tooltip:t.jsx(b,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Ke,{children:t.jsx(v,{justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(vt,{coinType:a},a))})})}),valueStyle:{h:"20px"}}),t.jsx(se,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"TVL",titleStyle:{fontSize:"12px"},value:(e?Re(i,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}}),e&&t.jsx(se,{wrapStyle:{alignItems:"flex-end",gap:"2px"},title:t.jsxs(v,{children:[t.jsx(b,{fontSize:"12px",children:"Performance Fee"}),t.jsx(Pt,{type:"vaultDetailFee"})]}),titleStyle:{fontSize:"12px",mt:"-4px"},value:Re(n,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}})]})})]})}function Yr(o){const{apiVaultInfo:r,tokenA:s,tokenB:e,isReverse:i,vaultsId:n,totalLp:l,holdCoinAmounts:u,holdLpAmount:h,handleRefreshClick:m,isUnstableVault:c,currentActionTab:x,lpTokenInfo:p}=o,a=Be.useVaultsRemove(c),y=Be.useAddButtonStatus(c),[g,j]=d.useState(!1),[f,A]=d.useState("both"),{currentAccount:S,onWalletModal:P}=dt(),{contractClmmPoolObj:w}=cs(),G=d.useMemo(()=>{if(w&&w[r==null?void 0:r.clmmPoolAddress])return w[r==null?void 0:r.clmmPoolAddress]},[r==null?void 0:r.clmmPoolAddress,w]),{amountInputA:B,amountInputB:D,availableAmountA:N,availableAmountB:z,amountValueA:le,amountValueB:C,preCalculateLoading:Z,fixAmountA:W,inputTotalValue:E,handleAmountInputChange:Y,calculateResult:R,showOnlySideTips:H,doRemoveAction:_e,handlePercentInputChange:Pe,removePercent:re,isPercentInput:M,reCalculateResult:be,calculateAvailableLoading:ce,submitLoading:F}=a(f,m,u,h,n,i?e:s,i?s:e,i,g,G),q=d.useMemo(()=>E&&g?at(E).gt(0)&&at(E).lt(1e-4):!1,[g,E]),{btnText:ve,btnDisabled:me}=y(g,f,!1,B,D,i?!W:W,N,z,s,e,"",R,q);Rt(R==null?void 0:R.burn_ft_amount,l);const{amountLimit:ge}=zt(0,R==null?void 0:R.burn_ft_amount,!1);d.useMemo(()=>N,[N,i]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceA ~ availableAmountA:",N),d.useMemo(()=>z,[z]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceB ~ availableAmountB:",z);const U=d.useMemo(()=>s,[i,s,e]),X=d.useMemo(()=>e,[i,s,e]),ye=d.useMemo(()=>Z?M?!0:i?W:!W:!1,[Z,M]),je=d.useMemo(()=>Z?M?!0:i?!W:W:!1,[Z,M]),fe=d.useMemo(()=>O(Ss(ge||"0",p==null?void 0:p.decimals),p==null?void 0:p.decimals),[ge,p]);return t.jsxs(_,{gap:"12px",w:"100%",align:"flex-start",children:[t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Zt,{label:"Remove Amounts",displayTokenA:s,displayTokenB:e,onSelectAssetTab:A,handleRefreshClick:()=>{m(),be()},isCheckedZAP:g,setIsCheckedZAP:j,assetAction:f,setAssetAction:A,currentActionTab:x,isUnstableVault:c}),t.jsx(K,{w:"100%",position:"relative",mt:"16px",children:t.jsx(Ht,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:ce,hideSelf:f!=="both"&&f!==(U==null?void 0:U.coin_type),balance:N||"",value:B,amountValue:le,loading:ye,onChange:(I,oe,pe)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:179 ~ VaultsRemove ~ value:",I),Y(I,!i,oe,pe)},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:U,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:ce,needRemainBalance:!1,hideSelf:f!=="both"&&f!==(X==null?void 0:X.coin_type),balance:z||"",value:D,amountValue:C,loading:je,onChange:(I,oe,pe)=>{Y(I,i,oe,pe)},selectable:!1,placeholder:"0.0",token:X},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),t.jsxs(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[t.jsx(b,{color:"primary_gray",children:"Amount"}),t.jsx(ar,{percentage:re,onChange:I=>{ce||Pe(Number(I.toString().replace("%","")))}})]}),t.jsx(L,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(_,{w:"100%",gap:"20px",children:[t.jsx(Je,{m:"-1px",isLoading:Z||F,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:me||Z||F,onClick:()=>{S?_e():P(!0)},children:ve||(g?"Zap Out":"Withdraw")}),q&&t.jsx(_,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:t.jsx(b,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),R&&!q&&t.jsxs(_,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[f!=="both"&&H&&t.jsx(b,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:H}),t.jsxs(_,{w:"100%",gap:"20px",children:[t.jsx(te,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:ee(E,2),valueStyle:{fontSize:"14px"},isLoading:Z}),t.jsx(te,{label:"LP Burn Amount",value:`${fe} ${`${U==null?void 0:U.symbol} - ${X==null?void 0:X.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:Z})]})]})]})})]})}const qr=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function xi(){var Fe,Le;const{vaultId:o,category:r}=Dt(),{currentAccount:s}=dt(),{apiVaultInfo:e,getApiVaultInfo:i}=ps(o),{fetchAccountBalance:n}=Ps(),l=Be.useGetContractVaultInfo(r=="haedal"),{vaultStatsObj:u}=xs(),[h,m]=d.useState(!0);d.useEffect(()=>{var $;if(o&&As(u)){const ie=($=Object.values(u))==null?void 0:$.filter(We=>We.vaultsId==o);(ie==null?void 0:ie.length)>0?m(!0):m(!1)}},[o,u]);const{contractVault:c,lpTokenInfo:x,minPrice:p,maxPrice:a,vaultCoinAmounts:y,vaultsCoinAValue:g,vaultsCoinBValue:j,currPrice:f,balanceInfo:A,totalValue:S,fetchClmmPoolFromContract:P,fetchVaultInfoFromContract:w,vaultsCoinPercent:G,sharePoolRate:B,holdCoinAmounts:D,holdCoinAValue:N,holdCoinBValue:z,fetchVaultBalance:le,vaultTvl:C,depositRatio:Z,hardCapUSD:W,performanceFee:E,gtAumLimit:Y,quoteCoin:R,maxCapNum:H,availableCapacityWithQuoteCoin:_e,availableCapacityWithBaseCoin:Pe,baseCoin:re}=l(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse,!0),[M,be]=d.useState("Deposit");d.useEffect(()=>{s!=null&&s.address&&e&&e.vaultsId&&(x!=null&&x.decimals)&&r=="haedal"&&le(s==null?void 0:s.address,e.vaultsId,x==null?void 0:x.decimals)},[s==null?void 0:s.address,e,x==null?void 0:x.decimals,r]);const{rewardPerA:ce,rewardPerB:F}=us(A==null?void 0:A.balanceFormat,e);d.useEffect(()=>{o&&w(o,!0)},[o]),d.useEffect(()=>{e&&(console.log("ðŸš€ ~ useEffect ~ apiVaultInfo:",e),P(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),d.useEffect(()=>{s!=null&&s.address&&n()},[]);const[q,ve]=d.useState(!1),me=()=>{n(),e&&P(e.clmmPoolAddress,!0),o&&(w(o,!0),i(o,!0)),ve(!0),setTimeout(()=>{ve(!1)},1e3)},ge=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[U,X]=d.useState("Overview"),ye=is();Cs({interval:20*1e3,callback:()=>{pe([$e(e.tokenA.coin_type),$e(e.tokenB.coin_type)])}});const{setVaultsCoinPercent:je,setVaultsCoinAValue:fe,setVaultsCoinBValue:I,setVaultCoinAmounts:oe}=ds();d.useEffect(()=>()=>{je(""),fe(""),I(""),oe({coinAmountA:"",coinAmountB:"",displayCoinA:"",displayCoinB:""})},[]);const{getPythLastPrice:pe}=Is(),Ce=d.useRef(!1);return d.useEffect(()=>{var $,ie;!Ce.current&&(($=e==null?void 0:e.tokenA)!=null&&$.coin_type)&&((ie=e==null?void 0:e.tokenB)!=null&&ie.coin_type)&&(pe([$e(e.tokenA.coin_type),$e(e.tokenB.coin_type)]),Ce.current=!0)},[(Fe=e==null?void 0:e.tokenA)==null?void 0:Fe.coin_type,(Le=e==null?void 0:e.tokenB)==null?void 0:Le.coin_type]),t.jsx(K,{pt:"40px",w:"100%",children:h?t.jsxs(_,{gap:"20px",w:"100%",align:"flex-start",children:[t.jsx(v,{w:"100%",justify:"space-between",children:t.jsx(ws,{bg:"bg_six",borderColor:"border_secondary"})}),t.jsx(Zr,{apiVaultInfo:e,isUnstableVault:r=="haedal",vaultTvl:C,performanceFee:E}),t.jsxs(Ge,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[t.jsxs(_,{width:"100%",flex:"1",gap:"12px",children:[(e==null?void 0:e.category)=="haedal"&&t.jsx(Me,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:ge,currentTab:U,handleChangeTab:$=>{X($==null?void 0:$.value)}}),U=="Overview"?t.jsxs(t.Fragment,{children:[t.jsx(zr,{minPrice:p,maxPrice:a,currentPrice:e!=null&&e.isReverse?1/f:f,displayTokenB:e!=null&&e.isReverse?e==null?void 0:e.displayTokenA:e==null?void 0:e.displayTokenB,displayTokenA:e!=null&&e.isReverse?e==null?void 0:e.displayTokenB:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1}),t.jsx(Gr,{vaultCoinAmounts:y,vaultsCoinAValue:g,vaultsCoinBValue:j,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsCoinPercent:G,depositRatio:Z,hardCapUSD:W,vaultTvl:C}),t.jsx(Dr,{lpTokenInfo:x,sharePoolRate:B,balanceInfo:A,totalValue:S,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,holdCoinAmounts:D,holdCoinAValue:N,holdCoinBValue:z,isReverse:(e==null?void 0:e.isReverse)||!1,rewardPerA:ce,rewardPerB:F})]}):t.jsxs(t.Fragment,{children:[t.jsx(Lr,{isRefresh:q,vaultsId:e==null?void 0:e.vaultsId}),t.jsx(Hr,{isRefresh:q,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse,haveMining:e==null?void 0:e.haveMining,quoteCoin:R}),t.jsx(Mr,{isRefresh:q,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse})]})]}),t.jsxs(_,{w:{base:"100%",lg:"40%"},justifyContent:"start",gap:"12px",children:[t.jsx(L,{p:"0",borderRadius:"12px",bg:"bg_six",borderColor:"border_secondary",children:t.jsxs(v,{w:"100%",p:{base:"0 8px",lg:"0 16px"},children:[t.jsx(Me,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",border:"none",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:qr,currentTab:M,handleChangeTab:$=>{be($==null?void 0:$.value)}}),t.jsxs(v,{children:[t.jsx(ns,{slippageType:"vaults",compact:!0}),t.jsx(_s,{handleRefresh:me,isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),M==="Deposit"&&t.jsx(Kr,{apiVaultInfo:e,feeTier:e==null?void 0:e.feeDisplay,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:(c==null?void 0:c.total_supply)||(c==null?void 0:c.lp_token_treasury),isUnstableVault:r=="haedal",handleRefreshClick:me,currentActionTab:M,hardCapUSD:W,vaultTvl:C,lpTokenInfo:x,depositRatio:Z,gtAumLimit:Y,quoteCoin:R,baseCoin:re,maxCapNum:H,availableCapacityWithBaseCoin:Pe,availableCapacityWithQuoteCoin:_e}),M==="Withdraw"&&t.jsx(Yr,{apiVaultInfo:e,holdCoinAmounts:D,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:c==null?void 0:c.total_supply,holdLpAmount:A==null?void 0:A.balance,isUnstableVault:r=="haedal",handleRefreshClick:me,currentActionTab:M,lpTokenInfo:x})]})]})]}):t.jsx(Ot,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsxs(_,{children:[t.jsx(b,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),t.jsx(Je,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{ye("/vaults")},children:"Back to Vault"})]})})})}export{xi as default};
//# sourceMappingURL=VaultsDetailPage-Ce7UMZIC.js.map
