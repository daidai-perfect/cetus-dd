import{a as j,j as e,T,H as z,V as W,C as gt,v as be,aa as Rt,f as ee,a7 as he,a8 as De,ah as lr,u as We,am as dr,ab as Ze,X as ls,Y as ds,Z as us,$ as xs,a0 as ur,a1 as os,ag as ps,a6 as xr,ar as ft,F as or,t as pr,I as Kt,D as gr}from"./vendor-DYqnJE5Q.js";import{S as gs}from"./Slippage-_d8xq0BF.js";import{i as yr,P as mr}from"./useWrapPoolData-C8NJOF2n.js";import{M as hr,u as Ct,i as Yt,g as br,I as Ce,a as _e,S as Oe,w as Lt,O as J,b as Tt,c as Be,f as ve,d as H,P as Qt,h as ys,G as vt,j as ms,F as jr,k as yt,K as wt,C as hs,B as Ar,r as ct,m as bs,Q as _t,R as pe,U as tt,V as lt,W as ue,D as Sr,X as Xt,Y as fr,z as Ft,y as at,Z as vr,$ as Ee,a0 as Ve,a1 as wr,q as kt,a2 as Jt,a3 as _r}from"./index-WWPS4_2e.js";import{u as P}from"./index-CPkN-tGW.js";import{u as ge,a as kr,P as Rr,F as Cr,V as Lr}from"./PositionListLoading-CXZumcTM.js";import{u as Ge}from"./useDocumentSize-DJVbcG_A.js";import{H as Tr,T as Fr,a as Br,u as Mr,V as zr}from"./VolumeChart-BPcEzTWK.js";import{N as Ne}from"./NoData-B27RAtoz.js";import{A as qr}from"./CopyButton-D1sHEEd7.js";import{T as Er}from"./TvlChart-DCIJoF5o.js";import{u as Wr}from"./useBurn-DyUQgl6j.js";import{H as we}from"./HTextLabelBox-CabGGlmQ.js";import{T as Ur}from"./TooltipIcon-BfDJpR5R.js";import{A as js}from"./SingleTokenInfo-BmePh6gD.js";import{a as As,b as Hr}from"./usePositionList-DKv7WJr0.js";import{u as $r}from"./useRpcListener-BZmBHZRe.js";import{A as Vr}from"./index-rlvi-7_T.js";import{S as st,u as Le,a as mt,L as Ss}from"./LiquidityRangeChart-Cecxkn-I.js";import{u as Te,d as fs,Z as Bt,R as Nr,a as vs,b as Dr,c as ws,e as _s,f as ks,g as Or}from"./ZapSwitch-CozVPddg.js";import{T as Pt}from"./TradeConfirmAmountInfo-DQFQ5-2N.js";import{D as Mt,W as Rs}from"./DepositRatio-BfBjRHwn.js";import{T as zt}from"./TotalAmount-UE5pZUmU.js";import{P as Gr}from"./PositionStatus-O7YT_I-Q.js";import{u as Zr,a as Kr}from"./useTransaction-B0xyNeQf.js";import{u as Yr}from"./global-Bo5w7aOL.js";import{f as rt,i as qe}from"./index-BQdM0Oaf.js";import{c as Qr,g as dt,a as ut,u as Xr}from"./useGetPoolList-CMRSGTVw.js";import{u as Cs}from"./useAccountBalance-Bh-NvyHs.js";import{u as xt}from"./useTokenBalance-L-7JdNBo.js";import{u as Ls,m as At,S as It,a as Jr}from"./SelectTokenAndFeeConfirm-CWZDNmn3.js";import{u as Pr}from"./useNotifiSubscription-D5CEF9OP.js";import{u as Ir}from"./usePosAdd-yKPgI-5c.js";import{P as es}from"./PriceInput-BclcNybq.js";import{u as ei,a as ti,V as si}from"./VaultsAprBlock-DnfhvGaf.js";import{u as Ts}from"./usePriceImpact-Dn-go9TS.js";import{E as ot}from"./ErrorTips-DJn2WIrX.js";import{T as Fs}from"./TradeInputGroup-BIsIP9JC.js";import{g as ri}from"./liquidity-BBVqpKX5.js";import{d as ts,F as ii}from"./FeeTierSelect-Bn24cye_.js";import{u as Bs}from"./useToken-DKo5fk0k.js";import{a as ni,u as ci}from"./useFavoritePool-CnJfzn94.js";import{u as ai}from"./swapWidget-CTmuvVSU.js";import{u as li}from"./swapWidgetConfig-DB4qmSFz.js";import{B as di}from"./BackButton-kuRg3FJq.js";import{R as ui}from"./RefreshButton-wIjLAatj.js";import{C as xi}from"./CurrentPrice-B8SB9U4y.js";import{W as oi}from"./WarningTokenTipModal-CWha6y_d.js";import"./PoweredByHaedal-COe4fDWI.js";import"./useInterval-DB5fjnAi.js";import"./useDisplayTickPrice-D9b5YLpL.js";import"./VTextLabelBox-LQjO6gSH.js";import"./PriceRange-Bhwm_iq4.js";import"./RangeValue-C3CNy31o.js";import"./debounce-BomGZdvA.js";import"./index-BIWFnSOP.js";import"./Pagination-Cd_AjZQ9.js";import"./EmptyTooltip-B4bcWR7-.js";import"./_getAllKeysIn-DOxZoQuX.js";import"./YAxis-CfXFyO_H.js";import"./generateCategoricalChart-D7UZ2x2M.js";import"./linear-DYpwdEgO.js";import"./usePreviousValue-COG3o_Rs.js";import"./ActionButton-skuk0GyZ.js";import"./v4-C6aID195.js";import"./FreshProgressV2-NKYDd-xy.js";import"./useSigner-rKW8msZz.js";import"./index-BDjJxR8b.js";import"./CheckBox-BBIm-qq8.js";import"./Loading-CUaB3ihc.js";import"./useNotifiAlerts-Cdv2amid.js";import"./useXCetusHelper-CpXBHf3W.js";import"./msafe-oYBkW7LJ.js";import"./InputBox-DLLmri2u.js";import"./useFindBestRouting-CBVbnGqc.js";import"./useSwapHelper-C0YC34Fy.js";var Re=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Re||{});function pi(){const{clmmSdk:t}=hr(),{fetchByApi:s}=Ct();return{getTransactionsHistory:async g=>{try{const x=await s(yr,"GET",g);if(console.log(x,"getTransactionsHistory"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(g,x)=>{try{const a=await t.Pool.getPoolTransactionList({poolId:g,paginationArgs:x,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(a,"getTransactionsHistoryBySDK"),a)return a;throw new Error("no data")}catch(a){console.error(a,"getTransactionsHistoryBySDK ~ error")}}}}function gi(){const{getTransactionsHistoryBySDK:s}=pi(),[r,c]=j.useState(!0),[g,x]=j.useState([]),[a,b]=j.useState(1),[i,u]=j.useState(),[p,d]=j.useState(!0),{apiPoolInfo:o,manualRefresh:S,setManualRefresh:_}=P(),{poolAddress:L}=ge();j.useEffect(()=>{x([]),b(1),u(void 0),d(!0)},[L]),j.useEffect(()=>{S&&(x([]),b(1),u(void 0),d(!0),y({cursor:void 0,limit:10}))},[L,S]);const y=async h=>{var f;try{if(!p)return;if(L){c(!0);const l=await s(L,{...h});if(l){const n=(f=l==null?void 0:l.data)==null?void 0:f.map(w=>{var R,q;const A=w==null?void 0:w.parsedJson,v=A!=null&&A.amount_a||A!=null&&A.atob?o==null?void 0:o.tokenA:o==null?void 0:o.tokenB,k=A!=null&&A.amount_b||A!=null&&A.atob?o==null?void 0:o.tokenB:o==null?void 0:o.tokenA;return{...w,type:(R=w.type)!=null&&R.includes("Add")?Re.add:(q=w.type)!=null&&q.includes("Remove")?Re.remove:Re.swap,items:[{amount:Yt(A!=null&&A.amount_a?A==null?void 0:A.amount_a:A==null?void 0:A.amount_in,v==null?void 0:v.decimals).toString(),address:v==null?void 0:v.coin_type,url:v==null?void 0:v.logo_url,symbol:v==null?void 0:v.symbol},{amount:Yt(A!=null&&A.amount_b?A==null?void 0:A.amount_b:A==null?void 0:A.amount_out,k==null?void 0:k.decimals).toString(),address:k==null?void 0:k.coin_type,url:k==null?void 0:k.logo_url,symbol:k==null?void 0:k.symbol}]}});h!=null&&h.cursor?x(w=>[...w,...n||[]]):x(n||[]),u(l==null?void 0:l.nextCursor),d(l==null?void 0:l.hasNextPage),c(!1)}}}catch(l){console.log(l,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ge(()=>{y({cursor:i,limit:10})},[a,L],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:g,apiPoolInfo:o,currentPage:a,onCurrentPageChange:()=>{b(h=>h+1)},hasNextPage:p}}const it={[Re.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Re.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Re.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},yi=({type:t})=>{var s,r,c,g;return e.jsxs(z,{children:[e.jsx(Ce,{xlinkHref:(s=it[t])==null?void 0:s.icon,svgFill:(r=it[t])==null?void 0:r.color,svgHover:(c=it[t])==null?void 0:c.color}),e.jsx(T,{color:"text_caption",children:(g=it[t])==null?void 0:g.title})]})},mi=({items:t,type:s,isReverse:r})=>{var g,x;const{isApp:c}=_e();return t?s===Re.swap?c?e.jsxs(W,{align:"flex-end",gap:"8px",children:[e.jsx(ze,{item:t==null?void 0:t[0]}),e.jsxs(z,{justify:"flex-end",children:[e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(ze,{item:t==null?void 0:t[1]})]})]}):e.jsxs(z,{justify:"flex-end",gap:"8px",children:[e.jsx(ze,{item:t==null?void 0:t[0]}),e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(ze,{item:t==null?void 0:t[1]})]}):c?e.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(g=t==null?void 0:t.filter(a=>!!+a.amount))==null?void 0:g.map(a=>e.jsx(ze,{item:a},a==null?void 0:a.address))}):e.jsx(z,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(x=t==null?void 0:t.filter(a=>!!+a.amount))==null?void 0:x.map(a=>e.jsx(ze,{item:a},a==null?void 0:a.address))}):null},ze=({item:t})=>e.jsxs(z,{gap:"4px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(T,{color:"text_caption",children:Lt(t==null?void 0:t.amount)}),e.jsx(T,{children:J(t==null?void 0:t.symbol,10)})]}),ss=(t,s=!1)=>[{title:e.jsx(T,{children:"Event"}),key:"type",render:({type:r})=>e.jsx(yi,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>e.jsx(mi,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>e.jsx(qr,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>e.jsx(T,{color:"text_caption",children:br(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function hi(){const{getExplorerUrl:t}=Tt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:g,onCurrentPageChange:x,hasNextPage:a}=gi(),{isApp:b}=_e();return e.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(T,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?e.jsx(Ne,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):b?e.jsx(Tr,{columns:ss(t,c==null?void 0:c.isReverse),dataSource:r,loading:s&&g===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(i,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")}}):e.jsx(Fr,{columns:ss(t,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&g===1,onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),a&&e.jsx(gt,{mt:{base:"40px",lg:"20px"},children:e.jsx(be,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:x,children:s?e.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var qt=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(qt||{}),Ms=(t=>(t.volume="vol",t.tvl="pure_tvl",t.fees="fee",t))(Ms||{}),zs=(t=>(t.d="D",t.w="W",t.m="M",t))(zs||{}),qs=(t=>(t.d="day",t.w="wek",t.m="mon",t))(qs||{});const bi={D:40,W:30,M:20};function ji(){const[t,s]=j.useState("Volume"),[r,c]=j.useState("D"),[g,x]=j.useState([]),{apiPoolInfo:a}=P(),[b,i]=j.useState(!0),[u,p]=j.useState(null),{getHistogramData:d}=Br(),{poolAddress:o}=ge(),{getHoverTime:S,time:_}=Mr();j.useLayoutEffect(()=>{x([]),s("Volume"),c("D"),p(null)},[o]);const L=async()=>{if(o)try{i(!0);const n=await d({date_type:qs[r.toLowerCase()],type:Ms[t.toLowerCase()],limit:bi[r],address:o});n&&n.length&&x(n)}catch(n){throw console.error(n,"res-fetchAnalyticsData"),n}finally{i(!1)}};j.useEffect(()=>{L()},[o,t,r]),j.useEffect(()=>{u!=null&&u.date&&S(u==null?void 0:u.date,r)},[u==null?void 0:u.date,r]);const y=n=>{s(n.label),n.label!==t&&x([])},m=n=>{c(n.label),n.label!==r&&x([])},h=j.useMemo(()=>{if(t==="Volume")return{value:a==null?void 0:a.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:a==null?void 0:a.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:a==null?void 0:a.fees24Display,title:"Fees (24H)"}},[t,a==null?void 0:a.volume24Display,a==null?void 0:a.tvlDisplay,a==null?void 0:a.fees24Display]),f=Object.values(qt).map(n=>({label:n})),l=Object.values(zs).map(n=>({label:n}));return{handleChartTabChange:y,handleDateTabChange:m,defaultDisplay:h,chartsTabs:f,dateTypes:l,chartLoading:b,analyticsData:g,hoverData:u,setHoverData:p,currentChartTab:t,currentDateType:r,time:_}}function Ai(){const{isApp:t}=_e(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:g,dateTypes:x,chartLoading:a,analyticsData:b,hoverData:i,setHoverData:u,currentChartTab:p,currentDateType:d,time:o}=ji();return e.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(z,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(Be,{type:"outlineTab",tabList:g,currentTab:p,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(Be,{type:"outlineTab",tabList:x,currentTab:d,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(W,{w:"100%",align:"flex-start",children:[e.jsx(T,{color:"text_caption",fontSize:"24px",children:(i==null?void 0:i.num)!==void 0&&i!==null?H(Qt(i.num)).gte("0.01")||H(Qt(i.num)).equals("0")?`$${ve(i==null?void 0:i.num,2)}`:"<$0.01":c==null?void 0:c.value}),e.jsx(T,{children:i!=null&&i.date?o:c==null?void 0:c.title}),t&&e.jsx(Be,{type:"outlineTab",tabList:x,currentTab:d,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(ee,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(ee,{w:"100%",h:"100%",position:"relative",children:[a&&e.jsx(ee,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Rt,{})}),p===qt.tvl?e.jsx(Er,{data:b,onChangeValue:S=>u(S)}):e.jsx(zr,{data:b,onChangeValue:S=>u(S),pageFrom:"pools"})]})})]})}const Si=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{t(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{t(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{t(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{t(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{t(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{t(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{t(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{t(()=>({tvlLoading:r}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ht=ys(Si);function fi(){const{getBurnPositionAmountByPool:t}=Wr(),{apiPoolInfo:s,contractPoolInfo:r}=P(),[c,g]=j.useState("0"),[x,a]=j.useState("0"),[b,i]=j.useState("0"),[u,p]=j.useState("0"),[d,o]=j.useState(!1),{poolAddress:S}=ge(),{tokenAPrice:_,tokenBPrice:L}=ht(),y=async(m,h)=>{try{o(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:f,totalB:l}=await t(m,h);g(f),a(l),_&&i(H(f).mul(_==null?void 0:_.price).toString()),L&&p(H(l).mul(L==null?void 0:L.price).toString())}catch(f){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",f)}finally{o(!1)}};return Ge(()=>{s&&(r!=null&&r.current_sqrt_price)&&y(s,r==null?void 0:r.current_sqrt_price)},[S,r==null?void 0:r.current_sqrt_price,_==null?void 0:_.price,L==null?void 0:L.price],{wait:500}),{burnAmountA:c,burnAmountB:x,burnAmountAUSD:b,burnAmountBUSD:u,loading:d}}function vi(){const{apiPoolInfo:t}=P(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:g,loading:x}=fi();return H(s).gt(0)||H(r).gt(0)?e.jsxs(he,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(z,{children:[e.jsx(T,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx(Ur,{type:"burnedLiquidity"})]}),e.jsxs(he,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(rs,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:c,loading:x}),e.jsx(rs,{token:t==null?void 0:t.tokenB,amount:r,amountUSD:g,loading:x})]})]}):null}const rs=({token:t,amount:s,amountUSD:r,loading:c})=>e.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{color:"text_caption",fontSize:"16px",children:J(t==null?void 0:t.symbol,10)}),e.jsx(T,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(we,{label:"Amount",labelStyle:{fontSize:"14px"},value:Lt(vt(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(we,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:H(r).gt("0")?`$${ms(vt(r,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function wi(){const{tokenAAmountUSD:t,totalAmountUSD:s}=ht(),r=j.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const g=jr(H(t).div(s).mul(100).toString(),2);return g==="NaN"?"--":g}return"--"},[t,s]),c=j.useMemo(()=>r&&r!=="--"?H(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const nt=t=>t==="--"?"--":`${t}%`;function _i(){var d,o,S,_,L,y;const{apiPoolInfo:t,contractPoolInfo:s}=P(),{getExplorerUrl:r}=Tt(),{poolAddress:c}=ge(),{tokenAAmount:g,tokenBAmount:x,tokenAAmountUSD:a,tokenBAmountUSD:b,tvlLoading:i}=ht(),{tokenARatio:u,tokenBRatio:p}=wi();return e.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(lr,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(we,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(js,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(we,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(t==null?void 0:t.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(we,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(we,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(z,{justify:"flex-start",w:"100%",children:e.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(W,{gap:"16px",w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:(d=t==null?void 0:t.displayTokenA)==null?void 0:d.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(o=t==null?void 0:t.displayTokenA)==null?void 0:o.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:J((S=t==null?void 0:t.displayTokenA)==null?void 0:S.symbol,10)}),i?e.jsx(We,{h:"12px",w:"46px"}):e.jsx(T,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(p):nt(u)})]})]}),e.jsx(ee,{w:"200px",children:e.jsx(dr,{value:Number(t!=null&&t.isReverse?p:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,p].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,p].includes("--")?"background":"primary"}}})}),e.jsxs(z,{gap:"12px",children:[e.jsxs(W,{align:"flex-end",gap:"4px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:J((_=t==null?void 0:t.displayTokenB)==null?void 0:_.symbol,10)}),i?e.jsx(We,{h:"12px",w:"46px"}):e.jsx(T,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(u):nt(p)})]}),e.jsx(Oe,{imageUrl:(L=t==null?void 0:t.displayTokenB)==null?void 0:L.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(y=t==null?void 0:t.displayTokenB)==null?void 0:y.coin_type:""})]})]}),e.jsxs(W,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(is,{loading:i,token:t==null?void 0:t.tokenA,amount:g,amountUSD:a}),e.jsx(is,{loading:i,token:t==null?void 0:t.tokenB,amount:x,amountUSD:b})]})]})]})]})}const is=({token:t,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:g}=Tt();return t?e.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{color:"text_caption",fontSize:"16px",children:J(t==null?void 0:t.symbol,10)}),e.jsx(T,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(js,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(g(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(we,{label:"Amount",labelStyle:{fontSize:"14px"},value:Lt(vt(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(we,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${ve(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function ki(){return e.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(he,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(Ai,{}),e.jsx(_i,{})]}),e.jsx(vi,{}),e.jsx(hi,{})]})}function Ri(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=As(),{manualRefresh:r}=P(),{currentAccount:c,onWalletModal:g}=yt(),{getPositionBaseList:x,getPosRelatedData:a}=Hr(),[b,i]=j.useState(""),{poolAddress:u}=ge(),p=async o=>{const S=await x(o);Array.isArray(S)&&a(S),typeof S=="string"&&i(S)};return j.useEffect(()=>{c!=null&&c.address&&p(c==null?void 0:c.address)},[c==null?void 0:c.address]),j.useEffect(()=>{r&&(c!=null&&c.address)&&p(c==null?void 0:c.address)},[r]),$r({onRpcChange:()=>{c!=null&&c.address&&p(c==null?void 0:c.address)}}),{data:j.useMemo(()=>{if(u){const o=s[u.toLowerCase()||""];return o?o==null?void 0:o.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:b,posBaseListLoading:t,currentAccount:c,onWalletModal:g}}function Ci(){const t=Ze(),{apiPoolInfo:s}=P(),{currentAccount:r,posBaseListLoading:c,data:g,rpcNodeErrorStr:x,onWalletModal:a}=Ri();return e.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((b,i)=>e.jsx(kr,{},i)):g&&(g==null?void 0:g.length)>0?g==null?void 0:g.map((b,i)=>e.jsx(Rr,{positionInfo:b},b==null?void 0:b.posId)):x?e.jsx(Ne,{type:"nodata",text:x}):e.jsx(Ne,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(be,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>t(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):e.jsx(Ne,{type:"nowallet",onboard:()=>a(!0)})})}function Li({apiPoolInfo:t,apiPoolInfoLoading:s,tvlLoading:r,totalTvl:c}){return e.jsxs(he,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(st,{label:"Pool APR",value:e.jsx(Vr,{poolInfo:t,placement:"bottom",children:e.jsxs(z,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(T,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:t!=null&&t.farmingAprDisplay||t!=null&&t.miningAprList&&(t==null?void 0:t.miningAprList.length)>0?"help":"text",children:t==null?void 0:t.feeAndMiningAprDisplay}),(t==null?void 0:t.haveFarming)&&e.jsxs(T,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",t==null?void 0:t.farmingAprDisplay]})]})})}),e.jsx(st,{label:"TVL",value:c&&c!=="--"?`$${ve(c,2)}`:"--",loading:s||r}),e.jsx(st,{label:"Volume (24H)",value:(t==null?void 0:t.volume24Display)||"",loading:s}),e.jsx(st,{label:"Fees (24H)",value:(t==null?void 0:t.fees24Display)||"",loading:s})]})}function Ti(t){var v;const{onClose:s,onSubmit:r,data:{feeTier:c,zapData:g}}=t,{fromToken:x,toToken:a,fromAmount:b,toAmount:i,totalAmount:u,percentMap:p,fromTokenLock:d,toTokenLock:o}=Te(),{lowerTickData:S,upperTickData:_}=Le(),{currentPriceData:L,apiPoolInfo:y}=P(),{setIsChecked:m}=wt(),[h,f]=j.useState(!0),l=j.useMemo(()=>{var k;return((k=y==null?void 0:y.tokenA)==null?void 0:k.coin_type)===(x==null?void 0:x.coin_type)?!h:!!h},[y,x,a,h]),n=j.useMemo(()=>h?`${J(a==null?void 0:a.symbol,10)} per ${J(x==null?void 0:x.symbol,10)}`:`${J(x==null?void 0:x.symbol,10)} per ${J(a==null?void 0:a.symbol)}`,[h,x==null?void 0:x.symbol,a==null?void 0:a.symbol]),w=fs(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:A}=wt();return e.jsxs(ls,{isOpen:!0,onClose:()=>{s(),m(!1)},isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(us,{children:[e.jsx(xs,{children:e.jsx(De,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(ur,{}),e.jsx(os,{textAlign:"center",p:"0px",children:e.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(z,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(z,{children:[e.jsx(hs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:a==null?void 0:a.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:a==null?void 0:a.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(T,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${J(x==null?void 0:x.symbol,10)} - ${J(a==null?void 0:a.symbol,10)}`})]}),e.jsx(Ar,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(z,{gap:"12px",children:[e.jsx(T,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(T,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),g?e.jsx(Pt,{coinA:{amount:g==null?void 0:g.amount,...g==null?void 0:g.token}}):e.jsx(Pt,{coinA:{amount:b,...x},coinB:{amount:i,...a}}),e.jsxs(ee,{w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(Gr,{isActive:!d&&!o,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(W,{gap:"0",border:"1px solid",bg:"bg_secondary",borderColor:"border",borderRadius:"12px",mt:"8px",children:[e.jsxs(z,{justify:"center",h:"48px",w:"100%",gap:"4px",children:[e.jsx(T,{children:"Current Price"}),e.jsx(T,{as:"span",color:"text_caption",children:ct(l?L.reverseCurrentPrice:L==null?void 0:L.currentPrice,6)}),e.jsx(T,{children:n}),e.jsx(be,{variant:"unstyled",onClick:()=>f(!h),children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsx(ee,{h:"1px",w:"calc(100% - 32px)",p:"0 12px",bg:"border"}),e.jsxs(z,{w:"100%",h:"100px",children:[e.jsx(ns,{title:"Min Price",price:ct(l?_==null?void 0:_.reversePrice:S==null?void 0:S.price,6),perText:n}),e.jsx(ps,{orientation:"vertical",h:"40px"}),e.jsx(ns,{title:"Max Price",price:ct(l?S==null?void 0:S.reversePrice:_==null?void 0:_.price,6),perText:n})]})]})]}),g?e.jsx(Bt,{action:"Deposit",inConfirmModal:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{tokenA:x,tokenB:a,isReverse:(x==null?void 0:x.coin_type)!==((v=y==null?void 0:y.tokenA)==null?void 0:v.coin_type),type:"text",percentMap:p}),e.jsx(zt,{loading:!1,totalAmount:u}),!d&&!o&&!((S==null?void 0:S.price)==="0"&&(_==null?void 0:_.price)==="âˆž")&&A=="authenticated"&&e.jsx(Nr,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}})]}),e.jsx(be,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:w,children:"Add Liquidity"})]})})]})]})}const ns=({title:t,price:s,perText:r})=>e.jsxs(W,{flex:"1",children:[e.jsx(T,{children:t}),e.jsx(T,{color:"text_caption",children:s}),e.jsx(T,{children:r})]});function Fi(t,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:g}=Ir(),[x,a]=j.useState(!1),{currentPriceData:b,apiPoolInfo:i,contractPoolInfo:u}=P(),{getContractPoolInfo:p}=vs(),{lowerTickData:d,upperTickData:o}=Le(),{signAndExecuteTransaction:S,getTransactionStatus:_,transactionSuccess:L}=Zr(),{mevProtect:y,maxCapForGas:m,transactionMode:h,customGasPrice:f}=Yr(),{transactionConfirmation:l}=Kr(),{fromAmount:n,setFromAmount:w,fromAmountValue:A,setFromAmountValue:v,toAmount:k,setToAmount:R,toAmountValue:q,setToAmountValue:U,byAmountIn:B,setByAmountIn:O,isTokenA:G,setIsTokenA:I,percentMap:ie,setPercentMap:Y,isFullRange:$,setIsFullRange:Q,fromToken:C,setFromToken:E,toToken:M,setToToken:te,totalAmount:ae,setTotalAmount:xe,fromTokenLock:ne,setFromTokenLock:F,toTokenLock:D,setToTokenLock:Z,setTokenMaxA:se,setTokenMaxB:X,tokenMaxA:le,tokenMaxB:re,autoStakePosition:Ue,liquidityAmount:Ke,setLiquidityAmount:Ye,useZapIn:Fe,setUseZapIn:Qe,confirmModalOpen:jt,setConfirmModalOpen:Et,nftOpen:Os,setNftOpen:Wt,relatedPosId:Gs,setRelatedPosId:Ut}=Te(),{getTokenAmountValue:Xe}=bs(),{getZapDepositTx:Zs,getZapDepositToastInfo:Ks,reCalculateZapData:Ys}=Dr(),{setZapAmount:Qs}=ws();_t(()=>{var V,de;i&&I(((V=i==null?void 0:i.displayTokenA)==null?void 0:V.coin_type)===((de=i==null?void 0:i.tokenA)==null?void 0:de.coin_type))},[i]);const{isWhiteQuoteToken:Xs}=Ls(),{notifiSubscription:Js}=Pr(),{isChecked:Ht}=wt();Ge(()=>{if($){Y({percentA:"50",percentB:"50"});return}if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(d==null?void 0:d.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&b.currentSqrtPrice){if(pe(d.tick).lte(u.current_tick_index)&&pe(o.tick).gt(u.current_tick_index)){const V=Xs(i.tokenA.coin_type)?i.tokenA:i.tokenB,de=V.coin_type===i.tokenA.coin_type,Se=r({amount:tt("1",V.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:de,lowerTick:d==null?void 0:d.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0}),ye=Qr(Se.coinAmountA,Se.coinAmountB,b==null?void 0:b.currentPrice,$);Y(ye);return}if(pe(d.tick).gt(u.current_tick_index)){Y({percentA:"100",percentB:"0"});return}if(pe(o.tick).lte(u.current_tick_index)){Y({percentA:"0",percentB:"100"});return}}},[JSON.stringify(i),b,d==null?void 0:d.tick,o==null?void 0:o.tick,$],{wait:300});const Ps=({amount:V,isTokenA:de,isFullRange:Se})=>{var ye,fe,Me,me;if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&Object.keys(b).length>0&&(d==null?void 0:d.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&C&&M){let N;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&pe(d==null?void 0:d.tick).lte(u==null?void 0:u.current_tick_index)&&pe(o==null?void 0:o.tick).gt(u==null?void 0:u.current_tick_index))N=r({amount:tt(V&&+V?V+"":"1",B?C==null?void 0:C.decimals:M==null?void 0:M.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:de,lowerTick:d==null?void 0:d.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0});else if(ne&&!D){const ce=(M==null?void 0:M.coin_type)===((ye=i==null?void 0:i.tokenA)==null?void 0:ye.coin_type);N=r({amount:tt(V?V+"":"1",M==null?void 0:M.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ce,lowerTick:d==null?void 0:d.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else if(D&&!ne){const ce=(C==null?void 0:C.coin_type)===((fe=i==null?void 0:i.tokenA)==null?void 0:fe.coin_type);N=r({amount:tt(V?V+"":"1",C==null?void 0:C.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ce,lowerTick:d==null?void 0:d.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else ne&&D&&(N=de?{coinAmountA:V?V+"":"1",coinAmountB:"",tokenMaxA:V?V+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:V?V+"":"1",tokenMaxA:"",tokenMaxB:V?V+"":"1"});if(se(N==null?void 0:N.tokenMaxA),X(N==null?void 0:N.tokenMaxB),V)if(pe(V).gt("0"))if(B){const ce=(M==null?void 0:M.coin_type)===((Me=i==null?void 0:i.tokenA)==null?void 0:Me.coin_type)?N==null?void 0:N.coinAmountA:N==null?void 0:N.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,V+""),je=Xe(M==null?void 0:M.coin_type,ce),Ae=pe(oe).plus(je).toString();console.log(ce,oe,je,Ae,"_totalAmountValue"),R(ce||""),v(oe),U(je),xe(Ae)}else{const ce=(C==null?void 0:C.coin_type)===((me=i==null?void 0:i.tokenA)==null?void 0:me.coin_type)?N==null?void 0:N.coinAmountA:N==null?void 0:N.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,ce),je=Xe(M==null?void 0:M.coin_type,V+""),Ae=pe(oe).plus(je).toString();console.log(ce,oe,je,Ae,"_totalAmountValue"),v(oe),U(je),w(ce||""),xe(Ae)}else B?(R(""),v(""),U(""),xe("")):(w(""),v(""),U(""),xe(""));else w(""),R(""),v(""),U(""),xe("");N&&Ye((N==null?void 0:N.liquidityAmount)||"")}};Ge(()=>{Ps({amount:B?n:k,isTokenA:G,isFullRange:$})},[JSON.stringify(i),b,d==null?void 0:d.tick,o==null?void 0:o.tick,n,k,B,G,ne,D,$],{wait:300});const Is=(V,de,Se)=>{O(de),de?w(V):R(V),I(Se!==void 0?Se:!1)},{balanceInfo:er}=xt(C),{balanceInfo:tr}=xt(M);_t(()=>{var V,de;I(B?(C==null?void 0:C.coin_type)===((V=i==null?void 0:i.tokenA)==null?void 0:V.coin_type):(M==null?void 0:M.coin_type)===((de=i==null?void 0:i.tokenA)==null?void 0:de.coin_type))},[i,B,C,M]),j.useEffect(()=>{(d==null?void 0:d.tick)===lt.getMinIndex(Number((d==null?void 0:d.tickSpacing)||0))&&(o==null?void 0:o.tick)===lt.getMaxIndex(Number((o==null?void 0:o.tickSpacing)||0))?Q(!0):Q(!1)},[d==null?void 0:d.tick,o==null?void 0:o.tick]),j.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&ue(d)&&ue(o)&&(pe(d==null?void 0:d.tick).gte(pe(o.tick))?(F(!0),Z(!0)):pe(d==null?void 0:d.tick).gt(u==null?void 0:u.current_tick_index)?(F(!s),Z(!!s)):pe(o.tick).lte(u==null?void 0:u.current_tick_index)?(F(!!s),Z(!s)):(F(!1),Z(!1)))},[d==null?void 0:d.tick,o==null?void 0:o.tick,u,s]);const{currentAccount:sr,onWalletModal:rr}=yt(),ir=fs(()=>{sr?Et(!0):rr(!0)},300,{leading:!0,trailing:!1}),$t=()=>{w(""),R(""),v(""),U(""),xe("")},{fetchAccountBalance:nr}=Cs(),cr=async()=>{var V,de,Se;try{let ye,fe,Me;if(Fe)fe=Ks(),l(fe),ye=await Zs(d==null?void 0:d.tick,o==null?void 0:o.tick,Ue);else{const N=B?n:k,ce=B?C==null?void 0:C.decimals:M==null?void 0:M.decimals,oe=pe(N).mul(Sr.pow(10,ce)).toString(),je=B&&(C==null?void 0:C.coin_type)===((V=i==null?void 0:i.tokenA)==null?void 0:V.coin_type)?!0:(M==null?void 0:M.coin_type)===((de=i==null?void 0:i.tokenA)==null?void 0:de.coin_type)&&!B;let Ae,Je;const Pe=d.tick,Ie=o.tick,He=u==null?void 0:u.current_tick_index;Pe!==void 0&&Ie!==void 0&&He!==void 0&&(He>=Pe&&He<=Ie?(Ae=je?oe:le,Je=je?re:oe):He>Ie?(Ae=0,Je=oe):He<Pe&&(Ae=oe,Je=0));let Vt=[];if(u!=null&&u.index){const{rewarder_infos:K}=u;Vt=(K==null?void 0:K.length)>0&&(K==null?void 0:K.map($e=>$e.coinAddress))||[]}const Nt={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:Ae,amountB:Je,fixAmountA:je,lowerTick:Pe,upperTick:Ie,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:Vt,farmsPoolId:i==null?void 0:i.farmsPoolAddress};if(fe={getShowInfo:(K,$e)=>{const Dt="Add "+[rt(n,C==null?void 0:C.symbol),rt(k,M==null?void 0:M.symbol)].filter(Boolean).join(" and "),et={modalDescriptionText:Dt,toastTitleText:Dt};if(K==="success"){let Ot=n,Gt=k;$e&&(Ot=Xt($e,C)||n,Gt=Xt($e,M)||k);const Zt="Add "+[rt(Ot,C==null?void 0:C.symbol),rt(Gt,M==null?void 0:M.symbol)].filter(Boolean).join(" and ");et.toastDescriptionContent=Zt,et.modalDescriptionText=Zt,et.toastTitleText="Supplied Successful"}return et}},l(fe),Ue){const K=await g(Nt);ye=K==null?void 0:K.tx,Me=K==null?void 0:K.msafeParams}else{const K=await c(Nt);ye=K==null?void 0:K.tx,Me=K==null?void 0:K.msafeParams}}let me=await S(ye,fe,{useDevInspect:!0,useMev:y,showSuccessModal:!1,useFastMode:h==="Fast Mode",maxCapForGas:m,customGasPrice:f,msafeParams:Me});if(me){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",me),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Ht),((Se=me==null?void 0:me.events)==null?void 0:Se.length)===0&&(me=await _(me.digest));const{posId:N,farmsPosId:ce}=fr(me);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:N,farmsPosId:ce}),N?(Wt(!0),Ut(ce||N)):L(fe),Ht){const oe={subscriptionSource:"AddLiquidity",events:me.events};Js(oe)}nr(),$t(),Qs(""),t()}else u&&p(u==null?void 0:u.poolAddress).then(N=>{Ys()})}catch(ye){throw console.error(ye,"handleSubmit ~ error"),new Error(ye)}},ar=()=>{Qe(!Fe)};return j.useEffect(()=>{$t()},[Fe]),{percentMap:ie,handleAmountChange:Is,fromToken:C,setFromToken:E,toToken:M,setToToken:te,byAmountIn:B,setByAmountIn:O,fromAmount:n,fromAmountValue:A,setFromAmount:w,toAmount:k,toAmountValue:q,setToAmount:R,liquidityAmount:Ke,fromBalanceInfo:er,toBalanceInfo:tr,totalAmount:ae,fromTokenLock:ne,toTokenLock:D,handleAdd:ir,confirmModalOpen:jt,setConfirmModalOpen:Et,nftOpen:Os,setNftOpen:Wt,relatedPosId:Gs,handleSubmit:cr,useZapIn:Fe,handleChangeZapIn:ar}}function Bi(){const{fromAmount:t,toAmount:s,fromToken:r,toToken:c,fromTokenLock:g,toTokenLock:x,liquidityAmount:a}=Te(),{currentAccount:b}=yt(),{balanceInfo:i}=xt(r),{balanceInfo:u}=xt(c),p=j.useMemo(()=>{const d={text:"Add Liquidity",disabled:!1};return b!=null&&b.address?!g&&!x&&(!t||!s||t&&!+t||s&&!+s)||g&&!x&&(!s||s&&!+s)||x&&!g&&(!t||t&&!+t)?(d.text="Enter an amount",d.disabled=!0,d):t&&+t&&H(t).gt((i==null?void 0:i.balanceFormat)||0)?(d.disabled=!0,d.text=`Insufficient ${J(r==null?void 0:r.symbol,10)} Balance`,d):s&&+s&&H(s).gt((u==null?void 0:u.balanceFormat)||0)?(d.disabled=!0,d.text=`Insufficient ${J(c==null?void 0:c.symbol,10)} Balance`,d):((!g&&!x&&(!t||!s)||H(a).lte("0"))&&(d.disabled=!0),d):(d.text="Connect Wallet",d.disabled=!1,d)},[b==null?void 0:b.address,t,s,i==null?void 0:i.balanceDisplay,u==null?void 0:u.balanceDisplay,r,c,g,x,a]);return{btnText:p.text,btnDisabled:p.disabled}}function Mi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="âˆž"?ms(1/(1-Number(H(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function zi({rangeTabList:t}){var U;const{apiPoolInfo:s}=P(),{fromToken:r,toToken:c,setFromToken:g,setToToken:x,byAmountIn:a,setByAmountIn:b,setIsFarmRewardsRange:i,setAutoStakePosition:u,fromTokenLock:p,toTokenLock:d,fromAmount:o,toAmount:S,setFromAmount:_,setToAmount:L}=Te(),{lowerTickData:y,upperTickData:m}=Le(),[h,f]=j.useState(),{handleInitTickData:l}=mt(),{getLeverage:n}=Mi();j.useEffect(()=>{var B;if(s){const O=(B=s==null?void 0:s.displayTokenA)==null?void 0:B.coin_type;f(O)}},[s==null?void 0:s.poolAddress]);const w=j.useMemo(()=>{var B;return h===((B=s==null?void 0:s.tokenA)==null?void 0:B.coin_type)},[h,(U=s==null?void 0:s.tokenA)==null?void 0:U.coin_type]),A=j.useMemo(()=>{var B,O,G,I;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":w?`${J((B=s==null?void 0:s.tokenB)==null?void 0:B.symbol,10)} per ${J((O=s==null?void 0:s.tokenA)==null?void 0:O.symbol,10)}`:`${J((G=s==null?void 0:s.tokenA)==null?void 0:G.symbol,10)} per ${J((I=s==null?void 0:s.tokenB)==null?void 0:I.symbol,10)}`},[w,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),v=j.useMemo(()=>{const B=y==null?void 0:y.price,O=m==null?void 0:m.price;return n(B,O)},[y==null?void 0:y.price,m==null?void 0:m.price]),k=B=>{i(B.target.checked),B.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&l(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};j.useEffect(()=>{H(y==null?void 0:y.tick).eq(H(s==null?void 0:s.farmsEffectiveTickLower))&&H(m==null?void 0:m.tick).eq(H(s==null?void 0:s.farmsEffectiveTickUpper))?i(!0):i(!1)},[y==null?void 0:y.tick,m==null?void 0:m.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const R=j.useMemo(()=>(y==null?void 0:y.price)==="0"&&(m==null?void 0:m.price)==="âˆž",[y==null?void 0:y.price,m==null?void 0:m.price]),q=B=>{var O;B&&(B!=null&&B.coin_type)?f(B==null?void 0:B.coin_type):f((O=t==null?void 0:t.find(G=>G.key!==h))==null?void 0:O.key),g(c),x(r),b(!a),a?(L(o),_("")):(_(S),L(""))};return j.useEffect(()=>{s!=null&&s.haveFarming&&u(!(p||d))},[p,d,s==null?void 0:s.haveFarming]),j.useEffect(()=>{a&&p&&!d&&(_(""),L("")),!a&&!p&&d&&(_(""),L("")),a&&!p&&d&&L(""),!a&&p&&!d&&_(""),p&&d&&(_(""),L(""))},[p,d]),{direct:w,perText:A,handleChangeIsFarmRewardsRange:k,onReverseClick:q,leverage:v,currentRangeTab:h,isFullRange:R}}function qi({onClose:t,posId:s,tokenA:r,tokenB:c,fee:g,isReverse:x}){const a=Ze(),[b,i]=j.useState(!0),{lowerTickData:u,upperTickData:p}=Le();return j.useLayoutEffect(()=>{x&&i(!1)},[x]),e.jsxs(ls,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(us,{w:"400px",children:[e.jsx(xs,{children:e.jsxs(z,{justify:"space-between",w:"100%",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(be,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(Ce,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(os,{children:e.jsxs(W,{gap:"36px",children:[e.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(hs,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),e.jsxs(T,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[J(r==null?void 0:r.symbol,10)," - ",J(c==null?void 0:c.symbol,10)]}),e.jsxs(z,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(T,{fontSize:"14px",children:"Fee tier"}),e.jsx(T,{fontSize:"14px",color:"text_highlight",children:g})]})]}),e.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(T,{color:"text_caption",whiteSpace:"nowrap",children:[b?ve(u==null?void 0:u.price,6):ve(p==null?void 0:p.reversePrice,6)," -Â ",b?ve(p==null?void 0:p.price,6):ve(u==null?void 0:u.reversePrice,6)]}),e.jsxs(z,{children:[e.jsxs(z,{gap:"0",children:[e.jsx(T,{color:"primary_gray",children:J(b?x?r==null?void 0:r.symbol:c==null?void 0:c.symbol:x?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),e.jsx(T,{color:"primary_gray",children:"Â perÂ "}),e.jsx(T,{color:"primary_gray",children:J(b?x?c==null?void 0:c.symbol:r==null?void 0:r.symbol:x?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:d=>{Ft(d),i(!b)}})]})]})]})}),e.jsx(xr,{p:"20px 0 0",children:e.jsx(be,{flex:"1",onClick:()=>a(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function Es({perText:t,direct:s,minPriceData:r,maxPriceData:c,isFullRange:g=!1}){const{tickDataLoading:x}=Le(),{handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:i}=mt();return e.jsxs(he,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(es,{title:"Min Price",perText:t,data:r,direct:s,loading:x,handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:i,isFullRange:g}),e.jsx(es,{title:"Max Price",perText:t,data:c,direct:s,loading:x,handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:i,isFullRange:g})]})}const Ws=({minPrice:t,maxPrice:s,perText:r,checked:c,onChange:g,loading:x})=>e.jsxs(z,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(he,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(z,{children:[e.jsx(Cr,{tooltip:e.jsxs(ee,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",e.jsx(ee,{as:"a",color:"primary",onClick:a=>{Ft(a),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(T,{children:"Farm rewards range"})]}),e.jsxs(z,{children:[x?e.jsx(We,{w:"120px",h:"14px"}):e.jsxs(T,{color:"primary_yellow",children:[t,"Â -Â ",s]}),e.jsx(T,{children:r})]})]}),e.jsx(ft,{isChecked:c,onChange:g})]}),Us=({disabled:t,checked:s,onChange:r})=>e.jsxs(z,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(T,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(at,{tooltip:e.jsxs(W,{gap:"4px",align:"flex-start",children:[e.jsx(T,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(T,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:r})}):e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:r})]}),Ei=(t,s)=>({priceRangeMap:null,setPriceRangeMap:r=>{t(()=>({priceRangeMap:r}))},recommendRangesInfo:null,setRecommendRangesInfo:r=>{t(()=>({recommendRangesInfo:r}))},resetDeposit:()=>{t(()=>({priceRangeMap:null,recommendRangesInfo:null}))}}),bt=ys(Ei),Wi=[{label:"24H",key:"day"},{label:"7D",key:"week"},{label:"30D",key:"month"}];function Hs({direct:t,wrapStyle:s={}}){const{priceRangeMap:r}=bt(),[c,g]=j.useState({type:"30D",key:"month"}),{minPriceForDate:x,maxPriceForDate:a,setMinPriceForDate:b,setMaxPriceForDate:i}=P();j.useEffect(()=>{var o,S;let p="",d="";if(ue(r)){const _=(o=r[c==null?void 0:c.key])==null?void 0:o[0],L=t?_:H(1).div(_).toString(),y=(S=r[c==null?void 0:c.key])==null?void 0:S[1],m=t?y:H(1).div(y).toString();p=ve(L,6),d=ve(m,6)}else p="-",d="-";b(p),i(d)},[t,c.key,r]);const{isApp:u}=_e();return e.jsxs(z,{w:"100%",justify:"space-between",...s,children:[e.jsxs(he,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{children:[e.jsx(gt,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(ps,{w:"14px",border:"1px dashed"})}),e.jsxs(T,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),e.jsxs(T,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?x:a,"Â -Â ",t?a:x]})]}),e.jsx(Be,{type:"outlineTab",tabList:Wi,currentTab:c,handleChangeTab:p=>{g({type:p.label,key:p.key})},isActive:(p,d)=>p.key===d.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function Ui(){const[t,s]=j.useState(""),r=(a,b)=>({default:{lower:a,upper:b,sort:3}}),c=a=>({"full range":{lower:lt.getMinIndex(a),upper:lt.getMaxIndex(a),sort:2}}),g=(a,b,i)=>{const u=H(i).mul(b==="unstable"?2:3).toNumber(),p=vr(Number(a),Number(i));return{custom:{lower:H(p).sub(u).toNumber(),upper:H(p).add(u).toNumber(),sort:1}}};return{getRecommendRangesList:async a=>{try{const b=a.farmsEffectTickLower&&a.farmsEffectTickUpper?r(a.farmsEffectTickLower,a.farmsEffectTickUpper):null,i=a.farmsEffectTickLower&&a.farmsEffectTickUpper?{ranges:{},type:""}:a==null?void 0:a.recommendRangesInfo;if(console.log(i,"recommendRangesResult"),i){s(i.type);const u=c(a.tickSpacing),p=g(a.currentTick,i.type,a.tickSpacing),d={...b,...i.ranges,...u,...p},o=Object.entries(d).map(([S,_])=>({key:S,..._})).sort((S,_)=>_.sort-S.sort);return ue(i.ranges)||ue(b)?{rangeList:o,error:!1}:{rangeList:o,error:!0}}else return{rangeList:[],error:!0}}catch(b){return console.error("Error in getRecommendRangesList:",b),{rangeList:[],error:!0}}},poolType:t}}const St=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Hi=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},$i={1:"100%",2:"50%",3:"33.33%",4:"50%"};function $s(t){const{getRecommendRangesList:s}=Ui(),[r,c]=j.useState(),{poolAddress:g,currentTick:x,tickSpacing:a,farmsEffectTickLower:b,farmsEffectTickUpper:i}=t;_e();const{handleInitTickData:u}=mt(),{apiPoolInfo:p,currentRange:d,setCurrentRange:o}=P(),{lowerTickData:S,upperTickData:_,setLowerTickData:L,setUpperTickData:y,setTickDataLoading:m,tickDataLoading:h}=Le(),{recommendRangesInfo:f}=bt(),l=async()=>{var n,w,A;try{d||m(!0);const{rangeList:v,error:k}=await s({...t,recommendRangesInfo:f});if(c(v),k){if(o("custom"),!d&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)){const R=v.find(q=>q.key==="custom");R&&u(R==null?void 0:R.lower,R==null?void 0:R.upper,p)}}else o((n=v[0])==null?void 0:n.key),!d&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)&&u((w=v[0])==null?void 0:w.lower,(A=v[0])==null?void 0:A.upper,p)}catch(v){console.error(v)}finally{m(!1)}};return Ge(()=>{g&&x!==void 0&&a!==void 0&&l()},[g,a,f],{wait:500}),j.useEffect(()=>{if(r&&r.length>0&&ue(S)&&ue(_)){const n=r==null?void 0:r.find(w=>H(w.lower).eq(H(S==null?void 0:S.tick))&&H(w.upper).eq(H(_==null?void 0:_.tick)));n?n.key!==d&&o(n.key):o("custom")}},[S==null?void 0:S.tick,_==null?void 0:_.tick,r]),e.jsx(e.Fragment,{children:e.jsx(or,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((n,w)=>{var A,v;return e.jsx(pr,{label:Hi(n.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?$i[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{n.key!==d&&(o(n.key),p!=null&&p.tokenA&&(p!=null&&p.tokenB)&&u(n.lower,n.upper,p))},bg:n.key==d?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Kt,{decoding:"async",display:n.key===d?"block":"none",src:`/images/${(A=St(n.key,!0))==null?void 0:A.image}`,w:"72px",h:n.key===d?"22px":"0px",fallback:e.jsx(ee,{bg:"background",w:"72px",h:n.key===d?"22px":"0px",borderRadius:"4px"})}),e.jsx(Kt,{decoding:"async",display:n.key===d?"none":"block",src:`/images/${(v=St(n.key,!1))==null?void 0:v.image}`,w:"72px",h:n.key===d?"0px":"22px",fallback:e.jsx(ee,{bg:"background",w:"72px",h:n.key===d?"0px":"22px",borderRadius:"4px"})}),e.jsx(T,{color:n.key==d?"primary":"primary_gray",fontSize:"12px",children:St(n.key).name})]})},n.key)})})})}function Vs(t){var L,y,m,h,f;const[s,r]=j.useState(!1),{displayTokenA:c,displayTokenB:g,feeDisplay:x,clmmPool:a,vaultId:b,isReverse:i,isUnstableVault:u}=t,[p,d]=j.useState(""),{vaultStatsObj:o}=ei(),{getVaultsStats:S}=ti();j.useEffect(()=>{if(ue(o)&&o[a]){const l=o[a];d(l.category=="cetus"?l.vaultsTotalApyDisplay:l.vaultsApyDisplay)}else S()},[o,a]);const{isApp:_}=_e();return e.jsxs(e.Fragment,{children:[e.jsxs(W,{width:_?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(z,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(T,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(z,{children:[e.jsx(we,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(si,{vaultsLstApyDisplay:((L=o[a])==null?void 0:L.vaultsLstApyDisplay)||"",vaultsApyDisplay:((y=o[a])==null?void 0:y.vaultsApyDisplay)||"",vaultsTotalApyDisplay:((m=o[a])==null?void 0:m.vaultsTotalApyDisplay)||"",vaultsAprDisplay:(h=o[a])==null?void 0:h.vaultsAprDisplay,category:(f=o[a])==null?void 0:f.category}),value:p||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(be,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>r(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(z,{w:"100%",mt:"14px",children:e.jsxs(T,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",u?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(Lr,{isOpen:s,setIsOpen:r,displayTokenA:c,displayTokenB:g,feeDisplay:x,clmmPool:a,vaultId:b,isReverse:i,isUnstableVault:u})]})}const Ns=({price:t,perText:s,wrapStyle:r,loading:c})=>e.jsxs(he,{flexDir:{base:"column",lg:"row"},align:"flex-start",...r,children:[e.jsx(T,{children:"Current Price"}),e.jsxs(z,{as:"div",h:"14px",children:[c||t==="--"?e.jsx(We,{w:"66px",h:"14px",display:"inline-block"}):e.jsx(T,{as:"span",color:"text_caption",display:"inline-block",h:"14px",lineHeight:"14px",children:t}),e.jsx(T,{as:"span",display:"inline-block",h:"14px",lineHeight:"14px",children:` ${s}`})]})]});function Vi({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:g,direct:x,perText:a,rangeTabList:b,currentRangeTab:i,fromBalanceInfo:u,toBalanceInfo:p,fromAmountValue:d,toAmountValue:o,handleAmountChange:S,handleAdd:_,isFullRange:L,useZapIn:y,handleChangeZapIn:m}){var D,Z;const{currentPriceData:h,contractPoolInfo:f,apiPoolInfo:l,resetLiquidity:n,contractPoolInfoLoading:w,apiPoolInfoLoading:A,minPriceForDate:v,maxPriceForDate:k}=P(),{lowerTickData:R,upperTickData:q}=Le(),{autoStakePosition:U,setAutoStakePosition:B,isFarmRewardsRange:O,fromAmount:G,toAmount:I,byAmountIn:ie,percentMap:Y,fromToken:$,toToken:Q,totalAmount:C,fromTokenLock:E,toTokenLock:M}=Te(),{poolAddress:te}=ge(),ae=se=>{B(se.target.checked)},xe=j.useMemo(()=>{if(h!=null&&h.currentPrice&&h.pool===te)return h==null?void 0:h.currentPrice},[h==null?void 0:h.currentPrice]),{priceImpactBasedOnMarket:ne}=Ts($,Q,x?"1":Ee(xe),x?Ee(xe):"1",!0),F=j.useMemo(()=>{if(ne&&H(ne).abs().gte(30))return H(ne).gte(30)?`+${H(ne).toFixed(0)}%`:`${H(ne).toFixed(0)}%`},[ne]);return j.useMemo(()=>!!(l!=null&&l.haveFarming)&&!!(l!=null&&l.displayFarmsEffectMaxPrice)&&!!(l!=null&&l.displayFarmsEffectMinPrice),[l==null?void 0:l.haveFarming,l==null?void 0:l.displayFarmsEffectMaxPrice,l==null?void 0:l.displayFarmsEffectMinPrice]),e.jsxs(ee,{w:"100%",children:[e.jsx(De,{fontSize:"14px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx($s,{poolAddress:te,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:l==null?void 0:l.farmsEffectiveTickLower,farmsEffectTickUpper:l==null?void 0:l.farmsEffectiveTickUpper}),A?e.jsx(We,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(Be,{type:"outlineTab",tabList:b,currentTab:i,handleChangeTab:se=>c(se),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(Ns,{price:Ee(x?h==null?void 0:h.currentPrice:h.reverseCurrentPrice,6),perText:a,loading:w,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(Ss,{handleClickRefresh:()=>{},direct:x,minPriceData:x?R:q,maxPriceData:x?q:R,dashedMarkerLine:[v,k]})}),F&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${F}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",tipsFontSize:"12px"}),e.jsx(Hs,{direct:x,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(Es,{perText:a,direct:x,isFullRange:L,minPriceData:x?R:q,maxPriceData:x?q:R}),E&&M&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"})]}),e.jsxs(W,{mb:"20px",gap:"16px",children:[e.jsx(Rs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(T,{color:"text_caption",children:E&&M?"--":g})}),(l==null?void 0:l.haveFarming)&&(l==null?void 0:l.displayFarmsEffectMaxPrice)&&(l==null?void 0:l.displayFarmsEffectMinPrice)&&e.jsx(Ws,{minPrice:x?dt(l==null?void 0:l.displayFarmsEffectMinPrice):ut(l==null?void 0:l.displayFarmsEffectMaxPrice),maxPrice:x?dt(l==null?void 0:l.displayFarmsEffectMaxPrice):ut(l==null?void 0:l.displayFarmsEffectMinPrice),loading:A,perText:a,checked:O,onChange:r})]}),e.jsx(ee,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:l!=null&&l.haveFarming?"1px solid":"none",borderColor:"border",children:e.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsx(De,{fontSize:"14px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsxs(z,{children:[e.jsx(gs,{}),(l==null?void 0:l.haveZap)&&e.jsx(_s,{action:"Deposit",value:y,onChange:m})]})]}),e.jsx(W,{w:"100%",gap:"12px",children:e.jsx(ee,{w:"100%",position:"relative",children:y&&!(E&&M)?e.jsx(ks,{apiPoolInfo:l,action:"Deposit",currentSqrtPrice:h==null?void 0:h.currentSqrtPrice,lowerTick:R==null?void 0:R.tick,upperTick:q==null?void 0:q.tick}):e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:G+"",amountValue:d,loading:!1,onChange:se=>{var X;S(se,!0,($==null?void 0:$.coin_type)===((X=l==null?void 0:l.tokenA)==null?void 0:X.coin_type))},selectable:!1,placeholder:"0.0",token:$,onFocusChange:se=>{var X;se&&+(G+"")&&!ie&&S(G+"",!0,($==null?void 0:$.coin_type)===((X=l==null?void 0:l.tokenA)==null?void 0:X.coin_type))},lock:{isLock:E&&!M,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:I+"",amountValue:o,loading:!1,onFocusChange:se=>{var X;se&&+(I+"")&&ie&&S(I+"",!1,(Q==null?void 0:Q.coin_type)===((X=l==null?void 0:l.tokenA)==null?void 0:X.coin_type))},onChange:se=>{var X;S(se,!1,(Q==null?void 0:Q.coin_type)===((X=l==null?void 0:l.tokenA)==null?void 0:X.coin_type))},selectable:!1,placeholder:"0.0",token:Q,lock:{isLock:!E&&M,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:E&&M,style:{h:"224px"}}})})}),!y&&!!(l!=null&&l.poolAddress)&&!(E&&M)&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[e.jsx(zt,{totalAmount:C,loading:!1}),e.jsx(Mt,{type:"image",percentMap:Y,lockRatio:E&&M,tokenA:$,tokenB:Q,isReverse:($==null?void 0:$.coin_type)!==((D=l==null?void 0:l.tokenA)==null?void 0:D.coin_type)})]}),e.jsx(be,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:_,children:t})]}),y&&e.jsx(Bt,{action:"Deposit",isReverse:($==null?void 0:$.coin_type)!==((Z=l==null?void 0:l.tokenA)==null?void 0:Z.coin_type)}),(l==null?void 0:l.haveFarming)&&e.jsx(Us,{disabled:E||M,checked:U,onChange:ae})]})}),((l==null?void 0:l.isVaults)||(l==null?void 0:l.isUnstableVault))&&e.jsx(W,{mt:"16px",children:e.jsx(Vs,{displayTokenA:l==null?void 0:l.displayTokenA,displayTokenB:l==null?void 0:l.displayTokenB,feeDisplay:l==null?void 0:l.feeDisplay,clmmPool:l==null?void 0:l.poolAddress,vaultId:l==null?void 0:l.vaultId,isReverse:l==null?void 0:l.isReverse,isUnstableVault:l==null?void 0:l.isUnstableVault})})]})}function cs({children:t,title:s,wrapStyle:r={}}){return e.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Ni({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:g,direct:x,perText:a,rangeTabList:b,currentRangeTab:i,fromBalanceInfo:u,toBalanceInfo:p,fromAmountValue:d,toAmountValue:o,handleAmountChange:S,handleAdd:_,isFullRange:L,useZapIn:y,handleChangeZapIn:m,handleSubmit:h}){var se,X;const{currentPriceData:f,contractPoolInfo:l,apiPoolInfo:n,resetLiquidity:w,contractPoolInfoLoading:A,apiPoolInfoLoading:v,minPriceForDate:k,maxPriceForDate:R,currentRange:q}=P();console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ apiPoolInfo:",n);const{lowerTickData:U,upperTickData:B}=Le(),{autoStakePosition:O,setAutoStakePosition:G,isFarmRewardsRange:I,fromAmount:ie,toAmount:Y,byAmountIn:$,percentMap:Q,fromToken:C,toToken:E,totalAmount:M,fromTokenLock:te,toTokenLock:ae}=Te(),{poolAddress:xe}=ge(),ne=le=>{G(le.target.checked)},F=j.useMemo(()=>{if(f!=null&&f.currentPrice&&f.pool===xe)return f==null?void 0:f.currentPrice},[f==null?void 0:f.currentPrice]),{priceImpactBasedOnMarket:D}=Ts(C,E,x?"1":Ee(F),x?Ee(F):"1",!0),Z=j.useMemo(()=>{if(D&&H(D).abs().gte(30))return H(D).gte(30)?`+${H(D).toFixed(0)}%`:`${H(D).toFixed(0)}%`},[D]);return e.jsx(e.Fragment,{children:e.jsxs(z,{gap:"12px",align:"flex-start",children:[e.jsxs(cs,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!b||!b.length?e.jsx(We,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(Be,{type:"outlineTab",tabList:b,currentTab:i,handleChangeTab:le=>c(le),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(W,{w:"100%",gap:"12px",children:[e.jsx(z,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(z,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(Ns,{loading:v,price:ue(f)?Ee(x?f==null?void 0:f.currentPrice:f.reverseCurrentPrice,6):"--",perText:a,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(z,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(W,{gap:"20px",children:[e.jsx(gt,{h:"226px",mt:"10px",children:e.jsx($s,{poolAddress:xe,currentTick:l==null?void 0:l.current_tick_index,tickSpacing:l==null?void 0:l.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper})}),ue(U)&&ue(B)&&e.jsx(e.Fragment,{children:e.jsx(Rs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(T,{color:"text_caption",children:te&&ae?"--":g})})})]}),e.jsxs(W,{w:"100%",gap:"32px",children:[e.jsx(ee,{w:"100%",h:"230px",children:e.jsx(Ss,{handleClickRefresh:()=>{},direct:x,minPriceData:x?U:B,maxPriceData:x?B:U,dashedMarkerLine:[k,R],currentRange:q})}),Z&&e.jsx(ot,{tips:`The current pool price deviates largely from the real-time market price (${Z}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",tipsFontSize:"12px"}),ue(U)&&ue(B)&&e.jsx(Hs,{direct:x,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(Es,{perText:a,direct:x,isFullRange:L,minPriceData:x?U:B,maxPriceData:x?B:U}),te&&ae&&e.jsx(ot,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&e.jsx(Ws,{minPrice:x?dt(n==null?void 0:n.displayFarmsEffectMinPrice):ut(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:x?dt(n==null?void 0:n.displayFarmsEffectMaxPrice):ut(n==null?void 0:n.displayFarmsEffectMinPrice),loading:v,perText:a,checked:I,onChange:r})]})]}),e.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(cs,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(z,{children:(n==null?void 0:n.haveZap)&&e.jsx(_s,{action:"Deposit",value:y,onChange:m})}),e.jsx(ee,{w:"100%",position:"relative",children:y&&!(te&&ae)?e.jsx(ks,{apiPoolInfo:n,action:"Deposit",currentSqrtPrice:f==null?void 0:f.currentSqrtPrice,lowerTick:U==null?void 0:U.tick,upperTick:B==null?void 0:B.tick}):e.jsx(e.Fragment,{children:e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:ie,amountValue:d,loading:!1,onChange:le=>{var re;S(le,!0,(C==null?void 0:C.coin_type)===((re=n==null?void 0:n.tokenA)==null?void 0:re.coin_type))},selectable:!1,placeholder:"0.0",token:C,onFocusChange:le=>{var re;le&&+(ie+"")&&!$&&S(ie+"",!0,(C==null?void 0:C.coin_type)===((re=n==null?void 0:n.tokenA)==null?void 0:re.coin_type))},lock:{isLock:te&&!ae,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:Y,amountValue:o,loading:!1,onFocusChange:le=>{var re;le&&+(Y+"")&&$&&S(Y+"",!1,(E==null?void 0:E.coin_type)===((re=n==null?void 0:n.tokenA)==null?void 0:re.coin_type))},onChange:le=>{var re;S(le,!1,(E==null?void 0:E.coin_type)===((re=n==null?void 0:n.tokenA)==null?void 0:re.coin_type))},selectable:!1,placeholder:"0.0",token:E,lock:{isLock:!te&&ae,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:te&&ae,style:{h:"224px"}}})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs(W,{w:"100%",gap:"8px",children:[!y&&!!(n!=null&&n.poolAddress)&&!(te&&ae)&&e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:n!=null&&n.displayTokenA&&(n!=null&&n.displayTokenB)?"0 8px 8px":"0 16px",children:[e.jsx(be,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:s,isLoading:!1,onClick:_,children:t}),(n==null?void 0:n.displayTokenA)&&(n==null?void 0:n.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{totalAmount:M,loading:!1,valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(Mt,{type:"image",percentMap:Q,lockRatio:te&&ae,tokenA:C,tokenB:E,isReverse:(C==null?void 0:C.coin_type)!==((se=n==null?void 0:n.tokenA)==null?void 0:se.coin_type)})]})]}),y&&e.jsx(Bt,{action:"Deposit",isReverse:(C==null?void 0:C.coin_type)!==((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type)}),(n==null?void 0:n.haveFarming)&&e.jsx(Us,{disabled:te||ae,checked:O,onChange:ne})]}),((n==null?void 0:n.isVaults)||(n==null?void 0:n.isUnstableVault))&&e.jsx(Vs,{displayTokenA:n==null?void 0:n.displayTokenA,displayTokenB:n==null?void 0:n.displayTokenB,feeDisplay:n==null?void 0:n.feeDisplay,clmmPool:n==null?void 0:n.poolAddress,vaultId:n==null?void 0:n.vaultId,isReverse:n==null?void 0:n.isReverse,isUnstableVault:n==null?void 0:n.isUnstableVault})]})]})]})})}function Di({rangeTabList:t,currentFeeTier:s,getList:r,getPrice:c}){const{apiPoolInfo:g}=P(),{zapAmount:x,currentZapToken:a}=ws(),{direct:b,perText:i,handleChangeIsFarmRewardsRange:u,onReverseClick:p,leverage:d,currentRangeTab:o,isFullRange:S}=zi({rangeTabList:t}),{handleAmountChange:_,fromAmountValue:L,toAmountValue:y,fromBalanceInfo:m,toBalanceInfo:h,relatedPosId:f,nftOpen:l,setNftOpen:n,handleAdd:w,handleSubmit:A,useZapIn:v,handleChangeZapIn:k,confirmModalOpen:R,setConfirmModalOpen:q}=Fi(r,b),{btnText:U,btnDisabled:B}=Bi(),{isApp:O}=_e(),G={btnText:U,btnDisabled:B,handleChangeIsFarmRewardsRange:u,onReverseClick:p,leverage:d,direct:b,perText:i,rangeTabList:t,currentRangeTab:o,fromBalanceInfo:m,toBalanceInfo:h,fromAmountValue:L,toAmountValue:y,handleAmountChange:_,handleAdd:w,isFullRange:S,useZapIn:v,handleChangeZapIn:k,handleSubmit:A};return e.jsxs(e.Fragment,{children:[O?e.jsx(Vi,{...G}):e.jsx(Ni,{...G}),R&&e.jsx(Ti,{onClose:()=>q(!1),data:{feeTier:s,zapData:v?{amount:x,token:a}:void 0},onSubmit:A}),l&&f&&ue(g)&&e.jsx(qi,{onClose:()=>n(!1),tokenA:g==null?void 0:g.displayTokenA,tokenB:g==null?void 0:g.displayTokenB,posId:f,fee:g==null?void 0:g.feeDisplay,isReverse:g==null?void 0:g.isReverse})]})}const as=(t,s,r)=>t&&s&&r?H(t).mul(s).div(H(10).pow(r)).toString():"--";function Ds(){var w,A;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:g,setTokenAAmount:x,tokenBAmount:a,setTokenBAmount:b,tokenAAmountUSD:i,setTokenAAmountUSD:u,tokenBAmountUSD:p,setTokenBAmountUSD:d,totalAmountUSD:o,setTotalAmountUSD:S,resetTvlInfo:_,tvlLoading:L,setTvlLoading:y}=ht(),{apiPoolInfo:m,contractPoolInfo:h}=P(),f=async v=>{var k,R;try{const q=(k=Ve(v))==null?void 0:k.full_address,U=q=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":q,{prices:B}=await wr(`${(R=kt)==null?void 0:R.cetus_api}/v2/sui/price?base_symbol_address=${U}`);return B==null?void 0:B[0]}catch(q){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",q),"--"}},{poolAddress:l}=ge(),n=async()=>{var v,k,R,q;y(!0);try{if((v=m==null?void 0:m.tokenA)!=null&&v.coin_type){const U=await f((k=m==null?void 0:m.tokenA)==null?void 0:k.coin_type);U&&s(U)}if((R=m==null?void 0:m.tokenB)!=null&&R.coin_type){const U=await f((q=m==null?void 0:m.tokenB)==null?void 0:q.coin_type);U&&c(U)}}catch(U){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",U)}finally{y(!1)}};return j.useEffect(()=>{_()},[l]),j.useEffect(()=>()=>{_()},[]),j.useEffect(()=>{n()},[m==null?void 0:m.tvl,(w=m==null?void 0:m.tokenA)==null?void 0:w.coin_type,(A=m==null?void 0:m.tokenB)==null?void 0:A.coin_type]),j.useEffect(()=>{h!=null&&h.coinAmountA&&x(H(h==null?void 0:h.coinAmountA).sub((h==null?void 0:h.fee_protocol_coin_a)||"0").toString())},[h==null?void 0:h.coinAmountA,h==null?void 0:h.fee_protocol_coin_a]),j.useEffect(()=>{h!=null&&h.coinAmountB&&b(H(h==null?void 0:h.coinAmountB).sub((h==null?void 0:h.fee_protocol_coin_b)||"0").toString())},[h==null?void 0:h.coinAmountB,h==null?void 0:h.fee_protocol_coin_b]),j.useEffect(()=>{g&&(t!=null&&t.price)&&(m!=null&&m.tokenA.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenA.decimals))&&u(as(g,t==null?void 0:t.price,m==null?void 0:m.tokenA.decimals))},[g,t]),j.useEffect(()=>{a&&(r!=null&&r.price)&&(m!=null&&m.tokenB.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenB.decimals))&&d(as(a,r==null?void 0:r.price,m==null?void 0:m.tokenB.decimals))},[a,r]),j.useEffect(()=>{S(i&&p&&i!=="--"&&p!=="--"?H(i).plus(p).toString():"--")},[i,p]),{tokenAPrice:t,tokenBPrice:r,tokenAAmount:g,tokenBAmount:a,tokenAAmountUSD:i,tokenBAmountUSD:p,totalAmountUSD:o,setTotalAmountUSD:S,tvlLoading:L}}function Oi(){const{fetchByApi:t}=Ct(),{setPriceRangeMap:s,setRecommendRangesInfo:r}=bt();return{fetchPriceRange:async(g,x,a)=>{var b;try{const i=await t(mr,"GET",{pool:g}),u=Object.fromEntries((b=i==null?void 0:i.ranges)==null?void 0:b.map(p=>[p==null?void 0:p.dateType,[Jt.tickIndexToPrice(p==null?void 0:p.lower,x.decimals,a.decimals).toString(),Jt.tickIndexToPrice(p==null?void 0:p.upper,x.decimals,a.decimals).toString()]]));return s(u),r({ranges:i==null?void 0:i.recommender,type:i==null?void 0:i.type}),{rangesWithDateTypeMap:u,recommendRanges:{ranges:i==null?void 0:i.recommender,type:i==null?void 0:i.type}}}catch(i){return console.error("Error in fetchPriceRange:",i),s({}),r({ranges:{},type:""}),{rangesWithDateTypeMap:{},recommendRanges:{ranges:{},type:""}}}}}}function Gi(){const{tab:t,poolAddress:s,from:r,to:c,fee:g}=ge(),{getPoolList:x}=Xr(),[a,b]=j.useState([]),{apiPoolInfo:i,setApiPoolInfo:u,setApiPoolInfoLoading:p,setNetError:d}=P(),o=Ze(),{fetchTokenInfo:S}=Bs(),_=async({poolAddress:L,from:y,to:m})=>{var h,f,l,n;try{p(!0);let w,A;if(L&&L!=="undefined"){const v=await x({pool:L});v&&v.list&&v.list.length?(A=v.list[0],w=await x({coin_type:`${(h=A==null?void 0:A.displayTokenA)==null?void 0:h.coin_type},${(f=A==null?void 0:A.displayTokenB)==null?void 0:f.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):i&&ue(i)?(A=i,w={list:a}):(A={poolAddress:L,displayTokenA:void 0,displayTokenB:void 0},w={list:[]}),p(!1)}else if(y&&m&&y!=="undefined"&&m!=="undefined"&&y!==m){const v=await x({coin_type:`${y},${m}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(v,"res_getPoolList"),v&&v.list&&v.list.length)if(g&&g!=="undefined"){const k=(l=v==null?void 0:v.list)==null?void 0:l.find(R=>H(R==null?void 0:R.feeRate).eq(g));if(k)o(t?`/liquidity?tab=${t}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`);else{const R=At(v==null?void 0:v.list,q=>Number((q==null?void 0:q.tvl)||"0"));o(t?`/liquidity?tab=${t}&poolAddress=${R==null?void 0:R.poolAddress}`:`/liquidity?poolAddress=${R==null?void 0:R.poolAddress}`)}}else{let k=At(v==null?void 0:v.list,R=>Number((R==null?void 0:R.tvl)||"0"));k||(k=At(v==null?void 0:v.list,R=>{var q;return Number(((q=R==null?void 0:R.object)==null?void 0:q.liquidity)||"0")}),k||(k=v==null?void 0:v.list[0])),o(t?`/liquidity?tab=${t}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}else{const k=await S(y),R=await S(m);A={poolAddress:void 0,displayTokenA:k,displayTokenB:R},w={list:[]},p(!1)}}else(!y||y==="undefined")&&m&&m!=="undefined"&&(A={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await S(m)}),(!m||m==="undefined")&&y&&y!=="undefined"&&(A={poolAddress:void 0,displayTokenA:await S(y),displayTokenB:void 0}),w={list:[]},p(!1);w&&(d(!1),b(w==null?void 0:w.list),console.log(A,"setApiPoolInfo"),A&&(A!=null&&A.poolAddress&&L?(A==null?void 0:A.poolAddress)===L&&u(A):u(A))),p(!1)}catch(w){if(w!=null&&w.list&&((n=w==null?void 0:w.list)==null?void 0:n.length)===1){d(!0);const A=w==null?void 0:w.list[0];console.log(w==null?void 0:w.list,"setApiPoolInfo"),u(A),b([]),p(!1)}}};return j.useEffect(()=>{s&&s==="undefined"||_({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:_,relatedPoolList:a}}function Zi(){var o,S,_,L;const{poolAddress:t}=ge(),{apiPoolInfo:s,apiPoolInfoLoading:r}=P();Ct();const{quoteWhiteTokenList:c}=Ls(),{getList:g,relatedPoolList:x}=Gi(),a=j.useMemo(()=>{var m,h;const y=ri(x);return y?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(m=ts)==null?void 0:m.map(f=>{var n,w;const l=((n=y.find(A=>A.feeRate===f.feeRate))==null?void 0:n.title)||f.title;return{...f,title:l,poolAddress:(w=y.find(A=>A.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:l==="Not Created"&&!qe(s==null?void 0:s.tokenA,c)&&!qe(s==null?void 0:s.tokenB,c)}}):(h=ts)==null?void 0:h.map(f=>{var n,w;const l=((n=y.find(A=>A.feeRate===f.feeRate))==null?void 0:n.title)||f.title;return{...f,title:l,poolAddress:(w=y.find(A=>A.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,c)&&!qe(s==null?void 0:s.displayTokenB,c)}}):[]},[JSON.stringify(x),JSON.stringify(c),(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type,(S=s==null?void 0:s.displayTokenB)==null?void 0:S.coin_type]),b=j.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(y=>({label:y==null?void 0:y.symbol,key:y==null?void 0:y.coin_type,isToken:!0,imgInfo:{src:y==null?void 0:y.logo_url,w:"16px",h:"16px",coinType:y?y==null?void 0:y.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(_=s==null?void 0:s.displayTokenA)==null?void 0:_.symbol,(L=s==null?void 0:s.displayTokenB)==null?void 0:L.symbol]),i=j.useMemo(()=>{const y=a==null?void 0:a.find(m=>m.poolAddress===t);return y||s},[JSON.stringify(a),t,JSON.stringify(s)]),{fetchPriceRange:u}=Oi(),p=async y=>{console.log("ðŸš€ ~ setPriceRangeMap ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",y),await u(y,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB)};_t(()=>{t&&t===(s==null?void 0:s.poolAddress)&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)&&p(t)},[t,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);const d=j.useMemo(()=>{const y=[];return s!=null&&s.displayTokenA&&y.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&y.push(s==null?void 0:s.displayTokenB),y},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:g,feeTierList:a,apiPoolInfo:s,rangeTabList:b,currentFeeTier:i,apiPoolInfoLoading:r,quoteWhiteTokenList:c,warningTokenList:d}}var pt=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(pt||{});const ke=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Ki({apiPoolInfo:t}){var ae,xe,ne;const{tab:s,poolAddress:r}=ge(),c=Ze(),[g,x]=j.useState(),[a,b]=j.useState(ke),[i,u]=j.useState(((ae=ke==null?void 0:ke.find(F=>F.key===s))==null?void 0:ae.key)||ke[0].key),[p,d]=j.useState(),[o,S]=j.useState(),{posBaseListGroupByPool:_}=As(),{addFavorites:L,removeFavorites:y}=ni(),{poolFavoriteIds:m}=ci(),{fromToken:h,toToken:f}=Te(),{fetchTokenPrices:l}=bs();_e();const{setFromCoin:n,setToCoin:w,fromCoin:A,toCoin:v}=ai(),{setIsOpen:k}=li(),{isSwapWidgetDisplay:R}=_r(),q=()=>{var F,D;R?k(!0):c(`/swap/${(F=t==null?void 0:t.displayTokenA)==null?void 0:F.coin_type}/${(D=t==null?void 0:t.displayTokenB)==null?void 0:D.coin_type}`)};j.useEffect(()=>(h&&f&&(n(h),w(f)),()=>{n(kt.clmm_swap.from_coin),w(kt.clmm_swap.to_coin)}),[h,f]);const U=j.useMemo(()=>{if(r&&r!=="undefined"){const F=_[r.toLowerCase()||""];return F&&(F!=null&&F.list)&&(F==null?void 0:F.list.length)>0?F==null?void 0:F.list.length:void 0}},[JSON.stringify(_),r]);j.useEffect(()=>{b(ke==null?void 0:ke.map(F=>({...F,num:F.label==="My Positions"&&i==="positions"?U:void 0})))},[U,i]),j.useLayoutEffect(()=>{s&&s!==i&&u(s)},[s]);const B=j.useMemo(()=>m==null?void 0:m.includes(r||""),[JSON.stringify(m),r]),O=F=>{Ft(F),r&&(B?y(r):L(r))},G=j.useMemo(()=>B?{tooltip:"Remove from Watchlist",xlinkHref:"#icon-icon_star_sel",svgFill:"primary_blue",svgHover:"primary"}:{tooltip:"Add to Watchlist",xlinkHref:"#icon-icon_star",svgFill:"text_paragraph",svgHover:"text_caption"},[B]);j.useEffect(()=>{d(t==null?void 0:t.displayTokenA),S(t==null?void 0:t.displayTokenB)},[(xe=t==null?void 0:t.displayTokenA)==null?void 0:xe.coin_type,(ne=t==null?void 0:t.displayTokenB)==null?void 0:ne.coin_type]);const I=()=>{var F,D;c(`/create-pool/${(F=t==null?void 0:t.displayTokenA)==null?void 0:F.coin_type}/${(D=t==null?void 0:t.displayTokenB)==null?void 0:D.coin_type}/${g==null?void 0:g.feeRate}`)},ie=()=>{const F=[];h&&F.push(h.coin_type),f&&F.push(f.coin_type),F.length>0&&l(F)};j.useEffect(()=>{ie()},[h==null?void 0:h.coin_type,f==null?void 0:f.coin_type]);const{getTokenInfo:Y}=Bs(),{setApiPoolInfo:$,apiPoolInfoLoading:Q,netError:C}=P(),{setTotalAmountUSD:E}=Ds(),M=j.useCallback((F,D,Z,se,X,le)=>{var Ue,Ke,Ye,Fe,Qe;const re=Object.keys(pt).find(jt=>jt===i);if(Z!=null&&Z.coin_type||(Ue=Y(X))!=null&&Ue.coin_type)if(Ve(F==null?void 0:F.coin_type).full_address===Ve((Z==null?void 0:Z.coin_type)||((Ke=Y(X))==null?void 0:Ke.coin_type)||"").full_address)d(o),S(p);else{if(Ve(F==null?void 0:F.coin_type).full_address===Ve((D==null?void 0:D.coin_type)||((Ye=Y(se))==null?void 0:Ye.coin_type)||"").full_address)return;c(le?`/liquidity?tab=${re}&from=${F==null?void 0:F.coin_type}&to=${(Z==null?void 0:Z.coin_type)||((Fe=Y(X))==null?void 0:Fe.coin_type)}`:`/liquidity?tab=${re}&from=${(Z==null?void 0:Z.coin_type)||((Qe=Y(X))==null?void 0:Qe.coin_type)}&to=${F==null?void 0:F.coin_type}`),$(null),E("")}else c(le?`/liquidity?tab=${re}&from=${F==null?void 0:F.coin_type}`:`/liquidity?tab=${re}&to=${F==null?void 0:F.coin_type}`),$(null),E("")},[p,o,i]),te=j.useCallback((F,D)=>({value:D||(F?Y(F):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:C,tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!D&&Q}),[C,Q]);return{currentTab:i,setCurrentTab:u,tabList:a,favoriteStyle:G,onChangeFavorites:O,selectedTokenA:p,selectedTokenB:o,setSelectedTokenA:d,setSelectedTokenB:S,onConfirm:I,feeTier:g,setFeeTier:x,refreshMarketPrice:ie,onJump2Swap:q,handleSelectToken:M,getSelectTokenProps:te}}function Yi(){const{currentAccount:t}=yt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c,setCurrentPriceData:g}=P(),{feeTierList:x,currentFeeTier:a,rangeTabList:b,getList:i,quoteWhiteTokenList:u,warningTokenList:p}=Zi(),{poolAddress:d}=ge(),{handleResetRange:o}=mt(),{resetAddLiquidity:S,setFromToken:_,setToToken:L}=Te(),{resetDeposit:y}=bt(),{fetchAccountBalance:m}=Cs(),{getContractPoolInfo:h}=vs(),{getCurrentPrice:f}=Or(),{currentTab:l,setCurrentTab:n,tabList:w,favoriteStyle:A,onChangeFavorites:v,selectedTokenA:k,selectedTokenB:R,setSelectedTokenA:q,setSelectedTokenB:U,onConfirm:B,setFeeTier:O,refreshMarketPrice:G,onJump2Swap:I,handleSelectToken:ie,getSelectTokenProps:Y}=Ki({apiPoolInfo:s});j.useEffect(()=>{ue(s)&&(_(s==null?void 0:s.displayTokenA),L(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const $=async()=>{if(d&&s&&d===(s==null?void 0:s.poolAddress)){const E=await h(d);E&&f(E==null?void 0:E.current_sqrt_price,s)}},Q=()=>{G==null||G(),$==null||$()},C=async E=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),E&&c(!0),d&&d!=="undefined"&&await i({poolAddress:d}),t!=null&&t.address&&await m(),Q(),c(!1)};return j.useEffect(()=>(t!=null&&t.address&&m(),g({}),()=>{o(),S(),r(),y()}),[]),j.useEffect(()=>{d&&(s==null?void 0:s.poolAddress)!==d&&(o(),S(),r(),y()),d&&d===(s==null?void 0:s.poolAddress)&&$()},[d,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:a,rangeTabList:b,quoteWhiteTokenList:u,warningTokenList:p,currentTab:l,setCurrentTab:n,tabList:w,favoriteStyle:A,onChangeFavorites:v,selectedTokenA:k,selectedTokenB:R,setSelectedTokenA:q,setSelectedTokenB:U,onConfirm:B,setFeeTier:O,handleRefresh:C,handleGetPrice:$,onJump2Swap:I,handleSelectToken:ie,getSelectTokenProps:Y}}function bc(){const t=Ze(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,netError:g}=P(),{poolAddress:x,from:a,to:b}=ge(),{feeTierList:i,currentFeeTier:u,rangeTabList:p,quoteWhiteTokenList:d,warningTokenList:o,currentTab:S,setCurrentTab:_,tabList:L,favoriteStyle:y,onChangeFavorites:m,selectedTokenA:h,selectedTokenB:f,onConfirm:l,setFeeTier:n,handleRefresh:w,handleGetPrice:A,onJump2Swap:v,handleSelectToken:k,getSelectTokenProps:R}=Yi(),{isApp:q}=_e(),{isOpen:U,onOpen:B,onClose:O}=gr(),{totalAmountUSD:G,tvlLoading:I}=Ds(),ie=x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB),{tooltip:Y,xlinkHref:$,svgFill:Q,svgHover:C}=y;return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{w:"100%",mt:"20px",children:[e.jsxs(z,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(di,{text:"Pools",onClick:()=>t("/pools")}),ie&&e.jsxs(z,{gap:"8px",children:[e.jsx(at,{placement:"top",tooltip:Y,children:e.jsx(be,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:m,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:C}}},children:e.jsx(Ce,{xlinkHref:$,svgFill:Q,svgHover:C,fontSize:"18px"})})}),e.jsx(at,{placement:"top",tooltip:"Trade",children:e.jsx(be,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:v,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(at,{placement:"top",tooltip:"Refresh",children:e.jsx(ee,{children:e.jsx(ui,{handleRefresh:w,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),e.jsxs(he,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(he,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{gap:"12px",children:[e.jsx(It,{onChange:E=>{k(E,h,f,a,b,!0)},...R(a,h)}),e.jsx(It,{onChange:E=>{k(E,f,h,b,a,!1)},...R(b,f)})]}),e.jsx(ii,{value:u,loading:!u&&r,feeTierList:i,disabled:g,onChange:E=>{E!=null&&E.poolAddress?t(`/liquidity?poolAddress=${E==null?void 0:E.poolAddress}`):(n(E),B())}})]}),ie&&e.jsx(Li,{apiPoolInfo:s,totalTvl:G,apiPoolInfoLoading:r,tvlLoading:I})]}),ie?e.jsxs(e.Fragment,{children:[e.jsxs(he,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(Be,{type:"borderTab",tabList:L,currentTab:S,handleChangeTab:E=>{const M=Object.keys(pt).find(te=>pt[te]===E.label);x&&t(`/liquidity?tab=${M}&poolAddress=${x}`),_(M)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:q?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:q?"14px":"16px",fontWeight:"500"}}),S==="deposit"&&!q&&e.jsx(ee,{mt:"24px",children:e.jsx(gs,{})}),S!=="deposit"&&s&&e.jsxs(he,{w:q?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(T,{children:"Current Price"}),e.jsx(xi,{noCenter:!!q,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:ct(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:q?{w:"100%"}:{}})]})]}),e.jsx(ee,{h:{base:"20px",lg:"8px"}}),S==="deposit"&&e.jsx(Di,{rangeTabList:p,getList:w,getPrice:A,currentFeeTier:u}),S==="positions"&&e.jsx(Ci,{}),S==="analytics"&&e.jsx(ki,{})]}):e.jsx(ee,{mt:"20px",children:!s&&r?e.jsx(gt,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Rt,{})}):e.jsx(Ne,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(W,{children:h&&f?qe(h,d)||qe(f,d)?e.jsxs(e.Fragment,{children:[e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(T,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(be,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{O(),l()},children:"Initialized Pool"})]}):e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(oi,{tokensInfo:o,waringModalCancel:E=>{t("/pools")}}),e.jsx(Jr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:U,onClose:O,onConfirm:l})]})}export{bc as default};
//# sourceMappingURL=Liquidity-C1makM2Q.js.map
