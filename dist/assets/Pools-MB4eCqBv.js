import{j as e,H as g,T as x,aq as $e,C as Ce,I as Ye,a as r,ak as Ie,V as b,q as $,P as es,h as ss,k as ts,m as ns,n as is,f as le,F as js,a9 as Hs,O as ys,S as qe,p as E,W as fs,X as bs,Y as ws,Z as Ss,a7 as vs,$ as Cs,a0 as _s,o as Es,a6 as ks}from"./vendor-BowHGuwE.js";import{u as Ne,a as ms}from"./useFavoritePool-CT_piD4Z.js";import{a as de,B as q,I as ce,J as Qe,K as _e,L as Ns,A as Vs,M as Us,O as Ds,e as Le,f as ve,P as ds,Q as Ms,H as Os,R as te,n as Ve,r as Ge,j as Ys,q as As,d as J,G as xe,U as qs,v as Ze}from"./index-f9FTB66s.js";import{C as os}from"./CheckBox-GVKmW42o.js";import{R as hs}from"./RefreshButton-DY7tVcsV.js";import{S as Ls}from"./SearchInputBlock-D9bFEUys.js";import{u as ls,a as Ts,b as Qs,i as Gs,V as Xs}from"./useStatistics-Da4wSRw-.js";import{u as Ks}from"./useGetPoolList-BNbpBKlG.js";import{u as Xe}from"./global-CLOQGfNJ.js";import{u as Zs}from"./useRequest-BtYwUqkr.js";import{H as Js,T as $s}from"./VolumeChart-CsY4zK7J.js";import{N as ze}from"./NoData-DwPvHKvw.js";import{S as Is}from"./SortDropBlock-BXisHcSK.js";import{T as Oe}from"./TableSortTh-C27QUSss.js";import{u as et}from"./index-BxwScL2w.js";import{A as st}from"./index-JfwxJrdO.js";import{C as Ps,P as tt}from"./CoinPairInfo-zlXLlqOD.js";import{V as nt,F as it,u as zs,a as ot,P as lt}from"./PositionItem-I7tjwlEg.js";import{u as at}from"./VaultsAction-DWFDsjxY.js";import{u as rt}from"./useToken-CZtTqA04.js";import{u as pe,a as xt,b as as}from"./usePositionList-hox-VPav.js";import{V as gs}from"./VTextLabelBox-D2BuZCO_.js";import{u as pt,a as ct}from"./useClaimPosition-BXUMP5rx.js";import{u as Bs}from"./useTransaction-CVvvHIbX.js";import{S as Ee}from"./SingleTokenInfo-COzMVCbU.js";import{L as dt}from"./ExpendItem-CyPmbFwC.js";import{u as ht}from"./useNotifiSubscription-DzA_qNMa.js";import{u as gt}from"./useRpcListener-C89XS3wZ.js";import{u as Rs,P as ut}from"./PositionCurrentPrice-CZzYJ9T6.js";import{u as jt}from"./useAccountBalance-BQbcMZ0A.js";import"./useWrapPoolData-CC4DzncA.js";import"./index-C74N4IyO.js";import"./Loading-9Flk9u0a.js";import"./TooltipIcon-D-nOaE_M.js";import"./index-Bd3DV06H.js";import"./index-V0MTi46y.js";import"./debounce-0tBm08Ev.js";import"./generateCategoricalChart-C961T64n.js";import"./linear-DYpwdEgO.js";import"./FreshProgressV2-DE8w54Qd.js";import"./Pagination-CufVVqQ-.js";import"./EmptyTooltip-Ki83m3Zz.js";import"./_getAllKeysIn-BRRkdSyo.js";import"./YAxis-BWDdog5c.js";import"./PoweredByHaedal-uLEk4Xbu.js";import"./VaultsAprBlock-Br_jZYaV.js";import"./useTokenBalance-CwKvgeU7.js";import"./HTextLabelBox-DOZ7hq9g.js";import"./useInterval-BcJtT0it.js";import"./RemoveBlock-D_VRzYl4.js";import"./usePriceImpact-pgiskPq2.js";import"./index-CNvJ678y.js";import"./useSwapHelper-JnHUDTWW.js";import"./DepositRatio-Cbk9ElDX.js";import"./ErrorTips-rE-cx6yd.js";import"./usePosAdd-DiYLLOqm.js";import"./msafe-oYBkW7LJ.js";import"./TradeInputGroup-Don4H6_L.js";import"./ExamplePieChart-1FKftbN-.js";import"./TradeConfirmAmountInfo-BV7GYfSM.js";import"./TotalAmount-DOLu7mLP.js";import"./useFindBestRouting-20gh77_N.js";import"./useTrack-UsHv9oQ0.js";import"./useSigner-CTk70XRU.js";import"./CopyButton-r6WAZdkk.js";import"./PositionStatus-HkbA4IOm.js";import"./RangeValue-DJx7mHmI.js";import"./useNotifiAlerts-CDazS4xv.js";import"./useXCetusHelper-ZBU_0MNX.js";import"./index-DoMH3iiU.js";import"./usePreviousValue-ChnvxeJQ.js";function Fs({handleIsWatchList:s=()=>{},handleIsDisplayChecked:n=()=>{},onClickIncentiveTypes:c,handleRefresh:l,selectCoinList:i,onClickSelectCoinList:t,onDeleteSelectCoinList:o,isPools:f=!0,isRefreshed:u}){const{isWatchList:j,isAllPools:h,isIncentivizedOnly:k}=Ne(),{isApp:T,windowWidth:S}=de();return e.jsxs(g,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(g,{w:{base:"100%",lg:f?"unset":"100%"},justify:"space-between",children:[e.jsx(Ls,{selectCoinList:i,onClickSelectCoinList:t,onDeleteSelectCoinList:o}),(T||!f)&&e.jsx(hs,{handleRefresh:l,isRefreshed:f?u:void 0})]}),f&&e.jsxs(g,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(q,{w:{base:S<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:S<=350?e.jsx(g,{h:"38px",justify:"center",align:"center",children:e.jsx(ce,{xlinkHref:"#icon-icon_star",svgFill:j?"primary":"text_paragraph"})}):e.jsxs(g,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(os,{checked:j,onClick:()=>{}}),e.jsx(x,{color:j?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[e.jsx(q,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:T?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",gap:T?"4px":"8px",children:[e.jsx(x,{color:k?"text_caption":"text_paragraph",children:T?"Incentivized":"Incentivized Only"}),e.jsx($e,{isChecked:k,onChange:c})]})}),e.jsx(q,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:T?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(g,{h:"100%",justify:"space-between",children:[e.jsxs(x,{color:h?"text_caption":"text_paragraph",children:[" ",T?"All":"All pools"]}),e.jsx($e,{isChecked:h,onChange:n})]})})]}),!T&&e.jsx(hs,{handleRefresh:l,isRefreshed:u})]})]})}const yt=()=>e.jsx(g,{w:"16px",h:"16px",onClick:s=>{_e(s)},children:e.jsx(Qe,{placement:"top",tooltip:e.jsx(x,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(Ce,{children:e.jsx(Ye,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),ft=({coinTypeA:s,coinTypeB:n})=>{const{getShowCoinTag:c}=Ns(),{importTokenList:l}=Vs(),{verifiedTokenMap:i}=Us(),t=r.useMemo(()=>(s||n)&&(i==null?void 0:i.size)>0?c(s)||c(n):!1,[s,n,i,l]);return e.jsx(e.Fragment,{children:t&&e.jsx(g,{w:"20px",h:"20px",onClick:o=>{_e(o)},children:e.jsx(Qe,{placement:"top",tooltip:e.jsx(x,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(Ce,{children:e.jsx(Ye,{w:"100%",h:"100%",src:Ds})})})})})};function bt({poolInfo:s}){const n=Ie(),{addFavorites:c,removeFavorites:l}=ms(),{poolFavoriteIds:i}=Ne(),{goLiquidity:t}=ls(),{setBackUrl:o}=Xe(),f=r.useMemo(()=>i==null?void 0:i.includes((s==null?void 0:s.poolAddress)||""),[JSON.stringify(i),s==null?void 0:s.poolAddress]);return e.jsxs(b,{align:"flex-start",padding:"8px",children:[e.jsx(Je,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{o("/pools"),t(`/liquidity?tab=analytics&poolAddress=${s==null?void 0:s.poolAddress}`,s)}}),e.jsx(Je,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var u,j;n(`/swap/${(u=s==null?void 0:s.displayTokenA)==null?void 0:u.coin_type}/${(j=s==null?void 0:s.displayTokenB)==null?void 0:j.coin_type}`)}}),e.jsx(Je,{text:"Add to Watchlist",xlinkHref:f?"#icon-icon_star_sel":"#icon-icon_star",svgFill:f?"primary":"text_paragraph",onClick:()=>{f?l(s==null?void 0:s.poolAddress):c(s==null?void 0:s.poolAddress)}})]})}const Je=({text:s,xlinkHref:n,svgFill:c="text_paragraph",onClick:l})=>e.jsxs(g,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:i=>{_e(i),l()},children:[e.jsx(ce,{svgFill:c,xlinkHref:n,svgHover:"primary",svgW:s=="Add to Watchlist"?"22px":"20px",svgH:s=="Add to Watchlist"?"22px":"20px",minW:s=="Add to Watchlist"?"22px":"20px",minH:s=="Add to Watchlist"?"22px":"20px",ml:s=="Add to Watchlist"?"-2px":"0px"}),e.jsx(x,{fontSize:"13px",children:s})]});function wt({poolInfo:s}){const{isApp:n}=de(),{goLiquidity:c}=ls(),[l,i]=r.useState(!1),[t,o]=r.useState(!1),{clearVaultsActionData:f}=at();r.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ ActionsBlock.tsx:22 ~ useEffect ~ clearVaultsActionData:"),f()},[l]);const{setBackUrl:u}=Xe();return e.jsxs(g,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:n?"space-between":"flex-end",gap:"8px",children:[s.vaultCategory?e.jsx(Qe,{placement:"bottom-end",tooltip:e.jsx(x,{_hover:{color:"primary"},cursor:"pointer",color:n?"primary":"text_paragraph",children:"Auto"}),showTooltip:t,children:e.jsx(Ce,{w:n?"calc(100%)":"unset",children:e.jsxs($,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:n?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:j=>{j.stopPropagation(),i(!l)},onMouseMove:()=>{o(!0)},onMouseLeave:()=>{o(!1)},children:[e.jsx(ce,{svgFill:n?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),n&&e.jsx(x,{color:n?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,e.jsx($,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{u("/pools"),c(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(es,{isLazy:!0,trigger:n?"click":"hover",placement:n?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(ss,{children:e.jsx(Ce,{onClick:j=>{_e(j)},children:e.jsx($,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(ce,{svgFill:n?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(ts,{children:e.jsx(ns,{borderRadius:"12px",w:"fit-content",children:e.jsx(is,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsx(bt,{poolInfo:s})})})})]}),l?e.jsx(nt,{isOpen:l,setIsOpen:i,displayTokenA:s.displayTokenA,displayTokenB:s.displayTokenB,feeDisplay:s.feeDisplay,clmmPool:s.poolAddress,category:s.vaultCategory,vaultId:s.vaultId,isReverse:s.isReverse},s.vaultId):null]})}function St({miningRewardList:s,farmsRewarderList:n}){const{getTokenListInfo:c}=rt(),[l,i]=r.useState([]);return r.useEffect(()=>{(async()=>{if((s==null?void 0:s.length)>0||(n==null?void 0:n.length)>0)try{let o=[],f=[];if((s==null?void 0:s.length)>0){const u=s==null?void 0:s.map(h=>h==null?void 0:h.coinType),j=await c(u);o=s.map(h=>{const k=j==null?void 0:j.get(h==null?void 0:h.coinType);return{...h,tokenInfo:k,isMining:!0}})}if((n==null?void 0:n.length)>0){const u=n==null?void 0:n.map(h=>h==null?void 0:h.coinType),j=await c(u);f=n.map(h=>{const k=j==null?void 0:j.get(h==null?void 0:h.coinType);return{...h,tokenInfo:k,isFarming:!0}})}i(o.concat(f))}catch(o){console.error("Error processing list:",o)}})()},[s,n]),e.jsx(g,{w:"100%",justify:"flex-end",gap:"4px",children:l.map(t=>{var o,f,u,j,h;return e.jsx(le,{onClick:k=>k.stopPropagation(),children:e.jsx(Qe,{placement:"top",tooltip:e.jsxs(g,{gap:"4px",children:[e.jsx(le,{children:e.jsx(Le,{imageUrl:(o=t==null?void 0:t.tokenInfo)==null?void 0:o.logo_url,w:"24px",h:"24px"})}),(t==null?void 0:t.isMining)&&e.jsxs(x,{color:"primary",display:"inline-block",children:[ve(ds(Ms(t==null?void 0:t.emissionsEveryDay,(f=t==null?void 0:t.tokenInfo)==null?void 0:f.decimals),2))," ",(u=t==null?void 0:t.tokenInfo)==null?void 0:u.symbol," per day in Mining"]}),(t==null?void 0:t.isFarming)&&e.jsxs(x,{color:"primary",display:"inline-block",children:[ve(ds(t==null?void 0:t.emissionsEveryDay,2))," ",(j=t==null?void 0:t.tokenInfo)==null?void 0:j.symbol," per day in Farming"]})]},t==null?void 0:t.coinType),children:e.jsx(Ce,{as:"button",children:e.jsx(Le,{imageUrl:(h=t==null?void 0:t.tokenInfo)==null?void 0:h.logo_url,w:"24px",h:"24px"})})})},t==null?void 0:t.coinType)})})}function vt({isRefreshed:s,handleIsRefreshed:n}){var Pe;const{getStatistics:c}=Ts(),{poolRefreshStatus:l,setPoolRefreshStatus:i,setPoolListLength:t,poolFavoriteIds:o,isWatchList:f,setIsWatchList:u,isIncentivizedOnly:j,setIsIncentivizedOnly:h,isAllPools:k,setIsAllPools:T,poolFavoriteIdsChange:S,setPoolFavoriteIdsChange:p}=Ne(),{getPoolList:X}=Ks(),{getFavoritePoolList:W}=ms(),{goLiquidity:L}=ls(),[I,D]=r.useState({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:20,offset:0,coin_type:"",pool:""}),H=a=>{D(_=>({..._,isListLoading:!0,...a}))},ee=a=>{var _;H({offset:0}),h((_=a.target)==null?void 0:_.checked),T(!1)},ae=a=>{var _;H({offset:0}),T((_=a.target)==null?void 0:_.checked),u(!1),h(!1)},P=()=>{H({offset:0}),T(!1),u(!f),p(!1)};r.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",S,o),f&&S&&(p(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",f),H({offset:0}),u(!0))},[o==null?void 0:o.length,S]);const B=r.useRef(null),ne=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),i("pending"),Ae(1),H({offset:0,isListLoading:!1}),B.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",l),l=="pending"&&i("timeout")},1e4),c()},{selectCoinList:m,setSelectCoinList:Q}=Ne(),y=a=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",a),Q([...m,a])},w=a=>{Q(m.filter(_=>(_==null?void 0:_.coin_type)!==(a==null?void 0:a.coin_type)))},C=20,[ie,O]=r.useState(!0),[N,K]=r.useState(!0),[Z,G]=r.useState("desc"),[V,be]=r.useState({label:"Volume (24H)",value:"vol"}),[M,ke]=r.useState([]),[Ue,Be]=r.useState(0),[me,Ae]=r.useState(1),De=async a=>{var fe,Fe,We,He;const _=(a==null?void 0:a.isListLoading)??!0,se=f,ue=m.length==2?`${(fe=m[0])==null?void 0:fe.coin_type},${(Fe=m[1])==null?void 0:Fe.coin_type}`:m.length==1?`${(We=m[0])==null?void 0:We.coin_type}`:"",{offset:je=0}=a;je==0&&Ae(1),Number(je)>=C?O(!0):K(_);const we=j?["mining","farming"]:["mining","farming","noIncentives"],ye={...a,coin_type:ue,display_all_pools:se?!0:k??!0,offset:je,has_mining:we.includes("mining"),has_farming:we.includes("farming"),no_incentives:we.includes("noIncentives")};console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ query:",ye,k);let Y;try{se?(ye.pools=o,Y=await W(ye)):Y=await X(ye),console.log("ðŸš€ ~  ~ result:",Y),Y&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",Y),Y!=null&&Y.isLocal?(i("error"),ke(Y.list),Be(Y.total),t(Y.total||"0"),Ae(1)):(Number(je)>=C?ke(oe=>oe.concat(Y.list)):ke(Y.list),Be(Y.total),t((Y.total||0).toString()),i("success")),K(!1))}catch(oe){console.log("ðŸš€ ~  ~ error:",oe),oe!=null&&oe.list&&((He=oe==null?void 0:oe.list)==null?void 0:He.length)>0&&(i("error"),ke(oe.list),Be(oe.total),t(""),K(!1))}};Zs(()=>De(I),{refreshDeps:[I,m,f,k,f,j],manual:!1,debounceWait:150}),r.useEffect(()=>{ie&&O(!1)},[M.length]);const{failedTsToast:Ke}=Os();r.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",l),l!=="pending"){const a={linkLabel:"",getShowInfo:()=>({toastTitleText:l=="error"?"Request Error":l=="timeout"?"Please check the network status.":""})};(l=="success"||l=="error")&&clearTimeout(B.current),(l=="error"||l=="timeout")&&Ke(a),n(!0)}},[l]);const{isApp:Re}=de(),Me=a=>{if(console.log("ðŸš€ ~ clickSort ~ item:",a),Re)(a==null?void 0:a.value)!==(V==null?void 0:V.value)&&(H({offset:0,order_by:`-${a==null?void 0:a.value}`}),G("desc"),be(a));else if((a==null?void 0:a.value)==(V==null?void 0:V.value)){H({offset:0,order_by:Z=="desc"?`${a==null?void 0:a.value}`:`-${a==null?void 0:a.value}`});const _=Z=="desc"?"asc":"desc";G(_)}else H({offset:0,order_by:`-${a==null?void 0:a.value}`}),G("desc"),be(a)},d=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],z=d.reduce((a,_)=>(a[_.value]=_,a),{}),R=a=>{const _=a*C;De({...I,offset:_}),Ae(se=>se+1)},U=r.useMemo(()=>{const a=(me-1)*C+(M==null?void 0:M.length);return l!=="error"&&Number(Ue)>a},[Ue,me,C,l,M==null?void 0:M.length]);r.useEffect(()=>(c(),B.current&&(clearTimeout(B.current),B.current=null),()=>{t(""),B.current&&(clearTimeout(B.current),B.current=null)}),[]);const re=et({count:M.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),v=r.useRef(null);r.useEffect(()=>{let a=null;return!N&&v.current&&(a=new IntersectionObserver(_=>{const se=_[0];se&&se.isIntersecting&&U&&!ie&&(console.log("ðŸš€ ~ useEffect ~ entry:",se),R(me))},{threshold:.5,rootMargin:"100px"}),a.observe(v.current)),()=>{a&&a.disconnect()}},[N,me,U,ie]);const he=Ct(Z,V,Me,z,Re),{setBackUrl:Te}=Xe();return e.jsxs(b,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(Fs,{handleIsDisplayChecked:ae,handleIsWatchList:P,onClickIncentiveTypes:ee,handleRefresh:ne,selectCoinList:m,onClickSelectCoinList:y,onDeleteSelectCoinList:w,isRefreshed:s}),e.jsx(le,{h:"1px",w:"100%",bg:"border"}),e.jsxs(b,{w:"100%",position:"relative",gap:"20px",children:[!N&&(M==null?void 0:M.length)==0?e.jsx(ze,{type:"nodata",text:"No pools found",children:e.jsx(x,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):Re?e.jsxs(b,{w:"100%",gap:"4px",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(x,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Is,{sortText:"Sort by",minW:"180px",currentSort:V,sortByList:d,onSortByChange:Me,xlinkHref:Z=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{H({offset:0,order_by:Z=="desc"?`${V==null?void 0:V.value}`:`-${V==null?void 0:V.value}`});const a=Z=="desc"?"asc":"desc";G(a)}})]}),e.jsx(Js,{rowKey:"poolAddress",dataSource:M,columns:he,loading:N,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(a,_)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:a=>{Te("/pools"),L(`/liquidity?poolAddress=${a.poolAddress}`,a)}})]}):N?e.jsx($s,{rowKey:"poolAddress",columns:he,dataSource:M,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):e.jsxs(b,{w:"100%",gap:"0",children:[e.jsx(le,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",h:"36px",columnGap:"12px",p:"0 16px",children:he==null?void 0:he.map((a,_)=>e.jsx(js,{as:"div",align:"center",justify:_===0?"flex-start":"flex-end",children:a.title},a.key))}),e.jsx(le,{w:"100%",h:`${M.length*80}px`,pos:"relative",children:(Pe=re.getVirtualItems())==null?void 0:Pe.map(a=>{const _=M[a.index];return e.jsx(_t,{item:_,columns:he,virtualRow:a,setBackUrl:Te,goLiquidity:L},_==null?void 0:_.poolAddress)})})]}),e.jsx(le,{ref:v,children:ie?e.jsx(Hs,{size:"sm",color:"text_caption"}):""})]})]})}const Ct=(s,n,c,l,i)=>[{title:e.jsx(x,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:t=>{var o,f;return e.jsxs(g,{children:[e.jsx(Ps,{poolInfo:t,symbolEllipsesDecimals:10}),(t==null?void 0:t.haveFarming)&&e.jsx(it,{}),(t==null?void 0:t.haveMining)&&e.jsx(yt,{}),e.jsx(ft,{coinTypeA:(o=t==null?void 0:t.tokenA)==null?void 0:o.coin_type,coinTypeB:(f=t==null?void 0:t.tokenB)==null?void 0:f.coin_type})]})}},{title:e.jsx(Oe,{labelInfo:l.tvl,sortRule:s,sortBy:n,clickSort:t=>c(t)}),key:"tvlDisplay"},{title:e.jsx(Oe,{labelInfo:l.vol,sortRule:s,sortBy:n,clickSort:t=>c(t)}),key:"volume24Display"},{title:e.jsx(Oe,{labelInfo:l.fees,sortRule:s,sortBy:n,clickSort:t=>c(t)}),key:"fees24Display"},{title:e.jsx(x,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:t,farmsRewarderList:o})=>t&&(t==null?void 0:t.length)<=0&&o&&(o==null?void 0:o.length)<=0,render:({miningRewardList:t,farmsRewarderList:o})=>e.jsx(St,{miningRewardList:t,farmsRewarderList:o})},{title:e.jsx(Oe,{labelInfo:l.totalApr,sortRule:s,sortBy:n,tooltip:{content:"Estimated according to trading activity in the past 24 hours plus mining and farming rewards"},clickSort:t=>c(t),justifyContent:"flex-end"}),key:"apr24h",render:t=>e.jsx(st,{poolInfo:t,placement:i?"auto-start":"top"})},{title:e.jsx(x,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:t=>e.jsx(wt,{poolInfo:t})}],_t=({item:s,columns:n,virtualRow:c,goLiquidity:l,setBackUrl:i})=>e.jsx(le,{as:"div",pos:"absolute",top:`${c.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>{i("/pools"),l(`/liquidity?poolAddress=${s.poolAddress}`,s)},cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",_hover:{bg:"primary_opacity.10"},children:n==null?void 0:n.map((t,o)=>e.jsx(js,{align:"center",justify:o===0?"flex-start":"flex-end",children:t!=null&&t.render?t==null?void 0:t.render(s):e.jsx(x,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:s==null?void 0:s[t==null?void 0:t.key]})},t.key))}),kt="data:image/png;base64,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",mt="/assets/pool_bg-DIChGQZi.png",At=({posInfo:s})=>{var o,f,u,j,h,k,T,S;const[n,c]=r.useState(!1),{posApiPoolData:l}=pe(),i=(o=l[s==null?void 0:s.clmmPool])==null?void 0:o.haveMining,t=(f=l[s==null?void 0:s.clmmPool])==null?void 0:f.haveFarming;return e.jsx(le,{p:"12px 0",onClick:p=>_e(p),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:e.jsxs(es,{isLazy:!0,isOpen:n,children:[e.jsx(ss,{children:e.jsxs(Ce,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:[i&&e.jsx(Ye,{w:"14px",h:"14px",src:"/images/icon_mining.png",mr:"4px"}),t&&e.jsx(Ye,{w:"14px",h:"14px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(x,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:te(s==null?void 0:s.totalRewardUsd,2)})]})}),n&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(ts,{children:e.jsx(ns,{zIndex:"2",w:"fit-content",children:e.jsx(is,{children:e.jsxs(b,{align:"flex-start",minW:"300px",children:[((u=s==null?void 0:s.pendingFeesList)==null?void 0:u.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(g,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(x,{fontSize:"12px",children:"Fees"}),e.jsxs(x,{color:"primary",children:[" ",te(s==null?void 0:s.feeOwedUsd,2)]})]}),(j=s==null?void 0:s.pendingFeesList)==null?void 0:j.map(p=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",p),e.jsxs(g,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ee,{token:p.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:ve(p==null?void 0:p.amount,6)}),e.jsx(x,{fontSize:"12px",children:te(p==null?void 0:p.amountUSD,2)})]})]},p==null?void 0:p.coin_address)))]}),((h=s==null?void 0:s.pendingRewarderList)==null?void 0:h.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(g,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(x,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(x,{color:"primary",children:[" ",te(s==null?void 0:s.rewarderUsd,2)]})]}),(k=s==null?void 0:s.pendingRewarderList)==null?void 0:k.map(p=>e.jsxs(g,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ee,{token:p.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:ve(p==null?void 0:p.amount,6)}),e.jsx(x,{fontSize:"12px",children:te(p==null?void 0:p.amountUSD,2)})]})]},p==null?void 0:p.coin_address))]}),((T=s==null?void 0:s.pendingFarmsList)==null?void 0:T.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(g,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(x,{fontSize:"12px",children:"Farming rewards"}),e.jsxs(x,{color:"primary",children:[" ",te(s==null?void 0:s.farmsUsd,2)]})]}),(S=s==null?void 0:s.pendingFarmsList)==null?void 0:S.map(p=>{var X;return e.jsxs(g,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ee,{token:p.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:ve(p==null?void 0:p.amount,6)}),e.jsx(x,{fontSize:"12px",children:te(p==null?void 0:p.amountUSD,2)})]})]},(X=p==null?void 0:p.token)==null?void 0:X.coin_type)})]})]})})})})]})})};function rs({posInfo:s,onClickCheckBox:n,checked:c,pageFrom:l,cursor:i="pointer"}){var h;const{getClmmPosName:t}=xt(),{posPoolsOriginalData:o}=pe(),f=r.useMemo(()=>{var k;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const T=(k=o==null?void 0:o[s==null?void 0:s.clmmPool])==null?void 0:k.index;return t(s==null?void 0:s.index,T)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,o]),{posPoolsRelatedData:u}=pe(),j=((h=u[s==null?void 0:s.posId])==null?void 0:h.displayFee)+"%";return e.jsxs(q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(g,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(tt,{poolInfo:{...s,feeDisplay:j},symbolEllipsesDecimals:10}),e.jsx(x,{fontSize:"12px",color:"primary_gray",children:f})]}),n&&e.jsx(os,{cursor:i,checked:c||!1,onClick:()=>n(s)})]}),l=="pendingYieldModal"?e.jsxs(g,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(x,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(At,{posInfo:s})]}):e.jsxs(g,{justify:"space-between",p:"0 16px",children:[e.jsx(x,{color:"primary_gray",children:"Liquidity"}),e.jsx(dt,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:l!="lpBurnNext"})]})]})}function Tt({onClose:s,currentLockItem:n}){var H,ee,ae,P,B,ne,m,Q;const{currentAccount:c}=Ve(),{signAndExecuteTransaction:l}=Bs(),{getBurnTxPayload:i}=pt(),{getPositionBaseList:t,getPosRelatedData:o}=as(),{posLiquidityData:f}=pe(),[u,j]=r.useState(!1),[h,k]=r.useState(""),[T,S]=r.useState(!1),p=y=>{const C=y.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");k(C),console.log("ðŸš€ ~ inputChange ~ e:",y.target.value,y.target.value.toLowerCase()),y.target.value.toLowerCase()=="lock my liquidity forever"?S(!0):S(!1)},{getTokenAmountValue:X}=Ge(),W=f[n==null?void 0:n.posId],L=X((H=n==null?void 0:n.displayTokenA)==null?void 0:H.coin_type,W==null?void 0:W.displayCoinAmountA,"--"),I=X((ee=n==null?void 0:n.displayTokenB)==null?void 0:ee.coin_type,W==null?void 0:W.displayCoinAmountB,"--"),D=async()=>{console.log("ðŸš€ ~ currentLockItem:",n),j(!0);try{const y=i(n);console.log("ðŸš€ ~ toBurn ~ tx:",y);const w=await l(y,{getShowInfo:C=>{var O,N;const ie={modalDescriptionText:`${(O=n==null?void 0:n.displayTokenA)==null?void 0:O.symbol} - ${(N=n==null?void 0:n.displayTokenB)==null?void 0:N.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",C),ie}});if(console.log("ðŸš€ ~ toBurn ~ res:",w),w){const C=await t(c==null?void 0:c.address);o(C),s()}j(!1)}catch(y){j(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",y)}};return e.jsxs(b,{w:"100%",gap:"12px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(x,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(x,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(b,{w:"100%",children:[e.jsx(rs,{posInfo:n,pageFrom:"lpBurnNext"}),e.jsx(q,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(q,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(b,{gap:"16px",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsxs(g,{children:[e.jsx(Le,{imageUrl:(ae=n==null?void 0:n.displayTokenA)==null?void 0:ae.logo_url,w:"20px",h:"20px",coinType:(P=n==null?void 0:n.displayTokenA)==null?void 0:P.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(x,{color:"text_caption",children:[W==null?void 0:W.displayCoinAmountA," ",(B=n==null?void 0:n.displayTokenA)==null?void 0:B.symbol]})]}),e.jsx(x,{color:"text_caption",children:te(L,2)})]}),e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsxs(g,{children:[e.jsx(Le,{imageUrl:(ne=n==null?void 0:n.displayTokenB)==null?void 0:ne.logo_url,w:"20px",h:"20px",coinType:(m=n==null?void 0:n.displayTokenB)==null?void 0:m.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(x,{color:"text_caption",children:[W==null?void 0:W.displayCoinAmountB," ",(Q=n==null?void 0:n.displayTokenB)==null?void 0:Q.symbol]})]}),e.jsx(x,{color:"text_caption",children:te(I,2)})]})]})})})]}),e.jsxs(g,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(ce,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(x,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(q,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(x,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(x,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(q,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(ys,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:h,onChange:p})})]}),e.jsxs(b,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx($,{isLoading:u,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!T||u,onClick:D,children:"Confirm"}),e.jsx($,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function Pt({onClose:s,onClickLock:n,currentLockItem:c,onClickCheckBox:l}){const{currentAccount:i,onWalletModal:t}=Ve(),{fullRangePosBaseList:o,fullRangePosBaseListLoading:f}=pe();return e.jsxs(b,{w:"100%",gap:"20px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(b,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:i!=null&&i.address?f?[{},{}].map((u,j)=>e.jsx(Ws,{},j)):(o==null?void 0:o.length)>0?o==null?void 0:o.map(u=>e.jsx(rs,{posInfo:u,checked:(u==null?void 0:u.posId)==(c==null?void 0:c.posId),onClickCheckBox:j=>l(j),pageFrom:"lpBurnPrev"},u==null?void 0:u.posId)):e.jsxs(q,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ze,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(x,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ze,{type:"nowallet",onboard:()=>t(!0),bg:"none",border:"none"})}),(i==null?void 0:i.address)&&e.jsxs(b,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx($,{disabled:Object.values(c).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:n,children:"Lock Liquidity"}),e.jsx($,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Ws=()=>e.jsxs(q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(g,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(g,{gap:"0",children:[e.jsx(qe,{size:"9"}),e.jsx(qe,{size:"9"}),e.jsx(b,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(E,{height:"4",width:"100px"})})]})}),e.jsx(le,{w:"100%",p:"16px",children:e.jsx(E,{height:"5",width:"250px"})})]});function zt({isOpen:s,onClose:n}){const[c,l]=r.useState(!1),[i,t]=r.useState({});r.useEffect(()=>{t({}),l(!1)},[s]);const o=u=>{(u==null?void 0:u.posId)==(i==null?void 0:i.posId)?t({}):t(u)},{isApp:f}=de();return e.jsxs(fs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:n,isCentered:!0,children:[e.jsx(bs,{}),e.jsxs(ws,{minWidth:f?"300px":"482px",children:[e.jsx(Ss,{children:e.jsx(vs,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(Cs,{}),e.jsxs(_s,{p:"16px 16px 0",textAlign:"center",children:[!c&&e.jsx(Pt,{onClose:n,currentLockItem:i,onClickCheckBox:u=>o(u),onClickLock:()=>l(!0)}),c&&e.jsx(Tt,{onClose:n,currentLockItem:i})]})]})]})}function Bt({isRefreshed:s}){var T;const{tab:n}=zs(),c=Ie(),[l,i]=r.useState(!1),{statisticsData:t}=Qs(),{poolListLength:o}=Ne(),{showPosListLength:f}=pe(),u=r.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",o),[{label:"Pools",value:"pools",num:o,imgInfo:{src:Gs,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:f,imgInfo:{src:kt,w:"22px",h:"22px"}}]),[o,f]),{isApp:j}=de(),[h,k]=r.useState(!1);return e.jsxs(b,{w:"100%",children:[e.jsxs(g,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(b,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(x,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(b,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:mt,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(gs,{wrapStyle:{alignItems:j?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(t==null?void 0:t.totalValueLocked)||"",isLoading:!t}),e.jsx(gs,{wrapStyle:{alignItems:j?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(t==null?void 0:t.cumulativeVolume)||"",isLoading:!t})]})]}),e.jsx(le,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(Xs,{statisticsData:t,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(g,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Ys,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:u,currentTab:((T=u==null?void 0:u.find(S=>(S==null?void 0:S.value)===n))==null?void 0:T.label)||"Pools",handleChangeTab:S=>{c(`/pools?tab=${S.value}`)}}),e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[n=="positions"?e.jsx(Es,{isOpen:h,label:e.jsx(x,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx($,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),onClick:()=>{k(!1),i(!0)},children:"LP Burn"})}):e.jsx($,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>c("/create-pool"),children:"Create a new pool"}),e.jsx($,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>c("/select-pool"),children:"Add Liquidity"})]})]}),l&&e.jsx(zt,{isOpen:l,onClose:()=>i(!1)})]})}const Rt="/assets/tvl_bg-D80TUrdU.png",Ft="/assets/yield_bg-CcCC1tTK.png";function Wt({isOpen:s,claimLoading:n,onClose:c,changeClaimLoading:l}){const[i,t]=r.useState(!1),{coinPriceObj:o}=As(),{getPosRelatedData:f,getPositionBaseList:u}=as(),{signAndExecuteTransaction:j}=Bs(),{currentAccount:h}=Ve(),{getBatchHarvestFeeAndRewardsTxPayload:k}=ct(),{getTokenAmountValue:T}=Ge(),[S,p]=r.useState([]),[X,W]=r.useState(!0),[L,I]=r.useState(!0),[D,H]=r.useState(.01),[ee,ae]=r.useState([]),[P,B]=r.useState([]),[ne,m]=r.useState(""),[Q,y]=r.useState(""),[w,C]=r.useState([]),{myPosYieldValue:ie,posBaseList:O,posBaseListLoading:N,posFeeDataLoading:K,posRewardsDataLoading:Z,farmsPosRewardsDataLoading:G,posFeeData:V,posRewardsData:be,farmsPosRewardsData:M}=pe(),ke=d=>{const z=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");d.target.value=d.target.value.replace(z,"$1"),H(d.target.value)},Ue=()=>{(!D||D<.01)&&H(.01)},Be=N||K||Z||G;r.useEffect(()=>{const d=[];let z="0";const R=[];if((O==null?void 0:O.length)>0&&!N&&!K&&!Z&&!G){O.forEach((v,he)=>{var Fe,We,He,oe,xs,ps,cs;let Te="0",Pe="0",a="0",_="0",se="0",ue="0";const je=[],we=[],ye=[];if(((Fe=Object.values(V))==null?void 0:Fe.length)>0){const F=V[v==null?void 0:v.posId],A=T((We=v==null?void 0:v.displayTokenA)==null?void 0:We.coin_type,F==null?void 0:F.displayFeeOwedA,"--"),ge=T((He=v==null?void 0:v.displayTokenB)==null?void 0:He.coin_type,F==null?void 0:F.displayFeeOwedB,"--");Te=J(Te).plus((F==null?void 0:F.displayFeeOwedA)||0).plus((F==null?void 0:F.displayFeeOwedB)||0).toString(),A!=="--"&&ge!=="--"&&(_=J(A).plus(ge).toString()),we.push({coin_address:xe((oe=v==null?void 0:v.displayTokenA)==null?void 0:oe.coin_type,!1),amount:F==null?void 0:F.displayFeeOwedA,amountUSD:A,token:v==null?void 0:v.displayTokenA},{coin_address:xe((xs=v==null?void 0:v.displayTokenB)==null?void 0:xs.coin_type,!1),amount:F==null?void 0:F.displayFeeOwedB,amountUSD:ge,token:v==null?void 0:v.displayTokenB})}if(((ps=Object.values(be))==null?void 0:ps.length)>0){const F=be[v==null?void 0:v.posId];(F==null?void 0:F.length)>0&&F.forEach(A=>{var ge;if(Pe=J(Pe).plus(A.display_amount_owed||0).toString(),Number(A==null?void 0:A.display_amount_owed)>0){const Se=T(A==null?void 0:A.token.coin_type,A.display_amount_owed);Se!=="--"&&(se=J(se).plus(Se).toString()),je.push({coin_address:xe((ge=A==null?void 0:A.token)==null?void 0:ge.coin_type,!1),amount:A.display_amount_owed,amountUSD:Se,token:A==null?void 0:A.token})}})}if(((cs=Object.values(M))==null?void 0:cs.length)>0){const F=M[v==null?void 0:v.id];(F==null?void 0:F.length)>0&&F.forEach(A=>{var ge;if(a=J(a).plus(A.display_amount_owed||0).toString(),Number(A==null?void 0:A.display_amount_owed)>0){const Se=T(A==null?void 0:A.token.coin_type,A.display_amount_owed);Se!=="--"&&(ue=J(ue).plus(Se).toString()),ye.push({coin_address:xe(((ge=A==null?void 0:A.token)==null?void 0:ge.coin_type)||"",!1),amount:A.display_amount_owed,amountUSD:Se,token:A==null?void 0:A.token})}})}const Y=J(se).plus(_).plus(ue).toString(),fe=(J(Te).gt(0)||J(Pe).gt(0)||J(a).gt(0))&&Number(Y)==0?"--":Y;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Y,fe),z=J(z).plus(se).plus(_).plus(ue).toString(),Number(fe)!==0&&R.push(v),L&&Number(fe)>Number(D)&&d.push({...v,totalRewardUsd:fe,pendingRewarderList:je,pendingFeesList:we,pendingFarmsList:ye,rewarderUsd:se,feeOwedUsd:_,farmsUsd:ue}),L||d.push({...v,totalRewardUsd:fe,pendingRewarderList:je,pendingFeesList:we,pendingFarmsList:ye,rewarderUsd:se,feeOwedUsd:_,farmsUsd:ue})}),ae(R);const U=d.filter(v=>Number(v.totalRewardUsd)!==0);B(U),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",U,P),L?(U==null?void 0:U.length)!==d.length?m(""):m("all"):(U==null?void 0:U.length)!==R.length?m(""):m("all");const re=d.sort((v,he)=>he.totalRewardUsd-v.totalRewardUsd);p(re),W(!1)}},[D,O,L,N,K,Z,G,o]);const{calculatePendingYield:me}=Rs();r.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",P),(P==null?void 0:P.length)>0){const{total:d,rewardAndFeeList:z}=me(P,V,be,M);console.log("ðŸš€ ~ useEffect ~ total:",P,d,z),y(d),C(z)}else y(""),C([])},[P==null?void 0:P.length,V,be,M]);const Ae=d=>{if(console.log("ðŸš€ ~ selectItem ~ item:",d),Number(d==null?void 0:d.totalRewardUsd)<=0)return;const z=P,R=(z==null?void 0:z.filter(U=>(U==null?void 0:U.posId)!==(d==null?void 0:d.posId)))||[];z!=null&&z.some(U=>(U==null?void 0:U.posId)===(d==null?void 0:d.posId))||R.push(d),console.log("ðŸš€ ~ selectItem ~ updatedList:",R),B(R),L?(R==null?void 0:R.length)!==(S==null?void 0:S.length)?m(""):m("all"):(R==null?void 0:R.length)!==(ee==null?void 0:ee.length)?m(""):m("all")};r.useEffect(()=>{H(.01),t(!1),I(!0)},[s]);const De=()=>{if(ne=="all")m(""),B([]);else{m("all");const d=P,z=Object.fromEntries(P.map(R=>[R==null?void 0:R.posId,R]));S.forEach(R=>{!z[R==null?void 0:R.posId]&&Number(R.totalRewardUsd)!==0&&d.push(R)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",z,d),B(d)}},{fetchAccountBalance:Ke}=jt(),Re=async()=>{l(!0);try{const d=Object.fromEntries(P.map(re=>[re==null?void 0:re.posId,re==null?void 0:re.pendingRewarderList])),{tx:z,txb:R}=await k(P,d,h==null?void 0:h.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",z);const U=await j(R,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});if(console.log("ðŸš€ ~ toClaimYield ~ res:",U),U){Ke();const re=await u(h==null?void 0:h.address);f(re)}l(!1)}catch(d){l(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",d)}finally{c()}},{isApp:Me}=de();return e.jsxs(fs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:c,isCentered:!0,children:[e.jsx(bs,{}),e.jsxs(ws,{minWidth:Me?"300px":"446px",children:[e.jsx(Ss,{children:e.jsx(vs,{fontWeight:"500",fontSize:"16px",children:i?"Claim Yield":"Details"})}),e.jsx(Cs,{}),e.jsx(_s,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(le,{children:[e.jsxs(b,{w:"100%",children:[e.jsx(le,{w:"100%",p:"0 16px",children:e.jsx(b,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(E,{isLoaded:!Be,children:e.jsxs(b,{gap:"4px",align:"center",children:[e.jsx(x,{color:"primary_gray",children:i?"Total Claim":"Pending Yield"}),e.jsx(x,{color:"primary",fontSize:"20px",fontWeight:"500",children:te(i?Q:ie,2)})]})})})}),!i&&e.jsxs(g,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(x,{color:"text_caption",children:"Position"}),e.jsxs(g,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx($e,{isChecked:L,onChange:()=>I(!L)}),e.jsx(x,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(q,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(ys,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${D}`,onChange:ke,onBlur:Ue})})]})]}),e.jsx(b,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(S==null?void 0:S.length)>2?"16px":"20px",mr:"-4px",children:i?w==null?void 0:w.map(d=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",d),e.jsx(q,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(Ee,{token:d==null?void 0:d.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:ve(d==null?void 0:d.amount,6)}),e.jsxs(x,{children:["(",te(d==null?void 0:d.amountUSD,2),")"]})]})]})},d==null?void 0:d.coin_address))):(S==null?void 0:S.length)>0?S==null?void 0:S.map(d=>e.jsx(rs,{posInfo:d,onClickCheckBox:z=>Ae(z),pageFrom:"pendingYieldModal",cursor:Number(d==null?void 0:d.totalRewardUsd)<=0?"not-allowed":"pointer",checked:P.some(z=>(z==null?void 0:z.posId)===(d==null?void 0:d.posId))},d==null?void 0:d.posId)):X?[{},{}].map((d,z)=>e.jsx(Ws,{},z)):e.jsx(ze,{type:"nodata"})}),i?e.jsx(g,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(q,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>t(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(g,{justify:"center",gap:"4px",children:[e.jsx(ce,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(x,{children:"Back"})]})})}):e.jsx(le,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(g,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(b,{gap:"4px",align:"flex-start",children:[e.jsx(x,{color:"primary_gray",children:"Amount selected"}),e.jsx(x,{color:"primary",fontSize:"18px",fontWeight:"500",children:te(Q,2)})]}),e.jsxs(g,{children:[e.jsx(x,{color:"text_caption",children:"Select All"}),e.jsx(os,{checked:ne=="all",onClick:De})]})]})})]}),i?e.jsx($,{isLoading:n,disabled:(w==null?void 0:w.length)==0||n,w:"100%",h:"52px",fontWeight:"500",onClick:Re,children:"Confirm"}):e.jsx($,{disabled:Number(Q)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>t(!0),children:"Claim Yield"})]})})]})]})}const us=({yieldList:s})=>{const[n,c]=r.useState(!1),{myPosYieldValue:l}=pe(),{isApp:i}=de();return e.jsx(b,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:i?()=>c(!n):()=>c(!1),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:e.jsxs(es,{isLazy:!0,isOpen:n,placement:"bottom-end",children:[e.jsx(ss,{children:e.jsx(Ce,{as:"button",children:e.jsx(x,{cursor:Number(l)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(l)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:te(l,2)})})}),n&&Number(l)>0&&(s==null?void 0:s.length)>0&&e.jsx(ts,{children:e.jsx(ns,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(is,{p:"0px",children:e.jsx(b,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(t=>{var o;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",t),e.jsxs(g,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(Ee,{token:t==null?void 0:t.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(g,{gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:ve(t==null?void 0:t.amount,6)}),e.jsxs(x,{fontSize:"12px",children:["(",te(t==null?void 0:t.amountUSD,2),")"]})]})]},(o=t==null?void 0:t.token)==null?void 0:o.coin_type)})})})})})]})})};function Ht(){const{currentAccount:s}=Ve(),[n,c]=r.useState(!1),[l,i]=r.useState(!1),[t,o]=r.useState([]),{getTokenAmountValue:f}=Ge(),{coinPriceObj:u}=As(),{myPosYieldValue:j,setMyPosYieldValue:h,posFeeDataLoading:k,posRewardsDataLoading:T,farmsPosRewardsDataLoading:S,posBaseList:p,posLiquidityData:X,posBaseListLoading:W,posLiquidityDataLoading:L,posFeeData:I,posRewardsData:D,farmsPosRewardsData:H}=pe(),ee=r.useMemo(()=>{let m=0,Q=0;return(p==null?void 0:p.length)>0&&(s!=null&&s.address)?(p.forEach(y=>{var O,N;const w=X[y==null?void 0:y.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",w);const C=f((O=y==null?void 0:y.displayTokenA)==null?void 0:O.coin_type,w==null?void 0:w.displayCoinAmountA),ie=f((N=y==null?void 0:y.displayTokenB)==null?void 0:N.coin_type,w==null?void 0:w.displayCoinAmountB);m=J(m).plus(C).plus(ie).toString(),Q=J(Q).plus((w==null?void 0:w.displayCoinAmountA)||0).plus((w==null?void 0:w.displayCoinAmountB)||0).toString()}),J(m).lte(0)&&J(Q).gt(0)?"$--":te(m,2)):"$0"},[p,X,s,u]),ae=s!=null&&s.address?W:!1,{calculatePendingYield:P}=Rs();r.useEffect(()=>{if(!(s!=null&&s.address))h(""),o([]);else if(!W&&(p==null?void 0:p.length)<=0&&(h("0"),o([])),(p==null?void 0:p.length)>0&&(s!=null&&s.address)&&!W&&!k&&!T&&!S){const{total:m,rewardAndFeeList:Q}=P(p,I,D,H);h(m),o(Q)}},[p,W,k,T,S,s,u]);const B=s!=null&&s.address?!j:!1,{isApp:ne}=de();return e.jsxs(ks,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(g,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Rt,backgroundSize:"100% 100%",children:[e.jsx(x,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(E,{isLoaded:!ae,children:e.jsx(x,{fontSize:"20px",color:"primary",children:ee})})]}),e.jsxs(g,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Ft,backgroundSize:"100% 100%",children:[e.jsx(x,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(E,{isLoaded:!B,children:ne?e.jsxs(g,{gap:"20px",children:[e.jsxs(b,{align:"flex-end",children:[e.jsx(us,{yieldList:t}),e.jsx($,{isLoading:n,disabled:Number(j)<=0||n,w:"100px",h:"24px",onClick:()=>i(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(j)>0&&e.jsx(ce,{xlinkHref:"#icon-icon_spread",onClick:()=>i(!0)})]}):e.jsxs(g,{onClick:()=>i(!0),children:[e.jsx(us,{yieldList:t}),Number(j)>0&&e.jsx(ce,{xlinkHref:"#icon-icon_spread"}),e.jsx($,{isLoading:n,disabled:Number(j)<=0||n,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(Wt,{isOpen:l,claimLoading:n,onClose:()=>i(!1),changeClaimLoading:m=>c(m)})]})}function Et({poolInfo:s}){var W,L,I,D,H,ee,ae,P;const n=Ie(),{posPoolsRelatedData:c,posApiPoolData:l}=pe(),{toCloseAllAction:i,isRemoveLoading:t}=ot(),[o,f]=r.useState(!0),u=r.useMemo(()=>{var B;return((B=s==null?void 0:s.list)==null?void 0:B.filter(ne=>ne.posType!=="burn"))||[]},[s==null?void 0:s.list]),j=(W=l[s==null?void 0:s.clmmPoolAddress])==null?void 0:W.haveFarming,h=(((D=c[(I=(L=s==null?void 0:s.list)==null?void 0:L[0])==null?void 0:I.posId])==null?void 0:D.displayFee)||"--")+"%",k=async()=>{u.length&&i(u)},{setBackUrl:T}=Xe(),[S,p]=r.useState(!0),{isApp:X}=de();return e.jsx(q,{w:"100%",p:X?"4px 12px 16px":o?"12px 16px 16px":"12px 16px 8px",borderRadius:"16px",children:e.jsxs(b,{w:"100%",gap:{base:"12px",lg:"12px"},children:[e.jsxs(ks,{direction:{base:"column",lg:"row"},justify:"space-between",w:"100%",gap:{base:"12px",lg:"8px"},onClick:()=>f(!o),children:[e.jsx(Ps,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:h,...s,poolAddress:s==null?void 0:s.clmmPoolAddress},haveName:!0,haveFarming:j}),e.jsxs(g,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(g,{mr:{base:"0px",lg:"8px"},w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(x,{color:"primary_gray",children:"Current Price"}),e.jsx(ut,{symbolEllipsesDecimals:10,posId:(ee=(H=s==null?void 0:s.list)==null?void 0:H[0])==null?void 0:ee.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,handleDirect:()=>p(!S)})]}),e.jsxs(g,{w:{base:"100%",lg:"unset"},flexDirection:{base:"column",lg:"row"},justify:"space-between",children:[e.jsxs(g,{w:{base:"100%",lg:"unset"},children:[e.jsxs($,{onClick:B=>{_e(B),T("/pools?tab=positions"),n(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"104px"},p:{base:"0 8px",lg:"0 16px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:[e.jsx(ce,{xlinkHref:"#icon-a-icon_add1",svgFill:"primary",svgHover:"primary",fontSize:"14px",mr:"4px"}),"Create new"]}),e.jsx($,{onClick:B=>{_e(B),k()},isLoading:t,disabled:!u.length||t,borderRadius:"8px",w:{base:"50%",lg:"68px"},p:{base:"0 8px",lg:"0 16px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Close All"})]}),e.jsx(q,{cursor:"pointer",w:{base:"100%",lg:"unset"},p:"4px 0 4px 8px",h:"32px",borderRadius:"8px",bg:"none",border:{base:"1px solid",lg:"none"},borderColor:"border",_hover:{svg:{fill:"text_caption"},p:{color:"text_caption"}},children:e.jsxs(g,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(x,{fontSize:"12px",children:[(ae=s==null?void 0:s.list)==null?void 0:ae.length," ",((P=s==null?void 0:s.list)==null?void 0:P.length)>1?"Positions":"Position"]}),e.jsx(ce,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:o?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),o&&e.jsx(lt,{poolInfo:s,priceDirect:S})]})})}function Nt(){const{isApp:s}=de();return e.jsx(q,{w:"100%",p:s?"16px 12px":"24px 16px 16px",borderRadius:"16px",children:e.jsxs(b,{w:"100%",gap:{base:"12px",lg:"24px"},children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsxs(g,{gap:"0",children:[e.jsx(qe,{size:"9"}),e.jsx(qe,{size:"9"}),e.jsxs(b,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"150px"})]})]}),!s&&e.jsx(E,{height:"5",width:"250px"})]}),e.jsx(b,{w:"100%",gap:"12px",children:s?e.jsx(q,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsxs(b,{w:"100%",gap:"12px",align:"flex-start",children:[e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"})]}),e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"})]}),e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"})]})]})}):e.jsxs(b,{w:"100%",children:[e.jsx(q,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsx(b,{w:{base:"100%",lg:"calc(100%)"},align:"flex-start",children:e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"})]})})}),e.jsx(q,{w:"100%",borderRadius:"16px",bg:"position_bg",border:"none",p:{base:"16px 8px 12px",lg:"20px 16px "},children:e.jsx(b,{w:{base:"100%",lg:"calc(100%)"},align:"flex-start",children:e.jsxs(g,{w:"100%",justify:"space-between",children:[e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"}),e.jsx(E,{height:"4",width:"100px"})]})})})]})})]})})}function Vt({isRefreshed:s,handleIsRefreshed:n}){var Q;const{getStatistics:c}=Ts(),{fetchTokenPrices:l}=Ge(),{currentAccount:i,onWalletModal:t}=Ve(),{getPositionBaseList:o,getPosRelatedData:f}=as(),{posRewardsData:u,farmsPosRewardsData:j,posBaseList:h,setShowPosListLength:k,setMyPosYieldValue:T,posBaseListLoading:S,posBaseListGroupByPool:p}=pe(),[X,W]=r.useState([]),{getNotifiPositionTransfer:L}=ht(),I=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),n(!1),T(""),c(),m(),i!=null&&i.address&&P(i==null?void 0:i.address),setTimeout(()=>{n(!0)},1e3)};gt({onRpcChange:()=>{i!=null&&i.address&&P(i==null?void 0:i.address)}});const[D,H]=r.useState([]),ee=y=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",y),H(w=>[...w,y])},ae=y=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",y),H(w=>w.filter(C=>(C==null?void 0:C.coin_type)!==(y==null?void 0:y.coin_type)))};r.useEffect(()=>{T(""),i!=null&&i.address?(console.log("ðŸš€ ~ useEffect ~ currentAccount?.address:",i==null?void 0:i.address),P(i==null?void 0:i.address)):k("")},[i==null?void 0:i.address]);const P=async y=>{const w=await o(y);f(w)},{notifiClient:B,notifiSources:ne}=qs();r.useEffect(()=>{L(h,B,ne)},[h,B,ne]),r.useEffect(()=>{var O,N,K,Z;const y=(O=D[0])!=null&&O.coin_type?xe((N=D[0])==null?void 0:N.coin_type):void 0,w=(K=D[1])!=null&&K.coin_type?xe((Z=D[1])==null?void 0:Z.coin_type):void 0,C=Object.values(p).filter(G=>y&&w?xe(G.tokenA.coin_type)==y&&xe(G.tokenB.coin_type)==w||xe(G.tokenA.coin_type)==w&&xe(G.tokenB.coin_type)==y:y?xe(G.tokenA.coin_type)==y||xe(G.tokenB.coin_type)==y:G);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(p),C),W(C);const ie=C.reduce((G,V)=>G+(V.list?V.list.length:0),0);i!=null&&i.address&&k(ie.toString())},[D,p]);const m=()=>{const y=[];if((h==null?void 0:h.length)>0){h.map(C=>{y.push(Ze(C==null?void 0:C.coinTypeA).full_address),y.push(Ze(C==null?void 0:C.coinTypeB).full_address);const ie=u[C==null?void 0:C.posId]||[],O=j[C==null?void 0:C.id]||[],N=ie.concat(O);N==null||N.map(K=>{var Z;J(K==null?void 0:K.display_amount_owed).gt(0)&&y.push(Ze((Z=K==null?void 0:K.token)==null?void 0:Z.coin_type).full_address)})});const w=Array.from(new Set(y));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",h,y,w),l(w)}};return r.useEffect(()=>{m()},[h==null?void 0:h.length,u]),r.useEffect(()=>(c(),()=>{k("")}),[]),r.useEffect(()=>{S&&k("")},[S]),e.jsxs(b,{gap:"20px",w:"100%",children:[e.jsx(Fs,{isPools:!1,handleRefresh:I,selectCoinList:D,onClickSelectCoinList:ee,onDeleteSelectCoinList:ae}),e.jsx(le,{h:"1px",w:"100%",bg:"border"}),e.jsx(Ht,{}),i!=null&&i.address?S?[{},{},{},{}].map((y,w)=>e.jsx(Nt,{},w)):((Q=Object.values(X))==null?void 0:Q.length)>0?Object.values(X).map((y,w)=>e.jsx(Et,{poolInfo:y},w)):e.jsx(ze,{type:"nodata",text:"No liquidity positions"}):e.jsx(ze,{type:"nowallet",onboard:()=>t(!0)})]})}function ni(){const{tab:s}=zs(),[n,c]=r.useState(!0),l=i=>{c(i)};return e.jsxs(b,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(Bt,{isRefreshed:n}),(s=="pools"||s===void 0)&&e.jsx(vt,{isRefreshed:n,handleIsRefreshed:l}),s=="positions"&&e.jsx(Vt,{isRefreshed:n,handleIsRefreshed:l})]})}export{ni as default};
//# sourceMappingURL=Pools-MB4eCqBv.js.map
