import{a as A,j as e,T,H as z,V as W,C as gt,v as je,aa as Rt,f as te,a7 as be,a8 as De,ah as ur,u as Ue,aq as xr,ab as Ze,X as as,Y as ls,Z as ds,$ as us,a0 as pr,a1 as xs,ag as ps,a6 as or,ar as ft,F as gr,t as yr,I as Zt,D as mr}from"./vendor-BulRdKUe.js";import{S as os}from"./Slippage-B4TfyMN6.js";import{V as hr,u as gs,W as br,q as Kt,g as jr,I as Ce,a as Le,c as Oe,C as Ct,X as I,e as Lt,i as Me,f as we,d as U,Y as Yt,R as ys,M as vt,v as ms,L as Ar,j as yt,P as wt,Z as hs,B as Sr,y as ct,n as bs,$ as _t,a0 as oe,a1 as tt,a2 as lt,a3 as de,p as fr,a4 as Qt,a5 as vr,G as Tt,F as at,a6 as wr,a7 as We,Q as Ee,a8 as _r,w as kt,a9 as kr,aa as Xt,ab as Rr}from"./index-C9eB4n05.js";import{u as ee}from"./index-COGdvjWM.js";import{u as ye,P as Cr,a as Lr}from"./PositionListLoading-VMvMvzit.js";import{u as Ge}from"./index-4kM3JsjZ.js";import{H as Tr,T as Br}from"./Table-Dw2kwPPO.js";import{N as Ne}from"./NoData-fdoVeTOA.js";import{A as Fr}from"./CopyButton-BOubBhgx.js";import{T as Mr}from"./TvlChart-NrIFaO0r.js";import{a as qr,u as Er,V as zr}from"./VolumeChart-BIT4ja88.js";import{u as Wr}from"./useBurn-ELpujfin.js";import{H as _e}from"./HTextLabelBox-CRyapKB_.js";import{T as Ur}from"./TooltipIcon-C94PfOPN.js";import{A as js}from"./SingleTokenInfo-DrnbDXGz.js";import{a as As,u as Hr}from"./usePositionList-CM9xw-J5.js";import{u as $r}from"./useRpcListener-D9jC1_QS.js";import{A as Vr}from"./index-C7XyCE3V.js";import{S as st,u as Te,a as mt,L as Ss}from"./LiquidityRangeChart-CULHSeSw.js";import{u as Be,d as fs,Z as Bt,R as Nr,a as vs,b as ws,c as Dr,e as _s,f as ks,g as Rs}from"./ZapSwitch-fdBixLtI.js";import{T as Jt}from"./TradeConfirmAmountInfo-CsrqmMnG.js";import{D as Ft,W as Cs}from"./DepositRatio-BKDkNPQT.js";import{T as Mt}from"./TotalAmount-9lvLvfH_.js";import{P as Or}from"./PositionStatus-C6YtjnbO.js";import{u as Gr,a as Zr}from"./useTransaction-CEDCgy0u.js";import{u as Kr}from"./global-DOQtmW25.js";import{f as rt,i as ze}from"./index-BtIu2PeQ.js";import{c as Yr,g as dt,a as ut,u as Qr}from"./useGetPoolList-arI9iVq2.js";import{u as Ls}from"./useAccountBalance-CS3ca8rH.js";import{u as xt}from"./useTokenBalance-BoTga07n.js";import{u as Ts,m as At,S as Pt,a as Xr}from"./SelectTokenAndFeeConfirm-CmyFO2GR.js";import{u as Jr}from"./useNotifiSubscription-RLaicPMr.js";import{u as Pr}from"./usePosAdd-CeKzrXH0.js";import{P as It}from"./PriceInput-BZf6Q6Bx.js";import{F as Ir,V as ei}from"./index-BR92QPSl.js";import{u as ti,a as si,V as ri}from"./VaultsAprBlock-D4jt-hhN.js";import{u as Bs}from"./usePriceImpact-B2-W-YUW.js";import{E as pt}from"./ErrorTips-Alt-FfJI.js";import{T as Fs}from"./TradeInputGroup-BNI7CpwJ.js";import{g as ii}from"./liquidity-DMaA3w2x.js";import{d as es,F as ni}from"./FeeTierSelect-GBg6UXw7.js";import{u as Ms}from"./useToken-CSs04qtp.js";import{u as ci,a as ai}from"./useFavoritePool-DGv9LiJ7.js";import{u as li}from"./swapWidget-Bq2nR4RL.js";import{u as di}from"./swapWidgetConfig-Cfoj5al_.js";import{B as ui}from"./BackButton-BYhqGOeq.js";import{R as xi}from"./RefreshButton-k-UP5oiv.js";import{C as pi}from"./CurrentPrice-BopS7g72.js";import{W as oi}from"./WarningTokenTipModal-LEFSwOA2.js";import"./detail-eWJDG1lG.js";import"./PriceRange-Cwf2Nmm6.js";import"./RangeValue-D7b-YFqE.js";import"./debounce-Cta0IZrB.js";import"./index-e8NcK24v.js";import"./Pagination-Dd-2GMaB.js";import"./EmptyTooltip-CRUKZTJx.js";import"./_getAllKeysIn-DRhE9cEE.js";import"./YAxis-cYBadgLZ.js";import"./generateCategoricalChart-XE-lLZBM.js";import"./linear-DYpwdEgO.js";import"./useWrapPoolData-CyVbotlF.js";import"./usePreviousValue-DJR5Z5zU.js";import"./VTextLabelBox-Ddz5KfQg.js";import"./ActionButton-C4WeIbi1.js";import"./v4-C6aID195.js";import"./FreshProgressV2-D-ODsceK.js";import"./index-BYrW2Tah.js";import"./useTrack-vdBG3X1y.js";import"./useSigner-3qOKnO9v.js";import"./index-DZEhp6gr.js";import"./CheckBox-C-vSoIAm.js";import"./Loading-CEW9oCbv.js";import"./useNotifiAlerts-D3nUCs5r.js";import"./useXCetusHelper-Dj67W-Ua.js";import"./msafe-oYBkW7LJ.js";import"./InputBox-2tXuXH7i.js";import"./PoweredByHaedal-DgLgYLeQ.js";import"./useInterval-uVBrvd8F.js";import"./useDisplayTickPrice-YhvXxGQJ.js";import"./useFindBestRouting-CvNgPphh.js";import"./useSwapHelper-BxsNbr-k.js";import"./useDocumentSize-BX8xcEoA.js";var Re=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Re||{});function gi(){const{clmmSdk:t}=hr(),{fetchByApi:s}=gs();return{getTransactionsHistory:async g=>{try{const x=await s(br,"GET",g);if(console.log(x,"getTransactionsHistory"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(g,x)=>{try{const a=await t.Pool.getPoolTransactionList({poolId:g,paginationArgs:x,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(a,"getTransactionsHistoryBySDK"),a)return a;throw new Error("no data")}catch(a){console.error(a,"getTransactionsHistoryBySDK ~ error")}}}}function yi(){const{getTransactionsHistoryBySDK:s}=gi(),[i,n]=A.useState(!0),[g,x]=A.useState([]),[a,b]=A.useState(1),[r,u]=A.useState(),[o,d]=A.useState(!0),{apiPoolInfo:p,manualRefresh:S,setManualRefresh:_}=ee(),{poolAddress:L}=ye();A.useEffect(()=>{x([]),b(1),u(void 0),d(!0)},[L]),A.useEffect(()=>{S&&(x([]),b(1),u(void 0),d(!0),y({cursor:void 0,limit:10}))},[L,S]);const y=async h=>{var f;try{if(!o)return;if(L){n(!0);const l=await s(L,{...h});if(l){const c=(f=l==null?void 0:l.data)==null?void 0:f.map(w=>{var C,M;const j=w==null?void 0:w.parsedJson,v=j!=null&&j.amount_a||j!=null&&j.atob?p==null?void 0:p.tokenA:p==null?void 0:p.tokenB,k=j!=null&&j.amount_b||j!=null&&j.atob?p==null?void 0:p.tokenB:p==null?void 0:p.tokenA;return{...w,type:(C=w.type)!=null&&C.includes("Add")?Re.add:(M=w.type)!=null&&M.includes("Remove")?Re.remove:Re.swap,items:[{amount:Kt(j!=null&&j.amount_a?j==null?void 0:j.amount_a:j==null?void 0:j.amount_in,v==null?void 0:v.decimals).toString(),address:v==null?void 0:v.coin_type,url:v==null?void 0:v.logo_url,symbol:v==null?void 0:v.symbol},{amount:Kt(j!=null&&j.amount_b?j==null?void 0:j.amount_b:j==null?void 0:j.amount_out,k==null?void 0:k.decimals).toString(),address:k==null?void 0:k.coin_type,url:k==null?void 0:k.logo_url,symbol:k==null?void 0:k.symbol}]}});h!=null&&h.cursor?x(w=>[...w,...c||[]]):x(c||[]),u(l==null?void 0:l.nextCursor),d(l==null?void 0:l.hasNextPage),n(!1)}}}catch(l){console.log(l,"getTransactionsHistoryBySDK-error"),n(!1)}finally{n(!1)}};return Ge(()=>{y({cursor:r,limit:10})},[a,L],{wait:500,leading:!0,trailing:!1}),{isLoading:i,list:g,apiPoolInfo:p,currentPage:a,onCurrentPageChange:()=>{b(h=>h+1)},hasNextPage:o}}const it={[Re.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Re.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Re.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},mi=({type:t})=>{var s,i,n,g;return e.jsxs(z,{children:[e.jsx(Ce,{xlinkHref:(s=it[t])==null?void 0:s.icon,svgFill:(i=it[t])==null?void 0:i.color,svgHover:(n=it[t])==null?void 0:n.color}),e.jsx(T,{color:"text_caption",children:(g=it[t])==null?void 0:g.title})]})},hi=({items:t,type:s,isReverse:i})=>{var g,x;const{isApp:n}=Le();return t?s===Re.swap?n?e.jsxs(W,{align:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsxs(z,{justify:"flex-end",children:[e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]})]}):e.jsxs(z,{justify:"flex-end",gap:"8px",children:[e.jsx(qe,{item:t==null?void 0:t[0]}),e.jsx(Ce,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(qe,{item:t==null?void 0:t[1]})]}):n?e.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:i?"column-reverse":"column",children:(g=t==null?void 0:t.filter(a=>!!+a.amount))==null?void 0:g.map(a=>e.jsx(qe,{item:a},a==null?void 0:a.address))}):e.jsx(z,{justify:i?"flex-start":"flex-end",gap:"8px 16px",flexDir:i?"row-reverse":"row",children:(x=t==null?void 0:t.filter(a=>!!+a.amount))==null?void 0:x.map(a=>e.jsx(qe,{item:a},a==null?void 0:a.address))}):null},qe=({item:t})=>e.jsxs(z,{gap:"4px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(T,{color:"text_caption",children:Ct(t==null?void 0:t.amount)}),e.jsx(T,{children:I(t==null?void 0:t.symbol,10)})]}),ts=(t,s=!1)=>[{title:e.jsx(T,{children:"Event"}),key:"type",render:({type:i})=>e.jsx(mi,{type:i}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:i,type:n})=>e.jsx(hi,{items:i,type:n,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:i})=>e.jsx(Fr,{address:i,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(i,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(T,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:i})=>e.jsx(T,{color:"text_caption",children:jr(i)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function bi(){const{getExplorerUrl:t}=Lt(),{isLoading:s,list:i,apiPoolInfo:n,currentPage:g,onCurrentPageChange:x,hasNextPage:a}=yi(),{isApp:b}=Le();return e.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(T,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(i==null?void 0:i.length)==0?e.jsx(Ne,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):b?e.jsx(Tr,{columns:ts(t,n==null?void 0:n.isReverse),dataSource:i,loading:s&&g===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(r,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")}}):e.jsx(Br,{columns:ts(t,n==null?void 0:n.isReverse),dataSource:i,skeletonLength:10,loading:s&&g===1,onRowClick:r=>{window.open(t(r==null?void 0:r.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),a&&e.jsx(gt,{mt:{base:"40px",lg:"20px"},children:e.jsx(je,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:x,children:s?e.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var qt=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(qt||{}),qs=(t=>(t.volume="vol",t.tvl="tvl",t.fees="fee",t))(qs||{}),Es=(t=>(t.d="D",t.w="W",t.m="M",t))(Es||{}),zs=(t=>(t.d="day",t.w="wek",t.m="mon",t))(zs||{});const ji={D:40,W:30,M:20};function Ai(){const[t,s]=A.useState("Volume"),[i,n]=A.useState("D"),[g,x]=A.useState([]),{apiPoolInfo:a}=ee(),[b,r]=A.useState(!0),[u,o]=A.useState(null),{getHistogramData:d}=qr(),{poolAddress:p}=ye(),{getHoverTime:S,time:_}=Er();A.useLayoutEffect(()=>{x([]),s("Volume"),n("D"),o(null)},[p]);const L=async()=>{if(p)try{r(!0);const c=await d({date_type:zs[i.toLowerCase()],type:qs[t.toLowerCase()],limit:ji[i],address:p});c&&c.length&&x(c)}catch(c){throw console.error(c,"res-fetchAnalyticsData"),c}finally{r(!1)}};A.useEffect(()=>{L()},[p,t,i]),A.useEffect(()=>{u!=null&&u.date&&S(u==null?void 0:u.date,i)},[u==null?void 0:u.date,i]);const y=c=>{s(c.label),c.label!==t&&x([])},m=c=>{n(c.label),c.label!==i&&x([])},h=A.useMemo(()=>{if(t==="Volume")return{value:a==null?void 0:a.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:a==null?void 0:a.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:a==null?void 0:a.fees24Display,title:"Fees (24H)"}},[t,a==null?void 0:a.volume24Display,a==null?void 0:a.tvlDisplay,a==null?void 0:a.fees24Display]),f=Object.values(qt).map(c=>({label:c})),l=Object.values(Es).map(c=>({label:c}));return{handleChartTabChange:y,handleDateTabChange:m,defaultDisplay:h,chartsTabs:f,dateTypes:l,chartLoading:b,analyticsData:g,hoverData:u,setHoverData:o,currentChartTab:t,currentDateType:i,time:_}}function Si(){const{isApp:t}=Le(),{handleChartTabChange:s,handleDateTabChange:i,defaultDisplay:n,chartsTabs:g,dateTypes:x,chartLoading:a,analyticsData:b,hoverData:r,setHoverData:u,currentChartTab:o,currentDateType:d,time:p}=Ai();return e.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(z,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(Me,{type:"outlineTab",tabList:g,currentTab:o,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:d,handleChangeTab:i,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(W,{w:"100%",align:"flex-start",children:[e.jsx(T,{color:"text_caption",fontSize:"24px",children:(r==null?void 0:r.num)!==void 0&&r!==null?U(Yt(r.num)).gte("0.01")||U(Yt(r.num)).equals("0")?`$${we(r==null?void 0:r.num,2)}`:"<$0.01":n==null?void 0:n.value}),e.jsx(T,{children:r!=null&&r.date?p:n==null?void 0:n.title}),t&&e.jsx(Me,{type:"outlineTab",tabList:x,currentTab:d,handleChangeTab:i,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(te,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(te,{w:"100%",h:"100%",position:"relative",children:[a&&e.jsx(te,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Rt,{})}),o===qt.tvl?e.jsx(Mr,{data:b,onChangeValue:S=>u(S)}):e.jsx(zr,{data:b,onChangeValue:S=>u(S),pageFrom:"pools"})]})})]})}const fi=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:i=>{t(()=>({tokenAPrice:i}))},tokenBPrice:void 0,setTokenBPrice:i=>{t(()=>({tokenBPrice:i}))},tokenAAmount:"",setTokenAAmount:i=>{t(()=>({tokenAAmount:i}))},tokenBAmount:"",setTokenBAmount:i=>{t(()=>({tokenBAmount:i}))},tokenAAmountUSD:"",setTokenAAmountUSD:i=>{t(()=>({tokenAAmountUSD:i}))},tokenBAmountUSD:"",setTokenBAmountUSD:i=>{t(()=>({tokenBAmountUSD:i}))},totalAmountUSD:"",setTotalAmountUSD:i=>{t(()=>({totalAmountUSD:i}))},tvlLoading:!0,setTvlLoading:i=>{t(()=>({tvlLoading:i}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ht=ys(fi);function vi(){const{getBurnPositionAmountByPool:t}=Wr(),{apiPoolInfo:s,contractPoolInfo:i}=ee(),[n,g]=A.useState("0"),[x,a]=A.useState("0"),[b,r]=A.useState("0"),[u,o]=A.useState("0"),[d,p]=A.useState(!1),{poolAddress:S}=ye(),{tokenAPrice:_,tokenBPrice:L}=ht(),y=async(m,h)=>{try{p(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:f,totalB:l}=await t(m,h);g(f),a(l),_&&r(U(f).mul(_==null?void 0:_.price).toString()),L&&o(U(l).mul(L==null?void 0:L.price).toString())}catch(f){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",f)}finally{p(!1)}};return Ge(()=>{s&&(i!=null&&i.current_sqrt_price)&&y(s,i==null?void 0:i.current_sqrt_price)},[S,i==null?void 0:i.current_sqrt_price,_==null?void 0:_.price,L==null?void 0:L.price],{wait:500}),{burnAmountA:n,burnAmountB:x,burnAmountAUSD:b,burnAmountBUSD:u,loading:d}}function wi(){const{apiPoolInfo:t}=ee(),{burnAmountA:s,burnAmountB:i,burnAmountAUSD:n,burnAmountBUSD:g,loading:x}=vi();return U(s).gt(0)||U(i).gt(0)?e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(z,{children:[e.jsx(T,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx(Ur,{type:"burnedLiquidity"})]}),e.jsxs(be,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(ss,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:n,loading:x}),e.jsx(ss,{token:t==null?void 0:t.tokenB,amount:i,amountUSD:g,loading:x})]})]}):null}const ss=({token:t,amount:s,amountUSD:i,loading:n})=>e.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(T,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:U(i).gt("0")?`$${ms(vt(i,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function _i(){const{tokenAAmountUSD:t,totalAmountUSD:s}=ht(),i=A.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const g=Ar(U(t).div(s).mul(100).toString(),2);return g==="NaN"?"--":g}return"--"},[t,s]),n=A.useMemo(()=>i&&i!=="--"?U(100).minus(i).toString():"--",[i]);return{tokenARatio:i,tokenBRatio:n}}const nt=t=>t==="--"?"--":`${t}%`;function ki(){var d,p,S,_,L,y;const{apiPoolInfo:t,contractPoolInfo:s}=ee(),{getExplorerUrl:i}=Lt(),{poolAddress:n}=ye(),{tokenAAmount:g,tokenBAmount:x,tokenAAmountUSD:a,tokenBAmountUSD:b,tvlLoading:r}=ht(),{tokenARatio:u,tokenBRatio:o}=_i();return e.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(ur,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(_e,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(js,{address:n||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(i(n,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(t==null?void 0:t.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(W,{gap:"20px",w:"100%",children:[e.jsx(z,{justify:"flex-start",w:"100%",children:e.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(W,{gap:"16px",w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:(d=t==null?void 0:t.displayTokenA)==null?void 0:d.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(p=t==null?void 0:t.displayTokenA)==null?void 0:p.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((S=t==null?void 0:t.displayTokenA)==null?void 0:S.symbol,10)}),r?e.jsx(Ue,{h:"12px",w:"46px"}):e.jsx(T,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(o):nt(u)})]})]}),e.jsx(te,{w:"200px",children:e.jsx(xr,{value:Number(t!=null&&t.isReverse?o:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,o].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,o].includes("--")?"background":"primary"}}})}),e.jsxs(z,{gap:"12px",children:[e.jsxs(W,{align:"flex-end",gap:"4px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:I((_=t==null?void 0:t.displayTokenB)==null?void 0:_.symbol,10)}),r?e.jsx(Ue,{h:"12px",w:"46px"}):e.jsx(T,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(u):nt(o)})]}),e.jsx(Oe,{imageUrl:(L=t==null?void 0:t.displayTokenB)==null?void 0:L.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(y=t==null?void 0:t.displayTokenB)==null?void 0:y.coin_type:""})]})]}),e.jsxs(W,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenA,amount:g,amountUSD:a}),e.jsx(rs,{loading:r,token:t==null?void 0:t.tokenB,amount:x,amountUSD:b})]})]})]})]})}const rs=({token:t,amount:s,amountUSD:i,loading:n})=>{const{getExplorerUrl:g}=Lt();return t?e.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Oe,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(W,{align:"flex-start",gap:"4px",children:[e.jsx(T,{color:"text_caption",fontSize:"16px",children:I(t==null?void 0:t.symbol,10)}),e.jsx(T,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(js,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(g(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Ct(vt(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:i&&i!=="--"?`$${we(i)}`:"--",valueStyle:{fontSize:"14px"},isLoading:n,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function Ri(){return e.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(Si,{}),e.jsx(ki,{})]}),e.jsx(wi,{}),e.jsx(bi,{})]})}function Ci(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=As(),{manualRefresh:i}=ee(),{currentAccount:n,onWalletModal:g}=yt(),{getPositionBaseList:x,getPosRelatedData:a}=Hr(),[b,r]=A.useState(""),{poolAddress:u}=ye(),o=async p=>{const S=await x(p);Array.isArray(S)&&a(S),typeof S=="string"&&r(S)};return A.useEffect(()=>{n!=null&&n.address&&o(n==null?void 0:n.address)},[n==null?void 0:n.address]),A.useEffect(()=>{i&&(n!=null&&n.address)&&o(n==null?void 0:n.address)},[i]),$r({onRpcChange:()=>{n!=null&&n.address&&o(n==null?void 0:n.address)}}),{data:A.useMemo(()=>{if(u){const p=s[u.toLowerCase()||""];return p?p==null?void 0:p.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:b,posBaseListLoading:t,currentAccount:n,onWalletModal:g}}function Li(){const t=Ze(),{apiPoolInfo:s}=ee(),{currentAccount:i,posBaseListLoading:n,data:g,rpcNodeErrorStr:x,onWalletModal:a}=Ci();return e.jsx(W,{minW:{base:"100%",lg:"1024px"},children:i!=null&&i.address?n?[{},{}].map((b,r)=>e.jsx(Cr,{},r)):g&&(g==null?void 0:g.length)>0?g==null?void 0:g.map((b,r)=>e.jsx(Lr,{positionInfo:b},b==null?void 0:b.posId)):x?e.jsx(Ne,{type:"nodata",text:x}):e.jsx(Ne,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(je,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>t(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):e.jsx(Ne,{type:"nowallet",onboard:()=>a(!0)})})}function Ti({apiPoolInfo:t,apiPoolInfoLoading:s,tvlLoading:i,totalTvl:n}){return e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(st,{label:"Pool APR",value:e.jsx(Vr,{poolInfo:t,placement:"bottom",children:e.jsxs(z,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(T,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:t!=null&&t.farmingAprDisplay||t!=null&&t.miningAprList&&(t==null?void 0:t.miningAprList.length)>0?"help":"text",children:t==null?void 0:t.feeAndMiningAprDisplay}),(t==null?void 0:t.haveFarming)&&e.jsxs(T,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",t==null?void 0:t.farmingAprDisplay]})]})})}),e.jsx(st,{label:"TVL",value:n&&n!=="--"?`$${we(n,2)}`:"--",loading:s||i}),e.jsx(st,{label:"Volume (24H)",value:(t==null?void 0:t.volume24Display)||"",loading:s}),e.jsx(st,{label:"Fees (24H)",value:(t==null?void 0:t.fees24Display)||"",loading:s})]})}function Bi(t){var v;const{onClose:s,onSubmit:i,data:{feeTier:n,zapData:g}}=t,{fromToken:x,toToken:a,fromAmount:b,toAmount:r,totalAmount:u,percentMap:o,fromTokenLock:d,toTokenLock:p}=Be(),{lowerTickData:S,upperTickData:_}=Te(),{currentPriceData:L,apiPoolInfo:y}=ee(),{setIsChecked:m}=wt(),[h,f]=A.useState(!0),l=A.useMemo(()=>{var k;return((k=y==null?void 0:y.tokenA)==null?void 0:k.coin_type)===(x==null?void 0:x.coin_type)?!h:!!h},[y,x,a,h]),c=A.useMemo(()=>h?`${I(a==null?void 0:a.symbol,10)} per ${I(x==null?void 0:x.symbol,10)}`:`${I(x==null?void 0:x.symbol,10)} per ${I(a==null?void 0:a.symbol)}`,[h,x==null?void 0:x.symbol,a==null?void 0:a.symbol]),w=fs(()=>{i(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:j}=wt();return e.jsxs(as,{isOpen:!0,onClose:()=>{s(),m(!1)},isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{children:[e.jsx(us,{children:e.jsx(De,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(pr,{}),e.jsx(xs,{textAlign:"center",p:"0px",children:e.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(z,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(z,{children:[e.jsx(hs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:a==null?void 0:a.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:a==null?void 0:a.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(T,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${I(x==null?void 0:x.symbol,10)} - ${I(a==null?void 0:a.symbol,10)}`})]}),e.jsx(Sr,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(z,{gap:"12px",children:[e.jsx(T,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(T,{color:"primary",children:n==null?void 0:n.feeDisplay})]})})]}),g?e.jsx(Jt,{coinA:{amount:g==null?void 0:g.amount,...g==null?void 0:g.token}}):e.jsx(Jt,{coinA:{amount:b,...x},coinB:{amount:r,...a}}),e.jsxs(te,{w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(Or,{isActive:!d&&!p,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(W,{gap:"0",border:"1px solid",bg:"bg_secondary",borderColor:"border",borderRadius:"12px",mt:"8px",children:[e.jsxs(z,{justify:"center",h:"48px",w:"100%",gap:"4px",children:[e.jsx(T,{children:"Current Price"}),e.jsx(T,{as:"span",color:"text_caption",children:ct(l?L.reverseCurrentPrice:L==null?void 0:L.currentPrice,6)}),e.jsx(T,{children:c}),e.jsx(je,{variant:"unstyled",onClick:()=>f(!h),children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsx(te,{h:"1px",w:"calc(100% - 32px)",p:"0 12px",bg:"border"}),e.jsxs(z,{w:"100%",h:"100px",children:[e.jsx(is,{title:"Min Price",price:ct(l?_==null?void 0:_.reversePrice:S==null?void 0:S.price,6),perText:c}),e.jsx(ps,{orientation:"vertical",h:"40px"}),e.jsx(is,{title:"Max Price",price:ct(l?S==null?void 0:S.reversePrice:_==null?void 0:_.price,6),perText:c})]})]})]}),g?e.jsx(Bt,{action:"Deposit",inConfirmModal:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{tokenA:x,tokenB:a,isReverse:(x==null?void 0:x.coin_type)!==((v=y==null?void 0:y.tokenA)==null?void 0:v.coin_type),type:"text",percentMap:o}),e.jsx(Mt,{loading:!1,totalAmount:u}),!d&&!p&&!((S==null?void 0:S.price)==="0"&&(_==null?void 0:_.price)==="âˆž")&&j=="authenticated"&&e.jsx(Nr,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}})]}),e.jsx(je,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:w,children:"Add Liquidity"})]})})]})]})}const is=({title:t,price:s,perText:i})=>e.jsxs(W,{flex:"1",children:[e.jsx(T,{children:t}),e.jsx(T,{color:"text_caption",children:s}),e.jsx(T,{children:i})]});function Fi(t,s){const{preAdd:i,getClmmCreateAddData:n,getFarmsCreateAddData:g}=Pr(),[x,a]=A.useState(!1),{currentPriceData:b,apiPoolInfo:r,contractPoolInfo:u}=ee(),{getContractPoolInfo:o}=vs(),{lowerTickData:d,upperTickData:p}=Te(),{signAndExecuteTransaction:S,getTransactionStatus:_,transactionSuccess:L}=Gr(),{mevProtect:y,maxCapForGas:m,transactionMode:h,customGasPrice:f}=Kr(),{transactionConfirmation:l}=Zr(),{getCurrentPrice:c}=ws(),{fromAmount:w,setFromAmount:j,fromAmountValue:v,setFromAmountValue:k,toAmount:C,setToAmount:M,toAmountValue:V,setToAmountValue:q,byAmountIn:$,setByAmountIn:K,isTokenA:re,setIsTokenA:J,percentMap:xe,setPercentMap:N,isFullRange:Y,setIsFullRange:Z,fromToken:R,setFromToken:ie,toToken:F,setToToken:ne,totalAmount:B,setTotalAmount:E,fromTokenLock:H,setFromTokenLock:se,toTokenLock:ce,setToTokenLock:Q,setTokenMaxA:P,setTokenMaxB:ue,tokenMaxA:G,tokenMaxB:Ke,autoStakePosition:He,liquidityAmount:Ye,setLiquidityAmount:Qe,useZapIn:Fe,setUseZapIn:jt,confirmModalOpen:Gs,setConfirmModalOpen:Et,nftOpen:Zs,setNftOpen:zt,relatedPosId:Ks,setRelatedPosId:Wt}=Be(),{getTokenAmountValue:Xe}=bs(),{getZapDepositTx:Ys,getZapDepositToastInfo:Qs,reCalculateZapData:Xs}=Dr(),{setZapAmount:Js}=_s();_t(()=>{var D,le;r&&J(((D=r==null?void 0:r.displayTokenA)==null?void 0:D.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r]);const{isWhiteQuoteToken:Ps}=Ts(),{notifiSubscription:Is}=Jr(),{isChecked:Ut}=wt();Ge(()=>{if(Y){N({percentA:"50",percentB:"50"});return}if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(d==null?void 0:d.tick)!==void 0&&(p==null?void 0:p.tick)!==void 0&&b.currentSqrtPrice){if(oe(d.tick).lte(u.current_tick_index)&&oe(p.tick).gt(u.current_tick_index)){const D=Ps(r.tokenA.coin_type)?r.tokenA:r.tokenB,le=D.coin_type===r.tokenA.coin_type,ve=i({amount:tt("1",D.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:d==null?void 0:d.tick,upperTick:p==null?void 0:p.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0}),ge=Yr(ve.coinAmountA,ve.coinAmountB,b==null?void 0:b.currentPrice,Y);N(ge);return}if(oe(d.tick).gt(u.current_tick_index)){N({percentA:"100",percentB:"0"});return}if(oe(p.tick).lte(u.current_tick_index)){N({percentA:"0",percentB:"100"});return}}},[JSON.stringify(r),b,d==null?void 0:d.tick,p==null?void 0:p.tick,Y],{wait:300});const er=({amount:D,isTokenA:le,isFullRange:ve})=>{var ge,me,Ae,he;if(r&&(r!=null&&r.tokenA)&&(r!=null&&r.tokenB)&&Object.keys(b).length>0&&(d==null?void 0:d.tick)!==void 0&&(p==null?void 0:p.tick)!==void 0&&R&&F){let O;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&oe(d==null?void 0:d.tick).lte(u==null?void 0:u.current_tick_index)&&oe(p==null?void 0:p.tick).gt(u==null?void 0:u.current_tick_index))O=i({amount:tt(D&&+D?D+"":"1",$?R==null?void 0:R.decimals:F==null?void 0:F.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:le,lowerTick:d==null?void 0:d.tick,upperTick:p==null?void 0:p.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0});else if(H&&!ce){const ae=(F==null?void 0:F.coin_type)===((ge=r==null?void 0:r.tokenA)==null?void 0:ge.coin_type);O=i({amount:tt(D?D+"":"1",F==null?void 0:F.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:d==null?void 0:d.tick,upperTick:p==null?void 0:p.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else if(ce&&!H){const ae=(R==null?void 0:R.coin_type)===((me=r==null?void 0:r.tokenA)==null?void 0:me.coin_type);O=i({amount:tt(D?D+"":"1",R==null?void 0:R.decimals).toString(),tokenA:r==null?void 0:r.tokenA,tokenB:r==null?void 0:r.tokenB,isTokenA:ae,lowerTick:d==null?void 0:d.tick,upperTick:p==null?void 0:p.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:r==null?void 0:r.isReverse,roundUp:!0})}else H&&ce&&(O=le?{coinAmountA:D?D+"":"1",coinAmountB:"",tokenMaxA:D?D+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:D?D+"":"1",tokenMaxA:"",tokenMaxB:D?D+"":"1"});if(P(O==null?void 0:O.tokenMaxA),ue(O==null?void 0:O.tokenMaxB),D)if(oe(D).gt("0"))if($){const ae=(F==null?void 0:F.coin_type)===((Ae=r==null?void 0:r.tokenA)==null?void 0:Ae.coin_type)?O==null?void 0:O.coinAmountA:O==null?void 0:O.coinAmountB,pe=Xe(R==null?void 0:R.coin_type,D+""),Se=Xe(F==null?void 0:F.coin_type,ae),fe=oe(pe).plus(Se).toString();console.log(ae,pe,Se,fe,"_totalAmountValue"),M(ae||""),k(pe),q(Se),E(fe)}else{const ae=(R==null?void 0:R.coin_type)===((he=r==null?void 0:r.tokenA)==null?void 0:he.coin_type)?O==null?void 0:O.coinAmountA:O==null?void 0:O.coinAmountB,pe=Xe(R==null?void 0:R.coin_type,ae),Se=Xe(F==null?void 0:F.coin_type,D+""),fe=oe(pe).plus(Se).toString();console.log(ae,pe,Se,fe,"_totalAmountValue"),k(pe),q(Se),j(ae||""),E(fe)}else $?(M(""),k(""),q(""),E("")):(j(""),k(""),q(""),E(""));else j(""),M(""),k(""),q(""),E("");O&&Qe((O==null?void 0:O.liquidityAmount)||"")}};Ge(()=>{er({amount:$?w:C,isTokenA:re,isFullRange:Y})},[JSON.stringify(r),b,d==null?void 0:d.tick,p==null?void 0:p.tick,w,C,$,re,H,ce,Y],{wait:300});const tr=(D,le,ve)=>{K(le),le?j(D):M(D),J(ve!==void 0?ve:!1)},{balanceInfo:sr}=xt(R),{balanceInfo:rr}=xt(F);_t(()=>{var D,le;J($?(R==null?void 0:R.coin_type)===((D=r==null?void 0:r.tokenA)==null?void 0:D.coin_type):(F==null?void 0:F.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type))},[r,$,R,F]),A.useEffect(()=>{(d==null?void 0:d.tick)===lt.getMinIndex(Number((d==null?void 0:d.tickSpacing)||0))&&(p==null?void 0:p.tick)===lt.getMaxIndex(Number((p==null?void 0:p.tickSpacing)||0))?Z(!0):Z(!1)},[d==null?void 0:d.tick,p==null?void 0:p.tick]),A.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&de(d)&&de(p)&&(oe(d==null?void 0:d.tick).gte(oe(p.tick))?(se(!0),Q(!0)):oe(d==null?void 0:d.tick).gt(u==null?void 0:u.current_tick_index)?(se(!s),Q(!!s)):oe(p.tick).lte(u==null?void 0:u.current_tick_index)?(se(!!s),Q(!s)):(se(!1),Q(!1)))},[d==null?void 0:d.tick,p==null?void 0:p.tick,u,s]);const{currentAccount:ir,onWalletModal:nr}=yt(),cr=fs(()=>{ir?Et(!0):nr(!0)},300,{leading:!0,trailing:!1}),Ht=()=>{j(""),M(""),k(""),q(""),E("")},{fetchAccountBalance:ar}=Ls(),lr=async()=>{var D,le,ve;try{let ge,me,Ae;if(Fe)me=Qs(),l(me),ge=await Ys(d==null?void 0:d.tick,p==null?void 0:p.tick,He);else{const O=$?w:C,ae=$?R==null?void 0:R.decimals:F==null?void 0:F.decimals,pe=oe(O).mul(fr.pow(10,ae)).toString(),Se=$&&(R==null?void 0:R.coin_type)===((D=r==null?void 0:r.tokenA)==null?void 0:D.coin_type)?!0:(F==null?void 0:F.coin_type)===((le=r==null?void 0:r.tokenA)==null?void 0:le.coin_type)&&!$;let fe,Je;const Pe=d.tick,Ie=p.tick,$e=u==null?void 0:u.current_tick_index;Pe!==void 0&&Ie!==void 0&&$e!==void 0&&($e>=Pe&&$e<=Ie?(fe=Se?pe:G,Je=Se?Ke:pe):$e>Ie?(fe=0,Je=pe):$e<Pe&&(fe=pe,Je=0));let $t=[];if(u!=null&&u.index){const{rewarder_infos:X}=u;$t=(X==null?void 0:X.length)>0&&(X==null?void 0:X.map(Ve=>Ve.coinAddress))||[]}const Vt={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:fe,amountB:Je,fixAmountA:Se,lowerTick:Pe,upperTick:Ie,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:$t,farmsPoolId:r==null?void 0:r.farmsPoolAddress};if(me={getShowInfo:(X,Ve)=>{const Nt="Add "+[rt(w,R==null?void 0:R.symbol),rt(C,F==null?void 0:F.symbol)].filter(Boolean).join(" and "),et={modalDescriptionText:Nt,toastTitleText:Nt};if(X==="success"){let Dt=w,Ot=C;Ve&&(Dt=Qt(Ve,R)||w,Ot=Qt(Ve,F)||C);const Gt="Add "+[rt(Dt,R==null?void 0:R.symbol),rt(Ot,F==null?void 0:F.symbol)].filter(Boolean).join(" and ");et.toastDescriptionContent=Gt,et.modalDescriptionText=Gt,et.toastTitleText="Supplied Successful"}return et}},l(me),He){const X=await g(Vt);ge=X==null?void 0:X.tx,Ae=X==null?void 0:X.msafeParams}else{const X=await n(Vt);ge=X==null?void 0:X.tx,Ae=X==null?void 0:X.msafeParams}}let he=await S(ge,me,{useDevInspect:!0,useMev:y,showSuccessModal:!1,useFastMode:h==="Fast Mode",maxCapForGas:m,customGasPrice:f,msafeParams:Ae});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Ut),((ve=he==null?void 0:he.events)==null?void 0:ve.length)===0&&(he=await _(he.digest));const{posId:O,farmsPosId:ae}=vr(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:O,farmsPosId:ae}),O?(zt(!0),Wt(ae||O)):L(me),Ut){const pe={subscriptionSource:"AddLiquidity",events:he.events};Is(pe)}ar(),Ht(),Js(""),t()}else u&&o(u==null?void 0:u.poolAddress).then(O=>{Xs()})}catch(ge){console.error(ge,"handleSubmit ~ error");const me=String(ge).toLocaleLowerCase();if(me.includes("user")&&me.includes("reject")&&r!=null&&r.poolAddress){const Ae=await o(r==null?void 0:r.poolAddress);Ae&&c(Ae==null?void 0:Ae.current_sqrt_price,r)}throw new Error(ge)}},dr=()=>{jt(!Fe)};return A.useEffect(()=>{Ht()},[Fe]),{percentMap:xe,handleAmountChange:tr,fromToken:R,setFromToken:ie,toToken:F,setToToken:ne,byAmountIn:$,setByAmountIn:K,fromAmount:w,fromAmountValue:v,setFromAmount:j,toAmount:C,toAmountValue:V,setToAmount:M,liquidityAmount:Ye,fromBalanceInfo:sr,toBalanceInfo:rr,totalAmount:B,fromTokenLock:H,toTokenLock:ce,handleAdd:cr,confirmModalOpen:Gs,setConfirmModalOpen:Et,nftOpen:Zs,setNftOpen:zt,relatedPosId:Ks,handleSubmit:lr,useZapIn:Fe,handleChangeZapIn:dr}}function Mi(){const{fromAmount:t,toAmount:s,fromToken:i,toToken:n,fromTokenLock:g,toTokenLock:x,liquidityAmount:a}=Be(),{currentAccount:b}=yt(),{balanceInfo:r}=xt(i),{balanceInfo:u}=xt(n),o=A.useMemo(()=>{const d={text:"Add Liquidity",disabled:!1};return b!=null&&b.address?!g&&!x&&(!t||!s||t&&!+t||s&&!+s)||g&&!x&&(!s||s&&!+s)||x&&!g&&(!t||t&&!+t)?(d.text="Enter an amount",d.disabled=!0,d):t&&+t&&U(t).gt((r==null?void 0:r.balanceFormat)||0)?(d.disabled=!0,d.text=`Insufficient ${I(i==null?void 0:i.symbol,10)} Balance`,d):s&&+s&&U(s).gt((u==null?void 0:u.balanceFormat)||0)?(d.disabled=!0,d.text=`Insufficient ${I(n==null?void 0:n.symbol,10)} Balance`,d):((!g&&!x&&(!t||!s)||U(a).lte("0"))&&(d.disabled=!0),d):(d.text="Connect Wallet",d.disabled=!1,d)},[b==null?void 0:b.address,t,s,r==null?void 0:r.balanceDisplay,u==null?void 0:u.balanceDisplay,i,n,g,x,a]);return{btnText:o.text,btnDisabled:o.disabled}}function qi(){return{getLeverage:(s,i)=>s&&i&&s!=="0"&&i!=="âˆž"?ms(1/(1-Number(U(s).div(i).toNumber()**.25)),2)+"x":"1x"}}function Ei({rangeTabList:t}){var V;const{apiPoolInfo:s}=ee(),{fromToken:i,toToken:n,setFromToken:g,setToToken:x,byAmountIn:a,setByAmountIn:b,setIsFarmRewardsRange:r,setAutoStakePosition:u,fromTokenLock:o,toTokenLock:d,fromAmount:p,toAmount:S,setFromAmount:_,setToAmount:L}=Be(),{lowerTickData:y,upperTickData:m}=Te(),[h,f]=A.useState(),{handleInitTickData:l}=mt(),{getLeverage:c}=qi();A.useEffect(()=>{var q;if(s){const $=(q=s==null?void 0:s.displayTokenA)==null?void 0:q.coin_type;f($)}},[s==null?void 0:s.poolAddress]);const w=A.useMemo(()=>{var q;return h===((q=s==null?void 0:s.tokenA)==null?void 0:q.coin_type)},[h,(V=s==null?void 0:s.tokenA)==null?void 0:V.coin_type]),j=A.useMemo(()=>{var q,$,K,re;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":w?`${I((q=s==null?void 0:s.tokenB)==null?void 0:q.symbol,10)} per ${I(($=s==null?void 0:s.tokenA)==null?void 0:$.symbol,10)}`:`${I((K=s==null?void 0:s.tokenA)==null?void 0:K.symbol,10)} per ${I((re=s==null?void 0:s.tokenB)==null?void 0:re.symbol,10)}`},[w,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),v=A.useMemo(()=>{const q=y==null?void 0:y.price,$=m==null?void 0:m.price;return c(q,$)},[y==null?void 0:y.price,m==null?void 0:m.price]),k=q=>{r(q.target.checked),q.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&l(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};A.useEffect(()=>{U(y==null?void 0:y.tick).eq(U(s==null?void 0:s.farmsEffectiveTickLower))&&U(m==null?void 0:m.tick).eq(U(s==null?void 0:s.farmsEffectiveTickUpper))?r(!0):r(!1)},[y==null?void 0:y.tick,m==null?void 0:m.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const C=A.useMemo(()=>(y==null?void 0:y.price)==="0"&&(m==null?void 0:m.price)==="âˆž",[y==null?void 0:y.price,m==null?void 0:m.price]),M=q=>{var $;q&&(q!=null&&q.coin_type)?f(q==null?void 0:q.coin_type):f(($=t==null?void 0:t.find(K=>K.key!==h))==null?void 0:$.key),g(n),x(i),b(!a),a?(L(p),_("")):(_(S),L(""))};return A.useEffect(()=>{s!=null&&s.haveFarming&&u(!(o||d))},[o,d,s==null?void 0:s.haveFarming]),A.useEffect(()=>{a&&o&&!d&&(_(""),L("")),!a&&!o&&d&&(_(""),L("")),a&&!o&&d&&L(""),!a&&o&&!d&&_(""),o&&d&&(_(""),L(""))},[o,d]),{direct:w,perText:j,handleChangeIsFarmRewardsRange:k,onReverseClick:M,leverage:v,currentRangeTab:h,isFullRange:C}}function zi({onClose:t,posId:s,tokenA:i,tokenB:n,fee:g,isReverse:x}){const a=Ze(),[b,r]=A.useState(!0),{lowerTickData:u,upperTickData:o}=Te();return A.useLayoutEffect(()=>{x&&r(!1)},[x]),e.jsxs(as,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ls,{}),e.jsxs(ds,{w:"400px",children:[e.jsx(us,{children:e.jsxs(z,{justify:"space-between",w:"100%",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(je,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(Ce,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(xs,{children:e.jsxs(W,{gap:"36px",children:[e.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(hs,{coinAIconUrl:i==null?void 0:i.logo_url,coinBIconUrl:n==null?void 0:n.logo_url,coinACoinType:i==null?void 0:i.coin_type,coinBCoinType:n==null?void 0:n.coin_type,w:"48px",h:"48px"}),e.jsxs(T,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[I(i==null?void 0:i.symbol,10)," - ",I(n==null?void 0:n.symbol,10)]}),e.jsxs(z,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(T,{fontSize:"14px",children:"Fee tier"}),e.jsx(T,{fontSize:"14px",color:"text_highlight",children:g})]})]}),e.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(T,{color:"text_caption",whiteSpace:"nowrap",children:[b?we(u==null?void 0:u.price,6):we(o==null?void 0:o.reversePrice,6)," -Â ",b?we(o==null?void 0:o.price,6):we(u==null?void 0:u.reversePrice,6)]}),e.jsxs(z,{children:[e.jsxs(z,{gap:"0",children:[e.jsx(T,{color:"primary_gray",children:I(b?x?i==null?void 0:i.symbol:n==null?void 0:n.symbol:x?n==null?void 0:n.symbol:i==null?void 0:i.symbol,10)}),e.jsx(T,{color:"primary_gray",children:"Â perÂ "}),e.jsx(T,{color:"primary_gray",children:I(b?x?n==null?void 0:n.symbol:i==null?void 0:i.symbol:x?i==null?void 0:i.symbol:n==null?void 0:n.symbol,10)})]}),e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:d=>{Tt(d),r(!b)}})]})]})]})}),e.jsx(or,{p:"20px 0 0",children:e.jsx(je,{flex:"1",onClick:()=>a(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function Ws({perText:t,direct:s,minPriceData:i,maxPriceData:n,isFullRange:g=!1}){const{tickDataLoading:x}=Te(),{handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:r}=mt();return e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(It,{title:"Min Price",perText:t,data:i,direct:s,loading:x,handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:r,isFullRange:g}),e.jsx(It,{title:"Max Price",perText:t,data:n,direct:s,loading:x,handleAddPrice:a,handleSubPrice:b,setTickDataBasedOnPrice:r,isFullRange:g})]})}const Us=({minPrice:t,maxPrice:s,perText:i,checked:n,onChange:g,loading:x})=>e.jsxs(z,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(z,{children:[e.jsx(Ir,{tooltip:e.jsxs(te,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",e.jsx(te,{as:"a",color:"primary",onClick:a=>{Tt(a),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(T,{children:"Farm rewards range"})]}),e.jsxs(z,{children:[x?e.jsx(Ue,{w:"120px",h:"14px"}):e.jsxs(T,{color:"primary_yellow",children:[t,"Â -Â ",s]}),e.jsx(T,{children:i})]})]}),e.jsx(ft,{isChecked:n,onChange:g})]}),Hs=({disabled:t,checked:s,onChange:i})=>e.jsxs(z,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(T,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(at,{tooltip:e.jsxs(W,{gap:"4px",align:"flex-start",children:[e.jsx(T,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(T,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})}):e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:i})]}),Wi=(t,s)=>({priceRangeMap:null,setPriceRangeMap:i=>{t(()=>({priceRangeMap:i}))},recommendRangesInfo:null,setRecommendRangesInfo:i=>{t(()=>({recommendRangesInfo:i}))},resetDeposit:()=>{t(()=>({priceRangeMap:null,recommendRangesInfo:null}))}}),bt=ys(Wi),Ui=[{label:"24H",key:"day"},{label:"7D",key:"week"},{label:"30D",key:"month"}];function $s({direct:t,wrapStyle:s={}}){const{priceRangeMap:i}=bt(),[n,g]=A.useState({type:"30D",key:"month"}),{minPriceForDate:x,maxPriceForDate:a,setMinPriceForDate:b,setMaxPriceForDate:r}=ee();A.useEffect(()=>{var p,S;let o="",d="";if(de(i)){const _=(p=i[n==null?void 0:n.key])==null?void 0:p[0],L=t?_:U(1).div(_).toString(),y=(S=i[n==null?void 0:n.key])==null?void 0:S[1],m=t?y:U(1).div(y).toString();o=we(L,6),d=we(m,6)}else o="-",d="-";b(o),r(d)},[t,n.key,i]);const{isApp:u}=Le();return e.jsxs(z,{w:"100%",justify:"space-between",...s,children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{children:[e.jsx(gt,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(ps,{w:"14px",border:"1px dashed"})}),e.jsxs(T,{fontSize:"12px",whiteSpace:"nowrap",children:[n==null?void 0:n.type,"Â Price Range"]})]}),e.jsxs(T,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?x:a,"Â -Â ",t?a:x]})]}),e.jsx(Me,{type:"outlineTab",tabList:Ui,currentTab:n,handleChangeTab:o=>{g({type:o.label,key:o.key})},isActive:(o,d)=>o.key===d.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function Hi(){const[t,s]=A.useState(""),i=(a,b)=>({default:{lower:a,upper:b,sort:3}}),n=a=>({"full range":{lower:lt.getMinIndex(a),upper:lt.getMaxIndex(a),sort:2}}),g=(a,b,r)=>{const u=U(r).mul(b==="unstable"?2:3).toNumber(),o=wr(Number(a),Number(r));return{custom:{lower:U(o).sub(u).toNumber(),upper:U(o).add(u).toNumber(),sort:1}}};return{getRecommendRangesList:async a=>{try{const b=a.farmsEffectTickLower&&a.farmsEffectTickUpper?i(a.farmsEffectTickLower,a.farmsEffectTickUpper):null,r=a.farmsEffectTickLower&&a.farmsEffectTickUpper?{ranges:{},type:""}:a==null?void 0:a.recommendRangesInfo;if(console.log(r,"recommendRangesResult"),r){s(r.type);const u=n(a.tickSpacing),o=g(a.currentTick,r.type,a.tickSpacing),d={...b,...r.ranges,...u,...o},p=Object.entries(d).map(([S,_])=>({key:S,..._})).sort((S,_)=>_.sort-S.sort);return de(r.ranges)||de(b)?{rangeList:p,error:!1}:{rangeList:p,error:!0}}else return{rangeList:[],error:!0}}catch(b){return console.error("Error in getRecommendRangesList:",b),{rangeList:[],error:!0}}},poolType:t}}const St=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},$i=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Vi={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Vs(t){const{getRecommendRangesList:s}=Hi(),[i,n]=A.useState(),{poolAddress:g,currentTick:x,tickSpacing:a,farmsEffectTickLower:b,farmsEffectTickUpper:r}=t;Le();const{handleInitTickData:u}=mt(),{apiPoolInfo:o,currentRange:d,setCurrentRange:p}=ee(),{lowerTickData:S,upperTickData:_,setLowerTickData:L,setUpperTickData:y,setTickDataLoading:m,tickDataLoading:h}=Te(),{recommendRangesInfo:f}=bt(),l=async()=>{var c,w,j;try{d||m(!0);const{rangeList:v,error:k}=await s({...t,recommendRangesInfo:f});if(n(v),k){if(p("custom"),!d&&(o!=null&&o.tokenA)&&(o!=null&&o.tokenB)){const C=v.find(M=>M.key==="custom");C&&u(C==null?void 0:C.lower,C==null?void 0:C.upper,o)}}else p((c=v[0])==null?void 0:c.key),!d&&(o!=null&&o.tokenA)&&(o!=null&&o.tokenB)&&u((w=v[0])==null?void 0:w.lower,(j=v[0])==null?void 0:j.upper,o)}catch(v){console.error(v)}finally{m(!1)}};return Ge(()=>{g&&x!==void 0&&a!==void 0&&l()},[g,a,f],{wait:500}),A.useEffect(()=>{if(i&&i.length>0&&de(S)&&de(_)){const c=i==null?void 0:i.find(w=>U(w.lower).eq(U(S==null?void 0:S.tick))&&U(w.upper).eq(U(_==null?void 0:_.tick)));c?c.key!==d&&p(c.key):p("custom")}},[S==null?void 0:S.tick,_==null?void 0:_.tick,i]),e.jsx(e.Fragment,{children:e.jsx(gr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:i&&i.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:i&&i.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:i==null?void 0:i.map((c,w)=>{var j,v;return e.jsx(yr,{label:$i(c.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:i!=null&&i.length?Vi[i.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{c.key!==d&&(p(c.key),o!=null&&o.tokenA&&(o!=null&&o.tokenB)&&u(c.lower,c.upper,o))},bg:c.key==d?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Zt,{decoding:"async",display:c.key===d?"block":"none",src:`/images/${(j=St(c.key,!0))==null?void 0:j.image}`,w:"72px",h:c.key===d?"22px":"0px",fallback:e.jsx(te,{bg:"background",w:"72px",h:c.key===d?"22px":"0px",borderRadius:"4px"})}),e.jsx(Zt,{decoding:"async",display:c.key===d?"none":"block",src:`/images/${(v=St(c.key,!1))==null?void 0:v.image}`,w:"72px",h:c.key===d?"0px":"22px",fallback:e.jsx(te,{bg:"background",w:"72px",h:c.key===d?"0px":"22px",borderRadius:"4px"})}),e.jsx(T,{color:c.key==d?"primary":"primary_gray",fontSize:"12px",children:St(c.key).name})]})},c.key)})})})}function Ns(t){var L,y,m,h,f;const[s,i]=A.useState(!1),{displayTokenA:n,displayTokenB:g,feeDisplay:x,clmmPool:a,vaultId:b,isReverse:r,isUnstableVault:u}=t,[o,d]=A.useState(""),{vaultStatsObj:p}=ti(),{getVaultsStats:S}=si();A.useEffect(()=>{if(de(p)&&p[a]){const l=p[a];d(l.category=="cetus"?l.vaultsTotalApyDisplay:l.vaultsApyDisplay)}else S()},[p,a]);const{isApp:_}=Le();return e.jsxs(e.Fragment,{children:[e.jsxs(W,{width:_?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(z,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(T,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(z,{children:[e.jsx(_e,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(ri,{vaultsLstApyDisplay:((L=p[a])==null?void 0:L.vaultsLstApyDisplay)||"",vaultsApyDisplay:((y=p[a])==null?void 0:y.vaultsApyDisplay)||"",vaultsTotalApyDisplay:((m=p[a])==null?void 0:m.vaultsTotalApyDisplay)||"",vaultsAprDisplay:(h=p[a])==null?void 0:h.vaultsAprDisplay,category:(f=p[a])==null?void 0:f.category}),value:o||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(je,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>i(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(z,{w:"100%",mt:"14px",children:e.jsxs(T,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",u?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(ei,{isOpen:s,setIsOpen:i,displayTokenA:n,displayTokenB:g,feeDisplay:x,clmmPool:a,vaultId:b,isReverse:r,isUnstableVault:u})]})}const Ds=({price:t,perText:s,wrapStyle:i,loading:n})=>e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:"flex-start",...i,children:[e.jsx(T,{children:"Current Price"}),e.jsxs(z,{as:"div",h:"14px",children:[n||t==="--"?e.jsx(Ue,{w:"66px",h:"14px",display:"inline-block"}):e.jsx(T,{as:"span",color:"text_caption",display:"inline-block",h:"14px",lineHeight:"14px",children:t}),e.jsx(T,{as:"span",display:"inline-block",h:"14px",lineHeight:"14px",children:` ${s}`})]})]});function Ni({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:n,leverage:g,direct:x,perText:a,rangeTabList:b,currentRangeTab:r,fromBalanceInfo:u,toBalanceInfo:o,fromAmountValue:d,toAmountValue:p,handleAmountChange:S,handleAdd:_,isFullRange:L,useZapIn:y,handleChangeZapIn:m}){var se,ce;const{currentPriceData:h,contractPoolInfo:f,apiPoolInfo:l,resetLiquidity:c,contractPoolInfoLoading:w,apiPoolInfoLoading:j,minPriceForDate:v,maxPriceForDate:k}=ee(),{lowerTickData:C,upperTickData:M}=Te(),{autoStakePosition:V,setAutoStakePosition:q,isFarmRewardsRange:$,fromAmount:K,toAmount:re,byAmountIn:J,percentMap:xe,fromToken:N,toToken:Y,totalAmount:Z,fromTokenLock:R,toTokenLock:ie}=Be(),{poolAddress:F}=ye(),ne=Q=>{q(Q.target.checked)},B=A.useMemo(()=>{if(h!=null&&h.currentPrice&&h.pool===F)return h==null?void 0:h.currentPrice},[h==null?void 0:h.currentPrice]),{priceImpactBasedOnMarket:E}=Bs(N,Y,x?"1":We(B),x?We(B):"1",!0),H=A.useMemo(()=>{if(E&&U(E).abs().gte(30))return U(E).gte(30)?`+${U(E).toFixed(0)}%`:`${U(E).toFixed(0)}%`},[E]);return A.useMemo(()=>!!(l!=null&&l.haveFarming)&&!!(l!=null&&l.displayFarmsEffectMaxPrice)&&!!(l!=null&&l.displayFarmsEffectMinPrice),[l==null?void 0:l.haveFarming,l==null?void 0:l.displayFarmsEffectMaxPrice,l==null?void 0:l.displayFarmsEffectMinPrice]),e.jsxs(te,{w:"100%",children:[e.jsx(De,{fontSize:"14px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx(Vs,{poolAddress:F,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:l==null?void 0:l.farmsEffectiveTickLower,farmsEffectTickUpper:l==null?void 0:l.farmsEffectiveTickUpper}),j?e.jsx(Ue,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(Me,{type:"outlineTab",tabList:b,currentTab:r,handleChangeTab:Q=>n(Q),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(Ds,{price:We(x?h==null?void 0:h.currentPrice:h.reverseCurrentPrice,6),perText:a,loading:w,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(Ss,{handleClickRefresh:()=>{},direct:x,minPriceData:x?C:M,maxPriceData:x?M:C,dashedMarkerLine:[v,k]})}),H&&e.jsx(pt,{tips:`The current pool price deviates largely from the real-time market price (${H}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",tipsFontSize:"12px"}),e.jsx($s,{direct:x,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(Ws,{perText:a,direct:x,isFullRange:L,minPriceData:x?C:M,maxPriceData:x?M:C}),R&&ie&&e.jsx(pt,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"})]}),e.jsxs(W,{mb:"20px",gap:"16px",children:[e.jsx(Cs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(T,{color:"text_caption",children:R&&ie?"--":g})}),(l==null?void 0:l.haveFarming)&&(l==null?void 0:l.displayFarmsEffectMaxPrice)&&(l==null?void 0:l.displayFarmsEffectMinPrice)&&e.jsx(Us,{minPrice:x?dt(l==null?void 0:l.displayFarmsEffectMinPrice):ut(l==null?void 0:l.displayFarmsEffectMaxPrice),maxPrice:x?dt(l==null?void 0:l.displayFarmsEffectMaxPrice):ut(l==null?void 0:l.displayFarmsEffectMinPrice),loading:j,perText:a,checked:$,onChange:i})]}),e.jsx(te,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:l!=null&&l.haveFarming?"1px solid":"none",borderColor:"border",children:e.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsx(De,{fontSize:"14px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsxs(z,{children:[e.jsx(os,{}),(l==null?void 0:l.haveZap)&&e.jsx(ks,{action:"Deposit",value:y,onChange:m})]})]}),e.jsx(W,{w:"100%",gap:"12px",children:e.jsx(te,{w:"100%",position:"relative",children:y&&!(R&&ie)?e.jsx(Rs,{apiPoolInfo:l,action:"Deposit",currentSqrtPrice:h==null?void 0:h.currentSqrtPrice,lowerTick:C==null?void 0:C.tick,upperTick:M==null?void 0:M.tick}):e.jsx(Fs,{onClick:n,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:K+"",amountValue:d,loading:!1,onChange:Q=>{var P;S(Q,!0,(N==null?void 0:N.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:N,onFocusChange:Q=>{var P;Q&&+(K+"")&&!J&&S(K+"",!0,(N==null?void 0:N.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},lock:{isLock:R&&!ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(o==null?void 0:o.balanceFormat)||"",value:re+"",amountValue:p,loading:!1,onFocusChange:Q=>{var P;Q&&+(re+"")&&J&&S(re+"",!1,(Y==null?void 0:Y.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},onChange:Q=>{var P;S(Q,!1,(Y==null?void 0:Y.coin_type)===((P=l==null?void 0:l.tokenA)==null?void 0:P.coin_type))},selectable:!1,placeholder:"0.0",token:Y,lock:{isLock:!R&&ie,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:R&&ie,style:{h:"224px"}}})})}),!y&&!!(l!=null&&l.poolAddress)&&!(R&&ie)&&e.jsxs(e.Fragment,{children:[e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[e.jsx(Mt,{totalAmount:Z,loading:!1}),e.jsx(Ft,{type:"image",percentMap:xe,lockRatio:R&&ie,tokenA:N,tokenB:Y,isReverse:(N==null?void 0:N.coin_type)!==((se=l==null?void 0:l.tokenA)==null?void 0:se.coin_type)})]}),e.jsx(je,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:_,children:t})]}),y&&e.jsx(Bt,{action:"Deposit",isReverse:(N==null?void 0:N.coin_type)!==((ce=l==null?void 0:l.tokenA)==null?void 0:ce.coin_type)}),(l==null?void 0:l.haveFarming)&&e.jsx(Hs,{disabled:R||ie,checked:V,onChange:ne})]})}),((l==null?void 0:l.isVaults)||(l==null?void 0:l.isUnstableVault))&&e.jsx(W,{mt:"16px",children:e.jsx(Ns,{displayTokenA:l==null?void 0:l.displayTokenA,displayTokenB:l==null?void 0:l.displayTokenB,feeDisplay:l==null?void 0:l.feeDisplay,clmmPool:l==null?void 0:l.poolAddress,vaultId:l==null?void 0:l.vaultId,isReverse:l==null?void 0:l.isReverse,isUnstableVault:l==null?void 0:l.isUnstableVault})})]})}function ns({children:t,title:s,wrapStyle:i={}}){return e.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...i,children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Di({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:i,onReverseClick:n,leverage:g,direct:x,perText:a,rangeTabList:b,currentRangeTab:r,fromBalanceInfo:u,toBalanceInfo:o,fromAmountValue:d,toAmountValue:p,handleAmountChange:S,handleAdd:_,isFullRange:L,useZapIn:y,handleChangeZapIn:m,handleSubmit:h}){var Q,P;const{currentPriceData:f,contractPoolInfo:l,apiPoolInfo:c,resetLiquidity:w,contractPoolInfoLoading:j,apiPoolInfoLoading:v,minPriceForDate:k,maxPriceForDate:C,currentRange:M}=ee();console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ apiPoolInfo:",c);const{lowerTickData:V,upperTickData:q}=Te(),{autoStakePosition:$,setAutoStakePosition:K,isFarmRewardsRange:re,fromAmount:J,toAmount:xe,byAmountIn:N,percentMap:Y,fromToken:Z,toToken:R,totalAmount:ie,fromTokenLock:F,toTokenLock:ne}=Be(),{poolAddress:B}=ye(),E=ue=>{K(ue.target.checked)},H=A.useMemo(()=>{if(f!=null&&f.currentPrice&&f.pool===B)return f==null?void 0:f.currentPrice},[f==null?void 0:f.currentPrice]),{priceImpactBasedOnMarket:se}=Bs(Z,R,x?"1":We(H),x?We(H):"1",!0),ce=A.useMemo(()=>{if(se&&U(se).abs().gte(30))return U(se).gte(30)?`+${U(se).toFixed(0)}%`:`${U(se).toFixed(0)}%`},[se]);return e.jsx(e.Fragment,{children:e.jsxs(z,{gap:"12px",align:"flex-start",children:[e.jsxs(ns,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!b||!b.length?e.jsx(Ue,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(Me,{type:"outlineTab",tabList:b,currentTab:r,handleChangeTab:ue=>n(ue),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(W,{w:"100%",gap:"12px",children:[e.jsx(z,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(z,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(Ds,{loading:v,price:de(f)?We(x?f==null?void 0:f.currentPrice:f.reverseCurrentPrice,6):"--",perText:a,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(z,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(W,{gap:"20px",children:[e.jsx(gt,{h:"226px",mt:"10px",children:e.jsx(Vs,{poolAddress:B,currentTick:l==null?void 0:l.current_tick_index,tickSpacing:l==null?void 0:l.tickSpacing,farmsEffectTickLower:c==null?void 0:c.farmsEffectiveTickLower,farmsEffectTickUpper:c==null?void 0:c.farmsEffectiveTickUpper})}),de(V)&&de(q)&&e.jsx(e.Fragment,{children:e.jsx(Cs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(T,{color:"text_caption",children:F&&ne?"--":g})})})]}),e.jsxs(W,{w:"100%",gap:"32px",children:[e.jsx(te,{w:"100%",h:"230px",children:e.jsx(Ss,{handleClickRefresh:()=>{},direct:x,minPriceData:x?V:q,maxPriceData:x?q:V,dashedMarkerLine:[k,C],currentRange:M})}),ce&&e.jsx(pt,{tips:`The current pool price deviates largely from the real-time market price (${ce}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",tipsFontSize:"12px"}),de(V)&&de(q)&&e.jsx($s,{direct:x,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(Ws,{perText:a,direct:x,isFullRange:L,minPriceData:x?V:q,maxPriceData:x?q:V}),F&&ne&&e.jsx(pt,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"}),(c==null?void 0:c.haveFarming)&&(c==null?void 0:c.displayFarmsEffectMaxPrice)&&(c==null?void 0:c.displayFarmsEffectMinPrice)&&e.jsx(Us,{minPrice:x?dt(c==null?void 0:c.displayFarmsEffectMinPrice):ut(c==null?void 0:c.displayFarmsEffectMaxPrice),maxPrice:x?dt(c==null?void 0:c.displayFarmsEffectMaxPrice):ut(c==null?void 0:c.displayFarmsEffectMinPrice),loading:v,perText:a,checked:re,onChange:i})]})]}),e.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(ns,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(z,{children:(c==null?void 0:c.haveZap)&&e.jsx(ks,{action:"Deposit",value:y,onChange:m})}),e.jsx(te,{w:"100%",position:"relative",children:y&&!(F&&ne)?e.jsx(Rs,{apiPoolInfo:c,action:"Deposit",currentSqrtPrice:f==null?void 0:f.currentSqrtPrice,lowerTick:V==null?void 0:V.tick,upperTick:q==null?void 0:q.tick}):e.jsx(e.Fragment,{children:e.jsx(Fs,{onClick:n,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:J,amountValue:d,loading:!1,onChange:ue=>{var G;S(ue,!0,(Z==null?void 0:Z.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:Z,onFocusChange:ue=>{var G;ue&&+(J+"")&&!N&&S(J+"",!0,(Z==null?void 0:Z.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},lock:{isLock:F&&!ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(o==null?void 0:o.balanceFormat)||"",value:xe,amountValue:p,loading:!1,onFocusChange:ue=>{var G;ue&&+(xe+"")&&N&&S(xe+"",!1,(R==null?void 0:R.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},onChange:ue=>{var G;S(ue,!1,(R==null?void 0:R.coin_type)===((G=c==null?void 0:c.tokenA)==null?void 0:G.coin_type))},selectable:!1,placeholder:"0.0",token:R,lock:{isLock:!F&&ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:F&&ne,style:{h:"224px"}}})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs(W,{w:"100%",gap:"8px",children:[!y&&!!(c!=null&&c.poolAddress)&&!(F&&ne)&&e.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:c!=null&&c.displayTokenA&&(c!=null&&c.displayTokenB)?"0 8px 16px":"0 16px",children:[e.jsx(je,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:s,isLoading:!1,onClick:_,children:t}),(c==null?void 0:c.displayTokenA)&&(c==null?void 0:c.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(Mt,{totalAmount:ie,loading:!1,valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(Ft,{type:"image",percentMap:Y,lockRatio:F&&ne,tokenA:Z,tokenB:R,isReverse:(Z==null?void 0:Z.coin_type)!==((Q=c==null?void 0:c.tokenA)==null?void 0:Q.coin_type)})]})]}),y&&e.jsx(Bt,{action:"Deposit",isReverse:(Z==null?void 0:Z.coin_type)!==((P=c==null?void 0:c.tokenA)==null?void 0:P.coin_type)}),(c==null?void 0:c.haveFarming)&&e.jsx(Hs,{disabled:F||ne,checked:$,onChange:E})]}),((c==null?void 0:c.isVaults)||(c==null?void 0:c.isUnstableVault))&&e.jsx(Ns,{displayTokenA:c==null?void 0:c.displayTokenA,displayTokenB:c==null?void 0:c.displayTokenB,feeDisplay:c==null?void 0:c.feeDisplay,clmmPool:c==null?void 0:c.poolAddress,vaultId:c==null?void 0:c.vaultId,isReverse:c==null?void 0:c.isReverse,isUnstableVault:c==null?void 0:c.isUnstableVault})]})]})]})})}function Oi({rangeTabList:t,currentFeeTier:s,getList:i,getPrice:n}){const{apiPoolInfo:g}=ee(),{zapAmount:x,currentZapToken:a}=_s(),{direct:b,perText:r,handleChangeIsFarmRewardsRange:u,onReverseClick:o,leverage:d,currentRangeTab:p,isFullRange:S}=Ei({rangeTabList:t}),{handleAmountChange:_,fromAmountValue:L,toAmountValue:y,fromBalanceInfo:m,toBalanceInfo:h,relatedPosId:f,nftOpen:l,setNftOpen:c,handleAdd:w,handleSubmit:j,useZapIn:v,handleChangeZapIn:k,confirmModalOpen:C,setConfirmModalOpen:M}=Fi(i,b),{btnText:V,btnDisabled:q}=Mi(),{isApp:$}=Le(),K={btnText:V,btnDisabled:q,handleChangeIsFarmRewardsRange:u,onReverseClick:o,leverage:d,direct:b,perText:r,rangeTabList:t,currentRangeTab:p,fromBalanceInfo:m,toBalanceInfo:h,fromAmountValue:L,toAmountValue:y,handleAmountChange:_,handleAdd:w,isFullRange:S,useZapIn:v,handleChangeZapIn:k,handleSubmit:j};return e.jsxs(e.Fragment,{children:[$?e.jsx(Ni,{...K}):e.jsx(Di,{...K}),C&&e.jsx(Bi,{onClose:()=>M(!1),data:{feeTier:s,zapData:v?{amount:x,token:a}:void 0},onSubmit:j}),l&&f&&de(g)&&e.jsx(zi,{onClose:()=>c(!1),tokenA:g==null?void 0:g.displayTokenA,tokenB:g==null?void 0:g.displayTokenB,posId:f,fee:g==null?void 0:g.feeDisplay,isReverse:g==null?void 0:g.isReverse})]})}const cs=(t,s,i)=>t&&s&&i?U(t).mul(s).div(U(10).pow(i)).toString():"--";function Os(){var w,j;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:i,setTokenBPrice:n,tokenAAmount:g,setTokenAAmount:x,tokenBAmount:a,setTokenBAmount:b,tokenAAmountUSD:r,setTokenAAmountUSD:u,tokenBAmountUSD:o,setTokenBAmountUSD:d,totalAmountUSD:p,setTotalAmountUSD:S,resetTvlInfo:_,tvlLoading:L,setTvlLoading:y}=ht(),{apiPoolInfo:m,contractPoolInfo:h}=ee(),f=async v=>{var k,C;try{const M=(k=Ee(v))==null?void 0:k.full_address,V=M=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":M,{prices:q}=await _r(`${(C=kt)==null?void 0:C.cetus_api}/v2/sui/price?base_symbol_address=${V}`);return q==null?void 0:q[0]}catch(M){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",M),"--"}},{poolAddress:l}=ye(),c=async()=>{var v,k,C,M;y(!0);try{if((v=m==null?void 0:m.tokenA)!=null&&v.coin_type){const V=await f((k=m==null?void 0:m.tokenA)==null?void 0:k.coin_type);V&&s(V)}if((C=m==null?void 0:m.tokenB)!=null&&C.coin_type){const V=await f((M=m==null?void 0:m.tokenB)==null?void 0:M.coin_type);V&&n(V)}}catch(V){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",V)}finally{y(!1)}};return A.useEffect(()=>{_()},[l]),A.useEffect(()=>()=>{_()},[]),A.useEffect(()=>{c()},[m==null?void 0:m.tvl,(w=m==null?void 0:m.tokenA)==null?void 0:w.coin_type,(j=m==null?void 0:m.tokenB)==null?void 0:j.coin_type]),A.useEffect(()=>{h!=null&&h.coinAmountA&&x(U(h==null?void 0:h.coinAmountA).sub((h==null?void 0:h.fee_protocol_coin_a)||"0").toString())},[h==null?void 0:h.coinAmountA,h==null?void 0:h.fee_protocol_coin_a,l]),A.useEffect(()=>{h!=null&&h.coinAmountB&&b(U(h==null?void 0:h.coinAmountB).sub((h==null?void 0:h.fee_protocol_coin_b)||"0").toString())},[h==null?void 0:h.coinAmountB,h==null?void 0:h.fee_protocol_coin_b,l]),A.useEffect(()=>{g&&(t!=null&&t.price)&&(m!=null&&m.tokenA.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenA.decimals))&&u(cs(g,t==null?void 0:t.price,m==null?void 0:m.tokenA.decimals))},[g,t]),A.useEffect(()=>{a&&(i!=null&&i.price)&&(m!=null&&m.tokenB.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenB.decimals))&&d(cs(a,i==null?void 0:i.price,m==null?void 0:m.tokenB.decimals))},[a,i]),A.useEffect(()=>{S(r&&o&&r!=="--"&&o!=="--"?U(r).plus(o).toString():"--")},[r,o]),{tokenAPrice:t,tokenBPrice:i,tokenAAmount:g,tokenBAmount:a,tokenAAmountUSD:r,tokenBAmountUSD:o,totalAmountUSD:p,setTotalAmountUSD:S,tvlLoading:L}}function Gi(){const{fetchByApi:t}=gs(),{setPriceRangeMap:s,setRecommendRangesInfo:i}=bt();return{fetchPriceRange:async(g,x,a)=>{var b;try{const r=await t(kr,"GET",{pool:g}),u=Object.fromEntries((b=r==null?void 0:r.ranges)==null?void 0:b.map(o=>[o==null?void 0:o.dateType,[Xt.tickIndexToPrice(o==null?void 0:o.lower,x.decimals,a.decimals).toString(),Xt.tickIndexToPrice(o==null?void 0:o.upper,x.decimals,a.decimals).toString()]]));return s(u),i({ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}),{rangesWithDateTypeMap:u,recommendRanges:{ranges:r==null?void 0:r.recommender,type:r==null?void 0:r.type}}}catch(r){return console.error("Error in fetchPriceRange:",r),s({}),i({ranges:{},type:""}),{rangesWithDateTypeMap:{},recommendRanges:{ranges:{},type:""}}}}}}function Zi(){const{tab:t,poolAddress:s,from:i,to:n,fee:g}=ye(),{getPoolList:x}=Qr(),[a,b]=A.useState([]),{apiPoolInfo:r,setApiPoolInfo:u,setApiPoolInfoLoading:o,setNetError:d}=ee(),p=Ze(),{fetchTokenInfo:S}=Ms(),_=async({poolAddress:L,from:y,to:m})=>{var h,f,l,c;try{o(!0);let w,j;if(L&&L!=="undefined"){const v=await x({pool:L});v&&v.list&&v.list.length?(j=v.list[0],w=await x({coin_type:`${(h=j==null?void 0:j.displayTokenA)==null?void 0:h.coin_type},${(f=j==null?void 0:j.displayTokenB)==null?void 0:f.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):r&&de(r)?(j=r,w={list:a}):(j={poolAddress:L,displayTokenA:void 0,displayTokenB:void 0},w={list:[]}),o(!1)}else if(y&&m&&y!=="undefined"&&m!=="undefined"&&y!==m){const v=await x({coin_type:`${y},${m}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(v,"res_getPoolList"),v&&v.list&&v.list.length)if(g&&g!=="undefined"){const k=(l=v==null?void 0:v.list)==null?void 0:l.find(C=>U(C==null?void 0:C.feeRate).eq(g));if(k)p(t?`/liquidity?tab=${t}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`);else{const C=At(v==null?void 0:v.list,M=>Number((M==null?void 0:M.tvl)||"0"));p(t?`/liquidity?tab=${t}&poolAddress=${C==null?void 0:C.poolAddress}`:`/liquidity?poolAddress=${C==null?void 0:C.poolAddress}`)}}else{let k=At(v==null?void 0:v.list,C=>Number((C==null?void 0:C.tvl)||"0"));k||(k=At(v==null?void 0:v.list,C=>{var M;return Number(((M=C==null?void 0:C.object)==null?void 0:M.liquidity)||"0")}),k||(k=v==null?void 0:v.list[0])),p(t?`/liquidity?tab=${t}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}else{const k=await S([y,m].filter(Boolean)),C=k==null?void 0:k.get(y),M=k==null?void 0:k.get(m);j={poolAddress:void 0,displayTokenA:C,displayTokenB:M},w={list:[]},o(!1)}}else(!y||y==="undefined")&&m&&m!=="undefined"&&(j={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await S(m)}),(!m||m==="undefined")&&y&&y!=="undefined"&&(j={poolAddress:void 0,displayTokenA:await S(y),displayTokenB:void 0}),w={list:[]},o(!1);w&&(d(!1),b(w==null?void 0:w.list),console.log(j,"setApiPoolInfo"),j&&(j!=null&&j.poolAddress&&L?(j==null?void 0:j.poolAddress)===L&&u(j):u(j))),o(!1)}catch(w){if(w!=null&&w.list&&((c=w==null?void 0:w.list)==null?void 0:c.length)===1){d(!0);const j=w==null?void 0:w.list[0];console.log(w==null?void 0:w.list,"setApiPoolInfo"),u(j),b([]),o(!1)}}};return A.useEffect(()=>{s&&s==="undefined"||_({poolAddress:s,from:i,to:n})},[s,i,n]),{getList:_,relatedPoolList:a}}function Ki(){var p,S,_,L;const{poolAddress:t}=ye(),{apiPoolInfo:s,apiPoolInfoLoading:i}=ee(),{quoteWhiteTokenList:n}=Ts(),{getList:g,relatedPoolList:x}=Zi(),a=A.useMemo(()=>{var m,h;const y=ii(x);return y?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(m=es)==null?void 0:m.map(f=>{var c,w;const l=((c=y.find(j=>j.feeRate===f.feeRate))==null?void 0:c.title)||f.title;return{...f,title:l,poolAddress:(w=y.find(j=>j.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:l==="Not Created"&&!ze(s==null?void 0:s.tokenA,n)&&!ze(s==null?void 0:s.tokenB,n)}}):(h=es)==null?void 0:h.map(f=>{var c,w;const l=((c=y.find(j=>j.feeRate===f.feeRate))==null?void 0:c.title)||f.title;return{...f,title:l,poolAddress:(w=y.find(j=>j.feeRate===f.feeRate))==null?void 0:w.poolAddress,disabled:!ze(s==null?void 0:s.displayTokenA,n)&&!ze(s==null?void 0:s.displayTokenB,n)}}):[]},[JSON.stringify(x),JSON.stringify(n),(p=s==null?void 0:s.displayTokenA)==null?void 0:p.coin_type,(S=s==null?void 0:s.displayTokenB)==null?void 0:S.coin_type]),b=A.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(y=>({label:y==null?void 0:y.symbol,key:y==null?void 0:y.coin_type,isToken:!0,imgInfo:{src:y==null?void 0:y.logo_url,w:"16px",h:"16px",coinType:y?y==null?void 0:y.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(_=s==null?void 0:s.displayTokenA)==null?void 0:_.symbol,(L=s==null?void 0:s.displayTokenB)==null?void 0:L.symbol]),r=A.useMemo(()=>{const y=a==null?void 0:a.find(m=>m.poolAddress===t);return y||s},[JSON.stringify(a),t,JSON.stringify(s)]),{fetchPriceRange:u}=Gi(),o=async y=>{console.log("ðŸš€ ~ setPriceRangeMap ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",y),await u(y,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB)};_t(()=>{t&&t===(s==null?void 0:s.poolAddress)&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)&&o(t)},[t,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);const d=A.useMemo(()=>{const y=[];return s!=null&&s.displayTokenA&&y.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&y.push(s==null?void 0:s.displayTokenB),y},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:g,feeTierList:a,apiPoolInfo:s,rangeTabList:b,currentFeeTier:r,apiPoolInfoLoading:i,quoteWhiteTokenList:n,warningTokenList:d}}var ot=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(ot||{});const ke=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Yi({apiPoolInfo:t}){var ie,F,ne;const{tab:s,poolAddress:i}=ye(),n=Ze(),[g,x]=A.useState(),[a,b]=A.useState(ke),[r,u]=A.useState(((ie=ke==null?void 0:ke.find(B=>B.key===s))==null?void 0:ie.key)||ke[0].key),[o,d]=A.useState(),[p,S]=A.useState(),{posBaseListGroupByPool:_}=As(),{addFavorites:L,removeFavorites:y}=ci(),{poolFavoriteIds:m}=ai(),{fromToken:h,toToken:f}=Be(),{fetchTokenPrices:l}=bs(),{setFromCoin:c,setToCoin:w}=li(),{setIsOpen:j}=di(),{isSwapWidgetDisplay:v}=Rr(),k=()=>{var B,E;v?j(!0):n(`/swap/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(E=t==null?void 0:t.displayTokenB)==null?void 0:E.coin_type}`)};A.useEffect(()=>(h&&f&&(c(h),w(f)),()=>{c(kt.clmm_swap.from_coin),w(kt.clmm_swap.to_coin)}),[h,f]);const C=A.useMemo(()=>{if(i&&i!=="undefined"){const B=_[i.toLowerCase()||""];return B&&(B!=null&&B.list)&&(B==null?void 0:B.list.length)>0?B==null?void 0:B.list.length:void 0}},[JSON.stringify(_),i]);A.useEffect(()=>{b(ke==null?void 0:ke.map(B=>({...B,num:B.label==="My Positions"&&r==="positions"?C:void 0})))},[C,r]),A.useLayoutEffect(()=>{s&&s!==r&&u(s)},[s]);const M=A.useMemo(()=>m==null?void 0:m.includes(i||""),[JSON.stringify(m),i]),V=B=>{Tt(B),i&&(M?y(i):L(i))},q=A.useMemo(()=>M?{tooltip:"Remove from Watchlist",xlinkHref:"#icon-icon_star_sel",svgFill:"primary_blue",svgHover:"primary"}:{tooltip:"Add to Watchlist",xlinkHref:"#icon-icon_star",svgFill:"text_paragraph",svgHover:"text_caption"},[M]);A.useEffect(()=>{d(t==null?void 0:t.displayTokenA),S(t==null?void 0:t.displayTokenB)},[(F=t==null?void 0:t.displayTokenA)==null?void 0:F.coin_type,(ne=t==null?void 0:t.displayTokenB)==null?void 0:ne.coin_type]);const $=()=>{var B,E;n(`/create-pool/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(E=t==null?void 0:t.displayTokenB)==null?void 0:E.coin_type}/${g==null?void 0:g.feeRate}`)},K=()=>{var E;const B=[];h&&B.push(h.coin_type),f&&B.push(f.coin_type),t!=null&&t.miningRewardList&&((E=t==null?void 0:t.miningRewardList)==null||E.forEach(H=>{B.push(Ee(H==null?void 0:H.coinType).full_address)})),B.length>0&&l(Array.from(new Set(B.filter(H=>H&&H!=="undefined"))))};A.useEffect(()=>{K()},[h==null?void 0:h.coin_type,f==null?void 0:f.coin_type]);const{fetchTokenInfo:re}=Ms(),{setApiPoolInfo:J,apiPoolInfoLoading:xe,netError:N}=ee(),{setTotalAmountUSD:Y}=Os(),Z=A.useCallback(async(B,E,H,se,ce,Q)=>{var Ke,He,Ye,Qe,Fe;const P=Object.keys(ot).find(jt=>jt===r),ue=[se,ce].filter(Boolean),G=await re(ue);if(H!=null&&H.coin_type||(Ke=G==null?void 0:G.get(ce||""))!=null&&Ke.coin_type)if(Ee(B==null?void 0:B.coin_type).full_address===Ee((H==null?void 0:H.coin_type)||((He=G==null?void 0:G.get(ce||""))==null?void 0:He.coin_type)||"").full_address)d(p),S(o);else{if(Ee(B==null?void 0:B.coin_type).full_address===Ee((E==null?void 0:E.coin_type)||((Ye=G==null?void 0:G.get(se||""))==null?void 0:Ye.coin_type)||"").full_address)return;n(Q?`/liquidity?tab=${P}&from=${B==null?void 0:B.coin_type}&to=${(H==null?void 0:H.coin_type)||((Qe=G==null?void 0:G.get(ce||""))==null?void 0:Qe.coin_type)}`:`/liquidity?tab=${P}&from=${(H==null?void 0:H.coin_type)||((Fe=G==null?void 0:G.get(ce||""))==null?void 0:Fe.coin_type)}&to=${B==null?void 0:B.coin_type}`),J(null),Y("")}else n(Q?`/liquidity?tab=${P}&from=${B==null?void 0:B.coin_type}`:`/liquidity?tab=${P}&to=${B==null?void 0:B.coin_type}`),J(null),Y("")},[o,p,r]),R=A.useCallback(async(B,E)=>{const H=await re(B||"");return{value:E||(B?H:void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:N,tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!E&&xe}},[N,xe]);return{currentTab:r,setCurrentTab:u,tabList:a,favoriteStyle:q,onChangeFavorites:V,selectedTokenA:o,selectedTokenB:p,setSelectedTokenA:d,setSelectedTokenB:S,onConfirm:$,feeTier:g,setFeeTier:x,refreshMarketPrice:K,onJump2Swap:k,handleSelectToken:Z,getSelectTokenProps:R}}function Qi(){const{currentAccount:t}=yt(),{apiPoolInfo:s,resetLiquidity:i,setManualRefresh:n,setCurrentPriceData:g}=ee(),{feeTierList:x,currentFeeTier:a,rangeTabList:b,getList:r,quoteWhiteTokenList:u,warningTokenList:o}=Ki(),{poolAddress:d}=ye(),{handleResetRange:p}=mt(),{resetAddLiquidity:S,setFromToken:_,setToToken:L}=Be(),{resetDeposit:y}=bt(),{fetchAccountBalance:m}=Ls(),{getContractPoolInfo:h}=vs(),{getCurrentPrice:f}=ws(),{currentTab:l,setCurrentTab:c,tabList:w,favoriteStyle:j,onChangeFavorites:v,selectedTokenA:k,selectedTokenB:C,setSelectedTokenA:M,setSelectedTokenB:V,onConfirm:q,setFeeTier:$,refreshMarketPrice:K,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}=Yi({apiPoolInfo:s});A.useEffect(()=>{de(s)&&(_(s==null?void 0:s.displayTokenA),L(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const N=async()=>{if(d&&s&&d===(s==null?void 0:s.poolAddress)){const R=await h(d);R&&f(R==null?void 0:R.current_sqrt_price,s)}},Y=()=>{K==null||K(),N==null||N()},Z=async R=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),R&&n(!0),d&&d!=="undefined"&&await r({poolAddress:d}),t!=null&&t.address&&await m(),Y(),n(!1)};return A.useEffect(()=>(t!=null&&t.address&&m(),g({}),()=>{p(),S(),i(),y()}),[]),A.useEffect(()=>{d&&(s==null?void 0:s.poolAddress)!==d&&(p(),S(),i(),y()),d&&d===(s==null?void 0:s.poolAddress)&&N()},[d,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:a,rangeTabList:b,quoteWhiteTokenList:u,warningTokenList:o,currentTab:l,setCurrentTab:c,tabList:w,favoriteStyle:j,onChangeFavorites:v,selectedTokenA:k,selectedTokenB:C,setSelectedTokenA:M,setSelectedTokenB:V,onConfirm:q,setFeeTier:$,handleRefresh:Z,handleGetPrice:N,onJump2Swap:re,handleSelectToken:J,getSelectTokenProps:xe}}function _c(){const t=Ze(),{apiPoolInfo:s,apiPoolInfoLoading:i,currentPriceData:n,netError:g}=ee(),{poolAddress:x,from:a,to:b}=ye(),{feeTierList:r,currentFeeTier:u,rangeTabList:o,quoteWhiteTokenList:d,warningTokenList:p,currentTab:S,setCurrentTab:_,tabList:L,favoriteStyle:y,onChangeFavorites:m,selectedTokenA:h,selectedTokenB:f,onConfirm:l,setFeeTier:c,handleRefresh:w,handleGetPrice:j,onJump2Swap:v,handleSelectToken:k,getSelectTokenProps:C}=Qi(),{isApp:M}=Le(),{isOpen:V,onOpen:q,onClose:$}=mr(),{totalAmountUSD:K,tvlLoading:re}=Os(),J=x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB),{tooltip:xe,xlinkHref:N,svgFill:Y,svgHover:Z}=y,[R,ie]=A.useState({}),[F,ne]=A.useState({}),B=async()=>{const E=await C(a,h),H=await C(b,f);ie(E),ne(H)};return A.useEffect(()=>{B()},[a,b,h,f]),e.jsxs(e.Fragment,{children:[e.jsxs(te,{w:"100%",mt:"20px",children:[e.jsxs(z,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(ui,{text:"Pools",onClick:()=>t("/pools")}),J&&e.jsxs(z,{gap:"8px",children:[e.jsx(at,{placement:"top",tooltip:xe,children:e.jsx(je,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:m,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:Z}}},children:e.jsx(Ce,{xlinkHref:N,svgFill:Y,svgHover:Z,fontSize:"18px"})})}),e.jsx(at,{placement:"top",tooltip:"Trade",children:e.jsx(je,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:v,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(Ce,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(at,{placement:"top",tooltip:"Refresh",children:e.jsx(te,{children:e.jsx(xi,{handleRefresh:w,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Pt,{onChange:E=>{k(E,h,f,a,b,!0)},...R}),e.jsx(Pt,{onChange:E=>{k(E,f,h,b,a,!1)},...F})]}),e.jsx(ni,{value:u,loading:!u&&i,feeTierList:r,disabled:g,onChange:E=>{E!=null&&E.poolAddress?t(`/liquidity?poolAddress=${E==null?void 0:E.poolAddress}`):(c(E),q())}})]}),J&&e.jsx(Ti,{apiPoolInfo:s,totalTvl:K,apiPoolInfoLoading:i,tvlLoading:re})]}),J?e.jsxs(e.Fragment,{children:[e.jsxs(be,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(Me,{type:"borderTab",tabList:L,currentTab:S,handleChangeTab:E=>{const H=Object.keys(ot).find(se=>ot[se]===E.label);x&&t(`/liquidity?tab=${H}&poolAddress=${x}`),_(H)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:M?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:M?"14px":"16px",fontWeight:"500"}}),S==="deposit"&&!M&&e.jsx(te,{mt:"24px",children:e.jsx(os,{})}),S!=="deposit"&&s&&e.jsxs(be,{w:M?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(T,{children:"Current Price"}),e.jsx(pi,{noCenter:!!M,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:ct(s!=null&&s.isReverse?n==null?void 0:n.reverseCurrentPrice:n==null?void 0:n.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:M?{w:"100%"}:{}})]})]}),e.jsx(te,{h:{base:"20px",lg:"8px"}}),S==="deposit"&&e.jsx(Oi,{rangeTabList:o,getList:w,getPrice:j,currentFeeTier:u}),S==="positions"&&e.jsx(Li,{}),S==="analytics"&&e.jsx(Ri,{})]}):e.jsx(te,{mt:"20px",children:!s&&i?e.jsx(gt,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Rt,{})}):e.jsx(Ne,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(W,{children:h&&f?ze(h,d)||ze(f,d)?e.jsxs(e.Fragment,{children:[e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(T,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(je,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{$(),l()},children:"Initialized Pool"})]}):e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(oi,{tokensInfo:p,waringModalCancel:E=>{t("/pools")}}),e.jsx(Xr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:V,onClose:$,onConfirm:l})]})}export{_c as default};
//# sourceMappingURL=Liquidity-DkyDB0z6.js.map
