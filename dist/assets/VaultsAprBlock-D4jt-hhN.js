import{u as Se}from"./swapWidget-Bq2nR4RL.js";import{R as te,aM as be,u as ve,z as _0,aN as fe,a0 as l0,s as ge,v as S0,w as pe,k as H0,n as X0,j as le,aO as xe,aa as F0,aI as ee,a3 as B0,M as u0,p as M0,aP as G0,y as J0,d,aq as Ve,aQ as he,aL as Te,r as Q0,t as L0,aR as ue,aS as ae,ai as Y0,aT as se,a4 as W0,Q as Ce,c as De,F as we}from"./index-C9eB4n05.js";import{a as i,j as T0,V as oe,H as me,C as Pe,T as Ue}from"./vendor-BulRdKUe.js";import{a as k0}from"./useWrapPoolData-CyVbotlF.js";import{u as Ee}from"./useFavoritePool-DGv9LiJ7.js";import{c as ye}from"./useGetPoolList-arI9iVq2.js";import{u as ne}from"./useToken-CSs04qtp.js";import{u as Z0}from"./useTokenBalance-BoTga07n.js";import{u as ie}from"./useTransaction-CEDCgy0u.js";import{u as re}from"./global-DOQtmW25.js";import{M as ce}from"./msafe-oYBkW7LJ.js";import{f as v0}from"./index-BtIu2PeQ.js";import{v as j0}from"./v4-C6aID195.js";import{u as Le}from"./useFindBestRouting-CvNgPphh.js";import{H as z0}from"./HTextLabelBox-CRyapKB_.js";const Oe=(s,r)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:a=>{s(()=>({vaultStatsObj:a}))},vaultBaseList:[],setVaultBaseList:a=>{s(()=>({vaultBaseList:a}))},setVaultBaseListLoading:a=>{s(()=>({vaultBaseListLoading:a}))},setVaultStatsLoading:a=>{s(()=>({vaultStatsLoading:a}))},setContractVaultObj:a=>{const e=r().contractVaultObj;e[a.id]=a,s(()=>({contractVaultObj:{...e}}))},setContractVaultObjLoading:a=>{s(()=>({contractVaultObjLoading:a}))},setContractClmmPoolObjLoading:a=>{s(()=>({contractClmmPoolObjLoading:a}))},setContractClmmPoolObj:a=>{const e=r().contractClmmPoolObj;e[a.poolAddress]=a,s(()=>({contractClmmPoolObj:{...e}}))},setHoldTotalValue:(a,e)=>{const l=r().holdTotalValue;l[a]=e,s(()=>({holdTotalValue:{...l}}))},setDetailRefreshCount:a=>{s(()=>({detailRefreshCount:a}))},lpTokenInfo:{},setLpTokenInfo:a=>{s(()=>({lpTokenInfo:{...r().lpTokenInfo,...a}}))}}),K0=te(be(Oe,{name:"useVaultsStore2",partialize:s=>{const{vaultBaseList:r,vaultStatsObj:a,contractVaultObj:e,contractClmmPoolObj:l,lpTokenInfo:t}=s;return{vaultBaseList:r,vaultStatsObj:a,contractVaultObj:e,contractClmmPoolObj:l,lpTokenInfo:t}}}));function je(s,r){return{...s,vaultsTvl:(r==null?void 0:r.vaultsTvl)||"--",vaultsTvlDisplay:(r==null?void 0:r.vaultsTvlDisplay)||"--",vaultsApy:(r==null?void 0:r.vaultsApy)||"--",vaultsApyDisplay:(r==null?void 0:r.vaultsApyDisplay)||"--",vaultsTotalApy:(r==null?void 0:r.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(r==null?void 0:r.vaultsTotalApyDisplay)||"--",vaultsLstApy:(r==null?void 0:r.vaultsLstApy)||"--",vaultsLstApyDisplay:(r==null?void 0:r.vaultsLstApyDisplay)||"--",vaultsApr:(r==null?void 0:r.vaultsApr)||"--",vaultsAprDisplay:(r==null?void 0:r.vaultsAprDisplay)||"--",vaultsId:(r==null?void 0:r.vaultsId)||"",clmmPoolAddress:(r==null?void 0:r.clmmPoolAddress)||"",amountPerLpA:(r==null?void 0:r.amountPerLpA)||"0",amountPerLpB:(r==null?void 0:r.amountPerLpB)||"0",category:(r==null?void 0:r.category)||"",hardCapUSD:(r==null?void 0:r.hardCapUSD)||"--",depositRatioDisplay:(r==null?void 0:r.depositRatioDisplay)||"--",depositRatio:(r==null?void 0:r.depositRatio)||0,lpTokenType:(r==null?void 0:r.lpTokenType)||""}}const va={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},Re=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_verified:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_verified:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_verified:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_verified:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_verified:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_verified:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_verified:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_verified:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function Fe(){const{fetchByApi:s}=ve(),{getFavoritePoolList:r}=Ee(),{setVaultStatsObj:a,setVaultBaseList:e,vaultBaseList:l,vaultStatsObj:t,setVaultStatsLoading:o,setVaultBaseListLoading:f}=K0(),O=async(B=!0,y,z)=>{try{B&&f(!0);const c=await r({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:y}),N=c==null?void 0:c.list.map(T=>{var b,j,Q,G,u;const k=[_0((b=T==null?void 0:T.tokenA)==null?void 0:b.coin_type),_0((j=T==null?void 0:T.tokenB)==null?void 0:j.coin_type)],v=T.isReverse?k.reverse():k,F=(Q=T==null?void 0:T.miningRewardList)==null?void 0:Q.map(s0=>_0(s0==null?void 0:s0.coinType)),W=(G=T==null?void 0:T.miningRewardList)==null?void 0:G.map(s0=>_0(s0==null?void 0:s0.coinType)),P=Array.from(new Set([...v,...F,...W]));return{...T,vaultsRewards:P,category:(u=z[T.poolAddress])==null?void 0:u.category}});return console.log("🚀 ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",N),N.length>0&&e(N),N}catch(c){console.log("getVaultBaseList Error:",c)}finally{f(!1)}return[]},_=async()=>{var B;try{o(!0);const y=await s("/v3/sui/vaults/pools","GET"),z={};if(y!=null&&y.list)return(B=y==null?void 0:y.list)==null||B.forEach(c=>{var N,T;if(c.display||!fe){const k=c==null?void 0:c.clmm_pool,v=c==null?void 0:c.id,F=c.category=="cetus"?l0(c==null?void 0:c.apy).add(l0(c.lst_apy)).toString():l0(c.apr).add(l0(c.apy)).toString(),W=k0(F,!0,!0),P=c==null?void 0:c.apy,b=k0(P,!0),j=c==null?void 0:c.lst_apy,Q=k0(j,!0),G=c==null?void 0:c.tvl,u=ge(G,"$"),s0=c==null?void 0:c.apr,A=k0(s0,!0),b0=c==null?void 0:c.hard_cap_usd,d0=l0(G).div(l0(b0)).mul(100),t0=S0(d0,2);z[k]={vaultsApy:P,vaultsApyDisplay:b,vaultsTotalApy:F,vaultsTotalApyDisplay:W,vaultsLstApy:j,vaultsLstApyDisplay:Q,vaultsApr:s0,vaultsAprDisplay:A,clmmPoolAddress:k,vaultsId:v,vaultsTvl:G,vaultsTvlDisplay:u,amountPerLpA:(N=c==null?void 0:c.reward_per_lp)==null?void 0:N.amount_a_per_lp,amountPerLpB:(T=c==null?void 0:c.reward_per_lp)==null?void 0:T.amount_b_per_lp,category:c.category,hardCapUSD:b0,depositRatio:d0,depositRatioDisplay:t0,lpTokenType:c==null?void 0:c.lp_type}}}),a(z),{vaultsStatsObj:z,vaultsList:y==null?void 0:y.list.filter(c=>c.display||!fe)}}catch(y){return console.log("🚀🚀🚀 ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",y),t}finally{o(!1)}return{}},J=async B=>{try{const{vaultsStatsObj:y,vaultsList:z}=await _(),c=z.map(T=>T.clmm_pool),N=await O(!0,c,y);return D(B,N,y)}catch(y){return console.error("getVaultList Error:",y),Y(B)}},Y=B=>{try{const y=l,z=t;if(y&&y.length>0)return D(B,y,z);throw Error("Cache is null")}catch(y){return console.error("getVaultListFromCache Error:",y),Re}},D=(B,y,z)=>{const{sortRule:c,sortType:N}=B,T=y==null?void 0:y.map(v=>{const F=z==null?void 0:z[v.poolAddress];return je(v,F)}),k=T==null?void 0:T.sort((v,F)=>{var W,P,b,j;return N==="apr"?c==="desc"?((W=F.vaultsTotalApy)==null?void 0:W.replace("%",""))-((P=v.vaultsTotalApy)==null?void 0:P.replace("%","")):((b=v.vaultsTotalApy)==null?void 0:b.replace("%",""))-((j=F.vaultsTotalApy)==null?void 0:j.replace("%","")):c==="desc"?F.vaultsTvl-v.vaultsTvl:v.vaultsTvl-F.vaultsTvl});return console.log("🚀🚀🚀 ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",k),k};return{getVaultBaseList:O,getVaultsStats:_,getVaultListFromCache:Y,getVaultList:J}}function Me(s){const{getVaultList:r,getVaultListFromCache:a}=Fe(),[e,l]=i.useState(void 0),[t,o]=i.useState(!1),{setFromCoin:f,setToCoin:O}=Se(),_=async(Y,D)=>{var z;(e===void 0||D)&&o(!0);const B=await r({sortRule:"desc",sortType:"apr"}),y=((z=B==null?void 0:B.filter(c=>c.vaultsId===Y))==null?void 0:z[0])||null;return o(!0),y&&l(y),y},J=Y=>{var y;const D=a({sortRule:"desc",sortType:"apr"});return((y=D==null?void 0:D.filter(z=>z.vaultsId===Y))==null?void 0:y[0])||null};return i.useEffect(()=>{if(s){const Y=J(s);Y&&l(Y),_(s,!1)}},[s]),i.useEffect(()=>(e&&(f(e==null?void 0:e.displayTokenA),O(e==null?void 0:e.displayTokenB)),()=>{f(pe.clmm_swap.from_coin),O(pe.clmm_swap.to_coin)}),[e==null?void 0:e.vaultsId]),{vaultInfoLoading:t,apiVaultInfo:e,getApiVaultInfo:_}}const Ie=(s,r)=>({amountInputA:"",amountInputB:"",setAmountInputA:a=>s({amountInputA:a}),setAmountInputB:a=>s({amountInputB:a}),pythPriceMap:{},setPythPriceMap:a=>s(()=>({pythPriceMap:a}))}),_e=te(Ie),$e=(s,r)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,holdVaultsObj:{},holdTotalValue:{},contractClmmPoolObj:{},contractVaultObj:{},setContractVaultObj:a=>{const e=r().contractVaultObj;e[a.id]=a,s(()=>({contractVaultObj:{...e}}))},setContractVaultObjLoading:a=>{s(()=>({contractVaultObjLoading:a}))},setContractClmmPoolObjLoading:a=>{s(()=>({contractClmmPoolObjLoading:a}))},setContractClmmPoolObj:a=>{const e=r().contractClmmPoolObj;e[a.poolAddress]=a,s(()=>({contractClmmPoolObj:{...e}}))},setHoldTotalValue:(a,e)=>{const l=r().holdTotalValue;l[a]=e,s(()=>({holdTotalValue:{...l}}))},setDetailRefreshCount:a=>{s(()=>({detailRefreshCount:a}))},lpTokenInfo:{},setLpTokenInfo:a=>{const e=r().lpTokenInfo;s(()=>({lpTokenInfo:{...e,[a.coin_type]:a}}))}}),A0=te(be($e,{name:"useUnstableVaultsListStore",partialize:s=>{const{contractVaultObj:r,contractClmmPoolObj:a}=s;return{contractVaultObj:r,contractClmmPoolObj:a}}})),Ne=(s,r)=>({vaultsCoinPercent:{},setVaultsCoinPercent:a=>s(()=>({vaultsCoinPercent:a})),vaultsCoinAValue:"",vaultsCoinBValue:"",setVaultsCoinAValue:a=>s(()=>({vaultsCoinAValue:a})),setVaultsCoinBValue:a=>s(()=>({vaultsCoinBValue:a})),vaultCoinAmounts:{coinAmountA:"",coinAmountB:"",displayCoinA:"",displayCoinB:""},setVaultCoinAmounts:a=>s(()=>({vaultCoinAmounts:a}))}),Ge=te(Ne);function qe(s){const{contractVaultObj:r}=A0();return{contractVault:i.useMemo(()=>{if(s)return r[s]},[r,s])}}function ze(s){const{contractClmmPoolObj:r}=A0();return{contractClmmInfo:i.useMemo(()=>{if(s)return r[s]},[r,s])}}function xa(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function We(s,r,a,e,l=!1,t){var x;const{volatileVaultsSdk:o}=H0();X0();const{currentAccount:f}=le(),{pythPriceMap:O}=_e(),_=i.useMemo(()=>O||{},[O]),{setContractVaultObjLoading:J,setContractVaultObj:Y,setContractClmmPoolObj:D,setContractClmmPoolObjLoading:B,setHoldTotalValue:y,holdTotalValue:z,contractClmmPoolObjLoading:c,contractVaultObjLoading:N}=A0(),{vaultsCoinPercent:T,setVaultsCoinPercent:k,vaultsCoinAValue:v,vaultsCoinBValue:F,setVaultsCoinAValue:W,setVaultsCoinBValue:P,vaultCoinAmounts:b,setVaultCoinAmounts:j}=Ge(),Q=async(p,n=!1)=>{J(!0);try{const S=await o.Vaults.getPool(p,n);S&&Y(S)}catch(S){console.error("fetchVaultInfoFromContract error:",S)}finally{J(!1)}},G=async(p,n=!1)=>{B(!0);try{const S=await o.CetusClmmSDK.Pool.getPool(p,n);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:85 ~ fetchClmmPoolFromContract ~ info:",S.current_sqrt_price),S&&D(S)}catch(S){console.error("fetchClmmPoolFromContract error:",S)}finally{B(!1)}},{contractVault:u}=qe(s),{tokenInfo:s0}=ne(u==null?void 0:u.lp_token_type),[A,b0]=i.useState(),[d0,t0]=i.useState(!1),[I,r0]=i.useState(),H=async(p,n,S)=>{t0(!0);try{const V=await o.Vaults.getOwnerVaultsBalance(p,n);if(V){const $=u0(V.lp_token_balance,S).toString();b0({balance:V.lp_token_balance,balanceFormat:$,balanceDisplay:S0($,void 0,void 0,M0.ROUND_DOWN).toString()}),r0(V)}}catch(V){console.error("fetchVaultBalance error:",V)}finally{t0(!1)}},n0=i.useMemo(()=>u&&A&&l0(A.balance).gt(0)?l0(A.balance).div(u.lp_token_treasury).mul(100).toString():"0",[u,A]),{contractClmmInfo:L}=ze(r),x0=p=>{if(p&&a&&e&&l!==void 0){const n=G0(p.amount_a.toString(),a.decimals).toString(),S=G0(p.amount_b.toString(),e.decimals).toString();return{coinAmountA:n,coinAmountB:S,displayCoinA:l?S:n,displayCoinB:l?n:S}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[M,g0]=i.useState();i.useEffect(()=>{I&&(f!=null&&f.address)?g0(x0(I)):g0({coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"})},[I==null?void 0:I.amount_a,I==null?void 0:I.amount_b,a==null?void 0:a.decimals,e==null?void 0:e.decimals,l,f==null?void 0:f.address]),i.useEffect(()=>{if(u&&L&&!N&&!c){const p=xe("",u.lp_token_treasury,u,L);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:175 ~ useEffect ~ buildVaultsBalance:",p),j(x0(p))}},[u==null?void 0:u.lp_token_treasury,L==null?void 0:L.current_sqrt_price,c,N]);const V0=i.useMemo(()=>{if(L&&a&&e)return F0.sqrtPriceX64ToPrice(new ee(L.current_sqrt_price),a.decimals,e.decimals).toString()},[L==null?void 0:L.current_sqrt_price,a==null?void 0:a.decimals]),C0=i.useMemo(()=>{if(u&&a&&e)return F0.tickIndexToPrice(u.clmm_vault.wrapped_position.tick_lower_index,a.decimals,e.decimals).toString()},[(x=u==null?void 0:u.clmm_vault)==null?void 0:x.wrapped_position.tick_lower_index,a==null?void 0:a.decimals]),D0=i.useMemo(()=>{if(u&&a&&e)return F0.tickIndexToPrice(u.clmm_vault.wrapped_position.tick_upper_index,a.decimals,e.decimals).toString()},[u==null?void 0:u.clmm_vault.wrapped_position.tick_upper_index,a==null?void 0:a.decimals]),[f0,h0]=i.useState(""),[U,X]=i.useState("");i.useEffect(()=>{if(a&&e&&(M!=null&&M.coinAmountA)&&(M!=null&&M.coinAmountB)&&B0(_)){console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:220 ~ useEffect ~ priceMap:",_);const p=_[_0(a==null?void 0:a.coin_type)],n=_[_0(e==null?void 0:e.coin_type)];console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:223 ~ useEffect ~ coinBPrice:",n),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:223 ~ useEffect ~ holdCoinAmounts:",M);const S=l0(M==null?void 0:M.coinAmountA).mul((p==null?void 0:p.price)||0).toString(),V=l0(M==null?void 0:M.coinAmountB).mul((n==null?void 0:n.price)||0).toString();console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:223 ~ useEffect ~ coinAValue:",S),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:227 ~ useEffect ~ coinBValue:",V),h0(S),X(V)}},[a,e,M==null?void 0:M.coinAmountA,M==null?void 0:M.coinAmountB,_]);const[Z,R]=i.useState(!0),e0=async(p,n)=>{if(a&&e&&_){const S=_[_0(a==null?void 0:a.coin_type)],V=_[_0(e==null?void 0:e.coin_type)];if(S&&V){console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:218 ~ getVaultsCoinValue ~ getVaultsCoinValue:");const $=l0(p).mul(S.price).toString(),a0=l0(n).mul(V.price).toString();W($),P(a0),R(!1),q0($,a0)}}};i.useEffect(()=>{console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:237 ~ useEffect ~ vaultCoinAmounts?.coinAmountA && vaultCoinAmounts?.coinAmountB:",b==null?void 0:b.coinAmountA,b==null?void 0:b.coinAmountB,t,_),b!=null&&b.coinAmountA&&(b!=null&&b.coinAmountB)&&t&&B0(_)&&e0(b==null?void 0:b.coinAmountA,b==null?void 0:b.coinAmountB)},[b==null?void 0:b.coinAmountA,b==null?void 0:b.coinAmountB,_]),i.useEffect(()=>{V0&&(b!=null&&b.coinAmountA)&&(b!=null&&b.coinAmountB)&&k(ye(b.coinAmountA,b.coinAmountB,V0,!1))},[V0,b==null?void 0:b.coinAmountA,b==null?void 0:b.coinAmountB]);const i0=i.useMemo(()=>{if(!Z)return l0(v).add(F).toString()},[v,F,Z]);i.useEffect(()=>{s&&f0&&U&&y(s,l0(f0).add(U).toString())},[f0,U,s]);const y0=i.useMemo(()=>{if(s)return z[s]},[z,s]),[c0,E0]=i.useState(""),P0=async()=>{if(u&&u.hard_cap&&l0(u==null?void 0:u.hard_cap).gt(0)&&a&&e){const p=u.quote_type==(a==null?void 0:a.address)?a:e;if(_){const n=_[_0(p.coin_type)];if(n){const S=l0(u.hard_cap).div(10**p.decimals).mul(n.price).toString();console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:251 ~ getHardCapUSD ~ hardCapUSD:",S),E0(S)}}}};i.useEffect(()=>{console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:272 ~ useEffect ~ contractVault:",u),u!=null&&u.hard_cap&&t&&B0(_)&&P0()},[u==null?void 0:u.hard_cap,t,_]);const[I0,U0]=i.useState(!1),q0=(p,n)=>{var S;if(u&&a&&e&&_){const V=u.quote_type==(a==null?void 0:a.address)?a:e,$=G0(u.hard_cap,V.decimals).toString(),a0=(S=_[_0(V==null?void 0:V.coin_type)])==null?void 0:S.price,p0=l0($).mul(a0||0);(l0(p).gt(0)||l0(n).gt(0))&&p0.gt(0)&&(console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:367 ~ getAumLimit ~ coinAValue:",l0(p).add(n).toString()),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:367 ~ getAumLimit ~ maxAumUSD:",p0.toString()),l0(p).add(n).gt(p0)?U0(!0):U0(!1))}else U0(!1)};i.useEffect(()=>{f!=null&&f.address||(b0(void 0),r0(void 0))},[f]);const R0=i.useMemo(()=>{if(c0&&i0)return l0(i0).div(c0).mul(100).toString()},[c0,i0]),$0=i.useMemo(()=>u&&l0(u.protocol_fee_rate).gt(0)?l0(u.protocol_fee_rate).div(1e4).mul(100).toString():"0",[u]),w=i.useMemo(()=>{if(u&&a&&e)return u.quote_type==(a==null?void 0:a.address)?e:a},[u,a,e]),E=i.useMemo(()=>{if(u&&a&&e)return u.quote_type==(a==null?void 0:a.address)?a:e},[u,a,e]),q=i.useMemo(()=>u!=null&&u.hard_cap&&E?l0(u==null?void 0:u.hard_cap).div(10**E.decimals).toString():"0",[u==null?void 0:u.hard_cap,E]),[m,C]=i.useState(""),[h,K]=i.useState(""),g=async()=>{var p,n;if(_){const S=(p=_[_0(E==null?void 0:E.coin_type)])==null?void 0:p.price,V=(n=_[_0(w==null?void 0:w.coin_type)])==null?void 0:n.price;if(S&&V){const $=l0(c0).sub(i0).div(S),a0=l0(c0).sub(i0).div(V);$.gt(0)?C(S0($.toString(),E==null?void 0:E.decimals,!0,M0.ROUND_DOWN).toString()):C("0"),a0.gt(0)?K(S0(a0.toString(),w==null?void 0:w.decimals,!0,M0.ROUND_DOWN).toString()):K("0")}}};return i.useEffect(()=>{i0&&c0&&E&&B0(_)&&g()},[i0,c0,E==null?void 0:E.coin_type,_]),{fetchVaultInfoFromContract:Q,contractVault:u,lpTokenInfo:s0,balanceInfo:A,sharePoolRate:n0,fetchClmmPoolFromContract:G,holdCoinAmounts:M,totalValue:y0,maxPrice:D0,currPrice:V0,minPrice:C0,vaultCoinAmounts:b,vaultsCoinAValue:v,vaultsCoinBValue:F,vaultsCoinPercent:T,holdCoinAValue:f0,holdCoinBValue:U,fetchVaultBalance:H,isBalanceLoading:d0,vaultTvl:i0,hardCapUSD:c0,gtAumLimit:I0,depositRatio:R0,performanceFee:$0,calculateVaultTvlLoading:Z,maxCapNum:q,baseCoin:w,quoteCoin:E,holdLpAmount:A==null?void 0:A.balance,availableCapacityWithQuoteCoin:m,availableCapacityWithBaseCoin:h}}function Va(s,r){return{lpRate:i.useMemo(()=>s&&r?d(r).eq(0)?"100%":`${Ve(d(s).div(d(s).add(r)).mul(100).toString(),2,6)}%`:"0%",[s,r])}}function ha(s,r,a=!1){return{amountLimit:i.useMemo(()=>{if(r)return d(r).mul(a?1+s:1-s).toString()},[r,s,a])}}function He(s){const{contractVaultObj:r}=K0();return{contractVault:i.useMemo(()=>{if(s)return r[s]},[r,s])}}function Xe(s){const{contractClmmPoolObj:r}=K0();return{contractClmmInfo:i.useMemo(()=>{if(s)return r[s]},[r,s])}}function Ke(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function Ta(s,r){const a=i.useMemo(()=>{if(r&&s)return`${J0(d(r.amountPerLpA).mul(s).toFixed(18,M0.ROUND_DOWN),r.displayTokenA.decimals)}  ${r==null?void 0:r.displayTokenA.symbol}`},[r==null?void 0:r.amountPerLpA,s]),e=i.useMemo(()=>{if(r&&s)return`${J0(d(r.amountPerLpB).mul(s).toFixed(18,M0.ROUND_DOWN),r.displayTokenB.decimals)}  ${r==null?void 0:r.displayTokenB.symbol}`},[r==null?void 0:r.amountPerLpB,s]);return{rewardPerA:a,rewardPerB:e}}function Ye(s,r,a,e,l=!1){const{vaultsSdk:t}=H0(),{getTokenAmountValue:o}=X0(),{setContractVaultObjLoading:f,setContractVaultObj:O,setContractClmmPoolObj:_,setContractClmmPoolObjLoading:J,setHoldTotalValue:Y,holdTotalValue:D,setLpTokenInfo:B}=K0(),y=async(I,r0=!1)=>{f(!0);const H=await t.Vaults.getVault(I,r0);console.log("🚀 ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",H),H&&O(H),f(!1)},z=async(I,r0=!1)=>{J(!0);const H=await t.Pool.getPool(I,r0);H&&_(H),J(!1)},{contractVault:c}=He(s),{tokenInfo:N}=ne(c==null?void 0:c.lp_token_type),{balanceInfo:T}=Z0(N),k=i.useMemo(()=>c&&T?l0(T.balance).div(c.total_supply).mul(100).toString():"0",[c,T]),{contractClmmInfo:v}=Xe(r),F=I=>{if(c&&v&&a&&e&&l!==void 0){const r0=new ee(v.current_sqrt_price),H=F0.tickIndexToSqrtPriceX64(c.position.tick_lower_index),n0=F0.tickIndexToSqrtPriceX64(c.position.tick_upper_index),L=Te.getCoinAmountFromLiquidity(new ee(I),r0,H,n0,!1),x0=u0(L.coinA.toString(),a.decimals).toString(),M=u0(L.coinB.toString(),e.decimals).toString();return{coinAmountA:x0,coinAmountB:M,displayCoinA:l?M:x0,displayCoinB:l?x0:M}}},W=i.useMemo(()=>{if(c&&T&&v){const I=he.get_share_liquidity_by_amount(c,T.balance),r0=F(I);if(r0)return r0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[T==null?void 0:T.balance,v==null?void 0:v.current_sqrt_price]),P=i.useMemo(()=>{if(c&&v){const I=F(c.liquidity);if(I)return I}},[c==null?void 0:c.liquidity,v==null?void 0:v.current_sqrt_price]),b=i.useMemo(()=>{if(v&&a&&e)return F0.sqrtPriceX64ToPrice(new ee(v.current_sqrt_price),a.decimals,e.decimals).toString()},[v==null?void 0:v.current_sqrt_price,a==null?void 0:a.decimals]),j=i.useMemo(()=>{if(c&&a&&e)return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",F0.tickIndexToPrice(c.position.tick_lower_index,a.decimals,e.decimals).toString()),F0.tickIndexToPrice(c.position.tick_lower_index,a.decimals,e.decimals).toString()},[c==null?void 0:c.position.tick_lower_index,a==null?void 0:a.decimals]),Q=i.useMemo(()=>{if(c&&a&&e)return F0.tickIndexToPrice(c.position.tick_upper_index,a.decimals,e.decimals).toString()},[c==null?void 0:c.position.tick_upper_index,a==null?void 0:a.decimals]),G=o(a==null?void 0:a.coin_type,W.coinAmountA),u=o(e==null?void 0:e.coin_type,W.coinAmountB),s0=o(a==null?void 0:a.coin_type,P==null?void 0:P.coinAmountA),A=o(e==null?void 0:e.coin_type,P==null?void 0:P.coinAmountB),b0=i.useMemo(()=>{if(b&&P)return ye(P.coinAmountA,P.coinAmountB,b,!1)},[b,P]),d0=i.useMemo(()=>(console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:192 ~ vaultTvl ~ vaultsCoinAValue:",s0),ge(l0(s0).add(A).toString(),"$")),[s0,A]);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",d0),i.useEffect(()=>{s&&Y(s,l0(G).add(u).toString())},[G,u,s]);const t0=i.useMemo(()=>{if(s)return D[s]},[D,s]);return{fetchVaultInfoFromContract:y,contractVault:c,lpTokenInfo:N,balanceInfo:T,sharePoolRate:k,fetchClmmPoolFromContract:z,holdCoinAmounts:W,totalValue:t0,maxPrice:Q,currPrice:b,minPrice:j,vaultCoinAmounts:P,vaultsCoinAValue:s0,vaultsCoinBValue:A,vaultsCoinPercent:b0,holdCoinAValue:G,holdCoinBValue:u,calculateCoinAmounts:F,vaultTvl:d0,holdLpAmount:T==null?void 0:T.balance}}function Je(s,r,a,e,l,t,o,f,O,_,J,Y,D,B,y){const{vaultsSlippage:z,mevProtect:c,maxCapForGas:N,transactionMode:T,customGasPrice:k}=re(),{fetchTokenPrices:v}=X0(),{setDetailRefreshCount:F}=A0(),{volatileVaultsSdk:W}=H0(),[P,b]=i.useState(0),{amountInputA:j,amountInputB:Q,setAmountInputA:G,setAmountInputB:u,pythPriceMap:s0}=_e(),[A,b0]=i.useState(!0),[d0,t0]=i.useState(""),I=i.useRef(""),r0=i.useRef(!0),H=i.useRef(""),n0=i.useRef(""),L=i.useMemo(()=>s0||{},[s0]);i.useEffect(()=>{I.current=d0},[d0]),i.useEffect(()=>{r0.current=A},[A]),i.useEffect(()=>{H.current=j},[j,t,Q]),i.useEffect(()=>{n0.current=Q},[Q,t,j]),i.useEffect(()=>{m()},[o,s]),i.useEffect(()=>{const g=[];e&&l&&(g.push(e.coin_type),g.push(l.coin_type)),g.length>0&&v(g)},[e==null?void 0:e.coin_type,l==null?void 0:l.coin_type]);const{balanceInfo:x0}=Z0(t?l:e),{balanceInfo:M}=Z0(t?e:l),[g0,V0]=i.useState(!1),C0=i.useMemo(()=>{var g,x;if(e!=null&&e.coin_type&&(l!=null&&l.coin_type)&&s=="both"){const p=t?l==null?void 0:l.coin_type:e==null?void 0:e.coin_type;return d(j||0).mul(((g=L[_0(p)])==null?void 0:g.price)||0).toString()}else if(s!=="both"&&!g0){const p=t?l==null?void 0:l.coin_type:e==null?void 0:e.coin_type;return d(j||0).mul(((x=L[_0(p)])==null?void 0:x.price)||0).toString()}else return j?d(f).sub(d(O)).mul(P).div(100).toString():"0"},[j,e==null?void 0:e.coin_type,l==null?void 0:l.coin_type,t,L,s,f,O,P]),D0=i.useMemo(()=>{var g,x;if(e!=null&&e.coin_type&&(l!=null&&l.coin_type)&&s=="both"){const p=t?e==null?void 0:e.coin_type:l==null?void 0:l.coin_type;return d(Q||0).mul(((g=L[_0(p)])==null?void 0:g.price)||0).toString()}else if(s!=="both"&&!g0){const p=t?e==null?void 0:e.coin_type:l==null?void 0:l.coin_type;return d(Q||0).mul(((x=L[_0(p)])==null?void 0:x.price)||0).toString()}else return Q?d(f).sub(d(O)).mul(P).div(100).toString():"0"},[Q,e==null?void 0:e.coin_type,l==null?void 0:l.coin_type,t,L,s,f,O,P]),f0=i.useMemo(()=>d(C0||"0").add(D0||"0").toString(),[C0,D0]),h0=i.useMemo(()=>{if(o)return d(f0).gt(d(1e4))},[f0,o]),U=i.useMemo(()=>f0&&o?d(f0).gt(0)&&d(f0).lt(1e-4):!1,[o,f0]),X=i.useMemo(()=>!!(f&&f0&&d(f).gt(0)&&d(f0).add(d(O)).gt(f)),[f,f0,O]),[Z,R]=i.useState(!1),[e0,i0]=i.useState(!1),[y0,c0]=i.useState(void 0),P0=Q0(async(g,x,p,n=!1,S)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",p),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",g,S),e&&l&&a)try{i0(!0),F(0);const V=x?e:l,$=x?l:e,a0=L0(g,V.decimals).toFixed(0),p0=L0(S||0,$.decimals).toFixed(0);let m0;o?m0=s=="both"?"FlexibleBoth":s==(e==null?void 0:e.coin_type)?"OnlyCoinA":"OnlyCoinB":m0="FixedOneSide";let o0={uuid:p,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:a};o?(m0==="OnlyCoinB"&&(o0={uuid:p,mode:"OnlyCoinB",pool_id:a,coin_amount_b:a0}),m0==="OnlyCoinA"&&(o0={uuid:p,mode:"OnlyCoinA",pool_id:a,coin_amount_a:a0}),m0=="FlexibleBoth"&&(o0={uuid:p,mode:"FlexibleBoth",pool_id:a,coin_amount_a:x?a0:p0,coin_amount_b:x?p0:a0})):o0={uuid:p,mode:"FixedOneSide",fixed_amount:a0,fixed_coin_a:x,pool_id:a},console.log("🚀🚀🚀 ~ useVaultsAdd.ts:193 ~ preCalculate ~ params:",o0);const w0=await W.Vaults.preCalculateDepositAmount(o0,{onSuccess:(N0,de)=>{de==o0.uuid&&(m0=="FixedOneSide"||m0=="OnlyCoinA"||m0=="OnlyCoinB"?H.current||n0.current:H.current&&n0.current)&&(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:216 ~ preCalculate ~ setCalculateResult:"),c0({amount_a:n?w0.deposit_amount_b:w0.deposit_amount_a,amount_b:n?w0.deposit_amount_a:w0.deposit_amount_b,ft_amount:N0}),i0(!1))},onError:(N0,de)=>{console.log("🚀 ~ preCalculate ~ error:",N0)}});if(console.log("🚀 ~ preCalculate ~ res:",{...w0,uuid:p,assetAction:s,"+amountInputARef.current":+H.current}),I.current!==p)return;const O0={amount_a:n?w0.deposit_amount_b:w0.deposit_amount_a,amount_b:n?w0.deposit_amount_a:w0.deposit_amount_b};if((s=="both"&&o?H.current&&n0.current:H.current||n0.current)&&K(O0),O0.ft_amount=="0"){c0(void 0);return}if(o){c0(O0);return}s==="both"&&((n?!x:x)?+H.current?u(u0(O0.amount_b.toString(),n?e==null?void 0:e.decimals:l==null?void 0:l.decimals).toString()):u(""):+n0.current?G(u0(O0.amount_a.toString(),n?l==null?void 0:l.decimals:e==null?void 0:e.decimals).toString()):G("")),(s!=="both"||!o)&&c0(O0)}catch(V){String(V).indexOf("has reached hardCap")>-1,console.log("🚀 ~ preCalculate ~ error:",V),c0(void 0)}finally{}},500),I0=(g,x,p=!0,n)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:294 ~ handleAmountInputChange ~ amount:",g),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:294 ~ handleAmountInputChange ~ other_amount:",n),V0(!1),b0(x),!g&&!n){console.log("🚀🚀🚀 ~ useVaultsAdd.ts:296 ~ handleAmountInputChange ~ resetInputAmount:"),m();return}if((t?!x:x)?(G(g),p&&!o&&u("")):(u(g),p&&!o&&G("")),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:317 ~ handleAmountInputChange ~ gtAumLimit:",_),!_)if(+g){if(o&&s=="both"&&(!g||!n)){b(0),c0(void 0);return}const S=j0();t0(S),P0(g,x,S,t,n)}else o?s=="both"?(c0(void 0),b(0)):(s==(e==null?void 0:e.coin_type)||s==(l==null?void 0:l.coin_type))&&m():m()},U0=()=>{const g=r0.current?t?n0.current:H.current:t?H.current:n0.current,x=r0.current?t?H.current:n0.current:t?n0.current:H.current;if(!(o&&s=="both"&&(!g||!x))){if(+g){const p=j0();t0(p),P0(g,r0.current,p,t,x)}console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",x),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",g)}},[q0,R0]=i.useState(!1),{signAndExecuteTransaction:$0,transactionConfirmation:w,transactionRejected:E}=ie(),q=async()=>{if(a){R0(!0);const g={pool_id:a,amount_a:String(t?L0(Q||0,String(e==null?void 0:e.decimals)):L0(j||0,String(e==null?void 0:e.decimals))),amount_b:String(t?L0(j||0,String(l==null?void 0:l.decimals)):L0(Q||0,String(l==null?void 0:l.decimals)))};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",g);const x={getShowInfo:(p,n,S)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",S);const V="Deposit "+[v0(j,t?l==null?void 0:l.symbol:e==null?void 0:e.symbol),v0(Q,t?e==null?void 0:e.symbol:l==null?void 0:l.symbol)].filter(Boolean).join(" and "),$={modalDescriptionText:V,toastTitleText:V};if(p==="success"){let a0=j,p0=Q;S&&S.events.forEach(o0=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",o0),o0.type.indexOf("::pool::DepositEvent")>-1&&e&&l&&(a0=String(G0(o0.parsedJson.amount_a,e.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",a0),p0=String(G0(o0.parsedJson.amount_b,l.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",p0))});const m0="Deposit "+[v0(t?p0:a0,t?l==null?void 0:l.symbol:e==null?void 0:e.symbol),v0(t?a0:p0,t?e==null?void 0:e.symbol:l==null?void 0:l.symbol)].filter(Boolean).join(" and ");$.toastDescriptionContent=m0,$.modalDescriptionText=m0,$.toastTitleText="Deposit successful"}return $}};w(x);try{const p=new ue;await W.Vaults.buildDepositPayload(g,p),await $0(p,x,{useMev:c,txAction:"signTransactionBlock",useFastMode:T==="Fast Mode",maxCapForGas:N,customGasPrice:k,msafeParams:{action:ce.AddVaultsPosition,txbParams:g}})?(m(),r()):U0()}catch{E(x)}}},m=()=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:487 ~ resetInputAmount ~ resetInputAmount:"),b(0),G(""),u(""),c0(void 0),t0("")},h=Q0(async(g,x,p,n)=>{var V;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:522 ~ uuid:",x),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:522 ~ percent:",g),d(g).lte(0)){c0(void 0),G(""),u("");return}i0(!0),F(0),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:536 ~ preCalculateDepositValue ~ coin:",n);const S=(V=L[_0(n==null?void 0:n.coin_type)])==null?void 0:V.price;if(e&&l&&a){const $=d(p).mul(g).div(100).mul(S).toString(),a0=d(p).mul(g).div(100).toString();console.log("🚀🚀🚀 ~ useVaultsAdd.ts:538 ~ preCalculateDepositValue ~ amount:",a0);let p0;o?p0=s=="both"?"FlexibleBoth":s==(e==null?void 0:e.coin_type)?"OnlyCoinA":"OnlyCoinB":p0="FixedOneSide";const m0={mode:p0,pool_id:a,amount_usd:$,uuid:x};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:532 ~ preCalculateDepositValue ~ params:",m0);const o0=await W.Vaults.preCalculateDepositValue(m0,{onSuccess:(O0,N0)=>{N0==m0.uuid&&(p0=="FixedOneSide"||p0=="OnlyCoinA"||p0=="OnlyCoinB"?H.current||n0.current:H.current&&n0.current)&&(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:550 ~ preCalculateDepositValue ~ setCalculateResult:",O0),c0({amount_a:t?o0.deposit_amount_b:o0.deposit_amount_a,amount_b:t?o0.deposit_amount_a:o0.deposit_amount_b,ft_amount:O0}),i0(!1))},onError:(O0,N0)=>{console.log("🚀 ~ preCalculate ~ error:",O0)}});if(I.current!==x)return;const w0={amount_a:t?o0.deposit_amount_b:o0.deposit_amount_a,amount_b:t?o0.deposit_amount_a:o0.deposit_amount_b};c0(w0),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:524 ~ handlePercentInputChange ~ wrapRes:",w0,e,l),o0&&(s=="both"?(G(u0(w0.amount_a.toString(),t?l==null?void 0:l.decimals:e==null?void 0:e.decimals).toString()),u(u0(w0.amount_b.toString(),t?e==null?void 0:e.decimals:l==null?void 0:l.decimals).toString())):(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:591 ~ preCalculateDepositValue ~ assetAction:",s,e==null?void 0:e.coin_type,l==null?void 0:l.coin_type),s==(e==null?void 0:e.coin_type)?t?u(S0(a0,n==null?void 0:n.decimals,!0,M0.ROUND_DOWN).toString()):G(S0(a0,n==null?void 0:n.decimals,!0,M0.ROUND_DOWN).toString()):t?G(S0(a0,n==null?void 0:n.decimals,!0,M0.ROUND_DOWN).toString()):u(S0(a0,n==null?void 0:n.decimals,!0,M0.ROUND_DOWN).toString())),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:591 ~ preCalculateDepositValue ~ amount:",a0)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:520 ~ handlePercentInputChange ~ res:",o0)}},500),K=async g=>{var x,p;if(!_&&e&&l){const n=(x=L==null?void 0:L[_0(t?l==null?void 0:l.coin_type:e==null?void 0:e.coin_type)])==null?void 0:x.price,S=(p=L==null?void 0:L[_0(t?e==null?void 0:e.coin_type:l==null?void 0:l.coin_type)])==null?void 0:p.price,V=G0(g.amount_a,t?l==null?void 0:l.decimals:e==null?void 0:e.decimals),$=G0(g.amount_b,t?e==null?void 0:e.decimals:l==null?void 0:l.decimals),a0=d(V).mul(n).add(d($).mul(S)).toString(),p0=d(f).sub(d(O)).toString(),m0=d(a0).div(d(p0)).mul(100),o0=j0();t0(o0),m0.gt(100)?(b(100),h(100,o0,J,D)):(H.current||n0.current)&&b(S0(m0.toString(),2)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:211 ~ calculateDepositRatioWithAvailableCapacity ~ ratio:",m0.toString())}};return i.useEffect(()=>{if(!g0&&(j||Q))U0();else if(g0&&(j||Q)){const g=j0();t0(g),h(P,g,y?J:Y,y?D:B)}},[g0,J,D]),{handleAmountInputChange:I0,fixAmountA:A,amountInputA:j,amountInputB:Q,balanceInfoA:x0,balanceInfoB:M,amountValueA:C0,amountValueB:D0,preCalculateLoading:Z,inputTotalValue:f0,calculateResult:y0,doAddAction:q,reCalculateResult:U0,overHardtop:X,zapNumError:h0,calculateLpLoading:e0,inputTotalValueError:U,debouncedPreCalculateDepositValue:h,percentage:P,setPercentage:b,setIsSlider:V0,isSlider:g0,setUuid:t0}}function Qe(s,r,a,e,l){const{fetchTokenPrices:t,getTokenAmountValue:o}=X0(),{setDetailRefreshCount:f}=K0(),{vaultsSdk:O}=H0(),{vaultsSlippage:_,mevProtect:J,maxCapForGas:Y,transactionMode:D,customGasPrice:B}=re(),[y,z]=i.useState(""),[c,N]=i.useState(""),[T,k]=i.useState(!0),[v,F]=i.useState(""),W=i.useRef(""),P=i.useRef(!0),b=i.useRef(""),j=i.useRef("");i.useEffect(()=>{W.current=v},[v]),i.useEffect(()=>{P.current=T},[T]),i.useEffect(()=>{b.current=y},[y]),i.useEffect(()=>{j.current=c},[c]),i.useEffect(()=>{const U=[];e&&l&&(U.push(e.coin_type),U.push(l.coin_type)),U.length>0&&t(U)},[e==null?void 0:e.coin_type,l==null?void 0:l.coin_type]);const{balanceInfo:Q}=Z0(e),{balanceInfo:G}=Z0(l),u=o(e==null?void 0:e.coin_type,y),s0=o(l==null?void 0:l.coin_type,c),A=i.useMemo(()=>d(u||"0").add(s0||"0").toString(),[u,s0]),[b0,d0]=i.useState(!1),[t0,I]=i.useState(void 0),H=Q0(async(U,X,Z)=>{if(e&&l&&a)try{d0(!0),f(0);const e0=L0(U,(X?e:l).decimals).toFixed(0),i0={vault_id:a,fix_amount_a:X,input_amount:e0,slippage:Number(_),request_id:Z,side:s==="both"?se.Both:se.OneSide};console.log("🚀 ~ preCalculate ~ params:",i0,Z);const y0=await O.Vaults.calculateDepositAmount(i0,!0,!0);console.log("🚀 ~ preCalculate ~ res:",{...y0,uuid:Z,assetAction:s,"+amountInputARef.current":+b.current}),W.current===Z&&(s==="both"&&(X?+b.current?(N(u0(y0.amount_b.toString(),l.decimals).toString()),I(y0)):N(""):+j.current?(z(u0(y0.amount_a.toString(),e.decimals).toString()),I(y0)):z("")),s!=="both"&&I(y0))}catch(R){console.log("🚀 ~ preCalculate ~ error:",R),I(void 0)}finally{d0(!1)}},500),n0=(U,X,Z=!0)=>{if(k(X),X?(z(U),Z&&N("")):(N(U),Z&&z("")),+U){const R=ae.isSuiCoin(s);if(R&&d(U).lt(3)){F(""),I(void 0),d0(!1);return}if(!R){const i0=o(s,U);if(d(i0).gt(1e4)){F(""),I(void 0),d0(!1);return}}const e0=j0();F(e0),s==="both"&&d0(!0),H(U,X,e0)}else D0()},L=()=>{const U=P.current?b.current:j.current;if(+U){const X=j0();F(X),H(U,P.current,X)}};i.useEffect(()=>{D0()},[s]);const[x0,M]=i.useState(!1),{signAndExecuteTransaction:g0,transactionRejected:V0}=ie(),C0=async()=>{if(a&&t0){M(!0),L0(T?y:c,9);const U={vault_id:a,slippage:Number(_),deposit_result:t0},X={getShowInfo:(Z,R)=>{const e0="Deposit "+[v0(y,e==null?void 0:e.symbol),v0(c,l==null?void 0:l.symbol)].filter(Boolean).join(" and "),i0={modalDescriptionText:e0,toastTitleText:e0};if(Z==="success"){let y0=y,c0=c;R&&(y0=d(y).gt(0)?W0(R,e)||y:"",c0=d(c).gt(0)?W0(R,l)||c:"");const E0="Deposit "+[v0(y0,e==null?void 0:e.symbol),v0(c0,l==null?void 0:l.symbol)].filter(Boolean).join(" and ");i0.toastDescriptionContent=E0,i0.modalDescriptionText=E0,i0.toastTitleText="Deposit successful"}return i0}};try{await g0(async()=>{const e0=new ue;return e0.setSender(O.senderAddress),await O.Vaults.deposit(U,e0),console.log("🚀 ~ doAddAction ~ params:",{params:U,tx:e0}),e0},X,{useMev:J,txAction:"signTransactionBlock",useFastMode:D==="Fast Mode",maxCapForGas:Y,customGasPrice:B,msafeParams:{action:ce.AddVaultsPosition,txbParams:U}})?(D0(),r()):L()}catch(Z){console.log("🚀 ~ doAddAction ~ error:",Z),V0(X)}}},D0=()=>{z(""),N(""),d0(!1),I(void 0),F("")},{stakeProtocolName:f0}=Ke(P.current?l==null?void 0:l.coin_type:e==null?void 0:e.coin_type),h0=i.useMemo(()=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",s),s!=="both"&&e&&l){const U=P.current?y:c,X=P.current?e:l,Z=P.current?l:e;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",t0),t0&&t0.swap_result){const R=u0(t0.swap_result.swap_in_amount,X.decimals),e0=u0(d(t0.swap_result.swap_out_amount).mul(1-Number(_)).toString(),Z.decimals);return ae.isSuiCoin(X.coin_type)?`By depositing ${Y0(S0(U,9).toString(),9)} SUI, ${Y0(S0(R,9).toString(),9)} SUI will be converted to ${Z==null?void 0:Z.symbol} via ${f0} liquid staking and added to the pool together.`:`By depositing ${Y0(S0(U,9).toString(),9)} ${X==null?void 0:X.symbol}, ${Y0(S0(R,9).toString(),9)} ${X==null?void 0:X.symbol} will be traded for ${Y0(S0(e0,9).toString(),9)} ${Z==null?void 0:Z.symbol} and then added to the pool together.`}else if(!ae.isSuiCoin(s)){const R=o(s,U);if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",R),d(R).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[s,t0,y,c]);return{handleAmountInputChange:n0,fixAmountA:T,amountInputA:y,amountInputB:c,balanceInfoA:Q,balanceInfoB:G,amountValueA:u,amountValueB:s0,preCalculateLoading:b0,inputTotalValue:A,calculateResult:t0,showOnlySideTips:h0,doAddAction:C0,reCalculateResult:L}}function Ze(s,r,a,e,l,t,o,f,O,_,J,Y,D,B){const{currentAccount:y}=le(),z=i.useMemo(()=>{const c={text:void 0,disabled:!1};if(!(y!=null&&y.address))return c.text="Connect Wallet",c.disabled=!1,c;if(!O||!_)return c.disabled=!0,c;if(r==="both"&&(!+e&&!+l||s&&(!+e||!+l))||r!=="both"&&!(+e||+l))return c.text="Enter an amount",c.disabled=!0,c;if(r==="both"){if(d(e).gt(o||"0"))return c.disabled=!0,c.text=a?`Insufficient ${O==null?void 0:O.symbol} Balance`:"Invalid Amount",c;if(d(l).gt(f||"0"))return c.disabled=!0,c.text=a?`Insufficient ${_==null?void 0:_.symbol} Balance`:"Invalid Amount",c}if(r!=="both"){if(d(e).gt(o||"0"))return c.disabled=!0,c.text=a?`Insufficient ${O==null?void 0:O.symbol} Balance`:"Invalid Amount",c;if(d(l).gt(f||"0"))return c.disabled=!0,c.text=a?`Insufficient ${_==null?void 0:_.symbol} Balance`:"Invalid Amount",c}return a&&J&&!D||a&&s&&B?(c.text="Enter an amount",c.disabled=!0,c):((Y&&Y.ft_amount=="0"||Y&&Y.burn_ft_amount=="0"||!Y)&&(c.disabled=!0,c.text="Enter an amount"),c)},[y==null?void 0:y.address,r,e,l,o,f,Y,a,J]);return{btnText:z.text,btnDisabled:z.disabled}}function Ae(s,r,a,e,l,t,o,f,O,_){const{currentAccount:J}=le(),Y=i.useMemo(()=>{const D={text:void 0,disabled:!1};if(!(J!=null&&J.address))return D.text="Connect Wallet",D.disabled=!1,D;if(!O||!_)return D.disabled=!0,D;if(r==="both"&&!+e&&!+l)return D.text="Enter an amount",D.disabled=!0,D;if(r!=="both"){if(!(+e||+l))return D.text="Enter an amount",D.disabled=!0,D;if(a){const B=ae.isSuiCoin(r);if(B&&r===(O==null?void 0:O.coin_type)&&d(e).lt(3)||B&&r===(_==null?void 0:_.coin_type)&&d(l).lt(3))return D.text="Minimum deposit 3 SUI",D.disabled=!0,D}}if(r==="both"){if(d(e).gt(o||"0"))return D.disabled=!0,D.text=a?`Insufficient ${O==null?void 0:O.symbol} Balance`:"Invalid Amount",D;if(d(l).gt(f||"0"))return D.disabled=!0,D.text=a?`Insufficient ${_==null?void 0:_.symbol} Balance`:"Invalid Amount",D}if(r!=="both"){if(t&&d(e).gt(o||"0"))return D.disabled=!0,D.text=a?`Insufficient ${O==null?void 0:O.symbol} Balance`:"Invalid Amount",D;if(!t&&d(l).gt(f||"0"))return D.disabled=!0,D.text=a?`Insufficient ${_==null?void 0:_.symbol} Balance`:"Invalid Amount",D}return s&&r!=="both"?(D.text=a?"Zap In":"Zap Out",D):(console.log("🚀🚀🚀 ~ submitBtnInfo ~ btnInfo:",D),D)},[J==null?void 0:J.address,r,e,l,o,f]);return{btnText:Y.text,btnDisabled:Y.disabled}}function Be(s,r,a,e,l,t,o,f,O,_){const{vaultsSlippage:J,mevProtect:Y,maxCapForGas:D,transactionMode:B,customGasPrice:y}=re(),{currentAccount:z}=le(),{setDetailRefreshCount:c}=A0(),{fetchTokenPrices:N,getTokenAmountValue:T}=X0(),{volatileVaultsSdk:k}=H0(),[v,F]=i.useState(""),[W,P]=i.useState(""),[b,j]=i.useState(!0),[Q,G]=i.useState(""),[u,s0]=i.useState(!1),[A,b0]=i.useState(0),d0=i.useRef(Q),t0=i.useRef(b),I=i.useRef(v),r0=i.useRef(W),H=i.useRef(u),n0=i.useRef(A);i.useEffect(()=>{n0.current=A},[A]),i.useEffect(()=>{H.current=u},[u]),i.useEffect(()=>{d0.current=Q},[Q]),i.useEffect(()=>{t0.current=b},[b]),i.useEffect(()=>{I.current=v},[v,f,W]),i.useEffect(()=>{r0.current=W},[W,f,v]),i.useEffect(()=>{const m=[];t&&o&&(m.push(t.coin_type),m.push(o.coin_type)),m.length>0&&N(m)},[t==null?void 0:t.coin_type,o==null?void 0:o.coin_type]);const[L,x0]=i.useState("0"),[M,g0]=i.useState("0"),[V0,C0]=i.useState(!1);i.useEffect(()=>{a&&(a!=null&&a.coinAmountA)&&(a!=null&&a.coinAmountB)&&D0()},[a==null?void 0:a.coinAmountA,a==null?void 0:a.coinAmountB]),i.useEffect(()=>{P0()},[_==null?void 0:_.current_sqrt_price]);const D0=async()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:m,coinAmountB:C}=a;if(C0(!1),s==="both"){x0(f?C:m),g0(f?m:C);return}const h=s===(t==null?void 0:t.coin_type),K=h?C:m,g=h?m:C;if(d(K).gt(0)){C0(!0);const x=j0();G(x);const p=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",s);const n={pool_id:l,mode:p,burn_lp_amount:e,available_lp_amount:e};console.log("🚀🚀🚀 ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",n);try{const S=await k.Vaults.preCalculateWithdrawAmount(n);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",S),p=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const V=u0(S.receive_amount_a,t==null?void 0:t.decimals);f?g0(V):x0(V)}else{if((o==null?void 0:o.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const V=u0(S.receive_amount_b,o==null?void 0:o.decimals);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",V),f?x0(V):g0(V)}C0(!1)}catch(S){console.log("🚀🚀🚀 ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",S)}}else h?x0(g):g0(g)},f0=T(f?o==null?void 0:o.coin_type:t==null?void 0:t.coin_type,v),h0=T(f?t==null?void 0:t.coin_type:o==null?void 0:o.coin_type,W),U=i.useMemo(()=>d(f0||"0").add(h0||"0").toString(),[f0,h0]);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",h0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",f0);const[X,Z]=i.useState(!1),[R,e0]=i.useState(void 0),y0=Q0(async(m,C,h,K,g,x)=>{if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:210 ~ removePercent:",g),d(g).gt(100)){G(""),e0(void 0),Z(!1);return}if(t&&o&&l&&e){if(!g){if(h){if(d(m).gt(f?M:L)){G(""),e0(void 0),Z(!1);return}}else if(d(m).gt(f?L:M)){G(""),e0(void 0),Z(!1);return}}c(0),(+I.current||+r0.current||g)&&Z(!0);const n=C?J0(m,0,!0):L0(m,(h?t:o).decimals).toFixed(0);let S;if(s=="both")S={pool_id:l,mode:"FixedOneSide",burn_lp_amount:String(n)};else{const V=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";S={pool_id:l,mode:V,burn_lp_amount:String(n)}}console.log("🚀 ~ preCalculate ~ params:",S,K,g);try{const V=await k.Vaults.preCalculateWithdrawAmount(S);console.log("🚀 ~ preCalculate ~ res:",{...V,uuid:K,assetAction:s});const $={amount_a:f?V.receive_amount_b:V.receive_amount_a,amount_b:f?V.receive_amount_a:V.receive_amount_b,burn_ft_amount:V.burn_lp_amount,swap:V.swap};if($.burn_ft_amount=="0"){Z(!1),e0(void 0);return}const a0=u0($.amount_a.toString(),f?o.decimals:t.decimals).toString();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const p0=u0($.amount_b.toString(),f?t.decimals:o.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",a0,t.decimals,p0,o==null?void 0:o.decimals),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",p0),s==="both"&&(C&&!x?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",C),(f?!h:h)?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+I.current),+I.current?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),P(u0($.amount_b.toString(),f?t==null?void 0:t.decimals:o==null?void 0:o.decimals).toString()),e0($)):P("")):+r0.current?(F(u0($.amount_a.toString(),f?o==null?void 0:o.decimals:t==null?void 0:t.decimals).toString()),e0($)):F("")):e0($)),s!=="both"){if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",g),g){const m0=u0(d($.amount_a).add($.amount_b||"0").toString(),f?o.decimals:t.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",m0),f?!h:h)g===100&&($.burn_ft_amount=e);else{const o0=u0(d($.amount_a).add($.amount_b||"0").toString(),f?t.decimals:o.decimals).toString();g===100&&($.burn_ft_amount=e)}}e0($)}}catch(V){console.log("🚀 ~ preCalculate ~ error:",V),e0(void 0)}finally{Z(!1)}}},500),c0=(m,C,h=!1,K=!1,g=!0)=>{if(h){E0(100);return}if(K){E0(50);return}j(C),s0(!1),(f?!C:C)?(F(m),g?P(""):P0()):(P(m),g?F(""):P0());let x,p;if((f?!C:C)?(p=d(m).div(L),x=J0(d(e).mul(p).toString(),0,!0)):(p=d(m).div(M),x=J0(d(e).mul(p).toString(),0,!0)),+x){const n=j0();G(n),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ removeLpAmount:",x),y0(String(x),!0,C,n,p.mul(100).toNumber(),p.gte(100))}else E()},E0=m=>{if(s0(!0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",m),b0(m),e&&+e){if(m===0)E();else{const C=s===(t==null?void 0:t.coin_type);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",M),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",L),j(C),s=="both"?(F(d(L).mul(d(m).div(100)).toString()),P(d(M).mul(d(m).div(100)).toString())):s===(t==null?void 0:t.coin_type)?f?P(d(M).mul(d(m).div(100)).toString()):F(d(L).mul(d(m).div(100)).toString()):f?F(d(L).mul(d(m).div(100)).toString()):P(d(M).mul(d(m).div(100)).toString()),m===100||s==="both"){const h=j0();G(h);const K=m===100?e:d(e).mul(m).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",K),y0(K,!0,C,h,m,!0)}else{j(C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",s),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const h=d(e).mul(m).div(100).toFixed();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",h),y0(h,!0,C,Q,m,!0)}}console.log("🚀🚀🚀 ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",L)}},P0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:u,removePercent:A}),u)E0(A);else{const m=t0.current?f?r0.current:I.current:f?I.current:r0.current;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",m),c0(m,t0.current)}};i.useEffect(()=>{if(!u)if(R&&e&&+e){let m=Number(d(R.burn_ft_amount).div(e).mul(100));m>100&&(m=100),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",m),b0(m)}else b0(0)},[R==null?void 0:R.burn_ft_amount,u]);const[I0,U0]=i.useState(!1),{signAndExecuteTransaction:q0,transactionConfirmation:R0,transactionRejected:$0}=ie(),w=async()=>{if(l&&R&&e){U0(!0);let m;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",R),s==="both"?m={pool_id:l,burn_lp_amount:R.burn_ft_amount,mode:"FixedOneSide",slippage:Number(J)}:(t==null||t.coin_type,A===100?m={pool_id:l,burn_lp_amount:e,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(J)}:m={pool_id:l,burn_lp_amount:R.burn_ft_amount,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(J)}),console.log("🚀 ~ doRemoveAction ~ params:",JSON.stringify(m));const C={getShowInfo:(h,K)=>{const g="Withdraw "+[v0(v,f?o==null?void 0:o.symbol:t==null?void 0:t.symbol),v0(W,f?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and "),x={modalDescriptionText:g,toastDescriptionContent:g};if(h==="success"){let p=v,n=W;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",K),K&&(p=d(v).gt(0)?W0(K,f?o:t)||v:"",n=d(W).gt(0)?W0(K,f?t:o)||W:""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",p,n);const S=[v0(f?n:p,f?o==null?void 0:o.symbol:t==null?void 0:t.symbol),v0(f?p:n,f?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean),V=(S&&S.length>1?"Removed ":"Withdraw ")+[v0(p,f?o==null?void 0:o.symbol:t==null?void 0:t.symbol),v0(n,f?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and ");x.toastDescriptionContent=V,x.modalDescriptionText=V}return x}};R0(C);try{const h=await k.Vaults.buildWithdrawPayload(m);await q0(h,C,{useMev:Y,txAction:"signTransactionBlock",useFastMode:B==="Fast Mode",maxCapForGas:D,customGasPrice:y,msafeParams:{action:ce.AddVaultsPosition,txbParams:m}})?(E(),r()):P0(),U0(!1)}catch(h){console.log("🚀 ~ doAddAction ~ error:",h),U0(!1),$0(C)}}},E=()=>{F(""),P(""),I.current="",r0.current="",b0(0),Z(!1),e0(void 0),G(""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},q=i.useMemo(()=>{var m;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",R),R&&(R!=null&&R.swap)&&s!=="both"&&t&&o){const C=b?f?W:v:f?v:W;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",C);const h=t0.current?t:o;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",h);const K=t0.current?o:t;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",K);const g=u0((m=R==null?void 0:R.swap)==null?void 0:m.swap_amount_in,K.decimals),x=S0(u0(d(R.swap.swap_amount_out).mul(1-Number(J)).toString(),h.decimals),h.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:J,calculateResult:R,swapOutAmount:x}),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${C} ${h==null?void 0:h.symbol}, ${g} ${K==null?void 0:K.symbol} in the pool will be traded for ${x} ${h==null?void 0:h.symbol}`),`To withdraw ${S0(C)} ${h==null?void 0:h.symbol}, ${S0(g)} ${K==null?void 0:K.symbol} in the pool will be traded for ${x} ${h==null?void 0:h.symbol}`}},[s,R,v,W]);return i.useEffect(()=>{P0()},[L,M]),i.useEffect(()=>{E(),setTimeout(()=>{a!=null&&a.coinAmountA&&(a!=null&&a.coinAmountB)&&D0()},200)},[O,s,z==null?void 0:z.address]),{handleAmountInputChange:c0,fixAmountA:b,amountInputA:v,amountInputB:W,availableAmountA:L,availableAmountB:M,amountValueA:f0,amountValueB:h0,preCalculateLoading:X,inputTotalValue:U,calculateResult:R,showOnlySideTips:q,doRemoveAction:w,handlePercentInputChange:E0,isPercentInput:u,removePercent:A,reCalculateResult:P0,calculateAvailableLoading:V0,submitLoading:I0}}function ke(s,r,a,e,l,t,o){const{setDetailRefreshCount:f}=K0(),{fetchTokenPrices:O,getTokenAmountValue:_}=X0(),{vaultsSdk:J}=H0(),{vaultsSlippage:Y,mevProtect:D,maxCapForGas:B,transactionMode:y,customGasPrice:z}=re(),{findBestRouters:c}=Le(),[N,T]=i.useState(""),[k,v]=i.useState(""),[F,W]=i.useState(!0),[P,b]=i.useState(""),[j,Q]=i.useState(!1),[G,u]=i.useState(0),s0=i.useRef(P),A=i.useRef(F),b0=i.useRef(N),d0=i.useRef(k),t0=i.useRef(j),I=i.useRef(G);i.useEffect(()=>{I.current=G},[G]),i.useEffect(()=>{t0.current=j},[j]),i.useEffect(()=>{s0.current=P},[P]),i.useEffect(()=>{A.current=F},[F]),i.useEffect(()=>{b0.current=N},[N]),i.useEffect(()=>{d0.current=k},[k]),i.useEffect(()=>{const w=[];t&&o&&(w.push(t.coin_type),w.push(o.coin_type)),w.length>0&&O(w)},[t==null?void 0:t.coin_type,o==null?void 0:o.coin_type]);const[r0,H]=i.useState("0"),[n0,L]=i.useState("0"),[x0,M]=i.useState(!1);i.useEffect(()=>{R0(),g0()},[s]),i.useEffect(()=>{g0()},[a.coinAmountA]);const g0=async()=>{const{coinAmountA:w,coinAmountB:E}=a;if(console.log("🚀 ~ useEffect ~ holdCoinAmounts:",a),M(!1),s==="both"){H(w),L(E);return}const q=s===(t==null?void 0:t.coin_type),m=q?E:w;let C=q?w:E;const h=q?o:t,K=q?t:o;d(m).gt(0)?(M(!0),H("0"),L("0"),c({fromToken:h,toToken:K,amount:L0(m,h.decimals).toString(),providersKeys:J.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:P}).then(g=>{console.log("🚀 ~ calculateAvailableAmount ~ uuid:",{result:g}),g.toAmountUi&&(C=d(C).add(g.toAmountUi).toString()),q?H(C):L(C)}).finally(()=>{M(!1)})):q?H(C):L(C)},V0=_(t==null?void 0:t.coin_type,N),C0=_(o==null?void 0:o.coin_type,k),D0=i.useMemo(()=>d(V0||"0").add(C0||"0").toString(),[V0,C0]),[f0,h0]=i.useState(!1),[U,X]=i.useState(void 0),R=Q0(async(w,E,q,m,C)=>{var h,K;if(t&&o&&l&&e){if(!C){if(q){if(d(w).gt(r0)){b(""),X(void 0),h0(!1);return}}else if(d(w).gt(n0)){b(""),X(void 0),h0(!1);return}}f(0),(+b0.current||+d0.current||C)&&h0(!0);const x=E?w:L0(w,(q?t:o).decimals).toFixed(0),p={vault_id:l,fix_amount_a:q,input_amount:x,slippage:Number(Y),request_id:m,side:s==="both"?se.Both:se.OneSide,is_ft_input:E,max_ft_amount:e};console.log("🚀 ~ preCalculate ~ params:",p,m,C);try{const n=await J.Vaults.calculateWithdrawAmount(p);if(console.log("🚀 ~ preCalculate ~ res:",{...n,uuid:m,assetAction:s}),s0.current===m){const S=u0(n.amount_a.toString(),t.decimals).toString(),V=u0(n.amount_b.toString(),o.decimals).toString();if(s==="both"&&(E?(v(V),T(S),C===100&&(H(S),L(V)),X(n)):q?+b0.current?(v(V),X(n)):v(""):+d0.current?(T(S),X(n)):T("")),s!=="both"){if(C){const $=u0(d(n.amount_a).add(((h=n.swap_result)==null?void 0:h.swap_out_amount)||"0").toString(),t.decimals).toString();if(q)T($),v(""),C===100&&(n.burn_ft_amount=e,H($));else{const a0=u0(d(n.amount_b).add(((K=n.swap_result)==null?void 0:K.swap_out_amount)||"0").toString(),o.decimals).toString();T(""),v(a0),C===100&&(n.burn_ft_amount=e,L(a0))}}X(n)}}}catch(n){console.log("🚀 ~ preCalculate ~ error:",n),X(void 0)}finally{h0(!1)}}},500),e0=(w,E,q=!1,m=!1,C=!0)=>{if(q){i0(100);return}if(m){i0(50);return}if(W(E),Q(!1),E?(T(w),C&&v("")):(v(w),C&&T("")),+w){const h=j0();b(h),R(w,!1,E,h)}else R0()},i0=w=>{if(Q(!0),u(w),e&&+e)if(w===0)R0();else{const E=s===(t==null?void 0:t.coin_type);if(W(E),w===100||s==="both"){const q=j0();b(q);const m=w===100?e:d(e).mul(w).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:351 ~ handlePercentInputChange ~ removeLpAmount:",m),R(m,!0,E,q,w)}else{W(E);const q=d(s===(t==null?void 0:t.coin_type)?r0:n0).mul(w).div(100).toFixed();R(q,!1,E,P,w)}}},y0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:j,removePercent:G}),j)i0(G);else{const w=A.current?b0.current:d0.current;e0(w,A.current)}};i.useEffect(()=>{if(!j)if(U&&e&&+e){let w=Number(d(U.burn_ft_amount).div(e).mul(100));w>100&&(w=100),u(w)}else u(0)},[U==null?void 0:U.burn_ft_amount]);const[c0,E0]=i.useState(!1),{signAndExecuteTransaction:P0,transactionConfirmation:I0,transactionRejected:U0}=ie(),q0=async()=>{if(l&&U&&e){E0(!0);let w;if(s==="both")w={vault_id:l,ft_amount:U==null?void 0:U.burn_ft_amount,slippage:Number(Y)};else{const q=s===(t==null?void 0:t.coin_type);if(G===100)w={vault_id:l,is_ft_input:!0,input_amount:e,slippage:Number(Y),max_ft_amount:e,fix_amount_a:q};else{const m=L0(F?N:k,9);w={vault_id:l,is_ft_input:!1,input_amount:m.toString(),slippage:Number(Y),max_ft_amount:e,fix_amount_a:q}}}console.log("🚀 ~ doRemoveAction ~ params:",w);const E={getShowInfo:(q,m)=>{const C="Withdraw "+[v0(N,t==null?void 0:t.symbol),v0(k,o==null?void 0:o.symbol)].filter(Boolean).join(" and "),h={modalDescriptionText:C,toastDescriptionContent:C};if(q==="success"){let K=N,g=k;m&&(K=d(N).gt(0)?W0(m,t)||N:"",g=d(k).gt(0)?W0(m,o)||k:"");const x="Removed "+[v0(K,t==null?void 0:t.symbol),v0(g,o==null?void 0:o.symbol)].filter(Boolean).join(" and ");h.toastDescriptionContent=x,h.modalDescriptionText=x}return h}};I0(E);try{const q=new ue;await J.Vaults.withdraw(w,q),await P0(q,E,{useMev:D,txAction:"signTransactionBlock",useFastMode:y==="Fast Mode",maxCapForGas:B,customGasPrice:z,msafeParams:{action:ce.RemoveVaultsPosition,txbParams:w}})?R0():y0(),r()}catch(q){console.log("🚀 ~ doAddAction ~ error:",q),U0(E)}}},R0=()=>{T(""),v(""),u(0),h0(!1),X(void 0),b("")},$0=i.useMemo(()=>{if(U&&U.swap_result&&s!=="both"&&t&&o){const w=F?N:k,E=A.current?t:o,q=A.current?o:t,m=u0(U.swap_result.swap_in_amount,E.decimals),C=u0(d(U.swap_result.swap_out_amount).mul(1-Number(Y)).toString(),q.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:Y,calculateResult:U,swapOutAmount:C}),`To withdraw ${S0(w)} ${E==null?void 0:E.symbol}, ${S0(m)} ${q==null?void 0:q.symbol} in the pool will be traded for ${C} ${E==null?void 0:E.symbol}`}},[s,U,N,k]);return{handleAmountInputChange:e0,fixAmountA:F,amountInputA:N,amountInputB:k,availableAmountA:r0,availableAmountB:n0,amountValueA:V0,amountValueB:C0,preCalculateLoading:f0,inputTotalValue:D0,calculateResult:U,showOnlySideTips:$0,doRemoveAction:q0,handlePercentInputChange:i0,isPercentInput:j,removePercent:G,reCalculateResult:y0,calculateAvailableAmount:g0,calculateAvailableLoading:x0}}const ea=s=>s?We:Ye,aa=s=>s?Je:Qe,sa=s=>s?Ze:Ae,ta=s=>s?Be:ke,Ca={useGetApiVaultInfo:Me,useGetContractVaultInfo:ea,useVaultsAdd:aa,useAddButtonStatus:sa,useVaultsRemove:ta};function Da({vaultsLstApyDisplay:s,vaultsApyDisplay:r,vaultsTotalApyDisplay:a,category:e,vaultsAprDisplay:l}){return T0.jsx(we,{tooltip:T0.jsx(la,{vaultsApyDisplay:r,vaultsLstApyDisplay:s,vaultsTotalApyDisplay:a,vaultsAprDisplay:l,category:e}),children:T0.jsx(Ue,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:e=="cetus"?a:r})})}const la=({vaultsLstApyDisplay:s,vaultsApyDisplay:r,vaultsTotalApyDisplay:a,category:e,vaultsAprDisplay:l})=>T0.jsx(oe,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:e=="cetus"?T0.jsxs(oe,{children:[T0.jsx(z0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:a}),T0.jsx(me,{h:"1px",w:"100%",backgroundColor:"border"}),T0.jsx(z0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:r}),T0.jsx(z0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:s,valueStyle:{fontSize:"12px"}})]}):T0.jsxs(oe,{children:[T0.jsx(z0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),T0.jsx(me,{h:"1px",w:"100%",backgroundColor:"border"}),T0.jsx(z0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:r}),T0.jsx(z0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function wa({coinType:s}){var a;const{tokenInfo:r}=ne((a=Ce(s))==null?void 0:a.full_address);return T0.jsx(Pe,{children:T0.jsx(De,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"})})}export{wa as C,la as V,Fe as a,xa as b,_e as c,Me as d,Ge as e,Da as f,Ta as g,A0 as h,va as i,Ke as j,Va as k,ha as l,K0 as u,Ca as v};
//# sourceMappingURL=VaultsAprBlock-D4jt-hhN.js.map
