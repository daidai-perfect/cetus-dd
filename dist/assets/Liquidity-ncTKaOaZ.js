import{aE as Ds,aF as ft,aG as Gs,aH as Ks,u as _t,r as A,X as Mt,j as t,T as B,h as Qs,H as q,I as ve,b as we,V as W,g as Me,ad as vt,as as X,e as wt,C as $e,$ as xe,l as Rt,k as Be,f as fe,d as O,aI as zt,B as ee,U as Yt,m as ue,aJ as At,Y as Zt,aK as Xs,ai as Ne,aL as Ys,S as Ve,a1 as dt,a as De,aD as jt,ae as Jt,af as Pt,ag as It,ah as es,aj as Zs,ak as ts,a0 as ss,W as Js,ab as tt,aM as rs,aN as Ct,a5 as is,az as Et,aO as ne,aP as Je,aQ as rt,aR as se,a7 as Ps,aS as qt,aT as Is,c as Lt,aU as er,aV as tr,ar as sr,aB as rr,ao as $t,aW as ns,aX as be,aY as ir,aa as nr,aZ as ar,a_ as cr}from"./index-B0zUQ3Cp.js";import{A as lr}from"./index-kXUBTnQU.js";import{i as dr,R as or,C as ur}from"./api-data-utils-CKHHanFA.js";import{u as J}from"./index-DBBM8bfE.js";import{u as ce}from"./useQueryParams-e_LPWC64.js";import{u as Oe}from"./useDocumentSize-3AeSHe7-.js";import{H as xr,T as pr,a as gr,u as mr,V as yr}from"./VolumeChart-DzYlsgxn.js";import{N as He}from"./NoData-JcjS0_6N.js";import{A as hr}from"./AddressUnderline-u82jp59a.js";import{T as br}from"./TvlChart-D2F3galW.js";import{u as fr}from"./useBurn-DQxHhqj0.js";import{H as de}from"./HTextLabelBox-BLoxKcLW.js";import{T as Ar}from"./TooltipIcon-DRix-q1H.js";import{A as as}from"./AddressCopyLink-Bd0Relyl.js";import{P as jr}from"./progress-EQkDASih.js";import{c as cs,d as Sr,a as _r,u as vr}from"./usePositionList-DXiNbCPR.js";import{u as wr}from"./useRpcListener-Bvg11thl.js";import{a as Rr,P as Cr,F as ls}from"./PositionListLoading-B5s9Z-Kg.js";import{u as Re,a as ot,L as ds,b as Lr,c as kr,S as Pe}from"./useGetContractPoolInfo-D0DjLDCc.js";import{T as Tr}from"./TradeConfirmAmountInfo-CDMgmnOt.js";import{P as Fr}from"./PositionStatus-BQkYnmJk.js";import{R as Br}from"./RangeAlerts-wu6swYg-.js";import{u as Mr}from"./global-DtQVOJ6j.js";import{c as zr,g as it,a as nt,u as Er}from"./useGetPoolList-DmV38xks.js";import{u as os}from"./useAccountBalance-BdD7ybCo.js";import{u as at}from"./useTokenBalance-DgQuOgL6.js";import{u as qr,a as $r}from"./useTransaction-BROrwLEz.js";import{u as us,m as yt,S as Wt,a as Wr}from"./SelectTokenAndFeeConfirm-BqvOTzkx.js";import{u as Ur}from"./useNotifiSubscription-BX_Vm_Ww.js";import{u as Hr}from"./usePosAdd-CCOgG-bT.js";import{L as ct}from"./LockInput-kypeheke.js";import{S as xs}from"./Slippage-CZRlZnpw.js";import{P as Ut,C as ps,I as lt}from"./common-De-gl1U2.js";import{C as st}from"./CetusTooltip-Dg4BiRP-.js";import{S as St}from"./switch-QFkfIwdw.js";import{T as gs}from"./TradeInputGroup-DjjU8vYj.js";import{i as qe}from"./index-DQsnUHgR.js";import{g as Nr}from"./liquidity-BgA3CnC_.js";import{d as Ht,F as Vr}from"./FeeTierSelect-0cLlUoYP.js";import{u as ms}from"./useToken-C-8_jnEM.js";import{u as Or,a as Dr}from"./swapWidget-DY9dw9tv.js";import{R as Gr}from"./RefreshButton-BpqjWAxo.js";import{C as Kr}from"./CurrentPrice-ch5rOfzo.js";import{W as Qr}from"./WarningTokenTipModal-DlcrUbmN.js";import"./debounce-CyWEdG3q.js";import"./index-DEth3bm0.js";import"./Pagination-9yxQC5wc.js";import"./tr-CNd7cabp.js";import"./_getAllKeysIn-CgkQtMIs.js";import"./YAxis-BK6XDgvH.js";import"./throttle-DACsaTos.js";import"./generateCategoricalChart-BEaF73D_.js";import"./linear-DYpwdEgO.js";import"./index-w9mRDh64.js";import"./progress.utils-pwfPfuH5.js";import"./usePreviousValue-ChmxO2Bf.js";import"./useCurrentPos-D2jT3RQJ.js";import"./PriceRange-Bx-bhQGK.js";import"./SingleTokenInfo-wAYGafzz.js";import"./RangeValue-NtFLQRfu.js";import"./ActionButton-D5AzR39N.js";import"./VTextLabelBox-Cgvdtdoe.js";import"./index-qEQ-OSJB.js";import"./Loading-D9YUOD2O.js";import"./useXCetusHelper-Ct6tTMe8.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-BsjyXDXZ.js";import"./icon_lock@2x-OdzkPjmc.js";import"./InputBox-Cq5tSrIS.js";var Xr=/\s/;function Yr(e){for(var s=e.length;s--&&Xr.test(e.charAt(s)););return s}var Zr=/^\s+/;function Jr(e){return e&&e.slice(0,Yr(e)+1).replace(Zr,"")}var Nt=NaN,Pr=/^[-+]0x[0-9a-f]+$/i,Ir=/^0b[01]+$/i,ei=/^0o[0-7]+$/i,ti=parseInt;function Vt(e){if(typeof e=="number")return e;if(Ds(e))return Nt;if(ft(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ft(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Jr(e);var r=Ir.test(e);return r||ei.test(e)?ti(e.slice(2),r?2:8):Pr.test(e)?Nt:+e}var ht=function(){return Gs.Date.now()},si="Expected a function",ri=Math.max,ii=Math.min;function ys(e,s,r){var c,u,d,x,b,n,o=0,a=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(si);s=Vt(s)||0,ft(r)&&(a=!!r.leading,l="maxWait"in r,d=l?ri(Vt(r.maxWait)||0,s):d,m="trailing"in r?!!r.trailing:m);function S(y){var g=c,w=u;return c=u=void 0,o=y,x=e.apply(w,g),x}function C(y){return o=y,b=setTimeout(p,s),a?S(y):x}function _(y){var g=y-n,w=y-o,R=s-g;return l?ii(R,d-w):R}function L(y){var g=y-n,w=y-o;return n===void 0||g>=s||g<0||l&&w>=d}function p(){var y=ht();if(L(y))return f(y);b=setTimeout(p,_(y))}function f(y){return b=void 0,m&&c?S(y):(c=u=void 0,x)}function i(){b!==void 0&&clearTimeout(b),o=0,c=n=u=b=void 0}function h(){return b===void 0?x:f(ht())}function v(){var y=ht(),g=L(y);if(c=arguments,u=this,n=y,g){if(b===void 0)return C(n);if(l)return clearTimeout(b),b=setTimeout(p,s),S(n)}return b===void 0&&(b=setTimeout(p,s)),x}return v.cancel=i,v.flush=h,v}var _e=(e=>(e.add="add_liquidity_event",e.remove="remove_liquidity_event",e.swap="swap_event",e))(_e||{});function ni(){const{clmmSdk:e}=Ks(),{fetchByApi:s}=_t();return{getTransactionsHistory:async u=>{try{const d=await s(dr,"GET",u);if(console.log(d,"getTransactionsHistory"),d)return d;throw new Error("no data")}catch(d){console.error(d,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(u,d)=>{try{const x=await e.Pool.getPoolTransactionList({poolId:u,paginationArgs:d,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(x,"getTransactionsHistoryBySDK"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistoryBySDK ~ error")}}}}function ai(){const{getTransactionsHistoryBySDK:s}=ni(),[r,c]=A.useState(!0),[u,d]=A.useState([]),[x,b]=A.useState(1),[n,o]=A.useState(),[a,l]=A.useState(!0),{apiPoolInfo:m,manualRefresh:S,setManualRefresh:C}=J(),{poolAddress:_}=ce();A.useEffect(()=>{d([]),b(1),o(void 0),l(!0)},[_]),A.useEffect(()=>{S&&(d([]),b(1),o(void 0),l(!0),L({cursor:void 0,limit:10}))},[_,S]);const L=async f=>{var i;try{if(!a)return;if(_){c(!0);const h=await s(_,{...f});if(h){const v=(i=h==null?void 0:h.data)==null?void 0:i.map(y=>{var k,$;const g=y==null?void 0:y.parsedJson,w=g!=null&&g.amount_a||g!=null&&g.atob?m==null?void 0:m.tokenA:m==null?void 0:m.tokenB,R=g!=null&&g.amount_b||g!=null&&g.atob?m==null?void 0:m.tokenB:m==null?void 0:m.tokenA;return{...y,type:(k=y.type)!=null&&k.includes("Add")?_e.add:($=y.type)!=null&&$.includes("Remove")?_e.remove:_e.swap,items:[{amount:Mt(g!=null&&g.amount_a?g==null?void 0:g.amount_a:g==null?void 0:g.amount_in,w==null?void 0:w.decimals).toString(),address:w==null?void 0:w.coin_type,url:w==null?void 0:w.logo_url,symbol:w==null?void 0:w.symbol},{amount:Mt(g!=null&&g.amount_b?g==null?void 0:g.amount_b:g==null?void 0:g.amount_out,R==null?void 0:R.decimals).toString(),address:R==null?void 0:R.coin_type,url:R==null?void 0:R.logo_url,symbol:R==null?void 0:R.symbol}]}});f!=null&&f.cursor?d(y=>[...y,...v||[]]):d(v||[]),o(h==null?void 0:h.nextCursor),l(h==null?void 0:h.hasNextPage),c(!1)}}}catch(h){console.log(h,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Oe(()=>{L({cursor:n,limit:10})},[x,_],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:u,apiPoolInfo:m,currentPage:x,onCurrentPageChange:()=>{b(f=>f+1)},hasNextPage:a}}const Ie={[_e.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[_e.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[_e.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},ci=({type:e})=>{var s,r,c,u;return t.jsxs(q,{children:[t.jsx(ve,{xlinkHref:(s=Ie[e])==null?void 0:s.icon,svgFill:(r=Ie[e])==null?void 0:r.color,svgHover:(c=Ie[e])==null?void 0:c.color}),t.jsx(B,{color:"text_caption",children:(u=Ie[e])==null?void 0:u.title})]})},li=({items:e,type:s,isReverse:r})=>{var u,d;const{isApp:c}=we();return e?s===_e.swap?c?t.jsxs(W,{align:"flex-end",gap:"8px",children:[t.jsx(Ee,{item:e==null?void 0:e[0]}),t.jsxs(q,{justify:"flex-end",children:[t.jsx(ve,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(Ee,{item:e==null?void 0:e[1]})]})]}):t.jsxs(q,{justify:"flex-end",gap:"8px",children:[t.jsx(Ee,{item:e==null?void 0:e[0]}),t.jsx(ve,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(Ee,{item:e==null?void 0:e[1]})]}):c?t.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(u=e==null?void 0:e.filter(x=>!!+x.amount))==null?void 0:u.map(x=>t.jsx(Ee,{item:x},x==null?void 0:x.address))}):t.jsx(q,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(d=e==null?void 0:e.filter(x=>!!+x.amount))==null?void 0:d.map(x=>t.jsx(Ee,{item:x},x==null?void 0:x.address))}):null},Ee=({item:e})=>t.jsxs(q,{gap:"4px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.url,w:"20px",h:"20px"}),t.jsx(B,{color:"text_caption",children:vt(e==null?void 0:e.amount)}),t.jsx(B,{children:X(e==null?void 0:e.symbol,10)})]}),Ot=(e,s=!1)=>[{title:t.jsx(B,{children:"Event"}),key:"type",render:({type:r})=>t.jsx(ci,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>t.jsx(li,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>t.jsx(hr,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(e(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>t.jsx(B,{color:"text_caption",children:Qs(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function di(){const{getExplorerUrl:e}=wt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:u,onCurrentPageChange:d,hasNextPage:x}=ai(),{isApp:b}=we();return t.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[t.jsx(q,{w:"100%",justify:"space-between",children:t.jsx(B,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?t.jsx(He,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):b?t.jsx(xr,{columns:Ot(e,c==null?void 0:c.isReverse),dataSource:r,loading:s&&u===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(n,o)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")}}):t.jsx(pr,{columns:Ot(e,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&u===1,onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),x&&t.jsx($e,{mt:{base:"40px",lg:"20px"},children:t.jsx(xe,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:d,children:s?t.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var kt=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(kt||{}),hs=(e=>(e.volume="vol",e.tvl="pure_tvl",e.fees="fee",e))(hs||{}),bs=(e=>(e.d="D",e.w="W",e.m="M",e))(bs||{}),fs=(e=>(e.d="day",e.w="wek",e.m="mon",e))(fs||{});const oi={D:40,W:30,M:20};function ui(){const[e,s]=A.useState("Volume"),[r,c]=A.useState("D"),[u,d]=A.useState([]),{apiPoolInfo:x}=J(),[b,n]=A.useState(!0),[o,a]=A.useState(null),{getHistogramData:l}=gr(),{poolAddress:m}=ce(),{getHoverTime:S,time:C}=mr();A.useLayoutEffect(()=>{d([]),s("Volume"),c("D"),a(null)},[m]);const _=async()=>{if(m)try{n(!0);const v=await l({date_type:fs[r.toLowerCase()],type:hs[e.toLowerCase()],limit:oi[r],address:m});v&&v.length&&d(v)}catch(v){throw console.error(v,"res-fetchAnalyticsData"),v}finally{n(!1)}};A.useEffect(()=>{_()},[m,e,r]),A.useEffect(()=>{o!=null&&o.date&&S(o==null?void 0:o.date,r)},[o==null?void 0:o.date,r]);const L=v=>{s(v.label),v.label!==e&&d([])},p=v=>{c(v.label),v.label!==r&&d([])},f=A.useMemo(()=>{if(e==="Volume")return{value:x==null?void 0:x.volume24Display,title:"Volume (24H)"};if(e==="TVL")return{value:x==null?void 0:x.tvlDisplay,title:"TVL"};if(e==="Fees")return{value:x==null?void 0:x.fees24Display,title:"Fees (24H)"}},[e,x==null?void 0:x.volume24Display,x==null?void 0:x.tvlDisplay,x==null?void 0:x.fees24Display]),i=Object.values(kt).map(v=>({label:v})),h=Object.values(bs).map(v=>({label:v}));return{handleChartTabChange:L,handleDateTabChange:p,defaultDisplay:f,chartsTabs:i,dateTypes:h,chartLoading:b,analyticsData:u,hoverData:o,setHoverData:a,currentChartTab:e,currentDateType:r,time:C}}function xi(){const{isApp:e}=we(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:u,dateTypes:d,chartLoading:x,analyticsData:b,hoverData:n,setHoverData:o,currentChartTab:a,currentDateType:l,time:m}=ui();return t.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[t.jsxs(q,{w:"100%",justify:{base:"center",lg:"space-between"},children:[t.jsx(Be,{type:"outlineTab",tabList:u,currentTab:a,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!e&&t.jsx(Be,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsxs(W,{w:"100%",align:"flex-start",children:[t.jsx(B,{color:"text_caption",fontSize:"24px",children:(n==null?void 0:n.num)!==void 0&&n!==null?O(zt(n.num)).gte("0.01")||O(zt(n.num)).equals("0")?`$${fe(n==null?void 0:n.num,2)}`:"<$0.01":c==null?void 0:c.value}),t.jsx(B,{children:n!=null&&n.date?m:c==null?void 0:c.title}),e&&t.jsx(Be,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsx(ee,{w:"100%",h:"340px",mt:"20px",children:t.jsxs(ee,{w:"100%",h:"100%",position:"relative",children:[x&&t.jsx(ee,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Rt,{})}),a===kt.tvl?t.jsx(br,{data:b,onChangeValue:S=>o(S)}):t.jsx(yr,{data:b,onChangeValue:S=>o(S),pageFrom:"pools"})]})})]})}const pi=(e,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{e(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{e(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{e(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{e(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{e(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{e(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{e(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{e(()=>({tvlLoading:r}))},resetTvlInfo:()=>{e(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ut=Yt(pi);function gi(){const{getBurnPositionAmountByPool:e}=fr(),{apiPoolInfo:s,contractPoolInfo:r}=J(),[c,u]=A.useState("0"),[d,x]=A.useState("0"),[b,n]=A.useState("0"),[o,a]=A.useState("0"),[l,m]=A.useState(!1),{poolAddress:S}=ce(),{tokenAPrice:C,tokenBPrice:_}=ut(),L=async(p,f)=>{try{m(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:i,totalB:h}=await e(p,f);u(i),x(h),C&&n(O(i).mul(C==null?void 0:C.price).toString()),_&&a(O(h).mul(_==null?void 0:_.price).toString())}catch(i){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",i)}finally{m(!1)}};return Oe(()=>{s&&(r!=null&&r.current_sqrt_price)&&L(s,r==null?void 0:r.current_sqrt_price)},[S,r==null?void 0:r.current_sqrt_price,C==null?void 0:C.price,_==null?void 0:_.price],{wait:500}),{burnAmountA:c,burnAmountB:d,burnAmountAUSD:b,burnAmountBUSD:o,loading:l}}function mi(){const{apiPoolInfo:e}=J(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:u,loading:d}=gi();return O(s).gt(0)||O(r).gt(0)?t.jsxs(ue,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[t.jsxs(q,{children:[t.jsx(B,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),t.jsx(Ar,{type:"burnedLiquidity"})]}),t.jsxs(ue,{gap:"16px",flexDir:{base:e!=null&&e.isReverse?"column-reverse":"column",lg:e!=null&&e.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[t.jsx(Dt,{token:e==null?void 0:e.tokenA,amount:s,amountUSD:c,loading:d}),t.jsx(Dt,{token:e==null?void 0:e.tokenB,amount:r,amountUSD:u,loading:d})]})]}):null}const Dt=({token:e,amount:s,amountUSD:r,loading:c})=>t.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px"}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(B,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(de,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(At(s,e==null?void 0:e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(de,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:O(r).gt("0")?`$${Zt(At(r,e==null?void 0:e.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function yi(){const{tokenAAmountUSD:e,totalAmountUSD:s}=ut(),r=A.useMemo(()=>{if(e&&s&&e!=="--"&&s!=="--"){const u=Xs(O(e).div(s).mul(100).toString(),2);return u==="NaN"?"--":u}return"--"},[e,s]),c=A.useMemo(()=>r&&r!=="--"?O(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const et=e=>e==="--"?"--":`${e}%`;function hi(){var l,m,S,C,_,L;const{apiPoolInfo:e,contractPoolInfo:s}=J(),{getExplorerUrl:r}=wt(),{poolAddress:c}=ce(),{tokenAAmount:u,tokenBAmount:d,tokenAAmountUSD:x,tokenBAmountUSD:b,tvlLoading:n}=ut(),{tokenARatio:o,tokenBRatio:a}=yi();return t.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(q,{w:"100%",justify:"space-between",children:t.jsx(Ne,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),t.jsxs(Ys,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[t.jsx(de,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:t.jsx(as,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(e==null?void 0:e.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||e!=null&&e.index?`#${(s==null?void 0:s.index)||(e==null?void 0:e.index)}`:"--",valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${e==null?void 0:e.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(q,{justify:"flex-start",w:"100%",children:t.jsx(Ne,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),t.jsxs(W,{gap:"16px",w:"100%",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:(l=e==null?void 0:e.displayTokenA)==null?void 0:l.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenA?(m=e==null?void 0:e.displayTokenA)==null?void 0:m.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((S=e==null?void 0:e.displayTokenA)==null?void 0:S.symbol,10)}),n?t.jsx(Ve,{h:"12px"}):t.jsx(B,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(a):et(o)})]})]}),t.jsx(ee,{w:"200px",children:t.jsx(jr,{value:Number(e!=null&&e.isReverse?a:o),size:"xs",h:"4px",borderRadius:"4px",bg:[o,a].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[o,a].includes("--")?"background":"primary"}}})}),t.jsxs(q,{gap:"12px",children:[t.jsxs(W,{align:"flex-end",gap:"4px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((C=e==null?void 0:e.displayTokenB)==null?void 0:C.symbol,10)}),n?t.jsx(Ve,{h:"12px"}):t.jsx(B,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(o):et(a)})]}),t.jsx(Me,{imageUrl:(_=e==null?void 0:e.displayTokenB)==null?void 0:_.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenB?(L=e==null?void 0:e.displayTokenB)==null?void 0:L.coin_type:""})]})]}),t.jsxs(W,{w:"100%",flexDir:e!=null&&e.isReverse?"column-reverse":"column",gap:"16px",children:[t.jsx(Gt,{loading:n,token:e==null?void 0:e.tokenA,amount:u,amountUSD:x}),t.jsx(Gt,{loading:n,token:e==null?void 0:e.tokenB,amount:d,amountUSD:b})]})]})]})]})}const Gt=({token:e,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:u}=wt();return e?t.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px",coinType:e?e==null?void 0:e.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(B,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(as,{address:(e==null?void 0:e.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(u(e==null?void 0:e.coin_type,"coin"))})]}),t.jsx(de,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(At(s||"0",e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(de,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${fe(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function bi(){return t.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[t.jsxs(ue,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[t.jsx(xi,{}),t.jsx(hi,{})]}),t.jsx(mi,{}),t.jsx(di,{})]})}function fi(){const{posBaseListLoading:e,posBaseListGroupByPool:s}=cs(),{manualRefresh:r}=J(),{currentAccount:c,onWalletModal:u}=dt(),{getPositionBaseList:d,getPosRelatedData:x}=Sr(),[b,n]=A.useState(""),{poolAddress:o}=ce(),a=async m=>{const S=await d(m);Array.isArray(S)&&x(S),typeof S=="string"&&n(S)};return A.useEffect(()=>{c!=null&&c.address&&a(c==null?void 0:c.address)},[c==null?void 0:c.address]),A.useEffect(()=>{r&&(c!=null&&c.address)&&a(c==null?void 0:c.address)},[r]),wr({onRpcChange:()=>{c!=null&&c.address&&a(c==null?void 0:c.address)}}),{data:A.useMemo(()=>{if(o){const m=s[o.toLowerCase()||""];return m?m==null?void 0:m.list:[]}return[]},[o,JSON.stringify(s)]),rpcNodeErrorStr:b,posBaseListLoading:e,currentAccount:c,onWalletModal:u}}function Ai(){const e=De(),{apiPoolInfo:s}=J(),{currentAccount:r,posBaseListLoading:c,data:u,rpcNodeErrorStr:d,onWalletModal:x}=fi();return t.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((b,n)=>t.jsx(Rr,{},n)):u&&(u==null?void 0:u.length)>0?u==null?void 0:u.map((b,n)=>t.jsx(Cr,{positionInfo:b},b==null?void 0:b.posId)):d?t.jsx(He,{type:"nodata",text:d}):t.jsx(He,{type:"nodata",text:"You don't have positions for this pool",children:t.jsx(xe,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>e(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):t.jsx(He,{type:"nowallet",onboard:()=>x(!0)})})}const ji=(e,s)=>({fromAmount:"",setFromAmount:r=>{e(()=>({fromAmount:r}))},fromAmountValue:"",setFromAmountValue:r=>{e(()=>({fromAmountValue:r}))},toAmount:"",setToAmount:r=>{e(()=>({toAmount:r}))},toAmountValue:"",setToAmountValue:r=>{e(()=>({toAmountValue:r}))},liquidityAmount:"",setLiquidityAmount:r=>{e(()=>({liquidityAmount:r}))},tokenMaxA:"",setTokenMaxA:r=>{e(()=>({tokenMaxA:r}))},tokenMaxB:"",setTokenMaxB:r=>{e(()=>({tokenMaxB:r}))},byAmountIn:!0,setByAmountIn:r=>{e(()=>({byAmountIn:r}))},isTokenA:!0,setIsTokenA:r=>{e(()=>({isTokenA:r}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:r=>{e(()=>({percentMap:r}))},isFullRange:!1,setIsFullRange:r=>{e(()=>({isFullRange:r}))},fromToken:void 0,setFromToken:r=>{e(()=>({fromToken:r}))},fromTokenLock:!1,setFromTokenLock:r=>{e(()=>({fromTokenLock:r}))},toToken:void 0,setToToken:r=>{e(()=>({toToken:r}))},toTokenLock:!1,setToTokenLock:r=>{e(()=>({toTokenLock:r}))},totalAmount:void 0,setTotalAmount:r=>{e(()=>({totalAmount:r}))},autoStakePosition:!1,setAutoStakePosition:r=>{e(()=>({autoStakePosition:r}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:r=>{e(()=>({isFarmRewardsRange:r}))},resetAddLiquidity:()=>{e(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),Ce=Yt(ji);function Si(e){var g,w;const{onClose:s,onSubmit:r,data:{feeTier:c}}=e,{fromToken:u,toToken:d,fromAmount:x,toAmount:b,totalAmount:n,percentMap:o,fromTokenLock:a,toTokenLock:l}=Ce(),{lowerTickData:m,upperTickData:S}=Re(),{currentPriceData:C,apiPoolInfo:_}=J(),{setIsChecked:L}=jt(),[p,f]=A.useState(!0),i=A.useMemo(()=>{var R;return((R=_==null?void 0:_.tokenA)==null?void 0:R.coin_type)===(u==null?void 0:u.coin_type)?!p:!!p},[_,u,d,p]),h=A.useMemo(()=>p?`${X(d==null?void 0:d.symbol,10)} per ${X(u==null?void 0:u.symbol,10)}`:`${X(u==null?void 0:u.symbol,10)} per ${X(d==null?void 0:d.symbol)}`,[p,u==null?void 0:u.symbol,d==null?void 0:d.symbol]),v=ys(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:y}=jt();return t.jsxs(Jt,{isOpen:!0,onClose:()=>{s(),L(!1)},isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{children:[t.jsx(es,{children:t.jsx(Ne,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),t.jsx(Zs,{}),t.jsx(ts,{textAlign:"center",p:"0px",children:t.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[t.jsxs(q,{w:"100%",justifyContent:"space-between",h:"40px",children:[t.jsxs(q,{children:[t.jsx(ss,{coinACoinType:u==null?void 0:u.coin_type,coinBCoinType:d==null?void 0:d.coin_type,coinAIconUrl:u==null?void 0:u.logo_url,coinBIconUrl:d==null?void 0:d.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(B,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${X(u==null?void 0:u.symbol,10)} - ${X(d==null?void 0:d.symbol,10)}`})]}),t.jsx(Js,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:t.jsxs(q,{gap:"12px",children:[t.jsx(B,{whiteSpace:"nowrap",children:"Fee Tier"}),t.jsx(B,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),t.jsx(Tr,{coinA:{amount:x,...u},coinB:{amount:b,...d}}),t.jsxs(ee,{w:"100%",children:[t.jsxs(q,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),t.jsx(Fr,{isActive:!a&&!l,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),t.jsxs(q,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[t.jsx(B,{children:"Current Price"}),t.jsx(B,{as:"span",color:"text_caption",children:tt(i?C.reverseCurrentPrice:C==null?void 0:C.currentPrice,6)}),t.jsx(B,{children:h}),t.jsx(xe,{variant:"unstyled",onClick:()=>f(!p),children:t.jsx(ve,{xlinkHref:"#icon-icon_swap1"})})]}),t.jsxs(q,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[t.jsx(Kt,{title:"Min Price",price:tt(i?S==null?void 0:S.reversePrice:m==null?void 0:m.price,6),perText:h}),t.jsx(rs,{orientation:"vertical",h:"40px"}),t.jsx(Kt,{title:"Max Price",price:tt(i?m==null?void 0:m.reversePrice:S==null?void 0:S.price,6),perText:h})]})]}),t.jsx(de,{isLoading:!1,label:"Deposit Ratio",value:`${o[(u==null?void 0:u.coin_type)===((g=_==null?void 0:_.tokenA)==null?void 0:g.coin_type)?"percentA":"percentB"]}% ${X(u==null?void 0:u.symbol,10)} / ${o[(d==null?void 0:d.coin_type)===((w=_==null?void 0:_.tokenA)==null?void 0:w.coin_type)?"percentA":"percentB"]}% ${X(d==null?void 0:d.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),t.jsx(de,{isLoading:!1,label:"Total Amount",value:n&&+n?Ct(n):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!a&&!l&&!((m==null?void 0:m.price)==="0"&&(S==null?void 0:S.price)==="âˆž")&&y=="authenticated"&&t.jsx(Br,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),t.jsx(xe,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:v,children:"Add Liquidity"})]})})]})]})}const Kt=({title:e,price:s,perText:r})=>t.jsxs(W,{flex:"1",children:[t.jsx(B,{children:e}),t.jsx(B,{color:"text_caption",children:s}),t.jsx(B,{children:r})]});function _i(e,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:u}=Hr(),[d,x]=A.useState(!1),{currentPriceData:b,apiPoolInfo:n,contractPoolInfo:o}=J(),{lowerTickData:a,upperTickData:l}=Re(),{signAndExecuteTransaction:m,getTransactionStatus:S,transactionSuccess:C}=qr(),{mevProtect:_,maxCapForGas:L,transactionMode:p,customGasPrice:f}=Mr(),[i,h]=A.useState(!1),[v,y]=A.useState(!1),[g,w]=A.useState(""),{transactionConfirmation:R}=$r(),{fromAmount:k,setFromAmount:$,fromAmountValue:G,setFromAmountValue:M,toAmount:U,setToAmount:Q,toAmountValue:Y,setToAmountValue:P,byAmountIn:N,setByAmountIn:V,isTokenA:z,setIsTokenA:F,percentMap:K,setPercentMap:Z,isFullRange:re,setIsFullRange:ae,fromToken:j,setFromToken:E,toToken:T,setToToken:Ge,totalAmount:ws,setTotalAmount:ze,fromTokenLock:pe,setFromTokenLock:Ke,toTokenLock:ge,setToTokenLock:Qe,setTokenMaxA:Rs,setTokenMaxB:Cs,tokenMaxA:Ls,tokenMaxB:ks,autoStakePosition:Ts,liquidityAmount:Fs,setLiquidityAmount:Bs}=Ce(),{getTokenAmountValue:Xe}=is();Et(()=>{var H,ie;n&&F(((H=n==null?void 0:n.displayTokenA)==null?void 0:H.coin_type)===((ie=n==null?void 0:n.tokenA)==null?void 0:ie.coin_type))},[n]);const{isWhiteQuoteToken:Ms}=us(),{notifiSubscription:zs}=Ur(),{isChecked:Tt}=jt();Oe(()=>{if(re){Z({percentA:"50",percentB:"50"});return}if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&typeof(o==null?void 0:o.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&b.currentSqrtPrice){if(ne(a.tick).lte(o.current_tick_index)&&ne(l.tick).gt(o.current_tick_index)){const H=Ms(n.tokenA.coin_type)?n.tokenA:n.tokenB,ie=H.coin_type===n.tokenA.coin_type,oe=r({amount:Je("1",H.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ie,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0}),Ae=zr(oe.coinAmountA,oe.coinAmountB,b==null?void 0:b.currentPrice,re);Z(Ae);return}if(ne(a.tick).gt(o.current_tick_index)){Z({percentA:"100",percentB:"0"});return}if(ne(l.tick).lte(o.current_tick_index)){Z({percentA:"0",percentB:"100"});return}}},[JSON.stringify(n),b,a==null?void 0:a.tick,l==null?void 0:l.tick,re],{wait:300});const Es=({amount:H,isTokenA:ie,isFullRange:oe})=>{var Ae,Le,ke,Te;if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&Object.keys(b).length>0&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&j&&T){let D;if(typeof(o==null?void 0:o.current_tick_index)=="number"&&ne(a==null?void 0:a.tick).lte(o==null?void 0:o.current_tick_index)&&ne(l==null?void 0:l.tick).gt(o==null?void 0:o.current_tick_index))D=r({amount:Je(H&&+H?H+"":"1",N?j==null?void 0:j.decimals:T==null?void 0:T.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ie,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0});else if(pe&&!ge){const te=(T==null?void 0:T.coin_type)===((Ae=n==null?void 0:n.tokenA)==null?void 0:Ae.coin_type);D=r({amount:Je(H?H+"":"1",T==null?void 0:T.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:te,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else if(ge&&!pe){const te=(j==null?void 0:j.coin_type)===((Le=n==null?void 0:n.tokenA)==null?void 0:Le.coin_type);D=r({amount:Je(H?H+"":"1",j==null?void 0:j.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:te,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else pe&&ge&&(D=ie?{coinAmountA:H?H+"":"1",coinAmountB:"",tokenMaxA:H?H+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:H?H+"":"1",tokenMaxA:"",tokenMaxB:H?H+"":"1"});if(Rs(D==null?void 0:D.tokenMaxA),Cs(D==null?void 0:D.tokenMaxB),H)if(ne(H).gt("0"))if(N){const te=(T==null?void 0:T.coin_type)===((ke=n==null?void 0:n.tokenA)==null?void 0:ke.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,me=Xe(j==null?void 0:j.coin_type,H+""),ye=Xe(T==null?void 0:T.coin_type,te),je=ne(me).plus(ye).toString();console.log(te,me,ye,je,"_totalAmountValue"),Q(te||""),M(me),P(ye),ze(je)}else{const te=(j==null?void 0:j.coin_type)===((Te=n==null?void 0:n.tokenA)==null?void 0:Te.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,me=Xe(j==null?void 0:j.coin_type,te),ye=Xe(T==null?void 0:T.coin_type,H+""),je=ne(me).plus(ye).toString();console.log(te,me,ye,je,"_totalAmountValue"),M(me),P(ye),$(te||""),ze(je)}else N?(Q(""),M(""),P(""),ze("")):($(""),M(""),P(""),ze(""));else $(""),Q(""),M(""),P(""),ze("");D&&Bs((D==null?void 0:D.liquidityAmount)||"")}};Oe(()=>{Es({amount:N?k:U,isTokenA:z,isFullRange:re})},[JSON.stringify(n),b,a==null?void 0:a.tick,l==null?void 0:l.tick,k,U,N,z,pe,ge,re],{wait:300});const qs=(H,ie,oe)=>{V(ie),ie?$(H):Q(H),F(oe!==void 0?oe:!1)},{balanceInfo:$s}=at(j),{balanceInfo:Ws}=at(T);Et(()=>{var H,ie;F(N?(j==null?void 0:j.coin_type)===((H=n==null?void 0:n.tokenA)==null?void 0:H.coin_type):(T==null?void 0:T.coin_type)===((ie=n==null?void 0:n.tokenA)==null?void 0:ie.coin_type))},[n,N,j,T]),A.useEffect(()=>{(a==null?void 0:a.tick)===rt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(l==null?void 0:l.tick)===rt.getMaxIndex(Number((l==null?void 0:l.tickSpacing)||0))?ae(!0):ae(!1)},[a==null?void 0:a.tick,l==null?void 0:l.tick]),A.useEffect(()=>{(o==null?void 0:o.current_tick_index)!==void 0&&se(a)&&se(l)&&(ne(a==null?void 0:a.tick).gte(ne(l.tick))?(Ke(!0),Qe(!0)):ne(a==null?void 0:a.tick).gt(o==null?void 0:o.current_tick_index)?(Ke(!s),Qe(!!s)):ne(l.tick).lte(o==null?void 0:o.current_tick_index)?(Ke(!!s),Qe(!s)):(Ke(!1),Qe(!1)))},[a==null?void 0:a.tick,l==null?void 0:l.tick,o,s]);const{currentAccount:Us,onWalletModal:Hs}=dt(),Ns=ys(()=>{Us?h(!0):Hs(!0)},300,{leading:!0,trailing:!1}),Vs=()=>{$(""),Q(""),M(""),P(""),ze("")},{fetchAccountBalance:Os}=os();return{percentMap:K,handleAmountChange:qs,fromToken:j,setFromToken:E,toToken:T,setToToken:Ge,byAmountIn:N,setByAmountIn:V,fromAmount:k,fromAmountValue:G,setFromAmount:$,toAmount:U,toAmountValue:Y,setToAmount:Q,liquidityAmount:Fs,fromBalanceInfo:$s,toBalanceInfo:Ws,totalAmount:ws,fromTokenLock:pe,toTokenLock:ge,handleAdd:Ns,confirmModalOpen:i,setConfirmModalOpen:h,nftOpen:v,setNftOpen:y,relatedPosId:g,handleSubmit:async()=>{var ye,je,Ft;const H=N?k:U,ie=N?j==null?void 0:j.decimals:T==null?void 0:T.decimals,oe=ne(H).mul(Ps.pow(10,ie)).toString(),Ae=N&&(j==null?void 0:j.coin_type)===((ye=n==null?void 0:n.tokenA)==null?void 0:ye.coin_type)?!0:(T==null?void 0:T.coin_type)===((je=n==null?void 0:n.tokenA)==null?void 0:je.coin_type)&&!N;let Le,ke;const Te=a.tick,D=l.tick,te=o==null?void 0:o.current_tick_index;Te!==void 0&&D!==void 0&&te!==void 0&&(te>=Te&&te<=D?(Le=Ae?oe:Ls,ke=Ae?ks:oe):te>D?(Le=0,ke=oe):te<Te&&(Le=oe,ke=0));let me=[];if(o!=null&&o.index){const{rewarder_infos:le}=o;me=(le==null?void 0:le.length)>0&&(le==null?void 0:le.map(We=>We.coinAddress))||[]}try{const le={poolAddress:o==null?void 0:o.poolAddress,coinTypeA:o==null?void 0:o.coinTypeA,coinTypeB:o==null?void 0:o.coinTypeB,amountA:Le,amountB:ke,fixAmountA:Ae,lowerTick:Te,upperTick:D,currentSqrtPrice:o==null?void 0:o.current_sqrt_price,rewarderCoinTypes:me,farmsPoolId:n==null?void 0:n.farmsPoolAddress},We={getShowInfo:(I,Fe)=>{const Ye=!pe&&!ge?`Add ${k} ${j==null?void 0:j.symbol} and ${U} ${T==null?void 0:T.symbol}`:ge?pe?"Add Liquidity":`Add ${k} ${j==null?void 0:j.symbol}`:`Add ${U} ${T==null?void 0:T.symbol}`,Ze={modalDescriptionText:Ye,toastTitleText:Ye};if(I==="success"){let gt=k,mt=U;Fe&&(gt=qt(Fe,j)||k,mt=qt(Fe,T)||U);const Bt=!pe&&!ge?`Add ${gt} ${j==null?void 0:j.symbol} and ${mt} ${T==null?void 0:T.symbol}`:!pe&&ge?`Add ${gt} ${j==null?void 0:j.symbol}`:!ge&&pe?`Add ${mt} ${T==null?void 0:T.symbol}`:"Add Liquidity";Ze.toastDescriptionContent=Bt,Ze.modalDescriptionText=Bt,Ze.toastTitleText="Supplied Successful"}return Ze}};R(We);let xt,pt;if(Ts){const I=await u(le);xt=I==null?void 0:I.tx,pt=I==null?void 0:I.msafeParams}else{const I=await c(le);xt=I==null?void 0:I.tx,pt=I==null?void 0:I.msafeParams}let he=await m(xt,We,{useDevInspect:!0,useMev:_,showSuccessModal:!1,useFastMode:p==="Fast Mode",maxCapForGas:L,customGasPrice:f,msafeParams:pt});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Tt),((Ft=he==null?void 0:he.events)==null?void 0:Ft.length)===0&&(he=await S(he.digest));const{posId:I,farmsPosId:Fe}=Is(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:I,farmsPosId:Fe}),I?(y(!0),w(Fe||I)):C(We),Tt){const Ye={subscriptionSource:"AddLiquidity",events:he.events};zs(Ye)}Os(),Vs(),e()}}catch(le){throw console.error(le,"handleSubmit ~ error"),new Error(le)}}}}function vi(){const{fromAmount:e,toAmount:s,fromToken:r,toToken:c,fromTokenLock:u,toTokenLock:d,liquidityAmount:x}=Ce(),{currentAccount:b}=dt(),{balanceInfo:n}=at(r),{balanceInfo:o}=at(c),a=A.useMemo(()=>{const l={text:"Add Liquidity",disabled:!1};return b!=null&&b.address?!u&&!d&&(!e||!s||e&&!+e||s&&!+s)||u&&!d&&(!s||s&&!+s)||d&&!u&&(!e||e&&!+e)?(l.text="Enter an amount",l.disabled=!0,l):e&&+e&&O(e).gt((n==null?void 0:n.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(r==null?void 0:r.symbol,10)} Balance`,l):s&&+s&&O(s).gt((o==null?void 0:o.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(c==null?void 0:c.symbol,10)} Balance`,l):((!u&&!d&&(!e||!s)||O(x).lte("0"))&&(l.disabled=!0),l):(l.text="Connect Wallet",l.disabled=!1,l)},[b==null?void 0:b.address,e,s,n==null?void 0:n.balanceDisplay,o==null?void 0:o.balanceDisplay,r,c,u,d,x]);return{btnText:a.text,btnDisabled:a.disabled}}function wi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="âˆž"?Zt(1/(1-Number(O(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function Ri({rangeTabList:e}){var G;const{apiPoolInfo:s}=J(),{fromToken:r,toToken:c,setFromToken:u,setToToken:d,byAmountIn:x,setByAmountIn:b,setIsFarmRewardsRange:n,setAutoStakePosition:o,fromTokenLock:a,toTokenLock:l,fromAmount:m,toAmount:S,setFromAmount:C,setToAmount:_}=Ce(),{lowerTickData:L,upperTickData:p}=Re(),[f,i]=A.useState(),{handleInitTickData:h}=ot(),{getLeverage:v}=wi();A.useEffect(()=>{var M;s&&i((M=s==null?void 0:s.displayTokenA)==null?void 0:M.coin_type)},[s==null?void 0:s.poolAddress]);const y=A.useMemo(()=>{var M;return f===((M=s==null?void 0:s.tokenA)==null?void 0:M.coin_type)},[f,(G=s==null?void 0:s.tokenA)==null?void 0:G.coin_type]),g=A.useMemo(()=>{var M,U,Q,Y;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":y?`${X((M=s==null?void 0:s.tokenB)==null?void 0:M.symbol,10)} per ${X((U=s==null?void 0:s.tokenA)==null?void 0:U.symbol,10)}`:`${X((Q=s==null?void 0:s.tokenA)==null?void 0:Q.symbol,10)} per ${X((Y=s==null?void 0:s.tokenB)==null?void 0:Y.symbol,10)}`},[y,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),w=A.useMemo(()=>{const M=L==null?void 0:L.price,U=p==null?void 0:p.price;return v(M,U)},[L==null?void 0:L.price,p==null?void 0:p.price]),R=M=>{n(M.target.checked),M.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&h(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};A.useEffect(()=>{O(L==null?void 0:L.tick).eq(O(s==null?void 0:s.farmsEffectiveTickLower))&&O(p==null?void 0:p.tick).eq(O(s==null?void 0:s.farmsEffectiveTickUpper))?n(!0):n(!1)},[L==null?void 0:L.tick,p==null?void 0:p.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const k=A.useMemo(()=>(L==null?void 0:L.price)==="0"&&(p==null?void 0:p.price)==="âˆž",[L==null?void 0:L.price,p==null?void 0:p.price]),$=M=>{var U;M&&(M!=null&&M.coin_type)?i(M==null?void 0:M.coin_type):i((U=e==null?void 0:e.find(Q=>Q.key!==f))==null?void 0:U.key),u(c),d(r),b(!x),x?(_(m),C("")):(C(S),_(""))};return A.useEffect(()=>{s!=null&&s.haveFarming&&o(!(a||l))},[a,l,s==null?void 0:s.haveFarming]),A.useEffect(()=>{x&&a&&!l&&(C(""),_("")),!x&&!a&&l&&(C(""),_("")),x&&!a&&l&&_(""),!x&&a&&!l&&C(""),a&&l&&(C(""),_(""))},[a,l]),{direct:y,perText:g,handleChangeIsFarmRewardsRange:R,onReverseClick:$,leverage:w,currentRangeTab:f,isFullRange:k}}function Ci({onClose:e,posId:s,tokenA:r,tokenB:c,fee:u,isReverse:d}){const x=De(),[b,n]=A.useState(!0),{lowerTickData:o,upperTickData:a}=Re();return A.useLayoutEffect(()=>{d&&n(!1)},[d]),t.jsxs(Jt,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:e,isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{w:"400px",children:[t.jsx(es,{children:t.jsxs(q,{justify:"space-between",w:"100%",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),t.jsx(xe,{onClick:e,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:t.jsx(ve,{xlinkHref:"#icon-icon_close"})})]})}),t.jsx(ts,{children:t.jsxs(W,{gap:"36px",children:[t.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[t.jsx(ss,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),t.jsxs(B,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[X(r==null?void 0:r.symbol,10)," - ",X(c==null?void 0:c.symbol,10)]}),t.jsxs(q,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[t.jsx(B,{fontSize:"14px",children:"Fee tier"}),t.jsx(B,{fontSize:"14px",color:"text_highlight",children:u})]})]}),t.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[t.jsxs(B,{color:"text_caption",whiteSpace:"nowrap",children:[b?fe(o==null?void 0:o.price,6):fe(a==null?void 0:a.reversePrice,6)," -Â ",b?fe(a==null?void 0:a.price,6):fe(o==null?void 0:o.reversePrice,6)]}),t.jsxs(q,{children:[t.jsxs(q,{gap:"0",children:[t.jsx(B,{color:"primary_gray",children:X(b?d?r==null?void 0:r.symbol:c==null?void 0:c.symbol:d?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),t.jsx(B,{color:"primary_gray",children:"Â perÂ "}),t.jsx(B,{color:"primary_gray",children:X(b?d?c==null?void 0:c.symbol:r==null?void 0:r.symbol:d?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),t.jsx(ve,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:l=>{Lt(l),n(!b)}})]})]})]})}),t.jsx(er,{p:"20px 0 0",children:t.jsx(xe,{flex:"1",onClick:()=>x(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function As({perText:e,direct:s,minPriceData:r,maxPriceData:c,isFullRange:u=!1}){const{tickDataLoading:d}=Re(),{handleAddPrice:x,handleSubPrice:b,setTickDataBasedOnPrice:n}=ot();return t.jsxs(ue,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[t.jsx(Ut,{title:"Min Price",perText:e,data:r,direct:s,loading:d,handleAddPrice:x,handleSubPrice:b,setTickDataBasedOnPrice:n,isFullRange:u}),t.jsx(Ut,{title:"Max Price",perText:e,data:c,direct:s,loading:d,handleAddPrice:x,handleSubPrice:b,setTickDataBasedOnPrice:n,isFullRange:u})]})}const js=({minPrice:e,maxPrice:s,perText:r,checked:c,onChange:u,loading:d})=>t.jsxs(q,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[t.jsxs(ue,{flexDir:{base:"column",lg:"row"},children:[t.jsxs(q,{children:[t.jsx(ls,{tooltip:t.jsxs(ee,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",t.jsx(ee,{as:"a",color:"primary",onClick:x=>{Lt(x),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),t.jsx(B,{children:"Farm rewards range"})]}),t.jsxs(q,{children:[d?t.jsx(Ve,{w:"120px",h:"14px"}):t.jsxs(B,{color:"primary_yellow",children:[e,"Â -Â ",s]}),t.jsx(B,{children:r})]})]}),t.jsx(St,{isChecked:c,onChange:u})]}),Ss=({disabled:e,checked:s,onChange:r})=>t.jsxs(q,{p:{base:"20px 8px",lg:"24px 24px 24px 16px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"0 0 20px 20px",lg:"20px"},bg:"bg_six",gap:"12px",children:[t.jsx(ls,{flex:"0 0 24px",h:"24px"}),t.jsx(B,{lineHeight:"20px",color:"text_caption",children:"Automatically stake your position into the farm to enjoy higher yield."}),e?t.jsx(st,{tooltip:t.jsxs(W,{gap:"4px",align:"flex-start",children:[t.jsx(B,{fontSize:"12px",children:"Farming rewards only available"}),t.jsx(B,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:t.jsx(St,{isChecked:s,disabled:e,onChange:r})}):t.jsx(St,{isChecked:s,disabled:e,onChange:r})]}),Li=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function _s({direct:e,rangeMap:s,wrapStyle:r={}}){const[c,u]=A.useState({type:"30D",key:"30_d"}),{minPriceForDate:d,maxPriceForDate:x,setMinPriceForDate:b,setMaxPriceForDate:n}=J();A.useEffect(()=>{let a="";if(se(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],S=e?m:O(1).div(m).toString();a=fe(S,6)}else a="-";b(a);let l="";if(se(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_highest`],S=e?m:O(1).div(m).toString();l=fe(S,6)}else l="-";n(l)},[e,c.key,s]);const{isApp:o}=we();return t.jsxs(q,{w:"100%",justify:"space-between",...r,children:[t.jsxs(ue,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(q,{children:[t.jsx($e,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:t.jsx(rs,{w:"14px",border:"1px dashed"})}),t.jsxs(B,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),t.jsxs(B,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[e?d:x,"Â -Â ",e?x:d]})]}),t.jsx(Be,{type:"outlineTab",tabList:Li,currentTab:c,handleChangeTab:a=>{u({type:a.label,key:a.key})},isActive:(a,l)=>a.key===l.key,wrapStyle:{h:o?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:o?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function ki(){const{fetchByApi:e}=_t(),[s,r]=A.useState(""),c=async n=>{var o,a,l,m;try{const C=await e(or,"GET",{pool:n}),_=((a=(o=C==null?void 0:C.list)==null?void 0:o[0])==null?void 0:a.recommend_ranges)||{},L=((m=(l=C==null?void 0:C.list)==null?void 0:l[0])==null?void 0:m.type)||"";console.log("ðŸš€ðŸš€ðŸš€ ~ getRecommendRanges ~ type:",L);const p={};if(_)for(const f in _){const i=_[f];(i!=null&&i.lower||i!=null&&i.upper)&&(p[f]={lower:i.lower,upper:i.upper})}return{ranges:p,type:L}}catch(S){return console.error("Error in getRecommendRanges:",S),{ranges:{},type:""}}},u=(n,o)=>({default:{lower:n,upper:o,sort:3}}),d=n=>({"full range":{lower:rt.getMinIndex(n),upper:rt.getMaxIndex(n),sort:2}}),x=(n,o,a)=>{const l=O(a).mul(o==="unstable"?2:3).toNumber(),m=tr(Number(n),Number(a));return{custom:{lower:O(m).sub(l).toNumber(),upper:O(m).add(l).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async n=>{try{const o=n.farmsEffectTickLower&&n.farmsEffectTickUpper?u(n.farmsEffectTickLower,n.farmsEffectTickUpper):null,a=n.farmsEffectTickLower&&n.farmsEffectTickUpper?{ranges:{},type:""}:await c(n.poolAddress);r(a.type);const l=d(n.tickSpacing),m=x(n.currentTick,a.type,n.tickSpacing),S={...o,...a.ranges,...l,...m},C=Object.entries(S).map(([_,L])=>({key:_,...L})).sort((_,L)=>L.sort-_.sort);return se(a.ranges)||se(o)?{rangeList:C,error:!1}:{rangeList:C,error:!0}}catch(o){return console.error("Error in getRecommendRangesList:",o),{rangeList:[],error:!0}}},poolType:s}}const bt=(e,s=!1)=>{switch(e){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Ti=e=>{switch(e){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Fi={1:"100%",2:"50%",3:"33.33%",4:"50%"};function vs(e){const{getRecommendRangesList:s}=ki(),[r,c]=A.useState(),{poolAddress:u,currentTick:d,tickSpacing:x,farmsEffectTickLower:b,farmsEffectTickUpper:n}=e;we();const{handleInitTickData:o}=ot(),{apiPoolInfo:a,currentRange:l,setCurrentRange:m}=J(),{lowerTickData:S,upperTickData:C,setLowerTickData:_,setUpperTickData:L,setTickDataLoading:p,tickDataLoading:f}=Re(),i=async()=>{var h,v,y;try{l||p(!0);const{rangeList:g,error:w}=await s(e);if(c(g),w){if(m("custom"),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)){const R=g.find(k=>k.key==="custom");R&&o(R==null?void 0:R.lower,R==null?void 0:R.upper,a)}}else m((h=g[0])==null?void 0:h.key),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)&&o((v=g[0])==null?void 0:v.lower,(y=g[0])==null?void 0:y.upper,a)}catch(g){console.error(g)}finally{p(!1)}};return Oe(()=>{u&&d!==void 0&&x!==void 0&&i()},[u,x],{wait:500}),A.useEffect(()=>{if(r&&r.length>0&&se(S)&&se(C)){const h=r==null?void 0:r.find(v=>O(v.lower).eq(O(S==null?void 0:S.tick))&&O(v.upper).eq(O(C==null?void 0:C.tick)));h?h.key!==l&&m(h.key):m("custom")}},[S==null?void 0:S.tick,C==null?void 0:C.tick,r]),t.jsx(t.Fragment,{children:t.jsx(sr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((h,v)=>{var y,g;return t.jsx(rr,{label:Ti(h.key),lineHeight:"1.5",placement:"top",gutter:-4,children:t.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Fi[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{h.key!==l&&(m(h.key),a!=null&&a.tokenA&&(a!=null&&a.tokenB)&&o(h.lower,h.upper,a))},bg:h.key==l?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[t.jsx($t,{decoding:"async",display:h.key===l?"block":"none",src:`/images/${(y=bt(h.key,!0))==null?void 0:y.image}`,w:"72px",h:h.key===l?"22px":"0px",fallback:t.jsx(ee,{bg:"background",w:"72px",h:h.key===l?"22px":"0px",borderRadius:"4px"})}),t.jsx($t,{decoding:"async",display:h.key===l?"none":"block",src:`/images/${(g=bt(h.key,!1))==null?void 0:g.image}`,w:"72px",h:h.key===l?"0px":"22px",fallback:t.jsx(ee,{bg:"background",w:"72px",h:h.key===l?"0px":"22px",borderRadius:"4px"})}),t.jsx(B,{color:h.key==l?"primary":"primary_gray",fontSize:"12px",children:bt(h.key).name})]})},h.key)})})})}function Bi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:u,direct:d,perText:x,rangeTabList:b,currentRangeTab:n,addressHistTokensMap:o,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:S,handleAmountChange:C,handleAdd:_,isFullRange:L}){var ae;const{currentPriceData:p,contractPoolInfo:f,apiPoolInfo:i,resetLiquidity:h,contractPoolInfoLoading:v,apiPoolInfoLoading:y,minPriceForDate:g,maxPriceForDate:w}=J(),{lowerTickData:R,upperTickData:k}=Re(),{autoStakePosition:$,setAutoStakePosition:G,isFarmRewardsRange:M,fromAmount:U,toAmount:Q,byAmountIn:Y,percentMap:P,fromToken:N,toToken:V,totalAmount:z,fromTokenLock:F,toTokenLock:K}=Ce(),{poolAddress:Z}=ce(),re=j=>{G(j.target.checked)};return A.useMemo(()=>!!(i!=null&&i.haveFarming)&&!!(i!=null&&i.displayFarmsEffectMaxPrice)&&!!(i!=null&&i.displayFarmsEffectMinPrice),[i==null?void 0:i.haveFarming,i==null?void 0:i.displayFarmsEffectMaxPrice,i==null?void 0:i.displayFarmsEffectMinPrice]),t.jsxs(ee,{w:"100%",children:[t.jsx(Ne,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),t.jsx(vs,{poolAddress:Z,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper}),y?t.jsx(Ve,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):t.jsx(Be,{type:"outlineTab",tabList:b,currentTab:n,handleChangeTab:j=>c(j),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),t.jsx(ps,{price:ns(d?p==null?void 0:p.currentPrice:p.reverseCurrentPrice,6),perText:x,loading:v,wrapStyle:{mt:"28px",gap:"12px"}}),t.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:d,minPriceData:d?R:k,maxPriceData:d?k:R,dashedMarkerLine:[g,w]})}),t.jsx(_s,{direct:d,rangeMap:o,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),t.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[t.jsx(As,{perText:x,direct:d,isFullRange:L,minPriceData:d?R:k,maxPriceData:d?k:R}),F&&K&&t.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),t.jsxs(W,{mb:"20px",gap:"16px",children:[t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:t.jsx(B,{color:"text_caption",children:F&&K?"--":u})}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(js,{minPrice:d?it(i==null?void 0:i.displayFarmsEffectMinPrice):nt(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?it(i==null?void 0:i.displayFarmsEffectMaxPrice):nt(i==null?void 0:i.displayFarmsEffectMinPrice),loading:y,perText:x,checked:M,onChange:r})]}),t.jsxs(ee,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:[t.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsx(Ne,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),t.jsx(q,{children:t.jsx(xs,{})})]}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsxs(ee,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:U+"",amountValue:m,loading:!1,onChange:j=>{var E;C(j,!0,(N==null?void 0:N.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:N,onFocusChange:j=>{var E;j&&+(U+"")&&!Y&&C(U+"",!0,(N==null?void 0:N.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:Q+"",amountValue:S,loading:!1,onFocusChange:j=>{var E;j&&+(Q+"")&&Y&&C(Q+"",!1,(V==null?void 0:V.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},onChange:j=>{var E;C(j,!1,(V==null?void 0:V.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:V},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),F&&K&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((ae=[F,K].filter(Boolean))==null?void 0:ae.length)===1&&t.jsx(ct,{position:"absolute",top:F?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(i!=null&&i.poolAddress)&&t.jsx(t.Fragment,{children:t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[t.jsx(de,{isLoading:!1,label:"Total Amount",value:z&&+z?Ct(z):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:t.jsx(W,{justify:"flex-end",gap:"4px",children:[N,V].filter(Boolean).map((j,E)=>{var T;return t.jsxs(q,{gap:"4px",justify:"flex-end",w:"100%",children:[t.jsx(Me,{imageUrl:j==null?void 0:j.logo_url,coinType:j==null?void 0:j.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(B,{color:E===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(j==null?void 0:j.symbol,10),"Â ",F&&K?"--":P[(j==null?void 0:j.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type)?"percentA":"percentB"],"%"]})]},j==null?void 0:j.coin_type)})})})]})})]}),!!(i!=null&&i.poolAddress)&&t.jsx(xe,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:_,children:e})]}),(i==null?void 0:i.haveFarming)&&t.jsx(Ss,{disabled:F||K,checked:$,onChange:re})]})]})}function Qt({children:e,title:s,wrapStyle:r={}}){return t.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[t.jsxs(q,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),e==null?void 0:e[0]]}),e==null?void 0:e[1]]})}function Mi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:u,direct:d,perText:x,rangeTabList:b,currentRangeTab:n,addressHistTokensMap:o,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:S,handleAmountChange:C,handleAdd:_,isFullRange:L}){var j;const{currentPriceData:p,contractPoolInfo:f,apiPoolInfo:i,resetLiquidity:h,contractPoolInfoLoading:v,apiPoolInfoLoading:y,minPriceForDate:g,maxPriceForDate:w,currentRange:R}=J(),{lowerTickData:k,upperTickData:$}=Re(),{autoStakePosition:G,setAutoStakePosition:M,isFarmRewardsRange:U,fromAmount:Q,toAmount:Y,byAmountIn:P,percentMap:N,fromToken:V,toToken:z,totalAmount:F,fromTokenLock:K,toTokenLock:Z}=Ce(),{poolAddress:re}=ce(),ae=E=>{M(E.target.checked)};return t.jsx(t.Fragment,{children:t.jsxs(q,{gap:"12px",align:"flex-start",children:[t.jsxs(Qt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!b||!b.length?t.jsx(Ve,{h:"32px",borderRadius:"8px",w:"180px"}):t.jsx(Be,{type:"outlineTab",tabList:b,currentTab:n,handleChangeTab:E=>c(E),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsx(q,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:t.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[t.jsx(q,{w:"100%",h:"24px",justify:"flex-start",children:t.jsx(ps,{loading:y,price:se(p)?ns(d?p==null?void 0:p.currentPrice:p.reverseCurrentPrice,6):"--",perText:x,wrapStyle:{ml:"156px",zIndex:99}})}),t.jsxs(q,{w:"100%",gap:"32px",children:[t.jsxs(W,{gap:"20px",children:[t.jsx($e,{h:"226px",mt:"10px",children:t.jsx(vs,{poolAddress:re,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper})}),se(k)&&se($)&&t.jsx(t.Fragment,{children:t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:t.jsx(B,{color:"text_caption",children:K&&Z?"--":u})})})]}),t.jsxs(W,{w:"100%",gap:"32px",children:[t.jsx(ee,{w:"100%",h:"230px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:d,minPriceData:d?k:$,maxPriceData:d?$:k,dashedMarkerLine:[g,w],currentRange:R})}),se(k)&&se($)&&t.jsx(_s,{direct:d,rangeMap:o,wrapStyle:{w:"100%"}})]})]})]})}),t.jsx(As,{perText:x,direct:d,isFullRange:L,minPriceData:d?k:$,maxPriceData:d?$:k}),K&&Z&&t.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(js,{minPrice:d?it(i==null?void 0:i.displayFarmsEffectMinPrice):nt(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?it(i==null?void 0:i.displayFarmsEffectMaxPrice):nt(i==null?void 0:i.displayFarmsEffectMinPrice),loading:y,perText:x,checked:U,onChange:r})]})]}),t.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[t.jsxs(Qt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[t.jsx(q,{children:t.jsx(xs,{})}),t.jsxs(ee,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:Q,amountValue:m,loading:!1,onChange:E=>{var T;C(E,!0,(V==null?void 0:V.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},selectable:!1,placeholder:"0.0",token:V,onFocusChange:E=>{var T;E&&+(Q+"")&&!P&&C(Q+"",!0,(V==null?void 0:V.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:Y,amountValue:S,loading:!1,onFocusChange:E=>{var T;E&&+(Y+"")&&P&&C(Y+"",!1,(z==null?void 0:z.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},onChange:E=>{var T;C(E,!1,(z==null?void 0:z.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},selectable:!1,placeholder:"0.0",token:z},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),K&&Z&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((j=[K,Z].filter(Boolean))==null?void 0:j.length)===1&&t.jsx(ct,{position:"absolute",top:K?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),t.jsxs(t.Fragment,{children:[t.jsx(W,{w:"100%",gap:"8px",children:!!(i!=null&&i.poolAddress)&&(!K||!Z)&&t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:i!=null&&i.displayTokenA&&(i!=null&&i.displayTokenB)?"0 16px 16px":"0 16px",children:[t.jsx(xe,{w:"calc(100% + 34px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:_,children:e}),(i==null?void 0:i.displayTokenA)&&(i==null?void 0:i.displayTokenB)&&t.jsxs(t.Fragment,{children:[t.jsx(de,{isLoading:!1,label:"Total Amount",value:F&&+F?Ct(F):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:t.jsx(q,{gap:"12px",children:[V,z].filter(Boolean).map((E,T)=>{var Ge;return t.jsxs(q,{gap:"4px",children:[t.jsx(Me,{imageUrl:E==null?void 0:E.logo_url,coinType:E?E==null?void 0:E.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(B,{color:T===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(E==null?void 0:E.symbol,10),"Â ",K&&Z?"--":N[(E==null?void 0:E.coin_type)===((Ge=i==null?void 0:i.tokenA)==null?void 0:Ge.coin_type)?"percentA":"percentB"],"%"]})]},E==null?void 0:E.coin_type)})})})]})]})}),(i==null?void 0:i.haveFarming)&&t.jsx(Ss,{disabled:K||Z,checked:G,onChange:ae})]})]})]})})}function zi({rangeTabList:e,currentFeeTier:s,addressHistTokensMap:r,getList:c,getPrice:u}){const{apiPoolInfo:d}=J(),{direct:x,perText:b,handleChangeIsFarmRewardsRange:n,onReverseClick:o,leverage:a,currentRangeTab:l,isFullRange:m}=Ri({rangeTabList:e}),{handleAmountChange:S,fromAmountValue:C,toAmountValue:_,fromBalanceInfo:L,toBalanceInfo:p,confirmModalOpen:f,setConfirmModalOpen:i,relatedPosId:h,nftOpen:v,setNftOpen:y,handleAdd:g,handleSubmit:w}=_i(c,x),{btnText:R,btnDisabled:k}=vi(),{isApp:$}=we(),G={btnText:R,btnDisabled:k,handleChangeIsFarmRewardsRange:n,onReverseClick:o,leverage:a,direct:x,perText:b,rangeTabList:e,currentRangeTab:l,addressHistTokensMap:r,fromBalanceInfo:L,toBalanceInfo:p,fromAmountValue:C,toAmountValue:_,handleAmountChange:S,handleAdd:g,isFullRange:m};return t.jsxs(t.Fragment,{children:[$?t.jsx(Bi,{...G}):t.jsx(Mi,{...G}),f&&t.jsx(Si,{onClose:()=>i(!1),data:{feeTier:s},onSubmit:w}),v&&h&&se(d)&&t.jsx(Ci,{onClose:()=>y(!1),tokenA:d==null?void 0:d.displayTokenA,tokenB:d==null?void 0:d.displayTokenB,posId:h,fee:d==null?void 0:d.feeDisplay,isReverse:d==null?void 0:d.isReverse})]})}const Xt=(e,s,r)=>e&&s&&r?O(e).mul(s).div(O(10).pow(r)).toString():"--";function Ei(){var y,g;const{tokenAPrice:e,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:u,setTokenAAmount:d,tokenBAmount:x,setTokenBAmount:b,tokenAAmountUSD:n,setTokenAAmountUSD:o,tokenBAmountUSD:a,setTokenBAmountUSD:l,totalAmountUSD:m,setTotalAmountUSD:S,resetTvlInfo:C,tvlLoading:_,setTvlLoading:L}=ut(),{apiPoolInfo:p,contractPoolInfo:f}=J(),i=async w=>{var R,k;try{const $=(R=be(w))==null?void 0:R.full_address,G=$=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":$,{prices:M}=await ir(`${(k=nr)==null?void 0:k.cetus_api}/v2/sui/price?base_symbol_address=${G}`);return M==null?void 0:M[0]}catch($){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",$),"--"}},{poolAddress:h}=ce(),v=async()=>{var w,R,k,$;L(!0);try{if((w=p==null?void 0:p.tokenA)!=null&&w.coin_type){const G=await i((R=p==null?void 0:p.tokenA)==null?void 0:R.coin_type);G&&s(G)}if((k=p==null?void 0:p.tokenB)!=null&&k.coin_type){const G=await i(($=p==null?void 0:p.tokenB)==null?void 0:$.coin_type);G&&c(G)}}catch(G){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",G)}finally{L(!1)}};return A.useEffect(()=>{C()},[h]),A.useEffect(()=>()=>{C()},[]),A.useEffect(()=>{v()},[p==null?void 0:p.tvl,(y=p==null?void 0:p.tokenA)==null?void 0:y.coin_type,(g=p==null?void 0:p.tokenB)==null?void 0:g.coin_type]),A.useEffect(()=>{f!=null&&f.coinAmountA&&d(O(f==null?void 0:f.coinAmountA).sub((f==null?void 0:f.fee_protocol_coin_a)||"0").toString())},[f==null?void 0:f.coinAmountA,f==null?void 0:f.fee_protocol_coin_a]),A.useEffect(()=>{f!=null&&f.coinAmountB&&b(O(f==null?void 0:f.coinAmountB).sub((f==null?void 0:f.fee_protocol_coin_b)||"0").toString())},[f==null?void 0:f.coinAmountB,f==null?void 0:f.fee_protocol_coin_b]),A.useEffect(()=>{u&&(e!=null&&e.price)&&(p!=null&&p.tokenA.decimals)&&!Number.isNaN(Number(p==null?void 0:p.tokenA.decimals))&&o(Xt(u,e==null?void 0:e.price,p==null?void 0:p.tokenA.decimals))},[u,e]),A.useEffect(()=>{x&&(r!=null&&r.price)&&(p!=null&&p.tokenB.decimals)&&!Number.isNaN(Number(p==null?void 0:p.tokenB.decimals))&&l(Xt(x,r==null?void 0:r.price,p==null?void 0:p.tokenB.decimals))},[x,r]),A.useEffect(()=>{S(n&&a&&n!=="--"&&a!=="--"?O(n).plus(a).toString():"--")},[n,a]),{tokenAPrice:e,tokenBPrice:r,tokenAAmount:u,tokenBAmount:x,tokenAAmountUSD:n,tokenBAmountUSD:a,totalAmountUSD:m,setTotalAmountUSD:S,tvlLoading:_}}function qi(){const{tab:e,poolAddress:s,from:r,to:c,fee:u}=ce(),{getPoolList:d}=Er(),[x,b]=A.useState([]),{apiPoolInfo:n,setApiPoolInfo:o,setApiPoolInfoLoading:a,setNetError:l}=J(),m=De(),{fetchTokenInfo:S}=ms(),C=async({poolAddress:_,from:L,to:p})=>{var f,i,h,v;try{a(!0);let y,g;if(_&&_!=="undefined"){const w=await d({pool:_});w&&w.list&&w.list.length?(g=w.list[0],y=await d({coin_type:`${(f=g==null?void 0:g.displayTokenA)==null?void 0:f.coin_type},${(i=g==null?void 0:g.displayTokenB)==null?void 0:i.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):n&&se(n)?(g=n,y={list:x}):(g={poolAddress:_,displayTokenA:void 0,displayTokenB:void 0},y={list:[]}),a(!1)}else if(L&&p&&L!=="undefined"&&p!=="undefined"&&L!==p){const w=await d({coin_type:`${L},${p}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(w,"res_getPoolList"),w&&w.list&&w.list.length)if(u&&u!=="undefined"){const R=(h=w==null?void 0:w.list)==null?void 0:h.find(k=>O(k==null?void 0:k.feeRate).eq(u));if(R)m(e?`/liquidity?tab=${e}&poolAddress=${R==null?void 0:R.poolAddress}`:`/liquidity?poolAddress=${R==null?void 0:R.poolAddress}`);else{const k=yt(w==null?void 0:w.list,$=>Number(($==null?void 0:$.tvl)||"0"));m(e?`/liquidity?tab=${e}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}}else{let R=yt(w==null?void 0:w.list,k=>Number((k==null?void 0:k.tvl)||"0"));R||(R=yt(w==null?void 0:w.list,k=>{var $;return Number((($=k==null?void 0:k.object)==null?void 0:$.liquidity)||"0")}),R||(R=w==null?void 0:w.list[0])),m(e?`/liquidity?tab=${e}&poolAddress=${R==null?void 0:R.poolAddress}`:`/liquidity?poolAddress=${R==null?void 0:R.poolAddress}`)}else{const R=await S(L),k=await S(p);g={poolAddress:void 0,displayTokenA:R,displayTokenB:k},y={list:[]},a(!1)}}else(!L||L==="undefined")&&p&&p!=="undefined"&&(g={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await S(p)}),(!p||p==="undefined")&&L&&L!=="undefined"&&(g={poolAddress:void 0,displayTokenA:await S(L),displayTokenB:void 0}),y={list:[]},a(!1);y&&(l(!1),b(y==null?void 0:y.list),console.log(g,"setApiPoolInfo"),g&&(g!=null&&g.poolAddress&&_?(g==null?void 0:g.poolAddress)===_&&o(g):o(g))),a(!1)}catch(y){if(y!=null&&y.list&&((v=y==null?void 0:y.list)==null?void 0:v.length)===1){l(!0);const g=y==null?void 0:y.list[0];console.log(y==null?void 0:y.list,"setApiPoolInfo"),o(g),b([]),a(!1)}}};return A.useEffect(()=>{s&&s==="undefined"||C({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:C,relatedPoolList:x}}function $i(){var _,L,p,f;const{poolAddress:e}=ce(),{apiPoolInfo:s,apiPoolInfoLoading:r}=J(),[c,u]=A.useState(),{fetchByApi:d}=_t(),{quoteWhiteTokenList:x}=us(),{getList:b,relatedPoolList:n}=qi(),o=A.useMemo(()=>{var h,v;const i=Nr(n);return i?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(h=Ht)==null?void 0:h.map(y=>{var w,R;const g=((w=i.find(k=>k.feeRate===y.feeRate))==null?void 0:w.title)||y.title;return{...y,title:g,poolAddress:(R=i.find(k=>k.feeRate===y.feeRate))==null?void 0:R.poolAddress,disabled:g==="Not Created"&&!qe(s==null?void 0:s.tokenA,x)&&!qe(s==null?void 0:s.tokenB,x)}}):(v=Ht)==null?void 0:v.map(y=>{var w,R;const g=((w=i.find(k=>k.feeRate===y.feeRate))==null?void 0:w.title)||y.title;return{...y,title:g,poolAddress:(R=i.find(k=>k.feeRate===y.feeRate))==null?void 0:R.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,x)&&!qe(s==null?void 0:s.displayTokenB,x)}}):[]},[JSON.stringify(n),JSON.stringify(x),(_=s==null?void 0:s.displayTokenA)==null?void 0:_.coin_type,(L=s==null?void 0:s.displayTokenB)==null?void 0:L.coin_type]),a=A.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(i=>({label:i==null?void 0:i.symbol,key:i==null?void 0:i.coin_type,isToken:!0,imgInfo:{src:i==null?void 0:i.logo_url,w:"16px",h:"16px",coinType:i?i==null?void 0:i.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(p=s==null?void 0:s.displayTokenA)==null?void 0:p.symbol,(f=s==null?void 0:s.displayTokenB)==null?void 0:f.symbol]),l=A.useMemo(()=>{const i=o==null?void 0:o.find(h=>h.poolAddress===e);return i||s},[JSON.stringify(o),e,JSON.stringify(s)]),m=async i=>{console.log("ðŸš€ ~ setAddressHistTokens ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",i);let h=[];const v=await d(ur,"GET",{pool:i});console.log(v,"resVal"),h=Object.fromEntries(v.list.map(y=>[y.swap_account,y])),u(h)};A.useEffect(()=>{e&&m(e)},[e]);const S=A.useMemo(()=>{var i,h,v;return c&&e&&((i=c==null?void 0:c[e])!=null&&i.data)?Object.fromEntries((v=(h=c==null?void 0:c[e])==null?void 0:h.data)==null?void 0:v.map(y=>[y.key,y.value])):{}},[JSON.stringify(c)]),C=A.useMemo(()=>{const i=[];return s!=null&&s.displayTokenA&&i.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&i.push(s==null?void 0:s.displayTokenB),i},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:b,feeTierList:o,apiPoolInfo:s,rangeTabList:a,currentFeeTier:l,addressHistTokensMap:S,apiPoolInfoLoading:r,quoteWhiteTokenList:x,warningTokenList:C}}var Ue=(e=>(e.deposit="Provide Liquidity",e.positions="My Positions",e.analytics="Analytics",e))(Ue||{});const Se=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Wi({apiPoolInfo:e}){var P,N,V;const{tab:s,poolAddress:r}=ce(),c=De(),[u,d]=A.useState(),[x,b]=A.useState(Se),[n,o]=A.useState(((P=Se==null?void 0:Se.find(z=>z.key===s))==null?void 0:P.key)||Se[0].key),[a,l]=A.useState(),[m,S]=A.useState(),{posBaseListGroupByPool:C}=cs(),{addFavorites:_,removeFavorites:L}=_r(),{poolFavoriteIds:p}=vr(),{fromToken:f,toToken:i}=Ce(),{fetchTokenPrices:h}=is(),{isApp:v}=we(),{setFromCoin:y,setToCoin:g,fromCoin:w,toCoin:R}=Or(),{setIsOpen:k}=Dr(),$=()=>{var z,F;v?c(`/swap/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}`):k(!0)};A.useEffect(()=>{f&&i&&(y(f),g(i))},[f,i]);const G=A.useMemo(()=>{if(r&&r!=="undefined"){const z=C[r.toLowerCase()||""];return z&&(z!=null&&z.list)&&(z==null?void 0:z.list.length)>0?z==null?void 0:z.list.length:void 0}},[JSON.stringify(C),r]);A.useEffect(()=>{b(Se==null?void 0:Se.map(z=>({...z,num:z.label==="My Positions"&&n==="positions"?G:void 0})))},[G,n]),A.useLayoutEffect(()=>{s&&s!==n&&o(s)},[s]);const M=A.useMemo(()=>p==null?void 0:p.includes(r||""),[JSON.stringify(p),r]),U=z=>{Lt(z),r&&(M?L(r):_(r))};A.useEffect(()=>{l(e==null?void 0:e.displayTokenA),S(e==null?void 0:e.displayTokenB)},[(N=e==null?void 0:e.displayTokenA)==null?void 0:N.coin_type,(V=e==null?void 0:e.displayTokenB)==null?void 0:V.coin_type]);const Q=()=>{var z,F;c(`/create-pool/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}/${u==null?void 0:u.feeRate}`)},Y=()=>{const z=[];f&&z.push(f.coin_type),i&&z.push(i.coin_type),z.length>0&&h(z)};return A.useEffect(()=>{Y()},[f==null?void 0:f.coin_type,i==null?void 0:i.coin_type]),{currentTab:n,setCurrentTab:o,tabList:x,isFavoritePool:M,onChangeFavorites:U,selectedTokenA:a,selectedTokenB:m,setSelectedTokenA:l,setSelectedTokenB:S,onConfirm:Q,feeTier:u,setFeeTier:d,refreshMarketPrice:Y,onJump2Swap:$}}function Ui(){const{currentAccount:e}=dt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c}=J(),{feeTierList:u,currentFeeTier:d,rangeTabList:x,addressHistTokensMap:b,getList:n,quoteWhiteTokenList:o,warningTokenList:a}=$i(),{poolAddress:l}=ce(),{handleResetRange:m}=ot(),{resetAddLiquidity:S,setFromToken:C,setToToken:_}=Ce(),{fetchAccountBalance:L}=os(),{getContractPoolInfo:p}=Lr(),{getCurrentPrice:f}=kr(),{currentTab:i,setCurrentTab:h,tabList:v,isFavoritePool:y,onChangeFavorites:g,selectedTokenA:w,selectedTokenB:R,setSelectedTokenA:k,setSelectedTokenB:$,onConfirm:G,setFeeTier:M,refreshMarketPrice:U,onJump2Swap:Q}=Wi({apiPoolInfo:s});A.useEffect(()=>{se(s)&&(C(s==null?void 0:s.displayTokenA),_(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const Y=async()=>{if(l&&s&&l===(s==null?void 0:s.poolAddress)){const V=await p(l);V&&f(V==null?void 0:V.current_sqrt_price,s)}},P=()=>{U==null||U(),Y==null||Y()},N=async V=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),V&&c(!0),l&&l!=="undefined"&&await n({poolAddress:l}),e!=null&&e.address&&await L(),P(),c(!1)};return A.useEffect(()=>(e!=null&&e.address&&L(),()=>{m(),S(),r()}),[]),A.useEffect(()=>{l&&(s==null?void 0:s.poolAddress)!==l&&(m(),S(),r()),l&&l===(s==null?void 0:s.poolAddress)&&Y()},[l,s==null?void 0:s.poolAddress]),{feeTierList:u,currentFeeTier:d,rangeTabList:x,addressHistTokensMap:b,quoteWhiteTokenList:o,warningTokenList:a,currentTab:i,setCurrentTab:h,tabList:v,isFavoritePool:y,onChangeFavorites:g,selectedTokenA:w,selectedTokenB:R,setSelectedTokenA:k,setSelectedTokenB:$,onConfirm:G,setFeeTier:M,handleRefresh:N,handleGetPrice:Y,onJump2Swap:Q}}function ra(){const e=De(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,setApiPoolInfo:u,netError:d}=J(),{poolAddress:x,from:b,to:n}=ce(),{feeTierList:o,currentFeeTier:a,rangeTabList:l,addressHistTokensMap:m,quoteWhiteTokenList:S,warningTokenList:C,currentTab:_,setCurrentTab:L,tabList:p,isFavoritePool:f,onChangeFavorites:i,selectedTokenA:h,selectedTokenB:v,setSelectedTokenA:y,setSelectedTokenB:g,onConfirm:w,setFeeTier:R,handleRefresh:k,handleGetPrice:$,onJump2Swap:G}=Ui(),{getTokenInfo:M}=ms(),{isApp:U}=we(),{isOpen:Q,onOpen:Y,onClose:P}=ar(),{totalAmountUSD:N,tvlLoading:V,setTotalAmountUSD:z}=Ei();return t.jsxs(t.Fragment,{children:[t.jsxs(ee,{w:"100%",mt:"20px",children:[t.jsxs(q,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[t.jsx(cr,{text:"Pools",onClick:()=>e("/pools")}),x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(q,{gap:"8px",children:[t.jsx(st,{placement:"top",tooltip:f?"Remove from Watchlist":"Add to Watchlist",children:t.jsx(xe,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:i,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:f?"primary":"text_caption"}}},children:t.jsx(ve,{xlinkHref:f?"#icon-icon_star_sel":"#icon-icon_star",svgFill:f?"primary_blue":"text_paragraph",svgHover:f?"primary":"text_caption",fontSize:"18px"})})}),t.jsx(st,{placement:"top",tooltip:"Trade",children:t.jsx(xe,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:G,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:t.jsx(ve,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),t.jsx(st,{placement:"top",tooltip:"Refresh",children:t.jsx(ee,{children:t.jsx(Gr,{handleRefresh:k,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),t.jsxs(ue,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[t.jsxs(ue,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Wt,{value:h||(b?M(b):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,re,ae,j;const K=Object.keys(Ue).find(E=>E===_);if(v!=null&&v.coin_type||(Z=M(n))!=null&&Z.coin_type)if(be(F==null?void 0:F.coin_type).full_address===be((v==null?void 0:v.coin_type)||((re=M(n))==null?void 0:re.coin_type)||"").full_address)y(v),g(h);else{if(be(F==null?void 0:F.coin_type).full_address===be((h==null?void 0:h.coin_type)||((ae=M(b))==null?void 0:ae.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}&to=${(v==null?void 0:v.coin_type)||((j=M(n))==null?void 0:j.coin_type)}`),u(null),z("")}else e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}`),u(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!h&&r}),t.jsx(Wt,{value:v||(n?M(n):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,re,ae,j;const K=Object.keys(Ue).find(E=>E===_);if(h!=null&&h.coin_type||(Z=M(b))!=null&&Z.coin_type)if(be(F==null?void 0:F.coin_type).full_address===be((h==null?void 0:h.coin_type)||((re=M(b))==null?void 0:re.coin_type)||"").full_address)y(v),g(h);else{if(be(F==null?void 0:F.coin_type).full_address===be((v==null?void 0:v.coin_type)||((ae=M(n))==null?void 0:ae.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${(h==null?void 0:h.coin_type)||((j=M(b))==null?void 0:j.coin_type)}&to=${F==null?void 0:F.coin_type}`),u(null),z("")}else e(`/liquidity?tab=${K}&to=${F==null?void 0:F.coin_type}`),u(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!v&&r})]}),t.jsx(Vr,{value:a,loading:!a&&r,feeTierList:o,disabled:d,onChange:F=>{F!=null&&F.poolAddress?e(`/liquidity?poolAddress=${F==null?void 0:F.poolAddress}`):(R(F),Y())}})]}),x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(ue,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[t.jsx(Pe,{label:"Pool APR",value:t.jsx(lr,{poolInfo:s,placement:"bottom",children:t.jsxs(q,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[t.jsx(B,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&t.jsxs(B,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),t.jsx(Pe,{label:"TVL",value:N&&N!=="--"?`$${fe(N,2)}`:"--",loading:r||V}),t.jsx(Pe,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:r}),t.jsx(Pe,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:r})]})]}),x&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?t.jsxs(t.Fragment,{children:[t.jsxs(ue,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[t.jsx(Be,{type:"borderTab",tabList:p,currentTab:_,handleChangeTab:F=>{const K=Object.keys(Ue).find(Z=>Ue[Z]===F.label);x&&e(`/liquidity?tab=${K}&poolAddress=${x}`),L(K)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:U?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:U?"14px":"16px",fontWeight:"500"}}),_!=="deposit"&&s&&t.jsxs(ue,{w:U?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[t.jsx(B,{children:"Current Price"}),t.jsx(Kr,{noCenter:!!U,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:tt(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:U?{w:"100%"}:{}})]})]}),t.jsx(ee,{h:{base:"20px",lg:"8px"}}),_==="deposit"&&t.jsx(zi,{rangeTabList:l,getList:k,getPrice:$,currentFeeTier:a,addressHistTokensMap:m}),_==="positions"&&t.jsx(Ai,{}),_==="analytics"&&t.jsx(bi,{})]}):t.jsx(ee,{mt:"20px",children:!s&&r?t.jsx($e,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:t.jsx(Rt,{})}):t.jsx(He,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsx(W,{children:h&&v?qe(h,S)||qe(v,S)?t.jsxs(t.Fragment,{children:[t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),t.jsx(B,{fontSize:"14px",children:"Do you want to initialize it?"}),t.jsx(xe,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{P(),w()},children:"Initialized Pool"})]}):t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&t.jsx(Qr,{tokensInfo:C,waringModalCancel:F=>{e("/pools")}}),t.jsx(Wr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:Q,onClose:P,onConfirm:w})]})}export{ra as default};
