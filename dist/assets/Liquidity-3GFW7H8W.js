import{aE as Ks,aF as At,aG as Qs,aH as Xs,u as wt,r as j,X as $t,j as t,T,h as Ys,H as E,I as fe,b as ke,V as W,g as $e,ac as Rt,as as X,e as Ct,C as Ue,$ as ge,l as kt,k as Ee,f as _e,d as H,aI as qt,B as te,U as Pt,m as pe,aJ as St,Y as It,aK as Zs,ah as De,aL as Js,S as Ge,a1 as ut,a as Qe,aD as _t,ad as es,ae as ts,af as ss,ag as rs,ai as Ps,aj as is,a0 as ns,W as Lt,aa as rt,aM as as,aN as Tt,a4 as cs,az as Wt,aO as ce,aP as Ie,aQ as nt,aR as ie,a6 as Is,aS as Ht,aT as er,c as Ft,aU as tr,aV as sr,ar as rr,aB as ir,an as Ut,aW as He,aX as Se,aY as nr,a9 as ar,aZ as cr,a_ as lr}from"./index-8zEobv_C.js";import{A as dr}from"./index-BUjW6mH_.js";import{i as or,R as ur,C as xr}from"./api-data-utils-Cej-AmHl.js";import{u as J}from"./index-DqKo02eY.js";import{u as le,a as pr,P as gr,F as ls}from"./PositionListLoading-BTIwaCc7.js";import{u as Ke}from"./useDocumentSize-9GVrhwzF.js";import{H as mr,T as yr,a as hr,u as br,V as fr}from"./VolumeChart-9VVaJfTK.js";import{N as Ve}from"./NoData-mR1K3jNz.js";import{A as jr}from"./AddressUnderline-CSeeJ8Nq.js";import{T as Ar}from"./TvlChart-BNpmvMY1.js";import{u as Sr}from"./useBurn-C6go3CWR.js";import{H as oe}from"./HTextLabelBox-B6-CM_oa.js";import{T as _r}from"./TooltipIcon-Ch1pt9Bt.js";import{A as ds}from"./AddressCopyLink-kyPbyRu4.js";import{P as vr}from"./progress-gNbLOpig.js";import{c as os,d as wr,a as Rr,u as Cr}from"./usePositionList-WjnQjeir.js";import{u as kr}from"./useRpcListener-CIXvvHWB.js";import{u as Le,a as xt,L as us,b as Lr,c as Tr,S as et}from"./useGetContractPoolInfo-Dt6Bj3Sd.js";import{T as Fr}from"./TradeConfirmAmountInfo-QkauA-nM.js";import{P as Br}from"./PositionStatus-U3qlSTIQ.js";import{R as Mr}from"./RangeAlerts-P_tujG85.js";import{u as zr}from"./global-BWKbo2U0.js";import{c as Er,g as at,a as ct,u as $r}from"./useGetPoolList-DzPfG9I7.js";import{u as xs}from"./useAccountBalance-MOm8YR3h.js";import{u as lt}from"./useTokenBalance-Cv7UaRfD.js";import{u as qr,a as Wr}from"./useTransaction-hzHCwfqB.js";import{u as ps,m as bt,S as Nt,a as Hr}from"./SelectTokenAndFeeConfirm-BrY63BZh.js";import{u as Ur}from"./useNotifiSubscription-DccjdFqV.js";import{u as Nr}from"./usePosAdd-CTaN2_Ib.js";import{L as dt}from"./LockInput-DLv1jxqX.js";import{S as gs}from"./Slippage-BcIh53HH.js";import{P as Ot,C as ms,I as ot}from"./common-CNq_Ci9U.js";import{C as it}from"./CetusTooltip-DpTNWNg7.js";import{S as vt}from"./switch-BI3o6yck.js";import{u as ys}from"./usePriceImpact-CBF484kW.js";import{T as hs}from"./TradeInputGroup-CwnoIKAN.js";import{i as We}from"./index-DPyYXF1v.js";import{g as Or}from"./liquidity-Bl_1bg8f.js";import{d as Vt,F as Vr}from"./FeeTierSelect-ClLFyaiO.js";import{u as bs}from"./useToken-DgcnCKyw.js";import{u as Dr,a as Gr}from"./swapWidget-Cx3DPulI.js";import{R as Kr}from"./RefreshButton-3y5P203I.js";import{C as Qr}from"./CurrentPrice-BWMyBnna.js";import{W as Xr}from"./WarningTokenTipModal-CSuYQykj.js";import"./useCurrentPos-w7rO9nWv.js";import"./PriceRange-DBMJNiXY.js";import"./SingleTokenInfo-B0IkYJH4.js";import"./RangeValue-DCChJbsC.js";import"./debounce-CexnAtzG.js";import"./index-D52CzDHF.js";import"./Pagination-DPBO9EM6.js";import"./tr-CmfDrsnM.js";import"./_getAllKeysIn-Dkb1ARgz.js";import"./YAxis-CKRt9WEE.js";import"./throttle-CMEunrPe.js";import"./generateCategoricalChart-DWsFvGnt.js";import"./linear-DYpwdEgO.js";import"./index-NDxClRZg.js";import"./progress.utils-DZ6uIkRv.js";import"./usePreviousValue-DxoB5pWj.js";import"./ActionButton-oh8XtnXN.js";import"./VTextLabelBox-B_lpl3e3.js";import"./index-ChEYbgnr.js";import"./Loading-C1RlFYMg.js";import"./useXCetusHelper-Bb8je4OF.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-DyV0lPD7.js";import"./icon_lock@2x-OdzkPjmc.js";import"./InputBox-C9rFFzuN.js";import"./useSwapHelper-CPFhemNi.js";var Yr=/\s/;function Zr(e){for(var s=e.length;s--&&Yr.test(e.charAt(s)););return s}var Jr=/^\s+/;function Pr(e){return e&&e.slice(0,Zr(e)+1).replace(Jr,"")}var Dt=NaN,Ir=/^[-+]0x[0-9a-f]+$/i,ei=/^0b[01]+$/i,ti=/^0o[0-7]+$/i,si=parseInt;function Gt(e){if(typeof e=="number")return e;if(Ks(e))return Dt;if(At(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=At(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Pr(e);var r=ei.test(e);return r||ti.test(e)?si(e.slice(2),r?2:8):Ir.test(e)?Dt:+e}var ft=function(){return Qs.Date.now()},ri="Expected a function",ii=Math.max,ni=Math.min;function fs(e,s,r){var c,x,d,p,b,n,o=0,a=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(ri);s=Gt(s)||0,At(r)&&(a=!!r.leading,l="maxWait"in r,d=l?ii(Gt(r.maxWait)||0,s):d,m="trailing"in r?!!r.trailing:m);function A(y){var g=c,v=x;return c=x=void 0,o=y,p=e.apply(v,g),p}function C(y){return o=y,b=setTimeout(u,s),a?A(y):p}function S(y){var g=y-n,v=y-o,w=s-g;return l?ni(w,d-v):w}function k(y){var g=y-n,v=y-o;return n===void 0||g>=s||g<0||l&&v>=d}function u(){var y=ft();if(k(y))return f(y);b=setTimeout(u,S(y))}function f(y){return b=void 0,m&&c?A(y):(c=x=void 0,p)}function i(){b!==void 0&&clearTimeout(b),o=0,c=n=x=b=void 0}function h(){return b===void 0?p:f(ft())}function _(){var y=ft(),g=k(y);if(c=arguments,x=this,n=y,g){if(b===void 0)return C(n);if(l)return clearTimeout(b),b=setTimeout(u,s),A(n)}return b===void 0&&(b=setTimeout(u,s)),p}return _.cancel=i,_.flush=h,_}var Ce=(e=>(e.add="add_liquidity_event",e.remove="remove_liquidity_event",e.swap="swap_event",e))(Ce||{});function ai(){const{clmmSdk:e}=Xs(),{fetchByApi:s}=wt();return{getTransactionsHistory:async x=>{try{const d=await s(or,"GET",x);if(console.log(d,"getTransactionsHistory"),d)return d;throw new Error("no data")}catch(d){console.error(d,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(x,d)=>{try{const p=await e.Pool.getPoolTransactionList({poolId:x,paginationArgs:d,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(p,"getTransactionsHistoryBySDK"),p)return p;throw new Error("no data")}catch(p){console.error(p,"getTransactionsHistoryBySDK ~ error")}}}}function ci(){const{getTransactionsHistoryBySDK:s}=ai(),[r,c]=j.useState(!0),[x,d]=j.useState([]),[p,b]=j.useState(1),[n,o]=j.useState(),[a,l]=j.useState(!0),{apiPoolInfo:m,manualRefresh:A,setManualRefresh:C}=J(),{poolAddress:S}=le();j.useEffect(()=>{d([]),b(1),o(void 0),l(!0)},[S]),j.useEffect(()=>{A&&(d([]),b(1),o(void 0),l(!0),k({cursor:void 0,limit:10}))},[S,A]);const k=async f=>{var i;try{if(!a)return;if(S){c(!0);const h=await s(S,{...f});if(h){const _=(i=h==null?void 0:h.data)==null?void 0:i.map(y=>{var L,q;const g=y==null?void 0:y.parsedJson,v=g!=null&&g.amount_a||g!=null&&g.atob?m==null?void 0:m.tokenA:m==null?void 0:m.tokenB,w=g!=null&&g.amount_b||g!=null&&g.atob?m==null?void 0:m.tokenB:m==null?void 0:m.tokenA;return{...y,type:(L=y.type)!=null&&L.includes("Add")?Ce.add:(q=y.type)!=null&&q.includes("Remove")?Ce.remove:Ce.swap,items:[{amount:$t(g!=null&&g.amount_a?g==null?void 0:g.amount_a:g==null?void 0:g.amount_in,v==null?void 0:v.decimals).toString(),address:v==null?void 0:v.coin_type,url:v==null?void 0:v.logo_url,symbol:v==null?void 0:v.symbol},{amount:$t(g!=null&&g.amount_b?g==null?void 0:g.amount_b:g==null?void 0:g.amount_out,w==null?void 0:w.decimals).toString(),address:w==null?void 0:w.coin_type,url:w==null?void 0:w.logo_url,symbol:w==null?void 0:w.symbol}]}});f!=null&&f.cursor?d(y=>[...y,..._||[]]):d(_||[]),o(h==null?void 0:h.nextCursor),l(h==null?void 0:h.hasNextPage),c(!1)}}}catch(h){console.log(h,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ke(()=>{k({cursor:n,limit:10})},[p,S],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:x,apiPoolInfo:m,currentPage:p,onCurrentPageChange:()=>{b(f=>f+1)},hasNextPage:a}}const tt={[Ce.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Ce.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Ce.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},li=({type:e})=>{var s,r,c,x;return t.jsxs(E,{children:[t.jsx(fe,{xlinkHref:(s=tt[e])==null?void 0:s.icon,svgFill:(r=tt[e])==null?void 0:r.color,svgHover:(c=tt[e])==null?void 0:c.color}),t.jsx(T,{color:"text_caption",children:(x=tt[e])==null?void 0:x.title})]})},di=({items:e,type:s,isReverse:r})=>{var x,d;const{isApp:c}=ke();return e?s===Ce.swap?c?t.jsxs(W,{align:"flex-end",gap:"8px",children:[t.jsx(qe,{item:e==null?void 0:e[0]}),t.jsxs(E,{justify:"flex-end",children:[t.jsx(fe,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(qe,{item:e==null?void 0:e[1]})]})]}):t.jsxs(E,{justify:"flex-end",gap:"8px",children:[t.jsx(qe,{item:e==null?void 0:e[0]}),t.jsx(fe,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(qe,{item:e==null?void 0:e[1]})]}):c?t.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(x=e==null?void 0:e.filter(p=>!!+p.amount))==null?void 0:x.map(p=>t.jsx(qe,{item:p},p==null?void 0:p.address))}):t.jsx(E,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(d=e==null?void 0:e.filter(p=>!!+p.amount))==null?void 0:d.map(p=>t.jsx(qe,{item:p},p==null?void 0:p.address))}):null},qe=({item:e})=>t.jsxs(E,{gap:"4px",children:[t.jsx($e,{imageUrl:e==null?void 0:e.url,w:"20px",h:"20px"}),t.jsx(T,{color:"text_caption",children:Rt(e==null?void 0:e.amount)}),t.jsx(T,{children:X(e==null?void 0:e.symbol,10)})]}),Kt=(e,s=!1)=>[{title:t.jsx(T,{children:"Event"}),key:"type",render:({type:r})=>t.jsx(li,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(T,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>t.jsx(di,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(T,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>t.jsx(jr,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(e(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(T,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>t.jsx(T,{color:"text_caption",children:Ys(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function oi(){const{getExplorerUrl:e}=Ct(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:x,onCurrentPageChange:d,hasNextPage:p}=ci(),{isApp:b}=ke();return t.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[t.jsx(E,{w:"100%",justify:"space-between",children:t.jsx(T,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?t.jsx(Ve,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):b?t.jsx(mr,{columns:Kt(e,c==null?void 0:c.isReverse),dataSource:r,loading:s&&x===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(n,o)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")}}):t.jsx(yr,{columns:Kt(e,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&x===1,onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),p&&t.jsx(Ue,{mt:{base:"40px",lg:"20px"},children:t.jsx(ge,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:d,children:s?t.jsx(kt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var Bt=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(Bt||{}),js=(e=>(e.volume="vol",e.tvl="pure_tvl",e.fees="fee",e))(js||{}),As=(e=>(e.d="D",e.w="W",e.m="M",e))(As||{}),Ss=(e=>(e.d="day",e.w="wek",e.m="mon",e))(Ss||{});const ui={D:40,W:30,M:20};function xi(){const[e,s]=j.useState("Volume"),[r,c]=j.useState("D"),[x,d]=j.useState([]),{apiPoolInfo:p}=J(),[b,n]=j.useState(!0),[o,a]=j.useState(null),{getHistogramData:l}=hr(),{poolAddress:m}=le(),{getHoverTime:A,time:C}=br();j.useLayoutEffect(()=>{d([]),s("Volume"),c("D"),a(null)},[m]);const S=async()=>{if(m)try{n(!0);const _=await l({date_type:Ss[r.toLowerCase()],type:js[e.toLowerCase()],limit:ui[r],address:m});_&&_.length&&d(_)}catch(_){throw console.error(_,"res-fetchAnalyticsData"),_}finally{n(!1)}};j.useEffect(()=>{S()},[m,e,r]),j.useEffect(()=>{o!=null&&o.date&&A(o==null?void 0:o.date,r)},[o==null?void 0:o.date,r]);const k=_=>{s(_.label),_.label!==e&&d([])},u=_=>{c(_.label),_.label!==r&&d([])},f=j.useMemo(()=>{if(e==="Volume")return{value:p==null?void 0:p.volume24Display,title:"Volume (24H)"};if(e==="TVL")return{value:p==null?void 0:p.tvlDisplay,title:"TVL"};if(e==="Fees")return{value:p==null?void 0:p.fees24Display,title:"Fees (24H)"}},[e,p==null?void 0:p.volume24Display,p==null?void 0:p.tvlDisplay,p==null?void 0:p.fees24Display]),i=Object.values(Bt).map(_=>({label:_})),h=Object.values(As).map(_=>({label:_}));return{handleChartTabChange:k,handleDateTabChange:u,defaultDisplay:f,chartsTabs:i,dateTypes:h,chartLoading:b,analyticsData:x,hoverData:o,setHoverData:a,currentChartTab:e,currentDateType:r,time:C}}function pi(){const{isApp:e}=ke(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:x,dateTypes:d,chartLoading:p,analyticsData:b,hoverData:n,setHoverData:o,currentChartTab:a,currentDateType:l,time:m}=xi();return t.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[t.jsxs(E,{w:"100%",justify:{base:"center",lg:"space-between"},children:[t.jsx(Ee,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!e&&t.jsx(Ee,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsxs(W,{w:"100%",align:"flex-start",children:[t.jsx(T,{color:"text_caption",fontSize:"24px",children:(n==null?void 0:n.num)!==void 0&&n!==null?H(qt(n.num)).gte("0.01")||H(qt(n.num)).equals("0")?`$${_e(n==null?void 0:n.num,2)}`:"<$0.01":c==null?void 0:c.value}),t.jsx(T,{children:n!=null&&n.date?m:c==null?void 0:c.title}),e&&t.jsx(Ee,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsx(te,{w:"100%",h:"340px",mt:"20px",children:t.jsxs(te,{w:"100%",h:"100%",position:"relative",children:[p&&t.jsx(te,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(kt,{})}),a===Bt.tvl?t.jsx(Ar,{data:b,onChangeValue:A=>o(A)}):t.jsx(fr,{data:b,onChangeValue:A=>o(A),pageFrom:"pools"})]})})]})}const gi=(e,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{e(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{e(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{e(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{e(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{e(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{e(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{e(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{e(()=>({tvlLoading:r}))},resetTvlInfo:()=>{e(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),pt=Pt(gi);function mi(){const{getBurnPositionAmountByPool:e}=Sr(),{apiPoolInfo:s,contractPoolInfo:r}=J(),[c,x]=j.useState("0"),[d,p]=j.useState("0"),[b,n]=j.useState("0"),[o,a]=j.useState("0"),[l,m]=j.useState(!1),{poolAddress:A}=le(),{tokenAPrice:C,tokenBPrice:S}=pt(),k=async(u,f)=>{try{m(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:i,totalB:h}=await e(u,f);x(i),p(h),C&&n(H(i).mul(C==null?void 0:C.price).toString()),S&&a(H(h).mul(S==null?void 0:S.price).toString())}catch(i){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",i)}finally{m(!1)}};return Ke(()=>{s&&(r!=null&&r.current_sqrt_price)&&k(s,r==null?void 0:r.current_sqrt_price)},[A,r==null?void 0:r.current_sqrt_price,C==null?void 0:C.price,S==null?void 0:S.price],{wait:500}),{burnAmountA:c,burnAmountB:d,burnAmountAUSD:b,burnAmountBUSD:o,loading:l}}function yi(){const{apiPoolInfo:e}=J(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:x,loading:d}=mi();return H(s).gt(0)||H(r).gt(0)?t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[t.jsxs(E,{children:[t.jsx(T,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),t.jsx(_r,{type:"burnedLiquidity"})]}),t.jsxs(pe,{gap:"16px",flexDir:{base:e!=null&&e.isReverse?"column-reverse":"column",lg:e!=null&&e.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[t.jsx(Qt,{token:e==null?void 0:e.tokenA,amount:s,amountUSD:c,loading:d}),t.jsx(Qt,{token:e==null?void 0:e.tokenB,amount:r,amountUSD:x,loading:d})]})]}):null}const Qt=({token:e,amount:s,amountUSD:r,loading:c})=>t.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[t.jsxs(E,{gap:"12px",children:[t.jsx($e,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px"}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(T,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(T,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(oe,{label:"Amount",labelStyle:{fontSize:"14px"},value:Rt(St(s,e==null?void 0:e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(oe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:H(r).gt("0")?`$${It(St(r,e==null?void 0:e.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function hi(){const{tokenAAmountUSD:e,totalAmountUSD:s}=pt(),r=j.useMemo(()=>{if(e&&s&&e!=="--"&&s!=="--"){const x=Zs(H(e).div(s).mul(100).toString(),2);return x==="NaN"?"--":x}return"--"},[e,s]),c=j.useMemo(()=>r&&r!=="--"?H(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const st=e=>e==="--"?"--":`${e}%`;function bi(){var l,m,A,C,S,k;const{apiPoolInfo:e,contractPoolInfo:s}=J(),{getExplorerUrl:r}=Ct(),{poolAddress:c}=le(),{tokenAAmount:x,tokenBAmount:d,tokenAAmountUSD:p,tokenBAmountUSD:b,tvlLoading:n}=pt(),{tokenARatio:o,tokenBRatio:a}=hi();return t.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(E,{w:"100%",justify:"space-between",children:t.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),t.jsxs(Js,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[t.jsx(oe,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:t.jsx(ds,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(e==null?void 0:e.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||e!=null&&e.index?`#${(s==null?void 0:s.index)||(e==null?void 0:e.index)}`:"--",valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${e==null?void 0:e.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(E,{justify:"flex-start",w:"100%",children:t.jsx(De,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),t.jsxs(W,{gap:"16px",w:"100%",children:[t.jsxs(E,{w:"100%",justify:"space-between",children:[t.jsxs(E,{gap:"12px",children:[t.jsx($e,{imageUrl:(l=e==null?void 0:e.displayTokenA)==null?void 0:l.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenA?(m=e==null?void 0:e.displayTokenA)==null?void 0:m.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((A=e==null?void 0:e.displayTokenA)==null?void 0:A.symbol,10)}),n?t.jsx(Ge,{h:"12px"}):t.jsx(T,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?st(a):st(o)})]})]}),t.jsx(te,{w:"200px",children:t.jsx(vr,{value:Number(e!=null&&e.isReverse?a:o),size:"xs",h:"4px",borderRadius:"4px",bg:[o,a].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[o,a].includes("--")?"background":"primary"}}})}),t.jsxs(E,{gap:"12px",children:[t.jsxs(W,{align:"flex-end",gap:"4px",children:[t.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((C=e==null?void 0:e.displayTokenB)==null?void 0:C.symbol,10)}),n?t.jsx(Ge,{h:"12px"}):t.jsx(T,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?st(o):st(a)})]}),t.jsx($e,{imageUrl:(S=e==null?void 0:e.displayTokenB)==null?void 0:S.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenB?(k=e==null?void 0:e.displayTokenB)==null?void 0:k.coin_type:""})]})]}),t.jsxs(W,{w:"100%",flexDir:e!=null&&e.isReverse?"column-reverse":"column",gap:"16px",children:[t.jsx(Xt,{loading:n,token:e==null?void 0:e.tokenA,amount:x,amountUSD:p}),t.jsx(Xt,{loading:n,token:e==null?void 0:e.tokenB,amount:d,amountUSD:b})]})]})]})]})}const Xt=({token:e,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:x}=Ct();return e?t.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[t.jsxs(E,{w:"100%",justify:"space-between",children:[t.jsxs(E,{gap:"12px",children:[t.jsx($e,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px",coinType:e?e==null?void 0:e.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(T,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(T,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(ds,{address:(e==null?void 0:e.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(x(e==null?void 0:e.coin_type,"coin"))})]}),t.jsx(oe,{label:"Amount",labelStyle:{fontSize:"14px"},value:Rt(St(s||"0",e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(oe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${_e(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function fi(){return t.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[t.jsx(pi,{}),t.jsx(bi,{})]}),t.jsx(yi,{}),t.jsx(oi,{})]})}function ji(){const{posBaseListLoading:e,posBaseListGroupByPool:s}=os(),{manualRefresh:r}=J(),{currentAccount:c,onWalletModal:x}=ut(),{getPositionBaseList:d,getPosRelatedData:p}=wr(),[b,n]=j.useState(""),{poolAddress:o}=le(),a=async m=>{const A=await d(m);Array.isArray(A)&&p(A),typeof A=="string"&&n(A)};return j.useEffect(()=>{c!=null&&c.address&&a(c==null?void 0:c.address)},[c==null?void 0:c.address]),j.useEffect(()=>{r&&(c!=null&&c.address)&&a(c==null?void 0:c.address)},[r]),kr({onRpcChange:()=>{c!=null&&c.address&&a(c==null?void 0:c.address)}}),{data:j.useMemo(()=>{if(o){const m=s[o.toLowerCase()||""];return m?m==null?void 0:m.list:[]}return[]},[o,JSON.stringify(s)]),rpcNodeErrorStr:b,posBaseListLoading:e,currentAccount:c,onWalletModal:x}}function Ai(){const e=Qe(),{apiPoolInfo:s}=J(),{currentAccount:r,posBaseListLoading:c,data:x,rpcNodeErrorStr:d,onWalletModal:p}=ji();return t.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((b,n)=>t.jsx(pr,{},n)):x&&(x==null?void 0:x.length)>0?x==null?void 0:x.map((b,n)=>t.jsx(gr,{positionInfo:b},b==null?void 0:b.posId)):d?t.jsx(Ve,{type:"nodata",text:d}):t.jsx(Ve,{type:"nodata",text:"You don't have positions for this pool",children:t.jsx(ge,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>e(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):t.jsx(Ve,{type:"nowallet",onboard:()=>p(!0)})})}const Si=(e,s)=>({fromAmount:"",setFromAmount:r=>{e(()=>({fromAmount:r}))},fromAmountValue:"",setFromAmountValue:r=>{e(()=>({fromAmountValue:r}))},toAmount:"",setToAmount:r=>{e(()=>({toAmount:r}))},toAmountValue:"",setToAmountValue:r=>{e(()=>({toAmountValue:r}))},liquidityAmount:"",setLiquidityAmount:r=>{e(()=>({liquidityAmount:r}))},tokenMaxA:"",setTokenMaxA:r=>{e(()=>({tokenMaxA:r}))},tokenMaxB:"",setTokenMaxB:r=>{e(()=>({tokenMaxB:r}))},byAmountIn:!0,setByAmountIn:r=>{e(()=>({byAmountIn:r}))},isTokenA:!0,setIsTokenA:r=>{e(()=>({isTokenA:r}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:r=>{e(()=>({percentMap:r}))},isFullRange:!1,setIsFullRange:r=>{e(()=>({isFullRange:r}))},fromToken:void 0,setFromToken:r=>{e(()=>({fromToken:r}))},fromTokenLock:!1,setFromTokenLock:r=>{e(()=>({fromTokenLock:r}))},toToken:void 0,setToToken:r=>{e(()=>({toToken:r}))},toTokenLock:!1,setToTokenLock:r=>{e(()=>({toTokenLock:r}))},totalAmount:void 0,setTotalAmount:r=>{e(()=>({totalAmount:r}))},autoStakePosition:!1,setAutoStakePosition:r=>{e(()=>({autoStakePosition:r}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:r=>{e(()=>({isFarmRewardsRange:r}))},resetAddLiquidity:()=>{e(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),Te=Pt(Si);function _i(e){var g,v;const{onClose:s,onSubmit:r,data:{feeTier:c}}=e,{fromToken:x,toToken:d,fromAmount:p,toAmount:b,totalAmount:n,percentMap:o,fromTokenLock:a,toTokenLock:l}=Te(),{lowerTickData:m,upperTickData:A}=Le(),{currentPriceData:C,apiPoolInfo:S}=J(),{setIsChecked:k}=_t(),[u,f]=j.useState(!0),i=j.useMemo(()=>{var w;return((w=S==null?void 0:S.tokenA)==null?void 0:w.coin_type)===(x==null?void 0:x.coin_type)?!u:!!u},[S,x,d,u]),h=j.useMemo(()=>u?`${X(d==null?void 0:d.symbol,10)} per ${X(x==null?void 0:x.symbol,10)}`:`${X(x==null?void 0:x.symbol,10)} per ${X(d==null?void 0:d.symbol)}`,[u,x==null?void 0:x.symbol,d==null?void 0:d.symbol]),_=fs(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:y}=_t();return t.jsxs(es,{isOpen:!0,onClose:()=>{s(),k(!1)},isCentered:!0,children:[t.jsx(ts,{}),t.jsxs(ss,{children:[t.jsx(rs,{children:t.jsx(De,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),t.jsx(Ps,{}),t.jsx(is,{textAlign:"center",p:"0px",children:t.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[t.jsxs(E,{w:"100%",justifyContent:"space-between",h:"40px",children:[t.jsxs(E,{children:[t.jsx(ns,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:d==null?void 0:d.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:d==null?void 0:d.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(T,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${X(x==null?void 0:x.symbol,10)} - ${X(d==null?void 0:d.symbol,10)}`})]}),t.jsx(Lt,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:t.jsxs(E,{gap:"12px",children:[t.jsx(T,{whiteSpace:"nowrap",children:"Fee Tier"}),t.jsx(T,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),t.jsx(Fr,{coinA:{amount:p,...x},coinB:{amount:b,...d}}),t.jsxs(te,{w:"100%",children:[t.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),t.jsx(Br,{isActive:!a&&!l,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),t.jsxs(E,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[t.jsx(T,{children:"Current Price"}),t.jsx(T,{as:"span",color:"text_caption",children:rt(i?C.reverseCurrentPrice:C==null?void 0:C.currentPrice,6)}),t.jsx(T,{children:h}),t.jsx(ge,{variant:"unstyled",onClick:()=>f(!u),children:t.jsx(fe,{xlinkHref:"#icon-icon_swap1"})})]}),t.jsxs(E,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[t.jsx(Yt,{title:"Min Price",price:rt(i?A==null?void 0:A.reversePrice:m==null?void 0:m.price,6),perText:h}),t.jsx(as,{orientation:"vertical",h:"40px"}),t.jsx(Yt,{title:"Max Price",price:rt(i?m==null?void 0:m.reversePrice:A==null?void 0:A.price,6),perText:h})]})]}),t.jsx(oe,{isLoading:!1,label:"Deposit Ratio",value:`${o[(x==null?void 0:x.coin_type)===((g=S==null?void 0:S.tokenA)==null?void 0:g.coin_type)?"percentA":"percentB"]}% ${X(x==null?void 0:x.symbol,10)} / ${o[(d==null?void 0:d.coin_type)===((v=S==null?void 0:S.tokenA)==null?void 0:v.coin_type)?"percentA":"percentB"]}% ${X(d==null?void 0:d.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),t.jsx(oe,{isLoading:!1,label:"Total Amount",value:n&&+n?Tt(n):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!a&&!l&&!((m==null?void 0:m.price)==="0"&&(A==null?void 0:A.price)==="âˆž")&&y=="authenticated"&&t.jsx(Mr,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),t.jsx(ge,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:_,children:"Add Liquidity"})]})})]})]})}const Yt=({title:e,price:s,perText:r})=>t.jsxs(W,{flex:"1",children:[t.jsx(T,{children:e}),t.jsx(T,{color:"text_caption",children:s}),t.jsx(T,{children:r})]});function vi(e,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:x}=Nr(),[d,p]=j.useState(!1),{currentPriceData:b,apiPoolInfo:n,contractPoolInfo:o}=J(),{lowerTickData:a,upperTickData:l}=Le(),{signAndExecuteTransaction:m,getTransactionStatus:A,transactionSuccess:C}=qr(),{mevProtect:S,maxCapForGas:k,transactionMode:u,customGasPrice:f}=zr(),[i,h]=j.useState(!1),[_,y]=j.useState(!1),[g,v]=j.useState(""),{transactionConfirmation:w}=Wr(),{fromAmount:L,setFromAmount:q,fromAmountValue:G,setFromAmountValue:M,toAmount:U,setToAmount:Q,toAmountValue:Y,setToAmountValue:P,byAmountIn:O,setByAmountIn:N,isTokenA:z,setIsTokenA:F,percentMap:K,setPercentMap:Z,isFullRange:ne,setIsFullRange:se,fromToken:B,setFromToken:ue,toToken:R,setToToken:$,totalAmount:ee,setTotalAmount:je,fromTokenLock:me,setFromTokenLock:Xe,toTokenLock:ye,setToTokenLock:Ye,setTokenMaxA:ks,setTokenMaxB:Ls,tokenMaxA:Ts,tokenMaxB:Fs,autoStakePosition:Bs,liquidityAmount:Ms,setLiquidityAmount:zs}=Te(),{getTokenAmountValue:Ze}=cs();Wt(()=>{var V,ae;n&&F(((V=n==null?void 0:n.displayTokenA)==null?void 0:V.coin_type)===((ae=n==null?void 0:n.tokenA)==null?void 0:ae.coin_type))},[n]);const{isWhiteQuoteToken:Es}=ps(),{notifiSubscription:$s}=Ur(),{isChecked:Mt}=_t();Ke(()=>{if(ne){Z({percentA:"50",percentB:"50"});return}if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&typeof(o==null?void 0:o.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&b.currentSqrtPrice){if(ce(a.tick).lte(o.current_tick_index)&&ce(l.tick).gt(o.current_tick_index)){const V=Es(n.tokenA.coin_type)?n.tokenA:n.tokenB,ae=V.coin_type===n.tokenA.coin_type,xe=r({amount:Ie("1",V.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0}),ve=Er(xe.coinAmountA,xe.coinAmountB,b==null?void 0:b.currentPrice,ne);Z(ve);return}if(ce(a.tick).gt(o.current_tick_index)){Z({percentA:"100",percentB:"0"});return}if(ce(l.tick).lte(o.current_tick_index)){Z({percentA:"0",percentB:"100"});return}}},[JSON.stringify(n),b,a==null?void 0:a.tick,l==null?void 0:l.tick,ne],{wait:300});const qs=({amount:V,isTokenA:ae,isFullRange:xe})=>{var ve,Fe,Be,Me;if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&Object.keys(b).length>0&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&B&&R){let D;if(typeof(o==null?void 0:o.current_tick_index)=="number"&&ce(a==null?void 0:a.tick).lte(o==null?void 0:o.current_tick_index)&&ce(l==null?void 0:l.tick).gt(o==null?void 0:o.current_tick_index))D=r({amount:Ie(V&&+V?V+"":"1",O?B==null?void 0:B.decimals:R==null?void 0:R.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0});else if(me&&!ye){const re=(R==null?void 0:R.coin_type)===((ve=n==null?void 0:n.tokenA)==null?void 0:ve.coin_type);D=r({amount:Ie(V?V+"":"1",R==null?void 0:R.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:re,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else if(ye&&!me){const re=(B==null?void 0:B.coin_type)===((Fe=n==null?void 0:n.tokenA)==null?void 0:Fe.coin_type);D=r({amount:Ie(V?V+"":"1",B==null?void 0:B.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:re,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:b.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else me&&ye&&(D=ae?{coinAmountA:V?V+"":"1",coinAmountB:"",tokenMaxA:V?V+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:V?V+"":"1",tokenMaxA:"",tokenMaxB:V?V+"":"1"});if(ks(D==null?void 0:D.tokenMaxA),Ls(D==null?void 0:D.tokenMaxB),V)if(ce(V).gt("0"))if(O){const re=(R==null?void 0:R.coin_type)===((Be=n==null?void 0:n.tokenA)==null?void 0:Be.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,he=Ze(B==null?void 0:B.coin_type,V+""),be=Ze(R==null?void 0:R.coin_type,re),we=ce(he).plus(be).toString();console.log(re,he,be,we,"_totalAmountValue"),Q(re||""),M(he),P(be),je(we)}else{const re=(B==null?void 0:B.coin_type)===((Me=n==null?void 0:n.tokenA)==null?void 0:Me.coin_type)?D==null?void 0:D.coinAmountA:D==null?void 0:D.coinAmountB,he=Ze(B==null?void 0:B.coin_type,re),be=Ze(R==null?void 0:R.coin_type,V+""),we=ce(he).plus(be).toString();console.log(re,he,be,we,"_totalAmountValue"),M(he),P(be),q(re||""),je(we)}else O?(Q(""),M(""),P(""),je("")):(q(""),M(""),P(""),je(""));else q(""),Q(""),M(""),P(""),je("");D&&zs((D==null?void 0:D.liquidityAmount)||"")}};Ke(()=>{qs({amount:O?L:U,isTokenA:z,isFullRange:ne})},[JSON.stringify(n),b,a==null?void 0:a.tick,l==null?void 0:l.tick,L,U,O,z,me,ye,ne],{wait:300});const Ws=(V,ae,xe)=>{N(ae),ae?q(V):Q(V),F(xe!==void 0?xe:!1)},{balanceInfo:Hs}=lt(B),{balanceInfo:Us}=lt(R);Wt(()=>{var V,ae;F(O?(B==null?void 0:B.coin_type)===((V=n==null?void 0:n.tokenA)==null?void 0:V.coin_type):(R==null?void 0:R.coin_type)===((ae=n==null?void 0:n.tokenA)==null?void 0:ae.coin_type))},[n,O,B,R]),j.useEffect(()=>{(a==null?void 0:a.tick)===nt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(l==null?void 0:l.tick)===nt.getMaxIndex(Number((l==null?void 0:l.tickSpacing)||0))?se(!0):se(!1)},[a==null?void 0:a.tick,l==null?void 0:l.tick]),j.useEffect(()=>{(o==null?void 0:o.current_tick_index)!==void 0&&ie(a)&&ie(l)&&(ce(a==null?void 0:a.tick).gte(ce(l.tick))?(Xe(!0),Ye(!0)):ce(a==null?void 0:a.tick).gt(o==null?void 0:o.current_tick_index)?(Xe(!s),Ye(!!s)):ce(l.tick).lte(o==null?void 0:o.current_tick_index)?(Xe(!!s),Ye(!s)):(Xe(!1),Ye(!1)))},[a==null?void 0:a.tick,l==null?void 0:l.tick,o,s]);const{currentAccount:Ns,onWalletModal:Os}=ut(),Vs=fs(()=>{Ns?h(!0):Os(!0)},300,{leading:!0,trailing:!1}),Ds=()=>{q(""),Q(""),M(""),P(""),je("")},{fetchAccountBalance:Gs}=xs();return{percentMap:K,handleAmountChange:Ws,fromToken:B,setFromToken:ue,toToken:R,setToToken:$,byAmountIn:O,setByAmountIn:N,fromAmount:L,fromAmountValue:G,setFromAmount:q,toAmount:U,toAmountValue:Y,setToAmount:Q,liquidityAmount:Ms,fromBalanceInfo:Hs,toBalanceInfo:Us,totalAmount:ee,fromTokenLock:me,toTokenLock:ye,handleAdd:Vs,confirmModalOpen:i,setConfirmModalOpen:h,nftOpen:_,setNftOpen:y,relatedPosId:g,handleSubmit:async()=>{var be,we,zt;const V=O?L:U,ae=O?B==null?void 0:B.decimals:R==null?void 0:R.decimals,xe=ce(V).mul(Is.pow(10,ae)).toString(),ve=O&&(B==null?void 0:B.coin_type)===((be=n==null?void 0:n.tokenA)==null?void 0:be.coin_type)?!0:(R==null?void 0:R.coin_type)===((we=n==null?void 0:n.tokenA)==null?void 0:we.coin_type)&&!O;let Fe,Be;const Me=a.tick,D=l.tick,re=o==null?void 0:o.current_tick_index;Me!==void 0&&D!==void 0&&re!==void 0&&(re>=Me&&re<=D?(Fe=ve?xe:Ts,Be=ve?Fs:xe):re>D?(Fe=0,Be=xe):re<Me&&(Fe=xe,Be=0));let he=[];if(o!=null&&o.index){const{rewarder_infos:de}=o;he=(de==null?void 0:de.length)>0&&(de==null?void 0:de.map(Ne=>Ne.coinAddress))||[]}try{const de={poolAddress:o==null?void 0:o.poolAddress,coinTypeA:o==null?void 0:o.coinTypeA,coinTypeB:o==null?void 0:o.coinTypeB,amountA:Fe,amountB:Be,fixAmountA:ve,lowerTick:Me,upperTick:D,currentSqrtPrice:o==null?void 0:o.current_sqrt_price,rewarderCoinTypes:he,farmsPoolId:n==null?void 0:n.farmsPoolAddress},Ne={getShowInfo:(I,ze)=>{const Je=!me&&!ye?`Add ${L} ${B==null?void 0:B.symbol} and ${U} ${R==null?void 0:R.symbol}`:ye?me?"Add Liquidity":`Add ${L} ${B==null?void 0:B.symbol}`:`Add ${U} ${R==null?void 0:R.symbol}`,Pe={modalDescriptionText:Je,toastTitleText:Je};if(I==="success"){let yt=L,ht=U;ze&&(yt=Ht(ze,B)||L,ht=Ht(ze,R)||U);const Et=!me&&!ye?`Add ${yt} ${B==null?void 0:B.symbol} and ${ht} ${R==null?void 0:R.symbol}`:!me&&ye?`Add ${yt} ${B==null?void 0:B.symbol}`:!ye&&me?`Add ${ht} ${R==null?void 0:R.symbol}`:"Add Liquidity";Pe.toastDescriptionContent=Et,Pe.modalDescriptionText=Et,Pe.toastTitleText="Supplied Successful"}return Pe}};w(Ne);let gt,mt;if(Bs){const I=await x(de);gt=I==null?void 0:I.tx,mt=I==null?void 0:I.msafeParams}else{const I=await c(de);gt=I==null?void 0:I.tx,mt=I==null?void 0:I.msafeParams}let Ae=await m(gt,Ne,{useDevInspect:!0,useMev:S,showSuccessModal:!1,useFastMode:u==="Fast Mode",maxCapForGas:k,customGasPrice:f,msafeParams:mt});if(Ae){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",Ae),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Mt),((zt=Ae==null?void 0:Ae.events)==null?void 0:zt.length)===0&&(Ae=await A(Ae.digest));const{posId:I,farmsPosId:ze}=er(Ae);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:I,farmsPosId:ze}),I?(y(!0),v(ze||I)):C(Ne),Mt){const Je={subscriptionSource:"AddLiquidity",events:Ae.events};$s(Je)}Gs(),Ds(),e()}}catch(de){throw console.error(de,"handleSubmit ~ error"),new Error(de)}}}}function wi(){const{fromAmount:e,toAmount:s,fromToken:r,toToken:c,fromTokenLock:x,toTokenLock:d,liquidityAmount:p}=Te(),{currentAccount:b}=ut(),{balanceInfo:n}=lt(r),{balanceInfo:o}=lt(c),a=j.useMemo(()=>{const l={text:"Add Liquidity",disabled:!1};return b!=null&&b.address?!x&&!d&&(!e||!s||e&&!+e||s&&!+s)||x&&!d&&(!s||s&&!+s)||d&&!x&&(!e||e&&!+e)?(l.text="Enter an amount",l.disabled=!0,l):e&&+e&&H(e).gt((n==null?void 0:n.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(r==null?void 0:r.symbol,10)} Balance`,l):s&&+s&&H(s).gt((o==null?void 0:o.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(c==null?void 0:c.symbol,10)} Balance`,l):((!x&&!d&&(!e||!s)||H(p).lte("0"))&&(l.disabled=!0),l):(l.text="Connect Wallet",l.disabled=!1,l)},[b==null?void 0:b.address,e,s,n==null?void 0:n.balanceDisplay,o==null?void 0:o.balanceDisplay,r,c,x,d,p]);return{btnText:a.text,btnDisabled:a.disabled}}function Ri(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="âˆž"?It(1/(1-Number(H(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function Ci({rangeTabList:e}){var G;const{apiPoolInfo:s}=J(),{fromToken:r,toToken:c,setFromToken:x,setToToken:d,byAmountIn:p,setByAmountIn:b,setIsFarmRewardsRange:n,setAutoStakePosition:o,fromTokenLock:a,toTokenLock:l,fromAmount:m,toAmount:A,setFromAmount:C,setToAmount:S}=Te(),{lowerTickData:k,upperTickData:u}=Le(),[f,i]=j.useState(),{handleInitTickData:h}=xt(),{getLeverage:_}=Ri();j.useEffect(()=>{var M;s&&i((M=s==null?void 0:s.displayTokenA)==null?void 0:M.coin_type)},[s==null?void 0:s.poolAddress]);const y=j.useMemo(()=>{var M;return f===((M=s==null?void 0:s.tokenA)==null?void 0:M.coin_type)},[f,(G=s==null?void 0:s.tokenA)==null?void 0:G.coin_type]),g=j.useMemo(()=>{var M,U,Q,Y;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":y?`${X((M=s==null?void 0:s.tokenB)==null?void 0:M.symbol,10)} per ${X((U=s==null?void 0:s.tokenA)==null?void 0:U.symbol,10)}`:`${X((Q=s==null?void 0:s.tokenA)==null?void 0:Q.symbol,10)} per ${X((Y=s==null?void 0:s.tokenB)==null?void 0:Y.symbol,10)}`},[y,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),v=j.useMemo(()=>{const M=k==null?void 0:k.price,U=u==null?void 0:u.price;return _(M,U)},[k==null?void 0:k.price,u==null?void 0:u.price]),w=M=>{n(M.target.checked),M.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&h(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};j.useEffect(()=>{H(k==null?void 0:k.tick).eq(H(s==null?void 0:s.farmsEffectiveTickLower))&&H(u==null?void 0:u.tick).eq(H(s==null?void 0:s.farmsEffectiveTickUpper))?n(!0):n(!1)},[k==null?void 0:k.tick,u==null?void 0:u.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const L=j.useMemo(()=>(k==null?void 0:k.price)==="0"&&(u==null?void 0:u.price)==="âˆž",[k==null?void 0:k.price,u==null?void 0:u.price]),q=M=>{var U;M&&(M!=null&&M.coin_type)?i(M==null?void 0:M.coin_type):i((U=e==null?void 0:e.find(Q=>Q.key!==f))==null?void 0:U.key),x(c),d(r),b(!p),p?(S(m),C("")):(C(A),S(""))};return j.useEffect(()=>{s!=null&&s.haveFarming&&o(!(a||l))},[a,l,s==null?void 0:s.haveFarming]),j.useEffect(()=>{p&&a&&!l&&(C(""),S("")),!p&&!a&&l&&(C(""),S("")),p&&!a&&l&&S(""),!p&&a&&!l&&C(""),a&&l&&(C(""),S(""))},[a,l]),{direct:y,perText:g,handleChangeIsFarmRewardsRange:w,onReverseClick:q,leverage:v,currentRangeTab:f,isFullRange:L}}function ki({onClose:e,posId:s,tokenA:r,tokenB:c,fee:x,isReverse:d}){const p=Qe(),[b,n]=j.useState(!0),{lowerTickData:o,upperTickData:a}=Le();return j.useLayoutEffect(()=>{d&&n(!1)},[d]),t.jsxs(es,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:e,isCentered:!0,children:[t.jsx(ts,{}),t.jsxs(ss,{w:"400px",children:[t.jsx(rs,{children:t.jsxs(E,{justify:"space-between",w:"100%",children:[t.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),t.jsx(ge,{onClick:e,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:t.jsx(fe,{xlinkHref:"#icon-icon_close"})})]})}),t.jsx(is,{children:t.jsxs(W,{gap:"36px",children:[t.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[t.jsx(ns,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),t.jsxs(T,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[X(r==null?void 0:r.symbol,10)," - ",X(c==null?void 0:c.symbol,10)]}),t.jsxs(E,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[t.jsx(T,{fontSize:"14px",children:"Fee tier"}),t.jsx(T,{fontSize:"14px",color:"text_highlight",children:x})]})]}),t.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[t.jsxs(T,{color:"text_caption",whiteSpace:"nowrap",children:[b?_e(o==null?void 0:o.price,6):_e(a==null?void 0:a.reversePrice,6)," -Â ",b?_e(a==null?void 0:a.price,6):_e(o==null?void 0:o.reversePrice,6)]}),t.jsxs(E,{children:[t.jsxs(E,{gap:"0",children:[t.jsx(T,{color:"primary_gray",children:X(b?d?r==null?void 0:r.symbol:c==null?void 0:c.symbol:d?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),t.jsx(T,{color:"primary_gray",children:"Â perÂ "}),t.jsx(T,{color:"primary_gray",children:X(b?d?c==null?void 0:c.symbol:r==null?void 0:r.symbol:d?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),t.jsx(fe,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:l=>{Ft(l),n(!b)}})]})]})]})}),t.jsx(tr,{p:"20px 0 0",children:t.jsx(ge,{flex:"1",onClick:()=>p(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function _s({perText:e,direct:s,minPriceData:r,maxPriceData:c,isFullRange:x=!1}){const{tickDataLoading:d}=Le(),{handleAddPrice:p,handleSubPrice:b,setTickDataBasedOnPrice:n}=xt();return t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[t.jsx(Ot,{title:"Min Price",perText:e,data:r,direct:s,loading:d,handleAddPrice:p,handleSubPrice:b,setTickDataBasedOnPrice:n,isFullRange:x}),t.jsx(Ot,{title:"Max Price",perText:e,data:c,direct:s,loading:d,handleAddPrice:p,handleSubPrice:b,setTickDataBasedOnPrice:n,isFullRange:x})]})}const vs=({minPrice:e,maxPrice:s,perText:r,checked:c,onChange:x,loading:d})=>t.jsxs(E,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},children:[t.jsxs(E,{children:[t.jsx(ls,{tooltip:t.jsxs(te,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",t.jsx(te,{as:"a",color:"primary",onClick:p=>{Ft(p),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),t.jsx(T,{children:"Farm rewards range"})]}),t.jsxs(E,{children:[d?t.jsx(Ge,{w:"120px",h:"14px"}):t.jsxs(T,{color:"primary_yellow",children:[e,"Â -Â ",s]}),t.jsx(T,{children:r})]})]}),t.jsx(vt,{isChecked:c,onChange:x})]}),ws=({disabled:e,checked:s,onChange:r})=>t.jsxs(E,{p:{base:"20px 8px",lg:"24px 24px 24px 16px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"0 0 20px 20px",lg:"20px"},bg:"bg_six",gap:"12px",children:[t.jsx(ls,{flex:"0 0 24px",h:"24px"}),t.jsx(T,{lineHeight:"20px",color:"text_caption",children:"Automatically stake your position into the farm to enjoy higher yield."}),e?t.jsx(it,{tooltip:t.jsxs(W,{gap:"4px",align:"flex-start",children:[t.jsx(T,{fontSize:"12px",children:"Farming rewards only available"}),t.jsx(T,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:t.jsx(vt,{isChecked:s,disabled:e,onChange:r})}):t.jsx(vt,{isChecked:s,disabled:e,onChange:r})]}),Li=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function Rs({direct:e,rangeMap:s,wrapStyle:r={}}){const[c,x]=j.useState({type:"30D",key:"30_d"}),{minPriceForDate:d,maxPriceForDate:p,setMinPriceForDate:b,setMaxPriceForDate:n}=J();j.useEffect(()=>{let a="";if(ie(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],A=e?m:H(1).div(m).toString();a=_e(A,6)}else a="-";b(a);let l="";if(ie(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_highest`],A=e?m:H(1).div(m).toString();l=_e(A,6)}else l="-";n(l)},[e,c.key,s]);const{isApp:o}=ke();return t.jsxs(E,{w:"100%",justify:"space-between",...r,children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(E,{children:[t.jsx(Ue,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:t.jsx(as,{w:"14px",border:"1px dashed"})}),t.jsxs(T,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),t.jsxs(T,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[e?d:p,"Â -Â ",e?p:d]})]}),t.jsx(Ee,{type:"outlineTab",tabList:Li,currentTab:c,handleChangeTab:a=>{x({type:a.label,key:a.key})},isActive:(a,l)=>a.key===l.key,wrapStyle:{h:o?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:o?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function Ti(){const{fetchByApi:e}=wt(),[s,r]=j.useState(""),c=async n=>{var o,a,l,m;try{const C=await e(ur,"GET",{pool:n}),S=((a=(o=C==null?void 0:C.list)==null?void 0:o[0])==null?void 0:a.recommend_ranges)||{},k=((m=(l=C==null?void 0:C.list)==null?void 0:l[0])==null?void 0:m.type)||"";console.log("ðŸš€ðŸš€ðŸš€ ~ getRecommendRanges ~ type:",k);const u={};if(S)for(const f in S){const i=S[f];(i!=null&&i.lower||i!=null&&i.upper)&&(u[f]={lower:i.lower,upper:i.upper})}return{ranges:u,type:k}}catch(A){return console.error("Error in getRecommendRanges:",A),{ranges:{},type:""}}},x=(n,o)=>({default:{lower:n,upper:o,sort:3}}),d=n=>({"full range":{lower:nt.getMinIndex(n),upper:nt.getMaxIndex(n),sort:2}}),p=(n,o,a)=>{const l=H(a).mul(o==="unstable"?2:3).toNumber(),m=sr(Number(n),Number(a));return{custom:{lower:H(m).sub(l).toNumber(),upper:H(m).add(l).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async n=>{try{const o=n.farmsEffectTickLower&&n.farmsEffectTickUpper?x(n.farmsEffectTickLower,n.farmsEffectTickUpper):null,a=n.farmsEffectTickLower&&n.farmsEffectTickUpper?{ranges:{},type:""}:await c(n.poolAddress);r(a.type);const l=d(n.tickSpacing),m=p(n.currentTick,a.type,n.tickSpacing),A={...o,...a.ranges,...l,...m},C=Object.entries(A).map(([S,k])=>({key:S,...k})).sort((S,k)=>k.sort-S.sort);return ie(a.ranges)||ie(o)?{rangeList:C,error:!1}:{rangeList:C,error:!0}}catch(o){return console.error("Error in getRecommendRangesList:",o),{rangeList:[],error:!0}}},poolType:s}}const jt=(e,s=!1)=>{switch(e){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Fi=e=>{switch(e){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Bi={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Cs(e){const{getRecommendRangesList:s}=Ti(),[r,c]=j.useState(),{poolAddress:x,currentTick:d,tickSpacing:p,farmsEffectTickLower:b,farmsEffectTickUpper:n}=e;ke();const{handleInitTickData:o}=xt(),{apiPoolInfo:a,currentRange:l,setCurrentRange:m}=J(),{lowerTickData:A,upperTickData:C,setLowerTickData:S,setUpperTickData:k,setTickDataLoading:u,tickDataLoading:f}=Le(),i=async()=>{var h,_,y;try{l||u(!0);const{rangeList:g,error:v}=await s(e);if(c(g),v){if(m("custom"),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)){const w=g.find(L=>L.key==="custom");w&&o(w==null?void 0:w.lower,w==null?void 0:w.upper,a)}}else m((h=g[0])==null?void 0:h.key),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)&&o((_=g[0])==null?void 0:_.lower,(y=g[0])==null?void 0:y.upper,a)}catch(g){console.error(g)}finally{u(!1)}};return Ke(()=>{x&&d!==void 0&&p!==void 0&&i()},[x,p],{wait:500}),j.useEffect(()=>{if(r&&r.length>0&&ie(A)&&ie(C)){const h=r==null?void 0:r.find(_=>H(_.lower).eq(H(A==null?void 0:A.tick))&&H(_.upper).eq(H(C==null?void 0:C.tick)));h?h.key!==l&&m(h.key):m("custom")}},[A==null?void 0:A.tick,C==null?void 0:C.tick,r]),t.jsx(t.Fragment,{children:t.jsx(rr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((h,_)=>{var y,g;return t.jsx(ir,{label:Fi(h.key),lineHeight:"1.5",placement:"top",gutter:-4,children:t.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Bi[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{h.key!==l&&(m(h.key),a!=null&&a.tokenA&&(a!=null&&a.tokenB)&&o(h.lower,h.upper,a))},bg:h.key==l?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[t.jsx(Ut,{decoding:"async",display:h.key===l?"block":"none",src:`/images/${(y=jt(h.key,!0))==null?void 0:y.image}`,w:"72px",h:h.key===l?"22px":"0px",fallback:t.jsx(te,{bg:"background",w:"72px",h:h.key===l?"22px":"0px",borderRadius:"4px"})}),t.jsx(Ut,{decoding:"async",display:h.key===l?"none":"block",src:`/images/${(g=jt(h.key,!1))==null?void 0:g.image}`,w:"72px",h:h.key===l?"0px":"22px",fallback:t.jsx(te,{bg:"background",w:"72px",h:h.key===l?"0px":"22px",borderRadius:"4px"})}),t.jsx(T,{color:h.key==l?"primary":"primary_gray",fontSize:"12px",children:jt(h.key).name})]})},h.key)})})})}function Mi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:d,perText:p,rangeTabList:b,currentRangeTab:n,addressHistTokensMap:o,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:A,handleAmountChange:C,handleAdd:S,isFullRange:k}){var ue;const{currentPriceData:u,contractPoolInfo:f,apiPoolInfo:i,resetLiquidity:h,contractPoolInfoLoading:_,apiPoolInfoLoading:y,minPriceForDate:g,maxPriceForDate:v}=J(),{lowerTickData:w,upperTickData:L}=Le(),{autoStakePosition:q,setAutoStakePosition:G,isFarmRewardsRange:M,fromAmount:U,toAmount:Q,byAmountIn:Y,percentMap:P,fromToken:O,toToken:N,totalAmount:z,fromTokenLock:F,toTokenLock:K}=Te(),{poolAddress:Z}=le(),ne=R=>{G(R.target.checked)},{priceImpactBasedOnMarket:se}=ys(O,N,d?"1":He(u==null?void 0:u.currentPrice),d?He(u==null?void 0:u.currentPrice):"1"),B=j.useMemo(()=>{if(se&&H(se).abs().gte(30))return H(se).gte(30)?`+${H(se).toFixed(0)}%`:`${H(se).toFixed(0)}%`},[se]);return j.useMemo(()=>!!(i!=null&&i.haveFarming)&&!!(i!=null&&i.displayFarmsEffectMaxPrice)&&!!(i!=null&&i.displayFarmsEffectMinPrice),[i==null?void 0:i.haveFarming,i==null?void 0:i.displayFarmsEffectMaxPrice,i==null?void 0:i.displayFarmsEffectMinPrice]),t.jsxs(te,{w:"100%",children:[t.jsx(De,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),t.jsx(Cs,{poolAddress:Z,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper}),y?t.jsx(Ge,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):t.jsx(Ee,{type:"outlineTab",tabList:b,currentTab:n,handleChangeTab:R=>c(R),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),t.jsx(ms,{price:He(d?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6),perText:p,loading:_,wrapStyle:{mt:"28px",gap:"12px"}}),t.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:t.jsx(us,{handleClickRefresh:()=>{},direct:d,minPriceData:d?w:L,maxPriceData:d?L:w,dashedMarkerLine:[g,v]})}),B&&t.jsx(Lt,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",children:t.jsxs(E,{children:[t.jsx(fe,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(T,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${B}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),t.jsx(Rs,{direct:d,rangeMap:o,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),t.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[t.jsx(_s,{perText:p,direct:d,isFullRange:k,minPriceData:d?w:L,maxPriceData:d?L:w}),F&&K&&t.jsx(Ue,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),t.jsxs(W,{mb:"20px",gap:"16px",children:[t.jsx(ot,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:t.jsx(T,{color:"text_caption",children:F&&K?"--":x})}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(vs,{minPrice:d?at(i==null?void 0:i.displayFarmsEffectMinPrice):ct(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?at(i==null?void 0:i.displayFarmsEffectMaxPrice):ct(i==null?void 0:i.displayFarmsEffectMinPrice),loading:y,perText:p,checked:M,onChange:r})]}),t.jsxs(te,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:[t.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[t.jsxs(E,{w:"100%",justify:"space-between",children:[t.jsx(De,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),t.jsx(E,{children:t.jsx(gs,{})})]}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsxs(te,{w:"100%",position:"relative",children:[t.jsx(hs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:U+"",amountValue:m,loading:!1,onChange:R=>{var $;C(R,!0,(O==null?void 0:O.coin_type)===(($=i==null?void 0:i.tokenA)==null?void 0:$.coin_type))},selectable:!1,placeholder:"0.0",token:O,onFocusChange:R=>{var $;R&&+(U+"")&&!Y&&C(U+"",!0,(O==null?void 0:O.coin_type)===(($=i==null?void 0:i.tokenA)==null?void 0:$.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:Q+"",amountValue:A,loading:!1,onFocusChange:R=>{var $;R&&+(Q+"")&&Y&&C(Q+"",!1,(N==null?void 0:N.coin_type)===(($=i==null?void 0:i.tokenA)==null?void 0:$.coin_type))},onChange:R=>{var $;C(R,!1,(N==null?void 0:N.coin_type)===(($=i==null?void 0:i.tokenA)==null?void 0:$.coin_type))},selectable:!1,placeholder:"0.0",token:N},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),F&&K&&t.jsx(dt,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((ue=[F,K].filter(Boolean))==null?void 0:ue.length)===1&&t.jsx(dt,{position:"absolute",top:F?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(i!=null&&i.poolAddress)&&t.jsx(t.Fragment,{children:t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[t.jsx(oe,{isLoading:!1,label:"Total Amount",value:z&&+z?Tt(z):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(ot,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:t.jsx(W,{justify:"flex-end",gap:"4px",children:[O,N].filter(Boolean).map((R,$)=>{var ee;return t.jsxs(E,{gap:"4px",justify:"flex-end",w:"100%",children:[t.jsx($e,{imageUrl:R==null?void 0:R.logo_url,coinType:R==null?void 0:R.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(T,{color:$===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(R==null?void 0:R.symbol,10),"Â ",F&&K?"--":P[(R==null?void 0:R.coin_type)===((ee=i==null?void 0:i.tokenA)==null?void 0:ee.coin_type)?"percentA":"percentB"],"%"]})]},R==null?void 0:R.coin_type)})})})]})})]}),!!(i!=null&&i.poolAddress)&&t.jsx(ge,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:S,children:e})]}),(i==null?void 0:i.haveFarming)&&t.jsx(ws,{disabled:F||K,checked:q,onChange:ne})]})]})}function Zt({children:e,title:s,wrapStyle:r={}}){return t.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[t.jsxs(E,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(T,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),e==null?void 0:e[0]]}),e==null?void 0:e[1]]})}function zi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:d,perText:p,rangeTabList:b,currentRangeTab:n,addressHistTokensMap:o,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:A,handleAmountChange:C,handleAdd:S,isFullRange:k}){var R;const{currentPriceData:u,contractPoolInfo:f,apiPoolInfo:i,resetLiquidity:h,contractPoolInfoLoading:_,apiPoolInfoLoading:y,minPriceForDate:g,maxPriceForDate:v,currentRange:w}=J(),{lowerTickData:L,upperTickData:q}=Le(),{autoStakePosition:G,setAutoStakePosition:M,isFarmRewardsRange:U,fromAmount:Q,toAmount:Y,byAmountIn:P,percentMap:O,fromToken:N,toToken:z,totalAmount:F,fromTokenLock:K,toTokenLock:Z}=Te(),{poolAddress:ne}=le(),se=$=>{M($.target.checked)},{priceImpactBasedOnMarket:B}=ys(N,z,d?"1":He(u==null?void 0:u.currentPrice),d?He(u==null?void 0:u.currentPrice):"1"),ue=j.useMemo(()=>{if(B&&H(B).abs().gte(30))return H(B).gte(30)?`+${H(B).toFixed(0)}%`:`${H(B).toFixed(0)}%`},[B]);return t.jsx(t.Fragment,{children:t.jsxs(E,{gap:"12px",align:"flex-start",children:[t.jsxs(Zt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!b||!b.length?t.jsx(Ge,{h:"32px",borderRadius:"8px",w:"180px"}):t.jsx(Ee,{type:"outlineTab",tabList:b,currentTab:n,handleChangeTab:$=>c($),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsx(E,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:t.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[t.jsx(E,{w:"100%",h:"24px",justify:"flex-start",children:t.jsx(ms,{loading:y,price:ie(u)?He(d?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6):"--",perText:p,wrapStyle:{ml:"156px",zIndex:99}})}),t.jsxs(E,{w:"100%",gap:"32px",alignItems:"start",children:[t.jsxs(W,{gap:"20px",children:[t.jsx(Ue,{h:"226px",mt:"10px",children:t.jsx(Cs,{poolAddress:ne,currentTick:f==null?void 0:f.current_tick_index,tickSpacing:f==null?void 0:f.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper})}),ie(L)&&ie(q)&&t.jsx(t.Fragment,{children:t.jsx(ot,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:t.jsx(T,{color:"text_caption",children:K&&Z?"--":x})})})]}),t.jsxs(W,{w:"100%",gap:"32px",children:[t.jsx(te,{w:"100%",h:"230px",children:t.jsx(us,{handleClickRefresh:()=>{},direct:d,minPriceData:d?L:q,maxPriceData:d?q:L,dashedMarkerLine:[g,v],currentRange:w})}),ue&&t.jsx(Lt,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",children:t.jsxs(E,{children:[t.jsx(fe,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(T,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${ue}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),ie(L)&&ie(q)&&t.jsx(Rs,{direct:d,rangeMap:o,wrapStyle:{w:"100%"}})]})]})]})}),t.jsx(_s,{perText:p,direct:d,isFullRange:k,minPriceData:d?L:q,maxPriceData:d?q:L}),K&&Z&&t.jsx(Ue,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(vs,{minPrice:d?at(i==null?void 0:i.displayFarmsEffectMinPrice):ct(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?at(i==null?void 0:i.displayFarmsEffectMaxPrice):ct(i==null?void 0:i.displayFarmsEffectMinPrice),loading:y,perText:p,checked:U,onChange:r})]})]}),t.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[t.jsxs(Zt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[t.jsx(E,{children:t.jsx(gs,{})}),t.jsxs(te,{w:"100%",position:"relative",children:[t.jsx(hs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:Q,amountValue:m,loading:!1,onChange:$=>{var ee;C($,!0,(N==null?void 0:N.coin_type)===((ee=i==null?void 0:i.tokenA)==null?void 0:ee.coin_type))},selectable:!1,placeholder:"0.0",token:N,onFocusChange:$=>{var ee;$&&+(Q+"")&&!P&&C(Q+"",!0,(N==null?void 0:N.coin_type)===((ee=i==null?void 0:i.tokenA)==null?void 0:ee.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:Y,amountValue:A,loading:!1,onFocusChange:$=>{var ee;$&&+(Y+"")&&P&&C(Y+"",!1,(z==null?void 0:z.coin_type)===((ee=i==null?void 0:i.tokenA)==null?void 0:ee.coin_type))},onChange:$=>{var ee;C($,!1,(z==null?void 0:z.coin_type)===((ee=i==null?void 0:i.tokenA)==null?void 0:ee.coin_type))},selectable:!1,placeholder:"0.0",token:z},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),K&&Z&&t.jsx(dt,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((R=[K,Z].filter(Boolean))==null?void 0:R.length)===1&&t.jsx(dt,{position:"absolute",top:K?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),t.jsxs(t.Fragment,{children:[t.jsx(W,{w:"100%",gap:"8px",children:!!(i!=null&&i.poolAddress)&&(!K||!Z)&&t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:i!=null&&i.displayTokenA&&(i!=null&&i.displayTokenB)?"0 16px 16px":"0 16px",children:[t.jsx(ge,{w:"calc(100% + 34px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:S,children:e}),(i==null?void 0:i.displayTokenA)&&(i==null?void 0:i.displayTokenB)&&t.jsxs(t.Fragment,{children:[t.jsx(oe,{isLoading:!1,label:"Total Amount",value:F&&+F?Tt(F):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(ot,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:t.jsx(E,{gap:"12px",children:[N,z].filter(Boolean).map(($,ee)=>{var je;return t.jsxs(E,{gap:"4px",children:[t.jsx($e,{imageUrl:$==null?void 0:$.logo_url,coinType:$?$==null?void 0:$.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(T,{color:ee===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X($==null?void 0:$.symbol,10),"Â ",K&&Z?"--":O[($==null?void 0:$.coin_type)===((je=i==null?void 0:i.tokenA)==null?void 0:je.coin_type)?"percentA":"percentB"],"%"]})]},$==null?void 0:$.coin_type)})})})]})]})}),(i==null?void 0:i.haveFarming)&&t.jsx(ws,{disabled:K||Z,checked:G,onChange:se})]})]})]})})}function Ei({rangeTabList:e,currentFeeTier:s,addressHistTokensMap:r,getList:c,getPrice:x}){const{apiPoolInfo:d}=J(),{direct:p,perText:b,handleChangeIsFarmRewardsRange:n,onReverseClick:o,leverage:a,currentRangeTab:l,isFullRange:m}=Ci({rangeTabList:e}),{handleAmountChange:A,fromAmountValue:C,toAmountValue:S,fromBalanceInfo:k,toBalanceInfo:u,confirmModalOpen:f,setConfirmModalOpen:i,relatedPosId:h,nftOpen:_,setNftOpen:y,handleAdd:g,handleSubmit:v}=vi(c,p),{btnText:w,btnDisabled:L}=wi(),{isApp:q}=ke(),G={btnText:w,btnDisabled:L,handleChangeIsFarmRewardsRange:n,onReverseClick:o,leverage:a,direct:p,perText:b,rangeTabList:e,currentRangeTab:l,addressHistTokensMap:r,fromBalanceInfo:k,toBalanceInfo:u,fromAmountValue:C,toAmountValue:S,handleAmountChange:A,handleAdd:g,isFullRange:m};return t.jsxs(t.Fragment,{children:[q?t.jsx(Mi,{...G}):t.jsx(zi,{...G}),f&&t.jsx(_i,{onClose:()=>i(!1),data:{feeTier:s},onSubmit:v}),_&&h&&ie(d)&&t.jsx(ki,{onClose:()=>y(!1),tokenA:d==null?void 0:d.displayTokenA,tokenB:d==null?void 0:d.displayTokenB,posId:h,fee:d==null?void 0:d.feeDisplay,isReverse:d==null?void 0:d.isReverse})]})}const Jt=(e,s,r)=>e&&s&&r?H(e).mul(s).div(H(10).pow(r)).toString():"--";function $i(){var y,g;const{tokenAPrice:e,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:x,setTokenAAmount:d,tokenBAmount:p,setTokenBAmount:b,tokenAAmountUSD:n,setTokenAAmountUSD:o,tokenBAmountUSD:a,setTokenBAmountUSD:l,totalAmountUSD:m,setTotalAmountUSD:A,resetTvlInfo:C,tvlLoading:S,setTvlLoading:k}=pt(),{apiPoolInfo:u,contractPoolInfo:f}=J(),i=async v=>{var w,L;try{const q=(w=Se(v))==null?void 0:w.full_address,G=q=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":q,{prices:M}=await nr(`${(L=ar)==null?void 0:L.cetus_api}/v2/sui/price?base_symbol_address=${G}`);return M==null?void 0:M[0]}catch(q){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",q),"--"}},{poolAddress:h}=le(),_=async()=>{var v,w,L,q;k(!0);try{if((v=u==null?void 0:u.tokenA)!=null&&v.coin_type){const G=await i((w=u==null?void 0:u.tokenA)==null?void 0:w.coin_type);G&&s(G)}if((L=u==null?void 0:u.tokenB)!=null&&L.coin_type){const G=await i((q=u==null?void 0:u.tokenB)==null?void 0:q.coin_type);G&&c(G)}}catch(G){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",G)}finally{k(!1)}};return j.useEffect(()=>{C()},[h]),j.useEffect(()=>()=>{C()},[]),j.useEffect(()=>{_()},[u==null?void 0:u.tvl,(y=u==null?void 0:u.tokenA)==null?void 0:y.coin_type,(g=u==null?void 0:u.tokenB)==null?void 0:g.coin_type]),j.useEffect(()=>{f!=null&&f.coinAmountA&&d(H(f==null?void 0:f.coinAmountA).sub((f==null?void 0:f.fee_protocol_coin_a)||"0").toString())},[f==null?void 0:f.coinAmountA,f==null?void 0:f.fee_protocol_coin_a]),j.useEffect(()=>{f!=null&&f.coinAmountB&&b(H(f==null?void 0:f.coinAmountB).sub((f==null?void 0:f.fee_protocol_coin_b)||"0").toString())},[f==null?void 0:f.coinAmountB,f==null?void 0:f.fee_protocol_coin_b]),j.useEffect(()=>{x&&(e!=null&&e.price)&&(u!=null&&u.tokenA.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenA.decimals))&&o(Jt(x,e==null?void 0:e.price,u==null?void 0:u.tokenA.decimals))},[x,e]),j.useEffect(()=>{p&&(r!=null&&r.price)&&(u!=null&&u.tokenB.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenB.decimals))&&l(Jt(p,r==null?void 0:r.price,u==null?void 0:u.tokenB.decimals))},[p,r]),j.useEffect(()=>{A(n&&a&&n!=="--"&&a!=="--"?H(n).plus(a).toString():"--")},[n,a]),{tokenAPrice:e,tokenBPrice:r,tokenAAmount:x,tokenBAmount:p,tokenAAmountUSD:n,tokenBAmountUSD:a,totalAmountUSD:m,setTotalAmountUSD:A,tvlLoading:S}}function qi(){const{tab:e,poolAddress:s,from:r,to:c,fee:x}=le(),{getPoolList:d}=$r(),[p,b]=j.useState([]),{apiPoolInfo:n,setApiPoolInfo:o,setApiPoolInfoLoading:a,setNetError:l}=J(),m=Qe(),{fetchTokenInfo:A}=bs(),C=async({poolAddress:S,from:k,to:u})=>{var f,i,h,_;try{a(!0);let y,g;if(S&&S!=="undefined"){const v=await d({pool:S});v&&v.list&&v.list.length?(g=v.list[0],y=await d({coin_type:`${(f=g==null?void 0:g.displayTokenA)==null?void 0:f.coin_type},${(i=g==null?void 0:g.displayTokenB)==null?void 0:i.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):n&&ie(n)?(g=n,y={list:p}):(g={poolAddress:S,displayTokenA:void 0,displayTokenB:void 0},y={list:[]}),a(!1)}else if(k&&u&&k!=="undefined"&&u!=="undefined"&&k!==u){const v=await d({coin_type:`${k},${u}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(v,"res_getPoolList"),v&&v.list&&v.list.length)if(x&&x!=="undefined"){const w=(h=v==null?void 0:v.list)==null?void 0:h.find(L=>H(L==null?void 0:L.feeRate).eq(x));if(w)m(e?`/liquidity?tab=${e}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`);else{const L=bt(v==null?void 0:v.list,q=>Number((q==null?void 0:q.tvl)||"0"));m(e?`/liquidity?tab=${e}&poolAddress=${L==null?void 0:L.poolAddress}`:`/liquidity?poolAddress=${L==null?void 0:L.poolAddress}`)}}else{let w=bt(v==null?void 0:v.list,L=>Number((L==null?void 0:L.tvl)||"0"));w||(w=bt(v==null?void 0:v.list,L=>{var q;return Number(((q=L==null?void 0:L.object)==null?void 0:q.liquidity)||"0")}),w||(w=v==null?void 0:v.list[0])),m(e?`/liquidity?tab=${e}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`)}else{const w=await A(k),L=await A(u);g={poolAddress:void 0,displayTokenA:w,displayTokenB:L},y={list:[]},a(!1)}}else(!k||k==="undefined")&&u&&u!=="undefined"&&(g={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await A(u)}),(!u||u==="undefined")&&k&&k!=="undefined"&&(g={poolAddress:void 0,displayTokenA:await A(k),displayTokenB:void 0}),y={list:[]},a(!1);y&&(l(!1),b(y==null?void 0:y.list),console.log(g,"setApiPoolInfo"),g&&(g!=null&&g.poolAddress&&S?(g==null?void 0:g.poolAddress)===S&&o(g):o(g))),a(!1)}catch(y){if(y!=null&&y.list&&((_=y==null?void 0:y.list)==null?void 0:_.length)===1){l(!0);const g=y==null?void 0:y.list[0];console.log(y==null?void 0:y.list,"setApiPoolInfo"),o(g),b([]),a(!1)}}};return j.useEffect(()=>{s&&s==="undefined"||C({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:C,relatedPoolList:p}}function Wi(){var S,k,u,f;const{poolAddress:e}=le(),{apiPoolInfo:s,apiPoolInfoLoading:r}=J(),[c,x]=j.useState(),{fetchByApi:d}=wt(),{quoteWhiteTokenList:p}=ps(),{getList:b,relatedPoolList:n}=qi(),o=j.useMemo(()=>{var h,_;const i=Or(n);return i?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(h=Vt)==null?void 0:h.map(y=>{var v,w;const g=((v=i.find(L=>L.feeRate===y.feeRate))==null?void 0:v.title)||y.title;return{...y,title:g,poolAddress:(w=i.find(L=>L.feeRate===y.feeRate))==null?void 0:w.poolAddress,disabled:g==="Not Created"&&!We(s==null?void 0:s.tokenA,p)&&!We(s==null?void 0:s.tokenB,p)}}):(_=Vt)==null?void 0:_.map(y=>{var v,w;const g=((v=i.find(L=>L.feeRate===y.feeRate))==null?void 0:v.title)||y.title;return{...y,title:g,poolAddress:(w=i.find(L=>L.feeRate===y.feeRate))==null?void 0:w.poolAddress,disabled:!We(s==null?void 0:s.displayTokenA,p)&&!We(s==null?void 0:s.displayTokenB,p)}}):[]},[JSON.stringify(n),JSON.stringify(p),(S=s==null?void 0:s.displayTokenA)==null?void 0:S.coin_type,(k=s==null?void 0:s.displayTokenB)==null?void 0:k.coin_type]),a=j.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(i=>({label:i==null?void 0:i.symbol,key:i==null?void 0:i.coin_type,isToken:!0,imgInfo:{src:i==null?void 0:i.logo_url,w:"16px",h:"16px",coinType:i?i==null?void 0:i.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(u=s==null?void 0:s.displayTokenA)==null?void 0:u.symbol,(f=s==null?void 0:s.displayTokenB)==null?void 0:f.symbol]),l=j.useMemo(()=>{const i=o==null?void 0:o.find(h=>h.poolAddress===e);return i||s},[JSON.stringify(o),e,JSON.stringify(s)]),m=async i=>{console.log("ðŸš€ ~ setAddressHistTokens ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",i);let h=[];const _=await d(xr,"GET",{pool:i});console.log(_,"resVal"),h=Object.fromEntries(_.list.map(y=>[y.swap_account,y])),x(h)};j.useEffect(()=>{e&&m(e)},[e]);const A=j.useMemo(()=>{var i,h,_;return c&&e&&((i=c==null?void 0:c[e])!=null&&i.data)?Object.fromEntries((_=(h=c==null?void 0:c[e])==null?void 0:h.data)==null?void 0:_.map(y=>[y.key,y.value])):{}},[JSON.stringify(c)]),C=j.useMemo(()=>{const i=[];return s!=null&&s.displayTokenA&&i.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&i.push(s==null?void 0:s.displayTokenB),i},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:b,feeTierList:o,apiPoolInfo:s,rangeTabList:a,currentFeeTier:l,addressHistTokensMap:A,apiPoolInfoLoading:r,quoteWhiteTokenList:p,warningTokenList:C}}var Oe=(e=>(e.deposit="Provide Liquidity",e.positions="My Positions",e.analytics="Analytics",e))(Oe||{});const Re=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Hi({apiPoolInfo:e}){var P,O,N;const{tab:s,poolAddress:r}=le(),c=Qe(),[x,d]=j.useState(),[p,b]=j.useState(Re),[n,o]=j.useState(((P=Re==null?void 0:Re.find(z=>z.key===s))==null?void 0:P.key)||Re[0].key),[a,l]=j.useState(),[m,A]=j.useState(),{posBaseListGroupByPool:C}=os(),{addFavorites:S,removeFavorites:k}=Rr(),{poolFavoriteIds:u}=Cr(),{fromToken:f,toToken:i}=Te(),{fetchTokenPrices:h}=cs(),{isApp:_}=ke(),{setFromCoin:y,setToCoin:g,fromCoin:v,toCoin:w}=Dr(),{setIsOpen:L}=Gr(),q=()=>{var z,F;_?c(`/swap/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}`):L(!0)};j.useEffect(()=>{f&&i&&(y(f),g(i))},[f,i]);const G=j.useMemo(()=>{if(r&&r!=="undefined"){const z=C[r.toLowerCase()||""];return z&&(z!=null&&z.list)&&(z==null?void 0:z.list.length)>0?z==null?void 0:z.list.length:void 0}},[JSON.stringify(C),r]);j.useEffect(()=>{b(Re==null?void 0:Re.map(z=>({...z,num:z.label==="My Positions"&&n==="positions"?G:void 0})))},[G,n]),j.useLayoutEffect(()=>{s&&s!==n&&o(s)},[s]);const M=j.useMemo(()=>u==null?void 0:u.includes(r||""),[JSON.stringify(u),r]),U=z=>{Ft(z),r&&(M?k(r):S(r))};j.useEffect(()=>{l(e==null?void 0:e.displayTokenA),A(e==null?void 0:e.displayTokenB)},[(O=e==null?void 0:e.displayTokenA)==null?void 0:O.coin_type,(N=e==null?void 0:e.displayTokenB)==null?void 0:N.coin_type]);const Q=()=>{var z,F;c(`/create-pool/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}/${x==null?void 0:x.feeRate}`)},Y=()=>{const z=[];f&&z.push(f.coin_type),i&&z.push(i.coin_type),z.length>0&&h(z)};return j.useEffect(()=>{Y()},[f==null?void 0:f.coin_type,i==null?void 0:i.coin_type]),{currentTab:n,setCurrentTab:o,tabList:p,isFavoritePool:M,onChangeFavorites:U,selectedTokenA:a,selectedTokenB:m,setSelectedTokenA:l,setSelectedTokenB:A,onConfirm:Q,feeTier:x,setFeeTier:d,refreshMarketPrice:Y,onJump2Swap:q}}function Ui(){const{currentAccount:e}=ut(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c}=J(),{feeTierList:x,currentFeeTier:d,rangeTabList:p,addressHistTokensMap:b,getList:n,quoteWhiteTokenList:o,warningTokenList:a}=Wi(),{poolAddress:l}=le(),{handleResetRange:m}=xt(),{resetAddLiquidity:A,setFromToken:C,setToToken:S}=Te(),{fetchAccountBalance:k}=xs(),{getContractPoolInfo:u}=Lr(),{getCurrentPrice:f}=Tr(),{currentTab:i,setCurrentTab:h,tabList:_,isFavoritePool:y,onChangeFavorites:g,selectedTokenA:v,selectedTokenB:w,setSelectedTokenA:L,setSelectedTokenB:q,onConfirm:G,setFeeTier:M,refreshMarketPrice:U,onJump2Swap:Q}=Hi({apiPoolInfo:s});j.useEffect(()=>{ie(s)&&(C(s==null?void 0:s.displayTokenA),S(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const Y=async()=>{if(l&&s&&l===(s==null?void 0:s.poolAddress)){const N=await u(l);N&&f(N==null?void 0:N.current_sqrt_price,s)}},P=()=>{U==null||U(),Y==null||Y()},O=async N=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),N&&c(!0),l&&l!=="undefined"&&await n({poolAddress:l}),e!=null&&e.address&&await k(),P(),c(!1)};return j.useEffect(()=>(e!=null&&e.address&&k(),()=>{m(),A(),r()}),[]),j.useEffect(()=>{l&&(s==null?void 0:s.poolAddress)!==l&&(m(),A(),r()),l&&l===(s==null?void 0:s.poolAddress)&&Y()},[l,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:d,rangeTabList:p,addressHistTokensMap:b,quoteWhiteTokenList:o,warningTokenList:a,currentTab:i,setCurrentTab:h,tabList:_,isFavoritePool:y,onChangeFavorites:g,selectedTokenA:v,selectedTokenB:w,setSelectedTokenA:L,setSelectedTokenB:q,onConfirm:G,setFeeTier:M,handleRefresh:O,handleGetPrice:Y,onJump2Swap:Q}}function na(){const e=Qe(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,setApiPoolInfo:x,netError:d}=J(),{poolAddress:p,from:b,to:n}=le(),{feeTierList:o,currentFeeTier:a,rangeTabList:l,addressHistTokensMap:m,quoteWhiteTokenList:A,warningTokenList:C,currentTab:S,setCurrentTab:k,tabList:u,isFavoritePool:f,onChangeFavorites:i,selectedTokenA:h,selectedTokenB:_,setSelectedTokenA:y,setSelectedTokenB:g,onConfirm:v,setFeeTier:w,handleRefresh:L,handleGetPrice:q,onJump2Swap:G}=Ui(),{getTokenInfo:M}=bs(),{isApp:U}=ke(),{isOpen:Q,onOpen:Y,onClose:P}=cr(),{totalAmountUSD:O,tvlLoading:N,setTotalAmountUSD:z}=$i();return t.jsxs(t.Fragment,{children:[t.jsxs(te,{w:"100%",mt:"20px",children:[t.jsxs(E,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[t.jsx(lr,{text:"Pools",onClick:()=>e("/pools")}),p&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(E,{gap:"8px",children:[t.jsx(it,{placement:"top",tooltip:f?"Remove from Watchlist":"Add to Watchlist",children:t.jsx(ge,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:i,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:f?"primary":"text_caption"}}},children:t.jsx(fe,{xlinkHref:f?"#icon-icon_star_sel":"#icon-icon_star",svgFill:f?"primary_blue":"text_paragraph",svgHover:f?"primary":"text_caption",fontSize:"18px"})})}),t.jsx(it,{placement:"top",tooltip:"Trade",children:t.jsx(ge,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:G,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:t.jsx(fe,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),t.jsx(it,{placement:"top",tooltip:"Refresh",children:t.jsx(te,{children:t.jsx(Kr,{handleRefresh:L,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},p)})})]})]}),t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(E,{gap:"12px",children:[t.jsx(Nt,{value:h||(b?M(b):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,ne,se,B;const K=Object.keys(Oe).find(ue=>ue===S);if(_!=null&&_.coin_type||(Z=M(n))!=null&&Z.coin_type)if(Se(F==null?void 0:F.coin_type).full_address===Se((_==null?void 0:_.coin_type)||((ne=M(n))==null?void 0:ne.coin_type)||"").full_address)y(_),g(h);else{if(Se(F==null?void 0:F.coin_type).full_address===Se((h==null?void 0:h.coin_type)||((se=M(b))==null?void 0:se.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}&to=${(_==null?void 0:_.coin_type)||((B=M(n))==null?void 0:B.coin_type)}`),x(null),z("")}else e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}`),x(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!h&&r}),t.jsx(Nt,{value:_||(n?M(n):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,ne,se,B;const K=Object.keys(Oe).find(ue=>ue===S);if(h!=null&&h.coin_type||(Z=M(b))!=null&&Z.coin_type)if(Se(F==null?void 0:F.coin_type).full_address===Se((h==null?void 0:h.coin_type)||((ne=M(b))==null?void 0:ne.coin_type)||"").full_address)y(_),g(h);else{if(Se(F==null?void 0:F.coin_type).full_address===Se((_==null?void 0:_.coin_type)||((se=M(n))==null?void 0:se.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${(h==null?void 0:h.coin_type)||((B=M(b))==null?void 0:B.coin_type)}&to=${F==null?void 0:F.coin_type}`),x(null),z("")}else e(`/liquidity?tab=${K}&to=${F==null?void 0:F.coin_type}`),x(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!_&&r})]}),t.jsx(Vr,{value:a,loading:!a&&r,feeTierList:o,disabled:d,onChange:F=>{F!=null&&F.poolAddress?e(`/liquidity?poolAddress=${F==null?void 0:F.poolAddress}`):(w(F),Y())}})]}),p&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(pe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[t.jsx(et,{label:"Pool APR",value:t.jsx(dr,{poolInfo:s,placement:"bottom",children:t.jsxs(E,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[t.jsx(T,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&t.jsxs(T,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),t.jsx(et,{label:"TVL",value:O&&O!=="--"?`$${_e(O,2)}`:"--",loading:r||N}),t.jsx(et,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:r}),t.jsx(et,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:r})]})]}),p&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?t.jsxs(t.Fragment,{children:[t.jsxs(pe,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[t.jsx(Ee,{type:"borderTab",tabList:u,currentTab:S,handleChangeTab:F=>{const K=Object.keys(Oe).find(Z=>Oe[Z]===F.label);p&&e(`/liquidity?tab=${K}&poolAddress=${p}`),k(K)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:U?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:U?"14px":"16px",fontWeight:"500"}}),S!=="deposit"&&s&&t.jsxs(pe,{w:U?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[t.jsx(T,{children:"Current Price"}),t.jsx(Qr,{noCenter:!!U,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:rt(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:U?{w:"100%"}:{}})]})]}),t.jsx(te,{h:{base:"20px",lg:"8px"}}),S==="deposit"&&t.jsx(Ei,{rangeTabList:l,getList:L,getPrice:q,currentFeeTier:a,addressHistTokensMap:m}),S==="positions"&&t.jsx(Ai,{}),S==="analytics"&&t.jsx(fi,{})]}):t.jsx(te,{mt:"20px",children:!s&&r?t.jsx(Ue,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:t.jsx(kt,{})}):t.jsx(Ve,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsx(W,{children:h&&_?We(h,A)||We(_,A)?t.jsxs(t.Fragment,{children:[t.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),t.jsx(T,{fontSize:"14px",children:"Do you want to initialize it?"}),t.jsx(ge,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{P(),v()},children:"Initialized Pool"})]}):t.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):t.jsx(T,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&t.jsx(Xr,{tokensInfo:C,waringModalCancel:F=>{e("/pools")}}),t.jsx(Hr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:Q,onClose:P,onConfirm:v})]})}export{na as default};
