import{Q as F,aY as Y,b3 as K,aV as _e,s as I,O as re,d as R,G as k,u as ge,b4 as Pe,l as oe,a8 as H,Z as D,aJ as le,aQ as Ve,M,k as xe,b5 as ke,b6 as Le,p as ne,aZ as Se,f as he,q as ve,o as je,a1 as ce,C as Ae}from"./index-Fe2tZAmL.js";import{c as Oe}from"./useGetPoolList-B1Mv5UcY.js";import{a as q,j as w,V as J,H as ie,T as we}from"./vendor-BFGDaAdA.js";import{u as Ce}from"./useTokenBalance-DP5kgkCW.js";import{u as Be}from"./useToken-BKskvPZm.js";import{u as De}from"./useFavoritePool-DJy3kpLw.js";import{H as G}from"./HTextLabelBox-a2CUIzAy.js";const de=F(o=>({pythPriceMap:{},setPythPriceMap:e=>o({pythPriceMap:e})}));function Ie(){const{volatileVaultsSdk:o}=Y(),{setPythPriceMap:e}=de();return{getPythLastPrice:async c=>{const P=c.map(m=>K(m));try{const m=await o.PythPrice.getLatestPrice(P);return e(m),m}catch(m){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetPythLastPrice.ts:16 ~ getPythLastPrice ~ error:",m)}}}}const Ne=(o,e)=>({vaultsList:[],setVaultList:t=>o({vaultsList:t}),vaultPageList:[],setVaultPageList:t=>o({vaultPageList:t}),vaultListObj:{},setVaultListObj:t=>o({vaultListObj:t}),vaultListLoading:!0,setVaultListLoading:t=>o({vaultListLoading:t}),vaultsTokenList:[],setVaultsTokenList:t=>o({vaultsTokenList:t}),lpTokenInfoObj:{},setLpTokenInfoObj:t=>o({lpTokenInfoObj:t}),vaultsTotalTvlDisplay:"",setVaultTotalTvlDisplay:t=>o({vaultsTotalTvlDisplay:t})}),Z=F(_e(Ne,{name:"useVaultsStoreV2",partialize:o=>{const{vaultsList:e,vaultsTokenList:t,lpTokenInfoObj:c}=o;return{vaultsList:e,vaultsTokenList:t,lpTokenInfoObj:c}}})),Re=F((o,e)=>({lstVaultContractInfoObj:{},haedalVaultContractInfoObj:{},vaultClmmPoolContractInfoObj:{},setLstVaultContractInfoObj:t=>{const c=e().lstVaultContractInfoObj;o(()=>({lstVaultContractInfoObj:{...c,...t}}))},setHaedalVaultContractInfoObj:t=>{const c=e().haedalVaultContractInfoObj;o(()=>({haedalVaultContractInfoObj:{...c,...t}}))},setVaultClmmPoolContractInfoObj:t=>{const c=e().vaultClmmPoolContractInfoObj;o(()=>({vaultClmmPoolContractInfoObj:{...c,...t}}))}})),ue=F(o=>({vaultsPositionObj:{},setVaultsPositionObj:e=>o(t=>({vaultsPositionObj:{...t.vaultsPositionObj,...e}})),clearVaultsPositionObj:()=>o(()=>({vaultsPositionObj:{}})),currentVaultPosition:{},setCurrentVaultPosition:e=>o(()=>({currentVaultPosition:e})),currentVaultPositionLoading:!0,setCurrentVaultPositionLoading:e=>o(()=>({currentVaultPositionLoading:e})),vaultsPositionLoading:!1,setVaultsPositionLoading:e=>o(()=>({vaultsPositionLoading:e})),vaultsTotalTvl:"",setVaultsTotalTvl:e=>o(()=>({vaultsTotalTvl:e}))})),Q={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}},"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105":{vaults_id:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmm_pool:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",lpToken:{name:"SUI-USDC Haedal Vault LP Token",symbol:"SUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/TZD49BnoQJTbSIsGi_qfnzfN0MuCE17hYMeOWaMqpEs",project_url:"",coin_type:"0x2f46a040b9bc3a584a3be4d7bfbb02a5fb479da17a04c6d2860ed61d95e97f3f::lpcoin::LPCOIN",description:""}},"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2":{vaults_id:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmm_pool:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",lpToken:{name:"DEEP-SUI Haedal Vault LP Token",symbol:"DEEP-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/NVpcEHcDm71AOiNdu5BjfZ5RoXwROnKMUE3PEwDOKM4",project_url:"",coin_type:"0xd418945e16ef3db737df093d0827f5ce387b36f089523e13c16e50dec6bd2524::lpcoin::LPCOIN",description:""}},"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17":{vaults_id:"0x12ac7deea4b92b3e2c16687e2d2695fa8c045ec0a52844db7b2fc3876c9552aa",clmm_pool:"0x72f5c6eef73d77de271886219a2543e7c29a33de19a6c69c5cf1899f729c3f17",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}},"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b":{vaults_id:"0x99db9a7d3320d31fe6e4dc4122b948162010e331c41dc279636ca75567b93497",clmm_pool:"0xaa020ad81e1621d98d4fb82c4acb80dc064722f24ef828ab633bef50fc28268b",lpToken:{name:"haSUI-USDC Haedal Vault LP Token",symbol:"haSUI-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/uPsVdR-uVDtGW-FMwvSm4PV123RnHBzAYb2S9nO923E",project_url:"",coin_type:"0x0484a9162669957e1c1883fc2da59e3cce9afdc1eec3c72c983898dbc9e92b91::lpcoin::LPCOIN",description:""}},"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88":{vaults_id:"0xedfb22d1bbe5045fd1888bb8bc1c4bc1823ab24d40f5a4bea9f6eb9758a4b820",clmm_pool:"0x9e59de50d9e5979fc03ac5bcacdb581c823dbd27d63a036131e17b391f2fac88",lpToken:{name:"ETH-USDC Haedal Vault LP Token",symbol:"ETH-USDC Vault LPT",decimals:6,logo_url:"https://node1.irys.xyz/AsgmYwj4r2jNmfjHBktWEPJP1pLaamS-SMICcmFZQIc",project_url:"",coin_type:"0x8275bc774497b319db110bb97a4812a19859ab6f19dc1574746097f06103c0f9::lpcoin::LPCOIN",description:""}},"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded":{vaults_id:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmm_pool:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",lpToken:{name:"CETUS-SUI Haedal Vault LP Token",symbol:"CETUS-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/wDk5NmfNJXk2yT_ocfN3UuYtAltpTjGGr-MQzPNl9E0",project_url:"",coin_type:"0x242ddc526b9cb75513bee2fc629e01d5b7dc6da4c02d39cdab0160794635334f::lpcoin::LPCOIN",description:""}},"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e":{vaults_id:"0xbd6252e0d56ae5eaabf055fd6c518ee5f66c1114287ca957cc698a17c3d25b16",clmm_pool:"0x2fc6ee9183d0f1ca0d2dded02c416be6f4671bb82db55c26ce12b536812a4b8e",lpToken:{name:"LBTC-SUI Haedal Vault LP Token",symbol:"LBTC-SUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/-CIyJycPqRHU1xnI0eJLtccVFr3PJDX_Ahz7Mlh8Pvo",project_url:"",coin_type:"0xb2d502d4ef89395934de020b195ded323bfa86d7f40b65ed5b15d6b66c722a3d::lpcoin::LPCOIN",description:""}},"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1":{vaults_id:"0x5525f5a70fffd93f616c39b59f3abdd2054fc2d19f09c8a4d94950d611a43b74",clmm_pool:"0xea648440bd640d3530e8a5f02c0b56da82c2efe851156c39974b901bbb0eeab1",lpToken:{name:"WAL-haSUI Haedal Vault LP Token",symbol:"WAL-haSUI Vault LPT",decimals:9,logo_url:"https://node1.irys.xyz/byrMmE8Xu83i73BKML8yQGXq9H6a-mA6pDFnIQlu_84",project_url:"",coin_type:"0x5c79c0ab2c45682aba43b1acbe5c478d947f7c8397d47447906d6cc127e180fb::lpcoin::LPCOIN",description:""}}};function ze(){return{wrapVaultsPoolData:(e,t,c=!1)=>{var C,N,z,U;const{category:P,hard_cap_usd:m,tvl:A}=e,{displayTokenA:S,displayTokenB:h,feeDisplay:T,isReverse:r,tokenA:s,tokenB:i}=c?e:t,f=I(e.tvl||0),u=I(P=="cetus"?e.apr*100:e.apy*100,"%"),p=I(e.lst_apy*100,"%"),L=I(e.apr*100,"%"),V=I(A,"$"),y=re(m,2),b=e.category=="cetus"?R(e==null?void 0:e.apy).add(R(e.lst_apy)).mul(100).toString():R(e.apy).mul(100).toString(),a=I(b,"%"),l=[k(S==null?void 0:S.coin_type,!1),k(h==null?void 0:h.coin_type,!1)],d=((C=t==null?void 0:t.farmsRewarderList)==null?void 0:C.map(B=>k(B==null?void 0:B.coinType,!1)))||[],_=((N=t==null?void 0:t.miningRewardList)==null?void 0:N.map(B=>k(B==null?void 0:B.coinType,!1)))||[],v=Array.from(new Set([...l,...d,..._])),n=R(m).gt(0)?I(R(A).div(m).mul(100).toString(),""):0,g=I(n||0,"%"),j=c?e.clmmPoolAddress:t.poolAddress,O=e.category=="cetus"?(U=(z=Q[j])==null?void 0:z.lpToken)==null?void 0:U.coin_type:e.lp_type||e.lpTokenType,x=e==null?void 0:e.hard_cap_usd;return{tokenA:s,tokenB:i,displayTokenA:S,displayTokenB:h,feeDisplay:T,vaultsTvl:c?"--":A,tvlDisplay:c?"--":f,vaultsTvlDisplay:c?"--":V,vaultsApyDisplay:c?"--":u,vaultsAprDisplay:c?"--":L,vaultsLstApyDisplay:c?"--":p,vaultsTotalApy:c?"--":b,vaultsTotalApyDisplay:c?"--":a,vaultsRewards:c?e.vaultsRewards:v,category:P,depositRatio:n,depositRatioDisplay:g,vaultId:c?e.vaultId:e.id,clmmPoolAddress:j,hardCapUsdDisplay:y,lpTokenType:O,hardCapUSD:x,isReverse:r}}}}function Ue(){const{fetchByApi:o}=ge(),{wrapVaultsPoolData:e}=ze(),{getFavoritePoolList:t}=De(),{vaultsList:c,setVaultList:P,setVaultTotalTvlDisplay:m,setVaultListObj:A}=Z(),S=async()=>{try{const T=await o(Pe,"GET");if(T.list){const r=T.list.map(i=>i.clmm_pool),s=await t({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:r});if(s!=null&&s.list){const i=Object.fromEntries(s==null?void 0:s.list.map(u=>[u.poolAddress,u])),f=T.list.map(u=>e(u,i[u.clmm_pool]));return P(f),A(f.reduce((u,p)=>(u[p.vaultId]=p,u),{})),m(re(T==null?void 0:T.total_tvl,2)),f}}}catch(T){return console.log("ðŸš€ðŸš€ðŸš€ ~ getVaultPoolList ~ error:",T),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:48 ~ getVaultPoolList ~ vaultsList:",c),h()}},h=async()=>{const r=(await fetch(`/data/vault-pools.json?timestamp=${new Date().getTime()}`).then(s=>s.json())).map(s=>e(s,{},!0));return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultPoolList.ts:57 ~ poolList ~ poolList:",r),P(r),A(r.reduce((s,i)=>(s[i.vaultId]=i,s),{})),m("--"),r};return{getVaultPoolList:S}}const Ge=F(o=>({vaultsPoolObj:{},setVaultsPoolObj:e=>o(t=>({vaultsPoolObj:{...t.vaultsPoolObj,...e}}))}));function Ke(){const{volatileVaultsSdk:o}=Y();oe("clmm");const e=oe("vaults"),{setLstVaultContractInfoObj:t,setHaedalVaultContractInfoObj:c,setVaultClmmPoolContractInfoObj:P}=Re(),{setVaultsPoolObj:m}=Ge(),A=async T=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsContract.ts:19 ~ getVaultsContractInfo ~ getVaultsContractInfo:");const r=[],s=[],i=[];T.forEach(b=>{b.category=="cetus"?r.push(b.vaultId):s.push(b.vaultId),i.push(b.clmmPoolAddress)});const{data:f}=await e.Vaults.getVaultList(),u=f.reduce((b,a)=>(b[a.id]=a,b),{});t(u);const{data:p}=await o.Vaults.getPoolList(),L=p.reduce((b,a)=>(b[a.id]=a,b),{});c(L);const y=(await o.CetusClmmSDK.Pool.getAssignPools(i)).reduce((b,a)=>(b[a.id]=a,b),{});return P(y),S(T,y,u,L),{lstVaultContractInfoObj:u,haedalVaultContractInfoObj:L,allClmmPoolContractInfoObj:y}},S=(T,r,s,i)=>{for(let f=0;f<T.length;f++){const u=T[f],p=u.category=="cetus"?s[u.vaultId]:i[u.vaultId],L=r[u.clmmPoolAddress],V=h(u,L,p);m(V)}},h=(T,r,s)=>{const{tokenA:i,tokenB:f,category:u,isReverse:p,vaultId:L}=T,V=u=="haedal"?s.clmm_vault.wrapped_position.tick_lower_index:s.position.tick_lower_index,y=u=="haedal"?s.clmm_vault.wrapped_position.tick_upper_index:s.position.tick_upper_index,b=H.tickIndexToPrice(V,i.decimals,f.decimals).toString(),a=H.tickIndexToPrice(y,i.decimals,f.decimals).toString(),l=u=="haedal"?s.clmm_vault.wrapped_position.liquidity:s.position.liquidity,d=D(1).div(D(a)).toString(),_=D(1).div(D(b)).toString(),v=new le(r.current_sqrt_price),n=H.sqrtPriceX64ToPrice(v,i.decimals,f.decimals).toString(),g=D(1).div(D(n)).toString(),j=H.tickIndexToSqrtPriceX64(V),O=H.tickIndexToSqrtPriceX64(y),x=Ve.getCoinAmountFromLiquidity(new le(l),v,j,O,!1),C=M(x.coin_amount_a.toString(),i.decimals).toString(),N=M(x.coin_amount_b.toString(),f.decimals).toString(),z=p?N:C,U=p?C:N,{percentA:B,percentB:$}=Oe(C,N,n,!1),pe=p?$:B,be=p?B:$,fe=I(D(s.protocol_fee_rate).div(1e4).mul(100).toString(),"%"),ee=k(i.coin_type,!1),te=k(f.coin_type,!1),ye=p?te:ee,me=p?ee:te;let W,E,ae,X,se;u=="haedal"&&(W=s==null?void 0:s.quote_type,E=k(W,!1)==k(i.coin_type,!1)?i:f,ae=D(s==null?void 0:s.hard_cap).div(10**(E==null?void 0:E.decimals)).toString(),X=W==i.coin_type?f:i,se=X.coin_type);const Te=u=="cetus"?s==null?void 0:s.total_supply:s==null?void 0:s.lp_token_treasury;return{[L]:{minPrice:p?d:b,minPriceResever:p?b:d,maxPrice:p?_:a,maxPriceResever:p?a:_,liquidity:l,displayAmountA:z,displayAmountB:U,displayPercentA:pe,displayPercentB:be,currentPrice:p?g:n,currentPriceReverse:p?n:g,disPlayProtocolFeeRate:fe,displayCoinTypeA:ye,displayCoinTypeB:me,hardCap:ae,quoteCoinType:W,quoteCoin:E,baseCoin:X,baseCoinType:se,totalSupply:Te}}};return{getVaultsContractInfo:A,getVaultPool:S,wrapVaultPoolContractInfo:h}}function Qe(){const{lpTokenInfoObj:o}=Z(),{volatileVaultsSdk:e}=Y(),{currentAccount:t}=xe(),{setVaultsPositionObj:c,setVaultsPositionLoading:P}=ue();Ce();const m=q.useRef(t==null?void 0:t.address);q.useEffect(()=>{m.current=t==null?void 0:t.address},[t==null?void 0:t.address]);const A=async(r,s,i,f,u=!1)=>{P(!0);const L=(await e.FullClient.getAllBalances({owner:t==null?void 0:t.address})).reduce((V,y)=>(V[y.coinType.toLowerCase()]=y,V),{});for(let V=0;V<r.length;V++){const y=r[V],b=y.category=="cetus"?s[y.vaultId]:i[y.vaultId],a=f[y.clmmPoolAddress],l=L[y.lpTokenType.toLowerCase()];console.log("ðŸš€ ~ getVaultsPosition ~ balance:",l),S(y,a,b,u,l,t==null?void 0:t.address)}P(!1)},S=async(r,s,i,f=!1,u,p=t==null?void 0:t.address,L)=>{try{const{category:V}=r;let y,b;u?b=u:(b=await e.FullClient.getBalance({owner:p,coinType:r.lpTokenType}),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:45 ~ getVaultPosition ~ balance:",b)),V=="cetus"?y=ke.buildVaultBalance(p,i,b,s):y=Le(p,b.totalBalance,i,s);const a=h({...y,ownerAddress:m.current==p?p:void 0},r,i,L);return f&&m.current==p?c(a):f||c(a),console.log("ðŸš€ ~ useGetVaultsPosition ~ result:",a),a}catch(V){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:59 ~ getVaultPosition ~ error:",V)}},h=(r,s,i,f=o)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:74 ~ wrapVaultPosition ~ tokenInfoObj:",f);const u=f[s.lpTokenType],{amount_a:p,amount_b:L,ownerAddress:V}=r,{isReverse:y,tokenA:b,tokenB:a,category:l}=s,d=M(p,b.decimals).toString(),_=M(L,a.decimals).toString(),v=r.clmm_pool_id,n=r.liquidity,g=r.vault_id,j=ne(r.coin_type_a).full_address,O=ne(r.coin_type_b).full_address,x=T(u,r.lp_token_balance),C=l=="cetus"?R(x.balance).div(i.total_supply).mul(100).toString():R(x.balance).div(i.lp_token_treasury).mul(100).toString(),N=`${Se(C,2,6)}%`,z=y?a:b,U=y?b:a;return{[g]:{...x,amountA:d,amountB:_,displayAmountA:y?_:d,displayAmountB:y?d:_,coinTypeA:j,coinTypeB:O,displayCoinTypeA:y?O:j,displayCoinTypeB:y?j:O,liquidity:n,clmmPool:v,vaultId:g,sharePoolRate:C,shartOfPoolDisplay:N,tokenA:b,tokenB:a,displayTokenA:z,displayTokenB:U,ownerAddress:V}}},T=(r,s)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultsPosition.ts:99 ~ getVaultBalance ~ tokenInfo:",r);const i=M(s,r==null?void 0:r.decimals).toString();return{balance:s,balanceFormat:i,balanceDisplay:he(i,void 0,!1,ve.ROUND_DOWN).toString()}};return{getVaultPosition:S,getVaultsPosition:A}}function Ye(){const{fetchTokenPrices:o}=je(),{setVaultListLoading:e,setVaultsTokenList:t,lpTokenInfoObj:c,setLpTokenInfoObj:P,vaultsList:m,setVaultPageList:A}=Z(),{getVaultPoolList:S}=Ue(),{fetchTokenInfo:h,getTokenListInfo:T}=Be(),{vaultsPositionObj:r}=ue(),{getPythLastPrice:s}=Ie(),i=(a,l=m,d=!1)=>{console.log("ðŸš€ ~ filterVaultList ~ originList:",l);const{currentTab:_,isYourHoldings:v,selectCoinList:n,sortOptions:g}=a;let j=[],O=[];(n==null?void 0:n.length)>0?O=V(l,n):O=l,_==="all"?j=O:j=O.filter(C=>C.category==_);let x;return v?x=f(g,y(j)):x=f(g,j),d||(A(x),e(!1)),x},f=(a,l)=>{console.log("ðŸš€ ~ sortVaultList ~ options:",a);const{sortRule:d,sortType:_}=a;return l==null?void 0:l.sort((n,g)=>_==="apr"?d==="desc"?g.vaultsTotalApy-n.vaultsTotalApy:n.vaultsTotalApy-g.vaultsTotalApy:d==="desc"?g.vaultsTvl-n.vaultsTvl:n.vaultsTvl-g.vaultsTvl)},u=async(a,l=!0)=>{console.log("ðŸš€ ~ fetchVaultList ~ fetchVaultList:",a),l&&e(!0);const d=await S();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:59 ~ fetchVaultList ~ list:",d),p(d),L(d);const _=i(a,JSON.parse(JSON.stringify(d)));return console.log("ðŸš€ ~ fetchVaultList ~ result:",_),e(!1),A(_),d},p=async a=>{if(!a||a.length===0)return;const l=[],d=[];for(let n=0;n<a.length;n++)l.includes(a[n].displayTokenA.coin_type)||l.push(a[n].displayTokenA.coin_type),l.includes(a[n].displayTokenB.coin_type)||l.push(a[n].displayTokenB.coin_type),a[n].category=="haedal"&&!d.includes(k(a[n].displayTokenA.coin_type))&&d.push(k(a[n].displayTokenA.coin_type,!1)),a[n].category=="haedal"&&!d.includes(k(a[n].displayTokenB.coin_type))&&d.push(k(a[n].displayTokenB.coin_type,!1));s(d),l.length>0&&o(l);const _=await T(l),v=Array.from(_.values());t(v)},L=async a=>{var d,_;const l={};for(let v=0;v<a.length;v++){const n=a[v],g=n==null?void 0:n.lpTokenType;(d=Q[n.clmmPoolAddress])!=null&&d.lpToken?l[g]=(_=Q[n.clmmPoolAddress])==null?void 0:_.lpToken:c[g]?l[g]=c[g]:l[g]=await h(g)}return P(l),l},V=(a,l)=>{var n,g,j,O;const d=(n=l[0])!=null&&n.coin_type?k((g=l[0])==null?void 0:g.coin_type):void 0,_=(j=l[1])!=null&&j.coin_type?k((O=l[1])==null?void 0:O.coin_type):void 0;return a==null?void 0:a.filter(x=>d&&_?k(x.displayTokenA.coin_type)==d&&k(x.displayTokenB.coin_type)==_||k(x.displayTokenA.coin_type)==_&&k(x.displayTokenB.coin_type)==d:d?k(x.displayTokenA.coin_type)==d||k(x.displayTokenB.coin_type)==d:x)},y=a=>(console.log("ðŸš€ ~ filterMyVaultList ~ vaultsPositionObj:",r),a.filter(l=>{const d=r[l.vaultId];return!!(d&&D(d.balance).gt(0))}));return{getVaultsLpTokenList:L,getVaultsTokenList:p,filterVaultList:i,sortVaultList:f,fetchVaultList:u,getCurrentTabNum:a=>{let l=i(a,m,!0);return String(l&&l.length||"")}}}function Ze(){const{pythPriceMap:o}=de(),e=q.useMemo(()=>o,[o]),t=q.useCallback((P,m,A)=>{var h;const S=Number(m)==0?"0":A;if(m&&P&&+m&&ce(e)){const T=(h=e[K(P)])==null?void 0:h.price;if(T)return D(m).mul(T).toString()}return S},[e]),c=q.useCallback(P=>{var m;return P&&ce(e)?(m=e[K(P)])==null?void 0:m.price:0},[e]);return{getTokenAmountValueByPyth:t,getTokenPriceByPyth:c}}function $e({vaultsLstApyDisplay:o,vaultsApyDisplay:e,vaultsTotalApyDisplay:t,category:c,vaultsAprDisplay:P}){return w.jsx(Ae,{tooltip:w.jsx(Ee,{vaultsApyDisplay:e,vaultsLstApyDisplay:o,vaultsTotalApyDisplay:t,vaultsAprDisplay:P,category:c}),children:w.jsx(we,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:c=="cetus"?t:e})})}const Ee=({vaultsLstApyDisplay:o,vaultsApyDisplay:e,vaultsTotalApyDisplay:t,category:c,vaultsAprDisplay:P})=>w.jsx(J,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:c=="cetus"?w.jsxs(J,{children:[w.jsx(G,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:t}),w.jsx(ie,{h:"1px",w:"100%",backgroundColor:"border"}),w.jsx(G,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:e}),w.jsx(G,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:o,valueStyle:{fontSize:"12px"}})]}):w.jsxs(J,{children:[w.jsx(G,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:P}),w.jsx(ie,{h:"1px",w:"100%",backgroundColor:"border"}),w.jsx(G,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),w.jsx(G,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});export{Ee as V,ue as a,$e as b,Qe as c,Re as d,Ye as e,Ke as f,Ge as g,Ie as h,Ze as i,de as j,Ue as k,Z as u};
//# sourceMappingURL=VaultsAprBlock-BT80udWs.js.map
