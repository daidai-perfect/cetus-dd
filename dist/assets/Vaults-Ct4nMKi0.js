import{j as e,l as se,Z as ne,I as N,a as me,a0 as O,b as ee,H as d,c as Q,V,T as c,bw as de,U as K,C as J,X as ue,aq as ce,$ as ke,B as xe,aC as pe,b8 as be,r as y,a1 as he,S as B,a3 as Ce,i as Ae,ao as ge,d as je,aU as Ve,aG as E,an as Le}from"./index-B-qrdBiq.js";import{N as I}from"./NoData-_1dQxBZZ.js";import{d as fe,v as Be,e as Re,a as De,u as Pe,f as ae}from"./VaultsAprBlock-RX8ifyIA.js";import{H as X}from"./HTextLabelBox-CMrM5XEP.js";import{P as He}from"./PoweredByHaedal-CGUqJi46.js";import{V as ye}from"./VTextLabelBox-CLZrl3c5.js";import{u as ve}from"./useToken-BQk_H0Hd.js";import{C as ze}from"./CoinPairInfo-C2E_4zWV.js";import{a as M,b as A,c as We,d as Ee,e as G,T as Ye}from"./tr-CkYjo0YL.js";import{S as Fe}from"./SearchInputBlock-Dy7qsCBI.js";import{R as Me}from"./RefreshButton-DigytzgF.js";import{S as Oe}from"./SortDropBlock-CyoOCFL5.js";import{u as Ue}from"./useTokenBalance-BjSd1T-L.js";import{u as Ne}from"./useAccountBalance-B9O9361I.js";import"./swapWidget-BlZ_qMlV.js";import"./api-data-utils-lG4WZPKZ.js";import"./useFavoritePool-B5SWmSU7.js";import"./useGetPoolList-yuWyRDmL.js";import"./useTransaction--2sMtHs8.js";import"./global-DXu_9rR6.js";import"./msafe-oYBkW7LJ.js";import"./index-CNO93z0h.js";import"./useFindBestRouting-C6aBD_xc.js";import"./SingleTokenInfo-BbYDSI8t.js";import"./CopyButton-B43sOlQP.js";import"./index-CCopU0rQ.js";import"./Loading-CRRjCeeJ.js";import"./TooltipIcon-DpjOiY6Y.js";function we(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:i}=l;return e.jsxs(se,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(ne,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(ne,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg",svg:{fill:"text_caption"}},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:i||(()=>{}),children:e.jsx(N,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function Se(l){var f,w,T,L;const{apiInfo:r,logo_url:s,balanceDisplay:i,holdCoinAmounts:t,sharePoolRate:b,rewardPerA:g,rewardPerB:v}=l,a=me(),{currentAccount:o,onWalletModal:j}=O(),{isApp:x}=ee();return o?e.jsxs(se,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{a(`/vaults-detail/${r.vaultsId}/${r.category}`)},children:[e.jsxs(d,{gap:"15px",children:[e.jsx(Q,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(V,{gap:"4px",alignItems:"start",children:[e.jsx(c,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(c,{color:"text_caption",children:`${i||"0"} LP`})]})]}),e.jsx(se,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:x?e.jsxs(e.Fragment,{children:[e.jsx(X,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(se,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(c,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(c,{color:"text_caption",children:(f=r==null?void 0:r.displayTokenA)==null?void 0:f.symbol})]}),e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(c,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(c,{color:"text_caption",children:(w=r==null?void 0:r.displayTokenB)==null?void 0:w.symbol})]})]})}),e.jsx(X,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:`${de(b,2,6)}%`}),e.jsxs(ne,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(c,{color:"primary_gray",children:"Details"}),e.jsx(K,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(J,{w:"20px",h:"20px",children:e.jsx(N,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{mr:"90px",children:e.jsx(ye,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(d,{gap:"4px",children:[e.jsx(Q,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(c,{color:"text_caption",children:ue(t==null?void 0:t.displayCoinA)}),e.jsx(c,{color:"text_caption",mr:"8px",children:(T=r==null?void 0:r.displayTokenA)==null?void 0:T.symbol}),e.jsx(Q,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(c,{color:"text_caption",children:ue(t==null?void 0:t.displayCoinB)}),e.jsx(c,{color:"text_caption",children:(L=r==null?void 0:r.displayTokenB)==null?void 0:L.symbol})]})})}),e.jsx(J,{mr:"110px",children:e.jsx(ye,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:`${de(b,2,6)}%`})}),e.jsxs(d,{gap:"8px",children:[e.jsx(c,{color:"primary_gray",children:"Details"}),e.jsx(K,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(J,{w:"20px",h:"20px",children:e.jsx(N,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(I,{type:"nowallet",onboard:()=>{j(!0)}})}function Te({rewardList:l}){return e.jsx(ce,{tooltip:e.jsx(c,{fontSize:"12px",lineHeight:"20px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(d,{justifyContent:"end",gap:"4px",children:l==null?void 0:l.map(r=>e.jsx($e,{coinType:r},r))})})}function $e({coinType:l}){const{tokenInfo:r}=ve(l);return e.jsx(J,{children:e.jsx(Q,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"})})}function qe({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:v,sharePoolRate:a,currentAccount:o,totalValue:j,jumpVaultsDetail:x,isShowPowered:f,isShowAprTips:w}){var T,L,D,_,m,P;return e.jsxs(V,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(d,{children:[e.jsx(ke,{coinAIconUrl:(T=t==null?void 0:t.displayTokenA)==null?void 0:T.logo_url,coinBIconUrl:(L=t==null?void 0:t.displayTokenB)==null?void 0:L.logo_url,coinACoinType:(D=t==null?void 0:t.displayTokenA)==null?void 0:D.coin_type,coinBCoinType:(_=t==null?void 0:t.displayTokenB)==null?void 0:_.coin_type,w:"40px",h:"40px"}),e.jsxs(V,{children:[e.jsxs(d,{children:[e.jsxs(c,{color:"text_caption",fontWeight:"500",children:[(m=t==null?void 0:t.displayTokenA)==null?void 0:m.symbol," - ",(P=t==null?void 0:t.displayTokenB)==null?void 0:P.symbol]}),e.jsx(xe,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(c,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),(t==null?void 0:t.category)=="haedal"&&f&&e.jsx(He,{category:"Haedal"})]})]}),e.jsxs(V,{w:"100%",gap:"16px",mt:"4px",children:[e.jsx(X,{label:"TVL",value:e.jsx(V,{alignItems:"flex-end",children:e.jsx(c,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(X,{label:e.jsxs(d,{justify:"flex-end",gap:"2px",children:[e.jsx(c,{children:"APY"}),e.jsx(ce,{placement:"auto-start",tooltip:e.jsx(c,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(N,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(fe,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(X,{label:"Rewards",value:e.jsx(Te,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(X,{label:"Your Holdings",value:o?pe(j,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(V,{w:"100%",gap:"8px",children:[e.jsx(we,{isOpen:l,jumpVaultsDetail:()=>{x(t.vaultsId)},onExpand:r}),l&&e.jsx(Se,{rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:v,sharePoolRate:a})]})]})}function Ge({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:v,sharePoolRate:a,currentAccount:o,totalValue:j,jumpVaultsDetail:x,isShowPowered:f}){return console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItemPC.tsx:122 ~ apiInfo:",t),e.jsxs(be.Fragment,{children:[e.jsxs(M,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(A,{children:e.jsx(ze,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},isShowPowered:f,symbolFontSize:"15px"})}),e.jsx(A,{textAlign:"right",children:e.jsx(c,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),e.jsx(A,{textAlign:"right",w:"13%",children:e.jsx(fe,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category})}),e.jsx(A,{textAlign:"right",w:"13%",children:e.jsx(Te,{rewardList:t.vaultsRewards})}),e.jsx(A,{textAlign:"right",children:e.jsx(c,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:o?pe(j,2):"--"})}),e.jsx(A,{textAlign:"right",children:e.jsx(we,{isOpen:l,jumpVaultsDetail:()=>{x(t.vaultsId)}})})]}),!l&&e.jsx(M,{h:"16px"}),e.jsx(M,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(A,{colSpan:6,children:e.jsx(K,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(Se,{rewardPerA:s,rewardPerB:i,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:v,sharePoolRate:a})})})})]},t.vaultsId)}function _e(l){const r=me(),{apiInfo:s,isShowPowered:i}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:14 ~ VaultsListItem ~ apiInfo:",s);const{currentAccount:t}=O(),b=Be.useGetContractVaultInfo((s==null?void 0:s.category)=="haedal"),{fetchVaultInfoFromContract:g,fetchClmmPoolFromContract:v,lpTokenInfo:a,balanceInfo:o,sharePoolRate:j,holdCoinAmounts:x,totalValue:f,fetchVaultBalance:w}=b(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:26 ~ VaultsListItem ~ balanceInfo:",o),y.useEffect(()=>{g(s.vaultsId)},[s.vaultsId]),y.useEffect(()=>{v(s.poolAddress)},[s.poolAddress]),y.useEffect(()=>{t!=null&&t.address&&s.vaultsId&&(a!=null&&a.decimals)&&(s==null?void 0:s.category)=="haedal"&&w(t==null?void 0:t.address,s.vaultsId,a==null?void 0:a.decimals)},[t==null?void 0:t.address,s.vaultsId,a==null?void 0:a.decimals,s==null?void 0:s.category]);const[T,L]=y.useState(!1),D=q=>{r(`/vaults-detail/${q}/${s==null?void 0:s.category}`)},{rewardPerA:_,rewardPerB:m}=Re(o==null?void 0:o.balanceFormat,s),P=()=>{L(!T)},{isApp:$}=ee();return $?e.jsx(qe,{openExpend:T,onExpand:P,rewardPerA:_,rewardPerB:m,apiInfo:s,logo_url:a==null?void 0:a.logo_url,holdCoinAmounts:x,balanceDisplay:o==null?void 0:o.balanceDisplay,sharePoolRate:j,currentAccount:t,totalValue:f,jumpVaultsDetail:D,isShowPowered:i}):e.jsx(Ge,{openExpend:T,onExpand:P,rewardPerA:_,rewardPerB:m,apiInfo:s,logo_url:a==null?void 0:a.logo_url,holdCoinAmounts:x,balanceDisplay:o==null?void 0:o.balanceDisplay,sharePoolRate:j,currentAccount:t,totalValue:f,jumpVaultsDetail:D,isShowPowered:i})}function Qe({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:i,isShowPowered:t}){const{onWalletModal:b}=O();return!i&&!s&&l.length===0?e.jsx(I,{type:"nodata",text:"No vaults found",border:"none"}):i?e.jsx(I,{type:"nowallet",onboard:()=>b(!0),border:"none"}):s?e.jsx(Xe,{itemList:[1,2,3]}):e.jsx(V,{w:"100%",mt:"20px",children:l==null?void 0:l.map(g=>e.jsx(_e,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))})}function Xe(l){const{itemList:r}=l;return e.jsx(V,{w:"100%",mt:"20px",children:r.map(s=>e.jsxs(V,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(d,{gap:"0",children:[e.jsx(he,{size:"9"}),e.jsx(he,{size:"9"}),e.jsxs(d,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(B,{height:"4",width:"100px"}),e.jsx(B,{height:"4",width:"60px"})]})]}),e.jsx(V,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(i=>e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(B,{height:"4",width:"100px"}),e.jsx(B,{height:"4",width:"100px"})]},i))}),e.jsxs(V,{w:"100%",gap:"8px",children:[e.jsx(B,{height:"8",width:"100%"}),e.jsx(B,{height:"8",width:"100%"})]})]},s))})}function Ze({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:i,isShowPowered:t}){const{onWalletModal:b}=O();return e.jsxs(We,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(Ee,{children:e.jsxs(M,{children:[e.jsx(G,{children:"Vaults"}),e.jsx(G,{textAlign:"right",children:"TVL"}),e.jsx(G,{textAlign:"right",children:e.jsxs(d,{justify:"flex-end",gap:"2px",children:[e.jsx(c,{children:"APY"}),e.jsx(ce,{tooltip:e.jsx(c,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(N,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(G,{textAlign:"right",children:"Earnings"}),e.jsx(G,{textAlign:"right",children:"Your Holdings"}),e.jsx(G,{textAlign:"right",children:"Action"})]})}),e.jsxs(Ye,{children:[!i&&!s&&l.length===0&&e.jsx(M,{children:e.jsx(A,{colSpan:6,w:"100%",children:e.jsx(I,{type:"nodata",text:"No vaults found",border:"none"})})}),i&&e.jsx(M,{children:e.jsx(A,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(I,{type:"nowallet",onboard:()=>b(!0),border:"none"})})}),s&&e.jsx(Je,{itemList:[1,2,3]}),!s&&l.map(g=>e.jsx(_e,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))]})]})}function Je(l){const{itemList:r}=l;return r.map(s=>e.jsxs(be.Fragment,{children:[e.jsxs(M,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(A,{children:e.jsx(B,{w:"220px"})}),e.jsx(A,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(B,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(B,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(B,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(B,{})})}),e.jsx(A,{textAlign:"right",children:e.jsx(d,{justifyContent:"end",children:e.jsx(B,{})})})]}),e.jsx(M,{h:"16px"})]},s))}function Ke(l){const{fetchTokenPrices:r}=Ce(),{currentAccount:s,onWalletModal:i}=O(),{dataList:t,isAll:b,showSkeletonLoading:g,isShowPowered:v}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:13 ~ VaultsList ~ isShowPowered:",v),y.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:18 ~ useEffect ~ dataList:",t),t&&(t==null?void 0:t.length)==0)return;const o=[];t.forEach(j=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:35 ~ useEffect ~ data:",j),j&&(o.includes(j.tokenA.coin_type)||o.push(j.tokenA.coin_type),o.includes(j.tokenB.coin_type)||o.push(j.tokenB.coin_type))}),o.length>0&&r(o)},[t==null?void 0:t.length]);const{isApp:a}=ee();return a?e.jsx(Qe,{...l}):e.jsx(Ze,{...l})}function Ie(l){const{sortByList:r,currTab:s,tabList:i,handleChangeTab:t,currSortType:b,onSortByChange:g,sortRule:v,handleRefresh:a,handleChangeSortRule:o,selectCoinList:j,onClickSelectCoinList:x,onDeleteSelectCoinList:f,isYourHoldings:w,onClickIsYourHoldings:T,whiteTokenList:L,showSkeletonLoading:D}=l,{isApp:_}=ee(),{currentAccount:m}=O();return e.jsxs(V,{w:"100%",mt:{base:"20px",lg:"40px"},justify:"space-between",children:[e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(Ae,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"415px"},h:"46px",borderRadius:{base:"8px",lg:"12px"}},itemStyle:{w:"50%",fontSize:"16px"},tabList:i,currentTab:s.label,handleChangeTab:t}),!_&&(m==null?void 0:m.address)&&e.jsx(K,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(d,{h:"100%",justify:"space-between",children:[e.jsx(ge,{checked:w,onClick:T}),e.jsx(c,{color:w?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]}),e.jsxs(d,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsx(xe,{w:{base:"100%",lg:"292px"},sx:{"> button":{minW:"100% !important"}},children:e.jsx(Fe,{selectCoinList:j,onClickSelectCoinList:x,onDeleteSelectCoinList:f,whiteTokenList:L})}),e.jsxs(d,{children:[e.jsx(Oe,{sortText:"Sort by",xlinkHref:v=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{o(v==="asc"?"desc":"asc")},minW:_?"calc(100vw - 126px)":"120px",currentSort:b,sortByList:r,onSortByChange:g,wrapStyle:{borderRadius:{base:"8px",lg:"12px"}}}),e.jsx(Me,{handleRefresh:()=>{D||a()},borderRadius:{base:"8px",lg:"12px"}})]})]}),_&&e.jsxs(d,{w:"100%",justify:"space-between",children:[e.jsx(c,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),(m==null?void 0:m.address)&&e.jsx(K,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(d,{h:"100%",justify:"space-between",children:[e.jsx(ge,{checked:w,onClick:T}),e.jsx(c,{color:w?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]})]})}function et(l){const{isLoading:r,total_tvl:s}=l,{isApp:i}=ee();return e.jsx(V,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(V,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(d,{w:"100%",justify:"space-between",children:e.jsx(c,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(c,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease.Â ",i&&e.jsxs(d,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(c,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(N,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!i&&e.jsxs(d,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(c,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(N,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(c,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(B,{isLoaded:!!s,children:e.jsx(c,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:pe(s,2)})})]})})}function tt(){const{getVaultList:l,getVaultListFromCache:r}=De(),{vaultStatsObj:s,lpTokenInfo:i,setLpTokenInfo:t}=Pe(),{getBalanceInfoFromCache:b}=Ue(),{currentAccount:g}=O(),[v,a]=y.useState(!0),[o,j]=y.useState([]),[x,f]=y.useState([]),{getTokenInfo:w,fetchTokenInfo:T}=ve(),L=u=>{f(n=>[...n,u])},D=u=>{f(n=>n.filter(h=>(h==null?void 0:h.coin_type)!==(u==null?void 0:u.coin_type)))},[_,m]=y.useState([]),[P,$]=y.useState([]),[q,le]=y.useState({sortRule:"desc",sortType:"tvl"}),re=y.useMemo(()=>{let u=je(0);return Object.values(s).forEach(n=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:28 ~ Object.values ~ vaultStatItem:",n),u=u.add((n==null?void 0:n.vaultsTvl)||"0")}),u.toString()},[s]),oe=async(u,n="all",h=!1)=>{var k,H,Y;const S=r(u);m(Z(S,n,h));const p=await l(u);if((p==null?void 0:p.length)>0){if(!Ve(i)||Object.values(i).length!==p.length){const C={};for(let W=0;W<p.length;W++){const F=p[W],ie=(F==null?void 0:F.lpTokentype)||((H=(k=ae[F.clmmPoolAddress])==null?void 0:k.lpToken)==null?void 0:H.coin_type);typeof ie=="string"&&(C[ie]=F.category=="haedal"?await T(ie):(Y=ae[F.clmmPoolAddress])==null?void 0:Y.lpToken)}t(C)}const R=new Map(p.flatMap(C=>[C==null?void 0:C.displayTokenA,C==null?void 0:C.displayTokenB]).filter(Boolean).map(C=>{const W=E(C.coin_type),F=w(C.coin_type);return[W,{...F,coin_type:W}]}));j([...R.values()])}$(p),console.log("ðŸš€ ~ fetchVaultList ~ list:",p),p.length>0&&m(Z(p,n,h)),a(!1)},te=u=>{var p,k,H,Y;const n=(p=x[0])!=null&&p.coin_type?E((k=x[0])==null?void 0:k.coin_type):void 0,h=(H=x[1])!=null&&H.coin_type?E((Y=x[1])==null?void 0:Y.coin_type):void 0;return u==null?void 0:u.filter(R=>n&&h?E(R.displayTokenA.coin_type)==n&&E(R.displayTokenB.coin_type)==h||E(R.displayTokenA.coin_type)==h&&E(R.displayTokenB.coin_type)==n:n?E(R.displayTokenA.coin_type)==n||E(R.displayTokenB.coin_type)==n:R)},Z=(u,n="all",h=!1)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:142 ~ filterVaultList ~ filterVaultList:");let S=[],p=[];return(x==null?void 0:x.length)>0?p=te(u):p=u,n==="all"&&(S=p),n=="cetus"&&(S=p.filter(k=>k.category=="cetus")),n=="haedal"&&(S=p.filter(k=>k.category=="haedal")),h&&(g!=null&&g.address)?U(S):S},U=u=>u.filter(n=>{var p;const h=i[n.lpTokentype]||((p=ae[n.clmmPoolAddress])==null?void 0:p.lpToken),S=b(h);return!!(S&&je(S.balance).gt(0))});return{totalTvl:re,filterMyVaultList:U,fetchVaultList:oe,vaultList:_,queryOptions:q,setQueryOptions:le,allVaultList:P,getCurrentTabNum:(u,n=!1)=>{let h;const S=te(P);return u=="all"?h=S:u=="cetus"?h=S.filter(p=>p.category=="cetus"):h=S.filter(p=>p.category=="haedal"),n&&(g!=null&&g.address)&&h&&h.length?String(U(h).length):String(h&&h.length||"")},selectCoinList:x,onClickSelectCoinList:L,onDeleteSelectCoinList:D,whiteTokenList:o,showSkeletonLoading:v,setShowSkeletonLoading:a,filterVaultList:Z,setVaultList:m,sortVaultList:(u,n)=>{const{sortRule:h,sortType:S}=u;return n==null?void 0:n.sort((k,H)=>{var Y,R,C,W;return S==="apr"?h==="desc"?((Y=H.vaultsTotalApy)==null?void 0:Y.replace("%",""))-((R=k.vaultsTotalApy)==null?void 0:R.replace("%","")):((C=k.vaultsTotalApy)==null?void 0:C.replace("%",""))-((W=H.vaultsTotalApy)==null?void 0:W.replace("%","")):h==="desc"?H.vaultsTvl-k.vaultsTvl:k.vaultsTvl-H.vaultsTvl})}}}function Bt(){const[l,r]=y.useState(!1),{fetchAccountBalance:s}=Ne(),{currentAccount:i}=O(),[t,b]=y.useState({label:"All Vaults",value:"all"}),{totalTvl:g,vaultList:v,fetchVaultList:a,queryOptions:o,setQueryOptions:j,allVaultList:x,getCurrentTabNum:f,selectCoinList:w,onClickSelectCoinList:T,onDeleteSelectCoinList:L,whiteTokenList:D,showSkeletonLoading:_,setShowSkeletonLoading:m,filterVaultList:P,setVaultList:$,sortVaultList:q}=tt(),le=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[re,oe]=y.useState({label:"TVL",value:"TVL"}),te=y.useMemo(()=>[{label:"All Vaults",value:"all",num:f("all",l)},{label:"Cetus",value:"cetus",num:f("cetus",l)},{label:"Haedal",value:"haedal",num:f("haedal",l)}],[x,l,w]),[Z,U]=y.useState(6e4);return Le({interval:Z,callback:()=>{a(o,t.value,l)}}),y.useEffect(()=>{x&&x.length>0&&$(P(x,t.value,l))},[l,t.value,x]),y.useEffect(()=>{a(o,t.value)},[]),y.useEffect(()=>{i!=null&&i.address||r(!1)},[i==null?void 0:i.address]),y.useEffect(()=>{w&&x&&x.length>0&&$(P(x,t.value,l))},[w,t.value,l]),e.jsxs(V,{gap:"0px",w:"100%",children:[e.jsx(et,{isLoading:_,total_tvl:g}),e.jsx(xe,{h:{base:"260px",lg:"240px"}}),e.jsx(Ie,{sortByList:le,currTab:t,tabList:te,whiteTokenList:D,selectCoinList:w,onClickSelectCoinList:T,onDeleteSelectCoinList:L,showSkeletonLoading:_,handleChangeTab:z=>{t.value!==z.value&&(b(z),m(!0),setTimeout(()=>{m(!1)},200))},currSortType:re,onSortByChange:z=>{o.sortType=z.value,j({...o}),oe(z),q({...o},v),U(6e4)},sortRule:o.sortRule,handleChangeSortRule:z=>{o.sortRule=z,j({...o}),q({...o},v),U(6e4)},handleRefresh:()=>{m(!0),s(),U(6e4),a(o,t.value,l)},isYourHoldings:l,onClickIsYourHoldings:()=>{r(!l)}}),e.jsx(Ke,{isShowPowered:t.label!=="Haedal",dataList:v,showSkeletonLoading:_})]})}export{Bt as default};
