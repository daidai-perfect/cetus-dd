import{r as m,d as T,j as t,aB as Pe,V as S,T as y,S as Ke,H as v,bE as Ge,X as k,a5 as qe,B as W,am as zt,C as Re,k as Me,b8 as F,bF as kt,a3 as Ot,b as oe,U as $,bw as Bt,aC as I,aL as Z,l as Le,aR as Ye,c as Lt,I as Ft,u as Ve,b7 as Ie,bG as et,i as ze,ac as Ht,ad as Et,ae as Mt,af as $t,ag as Wt,ah as Nt,ai as Ut,$ as ut,Z as $e,ba as dt,a0 as tt,aq as Xe,s as de,bm as Kt,e as Gt,aA as qt,aU as Zt,a as Yt,b2 as Xt}from"./index-BMYxc9Od.js";import{S as Jt}from"./Slippage-BHfkGKpx.js";import{g as Qt,v as pe,h as ht,i as mt,V as ot,C as nt,j as Vt,c as It,u as er,e as tr}from"./VaultsAprBlock-CyoX36Fk.js";import{N as gt}from"./NoData-CQ4OWoZo.js";import{R as rr}from"./RefreshButton-BJxOoBp4.js";import{u as sr}from"./useAccountBalance-7Ju_sYta.js";import{H as ee}from"./HTextLabelBox-DAS3uNTR.js";import{V as te}from"./VTextLabelBox-C4n_Ly5H.js";import{S as ne,A as it}from"./SingleTokenInfo-YXdPNl3G.js";import{u as or,Z as nr}from"./useDisplayTickPrice-GFwlUd_W.js";import{i as ir}from"./icon_currentprice@2x-DeObnx8l.js";import{a as ar,p as rt,b as lr,c as cr}from"./EmptyTooltip-RkHwJCCH.js";import{X as st,Y as Fe,R as yt}from"./YAxis-CElZgsg8.js";import{L as Ce,a as pr}from"./LineChart-hxwX9394.js";import{S as at,a as xr,b as Ze,L as _e,c as ur,A as dr,i as Oe,d as hr,e as ft,E as mr,h as Be,j as gr,k as yr,C as fr,l as ue,m as br,G as vr,n as jr,o as lt,u as Sr,g as Ar,B as bt,f as wr,T as vt,p as jt}from"./generateCategoricalChart-B6wlJUW7.js";import{V as Pr,l as _r,m as Cr,n as Tr}from"./api-data-utils-Ddy-a3WS.js";import{A as Dr,T as Rr,a as zr}from"./TvlChart-ChuqNDzs.js";import{T as kr}from"./TradeConfirmAmountInfo-BUjZ8T7K.js";import{V as St}from"./VaultsAddResult-JyDEpuiC.js";import{u as Or}from"./global-VD-aBjBV.js";import{T as At}from"./TradeInputGroup-DZEf1SXK.js";import{P as wt}from"./progress-qOaxYcSf.js";import{T as ct}from"./TooltipIcon-ByUA4JrQ.js";import{P as Br}from"./PoweredByHaedal-B3ifw1QO.js";import{P as Lr}from"./RemoveBlock-CzkZMNE2.js";import"./index-CJXWYa_3.js";import"./useTokenBalance-Cj_lT5nh.js";import"./useFavoritePool-CFeoAJA1.js";import"./useGetPoolList-DKPSLTZh.js";import"./useToken-Bvs0Ung1.js";import"./msafe-oYBkW7LJ.js";import"./useTransaction-CfK3pLEn.js";import"./useFindBestRouting-C22H3oMB.js";import"./AddressUnderline-Bhd4IXQA.js";import"./_getAllKeysIn-DYEwfs_x.js";import"./throttle-C4s_nYWa.js";import"./debounce-0HI4Y71Y.js";import"./linear-DYpwdEgO.js";import"./index-BhzVy6K4.js";import"./progress.utils-CSV6fYbb.js";import"./LockInput-DRQ1QGli.js";import"./usePositionList-CqhidtZG.js";import"./useCurrentPos-BnGJCwf6.js";import"./usePosAdd-BVUrQu-D.js";import"./useInsufficientBalanceToast-CfqXK2Kq.js";import"./index-Dbc2tu1I.js";import"./ExpendItem-BTLpZv6m.js";import"./PriceRange-BiZddocv.js";import"./PositionStatus-BWThaEyG.js";import"./RangeValue-Cv8ui1Wd.js";import"./RangeAlerts-0o1wc_Y3.js";import"./useNotifiSubscription-D71-OFDa.js";import"./useXCetusHelper-D802DwcO.js";function Fr(o){const{displayMaxPrice:r,displayMinPrice:s,displayPrice:e,isLoading:n}=o;console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:16 ~ PositionPriceRange ~ props:",o);const[i,l]=m.useState(0),u=m.useRef(null),h=m.useMemo(()=>!(s&&r&&e),[r,s,e]);m.useEffect(()=>{const x=()=>{u.current&&l(u.current.offsetWidth)};x();const d=new ResizeObserver(x);return u.current&&d.observe(u.current),()=>{u.current&&d.unobserve(u.current)}},[]);const p=m.useMemo(()=>{if(r==="âˆž")return"center";if(e&&s&&r){if(T(e).greaterThanOrEqualTo(r))return"end";if(T(s).greaterThanOrEqualTo(e))return"start"}return"center"},[e,s,r]),c=m.useMemo(()=>{if(r==="âˆž")return"0px";if(e&&s&&r&&T(e).lessThanOrEqualTo(r)&&T(e).greaterThanOrEqualTo(s)){const x=T(r).add(s).div(2),d=T(e).gt(x);let a=T(0);if(d){const f=T(x).sub(s);a=T(e).sub(x).div(f)}else{const f=T(r).sub(x);a=T(e).sub(s).div(f)}const g=T(123).div(2);return d?`${T(i).mul(a).sub(g).toFixed(0)}px`:`-${T(i).mul(T(1).sub(a)).sub(g).toFixed(0)}px`}return"0px"},[e,s,r,i]);return t.jsx(t.Fragment,{children:h?t.jsx(Pe,{h:"202px",width:"100%",align:"center",position:"relative",children:t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Me,{})})}):t.jsxs(Pe,{w:"90%",direction:"column",alignItems:p,children:[t.jsxs(S,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",ml:c,children:[t.jsxs(S,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[t.jsx(y,{fontSize:"xs",h:"14px",children:"Current Price"}),n?t.jsx(Pe,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(v,{children:t.jsx(y,{fontSize:"16px",color:"text_highlight",children:t.jsx(Ge,{value:k(e,6,!0,qe.ROUND_DOWN)})})})]}),t.jsxs(S,{zIndex:"100",children:[t.jsx(W,{w:"2px",h:"98px",bg:"#76C8FF"}),t.jsx(zt,{src:ir,w:"30px",h:"30px",mt:"-18px"})]})]}),t.jsx(Re,{zIndex:"99",mt:"-48px",ref:u,pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"100%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:t.jsx(Re,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),t.jsxs(v,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"90%"},children:[t.jsxs(S,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(y,{fontSize:"12px",children:"Min Price"}),n?t.jsx(Pe,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(y,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(Ge,{value:k(s,6,!0,qe.ROUND_DOWN)})})]}),t.jsxs(S,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[t.jsx(y,{fontSize:"12px",children:"Max Price"}),n?t.jsx(Pe,{h:"18px",align:"center",children:t.jsx(Ke,{})}):t.jsx(y,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:t.jsx(Ge,{value:k(r,6,!0,qe.ROUND_DOWN)})})]})]})]})})}function he(o){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},he(o)}function Hr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function Er(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Ct(e.key),e)}}function Mr(o,r,s){return r&&Er(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}function $r(o,r,s){return r=He(r),Wr(o,Pt()?Reflect.construct(r,s||[],He(o).constructor):r.apply(o,s))}function Wr(o,r){if(r&&(he(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(o)}function Nr(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Pt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pt=function(){return!!o})()}function He(o){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},He(o)}function Ur(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&Je(o,r)}function Je(o,r){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Je(o,r)}function _t(o,r,s){return r=Ct(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Ct(o){var r=Kr(o,"string");return he(r)=="symbol"?r:r+""}function Kr(o,r){if(he(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(he(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var We=function(o){function r(){return Hr(this,r),$r(this,r,arguments)}return Ur(r,o),Mr(r,[{key:"render",value:function(){return null}}])}(F.Component);_t(We,"displayName","ZAxis");_t(We,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Gr=["option","isActive"];function Te(){return Te=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},Te.apply(this,arguments)}function qr(o,r){if(o==null)return{};var s=Zr(o,r),e,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(n=0;n<i.length;n++)e=i[n],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(s[e]=o[e])}return s}function Zr(o,r){if(o==null)return{};var s={};for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)){if(r.indexOf(e)>=0)continue;s[e]=o[e]}return s}function Yr(o){var r=o.option,s=o.isActive,e=qr(o,Gr);return typeof r=="string"?F.createElement(at,Te({option:F.createElement(xr,Te({type:r},e)),isActive:s,shapeType:"symbols"},e)):F.createElement(at,Te({option:r,isActive:s,shapeType:"symbols"},e))}function me(o){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},me(o)}function De(){return De=Object.assign?Object.assign.bind():function(o){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(o[e]=s[e])}return o},De.apply(this,arguments)}function pt(o,r){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);r&&(e=e.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),s.push.apply(s,e)}return s}function q(o){for(var r=1;r<arguments.length;r++){var s=arguments[r]!=null?arguments[r]:{};r%2?pt(Object(s),!0).forEach(function(e){ie(o,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(s,e))})}return o}function Xr(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}function xt(o,r){for(var s=0;s<r.length;s++){var e=r[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Dt(e.key),e)}}function Jr(o,r,s){return r&&xt(o.prototype,r),s&&xt(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function Qr(o,r,s){return r=Ee(r),Vr(o,Tt()?Reflect.construct(r,s||[],Ee(o).constructor):r.apply(o,s))}function Vr(o,r){if(r&&(me(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(o)}function Ir(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Tt(){try{var o=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!o})()}function Ee(o){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},Ee(o)}function es(o,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(r&&r.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),r&&Qe(o,r)}function Qe(o,r){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},Qe(o,r)}function ie(o,r,s){return r=Dt(r),r in o?Object.defineProperty(o,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[r]=s,o}function Dt(o){var r=ts(o,"string");return me(r)=="symbol"?r:r+""}function ts(o,r){if(me(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var e=s.call(o,r);if(me(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(o)}var Ne=function(o){function r(){var s;Xr(this,r);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return s=Qr(this,r,[].concat(n)),ie(s,"state",{isAnimationFinished:!1}),ie(s,"handleAnimationEnd",function(){s.setState({isAnimationFinished:!0})}),ie(s,"handleAnimationStart",function(){s.setState({isAnimationFinished:!1})}),ie(s,"id",Sr("recharts-scatter-")),s}return es(r,o),Jr(r,[{key:"renderSymbolsStatically",value:function(e){var n=this,i=this.props,l=i.shape,u=i.activeShape,h=i.activeIndex,p=Ze(this.props,!1);return e.map(function(c,x){var d=h===x,a=d?u:l,g=q(q({},p),c);return F.createElement(_e,De({className:"recharts-scatter-symbol",key:"symbol-".concat(c==null?void 0:c.cx,"-").concat(c==null?void 0:c.cy,"-").concat(c==null?void 0:c.size,"-").concat(x)},ur(n.props,c,x),{role:"img"}),F.createElement(Yr,De({option:a,isActive:d,key:"symbol-".concat(x)},g)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,n=this.props,i=n.points,l=n.isAnimationActive,u=n.animationBegin,h=n.animationDuration,p=n.animationEasing,c=n.animationId,x=this.state.prevPoints;return F.createElement(dr,{begin:u,duration:h,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(d){var a=d.t,g=i.map(function(f,A){var b=x&&x[A];if(b){var w=Oe(b.cx,f.cx),j=Oe(b.cy,f.cy),_=Oe(b.size,f.size);return q(q({},f),{},{cx:w(a),cy:j(a),size:_(a)})}var P=Oe(0,f.size);return q(q({},f),{},{size:P(a)})});return F.createElement(_e,null,e.renderSymbolsStatically(g))})}},{key:"renderSymbols",value:function(){var e=this.props,n=e.points,i=e.isAnimationActive,l=this.state.prevPoints;return i&&n&&n.length&&(!l||!hr(l,n))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(n)}},{key:"renderErrorBar",value:function(){var e=this.props.isAnimationActive;if(e&&!this.state.isAnimationFinished)return null;var n=this.props,i=n.points,l=n.xAxis,u=n.yAxis,h=n.children,p=ft(h,mr);return p?p.map(function(c,x){var d=c.props,a=d.direction,g=d.dataKey;return F.cloneElement(c,{key:"".concat(a,"-").concat(g,"-").concat(i[x]),data:i,xAxis:l,yAxis:u,layout:a==="x"?"vertical":"horizontal",dataPointFormatter:function(A,b){return{x:A.cx,y:A.cy,value:a==="x"?+A.node.x:+A.node.y,errorVal:Be(A,b)}}})}):null}},{key:"renderLine",value:function(){var e=this.props,n=e.points,i=e.line,l=e.lineType,u=e.lineJointType,h=Ze(this.props,!1),p=Ze(i,!1),c,x;if(l==="joint")c=n.map(function(j){return{x:j.cx,y:j.cy}});else if(l==="fitting"){var d=gr(n),a=d.xmin,g=d.xmax,f=d.a,A=d.b,b=function(_){return f*_+A};c=[{x:a,y:b(a)},{x:g,y:b(g)}]}var w=q(q(q({},h),{},{fill:"none",stroke:h&&h.fill},p),{},{points:c});return F.isValidElement(i)?x=F.cloneElement(i,w):yr(i)?x=i(w):x=F.createElement(fr,De({},w,{type:u})),F.createElement(_e,{className:"recharts-scatter-line",key:"recharts-scatter-line"},x)}},{key:"render",value:function(){var e=this.props,n=e.hide,i=e.points,l=e.line,u=e.className,h=e.xAxis,p=e.yAxis,c=e.left,x=e.top,d=e.width,a=e.height,g=e.id,f=e.isAnimationActive;if(n||!i||!i.length)return null;var A=this.state.isAnimationFinished,b=kt("recharts-scatter",u),w=h&&h.allowDataOverflow,j=p&&p.allowDataOverflow,_=w||j,P=ue(g)?this.id:g;return F.createElement(_e,{className:b,clipPath:_?"url(#clipPath-".concat(P,")"):null},w||j?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(P)},F.createElement("rect",{x:w?c:c-d/2,y:j?x:x-a/2,width:w?d:d*2,height:j?a:a*2}))):null,l&&this.renderLine(),this.renderErrorBar(),F.createElement(_e,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!f||A)&&br.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(e,n){return e.animationId!==n.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:n.curPoints}:e.points!==n.curPoints?{curPoints:e.points}:null}}])}(m.PureComponent);ie(Ne,"displayName","Scatter");ie(Ne,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!vr.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});ie(Ne,"getComposedData",function(o){var r=o.xAxis,s=o.yAxis,e=o.zAxis,n=o.item,i=o.displayedData,l=o.xAxisTicks,u=o.yAxisTicks,h=o.offset,p=n.props.tooltipType,c=ft(n.props.children,jr),x=ue(r.dataKey)?n.props.dataKey:r.dataKey,d=ue(s.dataKey)?n.props.dataKey:s.dataKey,a=e&&e.dataKey,g=e?e.range:We.defaultProps.range,f=g&&g[0],A=r.scale.bandwidth?r.scale.bandwidth():0,b=s.scale.bandwidth?s.scale.bandwidth():0,w=i.map(function(j,_){var P=Be(j,x),O=Be(j,d),z=!ue(a)&&Be(j,a)||"-",Y=[{name:ue(r.dataKey)?n.props.name:r.name||r.dataKey,unit:r.unit||"",value:P,payload:j,dataKey:x,type:p},{name:ue(s.dataKey)?n.props.name:s.name||s.dataKey,unit:s.unit||"",value:O,payload:j,dataKey:d,type:p}];z!=="-"&&Y.push({name:e.name||e.dataKey,unit:e.unit||"",value:z,payload:j,dataKey:a,type:p});var H=lt({axis:r,ticks:l,bandSize:A,entry:j,index:_,dataKey:x}),N=lt({axis:s,ticks:u,bandSize:b,entry:j,index:_,dataKey:d}),U=z!=="-"?e.scale(z):f,D=Math.sqrt(Math.max(U,0)/Math.PI);return q(q({},j),{},{cx:H,cy:N,x:H-D,y:N-D,xAxis:r,yAxis:s,zAxis:e,width:2*D,height:2*D,size:U,node:{x:P,y:O,z},tooltipPayload:Y,tooltipPosition:{x:H,y:N},payload:j},c&&c[_]&&c[_].props)});return q({points:w},h)});var rs=Ar({chartName:"ComposedChart",GraphicalChild:[Ce,Dr,bt,Ne],axisComponents:[{axisType:"xAxis",AxisComp:st},{axisType:"yAxis",AxisComp:Fe},{axisType:"zAxis",AxisComp:We}],formatAxisMap:wr});function ss(o){const{holdCoinAmounts:r,lpTokenInfo:s,displayTokenA:e,displayTokenB:n,sharePoolRate:i,balanceInfo:l,isReverse:u,holdCoinAValue:h,holdCoinBValue:p,rewardPerA:c,rewardPerB:x}=o,d=m.useMemo(()=>u?p:h,[u,h,p]),a=m.useMemo(()=>u?h:p,[u,h,p]);Ot();const g=m.useMemo(()=>T(d).add(T(a)),[d,a,e,n]);console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayValueA:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayTokenA:",e);const{isApp:f}=oe();return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:t.jsxs(S,{w:"100%",gap:{base:"24px",lg:"8px"},children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(v,{children:t.jsx(y,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),t.jsxs(v,{gap:"8px",children:[t.jsx(y,{whiteSpace:"nowrap",children:"Your share of pool"}),t.jsxs(y,{color:"text_highlight",fontWeight:"500",children:[Bt(i,2,6),"%"]})]})]}),f?t.jsxs(S,{w:"100%",gap:"16px",children:[t.jsx(ee,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ne,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsxs(y,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]})]}),subValue:t.jsx(y,{children:l!=null&&l.balanceFormat&&g?I(g,2):"-"}),subValueStyle:{fontSize:"13px"}}),t.jsx(ee,{label:Z(e==null?void 0:e.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ne,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(y,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(r==null?void 0:r.displayCoinA,6)} ${Z(e==null?void 0:e.symbol,10)}`})]}),subValue:I(d,2),subValueStyle:{fontSize:"13px"}}),t.jsx(ee,{label:Z(n==null?void 0:n.symbol,10),labelStyle:{fontSize:"13px"},value:t.jsxs(v,{children:[t.jsx(ne,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),t.jsx(y,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(r==null?void 0:r.displayCoinB,6)} ${Z(n==null?void 0:n.symbol,10)}`})]}),subValue:I(a,2),subValueStyle:{fontSize:"13px"}})]}):t.jsxs(t.Fragment,{children:[t.jsxs(Le,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[t.jsx(y,{children:"LP Token Balance"}),t.jsxs(y,{color:"text_caption",ml:"4px",fontWeight:"500",children:[l!=null&&l.balanceFormat?k(l==null?void 0:l.balanceFormat,9):"-"," LP"]}),t.jsx(y,{children:l!=null&&l.balanceFormat?I(g,2):"-"})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[t.jsxs(S,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[t.jsxs(v,{children:[t.jsx(ne,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),t.jsx(y,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Z(e==null?void 0:e.symbol,10)})]}),t.jsx(te,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${k(r==null?void 0:r.displayCoinA,6)} ${Z(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:I(d,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsxs(S,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[t.jsxs(v,{children:[t.jsx(y,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:Z(n==null?void 0:n.symbol,10)}),t.jsx(ne,{token:n,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),t.jsx(te,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:`${k(r==null?void 0:r.displayCoinB,6)} ${Z(n==null?void 0:n.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:I(a,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),t.jsx($,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:t.jsxs(S,{justify:"center",gap:"4px",children:[t.jsx(ne,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),t.jsx(y,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function os(o){const{price:r,changeSide:s}=o;return{displayPrice:m.useMemo(()=>{if(r)return s?k(Ye(1).div(r).toString(),10,!0).toString():r},[r,s])}}function ns(o){const[r,s]=m.useState(!1),{currentPrice:e,minPrice:n,maxPrice:i,displayTokenA:l,displayTokenB:u,isLoading:h,isReverse:p}=o,{displayPrice:c}=os({price:e,changeSide:p?!r:r}),{displayMaxPrice:x,displayMinPrice:d}=or({minPrice:n,maxPrice:i,changeSide:r});m.useEffect(()=>{s(p)},[p]);const a=m.useMemo(()=>r?u:l,[l,u,r]),g=m.useMemo(()=>(console.log("ðŸš€ ~ logoUrl ~ baseCoin?.logo_url:",a,a==null?void 0:a.logo_url),a!=null&&a.logo_url?a==null?void 0:a.logo_url:""),[a==null?void 0:a.logo_url]);return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(S,{w:"100%",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",mb:"6px",children:[t.jsx(y,{fontSize:"16px",color:"text_caption",children:"Position Range"}),t.jsxs(v,{gap:"0px",children:[g&&t.jsx(Lt,{imageUrl:g,imageStyle:{w:"20px",h:"20px"}}),t.jsxs(y,{color:"text_caption",children:[" ",a==null?void 0:a.symbol]}),t.jsxs(v,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>s(!r),children:[t.jsx(y,{fontSize:"12px",children:" Base coin"}),t.jsx(Ft,{xlinkHref:"#icon-icon_swap1"})]})]})]}),t.jsx(Fr,{displayPrice:c,displayMaxPrice:x,displayMinPrice:d})]})})}function is({payload:o,label:r}){return o&&o.length&&t.jsxs(S,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[t.jsx(y,{fontSize:"12px",children:o[0].payload.tooltipTime}),t.jsxs(v,{textAlign:"left",children:[t.jsx(y,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),t.jsx(y,{color:"#68FFD8",fontSize:"12px",children:k(o[0].payload.real,6)})]}),t.jsxs(v,{children:[t.jsx(y,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),t.jsxs(y,{color:"#6FBCF0",fontSize:"12px",children:[k(o[0].payload.lower,6),"-",k(o[0].payload.upper,6)]})]})]})}function as({data:o=[],dateType:r,isTabLoading:s}){const e=m.useMemo(()=>o,[o]),[n,i]=m.useState({lower:!1,upper:!1,real:!1}),l=m.useMemo(()=>{if(e.length){const p=Math.min(...e.map(g=>g.lower)),c=Math.max(...e.map(g=>g.upper)),x=T(c).mul(1.1),d=T(p).mul(.9),a=x.sub(d).div(4);return Array.from({length:5},(g,f)=>d.add(a.mul(f)).toNumber())}return[]},[e]),u=(p,c)=>{const x=new Date(c*1e3),d=x.getUTCHours(),a=x.getUTCMinutes(),g=x.getUTCDate(),f=x.getUTCMonth()+1;if(p<24||r==="24H"){const A=d>=12?"PM":"AM",b=d%12||12;return`${String(b).padStart(2,"0")}:${String(a).padStart(2,"0")} ${A}`}return`${f}/${g}`},{isApp:h}=oe();return t.jsx(yt,{width:"100%",height:"100%",children:t.jsxs(pr,{data:e,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(st,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:p=>s?"":u(e.length,p),minTickGap:(e==null?void 0:e.length)>8?36:void 0,interval:(e==null?void 0:e.length)<=8?0:void 0}),t.jsx(Fe,{fontSize:"12px",ticks:l,domain:[l[0],l[l.length-1]],axisLine:!1,tickLine:!1,tickFormatter:p=>k(p,4),tick:t.jsx(ar,{})}),t.jsx(vt,{content:t.jsx(is,{})}),t.jsx(jt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:h?-8:-41,right:h?4:100,fontSize:12},formatter:p=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[p]||p}),t.jsx(Ce,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:n.real,dot:!1,isAnimationActive:!1}),t.jsx(Ce,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:n.lower,isAnimationActive:!1}),t.jsx(Ce,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:n.upper,isAnimationActive:!1})]})})}function ls(){const{fetchByApi:o}=Ve();return{getPriceRangeData:async s=>{try{const e=rt(s,Ie),n=await o(Pr,"GET",e);return n!=null&&n.list?n.list.map(i=>{const l=i.Timestamp*1e3,u=new Date(l);return{lower:i.value.lower,upper:i.value.upper,real:i.value.real,date:i.Timestamp,xAxis:_r(u.toISOString().slice(0,10)),tooltipTime:et(l),hour:u.getHours()}}):[]}catch(e){return console.error("ðŸš€ ~ useGetPriceRangeData ~ getPriceRangeData Error:",e),[]}}}}function cs({isRefresh:o,vaultsId:r,isReverse:s}){const[e,n]=m.useState(!1),{getPriceRangeData:i}=ls(),[l,u]=m.useState(),h=[{label:"24H"},{label:"1W"}],[p,c]=m.useState("1W"),[x,d]=m.useState(!1),a=async f=>{const A=Date.now(),w=String(Math.floor(A/1e3-86400));try{n(!0);const _=(await i({vaultID:r,dateType:f=="24H"?"min":"hour",beginTimestamp:f=="24H"?w:"",endTimestamp:T(new Date().getTime()).toFixed(0)})).map(P=>{const O=s?T(1).div(T(P.upper)).toString():P.lower,z=s?T(1).div(T(P.lower)).toString():P.upper,Y=s?T(1).div(P.real).toString():P.real;return{...P,lower:O,upper:z,real:Y}});u(_),d(!1),n(!1)}catch(j){n(!1),d(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",j)}};m.useEffect(()=>{r&&a(p)},[r,p]),m.useEffect(()=>{o&&a(p)},[o]);const{isApp:g}=oe();return t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:g?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsxs(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[t.jsx(y,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),t.jsx(ze,{type:"outlineTab",tabList:h,currentTab:p,handleChangeTab:f=>{d(!0),c(f.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Me,{})}),t.jsx(as,{data:l,dateType:p,isTabLoading:x})]})})]})}function ps(){const{fetchByApi:o}=Ve(),r=async e=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",e);const n={...e};n.dateType=e.type=="day"||e.type=="week"?"hour":"day",delete n.type;try{const i=rt(n,Ie),l=await o(Cr,"GET",i);return l!=null&&l.list?l==null?void 0:l.list.map((u,h)=>{var a;const p=u.Timestamp*1e3,c=new Date(p),x=Number(c.toISOString().slice(5,7)),d=s((a=l==null?void 0:l.list)==null?void 0:a.length,c,e==null?void 0:e.type,h);return{num:+u.value,date:u.Timestamp,xAxis:d,tooltipTime:et(p)}}):[]}catch(i){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",i),[]}},s=(e,n,i="D",l)=>{const u=i=="D"||i=="day"?"D":i=="W"||i=="week"?"W":"M";console.log("ðŸš€ ~ getXData ~ type:",i);const h=n,p=h.getUTCHours();let c=h.getUTCHours();const x=h.getUTCMinutes(),d=h.getUTCDate(),a=h.getUTCMonth()+1,g=c>=12?"PM":"AM";if(c=c%12||12,u=="D")return`${String(c).padStart(2,"0")}:${String(x).padStart(2,"0")} ${g}`;if(u=="M")return`${a}/${d}`;if(console.log("ðŸš€ ~ getXData ~ noShowHours:",p),e<24){const f=Math.floor(e/2);if(console.log("ðŸš€ ~ getXData ~ step:",e,l,l%f===0,f),l%f===0)return`${a}/${d}`}return e>=24&&e<120&&(p===0||p===12)?`${a}/${d}`:e>=120&&p===0&&x===0?`${a}/${d}`:""};return{getVaultHistogram:r}}function xs({isRefresh:o,vaultsId:r}){console.log("ðŸš€ðŸš€ðŸš€ ~ TvlChartPageBlock.tsx:11 ~ TvlChartPageBlock ~ isRefresh:",o);const s=[{label:"24H"},{label:"1W"},{label:"1M"}],[e,n]=m.useState(!0),[i,l]=m.useState("24H"),{getVaultHistogram:u}=ps(),[h,p]=m.useState([]),[c,x]=m.useState(),[d,a]=m.useState(),g=async()=>{var O,z;n(!0);const b=Date.now(),w=86400,j=i=="24H"?1*w:i=="1W"?7*w:30*w,_=j?String(Math.floor(b/1e3-j)):0,P=await u({type:i=="24H"?"day":i=="1W"?"week":"month",vaultID:r,beginTimestamp:_,endTimestamp:String(Math.floor(b/1e3))});a((O=P[P.length-1])==null?void 0:O.num),x((z=P[P.length-1])==null?void 0:z.num),console.log("ðŸš€ ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",P),p(P),n(!1)},f=b=>{console.log("ðŸš€ ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",b),x(b?b.num:d)};m.useEffect(()=>{r&&g()},[i,r]),m.useEffect(()=>{o&&g()},[o]);const{isApp:A}=oe();return t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:A?"12px":"20px",children:[t.jsxs(v,{justify:"space-between",children:[c?t.jsxs(S,{align:"flex-start",gap:"4px",children:[t.jsx(y,{fontWeight:"500",fontSize:"12px",children:"TVL"}),t.jsx(y,{fontSize:"16px",color:"text_caption",mt:"8px",children:I(c,2)})]}):t.jsx(S,{align:"flex-start",gap:"4px"}),t.jsx(ze,{type:"outlineTab",tabList:s,currentTab:i,handleChangeTab:b=>l(b.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[e&&t.jsx(W,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Me,{})}),h.length>0&&t.jsx(Rr,{data:h,onChangeValue:f,isShowYAxis:!0,toolTipsType:"tvl"}),!e&&h.length===0&&t.jsx(gt,{type:"nodata"})]})})]})}function us({data:o=[],dateType:r,haveMining:s=!1}){const[e,n]=m.useState({apy:!1,lp_fee:!1}),i=m.useMemo(()=>[{value:s?"Cumulative Fees & Rewards":"Cumulative Fees",type:"line",id:"lp_fee",color:"#07EBAD"},{value:"APY",type:"line",id:"apy",color:"#75C8FF"}],[s]),l=m.useMemo(()=>{if(o.length){const p=Math.min(...o.map(g=>g.apy)),c=Math.max(...o.map(g=>g.apy)),x=T(c).mul(1.1),d=T(p).mul(.9),a=x.sub(d).div(4);return Array.from({length:5},(g,f)=>d.add(a.mul(f)).toNumber())}return[]},[o]),u=(p,c)=>{const x=new Date(c*1e3),d=x.getUTCHours(),a=x.getUTCMinutes(),g=x.getUTCDate(),f=x.getUTCMonth()+1;if(p<24||r==="24H"){const A=d>=12?"PM":"AM",b=d%12||12;return`${String(b).padStart(2,"0")}:${String(a).padStart(2,"0")} ${A}`}return`${f}/${g}`},{isApp:h}=oe();return t.jsx(yt,{width:"100%",height:"100%",children:t.jsxs(rs,{data:o,margin:{top:0,left:10,right:28,bottom:5},children:[t.jsx(st,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:p=>u(o.length,p),minTickGap:(o==null?void 0:o.length)>8?36:void 0,interval:(o==null?void 0:o.length)<=8?0:void 0}),t.jsx(Fe,{yAxisId:"bar",xAxisId:"x",fontSize:"12px",orientation:"left",tickLine:!1,ticks:l,domain:[l[0],l[l.length-1]],tickFormatter:p=>(console.log("ðŸš€ ~ ApyAndFeesChart 323~ value:",p),k(p,2)),tick:t.jsx(lr,{})}),t.jsx(Fe,{yAxisId:"line",orientation:"right",fontSize:"12px",tickLine:!1,tick:t.jsx(cr,{isRight:!0})}),t.jsx(vt,{content:t.jsx(zr,{haveMining:s})}),t.jsx(jt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:h?-8:-32,right:h?4:0,fontSize:12},payload:i}),t.jsx(bt,{yAxisId:"bar",barSize:1,dataKey:"apy",fill:"#75C8FF",isAnimationActive:!1,hide:e.apy}),t.jsx(Ce,{yAxisId:"line",type:"monotone",dataKey:"lp_fee",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},dot:!1,isAnimationActive:!1,hide:e.lp_fee})]})})}function ds(){const{fetchByApi:o}=Ve();return{getVaultApyAndFeesHistogram:async s=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",s);const e={...s};e.dateType="hour";try{const n=rt(e,Ie),i=await o(Tr,"GET",n);return console.log("ðŸš€ ~ getVaultApyAndFeesHistogram ~ res:",i),i!=null&&i.list?i==null?void 0:i.list.map((l,u)=>{const h=l.Timestamp*1e3,p=new Date(h),c=Number(p.toISOString().slice(5,7));return{apy:+l.value.apy,lp_fee:+l.value.lp_fee,date:l.Timestamp,tooltipTime:et(h)}}):[]}catch(n){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",n),[]}}}}function hs({isRefresh:o,vaultsId:r,isReverse:s,haveMining:e}){const[n,i]=m.useState(!1),[l,u]=m.useState(),{getVaultApyAndFeesHistogram:h}=ds(),p=async()=>{i(!0);const x=Date.now(),a=7*86400,g=String(Math.floor(x/1e3-a)),f=await h({vaultID:r,beginTimestamp:g,endTimestamp:String(Math.floor(x/1e3))});u(f),console.log("ðŸš€ ~ fetchPricerangeHistogram ~ tvl_res:",f),i(!1)};m.useEffect(()=>{r&&p()},[r]),m.useEffect(()=>{o&&p()},[o]);const{isApp:c}=oe();return t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",padding:c?"12px":"20px 8px 20px 20px",children:[t.jsx(v,{justify:"space-between",children:t.jsx(v,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:t.jsx(y,{fontWeight:"500",fontSize:"14px",children:"APY & Fees"})})}),t.jsx(W,{w:"100%",h:"260px",mt:"20px",children:t.jsxs(W,{w:"100%",h:"260px",position:"relative",children:[n&&t.jsx(W,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Me,{})}),t.jsx(us,{data:l,dateType:"",haveMining:e})]})})]})}function ms(o){const{isOpen:r,onClose:s,data:e,onSubmitClick:n,calculateLpLoading:i}=o,{feeTier:l,displayTokenA:u,displayTokenB:h,displayAmountA:p,displayAmountB:c,totalAmountValue:x,sharePool:d,lpAmountLimit:a,lpDecimals:g}=e;return t.jsxs(Ht,{autoFocus:!1,returnFocusOnClose:!1,isOpen:r,onClose:s,isCentered:!0,children:[t.jsx(Et,{}),t.jsxs(Mt,{children:[t.jsx($t,{children:t.jsx(Wt,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),t.jsx(Nt,{}),t.jsx(Ut,{textAlign:"center",p:"0px",children:t.jsxs(S,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(ut,{coinAIconUrl:u==null?void 0:u.logo_url,coinBIconUrl:h==null?void 0:h.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(y,{fontSize:"16px",color:"text_caption",children:`${u==null?void 0:u.symbol} - ${h==null?void 0:h.symbol}`})]}),t.jsx($,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:t.jsxs(v,{children:[t.jsx(y,{children:"Fee Tier"}),t.jsx(y,{color:"primary",children:l})]})})]}),t.jsx(kr,{coinA:{amount:p,...u},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:c,...h}}),t.jsx(St,{amountLimit:a,inputTotalValue:x,preCalculateLoading:!1,calculateLpLoading:i,lpRate:d,lpDecimals:g,poolName:`${u==null?void 0:u.symbol} - ${h==null?void 0:h.symbol}`}),t.jsx(W,{h:"52px"}),t.jsx($e,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{n()},children:"Deposit"})]})})]})]})}const gs="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",ys=(o,r)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${r} via ${o} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Rt(o){const{displayTokenA:r,displayTokenB:s,onSelectAssetTab:e,showAfterIcon:n=!1,label:i="Deposit Amounts",handleRefreshClick:l,refreshCount:u,isCheckedZAP:h,setIsCheckedZAP:p,assetAction:c,setAssetAction:x,isUnstableVault:d,currentActionTab:a}=o;console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:47 ~ props:",o);const{stakeProtocolName:g}=Qt(r==null?void 0:r.coin_type),[f,A]=m.useState("both"),b=m.useMemo(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:52 ~ tabList ~ displayTokenA:",r),r&&s){const _=[{label:`${r.symbol} only`,action:r.coin_type,afterIcon:h&&a=="Deposit"&&!d?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:d?a=="Deposit"?`You can add liquidity in this pool with only ${r.symbol}.`:"":gs},{label:`${s.symbol} only`,action:s.coin_type,afterIcon:h&&a=="Deposit"&&!d?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:d?a=="Deposit"?`You can add liquidity in this pool with only ${s.symbol}.`:"":ys(g,r==null?void 0:r.symbol)}];return d&&a=="Deposit"&&_.splice(1,0,{label:`${r.symbol}+${s.symbol}`,action:"both",afterIcon:h&&!d&&a=="Deposit"?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:a=="Deposit"?"You can add any value you want from both assets.":""}),_}return[]},[r,g,h]),w=m.useMemo(()=>{if(b.length!==0){if(console.log("ðŸš€ðŸš€ðŸš€ ~ currentTab ~ assetAction:",c),d){if(c===(r==null?void 0:r.coin_type))return b[0].label;if(c===(s==null?void 0:s.coin_type))return a=="Withdraw"?b[1].label:b[2].label}else{if(c===(r==null?void 0:r.coin_type))return b[0].label;if(c===(s==null?void 0:s.coin_type))return b[1].label}return b[1].label}},[c,b,h]),j=m.useMemo(()=>a=="Deposit"?d?"customDeposit":"deposit":"withdraw",[a,d]);return t.jsxs(S,{w:"100%",gap:"16px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{fontWeight:"500",children:i}),t.jsx(nr,{isCheckedZAP:h,zapText:a=="Deposit"?"Zap In":"Zap Out",tooltipType:j,zapSwitchChange:_=>{p(!h),x(_?r==null?void 0:r.coin_type:"both"),A((r==null?void 0:r.symbol)+" only")}})]}),h?t.jsx(ze,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:w,tabList:b,handleChangeTab:_=>{x(_.action),console.log("ðŸš€ðŸš€ðŸš€ ~ item.action:",_.action),e(_.action)}}):null]})}function fs(o){const{category:r}=dt();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:32 ~ VaultsAdd ~ category:",r);const{apiVaultInfo:s,tokenA:e,tokenB:n,isReverse:i,vaultsId:l,totalLp:u,feeTier:h,handleRefreshClick:p,currentActionTab:c}=o,x=pe.useVaultsAdd(r=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:35 ~ VaultsAdd ~ useVaultsAdd:",x);const d=pe.useAddButtonStatus(r=="haedal"),a=pe.useGetContractVaultInfo(r=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:29 ~ VaultsAdd ~ totalLp:",u);const[g,f]=m.useState("both"),[A,b]=m.useState(!1),{currentAccount:w,onWalletModal:j}=tt(),{fromTokenLock:_,toTokenLock:P,lpTokenInfo:O,gtAumLimit:z,hardCapUSD:Y,vaultTvl:H}=a(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse),{amountInputA:N,amountInputB:U,balanceInfoA:D,balanceInfoB:B,amountValueA:ge,amountValueB:ye,preCalculateLoading:R,fixAmountA:E,inputTotalValue:X,handleAmountInputChange:ae,calculateResult:C,showOnlySideTips:K,doAddAction:le,reCalculateResult:fe,overHardtop:re,zapNumError:Q,calculateLpLoading:xe,inputTotalValueError:L}=x(g,p,l,i?n:e,i?e:n,s==null?void 0:s.isReverse,A,Y,H);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:55 ~ VaultsAdd ~ overHardtop:",re,z);const{vaultsSlippage:se}=Or();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:76 ~ VaultsAdd ~ gtAumLimit:",z);const{btnText:ce,btnDisabled:Ue}=d(A,g,!0,N,U,i?!E:E,D==null?void 0:D.balanceFormat,B==null?void 0:B.balanceFormat,e,n,r=="haedal",Q,C,re,L);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:80 ~ VaultsAdd ~ calculateResult:",C);const{lpRate:ke}=ht(C==null?void 0:C.ft_amount,u),{amountLimit:be}=mt(Number(se),C==null?void 0:C.ft_amount,!1),[G,J]=m.useState(!1),ve=m.useMemo(()=>D,[D==null?void 0:D.balance,B==null?void 0:B.balance,i]),je=m.useMemo(()=>B,[D==null?void 0:D.balance,B==null?void 0:B.balance,i]),V=m.useMemo(()=>e,[i,e,n]),M=m.useMemo(()=>n,[i,e,n]),Se=()=>({feeTier:h||"",displayTokenA:V,displayTokenB:M,displayAmountA:N,displayAmountB:U,totalAmountValue:X,sharePool:ke,lpAmountLimit:be||"0",lpDecimals:O==null?void 0:O.decimals}),{isApp:Ae}=oe();return t.jsxs(S,{gap:"8px",w:"100%",align:"flex-start",children:[t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Rt,{showAfterIcon:!0,displayTokenB:n,displayTokenA:e,onSelectAssetTab:f,assetAction:g,isCheckedZAP:A,setIsCheckedZAP:b,setAssetAction:f,isUnstableVault:r=="haedal",currentActionTab:c,handleRefreshClick:()=>{p(),fe()}}),t.jsx(S,{mt:"16px",position:"relative",children:t.jsx(At,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:g!=="both"&&g!==(V==null?void 0:V.coin_type),balance:(ve==null?void 0:ve.balanceFormat)||"",value:N,amountValue:ge,loading:(i?E:!E)&&R&&!A,onChange:we=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:183 ~ VaultsAdd ~ value,amountInputB:",we,U),ae(we,!i,!0,U)},selectable:!1,placeholder:"0.0",token:V},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:g!=="both"&&g!==(M==null?void 0:M.coin_type),balance:(je==null?void 0:je.balanceFormat)||"",value:U,amountValue:ye,loading:(i?!E:E)&&R&&!A,onChange:we=>{ae(we,i,!0,N)},selectable:!1,placeholder:"0.0",token:M},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),t.jsx($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(S,{w:"100%",gap:"20px",children:[t.jsx($e,{m:"-1px",isLoading:R||G,w:"100%",borderRadius:"12px",h:"52px",fontSize:Ae&&Q?"14px":"18px",fontWeight:"500",disabled:Ue||R||G||z||re,onClick:()=>{w?J(!0):j(!0)},children:ce||(A?"Zap In":"Deposit")}),z?t.jsx(S,{w:"100%",pl:"16px",pr:"16px",pb:C||K?"0px":"20px",alignItems:"start",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The vault has reached its current capacity. New deposits are not accepted at this time."})}):re?t.jsx(S,{w:"100%",pl:"16px",pr:"16px",pb:C||K?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Your deposit has gone over the vault capacity. Try reducing your deposit amount."})}):Q?t.jsx(S,{w:"100%",pl:"16px",pr:"16px",pb:C||K?"0px":"20px",alignItems:"start",gap:"20px",children:t.jsx(y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,L&&t.jsx(S,{w:"100%",pl:"16px",pb:"20px",pr:"16px",alignItems:"start",children:t.jsx(y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(C||K)&&!L&&t.jsxs(S,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[g!=="both"&&K&&t.jsx(y,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:C?"20px":"0",children:K}),C&&t.jsx(St,{amountLimit:be,inputTotalValue:X,preCalculateLoading:R,calculateLpLoading:xe,lpDecimals:O==null?void 0:O.decimals,lpRate:ke,poolName:`${V==null?void 0:V.symbol} - ${M==null?void 0:M.symbol}`})]})]})}),G&&t.jsx(ms,{data:Se(),isOpen:G,calculateLpLoading:xe,onClose:()=>{J(!1)},onSubmitClick:()=>{J(!1),le()}})]})}function bs(o){const{depositRatio:r,hardCapUSD:s,vaultTvl:e,value:n,label:i,textStyle:l}=o;return console.log("ðŸš€ðŸš€ðŸš€ ~ AumLimit.tsx:16 ~ AumLimit ~ depositRatio:",r),t.jsxs(v,{w:"100%",justifyContent:"flex-end",children:[t.jsx(y,{whiteSpace:"nowrap",fontSize:"12px",children:i}),t.jsx(Xe,{placement:"bottom-end",tooltip:t.jsxs(S,{w:"260px",p:"4px",gap:"8px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{fontSize:"12px",color:"primary_gray",children:"Current TVL"}),t.jsx(y,{fontSize:"12px",color:"primary_gray",children:"Capacity"})]}),t.jsx(wt,{h:"4px",w:"100%",value:Number(r),bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(y,{fontSize:"12px",color:"text_caption",children:de(e,"$")}),t.jsx(y,{fontSize:"12px",color:"primary",children:Kt(r,2)})]}),t.jsxs(y,{fontSize:"12px",color:"text_caption",children:["$",k(s,2)]})]})]}),children:t.jsx(Re,{cursor:"pointer",children:t.jsx(y,{color:"text_caption",textDecoration:"underline dotted",fontSize:"12px",...l,children:n})})})]})}function vs(o){const{vaultsCoinPercent:r,displayTokenB:s,displayTokenA:e,vaultCoinAmounts:n,vaultsCoinAValue:i,vaultsCoinBValue:l,isReverse:u,depositRatio:h,hardCapUSD:p,vaultTvl:c}=o,x=m.useMemo(()=>u?l:i,[u,i,l]),d=m.useMemo(()=>u?i:l,[u,i,l]),a=m.useMemo(()=>u?r==null?void 0:r.percentB:r==null?void 0:r.percentA,[u,r]),g=m.useMemo(()=>u?r==null?void 0:r.percentA:r==null?void 0:r.percentB,[u,r]),{isApp:f}=oe();return t.jsx($,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:t.jsxs(S,{w:"100%",gap:"0px",children:[t.jsxs(v,{w:"100%",justifyContent:"space-between",children:[t.jsx(y,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),p&&t.jsx(bs,{depositRatio:h,hardCapUSD:p,vaultTvl:c,label:"Capacity",value:de(p,"$")})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[t.jsxs(v,{children:[t.jsx(ne,{token:e,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!f}),t.jsx(te,{wrapStyle:{gap:"4px"},title:Z(e==null?void 0:e.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${a}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),t.jsx(wt,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:a,bg:"quote_green",sx:{'div[role="progressbar"]':{bg:"primary"}}}),t.jsxs(v,{children:[t.jsx(te,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:Z(s==null?void 0:s.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${g}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),t.jsx(ne,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),t.jsxs(v,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[t.jsx(te,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:`${k(n==null?void 0:n.displayCoinA,6)} ${Z(e==null?void 0:e.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:I(x,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),t.jsx(te,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:`${k(n==null?void 0:n.displayCoinB,6)} ${Z(s==null?void 0:s.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:I(d,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function js(o){var u,h,p,c,x,d;const{isApp:r}=oe(),{apiVaultInfo:s,isUnstableVault:e,vaultTvl:n,performanceFee:i}=o,{getExplorerUrl:l}=Gt();return t.jsxs(Le,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[t.jsxs(v,{children:[t.jsx(ut,{coinACoinType:(u=s==null?void 0:s.displayTokenA)==null?void 0:u.coin_type,coinBCoinType:(h=s==null?void 0:s.displayTokenB)==null?void 0:h.coin_type,coinAIconUrl:(p=s==null?void 0:s.displayTokenA)==null?void 0:p.logo_url,coinBIconUrl:(c=s==null?void 0:s.displayTokenB)==null?void 0:c.logo_url}),t.jsxs(S,{alignItems:"start",flexDirection:e?"column":"row",gap:"2px",children:[t.jsxs(v,{children:[t.jsx(y,{fontSize:"16px",color:"text_caption",children:(s==null?void 0:s.name)||`${(x=s==null?void 0:s.displayTokenA)==null?void 0:x.symbol} - ${(d=s==null?void 0:s.displayTokenB)==null?void 0:d.symbol}`}),t.jsx($,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:t.jsx(v,{children:t.jsx(y,{fontSize:"12px",color:"primary",children:s==null?void 0:s.feeDisplay})})})]}),t.jsx(v,{mt:"4px",children:e&&t.jsx(Br,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"Haedal"})})]}),!r&&t.jsxs(v,{ml:"12px",gap:"4px",children:[t.jsx(y,{fontSize:"14px",children:"Vault Address"}),t.jsx(it,{fontSize:"14px",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})]})]}),t.jsx(Le,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:r?t.jsxs(t.Fragment,{children:[t.jsx(ee,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:t.jsx(it,{fontSize:"14px",color:"text_caption",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(l(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})}),t.jsx(ee,{wrapStyle:{gap:"6px"},label:"APY",labelStyle:{fontSize:"14px"},rightValueTip:t.jsx(ot,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),t.jsx(ee,{wrapStyle:{gap:"6px"},label:"Earnings",labelStyle:{fontSize:"14px"},value:t.jsx(Xe,{placement:"top",tooltip:t.jsx(y,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Re,{children:t.jsx(v,{w:"100px",justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(nt,{coinType:a},a))})})}),valueStyle:{h:"20px",lineHeight:"20px"}}),t.jsx(ee,{wrapStyle:{gap:"6px"},label:"TVL",labelStyle:{fontSize:"14px"},value:(e?de(n,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e&&t.jsx(ee,{wrapStyle:{gap:"6px"},label:t.jsxs(v,{children:[t.jsx(y,{children:"Performance Fee"}),t.jsx(ct,{type:"vaultDetailFee"})]}),labelStyle:{fontSize:"14px"},value:de(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})]}):t.jsxs(t.Fragment,{children:[t.jsx(te,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"APY",titleStyle:{fontSize:"12px"},valueTooltip:t.jsx(ot,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontWeight:"500"}}),t.jsx(te,{wrapStyle:{gap:"6px",alignItems:"flex-end"},title:"Earnings",titleStyle:{fontSize:"12px"},value:t.jsx(Xe,{placement:"top",tooltip:t.jsx(y,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:t.jsx(Re,{children:t.jsx(v,{justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(a=>t.jsx(nt,{coinType:a},a))})})}),valueStyle:{h:"20px"}}),t.jsx(te,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"TVL",titleStyle:{fontSize:"12px"},value:(e?de(n,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}}),e&&t.jsx(te,{wrapStyle:{alignItems:"flex-end",gap:"2px"},title:t.jsxs(v,{children:[t.jsx(y,{fontSize:"12px",children:"Performance Fee"}),t.jsx(ct,{type:"vaultDetailFee"})]}),titleStyle:{fontSize:"12px",mt:"-4px"},value:de(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}})]})})]})}function Ss(o){const{apiVaultInfo:r,tokenA:s,tokenB:e,isReverse:n,vaultsId:i,totalLp:l,holdCoinAmounts:u,holdLpAmount:h,handleRefreshClick:p,isUnstableVault:c,currentActionTab:x}=o,d=pe.useVaultsRemove(c);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ isReverse:",n),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenB:",e),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenA:",s);const a=pe.useAddButtonStatus(c),g=pe.useGetContractVaultInfo(c),[f,A]=m.useState(!1),[b,w]=m.useState("both"),{currentAccount:j,onWalletModal:_}=tt(),{contractClmmPoolObj:P}=Vt(),O=m.useMemo(()=>{if(P&&P[r==null?void 0:r.clmmPoolAddress])return P[r==null?void 0:r.clmmPoolAddress]},[r==null?void 0:r.clmmPoolAddress,P]),{fromTokenLock:z,toTokenLock:Y,lpTokenInfo:H}=g(r==null?void 0:r.vaultsId,r==null?void 0:r.clmmPoolAddress,r==null?void 0:r.tokenA,r==null?void 0:r.tokenB,r==null?void 0:r.isReverse),{amountInputA:N,amountInputB:U,availableAmountA:D,availableAmountB:B,amountValueA:ge,amountValueB:ye,preCalculateLoading:R,fixAmountA:E,inputTotalValue:X,handleAmountInputChange:ae,calculateResult:C,showOnlySideTips:K,doRemoveAction:le,handlePercentInputChange:fe,removePercent:re,isPercentInput:Q,reCalculateResult:xe,calculateAvailableLoading:L,submitLoading:se}=d(b,p,u,l,h,i,n?e:s,n?s:e,n,z,Y,f,O),ce=m.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",X),X&&f?Ye(X).gt(0)&&Ye(X).lt(1e-4):!1),[f,X]),{btnText:Ue,btnDisabled:ke}=a(f,b,!1,N,U,n?!E:E,D,B,s,e,c,"",C,ce);ht(C==null?void 0:C.burn_ft_amount,l);const{amountLimit:be}=mt(0,C==null?void 0:C.burn_ft_amount,!1);m.useMemo(()=>D,[D,n]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceA ~ availableAmountA:",D),m.useMemo(()=>B,[B]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceB ~ availableAmountB:",B);const G=m.useMemo(()=>s,[n,s,e]),J=m.useMemo(()=>e,[n,s,e]),ve=m.useMemo(()=>R?Q?!0:n?E:!E:!1,[R,Q]),je=m.useMemo(()=>R?Q?!0:n?!E:E:!1,[R,Q]),V=m.useMemo(()=>k(qt(be||"0",H==null?void 0:H.decimals),H==null?void 0:H.decimals),[be,H]);return t.jsxs(S,{gap:"8px",w:"100%",align:"flex-start",children:[t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[t.jsx(Rt,{label:"Remove Amounts",displayTokenA:s,displayTokenB:e,onSelectAssetTab:w,handleRefreshClick:()=>{p(),xe()},isCheckedZAP:f,setIsCheckedZAP:A,assetAction:b,setAssetAction:w,currentActionTab:x,isUnstableVault:c}),t.jsx(W,{w:"100%",position:"relative",mt:"16px",children:t.jsx(At,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:L,hideSelf:b!=="both"&&b!==(G==null?void 0:G.coin_type),balance:D||"",value:N,amountValue:ge,loading:ve,onChange:(M,Se,Ae)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:179 ~ VaultsRemove ~ value:",M),ae(M,!n,Se,Ae)},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:G,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:L,needRemainBalance:!1,hideSelf:b!=="both"&&b!==(J==null?void 0:J.coin_type),balance:B||"",value:U,amountValue:ye,loading:je,onChange:(M,Se,Ae)=>{ae(M,n,Se,Ae)},selectable:!1,placeholder:"0.0",token:J},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),t.jsxs($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[t.jsx(y,{color:"primary_gray",children:"Amount"}),t.jsx(Lr,{percentage:re,onChange:M=>{L||fe(Number(M.toString().replace("%","")))}})]}),t.jsx($,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:t.jsxs(S,{w:"100%",gap:"20px",children:[t.jsx($e,{m:"-1px",isLoading:R||se,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:ke||R||se,onClick:()=>{j?le():_(!0)},children:Ue||(f?"Zap Out":"Withdraw")}),ce&&t.jsx(S,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:t.jsx(y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),C&&!ce&&t.jsxs(S,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[b!=="both"&&K&&t.jsx(y,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:K}),t.jsxs(S,{w:"100%",gap:"20px",children:[t.jsx(ee,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:I(X,2),valueStyle:{fontSize:"14px"},isLoading:R}),t.jsx(ee,{label:"LP Burn Amount",value:`${V} ${`${G==null?void 0:G.symbol} - ${J==null?void 0:J.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:R})]})]})]})})]})}const As=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function wo(){const{vaultId:o,category:r}=dt(),{currentAccount:s}=tt(),{apiVaultInfo:e,getApiVaultInfo:n}=It(o),{fetchAccountBalance:i}=sr(),l=pe.useGetContractVaultInfo(r=="haedal"),{vaultStatsObj:u}=er(),[h,p]=m.useState(!0);m.useEffect(()=>{var L;if(console.log("ðŸš€ ~ VaultsDetailPage ~ vaultStatsObj:",Object.values(u),u,o),o&&Zt(u)){const se=(L=Object.values(u))==null?void 0:L.filter(ce=>ce.vaultsId==o);console.log("ðŸš€ ~ arr ~ arr:",se),(se==null?void 0:se.length)>0?p(!0):p(!1)}},[o,u]);const{contractVault:c,lpTokenInfo:x,minPrice:d,maxPrice:a,vaultCoinAmounts:g,vaultsCoinAValue:f,vaultsCoinBValue:A,currPrice:b,balanceInfo:w,totalValue:j,fetchClmmPoolFromContract:_,fetchVaultInfoFromContract:P,vaultsCoinPercent:O,sharePoolRate:z,holdCoinAmounts:Y,holdCoinAValue:H,holdCoinBValue:N,fetchVaultBalance:U,vaultTvl:D,depositRatio:B,hardCapUSD:ge,performanceFee:ye}=l(e==null?void 0:e.vaultsId,e==null?void 0:e.clmmPoolAddress,e==null?void 0:e.tokenA,e==null?void 0:e.tokenB,e==null?void 0:e.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:81 ~ VaultsDetailPage ~ totalValue:",j),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:61 ~ VaultsDetailPage ~ vaultTvl:",D);const[R,E]=m.useState("Deposit");m.useEffect(()=>{s!=null&&s.address&&e&&e.vaultsId&&(x!=null&&x.decimals)&&r=="haedal"&&U(s==null?void 0:s.address,e.vaultsId,x==null?void 0:x.decimals)},[s==null?void 0:s.address,e,x==null?void 0:x.decimals,r]);const{rewardPerA:X,rewardPerB:ae}=tr(w==null?void 0:w.balanceFormat,e);m.useEffect(()=>{o&&(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:87 ~ useEffect ~ fetchVaultInfoFromContract:",P),P(o,!0))},[o]),m.useEffect(()=>{e&&(console.log("ðŸš€ ~ useEffect ~ apiVaultInfo:",e),_(e.clmmPoolAddress,!0))},[e==null?void 0:e.clmmPoolAddress]),m.useEffect(()=>{s!=null&&s.address&&i()},[]);const[C,K]=m.useState(!1),le=()=>{i(),e&&_(e.clmmPoolAddress,!0),o&&(P(o,!0),n(o,!0)),K(!0),setTimeout(()=>{K(!1)},1e3)},fe=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[re,Q]=m.useState("Overview"),xe=Yt();return t.jsx(W,{pt:"40px",w:"100%",children:h?t.jsxs(S,{gap:"20px",w:"100%",align:"flex-start",children:[t.jsx(v,{w:"100%",justify:"space-between",children:t.jsx(Xt,{bg:"bg_six",borderColor:"border_secondary"})}),t.jsx(js,{apiVaultInfo:e,isUnstableVault:r=="haedal",vaultTvl:D,performanceFee:ye}),t.jsxs(Le,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[t.jsxs(S,{width:"100%",flex:"1",gap:"8px",children:[(e==null?void 0:e.category)=="haedal"&&t.jsx(ze,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:fe,currentTab:re,handleChangeTab:L=>{Q(L==null?void 0:L.value)}}),re=="Overview"?t.jsxs(t.Fragment,{children:[t.jsx(ns,{minPrice:d,maxPrice:a,currentPrice:e!=null&&e.isReverse?1/b:b,displayTokenB:e!=null&&e.isReverse?e==null?void 0:e.displayTokenA:e==null?void 0:e.displayTokenB,displayTokenA:e!=null&&e.isReverse?e==null?void 0:e.displayTokenB:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1}),t.jsx(vs,{vaultCoinAmounts:g,vaultsCoinAValue:f,vaultsCoinBValue:A,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsCoinPercent:O,depositRatio:B,hardCapUSD:ge,vaultTvl:D}),t.jsx(ss,{lpTokenInfo:x,sharePoolRate:z,balanceInfo:w,totalValue:j,displayTokenB:e==null?void 0:e.displayTokenB,displayTokenA:e==null?void 0:e.displayTokenA,holdCoinAmounts:Y,holdCoinAValue:H,holdCoinBValue:N,isReverse:(e==null?void 0:e.isReverse)||!1,rewardPerA:X,rewardPerB:ae})]}):t.jsxs(t.Fragment,{children:[t.jsx(xs,{isRefresh:C,vaultsId:e==null?void 0:e.vaultsId}),t.jsx(hs,{isRefresh:C,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse,haveMining:e==null?void 0:e.haveMining}),t.jsx(cs,{isRefresh:C,vaultsId:e==null?void 0:e.vaultsId,isReverse:e==null?void 0:e.isReverse})]})]}),t.jsxs(S,{w:{base:"100%",lg:"40%"},justifyContent:"start",gap:"8px",children:[t.jsx($,{p:"0",borderRadius:"12px",bg:"bg_six",borderColor:"border_secondary",children:t.jsxs(v,{w:"100%",p:{base:"0 8px",lg:"0 16px"},children:[t.jsx(ze,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",border:"none",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:As,currentTab:R,handleChangeTab:L=>{E(L==null?void 0:L.value)}}),t.jsxs(v,{children:[t.jsx(Jt,{slippageType:"vaults",compact:!0}),t.jsx(rr,{handleRefresh:le,isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),R==="Deposit"&&t.jsx(fs,{apiVaultInfo:e,feeTier:e==null?void 0:e.feeDisplay,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:(c==null?void 0:c.total_supply)||(c==null?void 0:c.lp_token_treasury),isUnstableVault:r=="haedal",handleRefreshClick:le,currentActionTab:R}),R==="Withdraw"&&t.jsx(Ss,{apiVaultInfo:e,holdCoinAmounts:Y,tokenA:e==null?void 0:e.displayTokenA,tokenB:e==null?void 0:e.displayTokenB,isReverse:(e==null?void 0:e.isReverse)||!1,vaultsId:e==null?void 0:e.vaultsId,totalLp:c==null?void 0:c.total_supply,holdLpAmount:w==null?void 0:w.balance,isUnstableVault:r=="haedal",handleRefreshClick:le,currentActionTab:R})]})]})]}):t.jsx(gt,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsxs(S,{children:[t.jsx(y,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),t.jsx($e,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{xe("/vaults")},children:"Back to Vault"})]})})})}export{wo as default};
