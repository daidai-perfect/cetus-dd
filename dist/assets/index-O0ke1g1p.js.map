{"version":3,"file":"index-O0ke1g1p.js","sources":["../../../cetus-design/src/components/common/poolsDropSelect/TokenListBlock.tsx","../../../cetus-design/src/components/common/poolsDropSelect/index.tsx"],"sourcesContent":["import useGetTokenSource from '@cetus/hooks/src/useGetTokenSource'\nimport useWindowWidth from '@cetus/hooks/src/useWindowWidth'\nimport { Token } from '@cetus/types'\nimport { CheckBox } from '@cetus/ui-kit'\nimport { Center, HStack, Text, VStack } from '@chakra-ui/react'\nimport Loading from '../Loading'\nimport SingleTokenInfo from '../SingleTokenInfo'\nimport TooltipIcon from '../TooltipIcon'\n\ninterface TokenListBlockProps {\n  tokenList: Token[]\n  selectTokenList: Token[]\n  onClickToken: (item: Token) => void\n  onDeleteToken?: (item: Token) => void\n  isLoading?: boolean\n  hideCheckbox?: boolean\n  currentTab?: string\n}\n\nexport default function TokenListBlock({\n  tokenList,\n  onClickToken,\n  onDeleteToken,\n  selectTokenList,\n  isLoading = false,\n  hideCheckbox = false,\n  currentTab = ''\n}: TokenListBlockProps) {\n  const tokenA = selectTokenList?.length > 0 ? selectTokenList[0] : null\n  const tokenB = selectTokenList?.length > 1 ? selectTokenList[1] : null\n  const { getTokenSource, getTrustTokenSource } = useGetTokenSource()\n  const { windowWidth } = useWindowWidth()\n  return (\n    <VStack w=\"100%\" gap=\"0px\" h=\"26vh\" maxH=\"350px\" minH=\"210px\" overflow=\"auto\" p=\"0\" pb=\"8px\" pl=\"4px\" overflowY=\"scroll\">\n      {isLoading ? (\n        <Center w=\"100%\" h=\"200px\" position=\"relative\" sx={{ '>div': { bg: 'none' } }}>\n          <Loading positionStyle=\"absolute\" />\n        </Center>\n      ) : tokenList?.length == 0 ? (\n        <VStack w=\"100%\" h=\"100%\" alignItems=\"center\" justify=\"center\" gap=\"4px\">\n          <Text color=\"text_caption\">No tokens found</Text>\n          <HStack gap=\"0\">\n            <Text fontSize=\"12px\">Or you can enter Coin Type</Text>\n            <TooltipIcon tooltipCon=\"The unique id of coin\" />\n          </HStack>\n        </VStack>\n      ) : (\n        tokenList?.map((token: Token) => {\n          const coinType = token?.coin_type\n          const isChecked: boolean =\n            !tokenA && !tokenB\n              ? false\n              : tokenA?.coin_type?.toLocaleLowerCase() == coinType?.toLocaleLowerCase() ||\n                tokenB?.coin_type?.toLocaleLowerCase() == coinType?.toLocaleLowerCase()\n\n          const isNeedShowTag = getTokenSource([token]).length > 0\n          return (\n            <HStack\n              w=\"100%\"\n              justify=\"space-between\"\n              key={token?.coin_type}\n              _hover={{\n                bg: 'primary_opacity.10',\n                borderRadius: '8px'\n              }}\n              cursor=\"pointer\"\n              h=\"46px\"\n              minH=\"46px\"\n              p=\"0 8px\"\n              onClick={\n                hideCheckbox\n                  ? () => onClickToken(token)\n                  : selectTokenList?.length >= 2\n                    ? () => {}\n                    : isChecked\n                      ? () => onDeleteToken?.(token)\n                      : () => onClickToken(token)\n              }\n            >\n              <SingleTokenInfo\n                token={token}\n                imgBoxStyle={{ w: '28px', h: '28px' }}\n                symbolFontSize=\"14px\"\n                symbolEllipsesDecimals={20}\n                nameEllipsesDecimals={hideCheckbox ? 25 : windowWidth <= 345 ? 20 : 33}\n                warningIcon={{ isNeedShow: isNeedShowTag }}\n              />\n              {!hideCheckbox && (\n                <CheckBox\n                  checked={isChecked}\n                  // onClick={selectTokenList?.length > 1 ? () => {} : isChecked ? () => onDeleteToken?.(token) : () => onClickToken(token)}\n                  onClick={() => {}}\n                />\n              )}\n            </HStack>\n          )\n        })\n      )}\n    </VStack>\n  )\n}\n","import useTokenSelect from '@/hook/useTokenSelect'\nimport { useDebounceFunction } from '@cetus/hooks'\nimport useTokenStore from '@cetus/stores/src/token'\nimport useTokenSelectStore from '@cetus/stores/src/useTokenSelectStore'\nimport { Token } from '@cetus/types'\nimport { Box, VStack } from '@chakra-ui/react'\nimport { useEffect, useState } from 'react'\nimport Block from '../Block'\nimport SelectTab from '../SelectTab'\nimport { SearchInput } from '../tokenSelectModal/SearchInput'\nimport TokenListBlock from './TokenListBlock'\n\ninterface PoolsDropSelectProps {\n  selectTokenList: Token[]\n  whiteTokenList?: Token[]\n  onClickToken: (item: Token) => void\n  onDeleteToken?: (item: Token) => void\n  hideCheckbox?: boolean\n}\nexport default function PoolsDropSelect({ onClickToken, onDeleteToken, selectTokenList, hideCheckbox, whiteTokenList }: PoolsDropSelectProps) {\n  const [inputValue, setInputValue] = useState('')\n  const { verifiedTokenMap } = useTokenStore()\n  const changeInputValue = (value: string) => {\n    const regValue = value.replace(/[^[a-zA-Z0-9\\s]+$/g, '')\n    setInputValue(regValue)\n    if (regValue) {\n      setFilterTokenLoading(true)\n      debouncedFilter(regValue)\n    }\n  }\n\n  const debouncedFilter = useDebounceFunction((value: string) => {\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:33 ~ debouncedFilter ~ value:', value)\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:36 ~ debouncedFilter ~ whiteTokenList:', whiteTokenList)\n    console.log('ðŸš€ðŸš€ðŸš€ ~ file: index.tsx:37 ~ debouncedFilter ~ trustedTokenList:', Array.from(verifiedTokenMap?.values()))\n    filterTokenListFun(\n      value,\n      whiteTokenList ? whiteTokenList : Array.from(verifiedTokenMap?.values()),\n      whiteTokenList ? [] : importTokenList,\n      false,\n      whiteTokenList ? false : true\n    )\n  }, 300)\n\n  const tabList = [\n    {\n      label: 'Default',\n      value: 'Default'\n    },\n    {\n      label: 'Imported',\n      value: 'Imported'\n    }\n  ]\n  const [currentTab, setCurrentTab] = useState('Default')\n\n  const { getDefaultTokenList } = useTokenSelect()\n  const [hasTriggered, setHasTriggered] = useState(false)\n\n  useEffect(() => {\n    if (!hasTriggered && verifiedTokenMap && verifiedTokenMap.size > 0) {\n      console.log('ðŸš€ ~ useEffect ~ filterTokenList:', verifiedTokenMap)\n      setHasTriggered(true)\n      getDefaultTokenList()\n      getImportTokenList()\n    }\n  }, [hasTriggered, verifiedTokenMap?.size])\n\n  const [tokenList, setTokenList] = useState<Token[]>()\n  const { sortWithTokenList, filterTokenListFun, getImportTokenList } = useTokenSelect()\n  const { setFilterTokenLoading, importTokenList, filterTokenLoading, filterTokenList } = useTokenSelectStore()\n\n  useEffect(() => {\n    console.log(\n      'ðŸš€ ~ useEffect ~ filterTokenList:',\n      filterTokenLoading,\n      filterTokenList,\n      Array.from(verifiedTokenMap?.values()),\n      importTokenList,\n      whiteTokenList\n    )\n    if (filterTokenLoading) {\n      setTokenList([])\n    }\n    if (inputValue) {\n      setTokenList(filterTokenList)\n    } else {\n      setTokenList(\n        currentTab === 'Default'\n          ? sortWithTokenList(whiteTokenList ? whiteTokenList : Array.from(verifiedTokenMap?.values()), '', false)\n          : sortWithTokenList(importTokenList, '', false)\n      )\n    }\n  }, [inputValue, filterTokenList, filterTokenLoading, currentTab, verifiedTokenMap, importTokenList, whiteTokenList])\n\n  return (\n    <VStack w=\"100%\" gap=\"0\">\n      <VStack w=\"100%\" p=\"8px\" borderRadius=\"12px\">\n        <Block bg=\"bg_primary\" p=\"0px\" borderRadius=\"8px\">\n          <SearchInput inputValue={inputValue} changeInputValue={e => changeInputValue(e)} isFrom=\"pools\" inputFontSize=\"12px\" />\n        </Block>\n        {!inputValue && (!whiteTokenList || (whiteTokenList && whiteTokenList.length == 0)) && (\n          <SelectTab\n            type=\"borderTab\"\n            wrapStyle={{\n              w: {\n                base: '100%'\n              },\n              h: '34px',\n              bg: 'none',\n              border: 'none'\n            }}\n            itemStyle={{\n              marginRight: '20px',\n              fontSize: '14px'\n            }}\n            tabList={tabList}\n            currentTab={currentTab}\n            handleChangeTab={item => {\n              setCurrentTab(item.value)\n              setFilterTokenLoading(true)\n              setTimeout(() => {\n                setFilterTokenLoading(false)\n              }, 300)\n            }}\n          />\n        )}\n      </VStack>\n      <Box w=\"100%\" overflow=\"hidden\">\n        <TokenListBlock\n          isLoading={filterTokenLoading}\n          currentTab={currentTab}\n          tokenList={tokenList}\n          onClickToken={onClickToken}\n          onDeleteToken={onDeleteToken}\n          selectTokenList={selectTokenList}\n          hideCheckbox={hideCheckbox}\n        />\n      </Box>\n    </VStack>\n  )\n}\n"],"names":["TokenListBlock","tokenList","onClickToken","onDeleteToken","selectTokenList","isLoading","hideCheckbox","currentTab","tokenA","tokenB","getTokenSource","useGetTokenSource","windowWidth","useWindowWidth","jsx","VStack","Center","Loading","jsxs","Text","HStack","TooltipIcon","token","coinType","isChecked","_a","_b","isNeedShowTag","SingleTokenInfo","CheckBox","PoolsDropSelect","whiteTokenList","inputValue","setInputValue","useState","verifiedTokenMap","useTokenStore","changeInputValue","value","regValue","setFilterTokenLoading","debouncedFilter","useDebounceFunction","filterTokenListFun","importTokenList","tabList","setCurrentTab","getDefaultTokenList","useTokenSelect","hasTriggered","setHasTriggered","useEffect","getImportTokenList","setTokenList","sortWithTokenList","filterTokenLoading","filterTokenList","useTokenSelectStore","Block","SearchInput","e","SelectTab","item","Box"],"mappings":"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"}