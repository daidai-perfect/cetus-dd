import{a as c,ab as E,D as y,j as e,H as n,v as m,P as O,h as B,I as w,T as l,m as V,V as k}from"./vendor-DXHkIl66.js";import{u as F,A as G,R as D}from"./RecentTransactions-Bl6s3Pfq.js";import{bF as _,bz as L,cT as M,j as S,bY as U,bZ as J,cU as Y,e as Z,a as $,b3 as q,cV as Q,ca as X,I as h}from"./index-z4pUiXVL.js";import{u as K}from"./useTrack-D6wG9wqq.js";import{u as ee}from"./useAccountBalance-Bj6kHpBe.js";import{C as se}from"./CopyButton-CZFl6Fvu.js";import"./NoData-CqJO7NcS.js";function te(){const{phantomInstance:x}=_(),{mutate:i}=L(),d=M(),o=()=>{var u,s;const r=JSON.parse(((u=window==null?void 0:window.localStorage)==null?void 0:u.getItem("sui-dapp-kit:wallet-connection-info"))||"{}");if(((s=r==null?void 0:r.state)==null?void 0:s.lastConnectedWalletName)==="Phantom"){const f=d.find(t=>t.name==="Phantom");f&&i({wallet:f})}};c.useEffect(()=>{x&&o()},[x])}function de({isCetusPump:x}){te();const[i,d]=c.useState(!1),{currentAccount:o,accounts:r,onWalletModal:b,saveAccounts:u}=S(),{currentWallet:s,connectionStatus:f}=U(),t=J(),{mutate:I}=Y(),{getExplorerUrl:R}=Z();$();const A=E(),{fetchAccountBalance:W}=ee(),{isOpen:j,onToggle:T,onClose:p}=y(),{currentNode:oe}=q(),{fetchServiceNames:z}=F(),{phantomInstance:v}=_(),{toTrackWalletConnect:H}=K(),{saveCurrentAccount:N,accountServiceNameObj:g,setAccountServiceNameObj:ne}=S();c.useEffect(()=>{N(t||void 0),console.log("è¿›æ¥äº†å‡ æ¬¡å‘¢#ðŸš€ ~ useEffect ~ account:",t),t&&(W(t.address,!0),z([t.address]))},[t]),c.useEffect(()=>{const a=(s==null?void 0:s.accounts)||[];u([...a])},[s]),c.useEffect(()=>{t!=null&&t.address&&(s!=null&&s.name)&&H({walletAddress:t==null?void 0:t.address,walletName:s==null?void 0:s.name})},[t==null?void 0:t.address,s==null?void 0:s.name]);const C=c.useMemo(()=>{if(s){const a=Q.find(P=>s.name===P.walletName);return a?a.icon.startsWith("http")?a.icon:`/images/wallet/${a.icon}.png`:s.icon}},[s]);return e.jsxs(n,{children:[!o&&e.jsx(m,{borderRadius:"8px",fontSize:"14px",p:"0 16px",h:"36px",fontWeight:"500",onClick:()=>{b(!0),p()},children:"Connect"}),o&&e.jsxs(O,{isLazy:!0,isOpen:j,onClose:p,children:[e.jsx(B,{children:e.jsxs(m,{variant:"unstyled",display:"flex",gap:"8px",cursor:"pointer",borderRadius:"8px",border:"1px solid",borderColor:"border",p:{base:"0 8px",lg:"0 16px"},bg:"block_color_opacity.50",backdropFilter:"blur(20px)",h:"36px",sx:{_hover:{bg:"button_outline_hov_bg"}},onClick:T,children:[e.jsx(w,{src:C,alt:"SVG Image",boxSize:"20px",objectFit:"cover",borderRadius:"4px"}),e.jsx(l,{fontSize:"14px",color:"text_caption",fontWeight:"500",children:(g==null?void 0:g[o.address])||X(o.address)})]})}),(i?!0:j)&&e.jsx(V,{w:"360px",bg:"bg_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(k,{alignItems:"start",p:"16px",w:"100%",children:[e.jsxs(l,{fontSize:"14px",color:"text_caption",children:["Connected with ",s==null?void 0:s.name]}),e.jsxs(k,{mt:"8px",w:"100%",p:"20px",borderRadius:"12px",alignItems:"start",sx:{backgroundImage:"url('/images/bg@2x.png')",backgroundPosition:"top 0px",backgroundSize:"328px 116px",backgroundRepeat:"no-repeat"},children:[e.jsxs(n,{gap:"8px",children:[e.jsx(w,{src:C,alt:"SVG Image",boxSize:"30px",objectFit:"cover",borderRadius:"8px"}),e.jsx(l,{fontSize:"14px",fontWeight:"500",children:o==null?void 0:o.label})]}),e.jsxs(n,{w:"100%",justifyContent:"space-between",alignItems:"center",mt:"8px",children:[e.jsx(G,{currentAccount:o,accounts:r,onClose:p}),e.jsxs(n,{gap:"4px",children:[e.jsx(se,{svgW:"24px",svgH:"24px",text:o.address}),e.jsx(h,{xlinkHref:"#icon-icon_link1",w:"24px",h:"24px",svgW:"24px",svgH:"24px",onClick:()=>{window.open(R(o.address),"_blank")}})]})]})]}),x&&e.jsx(m,{variant:"outline",fontSize:"14px",w:"100%",mt:"12px",onClick:()=>{p(),A("/profile")},children:"Profile"}),e.jsxs(n,{w:"100%",mt:"8px",children:[e.jsxs(n,{cursor:"pointer",sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},onClick:()=>{d(!0)},children:[e.jsx(h,{xlinkHref:"#icon-icon_recenttransactions",svgW:"20px",svgH:"20px"}),e.jsx(l,{children:"Recent Transactions"})]}),e.jsxs(n,{pl:"16px",cursor:"pointer",sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},onClick:()=>{I(),v&&v.hide(),p()},children:[e.jsx(h,{xlinkHref:"#icon-icon_disconnect",svgW:"20px",svgH:"20px",svgHover:"text_paragraph"}),e.jsx(l,{children:"Disconnect"})]})]})]})})]}),i&&e.jsx(D,{isOpen:i,onClose:()=>d(!1)})]})}export{de as default};
//# sourceMappingURL=ConnectButton-CF9KU7jx.js.map
