import{aE as Ds,aF as ft,aG as Gs,aH as Ks,u as _t,r as A,X as Mt,j as t,T as B,h as Qs,H as q,I as ve,b as we,V as W,g as Me,ad as vt,as as X,e as wt,C as $e,$ as xe,l as Rt,k as Be,f as fe,d as N,aI as zt,B as ee,U as Yt,m as oe,aJ as At,Y as Zt,aK as Xs,ai as Ne,aL as Ys,S as Ve,a1 as dt,a as De,aD as jt,ae as Jt,af as Pt,ag as It,ah as es,aj as Zs,ak as ts,a0 as ss,W as Js,ab as tt,aM as rs,aN as Ct,a5 as is,az as Et,aO as ne,aP as Je,aQ as rt,aR as se,a7 as Ps,aS as qt,aT as Is,c as Lt,aU as er,aV as tr,ar as sr,aB as rr,ao as $t,aW as ns,aX as be,aY as ir,aa as nr,aZ as ar,a_ as cr}from"./index-CukE8cTn.js";import{A as lr}from"./index-DhxW3sqD.js";import{i as dr,R as ur,C as or}from"./api-data-utils-eX_2bT4B.js";import{u as J}from"./index-BwKPDXwv.js";import{u as ce}from"./useQueryParams-n0W6HC8p.js";import{u as Oe}from"./useDocumentSize-Cd8hLYsP.js";import{H as xr,T as pr,a as gr,u as mr,V as yr}from"./VolumeChart-Cd78lVW8.js";import{N as He}from"./NoData-DIhViwNa.js";import{A as hr}from"./AddressUnderline-BOZj4VUL.js";import{T as br}from"./TvlChart-C3v1hUMW.js";import{u as fr}from"./useBurn-uAFfLwdr.js";import{H as de}from"./HTextLabelBox-CLEmTQ3w.js";import{T as Ar}from"./TooltipIcon-BKuTitbA.js";import{A as as}from"./AddressCopyLink-9NiyIsOZ.js";import{P as jr}from"./progress-DTMbcU_D.js";import{c as cs,d as Sr,a as _r,u as vr}from"./usePositionList-CkHWKFPK.js";import{u as wr}from"./useRpcListener-BkdWBUrv.js";import{a as Rr,P as Cr,F as ls}from"./PositionListLoading-CwjQw1TT.js";import{u as Re,a as ut,L as ds,b as Lr,c as kr,S as Pe}from"./useGetContractPoolInfo-BpBbBnJs.js";import{T as Tr}from"./TradeConfirmAmountInfo-Bot-jy5Y.js";import{P as Fr}from"./PositionStatus-C_oWv-rK.js";import{R as Br}from"./RangeAlerts-DwbzwqOQ.js";import{u as Mr}from"./global-CjpIaFuE.js";import{c as zr,g as it,a as nt,u as Er}from"./useGetPoolList-POUx1HUb.js";import{u as us}from"./useAccountBalance-CYhYy7u9.js";import{u as at}from"./useTokenBalance-BddNj3YQ.js";import{u as qr,a as $r}from"./useTransaction-BC9L5pZ-.js";import{u as os,m as yt,S as Wt,a as Wr}from"./SelectTokenAndFeeConfirm-DnmQaU8M.js";import{u as Ur}from"./useNotifiSubscription-BGIIbmQN.js";import{u as Hr}from"./usePosAdd-BrAzY7ub.js";import{L as ct}from"./LockInput-DhZkofNE.js";import{S as xs}from"./Slippage-CdCD_Bgc.js";import{P as Ut,C as ps,I as lt}from"./common-DLsN7mf7.js";import{C as st}from"./CetusTooltip-BMWwC53s.js";import{S as St}from"./switch-Zf-tl16n.js";import{T as gs}from"./TradeInputGroup-CZPFUSB4.js";import{i as qe}from"./index-DiJH7D3W.js";import{g as Nr}from"./liquidity-BcWYoCp4.js";import{d as Ht,F as Vr}from"./FeeTierSelect-Qll6foLk.js";import{u as ms}from"./useToken-DUMKX95L.js";import{u as Or,a as Dr}from"./swapWidget-DW9whKpC.js";import{R as Gr}from"./RefreshButton-DuR1KtVz.js";import{C as Kr}from"./CurrentPrice-_UtaJNB6.js";import{W as Qr}from"./WarningTokenTipModal-BVgOuAMZ.js";import"./debounce-B-1pwfmP.js";import"./index-GYcRTxhJ.js";import"./Pagination-slMtdzdK.js";import"./tr-CHVUeJmD.js";import"./_getAllKeysIn-PDQ8gqNP.js";import"./YAxis-BpYwJTxG.js";import"./throttle-BEVLz-Fh.js";import"./generateCategoricalChart-C1GzWPXj.js";import"./linear-DYpwdEgO.js";import"./index-FWoG0dQe.js";import"./progress.utils-Ccyb7jfC.js";import"./usePreviousValue-ksfxYIvo.js";import"./useCurrentPos-Bey-IjFU.js";import"./PriceRange-Dkaec-T6.js";import"./SingleTokenInfo-L3R1S53Q.js";import"./RangeValue-BThn_HyP.js";import"./ActionButton-DK54lfKE.js";import"./VTextLabelBox-nyxvnta6.js";import"./index-DHx5lXhM.js";import"./Loading-DKzecRVH.js";import"./useXCetusHelper-BnGoSkj6.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-C1ZVrdH_.js";import"./icon_lock@2x-OdzkPjmc.js";import"./InputBox-DqR7u0A9.js";var Xr=/\s/;function Yr(e){for(var s=e.length;s--&&Xr.test(e.charAt(s)););return s}var Zr=/^\s+/;function Jr(e){return e&&e.slice(0,Yr(e)+1).replace(Zr,"")}var Nt=NaN,Pr=/^[-+]0x[0-9a-f]+$/i,Ir=/^0b[01]+$/i,ei=/^0o[0-7]+$/i,ti=parseInt;function Vt(e){if(typeof e=="number")return e;if(Ds(e))return Nt;if(ft(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ft(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Jr(e);var r=Ir.test(e);return r||ei.test(e)?ti(e.slice(2),r?2:8):Pr.test(e)?Nt:+e}var ht=function(){return Gs.Date.now()},si="Expected a function",ri=Math.max,ii=Math.min;function ys(e,s,r){var c,o,d,x,f,n,u=0,a=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(si);s=Vt(s)||0,ft(r)&&(a=!!r.leading,l="maxWait"in r,d=l?ri(Vt(r.maxWait)||0,s):d,m="trailing"in r?!!r.trailing:m);function v(h){var g=c,j=o;return c=o=void 0,u=h,x=e.apply(j,g),x}function C(h){return u=h,f=setTimeout(p,s),a?v(h):x}function w(h){var g=h-n,j=h-u,_=s-g;return l?ii(_,d-j):_}function L(h){var g=h-n,j=h-u;return n===void 0||g>=s||g<0||l&&j>=d}function p(){var h=ht();if(L(h))return y(h);f=setTimeout(p,w(h))}function y(h){return f=void 0,m&&c?v(h):(c=o=void 0,x)}function i(){f!==void 0&&clearTimeout(f),u=0,c=n=o=f=void 0}function b(){return f===void 0?x:y(ht())}function R(){var h=ht(),g=L(h);if(c=arguments,o=this,n=h,g){if(f===void 0)return C(n);if(l)return clearTimeout(f),f=setTimeout(p,s),v(n)}return f===void 0&&(f=setTimeout(p,s)),x}return R.cancel=i,R.flush=b,R}var _e=(e=>(e.add="add_liquidity_event",e.remove="remove_liquidity_event",e.swap="swap_event",e))(_e||{});function ni(){const{clmmSdk:e}=Ks(),{fetchByApi:s}=_t();return{getTransactionsHistory:async o=>{try{const d=await s(dr,"GET",o);if(console.log(d,"getTransactionsHistory"),d)return d;throw new Error("no data")}catch(d){console.error(d,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(o,d)=>{try{const x=await e.Pool.getPoolTransactionList({poolId:o,paginationArgs:d,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(x,"getTransactionsHistoryBySDK"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistoryBySDK ~ error")}}}}function ai(){const{getTransactionsHistoryBySDK:s}=ni(),[r,c]=A.useState(!0),[o,d]=A.useState([]),[x,f]=A.useState(1),[n,u]=A.useState(),[a,l]=A.useState(!0),{apiPoolInfo:m,manualRefresh:v,setManualRefresh:C}=J(),{poolAddress:w}=ce();A.useEffect(()=>{d([]),f(1),u(void 0),l(!0)},[w]),A.useEffect(()=>{v&&(d([]),f(1),u(void 0),l(!0),L({cursor:void 0,limit:10}))},[w,v]);const L=async y=>{var i;try{if(!a)return;if(w){c(!0);const b=await s(w,{...y});if(b){const R=(i=b==null?void 0:b.data)==null?void 0:i.map(h=>{var k,$;const g=h==null?void 0:h.parsedJson,j=g!=null&&g.amount_a||g!=null&&g.atob?m==null?void 0:m.tokenA:m==null?void 0:m.tokenB,_=g!=null&&g.amount_b||g!=null&&g.atob?m==null?void 0:m.tokenB:m==null?void 0:m.tokenA;return{...h,type:(k=h.type)!=null&&k.includes("Add")?_e.add:($=h.type)!=null&&$.includes("Remove")?_e.remove:_e.swap,items:[{amount:Mt(g!=null&&g.amount_a?g==null?void 0:g.amount_a:g==null?void 0:g.amount_in,j==null?void 0:j.decimals).toString(),address:j==null?void 0:j.coin_type,url:j==null?void 0:j.logo_url,symbol:j==null?void 0:j.symbol},{amount:Mt(g!=null&&g.amount_b?g==null?void 0:g.amount_b:g==null?void 0:g.amount_out,_==null?void 0:_.decimals).toString(),address:_==null?void 0:_.coin_type,url:_==null?void 0:_.logo_url,symbol:_==null?void 0:_.symbol}]}});y!=null&&y.cursor?d(h=>[...h,...R||[]]):d(R||[]),u(b==null?void 0:b.nextCursor),l(b==null?void 0:b.hasNextPage),c(!1)}}}catch(b){console.log(b,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Oe(()=>{L({cursor:n,limit:10})},[x,w],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:o,apiPoolInfo:m,currentPage:x,onCurrentPageChange:()=>{f(y=>y+1)},hasNextPage:a}}const Ie={[_e.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[_e.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[_e.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},ci=({type:e})=>{var s,r,c,o;return t.jsxs(q,{children:[t.jsx(ve,{xlinkHref:(s=Ie[e])==null?void 0:s.icon,svgFill:(r=Ie[e])==null?void 0:r.color,svgHover:(c=Ie[e])==null?void 0:c.color}),t.jsx(B,{color:"text_caption",children:(o=Ie[e])==null?void 0:o.title})]})},li=({items:e,type:s,isReverse:r})=>{var o,d;const{isApp:c}=we();return e?s===_e.swap?c?t.jsxs(W,{align:"flex-end",gap:"8px",children:[t.jsx(Ee,{item:e==null?void 0:e[0]}),t.jsxs(q,{justify:"flex-end",children:[t.jsx(ve,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(Ee,{item:e==null?void 0:e[1]})]})]}):t.jsxs(q,{justify:"flex-end",gap:"8px",children:[t.jsx(Ee,{item:e==null?void 0:e[0]}),t.jsx(ve,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx(Ee,{item:e==null?void 0:e[1]})]}):c?t.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(o=e==null?void 0:e.filter(x=>!!+x.amount))==null?void 0:o.map(x=>t.jsx(Ee,{item:x},x==null?void 0:x.address))}):t.jsx(q,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(d=e==null?void 0:e.filter(x=>!!+x.amount))==null?void 0:d.map(x=>t.jsx(Ee,{item:x},x==null?void 0:x.address))}):null},Ee=({item:e})=>t.jsxs(q,{gap:"4px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.url,w:"20px",h:"20px"}),t.jsx(B,{color:"text_caption",children:vt(e==null?void 0:e.amount)}),t.jsx(B,{children:X(e==null?void 0:e.symbol,10)})]}),Ot=(e,s=!1)=>[{title:t.jsx(B,{children:"Event"}),key:"type",render:({type:r})=>t.jsx(ci,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>t.jsx(li,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>t.jsx(hr,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(e(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(B,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>t.jsx(B,{color:"text_caption",children:Qs(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function di(){const{getExplorerUrl:e}=wt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:o,onCurrentPageChange:d,hasNextPage:x}=ai(),{isApp:f}=we();return t.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[t.jsx(q,{w:"100%",justify:"space-between",children:t.jsx(B,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?t.jsx(He,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):f?t.jsx(xr,{columns:Ot(e,c==null?void 0:c.isReverse),dataSource:r,loading:s&&o===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(n,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")}}):t.jsx(pr,{columns:Ot(e,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&o===1,onRowClick:n=>{window.open(e(n==null?void 0:n.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),x&&t.jsx($e,{mt:{base:"40px",lg:"20px"},children:t.jsx(xe,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:d,children:s?t.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var kt=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(kt||{}),hs=(e=>(e.volume="vol",e.tvl="pure_tvl",e.fees="fee",e))(hs||{}),bs=(e=>(e.d="D",e.w="W",e.m="M",e))(bs||{}),fs=(e=>(e.d="day",e.w="wek",e.m="mon",e))(fs||{});const ui={D:40,W:30,M:20};function oi(){const[e,s]=A.useState("Volume"),[r,c]=A.useState("D"),[o,d]=A.useState([]),{apiPoolInfo:x}=J(),[f,n]=A.useState(!0),[u,a]=A.useState(null),{getHistogramData:l}=gr(),{poolAddress:m}=ce(),{getHoverTime:v,time:C}=mr();A.useLayoutEffect(()=>{d([]),s("Volume"),c("D"),a(null)},[m]);const w=async()=>{if(m)try{n(!0);const R=await l({date_type:fs[r.toLowerCase()],type:hs[e.toLowerCase()],limit:ui[r],address:m});R&&R.length&&d(R)}catch(R){throw console.error(R,"res-fetchAnalyticsData"),R}finally{n(!1)}};A.useEffect(()=>{w()},[m,e,r]),A.useEffect(()=>{u!=null&&u.date&&v(u==null?void 0:u.date,r)},[u==null?void 0:u.date,r]);const L=R=>{s(R.label),R.label!==e&&d([])},p=R=>{c(R.label),R.label!==r&&d([])},y=A.useMemo(()=>{if(e==="Volume")return{value:x==null?void 0:x.volume24Display,title:"Volume (24H)"};if(e==="TVL")return{value:x==null?void 0:x.tvlDisplay,title:"TVL"};if(e==="Fees")return{value:x==null?void 0:x.fees24Display,title:"Fees (24H)"}},[e,x==null?void 0:x.volume24Display,x==null?void 0:x.tvlDisplay,x==null?void 0:x.fees24Display]),i=Object.values(kt).map(R=>({label:R})),b=Object.values(bs).map(R=>({label:R}));return{handleChartTabChange:L,handleDateTabChange:p,defaultDisplay:y,chartsTabs:i,dateTypes:b,chartLoading:f,analyticsData:o,hoverData:u,setHoverData:a,currentChartTab:e,currentDateType:r,time:C}}function xi(){const{isApp:e}=we(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:o,dateTypes:d,chartLoading:x,analyticsData:f,hoverData:n,setHoverData:u,currentChartTab:a,currentDateType:l,time:m}=oi();return t.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[t.jsxs(q,{w:"100%",justify:{base:"center",lg:"space-between"},children:[t.jsx(Be,{type:"outlineTab",tabList:o,currentTab:a,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!e&&t.jsx(Be,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsxs(W,{w:"100%",align:"flex-start",children:[t.jsx(B,{color:"text_caption",fontSize:"24px",children:(n==null?void 0:n.num)!==void 0&&n!==null?N(zt(n.num)).gte("0.01")||N(zt(n.num)).equals("0")?`$${fe(n==null?void 0:n.num,2)}`:"<$0.01":c==null?void 0:c.value}),t.jsx(B,{children:n!=null&&n.date?m:c==null?void 0:c.title}),e&&t.jsx(Be,{type:"outlineTab",tabList:d,currentTab:l,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsx(ee,{w:"100%",h:"340px",mt:"20px",children:t.jsxs(ee,{w:"100%",h:"100%",position:"relative",children:[x&&t.jsx(ee,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Rt,{})}),a===kt.tvl?t.jsx(br,{data:f,onChangeValue:v=>u(v)}):t.jsx(yr,{data:f,onChangeValue:v=>u(v),pageFrom:"pools"})]})})]})}const pi=(e,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{e(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{e(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{e(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{e(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{e(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{e(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{e(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{e(()=>({tvlLoading:r}))},resetTvlInfo:()=>{e(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ot=Yt(pi);function gi(){const{getBurnPositionAmountByPool:e}=fr(),{apiPoolInfo:s,contractPoolInfo:r}=J(),[c,o]=A.useState("0"),[d,x]=A.useState("0"),[f,n]=A.useState("0"),[u,a]=A.useState("0"),[l,m]=A.useState(!1),{poolAddress:v}=ce(),{tokenAPrice:C,tokenBPrice:w}=ot(),L=async(p,y)=>{try{m(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:i,totalB:b}=await e(p,y);o(i),x(b),C&&n(N(i).mul(C==null?void 0:C.price).toString()),w&&a(N(b).mul(w==null?void 0:w.price).toString())}catch(i){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",i)}finally{m(!1)}};return Oe(()=>{s&&(r!=null&&r.current_sqrt_price)&&L(s,r==null?void 0:r.current_sqrt_price)},[v,r==null?void 0:r.current_sqrt_price,C==null?void 0:C.price,w==null?void 0:w.price],{wait:500}),{burnAmountA:c,burnAmountB:d,burnAmountAUSD:f,burnAmountBUSD:u,loading:l}}function mi(){const{apiPoolInfo:e}=J(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:o,loading:d}=gi();return N(s).gt(0)||N(r).gt(0)?t.jsxs(oe,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[t.jsxs(q,{children:[t.jsx(B,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),t.jsx(Ar,{type:"burnedLiquidity"})]}),t.jsxs(oe,{gap:"16px",flexDir:{base:e!=null&&e.isReverse?"column-reverse":"column",lg:e!=null&&e.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[t.jsx(Dt,{token:e==null?void 0:e.tokenA,amount:s,amountUSD:c,loading:d}),t.jsx(Dt,{token:e==null?void 0:e.tokenB,amount:r,amountUSD:o,loading:d})]})]}):null}const Dt=({token:e,amount:s,amountUSD:r,loading:c})=>t.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px"}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(B,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(de,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(At(s,e==null?void 0:e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(de,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:N(r).gt("0")?`$${Zt(At(r,e==null?void 0:e.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function yi(){const{tokenAAmountUSD:e,totalAmountUSD:s}=ot(),r=A.useMemo(()=>{if(e&&s&&e!=="--"&&s!=="--"){const o=Xs(N(e).div(s).mul(100).toString(),2);return o==="NaN"?"--":o}return"--"},[e,s]),c=A.useMemo(()=>r&&r!=="--"?N(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const et=e=>e==="--"?"--":`${e}%`;function hi(){var l,m,v,C,w,L;const{apiPoolInfo:e,contractPoolInfo:s}=J(),{getExplorerUrl:r}=wt(),{poolAddress:c}=ce(),{tokenAAmount:o,tokenBAmount:d,tokenAAmountUSD:x,tokenBAmountUSD:f,tvlLoading:n}=ot(),{tokenARatio:u,tokenBRatio:a}=yi();return t.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(q,{w:"100%",justify:"space-between",children:t.jsx(Ne,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),t.jsxs(Ys,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[t.jsx(de,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:t.jsx(as,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(e==null?void 0:e.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||e!=null&&e.index?`#${(s==null?void 0:s.index)||(e==null?void 0:e.index)}`:"--",valueStyle:{fontSize:"14px"}}),t.jsx(de,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${e==null?void 0:e.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx(q,{justify:"flex-start",w:"100%",children:t.jsx(Ne,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),t.jsxs(W,{gap:"16px",w:"100%",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:(l=e==null?void 0:e.displayTokenA)==null?void 0:l.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenA?(m=e==null?void 0:e.displayTokenA)==null?void 0:m.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((v=e==null?void 0:e.displayTokenA)==null?void 0:v.symbol,10)}),n?t.jsx(Ve,{h:"12px"}):t.jsx(B,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(a):et(u)})]})]}),t.jsx(ee,{w:"200px",children:t.jsx(jr,{value:Number(e!=null&&e.isReverse?a:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,a].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,a].includes("--")?"background":"primary"}}})}),t.jsxs(q,{gap:"12px",children:[t.jsxs(W,{align:"flex-end",gap:"4px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:X((C=e==null?void 0:e.displayTokenB)==null?void 0:C.symbol,10)}),n?t.jsx(Ve,{h:"12px"}):t.jsx(B,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(u):et(a)})]}),t.jsx(Me,{imageUrl:(w=e==null?void 0:e.displayTokenB)==null?void 0:w.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenB?(L=e==null?void 0:e.displayTokenB)==null?void 0:L.coin_type:""})]})]}),t.jsxs(W,{w:"100%",flexDir:e!=null&&e.isReverse?"column-reverse":"column",gap:"16px",children:[t.jsx(Gt,{loading:n,token:e==null?void 0:e.tokenA,amount:o,amountUSD:x}),t.jsx(Gt,{loading:n,token:e==null?void 0:e.tokenB,amount:d,amountUSD:f})]})]})]})]})}const Gt=({token:e,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:o}=wt();return e?t.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Me,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px",coinType:e?e==null?void 0:e.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(B,{color:"text_caption",fontSize:"16px",children:X(e==null?void 0:e.symbol,10)}),t.jsx(B,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(as,{address:(e==null?void 0:e.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(o(e==null?void 0:e.coin_type,"coin"))})]}),t.jsx(de,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(At(s||"0",e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(de,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${fe(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function bi(){return t.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[t.jsxs(oe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[t.jsx(xi,{}),t.jsx(hi,{})]}),t.jsx(mi,{}),t.jsx(di,{})]})}function fi(){const{posBaseListLoading:e,posBaseListGroupByPool:s}=cs(),{manualRefresh:r}=J(),{currentAccount:c,onWalletModal:o}=dt(),{getPositionBaseList:d,getPosRelatedData:x}=Sr(),[f,n]=A.useState(""),{poolAddress:u}=ce(),a=async m=>{const v=await d(m);Array.isArray(v)&&x(v),typeof v=="string"&&n(v)};return A.useEffect(()=>{c!=null&&c.address&&a(c==null?void 0:c.address)},[c==null?void 0:c.address]),A.useEffect(()=>{r&&(c!=null&&c.address)&&a(c==null?void 0:c.address)},[r]),wr({onRpcChange:()=>{c!=null&&c.address&&a(c==null?void 0:c.address)}}),{data:A.useMemo(()=>{if(u){const m=s[u.toLowerCase()||""];return m?m==null?void 0:m.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:f,posBaseListLoading:e,currentAccount:c,onWalletModal:o}}function Ai(){const e=De(),{apiPoolInfo:s}=J(),{currentAccount:r,posBaseListLoading:c,data:o,rpcNodeErrorStr:d,onWalletModal:x}=fi();return t.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((f,n)=>t.jsx(Rr,{},n)):o&&(o==null?void 0:o.length)>0?o==null?void 0:o.map((f,n)=>t.jsx(Cr,{positionInfo:f},f==null?void 0:f.posId)):d?t.jsx(He,{type:"nodata",text:d}):t.jsx(He,{type:"nodata",text:"You don't have positions for this pool",children:t.jsx(xe,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>e(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):t.jsx(He,{type:"nowallet",onboard:()=>x(!0)})})}const ji=(e,s)=>({fromAmount:"",setFromAmount:r=>{e(()=>({fromAmount:r}))},fromAmountValue:"",setFromAmountValue:r=>{e(()=>({fromAmountValue:r}))},toAmount:"",setToAmount:r=>{e(()=>({toAmount:r}))},toAmountValue:"",setToAmountValue:r=>{e(()=>({toAmountValue:r}))},liquidityAmount:"",setLiquidityAmount:r=>{e(()=>({liquidityAmount:r}))},tokenMaxA:"",setTokenMaxA:r=>{e(()=>({tokenMaxA:r}))},tokenMaxB:"",setTokenMaxB:r=>{e(()=>({tokenMaxB:r}))},byAmountIn:!0,setByAmountIn:r=>{e(()=>({byAmountIn:r}))},isTokenA:!0,setIsTokenA:r=>{e(()=>({isTokenA:r}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:r=>{e(()=>({percentMap:r}))},isFullRange:!1,setIsFullRange:r=>{e(()=>({isFullRange:r}))},fromToken:void 0,setFromToken:r=>{e(()=>({fromToken:r}))},fromTokenLock:!1,setFromTokenLock:r=>{e(()=>({fromTokenLock:r}))},toToken:void 0,setToToken:r=>{e(()=>({toToken:r}))},toTokenLock:!1,setToTokenLock:r=>{e(()=>({toTokenLock:r}))},totalAmount:void 0,setTotalAmount:r=>{e(()=>({totalAmount:r}))},autoStakePosition:!1,setAutoStakePosition:r=>{e(()=>({autoStakePosition:r}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:r=>{e(()=>({isFarmRewardsRange:r}))},resetAddLiquidity:()=>{e(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),Ce=Yt(ji);function Si(e){var g,j;const{onClose:s,onSubmit:r,data:{feeTier:c}}=e,{fromToken:o,toToken:d,fromAmount:x,toAmount:f,totalAmount:n,percentMap:u,fromTokenLock:a,toTokenLock:l}=Ce(),{lowerTickData:m,upperTickData:v}=Re(),{currentPriceData:C,apiPoolInfo:w}=J(),{setIsChecked:L}=jt(),[p,y]=A.useState(!0),i=A.useMemo(()=>{var _;return((_=w==null?void 0:w.tokenA)==null?void 0:_.coin_type)===(o==null?void 0:o.coin_type)?!p:!!p},[w,o,d,p]),b=A.useMemo(()=>p?`${X(d==null?void 0:d.symbol,10)} per ${X(o==null?void 0:o.symbol,10)}`:`${X(o==null?void 0:o.symbol,10)} per ${X(d==null?void 0:d.symbol)}`,[p,o==null?void 0:o.symbol,d==null?void 0:d.symbol]),R=ys(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:h}=jt();return t.jsxs(Jt,{isOpen:!0,onClose:()=>{s(),L(!1)},isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{children:[t.jsx(es,{children:t.jsx(Ne,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),t.jsx(Zs,{}),t.jsx(ts,{textAlign:"center",p:"0px",children:t.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[t.jsxs(q,{w:"100%",justifyContent:"space-between",h:"40px",children:[t.jsxs(q,{children:[t.jsx(ss,{coinACoinType:o==null?void 0:o.coin_type,coinBCoinType:d==null?void 0:d.coin_type,coinAIconUrl:o==null?void 0:o.logo_url,coinBIconUrl:d==null?void 0:d.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(B,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${X(o==null?void 0:o.symbol,10)} - ${X(d==null?void 0:d.symbol,10)}`})]}),t.jsx(Js,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:t.jsxs(q,{gap:"12px",children:[t.jsx(B,{whiteSpace:"nowrap",children:"Fee Tier"}),t.jsx(B,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),t.jsx(Tr,{coinA:{amount:x,...o},coinB:{amount:f,...d}}),t.jsxs(ee,{w:"100%",children:[t.jsxs(q,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),t.jsx(Fr,{isActive:!a&&!l,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),t.jsxs(q,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[t.jsx(B,{children:"Current Price"}),t.jsx(B,{as:"span",color:"text_caption",children:tt(i?C.reverseCurrentPrice:C==null?void 0:C.currentPrice,6)}),t.jsx(B,{children:b}),t.jsx(xe,{variant:"unstyled",onClick:()=>y(!p),children:t.jsx(ve,{xlinkHref:"#icon-icon_swap1"})})]}),t.jsxs(q,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[t.jsx(Kt,{title:"Min Price",price:tt(i?v==null?void 0:v.reversePrice:m==null?void 0:m.price,6),perText:b}),t.jsx(rs,{orientation:"vertical",h:"40px"}),t.jsx(Kt,{title:"Max Price",price:tt(i?m==null?void 0:m.reversePrice:v==null?void 0:v.price,6),perText:b})]})]}),t.jsx(de,{isLoading:!1,label:"Deposit Ratio",value:`${u[(o==null?void 0:o.coin_type)===((g=w==null?void 0:w.tokenA)==null?void 0:g.coin_type)?"percentA":"percentB"]}% ${X(o==null?void 0:o.symbol,10)} / ${u[(d==null?void 0:d.coin_type)===((j=w==null?void 0:w.tokenA)==null?void 0:j.coin_type)?"percentA":"percentB"]}% ${X(d==null?void 0:d.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),t.jsx(de,{isLoading:!1,label:"Total Amount",value:n&&+n?Ct(n):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!a&&!l&&!((m==null?void 0:m.price)==="0"&&(v==null?void 0:v.price)==="âˆž")&&h=="authenticated"&&t.jsx(Br,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),t.jsx(xe,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:R,children:"Add Liquidity"})]})})]})]})}const Kt=({title:e,price:s,perText:r})=>t.jsxs(W,{flex:"1",children:[t.jsx(B,{children:e}),t.jsx(B,{color:"text_caption",children:s}),t.jsx(B,{children:r})]});function _i(e,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:o}=Hr(),[d,x]=A.useState(!1),{currentPriceData:f,apiPoolInfo:n,contractPoolInfo:u}=J(),{lowerTickData:a,upperTickData:l}=Re(),{signAndExecuteTransaction:m,getTransactionStatus:v,transactionSuccess:C}=qr(),{mevProtect:w,maxCapForGas:L,transactionMode:p,customGasPrice:y}=Mr(),[i,b]=A.useState(!1),[R,h]=A.useState(!1),[g,j]=A.useState(""),{transactionConfirmation:_}=$r(),{fromAmount:k,setFromAmount:$,fromAmountValue:O,setFromAmountValue:M,toAmount:U,setToAmount:K,toAmountValue:I,setToAmountValue:Y,byAmountIn:D,setByAmountIn:Q,isTokenA:z,setIsTokenA:F,percentMap:G,setPercentMap:Z,isFullRange:re,setIsFullRange:ae,fromToken:S,setFromToken:E,toToken:T,setToToken:Ge,totalAmount:ws,setTotalAmount:ze,fromTokenLock:pe,setFromTokenLock:Ke,toTokenLock:ge,setToTokenLock:Qe,setTokenMaxA:Rs,setTokenMaxB:Cs,tokenMaxA:Ls,tokenMaxB:ks,autoStakePosition:Ts,liquidityAmount:Fs,setLiquidityAmount:Bs}=Ce(),{getTokenAmountValue:Xe}=is();Et(()=>{var H,ie;n&&F(((H=n==null?void 0:n.displayTokenA)==null?void 0:H.coin_type)===((ie=n==null?void 0:n.tokenA)==null?void 0:ie.coin_type))},[n]);const{isWhiteQuoteToken:Ms}=os(),{notifiSubscription:zs}=Ur(),{isChecked:Tt}=jt();Oe(()=>{if(re){Z({percentA:"50",percentB:"50"});return}if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&f.currentSqrtPrice){if(ne(a.tick).lte(u.current_tick_index)&&ne(l.tick).gt(u.current_tick_index)){const H=Ms(n.tokenA.coin_type)?n.tokenA:n.tokenB,ie=H.coin_type===n.tokenA.coin_type,ue=r({amount:Je("1",H.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ie,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0}),Ae=zr(ue.coinAmountA,ue.coinAmountB,f==null?void 0:f.currentPrice,re);Z(Ae);return}if(ne(a.tick).gt(u.current_tick_index)){Z({percentA:"100",percentB:"0"});return}if(ne(l.tick).lte(u.current_tick_index)){Z({percentA:"0",percentB:"100"});return}}},[JSON.stringify(n),f,a==null?void 0:a.tick,l==null?void 0:l.tick,re],{wait:300});const Es=({amount:H,isTokenA:ie,isFullRange:ue})=>{var Ae,Le,ke,Te;if(n&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&Object.keys(f).length>0&&(a==null?void 0:a.tick)!==void 0&&(l==null?void 0:l.tick)!==void 0&&S&&T){let V;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&ne(a==null?void 0:a.tick).lte(u==null?void 0:u.current_tick_index)&&ne(l==null?void 0:l.tick).gt(u==null?void 0:u.current_tick_index))V=r({amount:Je(H&&+H?H+"":"1",D?S==null?void 0:S.decimals:T==null?void 0:T.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:ie,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0});else if(pe&&!ge){const te=(T==null?void 0:T.coin_type)===((Ae=n==null?void 0:n.tokenA)==null?void 0:Ae.coin_type);V=r({amount:Je(H?H+"":"1",T==null?void 0:T.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:te,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else if(ge&&!pe){const te=(S==null?void 0:S.coin_type)===((Le=n==null?void 0:n.tokenA)==null?void 0:Le.coin_type);V=r({amount:Je(H?H+"":"1",S==null?void 0:S.decimals).toString(),tokenA:n==null?void 0:n.tokenA,tokenB:n==null?void 0:n.tokenB,isTokenA:te,lowerTick:a==null?void 0:a.tick,upperTick:l==null?void 0:l.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:n==null?void 0:n.isReverse,roundUp:!0})}else pe&&ge&&(V=ie?{coinAmountA:H?H+"":"1",coinAmountB:"",tokenMaxA:H?H+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:H?H+"":"1",tokenMaxA:"",tokenMaxB:H?H+"":"1"});if(Rs(V==null?void 0:V.tokenMaxA),Cs(V==null?void 0:V.tokenMaxB),H)if(ne(H).gt("0"))if(D){const te=(T==null?void 0:T.coin_type)===((ke=n==null?void 0:n.tokenA)==null?void 0:ke.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,me=Xe(S==null?void 0:S.coin_type,H+""),ye=Xe(T==null?void 0:T.coin_type,te),je=ne(me).plus(ye).toString();console.log(te,me,ye,je,"_totalAmountValue"),K(te||""),M(me),Y(ye),ze(je)}else{const te=(S==null?void 0:S.coin_type)===((Te=n==null?void 0:n.tokenA)==null?void 0:Te.coin_type)?V==null?void 0:V.coinAmountA:V==null?void 0:V.coinAmountB,me=Xe(S==null?void 0:S.coin_type,te),ye=Xe(T==null?void 0:T.coin_type,H+""),je=ne(me).plus(ye).toString();console.log(te,me,ye,je,"_totalAmountValue"),M(me),Y(ye),$(te||""),ze(je)}else D?(K(""),M(""),Y(""),ze("")):($(""),M(""),Y(""),ze(""));else $(""),K(""),M(""),Y(""),ze("");V&&Bs((V==null?void 0:V.liquidityAmount)||"")}};Oe(()=>{Es({amount:D?k:U,isTokenA:z,isFullRange:re})},[JSON.stringify(n),f,a==null?void 0:a.tick,l==null?void 0:l.tick,k,U,D,z,pe,ge,re],{wait:300});const qs=(H,ie,ue)=>{Q(ie),ie?$(H):K(H),F(ue!==void 0?ue:!1)},{balanceInfo:$s}=at(S),{balanceInfo:Ws}=at(T);Et(()=>{var H,ie;F(D?(S==null?void 0:S.coin_type)===((H=n==null?void 0:n.tokenA)==null?void 0:H.coin_type):(T==null?void 0:T.coin_type)===((ie=n==null?void 0:n.tokenA)==null?void 0:ie.coin_type))},[n,D,S,T]),A.useEffect(()=>{(a==null?void 0:a.tick)===rt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(l==null?void 0:l.tick)===rt.getMaxIndex(Number((l==null?void 0:l.tickSpacing)||0))?ae(!0):ae(!1)},[a==null?void 0:a.tick,l==null?void 0:l.tick]),A.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&se(a)&&se(l)&&(ne(a==null?void 0:a.tick).gte(ne(l.tick))?(Ke(!0),Qe(!0)):ne(a==null?void 0:a.tick).gt(u==null?void 0:u.current_tick_index)?(Ke(!s),Qe(!!s)):ne(l.tick).lte(u==null?void 0:u.current_tick_index)?(Ke(!!s),Qe(!s)):(Ke(!1),Qe(!1)))},[a==null?void 0:a.tick,l==null?void 0:l.tick,u,s]);const{currentAccount:Us,onWalletModal:Hs}=dt(),Ns=ys(()=>{Us?b(!0):Hs(!0)},300,{leading:!0,trailing:!1}),Vs=()=>{$(""),K(""),M(""),Y(""),ze("")},{fetchAccountBalance:Os}=us();return{percentMap:G,handleAmountChange:qs,fromToken:S,setFromToken:E,toToken:T,setToToken:Ge,byAmountIn:D,setByAmountIn:Q,fromAmount:k,fromAmountValue:O,setFromAmount:$,toAmount:U,toAmountValue:I,setToAmount:K,liquidityAmount:Fs,fromBalanceInfo:$s,toBalanceInfo:Ws,totalAmount:ws,fromTokenLock:pe,toTokenLock:ge,handleAdd:Ns,confirmModalOpen:i,setConfirmModalOpen:b,nftOpen:R,setNftOpen:h,relatedPosId:g,handleSubmit:async()=>{var ye,je,Ft;const H=D?k:U,ie=D?S==null?void 0:S.decimals:T==null?void 0:T.decimals,ue=ne(H).mul(Ps.pow(10,ie)).toString(),Ae=D&&(S==null?void 0:S.coin_type)===((ye=n==null?void 0:n.tokenA)==null?void 0:ye.coin_type)?!0:(T==null?void 0:T.coin_type)===((je=n==null?void 0:n.tokenA)==null?void 0:je.coin_type)&&!D;let Le,ke;const Te=a.tick,V=l.tick,te=u==null?void 0:u.current_tick_index;Te!==void 0&&V!==void 0&&te!==void 0&&(te>=Te&&te<=V?(Le=Ae?ue:Ls,ke=Ae?ks:ue):te>V?(Le=0,ke=ue):te<Te&&(Le=ue,ke=0));let me=[];if(u!=null&&u.index){const{rewarder_infos:le}=u;me=(le==null?void 0:le.length)>0&&(le==null?void 0:le.map(We=>We.coinAddress))||[]}try{const le={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:Le,amountB:ke,fixAmountA:Ae,lowerTick:Te,upperTick:V,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:me,farmsPoolId:n==null?void 0:n.farmsPoolAddress},We={getShowInfo:(P,Fe)=>{const Ye=!pe&&!ge?`Add ${k} ${S==null?void 0:S.symbol} and ${U} ${T==null?void 0:T.symbol}`:ge?pe?"Add Liquidity":`Add ${k} ${S==null?void 0:S.symbol}`:`Add ${U} ${T==null?void 0:T.symbol}`,Ze={modalDescriptionText:Ye,toastTitleText:Ye};if(P==="success"){let gt=k,mt=U;Fe&&(gt=qt(Fe,S)||k,mt=qt(Fe,T)||U);const Bt=!pe&&!ge?`Add ${gt} ${S==null?void 0:S.symbol} and ${mt} ${T==null?void 0:T.symbol}`:!pe&&ge?`Add ${gt} ${S==null?void 0:S.symbol}`:!ge&&pe?`Add ${mt} ${T==null?void 0:T.symbol}`:"Add Liquidity";Ze.toastDescriptionContent=Bt,Ze.modalDescriptionText=Bt,Ze.toastTitleText="Supplied Successful"}return Ze}};_(We);let xt,pt;if(Ts){const P=await o(le);xt=P==null?void 0:P.tx,pt=P==null?void 0:P.msafeParams}else{const P=await c(le);xt=P==null?void 0:P.tx,pt=P==null?void 0:P.msafeParams}let he=await m(xt,We,{useDevInspect:!0,useMev:w,showSuccessModal:!1,useFastMode:p==="Fast Mode",maxCapForGas:L,customGasPrice:y,msafeParams:pt});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Tt),((Ft=he==null?void 0:he.events)==null?void 0:Ft.length)===0&&(he=await v(he.digest));const{posId:P,farmsPosId:Fe}=Is(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:P,farmsPosId:Fe}),P?(h(!0),j(Fe||P)):C(We),Tt){const Ye={subscriptionSource:"AddLiquidity",events:he.events};zs(Ye)}Os(),Vs(),e()}}catch(le){throw console.error(le,"handleSubmit ~ error"),new Error(le)}}}}function vi(){const{fromAmount:e,toAmount:s,fromToken:r,toToken:c,fromTokenLock:o,toTokenLock:d,liquidityAmount:x}=Ce(),{currentAccount:f}=dt(),{balanceInfo:n}=at(r),{balanceInfo:u}=at(c),a=A.useMemo(()=>{const l={text:"Add Liquidity",disabled:!1};return f!=null&&f.address?!o&&!d&&(!e||!s||e&&!+e||s&&!+s)||o&&!d&&(!s||s&&!+s)||d&&!o&&(!e||e&&!+e)?(l.text="Enter an amount",l.disabled=!0,l):e&&+e&&N(e).gt((n==null?void 0:n.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(r==null?void 0:r.symbol,10)} Balance`,l):s&&+s&&N(s).gt((u==null?void 0:u.balanceFormat)||0)?(l.disabled=!0,l.text=`Insufficient ${X(c==null?void 0:c.symbol,10)} Balance`,l):((!o&&!d&&(!e||!s)||N(x).lte("0"))&&(l.disabled=!0),l):(l.text="Connect Wallet",l.disabled=!1,l)},[f==null?void 0:f.address,e,s,n==null?void 0:n.balanceDisplay,u==null?void 0:u.balanceDisplay,r,c,o,d,x]);return{btnText:a.text,btnDisabled:a.disabled}}function wi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="âˆž"?Zt(1/(1-Number(N(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function Ri({rangeTabList:e}){var O;const{apiPoolInfo:s}=J(),{fromToken:r,toToken:c,setFromToken:o,setToToken:d,byAmountIn:x,setByAmountIn:f,setIsFarmRewardsRange:n,setAutoStakePosition:u,fromTokenLock:a,toTokenLock:l,fromAmount:m,toAmount:v,setFromAmount:C,setToAmount:w}=Ce(),{lowerTickData:L,upperTickData:p}=Re(),[y,i]=A.useState(),{handleInitTickData:b}=ut(),{getLeverage:R}=wi();A.useEffect(()=>{var M;s&&i((M=s==null?void 0:s.displayTokenA)==null?void 0:M.coin_type)},[s==null?void 0:s.poolAddress]);const h=A.useMemo(()=>{var M;return y===((M=s==null?void 0:s.tokenA)==null?void 0:M.coin_type)},[y,(O=s==null?void 0:s.tokenA)==null?void 0:O.coin_type]),g=A.useMemo(()=>{var M,U,K,I;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":h?`${X((M=s==null?void 0:s.tokenB)==null?void 0:M.symbol,10)} per ${X((U=s==null?void 0:s.tokenA)==null?void 0:U.symbol,10)}`:`${X((K=s==null?void 0:s.tokenA)==null?void 0:K.symbol,10)} per ${X((I=s==null?void 0:s.tokenB)==null?void 0:I.symbol,10)}`},[h,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);A.useEffect(()=>{se(s)&&(o(s==null?void 0:s.displayTokenA),d(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const j=A.useMemo(()=>{const M=L==null?void 0:L.price,U=p==null?void 0:p.price;return R(M,U)},[L==null?void 0:L.price,p==null?void 0:p.price]),_=M=>{n(M.target.checked),M.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&b(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};A.useEffect(()=>{N(L==null?void 0:L.tick).eq(N(s==null?void 0:s.farmsEffectiveTickLower))&&N(p==null?void 0:p.tick).eq(N(s==null?void 0:s.farmsEffectiveTickUpper))?n(!0):n(!1)},[L==null?void 0:L.tick,p==null?void 0:p.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const k=A.useMemo(()=>(L==null?void 0:L.price)==="0"&&(p==null?void 0:p.price)==="âˆž",[L==null?void 0:L.price,p==null?void 0:p.price]),$=M=>{var U;M&&(M!=null&&M.coin_type)?i(M==null?void 0:M.coin_type):i((U=e==null?void 0:e.find(K=>K.key!==y))==null?void 0:U.key),o(c),d(r),f(!x),x?(w(m),C("")):(C(v),w(""))};return A.useEffect(()=>{s!=null&&s.haveFarming&&u(!(a||l))},[a,l,s==null?void 0:s.haveFarming]),A.useEffect(()=>{x&&a&&!l&&(C(""),w("")),!x&&!a&&l&&(C(""),w("")),x&&!a&&l&&w(""),!x&&a&&!l&&C(""),a&&l&&(C(""),w(""))},[a,l]),{direct:h,perText:g,handleChangeIsFarmRewardsRange:_,onReverseClick:$,leverage:j,currentRangeTab:y,isFullRange:k}}function Ci({onClose:e,posId:s,tokenA:r,tokenB:c,fee:o,isReverse:d}){const x=De(),[f,n]=A.useState(!0),{lowerTickData:u,upperTickData:a}=Re();return A.useLayoutEffect(()=>{d&&n(!1)},[d]),t.jsxs(Jt,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:e,isCentered:!0,children:[t.jsx(Pt,{}),t.jsxs(It,{w:"400px",children:[t.jsx(es,{children:t.jsxs(q,{justify:"space-between",w:"100%",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),t.jsx(xe,{onClick:e,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:t.jsx(ve,{xlinkHref:"#icon-icon_close"})})]})}),t.jsx(ts,{children:t.jsxs(W,{gap:"36px",children:[t.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[t.jsx(ss,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),t.jsxs(B,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[X(r==null?void 0:r.symbol,10)," - ",X(c==null?void 0:c.symbol,10)]}),t.jsxs(q,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[t.jsx(B,{fontSize:"14px",children:"Fee tier"}),t.jsx(B,{fontSize:"14px",color:"text_highlight",children:o})]})]}),t.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[t.jsxs(B,{color:"text_caption",whiteSpace:"nowrap",children:[f?fe(u==null?void 0:u.price,6):fe(a==null?void 0:a.reversePrice,6)," -Â ",f?fe(a==null?void 0:a.price,6):fe(u==null?void 0:u.reversePrice,6)]}),t.jsxs(q,{children:[t.jsxs(q,{gap:"0",children:[t.jsx(B,{color:"primary_gray",children:X(f?d?r==null?void 0:r.symbol:c==null?void 0:c.symbol:d?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),t.jsx(B,{color:"primary_gray",children:"Â perÂ "}),t.jsx(B,{color:"primary_gray",children:X(f?d?c==null?void 0:c.symbol:r==null?void 0:r.symbol:d?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),t.jsx(ve,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:l=>{Lt(l),n(!f)}})]})]})]})}),t.jsx(er,{p:"20px 0 0",children:t.jsx(xe,{flex:"1",onClick:()=>x(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function As({perText:e,direct:s,minPriceData:r,maxPriceData:c,isFullRange:o=!1}){const{tickDataLoading:d}=Re(),{handleAddPrice:x,handleSubPrice:f,setTickDataBasedOnPrice:n}=ut();return t.jsxs(oe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[t.jsx(Ut,{title:"Min Price",perText:e,data:r,direct:s,loading:d,handleAddPrice:x,handleSubPrice:f,setTickDataBasedOnPrice:n,isFullRange:o}),t.jsx(Ut,{title:"Max Price",perText:e,data:c,direct:s,loading:d,handleAddPrice:x,handleSubPrice:f,setTickDataBasedOnPrice:n,isFullRange:o})]})}const js=({minPrice:e,maxPrice:s,perText:r,checked:c,onChange:o,loading:d})=>t.jsxs(q,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[t.jsxs(oe,{flexDir:{base:"column",lg:"row"},children:[t.jsxs(q,{children:[t.jsx(ls,{tooltip:t.jsxs(ee,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",t.jsx(ee,{as:"a",color:"primary",onClick:x=>{Lt(x),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),t.jsx(B,{children:"Farm rewards range"})]}),t.jsxs(q,{children:[d?t.jsx(Ve,{w:"120px",h:"14px"}):t.jsxs(B,{color:"primary_yellow",children:[e,"Â -Â ",s]}),t.jsx(B,{children:r})]})]}),t.jsx(St,{isChecked:c,onChange:o})]}),Ss=({disabled:e,checked:s,onChange:r})=>t.jsxs(q,{p:{base:"20px 8px",lg:"24px 24px 24px 16px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"0 0 20px 20px",lg:"20px"},bg:"bg_six",gap:"12px",children:[t.jsx(ls,{flex:"0 0 24px",h:"24px"}),t.jsx(B,{lineHeight:"20px",color:"text_caption",children:"Automatically stake your position into the farm to enjoy higher yield."}),e?t.jsx(st,{tooltip:t.jsxs(W,{gap:"4px",align:"flex-start",children:[t.jsx(B,{fontSize:"12px",children:"Farming rewards only available"}),t.jsx(B,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:t.jsx(St,{isChecked:s,disabled:e,onChange:r})}):t.jsx(St,{isChecked:s,disabled:e,onChange:r})]}),Li=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function _s({direct:e,rangeMap:s,wrapStyle:r={}}){const[c,o]=A.useState({type:"30D",key:"30_d"}),{minPriceForDate:d,maxPriceForDate:x,setMinPriceForDate:f,setMaxPriceForDate:n}=J();A.useEffect(()=>{let a="";if(se(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],v=e?m:N(1).div(m).toString();a=fe(v,6)}else a="-";f(a);let l="";if(se(s)){const m=s[`before_${c==null?void 0:c.key}_contract_price_highest`],v=e?m:N(1).div(m).toString();l=fe(v,6)}else l="-";n(l)},[e,c.key,s]);const{isApp:u}=we();return t.jsxs(q,{w:"100%",justify:"space-between",...r,children:[t.jsxs(oe,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(q,{children:[t.jsx($e,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:t.jsx(rs,{w:"14px",border:"1px dashed"})}),t.jsxs(B,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),t.jsxs(B,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[e?d:x,"Â -Â ",e?x:d]})]}),t.jsx(Be,{type:"outlineTab",tabList:Li,currentTab:c,handleChangeTab:a=>{o({type:a.label,key:a.key})},isActive:(a,l)=>a.key===l.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function ki(){const{fetchByApi:e}=_t(),[s,r]=A.useState(""),c=async n=>{var u,a,l,m;try{const C=await e(ur,"GET",{pool:n}),w=((a=(u=C==null?void 0:C.list)==null?void 0:u[0])==null?void 0:a.recommend_ranges)||{},L=((m=(l=C==null?void 0:C.list)==null?void 0:l[0])==null?void 0:m.type)||"";console.log("ðŸš€ðŸš€ðŸš€ ~ getRecommendRanges ~ type:",L);const p={};if(w)for(const y in w){const i=w[y];(i!=null&&i.lower||i!=null&&i.upper)&&(p[y]={lower:i.lower,upper:i.upper})}return{ranges:p,type:L}}catch(v){return console.error("Error in getRecommendRanges:",v),{ranges:{},type:""}}},o=(n,u)=>({default:{lower:n,upper:u,sort:3}}),d=n=>({"full range":{lower:rt.getMinIndex(n),upper:rt.getMaxIndex(n),sort:2}}),x=(n,u,a)=>{const l=N(a).mul(u==="unstable"?2:3).toNumber(),m=tr(Number(n),Number(a));return{custom:{lower:N(m).sub(l).toNumber(),upper:N(m).add(l).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async n=>{try{const u=n.farmsEffectTickLower&&n.farmsEffectTickUpper?o(n.farmsEffectTickLower,n.farmsEffectTickUpper):null,a=n.farmsEffectTickLower&&n.farmsEffectTickUpper?{ranges:{},type:""}:await c(n.poolAddress);r(a.type);const l=d(n.tickSpacing),m=x(n.currentTick,a.type,n.tickSpacing),v={...u,...a.ranges,...l,...m},C=Object.entries(v).map(([w,L])=>({key:w,...L})).sort((w,L)=>L.sort-w.sort);return se(a.ranges)||se(u)?{rangeList:C,error:!1}:{rangeList:C,error:!0}}catch(u){return console.error("Error in getRecommendRangesList:",u),{rangeList:[],error:!0}}},poolType:s}}const bt=(e,s=!1)=>{switch(e){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Ti=e=>{switch(e){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Fi={1:"100%",2:"50%",3:"33.33%",4:"50%"};function vs(e){const{getRecommendRangesList:s}=ki(),[r,c]=A.useState(),{poolAddress:o,currentTick:d,tickSpacing:x,farmsEffectTickLower:f,farmsEffectTickUpper:n}=e;we();const{handleInitTickData:u}=ut(),{apiPoolInfo:a,currentRange:l,setCurrentRange:m}=J(),{lowerTickData:v,upperTickData:C,setLowerTickData:w,setUpperTickData:L,setTickDataLoading:p,tickDataLoading:y}=Re(),i=async()=>{var b,R,h;try{l||p(!0);const{rangeList:g,error:j}=await s(e);if(c(g),j){if(m("custom"),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)){const _=g.find(k=>k.key==="custom");_&&u(_==null?void 0:_.lower,_==null?void 0:_.upper,a)}}else m((b=g[0])==null?void 0:b.key),!l&&(a!=null&&a.tokenA)&&(a!=null&&a.tokenB)&&u((R=g[0])==null?void 0:R.lower,(h=g[0])==null?void 0:h.upper,a)}catch(g){console.error(g)}finally{p(!1)}};return Oe(()=>{o&&d!==void 0&&x!==void 0&&i()},[o,x],{wait:500}),A.useEffect(()=>{if(r&&r.length>0&&se(v)&&se(C)){const b=r==null?void 0:r.find(R=>N(R.lower).eq(N(v==null?void 0:v.tick))&&N(R.upper).eq(N(C==null?void 0:C.tick)));b?b.key!==l&&m(b.key):m("custom")}},[v==null?void 0:v.tick,C==null?void 0:C.tick,r]),t.jsx(t.Fragment,{children:t.jsx(sr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((b,R)=>{var h,g;return t.jsx(rr,{label:Ti(b.key),lineHeight:"1.5",placement:"top",gutter:-4,children:t.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Fi[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{b.key!==l&&(m(b.key),a!=null&&a.tokenA&&(a!=null&&a.tokenB)&&u(b.lower,b.upper,a))},bg:b.key==l?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[t.jsx($t,{decoding:"async",display:b.key===l?"block":"none",src:`/images/${(h=bt(b.key,!0))==null?void 0:h.image}`,w:"72px",h:b.key===l?"22px":"0px",fallback:t.jsx(ee,{bg:"background",w:"72px",h:b.key===l?"22px":"0px",borderRadius:"4px"})}),t.jsx($t,{decoding:"async",display:b.key===l?"none":"block",src:`/images/${(g=bt(b.key,!1))==null?void 0:g.image}`,w:"72px",h:b.key===l?"0px":"22px",fallback:t.jsx(ee,{bg:"background",w:"72px",h:b.key===l?"0px":"22px",borderRadius:"4px"})}),t.jsx(B,{color:b.key==l?"primary":"primary_gray",fontSize:"12px",children:bt(b.key).name})]})},b.key)})})})}function Bi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:o,direct:d,perText:x,rangeTabList:f,currentRangeTab:n,addressHistTokensMap:u,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:v,handleAmountChange:C,handleAdd:w,isFullRange:L}){var ae;const{currentPriceData:p,contractPoolInfo:y,apiPoolInfo:i,resetLiquidity:b,contractPoolInfoLoading:R,apiPoolInfoLoading:h,minPriceForDate:g,maxPriceForDate:j}=J(),{lowerTickData:_,upperTickData:k}=Re(),{autoStakePosition:$,setAutoStakePosition:O,isFarmRewardsRange:M,fromAmount:U,toAmount:K,byAmountIn:I,percentMap:Y,fromToken:D,toToken:Q,totalAmount:z,fromTokenLock:F,toTokenLock:G}=Ce(),{poolAddress:Z}=ce(),re=S=>{O(S.target.checked)};return A.useMemo(()=>!!(i!=null&&i.haveFarming)&&!!(i!=null&&i.displayFarmsEffectMaxPrice)&&!!(i!=null&&i.displayFarmsEffectMinPrice),[i==null?void 0:i.haveFarming,i==null?void 0:i.displayFarmsEffectMaxPrice,i==null?void 0:i.displayFarmsEffectMinPrice]),t.jsxs(ee,{w:"100%",children:[t.jsx(Ne,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),t.jsx(vs,{poolAddress:Z,currentTick:y==null?void 0:y.current_tick_index,tickSpacing:y==null?void 0:y.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper}),h?t.jsx(Ve,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):t.jsx(Be,{type:"outlineTab",tabList:f,currentTab:n,handleChangeTab:S=>c(S),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),t.jsx(ps,{price:ns(d?p==null?void 0:p.currentPrice:p.reverseCurrentPrice,6),perText:x,loading:R,wrapStyle:{mt:"28px",gap:"12px"}}),t.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:d,minPriceData:d?_:k,maxPriceData:d?k:_,dashedMarkerLine:[g,j]})}),t.jsx(_s,{direct:d,rangeMap:u,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),t.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[t.jsx(As,{perText:x,direct:d,isFullRange:L,minPriceData:d?_:k,maxPriceData:d?k:_}),F&&G&&t.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),t.jsxs(W,{mb:"20px",gap:"16px",children:[t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:t.jsx(B,{color:"text_caption",children:F&&G?"--":o})}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(js,{minPrice:d?it(i==null?void 0:i.displayFarmsEffectMinPrice):nt(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?it(i==null?void 0:i.displayFarmsEffectMaxPrice):nt(i==null?void 0:i.displayFarmsEffectMinPrice),loading:h,perText:x,checked:M,onChange:r})]}),t.jsxs(ee,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:[t.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[t.jsxs(q,{w:"100%",justify:"space-between",children:[t.jsx(Ne,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),t.jsx(q,{children:t.jsx(xs,{})})]}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsxs(ee,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:U+"",amountValue:m,loading:!1,onChange:S=>{var E;C(S,!0,(D==null?void 0:D.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:D,onFocusChange:S=>{var E;S&&+(U+"")&&!I&&C(U+"",!0,(D==null?void 0:D.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:K+"",amountValue:v,loading:!1,onFocusChange:S=>{var E;S&&+(K+"")&&I&&C(K+"",!1,(Q==null?void 0:Q.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},onChange:S=>{var E;C(S,!1,(Q==null?void 0:Q.coin_type)===((E=i==null?void 0:i.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:Q},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),F&&G&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((ae=[F,G].filter(Boolean))==null?void 0:ae.length)===1&&t.jsx(ct,{position:"absolute",top:F?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(i!=null&&i.poolAddress)&&t.jsx(t.Fragment,{children:t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[t.jsx(de,{isLoading:!1,label:"Total Amount",value:z&&+z?Ct(z):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:t.jsx(W,{justify:"flex-end",gap:"4px",children:[D,Q].filter(Boolean).map((S,E)=>{var T;return t.jsxs(q,{gap:"4px",justify:"flex-end",w:"100%",children:[t.jsx(Me,{imageUrl:S==null?void 0:S.logo_url,coinType:S==null?void 0:S.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(B,{color:E===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(S==null?void 0:S.symbol,10),"Â ",F&&G?"--":Y[(S==null?void 0:S.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type)?"percentA":"percentB"],"%"]})]},S==null?void 0:S.coin_type)})})})]})})]}),!!(i!=null&&i.poolAddress)&&t.jsx(xe,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:w,children:e})]}),(i==null?void 0:i.haveFarming)&&t.jsx(Ss,{disabled:F||G,checked:$,onChange:re})]})]})}function Qt({children:e,title:s,wrapStyle:r={}}){return t.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[t.jsxs(q,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(B,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),e==null?void 0:e[0]]}),e==null?void 0:e[1]]})}function Mi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:o,direct:d,perText:x,rangeTabList:f,currentRangeTab:n,addressHistTokensMap:u,fromBalanceInfo:a,toBalanceInfo:l,fromAmountValue:m,toAmountValue:v,handleAmountChange:C,handleAdd:w,isFullRange:L}){var S;const{currentPriceData:p,contractPoolInfo:y,apiPoolInfo:i,resetLiquidity:b,contractPoolInfoLoading:R,apiPoolInfoLoading:h,minPriceForDate:g,maxPriceForDate:j,currentRange:_}=J(),{lowerTickData:k,upperTickData:$}=Re(),{autoStakePosition:O,setAutoStakePosition:M,isFarmRewardsRange:U,fromAmount:K,toAmount:I,byAmountIn:Y,percentMap:D,fromToken:Q,toToken:z,totalAmount:F,fromTokenLock:G,toTokenLock:Z}=Ce(),{poolAddress:re}=ce(),ae=E=>{M(E.target.checked)};return t.jsx(t.Fragment,{children:t.jsxs(q,{gap:"12px",align:"flex-start",children:[t.jsxs(Qt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!f||!f.length?t.jsx(Ve,{h:"32px",borderRadius:"8px",w:"180px"}):t.jsx(Be,{type:"outlineTab",tabList:f,currentTab:n,handleChangeTab:E=>c(E),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsx(q,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:t.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[t.jsx(q,{w:"100%",h:"24px",justify:"flex-start",children:t.jsx(ps,{loading:h,price:se(p)?ns(d?p==null?void 0:p.currentPrice:p.reverseCurrentPrice,6):"--",perText:x,wrapStyle:{ml:"156px",zIndex:99}})}),t.jsxs(q,{w:"100%",gap:"32px",children:[t.jsxs(W,{gap:"20px",children:[t.jsx($e,{h:"226px",mt:"10px",children:t.jsx(vs,{poolAddress:re,currentTick:y==null?void 0:y.current_tick_index,tickSpacing:y==null?void 0:y.tickSpacing,farmsEffectTickLower:i==null?void 0:i.farmsEffectiveTickLower,farmsEffectTickUpper:i==null?void 0:i.farmsEffectiveTickUpper})}),se(k)&&se($)&&t.jsx(t.Fragment,{children:t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:t.jsx(B,{color:"text_caption",children:G&&Z?"--":o})})})]}),t.jsxs(W,{w:"100%",gap:"32px",children:[t.jsx(ee,{w:"100%",h:"230px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:d,minPriceData:d?k:$,maxPriceData:d?$:k,dashedMarkerLine:[g,j],currentRange:_})}),se(k)&&se($)&&t.jsx(_s,{direct:d,rangeMap:u,wrapStyle:{w:"100%"}})]})]})]})}),t.jsx(As,{perText:x,direct:d,isFullRange:L,minPriceData:d?k:$,maxPriceData:d?$:k}),G&&Z&&t.jsx($e,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(i==null?void 0:i.haveFarming)&&(i==null?void 0:i.displayFarmsEffectMaxPrice)&&(i==null?void 0:i.displayFarmsEffectMinPrice)&&t.jsx(js,{minPrice:d?it(i==null?void 0:i.displayFarmsEffectMinPrice):nt(i==null?void 0:i.displayFarmsEffectMaxPrice),maxPrice:d?it(i==null?void 0:i.displayFarmsEffectMaxPrice):nt(i==null?void 0:i.displayFarmsEffectMinPrice),loading:h,perText:x,checked:U,onChange:r})]})]}),t.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[t.jsxs(Qt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[t.jsx(q,{children:t.jsx(xs,{})}),t.jsxs(ee,{w:"100%",position:"relative",children:[t.jsx(gs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(a==null?void 0:a.balanceFormat)||"",value:K,amountValue:m,loading:!1,onChange:E=>{var T;C(E,!0,(Q==null?void 0:Q.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},selectable:!1,placeholder:"0.0",token:Q,onFocusChange:E=>{var T;E&&+(K+"")&&!Y&&C(K+"",!0,(Q==null?void 0:Q.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(l==null?void 0:l.balanceFormat)||"",value:I,amountValue:v,loading:!1,onFocusChange:E=>{var T;E&&+(I+"")&&Y&&C(I+"",!1,(z==null?void 0:z.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},onChange:E=>{var T;C(E,!1,(z==null?void 0:z.coin_type)===((T=i==null?void 0:i.tokenA)==null?void 0:T.coin_type))},selectable:!1,placeholder:"0.0",token:z},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),G&&Z&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((S=[G,Z].filter(Boolean))==null?void 0:S.length)===1&&t.jsx(ct,{position:"absolute",top:G?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),t.jsxs(t.Fragment,{children:[t.jsx(W,{w:"100%",gap:"8px",children:!!(i!=null&&i.poolAddress)&&(!G||!Z)&&t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:i!=null&&i.displayTokenA&&(i!=null&&i.displayTokenB)?"0 16px 16px":"0 16px",children:[t.jsx(xe,{w:"calc(100% + 34px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:w,children:e}),(i==null?void 0:i.displayTokenA)&&(i==null?void 0:i.displayTokenB)&&t.jsxs(t.Fragment,{children:[t.jsx(de,{isLoading:!1,label:"Total Amount",value:F&&+F?Ct(F):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:t.jsx(q,{gap:"12px",children:[Q,z].filter(Boolean).map((E,T)=>{var Ge;return t.jsxs(q,{gap:"4px",children:[t.jsx(Me,{imageUrl:E==null?void 0:E.logo_url,coinType:E?E==null?void 0:E.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(B,{color:T===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[X(E==null?void 0:E.symbol,10),"Â ",G&&Z?"--":D[(E==null?void 0:E.coin_type)===((Ge=i==null?void 0:i.tokenA)==null?void 0:Ge.coin_type)?"percentA":"percentB"],"%"]})]},E==null?void 0:E.coin_type)})})})]})]})}),(i==null?void 0:i.haveFarming)&&t.jsx(Ss,{disabled:G||Z,checked:O,onChange:ae})]})]})]})})}function zi({rangeTabList:e,currentFeeTier:s,addressHistTokensMap:r,getList:c,getPrice:o}){const{apiPoolInfo:d}=J(),{direct:x,perText:f,handleChangeIsFarmRewardsRange:n,onReverseClick:u,leverage:a,currentRangeTab:l,isFullRange:m}=Ri({rangeTabList:e}),{handleAmountChange:v,fromAmountValue:C,toAmountValue:w,fromBalanceInfo:L,toBalanceInfo:p,confirmModalOpen:y,setConfirmModalOpen:i,relatedPosId:b,nftOpen:R,setNftOpen:h,handleAdd:g,handleSubmit:j}=_i(c,x),{btnText:_,btnDisabled:k}=vi(),{isApp:$}=we(),O={btnText:_,btnDisabled:k,handleChangeIsFarmRewardsRange:n,onReverseClick:u,leverage:a,direct:x,perText:f,rangeTabList:e,currentRangeTab:l,addressHistTokensMap:r,fromBalanceInfo:L,toBalanceInfo:p,fromAmountValue:C,toAmountValue:w,handleAmountChange:v,handleAdd:g,isFullRange:m};return t.jsxs(t.Fragment,{children:[$?t.jsx(Bi,{...O}):t.jsx(Mi,{...O}),y&&t.jsx(Si,{onClose:()=>i(!1),data:{feeTier:s},onSubmit:j}),R&&b&&se(d)&&t.jsx(Ci,{onClose:()=>h(!1),tokenA:d==null?void 0:d.displayTokenA,tokenB:d==null?void 0:d.displayTokenB,posId:b,fee:d==null?void 0:d.feeDisplay,isReverse:d==null?void 0:d.isReverse})]})}const Xt=(e,s,r)=>e&&s&&r?N(e).mul(s).div(N(10).pow(r)).toString():"--";function Ei(){var h,g;const{tokenAPrice:e,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:o,setTokenAAmount:d,tokenBAmount:x,setTokenBAmount:f,tokenAAmountUSD:n,setTokenAAmountUSD:u,tokenBAmountUSD:a,setTokenBAmountUSD:l,totalAmountUSD:m,setTotalAmountUSD:v,resetTvlInfo:C,tvlLoading:w,setTvlLoading:L}=ot(),{apiPoolInfo:p,contractPoolInfo:y}=J(),i=async j=>{var _,k;try{const $=(_=be(j))==null?void 0:_.full_address,O=$=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":$,{prices:M}=await ir(`${(k=nr)==null?void 0:k.cetus_api}/v2/sui/price?base_symbol_address=${O}`);return M==null?void 0:M[0]}catch($){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",$),"--"}},{poolAddress:b}=ce(),R=async()=>{var j,_,k,$;L(!0);try{if((j=p==null?void 0:p.tokenA)!=null&&j.coin_type){const O=await i((_=p==null?void 0:p.tokenA)==null?void 0:_.coin_type);O&&s(O)}if((k=p==null?void 0:p.tokenB)!=null&&k.coin_type){const O=await i(($=p==null?void 0:p.tokenB)==null?void 0:$.coin_type);O&&c(O)}}catch(O){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",O)}finally{L(!1)}};return A.useEffect(()=>{C()},[b]),A.useEffect(()=>()=>{C()},[]),A.useEffect(()=>{R()},[p==null?void 0:p.tvl,(h=p==null?void 0:p.tokenA)==null?void 0:h.coin_type,(g=p==null?void 0:p.tokenB)==null?void 0:g.coin_type]),A.useEffect(()=>{y!=null&&y.coinAmountA&&d(N(y==null?void 0:y.coinAmountA).sub((y==null?void 0:y.fee_protocol_coin_a)||"0").toString())},[y==null?void 0:y.coinAmountA,y==null?void 0:y.fee_protocol_coin_a]),A.useEffect(()=>{y!=null&&y.coinAmountB&&f(N(y==null?void 0:y.coinAmountB).sub((y==null?void 0:y.fee_protocol_coin_b)||"0").toString())},[y==null?void 0:y.coinAmountB,y==null?void 0:y.fee_protocol_coin_b]),A.useEffect(()=>{o&&(e!=null&&e.price)&&(p!=null&&p.tokenA.decimals)&&!Number.isNaN(Number(p==null?void 0:p.tokenA.decimals))&&u(Xt(o,e==null?void 0:e.price,p==null?void 0:p.tokenA.decimals))},[o,e]),A.useEffect(()=>{x&&(r!=null&&r.price)&&(p!=null&&p.tokenB.decimals)&&!Number.isNaN(Number(p==null?void 0:p.tokenB.decimals))&&l(Xt(x,r==null?void 0:r.price,p==null?void 0:p.tokenB.decimals))},[x,r]),A.useEffect(()=>{v(n&&a&&n!=="--"&&a!=="--"?N(n).plus(a).toString():"--")},[n,a]),{tokenAPrice:e,tokenBPrice:r,tokenAAmount:o,tokenBAmount:x,tokenAAmountUSD:n,tokenBAmountUSD:a,totalAmountUSD:m,setTotalAmountUSD:v,tvlLoading:w}}function qi(){const{tab:e,poolAddress:s,from:r,to:c,fee:o}=ce(),{getPoolList:d}=Er(),[x,f]=A.useState([]),{apiPoolInfo:n,setApiPoolInfo:u,setApiPoolInfoLoading:a,setNetError:l}=J(),m=De(),{fetchTokenInfo:v}=ms(),C=async({poolAddress:w,from:L,to:p})=>{var y,i,b,R;try{a(!0);let h,g;if(w&&w!=="undefined"){const j=await d({pool:w});j&&j.list&&j.list.length?(g=j.list[0],h=await d({coin_type:`${(y=g==null?void 0:g.displayTokenA)==null?void 0:y.coin_type},${(i=g==null?void 0:g.displayTokenB)==null?void 0:i.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):n&&se(n)?(g=n,h={list:x}):(g={poolAddress:w,displayTokenA:void 0,displayTokenB:void 0},h={list:[]}),a(!1)}else if(L&&p&&L!=="undefined"&&p!=="undefined"&&L!==p){const j=await d({coin_type:`${L},${p}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(j,"res_getPoolList"),j&&j.list&&j.list.length)if(o&&o!=="undefined"){const _=(b=j==null?void 0:j.list)==null?void 0:b.find(k=>N(k==null?void 0:k.feeRate).eq(o));if(_)m(e?`/liquidity?tab=${e}&poolAddress=${_==null?void 0:_.poolAddress}`:`/liquidity?poolAddress=${_==null?void 0:_.poolAddress}`);else{const k=yt(j==null?void 0:j.list,$=>Number(($==null?void 0:$.tvl)||"0"));m(e?`/liquidity?tab=${e}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}}else{let _=yt(j==null?void 0:j.list,k=>Number((k==null?void 0:k.tvl)||"0"));_||(_=yt(j==null?void 0:j.list,k=>{var $;return Number((($=k==null?void 0:k.object)==null?void 0:$.liquidity)||"0")}),_||(_=j==null?void 0:j.list[0])),m(e?`/liquidity?tab=${e}&poolAddress=${_==null?void 0:_.poolAddress}`:`/liquidity?poolAddress=${_==null?void 0:_.poolAddress}`)}else{const _=await v(L),k=await v(p);g={poolAddress:void 0,displayTokenA:_,displayTokenB:k},h={list:[]},a(!1)}}else(!L||L==="undefined")&&p&&p!=="undefined"&&(g={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await v(p)}),(!p||p==="undefined")&&L&&L!=="undefined"&&(g={poolAddress:void 0,displayTokenA:await v(L),displayTokenB:void 0}),h={list:[]},a(!1);h&&(l(!1),f(h==null?void 0:h.list),console.log(g,"setApiPoolInfo"),g&&(g!=null&&g.poolAddress&&w?(g==null?void 0:g.poolAddress)===w&&u(g):u(g))),a(!1)}catch(h){if(h!=null&&h.list&&((R=h==null?void 0:h.list)==null?void 0:R.length)===1){l(!0);const g=h==null?void 0:h.list[0];console.log(h==null?void 0:h.list,"setApiPoolInfo"),u(g),f([]),a(!1)}}};return A.useEffect(()=>{s&&s==="undefined"||C({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:C,relatedPoolList:x}}function $i(){var w,L,p,y;const{poolAddress:e}=ce(),{apiPoolInfo:s,apiPoolInfoLoading:r}=J(),[c,o]=A.useState(),{fetchByApi:d}=_t(),{quoteWhiteTokenList:x}=os(),{getList:f,relatedPoolList:n}=qi(),u=A.useMemo(()=>{var b,R;const i=Nr(n);return i?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(b=Ht)==null?void 0:b.map(h=>{var j,_;const g=((j=i.find(k=>k.feeRate===h.feeRate))==null?void 0:j.title)||h.title;return{...h,title:g,poolAddress:(_=i.find(k=>k.feeRate===h.feeRate))==null?void 0:_.poolAddress,disabled:g==="Not Created"&&!qe(s==null?void 0:s.tokenA,x)&&!qe(s==null?void 0:s.tokenB,x)}}):(R=Ht)==null?void 0:R.map(h=>{var j,_;const g=((j=i.find(k=>k.feeRate===h.feeRate))==null?void 0:j.title)||h.title;return{...h,title:g,poolAddress:(_=i.find(k=>k.feeRate===h.feeRate))==null?void 0:_.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,x)&&!qe(s==null?void 0:s.displayTokenB,x)}}):[]},[JSON.stringify(n),JSON.stringify(x),(w=s==null?void 0:s.displayTokenA)==null?void 0:w.coin_type,(L=s==null?void 0:s.displayTokenB)==null?void 0:L.coin_type]),a=A.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(i=>({label:i==null?void 0:i.symbol,key:i==null?void 0:i.coin_type,isToken:!0,imgInfo:{src:i==null?void 0:i.logo_url,w:"16px",h:"16px",coinType:i?i==null?void 0:i.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(p=s==null?void 0:s.displayTokenA)==null?void 0:p.symbol,(y=s==null?void 0:s.displayTokenB)==null?void 0:y.symbol]),l=A.useMemo(()=>{const i=u==null?void 0:u.find(b=>b.poolAddress===e);return i||s},[JSON.stringify(u),e,JSON.stringify(s)]),m=async i=>{console.log("ðŸš€ ~ setAddressHistTokens ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",i);let b=[];const R=await d(or,"GET",{pool:i});console.log(R,"resVal"),b=Object.fromEntries(R.list.map(h=>[h.swap_account,h])),o(b)};A.useEffect(()=>{e&&m(e)},[e]);const v=A.useMemo(()=>{var i,b,R;return c&&e&&((i=c==null?void 0:c[e])!=null&&i.data)?Object.fromEntries((R=(b=c==null?void 0:c[e])==null?void 0:b.data)==null?void 0:R.map(h=>[h.key,h.value])):{}},[JSON.stringify(c)]),C=A.useMemo(()=>{const i=[];return s!=null&&s.displayTokenA&&i.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&i.push(s==null?void 0:s.displayTokenB),i},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:f,feeTierList:u,apiPoolInfo:s,rangeTabList:a,currentFeeTier:l,addressHistTokensMap:v,apiPoolInfoLoading:r,quoteWhiteTokenList:x,warningTokenList:C}}var Ue=(e=>(e.deposit="Provide Liquidity",e.positions="My Positions",e.analytics="Analytics",e))(Ue||{});const Se=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Wi({apiPoolInfo:e}){var Y,D,Q;const{tab:s,poolAddress:r}=ce(),c=De(),[o,d]=A.useState(),[x,f]=A.useState(Se),[n,u]=A.useState(((Y=Se==null?void 0:Se.find(z=>z.key===s))==null?void 0:Y.key)||Se[0].key),[a,l]=A.useState(),[m,v]=A.useState(),{posBaseListGroupByPool:C}=cs(),{addFavorites:w,removeFavorites:L}=_r(),{poolFavoriteIds:p}=vr(),{fromToken:y,toToken:i}=Ce(),{fetchTokenPrices:b}=is(),{isApp:R}=we(),{setFromCoin:h,setToCoin:g,fromCoin:j,toCoin:_}=Or(),{setIsOpen:k}=Dr(),$=()=>{var z,F;R?c(`/swap/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}`):k(!0)};A.useEffect(()=>{(y==null?void 0:y.coin_type)!==(j==null?void 0:j.coin_type)&&h(y),(i==null?void 0:i.coin_type)!==(_==null?void 0:_.coin_type)&&g(i)},[y==null?void 0:y.coin_type,i==null?void 0:i.coin_type]);const O=A.useMemo(()=>{if(r&&r!=="undefined"){const z=C[r.toLowerCase()||""];return z&&(z!=null&&z.list)&&(z==null?void 0:z.list.length)>0?z==null?void 0:z.list.length:void 0}},[JSON.stringify(C),r]);A.useEffect(()=>{f(Se==null?void 0:Se.map(z=>({...z,num:z.label==="My Positions"&&n==="positions"?O:void 0})))},[O,n]),A.useLayoutEffect(()=>{s&&s!==n&&u(s)},[s]);const M=A.useMemo(()=>p==null?void 0:p.includes(r||""),[JSON.stringify(p),r]),U=z=>{Lt(z),r&&(M?L(r):w(r))};A.useEffect(()=>{l(e==null?void 0:e.displayTokenA),v(e==null?void 0:e.displayTokenB)},[(D=e==null?void 0:e.displayTokenA)==null?void 0:D.coin_type,(Q=e==null?void 0:e.displayTokenB)==null?void 0:Q.coin_type]);const K=()=>{var z,F;c(`/create-pool/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}/${o==null?void 0:o.feeRate}`)},I=()=>{const z=[];y&&z.push(y.coin_type),i&&z.push(i.coin_type),z.length>0&&b(z)};return A.useEffect(()=>{I()},[y==null?void 0:y.coin_type,i==null?void 0:i.coin_type]),{currentTab:n,setCurrentTab:u,tabList:x,isFavoritePool:M,onChangeFavorites:U,selectedTokenA:a,selectedTokenB:m,setSelectedTokenA:l,setSelectedTokenB:v,onConfirm:K,feeTier:o,setFeeTier:d,refreshMarketPrice:I,onJump2Swap:$}}function Ui(){const{currentAccount:e}=dt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c}=J(),{feeTierList:o,currentFeeTier:d,rangeTabList:x,addressHistTokensMap:f,getList:n,quoteWhiteTokenList:u,warningTokenList:a}=$i(),{poolAddress:l}=ce(),{handleResetRange:m}=ut(),{resetAddLiquidity:v}=Ce(),{fetchAccountBalance:C}=us(),{getContractPoolInfo:w}=Lr(),{getCurrentPrice:L}=kr(),{currentTab:p,setCurrentTab:y,tabList:i,isFavoritePool:b,onChangeFavorites:R,selectedTokenA:h,selectedTokenB:g,setSelectedTokenA:j,setSelectedTokenB:_,onConfirm:k,setFeeTier:$,refreshMarketPrice:O,onJump2Swap:M}=Wi({apiPoolInfo:s}),U=async()=>{if(l&&s&&l===(s==null?void 0:s.poolAddress)){const Y=await w(l);Y&&L(Y==null?void 0:Y.current_sqrt_price,s)}},K=()=>{O==null||O(),U==null||U()},I=async Y=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),Y&&c(!0),l&&l!=="undefined"&&await n({poolAddress:l}),e!=null&&e.address&&await C(),K(),c(!1)};return A.useEffect(()=>(e!=null&&e.address&&C(),()=>{m(),v(),r()}),[]),A.useEffect(()=>{l&&(s==null?void 0:s.poolAddress)!==l&&(m(),v(),r()),l&&l===(s==null?void 0:s.poolAddress)&&U()},[l,s==null?void 0:s.poolAddress]),{feeTierList:o,currentFeeTier:d,rangeTabList:x,addressHistTokensMap:f,quoteWhiteTokenList:u,warningTokenList:a,currentTab:p,setCurrentTab:y,tabList:i,isFavoritePool:b,onChangeFavorites:R,selectedTokenA:h,selectedTokenB:g,setSelectedTokenA:j,setSelectedTokenB:_,onConfirm:k,setFeeTier:$,handleRefresh:I,handleGetPrice:U,onJump2Swap:M}}function ra(){const e=De(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,setApiPoolInfo:o,netError:d}=J(),{poolAddress:x,from:f,to:n}=ce(),{feeTierList:u,currentFeeTier:a,rangeTabList:l,addressHistTokensMap:m,quoteWhiteTokenList:v,warningTokenList:C,currentTab:w,setCurrentTab:L,tabList:p,isFavoritePool:y,onChangeFavorites:i,selectedTokenA:b,selectedTokenB:R,setSelectedTokenA:h,setSelectedTokenB:g,onConfirm:j,setFeeTier:_,handleRefresh:k,handleGetPrice:$,onJump2Swap:O}=Ui(),{getTokenInfo:M}=ms(),{isApp:U}=we(),{isOpen:K,onOpen:I,onClose:Y}=ar(),{totalAmountUSD:D,tvlLoading:Q,setTotalAmountUSD:z}=Ei();return t.jsxs(t.Fragment,{children:[t.jsxs(ee,{w:"100%",mt:"20px",children:[t.jsxs(q,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[t.jsx(cr,{text:"Pools",onClick:()=>e("/pools")}),x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(q,{gap:"8px",children:[t.jsx(st,{placement:"top",tooltip:y?"Remove from Watchlist":"Add to Watchlist",children:t.jsx(xe,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:i,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:y?"primary":"text_caption"}}},children:t.jsx(ve,{xlinkHref:y?"#icon-icon_star_sel":"#icon-icon_star",svgFill:y?"primary_blue":"text_paragraph",svgHover:y?"primary":"text_caption",fontSize:"18px"})})}),t.jsx(st,{placement:"top",tooltip:"Trade",children:t.jsx(xe,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:O,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:t.jsx(ve,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),t.jsx(st,{placement:"top",tooltip:"Refresh",children:t.jsx(ee,{children:t.jsx(Gr,{handleRefresh:k,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),t.jsxs(oe,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[t.jsxs(oe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[t.jsxs(q,{gap:"12px",children:[t.jsx(Wt,{value:b||(f?M(f):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,re,ae,S;const G=Object.keys(Ue).find(E=>E===w);if(R!=null&&R.coin_type||(Z=M(n))!=null&&Z.coin_type)if(be(F==null?void 0:F.coin_type).full_address===be((R==null?void 0:R.coin_type)||((re=M(n))==null?void 0:re.coin_type)||"").full_address)h(R),g(b);else{if(be(F==null?void 0:F.coin_type).full_address===be((b==null?void 0:b.coin_type)||((ae=M(f))==null?void 0:ae.coin_type)||"").full_address)return;e(`/liquidity?tab=${G}&from=${F==null?void 0:F.coin_type}&to=${(R==null?void 0:R.coin_type)||((S=M(n))==null?void 0:S.coin_type)}`),o(null),z("")}else e(`/liquidity?tab=${G}&from=${F==null?void 0:F.coin_type}`),o(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!b&&r}),t.jsx(Wt,{value:R||(n?M(n):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:d,onChange:F=>{var Z,re,ae,S;const G=Object.keys(Ue).find(E=>E===w);if(b!=null&&b.coin_type||(Z=M(f))!=null&&Z.coin_type)if(be(F==null?void 0:F.coin_type).full_address===be((b==null?void 0:b.coin_type)||((re=M(f))==null?void 0:re.coin_type)||"").full_address)h(R),g(b);else{if(be(F==null?void 0:F.coin_type).full_address===be((R==null?void 0:R.coin_type)||((ae=M(n))==null?void 0:ae.coin_type)||"").full_address)return;e(`/liquidity?tab=${G}&from=${(b==null?void 0:b.coin_type)||((S=M(f))==null?void 0:S.coin_type)}&to=${F==null?void 0:F.coin_type}`),o(null),z("")}else e(`/liquidity?tab=${G}&to=${F==null?void 0:F.coin_type}`),o(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!R&&r})]}),t.jsx(Vr,{value:a,loading:!a&&r,feeTierList:u,disabled:d,onChange:F=>{F!=null&&F.poolAddress?e(`/liquidity?poolAddress=${F==null?void 0:F.poolAddress}`):(_(F),I())}})]}),x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(oe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[t.jsx(Pe,{label:"Pool APR",value:t.jsx(lr,{poolInfo:s,placement:"bottom",children:t.jsxs(q,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[t.jsx(B,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&t.jsxs(B,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),t.jsx(Pe,{label:"TVL",value:D&&D!=="--"?`$${fe(D,2)}`:"--",loading:r||Q}),t.jsx(Pe,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:r}),t.jsx(Pe,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:r})]})]}),x&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?t.jsxs(t.Fragment,{children:[t.jsxs(oe,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[t.jsx(Be,{type:"borderTab",tabList:p,currentTab:w,handleChangeTab:F=>{const G=Object.keys(Ue).find(Z=>Ue[Z]===F.label);x&&e(`/liquidity?tab=${G}&poolAddress=${x}`),L(G)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:U?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:U?"14px":"16px",fontWeight:"500"}}),w!=="deposit"&&s&&t.jsxs(oe,{w:U?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[t.jsx(B,{children:"Current Price"}),t.jsx(Kr,{noCenter:!!U,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:tt(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:U?{w:"100%"}:{}})]})]}),t.jsx(ee,{h:{base:"20px",lg:"8px"}}),w==="deposit"&&t.jsx(zi,{rangeTabList:l,getList:k,getPrice:$,currentFeeTier:a,addressHistTokensMap:m}),w==="positions"&&t.jsx(Ai,{}),w==="analytics"&&t.jsx(bi,{})]}):t.jsx(ee,{mt:"20px",children:!s&&r?t.jsx($e,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:t.jsx(Rt,{})}):t.jsx(He,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsx(W,{children:b&&R?qe(b,v)||qe(R,v)?t.jsxs(t.Fragment,{children:[t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),t.jsx(B,{fontSize:"14px",children:"Do you want to initialize it?"}),t.jsx(xe,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{Y(),j()},children:"Initialized Pool"})]}):t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):t.jsx(B,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&t.jsx(Qr,{tokensInfo:C,waringModalCancel:F=>{e("/pools")}}),t.jsx(Wr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:K,onClose:Y,onConfirm:j})]})}export{ra as default};
