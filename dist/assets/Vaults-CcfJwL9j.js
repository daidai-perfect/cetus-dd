import{j as e,a7 as ie,v as de,ab as Te,H as u,V as B,T as x,C as te,f as ue,R as _e,at as N,au as L,a as j,S as je,u as R,aw as De,ax as Pe,ay as K,as as He}from"./vendor-DsVemle5.js";import{I as q,n as G,a as re,c as X,aA as be,B as se,m as me,H as he,W as ze,C as We,Q as ge,r as Ee,i as Fe,d as fe,a5 as Oe,V as O}from"./index-ptnn7YYs.js";import{N as le}from"./NoData-HfG491EP.js";import{d as ke,v as Ye,e as Me,a as Ue,u as ve,f as Ne,g as ae}from"./VaultsAprBlock-DYqDOull.js";import{H as Z}from"./HTextLabelBox-BSdt2JjM.js";import{P as $e}from"./PoweredByHaedal-CSYJZkP0.js";import{V as we}from"./VTextLabelBox-7Zj5rpY_.js";import{u as Ce}from"./useToken-D0Y8EMfE.js";import{C as qe}from"./CoinPairInfo-CRvWBqVO.js";import{S as Ge}from"./SearchInputBlock-DR-aqv0P.js";import{C as Se}from"./CheckBox-DBtbKikX.js";import{R as Qe}from"./RefreshButton-WcxAkxJ5.js";import{S as Je}from"./SortDropBlock-Di57Rhrz.js";import{u as Ke}from"./useTokenBalance-BmzoUDH9.js";import{u as Xe}from"./useAccountBalance-BlkjpDIb.js";import{u as Ze}from"./useInterval-DHQ0XTt3.js";import"./swapWidget-BX_OS0Vd.js";import"./useWrapPoolData-Dtc_nARB.js";import"./useFavoritePool-BRmN064e.js";import"./useGetPoolList-BWUJTUb5.js";import"./useTransaction-_40Gj-Xj.js";import"./useTrack-DUPD-CMT.js";import"./useSigner-CA1OjupR.js";import"./global-XGPon1rE.js";import"./msafe-oYBkW7LJ.js";import"./index-Cr9gqCFC.js";import"./v4-C6aID195.js";import"./useFindBestRouting-DsIA0n5P.js";import"./useSwapHelper-CkdGRiyG.js";import"./SingleTokenInfo-BK4bHte8.js";import"./CopyButton-BDbKvN3H.js";import"./index-C2tnGtPr.js";import"./Loading-CQth9VKL.js";import"./TooltipIcon-Cc-8Tse6.js";function Ae(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:a}=l;return e.jsxs(ie,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(de,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(de,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg",svg:{fill:"text_caption"}},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:a||(()=>{}),children:e.jsx(q,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function Ve(l){var m,w,T,C;const{apiInfo:r,logo_url:s,balanceDisplay:a,holdCoinAmounts:t,sharePoolRate:b,rewardPerA:g,rewardPerB:y}=l,o=Te(),{currentAccount:i,onWalletModal:k}=G(),{isApp:p}=re();return i?e.jsxs(ie,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{o(`/vaults-detail/${r.vaultsId}/${r.category}`)},children:[e.jsxs(u,{gap:"15px",children:[e.jsx(X,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(B,{gap:"4px",alignItems:"start",children:[e.jsx(x,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(x,{color:"text_caption",children:`${a||"0"} LP`})]})]}),e.jsx(ie,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:p?e.jsxs(e.Fragment,{children:[e.jsx(Z,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(ie,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(u,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(x,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(x,{color:"text_caption",children:(m=r==null?void 0:r.displayTokenA)==null?void 0:m.symbol})]}),e.jsxs(u,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(x,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(x,{color:"text_caption",children:(w=r==null?void 0:r.displayTokenB)==null?void 0:w.symbol})]})]})}),e.jsx(Z,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:`${be(b,2,6)}%`}),e.jsxs(de,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(x,{color:"primary_gray",children:"Details"}),e.jsx(se,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(te,{w:"20px",h:"20px",children:e.jsx(q,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{mr:"90px",children:e.jsx(we,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(u,{gap:"4px",children:[e.jsx(X,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(x,{color:"text_caption",children:me(t==null?void 0:t.displayCoinA)}),e.jsx(x,{color:"text_caption",mr:"8px",children:(T=r==null?void 0:r.displayTokenA)==null?void 0:T.symbol}),e.jsx(X,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(x,{color:"text_caption",children:me(t==null?void 0:t.displayCoinB)}),e.jsx(x,{color:"text_caption",children:(C=r==null?void 0:r.displayTokenB)==null?void 0:C.symbol})]})})}),e.jsx(te,{mr:"110px",children:e.jsx(we,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:`${be(b,2,6)}%`})}),e.jsxs(u,{gap:"8px",children:[e.jsx(x,{color:"primary_gray",children:"Details"}),e.jsx(se,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(te,{w:"20px",h:"20px",children:e.jsx(q,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(le,{type:"nowallet",onboard:()=>{k(!0)}})}function Le({rewardList:l}){return e.jsx(he,{tooltip:e.jsx(x,{fontSize:"12px",lineHeight:"20px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(u,{justifyContent:"end",gap:"4px",children:l==null?void 0:l.map(r=>e.jsx(Ie,{coinType:r},r))})})}function Ie({coinType:l}){var s;const{tokenInfo:r}=Ce((s=ze(l))==null?void 0:s.full_address);return e.jsx(te,{children:e.jsx(X,{imageUrl:r==null?void 0:r.logo_url,w:"20px",h:"20px"})})}function et({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:y,sharePoolRate:o,currentAccount:i,totalValue:k,jumpVaultsDetail:p,isShowPowered:m,isShowAprTips:w}){var T,C,H,A,f,D;return e.jsxs(B,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(u,{children:[e.jsx(We,{coinAIconUrl:(T=t==null?void 0:t.displayTokenA)==null?void 0:T.logo_url,coinBIconUrl:(C=t==null?void 0:t.displayTokenB)==null?void 0:C.logo_url,coinACoinType:(H=t==null?void 0:t.displayTokenA)==null?void 0:H.coin_type,coinBCoinType:(A=t==null?void 0:t.displayTokenB)==null?void 0:A.coin_type,w:"40px",h:"40px"}),e.jsxs(B,{children:[e.jsxs(u,{children:[e.jsxs(x,{color:"text_caption",fontWeight:"500",children:[(f=t==null?void 0:t.displayTokenA)==null?void 0:f.symbol," - ",(D=t==null?void 0:t.displayTokenB)==null?void 0:D.symbol]}),e.jsx(ue,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(x,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),(t==null?void 0:t.category)=="haedal"&&m&&e.jsx($e,{category:"Haedal"})]})]}),e.jsxs(B,{w:"100%",gap:"16px",mt:"4px",children:[e.jsx(Z,{label:"TVL",value:e.jsx(B,{alignItems:"flex-end",children:e.jsx(x,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(Z,{label:e.jsxs(u,{justify:"flex-end",gap:"2px",children:[e.jsx(x,{children:"APY"}),e.jsx(he,{placement:"auto-start",tooltip:e.jsx(x,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(q,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(ke,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(Z,{label:"Rewards",value:e.jsx(Le,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(Z,{label:"Your Holdings",value:i?ge(k,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(B,{w:"100%",gap:"8px",children:[e.jsx(Ae,{isOpen:l,jumpVaultsDetail:()=>{p(t.vaultsId)},onExpand:r}),l&&e.jsx(Ve,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:y,sharePoolRate:o})]})]})}function tt({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:y,sharePoolRate:o,currentAccount:i,totalValue:k,jumpVaultsDetail:p,isShowPowered:m}){return console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItemPC.tsx:122 ~ apiInfo:",t),e.jsxs(_e.Fragment,{children:[e.jsxs(N,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(L,{children:e.jsx(qe,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},isShowPowered:m,symbolFontSize:"15px"})}),e.jsx(L,{textAlign:"right",children:e.jsx(x,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),e.jsx(L,{textAlign:"right",w:"13%",children:e.jsx(ke,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay,vaultsAprDisplay:t.vaultsAprDisplay,category:t.category})}),e.jsx(L,{textAlign:"right",w:"13%",children:e.jsx(Le,{rewardList:t.vaultsRewards})}),e.jsx(L,{textAlign:"right",children:e.jsx(x,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:i?ge(k,2):"--"})}),e.jsx(L,{textAlign:"right",children:e.jsx(Ae,{isOpen:l,jumpVaultsDetail:()=>{p(t.vaultsId)}})})]}),!l&&e.jsx(N,{h:"16px"}),e.jsx(N,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(L,{colSpan:6,children:e.jsx(se,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(Ve,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:b,holdCoinAmounts:g,balanceDisplay:y,sharePoolRate:o})})})})]},t.vaultsId)}function Be(l){const r=Te(),{apiInfo:s,isShowPowered:a}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:14 ~ VaultsListItem ~ apiInfo:",s);const{currentAccount:t}=G(),b=Ye.useGetContractVaultInfo((s==null?void 0:s.category)=="haedal"),{fetchVaultInfoFromContract:g,fetchClmmPoolFromContract:y,lpTokenInfo:o,balanceInfo:i,sharePoolRate:k,holdCoinAmounts:p,totalValue:m,fetchVaultBalance:w}=b(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsListItem.tsx:26 ~ VaultsListItem ~ balanceInfo:",i),j.useEffect(()=>{g(s.vaultsId)},[s.vaultsId]),j.useEffect(()=>{y(s.poolAddress)},[s.poolAddress]),j.useEffect(()=>{t!=null&&t.address&&s.vaultsId&&(o!=null&&o.decimals)&&(s==null?void 0:s.category)=="haedal"&&w(t==null?void 0:t.address,s.vaultsId,o==null?void 0:o.decimals)},[t==null?void 0:t.address,s.vaultsId,o==null?void 0:o.decimals,s==null?void 0:s.category]);const[T,C]=j.useState(!1),H=Q=>{r(`/vaults-detail/${Q}/${s==null?void 0:s.category}`)},{rewardPerA:A,rewardPerB:f}=Me(i==null?void 0:i.balanceFormat,s),D=()=>{C(!T)},{isApp:$}=re();return $?e.jsx(et,{openExpend:T,onExpand:D,rewardPerA:A,rewardPerB:f,apiInfo:s,logo_url:o==null?void 0:o.logo_url,holdCoinAmounts:p,balanceDisplay:i==null?void 0:i.balanceDisplay,sharePoolRate:k,currentAccount:t,totalValue:m,jumpVaultsDetail:H,isShowPowered:a}):e.jsx(tt,{openExpend:T,onExpand:D,rewardPerA:A,rewardPerB:f,apiInfo:s,logo_url:o==null?void 0:o.logo_url,holdCoinAmounts:p,balanceDisplay:i==null?void 0:i.balanceDisplay,sharePoolRate:k,currentAccount:t,totalValue:m,jumpVaultsDetail:H,isShowPowered:a})}function st({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a,isShowPowered:t}){const{onWalletModal:b}=G();return!a&&!s&&l.length===0?e.jsx(le,{type:"nodata",text:"No vaults found",border:"none"}):a?e.jsx(le,{type:"nowallet",onboard:()=>b(!0),border:"none"}):s?e.jsx(lt,{itemList:[1,2,3]}):e.jsx(B,{w:"100%",mt:"20px",children:l==null?void 0:l.map(g=>e.jsx(Be,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))})}function lt(l){const{itemList:r}=l;return e.jsx(B,{w:"100%",mt:"20px",children:r.map(s=>e.jsxs(B,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(u,{gap:"0",children:[e.jsx(je,{size:"9"}),e.jsx(je,{size:"9"}),e.jsxs(u,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(R,{height:"4",width:"100px"}),e.jsx(R,{height:"4",width:"60px"})]})]}),e.jsx(B,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(a=>e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(R,{height:"4",width:"100px"}),e.jsx(R,{height:"4",width:"100px"})]},a))}),e.jsxs(B,{w:"100%",gap:"8px",children:[e.jsx(R,{height:"8",width:"100%"}),e.jsx(R,{height:"8",width:"100%"})]})]},s))})}function rt({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a,isShowPowered:t}){const{onWalletModal:b}=G();return e.jsxs(De,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(Pe,{children:e.jsxs(N,{children:[e.jsx(K,{children:"Vaults"}),e.jsx(K,{textAlign:"right",children:"TVL"}),e.jsx(K,{textAlign:"right",children:e.jsxs(u,{justify:"flex-end",gap:"2px",children:[e.jsx(x,{children:"APY"}),e.jsx(he,{tooltip:e.jsx(x,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(q,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(K,{textAlign:"right",children:"Earnings"}),e.jsx(K,{textAlign:"right",children:"Your Holdings"}),e.jsx(K,{textAlign:"right",children:"Action"})]})}),e.jsxs(He,{children:[!a&&!s&&l.length===0&&e.jsx(N,{children:e.jsx(L,{colSpan:6,w:"100%",children:e.jsx(le,{type:"nodata",text:"No vaults found",border:"none"})})}),a&&e.jsx(N,{children:e.jsx(L,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(le,{type:"nowallet",onboard:()=>b(!0),border:"none"})})}),s&&e.jsx(ot,{itemList:[1,2,3]}),!s&&l.map(g=>e.jsx(Be,{apiInfo:g,isShowPowered:t},g.clmmPoolAddress))]})]})}function ot(l){const{itemList:r}=l;return r.map(s=>e.jsxs(_e.Fragment,{children:[e.jsxs(N,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(L,{children:e.jsx(R,{w:"220px"})}),e.jsx(L,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(R,{})})}),e.jsx(L,{textAlign:"right",children:e.jsx(u,{justifyContent:"end",children:e.jsx(R,{})})})]}),e.jsx(N,{h:"16px"})]},s))}function at(l){const{fetchTokenPrices:r}=Ee(),{dataList:s,isAll:a,showSkeletonLoading:t,isShowPowered:b}=l;console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:13 ~ VaultsList ~ isShowPowered:",b),j.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:18 ~ useEffect ~ dataList:",s),s&&(s==null?void 0:s.length)==0)return;const y=[];s.forEach(o=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsList.tsx:35 ~ useEffect ~ data:",o),o&&(y.includes(o.tokenA.coin_type)||y.push(o.tokenA.coin_type),y.includes(o.tokenB.coin_type)||y.push(o.tokenB.coin_type))}),y.length>0&&r(y)},[s==null?void 0:s.length]);const{isApp:g}=re();return g?e.jsx(st,{...l}):e.jsx(rt,{...l})}function it(l){const{sortByList:r,currTab:s,tabList:a,handleChangeTab:t,currSortType:b,onSortByChange:g,sortRule:y,handleRefresh:o,handleChangeSortRule:i,selectCoinList:k,onClickSelectCoinList:p,onDeleteSelectCoinList:m,isYourHoldings:w,onClickIsYourHoldings:T,whiteTokenList:C,showSkeletonLoading:H}=l,{isApp:A}=re(),{currentAccount:f}=G();return e.jsxs(B,{w:"100%",mt:{base:"20px",lg:"40px"},justify:"space-between",children:[e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(Fe,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"415px"},h:"46px",borderRadius:{base:"8px",lg:"12px"}},itemStyle:{w:"50%",fontSize:"16px"},tabList:a,currentTab:s.label,handleChangeTab:t}),!A&&(f==null?void 0:f.address)&&e.jsx(se,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",children:[e.jsx(Se,{checked:w,onClick:T}),e.jsx(x,{color:w?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]}),e.jsxs(u,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsx(ue,{w:{base:"100%",lg:"292px"},sx:{"> button":{minW:"100% !important"}},children:e.jsx(Ge,{selectCoinList:k,onClickSelectCoinList:p,onDeleteSelectCoinList:m,whiteTokenList:C})}),e.jsxs(u,{children:[e.jsx(Je,{sortText:"Sort by",xlinkHref:y=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{i(y==="asc"?"desc":"asc")},minW:A?"calc(100vw - 126px)":"120px",currentSort:b,sortByList:r,onSortByChange:g,wrapStyle:{borderRadius:{base:"8px",lg:"12px"}}}),e.jsx(Qe,{handleRefresh:()=>{H||o()},borderRadius:{base:"8px",lg:"12px"}})]})]}),A&&e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(x,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),(f==null?void 0:f.address)&&e.jsx(se,{w:{base:"100%",lg:"unset"},borderRadius:"12px",p:"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",children:[e.jsx(Se,{checked:w,onClick:T}),e.jsx(x,{color:w?"text_caption":"text_paragraph",children:"Your Holdings"})]})})]})]})}function nt(l){const{isLoading:r,total_tvl:s}=l,{isApp:a}=re();return e.jsx(B,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(B,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(u,{w:"100%",justify:"space-between",children:e.jsx(x,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(x,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease.Â ",a&&e.jsxs(u,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(x,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(q,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!a&&e.jsxs(u,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(x,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(q,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(x,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(R,{isLoaded:!!s,children:e.jsx(x,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:ge(s,2)})})]})})}function ct(){const{getVaultList:l,getVaultListFromCache:r}=Ue(),{vaultStatsObj:s,lpTokenInfo:a,setLpTokenInfo:t}=ve(),{getBalanceInfoFromCache:b}=Ke(),{currentAccount:g}=G(),[y,o]=j.useState(!0),[i,k]=j.useState([]),[p,m]=j.useState([]),{contractVaultObj:w}=ve(),{contractVaultObj:T}=Ne(),{fetchTokenInfo:C}=Ce(),H=h=>{m(n=>[...n,h])},A=h=>{m(n=>n.filter(d=>(d==null?void 0:d.coin_type)!==(h==null?void 0:h.coin_type)))},[f,D]=j.useState([]),[$,Q]=j.useState([]),[ne,ce]=j.useState({sortRule:"desc",sortType:"tvl"}),xe=j.useMemo(()=>{let h=fe(0);return Object.values(s).forEach(n=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:28 ~ Object.values ~ vaultStatItem:",n),h=h.add((n==null?void 0:n.vaultsTvl)||"0")}),h.toString()},[s]),pe=async(h,n="all",d=!1)=>{var V,W,M;const S=r(h);D(Y(S,n,d));const c=await l(h);if((c==null?void 0:c.length)>0){if(!Oe(a)||Object.values(a).length!==c.length){const _={},I=[];c.forEach(U=>{var J,ye;const F=(U==null?void 0:U.lpTokentype)||((ye=(J=ae[U.clmmPoolAddress])==null?void 0:J.lpToken)==null?void 0:ye.coin_type);typeof F=="string"&&I.push(F)});const ee=await C(I);for(let U=0;U<c.length;U++){const F=c[U],J=(F==null?void 0:F.lpTokentype)||((W=(V=ae[F.clmmPoolAddress])==null?void 0:V.lpToken)==null?void 0:W.coin_type);typeof J=="string"&&(_[J]=F.category=="haedal"?ee==null?void 0:ee.get(J):(M=ae[F.clmmPoolAddress])==null?void 0:M.lpToken)}t(_)}const v=c.flatMap(_=>[_==null?void 0:_.displayTokenA,_==null?void 0:_.displayTokenB]).filter(Boolean),z=v.map(_=>_==null?void 0:_.coin_type).filter(Boolean),E=await C(z),Re=new Map(v.map(_=>{const I=O(_.coin_type),ee=E==null?void 0:E.get(_.coin_type);return[I,{...ee||{},coin_type:I}]}));k([...Re.values()])}if(Q(c),console.log("ðŸš€ ~ fetchVaultList ~ list:",c,Y(c,n,d)),c.length>0){D(Y(c,n,d));const v=c.map(z=>{var E;return(E=w[z==null?void 0:z.vaultsId]||T[z==null?void 0:z.vaultsId])==null?void 0:E.lp_token_type}).filter(Boolean);(v==null?void 0:v.length)>0&&await C(v)}o(!1)},oe=h=>{var c,V,W,M;const n=(c=p[0])!=null&&c.coin_type?O((V=p[0])==null?void 0:V.coin_type):void 0,d=(W=p[1])!=null&&W.coin_type?O((M=p[1])==null?void 0:M.coin_type):void 0;return h==null?void 0:h.filter(v=>n&&d?O(v.displayTokenA.coin_type)==n&&O(v.displayTokenB.coin_type)==d||O(v.displayTokenA.coin_type)==d&&O(v.displayTokenB.coin_type)==n:n?O(v.displayTokenA.coin_type)==n||O(v.displayTokenB.coin_type)==n:v)},Y=(h,n="all",d=!1)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultList.ts:142 ~ filterVaultList ~ filterVaultList:");let S=[],c=[];return(p==null?void 0:p.length)>0?c=oe(h):c=h,n==="all"&&(S=c),n=="cetus"&&(S=c.filter(V=>V.category=="cetus")),n=="haedal"&&(S=c.filter(V=>V.category=="haedal")),d&&(g!=null&&g.address)?P(S):S},P=h=>h.filter(n=>{var c;const d=a[n.lpTokentype]||((c=ae[n.clmmPoolAddress])==null?void 0:c.lpToken),S=b(d);return!!(S&&fe(S.balance).gt(0))});return{totalTvl:xe,filterMyVaultList:P,fetchVaultList:pe,vaultList:f,queryOptions:ne,setQueryOptions:ce,allVaultList:$,getCurrentTabNum:(h,n=!1)=>{let d;const S=oe($);return h=="all"?d=S:h=="cetus"?d=S.filter(c=>c.category=="cetus"):d=S.filter(c=>c.category=="haedal"),n&&(g!=null&&g.address)&&d&&d.length?String(P(d).length):String(d&&d.length||"")},selectCoinList:p,onClickSelectCoinList:H,onDeleteSelectCoinList:A,whiteTokenList:i,showSkeletonLoading:y,setShowSkeletonLoading:o,filterVaultList:Y,setVaultList:D,sortVaultList:(h,n)=>{const{sortRule:d,sortType:S}=h;return n==null?void 0:n.sort((V,W)=>{var M,v,z,E;return S==="apr"?d==="desc"?((M=W.vaultsTotalApy)==null?void 0:M.replace("%",""))-((v=V.vaultsTotalApy)==null?void 0:v.replace("%","")):((z=V.vaultsTotalApy)==null?void 0:z.replace("%",""))-((E=W.vaultsTotalApy)==null?void 0:E.replace("%","")):d==="desc"?W.vaultsTvl-V.vaultsTvl:V.vaultsTvl-W.vaultsTvl})}}}function qt(){const[l,r]=j.useState(!1),{fetchAccountBalance:s}=Xe(),{currentAccount:a}=G(),[t,b]=j.useState({label:"All Vaults",value:"all"}),{totalTvl:g,vaultList:y,fetchVaultList:o,queryOptions:i,setQueryOptions:k,allVaultList:p,getCurrentTabNum:m,selectCoinList:w,onClickSelectCoinList:T,onDeleteSelectCoinList:C,whiteTokenList:H,showSkeletonLoading:A,setShowSkeletonLoading:f,filterVaultList:D,setVaultList:$,sortVaultList:Q}=ct(),ne=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[ce,xe]=j.useState({label:"TVL",value:"TVL"}),pe=j.useMemo(()=>[{label:"All Vaults",value:"all",num:m("all",l)},{label:"Cetus",value:"cetus",num:m("cetus",l)},{label:"Haedal",value:"haedal",num:m("haedal",l)}],[p,l,w]),[oe,Y]=j.useState(6e4);return Ze({interval:oe,callback:()=>{o(i,t.value,l)}}),j.useEffect(()=>{p&&p.length>0&&$(D(p,t.value,l))},[l,t.value,p]),j.useEffect(()=>{o(i,t.value)},[]),j.useEffect(()=>{a!=null&&a.address||r(!1)},[a==null?void 0:a.address]),j.useEffect(()=>{w&&p&&p.length>0&&$(D(p,t.value,l))},[w,t.value,l]),e.jsxs(B,{gap:"0px",w:"100%",children:[e.jsx(nt,{isLoading:A,total_tvl:g}),e.jsx(ue,{h:{base:"260px",lg:"240px"}}),e.jsx(it,{sortByList:ne,currTab:t,tabList:pe,whiteTokenList:H,selectCoinList:w,onClickSelectCoinList:T,onDeleteSelectCoinList:C,showSkeletonLoading:A,handleChangeTab:P=>{t.value!==P.value&&(b(P),f(!0),setTimeout(()=>{f(!1)},200))},currSortType:ce,onSortByChange:P=>{i.sortType=P.value,k({...i}),xe(P),Q({...i},y),Y(6e4)},sortRule:i.sortRule,handleChangeSortRule:P=>{i.sortRule=P,k({...i}),Q({...i},y),Y(6e4)},handleRefresh:()=>{f(!0),s(),Y(6e4),o(i,t.value,l)},isYourHoldings:l,onClickIsYourHoldings:()=>{r(!l)}}),e.jsx(at,{isShowPowered:t.label!=="Haedal",dataList:y,showSkeletonLoading:A})]})}export{qt as default};
//# sourceMappingURL=Vaults-CcfJwL9j.js.map
