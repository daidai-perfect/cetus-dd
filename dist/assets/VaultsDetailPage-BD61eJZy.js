import{r as p,d as w,j as e,aB as je,V as j,T as x,S as _e,H as y,bE as Te,X as k,a5 as Re,B as q,am as Qe,C as fe,k as ke,a3 as Ve,b as ie,U as M,bw as Ie,aC as K,aL as E,l as we,aR as Pe,c as et,I as tt,u as Fe,b7 as $e,bF as Ue,i as Se,ac as st,ad as ot,ae as rt,af as lt,ag as at,ah as it,ai as nt,$ as Ee,Z as Ae,ba as Oe,a0 as Le,aq as ze,s as pe,bm as pt,e as ct,aA as xt,aU as dt,a as ut,b2 as ht}from"./index-BcaxaUt8.js";import{S as gt}from"./Slippage-K2UFfpWr.js";import{g as mt,v as ae,h as Ne,i as Ge,V as Be,C as He,j as bt,c as yt,u as jt,e as ft}from"./VaultsAprBlock-CBW-Hej5.js";import{N as qe}from"./NoData-BhC-3mK5.js";import{R as St}from"./RefreshButton-B_ILb74u.js";import{u as vt}from"./useAccountBalance-02hLgrjO.js";import{H as J}from"./HTextLabelBox-B_p285N9.js";import{V as Q}from"./VTextLabelBox-Dji5stlq.js";import{S as se,A as We}from"./SingleTokenInfo-DE-vd-0h.js";import{u as wt,Z as At}from"./useDisplayTickPrice-gOkbx4Na.js";import{i as Ct}from"./icon_currentprice@2x-DeObnx8l.js";import{a as _t,p as Ze}from"./EmptyTooltip-Bexsxl1x.js";import{R as Tt,X as Rt,Y as Dt}from"./YAxis-B2q60ut6.js";import{L as Pt,a as De}from"./LineChart-BSVJ8z4p.js";import{T as zt,L as kt}from"./generateCategoricalChart-B17GjpQL.js";import{V as Lt,l as Bt,m as Ht}from"./api-data-utils-C1DlF7KH.js";import{T as Wt}from"./TvlChart-BqofQW4v.js";import{T as Mt}from"./TradeConfirmAmountInfo-CBHzY4yB.js";import{V as Ye}from"./VaultsAddResult-Cy0buHVx.js";import{u as Ft}from"./global-CmdL8L9_.js";import{T as Xe}from"./TradeInputGroup-FPKfecvo.js";import{P as Ke}from"./progress-CAJrIU2J.js";import{T as Me}from"./TooltipIcon-C4iEqCcK.js";import{P as $t}from"./PoweredByHaedal-DjrY-hMr.js";import{P as Ut}from"./RemoveBlock-t9bOGtpj.js";import"./index-BI-W3p6d.js";import"./useTokenBalance-Djy4YNWk.js";import"./swapWidget-BmvPaEbE.js";import"./useFavoritePool-DCCXUawO.js";import"./useGetPoolList-BblWMV2P.js";import"./useToken-CC08yVvW.js";import"./useTransaction-Gvwa3i7U.js";import"./msafe-oYBkW7LJ.js";import"./useFindBestRouting-DQJeGFpf.js";import"./CopyButton-VDDCkQc3.js";import"./_getAllKeysIn-BXJcfEap.js";import"./throttle-Dj8ClF9e.js";import"./debounce-DBQAAPGg.js";import"./linear-DYpwdEgO.js";import"./index-DNd8iw9J.js";import"./progress.utils-CA1WC75L.js";import"./LockInput-If5MRd1e.js";import"./usePositionList-CIC4JxMO.js";import"./useCurrentPos-MnkBtg1U.js";import"./usePosAdd-Cwsk1h8o.js";import"./useInsufficientBalanceToast-BT9ry-3a.js";import"./index-DRIHmqZ9.js";import"./ExpendItem-DlOw9m61.js";import"./PriceRange-0fOt5DAR.js";import"./PositionStatus-C_f__PDV.js";import"./RangeValue-B9CoAwyb.js";import"./RangeAlerts-BusQnnN2.js";import"./useNotifiSubscription-CUyTnQkp.js";import"./useXCetusHelper-CZcfVdez.js";function Et(c){const{displayMaxPrice:o,displayMinPrice:s,displayPrice:t,isLoading:r}=c;console.log("ðŸš€ðŸš€ðŸš€ ~ PositionPriceRange.tsx:16 ~ PositionPriceRange ~ props:",c);const[i,a]=p.useState(0),n=p.useRef(null),u=p.useMemo(()=>!(s&&o&&t),[o,s,t]);p.useEffect(()=>{const g=()=>{n.current&&a(n.current.offsetWidth)};g();const h=new ResizeObserver(g);return n.current&&h.observe(n.current),()=>{n.current&&h.unobserve(n.current)}},[]);const d=p.useMemo(()=>{if(o==="âˆž")return"center";if(t&&s&&o){if(w(t).greaterThanOrEqualTo(o))return"end";if(w(s).greaterThanOrEqualTo(t))return"start"}return"center"},[t,s,o]),m=p.useMemo(()=>{if(o==="âˆž")return"0px";if(t&&s&&o&&w(t).lessThanOrEqualTo(o)&&w(t).greaterThanOrEqualTo(s)){const g=w(o).add(s).div(2),h=w(t).gt(g);let l=w(0);if(h){const f=w(g).sub(s);l=w(t).sub(g).div(f)}else{const f=w(o).sub(g);l=w(t).sub(s).div(f)}const b=w(123).div(2);return h?`${w(i).mul(l).sub(b).toFixed(0)}px`:`-${w(i).mul(w(1).sub(l)).sub(b).toFixed(0)}px`}return"0px"},[t,s,o,i]);return e.jsx(e.Fragment,{children:u?e.jsx(je,{h:"202px",width:"100%",align:"center",position:"relative",children:e.jsx(q,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(ke,{})})}):e.jsxs(je,{w:"90%",direction:"column",alignItems:d,children:[e.jsxs(j,{w:{md:"100%",lg:"max-content"},justifyContent:"center",mb:"-22px",gap:"8px",ml:m,children:[e.jsxs(j,{p:"6px 24px",borderRadius:"8px",gap:"4px",children:[e.jsx(x,{fontSize:"xs",h:"14px",children:"Current Price"}),r?e.jsx(je,{h:"18px",align:"center",children:e.jsx(_e,{})}):e.jsx(y,{children:e.jsx(x,{fontSize:"16px",color:"text_highlight",children:e.jsx(Te,{value:k(t,6,!0,Re.ROUND_DOWN)})})})]}),e.jsxs(j,{zIndex:"100",children:[e.jsx(q,{w:"2px",h:"98px",bg:"#76C8FF"}),e.jsx(Qe,{src:Ct,w:"30px",h:"30px",mt:"-18px"})]})]}),e.jsx(fe,{zIndex:"99",mt:"-48px",ref:n,pl:{base:"0",lg:"60px"},pr:{base:"0",lg:"60px"},h:"50px",w:"100%",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #191919 100%)",borderBottom:"1px solid",borderBottomColor:"border",children:e.jsx(fe,{w:"100%",h:"48px",bg:"linear-gradient( 180deg, rgba(22,22,22,0) 0%, #1A5780 100%)"})}),e.jsxs(y,{justifyContent:"space-between",pl:{md:"0",lg:"14px"},pr:"2px",mt:"8px",w:{base:"100%",lg:"90%"},children:[e.jsxs(j,{pl:{base:"0px",lg:"16px"},pr:"16px",pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[e.jsx(x,{fontSize:"12px",children:"Min Price"}),r?e.jsx(je,{h:"18px",align:"center",children:e.jsx(_e,{})}):e.jsx(x,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:e.jsx(Te,{value:k(s,6,!0,Re.ROUND_DOWN)})})]}),e.jsxs(j,{pl:"16px",pr:{base:"0px",lg:"24px"},pt:"5px",pb:"5px",borderRadius:"8px",gap:"6px",maxW:{md:"48%",lg:"auto"},children:[e.jsx(x,{fontSize:"12px",children:"Max Price"}),r?e.jsx(je,{h:"18px",align:"center",children:e.jsx(_e,{})}):e.jsx(x,{fontSize:"14px",fontWeight:"500",color:"text_caption",maxW:{md:"100%",lg:"auto"},children:e.jsx(Te,{value:k(o,6,!0,Re.ROUND_DOWN)})})]})]})]})})}function Ot(c){const{holdCoinAmounts:o,lpTokenInfo:s,displayTokenA:t,displayTokenB:r,sharePoolRate:i,balanceInfo:a,isReverse:n,holdCoinAValue:u,holdCoinBValue:d,rewardPerA:m,rewardPerB:g}=c,h=p.useMemo(()=>n?d:u,[n,u,d]),l=p.useMemo(()=>n?u:d,[n,u,d]);Ve();const b=p.useMemo(()=>w(h).add(w(l)),[h,l,t,r]);console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayValueA:",h),console.log("ðŸš€ðŸš€ðŸš€ ~ MyLiquidity.tsx:55 ~ totalValue ~ displayTokenA:",t);const{isApp:f}=ie();return e.jsx(M,{bg:"bg_six",borderColor:"border_secondary",p:{base:"20px 8px",lg:"20px 16px"},children:e.jsxs(j,{w:"100%",gap:{base:"24px",lg:"8px"},children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsx(y,{children:e.jsx(x,{textAlign:"start",fontSize:"16px",color:"text_caption",children:"Your Liquidity"})}),e.jsxs(y,{gap:"8px",children:[e.jsx(x,{whiteSpace:"nowrap",children:"Your share of pool"}),e.jsxs(x,{color:"text_highlight",fontWeight:"500",children:[Ie(i,2,6),"%"]})]})]}),f?e.jsxs(j,{w:"100%",gap:"16px",children:[e.jsx(J,{label:"LP Token Balance",labelStyle:{fontSize:"13px"},value:e.jsxs(y,{children:[e.jsx(se,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),e.jsxs(x,{color:"text_caption",ml:"4px",fontWeight:"500",fontSize:"13px",children:[a!=null&&a.balanceFormat?k(a==null?void 0:a.balanceFormat,9):"-"," LP"]})]}),subValue:e.jsx(x,{children:a!=null&&a.balanceFormat&&b?K(b,2):"-"}),subValueStyle:{fontSize:"13px"}}),e.jsx(J,{label:E(t==null?void 0:t.symbol,10),labelStyle:{fontSize:"13px"},value:e.jsxs(y,{children:[e.jsx(se,{token:t,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),e.jsx(x,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(o==null?void 0:o.displayCoinA,6)} ${E(t==null?void 0:t.symbol,10)}`})]}),subValue:K(h,2),subValueStyle:{fontSize:"13px"}}),e.jsx(J,{label:E(r==null?void 0:r.symbol,10),labelStyle:{fontSize:"13px"},value:e.jsxs(y,{children:[e.jsx(se,{token:r,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"20px",h:"20px"},haveTooltip:!0}),e.jsx(x,{fontSize:"13px",color:"text_caption",fontWeight:"500",children:`${k(o==null?void 0:o.displayCoinB,6)} ${E(r==null?void 0:r.symbol,10)}`})]}),subValue:K(l,2),subValueStyle:{fontSize:"13px"}})]}):e.jsxs(e.Fragment,{children:[e.jsxs(we,{flexDir:{base:"column",lg:"row"},mt:"16px",gap:{base:"8px",lg:"4px"},align:"center",children:[e.jsx(x,{children:"LP Token Balance"}),e.jsxs(x,{color:"text_caption",ml:"4px",fontWeight:"500",children:[a!=null&&a.balanceFormat?k(a==null?void 0:a.balanceFormat,9):"-"," LP"]}),e.jsx(x,{children:a!=null&&a.balanceFormat?K(b,2):"-"})]}),e.jsxs(y,{w:{base:"100%",lg:"90%"},mt:"12px",justifyContent:"space-between",pos:"relative",background:"url(/images/vault_your_liquidity_bg@2x.png)",backgroundSize:"100% auto",borderRadius:"69px",gap:"0",children:[e.jsxs(j,{flex:"1",h:"120px",justifyContent:"center",alignItems:"start",children:[e.jsxs(y,{children:[e.jsx(se,{token:t,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0}),e.jsx(x,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:E(t==null?void 0:t.symbol,10)})]}),e.jsx(Q,{wrapStyle:{gap:"4px",w:"calc(100% - 60px)"},title:`${k(o==null?void 0:o.displayCoinA,6)} ${E(t==null?void 0:t.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:K(h,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),e.jsxs(j,{flex:"1",h:"120px",justifyContent:"center",alignItems:"end",children:[e.jsxs(y,{children:[e.jsx(x,{color:"text_caption",fontSize:"16px",fontWeight:"600",children:E(r==null?void 0:r.symbol,10)}),e.jsx(se,{token:r,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"14px",iconH:"14px"},imgBoxStyle:{w:"28px",h:"28px"},haveTooltip:!0})]}),e.jsx(Q,{wrapStyle:{gap:"4px",alignItems:"flex-end",w:"calc(100% - 60px)"},title:`${k(o==null?void 0:o.displayCoinB,6)} ${E(r==null?void 0:r.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500},value:K(l,2),valueStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_paragraph",whiteSpace:"wrap",lineHeight:{base:"16px",lg:"14px"},wordBreak:"break-all",fontWeight:500}})]}),e.jsx(M,{pos:"absolute",left:"calc(50% - 52px)",w:"104px",h:"104px",borderRadius:"70px",p:"8px 0px",children:e.jsxs(j,{justify:"center",gap:"4px",children:[e.jsx(se,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{isNeedShow:!1},imgBoxStyle:{w:"58px",h:"58px"},haveTooltip:!0}),e.jsx(x,{color:"#8BAABE",fontSize:"12px",children:"Pooled Assets"})]})})]})]})]})})}function Nt(c){const{price:o,changeSide:s}=c;return{displayPrice:p.useMemo(()=>{if(o)return s?k(Pe(1).div(o).toString(),10,!0).toString():o},[o,s])}}function Gt(c){const[o,s]=p.useState(!1),{currentPrice:t,minPrice:r,maxPrice:i,displayTokenA:a,displayTokenB:n,isLoading:u,isReverse:d}=c,{displayPrice:m}=Nt({price:t,changeSide:d?!o:o}),{displayMaxPrice:g,displayMinPrice:h}=wt({minPrice:r,maxPrice:i,changeSide:o});p.useEffect(()=>{s(d)},[d]);const l=p.useMemo(()=>o?n:a,[a,n,o]),b=p.useMemo(()=>(console.log("ðŸš€ ~ logoUrl ~ baseCoin?.logo_url:",l,l==null?void 0:l.logo_url),l!=null&&l.logo_url?l==null?void 0:l.logo_url:""),[l==null?void 0:l.logo_url]);return e.jsx(M,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:e.jsxs(j,{w:"100%",children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",mb:"6px",children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:"Position Range"}),e.jsxs(y,{gap:"0px",children:[b&&e.jsx(et,{imageUrl:b,imageStyle:{w:"20px",h:"20px"}}),e.jsxs(x,{color:"text_caption",children:[" ",l==null?void 0:l.symbol]}),e.jsxs(y,{ml:"8px",gap:"4px",cursor:"pointer",onClick:()=>s(!o),children:[e.jsx(x,{fontSize:"12px",children:" Base coin"}),e.jsx(tt,{xlinkHref:"#icon-icon_swap1"})]})]})]}),e.jsx(Et,{displayPrice:m,displayMaxPrice:g,displayMinPrice:h})]})})}function qt({payload:c,label:o}){return c&&c.length&&e.jsxs(j,{padding:"16px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid border_secondary",justifyContent:"flex-start",alignItems:"left",children:[e.jsx(x,{fontSize:"12px",children:c[0].payload.tooltipTime}),e.jsxs(y,{textAlign:"left",children:[e.jsx(x,{color:"#68FFD8",fontSize:"12px",children:"Pool Price"}),e.jsx(x,{color:"#68FFD8",fontSize:"12px",children:k(c[0].payload.real)})]}),e.jsxs(y,{children:[e.jsx(x,{color:"#6FBCF0",fontSize:"12px",children:"Price Range"}),e.jsxs(x,{color:"#6FBCF0",fontSize:"12px",children:[k(c[0].payload.lower),"-",k(c[0].payload.upper)]})]})]})}function Zt({data:c=[],dateType:o,isTabLoading:s}){const t=p.useMemo(()=>c,[c]),[r,i]=p.useState({lower:!1,upper:!1,real:!1}),a=p.useMemo(()=>{if(t.length){const d=Math.min(...t.map(b=>b.lower)),m=Math.max(...t.map(b=>b.upper)),g=w(m).mul(1.1),h=w(d).mul(.9),l=g.sub(h).div(4);return Array.from({length:5},(b,f)=>h.add(l.mul(f)).toNumber())}return[]},[t]),n=(d,m)=>{const g=new Date(m*1e3),h=g.getUTCHours(),l=g.getUTCMinutes(),b=g.getUTCDate(),f=g.getUTCMonth()+1;if(d<24||o==="24H"){const R=h>=12?"PM":"AM",S=h%12||12;return`${String(S).padStart(2,"0")}:${String(l).padStart(2,"0")} ${R}`}return`${f}/${b}`},{isApp:u}=ie();return e.jsx(Tt,{width:"100%",height:"100%",children:e.jsxs(Pt,{data:t,margin:{top:0,left:10,right:28,bottom:5},children:[e.jsx(Rt,{dataKey:"date",fontSize:"12px",axisLine:!1,tickLine:!1,tick:{fill:"#909CA4"},dy:16,tickFormatter:d=>s?"":n(t.length,d),minTickGap:(t==null?void 0:t.length)>8?36:void 0,interval:(t==null?void 0:t.length)<=8?0:void 0}),e.jsx(Dt,{fontSize:"12px",ticks:a,domain:[a[0],a[a.length-1]],axisLine:!1,tickLine:!1,tickFormatter:d=>k(d,4),tick:e.jsx(_t,{})}),e.jsx(zt,{content:e.jsx(qt,{})}),e.jsx(kt,{align:"right",verticalAlign:"top",layout:"horizontal",wrapperStyle:{top:u?-8:-41,right:u?4:100,fontSize:12},formatter:d=>({lower:"Price Range",upper:"Price Range",real:"Pool Price"})[d]||d}),e.jsx(De,{type:"monotone",dataKey:"real",stroke:"#07EBAD",activeDot:{r:4,stroke:"#07EBAD"},hide:r.real,dot:!1,isAnimationActive:!1}),e.jsx(De,{type:"monotone",dataKey:"lower",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},dot:!1,hide:r.lower,isAnimationActive:!1}),e.jsx(De,{type:"monotone",dataKey:"upper",stroke:"#6FBCF0",activeDot:{r:4,stroke:"#6FBCF0"},legendType:"none",dot:!1,hide:r.upper,isAnimationActive:!1})]})})}function Yt(){const{fetchByApi:c}=Fe();return{getPriceRangeData:async s=>{try{const t=Ze(s,$e),r=await c(Lt,"GET",t);return r!=null&&r.list?r.list.map(i=>{const a=i.Timestamp*1e3,n=new Date(a);return{lower:i.value.lower,upper:i.value.upper,real:i.value.real,date:i.Timestamp,xAxis:Bt(n.toISOString().slice(0,10)),tooltipTime:Ue(a),hour:n.getHours()}}):[]}catch(t){return console.error("ðŸš€ ~ useGetPriceRangeData ~ getPriceRangeData Error:",t),[]}}}}function Xt({isRefresh:c,vaultsId:o,isReverse:s}){const[t,r]=p.useState(!1),{getPriceRangeData:i}=Yt(),[a,n]=p.useState(),u=[{label:"24H"},{label:"1W"}],[d,m]=p.useState("1W"),[g,h]=p.useState(!1),l=async f=>{const R=Date.now(),C=String(Math.floor(R/1e3-86400));try{r(!0);const D=(await i({vaultID:o,dateType:f=="24H"?"min":"hour",beginTimestamp:f=="24H"?C:"",endTimestamp:w(new Date().getTime()).toFixed(0)})).map(A=>{const L=s?w(1).div(w(A.upper)).toString():A.lower,F=s?w(1).div(w(A.lower)).toString():A.upper,te=s?w(1).div(A.real).toString():A.real;return{...A,lower:L,upper:F,real:te}});n(D),h(!1),r(!1)}catch(W){r(!1),h(!1),console.log("ðŸš€ðŸš€ðŸš€ ~ PriceRangeChartPageBlock.tsx:40 ~ fetchPricerangeHistogram ~ error:",W)}};p.useEffect(()=>{o&&l(d)},[o,d]),p.useEffect(()=>{c&&l(d)},[c]);const{isApp:b}=ie();return e.jsxs(M,{bg:"bg_six",borderColor:"border_secondary",padding:b?"12px":"20px 8px 20px 20px",children:[e.jsx(y,{justify:"space-between",children:e.jsxs(y,{pr:"12px",w:"100%",justify:"space-between",gap:"4px",children:[e.jsx(x,{fontWeight:"500",fontSize:"14px",children:"Historical Ranges"}),e.jsx(Se,{type:"outlineTab",tabList:u,currentTab:d,handleChangeTab:f=>{h(!0),m(f.label)},wrapStyle:{w:"88px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]})}),e.jsx(q,{w:"100%",h:"260px",mt:"20px",children:e.jsxs(q,{w:"100%",h:"260px",position:"relative",children:[t&&e.jsx(q,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(ke,{})}),e.jsx(Zt,{data:a,dateType:d,isTabLoading:g})]})})]})}function Kt(){const{fetchByApi:c}=Fe(),o=async t=>{console.log("ðŸš€ ~ getVaultHistogram ~ params:",t);const r={...t};r.dateType=t.type=="day"||t.type=="week"?"hour":"day",delete r.type;try{const i=Ze(r,$e),a=await c(Ht,"GET",i);return a!=null&&a.list?a==null?void 0:a.list.map((n,u)=>{var l;const d=n.Timestamp*1e3,m=new Date(d),g=Number(m.toISOString().slice(5,7)),h=s((l=a==null?void 0:a.list)==null?void 0:l.length,m,t==null?void 0:t.type,u);return{num:+n.value,date:n.Timestamp,xAxis:h,tooltipTime:Ue(d)}}):[]}catch(i){return console.error("ðŸš€ ~ useGetHistogramData ~ getHistogramData Error:",i),[]}},s=(t,r,i="D",a)=>{const n=i=="D"||i=="day"?"D":i=="W"||i=="week"?"W":"M";console.log("ðŸš€ ~ getXData ~ type:",i);const u=r,d=u.getUTCHours();let m=u.getUTCHours();const g=u.getUTCMinutes(),h=u.getUTCDate(),l=u.getUTCMonth()+1,b=m>=12?"PM":"AM";if(m=m%12||12,n=="D")return`${String(m).padStart(2,"0")}:${String(g).padStart(2,"0")} ${b}`;if(n=="M")return`${l}/${h}`;if(console.log("ðŸš€ ~ getXData ~ noShowHours:",d),t<24){const f=Math.floor(t/2);if(console.log("ðŸš€ ~ getXData ~ step:",t,a,a%f===0,f),a%f===0)return`${l}/${h}`}return t>=24&&t<120&&(d===0||d===12)?`${l}/${h}`:t>=120&&d===0&&g===0?`${l}/${h}`:""};return{getVaultHistogram:o}}function Jt({isRefresh:c,vaultsId:o}){console.log("ðŸš€ðŸš€ðŸš€ ~ TvlChartPageBlock.tsx:11 ~ TvlChartPageBlock ~ isRefresh:",c);const s=[{label:"24H"},{label:"1W"},{label:"1M"}],[t,r]=p.useState(!0),[i,a]=p.useState("24H"),{getVaultHistogram:n}=Kt(),[u,d]=p.useState([]),[m,g]=p.useState(),[h,l]=p.useState(),b=async()=>{var L,F;r(!0);const S=Date.now(),C=86400,W=i=="24H"?1*C:i=="1W"?7*C:30*C,D=W?String(Math.floor(S/1e3-W)):0,A=await n({type:i=="24H"?"day":i=="1W"?"week":"month",vaultID:o,beginTimestamp:D,endTimestamp:String(Math.floor(S/1e3))});l((L=A[A.length-1])==null?void 0:L.num),g((F=A[A.length-1])==null?void 0:F.num),console.log("ðŸš€ ~ file: TestData.tsx:78 ~ handleGetHistogramData ~ res:",A),d(A),r(!1)},f=S=>{console.log("ðŸš€ ~ file: TestData.tsx:88 ~ handleChangePureTvl ~ data:",S),g(S?S.num:h)};p.useEffect(()=>{o&&b()},[i,o]),p.useEffect(()=>{c&&b()},[c]);const{isApp:R}=ie();return e.jsxs(M,{bg:"bg_six",borderColor:"border_secondary",padding:R?"12px":"20px",children:[e.jsxs(y,{justify:"space-between",children:[m?e.jsxs(j,{align:"flex-start",gap:"4px",children:[e.jsx(x,{fontWeight:"500",fontSize:"12px",children:"TVL"}),e.jsx(x,{fontSize:"16px",color:"text_caption",mt:"8px",children:K(m,2)})]}):e.jsx(j,{align:"flex-start",gap:"4px"}),e.jsx(Se,{type:"outlineTab",tabList:s,currentTab:i,handleChangeTab:S=>a(S.label),wrapStyle:{w:"128px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),e.jsx(q,{w:"100%",h:"260px",mt:"20px",children:e.jsxs(q,{w:"100%",h:"260px",position:"relative",children:[t&&e.jsx(q,{position:"absolute",top:"38%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(ke,{})}),u.length>0&&e.jsx(Wt,{data:u,onChangeValue:f,isShowYAxis:!0,toolTipsType:"tvl"}),!t&&u.length===0&&e.jsx(qe,{type:"nodata"})]})})]})}function Qt(c){const{isOpen:o,onClose:s,data:t,onSubmitClick:r,calculateLpLoading:i}=c,{feeTier:a,displayTokenA:n,displayTokenB:u,displayAmountA:d,displayAmountB:m,totalAmountValue:g,sharePool:h,lpAmountLimit:l,lpDecimals:b}=t;return e.jsxs(st,{autoFocus:!1,returnFocusOnClose:!1,isOpen:o,onClose:s,isCentered:!0,children:[e.jsx(ot,{}),e.jsxs(rt,{children:[e.jsx(lt,{children:e.jsx(at,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),e.jsx(it,{}),e.jsx(nt,{textAlign:"center",p:"0px",children:e.jsxs(j,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsxs(y,{children:[e.jsx(Ee,{coinAIconUrl:n==null?void 0:n.logo_url,coinBIconUrl:u==null?void 0:u.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(x,{fontSize:"16px",color:"text_caption",children:`${n==null?void 0:n.symbol} - ${u==null?void 0:u.symbol}`})]}),e.jsx(M,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:e.jsxs(y,{children:[e.jsx(x,{children:"Fee Tier"}),e.jsx(x,{color:"primary",children:a})]})})]}),e.jsx(Mt,{coinA:{amount:d,...n},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:m,...u}}),e.jsx(Ye,{amountLimit:l,inputTotalValue:g,preCalculateLoading:!1,calculateLpLoading:i,lpRate:h,lpDecimals:b,poolName:`${n==null?void 0:n.symbol} - ${u==null?void 0:u.symbol}`}),e.jsx(q,{h:"52px"}),e.jsx(Ae,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{r()},children:"Deposit"})]})})]})]})}const Vt="You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",It=(c,o)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${o} via ${c} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`;function Je(c){const{displayTokenA:o,displayTokenB:s,onSelectAssetTab:t,showAfterIcon:r=!1,label:i="Deposit Amounts",handleRefreshClick:a,refreshCount:n,isCheckedZAP:u,setIsCheckedZAP:d,assetAction:m,setAssetAction:g,isUnstableVault:h,currentActionTab:l}=c;console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:47 ~ props:",c);const{stakeProtocolName:b}=mt(o==null?void 0:o.coin_type),[f,R]=p.useState("both"),S=p.useMemo(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ SwitchAssetTab.tsx:52 ~ tabList ~ displayTokenA:",o),o&&s){const D=[{label:`${o.symbol} only`,action:o.coin_type,afterIcon:u&&l=="Deposit"&&!h?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:h?l=="Deposit"?`You can add liquidity in this pool with only ${o.symbol}.`:"":Vt},{label:`${s.symbol} only`,action:s.coin_type,afterIcon:u&&l=="Deposit"&&!h?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:h?l=="Deposit"?`You can add liquidity in this pool with only ${s.symbol}.`:"":It(b,o==null?void 0:o.symbol)}];return h&&l=="Deposit"&&D.splice(1,0,{label:`${o.symbol}+${s.symbol}`,action:"both",afterIcon:u&&!h&&l=="Deposit"?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:l=="Deposit"?"You can add any value you want from both assets.":""}),D}return[]},[o,b,u]),C=p.useMemo(()=>{if(S.length!==0){if(console.log("ðŸš€ðŸš€ðŸš€ ~ currentTab ~ assetAction:",m),h){if(m===(o==null?void 0:o.coin_type))return S[0].label;if(m===(s==null?void 0:s.coin_type))return l=="Withdraw"?S[1].label:S[2].label}else{if(m===(o==null?void 0:o.coin_type))return S[0].label;if(m===(s==null?void 0:s.coin_type))return S[1].label}return S[1].label}},[m,S,u]),W=p.useMemo(()=>l=="Deposit"?h?"customDeposit":"deposit":"withdraw",[l,h]);return e.jsxs(j,{w:"100%",gap:"16px",children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsx(x,{fontWeight:"500",children:i}),e.jsx(At,{isCheckedZAP:u,zapText:l=="Deposit"?"Zap In":"Zap Out",tooltipType:W,zapSwitchChange:D=>{d(!u),g(D?o==null?void 0:o.coin_type:"both"),R((o==null?void 0:o.symbol)+" only")}})]}),u?e.jsx(Se,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:C,tabList:S,handleChangeTab:D=>{g(D.action),console.log("ðŸš€ðŸš€ðŸš€ ~ item.action:",D.action),t(D.action)}}):null]})}function es(c){const{category:o}=Oe();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:32 ~ VaultsAdd ~ category:",o);const{apiVaultInfo:s,tokenA:t,tokenB:r,isReverse:i,vaultsId:a,totalLp:n,feeTier:u,handleRefreshClick:d,currentActionTab:m}=c,g=ae.useVaultsAdd(o=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:35 ~ VaultsAdd ~ useVaultsAdd:",g);const h=ae.useAddButtonStatus(o=="haedal"),l=ae.useGetContractVaultInfo(o=="haedal");console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:29 ~ VaultsAdd ~ totalLp:",n);const[b,f]=p.useState("both"),[R,S]=p.useState(!1),{currentAccount:C,onWalletModal:W}=Le(),{fromTokenLock:D,toTokenLock:A,lpTokenInfo:L,gtAumLimit:F,hardCapUSD:te,vaultTvl:O}=l(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse),{amountInputA:V,amountInputB:Z,balanceInfoA:_,balanceInfoB:P,amountValueA:ce,amountValueB:xe,preCalculateLoading:T,fixAmountA:B,inputTotalValue:N,handleAmountInputChange:oe,calculateResult:v,showOnlySideTips:$,doAddAction:re,reCalculateResult:de,overHardtop:I,zapNumError:Y,calculateLpLoading:ne,inputTotalValueError:z}=g(b,d,a,i?r:t,i?t:r,s==null?void 0:s.isReverse,R,te,O);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:55 ~ VaultsAdd ~ overHardtop:",I,F);const{vaultsSlippage:ee}=Ft();console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:76 ~ VaultsAdd ~ gtAumLimit:",F);const{btnText:le,btnDisabled:Ce}=h(R,b,!0,V,Z,i?!B:B,_==null?void 0:_.balanceFormat,P==null?void 0:P.balanceFormat,t,r,o=="haedal",Y,v,I,z);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:80 ~ VaultsAdd ~ calculateResult:",v);const{lpRate:ve}=Ne(v==null?void 0:v.ft_amount,n),{amountLimit:ue}=Ge(Number(ee),v==null?void 0:v.ft_amount,!1),[U,G]=p.useState(!1),he=p.useMemo(()=>_,[_==null?void 0:_.balance,P==null?void 0:P.balance,i]),ge=p.useMemo(()=>P,[_==null?void 0:_.balance,P==null?void 0:P.balance,i]),X=p.useMemo(()=>t,[i,t,r]),H=p.useMemo(()=>r,[i,t,r]),me=()=>({feeTier:u||"",displayTokenA:X,displayTokenB:H,displayAmountA:V,displayAmountB:Z,totalAmountValue:N,sharePool:ve,lpAmountLimit:ue||"0",lpDecimals:L==null?void 0:L.decimals}),{isApp:be}=ie();return e.jsxs(j,{gap:"8px",w:"100%",align:"flex-start",children:[e.jsxs(M,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[e.jsx(Je,{showAfterIcon:!0,displayTokenB:r,displayTokenA:t,onSelectAssetTab:f,assetAction:b,isCheckedZAP:R,setIsCheckedZAP:S,setAssetAction:f,isUnstableVault:o=="haedal",currentActionTab:m,handleRefreshClick:()=>{d(),de()}}),e.jsx(j,{mt:"16px",position:"relative",children:e.jsx(Xe,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:b!=="both"&&b!==(X==null?void 0:X.coin_type),balance:(he==null?void 0:he.balanceFormat)||"",value:V,amountValue:ce,loading:(i?B:!B)&&T&&!R,onChange:ye=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsAdd.tsx:183 ~ VaultsAdd ~ value,amountInputB:",ye,Z),oe(ye,!i,!0,Z)},selectable:!1,placeholder:"0.0",token:X},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:b!=="both"&&b!==(H==null?void 0:H.coin_type),balance:(ge==null?void 0:ge.balanceFormat)||"",value:Z,amountValue:xe,loading:(i?!B:B)&&T&&!R,onChange:ye=>{oe(ye,i,!0,V)},selectable:!1,placeholder:"0.0",token:H},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),e.jsx(M,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(j,{w:"100%",gap:"20px",children:[e.jsx(Ae,{m:"-1px",isLoading:T||U,w:"100%",borderRadius:"12px",h:"52px",fontSize:be&&Y?"14px":"18px",fontWeight:"500",disabled:Ce||T||U||F||I,onClick:()=>{C?G(!0):W(!0)},children:le||(R?"Zap In":"Deposit")}),F?e.jsx(j,{w:"100%",pl:"16px",pr:"16px",pb:v||$?"0px":"20px",alignItems:"start",children:e.jsx(x,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The vault has reached its current capacity. New deposits are not accepted at this time."})}):I?e.jsx(j,{w:"100%",pl:"16px",pr:"16px",pb:v||$?"0px":"20px",alignItems:"start",gap:"20px",children:e.jsx(x,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Your deposit has gone over the vault capacity. Try reducing your deposit amount."})}):Y?e.jsx(j,{w:"100%",pl:"16px",pr:"16px",pb:v||$?"0px":"20px",alignItems:"start",gap:"20px",children:e.jsx(x,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}):null,z&&e.jsx(j,{w:"100%",pl:"16px",pb:"20px",pr:"16px",alignItems:"start",children:e.jsx(x,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(v||$)&&!z&&e.jsxs(j,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[b!=="both"&&$&&e.jsx(x,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:v?"20px":"0",children:$}),v&&e.jsx(Ye,{amountLimit:ue,inputTotalValue:N,preCalculateLoading:T,calculateLpLoading:ne,lpDecimals:L==null?void 0:L.decimals,lpRate:ve,poolName:`${X==null?void 0:X.symbol} - ${H==null?void 0:H.symbol}`})]})]})}),U&&e.jsx(Qt,{data:me(),isOpen:U,calculateLpLoading:ne,onClose:()=>{G(!1)},onSubmitClick:()=>{G(!1),re()}})]})}function ts(c){const{depositRatio:o,hardCapUSD:s,vaultTvl:t,value:r,label:i,textStyle:a}=c;return console.log("ðŸš€ðŸš€ðŸš€ ~ AumLimit.tsx:16 ~ AumLimit ~ depositRatio:",o),e.jsxs(y,{w:"100%",justifyContent:"flex-end",children:[e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",children:i}),e.jsx(ze,{placement:"bottom-end",tooltip:e.jsxs(j,{w:"260px",p:"4px",gap:"8px",children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsx(x,{fontSize:"12px",color:"primary_gray",children:"Current TVL"}),e.jsx(x,{fontSize:"12px",color:"primary_gray",children:"Capacity"})]}),e.jsx(Ke,{h:"4px",w:"100%",value:Number(o),bg:"primary_opacity.10",sx:{'div[role="progressbar"]':{bg:"primary"}}}),e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsxs(y,{children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:pe(t,"$")}),e.jsx(x,{fontSize:"12px",color:"primary",children:pt(o,2)})]}),e.jsxs(x,{fontSize:"12px",color:"text_caption",children:["$",k(s,2)]})]})]}),children:e.jsx(fe,{cursor:"pointer",children:e.jsx(x,{color:"text_caption",textDecoration:"underline dotted",fontSize:"12px",...a,children:r})})})]})}function ss(c){const{vaultsCoinPercent:o,displayTokenB:s,displayTokenA:t,vaultCoinAmounts:r,vaultsCoinAValue:i,vaultsCoinBValue:a,isReverse:n,depositRatio:u,hardCapUSD:d,vaultTvl:m}=c,g=p.useMemo(()=>n?a:i,[n,i,a]),h=p.useMemo(()=>n?i:a,[n,i,a]),l=p.useMemo(()=>n?o==null?void 0:o.percentB:o==null?void 0:o.percentA,[n,o]),b=p.useMemo(()=>n?o==null?void 0:o.percentA:o==null?void 0:o.percentB,[n,o]),{isApp:f}=ie();return e.jsx(M,{bg:"bg_six",borderColor:"border_secondary",p:{base:"16px 8px",lg:"20px 16px"},children:e.jsxs(j,{w:"100%",gap:"0px",children:[e.jsxs(y,{w:"100%",justifyContent:"space-between",children:[e.jsx(x,{w:"100%",textAlign:"start",fontSize:"16px",color:"text_caption",children:"Vault Composition"}),d&&e.jsx(ts,{depositRatio:u,hardCapUSD:d,vaultTvl:m,label:"Capacity",value:pe(d,"$")})]}),e.jsxs(y,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"28px",children:[e.jsxs(y,{children:[e.jsx(se,{token:t,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!f}),e.jsx(Q,{wrapStyle:{gap:"4px"},title:E(t==null?void 0:t.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${l}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}})]}),e.jsx(Ke,{ml:"16px",mr:"16px",flex:"1",h:"4px",value:l,bg:Number(l)!==0&&Number(b)!==0?"quote_green":"process_bg_gray",sx:{'div[role="progressbar"]':{bg:"primary"}}}),e.jsxs(y,{children:[e.jsx(Q,{wrapStyle:{gap:"4px",alignItems:"flex-end"},title:E(s==null?void 0:s.symbol,10)||"",titleStyle:{fontSize:"16px",color:"text_caption",fontWeight:"600"},value:`${b}%`,valueStyle:{fontSize:"12px",color:"text_paragraph",fontWeight:"500"}}),e.jsx(se,{token:s,haveName:!1,haveSymbol:!1,symbolFontSize:"12px",warningIcon:{iconW:"16px",iconH:"16px"},imgBoxStyle:{w:"32px",h:"32px"},haveTooltip:!0})]})]}),e.jsxs(y,{w:{base:"100%",lg:"90%"},justifyContent:"space-between",mt:"12px",children:[e.jsx(Q,{wrapStyle:{gap:{base:"8px",lg:"4px"}},title:`${k(r==null?void 0:r.displayCoinA,6)} ${E(t==null?void 0:t.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:K(g,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}}),e.jsx(Q,{wrapStyle:{gap:{base:"8px",lg:"4px"},alignItems:"flex-end"},title:`${k(r==null?void 0:r.displayCoinB,6)} ${E(s==null?void 0:s.symbol,10)}`,titleStyle:{fontSize:{base:"12px",lg:"14px"},color:"text_caption",fontWeight:"500"},value:K(h,2),valueStyle:{color:"text_paragraph",fontSize:{base:"12px",lg:"14px"},fontWeight:"500"}})]})]})})}function os(c){var n,u,d,m,g,h;const{isApp:o}=ie(),{apiVaultInfo:s,isUnstableVault:t,vaultTvl:r,performanceFee:i}=c,{getExplorerUrl:a}=ct();return e.jsxs(we,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:"space-between",children:[e.jsxs(y,{children:[e.jsx(Ee,{coinACoinType:(n=s==null?void 0:s.displayTokenA)==null?void 0:n.coin_type,coinBCoinType:(u=s==null?void 0:s.displayTokenB)==null?void 0:u.coin_type,coinAIconUrl:(d=s==null?void 0:s.displayTokenA)==null?void 0:d.logo_url,coinBIconUrl:(m=s==null?void 0:s.displayTokenB)==null?void 0:m.logo_url}),e.jsxs(j,{alignItems:"start",flexDirection:t?"column":"row",gap:"2px",children:[e.jsxs(y,{children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:(s==null?void 0:s.name)||`${(g=s==null?void 0:s.displayTokenA)==null?void 0:g.symbol} - ${(h=s==null?void 0:s.displayTokenB)==null?void 0:h.symbol}`}),e.jsx(M,{w:"unset",p:"4px 6px",borderRadius:"12px",ml:"4px",children:e.jsx(y,{children:e.jsx(x,{fontSize:"12px",color:"primary",children:s==null?void 0:s.feeDisplay})})})]}),e.jsx(y,{mt:"4px",children:t&&e.jsx($t,{fontSize:"14px",imgW:"20px",imgH:"16px",category:"Haedal"})})]}),!o&&e.jsxs(y,{ml:"12px",gap:"4px",children:[e.jsx(x,{fontSize:"14px",children:"Vault Address"}),e.jsx(We,{fontSize:"14px",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(a(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})]})]}),e.jsx(we,{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"60px"},children:o?e.jsxs(e.Fragment,{children:[e.jsx(J,{label:"Vault Address",labelStyle:{fontSize:"14px"},value:e.jsx(We,{fontSize:"14px",color:"text_caption",address:(s==null?void 0:s.vaultsId)||"",onClickLink:()=>{window.open(a(s==null?void 0:s.vaultsId,"poolAddress"),"_blank")}})}),e.jsx(J,{wrapStyle:{gap:"6px"},label:"APY",labelStyle:{fontSize:"14px"},rightValueTip:e.jsx(Be,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(J,{wrapStyle:{gap:"6px"},label:"Earnings",labelStyle:{fontSize:"14px"},value:e.jsx(ze,{placement:"top",tooltip:e.jsx(x,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(fe,{children:e.jsx(y,{w:"100px",justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(l=>e.jsx(He,{coinType:l},l))})})}),valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(J,{wrapStyle:{gap:"6px"},label:"TVL",labelStyle:{fontSize:"14px"},value:(t?pe(r,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),t&&e.jsx(J,{wrapStyle:{gap:"6px"},label:e.jsxs(y,{children:[e.jsx(x,{children:"Performance Fee"}),e.jsx(Me,{type:"vaultDetailFee"})]}),labelStyle:{fontSize:"14px"},value:pe(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}})]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"APY",titleStyle:{fontSize:"12px"},valueTooltip:e.jsx(Be,{vaultsLstApyDisplay:s==null?void 0:s.vaultsLstApyDisplay,vaultsApyDisplay:s==null?void 0:s.vaultsApyDisplay,vaultsTotalApyDisplay:s==null?void 0:s.vaultsTotalApyDisplay,vaultsAprDisplay:s==null?void 0:s.vaultsAprDisplay,category:s==null?void 0:s.category}),value:(s==null?void 0:s.category)=="cetus"?s==null?void 0:s.vaultsTotalApyDisplay:(s==null?void 0:s.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontWeight:"500"}}),e.jsx(Q,{wrapStyle:{gap:"6px",alignItems:"flex-end"},title:"Earnings",titleStyle:{fontSize:"12px"},value:e.jsx(ze,{placement:"top",tooltip:e.jsx(x,{fontSize:"12px",lineHeight:"20px",maxW:"240px",children:"Rewards will be auto harvested and compounded to your position."}),children:e.jsx(fe,{children:e.jsx(y,{justifyContent:"end",children:s==null?void 0:s.vaultsRewards.map(l=>e.jsx(He,{coinType:l},l))})})}),valueStyle:{h:"20px"}}),e.jsx(Q,{wrapStyle:{alignItems:"flex-end",gap:"6px"},title:"TVL",titleStyle:{fontSize:"12px"},value:(t?pe(r,"$"):s==null?void 0:s.vaultsTvlDisplay)||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}}),t&&e.jsx(Q,{wrapStyle:{alignItems:"flex-end",gap:"2px"},title:e.jsxs(y,{children:[e.jsx(x,{fontSize:"12px",children:"Performance Fee"}),e.jsx(Me,{type:"vaultDetailFee"})]}),titleStyle:{fontSize:"12px",mt:"-4px"},value:pe(i,"%")||"-",valueStyle:{color:"text_caption",h:"20px",lineHeight:"20px",fontWeight:"500"}})]})})]})}function rs(c){const{apiVaultInfo:o,tokenA:s,tokenB:t,isReverse:r,vaultsId:i,totalLp:a,holdCoinAmounts:n,holdLpAmount:u,handleRefreshClick:d,isUnstableVault:m,currentActionTab:g}=c,h=ae.useVaultsRemove(m);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ isReverse:",r),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenB:",t),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:31 ~ VaultsRemove ~ tokenA:",s);const l=ae.useAddButtonStatus(m),b=ae.useGetContractVaultInfo(m),[f,R]=p.useState(!1),[S,C]=p.useState("both"),{currentAccount:W,onWalletModal:D}=Le(),{contractClmmPoolObj:A}=bt(),L=p.useMemo(()=>{if(A&&A[o==null?void 0:o.clmmPoolAddress])return A[o==null?void 0:o.clmmPoolAddress]},[o==null?void 0:o.clmmPoolAddress,A]),{fromTokenLock:F,toTokenLock:te,lpTokenInfo:O}=b(o==null?void 0:o.vaultsId,o==null?void 0:o.clmmPoolAddress,o==null?void 0:o.tokenA,o==null?void 0:o.tokenB,o==null?void 0:o.isReverse),{amountInputA:V,amountInputB:Z,availableAmountA:_,availableAmountB:P,amountValueA:ce,amountValueB:xe,preCalculateLoading:T,fixAmountA:B,inputTotalValue:N,handleAmountInputChange:oe,calculateResult:v,showOnlySideTips:$,doRemoveAction:re,handlePercentInputChange:de,removePercent:I,isPercentInput:Y,reCalculateResult:ne,calculateAvailableLoading:z,submitLoading:ee}=h(S,d,n,a,u,i,r?t:s,r?s:t,r,F,te,f,L),le=p.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",N),N&&f?Pe(N).gt(0)&&Pe(N).lt(1e-4):!1),[f,N]),{btnText:Ce,btnDisabled:ve}=l(f,S,!1,V,Z,r?!B:B,_,P,s,t,m,"",v,le);Ne(v==null?void 0:v.burn_ft_amount,a);const{amountLimit:ue}=Ge(0,v==null?void 0:v.burn_ft_amount,!1);p.useMemo(()=>_,[_,r]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceA ~ availableAmountA:",_),p.useMemo(()=>P,[P]),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:85 ~ balanceB ~ availableAmountB:",P);const U=p.useMemo(()=>s,[r,s,t]),G=p.useMemo(()=>t,[r,s,t]),he=p.useMemo(()=>T?Y?!0:r?B:!B:!1,[T,Y]),ge=p.useMemo(()=>T?Y?!0:r?!B:B:!1,[T,Y]),X=p.useMemo(()=>k(xt(ue||"0",O==null?void 0:O.decimals),O==null?void 0:O.decimals),[ue,O]);return e.jsxs(j,{gap:"8px",w:"100%",align:"flex-start",children:[e.jsxs(M,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:"16px"},w:"100%",children:[e.jsx(Je,{label:"Remove Amounts",displayTokenA:s,displayTokenB:t,onSelectAssetTab:C,handleRefreshClick:()=>{d(),ne()},isCheckedZAP:f,setIsCheckedZAP:R,assetAction:S,setAssetAction:C,currentActionTab:g,isUnstableVault:m}),e.jsx(q,{w:"100%",position:"relative",mt:"16px",children:e.jsx(Xe,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:z,hideSelf:S!=="both"&&S!==(U==null?void 0:U.coin_type),balance:_||"",value:V,amountValue:ce,loading:he,onChange:(H,me,be)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:179 ~ VaultsRemove ~ value:",H),oe(H,!r,me,be)},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:U,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:z,needRemainBalance:!1,hideSelf:S!=="both"&&S!==(G==null?void 0:G.coin_type),balance:P||"",value:Z,amountValue:xe,loading:ge,onChange:(H,me,be)=>{oe(H,r,me,be)},selectable:!1,placeholder:"0.0",token:G},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},hasCenterIconHover:!1})})]}),e.jsxs(M,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[e.jsx(x,{color:"primary_gray",children:"Amount"}),e.jsx(Ut,{percentage:I,onChange:H=>{z||de(Number(H.toString().replace("%","")))}})]}),e.jsx(M,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(j,{w:"100%",gap:"20px",children:[e.jsx(Ae,{m:"-1px",isLoading:T||ee,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:ve||T||ee,onClick:()=>{W?re():D(!0)},children:Ce||(f?"Zap Out":"Withdraw")}),le&&e.jsx(j,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:e.jsx(x,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),v&&!le&&e.jsxs(j,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[S!=="both"&&$&&e.jsx(x,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:$}),e.jsxs(j,{w:"100%",gap:"20px",children:[e.jsx(J,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:K(N,2),valueStyle:{fontSize:"14px"},isLoading:T}),e.jsx(J,{label:"LP Burn Amount",value:`${X} ${`${U==null?void 0:U.symbol} - ${G==null?void 0:G.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},isLoading:T})]})]})]})})]})}const ls=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function ao(){const{vaultId:c,category:o}=Oe(),{currentAccount:s}=Le(),{apiVaultInfo:t,getApiVaultInfo:r}=yt(c),{fetchAccountBalance:i}=vt(),a=ae.useGetContractVaultInfo(o=="haedal"),{vaultStatsObj:n}=jt(),[u,d]=p.useState(!0);p.useEffect(()=>{var z;if(console.log("ðŸš€ ~ VaultsDetailPage ~ vaultStatsObj:",Object.values(n),n,c),c&&dt(n)){const ee=(z=Object.values(n))==null?void 0:z.filter(le=>le.vaultsId==c);console.log("ðŸš€ ~ arr ~ arr:",ee),(ee==null?void 0:ee.length)>0?d(!0):d(!1)}},[c,n]);const{contractVault:m,lpTokenInfo:g,minPrice:h,maxPrice:l,vaultCoinAmounts:b,vaultsCoinAValue:f,vaultsCoinBValue:R,currPrice:S,balanceInfo:C,totalValue:W,fetchClmmPoolFromContract:D,fetchVaultInfoFromContract:A,vaultsCoinPercent:L,sharePoolRate:F,holdCoinAmounts:te,holdCoinAValue:O,holdCoinBValue:V,fetchVaultBalance:Z,vaultTvl:_,depositRatio:P,hardCapUSD:ce,performanceFee:xe}=a(t==null?void 0:t.vaultsId,t==null?void 0:t.clmmPoolAddress,t==null?void 0:t.tokenA,t==null?void 0:t.tokenB,t==null?void 0:t.isReverse);console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:81 ~ VaultsDetailPage ~ totalValue:",W),console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:61 ~ VaultsDetailPage ~ vaultTvl:",_);const[T,B]=p.useState("Deposit");p.useEffect(()=>{s!=null&&s.address&&t&&t.vaultsId&&(g!=null&&g.decimals)&&o=="haedal"&&Z(s==null?void 0:s.address,t.vaultsId,g==null?void 0:g.decimals)},[s==null?void 0:s.address,t,g==null?void 0:g.decimals,o]);const{rewardPerA:N,rewardPerB:oe}=ft(C==null?void 0:C.balanceFormat,t);p.useEffect(()=>{c&&(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsDetailPage.tsx:87 ~ useEffect ~ fetchVaultInfoFromContract:",A),A(c,!0))},[c]),p.useEffect(()=>{t&&D(t.clmmPoolAddress,!0)},[t==null?void 0:t.clmmPoolAddress]),p.useEffect(()=>{s!=null&&s.address&&i()},[]);const[v,$]=p.useState(!1),re=()=>{i(),t&&D(t.clmmPoolAddress,!0),c&&(A(c,!0),r(c,!0)),$(!0),setTimeout(()=>{$(!1)},1e3)},de=[{label:"Overview",value:"Overview"},{label:"Analytics",value:"Analytics"}],[I,Y]=p.useState("Overview"),ne=ut();return e.jsx(q,{pt:"40px",w:"100%",children:u?e.jsxs(j,{gap:"20px",w:"100%",align:"flex-start",children:[e.jsx(y,{w:"100%",justify:"space-between",children:e.jsx(ht,{bg:"bg_six",borderColor:"border_secondary"})}),e.jsx(os,{apiVaultInfo:t,isUnstableVault:o=="haedal",vaultTvl:_,performanceFee:xe}),e.jsxs(we,{flexDir:{base:"column-reverse",lg:"row"},w:"100%",justifyContent:"space-between",gap:"16px",alignItems:"start",children:[e.jsxs(j,{width:"100%",flex:"1",gap:"8px",children:[(t==null?void 0:t.category)=="haedal"&&e.jsx(Se,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",padding:"20px",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:de,currentTab:I,handleChangeTab:z=>{Y(z==null?void 0:z.value)}}),I=="Overview"?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{minPrice:h,maxPrice:l,currentPrice:t!=null&&t.isReverse?1/S:S,displayTokenB:t!=null&&t.isReverse?t==null?void 0:t.displayTokenA:t==null?void 0:t.displayTokenB,displayTokenA:t!=null&&t.isReverse?t==null?void 0:t.displayTokenB:t==null?void 0:t.displayTokenA,isReverse:(t==null?void 0:t.isReverse)||!1}),e.jsx(ss,{vaultCoinAmounts:b,vaultsCoinAValue:f,vaultsCoinBValue:R,displayTokenB:t==null?void 0:t.displayTokenB,displayTokenA:t==null?void 0:t.displayTokenA,isReverse:(t==null?void 0:t.isReverse)||!1,vaultsCoinPercent:L,depositRatio:P,hardCapUSD:ce,vaultTvl:_}),e.jsx(Ot,{lpTokenInfo:g,sharePoolRate:F,balanceInfo:C,totalValue:W,displayTokenB:t==null?void 0:t.displayTokenB,displayTokenA:t==null?void 0:t.displayTokenA,holdCoinAmounts:te,holdCoinAValue:O,holdCoinBValue:V,isReverse:(t==null?void 0:t.isReverse)||!1,rewardPerA:N,rewardPerB:oe})]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{isRefresh:v,vaultsId:t==null?void 0:t.vaultsId}),e.jsx(Xt,{isRefresh:v,vaultsId:t==null?void 0:t.vaultsId,isReverse:t==null?void 0:t.isReverse})]})]}),e.jsxs(j,{w:{base:"100%",lg:"40%"},justifyContent:"start",gap:"8px",children:[e.jsx(M,{p:"0",borderRadius:"12px",bg:"bg_six",borderColor:"border_secondary",children:e.jsxs(y,{w:"100%",p:{base:"0 8px",lg:"0 16px"},children:[e.jsx(Se,{type:"borderTab",wrapStyle:{w:"100%",h:"60px",border:"none",bg:"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:"16px",mr:"28px"},tabList:ls,currentTab:T,handleChangeTab:z=>{B(z==null?void 0:z.value)}}),e.jsxs(y,{children:[e.jsx(gt,{slippageType:"vaults",compact:!0}),e.jsx(St,{handleRefresh:re,isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),T==="Deposit"&&e.jsx(es,{apiVaultInfo:t,feeTier:t==null?void 0:t.feeDisplay,tokenA:t==null?void 0:t.displayTokenA,tokenB:t==null?void 0:t.displayTokenB,isReverse:(t==null?void 0:t.isReverse)||!1,vaultsId:t==null?void 0:t.vaultsId,totalLp:(m==null?void 0:m.total_supply)||(m==null?void 0:m.lp_token_treasury),isUnstableVault:o=="haedal",handleRefreshClick:re,currentActionTab:T}),T==="Withdraw"&&e.jsx(rs,{apiVaultInfo:t,holdCoinAmounts:te,tokenA:t==null?void 0:t.displayTokenA,tokenB:t==null?void 0:t.displayTokenB,isReverse:(t==null?void 0:t.isReverse)||!1,vaultsId:t==null?void 0:t.vaultsId,totalLp:m==null?void 0:m.total_supply,holdLpAmount:C==null?void 0:C.balance,isUnstableVault:o=="haedal",handleRefreshClick:re,currentActionTab:T})]})]})]}):e.jsx(qe,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsxs(j,{children:[e.jsx(x,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Pool address not found"}),e.jsx(Ae,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{ne("/vaults")},children:"Back to Vault"})]})})})}export{ao as default};
