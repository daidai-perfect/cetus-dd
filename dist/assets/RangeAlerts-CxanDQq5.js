import{aD as A,a1 as E,r as l,j as s,H as c,V as C,T as d,$ as D}from"./index-D49RffYW.js";import{a as x,u as H}from"./useNotifiSubscription-CuqMrTBs.js";import{c as k}from"./usePositionList-CyCzZNts.js";import{S as T}from"./switch-Dw_sCPfe.js";const V="/assets/bg_alerts@2x-BsIoiXpE.png";function q({subscriptionSource:o,title:f="Range Alerts",description:S="Receive alerts via Telegram, SMS, or email when this position goes out of range.",wrapStyle:g={}}){const{getPositionNotifiStatus:u}=x(),{isChecked:h,setIsChecked:e,notifiAuthenticated:m,notifiSourceGroups:b,setIsShowNotifi:j,notifiSubscriptionLoading:n,notifiStatus:p}=A(),{currentAccount:a}=E(),{notifiUnSubscription:w,notifiSubscription:y}=H(),{currentPosBaseInfo:i}=k();l.useEffect(()=>{if(a!=null&&a.address&&o=="PositionDetail"&&i&&p=="authenticated"&&!n){const{isSubscription:t}=u(i.posId,String(i.index));e(t)}},[a,o,i,m,b,n]);const{createNotifiSubscriptionVerify:R}=x(),N=async t=>{if(e(t),t&&!await R())return e(!1),!1;if(o=="AddLiquidity")e(t);else if(o=="PositionDetail")if(t){const r={subscriptionSource:"PositionDetail",position:i==null?void 0:i.posId,pool:i==null?void 0:i.clmmPool,posIndex:String(i==null?void 0:i.index)};y(r)}else w(i==null?void 0:i.posId,i==null?void 0:i.clmmPool,i==null?void 0:i.index)};return l.useEffect(()=>()=>{e(!1)},[]),s.jsx(c,{w:"100%",bgImage:V,bgSize:"100% 100%",p:"16px",borderRadius:"8px",...g,children:s.jsxs(C,{w:"100%",gap:"8px",children:[s.jsxs(c,{w:"100%",justify:"space-between",children:[s.jsx(d,{color:"primary",children:f}),p=="authenticated"?s.jsx(T,{isChecked:h,disabled:n,onChange:t=>N(t.target.checked)}):s.jsx(D,{w:"112px",h:"28px",borderRadius:"8px",fontWeight:"500",fontSize:"14px",onClick:()=>j(!0),children:"Set up"})]}),s.jsx(d,{color:"primary_gray",lineHeight:"20px",textAlign:"left",children:S})]})})}export{q as R};
