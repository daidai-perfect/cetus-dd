import{j as e,ac as K,ad as Q,ae as X,af as ee,ah as te,ai as re,r as l,d,B as k,aB as C,I as z,T as n,H as x,C as $,Z as D,bi as ae,aj as H,d1 as se,V as R,i as ne,am as oe,ap as ie,b as pe,aq as le,U as ce,ar as xe}from"./index-B-qrdBiq.js";import{u as de}from"./global-DXu_9rR6.js";import{g as ue}from"./index-CNO93z0h.js";import{T as V}from"./TooltipIcon-DpjOiY6Y.js";import{u as ge}from"./useTokenBalance-BjSd1T-L.js";const he={coin_type:"0x2::sui::SUI",decimals:9};function be(o){const{isOpen:s,onClose:i}=o;return e.jsxs(K,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:i,isCentered:!0,children:[e.jsx(Q,{}),e.jsxs(X,{children:[e.jsx(ee,{fontSize:"16px",fontWeight:"500",children:"Settings"}),e.jsx(te,{}),e.jsx(re,{pb:"16px",children:e.jsx(me,{...o})})]})]})}const me=o=>{const{isOpen:s,onClose:i,value:r,onChange:u,compact:a=!1,slippageType:h="global",isWidget:T=!1,transactionMode:b,onChangeTransctionMode:y,maxCapForGas:_,onChangeMaxCapForGas:P,mevProtect:S,onChangeMevProtect:M,customGasPrice:w,onChangeCustomGasPrice:v}=o,G=["0.1","0.5","1"],[t,c]=l.useState(""),[F,W]=l.useState(!1),{balanceInfo:m}=ge(he),[f,O]=l.useState(b),[j,B]=l.useState(_),[p,I]=l.useState(w),[A,U]=l.useState(S),L=g=>{const J=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,2})?).*$");g.target.value=g.target.value.replace(J,"$1"),c(g.target.value)},Y=g=>{c(g)};l.useEffect(()=>{r&&c(String(r))},[r]),l.useEffect(()=>{r&&c(String(r))},[s]);const q=()=>{if(t){const g=d(t).toNumber();u(g)}f==="Fast Mode"&&(P(j),v(p)),y(f),M(A),i()},Z=l.useMemo(()=>(console.log("ğŸš€ ~ btnIsDisabled ~ gasPrice:",p),f==="Fast Mode"&&(!j||Number(j)===0||Number(j)>5||!p||Number(p)===0||d(j).gt((m==null?void 0:m.balanceFormat)||"0")||d(j).lt(d(p).div(Math.pow(10,9))))||!+t?!0:h==="global"?Number(t)>50||Number(t)<.01:Number(t)>1),[h,t,f,j,p,m]);return l.useEffect(()=>{f==="Fast Mode"&&U(!0)},[f]),e.jsxs(k,{w:"100%",children:[e.jsxs(k,{children:[e.jsxs(C,{align:"center",mb:"16px",children:[e.jsx(z,{xlinkHref:"#icon-icon_verticalslider",svgHover:"text_paragraph",iconCursor:"text"}),e.jsx(n,{ml:"8px",color:"text_caption",fontSize:"14px",fontWeight:"500",children:"Slippage Tolerance"})]}),e.jsxs(k,{bg:a?h==="global"?Number(t)>50?"primary_red_opacity.10":"primary_yellow_opacity.10":Number(t)>1?"primary_red_opacity.10":"transparent":"transparent",borderRadius:"12px",children:[e.jsxs(x,{gap:"8px",mt:"8px",children:[e.jsx(C,{w:"100%",justifyContent:"center",alignItems:"center",borderRadius:"12px",border:"1px solid",borderColor:"border",background:"bg_secondary",h:"42px",children:G.map(g=>e.jsx($,{flex:"1",bg:g===String(t)?"#1A1C25 !important":"transparent",cursor:"pointer",h:"calc(100% - 6px)",margin:"2px",borderRadius:"8px",onClick:()=>Y(g),children:e.jsxs(n,{color:g===String(t)?"text_highlight":"text_paragraph",children:[g,"%"]})},g))}),e.jsx(fe,{compact:!0,inputValue:t,handleChange:L,wrapStyle:{flex:"0 0 150px",borderRadius:"12px"}})]}),t&&h==="global"&&(Number(t)>1||Number(t)<.05)?e.jsxs(C,{w:"100%",children:[Number(t)<.05?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Slippage is low. Your transaction may fail."})}):null,Number(t)<=50&&Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_yellow_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_yellow",ml:"4px",children:"Your transaction may be frontrun."})}):null,Number(t)>50?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null]}):null,t&&h==="vaults"&&Number(t)>1?e.jsx(C,{w:"100%",children:Number(t)>1?e.jsx(C,{w:"100%",justifyContent:"center",pt:"8px",pb:"8px",mt:"8px",borderRadius:"8px",bg:a?"transparent":"primary_red_opacity.10",children:e.jsx(n,{fontSize:"xs",color:"primary_red",ml:"4px",children:"Enter a valid slippage percentage"})}):null}):null]}),e.jsx(je,{transactionMode:f,setTransactionMode:O,maxCapForGas:j,setMaxCapForGas:B,customGasPrice:p,setCustomGasPrice:I,suiBalance:(m==null?void 0:m.balanceFormat)||"0"}),e.jsx(Ce,{mevProtect:A,setMevProtect:U,disabled:f==="Fast Mode"})]}),e.jsxs(C,{align:"center",justifyContent:"space-between",mt:"20px",gap:"16px",children:[e.jsx(D,{flex:"1",h:"42px",variant:"outline",borderRadius:"8px",onClick:i,p:"0 15px",children:"Cancel"}),e.jsx(D,{flex:"1",h:"42px",borderRadius:"8px",onClick:q,isDisabled:Z,children:"Save"})]})]})},fe=({inputValue:o,handleChange:s,wrapStyle:i={},compact:r=!1})=>e.jsxs(ae,{alignItems:"center",justifyContent:"center",w:"100%",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",h:"42px",p:"12px 16px",position:"relative",...i,children:[e.jsx(n,{pr:"8px",h:"20px",lineHeight:"20px",borderRight:"1px solid",borderColor:r?"transparent":"border",children:"Custom"}),e.jsx(H,{borderRadius:"8px",h:"40px",mr:"2px",border:"none",variant:"outline",value:o,onChange:s,textAlign:"right",fontSize:"sm",placeholder:"0.0",pr:{base:"14px",lg:"8px"},pl:"0"}),e.jsx(se,{width:"20px",height:"40px",top:"0.5px",right:{base:"12px",lg:"8px"},children:e.jsx(n,{fontSize:"sm",color:"text_caption",children:"%"})})]}),E=[{label:"Default"},{label:"Fast Mode",beforeIcon:{xlinkHref:"#icon-icon_flash",fontSize:"16px",activeColor:"#FFCA68",activeHoverColor:"#FFCA68"}}],je=o=>{const{transactionMode:s,setTransactionMode:i,maxCapForGas:r,setMaxCapForGas:u,customGasPrice:a,setCustomGasPrice:h,suiBalance:T}=o,b=l.useMemo(()=>{var t;return(t=E.filter(c=>(c==null?void 0:c.label)===s))==null?void 0:t[0]},[s,E]),y=t=>{i(t.label)},_=t=>{const c=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(c,"$1"),u(t.target.value)},P=t=>{const c=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");t.target.value=t.target.value.replace(c,"$1");const F=d(t.target.value).gt(0)?d(t.target.value).div(Math.pow(10,9)).toString():"0";d(F).gt(r)&&u(F),h(t.target.value)},S=l.useMemo(()=>!r||Number(r)==0?"Please enter a value higher than 0":r&&Number(r)>5?"Only allow up to 5 SUI":d(r).gt(T)?"Insufficient SUI balance ":d(r).lt(d(a).div(Math.pow(10,9)))?"Max cap cannot be less than custom gas.":"",[r]),M=l.useMemo(()=>r&&Number(r)>0&&Number(r)<2e-6?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[r]),w=l.useMemo(()=>!a||Number(a)==0?"Please enter a value higher than 0":"",[a]),v=l.useMemo(()=>a&&Number(a)>0&&d(a).lt(750)?"Your current maximum fee is below the market rate. Please raise it to ensure your transactions are processed.":"",[a]),G=l.useMemo(()=>!a||a==="0"?"0":d(a).div(Math.pow(10,9)).toString(),[a]);return e.jsxs(R,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"12px",children:[e.jsxs(x,{w:"100%",justify:"space-between",children:[e.jsxs(x,{children:[e.jsx(z,{xlinkHref:"#icon-icon_mode"}),e.jsx(n,{color:"text_caption",fontSize:"14px",children:"Transaction Mode"})]}),e.jsx(ne,{type:"outlineTab",tabList:E,currentTab:b==null?void 0:b.label,handleChangeTab:y,wrapStyle:{w:"206px",h:"40px",p:"4px",borderRadius:"12px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px",borderRadius:"8px"}})]}),e.jsx(n,{w:"100%",lineHeight:"20px",fontSize:"12px",children:s==="Default"?"Standard gas based on real-time network conditions":"Land your transaction earlier and avoid congestion with a higher gas price. MEV protection is on by default in Fast Mode."}),s==="Fast Mode"&&e.jsxs(R,{w:"100%",children:[e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Custom Gas Price"}),e.jsx(V,{type:"setGasPrice"})]}),e.jsxs(R,{align:"flex-end",gap:"0px",children:[e.jsxs(x,{gap:"0px",children:[e.jsx(H,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:a,onChange:P,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MIST"})]}),e.jsxs(n,{fontSize:"12px",color:"text_paragraph",children:[G," SUI"]})]})]}),w&&e.jsx(N,{text:w,type:"error"}),v&&e.jsx(N,{text:v,type:"warn"}),e.jsxs(x,{w:"100%",h:"56px",justify:"space-between",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0px 16px",children:[e.jsxs(x,{justify:"flex-start",gap:"4px",children:[e.jsx(n,{whiteSpace:"nowrap",children:"Set Max Cap for Gas"}),e.jsx(V,{type:"setMaxCapForGas"})]}),e.jsx(R,{align:"flex-end",gap:"0px",children:e.jsxs(x,{gap:"0px",children:[e.jsx(H,{borderRadius:"8px",h:"20px",mr:"0px",border:"none",variant:"outline",value:r,onChange:_,textAlign:"right",fontSize:"14px",placeholder:"0.0",pr:{base:"4px",lg:"4px"},pl:"0",bg:"none"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"SUI"})]})})]}),S&&e.jsx(N,{text:S,type:"error"}),M&&e.jsx(N,{text:M,type:"warn"}),e.jsxs(x,{mt:"6px",children:[e.jsx(n,{children:"Powered by "}),e.jsx(oe,{src:"/images/icon_shio@2x.png",w:"46px",h:"14px"})]})]})]})},Ce=o=>{const{mevProtect:s,disabled:i,setMevProtect:r}=o;return e.jsxs(R,{w:"100%",pt:"20px",mt:"20px",borderTop:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(x,{justify:"flex-start",w:"100%",children:[e.jsx(z,{xlinkHref:"#icon-icon_mev",svgFill:"text_paragraph"}),e.jsx(n,{fontSize:"14px",color:"text_caption",children:"MEV Protect"})]}),e.jsxs(x,{justify:"space-between",w:"100%",children:[e.jsxs(x,{gap:"4px",children:[e.jsx(n,{fontSize:"14px",color:"text_paragraph",children:"Enable MEV Protection"}),e.jsx(V,{type:"byEnabling"})]}),e.jsx(ie,{isChecked:s,onChange:()=>r(!s),isDisabled:i})]})]})},N=o=>{const{text:s,type:i}=o;return e.jsx($,{w:"100%",p:"4px 16px",borderRadius:"8px",bg:i==="warn"?"primary_yellow_opacity.10":"primary_red_opacity.10",children:e.jsx(n,{color:i==="warn"?"primary_yellow":"primary_red",fontSize:"12px",lineHeight:"20px",children:s})})};function Pe(o){const{onClick:s}=o,{onSlippageVisible:i,showSlippage:r,isWidget:u,compact:a,settingOpen:h,onClose:T,onChange:b,slippageType:y,transactionMode:_,handleChangeTransctionMode:P,maxCapForGas:S,handleChangeMaxCapForGas:M,mevProtect:w,handleChangeMevProtect:v,customGasPrice:G,handleChangeCustomGasPrice:t}=ye(o);return e.jsxs(e.Fragment,{children:[e.jsx(le,{tooltip:"Settings",children:e.jsxs(x,{h:"28px",p:"4px 8px",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:u?"swap_bg_secondary":"bg_secondary",cursor:"pointer",gap:"6px",onClick:c=>{xe(c),u?s&&s():i()},sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[e.jsx(n,{fontWeight:"500",fontSize:"12px",children:ue(r)}),e.jsx(ce,{bg:u?"swap_bg_secondary":"bg_secondary",p:"0",h:"28px",w:"28px",borderRadius:"8px",mr:"-9px",children:e.jsx(x,{align:"center",justify:"center",mt:"3px",children:e.jsx(z,{xlinkHref:"#icon-icon_verticalslider"})})})]})}),!u&&e.jsx(be,{isWidget:u,compact:a,isOpen:h,onClose:T,value:d(r).mul(100).toNumber(),onChange:b,slippageType:y,transactionMode:_,onChangeTransctionMode:P,maxCapForGas:S,onChangeMaxCapForGas:M,mevProtect:w,onChangeMevProtect:v,customGasPrice:G,onChangeCustomGasPrice:t})]})}function ye(o){const{slippageType:s="global",compact:i,isWidget:r=!1}=o,{slippage:u,vaultsSlippage:a,setVaultsSlippage:h,setSlippage:T,settingOpen:b,setSettingOpen:y,mevProtect:_,setMevProtect:P,setTransctionMode:S,setMaxCapForGas:M,transactionMode:w,maxCapForGas:v,customGasPrice:G,setCustomGasPrice:t}=de();pe();const c=()=>{y(!b)},F=()=>{y(!1)},W=p=>{const I=d(p).div(100).toNumber();s==="vaults"?h(I):T(I)},m=l.useMemo(()=>s==="vaults"?a:u,[s,u,a]);return{onSlippageVisible:c,onClose:F,onChange:W,showSlippage:m,isWidget:r,compact:i,settingOpen:b,slippageType:s,transactionMode:w,handleChangeTransctionMode:p=>{S(p)},maxCapForGas:v,handleChangeMaxCapForGas:p=>{M(p)},mevProtect:_,handleChangeMevProtect:p=>{P(p)},customGasPrice:G,handleChangeCustomGasPrice:p=>{t(p)}}}export{Pe as S,me as a,be as b,ye as u};
