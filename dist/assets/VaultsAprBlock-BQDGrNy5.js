import{u as me}from"./swapWidget-D1zF1AYC.js";import{R as ce,bN as ne,u as be,aG as Y0,bO as ie,aR as v0,s as de,X as T0,r as i,a8 as re,Q as z0,a3 as N0,a0 as Z0,bP as ge,b9 as j0,be as Q0,bo as I0,aA as s0,a5 as te,a9 as H0,d as p,bw as ye,bQ as _e,bf as Se,a6 as B0,bR as q0,bh as R0,a7 as L0,bS as $0,aV as G0,j as C0,V as se,H as ue,C as ve,c as xe,aq as he,T as Te}from"./index-B4jTrVt5.js";import{a as J0}from"./api-data-utils-CfZpV00i.js";import{a as Ve}from"./useFavoritePool-nA1REehH.js";import{c as fe}from"./useGetPoolList-SrIdZ2bD.js";import{u as A0}from"./useToken-gU82ezEY.js";import{u as X0}from"./useTokenBalance-BkarOyZz.js";import{u as k0}from"./useTransaction-yLiBNLZR.js";import{u as ee}from"./global-CBXYTEkO.js";import{M as ae}from"./msafe-oYBkW7LJ.js";import{v as O0,f as x0}from"./index-Yir0s042.js";import{u as Ce}from"./useFindBestRouting-DbygTx0A.js";import{H as M0}from"./HTextLabelBox-CVQsWi60.js";const we=(a,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:e=>{a(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{a(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{a(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{a(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const s=l().contractVaultObj;s[e.id]=e,a(()=>({contractVaultObj:{...s}}))},setContractVaultObjLoading:e=>{a(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{a(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const s=l().contractClmmPoolObj;s[e.poolAddress]=e,a(()=>({contractClmmPoolObj:{...s}}))},setHoldTotalValue:(e,s)=>{const o=l().holdTotalValue;o[e]=s,a(()=>({holdTotalValue:{...o}}))},setDetailRefreshCount:e=>{a(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{a(()=>({lpTokenInfo:{...l().lpTokenInfo,...e}}))}}),W0=ce(ne(we,{name:"useVaultsStore2",partialize:a=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:o,lpTokenInfo:g}=a;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:o,lpTokenInfo:g}}}));function De(a,l){return{...a,vaultsTvl:(l==null?void 0:l.vaultsTvl)||"--",vaultsTvlDisplay:(l==null?void 0:l.vaultsTvlDisplay)||"--",vaultsApy:(l==null?void 0:l.vaultsApy)||"--",vaultsApyDisplay:(l==null?void 0:l.vaultsApyDisplay)||"--",vaultsTotalApy:(l==null?void 0:l.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(l==null?void 0:l.vaultsTotalApyDisplay)||"--",vaultsLstApy:(l==null?void 0:l.vaultsLstApy)||"--",vaultsLstApyDisplay:(l==null?void 0:l.vaultsLstApyDisplay)||"--",vaultsApr:(l==null?void 0:l.vaultsApr)||"--",vaultsAprDisplay:(l==null?void 0:l.vaultsAprDisplay)||"--",vaultsId:(l==null?void 0:l.vaultsId)||"",clmmPoolAddress:(l==null?void 0:l.clmmPoolAddress)||"",amountPerLpA:(l==null?void 0:l.amountPerLpA)||"0",amountPerLpB:(l==null?void 0:l.amountPerLpB)||"0",category:(l==null?void 0:l.category)||"",hardCapUSD:(l==null?void 0:l.hardCapUSD)||"--",depositRatioDisplay:(l==null?void 0:l.depositRatioDisplay)||"--",depositRatio:(l==null?void 0:l.depositRatio)||0,lpTokentype:(l==null?void 0:l.lpTokentype)||""}}const da={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},Pe=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function Ue(){const{fetchByApi:a}=be(),{getFavoritePoolList:l}=Ve(),{setVaultStatsObj:e,setVaultBaseList:s,vaultBaseList:o,vaultStatsObj:g,setVaultStatsLoading:t,setVaultBaseListLoading:r}=W0(),n=async(j=!0,y,w)=>{try{j&&r(!0);const u=await l({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:y});console.log("🚀🚀🚀 ~ useGetVaultList.ts:35 ~ getVaultBaseList ~ res:",u);const m=u==null?void 0:u.list.map(f=>{var O,P,F,K,z;const Z=[Y0((O=f==null?void 0:f.tokenA)==null?void 0:O.coin_type),Y0((P=f==null?void 0:f.tokenB)==null?void 0:P.coin_type)],c=f.isReverse?Z.reverse():Z,D=(F=f==null?void 0:f.miningRewardList)==null?void 0:F.map(M=>Y0(M==null?void 0:M.coinType)),N=(K=f==null?void 0:f.miningRewardList)==null?void 0:K.map(M=>Y0(M==null?void 0:M.coinType)),v=Array.from(new Set([...c,...D,...N]));return{...f,vaultsRewards:v,category:(z=w[f.poolAddress])==null?void 0:z.category}});return console.log("🚀 ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",m),m.length>0&&s(m),m}catch(u){console.log("getVaultBaseList Error:",u)}finally{r(!1)}return[]},L=async()=>{var j;try{t(!0);const y=await a("/v3/sui/vaults/pools","GET"),w={};if(y!=null&&y.list)return(j=y==null?void 0:y.list)==null||j.forEach(u=>{var m,f;if(u.display||!ie){const Z=u==null?void 0:u.clmm_pool,c=u==null?void 0:u.id,D=u.category=="cetus"?v0(u==null?void 0:u.apy).add(v0(u.lst_apy)).toString():v0(u.apr).add(v0(u.apy)).toString(),N=J0(D,!0,!0),v=u==null?void 0:u.apy,O=J0(v,!0),P=u==null?void 0:u.lst_apy,F=J0(P,!0),K=u==null?void 0:u.tvl,z=de(K,"$"),M=u==null?void 0:u.apr,a0=J0(M,!0),l0=u==null?void 0:u.hard_cap_usd,B=v0(K).div(v0(l0)).mul(100),e0=T0(B,2);w[Z]={vaultsApy:v,vaultsApyDisplay:O,vaultsTotalApy:D,vaultsTotalApyDisplay:N,vaultsLstApy:P,vaultsLstApyDisplay:F,vaultsApr:M,vaultsAprDisplay:a0,clmmPoolAddress:Z,vaultsId:c,vaultsTvl:K,vaultsTvlDisplay:z,amountPerLpA:(m=u==null?void 0:u.reward_per_lp)==null?void 0:m.amount_a_per_lp,amountPerLpB:(f=u==null?void 0:u.reward_per_lp)==null?void 0:f.amount_b_per_lp,category:u.category,hardCapUSD:l0,depositRatio:B,depositRatioDisplay:e0,lpTokentype:u==null?void 0:u.lp_type}}}),console.log("🚀🚀🚀 ~ useGetVaultList.ts:228 ~ getVaultsStats ~ vaultsStatsObj:",w),e(w),{vaultsStatsObj:w,vaultsList:y==null?void 0:y.list.filter(u=>u.display||!ie)}}catch(y){return console.log("🚀🚀🚀 ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",y),g}finally{t(!1)}return{}},t0=async j=>{try{const{vaultsStatsObj:y,vaultsList:w}=await L(),u=w.map(f=>f.clmm_pool);console.log("🚀🚀🚀 ~ useGetVaultList.ts:139 ~ getVaultList ~ statsObj:",y);const m=await n(!0,u,y);return console.log("🚀 ~ getVaultList ~ baseList:",m),b(j,m,y)}catch(y){return console.error("getVaultList Error:",y),k(j)}},k=j=>{try{const y=o,w=g;if(y&&y.length>0)return b(j,y,w);throw Error("Cache is null")}catch(y){return console.error("getVaultListFromCache Error:",y),Pe}},b=(j,y,w)=>{const{sortRule:u,sortType:m}=j,f=y==null?void 0:y.map(c=>{const D=w==null?void 0:w[c.poolAddress];return De(c,D)}),Z=f==null?void 0:f.sort((c,D)=>{var N,v,O,P;return m==="apr"?u==="desc"?((N=D.vaultsTotalApy)==null?void 0:N.replace("%",""))-((v=c.vaultsTotalApy)==null?void 0:v.replace("%","")):((O=c.vaultsTotalApy)==null?void 0:O.replace("%",""))-((P=D.vaultsTotalApy)==null?void 0:P.replace("%","")):u==="desc"?D.vaultsTvl-c.vaultsTvl:c.vaultsTvl-D.vaultsTvl});return console.log("🚀🚀🚀 ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",JSON.stringify(Z)),Z};return{getVaultBaseList:n,getVaultsStats:L,getVaultListFromCache:k,getVaultList:t0}}function Le(a){const{getVaultList:l,getVaultListFromCache:e}=Ue(),[s,o]=i.useState(void 0),[g,t]=i.useState(!1),{setFromCoin:r,setToCoin:n}=me(),L=async(k,b)=>{var w;(s===void 0||b)&&t(!0);const j=await l({sortRule:"desc",sortType:"apr"}),y=((w=j==null?void 0:j.filter(u=>u.vaultsId===k))==null?void 0:w[0])||null;return t(!0),y&&o(y),y},t0=k=>{var y;const b=e({sortRule:"desc",sortType:"apr"});return((y=b==null?void 0:b.filter(w=>w.vaultsId===k))==null?void 0:y[0])||null};return i.useEffect(()=>{if(a){const k=t0(a);k&&o(k),L(a,!1)}},[a]),i.useEffect(()=>(s&&(r(s==null?void 0:s.displayTokenA),n(s==null?void 0:s.displayTokenB)),()=>{r(re.clmm_swap.from_coin),n(re.clmm_swap.to_coin)}),[s]),{vaultInfoLoading:g,apiVaultInfo:s,getApiVaultInfo:L}}const Ee=(a,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},setVaultStatsObj:e=>{a(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{a(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{a(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{a(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const s=l().contractVaultObj;s[e.id]=e,a(()=>({contractVaultObj:{...s}}))},setContractVaultObjLoading:e=>{a(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{a(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const s=l().contractClmmPoolObj;s[e.poolAddress]=e,a(()=>({contractClmmPoolObj:{...s}}))},setHoldTotalValue:(e,s)=>{const o=l().holdTotalValue;o[e]=s,a(()=>({holdTotalValue:{...o}}))},setDetailRefreshCount:e=>{a(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{const s=l().lpTokenInfo;a(()=>({lpTokenInfo:{...s,[e.coin_type]:e}}))}}),K0=ce(ne(Ee,{name:"useUnstableVaultsListStore",partialize:a=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:o}=a;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:o}}}));function Re(a){const{contractVaultObj:l}=K0();return{contractVault:i.useMemo(()=>{if(a)return l[a]},[l,a])}}function je(a){const{contractClmmPoolObj:l}=K0();return{contractClmmInfo:i.useMemo(()=>{if(a)return l[a]},[l,a])}}function Oe(a){return{stakeProtocolName:i.useMemo(()=>{if(a){if(a.includes("HASUI"))return"Haedal";if(a.includes("AFSUI"))return"Aftermath";if(a.includes("CERT"))return"Volo"}},[a])}}function Fe(a,l,e,s,o=!1){var I;const{volatileVaultsSdk:g}=z0(),{getTokenAmountValue:t}=N0(),{currentAccount:r}=Z0(),{getTokenInfo:n}=A0(),[L,t0]=i.useState(void 0),{setContractVaultObjLoading:k,setContractVaultObj:b,setContractClmmPoolObj:j,setContractClmmPoolObjLoading:y,setHoldTotalValue:w,holdTotalValue:u,setLpTokenInfo:m}=K0(),f=async(V,H=!1)=>{k(!0);try{const R=await g.Vaults.getPool(V,H);R&&b(R)}catch(R){console.error("fetchVaultInfoFromContract error:",R)}finally{k(!1)}},Z=async(V,H=!1)=>{y(!0);try{const R=await g.CetusClmmSDK.Pool.getPool(V,H);R&&j(R)}catch(R){console.error("fetchClmmPoolFromContract error:",R)}finally{y(!1)}},{contractVault:c}=Re(a),{tokenInfo:D}=A0(c==null?void 0:c.lp_token_type),[N,v]=i.useState(),[O,P]=i.useState(!1),[F,K]=i.useState(),z=async(V,H,R)=>{P(!0);try{const S=await g.Vaults.getOwnerVaultsBalance(V,H);if(S){const r0=s0(S.lp_token_balance,R).toString();v({balance:S.lp_token_balance,balanceFormat:r0,balanceDisplay:T0(r0,void 0,void 0,te.ROUND_DOWN).toString()}),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:98 ~ fetchVaultBalance ~ res:",S),K(S)}}catch(S){console.error("fetchVaultBalance error:",S)}finally{P(!1)}},M=i.useMemo(()=>c&&N&&v0(N.balance).gt(0)?v0(N.balance).div(c.lp_token_treasury).mul(100).toString():"0",[c,N]),{contractClmmInfo:a0}=je(l),l0=V=>{if(console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:119 ~ getHoldCoinAmounts ~ accountBalanceInfo:",V),V&&e&&s&&o!==void 0){const H=I0(V.amount_a.toString(),e.decimals).toString(),R=I0(V.amount_b.toString(),s.decimals).toString(),S=o?R:H,r0=o?H:R;return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:131 ~ getHoldCoinAmounts ~ coinAmountA",H,R,S,r0),{coinAmountA:H,coinAmountB:R,displayCoinA:S,displayCoinB:r0}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[B,e0]=i.useState();i.useEffect(()=>{F&&e0(l0(F))},[F==null?void 0:F.amount_a,F==null?void 0:F.amount_b,e==null?void 0:e.decimals,s==null?void 0:s.decimals,o]);const h=i.useMemo(()=>{if(c&&a0&&e&&s){const V=ge("",c.lp_token_treasury,c,a0);return l0(V)}},[c,a0,e,s,o]),g0=i.useMemo(()=>{if(a0&&e&&s)return j0.sqrtPriceX64ToPrice(new Q0(a0.current_sqrt_price),e.decimals,s.decimals).toString()},[a0==null?void 0:a0.current_sqrt_price,e==null?void 0:e.decimals]),o0=i.useMemo(()=>{if(c&&e&&s)return j0.tickIndexToPrice(c.clmm_vault.wrapped_position.tick_lower_index,e.decimals,s.decimals).toString()},[(I=c==null?void 0:c.clmm_vault)==null?void 0:I.wrapped_position.tick_lower_index,e==null?void 0:e.decimals]),n0=i.useMemo(()=>{if(c&&e&&s)return j0.tickIndexToPrice(c.clmm_vault.wrapped_position.tick_upper_index,e.decimals,s.decimals).toString()},[c==null?void 0:c.clmm_vault.wrapped_position.tick_upper_index,e==null?void 0:e.decimals]),d0=t(e==null?void 0:e.coin_type,B==null?void 0:B.coinAmountA),y0=t(s==null?void 0:s.coin_type,B==null?void 0:B.coinAmountB),_0=t(e==null?void 0:e.coin_type,h==null?void 0:h.coinAmountA),Y=t(s==null?void 0:s.coin_type,h==null?void 0:h.coinAmountB),c0=i.useMemo(()=>{if(g0&&h)return fe(h.coinAmountA,h.coinAmountB,g0,!1)},[g0,h]),f0=i.useMemo(()=>v0(_0).add(Y).toString(),[_0,Y]);i.useEffect(()=>{a&&d0&&y0&&w(a,v0(d0).add(y0).toString())},[d0,y0,a]);const h0=i.useMemo(()=>{if(a)return u[a]},[u,a]),D0=i.useMemo(()=>{if(c&&c.hard_cap&&v0(c==null?void 0:c.hard_cap).gt(0)&&e&&s){let V;c.quote_type?V=c.quote_type==(e==null?void 0:e.address)?e:s:V=n("0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"),t0(V);const H=I0(c.hard_cap,V.decimals).toString();return t(V==null?void 0:V.coin_type,H)}return""},[c==null?void 0:c.hard_cap,e,s]),P0=i.useMemo(()=>{if(_0&&Y&&(c!=null&&c.hard_cap)&&v0(c==null?void 0:c.hard_cap).gt(0)&&e&&s){const V=c.quote_type==(e==null?void 0:e.address)?e:s,H=I0(c.hard_cap,V.decimals).toString(),R=t(V==null?void 0:V.coin_type,H);if(v0(_0).add(Y).gt(R))return!0}return!1},[_0,Y,c==null?void 0:c.hard_cap,e,s]);i.useEffect(()=>{r!=null&&r.address||(v(void 0),K(void 0))},[r]);const W=i.useMemo(()=>{if(D0&&f0)return v0(f0).div(D0).mul(100).toString()},[D0,f0]),T=i.useMemo(()=>c&&v0(c.protocol_fee_rate).gt(0)?v0(c.protocol_fee_rate).div(1e4).mul(100).toString():"0",[c]);return{quoteCoin:L,fetchVaultInfoFromContract:f,contractVault:c,lpTokenInfo:D,balanceInfo:N,sharePoolRate:M,fetchClmmPoolFromContract:Z,holdCoinAmounts:B,totalValue:h0,maxPrice:n0,currPrice:g0,minPrice:o0,vaultCoinAmounts:h,vaultsCoinAValue:_0,vaultsCoinBValue:Y,vaultsCoinPercent:c0,holdCoinAValue:d0,holdCoinBValue:y0,fetchVaultBalance:z,isBalanceLoading:O,vaultTvl:f0,hardCapUSD:D0,gtAumLimit:P0,depositRatio:W,performanceFee:T}}function fa(a,l){return{lpRate:i.useMemo(()=>a&&l?p(l).eq(0)?"100%":`${ye(p(a).div(p(a).add(l)).mul(100).toString(),2,6)}%`:"0%",[a,l])}}function pa(a,l,e=!1){return{amountLimit:i.useMemo(()=>{if(l)return p(l).mul(e?1+a:1-a).toString()},[l,a,e])}}function Me(a){const{contractVaultObj:l}=W0();return{contractVault:i.useMemo(()=>{if(a)return l[a]},[l,a])}}function Ie(a){const{contractClmmPoolObj:l}=W0();return{contractClmmInfo:i.useMemo(()=>{if(a)return l[a]},[l,a])}}function $e(a){return{stakeProtocolName:i.useMemo(()=>{if(a){if(a.includes("HASUI"))return"Haedal";if(a.includes("AFSUI"))return"Aftermath";if(a.includes("CERT"))return"Volo"}},[a])}}function ma(a,l){const e=i.useMemo(()=>{if(l&&a)return`${H0(p(l.amountPerLpA).mul(a).toFixed(18,te.ROUND_DOWN),l.displayTokenA.decimals)}  ${l==null?void 0:l.displayTokenA.symbol}`},[l==null?void 0:l.amountPerLpA,a]),s=i.useMemo(()=>{if(l&&a)return`${H0(p(l.amountPerLpB).mul(a).toFixed(18,te.ROUND_DOWN),l.displayTokenB.decimals)}  ${l==null?void 0:l.displayTokenB.symbol}`},[l==null?void 0:l.amountPerLpB,a]);return{rewardPerA:e,rewardPerB:s}}function qe(a,l,e,s,o=!1){const{vaultsSdk:g}=z0(),{getTokenAmountValue:t}=N0(),{setContractVaultObjLoading:r,setContractVaultObj:n,setContractClmmPoolObj:L,setContractClmmPoolObjLoading:t0,setHoldTotalValue:k,holdTotalValue:b,setLpTokenInfo:j}=W0(),y=async(h,g0=!1)=>{r(!0);const o0=await g.Vaults.getVault(h,g0);console.log("🚀 ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",o0),o0&&n(o0),r(!1)},w=async(h,g0=!1)=>{t0(!0);const o0=await g.Pool.getPool(h,g0);console.log("🚀 ~ file: useGetVaultInfo.ts:33 ~ fetchClmmPoolFromContract ~ info:",o0),o0&&L(o0),t0(!1)},{contractVault:u}=Me(a);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:71 ~ contractVault:",u);const{tokenInfo:m}=A0(u==null?void 0:u.lp_token_type),{balanceInfo:f}=X0(m),Z=i.useMemo(()=>u&&f?v0(f.balance).div(u.total_supply).mul(100).toString():"0",[u,f]),{contractClmmInfo:c}=Ie(l),D=h=>{if(u&&c&&e&&s&&o!==void 0){const g0=new Q0(c.current_sqrt_price),o0=j0.tickIndexToSqrtPriceX64(u.position.tick_lower_index),n0=j0.tickIndexToSqrtPriceX64(u.position.tick_upper_index),d0=Se.getCoinAmountFromLiquidity(new Q0(h),g0,o0,n0,!1),y0=s0(d0.coinA.toString(),e.decimals).toString(),_0=s0(d0.coinB.toString(),s.decimals).toString();return{coinAmountA:y0,coinAmountB:_0,displayCoinA:o?_0:y0,displayCoinB:o?y0:_0}}},N=i.useMemo(()=>{if(u&&f&&c){const h=_e.get_share_liquidity_by_amount(u,f.balance),g0=D(h);if(g0)return g0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[f==null?void 0:f.balance,c==null?void 0:c.current_sqrt_price]),v=i.useMemo(()=>{if(u&&c){const h=D(u.liquidity);if(h)return h}},[u==null?void 0:u.liquidity,c==null?void 0:c.current_sqrt_price]),O=i.useMemo(()=>{if(c&&e&&s)return j0.sqrtPriceX64ToPrice(new Q0(c.current_sqrt_price),e.decimals,s.decimals).toString()},[c==null?void 0:c.current_sqrt_price,e==null?void 0:e.decimals]),P=i.useMemo(()=>{if(u&&e&&s)return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",j0.tickIndexToPrice(u.position.tick_lower_index,e.decimals,s.decimals).toString()),j0.tickIndexToPrice(u.position.tick_lower_index,e.decimals,s.decimals).toString()},[u==null?void 0:u.position.tick_lower_index,e==null?void 0:e.decimals]),F=i.useMemo(()=>{if(u&&e&&s)return j0.tickIndexToPrice(u.position.tick_upper_index,e.decimals,s.decimals).toString()},[u==null?void 0:u.position.tick_upper_index,e==null?void 0:e.decimals]),K=t(e==null?void 0:e.coin_type,N.coinAmountA),z=t(s==null?void 0:s.coin_type,N.coinAmountB),M=t(e==null?void 0:e.coin_type,v==null?void 0:v.coinAmountA),a0=t(s==null?void 0:s.coin_type,v==null?void 0:v.coinAmountB),l0=i.useMemo(()=>{if(O&&v)return fe(v.coinAmountA,v.coinAmountB,O,!1)},[O,v]),B=i.useMemo(()=>de(v0(M).add(a0).toString(),"$"),[M,a0]);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",B),i.useEffect(()=>{a&&k(a,v0(K).add(z).toString())},[K,z,a]);const e0=i.useMemo(()=>{if(a)return b[a]},[b,a]);return{fetchVaultInfoFromContract:y,contractVault:u,lpTokenInfo:m,balanceInfo:f,sharePoolRate:Z,fetchClmmPoolFromContract:w,holdCoinAmounts:N,totalValue:e0,maxPrice:F,currPrice:O,minPrice:P,vaultCoinAmounts:v,vaultsCoinAValue:M,vaultsCoinBValue:a0,vaultsCoinPercent:l0,holdCoinAValue:K,holdCoinBValue:z,calculateCoinAmounts:D,vaultTvl:B}}function Ge(a,l,e,s,o,g,t,r,n){const{vaultsSlippage:L,mevProtect:t0,maxCapForGas:k,transactionMode:b,customGasPrice:j}=ee(),{fetchTokenPrices:y,getTokenAmountValue:w}=N0(),{setDetailRefreshCount:u}=K0(),{volatileVaultsSdk:m}=z0(),[f,Z]=i.useState(""),[c,D]=i.useState(""),[N,v]=i.useState(!0),[O,P]=i.useState(""),F=i.useRef(""),K=i.useRef(!0),z=i.useRef(""),M=i.useRef("");i.useEffect(()=>{F.current=O},[O]),i.useEffect(()=>{K.current=N},[N]),i.useEffect(()=>{z.current=f},[f,g,c]),i.useEffect(()=>{M.current=c},[c,g,f]),i.useEffect(()=>{S()},[t]),i.useEffect(()=>{const J=[];s&&o&&(J.push(s.coin_type),J.push(o.coin_type)),J.length>0&&y(J)},[s==null?void 0:s.coin_type,o==null?void 0:o.coin_type]);const{balanceInfo:a0}=X0(g?o:s),{balanceInfo:l0}=X0(g?s:o),B=w(g?o==null?void 0:o.coin_type:s==null?void 0:s.coin_type,f),e0=w(g?s==null?void 0:s.coin_type:o==null?void 0:o.coin_type,c),h=i.useMemo(()=>p(B||"0").add(e0||"0").toString(),[B,e0]),g0=i.useMemo(()=>{if(t)return p(h).gt(p(1e4))},[h,t]),o0=i.useMemo(()=>!!(r&&h&&p(r).gt(0)&&p(h).add(p(n)).gt(r)),[r,h,n]),[n0,d0]=i.useState(!1),[y0,_0]=i.useState(!1),[Y,c0]=i.useState(void 0),h0=B0(async(J,q,G,p0=!1,m0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",G),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",J,m0),s&&o&&e)try{_0(!0),u(0);const U0=q?s:o,x=q?o:s,E=L0(J,U0.decimals).toFixed(0),U=L0(m0||0,x.decimals).toFixed(0);let X;t?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:107 ~ preCalculate ~ assetAction:",a),X=a=="both"?"FlexibleBoth":a==(s==null?void 0:s.coin_type)?"OnlyCoinA":"OnlyCoinB"):X="FixedOneSide";let $={uuid:G,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:e};t?(X==="OnlyCoinB"&&($={uuid:G,mode:"OnlyCoinB",pool_id:e,coin_amount_b:E}),X==="OnlyCoinA"&&($={uuid:G,mode:"OnlyCoinA",pool_id:e,coin_amount_a:E}),X=="FlexibleBoth"&&($={uuid:G,mode:"FlexibleBoth",pool_id:e,coin_amount_a:q?E:U,coin_amount_b:q?U:E})):$={uuid:G,mode:"FixedOneSide",fixed_amount:E,fixed_coin_a:q,pool_id:e};const d=await m.Vaults.preCalculateDepositAmount($,{onSuccess:(_,Q)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:171 ~ onSuccess ~ receive_lp_amount, uuid:",_),Q==$.uuid&&(c0({amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:_}),_0(!1))},onError:(_,Q)=>{console.log("🚀 ~ preCalculate ~ error:",_)}});console.log("🚀 ~ preCalculate ~ res:",{...d,uuid:G,assetAction:a,"+amountInputARef.current":+z.current});const C={amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:d.receive_lp_amount};if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:204 ~ preCalculate ~ wrapRes:",C),C.ft_amount=="0"){c0(void 0);return}if(F.current!==G)return;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:162 ~ preCalculate ~ assetAction:",a),t){c0(C);return}if(a==="both"){const _=p0?!q:q;console.log("🚀🚀🚀 ~ useVaultsAdd.ts:164 ~ preCalculate ~ fix_amount_a_page:",_),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:168 ~ preCalculate ~ +amountInputARef.current:",+z.current),_?+z.current?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:173 ~ preCalculate ~ setAmountInputB:",D),D(s0(C.amount_b.toString(),p0?s==null?void 0:s.decimals:o==null?void 0:o.decimals).toString())):D(""):+M.current?Z(s0(C.amount_a.toString(),p0?o==null?void 0:o.decimals:s==null?void 0:s.decimals).toString()):Z("")}(a!=="both"||!t)&&c0(C)}catch(U0){console.log("🚀🚀🚀 ~ useVaultsAdd.ts:202 ~ preCalculate ~ error:",U0),String(U0).indexOf("has reached hardCap")>-1,console.log("🚀 ~ preCalculate ~ error:",U0),c0(void 0)}finally{}},500),D0=(J,q,G=!0,p0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:210 ~ handleAmountInputChange ~ amount:",J,p0),v(q),!J&&!p0){c0(void 0),Z(""),D("");return}if((g?!q:q)?(Z(J),G&&!t&&D("")):(D(J),G&&!t&&Z("")),+J){if(t&&a=="both"&&(!J||!p0)){c0(void 0);return}const m0=O0();console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ amount:",J),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ other_amount:",p0),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:255 ~ handleAmountInputChange ~ uuid:",m0),P(m0),h0(J,q,m0,g,p0)}else t?a=="both"?c0(void 0):(a==(s==null?void 0:s.coin_type)||a==(o==null?void 0:o.coin_type))&&S():S()},P0=()=>{const J=K.current?g?M.current:z.current:g?z.current:M.current,q=K.current?g?z.current:M.current:g?M.current:z.current;if(!(t&&a=="both"&&(!J||!q))){if(+J){const G=O0();P(G),h0(J,K.current,G,g,q)}console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",q),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",J)}};i.useEffect(()=>{S()},[a]);const[W,T]=i.useState(!1),{signAndExecuteTransaction:I,transactionConfirmation:V,transactionRejected:H}=k0(),R=async()=>{if(e){T(!0);const J={pool_id:e,amount_a:String(g?L0(c||0,String(s==null?void 0:s.decimals)):L0(f||0,String(s==null?void 0:s.decimals))),amount_b:String(g?L0(f||0,String(o==null?void 0:o.decimals)):L0(c||0,String(o==null?void 0:o.decimals)))};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",J);const q={getShowInfo:(G,p0,m0)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",m0);const U0="Deposit "+[x0(f,g?o==null?void 0:o.symbol:s==null?void 0:s.symbol),x0(c,g?s==null?void 0:s.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and "),x={modalDescriptionText:U0,toastTitleText:U0};if(G==="success"){let E=f,U=c;m0&&m0.events.forEach($=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",$),$.type.indexOf("::pool::DepositEvent")>-1&&s&&o&&(E=String(I0($.parsedJson.amount_a,s.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",E),U=String(I0($.parsedJson.amount_b,o.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",U))});const X="Deposit "+[x0(g?U:E,g?o==null?void 0:o.symbol:s==null?void 0:s.symbol),x0(g?E:U,g?s==null?void 0:s.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and ");x.toastDescriptionContent=X,x.modalDescriptionText=X,x.toastTitleText="Deposit successful"}return x}};V(q);try{const G=await m.Vaults.buildDepositPayload(J);await I(G,q,{useMev:t0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:j,msafeParams:{action:ae.AddVaultsPosition,txbParams:J}})?(S(),l()):P0()}catch{H(q)}}},S=()=>{Z(""),D(""),c0(void 0),P("")},{stakeProtocolName:r0}=Oe(K.current?o==null?void 0:o.coin_type:s==null?void 0:s.coin_type),F0=i.useMemo(()=>{if(a!=="both"&&s&&o){const J=K.current?f:c,q=K.current?s:o,G=K.current?o:s;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:381 ~ showOnlySideTips ~ calculateResult:",Y),Y&&Y.swap_result){const p0=s0(Y.swap_result.swap_in_amount,q.decimals),m0=s0(p(Y.swap_result.swap_out_amount).mul(1-Number(L)).toString(),G.decimals);return q0.isSuiCoin(q.coin_type)?`By depositing ${R0(T0(J,9).toString(),9)} SUI, ${R0(T0(p0,9).toString(),9)} SUI will be converted to ${G==null?void 0:G.symbol} via ${r0} liquid staking and added to the pool together.`:`By depositing ${R0(T0(J,9).toString(),9)} ${q==null?void 0:q.symbol}, ${R0(T0(p0,9).toString(),9)} ${q==null?void 0:q.symbol} will be traded for ${R0(T0(m0,9).toString(),9)} ${G==null?void 0:G.symbol} and then added to the pool together.`}}},[a,Y,f,c]),E0=i.useMemo(()=>(console.log("🚀🚀🚀 ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",h,t),h&&t?p(h).gt(0)&&p(h).lt(1e-4):!1),[t,h]);return{handleAmountInputChange:D0,fixAmountA:N,amountInputA:f,amountInputB:c,balanceInfoA:a0,balanceInfoB:l0,amountValueA:B,amountValueB:e0,preCalculateLoading:n0,inputTotalValue:h,calculateResult:Y,showOnlySideTips:F0,doAddAction:R,reCalculateResult:P0,overHardtop:o0,zapNumError:g0,calculateLpLoading:y0,inputTotalValueError:E0}}function ze(a,l,e,s,o){const{fetchTokenPrices:g,getTokenAmountValue:t}=N0(),{setDetailRefreshCount:r}=W0(),{vaultsSdk:n}=z0(),{vaultsSlippage:L,mevProtect:t0,maxCapForGas:k,transactionMode:b,customGasPrice:j}=ee(),[y,w]=i.useState(""),[u,m]=i.useState(""),[f,Z]=i.useState(!0),[c,D]=i.useState(""),N=i.useRef(""),v=i.useRef(!0),O=i.useRef(""),P=i.useRef("");i.useEffect(()=>{N.current=c},[c]),i.useEffect(()=>{v.current=f},[f]),i.useEffect(()=>{O.current=y},[y]),i.useEffect(()=>{P.current=u},[u]),i.useEffect(()=>{const W=[];s&&o&&(W.push(s.coin_type),W.push(o.coin_type)),W.length>0&&g(W)},[s==null?void 0:s.coin_type,o==null?void 0:o.coin_type]);const{balanceInfo:F}=X0(s),{balanceInfo:K}=X0(o),z=t(s==null?void 0:s.coin_type,y),M=t(o==null?void 0:o.coin_type,u),a0=i.useMemo(()=>p(z||"0").add(M||"0").toString(),[z,M]),[l0,B]=i.useState(!1),[e0,h]=i.useState(void 0),o0=B0(async(W,T,I)=>{if(s&&o&&e)try{B(!0),r(0);const H=L0(W,(T?s:o).decimals).toFixed(0),R={vault_id:e,fix_amount_a:T,input_amount:H,slippage:Number(L),request_id:I,side:a==="both"?$0.Both:$0.OneSide};console.log("🚀 ~ preCalculate ~ params:",R,I);const S=await n.Vaults.calculateDepositAmount(R,!1,!0);console.log("🚀 ~ preCalculate ~ res:",{...S,uuid:I,assetAction:a,"+amountInputARef.current":+O.current}),N.current===I&&(a==="both"&&(T?+O.current?(m(s0(S.amount_b.toString(),o.decimals).toString()),h(S)):m(""):+P.current?(w(s0(S.amount_a.toString(),s.decimals).toString()),h(S)):w("")),a!=="both"&&h(S))}catch(V){console.log("🚀 ~ preCalculate ~ error:",V),h(void 0)}finally{B(!1)}},500),n0=(W,T,I=!0)=>{if(Z(T),T?(w(W),I&&m("")):(m(W),I&&w("")),+W){const V=q0.isSuiCoin(a);if(V&&p(W).lt(3)){D(""),h(void 0),B(!1);return}if(!V){const R=t(a,W);if(p(R).gt(1e4)){D(""),h(void 0),B(!1);return}}const H=O0();D(H),a==="both"&&B(!0),o0(W,T,H)}else h0()},d0=()=>{const W=v.current?O.current:P.current;if(+W){const T=O0();D(T),o0(W,v.current,T)}};i.useEffect(()=>{h0()},[a]);const[y0,_0]=i.useState(!1),{signAndExecuteTransaction:Y,transactionRejected:c0}=k0(),f0=async()=>{if(e){_0(!0);const W=L0(f?y:u,9),T={vault_id:e,side:a==="both"?$0.Both:$0.OneSide,fix_amount_a:f,input_amount:W.toString(),slippage:Number(L)};console.log("🚀 ~ doAddAction ~ params:",T);const I={getShowInfo:(V,H)=>{const R="Deposit "+[x0(y,s==null?void 0:s.symbol),x0(u,o==null?void 0:o.symbol)].filter(Boolean).join(" and "),S={modalDescriptionText:R,toastTitleText:R};if(V==="success"){let r0=y,F0=u;H&&(r0=p(y).gt(0)?G0(H,s)||y:"",F0=p(u).gt(0)?G0(H,o)||u:"");const E0="Deposit "+[x0(r0,s==null?void 0:s.symbol),x0(F0,o==null?void 0:o.symbol)].filter(Boolean).join(" and ");S.toastDescriptionContent=E0,S.modalDescriptionText=E0,S.toastTitleText="Deposit successful"}return S}};try{await Y(async()=>await n.Vaults.deposit(T),I,{useMev:t0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:j,msafeParams:{action:ae.AddVaultsPosition,txbParams:T}})?(h0(),l()):d0()}catch(V){console.log("🚀 ~ doAddAction ~ error:",V),c0(I)}}},h0=()=>{w(""),m(""),B(!1),h(void 0),D("")},{stakeProtocolName:D0}=$e(v.current?o==null?void 0:o.coin_type:s==null?void 0:s.coin_type),P0=i.useMemo(()=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",a),a!=="both"&&s&&o){const W=v.current?y:u,T=v.current?s:o,I=v.current?o:s;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",e0),e0&&e0.swap_result){const V=s0(e0.swap_result.swap_in_amount,T.decimals),H=s0(p(e0.swap_result.swap_out_amount).mul(1-Number(L)).toString(),I.decimals);return q0.isSuiCoin(T.coin_type)?`By depositing ${R0(T0(W,9).toString(),9)} SUI, ${R0(T0(V,9).toString(),9)} SUI will be converted to ${I==null?void 0:I.symbol} via ${D0} liquid staking and added to the pool together.`:`By depositing ${R0(T0(W,9).toString(),9)} ${T==null?void 0:T.symbol}, ${R0(T0(V,9).toString(),9)} ${T==null?void 0:T.symbol} will be traded for ${R0(T0(H,9).toString(),9)} ${I==null?void 0:I.symbol} and then added to the pool together.`}else if(!q0.isSuiCoin(a)){const V=t(a,W);if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",V),p(V).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[a,e0,y,u]);return{handleAmountInputChange:n0,fixAmountA:f,amountInputA:y,amountInputB:u,balanceInfoA:F,balanceInfoB:K,amountValueA:z,amountValueB:M,preCalculateLoading:l0,inputTotalValue:a0,calculateResult:e0,showOnlySideTips:P0,doAddAction:f0,reCalculateResult:d0}}function Ne(a,l,e,s,o,g,t,r,n,L,t0,k,b,j,y){const{currentAccount:w}=Z0(),u=i.useMemo(()=>{const m={text:void 0,disabled:!1};if(!(w!=null&&w.address))return m.text="Connect Wallet",m.disabled=!1,m;if(!n||!L)return m.disabled=!0,m;if(l==="both"&&(!+s&&!+o||a&&(!+s||!+o)))return m.text="Enter an amount",m.disabled=!0,m;if(l!=="both"){if(!(+s||+o))return m.text="Enter an amount",m.disabled=!0,m;if(e&&!t0){const f=q0.isSuiCoin(l);if(f&&l===(n==null?void 0:n.coin_type)&&p(s).lt(3)||f&&l===(L==null?void 0:L.coin_type)&&p(o).lt(3))return m.text="Minimum deposit 3 SUI",m.disabled=!0,m}}if(e&&k&&!j||!e&&j||e&&a&&y)return m.text="Enter an amount",m.disabled=!0,m;if(l==="both"){if(p(s).gt(t||"0"))return m.disabled=!0,m.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",m;if(p(o).gt(r||"0"))return m.disabled=!0,m.text=e?`Insufficient ${L==null?void 0:L.symbol} Balance`:"Invalid Amount",m}if(l!=="both"){if(g&&p(s).gt(t||"0"))return m.disabled=!0,m.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",m;if(!g&&p(o).gt(r||"0"))return m.disabled=!0,m.text=e?`Insufficient ${L==null?void 0:L.symbol} Balance`:"Invalid Amount",m}return(b&&b.ft_amount=="0"||b&&b.burn_ft_amount=="0"||!b)&&(m.disabled=!0,m.text="Enter an amount"),m},[w==null?void 0:w.address,l,s,o,t,r,b,e,k]);return{btnText:u.text,btnDisabled:u.disabled}}function We(a,l,e,s,o,g,t,r,n,L){const{currentAccount:t0}=Z0(),k=i.useMemo(()=>{const b={text:void 0,disabled:!1};if(!(t0!=null&&t0.address))return b.text="Connect Wallet",b.disabled=!1,b;if(!n||!L)return b.disabled=!0,b;if(l==="both"&&!+s&&!+o)return b.text="Enter an amount",b.disabled=!0,b;if(l!=="both"){if(!(+s||+o))return b.text="Enter an amount",b.disabled=!0,b;if(e){const j=q0.isSuiCoin(l);if(j&&l===(n==null?void 0:n.coin_type)&&p(s).lt(3)||j&&l===(L==null?void 0:L.coin_type)&&p(o).lt(3))return b.text="Minimum deposit 3 SUI",b.disabled=!0,b}}if(l==="both"){if(p(s).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(p(o).gt(r||"0"))return b.disabled=!0,b.text=e?`Insufficient ${L==null?void 0:L.symbol} Balance`:"Invalid Amount",b}if(l!=="both"){if(g&&p(s).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(!g&&p(o).gt(r||"0"))return b.disabled=!0,b.text=e?`Insufficient ${L==null?void 0:L.symbol} Balance`:"Invalid Amount",b}return a&&l!=="both"?(b.text=e?"Zap In":"Zap Out",b):(console.log("🚀🚀🚀 ~ submitBtnInfo ~ btnInfo:",b),b)},[t0==null?void 0:t0.address,l,s,o,t,r]);return{btnText:k.text,btnDisabled:k.disabled}}function He(a,l,e,s,o,g,t,r,n,L,t0,k,b){const{vaultsSlippage:j,mevProtect:y,maxCapForGas:w,transactionMode:u,customGasPrice:m}=ee(),{currentAccount:f}=Z0(),{setDetailRefreshCount:Z}=K0(),{fetchTokenPrices:c,getTokenAmountValue:D}=N0(),{volatileVaultsSdk:N}=z0(),[v,O]=i.useState(""),[P,F]=i.useState(""),[K,z]=i.useState(!0),[M,a0]=i.useState(""),[l0,B]=i.useState(!1),[e0,h]=i.useState(0),g0=i.useRef(M),o0=i.useRef(K),n0=i.useRef(v),d0=i.useRef(P),y0=i.useRef(l0),_0=i.useRef(e0);i.useEffect(()=>{_0.current=e0},[e0]),i.useEffect(()=>{y0.current=l0},[l0]),i.useEffect(()=>{g0.current=M},[M]),i.useEffect(()=>{o0.current=K},[K]),i.useEffect(()=>{n0.current=v},[v,n,P]),i.useEffect(()=>{d0.current=P},[P,n,v]),i.useEffect(()=>{const d=[];t&&r&&(d.push(t.coin_type),d.push(r.coin_type)),d.length>0&&c(d)},[t==null?void 0:t.coin_type,r==null?void 0:r.coin_type]);const[Y,c0]=i.useState("0"),[f0,h0]=i.useState("0"),[D0,P0]=i.useState(!1);i.useEffect(()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ holdCoinAmounts:",e),e&&(e!=null&&e.coinAmountA)&&(e!=null&&e.coinAmountB)&&W()},[e==null?void 0:e.coinAmountA,e==null?void 0:e.coinAmountB]),i.useEffect(()=>{G()},[b==null?void 0:b.current_sqrt_price]);const W=async()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:d,coinAmountB:C}=e;if(P0(!1),a==="both"||L||t0){c0(n?C:d),h0(n?d:C);return}const _=a===(t==null?void 0:t.coin_type),Q=_?C:d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:121 ~ calculateAvailableAmount ~ fromAmount:",Q);const i0=_?d:C;if(p(Q).gt(0)){P0(!0);const A=O0();a0(A);const b0=a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",a);const S0={pool_id:g,mode:b0,burn_lp_amount:o,available_lp_amount:o};console.log("🚀🚀🚀 ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",S0);try{const V0=await N.Vaults.preCalculateWithdrawAmount(S0);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",V0),b0=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const u0=s0(V0.receive_amount_a,t==null?void 0:t.decimals);n?h0(u0):c0(u0)}else{if((r==null?void 0:r.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const u0=s0(V0.receive_amount_b,r==null?void 0:r.decimals);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",u0),n?c0(u0):h0(u0)}P0(!1)}catch(V0){console.log("🚀🚀🚀 ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",V0)}}else _?c0(i0):h0(i0)},T=D(n?r==null?void 0:r.coin_type:t==null?void 0:t.coin_type,v),I=D(n?t==null?void 0:t.coin_type:r==null?void 0:r.coin_type,P),V=i.useMemo(()=>p(T||"0").add(I||"0").toString(),[T,I]);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",I),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",T);const[H,R]=i.useState(!1),[S,r0]=i.useState(void 0),E0=B0(async(d,C,_,Q,i0,A)=>{if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:210 ~ removePercent:",i0),p(i0).gt(100)){a0(""),r0(void 0),R(!1);return}if(t&&r&&g&&o){if(!i0){if(_){if(p(d).gt(n?f0:Y)){a0(""),r0(void 0),R(!1);return}}else if(p(d).gt(n?Y:f0)){a0(""),r0(void 0),R(!1);return}}Z(0),(+n0.current||+d0.current||i0)&&R(!0);const S0=C?H0(d,0,!0):L0(d,(_?t:r).decimals).toFixed(0);let V0;if(a=="both")V0={pool_id:g,mode:"FixedOneSide",burn_lp_amount:String(S0)};else{const u0=a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";V0={pool_id:g,mode:u0,burn_lp_amount:String(S0)}}console.log("🚀 ~ preCalculate ~ params:",V0,Q,i0);try{const u0=await N.Vaults.preCalculateWithdrawAmount(V0);console.log("🚀 ~ preCalculate ~ res:",{...u0,uuid:Q,assetAction:a});const w0={amount_a:n?u0.receive_amount_b:u0.receive_amount_a,amount_b:n?u0.receive_amount_a:u0.receive_amount_b,burn_ft_amount:u0.burn_lp_amount,swap:u0.swap};if(w0.burn_ft_amount=="0"){R(!1),r0(void 0);return}const pe=s0(w0.amount_a.toString(),n?r.decimals:t.decimals).toString();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const le=s0(w0.amount_b.toString(),n?t.decimals:r.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",pe,t.decimals,le,r==null?void 0:r.decimals),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",le),a==="both"&&(C&&!A?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",C),(n?!_:_)?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+n0.current),+n0.current?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),F(s0(w0.amount_b.toString(),n?t==null?void 0:t.decimals:r==null?void 0:r.decimals).toString()),r0(w0)):F("")):+d0.current?(O(s0(w0.amount_a.toString(),n?r==null?void 0:r.decimals:t==null?void 0:t.decimals).toString()),r0(w0)):O("")):r0(w0)),a!=="both"){if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",i0),i0){const oe=s0(p(w0.amount_a).add(w0.amount_b||"0").toString(),n?r.decimals:t.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",oe),n?!_:_)i0===100&&(w0.burn_ft_amount=o);else{const Ze=s0(p(w0.amount_a).add(w0.amount_b||"0").toString(),n?t.decimals:r.decimals).toString();i0===100&&(w0.burn_ft_amount=o)}}r0(w0)}}catch(u0){console.log("🚀 ~ preCalculate ~ error:",u0),r0(void 0)}finally{R(!1)}}},500),J=(d,C,_=!1,Q=!1,i0=!0)=>{if(_){q(100);return}if(Q){q(50);return}z(C),B(!1),(n?!C:C)?(O(d),i0?F(""):G()):(F(d),i0?O(""):G());let A,b0;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:462 ~ availableAmountA:",Y),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ availableAmountB:",f0),(n?!C:C)?(b0=p(d).div(Y),A=H0(p(o).mul(b0).toString(),0,!0)):(b0=p(d).div(f0),A=H0(p(o).mul(b0).toString(),0,!0)),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ removeLpAmount:",A),+A){const S0=O0();a0(S0),E0(String(A),!0,C,S0,b0.mul(100).toNumber(),b0.gte(100))}else X()},q=d=>{if(B(!0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",d),h(d),o&&+o){if(d===0)X();else{const C=a===(t==null?void 0:t.coin_type);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",f0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",Y),z(C),a=="both"?(O(p(Y).mul(p(d).div(100)).toString()),F(p(f0).mul(p(d).div(100)).toString())):a===(t==null?void 0:t.coin_type)?n?F(p(f0).mul(p(d).div(100)).toString()):O(p(Y).mul(p(d).div(100)).toString()):n?O(p(Y).mul(p(d).div(100)).toString()):F(p(f0).mul(p(d).div(100)).toString()),d===100||a==="both"){const _=O0();a0(_);const Q=d===100?o:p(o).mul(d).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",Q),E0(Q,!0,C,_,d,!0)}else{z(C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",a),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const _=p(o).mul(d).div(100).toFixed();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",_),E0(_,!0,C,M,d,!0)}}console.log("🚀🚀🚀 ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",Y)}},G=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:l0,removePercent:e0}),l0)q(e0);else{const d=o0.current?n?d0.current:n0.current:n?n0.current:d0.current;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",d),J(d,o0.current)}};i.useEffect(()=>{if(!l0)if(S&&o&&+o){let d=Number(p(S.burn_ft_amount).div(o).mul(100));d>100&&(d=100),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",d),h(d)}else h(0)},[S==null?void 0:S.burn_ft_amount,l0]);const[p0,m0]=i.useState(!1),{signAndExecuteTransaction:U0,transactionConfirmation:x,transactionRejected:E}=k0(),U=async()=>{if(g&&S&&o){m0(!0);let d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",S),a==="both"?d={pool_id:g,burn_lp_amount:S.burn_ft_amount,mode:"FixedOneSide",slippage:Number(j)}:(t==null||t.coin_type,e0===100?d={pool_id:g,burn_lp_amount:o,mode:a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(j)}:d={pool_id:g,burn_lp_amount:S.burn_ft_amount,mode:a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(j)}),console.log("🚀 ~ doRemoveAction ~ params:",JSON.stringify(d));const C={getShowInfo:(_,Q)=>{const i0="Withdraw "+[x0(v,n?r==null?void 0:r.symbol:t==null?void 0:t.symbol),x0(P,n?t==null?void 0:t.symbol:r==null?void 0:r.symbol)].filter(Boolean).join(" and "),A={modalDescriptionText:i0,toastDescriptionContent:i0};if(_==="success"){let b0=v,S0=P;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",Q),Q&&(b0=p(v).gt(0)?G0(Q,n?r:t)||v:"",S0=p(P).gt(0)?G0(Q,n?t:r)||P:""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",b0,S0);const V0=[x0(n?S0:b0,n?r==null?void 0:r.symbol:t==null?void 0:t.symbol),x0(n?b0:S0,n?t==null?void 0:t.symbol:r==null?void 0:r.symbol)].filter(Boolean),u0=(V0&&V0.length>1?"Removed ":"Withdraw ")+[x0(b0,n?r==null?void 0:r.symbol:t==null?void 0:t.symbol),x0(S0,n?t==null?void 0:t.symbol:r==null?void 0:r.symbol)].filter(Boolean).join(" and ");A.toastDescriptionContent=u0,A.modalDescriptionText=u0}return A}};x(C);try{const _=await N.Vaults.buildWithdrawPayload(d);await U0(_,C,{useMev:y,txAction:"signTransactionBlock",useFastMode:u==="Fast Mode",maxCapForGas:w,customGasPrice:m,msafeParams:{action:ae.AddVaultsPosition,txbParams:d}})?(X(),l()):G(),m0(!1)}catch(_){console.log("🚀 ~ doAddAction ~ error:",_),m0(!1),E(C)}}},X=()=>{O(""),F(""),n0.current="",d0.current="",h(0),R(!1),r0(void 0),a0(""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},$=i.useMemo(()=>{var d;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",S),S&&(S!=null&&S.swap)&&a!=="both"&&t&&r){const C=K?n?P:v:n?v:P;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",C);const _=o0.current?t:r;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",_);const Q=o0.current?r:t;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",Q);const i0=s0((d=S==null?void 0:S.swap)==null?void 0:d.swap_amount_in,Q.decimals),A=T0(s0(p(S.swap.swap_amount_out).mul(1-Number(j)).toString(),_.decimals),_.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:j,calculateResult:S,swapOutAmount:A}),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${C} ${_==null?void 0:_.symbol}, ${i0} ${Q==null?void 0:Q.symbol} in the pool will be traded for ${A} ${_==null?void 0:_.symbol}`),`To withdraw ${T0(C)} ${_==null?void 0:_.symbol}, ${T0(i0)} ${Q==null?void 0:Q.symbol} in the pool will be traded for ${A} ${_==null?void 0:_.symbol}`}},[a,S,v,P]);return i.useEffect(()=>{G()},[Y,f0]),i.useEffect(()=>{X(),setTimeout(()=>{W()},200)},[k,a,f==null?void 0:f.address]),{handleAmountInputChange:J,fixAmountA:K,amountInputA:v,amountInputB:P,availableAmountA:Y,availableAmountB:f0,amountValueA:T,amountValueB:I,preCalculateLoading:H,inputTotalValue:V,calculateResult:S,showOnlySideTips:$,doRemoveAction:U,handlePercentInputChange:q,isPercentInput:l0,removePercent:e0,reCalculateResult:G,calculateAvailableLoading:D0,submitLoading:p0}}function Xe(a,l,e,s,o,g,t,r){const{setDetailRefreshCount:n}=W0(),{fetchTokenPrices:L,getTokenAmountValue:t0}=N0(),{vaultsSdk:k}=z0(),{vaultsSlippage:b,mevProtect:j,maxCapForGas:y,transactionMode:w,customGasPrice:u}=ee(),{findBestRouters:m}=Ce(),[f,Z]=i.useState(""),[c,D]=i.useState(""),[N,v]=i.useState(!0),[O,P]=i.useState(""),[F,K]=i.useState(!1),[z,M]=i.useState(0),a0=i.useRef(O),l0=i.useRef(N),B=i.useRef(f),e0=i.useRef(c),h=i.useRef(F),g0=i.useRef(z);i.useEffect(()=>{g0.current=z},[z]),i.useEffect(()=>{h.current=F},[F]),i.useEffect(()=>{a0.current=O},[O]),i.useEffect(()=>{l0.current=N},[N]),i.useEffect(()=>{B.current=f},[f]),i.useEffect(()=>{e0.current=c},[c]),i.useEffect(()=>{const x=[];t&&r&&(x.push(t.coin_type),x.push(r.coin_type)),x.length>0&&L(x)},[t==null?void 0:t.coin_type,r==null?void 0:r.coin_type]);const[o0,n0]=i.useState("0"),[d0,y0]=i.useState("0"),[_0,Y]=i.useState(!1);i.useEffect(()=>{m0(),c0()},[a]),i.useEffect(()=>{c0()},[e.coinAmountA]);const c0=()=>{const{coinAmountA:x,coinAmountB:E}=e;if(console.log("🚀 ~ useEffect ~ holdCoinAmounts:",e),Y(!1),a==="both"){n0(x),y0(E);return}const U=a===(t==null?void 0:t.coin_type),X=U?E:x;let $=U?x:E;const d=U?r:t,C=U?t:r;p(X).gt(0)?(Y(!0),n0("0"),y0("0"),m({fromToken:d,toToken:C,amount:L0(X,d.decimals).toString(),providersKeys:k.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:O}).then(_=>{console.log("🚀 ~ calculateAvailableAmount ~ uuid:",{result:_}),_.toAmountUi&&($=p($).add(_.toAmountUi).toString()),U?n0($):y0($)}).finally(()=>{Y(!1)})):U?n0($):y0($)},f0=t0(t==null?void 0:t.coin_type,f),h0=t0(r==null?void 0:r.coin_type,c),D0=i.useMemo(()=>p(f0||"0").add(h0||"0").toString(),[f0,h0]),[P0,W]=i.useState(!1),[T,I]=i.useState(void 0),H=B0(async(x,E,U,X,$)=>{var d,C;if(t&&r&&g&&o){if(!$){if(U){if(p(x).gt(o0)){P(""),I(void 0),W(!1);return}}else if(p(x).gt(d0)){P(""),I(void 0),W(!1);return}}n(0),(+B.current||+e0.current||$)&&W(!0);const Q=E?x:L0(x,(U?t:r).decimals).toFixed(0),i0={vault_id:g,fix_amount_a:U,input_amount:Q,slippage:Number(b),request_id:X,side:a==="both"?$0.Both:$0.OneSide,is_ft_input:E,max_ft_amount:o};console.log("🚀 ~ preCalculate ~ params:",i0,X,$);try{const A=await k.Vaults.calculateWithdrawAmount(i0);if(console.log("🚀 ~ preCalculate ~ res:",{...A,uuid:X,assetAction:a}),a0.current===X){const b0=s0(A.amount_a.toString(),t.decimals).toString(),S0=s0(A.amount_b.toString(),r.decimals).toString();if(a==="both"&&(E?(D(S0),Z(b0),$===100&&(n0(b0),y0(S0)),I(A)):U?+B.current?(D(S0),I(A)):D(""):+e0.current?(Z(b0),I(A)):Z("")),a!=="both"){if($){const V0=s0(p(A.amount_a).add(((d=A.swap_result)==null?void 0:d.swap_out_amount)||"0").toString(),t.decimals).toString();if(U)Z(V0),D(""),$===100&&(A.burn_ft_amount=o,n0(V0));else{const u0=s0(p(A.amount_b).add(((C=A.swap_result)==null?void 0:C.swap_out_amount)||"0").toString(),r.decimals).toString();Z(""),D(u0),$===100&&(A.burn_ft_amount=o,y0(u0))}}I(A)}}}catch(A){console.log("🚀 ~ preCalculate ~ error:",A),I(void 0)}finally{W(!1)}}},500),R=(x,E,U=!1,X=!1,$=!0)=>{if(U){S(100);return}if(X){S(50);return}if(v(E),K(!1),E?(Z(x),$&&D("")):(D(x),$&&Z("")),+x){const d=O0();P(d),H(x,!1,E,d)}else m0()},S=x=>{if(K(!0),M(x),o&&+o)if(x===0)m0();else{const E=a===(t==null?void 0:t.coin_type);if(v(E),x===100||a==="both"){const U=O0();P(U);const X=x===100?o:p(o).mul(x).div(100).toFixed(0);H(X,!0,E,U,x)}else{v(E);const U=p(a===(t==null?void 0:t.coin_type)?o0:d0).mul(x).div(100).toFixed();H(U,!1,E,O,x)}}},r0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:F,removePercent:z}),F)S(z);else{const x=l0.current?B.current:e0.current;R(x,l0.current)}};i.useEffect(()=>{if(!F)if(T&&o&&+o){let x=Number(p(T.burn_ft_amount).div(o).mul(100));x>100&&(x=100),M(x)}else M(0)},[T==null?void 0:T.burn_ft_amount]);const[F0,E0]=i.useState(!1),{signAndExecuteTransaction:J,transactionConfirmation:q,transactionRejected:G}=k0(),p0=async()=>{if(g&&T&&o){E0(!0);let x;if(a==="both")x={vault_id:g,ft_amount:T==null?void 0:T.burn_ft_amount,slippage:Number(b)};else{const U=a===(t==null?void 0:t.coin_type);if(z===100)x={vault_id:g,is_ft_input:!0,input_amount:o,slippage:Number(b),max_ft_amount:o,fix_amount_a:U};else{const X=L0(N?f:c,9);x={vault_id:g,is_ft_input:!1,input_amount:X.toString(),slippage:Number(b),max_ft_amount:o,fix_amount_a:U}}}console.log("🚀 ~ doRemoveAction ~ params:",x);const E={getShowInfo:(U,X)=>{const $="Withdraw "+[x0(f,t==null?void 0:t.symbol),x0(c,r==null?void 0:r.symbol)].filter(Boolean).join(" and "),d={modalDescriptionText:$,toastDescriptionContent:$};if(U==="success"){let C=f,_=c;X&&(C=p(f).gt(0)?G0(X,t)||f:"",_=p(c).gt(0)?G0(X,r)||c:"");const Q="Removed "+[x0(C,t==null?void 0:t.symbol),x0(_,r==null?void 0:r.symbol)].filter(Boolean).join(" and ");d.toastDescriptionContent=Q,d.modalDescriptionText=Q}return d}};q(E);try{const U=await k.Vaults.withdraw(x);await J(U,E,{useMev:j,txAction:"signTransactionBlock",useFastMode:w==="Fast Mode",maxCapForGas:y,customGasPrice:u,msafeParams:{action:ae.RemoveVaultsPosition,txbParams:x}})?m0():r0(),l()}catch(U){console.log("🚀 ~ doAddAction ~ error:",U),G(E)}}},m0=()=>{Z(""),D(""),M(0),W(!1),I(void 0),P("")},U0=i.useMemo(()=>{if(T&&T.swap_result&&a!=="both"&&t&&r){const x=N?f:c,E=l0.current?t:r,U=l0.current?r:t,X=s0(T.swap_result.swap_in_amount,E.decimals),$=s0(p(T.swap_result.swap_out_amount).mul(1-Number(b)).toString(),U.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:b,calculateResult:T,swapOutAmount:$}),`To withdraw ${T0(x)} ${E==null?void 0:E.symbol}, ${T0(X)} ${U==null?void 0:U.symbol} in the pool will be traded for ${$} ${E==null?void 0:E.symbol}`}},[a,T,f,c]);return{handleAmountInputChange:R,fixAmountA:N,amountInputA:f,amountInputB:c,availableAmountA:o0,availableAmountB:d0,amountValueA:f0,amountValueB:h0,preCalculateLoading:P0,inputTotalValue:D0,calculateResult:T,showOnlySideTips:U0,doRemoveAction:p0,handlePercentInputChange:S,isPercentInput:F,removePercent:z,reCalculateResult:r0,calculateAvailableAmount:c0,calculateAvailableLoading:_0}}const Ke=a=>a?Fe:qe,Ye=a=>a?Ge:ze,Je=a=>a?Ne:We,Qe=a=>a?He:Xe,ba={useGetApiVaultInfo:Le,useGetContractVaultInfo:Ke,useVaultsAdd:Ye,useAddButtonStatus:Je,useVaultsRemove:Qe};function ga({vaultsLstApyDisplay:a,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:s,vaultsAprDisplay:o}){return C0.jsx(he,{tooltip:C0.jsx(Ae,{vaultsApyDisplay:l,vaultsLstApyDisplay:a,vaultsTotalApyDisplay:e,vaultsAprDisplay:o,category:s}),children:C0.jsx(Te,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:s=="cetus"?e:l})})}const Ae=({vaultsLstApyDisplay:a,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:s,vaultsAprDisplay:o})=>C0.jsx(se,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:s=="cetus"?C0.jsxs(se,{children:[C0.jsx(M0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),C0.jsx(ue,{h:"1px",w:"100%",backgroundColor:"border"}),C0.jsx(M0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:l}),C0.jsx(M0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:a,valueStyle:{fontSize:"12px"}})]}):C0.jsxs(se,{children:[C0.jsx(M0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:o}),C0.jsx(ue,{h:"1px",w:"100%",backgroundColor:"border"}),C0.jsx(M0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),C0.jsx(M0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function ya({coinType:a}){const{tokenInfo:l}=A0(a);return C0.jsx(ve,{children:C0.jsx(xe,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"})})}export{ya as C,Ae as V,Ue as a,Oe as b,Le as c,ga as d,ma as e,da as f,$e as g,fa as h,pa as i,K0 as j,W0 as u,ba as v};
