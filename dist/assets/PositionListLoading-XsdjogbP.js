import{E as f,a as y,j as e,V as r,T as t,f as v,P as U,h as W,C as E,u as c,k as H,m as M,n as O,H as p,I as F,ab as G,v as J,S as T}from"./vendor-BulRdKUe.js";import{a as R,d as K}from"./usePositionList-CObkP_cm.js";import{u as X}from"./detail-D8hpDMei.js";import{S as L,A as Y}from"./SingleTokenInfo-xrDFKGFi.js";import{n as V,O as _,d as B,a as N,G as $,v as D,m as Z,e as I,B as q,I as ee}from"./index-CLZsOITc.js";import{P as se,L as le}from"./PriceRange-D3IHTWuA.js";function pe(){const{search:s}=f(),[g,u]=y.useState({});return y.useLayoutEffect(()=>{const i=new URLSearchParams(s);u(Object.fromEntries(i.entries()))},[s]),g}const xe=({positionInfo:s})=>{var w,h;const[g,u]=y.useState(!1),{getTokenAmountValue:i}=V(),{posFeeData:k,posFeeDataLoading:P}=R(),a=k[s==null?void 0:s.posId],n=i((w=s==null?void 0:s.displayTokenA)==null?void 0:w.coin_type,a==null?void 0:a.displayFeeOwedA,"--"),d=i((h=s==null?void 0:s.displayTokenB)==null?void 0:h.coin_type,a==null?void 0:a.displayFeeOwedB,"--"),j=y.useMemo(()=>n!=="--"&&d!=="--"?_(B(n).plus(d).toString(),2):"$--",[n,d]),{isApp:b}=N();return e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:"flex-start",flexDirection:{base:"row",lg:"column"},children:[e.jsx(t,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending Fees"}),e.jsx(v,{p:"12px 0",onClick:m=>$(m),onMouseEnter:Number(n)==0&&Number(d)==0?()=>{}:()=>u(!0),onMouseLeave:()=>u(!1),children:e.jsxs(U,{isLazy:!0,trigger:b?"click":"hover",placement:"top-start",children:[e.jsx(W,{children:e.jsx(E,{as:"button",cursor:Number(n)==0&&Number(d)==0?"default":"help",children:e.jsx(c,{isLoaded:!!j,children:e.jsx(t,{color:"text_caption",textDecoration:Number(n)==0&&Number(d)==0?"none":"underline dotted",textUnderlineOffset:"3px",borderColor:"text_caption",children:j})})})}),g&&j!=="--"&&e.jsx(H,{children:e.jsx(M,{zIndex:"2",w:"fit-content",p:"4px ",children:e.jsx(O,{p:"8px",children:e.jsxs(r,{align:"flex-start",minW:"200px",children:[e.jsxs(p,{w:"100%",justify:"space-between",borderBottom:"1px solid",borderColor:"border",pb:"8px",sx:{_last:{borderBottom:"none",pb:"0px"}},children:[e.jsx(L,{token:s==null?void 0:s.displayTokenA,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{align:"flex-end",gap:"4px",children:[e.jsx(t,{fontSize:"12px",color:"text_caption",children:D(a==null?void 0:a.displayFeeOwedA)}),e.jsx(t,{fontSize:"12px",children:_(n,2)})]})]}),e.jsxs(p,{w:"100%",justify:"space-between",children:[e.jsx(L,{token:s==null?void 0:s.displayTokenB,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{align:"flex-end",gap:"4px",children:[e.jsx(t,{fontSize:"12px",color:"text_caption",children:D(a==null?void 0:a.displayFeeOwedB)}),e.jsx(t,{fontSize:"12px",children:_(d,2)})]})]})]})})})})]})})]})},ae=({positionInfo:s})=>{var A,C;const{getTokenAmountValue:g}=V(),{coinPriceObj:u}=Z(),{posRewardsData:i,posRewardsDataLoading:k,posApiPoolData:P,farmsPosRewardsData:a,farmsPosRewardsDataLoading:n}=R(),d=(A=P[s==null?void 0:s.clmmPool])==null?void 0:A.haveMining,j=(C=P[s==null?void 0:s.clmmPool])==null?void 0:C.haveFarming,b=i[s==null?void 0:s.posId],w=a[s==null?void 0:s.id],h=y.useMemo(()=>{const l=b==null?void 0:b.map(x=>{var o;console.log("ðŸš€ ~ list ~ reward:",x);const S=g((o=x==null?void 0:x.token)==null?void 0:o.coin_type,x==null?void 0:x.display_amount_owed,"--");return{...x,amountUSD:S}});return l&&l.length>0?l.filter(x=>B(x.display_amount_owed).gt(0)):[]},[s,b,u]),m=y.useMemo(()=>{const l=w==null?void 0:w.map(x=>{var o;console.log("ðŸš€ ~ list ~ reward:",x);const S=g((o=x==null?void 0:x.token)==null?void 0:o.coin_type,x==null?void 0:x.display_amount_owed,"--");return{...x,amountUSD:S}});return l&&l.length>0?l.filter(x=>B(x.display_amount_owed).gt(0)):[]},[s,w,u]),z=y.useMemo(()=>{let l;const x=h.concat(m);return console.log("ðŸš€ ~ totalUSD ~ arr:",x,h,m),(x==null?void 0:x.length)>0?(x.forEach(S=>{const o=S==null?void 0:S.amountUSD;l=o=="--"||l=="--"?"--":B(l).plus(o).toString()}),l=="--"?"$--":_(l,2)):"$0"},[h,m]),{isApp:Q}=N();return e.jsx(e.Fragment,{children:((h==null?void 0:h.length)>0||d||(s==null?void 0:s.posType)=="farms")&&e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:{base:"flex-start",lg:"flex-end"},flexDirection:{base:"row",lg:"column"},children:[e.jsx(t,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending Rewards"}),e.jsx(v,{p:"12px 0",onClick:l=>$(l),children:e.jsxs(U,{isLazy:!0,trigger:Q?"click":"hover",placement:"top-start",children:[e.jsx(W,{children:e.jsxs(E,{as:"button",cursor:z=="$0"?"text":"help",children:[d&&e.jsx(F,{w:"18px",h:"18px",src:"/images/icon_mining.png",mr:"4px"}),j&&e.jsx(F,{w:"18px",h:"18px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(c,{isLoaded:!!z&&!k&&!n,children:e.jsx(t,{color:"text_caption",textDecoration:z=="$0"?"none":"underline dotted",textUnderlineOffset:"3px",children:z})})]})}),z!=="$0"&&e.jsx(H,{children:e.jsx(M,{zIndex:"2",w:"fit-content",p:"4px",children:e.jsx(O,{borderRadius:"12px",p:"8px",children:e.jsxs(r,{align:"flex-start",children:[d&&e.jsx(t,{fontSize:"12px",color:"text_caption",children:"Mining Rewards"}),h==null?void 0:h.map(l=>{var x;return e.jsxs(p,{minW:"200px",justify:"space-between",borderBottom:"1px solid",borderColor:"border",pb:"8px",sx:{_last:{borderBottom:"none",pb:"0px"}},children:[e.jsx(L,{token:l==null?void 0:l.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{align:"flex-end",gap:"4px",children:[e.jsx(t,{fontSize:"12px",color:"text_caption",children:D(l==null?void 0:l.display_amount_owed)}),e.jsxs(t,{fontSize:"12px",children:[" ",_(l==null?void 0:l.amountUSD,2)]})]})]},(x=l==null?void 0:l.token)==null?void 0:x.coin_type)}),j&&e.jsx(t,{fontSize:"12px",color:"text_caption",children:"Farming Rewards"}),m==null?void 0:m.map(l=>{var x;return e.jsxs(p,{minW:"200px",justify:"space-between",borderBottom:"1px solid",borderColor:"border",pb:"8px",sx:{_last:{borderBottom:"none",pb:"0px"}},children:[e.jsx(L,{token:l==null?void 0:l.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{align:"flex-end",gap:"4px",children:[e.jsx(t,{fontSize:"12px",color:"text_caption",children:D(l==null?void 0:l.display_amount_owed)}),e.jsxs(t,{fontSize:"12px",children:[" ",_(l==null?void 0:l.amountUSD,2)]})]})]},(x=l==null?void 0:l.token)==null?void 0:x.coin_type)})]})})})})]})})]})})};function ge({positionInfo:s}){const{isApp:g}=N(),{getExplorerUrl:u}=I(),{getClmmPosName:i}=K(),k=G(),{setCurrentPosDetailTab:P}=X(),{posPoolsOriginalData:a}=R(),n=y.useMemo(()=>{var j;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const b=(j=a==null?void 0:a[s==null?void 0:s.clmmPool])==null?void 0:j.index;return i(Number(s==null?void 0:s.index),b)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,a]),d=()=>{console.log("ðŸš€ ~ PoolItem ~ poolInfo:",s),P("increase"),k(`/position-detail/${s==null?void 0:s.id}`)};return e.jsx(q,{w:"100%",p:{base:"16px 8px 12px",lg:"12px"},borderRadius:"16px",onClick:d,children:e.jsxs(p,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(r,{w:{base:"100%",lg:"calc(100% - 100px)"},align:"flex-start",children:[e.jsxs(p,{flexDirection:{base:"column",lg:"row"},w:{base:"100%",lg:"unset"},children:[e.jsxs(p,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},children:[e.jsx(t,{fontSize:{base:"14px",lg:"12px"},children:"NFT ID"}),e.jsx(c,{isLoaded:!!n,children:e.jsx(t,{fontWeight:"500",fontSize:{base:"14px",lg:"12px"},color:"text_caption",children:n==null?void 0:n.split("|")[1]})})]}),e.jsxs(p,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},children:[e.jsx(t,{fontSize:{base:"14px",lg:"12px"},ml:{base:"0",lg:"8px"},children:"Address"}),e.jsx(Y,{fontWeight:"500",color:"text_caption",address:s==null?void 0:s.id,showLink:!1,fontSize:{base:"14px",lg:"12px"},onClickLink:()=>{window.open(u(s==null?void 0:s.id,"nftAddress"),"_blank")}})]})]}),e.jsxs(p,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},gap:{base:"0",lg:"8px"},children:[g&&e.jsx(v,{h:"4px"}),e.jsx(se,{positionInfo:s,symbolEllipsesDecimals:10,labelInfo:{text:"Price Range"}}),g&&e.jsx(v,{h:"4px"}),e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},align:"flex-start",flexDirection:{base:"row",lg:"column"},children:[e.jsx(t,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Liquidity"}),e.jsx(le,{positionInfo:s,fontSize:"14px"})]}),e.jsx(xe,{positionInfo:s}),e.jsx(ae,{positionInfo:s})]})]}),e.jsxs(J,{w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"90px"},borderRadius:"8px",variant:"ghost",p:"0 !important",_hover:{svg:{fill:"text_caption"}},children:[g&&e.jsx(t,{children:"Manage"}),e.jsx(ee,{xlinkHref:"#icon-icon_list_token",w:"14px",h:"14px"})]})]})})}function ue(){const{isApp:s}=N();return e.jsxs(r,{w:"100%",bg:"card_bg",p:"16px",borderRadius:"16px",gap:"20px",align:"flex-start",children:[e.jsxs(p,{w:"100%",justify:"space-between",children:[e.jsxs(p,{gap:"0",children:[e.jsx(T,{size:"9"}),e.jsx(T,{size:"9"}),e.jsxs(r,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(c,{height:"4",width:"100px"}),e.jsx(c,{height:"4",width:"150px"})]})]}),e.jsx(c,{height:"5",width:"250px"})]}),e.jsx(q,{w:"100%",p:"12px",borderRadius:"16px",children:e.jsxs(r,{w:{base:"100%",lg:"calc(100% - 100px)"},align:"flex-start",children:[e.jsx(c,{height:"4",width:"200px",mt:"8px"}),e.jsxs(p,{w:"100%",justify:"space-between",children:[e.jsxs(r,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(c,{height:"4",width:"100px"}),e.jsx(c,{height:"4",width:"100px"})]}),e.jsxs(r,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(c,{height:"4",width:"100px"}),e.jsx(c,{height:"4",width:"100px"})]}),!s&&e.jsxs(r,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(c,{height:"4",width:"100px"}),e.jsx(c,{height:"4",width:"100px"})]}),!s&&e.jsxs(r,{gap:"4px",align:"flex-start",h:"58px",justify:"center",children:[e.jsx(c,{height:"4",width:"100px"}),e.jsx(c,{height:"4",width:"100px"})]})]})]})})]})}export{ue as P,ge as a,pe as u};
//# sourceMappingURL=PositionListLoading-XsdjogbP.js.map
