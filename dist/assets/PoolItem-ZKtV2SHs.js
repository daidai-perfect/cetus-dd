import{j as e,H as r,T as a,aq as fe,a as f,f as ee,P as Ye,h as Ve,C as qe,I as Ee,k as $e,m as Ge,n as Ze,V as k,q as Y,S as We,p as te,W as xs,X as cs,Y as ps,Z as gs,a7 as us,$ as hs,a0 as js,O as ys,a6 as Ke,aa as bs}from"./vendor-BFGDaAdA.js";import{a as ms}from"./useFavoritePool-BrmOgNO0.js";import{a as oe,B as U,I as K,F as ke,O as L,f as se,k as de,o as Ce,n as Te,d as z,G as re}from"./index-BPmJ2jpN.js";import{C as Re}from"./CheckBox-DuDEoJH1.js";import{R as De}from"./RefreshButton-BOgQecBu.js";import{S as ws}from"./SearchInputBlock-QSbA5ZWH.js";import{H as Me,a as Ss}from"./PositionListLoading-CCL0j2ZU.js";import{u as _s,a as Xe,P as fs}from"./PositionCurrentPrice-BAm_NRyt.js";import{a as D,d as ks,u as vs}from"./usePositionList-CTKl_07Q.js";import{u as Cs}from"./activeOrders-z0A42A1h.js";import{a as Ts,i as Rs}from"./VaultsAprBlock-aytfep-B.js";import{u as Ps}from"./useTransaction-BEZ42Yzm.js";import{N as ve}from"./NoData-DtiZhmrM.js";import{u as As}from"./useAccountBalance-WZgcKaPa.js";import{S as ne}from"./SingleTokenInfo-CgvLp_Sh.js";import{P as Je}from"./CoinPairInfo-CQyXMF--.js";import{L as zs}from"./ExpendItem-fcr3Y3EF.js";function en({handleIsWatchList:s=()=>{},handleIsDisplayChecked:i=()=>{},onClickIncentiveTypes:d,handleRefresh:j,selectCoinList:y,onClickSelectCoinList:o,onDeleteSelectCoinList:c,isPools:v=!0,isProfile:g=!1,isRefreshed:b}){const{isWatchList:m,isAllPools:C,isIncentivizedOnly:S}=ms(),{isApp:p,windowWidth:n}=oe();return e.jsxs(r,{w:g?"unset":"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(r,{w:{base:"100%",lg:v||g?"unset":"100%"},justify:"space-between",sx:{">button":{">div":{borderRadius:g?"8px":"12px"}}},children:[e.jsx(ws,{selectCoinList:y,onClickSelectCoinList:o,onDeleteSelectCoinList:c}),!g&&(p||!v)&&e.jsx(De,{handleRefresh:j,isRefreshed:v?b:void 0})]}),v&&e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(U,{w:{base:n<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:n<=350?e.jsx(r,{h:"38px",justify:"center",align:"center",children:e.jsx(K,{xlinkHref:"#icon-icon_star",svgFill:m?"primary":"text_paragraph"})}):e.jsxs(r,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(Re,{checked:m,onClick:()=>{}}),e.jsx(a,{color:m?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx(U,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:p?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",gap:p?"4px":"8px",children:[e.jsx(a,{color:S?"text_caption":"text_paragraph",children:p?"Incentivized":"Incentivized Only"}),e.jsx(fe,{isChecked:S,onChange:d})]})}),e.jsx(U,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:p?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(r,{h:"100%",justify:"space-between",children:[e.jsxs(a,{color:C?"text_caption":"text_paragraph",children:[" ",p?"All":"All pools"]}),e.jsx(fe,{isChecked:C,onChange:i})]})})]}),!g&&!p&&e.jsx(De,{handleRefresh:j,isRefreshed:b})]})]})}const Bs=({posInfo:s})=>{var c,v,g,b,m,C,S,p;const[i,d]=f.useState(!1),{posApiPoolData:j}=D(),y=(c=j[s==null?void 0:s.clmmPool])==null?void 0:c.haveMining,o=(v=j[s==null?void 0:s.clmmPool])==null?void 0:v.haveFarming;return e.jsx(ee,{p:"12px 0",onClick:n=>ke(n),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:i,children:[e.jsx(Ve,{children:e.jsxs(qe,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:[y&&e.jsx(Ee,{w:"14px",h:"14px",src:"/images/icon_mining.png",mr:"4px"}),o&&e.jsx(Ee,{w:"14px",h:"14px",src:"/images/icon_farms.png",mr:"4px"}),e.jsx(a,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:L(s==null?void 0:s.totalRewardUsd,2)})]})}),i&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx($e,{children:e.jsx(Ge,{zIndex:"2",w:"fit-content",children:e.jsx(Ze,{children:e.jsxs(k,{align:"flex-start",minW:"300px",children:[((g=s==null?void 0:s.pendingFeesList)==null?void 0:g.length)>0&&e.jsxs(k,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Fees"}),e.jsxs(a,{color:"primary",children:[" ",L(s==null?void 0:s.feeOwedUsd,2)]})]}),(b=s==null?void 0:s.pendingFeesList)==null?void 0:b.map(n=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",n),e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(ne,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(k,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:se(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:L(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address)))]}),((m=s==null?void 0:s.pendingRewarderList)==null?void 0:m.length)>0&&e.jsxs(k,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(a,{color:"primary",children:[" ",L(s==null?void 0:s.rewarderUsd,2)]})]}),(C=s==null?void 0:s.pendingRewarderList)==null?void 0:C.map(n=>e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(ne,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(k,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:se(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:L(n==null?void 0:n.amountUSD,2)})]})]},n==null?void 0:n.coin_address))]}),((S=s==null?void 0:s.pendingFarmsList)==null?void 0:S.length)>0&&e.jsxs(k,{align:"flex-start",minW:"100%",children:[e.jsxs(r,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(a,{fontSize:"12px",children:"Farming rewards"}),e.jsxs(a,{color:"primary",children:[" ",L(s==null?void 0:s.farmsUsd,2)]})]}),(p=s==null?void 0:s.pendingFarmsList)==null?void 0:p.map(n=>{var A;return e.jsxs(r,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(ne,{token:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(k,{align:"flex-end",gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:se(n==null?void 0:n.amount,6)}),e.jsx(a,{fontSize:"12px",children:L(n==null?void 0:n.amountUSD,2)})]})]},(A=n==null?void 0:n.token)==null?void 0:A.coin_type)})]})]})})})})]})})};function Qe({posInfo:s,onClickCheckBox:i,checked:d,pageFrom:j,cursor:y="pointer"}){var m;const{getClmmPosName:o}=ks(),{posPoolsOriginalData:c}=D(),v=f.useMemo(()=>{var C;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const S=(C=c==null?void 0:c[s==null?void 0:s.clmmPool])==null?void 0:C.index;return o(s==null?void 0:s.index,S)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,c]),{posPoolsRelatedData:g}=D(),b=((m=g[s==null?void 0:s.posId])==null?void 0:m.displayFee)+"%";return e.jsxs(U,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(k,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Je,{poolInfo:{...s,feeDisplay:b},symbolEllipsesDecimals:10}),e.jsx(a,{fontSize:"12px",color:"primary_gray",children:v})]}),i&&e.jsx(Re,{cursor:y,checked:d||!1,onClick:()=>i(s)})]}),j=="pendingYieldModal"?e.jsxs(r,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(a,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(Bs,{posInfo:s})]}):e.jsxs(r,{justify:"space-between",p:"0 16px",children:[e.jsx(a,{color:"primary_gray",children:"Liquidity"}),e.jsx(zs,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:j!="lpBurnNext"})]})]})}function sn({onClose:s,onClickLock:i,currentLockItem:d,onClickCheckBox:j}){const{currentAccount:y,onWalletModal:o}=de(),{fullRangePosBaseList:c,fullRangePosBaseListLoading:v}=D();return e.jsxs(k,{w:"100%",gap:"20px",children:[e.jsxs(k,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(a,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(k,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:y!=null&&y.address?v?[{},{}].map((g,b)=>e.jsx(Ie,{},b)):(c==null?void 0:c.length)>0?c==null?void 0:c.map(g=>e.jsx(Qe,{posInfo:g,checked:(g==null?void 0:g.posId)==(d==null?void 0:d.posId),onClickCheckBox:b=>j(b),pageFrom:"lpBurnPrev"},g==null?void 0:g.posId)):e.jsxs(U,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ve,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(a,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ve,{type:"nowallet",onboard:()=>o(!0),bg:"none",border:"none"})}),e.jsxs(k,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(Y,{disabled:Object.values(d).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:i,children:"Lock Liquidity"}),e.jsx(Y,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Ie=()=>e.jsxs(U,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(r,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(r,{gap:"0",children:[e.jsx(We,{size:"9"}),e.jsx(We,{size:"9"}),e.jsx(k,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(te,{height:"4",width:"100px"})})]})}),e.jsx(ee,{w:"100%",p:"16px",children:e.jsx(te,{height:"5",width:"250px"})})]}),Ls="/assets/tvl_bg-D80TUrdU.png",Ns="/assets/yield_bg-CcCC1tTK.png";function Os(){const{isAutoRefresh:s}=Cs(),{currentAccount:i}=de(),{posBaseList:d,posLiquidityData:j,posBaseListLoading:y,posLiquidityDataLoading:o}=D(),{getTokenAmountValue:c}=Ce(),{coinPriceObj:v}=Te(),{vaultsPositionLoading:g,vaultsPositionObj:b}=Ts(),{getTokenAmountValueByPyth:m}=Rs(),C=f.useMemo(()=>{let n=0,A=0;if(s||!y&&!o)return(d==null?void 0:d.length)>0&&(i!=null&&i.address)?(d.forEach(T=>{var F,B;const _=j[T==null?void 0:T.posId],E=c((F=T==null?void 0:T.displayTokenA)==null?void 0:F.coin_type,_==null?void 0:_.displayCoinAmountA),N=c((B=T==null?void 0:T.displayTokenB)==null?void 0:B.coin_type,_==null?void 0:_.displayCoinAmountB);n=z(n).plus(E).plus(N).toString(),A=z(A).plus((_==null?void 0:_.displayCoinAmountA)||0).plus((_==null?void 0:_.displayCoinAmountB)||0).toString()}),console.log("ðŸš€ ~ clmmTotalTvl ~ total:",A,n),z(n).lte(0)&&z(A).gt(0)?"--":n):"0"},[s,d,y,j,o,i==null?void 0:i.address,v]),S=f.useMemo(()=>{let n=z(0);return console.log("ðŸš€ ~ vaultTotalTvl ~ vaultsPositionLoading:",g),g?"0":(Object.values(b).forEach(A=>{console.log("ðŸš€ ~ Object.values ~ vaultsPositionObj:",b);const{category:T,displayCoinTypeA:_,displayAmountA:E,displayCoinTypeB:N,displayAmountB:F}=A,B=T=="haedal"?m(_,E):c(_,E),X=T=="haedal"?m(N,F):c(N,F),R=z(B).plus(X||0);n=n.add(R)}),n.toString())},[b,g,i==null?void 0:i.address]),p=f.useMemo(()=>(console.log("ðŸš€ ~ liquidityTotalTvl ~ clmmTotalTvl:",C,S),C=="--"||S=="--"?"0":z(C).plus(S).toString()),[C,S]);return{clmmTotalTvl:C,vaultTotalTvl:S,liquidityTotalTvl:p}}function Fs({isOpen:s,claimLoading:i,onClose:d,changeClaimLoading:j}){const[y,o]=f.useState(!1),{coinPriceObj:c}=Te(),{getPosRelatedData:v,getPositionBaseList:g}=vs(),{signAndExecuteTransaction:b}=Ps(),{currentAccount:m}=de(),{getBatchHarvestFeeAndRewardsTxPayload:C}=_s(),{getTokenAmountValue:S}=Ce(),[p,n]=f.useState([]),[A,T]=f.useState(!0),[_,E]=f.useState(!0),[N,F]=f.useState(.01),[B,X]=f.useState([]),[R,V]=f.useState([]),[q,O]=f.useState(""),[xe,Pe]=f.useState(""),[$,Ae]=f.useState([]),{myPosYieldValue:es,posBaseList:J,posBaseListLoading:ce,posFeeDataLoading:pe,posRewardsDataLoading:ge,farmsPosRewardsDataLoading:ue,posFeeData:ae,posRewardsData:ie,farmsPosRewardsData:le}=D(),ss=t=>{const h=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");t.target.value=t.target.value.replace(h,"$1"),F(t.target.value)},ns=()=>{(!N||N<.01)&&F(.01)},ts=ce||pe||ge||ue;f.useEffect(()=>{const t=[];let h="0";const w=[];if((J==null?void 0:J.length)>0&&!ce&&!pe&&!ge&&!ue){J.forEach((x,ze)=>{var Be,Le,Ne,Oe,Fe,He,Ue;let he="0",je="0",ye="0",Q="0",G="0",Z="0";const be=[],me=[],we=[];if(((Be=Object.values(ae))==null?void 0:Be.length)>0){const u=ae[x==null?void 0:x.posId],l=S((Le=x==null?void 0:x.displayTokenA)==null?void 0:Le.coin_type,u==null?void 0:u.displayFeeOwedA,"--"),W=S((Ne=x==null?void 0:x.displayTokenB)==null?void 0:Ne.coin_type,u==null?void 0:u.displayFeeOwedB,"--");he=z(he).plus((u==null?void 0:u.displayFeeOwedA)||0).plus((u==null?void 0:u.displayFeeOwedB)||0).toString(),l!=="--"&&W!=="--"&&(Q=z(l).plus(W).toString()),me.push({coin_address:re((Oe=x==null?void 0:x.displayTokenA)==null?void 0:Oe.coin_type,!1),amount:u==null?void 0:u.displayFeeOwedA,amountUSD:l,token:x==null?void 0:x.displayTokenA},{coin_address:re((Fe=x==null?void 0:x.displayTokenB)==null?void 0:Fe.coin_type,!1),amount:u==null?void 0:u.displayFeeOwedB,amountUSD:W,token:x==null?void 0:x.displayTokenB})}if(((He=Object.values(ie))==null?void 0:He.length)>0){const u=ie[x==null?void 0:x.posId];(u==null?void 0:u.length)>0&&u.forEach(l=>{var W;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",l),je=z(je).plus(l.display_amount_owed||0).toString(),Number(l==null?void 0:l.display_amount_owed)>0){const M=S(l==null?void 0:l.token.coin_type,l.display_amount_owed);M!=="--"&&(G=z(G).plus(M).toString()),be.push({coin_address:re((W=l==null?void 0:l.token)==null?void 0:W.coin_type,!1),amount:l.display_amount_owed,amountUSD:M,token:l==null?void 0:l.token})}})}if(((Ue=Object.values(le))==null?void 0:Ue.length)>0){const u=le[x==null?void 0:x.id];(u==null?void 0:u.length)>0&&u.forEach(l=>{var W;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",l),ye=z(ye).plus(l.display_amount_owed||0).toString(),Number(l==null?void 0:l.display_amount_owed)>0){const M=S(l==null?void 0:l.token.coin_type,l.display_amount_owed);M!=="--"&&(Z=z(Z).plus(M).toString()),we.push({coin_address:re(((W=l==null?void 0:l.token)==null?void 0:W.coin_type)||"",!1),amount:l.display_amount_owed,amountUSD:M,token:l==null?void 0:l.token})}})}const Se=z(G).plus(Q).plus(Z).toString(),I=(z(he).gt(0)||z(je).gt(0)||z(ye).gt(0))&&Number(Se)==0?"--":Se;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Se,I),h=z(h).plus(G).plus(Q).plus(Z).toString(),Number(I)!==0&&w.push(x),_&&Number(I)>Number(N)&&t.push({...x,totalRewardUsd:I,pendingRewarderList:be,pendingFeesList:me,pendingFarmsList:we,rewarderUsd:G,feeOwedUsd:Q,farmsUsd:Z}),_||t.push({...x,totalRewardUsd:I,pendingRewarderList:be,pendingFeesList:me,pendingFarmsList:we,rewarderUsd:G,feeOwedUsd:Q,farmsUsd:Z})}),X(w);const P=t.filter(x=>Number(x.totalRewardUsd)!==0);V(P),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",P,R),_?(P==null?void 0:P.length)!==t.length?O(""):O("all"):(P==null?void 0:P.length)!==w.length?O(""):O("all");const H=t.sort((x,ze)=>ze.totalRewardUsd-x.totalRewardUsd);n(H),T(!1)}},[N,J,_,ce,pe,ge,ue,c]);const{calculatePendingYield:as}=Xe();f.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",R),(R==null?void 0:R.length)>0){const{total:t,rewardAndFeeList:h}=as(R,ae,ie,le);console.log("ðŸš€ ~ useEffect ~ total:",R,t,h),Pe(t),Ae(h)}else Pe(""),Ae([])},[R==null?void 0:R.length,ae,ie,le]);const is=t=>{if(console.log("ðŸš€ ~ selectItem ~ item:",t),Number(t==null?void 0:t.totalRewardUsd)<=0)return;const h=R,w=(h==null?void 0:h.filter(P=>(P==null?void 0:P.posId)!==(t==null?void 0:t.posId)))||[];h!=null&&h.some(P=>(P==null?void 0:P.posId)===(t==null?void 0:t.posId))||w.push(t),console.log("ðŸš€ ~ selectItem ~ updatedList:",w),V(w),_?(w==null?void 0:w.length)!==(p==null?void 0:p.length)?O(""):O("all"):(w==null?void 0:w.length)!==(B==null?void 0:B.length)?O(""):O("all")};f.useEffect(()=>{F(.01),o(!1),E(!0)},[s]);const ls=()=>{if(q=="all")O(""),V([]);else{O("all");const t=R,h=Object.fromEntries(R.map(w=>[w==null?void 0:w.posId,w]));p.forEach(w=>{!h[w==null?void 0:w.posId]&&Number(w.totalRewardUsd)!==0&&t.push(w)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",h,t),V(t)}},{fetchAccountBalance:rs}=As(),os=async()=>{j(!0);try{const t=Object.fromEntries(R.map(H=>[H==null?void 0:H.posId,H==null?void 0:H.pendingRewarderList])),{tx:h,txb:w}=await C(R,t,m==null?void 0:m.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",h);const P=await b(w,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});if(console.log("ðŸš€ ~ toClaimYield ~ res:",P),P){rs();const H=await g(m==null?void 0:m.address);v(H)}j(!1)}catch(t){j(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",t)}finally{d()}},{isApp:ds}=oe();return e.jsxs(xs,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:d,isCentered:!0,children:[e.jsx(cs,{}),e.jsxs(ps,{minWidth:ds?"300px":"446px",children:[e.jsx(gs,{children:e.jsx(us,{fontWeight:"500",fontSize:"16px",children:y?"Claim Yield":"Details"})}),e.jsx(hs,{}),e.jsx(js,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(ee,{children:[e.jsxs(k,{w:"100%",children:[e.jsx(ee,{w:"100%",p:"0 16px",children:e.jsx(k,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(te,{isLoaded:!ts,children:e.jsxs(k,{gap:"4px",align:"center",children:[e.jsx(a,{color:"primary_gray",children:y?"Total Claim":"Pending Yield"}),e.jsx(a,{color:"primary",fontSize:"20px",fontWeight:"500",children:L(y?xe:es,2)})]})})})}),!y&&e.jsxs(r,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(a,{color:"text_caption",children:"Position"}),e.jsxs(r,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(fe,{isChecked:_,onChange:()=>E(!_)}),e.jsx(a,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(U,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(ys,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${N}`,onChange:ss,onBlur:ns})})]})]}),e.jsx(k,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(p==null?void 0:p.length)>2?"16px":"20px",mr:"-4px",children:y?$==null?void 0:$.map(t=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",t),e.jsx(U,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(r,{w:"100%",justify:"space-between",children:[e.jsx(ne,{token:t==null?void 0:t.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(k,{align:"flex-end",gap:"4px",children:[e.jsx(a,{color:"text_caption",children:se(t==null?void 0:t.amount,6)}),e.jsxs(a,{children:["(",L(t==null?void 0:t.amountUSD,2),")"]})]})]})},t==null?void 0:t.coin_address))):(p==null?void 0:p.length)>0?p==null?void 0:p.map(t=>e.jsx(Qe,{posInfo:t,onClickCheckBox:h=>is(h),pageFrom:"pendingYieldModal",cursor:Number(t==null?void 0:t.totalRewardUsd)<=0?"not-allowed":"pointer",checked:R.some(h=>(h==null?void 0:h.posId)===(t==null?void 0:t.posId))},t==null?void 0:t.posId)):A?[{},{}].map((t,h)=>e.jsx(Ie,{},h)):e.jsx(ve,{type:"nodata"})}),y?e.jsx(r,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(U,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>o(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(r,{justify:"center",gap:"4px",children:[e.jsx(K,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(a,{children:"Back"})]})})}):e.jsx(ee,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(r,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(k,{gap:"4px",align:"flex-start",children:[e.jsx(a,{color:"primary_gray",children:"Amount selected"}),e.jsx(a,{color:"primary",fontSize:"18px",fontWeight:"500",children:L(xe,2)})]}),e.jsxs(r,{children:[e.jsx(a,{color:"text_caption",children:"Select All"}),e.jsx(Re,{checked:q=="all",onClick:ls})]})]})})]}),y?e.jsx(Y,{isLoading:i,disabled:($==null?void 0:$.length)==0||i,w:"100%",h:"52px",fontWeight:"500",onClick:os,children:"Confirm"}):e.jsx(Y,{disabled:Number(xe)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>o(!0),children:"Claim Yield"})]})})]})]})}const _e=({yieldList:s})=>{const[i,d]=f.useState(!1),{myPosYieldValue:j}=D(),{isApp:y}=oe();return e.jsx(k,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:y?()=>d(!i):()=>d(!1),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs(Ye,{isLazy:!0,isOpen:i,placement:"bottom-end",children:[e.jsx(Ve,{children:e.jsx(qe,{as:"button",children:e.jsx(a,{cursor:Number(j)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(j)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:L(j,2)})})}),i&&Number(j)>0&&(s==null?void 0:s.length)>0&&e.jsx($e,{children:e.jsx(Ge,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(Ze,{p:"0px",children:e.jsx(k,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(o=>{var c;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",o),e.jsxs(r,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(ne,{token:o==null?void 0:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(r,{gap:"4px",children:[e.jsx(a,{fontSize:"12px",color:"text_caption",children:se(o==null?void 0:o.amount,6)}),e.jsxs(a,{fontSize:"12px",children:["(",L(o==null?void 0:o.amountUSD,2),")"]})]})]},(c=o==null?void 0:o.token)==null?void 0:c.coin_type)})})})})})]})})};function nn({isProfile:s=!1}){const{currentAccount:i}=de(),[d,j]=f.useState(!1),[y,o]=f.useState(!1),[c,v]=f.useState([]);Ce();const{coinPriceObj:g}=Te(),{myPosYieldValue:b,setMyPosYieldValue:m,posFeeDataLoading:C,posRewardsDataLoading:S,farmsPosRewardsDataLoading:p,posBaseList:n,posLiquidityData:A,posBaseListLoading:T,posLiquidityDataLoading:_,posFeeData:E,posRewardsData:N,farmsPosRewardsData:F}=D(),{clmmTotalTvl:B}=Os();i!=null&&i.address;const{calculatePendingYield:X}=Xe();f.useEffect(()=>{if(!(i!=null&&i.address))m(""),v([]);else if(!T&&(n==null?void 0:n.length)<=0&&(m("0"),v([])),(n==null?void 0:n.length)>0&&(i!=null&&i.address)&&!T&&!C&&!S&&!p){const{total:q,rewardAndFeeList:O}=X(n,E,N,F);m(q),v(O)}},[n,T,C,S,p,i,g]);const R=i!=null&&i.address?!b:!1,{isApp:V}=oe();return e.jsxs(Ke,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(r,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Ls,backgroundSize:"100% 100%",children:[e.jsx(a,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(te,{isLoaded:!!B,children:s?e.jsx(Me,{size:"l",children:e.jsx(a,{fontSize:"20px",color:"primary",children:"$"+B=="--"?"--":L(B,2)})}):e.jsx(a,{fontSize:"20px",color:"primary",children:"$"+B=="--"?"--":L(B,2)})})]}),e.jsxs(r,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Ns,backgroundSize:"100% 100%",children:[e.jsx(a,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(te,{isLoaded:!R,children:V?e.jsxs(r,{gap:"20px",children:[e.jsxs(k,{align:"flex-end",children:[e.jsx(_e,{yieldList:c}),e.jsx(Y,{isLoading:d,disabled:Number(b)<=0||d,w:"100px",h:"24px",onClick:()=>o(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(b)>0&&e.jsx(K,{xlinkHref:"#icon-icon_spread",onClick:()=>o(!0)})]}):e.jsxs(r,{onClick:()=>o(!0),children:[s?e.jsx(Me,{size:"l",children:e.jsx(_e,{yieldList:c})}):e.jsx(_e,{yieldList:c}),Number(b)>0&&e.jsx(K,{xlinkHref:"#icon-icon_spread"}),e.jsx(Y,{isLoading:d,disabled:Number(b)<=0||d,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(Fs,{isOpen:y,claimLoading:d,onClose:()=>o(!1),changeClaimLoading:q=>j(q)})]})}function tn({poolInfo:s,isProfile:i=!1}){var b,m,C,S,p,n;const d=bs(),{posPoolsRelatedData:j,posApiPoolData:y}=D(),o=(b=y[s==null?void 0:s.clmmPoolAddress])==null?void 0:b.haveFarming,c=(((C=j[(m=s==null?void 0:s.list[0])==null?void 0:m.posId])==null?void 0:C.displayFee)||"--")+"%",[v,g]=f.useState(!0);return e.jsxs(k,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(Ke,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>g(!v),children:[e.jsx(Je,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:c,...s},haveName:!0}),e.jsxs(r,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(r,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(a,{color:"primary_gray",children:"Current Price"}),e.jsx(fs,{symbolEllipsesDecimals:10,posId:(S=s==null?void 0:s.list[0])==null?void 0:S.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),o&&e.jsxs(r,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:A=>{ke(A),d("/farms")},border:"1px solid",borderColor:"transparent",cursor:"pointer",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(a,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(K,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(r,{w:{base:"100%",lg:"unset"},children:[e.jsx(Y,{onClick:A=>{ke(A),d(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(U,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(r,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(a,{fontSize:"12px",color:"primary",children:[(p=s==null?void 0:s.list)==null?void 0:p.length," ",((n=s==null?void 0:s.list)==null?void 0:n.length)>1?"Positions":"Position"]}),e.jsx(K,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:v?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),v&&e.jsx(k,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((A,T)=>e.jsx(Ss,{positionInfo:A,isProfile:i},T))})]})}export{sn as L,Qe as M,en as P,nn as a,tn as b,Os as u};
//# sourceMappingURL=PoolItem-ZKtV2SHs.js.map
