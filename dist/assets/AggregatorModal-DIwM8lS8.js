const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SourceGrid-Dzf-LZyR.js","assets/vendor-BFGDaAdA.js","assets/useSwapHelper-BUyTnJPg.js","assets/useToken-D3gZx9-B.js","assets/index-kSv1GEZK.js","assets/index-Cvpv83QD.css","assets/global-TqpROtN0.js","assets/useGetPoolList-CK7rGDcp.js","assets/useWrapPoolData-DlhDhx9m.js","assets/CheckBox-D0CgMrTC.js","assets/aggregator-fNKnkSx0.js","assets/index-CIie8YWe.js","assets/TooltipIcon-BqjAFCHw.js","assets/FreshProgressV2-VhYu_mZQ.js"])))=>i.map(i=>d[i]);
import{bI as K,a9 as Q,Y as N,I as W,Z as ee,_ as se}from"./index-kSv1GEZK.js";import{a as i,j as e,aq as re,W as G,X as V,Y as B,Z as J,$ as te,a0 as U,H as b,T as j,a5 as Y,q as _,V as T,a6 as ne,af as oe,ag as le,ah as ae,p as ie}from"./vendor-BFGDaAdA.js";import{A as ce,a as de}from"./aggregator-fNKnkSx0.js";import{u as ue}from"./index-CIie8YWe.js";import{a as g}from"./useSwapHelper-BUyTnJPg.js";import{T as xe}from"./TooltipIcon-BqjAFCHw.js";import{u as he,a as fe}from"./FreshProgressV2-VhYu_mZQ.js";function pe(a,o){return K(a,o)}var ge=function(a,o){var t=he(a),r=i.useRef(null),d=i.useCallback(function(){r.current&&clearTimeout(r.current)},[]);return i.useEffect(function(){if(!(!fe(o)||o<0))return r.current=setTimeout(t,o),d},[o]),d};const z=a=>a.reduce((o,t)=>o+(t!=null&&t.subItems?t.subItems.length:1),0),R=(a,o)=>a.reduce((t,r)=>r!=null&&r.subItems?t+r.subItems.reduce((d,u)=>d+(o[u.id]?1:0),0):t+(o[r.id]?1:0),0),M=[g.HAWAL,g.STEAMM_OMM_V2],je=[{parent:g.HAEDAL,child:g.HAWAL},{parent:g.STEAMM_OMM,child:g.STEAMM_OMM_V2}];function Se(){const{providersSwitchStates:a,setProvidersSwitchStates:o}=ue(),{providers:t}=Q(),[r,d]=i.useState({...a}),[u,y]=i.useState([]),[x,m]=i.useState([]);N(()=>{d({...a})},[a]),N(()=>{const n={},s=[],l=[],H={};t.filter(p=>!M.includes(p)).forEach(p=>{const c=ce[p];if(c){const v=a[c.id];v===void 0?H[c.id]=!0:H[c.id]=v;const k=E(p);if(k){const I=n[k.groupName]||[];I.push(c),n[k.groupName]=I}else c.type==="dex"?l.push(c):s.push(c)}});for(const[p,c]of Object.entries(n))if(c.length>0){const v=c[0],k={...v,id:v.groupId,name:p,subItems:c.sort((I,X)=>X.sort-I.sort)};v.type==="dex"?l.push(k):s.push(k)}s.sort((p,c)=>c.sort-p.sort),l.sort((p,c)=>c.sort-p.sort),y([...s]),m([...l]),o(H)},[t]);const E=n=>de.find(s=>s.items.includes(n)),O=n=>{if(n){const s={};t.forEach(l=>s[l]=!0),M.forEach(l=>{t.includes(l)&&(s[l]=!0)}),d(s)}else{const s={};t.forEach(l=>s[l]=!1),M.forEach(l=>{t.includes(l)&&(s[l]=!1)}),d({...s,[g.CETUS]:!0})}},P=n=>{n?x.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=!0}):r[s.id]=!0}):x.forEach(s=>{s.id===g.CETUS?r[s.id]=!0:s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=!1}):r[s.id]=!1}),d({...r})},D=n=>{u.forEach(s=>{s!=null&&s.subItems?s.subItems.forEach(l=>{r[l.id]=n}):r[s.id]=n}),M.forEach(s=>{t.includes(s)&&(r[s]=n)}),d({...r})},C=(n,s)=>{r[n]=s,je.forEach(l=>{n===l.parent&&t.includes(l.child)&&(r[l.child]=s)}),d({...r})},A=i.useMemo(()=>x.every(n=>n!=null&&n.subItems?n.subItems.every(s=>r[s.id]):r[n.id]),[JSON.stringify(x),JSON.stringify(r)]),S=i.useMemo(()=>u.every(n=>n!=null&&n.subItems?n.subItems.every(s=>r[s.id]):r[n.id]),[JSON.stringify(u),JSON.stringify(r)]),L=i.useMemo(()=>A&&S,[A,S]),h=i.useMemo(()=>(t==null?void 0:t.filter(n=>n!==g.CETUS&&!!r[n]).length)>=1,[r,t]),f=()=>{o({...r})},w=i.useMemo(()=>{var n;return(n=t==null?void 0:t.filter(s=>!M.includes(s)))==null?void 0:n.length},[t==null?void 0:t.length]),Z=i.useMemo(()=>({checked:R(x,r),total:z(x)}),[x,r]),$=i.useMemo(()=>({checked:R(u,r),total:z(u)}),[u,r]);return{handleSelectAllProviderClick:O,handleSelectAllDexProviderClick:P,handleSelectAllOtherProviderClick:D,handleProviderClick:C,selectAllProviders:L,selectAllDexProviders:A,otherProviderList:u,selectAllOtherProviders:S,dexProviderList:x,currProvidersSwitchStates:r,providersSwitchStates:a,isOpenAggregatorMode:h,handleSaveClick:f,allSourceNum:w,dexSourceNumMap:Z,otherSourceNumMap:$}}function ve(a){const[o,t]=i.useState(!1),r=ge(()=>{t(!0)},300);return i.useEffect(()=>()=>r(),[]),e.jsx(re,{sx:{".chakra-switch__track":{p:"0px",transitionDuration:o?"var(--chakra-transition-duration-fast) !important":"0s"},".chakra-switch__thumb":{transitionDuration:o?"var(--chakra-transition-duration-normal) !important":"0s"}},...a})}function ke({isOpen:a,onOk:o,onClose:t}){return e.jsxs(G,{autoFocus:!1,returnFocusOnClose:!1,isOpen:a,onClose:t,isCentered:!0,children:[e.jsx(V,{}),e.jsxs(B,{children:[e.jsx(J,{children:"Tips"}),e.jsx(te,{}),e.jsx(U,{children:e.jsxs(b,{children:[e.jsx(W,{xlinkHref:"#icon-icon_tips",svgHover:"text_paragraph",cursor:"default"}),e.jsx(j,{color:"text_caption",children:"Do you want to save your changes?"})]})}),e.jsxs(Y,{gap:"16px",children:[e.jsx(_,{flex:"1",onClick:o,h:"40px",borderRadius:"8px",children:"Confirm"}),e.jsx(_,{flex:"1",variant:"outline",h:"40px",borderRadius:"8px",onClick:t,children:"No"})]})]})]})}function be({num:a,total:o}){return e.jsxs(b,{h:"16px",lineHeight:"16px",p:"2px 8px",borderRadius:"8px",bg:"aggregator_switch",gap:"0px",children:[e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"primary",children:[a,"Â "]}),o!==void 0&&e.jsxs(j,{as:"div",display:"inline-block",fontSize:"10px",h:"10px",lineHeight:"10px",color:"text_paragraph",children:["/ ",o]})]})}const q=i.lazy(()=>se(()=>import("./SourceGrid-Dzf-LZyR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Ce=({isOpen:a,onClose:o})=>{const[t,r]=i.useState(!1),{handleSelectAllProviderClick:d,handleSelectAllDexProviderClick:u,handleSelectAllOtherProviderClick:y,handleProviderClick:x,selectAllProviders:m,selectAllDexProviders:E,otherProviderList:O,selectAllOtherProviders:P,dexProviderList:D,currProvidersSwitchStates:C,providersSwitchStates:A,handleSaveClick:S,allSourceNum:L,dexSourceNumMap:h,otherSourceNumMap:f}=Se(),w=()=>{pe(A,C)?o():r(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(G,{autoFocus:!1,returnFocusOnClose:!1,isOpen:a,onClose:w,isCentered:!0,children:[e.jsx(V,{}),e.jsxs(B,{bg:"background",w:{base:"calc(100vw - 16px)",lg:"540px"},maxW:"unset",children:[e.jsx(J,{children:e.jsxs(b,{w:"100%",justify:"space-between",children:[e.jsx(j,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Aggregator Settings"}),e.jsx(W,{xlinkHref:"#icon-icon_close",onClick:w})]})}),e.jsx(U,{children:e.jsxs(T,{w:"100%",gap:"24px",children:[e.jsxs(b,{w:"100%",justify:"space-between",align:"flex-end",children:[e.jsxs(T,{w:"100%",gap:"8px",align:"flex-start",children:[e.jsxs(b,{gap:"4px",children:[e.jsx(j,{fontSize:"16px",color:"text_caption",fontWeight:"500",children:"Liquidity Sources"}),e.jsx(xe,{type:"liquiditySources"})]}),e.jsx(j,{lineHeight:{base:"12px",lg:"16px"},fontSize:{base:"12px",lg:"16px"},children:"Disable/Enable Liquidity Sources"})]}),e.jsxs(T,{align:"flex-end",flex:"0 0 108px",children:[e.jsx(j,{children:"Select all"}),e.jsxs(b,{justifyContent:"flex-end",h:"16px",gap:"4px",children:[e.jsx(be,{num:ee((h==null?void 0:h.checked)||0).plus((f==null?void 0:f.checked)||0).toNumber(),total:L}),e.jsx(ve,{id:"select-all",isChecked:!!m,onChange:()=>d(!m)})]})]})]}),e.jsxs(ne,{flexDir:"column",w:"100%",p:"0",gap:"20px",align:"flex-start",maxH:{base:"calc(100vh - 280px)",lg:"600px"},overflow:"hidden",children:[e.jsx(i.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(q,{title:"Dex",isAllChecked:E,onAllSelect:()=>u(!E),onItemSelect:x,list:D,checkedMap:C,totalNum:h==null?void 0:h.total,checkedNum:h==null?void 0:h.checked})}),e.jsx(oe,{orientation:"horizontal"}),e.jsx(i.Suspense,{fallback:e.jsx(F,{}),children:e.jsx(q,{title:"Other",isAllChecked:P,onAllSelect:()=>y(!P),onItemSelect:x,list:O,checkedMap:C,totalNum:f==null?void 0:f.total,checkedNum:f==null?void 0:f.checked})})]})]})}),e.jsxs(Y,{gap:"16px",p:"8px 16px 16px",children:[e.jsx(_,{flex:"1",variant:"outline",p:"0 15px",onClick:o,children:"Cancel"}),e.jsx(_,{flex:"1",onClick:()=>{S(),o()},children:"Save"})]})]})]}),t&&e.jsx(ke,{isOpen:t,onClose:()=>{r(!1),o()},onOk:()=>{S(),r(!1),o()}})]})};function F(){return e.jsx(le,{w:"100%",templateColumns:{base:"repeat(2, 1fr)",lg:"repeat(3, 1fr)"},maxH:{base:"unset",lg:"152px"},overflow:"scroll",gap:"8px",children:[1,2,3,4,5,6,7,8,9].map(a=>e.jsx(ae,{children:e.jsx(ie,{w:"100%",h:"36px"})},a))})}const ye=i.memo(Ce);export{ye as A,be as N,ve as a,Se as u};
//# sourceMappingURL=AggregatorModal-DIwM8lS8.js.map
