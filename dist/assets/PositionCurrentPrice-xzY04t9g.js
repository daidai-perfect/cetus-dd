import{r as d,G as C,d as x,X as D,I as O,K as Y}from"./index-BNC9dWjK.js";import{a as F,j as f,H as E,p as H,T as j}from"./vendor-BowHGuwE.js";import{u as L}from"./usePositionList-t7kEDTMX.js";function V(){const{getTokenAmountValue:b}=d(),o=(r,c,u,t)=>{if(!(r!=null&&r.length))return{total:"0",rewardAndFeeList:[]};let s="0";const S=[];r.forEach(n=>{const g=c[n==null?void 0:n.posId],I=u[n==null?void 0:n.posId]||[],N=t?t[n==null?void 0:n.id]:[],P=I.concat(N);if(g){const e=m(n==null?void 0:n.displayTokenA,g==null?void 0:g.displayFeeOwedA),a=m(n==null?void 0:n.displayTokenB,g==null?void 0:g.displayFeeOwedB);e&&S.push(e),a&&S.push(a),s=h(s,e==null?void 0:e.amountUSD,a==null?void 0:a.amountUSD)}P.forEach(e=>{var a;if(Number(e==null?void 0:e.display_amount_owed)>0){const U=m(e==null?void 0:e.token,e==null?void 0:e.display_amount_owed,(a=e==null?void 0:e.token)==null?void 0:a.coin_type);U&&(S.push(U),s=h(s,U==null?void 0:U.amountUSD))}})});const l=_(S);return console.log("ðŸš€ ~ calculatePendingYield ~  total,:",l,s,l.length==1&&(s=="--"||Number(s)==0)),{total:(l==null?void 0:l.length)>0&&Number(s)==0?"--":s,rewardAndFeeList:l}},m=(r,c,u)=>{if(!r||!c)return null;const t=u||r.coin_type;if(!t)return null;const s=b(t,c);return{coin_address:C(t,!1),amount:c,amountUSD:x(c).gt(0)&&x(s).lte(0)?"--":s,token:r}},h=(r,...c)=>{console.log("ðŸš€ ~ useCalculatePendingYield ~ amounts:",c);let u=x(r);return c.forEach(t=>{t&&t!=="--"&&u!=="--"&&(u=u.plus(t))}),u.toString()},_=r=>{const c={};return r.forEach(u=>{var l,n;const{coin_address:t,amount:s,amountUSD:S}=u;c[t]||(c[t]={...u,amount:"0",amountUSD:"0"}),S=="--"?c[t].amountUSD="--":c[t].amountUSD=c[t].amountUSD=="--"?"--":x((l=c[t])==null?void 0:l.amountUSD).plus(S||0).toString(),c[t].amount=x((n=c[t])==null?void 0:n.amount).plus(s||0).toString()}),Object.values(c).filter(u=>Number(u.amount)>0).sort((u,t)=>x(t.amountUSD=="--"?0:t.amountUSD).minus(u.amountUSD=="--"?0:u.amountUSD).toNumber())};return{calculatePendingYield:o}}function X({posId:b,displayTokenA:o,displayTokenB:m,symbolEllipsesDecimals:h=10,handleDirect:_}){const[r,c]=F.useState(!0),{posPoolsRelatedData:u}=L(),t=u[b];return f.jsxs(E,{children:[f.jsx(H,{isLoaded:!!(t!=null&&t.currentPrice),children:f.jsx(j,{color:"text_caption",children:r?t==null?void 0:t.currentPrice:t==null?void 0:t.currentPriceReverse})}),f.jsxs(E,{gap:"0",children:[f.jsx(j,{color:"primary_gray",children:D(r?m==null?void 0:m.symbol:o==null?void 0:o.symbol,h)}),f.jsx(j,{color:"primary_gray",children:"Â perÂ "}),f.jsx(j,{color:"primary_gray",children:D(r?o==null?void 0:o.symbol:m==null?void 0:m.symbol,h)})]}),f.jsx(O,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:s=>{Y(s),c(!r),_&&_()}})]})}export{X as P,V as u};
//# sourceMappingURL=PositionCurrentPrice-xzY04t9g.js.map
