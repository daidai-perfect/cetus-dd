import{u as F}from"./usePosAdd-D0ti9xh9.js";import{g as b}from"./liquidity-Coufv2Ba.js";import{u as W,b as k}from"./useGetPoolList-sKGYxkhS.js";import{d as C}from"./FeeTierSelect-hpxQJsTW.js";import{l as $,a8 as _,d as c,a4 as H,$ as N,a0 as M}from"./index-CJa1Q5Eu.js";import{a as B}from"./vendor-BFGDaAdA.js";function Z(){const s=$("clmm"),{preAdd:m}=F(),{getPoolList:a}=W();return{preAddPool:r=>{const{tickSpacing:i,price:u,minPrice:o,maxPrice:d,amount:p,amountCoinType:e,realTokenA:t,realTokenB:n,needReverse:g}=r,f=_.priceToSqrtPriceX64(c(u),t.decimals,n.decimals).toString(),P=_.priceToTickIndex(c(u),t.decimals,n.decimals).toString(),A=t.decimals,x=n.decimals;let y,T;if(o==="0"&&d==="âˆž")y=M.getMinIndex(i),T=M.getMaxIndex(i);else{const L=g?k(d):o,q=g?k(o):d,R=_.priceToTickIndex(c(L),t.decimals,n.decimals).toString();console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:103 ~ useCreatePoolHelper ~ realMintTick:",R),y=H(_.priceToTickIndex(c(L),A,x),i),T=H(_.priceToTickIndex(c(q),A,x),i)}console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:87 ~ useCreatePoolHelper ~ params:",{...r,currentSqrtPrice:f,lowerTick:y,upperTick:T,currTick:P});const h=e===(t==null?void 0:t.coin_type),I=N(p,h?A:x).toString(),w=m({amount:I,tokenA:t,tokenB:n,isTokenA:h,lowerTick:y,upperTick:T,curSqrtPrice:f,isReverse:g,roundUp:!0});return console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:128 ~ useCreatePoolHelper ~ res:",w),console.log("ðŸš€ -----------------------------------------------------------------------ðŸš€"),{...w,currentSqrtPrice:f,fixAmountA:h,lowerTick:y,upperTick:T,tickSpacing:i,coinTypeA:t.coin_type,coinTypeB:n.coin_type}},fetchFeeTierList:async(r,i)=>{var u;try{if(r&&i){const o=await a({coin_type:`${r},${i}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(o&&o.list&&o.list.length>0){const d=b(o.list);return(u=C)==null?void 0:u.map(p=>{const e=d.find(t=>t.feeRate===p.feeRate);return{...p,title:(e==null?void 0:e.title)||p.title,poolAddress:e==null?void 0:e.poolAddress,liquidity:e==null?void 0:e.liquidity,tvl:e==null?void 0:e.tvl}})}else return[...C]}}catch(o){console.log("ðŸš€ ~ fetchFeeTierList ~ fetchFeeTierList:",o)}return[...C]},getCreatePoolTxPayload:async r=>{console.log("ðŸš€ ~ file: useCreatePoolHelper.ts:140 ~ getCreatePoolTxPayload ~ params:",r);const{tickSpacing:i,currentSqrtPrice:u,fixAmountA:o,coinAmountAOrigin:d,coinAmountBOrigin:p,lowerTick:e,upperTick:t,coinTypeA:n,coinTypeB:g}=r,f=await s.FullClient.getCoinMetadata({coinType:n}),P=await s.FullClient.getCoinMetadata({coinType:g});return await s.Pool.createPoolPayload({tick_spacing:i,initialize_sqrt_price:u,uri:"",fix_amount_a:o,amount_a:d,amount_b:p,tick_lower:e,tick_upper:t,coin_type_a:n,coin_type_b:g,metadata_a:f==null?void 0:f.id,metadata_b:P==null?void 0:P.id})}}}function j(s,m,a,l){const v=B.useMemo(()=>{if(s)return!1;try{if(m!==void 0&&a!==void 0&&l!==void 0)return c(m).lt(a)||c(m).gt(l)}catch{}return!1},[l,m,a,s]),S=B.useMemo(()=>{if(s)return!1;try{if(a!==void 0&&l!==void 0)return c(a).gt(l)}catch{}return!1},[l,a,s]);return{showInputPriceWarn:v,showPriceRangeWarn:S}}export{Z as a,j as u};
//# sourceMappingURL=useCreatePoolHelper-Ct3QuKu2.js.map
