import{a as u,j as e,H as A,T as h,V as B,f as N,aa as Ve,v as M,X as Ne,Y as Ge,Z as qe,$ as Ke,a0 as Ye,a1 as Qe,C as se,D as dt,u as ee,N as ut,O as pt,Q as xt,ar as ze,ab as Ie,ag as Le,F as gt,I as ht}from"./vendor-DXHkIl66.js";import{i as he,e as Ze,q as He,d as z,aU as ge,I as K,B as G,v as V,c as Pe,a as Y,F as De,G as ft,j as U,O as fe,z as Z,R as Je,n as re,M as J,p as mt,X as jt,f as et,w as X,m as Oe,as as Q,aV as bt,ar as tt,am as wt,k as me,aW as Ct,aX as Ue,Q as xe,V as st,aR as yt,al as _t,aI as _e,a0 as St,aY as Me,aZ as Xe}from"./index-z4pUiXVL.js";import{u as nt,D as ot,g as Tt,e as vt,f as kt,W as Lt,b as Pt,R as Rt,a as Dt,d as Ot}from"./OverviewOrders-Dwq_Mn35.js";import{I as Se}from"./IconText-DmqkApAu.js";import{u as At}from"./RangeValue-B5QGeZFs.js";import{N as te}from"./NoData-CqJO7NcS.js";import{H as q}from"./HTextLabelBox-D0TrMTJ-.js";import{u as I}from"./activeOrders-H0okax2Y.js";import{H as Ae,T as je}from"./Table-DbCeB99N.js";import{P as be}from"./Pagination-B1jUZeSS.js";import{b as Et,u as le,c as Bt,C as Ft,P as zt,F as Ht,E as Ut,S as Mt,O as Xt,a as $t}from"./useGetLimitOrderHistory-CDP8a0aF.js";import{u as Wt}from"./useRpcListener-D1nX8aLH.js";import{u as Vt}from"./global-BdG6Ba89.js";import{R as Nt}from"./RefreshButton-CJmC-Yhv.js";import{A as Gt,R as qt}from"./RecentTransactions-Bl6s3Pfq.js";import{a as oe,d as Kt,u as it,e as Yt,f as Qt,g as It,c as Zt,b as Jt}from"./usePositionList-B_ysosd0.js";import{P as es,a as ts,b as ss,u as ns}from"./PoolItem-q6bFa-lC.js";import{P as os,u as is}from"./PositionListLoading-B4njbSou.js";import{u as as}from"./useAccountBalance-Bj6kHpBe.js";import{u as at}from"./useToken-AKkGKeik.js";import{f as Ee,X as rs,a as ls,b as cs,u as ds,c as us,E as ps,C as xs,e as gs,d as hs,g as fs}from"./useXCetus-OuwNBVrn.js";import{S as ms}from"./SingleTokenInfo-BwCztUxM.js";import{S as js}from"./SortDropBlock-CPCXFPrv.js";import{T as Te}from"./TableSortTh-CHEbSqGX.js";import{u as bs}from"./useTokenBalance-HeugYKlV.js";import{X as ws,a as Cs,b as ys,c as _s,u as Ss}from"./useXCetusHelper-wRFDNkyC.js";import"./useTransaction-Djn-I0bO.js";import"./useTrack-D6wG9wqq.js";import"./useSigner-ChLOfT6R.js";import"./ErrorTips-DduTlMG8.js";import"./usePreviousValue-BBpD8e7r.js";import"./CopyButton-CZFl6Fvu.js";import"./useFavoritePool-oaa3ZXSX.js";import"./useGetPoolList-DZOzZEqD.js";import"./useWrapPoolData-DygVSJRO.js";import"./CheckBox-M5fL4yxU.js";import"./SearchInputBlock-DEXI3GYI.js";import"./index-CbQTLf0S.js";import"./Loading-BH2b7hW0.js";import"./TooltipIcon-DCQFSMw9.js";import"./PositionCurrentPrice-CeSH-OoG.js";import"./useBurn-BkHUYw5m.js";import"./msafe-oYBkW7LJ.js";import"./CoinPairInfo-Dg3xdPZ0.js";import"./PoweredByHaedal-990R--7x.js";import"./PriceRange-Dkajk6iZ.js";import"./PositionStatus-Dknu-0uP.js";import"./detail-DtzavPik.js";import"./TradeInputGroup-DpUDZe3I.js";import"./_getAllKeysIn-wUTYc5Eb.js";import"./HighlightText-BLaAjUt8.js";import"./index-CptRizr3.js";import"./debounce-BgSgg6I6.js";import"./index-DKPh1ief.js";function Ts(t=100){const n=u.useRef([]),s=u.useRef(!1),a=u.useRef(void 0),l=u.useCallback(async()=>{if(!s.current){for(s.current=!0;n.current.length>0;){const r=n.current.shift();if(!r)continue;const{id:c,run:p,onStart:f,onSuccess:j,onError:b}=r;if(r._cancelled){console.log(`[task:${r.id}] skipped (cancelled)`);continue}try{console.log(`[task:${c}] start`),f==null||f(c);const d=await p(a.current,c);a.current=d,console.log(`[task:${c}] success`,d),j==null||j(d,c)}catch(d){console.error(`[task:${c}] failed`,d),b==null||b(d,c)}await new Promise(d=>setTimeout(d,t))}s.current=!1}},[t]),i=r=>{n.current.push(r),l()},o=r=>{const c=n.current.find(p=>p.id===r);c&&(c._cancelled=!0),n.current=n.current.filter(p=>p.id!==r)};return u.useEffect(()=>()=>{n.current=[],s.current=!1,a.current=void 0},[]),{addTask:i,removeTask:o}}function we(t){const{type:n,children:s,wrapStyle:a={h:"60px"},textStyle:l={fontSize:"16px"}}=t,i=(o,r)=>"title"in t?!1:t!=null&&t.isActive?t==null?void 0:t.isActive(o,r):o===r.value;return e.jsxs(A,{justify:"space-between",w:"100%",h:"60px",...a,children:["title"in t?e.jsx(h,{color:"text_caption",...l,children:t==null?void 0:t.title}):e.jsx(he,{type:"borderTab",tabList:t.tabs,currentTab:t.currentTab,handleChangeTab:t.onTabChange,isActive:(o,r)=>i(o,r),wrapStyle:{h:"60px",border:"none",gap:"38px",...a},itemStyle:l}),s]})}function vs({orderInfo:t,isActiveOrder:n,pageDirect:s}){const{inCoin:a,outCoin:l}=t,{orderHistoryList:i,handleGetDcaOrderHistory:o,orderHistoryListLoading:r}=nt();u.useEffect(()=>{t!=null&&t.orderID&&o(t==null?void 0:t.orderID,9999,0,!0)},[t==null?void 0:t.orderID]);const{getExplorerUrl:c}=Ze(),[p,f]=u.useState(s),j=142,b=(i==null?void 0:i.length)||0,d=(i==null?void 0:i.length)<=1?`${j*b-8}px`:`${j*b+(b-1)*32-8}px`;return e.jsxs(B,{align:"flex-start",w:"100%",gap:"32px",position:"relative",h:(i==null?void 0:i.length)>=3?"460px":"unset",overflowY:"auto",children:[!r&&e.jsx(N,{h:d,w:"1px",bg:"border",position:"absolute",left:"6px",top:"8px"}),r?e.jsx(A,{h:"100px",w:"100%",justify:"center",children:e.jsx(Ve,{})}):(i==null?void 0:i.length)===0?e.jsx(te,{type:"nodata",text:"No orders",p:"12px",bg:"none"}):i.map(C=>{const R=He(C.inAmount,a==null?void 0:a.decimals),D=He(C.outAmount,l==null?void 0:l.decimals),w=z(R).div(D).toString(),m=z(1).div(w).toString();return e.jsxs(B,{pl:"20px",align:"flex-start",w:"100%",children:[e.jsxs(A,{w:"100%",gap:"16px",justifyContent:"space-between",position:"relative",children:[e.jsxs(h,{h:"20px",lineHeight:"20px",children:[ge((C==null?void 0:C.time)*1e3)," (UTC)"]}),e.jsx(K,{xlinkHref:"#icon-icon_link1",onClick:()=>{window.open(c(C==null?void 0:C.tx,"tx"))}}),e.jsx(A,{justify:"center",h:"12px",w:"12px",bg:"primary_opacity.20",position:"absolute",left:"-20px",top:"4px",zIndex:"99999",borderRadius:"50%",children:e.jsx(N,{h:"6px",w:"6px",bg:"primary",borderRadius:"50%"})})]}),e.jsx(G,{p:"16px",borderRadius:"12px",children:e.jsxs(B,{align:"flex-start",gap:"20px",children:[e.jsxs(B,{gap:"0px",align:"flex-start",children:[e.jsx(h,{whiteSpace:"nowrap",color:"text_caption",fontSize:"16px",h:"20px",lineHeight:"20px",children:p?`${V(w)} `:`${V(m)} `}),e.jsxs(A,{children:[e.jsxs(h,{whiteSpace:"nowrap",h:"20px",fontSize:"12px",lineHeight:"20px",children:["Rate(",p?` ${a.symbol} per ${l.symbol}`:` ${l.symbol} per ${a.symbol}`,")"]}),e.jsx(K,{xlinkHref:"#icon-icon_swap1",svgW:"14px",svgH:"14px",ml:"-6px",onClick:()=>f(!p)})]})]}),e.jsxs(A,{w:"100%",gap:"4px",children:[e.jsx(Pe,{imageUrl:a==null?void 0:a.logo_url,w:"20px",h:"20px"}),e.jsx(h,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${V(R)}`}),e.jsx(h,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:` ${a.symbol}`}),e.jsx(h,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:" â†’ "}),e.jsx(Pe,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"}),e.jsx(h,{whiteSpace:"nowrap",color:"text_caption",h:"20px",lineHeight:"20px",children:`${V(D)}`}),e.jsx(h,{whiteSpace:"nowrap",h:"20px",lineHeight:"20px",children:`${l.symbol}`})]})]})})]},C==null?void 0:C.tx)})]})}function ks({orderInfo:t,isActiveOrder:n,pageDirect:s,isClaimLoading:a=!1,toClaim:l}){const{inCoin:i,outCoin:o}=t;return e.jsxs(B,{children:[(t==null?void 0:t.isShowTradeTips)&&(t==null?void 0:t.orderStatus)=="Active"&&n&&e.jsx(Ls,{}),e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(ot,{orderInfo:t}),n&&l&&e.jsx(M,{isLoading:a,onClick:()=>l(t),disabled:(t==null?void 0:t.outBalance)<=0||a,h:"32px",fontSize:"12px",borderRadius:"8px",lineHeight:"32px",p:"0 8px",fontWeight:"500",children:"Claim"})]}),e.jsx(h,{fontSize:"16px",color:"text_caption",children:Tt(t,n,!0)}),e.jsx(h,{fontSize:"12px",children:"Amount Withdrawn"}),e.jsxs(A,{w:"100%",justify:"space-around",children:[e.jsxs(B,{children:[e.jsx(h,{fontSize:"16px",color:"text_caption",children:vt(t)}),e.jsxs(h,{fontSize:"12px",children:["DCA ",i==null?void 0:i.symbol," Balance"]})]}),e.jsx(N,{as:"span",display:"inline-block",w:"1px",h:"20px",bg:"border"}),e.jsxs(B,{children:[e.jsx(h,{color:"text_caption",fontSize:"16px",children:kt(t)}),e.jsxs(h,{fontSize:"12px",children:["DCA ",o==null?void 0:o.symbol," Balance "]})]})]}),e.jsxs(B,{mt:"28px",w:"100%",gap:"20px",children:[e.jsx(q,{label:"Invest Every",value:t==null?void 0:t.investEvery}),e.jsx(q,{label:"Orders Left",value:t==null?void 0:t.ofOrderLeft}),e.jsx(q,{label:"Each Order Size",value:`${t==null?void 0:t.eachOrderSize} ${i==null?void 0:i.symbol}`}),n&&e.jsx(q,{label:"Current Avg. Price",value:s?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${o==null?void 0:o.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${o==null?void 0:o.symbol} per ${i==null?void 0:i.symbol}`}),!n&&(t==null?void 0:t.currentAvgPrice)!=="--"&&e.jsx(q,{label:"Avg. Price",value:s?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${o==null?void 0:o.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${o==null?void 0:o.symbol} per ${i==null?void 0:i.symbol}`}),n&&e.jsx(q,{label:"Next Order (UTC)",value:ge(t==null?void 0:t.nextCycleAtTimeStamp)||""}),e.jsx(q,{label:"Created (UTC)",value:ge(t==null?void 0:t.createdAt)||""})]})]})}const Ls=()=>{const[t,n]=u.useState(!1);return e.jsxs(B,{p:"12px",align:"flex-start",bg:"primary_yellow_opacity.10",borderRadius:"8px",children:[e.jsxs(A,{align:"center",w:"100%",cursor:"pointer",onClick:()=>n(!t),children:[e.jsx(h,{fontSize:"12px",color:"primary_yellow",lineHeight:"20px",textAlign:"left",children:"The system tried to execute your order multiple times but did not get it through. This is possibly because:"}),e.jsx(K,{transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.5s",svgW:"12px",svgH:"12px",variant:"warning",xlinkHref:"#icon-icon_arrow"})]}),t&&e.jsxs(B,{align:"flex-start",w:"100%",children:[e.jsx(N,{w:"100%",h:"1px",bg:"primary_yellow_opacity.10",m:"4px 0"}),e.jsx(Lt,{})]})]})};function Ps({isOpen:t,onClose:n,orderInfo:s,isActiveOrder:a,isClaimLoading:l=!1,toClaim:i}){const{isApp:o}=Y(),r=[{label:"Overview",value:"overview"},{label:"Orders",value:"orders"}],[c,p]=u.useState("overview"),{inCoin:f,outCoin:j}=s,[b,d]=u.useState(!1),{getTokenRank:C}=At();return u.useEffect(()=>{const R=C(f,j);console.log("ðŸš€ ~ useEffectDcaItem ~ direct:",j,f,R),d(!R)},[f==null?void 0:f.coin_type,j==null?void 0:j.coin_type]),e.jsxs(Ne,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:n,isCentered:!0,children:[e.jsx(Ge,{}),e.jsxs(qe,{minWidth:o?"300px":"482px",children:[e.jsx(Ke,{children:e.jsx(N,{w:"100%",borderBottom:"1px solid",borderColor:"border",children:e.jsx(we,{type:"tab",currentTab:c,tabs:r,onTabChange:R=>p(R.value),textStyle:{fontSize:"16px"},wrapStyle:{bg:"none",mt:"-12px",mb:"-4px"}})})}),e.jsx(Ye,{}),e.jsxs(Qe,{p:"0 16px 16px",textAlign:"center",children:[c=="overview"&&e.jsx(ks,{orderInfo:s,isActiveOrder:a,pageDirect:b,isClaimLoading:l,toClaim:i}),c=="orders"&&e.jsx(vs,{orderInfo:s,isActiveOrder:a,pageDirect:b})]})]})]})}function Rs({orderInfo:t,isActiveOrder:n=!0}){const{isApp:s}=Y(),[a,l]=u.useState(!1),{getExplorerUrl:i}=Ze(),{isClaimLoading:o,toClaim:r,closeOrderAction:c,isCloseLoading:p}=nt();return e.jsxs(e.Fragment,{children:[n&&e.jsxs(A,{justify:"flex-end",children:[e.jsx(M,{isLoading:o,onClick:()=>r(t),disabled:(t==null?void 0:t.outBalance)<=0||o,h:"32px",fontSize:"12px",borderRadius:"8px",fontWeight:"500",p:"0 8px",children:"Claim"}),e.jsx(De,{placement:"bottom-end",tooltip:e.jsxs(B,{align:"flex-start",children:[e.jsx(Se,{text:"View Details",onClick:()=>{l(!0)}}),e.jsx(Se,{text:"View on Explorer",onClick:()=>{window.open(i(t.orderID,"poolAddress"))}}),e.jsx(Se,{text:(t==null?void 0:t.outBalance)<=0?"Close":"Close and Withdraw",onClick:p?()=>{}:()=>{c(t)}})]}),children:e.jsx(se,{children:e.jsx(M,{variant:"outline",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(K,{svgFill:s?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})})]}),!n&&e.jsxs(A,{justify:"flex-end",children:[e.jsx(M,{onClick:()=>{l(!0)},h:"32px",fontSize:"12px",variant:"outline",borderRadius:"8px",fontWeight:"500",p:"0 8px",children:"Details"}),e.jsx(M,{onClick:f=>{ft(f),window.open(i(t.orderID,"poolAddress"))},w:"32px",p:"0",h:"32px",fontSize:"12px",borderRadius:"8px",variant:"outline",_hover:{svg:{fill:"primary"}},children:e.jsx(K,{svgW:"20px",xlinkHref:"#icon-icon_link1"})})]}),a&&e.jsx(Ps,{isOpen:a,onClose:()=>l(!1),orderInfo:t,isActiveOrder:n,isClaimLoading:o,toClaim:r})]})}function Ds(){const{isAutoRefresh:t,dcaOrderListLoading:n,dcaActiveOrderList:s,dcaPastOrderList:a}=I(),[l,i]=u.useState("activeDCAs"),o=u.useMemo(()=>[{label:"Active DCAs",value:"activeDCAs",num:!t&&n?"":s==null?void 0:s.length},{label:"Past DCAs",value:"pastDCAs",num:!t&&n?"":a==null?void 0:a.length}],[n,a,s]),r=u.useMemo(()=>l=="activeDCAs"?s:a,[l,s,a]),{isApp:c}=Y(),{closeAll:p,claimAll:f,isClaimAllLoading:j,isCloseAllLoading:b}=Pt(),d=u.useMemo(()=>l==="pastDCAs"||(r==null?void 0:r.length)===0?0:r==null?void 0:r.reduce((O,y)=>z(O).plus(y==null?void 0:y.outBalance),z(0)).toString(),[l,r]),[C,R]=u.useState([]),[D,w]=u.useState(0),[m,_]=u.useState(1),T=10,E=$e(l=="activeDCAs");return u.useEffect(()=>{if((r==null?void 0:r.length)>0){const O=(m-1)*T;(r==null?void 0:r.length)<=O&&_(1)}},[r]),u.useEffect(()=>{if((r==null?void 0:r.length)>0){w(r==null?void 0:r.length);const O=(m-1)*T,y=O+T;console.log("ðŸš€ ~ useEffect ~ start:",m,r.slice(0,y),O,y),(r==null?void 0:r.length)>O&&R(r.slice(O,y))}},[m,r]),e.jsxs(B,{w:"100%",gap:"12px",children:[e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(he,{type:"outlineTab",tabList:o,currentTab:l,handleChangeTab:O=>i(O==null?void 0:O.value),isActive:(O,y)=>O===y.value,wrapStyle:{border:"none",h:"32px",gap:"8px"},itemStyle:{fontSize:"14px",borderRadius:"8px",p:"0 8px"}}),(r==null?void 0:r.length)>1&&l=="activeDCAs"&&e.jsxs(A,{children:[e.jsx(M,{h:"32px",p:"8px",fontSize:"12px",fontWeight:"500",borderRadius:"8px",isLoading:j,disabled:Number(d)===0||j,onClick:()=>{f(r)},children:"Claim All"}),e.jsx(M,{h:"32px",p:"8px",fontSize:"12px",fontWeight:"400",variant:"ghost",isLoading:b,disabled:(r==null?void 0:r.length)==0||b,onClick:()=>{p(r)},children:"Close All"})]})]}),e.jsxs(B,{w:"100%",position:"relative",gap:"20px",children:[!n&&(r==null?void 0:r.length)===0?e.jsx(te,{type:"nodata",noBorder:!0}):c?e.jsx(B,{w:"100%",gap:"4px",children:e.jsx(Ae,{rowKey:"orderID",columns:E,dataSource:C,loading:!t&&n,itemSkeletonLength:5,itemHeight:"30px"})}):e.jsx(je,{rowKey:"orderID",columns:$e(l=="activeDCAs"),dataSource:C,loading:!t&&n,rowStyle:{h:"80px",cursor:"pointer"}}),(r==null?void 0:r.length)>T&&e.jsx(se,{children:e.jsx(be,{total:D,size:T,currentPage:m,onChange:O=>{_(O)}})})]})]})}const $e=t=>[{title:e.jsx(h,{children:"Orders"}),key:"order",thConfig:{w:"18%"},render:s=>e.jsx(ot,{orderInfo:s})},{title:e.jsx(h,{textAlign:"right",children:"Price Range"}),key:"price",thConfig:{w:"20%"},render:s=>e.jsx(Rt,{orderInfo:s,isProfile:!0,isRank:!0})},{title:e.jsx(h,{textAlign:"right",children:"Total"}),key:"total",thConfig:{w:"12%"},render:({inDeposited:s,inCoin:a})=>e.jsxs(h,{color:"text_caption",children:[V(s)," ",a==null?void 0:a.symbol]})},{title:e.jsx(h,{textAlign:"right",children:"Filled Size"}),key:"completed",thConfig:{w:"15%"},render:s=>e.jsx(Dt,{orderInfo:s,isProfile:!0})},t&&{title:e.jsx(h,{textAlign:"right",children:"Next Order (UTC)"}),key:"nextOrder",thConfig:{w:"20%"},render:({nextCycleAtTimeStamp:s})=>e.jsx(h,{color:"text_caption",children:ge(s)})},{title:e.jsx(h,{textAlign:"right",children:t?"Actions":"Action"}),key:"actions",thConfig:{w:"15%"},render:s=>e.jsx(Rs,{orderInfo:s,isActiveOrder:t})}].filter(Boolean);function Os(){const{currentAccount:t}=U(),{getLimitOrderHistory:n,historyOrderList:s,historyOrderLoading:a}=Et(),{myOrderList:l,orderListLoading:i}=le(),{isAutoRefresh:o,autoRefreshCount:r}=I(),[c,p]=u.useState("openOrders"),f=u.useMemo(()=>[{label:"Open Orders",value:"openOrders",num:!o&&i?"":l==null?void 0:l.length},{label:"Orders History",value:"ordersHistory",num:!o&&a?"":s==null?void 0:s.length}],[i,a,l,s]),j=x=>{t!=null&&t.address&&n(t.address,x)};u.useEffect(()=>{console.log("ðŸš€ ----------------------------------------------------ðŸš€"),console.log("ðŸš€ ~ useEffect ~ autoRefreshCount:",r),console.log("ðŸš€ ----------------------------------------------------ðŸš€"),r>0&&j(!0)},[r]),u.useEffect(()=>{j(!0)},[c,t]);const b=u.useMemo(()=>c=="openOrders"?i:a,[c,i,a]),d=u.useMemo(()=>(console.log("ðŸš€ ~ currentList ~ myOrderList:",l,s),c=="openOrders"?l:s),[c,l,s]);Wt({onRpcChange:()=>{j(!0)}});const{isApp:C}=Y(),{handleCancelOrder:R,cancelOrderLoading:D}=Bt(),[w,m]=u.useState([]),[_,T]=u.useState(0),[E,O]=u.useState(1),y=10,v=As(c=="openOrders");return u.useEffect(()=>{if((d==null?void 0:d.length)>0){const x=(E-1)*y;(d==null?void 0:d.length)<=x&&O(1)}},[d]),u.useEffect(()=>{if((d==null?void 0:d.length)>0){T(d==null?void 0:d.length);const x=(E-1)*y,k=x+y;console.log("ðŸš€ ~ useEffect ~ start:",E,d.slice(0,k),x,k),(d==null?void 0:d.length)>x&&m(d.slice(x,k))}},[E,d]),e.jsxs(B,{w:"100%",gap:"12px",children:[e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(he,{type:"outlineTab",tabList:f,currentTab:c,handleChangeTab:x=>p(x==null?void 0:x.value),isActive:(x,k)=>x===k.value,wrapStyle:{border:"none",h:"32px",gap:"8px",bg:"none"},itemStyle:{fontSize:"14px",borderRadius:"8px",p:"0 8px"}}),(d==null?void 0:d.length)>1&&c=="openOrders"&&e.jsx(A,{children:e.jsx(M,{h:"32px",p:"8px",fontSize:"12px",fontWeight:"400",variant:"ghost",isLoading:D,onClick:()=>{R(l)},children:"Cancel All"})})]}),e.jsxs(B,{w:"100%",position:"relative",gap:"20px",children:[!b&&(d==null?void 0:d.length)===0?e.jsx(te,{type:"nodata",noBorder:!0}):C?e.jsx(B,{w:"100%",gap:"4px",children:e.jsx(Ae,{rowKey:"order_id",columns:v,dataSource:w,loading:!o&&b,itemSkeletonLength:5,itemHeight:"30px"})}):e.jsx(je,{rowKey:"order_id",columns:v,dataSource:w,loading:!o&&b,rowStyle:{h:"80px",cursor:"pointer"}}),(d==null?void 0:d.length)>y&&e.jsx(se,{children:e.jsx(be,{total:_,size:y,currentPage:E,onChange:x=>{O(x)}})})]})]})}const As=t=>[{title:e.jsx(h,{children:"Order"}),key:"order",thConfig:{w:"20%"},render:s=>e.jsx(Ft,{imgSize:"28px",info:s,isProfile:!0})},{title:e.jsx(h,{textAlign:"right",children:"Limit Price"}),key:"price",thConfig:{w:"20%"},render:s=>e.jsx(zt,{info:s,isProfile:!0})},{title:e.jsx(h,{textAlign:"right",children:"Total"}),key:"total",thConfig:{w:"16%"},render:({total_pay_amount:s,pay_coin:a})=>e.jsxs(h,{color:"text_caption",children:[V(s)," ",a.symbol]})},{title:e.jsx(h,{textAlign:"right",children:"Filled Size"}),key:"completed",thConfig:{w:"12%"},render:s=>e.jsx(Ht,{info:s,isProfile:!0})},{title:e.jsx(h,{textAlign:"right",children:"Expiry"}),key:"expiry",thConfig:{w:"16%"},render:s=>e.jsx(Ut,{info:s,isProfile:!0})},!t&&{title:e.jsx(h,{textAlign:"right",children:"Status"}),key:"status",thConfig:{w:"8%"},render:s=>e.jsx(Mt,{historyInfo:s,openExpendItemObj:void 0,isProfile:!0})},{title:e.jsx(h,{textAlign:"right",children:t?"Actions":"Action"}),key:"actions",thConfig:{w:"8%"},render:s=>e.jsx(Xt,{orderInfo:s,isProfile:!0,isOpenOrder:t})}].filter(Boolean);function Es(){const t=[{label:"Limit Orders",value:"limitOrders"},{label:"DCA",value:"dca"}],[n,s]=u.useState("limitOrders");return e.jsx(G,{p:"0 16px 16px",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",children:e.jsxs(B,{align:"flex-start",gap:"20px",children:[e.jsx(N,{w:"100%",borderBottom:"1px solid",borderColor:"border",children:e.jsx(we,{type:"tab",currentTab:n,tabs:t,onTabChange:a=>s(a.value),textStyle:{fontSize:"16px"},wrapStyle:{bg:"none"}})}),n==="limitOrders"&&e.jsx(Os,{}),n==="dca"&&e.jsx(Ds,{})]})})}const Bs=(t,n)=>n?t:"********";function Fs({handleRefresh:t,totalValue:n,isLoading:s}){const{isApp:a}=Y(),{currentAccount:l,accounts:i}=U(),{isShowProfileAssets:o,setIsShowProfileAssets:r}=Vt(),[c,p]=u.useState(!1),{onClose:f}=dt();return e.jsxs(B,{w:"100%",align:"flex-start",gap:"12px",children:[e.jsxs(A,{w:"100%",children:[e.jsx(h,{lineHeight:"20px",fontSize:"16px",color:"text_caption",children:"Total Value"}),e.jsx(De,{showTooltip:!a,placement:"bottom-end",tooltip:e.jsx(h,{fontSize:"12px",children:o?"Hide Value":"View Value"}),children:e.jsx(se,{children:e.jsx(K,{xlinkHref:o?"#icon-hide_eyes":"#icon-show_eyes",svgFill:"text_caption",onClick:()=>r(!o)})})})]}),e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(ee,{isLoaded:!s,h:"22px",children:e.jsx(h,{mt:"-6px",letterSpacing:"1px",fontSize:"32px",lineHeight:"32px",color:"text_caption",fontWeight:"500",children:Bs(fe(n,2),o)})}),e.jsxs(A,{children:[e.jsxs(A,{p:"0 8px",h:"36px",justify:"center",align:"center",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",borderRadius:"8px",border:"1px solid",borderColor:"border",cursor:"pointer",_hover:{bg:"button_outline_hov_bg",svg:{fill:"text_caption"},p:{color:"text_caption"}},onClick:()=>{p(!0)},children:[e.jsx(K,{xlinkHref:"#icon-transactions",svgW:"20px",svgH:"20px"}),e.jsx(h,{children:"Transactions"})]}),e.jsx(Nt,{handleRefresh:t,bg:"block_color_opacity.50",backdropFilter:"blur(20px)",w:"32px",h:"32px",isAutoRefresh:!0,refreshInterval:30,innerStyle:{bg:"transparent"}})]})]}),i.length>1&&e.jsxs(A,{children:[e.jsx(h,{color:"primary_gray",children:"Roul : "}),e.jsx(Gt,{currentAccount:l,accounts:i,onClose:f,isProfile:!0})]}),c&&e.jsx(qt,{isOpen:c,onClose:()=>p(!1)})]})}function zs(){var D;const{currentAccount:t,onWalletModal:n}=U(),{showPosListLength:s,setShowPosListLength:a,posBaseListLoading:l,posBaseListGroupByPool:i}=oe(),[o,r]=u.useState([]),{isAutoRefresh:c}=I(),[p,f]=u.useState([]),j=w=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",w),f(m=>[...m,w])},b=w=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",w),f(m=>m.filter(_=>(_==null?void 0:_.coin_type)!==(w==null?void 0:w.coin_type)))};u.useEffect(()=>{t!=null&&t.address?console.log("ðŸš€ ~ useEffect ~ currentAccount?.address:",t==null?void 0:t.address):a("")},[t==null?void 0:t.address]),u.useEffect(()=>{var E,O,y,v;const w=(E=p[0])!=null&&E.coin_type?Z((O=p[0])==null?void 0:O.coin_type):void 0,m=(y=p[1])!=null&&y.coin_type?Z((v=p[1])==null?void 0:v.coin_type):void 0,_=Object.values(i).filter(x=>w&&m?Z(x.tokenA.coin_type)==w&&Z(x.tokenB.coin_type)==m||Z(x.tokenA.coin_type)==m&&Z(x.tokenB.coin_type)==w:w?Z(x.tokenA.coin_type)==w||Z(x.tokenB.coin_type)==w:x);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(i),_),r(_);const T=_.reduce((x,k)=>x+(k.list?k.list.length:0),0);t!=null&&t.address&&a(T.toString())},[p,i]),u.useEffect(()=>()=>{a("")},[]),u.useEffect(()=>{l&&a("")},[l]);const d=u.useMemo(()=>[{label:"Positions",value:"positions",num:Number(s)}],[s]),[C,R]=u.useState("positions");return e.jsx(G,{p:"0 16px 16px",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",children:e.jsxs(B,{gap:"16px",w:"100%",children:[e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(we,{type:"tab",currentTab:C,tabs:d,onTabChange:w=>R(w.value),textStyle:{fontSize:"16px"},wrapStyle:{bg:"none"}}),e.jsx(es,{isProfile:!0,isPools:!1,handleRefresh:()=>{},selectCoinList:p,onClickSelectCoinList:j,onDeleteSelectCoinList:b})]}),e.jsx(N,{h:"1px",w:"100%",bg:"border",mt:"-16px"}),e.jsx(ts,{}),t!=null&&t.address?!c&&l?[{},{},{},{}].map((w,m)=>e.jsx(os,{},m)):((D=Object.values(o))==null?void 0:D.length)>0?Object.values(o).map((w,m)=>e.jsx(ss,{poolInfo:w},m)):e.jsx(te,{type:"nodata",text:"No liquidity positions",noBorder:!0}):e.jsx(te,{type:"nowallet",onboard:()=>n(!0),noBorder:!0})]})})}const Hs=(t,n)=>({coinHoldingList:[],isCoinHoldingLoading:!0,setIsCoinHoldingLoading:s=>t({isCoinHoldingLoading:s}),setCoinHoldingList:s=>t({coinHoldingList:s}),isCoinPriceLoading:!0,setIsCoinPriceLoading:s=>t({isCoinPriceLoading:s}),holdingsTotalUsd:"0",setHoldingsTotalUsd:s=>t({holdingsTotalUsd:s}),unknownCoinCount:0,setUnknownCoinCount:s=>t({unknownCoinCount:s})}),Ce=Je(Hs);function rt(){const{currentAccount:t}=U(),{fetchAccountBalance:n}=as(),{coinHoldingList:s,setCoinHoldingList:a,setIsCoinHoldingLoading:l,setIsCoinPriceLoading:i,setHoldingsTotalUsd:o,isCoinPriceLoading:r,setUnknownCoinCount:c}=Ce(),{getTokenListInfo:p}=at(),{getTokenPrice:f}=re(),{refreshCoinPriceInfo:j}=Ee(),b=u.useRef(t==null?void 0:t.address);u.useEffect(()=>{b.current=t==null?void 0:t.address},[t==null?void 0:t.address]);const d=async()=>{const m=b.current;if(m){l(!0);const _=await n(m,!0);if(_){const T=await p(_.filter(y=>z(y.totalBalance).gt(0)).map(y=>y.coinType));if(!T)throw l(!1),a([]),new Error("get token list info error");const E=[];let O=0;return _.forEach(y=>{const v=T.get(y.coinType);if(v){const x=y.totalBalance,k=J(x,v.decimals).toString(),L=V(k,void 0,void 0,mt.ROUND_DOWN).toString(),P={balance:x,balance_format:k,balance_display:L,balance_usd:"0",coin:v,coin_type:v==null?void 0:v.coin_type,price:"",price_diff_24:""};E.push(P),v.is_verified||O++}}),console.log("ðŸš€ ~ fetchCoinHoldingList ~ owner:",m),console.log("ðŸš€ ~ fetchCoinHoldingList ~ currentAccountRef.current:",b.current),m===b.current&&(a(E),c(O),C([...E])),l(!1),E}}else l(!1),a([]);return[]},C=async m=>{i(!0);try{await j(m.filter(_=>_.coin.is_verified).map(_=>_.coin.coin_type))}catch(_){console.error("fetch coin price info error",_)}finally{i(!1)}},R=m=>{m.forEach(_=>{const{coin:T}=_;if(T.is_verified){const E=f(T.coin_type);E&&(_.price=E.price,_.price_diff_24="",_.balance_usd=z(_.balance_format).mul(E.price).toString())}})},D=async m=>{if(console.log("ðŸš€ ~ getFilterCoinHoldingList ~ filter:",{filter:m,coinHoldingList:s,currentAccount:t}),t){const{search:_,current_sort:T,current_sort_order:E,is_show_unknown:O=!1,is_hide_small_balance:y=!0}=m;let v=[];if(O?v.push(...s):v=s.filter(x=>x.coin.is_verified),_){const x=_.toLowerCase();v=v.filter(k=>k.coin.coin_type.toLowerCase().includes(x)||k.coin.symbol.toLowerCase().includes(x)||k.coin.name.toLowerCase().includes(x))}return R(v),y&&!r&&(v=v.filter(x=>z(x.balance_usd).gt(.01))),v.sort((x,k)=>{if(T==="balance"){const L=z(x.balance_format).cmp(z(k.balance_format));if(L!==0)return E==="desc"?-L:L}if(T==="value"){const L=z(x.balance_usd).cmp(z(k.balance_usd));return L!==0?E==="desc"?-L:L:z(k.balance_format).cmp(z(x.balance_format))}if(T==="price"){const L=z(x.price).cmp(z(k.price));return L!==0?E==="desc"?-L:L:z(k.balance_format).cmp(z(x.balance_format))}return 0}),console.log("ðŸš€ ~ getFilterCoinHoldingList ~ tempList:",v),v}return[]};return u.useEffect(()=>{R(s);const m=s.reduce((_,T)=>_+Number(T.balance_usd||0),0);o(m.toString())},[s,r]),{getFilterCoinHoldingList:D,fetchCoinHoldingList:d,resetUserData:()=>{a([]),o("0"),c(0)}}}function Us({inputValue:t,changeInputValue:n}){const s=u.useRef(null),[a,l]=u.useState(!1);return Y(),e.jsxs(ut,{children:[e.jsx(pt,{w:a?"203px":"32px",transition:"width 0.1s ease",_hover:{bg:"bg_secondary"},bg:"bg_secondary",ref:s,borderRadius:"8px",h:"32px",border:"1px solid",borderColor:"border",variant:"outline",value:t,onChange:i=>{n(i.target.value)},onFocus:()=>{l(!0)},onBlur:()=>{n(""),l(!1)},fontWeight:"500",textAlign:"left",fontSize:"12px",pr:"8px",pl:a?"28px":"8px"}),e.jsxs(xt,{children:[e.jsx(K,{position:"absolute",top:"6px",left:a?"-198px":"-26px",xlinkHref:"#icon-icon_search",svgHover:"text_paragraph",onClick:i=>{var o;(o=s.current)==null||o.focus(),l(!0)}}),t?e.jsx(K,{xlinkHref:"#icon-icon_close",position:"absolute",top:"6px",right:"6px",onMouseDown:i=>i.preventDefault(),onClick:i=>{n(""),setTimeout(()=>{var o;(o=s.current)==null||o.focus()},0)}}):null]})]})}function Ms({inputValue:t,changeInputValue:n,isShowUnknownCoin:s,handleIsShowUnknownCoin:a,isHideLowAsset:l,handleIsHideLowAsset:i,unknownCoinCount:o}){return Y(),e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(h,{fontSize:"16px",color:"text_caption",children:"Wallet Holdings"}),e.jsxs(A,{children:[e.jsx(Us,{inputValue:t,changeInputValue:n}),e.jsx(G,{w:"unset",borderRadius:"8px",p:"0px 8px",h:"32px",children:e.jsxs(A,{h:"100%",justify:"space-between",children:[e.jsxs(h,{whiteSpace:"nowrap",fontSize:"12px",children:["Show Unknown Coin (",o,")"]}),e.jsx(ze,{isChecked:s,onChange:a})]})}),e.jsx(G,{w:"unset",borderRadius:"8px",p:"0px 8px",h:"32px",children:e.jsxs(A,{h:"100%",justify:"space-between",children:[e.jsx(h,{whiteSpace:"nowrap",fontSize:"12px",children:"Hide Low Asset"}),e.jsx(ze,{isChecked:l,onChange:i})]})})]})]})}function Xs(){const{isApp:t}=Y(),{getFilterCoinHoldingList:n}=rt(),{isCoinHoldingLoading:s,isCoinPriceLoading:a,unknownCoinCount:l}=Ce(),{isAutoRefresh:i}=I(),[o,r]=u.useState([]),[c,p]=u.useState({current_sort:"value",current_sort_order:"desc",search:"",is_show_unknown:!1,is_hide_small_balance:!0}),[f,j]=u.useState(!1),[b,d]=u.useState(!0),[C,R]=u.useState("desc"),[D,w]=u.useState(Re[2]),m=g=>{console.log("ðŸš€ ~ applyFilter ~ nextFilter:",g),i||S(1),p(g),n(g).then(r)},_=g=>{m({...c,search:g})},T=(g,H)=>{m({...c,[g]:H}),g==="is_show_unknown"&&j(H),g==="is_hide_small_balance"&&d(H)},E=g=>{const H=(g==null?void 0:g.value)===(D==null?void 0:D.value),$=t||!H?"desc":C==="desc"?"asc":"desc";console.log("ðŸš€ ~ handleSortClick ~ item:",$,g),w(g),R($),m({...c,current_sort:g.value,current_sort_order:$})};u.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ isCoinHoldingLoading:",s,a,o),!s&&!a&&m(c)},[s,a]);const O=Ie(),y=g=>{O(`/swap/${g}/''`)},[v,x]=u.useState([]),[k,L]=u.useState(0),[P,S]=u.useState(1),F=10;return u.useEffect(()=>{if((o==null?void 0:o.length)>0){const g=(P-1)*F;(o==null?void 0:o.length)<=g&&S(1)}},[o]),u.useEffect(()=>{if((o==null?void 0:o.length)>0){L(o==null?void 0:o.length);const g=(P-1)*F,H=g+F;console.log("ðŸš€ ~ useEffect ~ start:",P,o.slice(0,H),g,H),(o==null?void 0:o.length)>g&&x(o.slice(g,H))}},[P,o]),e.jsx(G,{p:"14px 16px 16px",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",children:e.jsxs(B,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Ms,{unknownCoinCount:l,inputValue:c.search||"",changeInputValue:_,isShowUnknownCoin:f,handleIsShowUnknownCoin:g=>T("is_show_unknown",g.target.checked),isHideLowAsset:b,handleIsHideLowAsset:g=>T("is_hide_small_balance",g.target.checked)}),e.jsx(N,{h:"1px",w:"100%",bg:"border",mt:"-2px"}),e.jsxs(B,{w:"100%",position:"relative",gap:"20px",children:[!s&&!a&&(o==null?void 0:o.length)===0?e.jsx(te,{type:"nodata",noBorder:!0}):t?e.jsxs(B,{w:"100%",gap:"4px",children:[e.jsxs(A,{w:"100%",justify:"space-between",children:[e.jsx(h,{fontSize:"24px",color:"text_caption",children:"Tokens"}),e.jsx(js,{sortText:"Sort by",minW:"180px",currentSort:D,sortByList:Re,onSortByChange:E,xlinkHref:C==="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>R(g=>g==="desc"?"asc":"desc")})]}),e.jsx(Ae,{rowKey:"coin_type",columns:We(C,D,E,y,!i&&a),dataSource:v,loading:!i&&(s||a),itemSkeletonLength:5,itemHeight:"30px",onRowClick:g=>{y(g==null?void 0:g.coin_type)}})]}):e.jsx(je,{rowKey:"coin_type",columns:We(C,D,E,y,!i&&a),dataSource:v,skeletonLength:10,loading:!i&&(s||a),rowStyle:{h:"72px",cursor:"pointer"},onRowClick:g=>{y(g==null?void 0:g.coin_type)}}),(o==null?void 0:o.length)>F&&e.jsx(se,{children:e.jsx(be,{total:k,size:F,currentPage:P,onChange:g=>{S(g)}})})]})]})})}const Re=[{label:"Balance",value:"balance"},{label:"Price",value:"price"},{label:"Value",value:"value"}],ve=Object.fromEntries(Re.map(t=>[t.value,t])),We=(t,n,s,a,l)=>[{title:e.jsx(h,{children:"Token"}),key:"pool",thConfig:{w:"22%"},showLabel:!1,render:({coin:i})=>e.jsx(ms,{haveTooltip:!0,token:i,warningIcon:{iconW:"14px",iconH:"14px"}})},{title:e.jsx(Te,{labelInfo:ve.balance,sortRule:t,sortBy:n,clickSort:s}),key:"balance",thConfig:{w:"20%"},render:({coin:i,balance_display:o})=>e.jsxs(h,{color:"text_caption",children:[o," ",jt(i==null?void 0:i.symbol,10)]})},{title:e.jsx(Te,{labelInfo:ve.price,sortRule:t,sortBy:n,clickSort:s}),key:"price",thConfig:{w:"20%"},render:({price:i})=>e.jsx(A,{justify:"flex-end",children:e.jsx(ee,{isLoaded:!l,children:e.jsxs(h,{color:"text_caption",children:["$",et(i)]})})})},{title:e.jsx(Te,{labelInfo:ve.value,sortRule:t,sortBy:n,clickSort:s}),key:"balance_usd",thConfig:{w:"20%"},render:({balance_usd:i})=>e.jsx(A,{justify:"flex-end",children:e.jsx(ee,{isLoaded:!l,children:e.jsx(h,{color:"text_caption",children:fe(i,2)})})})},{title:e.jsx(h,{textAlign:"right",children:"Action"}),showLabel:!1,thConfig:{w:"18%"},key:"actions",render:i=>e.jsx(M,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",variant:"outline",fontWeight:"500",onClick:()=>{a(i==null?void 0:i.coin_type)},children:"Swap"})}],$s=(t,n)=>({isXCetusModalOpen:!1,setIsXCetusModalOpen:s=>t({isXCetusModalOpen:s}),isXCetusLoading:!1,setIsXCetusLoading:s=>t({isXCetusLoading:s}),currentXCetusTab:"Get xCETUS",setCurrentXCetusTab:s=>t({currentXCetusTab:s})}),ye=Je($s);function lt({title:t,imgUrl:n,onClick:s,btnTitle:a}){return e.jsxs(A,{justify:"space-between",align:"flex-start",w:"100%",children:[e.jsxs(A,{children:[n&&e.jsx(Pe,{imageUrl:n,p:"4px",imgBoxStyle:{w:"20px",h:"20px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsx(h,{children:t})]}),s?e.jsx(M,{h:"32px",borderRadius:"8px",p:"8px",fontSize:"12px",onClick:s,fontWeight:"500",children:a}):e.jsx(N,{h:"32px"})]})}const Ws={cetus:{title:"CETUS",imgUrl:X.cetus_coin.logo_url,bgUrl:"/images/cetus_holding_bg.png"},xcetus:{title:"xCETUS",imgUrl:X.x_cetus_coin.logo_url,bgUrl:"/images/xcetus_holding_bg.png"}};function ct({type:t,amount:n,amountUSD:s,isLoading:a,onClick:l,btnTitle:i,children:o}){const{title:r,imgUrl:c,bgUrl:p}=Ws[t];return e.jsx(G,{flex:"1",bg:`right 0 bottom 60% / 86px 142px no-repeat url("${p}"), radial-gradient(40% 74% at 100% 100%,#1D342E 0%, rgba(22,27,48,0) 100%), rgba(0,0,0,0.5)`,backdropFilter:"blur(20px)",p:"16px",borderRadius:"16px",children:e.jsxs(B,{w:"100%",gap:"0",children:[e.jsx(lt,{title:`${r} Holdings`,imgUrl:c,onClick:l,btnTitle:i}),e.jsxs(B,{align:"flex-start",w:"100%",m:"31px 0 60px",children:[e.jsx(ee,{isLoaded:!a,h:"26px",children:e.jsx(h,{color:"text_caption",h:"26px",lineHeight:"26px",fontSize:"22px",children:n})}),e.jsx(ee,{isLoaded:!a,h:"17px",children:e.jsxs(h,{h:"17px",lineHeight:"17px",fontSize:"14px",children:["Total ",r," (â‰ˆ $",et(s,2),")"]})})]}),o]})})}function Vs(){const{currentAccount:t}=U(),{balanceInfo:n}=bs(X.cetus_coin),{getTokenAmountValue:s}=re(),{coinPriceObj:a}=Oe(),l=u.useMemo(()=>s(X.cetus_coin.coin_type,J((n==null?void 0:n.balance)||"0",X.cetus_coin.decimals)).toString(),[n==null?void 0:n.balance,t==null?void 0:t.address,a]),{setCurrentXCetusTab:i,setIsXCetusModalOpen:o}=ye(),r=()=>{o(!0),i("Get xCETUS")},{veNFT:c,veNFTLoading:p,lockCetusListLoading:f}=Q();return e.jsx(ct,{type:"cetus",amount:t?(n==null?void 0:n.balanceFormat)||"0":"--",amountUSD:l,isLoading:(f||p)&&c!==void 0,children:e.jsx(M,{w:"100%",h:"48px",borderRadius:"12px",fontWeight:"500",fontSize:"16px",onClick:r,children:"Get xCETUS"})})}function Ns(){const{lockCetusList:t,lockCetusListLoading:n}=Q(),[s,a]=u.useState([]),[l,i]=u.useState(0),[o,r]=u.useState(1),c=10;return u.useEffect(()=>{if((t==null?void 0:t.length)>0){const p=(o-1)*c;(t==null?void 0:t.length)<=p&&r(1)}},[t]),u.useEffect(()=>{if((t==null?void 0:t.length)>0){i(t==null?void 0:t.length);const p=(o-1)*c,f=p+c;console.log("ðŸš€ ~ useEffect ~ start:",o,t.slice(0,f),p,f),(t==null?void 0:t.length)>p&&a(t.slice(p,f))}},[o,t]),t&&t.length>0&&e.jsxs(G,{p:"0 16px 16px",w:"100%",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",children:[e.jsx(we,{type:"title",title:"Redeeming xCETUS"}),e.jsx(Le,{orientation:"horizontal"}),e.jsx(je,{mt:"10px",dataSource:s,columns:Gs(),loading:n,skeletonLength:t==null?void 0:t.length,rowStyle:{h:"80px"}}),(t==null?void 0:t.length)>c&&e.jsx(se,{children:e.jsx(be,{total:l,size:c,currentPage:o,onChange:p=>{r(p)}})})]})}const Gs=()=>[{title:e.jsx(h,{children:"xCETUS To CETUS"}),key:"to",render:t=>e.jsx(rs,{xcetus_amount:t.xcetus_amount,cetus_amount:t.cetus_amount,imageSize:"20px"})},{title:e.jsx(h,{textAlign:"right",children:"Vesting Duration (Day)"}),key:"lock_day",render:t=>e.jsx(h,{color:"text_caption",fontSize:"14px",children:t==null?void 0:t.lock_day})},{title:e.jsx(h,{textAlign:"right",children:"Available Claim Date"}),key:"date",render:t=>e.jsx(h,{color:"text_caption",fontSize:"14px",children:bt.unix(t==null?void 0:t.locked_until_time).format("MMM D, YYYY HH:mm")})},{title:e.jsx(h,{textAlign:"right",children:"Action"}),key:"action",render:t=>{const[n,s]=u.useState(!1),{cancelOrderLoading:a,handleCancelOrder:l}=ls(),{claimOrderLoading:i,handleClaimOrder:o}=cs(),r=c=>{c?o(t.id):l(t)};return u.useEffect(()=>{s(!tt.isLocked(t))},[]),e.jsx(A,{justify:"flex-end",children:e.jsx(M,{onClick:()=>{a||i||r(n)},variant:"outline",h:{base:"40px",lg:"28px"},w:{base:"168px",lg:"80px"},borderRadius:{base:"12px",lg:"8px"},fontSize:"14px",isLoading:a||i,color:n?"text_highlight":"primary_gray",bg:"button_ghost_bg",children:n?"Claim":"Cancel"})})}}];function qs({cetusApr:t,myShare:n,totalRewardValue:s,nextStartTime:a,rewardList:l}){const{currentAccount:i}=U(),{days:o,hours:r,minutes:c,seconds:p}=ds((a||0)*1e3),{veNFTLoading:f}=Q(),{claimRewardLoading:j,handleClaimReward:b}=us(),d=()=>{j||b(l)};return Y(),e.jsx(G,{flex:"1.46",p:"16px",borderRadius:"16px",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",children:e.jsxs(B,{w:"100%",gap:"0",children:[e.jsx(lt,{title:"Staking Rewards",onClick:d,btnTitle:"Claim"}),e.jsxs(B,{m:"36px 0 50px",h:"57px",children:[e.jsxs(A,{children:[e.jsx(de,{value:o,type:"d"}),e.jsx(h,{color:"text_caption",children:":"}),e.jsx(de,{value:r,type:"h"}),e.jsx(h,{color:"text_caption",children:":"}),e.jsx(de,{value:c,type:"m"}),e.jsx(h,{color:"text_caption",children:":"}),e.jsx(de,{value:p,type:"s"})]}),e.jsx(h,{fontSize:"14px",h:"17px",lineHeight:"17px",children:"Reward Distribution In"})]}),e.jsxs(A,{justify:"space-between",w:"80%",mb:"12px",children:[e.jsx(ke,{title:"Est.APR",value:e.jsx(ps,{children:e.jsxs(h,{textDecoration:"underline dotted",textUnderlineOffset:"3px",textDecorationColor:"text_paragraph",color:"text_caption",cursor:"pointer",children:["â‰ˆ$",wt(t,2)]})}),loading:t==="0"}),e.jsx(Le,{orientation:"vertical"}),e.jsx(ke,{title:"Your Share",value:n!=="--"?`â‰ˆ${n}`:n,loading:f}),e.jsx(Le,{orientation:"vertical"}),e.jsx(ke,{title:"Pending Yield",value:i?fe(s,2):"--",loading:f})]})]})})}const Ks={d:"D",h:"H",m:"M",s:"S"},de=({value:t,type:n})=>e.jsxs(A,{borderRadius:"8px",bg:"background",p:"4px 8px",justify:"center",align:"flex-end",w:"64px",h:"32px",gap:"2px",children:[e.jsx(h,{color:"text_caption",fontSize:"20px",textAlign:"center",children:t}),e.jsx(h,{fontSize:"12px",mb:"1px",children:Ks[n]})]}),ke=({title:t,value:n,loading:s})=>e.jsxs(B,{gap:"3px",children:[e.jsx(ee,{isLoaded:!s,h:"17px",children:e.jsx(h,{color:"text_caption",fontSize:"14px",h:"17px",lineHeight:"1",children:n})}),e.jsx(h,{fontSize:"14px",h:"15px",lineHeight:"1",children:t})]});function Ys({availableXCetusAmount:t,redeemingXCetusAmount:n}){const{currentAccount:s}=U(),{veNFT:a,veNFTLoading:l,lockCetusListLoading:i}=Q(),{getTokenAmountValue:o}=re(),{coinPriceObj:r}=Oe(),c=u.useMemo(()=>o(X.cetus_coin.coin_type,J((a==null?void 0:a.xcetus_balance)||"0",X.x_cetus_coin.decimals)).toString(),[a==null?void 0:a.xcetus_balance,s==null?void 0:s.address,r]),{setCurrentXCetusTab:p,setIsXCetusModalOpen:f}=ye(),j=()=>{f(!0),p("Redeem CETUS")},b=(i||l)&&a!==void 0;return e.jsx(ct,{type:"xcetus",amount:s?V(J((a==null?void 0:a.xcetus_balance)||"0",9),9).toString():"--",amountUSD:c,onClick:j,btnTitle:"Redeem",isLoading:b,children:e.jsxs(B,{w:"100%",gap:"16px",h:"48px",children:[e.jsx(q,{isLoading:b,label:"Available",value:s?V(J(t,9),9).toString():"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"14px"}}),e.jsx(q,{isLoading:b,label:"Redeeming",value:s?V(J(n,9),9).toString():"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"14px"}})]})})}const ue=[{label:"Get xCETUS",value:"Get xCETUS"},{label:"Redeem CETUS",value:"Redeem CETUS"}];function Qs({isOpen:t,onClose:n,availableXCetusAmount:s}){const{currentXCetusTab:a,setCurrentXCetusTab:l}=ye(),[i,o]=u.useState("#icon-a-icon_trade"),r=()=>{o("#icon-icon_swap1")},c=()=>{o("#icon-a-icon_trade")},p=()=>{var j;const f=(j=ue==null?void 0:ue.find(b=>(b==null?void 0:b.value)!==a))==null?void 0:j.value;f&&l(f)};return e.jsxs(Ne,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:n,isCentered:!0,children:[e.jsx(Ge,{}),e.jsxs(qe,{children:[e.jsx(Ke,{p:"0 16px",children:e.jsx(N,{borderBottom:"1px solid",borderColor:"border",children:e.jsx(he,{type:"borderTab",wrapStyle:{w:"fix-content",border:"none",h:"58px",background:"transparent",gap:"40px"},itemStyle:{w:"auto",fontSize:"16px"},tabList:ue,currentTab:a,handleChangeTab:f=>{l(f==null?void 0:f.value)}})})}),e.jsx(Ye,{}),e.jsxs(Qe,{p:"20px 16px 16px",children:[a==="Get xCETUS"&&e.jsx(xs,{availableXCetusAmount:s,onIconClick:p,iconParams:{xlinkHref:i,svgFill:"text_caption",transform:i==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:i==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:r,onMouseLeave:c}}),a==="Redeem CETUS"&&e.jsx(gs,{availableXCetusAmount:J(s,9),onIconClick:p,iconParams:{xlinkHref:i,svgFill:"text_caption",transform:i==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:i==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:r,onMouseLeave:c}})]})]})]})}function Is(){const{isXCetusModalOpen:t,setIsXCetusModalOpen:n}=ye(),{availableXCetusAmount:s,redeemingXCetusAmount:a,cetusApr:l,myShare:i,totalRewardValue:o,nextStartTime:r,rewardList:c}=hs();return e.jsxs(B,{w:"100%",gap:"12px",children:[e.jsxs(A,{w:"100%",justify:"space-between",gap:"12px",children:[e.jsx(qs,{cetusApr:l,myShare:i,totalRewardValue:o,nextStartTime:r,rewardList:c}),e.jsx(Ys,{availableXCetusAmount:s,redeemingXCetusAmount:a}),e.jsx(Vs,{})]}),e.jsx(Ns,{}),t&&e.jsx(Qs,{isOpen:t,onClose:()=>n(!1),availableXCetusAmount:s})]})}function Zs(){const{currentAccount:t}=U(),{orderListLoading:n,myOrderList:s}=le(),{isAutoRefresh:a,dcaOrderListLoading:l,dcaActiveOrderList:i}=I(),{getTokenAmountValue:o,coinPriceObj:r}=re(),c=u.useMemo(()=>{let j=z(0);if(a||!n)return(s==null?void 0:s.length)>0&&(t!=null&&t.address)?(s.forEach(b=>{const{pay_coin:d,target_coin:C,un_claimed_amount:R,remaining_amount:D}=b,w=o(d.coin_type,D),m=o(C.coin_type,R);j=z(j).plus(w).plus(m),console.log("ðŸš€ ~ myOrderList.forEach ~ limitTotalTvl:",j.toString())}),j.toString()):"0"},[a,s,t==null?void 0:t.address,n,r]),p=u.useMemo(()=>{let j=z(0);if(a||!l)return(i==null?void 0:i.length)>0&&(t!=null&&t.address)?(i.forEach(b=>{const{inBalance:d,inCoin:C,outBalance:R,outCoin:D}=b,w=o(C.coin_type,d),m=o(D.coin_type,R);j=z(j).plus(w).plus(m),console.log("ðŸš€ ~ dcaActiveOrderList.forEach ~ total:",j.toString())}),j):"0"},[a,i,t==null?void 0:t.address,l,r]),f=u.useMemo(()=>{if(console.log("ðŸš€ ~ useGetActivityTvl ~ dcaTotalTvl, limitTotalTvl:",p,c),p&&c){let j=z(0);return j=z(j).plus(p).plus(c),j.toString()}return"--"},[p,c]);return{limitTotalTvl:c,dcaTotalTvl:p,orderTotalTvl:f}}function Js(){const{currentAccount:t}=U(),{isAutoRefresh:n}=I(),{veNFT:s,veNFTLoading:a,lockCetusListLoading:l}=Q(),{getTokenAmountValue:i}=re(),{coinPriceObj:o}=Oe();return{xCetusTotalTvl:u.useMemo(()=>{if(n||!a&&!l)return t!=null&&t.address&&s?i(X.cetus_coin.coin_type,J(s==null?void 0:s.xcetus_balance,X.cetus_coin.decimals)).toString():"0"},[n,s==null?void 0:s.xcetus_balance,l,a,t==null?void 0:t.address,o])}}const en="fetch-coin-holding-list",tn="fetch-owner-nft",sn="fetch-active-order-list",nn="fetch-xcetus-base-info";function on(){const{currentAccount:t}=U(),{getTokenListInfo:n}=at(),{getLimitUserIndexer:s,getDcaUserIndexer:a}=fs(),{setOrderListLoading:l,setMyOrderList:i}=le(),{setDcaOrderListLoading:o,setDcaActiveOrderList:r,setDcaPastOrderList:c}=I(),{refreshCoinPriceInfo:p}=Ee(),{buildDcaOrderList:f}=Ot(),{peripherySdk:j}=me(),{formatLimitOrderList:b}=$t(),d=async()=>{if(t){l(!0);const w=await s(t.address);if(console.log("ðŸš€ ~ fetchUserLimitOrderIds ~ indexer:",w),w)try{return(await j.ClmmSDK.fullClient.getDynamicFieldsByPage(w)).data.map(T=>T.name.value)}catch(m){console.log("ðŸš€ ~ fetchUserLimitOrderIds ~ error:",m)}}return[]},C=async()=>{if(t){o(!0);const w=await a(t.address);if(console.log("ðŸš€ ~ fetchUserDacOrderIds ~ indexer:",w),w)try{return(await j.ClmmSDK.fullClient.getDynamicFieldsByPage(w)).data.map(T=>T.name.value)}catch(m){console.log("ðŸš€ ~ fetchUserDacOrderIds ~ error:",m)}}return[]};return{fetchActiveOrderList:async()=>{try{const w=await d(),m=await C(),_=await j.ClmmSDK.fullClient.batchGetObjects([...w,...m],{showType:!0,showContent:!0}),T=_.filter(S=>{var F,g;return(g=(F=S.data)==null?void 0:F.type)==null?void 0:g.includes("limit_order::LimitOrder")}),E=_.filter(S=>{var F,g;return(g=(F=S.data)==null?void 0:F.type)==null?void 0:g.includes("order::Order")}),y=T.map(S=>Ct.buildLimitOrderInfo(S)).filter(S=>S!==void 0).filter(S=>S.status===Ue.PartialCompleted||S.status===Ue.Running),v=E.map(S=>{var $,ie,W,ae,ne,ce,Be,Fe;const F=xe((($=S.data)==null?void 0:$.type)||""),g=F.type_arguments[0],H=F.type_arguments[1];return{in_coin_type:g,out_coin_type:H,...(W=(ie=S.data)==null?void 0:ie.content)==null?void 0:W.fields,id:(Be=(ce=(ne=(ae=S.data)==null?void 0:ae.content)==null?void 0:ne.fields)==null?void 0:ce.id)==null?void 0:Be.id,version:(Fe=S.data)==null?void 0:Fe.version}}),x=new Set;for(const S of y)x.add(S.pay_coin_type),x.add(S.target_coin_type);for(const S of v)x.add(S.in_coin_type),x.add(S.out_coin_type);await n(Array.from(x));const k=await b(y);i(k);const{activeResult:L,pastResult:P}=await f(v);r(L),c(P),console.log("ðŸš€ ~ fetchActiveOrderList ~ limitOrderList:",k),console.log("ðŸš€ ~ fetchActiveOrderList ~ dcaOrderList:",v),p(Array.from(x))}catch(w){console.log("ðŸš€ ~ fetchActiveOrderList ~ error:",w)}finally{l(!1),o(!1)}},resetUserData:()=>{i([]),r([]),c([])}}}function an(){const{currentAccount:t}=U(),{clmmSdk:n}=st(),{xCetusSdk:s}=me(),{buildFarmsPositionType:a,buildBurnPositionType:l}=Kt(),{setPosBaseList:i,setFullRangePosBaseList:o,setPosBaseListLoading:r}=oe(),{setVeNFT:c,setVeNFTLoading:p,setLockCetusList:f,clearData:j,owner:b,setLockCetusListLoading:d}=Q(),{formatPosBaseList:C}=it();return{fetchOwnerNFT:async()=>{try{if(t){r(!0),p(!0);const w=await n.fullClient.getOwnedObjectsByPage(t.address,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{MatchAny:[{Package:X.clmm_sdk_options.clmm_pool.package_id},{StructType:a},{StructType:l},{StructType:ws},{StructType:Cs}]}});let m=await C(w);i(m),r(!1),(m==null?void 0:m.length)==0&&o([]);const _=ys(w.data);if(_){if(c(_,t.address),b===t.address){const T=await _s(w.data,s);console.log("ðŸš€ ~ fetchOwnerNFT ~ lockList:",T),f(T)}}else d(!1);return{veNFT:_,posBaseList:m}}}catch(w){console.error("ðŸš€ ~ fetchOwnerNFT ~ error:",w),w instanceof TypeError&&(r(!1),i([]))}finally{r(!1),p(!1)}return{veNFT:void 0,posBaseList:[]}},resetUserData:()=>{i([]),j()}}}function rn(){const{currentAccount:t}=U(),{peripherySdk:n}=me(),{clmmSdk:s}=st();it();const{getPosPoolsOriginalObj:a,getPosPoolsRelatedData:l}=Yt(),{getPosLiquidityData:i}=Qt(),{setPosLiquidityData:o,setFarmsPosRewardsData:r,setFarmsPosRewardsDataLoading:c,setPosRewardsData:p,setPosRewardsDataLoading:f,setPosFeeData:j,setPosFeeDataLoading:b}=oe(),{formatFarmsRewardsData:d}=It(),{formatPosRewardsData:C}=Zt(),{formatPosFeeData:R}=Jt(),{posBaseList:D,setShowPosListLength:w,setMyPosYieldValue:m}=oe(),{refreshCoinPriceInfo:_}=Ee(),T=async y=>{var L;const v=y.filter(P=>P.posType==="farms"&&P.farmsPool),x=await a(y);if(l(y,x),((L=Object.keys(x))==null?void 0:L.length)===0)throw o({}),new Error("No pool data found");i(y,x);const k=new yt;v.length>0&&v.forEach(P=>{n.Farms.buildCalculateFarmingReward({pool_id:P.farmsPool,position_nft_id:P.id},k)}),y.forEach(P=>{s.Rewarder.buildFetchPosFee({poolAddress:P.clmmPool,positionId:P.posId,coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB},k)}),y.filter(P=>P.posType!=="farms").forEach(P=>{const S=x[P.clmmPool];s.Rewarder.buildFetchPosReward({poolAddress:P.clmmPool,positionId:P.posId,coinTypeA:P.coinTypeA,coinTypeB:P.coinTypeB,rewarderInfo:S.rewarder_infos},k)});try{c(!0),f(!0),b(!0);const P=await s.fullClient.devInspectTransactionBlock({transactionBlock:k,sender:_t("0x0")}),S=n.Farms.parsedPosRewardData(P),F=s.Rewarder.parsedPosRewardData(P),g=s.Rewarder.parsedPosFeeData(P);console.log("ðŸš€ ~ fetchPosRelatedData ~ parsedPosRewardData:",{farmsRewardData:S,clmmRewardData:F,clmmFeeData:g});const H=await d(S);r(H);const $=await C(Object.values(F).map(W=>{const ae=x[y.find(ne=>ne.posId===W.position_id).clmmPool];return{poolAddress:ae.pool_address,positionId:W.position_id,rewarderAmountOwed:W.rewarder_amount.map((ne,ce)=>({coin_address:ae.rewarder_infos[ce].coinAddress,amount_owed:new _e(ne)}))}}));p($);const ie=await R(Object.values(g).map(W=>({position_id:W.position_id,feeOwedA:new _e(W.fee_owned_a),feeOwedB:new _e(W.fee_owned_b)})),y);j(ie),console.log("ðŸš€ ~ fetchPosRelatedData ~ posFeeData:",{posFeeData:ie,posRewardsData:$,posFarmsRewardsObj:H}),E($,H)}catch(P){console.error("ðŸš€ ~ fetchPosRelatedData ~ error:",P)}finally{c(!1),f(!1),b(!1)}},E=async(y,v)=>{const x=[];if(D.length>0){D.map(L=>{x.push(xe(L==null?void 0:L.coinTypeA).full_address),x.push(xe(L==null?void 0:L.coinTypeB).full_address);const P=y[L==null?void 0:L.posId]||[],S=v[L==null?void 0:L.id]||[],F=P.concat(S);F==null||F.map(g=>{var H;St(g==null?void 0:g.display_amount_owed).gt(0)&&x.push(xe((H=g==null?void 0:g.token)==null?void 0:H.coin_type).full_address)})});const k=Array.from(new Set(x));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",k),_(k)}};return{fetchPosRelatedData:T,resetUserData:()=>{o({}),r({}),p({}),j({})}}}function ln(){const{currentAccount:t}=U(),{setXCetusManager:n,setDividendManager:s}=Q(),{xCetusSdk:a}=me();return{fetchXCetusBaseInfo:async i=>{try{const{xcetus:o,xcetus_dividends:r}=X.xcetus_sdk_options,{dividend_manager_id:c}=Me(r),{xcetus_manager_id:p}=Me(o),f=await a.fullClient.batchGetObjects([p,c],{showType:!0,showContent:!0}),j=f.find(d=>{var C,R;return(R=(C=d.data)==null?void 0:C.type)==null?void 0:R.includes("xcetus::XcetusManager")});if(j){const d=Xe(j),C={id:d.id.id,index:Number(d.index),has_venft:{handle:d.has_venft.fields.id.id,size:d.has_venft.fields.size},nfts:{handle:d.nfts.fields.id.id,size:d.nfts.fields.size},total_locked:d.total_locked,treasury:d.treasury.fields.total_supply.fields.value};console.log("ðŸš€ ~ fetchXCetusBaseInfo ~ xCetusManager:",C),n(C)}const b=f.find(d=>{var C,R;return(R=(C=d.data)==null?void 0:C.type)==null?void 0:R.includes("dividend::DividendManager")});if(b){const d=Xe(b),C=tt.buildDividendManager(d);console.log("ðŸš€ ~ fetchXCetusBaseInfo ~ dividendManager:",C),a.XCetusModule.updateCache(`${c}_getDividendManager`,C),s(C)}}catch(o){console.log("ðŸš€ ~ fetchXCetusBaseInfo ~ error:",o)}}}}function cn(t){const{currentAccount:n}=U(),{fetchCoinHoldingList:s,resetUserData:a}=rt(),{fetchPosRelatedData:l,resetUserData:i}=rn(),{fetchActiveOrderList:o,resetUserData:r}=on(),{setAutoRefreshCount:c}=I(),{fetchOwnerNFT:p,resetUserData:f}=an(),{fetchXCetusBaseInfo:j}=ln(),{addTask:b,removeTask:d}=Ts(),[C,R]=u.useState([]),D=u.useRef(n),{fetchOwnerLockCetusList:w}=Ss(),{setOrderListLoading:m}=le(),{setLockCetusListLoading:_}=Q(),{setPosBaseListLoading:T}=oe(),{setIsCoinHoldingLoading:E}=Ce(),O=()=>{a(),i(),r(),f()};u.useEffect(()=>{var S,F;n?((S=D.current)!=null&&S.address&&((F=D.current)==null?void 0:F.address)!==(n==null?void 0:n.address)&&(c(!1),O(),C.forEach(g=>{d(g.id)})),L()):(O(),C.forEach(g=>{d(g.id)})),D.current=n},[n==null?void 0:n.address]);const y={id:en,run:s},v={id:tn,run:p,onSuccess:S=>{const{veNFT:F,posBaseList:g}=S;l(g),F&&(n!=null&&n.address)&&w(n==null?void 0:n.address)}},x={id:nn,run:j},k={id:sn,run:o},L=()=>{const S=[];m(!0),_(!0),T(!0),E(!0),t==="wallet"?S.push(y,v,k,x):t==="liquidity"?S.push(v,y,k,x):t==="orders"?S.push(k,y,v,x):S.push(v,x,y,k),R(S),S.forEach(F=>{b(F)})};return{refreshTask:()=>{n&&(C.forEach(S=>{d(S.id)}),L())}}}const pe=t=>t?fe(t,2):"$--",dn=(...t)=>t.reduce((n,s)=>n.plus(s&&+s?s:0),z(0)).toString();function xo(){const{tab:t}=is(),{currentAccount:n,onWalletModal:s}=U(),a=Ie(),{posBaseListLoading:l,posLiquidityDataLoading:i}=oe(),{holdingsTotalUsd:o,isCoinPriceLoading:r,isCoinHoldingLoading:c}=Ce(),{clmmTotalTvl:p}=ns(),{orderTotalTvl:f}=Zs(),{orderListLoading:j}=le(),{isAutoRefresh:b,dcaOrderListLoading:d,setAutoRefreshCount:C,resetAutoRefreshCount:R}=I(),{xCetusTotalTvl:D}=Js(),{lockCetusListLoading:w,veNFTLoading:m,veNFT:_}=Q(),T=u.useMemo(()=>t||"wallet",[t]),{refreshTask:E}=cn(T),O=!b&&(c||r),y=!b&&(l||i),v=!b&&(j||d),x=!b&&(w||m),k=u.useMemo(()=>(console.log("ðŸš€ ~ ProfilePage ~ holdingsTotalUsd",o,p,f,D),{wallet:{totalValue:pe(o),isLoading:O},liquidity:{totalValue:pe(p),isLoading:y},orders:{totalValue:pe(f),isLoading:v},xCetus:{totalValue:pe(D),isLoading:x}}),[o,p,f,D,O,y,v,x]),L=[{title:"Wallet Holdings",value:"wallet",route:"/profile?tab=wallet",activeImgUrl:"/images/wallet_tab.png",showTooltip:!1},{title:"Liquidity",value:"liquidity",route:"/profile?tab=liquidity",activeImgUrl:"/images/liquidity_tab.png",showTooltip:!1},{title:"Orders",value:"orders",route:"/profile?tab=orders",activeImgUrl:"/images/order_tab.png",showTooltip:!0,tooltip:" Total amount of active orders (Limit & DCA)"},{title:"xCETUS",value:"xCetus",route:"/profile?tab=xCetus",activeImgUrl:"/images/xCetus_tab.png",showTooltip:!1}],P=u.useMemo(()=>dn(D,p,f,o),[D,p,f,o]);u.useEffect(()=>R(!1),[]);const[S,F]=u.useState(!1);return u.useEffect(()=>{F(!0)},[]),e.jsx(B,{minW:"1200px",p:"40px 20px 0",margin:"0px auto",gap:"12px",alignItems:"start",children:S?n!=null&&n.address?e.jsxs(B,{w:"100%",gap:"12px",alignItems:"start",children:[e.jsx(Fs,{handleRefresh:g=>{C(!g),E()},totalValue:P,isLoading:!b&&(m||l||j||d)}),e.jsx(un,{tabList:L,activeTab:T,tabData:k,onClickTab:g=>a(`/profile?tab=${g}`)}),T==="wallet"&&e.jsx(Xs,{}),T==="liquidity"&&e.jsx(zs,{}),T==="orders"&&e.jsx(Es,{}),T==="xCetus"&&e.jsx(Is,{})]}):e.jsx(te,{type:"nowallet",mt:"20px",onboard:()=>s(!0)}):e.jsx(gt,{h:"300px",w:"100%",justifyContent:"center",alignItems:"center",children:e.jsx(Ve,{})})})}function un({tabList:t,activeTab:n,tabData:s,onClickTab:a}){return e.jsx(A,{w:"100%",mt:"10px",children:t.map(l=>{var i,o;return e.jsxs(G,{w:"25%",p:"24px 16px",h:"94px",bgImage:n===l.value?"url(/images/tab_active.png)":"none",bgSize:"100% 100%",borderRadius:"16px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer",bg:"block_color_opacity.50",backdropFilter:"blur(20px)",onClick:()=>a(l.value),_hover:{bgImage:"url(/images/tab_active.png)",bgSize:"100% 100%",img:{opacity:"0.8"}},children:[e.jsxs(B,{align:"flex-start",gap:"12px",children:[e.jsx(h,{fontSize:"14px",color:"text_caption",children:l.title}),e.jsx(A,{h:"22px",children:e.jsx(De,{placement:"top",tooltip:e.jsx(h,{fontSize:"12px",lineHeight:"20px",color:"text_caption",children:l.tooltip}),showTooltip:l.showTooltip,children:e.jsx(se,{as:"button",children:e.jsx(ee,{isLoaded:!((i=s[l.value])!=null&&i.isLoading),children:e.jsx(h,{fontSize:"22px",fontWeight:"500",color:"text_caption",children:(o=s[l.value])==null?void 0:o.totalValue})})})})})]}),e.jsx(ht,{w:"48px",h:"48px",src:l.activeImgUrl,opacity:n===l.value?"0.8":"0.4"})]},l.value)})})}export{xo as default};
//# sourceMappingURL=Profile-BQLrqv46.js.map
