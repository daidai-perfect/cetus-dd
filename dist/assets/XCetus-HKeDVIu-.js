import{a as f,j as e,X as _e,Y as Te,Z as ve,$ as ke,a8 as Re,a0 as Ae,a1 as Le,V as y,H as T,T as x,v as W,f as re,a2 as Me,a3 as Ee,a4 as Ie,a5 as De,C as te,a7 as q,u as pe,I as ue}from"./vendor-DYqnJE5Q.js";import{u as J}from"./useTransaction-1AMORyVA.js";import{k as X,e as Y,ao as U,q as O,d as $,p as ie,w as oe,G as z,D as fe,c as he,B as I,ag as ce,ap as ge,a as K,S as G,j as V,y as ze,I as Ue,H as le,m as Pe,R as ne,J as Oe}from"./index-nq5C95Tz.js";import{M as Z}from"./msafe-oYBkW7LJ.js";import{u as H}from"./useAccountBalance-BX7BTRVK.js";import{u as me}from"./useTokenBalance-BVxS1GuY.js";import{u as Q,a as ee,b as be,c as Xe,d as Be,e as Fe}from"./useXCetusHelper-Bbv1m28d.js";import{T as Ce}from"./TradeInputGroup-DujJ6LVo.js";import{C as Ve}from"./CheckBox-Bvd6pUqf.js";import{H as We}from"./HighlightText-OSLpY7EK.js";import{H as xe}from"./HTextLabelBox-C-QWDImA.js";import{V as Se}from"./VTextLabelBox-EJKVPb6X.js";import{u as He}from"./useToken-Bsr24yyi.js";import{u as Ne}from"./useRpcListener-xMDaOWK-.js";import"./useSigner-CuKBtkN-.js";import"./_getAllKeysIn-CD5__RpX.js";import"./usePreviousValue-COG3o_Rs.js";const we=(a,t,n="seconds")=>{const r=()=>{const l=a-new Date().getTime();if(l<=0)return{years:0,months:0,days:0,hours:0,minutes:0,seconds:0};const d=Math.floor(l/1e3%60),o=Math.floor(l/1e3/60%60),p=Math.floor(l/(1e3*60*60)%24),u=Math.floor(l/(1e3*60*60*24)%30),b=Math.floor(l/(1e3*60*60*24*30)%12),S=Math.floor(l/(1e3*60*60*24*365));return n==="days"?{years:0,months:0,days:u+b*30+S*365,hours:p,minutes:o,seconds:d}:n==="months"?{years:0,months:b+S*12,days:u,hours:p,minutes:o,seconds:d}:{years:S,months:b,days:u,hours:p,minutes:o,seconds:d}},[s,i]=f.useState(r());return f.useEffect(()=>{const c=setInterval(()=>{const l=r();i(l),l.years===0&&l.months===0&&l.days===0&&l.hours===0&&l.minutes===0&&l.seconds===0&&(clearInterval(c),t&&t())},1e3);return()=>clearInterval(c)},[a]),s};function Ge(){const{fetchAccountBalance:a}=H(),{fetchOwnerLockCetusList:t}=Q(),{signAndExecuteTransaction:n}=J(),{currentAccount:r}=X(),{fetchOwnerVeNFT:s}=ee(),{xCetusSdk:i}=Y(),{veNFT:c}=U(),[l,d]=f.useState(""),[o,p]=f.useState(""),{balanceInfo:u}=me(O.cetus_coin),b=m=>{d(m),p(m)},[S,w]=f.useState(!1),v=async()=>{w(!0);const m={venft_id:c==null?void 0:c.id,amount:ie(l,9).toFixed(0)},D=await i.XCetusModule.convertPayload(m),L=await n(D,{getShowInfo:k=>{const M=`Converting ${oe(l)} CETUS to ${oe(l)} xCETUS`,P={modalTitleText:"Convert",modalDescriptionText:M,toastDescriptionContent:M};if(k==="success"){const R=M.replace("Converting","Converted");P.modalDescriptionText=R,P.toastDescriptionContent=R}return P}},{msafeParams:{action:Z.xCETUSConvert,txbParams:m}});w(!1),L&&(r&&s(r==null?void 0:r.address,!0),d(""),p(""),a(),t())},C=f.useMemo(()=>{const m={text:"Convert",disabled:!1};return r!=null&&r.address?+l?(+l&&$(l).gt((u==null?void 0:u.balanceFormat)||0)&&(m.disabled=!0,m.text="Insufficient CETUS Balance"),m):(m.text="Enter an amount",m.disabled=!0,m):(m.text="Connect Wallet",m.disabled=!1,m)},[u==null?void 0:u.balanceFormat,r==null?void 0:r.address,l]);return{inputAmountFrom:l,inputAmountTo:o,handleInputChange:b,balanceInfoFrom:u,convertLoading:S,btnText:C.text,btnDisabled:C.disabled,handleConvertClick:v}}function je(a){const{isOpen:t,onClose:n,onSubmitClick:r}=a,{setShowConvertModel:s}=U(),[i,c]=f.useState(!1);return e.jsxs(_e,{autoFocus:!1,returnFocusOnClose:!1,isOpen:t,onClose:n,isCentered:!0,children:[e.jsx(Te,{}),e.jsxs(ve,{children:[e.jsx(ke,{children:e.jsx(Re,{fontWeight:"500",fontSize:"16px"})}),e.jsx(Ae,{}),e.jsx(Le,{textAlign:"center",p:"0px",children:e.jsxs(y,{w:"100%",gap:"20px",p:"20px",pb:"90px",pos:"relative",children:[e.jsx(We,{text_color:"text_caption",text_size:"14px",text:` Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting
              durations correspond to different redeem ratios. Learn more`,keywords:["Learn more"],onKeywordClick:()=>{window.open("https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus","_blank")}}),e.jsxs(T,{children:[e.jsx(Ve,{checked:i,onClick:()=>{c(!i)}}),e.jsx(x,{color:"text_caption",children:"Do not remind again."})]}),e.jsx(W,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{s(!i),r()},children:"Convert"})]})})]})]})}function $e(a){const{availableXCetusAmount:t,iconParams:n,onIconClick:r}=a,{currentAccount:s,onWalletModal:i}=X(),{inputAmountFrom:c,inputAmountTo:l,handleInputChange:d,balanceInfoFrom:o,btnText:p,btnDisabled:u,handleConvertClick:b,convertLoading:S}=Ge(),{showConvertModel:w}=U(),[v,C]=f.useState(!1);return e.jsxs(y,{w:"100%",gap:"8px",children:[e.jsx(Ce,{onClick:r,borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px"},title:"From",balance:(o==null?void 0:o.balanceFormat)||"",value:c,amountValue:"",loading:!1,onChange:m=>{d(m)},selectable:!1,placeholder:"0.0",token:O.cetus_coin},to:{wrapStyle:{borderRadius:"12px"},title:"To",balance:z(t,9),value:l,half:!1,max:!1,amountValue:"",onChange:m=>{d(m)},selectable:!1,placeholder:"0.0",token:O.x_cetus_coin},iconParams:n}),e.jsx(W,{w:"100%",borderRadius:"12px",h:"56px",fontSize:"20px",fontWeight:"500",disabled:u||S,isLoading:S,onClick:()=>{console.log(s,w,"showConvertModel"),s?w?C(!0):b():i(!0)},children:p}),v&&e.jsx(je,{isOpen:v,onClose:()=>{C(!1)},onSubmitClick:()=>{C(!1),b()}})]})}function Ye(a){const{fetchAccountBalance:t}=H(),{fetchOwnerLockCetusList:n}=Q(),{signAndExecuteTransaction:r}=J(),{currentAccount:s}=X(),{fetchOwnerVeNFT:i}=ee(),{xCetusSdk:c}=Y(),{veNFT:l}=U(),[d,o]=f.useState(""),[p,u]=f.useState(""),[b,S]=f.useState(180),[w,v]=f.useState(""),[C,m]=f.useState(!0),{balanceInfo:D}=me(O.cetus_coin),L=(g,E)=>{m(E),E?o(g):u(g),M(g,E,b)},k=g=>{S(g),M(C?d:p,C,g)},M=async(g,E,B)=>{if(+g){const _=ie(g,9);if(E){const A=await c.XCetusModule.redeemNum(_,B);u(z(A.amount_out,9)),v($(A.percent).mul(100).toFixed(2,fe.ROUND_DOWN))}else{const A=await c.XCetusModule.reverseRedeemNum(_,B);o(z(A.amount_out,9)),v($(A.percent).mul(100).toFixed(2,fe.ROUND_DOWN))}}else o(""),u(""),v("")},[P,R]=f.useState(!1),N=async()=>{if(!l)return;R(!0);const g={venft_id:l.id,amount:ie(d,9).toFixed(0),lock_day:b},E=c.XCetusModule.redeemLockPayload(g),B=await r(E,{getShowInfo:_=>{const A=`Redeeming ${oe(d)} xCETUS to ${oe(p)} CETUS`,h={modalTitleText:"Redeem",modalDescriptionText:A,toastDescriptionContent:A};if(_==="success"){const j=A.replace("Redeeming","Redeemed");h.modalDescriptionText=j,h.toastDescriptionContent=j}return h}},{msafeParams:{action:Z.xCETUSRedeemLock,txbParams:g}});R(!1),B&&(s&&i(s==null?void 0:s.address,!0),o(""),u(""),t(),n())},F=f.useMemo(()=>{const g={text:"Redeem",disabled:!1};return s!=null&&s.address?+d?(+d&&$(d).gt(a||0)&&(g.disabled=!0,g.text="Insufficient xCETUS Balance"),g):(g.text="Enter an amount",g.disabled=!0,g):(g.text="Connect Wallet",g.disabled=!1,g)},[a,s==null?void 0:s.address,d]);return{inputAmountFrom:d,inputAmountTo:p,handleInputChange:L,balanceInfoTo:D,convertLoading:P,btnText:F.text,btnDisabled:F.disabled,handleConvertClick:N,day:b,handleDayChange:k,percent:w}}function Ke(a){const{day:t,onChange:n}=a,r=f.useMemo(()=>`${t}D`,[t]),s=[{label:"15D"},{label:"30D"},{label:"90D"},{label:"180D"}];return e.jsxs(re,{children:[e.jsxs(T,{w:"100%",justifyContent:"space-between",m:"10px 0",children:[e.jsxs(x,{fontSize:"16px",color:"text_caption",whiteSpace:"nowrap",children:[t," Days"]}),e.jsx(he,{type:"outlineTab",tabList:s,currentTab:r,handleChangeTab:i=>{i.label==="MAX"?n(100):n(i.label.replace("D",""))},wrapStyle:{flex:"1",maxW:"300px",h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"12px",margin:"0px"}})]}),e.jsxs(Me,{"aria-label":"slider-ex-1",min:15,max:180,focusThumbOnChange:!1,value:Number(t),onChange:i=>n(i),children:[e.jsx(Ee,{h:"8px",children:e.jsx(Ie,{h:"4px"})}),e.jsx(De,{})]})]})}function qe(a){const{availableXCetusAmount:t,iconParams:n,onIconClick:r}=a,{currentAccount:s,onWalletModal:i}=X(),{inputAmountFrom:c,inputAmountTo:l,handleInputChange:d,balanceInfoTo:o,btnText:p,btnDisabled:u,handleConvertClick:b,day:S,handleDayChange:w,percent:v,convertLoading:C}=Ye(t),{showConvertModel:m}=U(),[D,L]=f.useState(!1);return e.jsxs(y,{w:"100%",gap:"8px",children:[e.jsx(Ce,{onClick:r,borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px"},title:"From",balance:t,value:c,amountValue:"",loading:!1,onChange:k=>{d(k,!0)},selectable:!1,placeholder:"0.0",token:O.x_cetus_coin},to:{wrapStyle:{borderRadius:"12px"},title:"To",balance:(o==null?void 0:o.balanceFormat)||"",value:l,half:!1,max:!1,amountValue:"",onChange:k=>{d(k,!1)},selectable:!1,placeholder:"0.0",token:O.cetus_coin},iconParams:n}),e.jsxs(I,{borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[e.jsx(x,{mb:"16px",color:"primary_gray",children:"Vesting duration"}),e.jsx(Ke,{day:S,onChange:k=>{w(Number(k))}})]}),e.jsx(I,{borderRadius:"12px",p:"0px",border:"none",children:e.jsxs(y,{w:"100%",gap:"20px",children:[e.jsx(W,{mt:"-1px",w:"100%",borderRadius:"12px",h:"56px",fontSize:"20px",fontWeight:"500",disabled:u||C,isLoading:C,onClick:()=>{s?m?L(!0):b():i(!0)},children:p}),+v&&e.jsx(T,{w:"100%",p:"34px 16px 20px",border:"1px solid",borderColor:"border",mt:"-34px",borderRadius:"12px",children:e.jsx(xe,{label:"Redeem ratio",labelStyle:{fontSize:"14px"},value:ce(v),valueStyle:{fontSize:"14px"}})})]})}),D&&e.jsx(je,{isOpen:D,onClose:()=>{L(!1)},onSubmitClick:()=>{L(!1),b()}})]})}function Je({nextStartTime:a,refresh:t}){const{days:n,hours:r,minutes:s,seconds:i}=we(a*1e3,t);return e.jsxs(y,{w:"100%",gap:"16px",borderRadius:"16px",m:"-1px",p:{base:"24px 12px",lg:"24px"},sx:{backgroundImage:"url('/images/img_xcetus@2x.png')",backgroundPosition:"top center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:"Convert CETUS to xCETUS to start earning"}),e.jsx(x,{children:"Reward distribution in "}),e.jsxs(T,{children:[e.jsx(I,{borderRadius:"4px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[n,"d"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[r,"h"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[s,"m"]})})}),e.jsx(x,{fontSize:"16px",textColor:"text_caption",children:":"}),e.jsx(I,{borderRadius:"4px",w:"40px",h:"40px",p:"0px",bg:"block_color",borderColor:"transparent",children:e.jsx(te,{w:"40px",h:"40px",textAlign:"center",children:e.jsxs(x,{fontSize:"16px",textColor:"text_caption",children:[i,"s"]})})})]})]})}function Ze(){const{fetchAccountBalance:a}=H(),{fetchOwnerLockCetusList:t}=Q(),{signAndExecuteTransaction:n}=J(),{xCetusSdk:r}=Y(),{veNFT:s}=U(),{fetchOwnerVeNFT:i}=ee(),{currentAccount:c}=X(),[l,d]=f.useState(!1);return{handleCancelOrder:async p=>{if(!s)return;d(!0);const u={venft_id:s.id,lock_id:p.id},b=r.XCetusModule.cancelRedeemPayload(u),S=await n(b,{},{msafeParams:{action:Z.xCETUSCancelRedeem,txbParams:u}});d(!1),S&&(a(),t(),c&&i(c==null?void 0:c.address,!0))},cancelOrderLoading:l}}function Qe(){const{fetchAccountBalance:a}=H(),{fetchOwnerLockCetusList:t}=Q(),{signAndExecuteTransaction:n}=J(),{xCetusSdk:r}=Y(),{veNFT:s}=U(),{fetchOwnerVeNFT:i}=ee(),{currentAccount:c}=X(),[l,d]=f.useState(!1);return{handleClaimOrder:async p=>{if(d(!0),!s)return;const u={lock_id:p,venft_id:s.id},b=await r.XCetusModule.redeemPayload(u),S=await n(b,{},{useDevInspect:!1,txAction:"signAndExecuteTransactionBlock",msafeParams:{action:Z.xCETUSRedeem,txbParams:u}});d(!1),S&&(a(),t(),c&&i(c==null?void 0:c.address,!0))},claimOrderLoading:l}}function et(a){const{lockCetusList:t}=a;return e.jsx(I,{p:{base:"16px 8px 8px",lg:"16px"},borderRadius:"16px",children:e.jsxs(y,{w:"100%",alignItems:"start",gap:"16px",children:[e.jsx(x,{fontSize:"16px",color:"text_caption",mt:"4px",children:"Vesting"}),t.map(n=>e.jsx(tt,{info:n},n.id))]})})}function tt(a){const{info:t}=a,[n,r]=f.useState(!1),{days:s,hours:i,minutes:c,seconds:l}=we(t.locked_until_time*1e3,()=>{r(!0)},"days");f.useEffect(()=>{r(!ge.isLocked(t))},[]);const{cancelOrderLoading:d,handleCancelOrder:o}=Ze(),{claimOrderLoading:p,handleClaimOrder:u}=Qe(),b=w=>{w?u(t.id):o(t)},{isApp:S}=K();return e.jsx(I,{borderRadius:"12px",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(q,{flexDir:{base:"column",lg:"row"},w:"100%",justifyContent:{base:"flex-start",lg:"space-between"},gap:{base:"20px",lg:"8px"},children:[e.jsxs(y,{gap:{base:"20px",lg:"8px"},alignItems:"start",children:[e.jsxs(T,{gap:"6px",children:[e.jsxs(x,{color:"primary_gray",children:["Available ",n?"":" in"," "]}),!n&&e.jsxs(x,{color:"text_caption",children:[s,"d : ",i,"h : ",c,"m : ",l,"s"]})]}),S?e.jsxs(y,{w:"100%",align:"center",gap:"8px",children:[e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.x_cetus_coin.logo_url,p:"4px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.xcetus_amount,9),9)," xCETUS"]})]}),e.jsx(x,{color:"text_caption",transform:"rotate(90deg)",children:"→"}),e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.cetus_coin.logo_url,p:"2px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.cetus_amount,9),9)," CETUS "]})]})]}):e.jsxs(T,{children:[e.jsx(G,{imageUrl:O.x_cetus_coin.logo_url,p:"4px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.xcetus_amount,9),9)," xCETUS →"]}),e.jsx(G,{imageUrl:O.cetus_coin.logo_url,p:"2px",imgBoxStyle:{w:"24px",h:"24px",bg:"block_color",borderColor:"transparent",borderRadius:"20px"}}),e.jsxs(x,{color:"text_caption",children:[V(z(t.cetus_amount,9),9)," CETUS "]})]})]}),e.jsx(T,{w:{base:"100%",lg:"auto"},justify:"center",children:e.jsx(W,{onClick:()=>{d||p||b(!!n)},variant:"outline",h:{base:"40px",lg:"28px"},w:{base:"168px",lg:"80px"},borderRadius:{base:"12px",lg:"8px"},fontSize:"14px",isLoading:d||p,color:n?"text_highlight":"primary_gray",bg:"button_ghost_bg",children:n?"Claim":"Cancel"})})]})})}function nt(){const{fetchAccountBalance:a}=H(),{signAndExecuteTransaction:t}=J(),{xCetusSdk:n}=Y(),{veNFT:r}=U(),[s,i]=f.useState(!1),{fetchVeNFTDividendInfo:c}=be();return{handleClaimReward:async d=>{if(r){i(!0),console.log("🚀 ~ file: useXCetusClaimRewardAction.ts:23 ~ handleClaimReward ~ rewardList:",d);try{const o=n.XCetusModule.redeemDividendV3Payload(r.id,d),p=await t(o,{},{useDevInspect:!0,txAction:"signAndExecuteTransactionBlock",msafeParams:{action:Z.xCETUSClaimStakingRwewards,txbParams:{veNftId:r.id,rewardList:d}}});i(!1),p&&(a(),c(r.id))}catch(o){console.log("🚀 ~ file: useXCetusClaimRewardAction.ts:40 ~ handleClaimReward ~ error:",o)}finally{i(!1)}}},claimRewardLoading:s}}function st(a){const{myShare:t,cetusApr:n,totalRewardValue:r,summaryRewardList:s,rewardList:i}=a,{claimRewardLoading:c,handleClaimReward:l}=nt(),{currentAccount:d}=X(),{veNFTLoading:o}=U(),{isApp:p}=K();return e.jsxs(y,{w:"100%",alignItems:"start",p:{base:"4px 8px 8px",lg:"4px 16px 16px"},gap:"16px",children:[e.jsx(x,{fontSize:"16px",color:"text_caption",children:"xCETUS Staking Rewards"}),e.jsxs(q,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",justifyContent:"space-between",children:[e.jsx(I,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(T,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsxs(T,{gap:"4px",children:[e.jsx(x,{color:"primary_gray",children:"est.APR"}),e.jsx(ze,{placement:p?"bottom-end":"top-start",maxW:{base:"calc(100vw - 16px)",lg:"unset"},tooltip:p?e.jsxs(re,{as:"div",lineHeight:"20px",children:[e.jsx(x,{as:"span",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders. "}),e.jsx(x,{as:"span",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100% "}),e.jsx(x,{as:"span",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}):e.jsxs(y,{alignItems:"start",children:[e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"The estimated APR of the current epoch for all xCETUS holders."}),e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_highlight",children:"APR = ($ Rewards of the upcoming week * 52) / $ Total xCETUS staked * 100%"}),e.jsx(x,{whiteSpace:"nowrap",fontSize:"12px",color:"text_caption",children:"Both real-time value of rewards and CETUS price will affect the APR fluctuation."})]}),children:e.jsx(re,{children:e.jsx(Ue,{xlinkHref:"#icon-icon_tips"})})})]}),e.jsx(pe,{isLoaded:n!=="0",children:e.jsxs(x,{fontSize:"18px",color:"text_caption",children:["≈",ce(n,2)]})})]})}),e.jsx(I,{h:{base:"60px",lg:"88px"},p:{base:"20px 12px",lg:"20px 24px"},borderRadius:"12px",w:"100%",bg:"bg_primary",children:e.jsxs(T,{h:"100%",w:"100%s",justifyContent:"space-between",children:[e.jsx(x,{color:"primary_gray",children:"Your Share"}),e.jsx(pe,{isLoaded:!o,children:e.jsx(x,{fontSize:"18px",color:"text_caption",children:t!=="--"?`≈${t}`:t})})]})})]}),"(",e.jsx(I,{borderRadius:"12px",w:"100%",p:{base:"20px 12px",lg:"20px 24px"},bg:"bg_primary",children:e.jsxs(y,{h:"100%",w:"100%",gap:{base:"20px",lg:"14px"},children:[e.jsxs(T,{w:"100%",justifyContent:"space-between",children:[e.jsx(x,{color:"primary_gray",children:"Pending Yield"}),e.jsxs(T,{justifyContent:"end",gap:"12px",children:[e.jsx(x,{fontSize:"18px",color:"text_caption",children:d?le(r,2):"--"}),!p&&s.length>0&&e.jsx(W,{onClick:()=>{c||l(i)},variant:"outline",h:"28px",w:"80px",borderRadius:"8px",fontSize:"14px",disabled:c,isLoading:c,bg:"button_ghost_bg",children:"Claim"})]})]}),s.length>0&&e.jsx(q,{w:"100%",flexDir:{base:"column",lg:"row"},align:"center",justify:{base:"center",lg:"flex-start"},gap:{base:"20px",lg:"8px"},children:s.map(u=>e.jsx(ot,{info:u},u.coin_type))}),p&&s.length>0&&e.jsx(W,{onClick:()=>{c||l(i)},variant:"outline",h:"40px",w:"168px",borderRadius:"12px",fontSize:"14px",disabled:c,isLoading:c,bg:"button_ghost_bg",children:"Claim"})]})}),")"]})}function ot(a){const{info:t}=a,{tokenInfo:n}=He(t.coin_type),{isApp:r}=K();return r?e.jsx(xe,{label:e.jsxs(T,{children:[e.jsx(G,{imageUrl:n==null?void 0:n.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(x,{children:n==null?void 0:n.symbol})]}),value:e.jsxs(y,{alignItems:"flex-end",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:t.amount}),$(t.value).gt("0")&&e.jsx(x,{children:le(t.value,2)})]})}):e.jsx(Se,{wrapStyle:{gap:"10px",flex:1,alignItems:"flex-start"},title:e.jsxs(T,{children:[e.jsx(G,{imageUrl:n==null?void 0:n.logo_url,imageStyle:{w:"24px",h:"24px"}}),e.jsx(x,{children:n==null?void 0:n.symbol})]}),value:e.jsxs(y,{alignItems:"flex-start",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:t.amount}),$(t.value).gt("0")&&e.jsx(x,{children:le(t.value,2)})]})})}function at(a){const{totalAmount:t,availableAmount:n,redeemingAmount:r,isLoading:s}=a,{currentAccount:i}=X();return K(),e.jsxs(y,{w:{base:"100%",lg:"100%"},gap:{base:"20px",lg:"28px"},zIndex:"100",mt:{base:"20px",lg:"32px"},children:[e.jsxs(y,{w:"100%",h:"140px",gap:"20px",borderRadius:"20px",bg:{base:"none",lg:"center / cover no-repeat url('/images/xcetus_banner.png')"},align:"center",justify:"center",children:[e.jsxs(x,{h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_caption",children:["Manage your"," ",e.jsx(x,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"text_green",children:"CETUS"})," ","and"," ",e.jsx(x,{as:"span",h:{base:"28px",lg:"32px"},fontSize:{base:"22px",lg:"32px"},lineHeight:{base:"28px",lg:"32px"},fontWeight:"600",fontStyle:"normal",color:"primary",children:"xCETUS"})]}),e.jsx(W,{h:"28px",w:"132px",fontSize:"14px",fontWeight:"600",variant:"outline",bg:"transparent",borderRadius:"8px",borderColor:"text_highlight",color:"text_highlight",onClick:()=>{window.open("https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus","_blank")},children:"Learn more"})]}),e.jsxs(q,{flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"80%"},justifyContent:{base:"space-between",lg:"space-around"},align:{base:"flex-start",lg:"center"},gap:{base:"16px",lg:"40px"},children:[e.jsx(ae,{isLoading:s,icon:"/images/icon_my_total_xWHALE@2x.png",title:"My total xCETUS",amount:i?V(z(t,9),9).toString():"--",w:{base:"28px",lg:"42px"},h:{base:"24px",lg:"36px"},wrapStyle:{gap:"2px"}}),e.jsx(ae,{isLoading:s,icon:"/images/icon_available_xWHALE@2x.png",title:"Available xCETUS",amount:i?V(z(n,9),9).toString():"--",w:{base:"24px",lg:"36px"},h:{base:"24px",lg:"36px"}}),e.jsx(ae,{isLoading:s,icon:"/images/icon_redeeming_xWHALE@2x.png",title:"Redeeming xCETUS",amount:i?V(z(r,9),9).toString():"--",w:{base:"26px",lg:"38px"},h:{base:"26px",lg:"38px"}})]})]})}function ae(a){const{isLoading:t,icon:n,title:r,amount:s,w:i,h:c,wrapStyle:l={}}=a,{isApp:d}=K();return d?e.jsx(xe,{label:e.jsxs(T,{...l,children:[e.jsx(ue,{src:n,w:i,h:c}),e.jsx(x,{children:r})]}),value:s,isLoading:t,labelStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"14px"}}):e.jsxs(T,{gap:"6px",alignItems:"center",w:{base:"100%",lg:"auto"},...l,children:[e.jsx(ue,{src:n,w:i,h:c}),e.jsx(Se,{wrapStyle:{gap:"8px"},title:r,titleStyle:{fontSize:"14px",color:"primary_gray"},valueStyle:{fontSize:"16px",fontWeight:"500"},value:s,isLoading:t})]})}function rt(){const{xCetusSdk:a}=Y(),{currentAccount:t}=X(),{fetchAccountBalance:n}=H(),{fetchTokenPrices:r}=Pe(),{lockCetusList:s,veNFTLoading:i,lockCetusListLoading:c,clearData:l,owner:d,veNFT:o,XCetusManager:p,setXCetusManager:u,setDividendManager:b,setPhaseDividendInfoMap:S,phaseDividendInfoMap:w}=U(),{nextStartTime:v,currentPeriod:C,calculateCurrPeriod:m}=Xe(),{summaryRewardList:D,rewardList:L,totalRewardValue:k}=Be(C),{fetchVeNFTDividendInfo:M}=be(),P=async h=>{try{const j=await a.XCetusModule.getXcetusManager(h);j&&u(j)}catch(j){console.log("🚀 ~ fetchXCetusManager ~ error:",j)}},R=async h=>{try{const j=await a.XCetusModule.getPhaseDividendInfo(h.toString());if(j)S(j);else{const ye=(h-1).toString();if(!w[ye]){const de=await a.XCetusModule.getPhaseDividendInfo(h.toString());de&&S(de)}}}catch(j){console.log("🚀 ~ fetchXCetusManager ~ error:",j)}},N=async h=>{try{const j=await a.XCetusModule.getDividendManager(h);j&&b(j)}catch(j){console.log("🚀 ~ fetchXCetusManager ~ error:",j)}},{fetchOwnerVeNFT:F}=ee(),g=f.useMemo(()=>{if(o&&t&&!c){const h=ge.getAvailableXCetus(o,s);if(ne(h).gte(0))return h}return"0"},[o==null?void 0:o.xcetus_balance,s]),E=f.useMemo(()=>{if(o){const h=ne(o.xcetus_balance).sub(g);if(h.gte(0))return h.toFixed(0)}return"0"},[o==null?void 0:o.xcetus_balance,g]),B=f.useMemo(()=>{if(p&&o){const h=ne(o.xcetus_balance).div(p.treasury).mul(100);return ne(h).lt(.01)?"<0.01%":ce(h.toString(),3)}return t?"0%":"--"},[p==null?void 0:p.treasury,o==null?void 0:o.xcetus_balance]),_=f.useMemo(()=>{if(C){let h=w[C.toString()];return h===void 0&&(h=w[(C-1).toString()]),h}},[w,C]),{cetusApr:A}=Fe(_,p==null?void 0:p.treasury);return f.useEffect(()=>{if(_){const h=_.bonus_types.map(j=>Oe(j,!1));h&&(h.push("0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"),r(h))}},[_==null?void 0:_.id]),f.useEffect(()=>{C&&C>0&&R(C)},[C]),f.useEffect(()=>{o&&M(o.id)},[o==null?void 0:o.id]),{fetchOwnerVeNFT:F,fetchAccountBalance:n,fetchXCetusManager:P,fetchDividendManager:N,fetchVeNFTDividendInfo:M,veNFTLoading:i,lockCetusListLoading:c,redeemingXCetusAmount:E,availableXCetusAmount:g,veNFT:o,myShare:B,nextStartTime:v,cetusApr:A,summaryRewardList:D,rewardList:L,totalRewardValue:k,lockCetusList:s,calculateCurrPeriod:m}}const se=[{label:"Get xCETUS",value:"Get xCETUS"},{label:"Redeem CETUS",value:"Redeem CETUS"}];function Tt(){const{currentAccount:a}=X(),{fetchOwnerVeNFT:t,fetchXCetusManager:n,fetchVeNFTDividendInfo:r,availableXCetusAmount:s,veNFT:i,veNFTLoading:c,lockCetusListLoading:l,redeemingXCetusAmount:d,fetchDividendManager:o,myShare:p,nextStartTime:u,cetusApr:b,summaryRewardList:S,totalRewardValue:w,lockCetusList:v,rewardList:C,calculateCurrPeriod:m}=rt(),{dividendManager:D}=U(),{fetchOwnerLockCetusList:L}=Q(),[k,M]=f.useState("Get xCETUS"),{fetchAccountBalance:P}=H();Ne({onRpcChange:()=>{n(!1),o(!1),a&&(t(a.address,!0),L(a.address),P())}}),f.useEffect(()=>{a&&(t(a.address,!0),L(a.address))},[a==null?void 0:a.address]),f.useEffect(()=>{n(!1),o(!1),a!=null&&a.address&&P()},[]);const[R,N]=f.useState("#icon-a-icon_trade"),F=()=>{N("#icon-icon_swap1")},g=()=>{N("#icon-a-icon_trade")},E=()=>{var A;const _=(A=se==null?void 0:se.find(h=>(h==null?void 0:h.value)!==k))==null?void 0:A.value;_&&M(_)},{isApp:B}=K();return e.jsxs(y,{gap:"0px",w:"100%",pos:"relative",sx:B?{backgroundImage:"url('/images/xcetus_h5_bg.png')",backgroundPosition:"center 256px",backgroundRepeat:"no-repeat",backgroundSize:"375px 200px"}:{},children:[e.jsx(at,{totalAmount:(i==null?void 0:i.xcetus_balance)||"0",availableAmount:s,redeemingAmount:d,isLoading:l||c}),e.jsxs(q,{flexDir:{base:"column-reverse",lg:"row"},mt:{base:"118px",lg:"28px"},zIndex:100,w:"100%",gap:"16px",alignItems:"start",justifyContent:"space-between",children:[e.jsxs(y,{w:"60%",gap:"16px",minW:{base:"100%",lg:"600px"},children:[e.jsx(I,{p:"0px",borderRadius:"16px",w:"100%",children:e.jsxs(y,{w:"100%",gap:"16px",children:[e.jsx(Je,{nextStartTime:u||0,refresh:()=>{i&&r(i.id),o(!0),D&&m(D)}}),e.jsx(st,{myShare:p.toString(),cetusApr:b,totalRewardValue:w,summaryRewardList:S,rewardList:C})]})}),v.length>0&&e.jsx(et,{lockCetusList:v})]}),e.jsxs(y,{w:"40%",gap:"8px",minW:{base:"100%",lg:"380px"},children:[e.jsx(he,{type:"borderTab",wrapStyle:{w:"100%",h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:se,currentTab:k,handleChangeTab:_=>{M(_==null?void 0:_.value)}}),k==="Get xCETUS"&&e.jsx($e,{availableXCetusAmount:s,onIconClick:E,iconParams:{xlinkHref:R,svgFill:"text_caption",transform:R==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:R==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:F,onMouseLeave:g}}),k==="Redeem CETUS"&&e.jsx(qe,{availableXCetusAmount:z(s,9),onIconClick:E,iconParams:{xlinkHref:R,svgFill:"text_caption",transform:R==="#icon-a-icon_trade"?"":"rotate(90deg)",fontSize:R==="#icon-a-icon_trade"?"12px":"16px",onMouseEnter:F,onMouseLeave:g}})]})]})]})}export{Tt as default};
//# sourceMappingURL=XCetus-HKeDVIu-.js.map
