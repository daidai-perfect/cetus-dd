import{j as e,m as R,$ as F,I as V,a as K,a1 as L,b as H,H as h,g as P,V as S,T as o,bo as M,W as O,C as z,a0 as le,B as $,aB as E,a$ as Q,r as y,a3 as q,S as _,a5 as re,by as ae,d as W}from"./index-Bms7VPPn.js";import{V as oe}from"./VaultsAndFarmsTabFilter-BVrbYr75.js";import{N as D}from"./NoData-ERzY0nmD.js";import{V as X,a as J,u as ie,b as N,c as ne,d as ce}from"./useGetVaultList-vpvs7qNr.js";import{H as B}from"./HTextLabelBox-B7D7NXZW.js";import{C as Z}from"./CetusTooltip-BnVIYeKJ.js";import{V as U}from"./VTextLabelBox-CoRmO_3l.js";import{C as xe}from"./CoinPairInfo-DADOCueB.js";import{a as T,b as m,c as de,d as pe,e as C,T as ue}from"./tr-ZVAY0nv_.js";import{u as he}from"./useTokenBalance-y_yplMah.js";import{u as ge}from"./useAccountBalance-CMsAkds7.js";import"./RefreshButton-z_xfRll-.js";import"./IconBg-DVwNcFqs.js";import"./SortDropBlock-x35w6xAj.js";import"./useGetPoolList-BzobRC0A.js";import"./api-data-utils-DmTd8Tx_.js";import"./useToken-CODAfOk_.js";import"./AddressCopyLink-DU9GogFQ.js";import"./AddressUnderline-BLd1v-88.js";function I(l){const{isOpen:r,jumpVaultsDetail:s,onExpand:a}=l;return e.jsxs(R,{w:{base:"100%",lg:"auto"},flexDir:{base:"column",lg:"row"},justifyContent:{base:"center",lg:"end"},align:"center",gap:{base:"8px",lg:"20px"},children:[e.jsx(F,{fontSize:"14px",h:{base:"40px",lg:"32px"},w:{base:"100%",lg:"100px"},variant:"outline",borderRadius:"8px",onClick:s,children:"Deposit"}),e.jsx(F,{variant:"unstyled",_hover:{bg:"button_ghost_hov_bg"},w:{base:"100%",lg:"32px"},h:{base:"40px",lg:"72px"},minW:"unset",minH:"unset",bg:"button_ghost_bg",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",onClick:a||(()=>{}),children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:r?"rotate(180deg)":"rotate(0deg)"})})]})}function ee(l){var f,v,w,i;const{apiInfo:r,logo_url:s,balanceDisplay:a,holdCoinAmounts:t,sharePoolRate:n,rewardPerA:d,rewardPerB:c}=l,g=K(),{currentAccount:x,onWalletModal:u}=L(),{isApp:p}=H();return x?e.jsxs(R,{flexDir:{base:"column",lg:"row"},bg:"bg_primary",w:"100%",gap:"16px",borderRadius:{base:"8px",lg:"20px"},border:"1px solid",borderColor:"border",p:{base:"8px",lg:"10px 52px 10px 16px"},cursor:"pointer",justifyContent:{base:"center",lg:"space-between"},onClick:()=>{g(`/vaults-detail/${r.vaultsId}`)},children:[e.jsxs(h,{gap:"15px",children:[e.jsx(P,{imageUrl:s,imgBoxStyle:{w:"60px",h:"60px"}}),e.jsxs(S,{gap:"4px",alignItems:"start",children:[e.jsx(o,{color:"primary_gray",children:"Your LP tokens"}),e.jsx(o,{color:"text_caption",children:`${a||"0"} LP`})]})]}),e.jsx(R,{flexDir:{base:"column",lg:"row"},gap:{base:"16px",lg:"8px"},children:p?e.jsxs(e.Fragment,{children:[e.jsx(B,{label:"Pooled assets",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:e.jsxs(R,{gap:{base:"4px",lg:"12px"},flexDir:{base:"column",lg:"row"},align:{base:"flex-end",lg:"center"},children:[e.jsxs(h,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(o,{color:"text_caption",children:(f=r==null?void 0:r.displayTokenA)==null?void 0:f.symbol})]}),e.jsxs(h,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(o,{color:"text_caption",children:(v=r==null?void 0:r.displayTokenB)==null?void 0:v.symbol})]})]})}),e.jsx(B,{label:"Share of pool",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},value:M(n,6)}),e.jsxs(F,{variant:"outline",h:"32px",gap:"8px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"4px",children:[e.jsx(o,{color:"primary_gray",children:"Details"}),e.jsx(O,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",w:"fit-content",children:e.jsx(z,{w:"20px",h:"20px",children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{mr:"90px",children:e.jsx(U,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Pooled assets",titleStyle:{color:"primary_gray"},value:e.jsxs(h,{gap:"4px",children:[e.jsx(P,{imageUrl:r.displayTokenA.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinA}),e.jsx(o,{color:"text_caption",mr:"8px",children:(w=r==null?void 0:r.displayTokenA)==null?void 0:w.symbol}),e.jsx(P,{imageUrl:r.displayTokenB.logo_url,imgBoxStyle:{w:"20px",h:"20px"}}),e.jsx(o,{color:"text_caption",children:t==null?void 0:t.displayCoinB}),e.jsx(o,{color:"text_caption",children:(i=r==null?void 0:r.displayTokenB)==null?void 0:i.symbol})]})})}),e.jsx(z,{mr:"110px",children:e.jsx(U,{wrapStyle:{gap:"4px",alignItems:"end"},title:"Share of pool",titleStyle:{color:"primary_gray"},value:M(n,6)})}),e.jsxs(h,{gap:"8px",children:[e.jsx(o,{color:"primary_gray",children:"Details"}),e.jsx(O,{borderRadius:"4px",p:"0px",bg:"rgb(118,200,255,0.1)",children:e.jsx(z,{w:"20px",h:"20px",children:e.jsx(V,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:"rotate(-90deg)"})})})]})]})})]}):e.jsx(D,{type:"nowallet",onboard:()=>{u(!0)}})}function be({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g,currentAccount:x,totalValue:u,jumpVaultsDetail:p}){var f,v,w,i,b,j;return e.jsxs(S,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",bg:"bg_fifth",children:[e.jsxs(h,{children:[e.jsx(le,{coinAIconUrl:(f=t==null?void 0:t.displayTokenA)==null?void 0:f.logo_url,coinBIconUrl:(v=t==null?void 0:t.displayTokenB)==null?void 0:v.logo_url,coinACoinType:(w=t==null?void 0:t.displayTokenA)==null?void 0:w.coin_type,coinBCoinType:(i=t==null?void 0:t.displayTokenB)==null?void 0:i.coin_type}),e.jsxs(o,{color:"text_caption",fontWeight:"500",children:[(b=t==null?void 0:t.displayTokenA)==null?void 0:b.symbol," - ",(j=t==null?void 0:t.displayTokenB)==null?void 0:j.symbol]}),e.jsx($,{h:"20px",lineHeight:"18px",bg:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",p:"0 12px",children:e.jsx(o,{fontWeight:"500",color:"text_highlight",children:t==null?void 0:t.feeDisplay})})]}),e.jsxs(S,{w:"100%",gap:"16px",mt:"4px",children:[e.jsx(B,{label:"TVL",value:t.vaultsTvlDisplay,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(B,{label:e.jsxs(h,{justify:"flex-end",gap:"2px",children:[e.jsx(o,{children:"APY"}),e.jsx(Z,{placement:"auto-start",tooltip:e.jsx(o,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(V,{xlinkHref:"#icon-icon_tips"})})]}),value:e.jsx(X,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}}),e.jsx(B,{label:"Rewards",value:e.jsx(J,{rewardList:t.vaultsRewards}),labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"}}),e.jsx(B,{label:"Your Holdings",value:x?E(u,2):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",fontWeight:"500"}})]}),e.jsxs(S,{w:"100%",gap:"8px",children:[e.jsx(I,{isOpen:l,jumpVaultsDetail:()=>{p(t.vaultsId)},onExpand:r}),l&&e.jsx(ee,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g})]})]})}function je({openExpend:l,onExpand:r,rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g,currentAccount:x,totalValue:u,jumpVaultsDetail:p}){return e.jsxs(Q.Fragment,{children:[e.jsxs(T,{cursor:"pointer",onClick:r,sx:{td:{pb:"16px"}},children:[e.jsx(m,{children:e.jsx(xe,{poolInfo:{...t,poolAddress:t==null?void 0:t.vaultsId},symbolFontSize:"15px"})}),e.jsx(m,{textAlign:"right",children:e.jsx(o,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:t.vaultsTvlDisplay})}),e.jsx(m,{textAlign:"right",children:e.jsx(X,{vaultsLstApyDisplay:t.vaultsLstApyDisplay,vaultsApyDisplay:t.vaultsApyDisplay,vaultsTotalApyDisplay:t.vaultsTotalApyDisplay})}),e.jsx(m,{textAlign:"right",children:e.jsx(J,{rewardList:t.vaultsRewards})}),e.jsx(m,{textAlign:"right",children:e.jsx(o,{textColor:"text_caption",textAlign:"right",fontWeight:"500",children:x?E(u,2):"--"})}),e.jsx(m,{textAlign:"right",children:e.jsx(I,{isOpen:l,jumpVaultsDetail:()=>{p(t.vaultsId)}})})]}),!l&&e.jsx(T,{h:"16px"}),e.jsx(T,{cursor:"pointer",position:"relative",top:"-16px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:l&&e.jsx(m,{colSpan:6,children:e.jsx(O,{p:"16px",borderTop:"none",borderRadius:" 0 0 16px 16px ",children:e.jsx(ee,{rewardPerA:s,rewardPerB:a,apiInfo:t,logo_url:n,holdCoinAmounts:d,balanceDisplay:c,sharePoolRate:g})})})})]},t.vaultsId)}function te(l){const r=K(),{apiInfo:s}=l,{currentAccount:a}=L(),{fetchVaultInfoFromContract:t,fetchClmmPoolFromContract:n,lpTokenInfo:d,balanceInfo:c,sharePoolRate:g,holdCoinAmounts:x,totalValue:u}=ie(s==null?void 0:s.vaultsId,s==null?void 0:s.clmmPoolAddress,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB,s==null?void 0:s.isReverse);y.useEffect(()=>{t(s.vaultsId)},[s.vaultsId]),y.useEffect(()=>{n(s.poolAddress)},[s.poolAddress]),N();const[p,f]=y.useState(!1),v=k=>{r(`/vaults-detail/${k}`)},{rewardPerA:w,rewardPerB:i}=ne(c==null?void 0:c.balanceFormat,s),b=()=>{f(!p)},{isApp:j}=H();return j?e.jsx(be,{openExpend:p,onExpand:b,rewardPerA:w,rewardPerB:i,apiInfo:s,logo_url:d==null?void 0:d.logo_url,holdCoinAmounts:x,balanceDisplay:c==null?void 0:c.balanceDisplay,sharePoolRate:g,currentAccount:a,totalValue:u,jumpVaultsDetail:v}):e.jsx(je,{openExpend:p,onExpand:b,rewardPerA:w,rewardPerB:i,apiInfo:s,logo_url:d==null?void 0:d.logo_url,holdCoinAmounts:x,balanceDisplay:c==null?void 0:c.balanceDisplay,sharePoolRate:g,currentAccount:a,totalValue:u,jumpVaultsDetail:v})}function me({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a}){const{onWalletModal:t}=L();return!a&&!s&&l.length===0?e.jsx(D,{type:"nodata",text:"No vaults found",border:"none"}):a?e.jsx(D,{type:"nowallet",onboard:()=>t(!0),border:"none"}):s?e.jsx(ye,{itemList:[1,2,3]}):e.jsxs(S,{w:"100%",mt:"20px",children:[e.jsx(o,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),l==null?void 0:l.map(n=>e.jsx(te,{apiInfo:n},n.clmmPoolAddress))]})}function ye(l){const{itemList:r}=l;return e.jsxs(S,{w:"100%",mt:"20px",children:[e.jsx(o,{w:"100%",fontSize:"20px",color:"text_caption",children:"Vaults"}),r.map(s=>e.jsxs(S,{w:"100%",align:"flex-start",border:"1px solid",borderColor:"border",p:"8px",borderRadius:"12px",gap:"16px",children:[e.jsxs(h,{gap:"0",children:[e.jsx(q,{size:"9"}),e.jsx(q,{size:"9"}),e.jsxs(h,{gap:"4px",ml:"4px",align:"flex-start",children:[e.jsx(_,{height:"4",width:"100px"}),e.jsx(_,{height:"4",width:"60px"})]})]}),e.jsx(S,{w:"100%",gap:"16px",mt:"4px",children:[1,2,3,4].map(a=>e.jsxs(h,{w:"100%",justify:"space-between",children:[e.jsx(_,{height:"4",width:"100px"}),e.jsx(_,{height:"4",width:"100px"})]},a))}),e.jsxs(S,{w:"100%",gap:"8px",children:[e.jsx(_,{height:"8",width:"100%"}),e.jsx(_,{height:"8",width:"100%"})]})]},s))]})}function fe({dataList:l,isAll:r,showSkeletonLoading:s,showNoWallet:a}){const{onWalletModal:t}=L();return e.jsxs(de,{variant:"simple_list",w:"100%",mt:"20px",children:[e.jsx(pe,{children:e.jsxs(T,{children:[e.jsx(C,{children:"Vaults"}),e.jsx(C,{textAlign:"right",children:"TVL"}),e.jsx(C,{textAlign:"right",children:e.jsxs(h,{justify:"flex-end",gap:"2px",children:[e.jsx(o,{children:"APY"}),e.jsx(Z,{tooltip:e.jsx(o,{lineHeight:"20px",fontSize:"12px",children:"APY is estimated according to the trading fees and rewards earned over the past 24 hours with daily compounding to be considered."}),children:e.jsx(V,{xlinkHref:"#icon-icon_tips"})})]})}),e.jsx(C,{textAlign:"right",children:"Rewards"}),e.jsx(C,{textAlign:"right",children:"Your Holdings"}),e.jsx(C,{textAlign:"right",children:"Action"})]})}),e.jsxs(ue,{children:[!a&&!s&&l.length===0&&e.jsx(T,{children:e.jsx(m,{colSpan:6,w:"100%",children:e.jsx(D,{type:"nodata",text:"No vaults found",border:"none"})})}),a&&e.jsx(T,{children:e.jsx(m,{colSpan:6,w:"100%",style:{borderRadius:"16px"},children:e.jsx(D,{type:"nowallet",onboard:()=>t(!0),border:"none"})})}),s&&e.jsx(ve,{itemList:[1,2,3]}),!s&&l.map(n=>e.jsx(te,{apiInfo:n},n.clmmPoolAddress))]})]})}function ve(l){const{itemList:r}=l;return r.map(s=>e.jsxs(Q.Fragment,{children:[e.jsxs(T,{h:"110px",sx:{td:{pb:"16px"}},children:[e.jsx(m,{children:e.jsx(_,{w:"220px"})}),e.jsx(m,{textAlign:"right",children:e.jsx(h,{justifyContent:"end",children:e.jsx(_,{})})}),e.jsx(m,{textAlign:"right",children:e.jsx(h,{justifyContent:"end",children:e.jsx(_,{})})}),e.jsx(m,{textAlign:"right",children:e.jsx(h,{justifyContent:"end",children:e.jsx(_,{})})}),e.jsx(m,{textAlign:"right",children:e.jsx(h,{justifyContent:"end",children:e.jsx(_,{})})}),e.jsx(m,{textAlign:"right",children:e.jsx(h,{justifyContent:"end",children:e.jsx(_,{})})})]}),e.jsx(T,{h:"16px"})]},s))}function we(l){const{fetchTokenPrices:r}=re(),{currentAccount:s,onWalletModal:a}=L(),{dataList:t,isAll:n,showSkeletonLoading:d}=l;y.useEffect(()=>{const x=[];t.forEach(u=>{x.includes(u.tokenA.coin_type)||x.push(u.tokenA.coin_type),x.includes(u.tokenB.coin_type)||x.push(u.tokenB.coin_type)}),x.length>0&&r(x)},[t.length]);const c=y.useMemo(()=>!n&&!s,[s,n]),{isApp:g}=H();return g?e.jsx(me,{...l,showNoWallet:c}):e.jsx(fe,{...l,showNoWallet:c})}function _e(l){const{isLoading:r,total_tvl:s}=l,{isApp:a}=H();return e.jsx(S,{w:"100%",pos:"absolute",alignItems:"start",bgColor:"#000",backgroundImage:{base:"url('/images/vaults_h5.png')",lg:"url('/images/vaults.png')"},backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backdropFilter:"blur(20px)",h:{base:"260px",lg:"240px"},children:e.jsxs(S,{minW:{base:"100%",lg:"1200px"},p:{base:"20px 16px 0",lg:"40px 20px 0"},margin:"0px auto",gap:"10px",alignItems:"start",h:"100%",children:[e.jsx(h,{w:"100%",justify:"space-between",children:e.jsx(o,{color:"text_caption",fontSize:"28px",fontWeight:"500",children:"Vaults"})}),e.jsxs(o,{fontSize:"16px",whiteSpace:"wrap",lineHeight:"20px",children:["Automate your liquidity to enjoy high yield with ease.Â ",a&&e.jsxs(h,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(o,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(V,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]})]}),!a&&e.jsxs(h,{onClick:()=>{window.open("https://medium.com/@CetusProtocol/cetus-vaults-automate-your-liquidity-to-earn-high-yield-with-ease-ed655e68122e","_blank")},display:{base:"inline-flex",lg:"flex"},_hover:{p:{color:"primary"},svg:{fill:"primary"}},children:[e.jsx(o,{fontSize:"16px",cursor:"pointer",children:"Details"}),e.jsx(V,{xlinkHref:"#icon-icon_link1",svgHover:"primary",svgW:"20px",svgH:"20px"})]}),e.jsx(o,{color:"text_caption",fontSize:"14px",mt:"20px",children:"Total Value Locked"}),e.jsx(_,{isLoaded:!r,children:e.jsx(o,{fontWeight:"600",color:"primary",fontSize:"20px",mt:"3px",children:E(s,2)})})]})})}const G={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}};function Se(l){const{getVaultList:r,getVaultListFromCache:s}=ce(),{vaultStatsObj:a}=N(),{getBalanceInfoFromCache:t}=he(),{tokenBalanceObj:n}=ae(),{currentAccount:d}=L(),[c,g]=y.useState([]),[x,u]=y.useState({sortRule:"desc",sortType:"tvl"}),p=y.useMemo(()=>{let i=W(0);return Object.values(a).forEach(b=>{i=i.add(b.vaultsTvl)}),i.toString()},[a]),f=async i=>{console.log("ðŸš€ ~ fetchVaultList ~ options:",i);const b=s(i);console.log("ðŸš€ ~ fetchVaultList ~ cacheList:",b),g(v(b,l));const j=await r(i);console.log("ðŸš€ ~ fetchVaultList ~ list:",j),j.length>0&&g(v(j,l))},v=(i,b)=>b==="all"?i:i.filter(j=>{const k=t(G[j.clmmPoolAddress].lpToken);return!!(k&&W(k.balance).gt(0))}),w=i=>i.filter(b=>{var k;const j=t((k=G[b.poolAddress])==null?void 0:k.lpToken);return!!(j&&W(j.balance).gt(0))});return y.useEffect(()=>{d?f(x):l!=="all"&&g([])},[n]),{totalTvl:p,filterMyVaultList:w,fetchVaultList:f,vaultList:c,queryOptions:x,setQueryOptions:u}}function qe(){const{vaultBaseList:l,vaultStatsLoading:r,vaultBaseListLoading:s}=N(),{fetchAccountBalance:a,isLoading:t}=ge(),{currentAccount:n}=L(),[d,c]=y.useState({label:"All Vaults"}),{totalTvl:g,vaultList:x,fetchVaultList:u,queryOptions:p,setQueryOptions:f,filterMyVaultList:v}=Se(d.label==="All Vaults"?"all":"my"),[w,i]=y.useState(!1),b=[{label:"APY",value:"apr"},{label:"TVL",value:"tvl"}],[j,k]=y.useState({label:"TVL",value:"TVL"}),se=y.useMemo(()=>{const A=[],Y=v([...l]);return A.push({label:"All Vaults",num:l.length>0?l.length.toString():void 0}),A.push({label:"Your Vaults",num:Y.length>0&&n!==void 0?Y.length.toString():void 0}),A},[l,t,n,d]);return y.useEffect(()=>{x.length===0&&i(!0),u(p)},[d.label]),y.useEffect(()=>{!r&&!s&&!t&&i(!1)},[r,s,t,l]),e.jsxs(S,{gap:"0px",w:"100%",children:[e.jsx(_e,{isLoading:w,total_tvl:g}),e.jsx($,{h:{base:"260px",lg:"240px"}}),e.jsx(oe,{sortByList:b,currTab:d,tabList:se,handleChangeTab:A=>{c(A)},currSortType:j,onSortByChange:A=>{p.sortType=A.value,f({...p}),k(A),u(p)},sortRule:p.sortRule,handleChangeSortRule:A=>{p.sortRule=A,f({...p}),u(p)},handleRefresh:()=>{i(!0),a()}}),e.jsx(we,{dataList:x,isAll:d.label==="All Vaults",showSkeletonLoading:w})]})}export{qe as default};
