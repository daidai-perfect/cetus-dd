import{cm as hs,s as l,d as a,am as ws,r as Ts,x as Ps,p as U,q as as,a8 as ns,a_ as ls}from"./index-CJa1Q5Eu.js";import"./vendor-BFGDaAdA.js";const x=(y,_)=>{if(!y||(y==null?void 0:y.length)<1)return _?"0%":"0";const M=y.reduce((ts,Y)=>{const ds=Y?String(Y):"0",s=hs(ds);return ts.add(s)},a(0));return _?a(M).gt(1e4)?">1,000,000%":l(M.mul(100).toString(),"%"):M.toString()},Z=(y,_,M)=>{if(!y)return _?"0%":"0";if(y==="--")return"--";const N=hs(y);return M&&a(N).gt(100)?">10,000%":_?l(a(N).mul(100).toString(),"%"):N},Fs=(y,_)=>{const M=Ts(y,_);return Ps(M.toString(),_)},Ls=y=>{const _=new Date(y).getDate();return _<10?`0${_}`:String(_)},bs=y=>{var _;return ws((_=a(y))==null?void 0:_.mul(60*60*24).toString(),0)};function Ms(){const y=s=>{var g,r,n;const i=s==null?void 0:s.has_mining;let u=a(0);const t=[],e=[];if(i){const v=((n=(r=(g=s==null?void 0:s.object)==null?void 0:g.rewarder_manager)==null?void 0:r.fields)==null?void 0:n.rewarders)||[],P=(s==null?void 0:s.rewarder_apr)||[];v==null||v.forEach((m,D)=>{var b,E,R,F,S;const A=a((b=m==null?void 0:m.fields)==null?void 0:b.emissions_per_second).mul(as.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&a(A).gt(0)){const c=Z(P[D]);u=u.add(c);const f=(S=U((F=(R=(E=m==null?void 0:m.fields)==null?void 0:E.reward_coin)==null?void 0:R.fields)==null?void 0:F.name))==null?void 0:S.source_address;t.push({coinType:f,emissionsEveryDay:bs(A)}),e.push({coinType:f,apr:c,aprDisplay:Z(c,!0)})}})}return{haveMining:i&&t.length>0,miningRewardList:t,miningAprList:e,miningAprTotal:u.toString()}},_=s=>{var E,R,F,S,c,f,h,w,d,V;const i=(s==null?void 0:s.is_forward)===!1,u=s==null?void 0:s.has_farming,t=[];let e="",g="",r="",n="",v=0,P=0,m="",D="",A=a(0),b=!1;if(u){e=(E=s==null?void 0:s.stable_farming)==null?void 0:E.stable_farming_pool;const $=(R=s==null?void 0:s.stable_farming)==null?void 0:R.stable_rewarder;$==null||$.forEach((T,q)=>{const I=a(T==null?void 0:T.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${q+1}`]&&I.gt(0)){b=!0;const W=Z(T==null?void 0:T.apr);A=A==null?void 0:A.add(W),t.push({coinType:U(T.coin).source_address,emissionsEveryDay:I.mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}}),g=(F=s==null?void 0:s.stable_farming)==null?void 0:F.tvl,r=l((S=s==null?void 0:s.stable_farming)==null?void 0:S.tvl,"$"),n=l(a(A).mul(100).toString(),"%",2,!0),v=(c=s==null?void 0:s.stable_farming)==null?void 0:c.effective_tick_lower,P=(f=s==null?void 0:s.stable_farming)==null?void 0:f.effective_tick_upper;const L=ns.tickIndexToPrice(v,(h=s==null?void 0:s.coin_a)==null?void 0:h.decimals,(w=s==null?void 0:s.coin_b)==null?void 0:w.decimals).toString(),j=ns.tickIndexToPrice(P,(d=s==null?void 0:s.coin_a)==null?void 0:d.decimals,(V=s==null?void 0:s.coin_b)==null?void 0:V.decimals).toString();m=i?a(1).div(j).toString():L,D=i?a(1).div(L).toString():j}return{haveFarming:b,farmsRewarderList:t,farmsApr:A.toString(),farmingAprDisplay:n,farmsStatedTvl:g,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:v,farmsEffectiveTickUpper:P,displayFarmsEffectMinPrice:m,displayFarmsEffectMaxPrice:D,farmsPoolAddress:e}},M=(s,i=!1)=>{var rs,es,G,J,K,Q,X;console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:110 ~ wrapPoolData ~ pool:",s);const u=s==null?void 0:s.object,t=(rs=s==null?void 0:s.object)==null?void 0:rs.index,e=s.address,g=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(G=U((es=s==null?void 0:s.coin_a)==null?void 0:es.address))==null?void 0:G.source_address},n={...s==null?void 0:s.coin_b,coin_type:(K=U((J=s==null?void 0:s.coin_b)==null?void 0:J.address))==null?void 0:K.source_address},v=g?n:r,P=g?r:n,m=`${v==null?void 0:v.symbol} - ${P==null?void 0:P.symbol}`,D=a(s.fee).mul(1e4).toString(),A=a(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,E=l(s.pure_tvl_in_usd||0),R=l(s.vol_in_usd_24h||0),F=l(s.fee_24_h||0),S=Z((Q=s==null?void 0:s.apr)==null?void 0:Q.fee_apr_24h),c=Z((X=s==null?void 0:s.apr)==null?void 0:X.fee_apr_24h,!0),{haveMining:f,miningRewardList:h,miningAprList:w,miningAprTotal:d}=y(s),{haveFarming:V,farmsRewarderList:$,farmsApr:L,farmingAprDisplay:j,farmsStatedTvl:T,farmsStatedTvlDisplay:q,farmsEffectiveTickLower:I,farmsEffectiveTickUpper:W,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:p,farmsPoolAddress:k}=_(s),O=x([S,d]),is=a(O).gt(1e4)?">1,000,000%":l(a(O).mul(100).toString(),"%"),cs=x([O,L]),fs=x([S,L],!0),o=x([O,L],!0),C=s.is_vaults,z=!C&&s.vaults&&s.vaults.length>0&&s.show_vaults?"haedal":C?"cetus":"",ss=s.show_vaults&&s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return i?{poolAddress:e,name:m,isReverse:g,tokenA:r,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:null,miningAprList:null,haveFarming:V,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:A,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:C,isLocalData:i,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:I,farmsEffectiveTickUpper:W,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:p,farmsPoolAddress:k,tickSpacing:b,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:z,vaultId:ss}:{poolAddress:e,name:m,isReverse:g,tokenA:r,tokenB:n,displayTokenA:v,displayTokenB:P,haveMining:f,miningRewardList:h,miningAprList:w,haveFarming:V,farmsRewarderList:$,farmsApr:L,farmingAprDisplay:j,feeApr:S,feeAprDisplay:c,miningAprTotal:d,feeAndMiningAprDisplay:is,totalAprDisplay:o,fee:s.fee,feeRate:D,feeDisplay:A,tvlDisplay:E,tvl:s.pure_tvl_in_usd||0,volume24Display:R,fees24Display:F,isVaults:C,farmsStatedTvl:T,farmsStatedTvlDisplay:q,feeAndFarmsApr:cs,feeAndFarmsAprDisplay:fs,farmsEffectiveTickLower:I,farmsEffectiveTickUpper:W,displayFarmsEffectMinPrice:B,displayFarmsEffectMaxPrice:p,farmsPoolAddress:k,tickSpacing:b,index:t,object:u,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:z,vaultId:ss}},N=s=>{var c,f,h,w;const{farmingRewarder:i,showReverse:u}=s;if(!i)return{displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsApr:"0",farmingAprDisplay:"0",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,farmsPoolAddress:"",farmsRewarderList:[],farmsStatedTvl:"",farmsStatedTvlDisplay:"",haveFarming:!1};const{effectiveTickLower:t,effectiveTickUpper:e,rewarderCoins:g,tvl:r}=i,n=ns.tickIndexToPrice(t,(c=s==null?void 0:s.coinA)==null?void 0:c.decimals,(f=s==null?void 0:s.coinB)==null?void 0:f.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useWrapPoolData.ts:281 ~ handleFarmsV2 ~ farmingRewarder:",i);const v=ns.tickIndexToPrice(e,(h=s==null?void 0:s.coinA)==null?void 0:h.decimals,(w=s==null?void 0:s.coinB)==null?void 0:w.decimals).toString(),P=u?a(1).div(v).toString():n,m=u?a(1).div(n).toString():v;let D=a(0);g.forEach(d=>{D=D.add(d==null?void 0:d.apr)});const A=D.toString(),b=l(D.mul(100).toString(),"%",2,!0),E=i.farmingPool,R=i.tvl,F=l(R,"$"),S=[];return g.forEach(d=>{a(d==null?void 0:d.emissionsPerSecond).gt(0)&&S.push({coinType:U(d==null?void 0:d.coinType).source_address,emissionsEveryDay:a(d==null?void 0:d.emissionsPerSecond).mul(86400).toDP(2,as.ROUND_HALF_UP).toString()})}),{displayFarmsEffectMinPrice:P,displayFarmsEffectMaxPrice:m,farmsApr:A,farmingAprDisplay:b,farmsEffectiveTickLower:t,farmsEffectiveTickUpper:e,farmsPoolAddress:E,farmsRewarderList:S,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:S.length>0}},ts=s=>{const{miningRewarders:i,showReverse:u}=s;if(!i)return{miningAprTotal:0,miningRewardList:[],haveMining:!1,miningAprList:[]};let t=a(0);const e=[],g=[];return i.forEach(r=>{t=t.add(r==null?void 0:r.apr);const n=ls.isSuiCoin((r==null?void 0:r.coinType)||"");r.display&&a(r==null?void 0:r.emissionsPerSecond).gt(0)&&(e.push({coinType:U(r==null?void 0:r.coinType).source_address,emissionsEveryDay:a(r==null?void 0:r.emissionsPerSecond).mul(10**r.decimals).mul(86400).toDP(2,as.ROUND_HALF_UP).toString(),sort:n?1:0}),g.push({coinType:U(r==null?void 0:r.coinType).source_address,apr:r==null?void 0:r.apr,aprDisplay:Z(r==null?void 0:r.apr,!0)}))}),{miningAprTotal:t.toString(),miningRewardList:e.sort((r,n)=>r.sort-n.sort),haveMining:e.length>0,miningAprList:g}},Y=s=>{const{vault:i,extensions:u}=s;if(!i)return{isUnstableVault:!1,isVault:!1,vaultId:"",vaultCategory:""};const{category:t,id:e}=i;return{isUnstableVault:t==="haedal",isVaults:t==="cetus",vaultId:e,vaultCategory:(u==null?void 0:u.showVaults)=="1"?"":t}};return{wrapPoolData:M,wrapPoolDataV2:(s,i=!1)=>{var G,J,K,Q,X,us,gs,vs,ms,ys,_s,As,Ds,Ss;const{showReverse:u,feeRate:t,stats:e,tvl:g,pool:r}=s,{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmingAprDisplay:P,farmsApr:m,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,haveFarming:S}=N(s),c={...s==null?void 0:s.coinA,coin_type:(J=U((G=s==null?void 0:s.coinA)==null?void 0:G.coinType))==null?void 0:J.full_address,logo_url:(K=s==null?void 0:s.coinA)==null?void 0:K.logoURL,address:(Q=s==null?void 0:s.coinA)==null?void 0:Q.coinType,is_trusted:(X=s==null?void 0:s.coinA)==null?void 0:X.isVerified},f={...s==null?void 0:s.coinB,coin_type:(gs=U((us=s==null?void 0:s.coinB)==null?void 0:us.coinType))==null?void 0:gs.full_address,logo_url:(vs=s==null?void 0:s.coinB)==null?void 0:vs.logoURL,address:(ms=s==null?void 0:s.coinB)==null?void 0:ms.coinType,is_trusted:(ys=s==null?void 0:s.coinB)==null?void 0:ys.isVerified},h=u?f:c,w=u?c:f,d=a(t).div(10**6).toString(),{miningAprTotal:V,miningRewardList:$,haveMining:L,miningAprList:j}=ts(s),T=(_s=e==null?void 0:e.filter(H=>H.dateType==="24H")[0])==null?void 0:_s.apr,q=(As=e==null?void 0:e.filter(H=>H.dateType==="24H")[0])==null?void 0:As.fee,I=x([T,m]),W=x([T,m],!0),B=x([T,V],!0),p=Z(T,!0),k=a(d).mul(100).toString()+"%",O=l(q,"$"),is=x([T,V]),cs=x([is,m],!0),fs=(c==null?void 0:c.isVerified)&&(f==null?void 0:f.isVerified)&&a(g).gt(1e4),{vaultCategory:o,vaultId:C,isVaults:z}=Y(s),ss=l(s.tvl||0),rs=l(((Ds=e==null?void 0:e.filter(H=>H.dateType==="24H")[0])==null?void 0:Ds.vol)||0),es=l(((Ss=e==null?void 0:e.filter(H=>H.dateType==="7D")[0])==null?void 0:Ss.vol)||0);return i?{poolAddress:r,name:`${h==null?void 0:h.symbol} - ${w==null?void 0:w.symbol}`,isReverse:u,tokenA:c,tokenB:f,displayTokenA:h,displayTokenB:w,haveMining:L,miningRewardList:null,miningAprList:null,haveFarming:S,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:t,fee:s.fee,feeDisplay:k,tvlDisplay:"--",tvl:"--",volume24Display:"--",volume7Display:"--",fees24Display:"--",isVaults:z,isLocalData:i,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,farmsPoolAddress:b,haveZap:(c==null?void 0:c.is_trusted)&&(f==null?void 0:f.is_trusted)&&s.pure_tvl_in_usd>1e4,vaultCategory:o,vaultId:C}:{displayFarmsEffectMinPrice:n,displayFarmsEffectMaxPrice:v,displayTokenA:h,displayTokenB:w,farmsEffectiveTickLower:D,farmsEffectiveTickUpper:A,farmsApr:m,farmingAprDisplay:P,farmsPoolAddress:b,farmsRewarderList:E,farmsStatedTvl:R,farmsStatedTvlDisplay:F,fee:d,feeApr:T,feeAprDisplay:p,feeAndFarmsApr:I,feeAndFarmsAprDisplay:W,feeAndMiningAprDisplay:B,feeDisplay:k,feeRate:a(t).div(100).toString(),haveFarming:S,haveZap:fs,isReverse:u,vaultCategory:o,vaultId:C,haveMining:L,miningRewardList:$,miningAprList:j,miningAprTotal:V.toString(),name:`${h==null?void 0:h.symbol} - ${w==null?void 0:w.symbol}`,poolAddress:r,tokenA:c,tokenB:f,totalAprDisplay:cs,tvl:g,tvlDisplay:ss,volume24Display:rs,volume7Display:es,fees24Display:O,isVaults:z}}}}export{Fs as b,Ls as d,Ms as u};
//# sourceMappingURL=useWrapPoolData-6jgPzxLW.js.map
