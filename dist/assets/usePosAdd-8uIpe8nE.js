import{u as I}from"./global-DdUKxaK0.js";import{M as S}from"./msafe-oYBkW7LJ.js";import{k as C,al as T,ai as L,d as k,m as A}from"./index-DOpwe9u0.js";import"./vendor-BowHGuwE.js";function E(){const B=C("clmm"),b=C("farms"),{slippage:y}=I(),F=t=>{console.log("ðŸš€ ~ usePosAdd ~ params:",t);const{amount:r,tokenA:s,tokenB:c,isTokenA:m,lowerTick:d,upperTick:u,curSqrtPrice:l,isReverse:p,roundUp:P}=t,f=new T(r);console.log("ðŸš€ ~ usePosAdd ~ coinAmount:",y,l,f.toString());const{coin_amount_a:i,coin_amount_b:n,coin_amount_limit_a:_,coin_amount_limit_b:g,liquidity_amount:a}=L.estLiquidityAndCoinAmountFromOneAmounts(d,u,f,m,P,k(y).toNumber(),new T(l));console.log("ðŸš€ ~ usePosAdd ~ coinAmountA:",i.toString()),console.log("ðŸš€ ~ usePosAdd ~ coinAmountB:",n.toString());const e=s.decimals,o=c.decimals;return{coinAmountAOrigin:i.toString(),coinAmountBOrigin:n.toString(),displayCoinAmountA:p?A(n.toString(),o):A(i.toString(),e),displayCoinAmountB:p?A(i.toString(),e):A(n.toString(),o),coinAmountA:A(i.toString(),e),coinAmountB:A(n.toString(),o),tokenMaxA:_.toString(),tokenMaxB:g.toString(),liquidityAmount:a.toString()}},x=async t=>{const{poolAddress:r,coinTypeA:s,coinTypeB:c,fixAmountA:m,amountA:d,amountB:u,lowerTick:l,upperTick:p,currentSqrtPrice:P,posType:f,rewarderCoinTypes:i,posIndex:n,posId:_,farmsPoolId:g}=t,a={coin_type_a:s,coin_type_b:c,amount_a:d,amount_b:u,pool_id:r,fix_amount_a:m,slippage:k(y).toNumber(),is_open:!n,tick_lower:l,tick_upper:p,collect_fee:!!n,rewarder_coin_types:i,pos_id:_||""},e={slippage:k(y).toNumber(),cur_sqrt_price:new T(P)},o=await B.Position.createAddLiquidityFixTokenPayload(a,e),q={action:n?S.IncreaseLiquidity:S.OpenAndAddLiquidity,txbParams:{parameter:a,gasEstimateArg:e}};return console.log("ðŸš€ ~ getClmmCreateAddData ~ msafeParams:",q,o),{tx:o,msafeParams:q}},w=async t=>{const{poolAddress:r,coinTypeA:s,coinTypeB:c,fixAmountA:m,amountA:d,amountB:u,lowerTick:l,upperTick:p,currentSqrtPrice:P,posType:f,rewarderCoinTypes:i,posIndex:n,posId:_,farmsPoolId:g}=t;let a,e;if(_){const o={pool_id:g||"",coin_type_a:s,coin_type_b:c,position_nft_id:_,clmm_pool_id:r,amount_a:d,amount_b:u,collect_fee:!0,collect_rewarder:!1,fix_amount_a:m,clmm_rewarder_types:i};console.log("ðŸš€ ~ getFarmsCreateAddData ~ parameter:",o),a=await b.Farms.addLiquidityFixCoinPayload(o),e={action:S.FarmingIncreaseLiquidity,txbParams:o}}else{const o={pool_id:g||"",coin_type_a:s,coin_type_b:c,clmm_pool_id:r,amount_a:d,amount_b:u,fix_amount_a:m,tick_lower:l,tick_upper:p};a=await b.Farms.openPositionAddLiquidityStakePayload(o),e={action:S.FarmingOpenAndAddLiquidity,txbParams:o}}return console.log("ðŸš€ ~ getFarmsCreateAddData ~ msafeParams:",e,a),{tx:a,msafeParams:e}};return{preAdd:F,getAddTsPayload:t=>{console.log("ðŸš€ ~ getAddTsPayload ~ params:",t);const{posType:r}=t;return r==="clmm"?x(t):w(t)},getClmmCreateAddData:x,getFarmsCreateAddData:w}}export{E as u};
//# sourceMappingURL=usePosAdd-8uIpe8nE.js.map
