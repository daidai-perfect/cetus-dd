import{r as p,b as re,j as e,ap as Me,aq as Ye,C as ge,W as q,H as u,ar as ms,I as ne,T as d,g as Ae,as as ts,c as pe,at as Oe,au as qe,av as $e,ao as De,a as Pe,aw as zs,ac as Bs,ax as Rs,$ as D,ay as Ie,V as y,B as ie,Y as be,az as os,aA as Fs,an as Hs,l as Ws,aB as Z,a1 as me,a5 as Le,al as xs,a3 as ls,S as Te,ae as ps,af as ds,ag as gs,ah as hs,ai as us,aj as js,ak as fs,k as Ns,aC as Es,a4 as ys,d as K,aD as Ke,m as bs,aE as Vs}from"./index-C8aSFnwA.js";import{u as Qe,a as ws,b as Us,c as ae,d as es}from"./usePositionList-CT218bhq.js";import{R as is}from"./RefreshButton-CtvTQJ6t.js";import{P as Ms}from"./index-DLN8FXV6.js";import{S as Je}from"./switch-oENeKRDJ.js";import{u as Ss,a as vs,b as Ys,i as Os,V as qs}from"./useStatistics-B3_BSx-c.js";import{u as Ds}from"./useGetPoolList-yfAAH4Og.js";import{H as Ls,T as Qs}from"./VolumeChart-BBcWp1yG.js";import{N as we}from"./NoData-CblgThOv.js";import{S as Gs}from"./SortDropBlock-DuUAsvt2.js";import{T as Ve}from"./TableSortTh-BbaUoGal.js";import{A as Xs}from"./AprTooltip-Cq6yhdPn.js";import{C as Ks,P as Cs}from"./CoinPairInfo-BDVuqGSS.js";import{F as Zs,P as Js,a as $s}from"./PositionListLoading-BJz0rPxy.js";import{C as Ge}from"./CetusTooltip-BjuKZzhY.js";import{u as Is}from"./useToken-DLV31YSC.js";import{V as as}from"./VTextLabelBox-B94k7o9u.js";import{u as ks}from"./useQueryParams-UrxbMLR8.js";import{u as en}from"./useBurn-BNoB27Vc.js";import{u as _s}from"./useTransaction-CdVfV12D.js";import{S as Ue}from"./SingleTokenInfo-Do1PEtgX.js";import{L as sn}from"./PriceRange-OO5KcqCv.js";import{u as nn}from"./useNotifiSubscription-u9L9qogf.js";import{u as tn}from"./useRpcListener-CiaEqCVd.js";import{u as on,a as As,P as ln}from"./PositionCurrentPrice-pLjy_FCr.js";import{u as an}from"./useAccountBalance-DwZl3cPL.js";import"./api-data-utils-DK-LMyn-.js";import"./Loading-DV6-TXEy.js";import"./TooltipIcon-DVEsk43i.js";import"./index-Dibth1Ri.js";import"./Pagination-CIUhOZXJ.js";import"./tr-IkT_WTGJ.js";import"./_getAllKeysIn-D1lCWRIr.js";import"./YAxis-zyvMjVjv.js";import"./throttle-CYlzL1UX.js";import"./debounce-B3JRQ_XJ.js";import"./generateCategoricalChart-Dm8XOdaJ.js";import"./index-CpbJan5A.js";import"./AddressCopyLink-Comd2bKw.js";import"./AddressUnderline-BpIZGN5S.js";import"./useCurrentPos-DKjK69vi.js";import"./PositionStatus-sxcnWwj-.js";import"./RangeValue-C4ukBeYV.js";import"./useXCetusHelper-DTYixZbP.js";import"./usePreviousValue-6D-DOYWi.js";import"./msafe-oYBkW7LJ.js";function rn({selectCoinList:s,onClickSelectCoinList:t,onDeleteSelectCoinList:r}){const[a,l]=p.useState(!1),{isApp:n}=re(),i=p.useRef(null);return e.jsxs(Me,{isLazy:!0,placement:"bottom-start",trigger:"click",modifiers:[{name:"flip",enabled:!1},{name:"shift",enabled:!1}],initialFocusRef:i,children:[e.jsx(Ye,{children:e.jsx(ge,{ref:i,as:"button",minW:{base:"calc(100% - 48px)",lg:"292px"},children:e.jsx(q,{cursor:s.length>=2?"not-allowed":"pointer",h:"40px",borderRadius:"12px",minW:"100%",w:"unset",p:"0px 4px 0 10px",onClick:()=>l(!0),children:e.jsxs(u,{w:"100%",justify:"space-between",h:"100%",align:"center",children:[e.jsxs(ms,{align:"center",h:"100%",children:[e.jsx(ne,{xlinkHref:"#icon-icon_search",svgHover:"text_paragraph"}),e.jsx(d,{ml:"4px",children:n&&s.length>=2?"":"Filter by token"})]}),e.jsx(u,{children:s==null?void 0:s.map(o=>e.jsxs(u,{gap:"4px",align:"center",bg:"button_ghost_bg",borderRadius:"8px",p:"5px 8px",children:[e.jsx(Ae,{imageUrl:o==null?void 0:o.logo_url,w:"20px",h:"20px"}),e.jsx(d,{ml:"2px",color:"text_caption",children:n?ts((o==null?void 0:o.symbol)||"",5):ts((o==null?void 0:o.symbol)||"",10)}),e.jsx(ne,{xlinkHref:"#icon-icon_close",onClick:g=>{pe(g),r(o),l(!1)}})]},o==null?void 0:o.coin_type))})]})})})}),a&&(s==null?void 0:s.length)<2&&e.jsx(Oe,{w:{base:"calc(100vw - 68px)",lg:"292px"},children:e.jsx(qe,{p:"0px",children:e.jsx(Ms,{selectTokenList:s,onDeleteToken:r,onClickToken:t})})})]})}function Ts({handleIsWatchList:s=()=>{},handleIsDisplayChecked:t=()=>{},onClickIncentiveTypes:r,handleRefresh:a,selectCoinList:l,onClickSelectCoinList:n,onDeleteSelectCoinList:i,isPools:o=!0,isRefreshed:g}){const{isWatchList:h,isAllPools:_,isIncentivizedOnly:A}=Qe(),{isApp:f,windowWidth:v}=re();return e.jsxs(u,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(u,{w:{base:"100%",lg:o?"unset":"100%"},justify:"space-between",children:[e.jsx(rn,{selectCoinList:l,onClickSelectCoinList:n,onDeleteSelectCoinList:i}),(f||!o)&&e.jsx(is,{handleRefresh:a,isRefreshed:o?g:void 0})]}),o&&e.jsxs(u,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(q,{w:{base:v<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:v<=350?e.jsx(u,{h:"38px",justify:"center",align:"center",children:e.jsx(ne,{xlinkHref:"#icon-icon_star",svgFill:h?"primary":"text_paragraph"})}):e.jsxs(u,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx($e,{checked:h,onClick:()=>{}}),e.jsx(d,{color:h?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[e.jsx(q,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",gap:f?"4px":"8px",children:[e.jsx(d,{color:A?"text_caption":"text_paragraph",children:f?"Incentivized":"Incentivized Only"}),e.jsx(Je,{isChecked:A,onChange:r})]})}),e.jsx(q,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(u,{h:"100%",justify:"space-between",children:[e.jsxs(d,{color:_?"text_caption":"text_paragraph",children:[" ",f?"All":"All pools"]}),e.jsx(Je,{isChecked:_,onChange:t})]})})]}),!f&&e.jsx(is,{handleRefresh:a,isRefreshed:g})]})]})}const cn=()=>e.jsx(u,{w:"18px",h:"18px",onClick:s=>{pe(s)},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(ge,{children:e.jsx(De,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),xn=()=>{const s=Pe(),{isApp:t}=re();return e.jsx(u,{w:"20px",h:"20px",onClick:r=>{pe(r),t||s("/vaults")},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{fontSize:"12px",children:"Vault available"}),children:e.jsx(ge,{children:e.jsx(De,{w:"100%",h:"100%",src:"/images/icon_vaults.png"})})})})},pn=({coinTypeA:s,coinTypeB:t})=>{const{getShowCoinTag:r}=zs(),{trustedTokenList:a,importTokenList:l}=Bs(),n=p.useMemo(()=>(s||t)&&(a==null?void 0:a.length)>0?r(s)||r(t):!1,[s,t,a,l]);return e.jsx(e.Fragment,{children:n&&e.jsx(u,{w:"20px",h:"20px",onClick:i=>{pe(i)},children:e.jsx(Ge,{placement:"top",tooltip:e.jsx(d,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(ge,{children:e.jsx(De,{w:"100%",h:"100%",src:Rs})})})})})};function dn({poolInfo:s}){const{isApp:t}=re(),r=Pe(),{addFavorites:a,removeFavorites:l}=ws(),{poolFavoriteIds:n}=Qe(),{goLiquidity:i}=Ss(),o=p.useMemo(()=>n==null?void 0:n.includes((s==null?void 0:s.poolAddress)||""),[JSON.stringify(n),s==null?void 0:s.poolAddress]);return e.jsxs(u,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:t?"space-between":"flex-end",gap:"8px",children:[e.jsx(D,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{i(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(Me,{isLazy:!0,trigger:t?"click":"hover",placement:"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(Ye,{children:e.jsx(ge,{onClick:g=>{pe(g)},children:e.jsx(D,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(ne,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(Ie,{children:e.jsx(Oe,{borderRadius:"12px",w:"fit-content",children:e.jsx(qe,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsxs(y,{align:"flex-start",padding:"8px",children:[e.jsx(Ze,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{i(`/liquidity?tab=analytics&poolAddress=${s==null?void 0:s.poolAddress}`,s)}}),e.jsx(Ze,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var g,h;r(`/swap/${(g=s==null?void 0:s.displayTokenA)==null?void 0:g.coin_type}/${(h=s==null?void 0:s.displayTokenB)==null?void 0:h.coin_type}`)}}),e.jsx(Ze,{text:"Add to Watchlist",xlinkHref:o?"#icon-icon_star_sel":"#icon-icon_star",svgFill:o?"primary":"text_paragraph",onClick:()=>{o?l(s==null?void 0:s.poolAddress):a(s==null?void 0:s.poolAddress)}})]})})})})]})]})}const Ze=({text:s,xlinkHref:t,svgFill:r="text_paragraph",onClick:a})=>e.jsxs(u,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:l=>{pe(l),a()},children:[e.jsx(ne,{svgFill:r,xlinkHref:t,svgHover:"primary",svgW:s=="Add to Watchlist"?"22px":"20px",svgH:s=="Add to Watchlist"?"22px":"20px",minW:s=="Add to Watchlist"?"22px":"20px",minH:s=="Add to Watchlist"?"22px":"20px",ml:s=="Add to Watchlist"?"-2px":"0px"}),e.jsx(d,{fontSize:"13px",children:s})]});function gn({miningRewardList:s,farmsRewarderList:t}){const{getTokenInfo:r}=Is(),[a,l]=p.useState([]);return p.useEffect(()=>{(async()=>{if((s==null?void 0:s.length)>0||(t==null?void 0:t.length)>0)try{let i=[],o=[];(s==null?void 0:s.length)>0&&(i=await Promise.all(s.map(async g=>{const h=await r(g==null?void 0:g.coinType);return{...g,tokenInfo:h,isMining:!0}}))),(t==null?void 0:t.length)>0&&(o=await Promise.all(t.map(async g=>{const h=await r(g==null?void 0:g.coinType);return{...g,tokenInfo:h,isFarming:!0}}))),console.log("ðŸš€ ~ list:",i.concat(o),i,o),l(i.concat(o))}catch(i){console.error("Error processing list:",i)}})()},[s,t]),e.jsx(u,{w:"100%",justify:"flex-end",children:a.map(n=>{var i,o,g,h,_;return e.jsx(ie,{onClick:A=>A.stopPropagation(),children:e.jsx(Ge,{placement:"top",tooltip:e.jsxs(u,{gap:"4px",children:[e.jsx(ie,{children:e.jsx(Ae,{imageUrl:(i=n==null?void 0:n.tokenInfo)==null?void 0:i.logo_url,w:"24px",h:"24px"})}),(n==null?void 0:n.isMining)&&e.jsxs(d,{color:"primary",display:"inline-block",children:[be(os(Fs(n==null?void 0:n.emissionsEveryDay,(o=n==null?void 0:n.tokenInfo)==null?void 0:o.decimals),2))," ",(g=n==null?void 0:n.tokenInfo)==null?void 0:g.symbol," per day in Mining"]}),(n==null?void 0:n.isFarming)&&e.jsxs(d,{color:"primary",display:"inline-block",children:[be(os(n==null?void 0:n.emissionsEveryDay,2))," ",(h=n==null?void 0:n.tokenInfo)==null?void 0:h.symbol," per day in Farming"]})]},n==null?void 0:n.coinType),children:e.jsx(ge,{as:"button",children:e.jsx(Ae,{imageUrl:(_=n==null?void 0:n.tokenInfo)==null?void 0:_.logo_url,w:"24px",h:"24px"})})})},n==null?void 0:n.coinType)})})}function hn({isRefreshed:s,handleIsRefreshed:t}){const{getStatistics:r}=vs(),{poolRefreshStatus:a,setPoolRefreshStatus:l,setPoolListLength:n,poolFavoriteIds:i,isWatchList:o,setIsWatchList:g,isIncentivizedOnly:h,setIsIncentivizedOnly:_,isAllPools:A,setIsAllPools:f,poolFavoriteIdsChange:v,setPoolFavoriteIdsChange:V}=Qe(),{getPoolList:B}=Ds(),{getFavoritePoolList:L}=ws(),{goLiquidity:$}=Ss(),[E,Q]=p.useState(h?["mining","farming"]:["mining","farming","noIncentives"]),J=()=>{_(!h),f(!1),Q(x=>x!=null&&x.includes("noIncentives")?["mining","farming"]:["mining","farming","noIncentives"])},te=()=>{f(!A),g(!1),_(!1),Q(["mining","farming","noIncentives"])},m=()=>{f(!1),g(!o),V(!1)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",v,i),o&&v&&(V(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",o),le({offset:0,isWatchList:o}))},[o,i==null?void 0:i.length,v]);const N=p.useRef(null),U=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),l("pending"),le({offset:0,isListLoading:!1}),N.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",a),a=="pending"&&l("timeout")},1e4),r()},[C,H]=p.useState([]),j=x=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",x),H(M=>[...M,x])},T=x=>{H(M=>M.filter(ee=>(ee==null?void 0:ee.coin_type)!==(x==null?void 0:x.coin_type)))};p.useEffect(()=>{console.log("ðŸš€ ~ PoolsContent ~ selectCoinList:",o,E,C),typeof o=="boolean"&&le({offset:0})},[o,E,C]);const b=30,[G,R]=p.useState(!0),[X,Y]=p.useState(!0),[O,ce]=p.useState("desc"),[z,ze]=p.useState({label:"Volume (24H)",value:"vol"}),[oe,Se]=p.useState([]),[Be,Re]=p.useState(0),[ve,Fe]=p.useState(1),le=async x=>{var F,xe,ye,ns;const M=(x==null?void 0:x.isListLoading)??!0,ee=(x==null?void 0:x.isWatchList)??o;console.log("ðŸš€ ~  ~ params:",x,ee);const he=C.length==2?`${(F=C[0])==null?void 0:F.coin_type},${(xe=C[1])==null?void 0:xe.coin_type}`:C.length==1?`${(ye=C[0])==null?void 0:ye.coin_type}`:"",{is_vaults:de=!1,display_all_pools:Ce=ee?!0:A??!0,has_mining:ke=E.includes("mining"),has_farming:_e=E.includes("farming"),no_incentives:ue=E.includes("noIncentives"),order_by:He=O=="desc"?`-${z==null?void 0:z.value}`:`${z==null?void 0:z.value}`,limit:We=b,offset:je=0,coin_type:Ne=he,pool:Ee=""}=x;je==0&&Fe(1),Number(je)>=b?R(!0):Y(M);const fe={is_vaults:de,display_all_pools:Ce,has_mining:ke,has_farming:_e,no_incentives:ue,order_by:He,limit:We,offset:je,coin_type:Ne,pool:Ee};let S;try{ee?(fe.pools=i,S=await L(fe)):S=await B(fe),console.log("ðŸš€ ~  ~ result:",S),S&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",S),Number(je)>=b?Se(se=>se.concat(S.list)):Se(S.list),Re(S.total),n((S.total||0).toString()),Y(!1),R(!1),l("success"))}catch(se){console.log("ðŸš€ ~  ~ error:",se),se!=null&&se.list&&((ns=se==null?void 0:se.list)==null?void 0:ns.length)>0&&(l("error"),Se(se.list),Re(se.total),n(""),Y(!1),R(!1))}},{failedTsToast:Xe}=Hs();p.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",a),a!=="pending"){const x={linkLabel:"",getShowInfo:()=>({toastTitleText:a=="error"?"Request Error":a=="timeout"?"Please check the network status.":""})};(a=="success"||a=="error")&&clearTimeout(N.current),(a=="error"||a=="timeout")&&Xe(x),t(!0)}},[a]);const{isApp:c}=re(),k=x=>{if(console.log("ðŸš€ ~ clickSort ~ item:",x),c)(x==null?void 0:x.value)!==(z==null?void 0:z.value)&&(le({offset:0,order_by:`-${x==null?void 0:x.value}`}),ce("desc"),ze(x));else if((x==null?void 0:x.value)==(z==null?void 0:z.value)){le({offset:0,order_by:O=="desc"?`${x==null?void 0:x.value}`:`-${x==null?void 0:x.value}`});const M=O=="desc"?"asc":"desc";ce(M)}else le({offset:0,order_by:`-${x==null?void 0:x.value}`}),ce("desc"),ze(x)},P=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],W=P.reduce((x,M)=>(x[M.value]=M,x),{}),I=()=>{const x=ve*b;le({offset:x}),Fe(M=>M+1)};Pe();const w=p.useMemo(()=>{const x=(ve-1)*b+(oe==null?void 0:oe.length);return a!=="error"&&Number(Be)>x},[Be,ve,b]);return p.useEffect(()=>(r(),N.current&&(clearTimeout(N.current),N.current=null),()=>{n(""),N.current&&(clearTimeout(N.current),N.current=null)}),[]),e.jsxs(y,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(Ts,{handleIsDisplayChecked:te,handleIsWatchList:m,onClickIncentiveTypes:J,handleRefresh:U,selectCoinList:C,onClickSelectCoinList:j,onDeleteSelectCoinList:T,isRefreshed:s}),e.jsx(ie,{h:"1px",w:"100%",bg:"border"}),e.jsxs(y,{w:"100%",position:"relative",gap:"20px",children:[!X&&(oe==null?void 0:oe.length)==0?e.jsx(we,{type:"nodata",text:"No pools found",children:e.jsx(d,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):c?e.jsxs(y,{w:"100%",gap:"4px",children:[e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(d,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Gs,{sortText:"Sort by",minW:"180px",currentSort:z,sortByList:P,onSortByChange:k,xlinkHref:O=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{le({offset:0,order_by:O=="desc"?`${z==null?void 0:z.value}`:`-${z==null?void 0:z.value}`});const x=O=="desc"?"asc":"desc";ce(x)}})]}),e.jsx(Ls,{rowKey:"poolAddress",dataSource:oe,columns:rs(O,z,k,W,c),loading:X,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(x,M)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:x=>{$(`/liquidity?poolAddress=${x.poolAddress}`,x)}})]}):e.jsx(Qs,{rowKey:"poolAddress",columns:rs(O,z,k,W,c),dataSource:oe,skeletonLength:10,loading:X,onRowClick:x=>{$(`/liquidity?poolAddress=${x.poolAddress}`,x)},rowStyle:{h:"80px",cursor:"pointer"}}),!X&&w&&e.jsx(D,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:I,children:G?e.jsx(Ws,{size:"sm",color:"text_caption"}):"Load More"})]})]})}const rs=(s,t,r,a,l)=>[{title:e.jsx(d,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:n=>{var i,o;return e.jsxs(u,{children:[e.jsx(Ks,{poolInfo:n,symbolEllipsesDecimals:10}),(n==null?void 0:n.haveFarming)&&e.jsx(Zs,{}),(n==null?void 0:n.haveMining)&&e.jsx(cn,{}),(n==null?void 0:n.isVaults)&&e.jsx(xn,{}),e.jsx(pn,{coinTypeA:(i=n==null?void 0:n.tokenA)==null?void 0:i.coin_type,coinTypeB:(o=n==null?void 0:n.tokenB)==null?void 0:o.coin_type})]})}},{title:e.jsx(Ve,{labelInfo:a.tvl,sortRule:s,sortBy:t,clickSort:n=>r(n)}),key:"tvlDisplay"},{title:e.jsx(Ve,{labelInfo:a.vol,sortRule:s,sortBy:t,clickSort:n=>r(n)}),key:"volume24Display"},{title:e.jsx(Ve,{labelInfo:a.fees,sortRule:s,sortBy:t,clickSort:n=>r(n)}),key:"fees24Display"},{title:e.jsx(d,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:n,farmsRewarderList:i})=>n&&(n==null?void 0:n.length)<=0&&i&&(i==null?void 0:i.length)<=0,render:({miningRewardList:n,farmsRewarderList:i})=>e.jsx(gn,{miningRewardList:n,farmsRewarderList:i})},{title:e.jsx(Ve,{labelInfo:a.totalApr,sortRule:s,sortBy:t,tooltip:{type:"apr24"},clickSort:n=>r(n),justifyContent:"flex-end"}),key:"apr24h",render:n=>e.jsx(Xs,{poolInfo:n,placement:l?"auto-start":"top"})},{title:e.jsx(d,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:n=>e.jsx(dn,{poolInfo:n})}],un="data:image/png;base64,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",jn="/assets/pool_bg-DIChGQZi.png",fn=({posInfo:s})=>{var a,l,n,i;const[t,r]=p.useState(!1);return e.jsx(ie,{p:"12px 0",onClick:o=>pe(o),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:e.jsxs(Me,{isLazy:!0,isOpen:t,children:[e.jsx(Ye,{children:e.jsx(ge,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:e.jsx(d,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:Z(s==null?void 0:s.totalRewardUsd,2)})})}),t&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(Ie,{children:e.jsx(Oe,{zIndex:"2",w:"fit-content",children:e.jsx(qe,{children:e.jsxs(y,{align:"flex-start",minW:"300px",children:[((a=s==null?void 0:s.pendingFeesList)==null?void 0:a.length)>0&&e.jsxs(y,{align:"flex-start",minW:"100%",children:[e.jsxs(u,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Fees"}),e.jsxs(d,{color:"primary",children:[" ",Z(s==null?void 0:s.feeOwedUsd,2)]})]}),(l=s==null?void 0:s.pendingFeesList)==null?void 0:l.map(o=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",o),e.jsxs(u,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ue,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(y,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:be(o==null?void 0:o.amount,6)}),e.jsx(d,{fontSize:"12px",children:Z(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address)))]}),((n=s==null?void 0:s.pendingRewarderList)==null?void 0:n.length)>0&&e.jsxs(y,{align:"flex-start",minW:"100%",children:[e.jsxs(u,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(d,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(d,{color:"primary",children:[" ",Z(s==null?void 0:s.rewarderUsd,2)]})]}),(i=s==null?void 0:s.pendingRewarderList)==null?void 0:i.map(o=>e.jsxs(u,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Ue,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(y,{align:"flex-end",gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:be(o==null?void 0:o.amount,6)}),e.jsx(d,{fontSize:"12px",children:Z(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address))]})]})})})})]})})};function ss({posInfo:s,onClickCheckBox:t,checked:r,pageFrom:a,cursor:l="pointer"}){var _;const{getClmmPosName:n}=Us(),{posPoolsOriginalData:i}=ae(),o=p.useMemo(()=>{var A;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const f=(A=i==null?void 0:i[s==null?void 0:s.clmmPool])==null?void 0:A.index;return n(s==null?void 0:s.index,f)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,i]),{posPoolsRelatedData:g}=ae(),h=((_=g[s==null?void 0:s.posId])==null?void 0:_.displayFee)+"%";return e.jsxs(q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(u,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(y,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Cs,{poolInfo:{...s,feeDisplay:h},symbolEllipsesDecimals:10}),e.jsx(d,{fontSize:"12px",color:"primary_gray",children:o})]}),t&&e.jsx($e,{cursor:l,checked:r||!1,onClick:()=>t(s)})]}),a=="pendingYieldModal"?e.jsxs(u,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(fn,{posInfo:s})]}):e.jsxs(u,{justify:"space-between",p:"0 16px",children:[e.jsx(d,{color:"primary_gray",children:"Liquidity"}),e.jsx(sn,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:a!="lpBurnNext"})]})]})}function yn({onClose:s,currentLockItem:t}){var Q,J,te,m,N,U,C,H;const{currentAccount:r}=me(),{signAndExecuteTransaction:a}=_s(),{getBurnTxPayload:l}=en(),{getPositionBaseList:n}=es(),{posLiquidityData:i}=ae(),[o,g]=p.useState(!1),[h,_]=p.useState(""),[A,f]=p.useState(!1),v=j=>{const b=j.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");_(b),console.log("ðŸš€ ~ inputChange ~ e:",j.target.value,j.target.value.toLowerCase()),j.target.value.toLowerCase()=="lock my liquidity forever"?f(!0):f(!1)},{getTokenAmountValue:V}=Le(),B=i[t==null?void 0:t.posId],L=V((Q=t==null?void 0:t.displayTokenA)==null?void 0:Q.coin_type,B==null?void 0:B.displayCoinAmountA,"--"),$=V((J=t==null?void 0:t.displayTokenB)==null?void 0:J.coin_type,B==null?void 0:B.displayCoinAmountB,"--"),E=async()=>{console.log("ðŸš€ ~ currentLockItem:",t),g(!0);try{const j=l(t);console.log("ðŸš€ ~ toBurn ~ tx:",j);const T=await a(j,{getShowInfo:b=>{var R,X;const G={modalDescriptionText:`${(R=t==null?void 0:t.displayTokenA)==null?void 0:R.symbol} - ${(X=t==null?void 0:t.displayTokenB)==null?void 0:X.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",b),G}});console.log("ðŸš€ ~ toBurn ~ res:",T),T&&(await n(r==null?void 0:r.address),s()),g(!1)}catch(j){g(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",j)}};return e.jsxs(y,{w:"100%",gap:"12px",children:[e.jsxs(y,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(d,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(y,{w:"100%",children:[e.jsx(ss,{posInfo:t,pageFrom:"lpBurnNext"}),e.jsx(q,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(q,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(y,{gap:"16px",children:[e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsxs(u,{children:[e.jsx(Ae,{imageUrl:(te=t==null?void 0:t.displayTokenA)==null?void 0:te.logo_url,w:"20px",h:"20px",coinType:(m=t==null?void 0:t.displayTokenA)==null?void 0:m.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[B==null?void 0:B.displayCoinAmountA," ",(N=t==null?void 0:t.displayTokenA)==null?void 0:N.symbol]})]}),e.jsx(d,{color:"text_caption",children:Z(L,2)})]}),e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsxs(u,{children:[e.jsx(Ae,{imageUrl:(U=t==null?void 0:t.displayTokenB)==null?void 0:U.logo_url,w:"20px",h:"20px",coinType:(C=t==null?void 0:t.displayTokenB)==null?void 0:C.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(d,{color:"text_caption",children:[B==null?void 0:B.displayCoinAmountB," ",(H=t==null?void 0:t.displayTokenB)==null?void 0:H.symbol]})]}),e.jsx(d,{color:"text_caption",children:Z($,2)})]})]})})})]}),e.jsxs(u,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(ne,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(d,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(q,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(d,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(d,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(q,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(xs,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:h,onChange:v})})]}),e.jsxs(y,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx(D,{isLoading:o,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!A||o,onClick:E,children:"Confirm"}),e.jsx(D,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function bn({onClose:s,onClickLock:t,currentLockItem:r,onClickCheckBox:a}){const{currentAccount:l,onWalletModal:n}=me(),{fullRangePosBaseList:i,fullRangePosBaseListLoading:o}=ae();return e.jsxs(y,{w:"100%",gap:"20px",children:[e.jsxs(y,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(d,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(y,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:l!=null&&l.address?o?[{},{}].map((g,h)=>e.jsx(Ps,{},h)):(i==null?void 0:i.length)>0?i==null?void 0:i.map(g=>e.jsx(ss,{posInfo:g,checked:(g==null?void 0:g.posId)==(r==null?void 0:r.posId),onClickCheckBox:h=>a(h),pageFrom:"lpBurnPrev"},g==null?void 0:g.posId)):e.jsxs(q,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(we,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(d,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(we,{type:"nowallet",onboard:()=>n(!0),bg:"none",border:"none"})}),e.jsxs(y,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(D,{disabled:Object.values(r).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:t,children:"Lock Liquidity"}),e.jsx(D,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Ps=()=>e.jsxs(q,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(u,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(u,{gap:"0",children:[e.jsx(ls,{size:"9"}),e.jsx(ls,{size:"9"}),e.jsx(y,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(Te,{height:"4",width:"100px"})})]})}),e.jsx(ie,{w:"100%",p:"16px",children:e.jsx(Te,{height:"5",width:"250px"})})]});function wn({isOpen:s,onClose:t}){const[r,a]=p.useState(!1),[l,n]=p.useState({});p.useEffect(()=>{n({}),a(!1)},[s]);const i=g=>{(g==null?void 0:g.posId)==(l==null?void 0:l.posId)?n({}):n(g)},{isApp:o}=re();return e.jsxs(ps,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:t,isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(gs,{minWidth:o?"300px":"482px",children:[e.jsx(hs,{children:e.jsx(us,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(js,{}),e.jsxs(fs,{p:"16px 16px 0",textAlign:"center",children:[!r&&e.jsx(bn,{onClose:t,currentLockItem:l,onClickCheckBox:g=>i(g),onClickLock:()=>a(!0)}),r&&e.jsx(yn,{onClose:t,currentLockItem:l})]})]})]})}function Sn({isRefreshed:s}){const{tab:t}=ks(),r=Pe(),[a,l]=p.useState(!1),{statisticsData:n}=Ys(),{poolListLength:i}=Qe(),{showPosListLength:o}=ae(),g=p.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",i),[{label:"Pools",value:"pools",num:i,imgInfo:{src:Os,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:o,imgInfo:{src:un,w:"22px",h:"22px"}}]),[i,o]),{isApp:h}=re(),[_,A]=p.useState(!1);return e.jsxs(y,{w:"100%",children:[e.jsxs(u,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(y,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(d,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(y,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:jn,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(as,{wrapStyle:{alignItems:h?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(n==null?void 0:n.totalValueLocked)||"",isLoading:!n}),e.jsx(as,{wrapStyle:{alignItems:h?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(n==null?void 0:n.cumulativeVolume)||"",isLoading:!n})]})]}),e.jsx(ie,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(qs,{statisticsData:n,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(u,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Ns,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"395px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:g,currentTab:t=="positions"?"Positions":"Pools",handleChangeTab:f=>{f.value=="positions"?r("/pools?tab=positions"):r("/pools?tab=pools")}}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[t=="positions"?e.jsx(Es,{isOpen:_,label:e.jsx(d,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx(D,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),onClick:()=>{A(!1),l(!0)},children:"LP Burn"})}):e.jsx(D,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>r("/create-pool"),children:"Create a new pool"}),e.jsx(D,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>r("/select-pool"),children:"Add Liquidity"})]})]}),e.jsx(wn,{isOpen:a,onClose:()=>l(!1)})]})}const vn="/assets/tvl_bg-D80TUrdU.png",Cn="/assets/yield_bg-CcCC1tTK.png";function kn({isOpen:s,claimLoading:t,onClose:r,changeClaimLoading:a}){const[l,n]=p.useState(!1),{coinPriceObj:i}=ys(),{getPositionBaseList:o}=es(),{signAndExecuteTransaction:g}=_s(),{currentAccount:h}=me(),{getBatchHarvestFeeAndRewardsTxPayload:_}=on(),{getTokenAmountValue:A}=Le(),[f,v]=p.useState([]),[V,B]=p.useState(!0),[L,$]=p.useState(!0),[E,Q]=p.useState(.01),[J,te]=p.useState([]),[m,N]=p.useState([]),[U,C]=p.useState(""),[H,j]=p.useState(""),[T,b]=p.useState([]),{myPosYieldValue:G,posBaseList:R,posBaseListLoading:X,posFeeDataLoading:Y,posRewardsDataLoading:O,posFeeData:ce,posRewardsData:z}=ae(),ze=c=>{const k=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");c.target.value=c.target.value.replace(k,"$1"),Q(c.target.value)},oe=()=>{(!E||E<.01)&&Q(.01)},Se=X||Y||O;p.useEffect(()=>{const c=[];let k="0";const P=[];if((R==null?void 0:R.length)>0&&!X&&!Y&&!O){R.forEach((w,x)=>{var He,We,je,Ne,Ee,fe;let M="0",ee="0",he="0",de="0";const Ce=[],ke=[];if(((He=Object.values(ce))==null?void 0:He.length)>0){const S=ce[w==null?void 0:w.posId],F=A((We=w==null?void 0:w.displayTokenA)==null?void 0:We.coin_type,S==null?void 0:S.displayFeeOwedA,"--"),xe=A((je=w==null?void 0:w.displayTokenB)==null?void 0:je.coin_type,S==null?void 0:S.displayFeeOwedB,"--");M=K(M).plus((S==null?void 0:S.displayFeeOwedA)||0).plus((S==null?void 0:S.displayFeeOwedB)||0).toString(),F!=="--"&&xe!=="--"&&(he=K(F).plus(xe).toString()),ke.push({coin_address:Ke((Ne=w==null?void 0:w.displayTokenA)==null?void 0:Ne.coin_type,!1),amount:S==null?void 0:S.displayFeeOwedA,amountUSD:F,token:w==null?void 0:w.displayTokenA},{coin_address:Ke((Ee=w==null?void 0:w.displayTokenB)==null?void 0:Ee.coin_type,!1),amount:S==null?void 0:S.displayFeeOwedB,amountUSD:xe,token:w==null?void 0:w.displayTokenB})}if(((fe=Object.values(z))==null?void 0:fe.length)>0){const S=z[w==null?void 0:w.posId];(S==null?void 0:S.length)>0&&S.forEach(F=>{var xe;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",F),ee=K(ee).plus(F.display_amount_owed||0).toString(),Number(F==null?void 0:F.display_amount_owed)>0){const ye=A(F==null?void 0:F.token.coin_type,F.display_amount_owed);ye!=="--"&&(de=K(de).plus(ye).toString()),Ce.push({coin_address:Ke((xe=F==null?void 0:F.token)==null?void 0:xe.coin_type,!1),amount:F.display_amount_owed,amountUSD:ye,token:F==null?void 0:F.token})}})}const _e=K(de).plus(he).toString(),ue=(K(M).gt(0)||K(ee).gt(0))&&Number(_e)==0?"--":_e;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",_e,ue),k=K(k).plus(de).plus(he).toString(),Number(ue)!==0&&P.push(w),L&&Number(ue)>Number(E)&&c.push({...w,totalRewardUsd:ue,pendingRewarderList:Ce,pendingFeesList:ke,rewarderUsd:de,feeOwedUsd:he}),L||c.push({...w,totalRewardUsd:ue,pendingRewarderList:Ce,pendingFeesList:ke,rewarderUsd:de,feeOwedUsd:he})}),te(P);const W=c.filter(w=>Number(w.totalRewardUsd)!==0);N(W),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",W,m),L?(W==null?void 0:W.length)!==c.length?C(""):C("all"):(W==null?void 0:W.length)!==P.length?C(""):C("all");const I=c.sort((w,x)=>x.totalRewardUsd-w.totalRewardUsd);v(I),B(!1)}},[E,R,L,X,Y,O,i]);const{calculatePendingYield:Be}=As();p.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",m),(m==null?void 0:m.length)>0){const{total:c,rewardAndFeeList:k}=Be(m,ce,z);console.log("ðŸš€ ~ useEffect ~ total:",m,c,k),j(c),b(k)}else j(""),b([])},[m==null?void 0:m.length,ce,z]);const Re=c=>{if(console.log("ðŸš€ ~ selectItem ~ item:",c),Number(c==null?void 0:c.totalRewardUsd)<=0)return;const k=m,P=(k==null?void 0:k.filter(W=>(W==null?void 0:W.posId)!==(c==null?void 0:c.posId)))||[];k!=null&&k.some(W=>(W==null?void 0:W.posId)===(c==null?void 0:c.posId))||P.push(c),console.log("ðŸš€ ~ selectItem ~ updatedList:",P),N(P),L?(P==null?void 0:P.length)!==(f==null?void 0:f.length)?C(""):C("all"):(P==null?void 0:P.length)!==(J==null?void 0:J.length)?C(""):C("all")};p.useEffect(()=>{Q(.01),n(!1),$(!0)},[s]);const ve=()=>{if(U=="all")C(""),N([]);else{C("all");const c=m,k=Object.fromEntries(m.map(P=>[P==null?void 0:P.posId,P]));f.forEach(P=>{!k[P==null?void 0:P.posId]&&Number(P.totalRewardUsd)!==0&&c.push(P)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",k,c),N(c)}},{fetchAccountBalance:Fe}=an(),le=async()=>{a(!0);try{const c=Object.fromEntries(m.map(I=>[I==null?void 0:I.posId,I==null?void 0:I.pendingRewarderList])),{tx:k,txb:P}=await _(m,c,h==null?void 0:h.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",k);const W=await g(P,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});console.log("ðŸš€ ~ toClaimYield ~ res:",W),W&&(Fe(),await o(h==null?void 0:h.address)),a(!1)}catch(c){a(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",c)}finally{r()}},{isApp:Xe}=re();return e.jsxs(ps,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:r,isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(gs,{minWidth:Xe?"300px":"446px",children:[e.jsx(hs,{children:e.jsx(us,{fontWeight:"500",fontSize:"16px",children:l?"Claim Yield":"Details"})}),e.jsx(js,{}),e.jsx(fs,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(ie,{children:[e.jsxs(y,{w:"100%",children:[e.jsx(ie,{w:"100%",p:"0 16px",children:e.jsx(y,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(Te,{isLoaded:!Se,children:e.jsxs(y,{gap:"4px",align:"center",children:[e.jsx(d,{color:"primary_gray",children:l?"Total Claim":"Pending Yield"}),e.jsx(d,{color:"primary",fontSize:"20px",fontWeight:"500",children:Z(l?H:G,2)})]})})})}),!l&&e.jsxs(u,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(d,{color:"text_caption",children:"Position"}),e.jsxs(u,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(Je,{isChecked:L,onChange:()=>$(!L)}),e.jsx(d,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(q,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(xs,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${E}`,onChange:ze,onBlur:oe})})]})]}),e.jsx(y,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(f==null?void 0:f.length)>2?"16px":"20px",mr:"-4px",children:l?T==null?void 0:T.map(c=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",c),e.jsx(q,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(u,{w:"100%",justify:"space-between",children:[e.jsx(Ue,{token:c==null?void 0:c.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(y,{align:"flex-end",gap:"4px",children:[e.jsx(d,{color:"text_caption",children:be(c==null?void 0:c.amount,6)}),e.jsxs(d,{children:["(",Z(c==null?void 0:c.amountUSD,2),")"]})]})]})},c==null?void 0:c.coin_address))):(f==null?void 0:f.length)>0?f==null?void 0:f.map(c=>e.jsx(ss,{posInfo:c,onClickCheckBox:k=>Re(k),pageFrom:"pendingYieldModal",cursor:Number(c==null?void 0:c.totalRewardUsd)<=0?"not-allowed":"pointer",checked:m.some(k=>(k==null?void 0:k.posId)===(c==null?void 0:c.posId))},c==null?void 0:c.posId)):V?[{},{}].map((c,k)=>e.jsx(Ps,{},k)):e.jsx(we,{type:"nodata"})}),l?e.jsx(u,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(q,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>n(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(u,{justify:"center",gap:"4px",children:[e.jsx(ne,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(d,{children:"Back"})]})})}):e.jsx(ie,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(u,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(y,{gap:"4px",align:"flex-start",children:[e.jsx(d,{color:"primary_gray",children:"Amount selected"}),e.jsx(d,{color:"primary",fontSize:"18px",fontWeight:"500",children:Z(H,2)})]}),e.jsxs(u,{children:[e.jsx(d,{color:"text_caption",children:"Select All"}),e.jsx($e,{checked:U=="all",onClick:ve})]})]})})]}),l?e.jsx(D,{isLoading:t,disabled:(T==null?void 0:T.length)==0||t,w:"100%",h:"52px",fontWeight:"500",onClick:le,children:"Confirm"}):e.jsx(D,{disabled:Number(H)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>n(!0),children:"Claim Yield"})]})})]})]})}const cs=({yieldList:s})=>{const[t,r]=p.useState(!1),{myPosYieldValue:a}=ae(),{isApp:l}=re();return e.jsx(y,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:l?()=>r(!t):()=>r(!1),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:e.jsxs(Me,{isLazy:!0,isOpen:t,placement:"bottom-end",children:[e.jsx(Ye,{children:e.jsx(ge,{as:"button",children:e.jsx(d,{cursor:Number(a)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(a)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:Z(a,2)})})}),t&&Number(a)>0&&(s==null?void 0:s.length)>0&&e.jsx(Ie,{children:e.jsx(Oe,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(qe,{p:"0px",children:e.jsx(y,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(n=>{var i;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",n),e.jsxs(u,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(Ue,{token:n==null?void 0:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(u,{gap:"4px",children:[e.jsx(d,{fontSize:"12px",color:"text_caption",children:be(n==null?void 0:n.amount,6)}),e.jsxs(d,{fontSize:"12px",children:["(",Z(n==null?void 0:n.amountUSD,2),")"]})]})]},(i=n==null?void 0:n.token)==null?void 0:i.coin_type)})})})})})]})})};function _n(){const{currentAccount:s}=me(),[t,r]=p.useState(!1),[a,l]=p.useState(!1),[n,i]=p.useState([]),{getTokenAmountValue:o}=Le(),{coinPriceObj:g}=ys(),{myPosYieldValue:h,setMyPosYieldValue:_,posFeeDataLoading:A,posRewardsDataLoading:f,posBaseList:v,posLiquidityData:V,posBaseListLoading:B,posLiquidityDataLoading:L,posFeeData:$,posRewardsData:E}=ae(),Q=p.useMemo(()=>{let U=0,C=0;return(v==null?void 0:v.length)>0&&(s!=null&&s.address)?(v.forEach(H=>{var G,R;const j=V[H==null?void 0:H.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",j);const T=o((G=H==null?void 0:H.displayTokenA)==null?void 0:G.coin_type,j==null?void 0:j.displayCoinAmountA),b=o((R=H==null?void 0:H.displayTokenB)==null?void 0:R.coin_type,j==null?void 0:j.displayCoinAmountB);U=K(U).plus(T).plus(b).toString(),C=K(C).plus((j==null?void 0:j.displayCoinAmountA)||0).plus((j==null?void 0:j.displayCoinAmountB)||0).toString()}),K(U).lte(0)&&K(C).gt(0)?"$--":Z(U,2)):"$0"},[v,V,s,g]),J=s!=null&&s.address?B:!1,{calculatePendingYield:te}=As();p.useEffect(()=>{if(!(s!=null&&s.address))_(""),i([]);else if(!B&&(v==null?void 0:v.length)<=0&&(_("0"),i([])),(v==null?void 0:v.length)>0&&(s!=null&&s.address)&&!B&&!A&&!f){const{total:U,rewardAndFeeList:C}=te(v,$,E);_(U),i(C)}},[v,B,A,f,s,g]);const m=s!=null&&s.address?!h:!1,{isApp:N}=re();return e.jsxs(bs,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(u,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:vn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(Te,{isLoaded:!J,children:e.jsx(d,{fontSize:"20px",color:"primary",children:Q})})]}),e.jsxs(u,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Cn,backgroundSize:"100% 100%",children:[e.jsx(d,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(Te,{isLoaded:!m,children:N?e.jsxs(u,{gap:"20px",children:[e.jsxs(y,{align:"flex-end",children:[e.jsx(cs,{yieldList:n}),e.jsx(D,{isLoading:t,disabled:Number(h)<=0||t,w:"100px",h:"24px",onClick:()=>l(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(h)>0&&e.jsx(ne,{xlinkHref:"#icon-icon_spread",onClick:()=>l(!0)})]}):e.jsxs(u,{onClick:()=>l(!0),children:[e.jsx(cs,{yieldList:n}),Number(h)>0&&e.jsx(ne,{xlinkHref:"#icon-icon_spread"}),e.jsx(D,{isLoading:t,disabled:Number(h)<=0||t,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(kn,{isOpen:a,claimLoading:t,onClose:()=>l(!1),changeClaimLoading:U=>r(U)})]})}function An({poolInfo:s}){var g,h,_,A,f,v;const t=Pe(),{posPoolsRelatedData:r,posApiPoolData:a}=ae(),l=(g=a[s==null?void 0:s.clmmPoolAddress])==null?void 0:g.haveFarming,n=(((_=r[(h=s==null?void 0:s.list[0])==null?void 0:h.posId])==null?void 0:_.displayFee)||"--")+"%",[i,o]=p.useState(!0);return e.jsxs(y,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(bs,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>o(!i),children:[e.jsx(Cs,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:n,...s},haveName:!0}),e.jsxs(u,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(u,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(d,{color:"primary_gray",children:"Current Price"}),e.jsx(ln,{symbolEllipsesDecimals:10,posId:(A=s==null?void 0:s.list[0])==null?void 0:A.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),l&&e.jsxs(u,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:V=>{pe(V),t("/farms")},border:"1px solid",borderColor:"transparent",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(De,{src:"/images/icon_farms.png",w:"20px",h:"20px"}),e.jsx(d,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(ne,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(u,{w:{base:"100%",lg:"unset"},children:[e.jsx(D,{onClick:V=>{pe(V),t(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(q,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(u,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(d,{fontSize:"12px",color:"primary",children:[(f=s==null?void 0:s.list)==null?void 0:f.length," ",((v=s==null?void 0:s.list)==null?void 0:v.length)>1?"Positions":"Position"]}),e.jsx(ne,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:i?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),i&&e.jsx(y,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((V,B)=>e.jsx(Js,{positionInfo:V},B))})]})}function Tn({isRefreshed:s,handleIsRefreshed:t}){var H;const{getStatistics:r}=vs(),{fetchTokenPrices:a}=Le(),{currentAccount:l,onWalletModal:n}=me(),{getPositionBaseList:i,getPosRelatedData:o}=es(),{posRewardsData:g,posBaseList:h,setShowPosListLength:_,setMyPosYieldValue:A,posBaseListLoading:f,posBaseListGroupByPool:v}=ae(),[V,B]=p.useState([]),{getNotifiPositionTransfer:L}=nn(),$=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),A(""),r(),C(),l!=null&&l.address&&m(l==null?void 0:l.address),setTimeout(()=>{t(!0)},1e3)};tn({onRpcChange:()=>{l!=null&&l.address&&m(l==null?void 0:l.address)}});const[E,Q]=p.useState([]),J=j=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",j),Q(T=>[...T,j])},te=j=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",j),Q(T=>T.filter(b=>(b==null?void 0:b.coin_type)!==(j==null?void 0:j.coin_type)))};p.useEffect(()=>{A(""),l!=null&&l.address?m(l==null?void 0:l.address):_("")},[l==null?void 0:l.address]);const m=async j=>{await i(j)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ posBaseList:",h),(h==null?void 0:h.length)>0&&o(h)},[h]);const{notifiClient:N,notifiSources:U}=Vs();p.useEffect(()=>{L(h,N,U)},[h,N,U]),p.useEffect(()=>{var R,X;const j=(R=E[0])==null?void 0:R.coin_type,T=(X=E[1])==null?void 0:X.coin_type,b=Object.values(v).filter(Y=>j&&T?Y.tokenA.coin_type==j&&Y.tokenB.coin_type==T||Y.tokenA.coin_type==T&&Y.tokenB.coin_type==j:j?Y.tokenA.coin_type==j||Y.tokenB.coin_type==j:Y);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(v),b),B(b);const G=b.reduce((Y,O)=>Y+(O.list?O.list.length:0),0);l!=null&&l.address&&_(G.toString())},[E,v]);const C=()=>{const j=[];if((h==null?void 0:h.length)>0){h.map(b=>{j.push(b==null?void 0:b.coinTypeA),j.push(b==null?void 0:b.coinTypeB);const G=g[b==null?void 0:b.posId];G==null||G.map(R=>{K(R==null?void 0:R.display_amount_owed).gt(0)&&j.push(R==null?void 0:R.coin_address)})});const T=Array.from(new Set(j));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",h,j,T),a(T)}};return p.useEffect(()=>{C()},[h==null?void 0:h.length,g]),p.useEffect(()=>(r(),()=>{_("")}),[]),p.useEffect(()=>{f&&_("")},[f]),e.jsxs(y,{gap:"20px",w:"100%",children:[e.jsx(Ts,{isPools:!1,handleRefresh:$,selectCoinList:E,onClickSelectCoinList:J,onDeleteSelectCoinList:te}),e.jsx(ie,{h:"1px",w:"100%",bg:"border"}),e.jsx(_n,{}),l!=null&&l.address?f?[{},{},{},{}].map((j,T)=>e.jsx($s,{},T)):((H=Object.values(V))==null?void 0:H.length)>0?Object.values(V).map((j,T)=>e.jsx(An,{poolInfo:j},T)):e.jsx(we,{type:"nodata",text:"No liquidity positions"}):e.jsx(we,{type:"nowallet",onboard:()=>n(!0)})]})}function wt(){const{tab:s}=ks(),[t,r]=p.useState(!0),a=l=>{r(l)};return e.jsxs(y,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(Sn,{isRefreshed:t}),(s=="pools"||s===void 0)&&e.jsx(hn,{isRefreshed:t,handleIsRefreshed:a}),s=="positions"&&e.jsx(Tn,{isRefreshed:t,handleIsRefreshed:a})]})}export{wt as default};
