import{R as N,a1 as F,bA as C,r as l,a4 as R,a3 as P,aC as v,br as V,d as T,a9 as x,bF as _}from"./index-D49RffYW.js";import{u as O}from"./useToken-BlS8b5ft.js";function G(){const{xCetusSdk:t}=N(),{currentAccount:e}=F(),{setLockCetusListLoading:s,clearData:r,setLockCetusList:n}=C();return{fetchOwnerLockCetusList:async(a=e==null?void 0:e.address)=>{if(!a){s(!1),r();return}s(!0);try{const u=await t.XCetusModule.getOwnerRedeemLockList(a);a===(e==null?void 0:e.address)&&(u.sort((o,w)=>o.locked_until_time-w.locked_until_time),n(u))}catch{}finally{s(!1)}}}}function M(){const{xCetusSdk:t}=N(),{setDividendRewardList:e}=C();return{fetchVeNFTDividendInfo:async r=>{try{const n=await t.XCetusModule.getVeNFTDividendInfo(r);n&&e(n.rewards)}catch{}}}}function h(){const{xCetusSdk:t}=N(),{currentAccount:e}=F(),{setVeNFTLoading:s,clearData:r,setVeNFT:n}=C();return{fetchOwnerVeNFT:async(a=e==null?void 0:e.address,u)=>{if(!a){s(!1),r();return}s(!0);try{const o=await t.XCetusModule.getOwnerVeNFT(a,u);if(o)return n(o,a),o}catch{}finally{s(!1)}}}}function E(){const{dividendManager:t}=C(),[e,s]=l.useState(),[r,n]=l.useState(),d=a=>{const u=Date.now()/1e3,{start_time:o,interval_day:w}=a,k=Number(_.getNextStartTime(a).toString()),f=x.env=="testnet"?Math.ceil((u-o)/(w*60)):Math.ceil((u-o)/(w*24*3600));s(f),n(k)};return l.useEffect(()=>{t&&d(t)},[t]),{currentPeriod:e,nextStartTime:r,calculateCurrPeriod:d}}function X(t,e){const{fetchTokenInfo:s}=O(),{getTokenAmountValue:r}=R(),{coinPriceObj:n}=P(),[d,a]=l.useState("0"),u=l.useCallback(async()=>{if(!(!t||!e))try{const o=t.bonus,w=await Promise.all(o.map(async L=>{const i=v(L.name,!1),c=await s(i);if(c){const S=V(L.value,c.decimals).toString();return r(i,S)}return"0"})).then(L=>L.reduce((i,c)=>i.add(c),T(0))),k=r(x.cetus_coin.coin_type,V(e,9).toString()),f=T(k).gt(0)?w.div(7).mul(365).div(k).mul(100).toFixed(2):"0";a(Number(f)>0&&Number(f)<.01?"0.01":f.toString())}catch(o){console.error("Error calculating APR:",o),a("0.01")}},[t==null?void 0:t.bonus,e,n]);return l.useEffect(()=>{u()},[t==null?void 0:t.bonus,e,n]),{cetusApr:d}}function j(t){const{dividendRewardList:e}=C(),{fetchTokenInfo:s}=O(),{getTokenAmountValue:r}=R(),[n,d]=l.useState([]),[a,u]=l.useState([]),[o,w]=l.useState("0"),k=l.useCallback(async()=>{let f=T(0);const L=e.filter(c=>!(c.period===t||c.rewards.find(S=>T(S.amount).eq(0))));u(L);const i={};await Promise.all(L.map(async c=>{for(const S of c.rewards){const m=v(S.coin_type,!1),b=await s(m);if(b){const g=V(S.amount,b.decimals).toString(),y=r(m,g);f=f.add(y),i[m]=i[m]?{...i[m],amount:T(i[m].amount).add(g).toString(),value:T(i[m].value).add(y).toString()}:{amount:g,coin_type:m,value:y}}}})),d(Object.values(i).filter(c=>T(c.amount).gt(0)).sort((c,S)=>T(S.value).sub(c.value).toNumber())),w(f.toString())},[e,s,r,t]);return l.useEffect(()=>{t&&k()},[e,t]),{summaryRewardList:n,rewardList:a,totalRewardValue:o}}export{h as a,M as b,E as c,j as d,X as e,G as u};
