import{R as ue,bN as ce,u as pe,aG as Y0,bO as oe,aR as y0,s as ne,X as h0,r as o,Q as z0,a3 as N0,a0 as Z0,bP as me,b9 as j0,be as Q0,bo as I0,aA as t0,a5 as te,a9 as W0,d as f,bw as be,bQ as ge,bf as ye,a6 as B0,bR as q0,bh as E0,a7 as U0,bS as $0,aV as G0,j as V0,V as se,H as re,C as _e,c as Se,aq as ve,T as xe}from"./index-BMYxc9Od.js";import{a as J0}from"./api-data-utils-Ddy-a3WS.js";import{a as he}from"./useFavoritePool-CFeoAJA1.js";import{c as de}from"./useGetPoolList-DKPSLTZh.js";import{u as A0}from"./useToken-Bvs0Ung1.js";import{u as X0}from"./useTokenBalance-Cj_lT5nh.js";import{u as k0}from"./global-VD-aBjBV.js";import{M as ee}from"./msafe-oYBkW7LJ.js";import{v as O0,f as S0}from"./index-CJXWYa_3.js";import{u as ae}from"./useTransaction-CfK3pLEn.js";import{u as Te}from"./useFindBestRouting-C22H3oMB.js";import{H as M0}from"./HTextLabelBox-DAS3uNTR.js";const Ve=(a,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:e=>{a(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{a(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{a(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{a(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const s=l().contractVaultObj;s[e.id]=e,a(()=>({contractVaultObj:{...s}}))},setContractVaultObjLoading:e=>{a(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{a(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const s=l().contractClmmPoolObj;s[e.poolAddress]=e,a(()=>({contractClmmPoolObj:{...s}}))},setHoldTotalValue:(e,s)=>{const i=l().holdTotalValue;i[e]=s,a(()=>({holdTotalValue:{...i}}))},setDetailRefreshCount:e=>{a(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{a(()=>({lpTokenInfo:{...l().lpTokenInfo,...e}}))}}),H0=ue(ce(Ve,{name:"useVaultsStore2",partialize:a=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:i,lpTokenInfo:y}=a;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:i,lpTokenInfo:y}}}));function Ce(a,l){return{...a,vaultsTvl:(l==null?void 0:l.vaultsTvl)||"--",vaultsTvlDisplay:(l==null?void 0:l.vaultsTvlDisplay)||"--",vaultsApy:(l==null?void 0:l.vaultsApy)||"--",vaultsApyDisplay:(l==null?void 0:l.vaultsApyDisplay)||"--",vaultsTotalApy:(l==null?void 0:l.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(l==null?void 0:l.vaultsTotalApyDisplay)||"--",vaultsLstApy:(l==null?void 0:l.vaultsLstApy)||"--",vaultsLstApyDisplay:(l==null?void 0:l.vaultsLstApyDisplay)||"--",vaultsApr:(l==null?void 0:l.vaultsApr)||"--",vaultsAprDisplay:(l==null?void 0:l.vaultsAprDisplay)||"--",vaultsId:(l==null?void 0:l.vaultsId)||"",clmmPoolAddress:(l==null?void 0:l.clmmPoolAddress)||"",amountPerLpA:(l==null?void 0:l.amountPerLpA)||"0",amountPerLpB:(l==null?void 0:l.amountPerLpB)||"0",category:(l==null?void 0:l.category)||"",hardCapUSD:(l==null?void 0:l.hardCapUSD)||"--",depositRatioDisplay:(l==null?void 0:l.depositRatioDisplay)||"--",depositRatio:(l==null?void 0:l.depositRatio)||0,lpTokentype:(l==null?void 0:l.lpTokentype)||""}}const ua={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},we=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function De(){const{fetchByApi:a}=pe(),{getFavoritePoolList:l}=he(),{setVaultStatsObj:e,setVaultBaseList:s,vaultBaseList:i,vaultStatsObj:y,setVaultStatsLoading:t,setVaultBaseListLoading:u}=H0(),n=async(F=!0,_,M)=>{try{F&&u(!0);const c=await l({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:_});console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultList.ts:35 ~ getVaultBaseList ~ res:",c);const p=c==null?void 0:c.list.map(r=>{var C,P,B,J,L;const Y=[Y0((C=r==null?void 0:r.tokenA)==null?void 0:C.coin_type),Y0((P=r==null?void 0:r.tokenB)==null?void 0:P.coin_type)],g=r.isReverse?Y.reverse():Y,V=(B=r==null?void 0:r.miningRewardList)==null?void 0:B.map(O=>Y0(O==null?void 0:O.coinType)),Z=(J=r==null?void 0:r.miningRewardList)==null?void 0:J.map(O=>Y0(O==null?void 0:O.coinType)),v=Array.from(new Set([...g,...V,...Z]));return{...r,vaultsRewards:v,category:(L=M[r.poolAddress])==null?void 0:L.category}});return console.log("ðŸš€ ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",p),p.length>0&&s(p),p}catch(c){console.log("getVaultBaseList Error:",c)}finally{u(!1)}return[]},T=async()=>{var F;try{t(!0);const _=await a("/v3/sui/vaults/pools","GET"),M={};if(_!=null&&_.list)return(F=_==null?void 0:_.list)==null||F.forEach(c=>{var p,r;if(c.display||!oe){const Y=c==null?void 0:c.clmm_pool,g=c==null?void 0:c.id,V=c.category=="cetus"?y0(c==null?void 0:c.apy).add(y0(c.lst_apy)).toString():y0(c.apr).add(y0(c.apy)).toString(),Z=J0(V,!0,!0),v=c==null?void 0:c.apy,C=J0(v,!0),P=c==null?void 0:c.lst_apy,B=J0(P,!0),J=c==null?void 0:c.tvl,L=ne(J,"$"),O=c==null?void 0:c.apr,a0=J0(O,!0),i0=c==null?void 0:c.hard_cap_usd,$=y0(J).div(y0(i0)).mul(100),H=h0($,2);M[Y]={vaultsApy:v,vaultsApyDisplay:C,vaultsTotalApy:V,vaultsTotalApyDisplay:Z,vaultsLstApy:P,vaultsLstApyDisplay:B,vaultsApr:O,vaultsAprDisplay:a0,clmmPoolAddress:Y,vaultsId:g,vaultsTvl:J,vaultsTvlDisplay:L,amountPerLpA:(p=c==null?void 0:c.reward_per_lp)==null?void 0:p.amount_a_per_lp,amountPerLpB:(r=c==null?void 0:c.reward_per_lp)==null?void 0:r.amount_b_per_lp,category:c.category,hardCapUSD:i0,depositRatio:$,depositRatioDisplay:H,lpTokentype:c==null?void 0:c.lp_type}}}),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultList.ts:228 ~ getVaultsStats ~ vaultsStatsObj:",M),e(M),{vaultsStatsObj:M,vaultsList:_==null?void 0:_.list.filter(c=>c.display||!oe)}}catch(_){return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",_),y}finally{t(!1)}return{}},A=async F=>{try{const{vaultsStatsObj:_,vaultsList:M}=await T(),c=M.map(r=>r.clmm_pool);console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultList.ts:139 ~ getVaultList ~ statsObj:",_);const p=await n(!0,c,_);return console.log("ðŸš€ ~ getVaultList ~ baseList:",p),b(F,p,_)}catch(_){return console.error("getVaultList Error:",_),s0(F)}},s0=F=>{try{const _=i,M=y;if(_&&_.length>0)return b(F,_,M);throw Error("Cache is null")}catch(_){return console.error("getVaultListFromCache Error:",_),we}},b=(F,_,M)=>{const{sortRule:c,sortType:p}=F,r=_==null?void 0:_.map(g=>{const V=M==null?void 0:M[g.poolAddress];return Ce(g,V)}),Y=r==null?void 0:r.sort((g,V)=>{var Z,v,C,P;return p==="apr"?c==="desc"?((Z=V.vaultsTotalApy)==null?void 0:Z.replace("%",""))-((v=g.vaultsTotalApy)==null?void 0:v.replace("%","")):((C=g.vaultsTotalApy)==null?void 0:C.replace("%",""))-((P=V.vaultsTotalApy)==null?void 0:P.replace("%","")):c==="desc"?V.vaultsTvl-g.vaultsTvl:g.vaultsTvl-V.vaultsTvl});return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",JSON.stringify(Y)),Y};return{getVaultBaseList:n,getVaultsStats:T,getVaultListFromCache:s0,getVaultList:A}}function Pe(a){const{getVaultList:l,getVaultListFromCache:e}=De(),[s,i]=o.useState(void 0),[y,t]=o.useState(!1),u=async(T,A)=>{var F;(s===void 0||A)&&t(!0);const s0=await l({sortRule:"desc",sortType:"apr"}),b=((F=s0==null?void 0:s0.filter(_=>_.vaultsId===T))==null?void 0:F[0])||null;return t(!0),b&&i(b),b},n=T=>{var b;const A=e({sortRule:"desc",sortType:"apr"});return((b=A==null?void 0:A.filter(F=>F.vaultsId===T))==null?void 0:b[0])||null};return o.useEffect(()=>{if(a){const T=n(a);T&&i(T),u(a,!1)}},[a]),{vaultInfoLoading:y,apiVaultInfo:s,getApiVaultInfo:u}}const Ue=(a,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},setVaultStatsObj:e=>{a(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{a(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{a(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{a(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const s=l().contractVaultObj;s[e.id]=e,a(()=>({contractVaultObj:{...s}}))},setContractVaultObjLoading:e=>{a(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{a(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const s=l().contractClmmPoolObj;s[e.poolAddress]=e,a(()=>({contractClmmPoolObj:{...s}}))},setHoldTotalValue:(e,s)=>{const i=l().holdTotalValue;i[e]=s,a(()=>({holdTotalValue:{...i}}))},setDetailRefreshCount:e=>{a(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{const s=l().lpTokenInfo;a(()=>({lpTokenInfo:{...s,[e.coin_type]:e}}))}}),K0=ue(ce(Ue,{name:"useUnstableVaultsListStore",partialize:a=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:i}=a;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:s,contractClmmPoolObj:i}}}));function Le(a){const{contractVaultObj:l}=K0();return{contractVault:o.useMemo(()=>{if(a)return l[a]},[l,a])}}function Ee(a){const{contractClmmPoolObj:l}=K0();return{contractClmmInfo:o.useMemo(()=>{if(a)return l[a]},[l,a])}}function Re(a){return{stakeProtocolName:o.useMemo(()=>{if(a){if(a.includes("HASUI"))return"Haedal";if(a.includes("AFSUI"))return"Aftermath";if(a.includes("CERT"))return"Volo"}},[a])}}function je(a,l,e,s,i=!1){var z;const{volatileVaultsSdk:y}=z0(),{getTokenAmountValue:t}=N0(),{currentAccount:u}=Z0(),{getTokenInfo:n}=A0(),{setContractVaultObjLoading:T,setContractVaultObj:A,setContractClmmPoolObj:s0,setContractClmmPoolObjLoading:b,setHoldTotalValue:F,holdTotalValue:_,setLpTokenInfo:M}=K0(),c=async(m,h=!1)=>{T(!0);try{const E=await y.Vaults.getPool(m,h);E&&A(E)}catch(E){console.error("fetchVaultInfoFromContract error:",E)}finally{T(!1)}},p=async(m,h=!1)=>{b(!0);try{const E=await y.CetusClmmSDK.Pool.getPool(m,h);E&&s0(E)}catch(E){console.error("fetchClmmPoolFromContract error:",E)}finally{b(!1)}},{contractVault:r}=Le(a),{tokenInfo:Y}=A0(r==null?void 0:r.lp_token_type),[g,V]=o.useState(),[Z,v]=o.useState(!1),[C,P]=o.useState(),B=async(m,h,E)=>{v(!0);try{const k=await y.Vaults.getOwnerVaultsBalance(m,h);if(k){const l0=t0(k.lp_token_balance,E).toString();V({balance:k.lp_token_balance,balanceFormat:l0,balanceDisplay:h0(l0,void 0,void 0,te.ROUND_DOWN).toString()}),console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:98 ~ fetchVaultBalance ~ res:",k),P(k)}}catch(k){console.error("fetchVaultBalance error:",k)}finally{v(!1)}},J=o.useMemo(()=>r&&g&&y0(g.balance).gt(0)?y0(g.balance).div(r.lp_token_treasury).mul(100).toString():"0",[r,g]),{contractClmmInfo:L}=Ee(l),O=m=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:119 ~ getHoldCoinAmounts ~ accountBalanceInfo:",m),m&&e&&s&&i!==void 0){const h=I0(m.amount_a.toString(),e.decimals).toString(),E=I0(m.amount_b.toString(),s.decimals).toString(),k=i?E:h,l0=i?h:E;return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:131 ~ getHoldCoinAmounts ~ coinAmountA",h,E,k,l0),{coinAmountA:h,coinAmountB:E,displayCoinA:k,displayCoinB:l0}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[a0,i0]=o.useState();o.useEffect(()=>{C&&i0(O(C))},[C==null?void 0:C.amount_a,C==null?void 0:C.amount_b,e==null?void 0:e.decimals,s==null?void 0:s.decimals,i]);const $=o.useMemo(()=>{if(r&&L&&e&&s){const m=me("",r.lp_token_treasury,r,L);return O(m)}},[r,L,e,s,i]),H=o.useMemo(()=>{if(L&&e&&s)return j0.sqrtPriceX64ToPrice(new Q0(L.current_sqrt_price),e.decimals,s.decimals).toString()},[L==null?void 0:L.current_sqrt_price,e==null?void 0:e.decimals]),j=o.useMemo(()=>{if(r&&e&&s)return j0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_lower_index,e.decimals,s.decimals).toString()},[(z=r==null?void 0:r.clmm_vault)==null?void 0:z.wrapped_position.tick_lower_index,e==null?void 0:e.decimals]),v0=o.useMemo(()=>{if(r&&e&&s)return j0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_upper_index,e.decimals,s.decimals).toString()},[r==null?void 0:r.clmm_vault.wrapped_position.tick_upper_index,e==null?void 0:e.decimals]),e0=t(e==null?void 0:e.coin_type,a0==null?void 0:a0.coinAmountA),o0=t(s==null?void 0:s.coin_type,a0==null?void 0:a0.coinAmountB),u0=t(e==null?void 0:e.coin_type,$==null?void 0:$.coinAmountA),d0=t(s==null?void 0:s.coin_type,$==null?void 0:$.coinAmountB),w0=o.useMemo(()=>{if(H&&$)return de($.coinAmountA,$.coinAmountB,H,!1)},[H,$]),Q=o.useMemo(()=>y0(u0).add(d0).toString(),[u0,d0]);o.useEffect(()=>{a&&e0&&o0&&F(a,y0(e0).add(o0).toString())},[e0,o0,a]);const n0=o.useMemo(()=>{if(a)return _[a]},[_,a]),f0=o.useMemo(()=>{if(r&&r.hard_cap&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&s){let m;r.quote_type?m=r.quote_type==(e==null?void 0:e.address)?e:s:m=n("0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC");const h=I0(r.hard_cap,m.decimals).toString();return t(m==null?void 0:m.coin_type,h)}return""},[r==null?void 0:r.hard_cap,e,s]),x0=o.useMemo(()=>{if(u0&&d0&&(r!=null&&r.hard_cap)&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&s){const m=r.quote_type==(e==null?void 0:e.address)?e:s,h=I0(r.hard_cap,m.decimals).toString(),E=t(m==null?void 0:m.coin_type,h);if(y0(u0).add(d0).gt(E))return!0}return!1},[u0,d0,r==null?void 0:r.hard_cap,e,s]);o.useEffect(()=>{u!=null&&u.address||(V(void 0),P(void 0))},[u]);const R0=o.useMemo(()=>{if(f0&&Q)return y0(Q).div(f0).mul(100).toString()},[f0,Q]),D0=o.useMemo(()=>r&&y0(r.protocol_fee_rate).gt(0)?y0(r.protocol_fee_rate).div(1e4).mul(100).toString():"0",[r]);return{fetchVaultInfoFromContract:c,contractVault:r,lpTokenInfo:Y,balanceInfo:g,sharePoolRate:J,fetchClmmPoolFromContract:p,holdCoinAmounts:a0,totalValue:n0,maxPrice:v0,currPrice:H,minPrice:j,vaultCoinAmounts:$,vaultsCoinAValue:u0,vaultsCoinBValue:d0,vaultsCoinPercent:w0,holdCoinAValue:e0,holdCoinBValue:o0,fetchVaultBalance:B,isBalanceLoading:Z,vaultTvl:Q,hardCapUSD:f0,gtAumLimit:x0,depositRatio:R0,performanceFee:D0}}function ca(a,l){return{lpRate:o.useMemo(()=>a&&l?f(l).eq(0)?"100%":`${be(f(a).div(f(a).add(l)).mul(100).toString(),2,6)}%`:"0%",[a,l])}}function na(a,l,e=!1){return{amountLimit:o.useMemo(()=>{if(l)return f(l).mul(e?1+a:1-a).toString()},[l,a,e])}}function Oe(a){const{contractVaultObj:l}=H0();return{contractVault:o.useMemo(()=>{if(a)return l[a]},[l,a])}}function Fe(a){const{contractClmmPoolObj:l}=H0();return{contractClmmInfo:o.useMemo(()=>{if(a)return l[a]},[l,a])}}function Me(a){return{stakeProtocolName:o.useMemo(()=>{if(a){if(a.includes("HASUI"))return"Haedal";if(a.includes("AFSUI"))return"Aftermath";if(a.includes("CERT"))return"Volo"}},[a])}}function da(a,l){const e=o.useMemo(()=>{if(l&&a)return`${W0(f(l.amountPerLpA).mul(a).toFixed(18,te.ROUND_DOWN),l.displayTokenA.decimals)}  ${l==null?void 0:l.displayTokenA.symbol}`},[l==null?void 0:l.amountPerLpA,a]),s=o.useMemo(()=>{if(l&&a)return`${W0(f(l.amountPerLpB).mul(a).toFixed(18,te.ROUND_DOWN),l.displayTokenB.decimals)}  ${l==null?void 0:l.displayTokenB.symbol}`},[l==null?void 0:l.amountPerLpB,a]);return{rewardPerA:e,rewardPerB:s}}function Ie(a,l,e,s,i=!1){const{vaultsSdk:y}=z0(),{getTokenAmountValue:t}=N0(),{setContractVaultObjLoading:u,setContractVaultObj:n,setContractClmmPoolObj:T,setContractClmmPoolObjLoading:A,setHoldTotalValue:s0,holdTotalValue:b,setLpTokenInfo:F}=H0(),_=async(j,v0=!1)=>{u(!0);const e0=await y.Vaults.getVault(j,v0);console.log("ðŸš€ ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",e0),e0&&n(e0),u(!1)},M=async(j,v0=!1)=>{A(!0);const e0=await y.Pool.getPool(j,v0);console.log("ðŸš€ ~ file: useGetVaultInfo.ts:33 ~ fetchClmmPoolFromContract ~ info:",e0),e0&&T(e0),A(!1)},{contractVault:c}=Oe(a);console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:71 ~ contractVault:",c);const{tokenInfo:p}=A0(c==null?void 0:c.lp_token_type),{balanceInfo:r}=X0(p),Y=o.useMemo(()=>c&&r?y0(r.balance).div(c.total_supply).mul(100).toString():"0",[c,r]),{contractClmmInfo:g}=Fe(l),V=j=>{if(c&&g&&e&&s&&i!==void 0){const v0=new Q0(g.current_sqrt_price),e0=j0.tickIndexToSqrtPriceX64(c.position.tick_lower_index),o0=j0.tickIndexToSqrtPriceX64(c.position.tick_upper_index),u0=ye.getCoinAmountFromLiquidity(new Q0(j),v0,e0,o0,!1),d0=t0(u0.coinA.toString(),e.decimals).toString(),w0=t0(u0.coinB.toString(),s.decimals).toString();return{coinAmountA:d0,coinAmountB:w0,displayCoinA:i?w0:d0,displayCoinB:i?d0:w0}}},Z=o.useMemo(()=>{if(c&&r&&g){const j=ge.get_share_liquidity_by_amount(c,r.balance),v0=V(j);if(v0)return v0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[r==null?void 0:r.balance,g==null?void 0:g.current_sqrt_price]),v=o.useMemo(()=>{if(c&&g){const j=V(c.liquidity);if(j)return j}},[c==null?void 0:c.liquidity,g==null?void 0:g.current_sqrt_price]),C=o.useMemo(()=>{if(g&&e&&s)return j0.sqrtPriceX64ToPrice(new Q0(g.current_sqrt_price),e.decimals,s.decimals).toString()},[g==null?void 0:g.current_sqrt_price,e==null?void 0:e.decimals]),P=o.useMemo(()=>{if(c&&e&&s)return console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",j0.tickIndexToPrice(c.position.tick_lower_index,e.decimals,s.decimals).toString()),j0.tickIndexToPrice(c.position.tick_lower_index,e.decimals,s.decimals).toString()},[c==null?void 0:c.position.tick_lower_index,e==null?void 0:e.decimals]),B=o.useMemo(()=>{if(c&&e&&s)return j0.tickIndexToPrice(c.position.tick_upper_index,e.decimals,s.decimals).toString()},[c==null?void 0:c.position.tick_upper_index,e==null?void 0:e.decimals]),J=t(e==null?void 0:e.coin_type,Z.coinAmountA),L=t(s==null?void 0:s.coin_type,Z.coinAmountB),O=t(e==null?void 0:e.coin_type,v==null?void 0:v.coinAmountA),a0=t(s==null?void 0:s.coin_type,v==null?void 0:v.coinAmountB),i0=o.useMemo(()=>{if(C&&v)return de(v.coinAmountA,v.coinAmountB,C,!1)},[C,v]),$=o.useMemo(()=>ne(y0(O).add(a0).toString(),"$"),[O,a0]);console.log("ðŸš€ðŸš€ðŸš€ ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",$),o.useEffect(()=>{a&&s0(a,y0(J).add(L).toString())},[J,L,a]);const H=o.useMemo(()=>{if(a)return b[a]},[b,a]);return{fetchVaultInfoFromContract:_,contractVault:c,lpTokenInfo:p,balanceInfo:r,sharePoolRate:Y,fetchClmmPoolFromContract:M,holdCoinAmounts:Z,totalValue:H,maxPrice:B,currPrice:C,minPrice:P,vaultCoinAmounts:v,vaultsCoinAValue:O,vaultsCoinBValue:a0,vaultsCoinPercent:i0,holdCoinAValue:J,holdCoinBValue:L,calculateCoinAmounts:V,vaultTvl:$}}function $e(a,l,e,s,i,y,t,u,n){const{vaultsSlippage:T,mevProtect:A,maxCapForGas:s0,transactionMode:b,customGasPrice:F}=k0(),{fetchTokenPrices:_,getTokenAmountValue:M}=N0(),{setDetailRefreshCount:c}=K0(),{volatileVaultsSdk:p}=z0(),[r,Y]=o.useState(""),[g,V]=o.useState(""),[Z,v]=o.useState(!0),[C,P]=o.useState(""),B=o.useRef(""),J=o.useRef(!0),L=o.useRef(""),O=o.useRef("");o.useEffect(()=>{B.current=C},[C]),o.useEffect(()=>{J.current=Z},[Z]),o.useEffect(()=>{L.current=r},[r,y,g]),o.useEffect(()=>{O.current=g},[g,y,r]),o.useEffect(()=>{w()},[t]),o.useEffect(()=>{const W=[];s&&i&&(W.push(s.coin_type),W.push(i.coin_type)),W.length>0&&_(W)},[s==null?void 0:s.coin_type,i==null?void 0:i.coin_type]);const{balanceInfo:a0}=X0(y?i:s),{balanceInfo:i0}=X0(y?s:i),$=M(y?i==null?void 0:i.coin_type:s==null?void 0:s.coin_type,r),H=M(y?s==null?void 0:s.coin_type:i==null?void 0:i.coin_type,g),j=o.useMemo(()=>f($||"0").add(H||"0").toString(),[$,H]),v0=o.useMemo(()=>{if(t)return f(j).gt(f(1e4))},[j,t]),e0=o.useMemo(()=>!!(u&&j&&f(u).gt(0)&&f(j).add(f(n)).gt(u)),[u,j,n]),[o0,u0]=o.useState(!1),[d0,w0]=o.useState(!1),[Q,n0]=o.useState(void 0),x0=B0(async(W,q,G,p0=!1,m0)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",G),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",W,m0),s&&i&&e)try{w0(!0),c(0);const P0=q?s:i,x=q?i:s,R=U0(W,P0.decimals).toFixed(0),U=U0(m0||0,x.decimals).toFixed(0);let N;t?(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:107 ~ preCalculate ~ assetAction:",a),N=a=="both"?"FlexibleBoth":a==(s==null?void 0:s.coin_type)?"OnlyCoinA":"OnlyCoinB"):N="FixedOneSide";let I={uuid:G,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:e};t?(N==="OnlyCoinB"&&(I={uuid:G,mode:"OnlyCoinB",pool_id:e,coin_amount_b:R}),N==="OnlyCoinA"&&(I={uuid:G,mode:"OnlyCoinA",pool_id:e,coin_amount_a:R}),N=="FlexibleBoth"&&(I={uuid:G,mode:"FlexibleBoth",pool_id:e,coin_amount_a:q?R:U,coin_amount_b:q?U:R})):I={uuid:G,mode:"FixedOneSide",fixed_amount:R,fixed_coin_a:q,pool_id:e};const d=await p.Vaults.preCalculateDepositAmount(I,{onSuccess:(S,X)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:171 ~ onSuccess ~ receive_lp_amount, uuid:",S),X==I.uuid&&(n0({amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:S}),w0(!1))},onError:(S,X)=>{console.log("ðŸš€ ~ preCalculate ~ error:",S)}});console.log("ðŸš€ ~ preCalculate ~ res:",{...d,uuid:G,assetAction:a,"+amountInputARef.current":+L.current});const D={amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:d.receive_lp_amount};if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:204 ~ preCalculate ~ wrapRes:",D),D.ft_amount=="0"){n0(void 0);return}if(B.current!==G)return;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:162 ~ preCalculate ~ assetAction:",a),t){n0(D);return}if(a==="both"){const S=p0?!q:q;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:164 ~ preCalculate ~ fix_amount_a_page:",S),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:168 ~ preCalculate ~ +amountInputARef.current:",+L.current),S?+L.current?(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:173 ~ preCalculate ~ setAmountInputB:",V),V(t0(D.amount_b.toString(),p0?s==null?void 0:s.decimals:i==null?void 0:i.decimals).toString())):V(""):+O.current?Y(t0(D.amount_a.toString(),p0?i==null?void 0:i.decimals:s==null?void 0:s.decimals).toString()):Y("")}(a!=="both"||!t)&&n0(D)}catch(P0){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:202 ~ preCalculate ~ error:",P0),String(P0).indexOf("has reached hardCap")>-1,console.log("ðŸš€ ~ preCalculate ~ error:",P0),n0(void 0)}finally{}},500),R0=(W,q,G=!0,p0)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:210 ~ handleAmountInputChange ~ amount:",W,p0),v(q),!W&&!p0){n0(void 0),Y(""),V("");return}if((y?!q:q)?(Y(W),G&&!t&&V("")):(V(W),G&&!t&&Y("")),+W){if(t&&a=="both"&&(!W||!p0)){n0(void 0);return}const m0=O0();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ amount:",W),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ other_amount:",p0),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:255 ~ handleAmountInputChange ~ uuid:",m0),P(m0),x0(W,q,m0,y,p0)}else t?a=="both"?n0(void 0):(a==(s==null?void 0:s.coin_type)||a==(i==null?void 0:i.coin_type))&&w():w()},D0=()=>{const W=J.current?y?O.current:L.current:y?L.current:O.current,q=J.current?y?L.current:O.current:y?O.current:L.current;if(!(t&&a=="both"&&(!W||!q))){if(+W){const G=O0();P(G),x0(W,J.current,G,y,q)}console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",q),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",W)}};o.useEffect(()=>{w()},[a]);const[z,m]=o.useState(!1),{signAndExecuteTransaction:h,transactionConfirmation:E,transactionRejected:k}=ae(),l0=async()=>{if(e){m(!0);const W={pool_id:e,amount_a:String(y?U0(g||0,String(s==null?void 0:s.decimals)):U0(r||0,String(s==null?void 0:s.decimals))),amount_b:String(y?U0(r||0,String(i==null?void 0:i.decimals)):U0(g||0,String(i==null?void 0:i.decimals)))};console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",W);const q={getShowInfo:(G,p0,m0)=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",m0);const P0="Deposit "+[S0(r,y?i==null?void 0:i.symbol:s==null?void 0:s.symbol),S0(g,y?s==null?void 0:s.symbol:i==null?void 0:i.symbol)].filter(Boolean).join(" and "),x={modalDescriptionText:P0,toastTitleText:P0};if(G==="success"){let R=r,U=g;m0&&m0.events.forEach(I=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",I),I.type.indexOf("::pool::DepositEvent")>-1&&s&&i&&(R=String(I0(I.parsedJson.amount_a,s.decimals)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",R),U=String(I0(I.parsedJson.amount_b,i.decimals)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",U))});const N="Deposit "+[S0(y?U:R,y?i==null?void 0:i.symbol:s==null?void 0:s.symbol),S0(y?R:U,y?s==null?void 0:s.symbol:i==null?void 0:i.symbol)].filter(Boolean).join(" and ");x.toastDescriptionContent=N,x.modalDescriptionText=N,x.toastTitleText="Deposit successful"}return x}};E(q);try{const G=await p.Vaults.buildDepositPayload(W);await h(G,q,{useMev:A,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:s0,customGasPrice:F,msafeParams:{action:ee.AddVaultsPosition,txbParams:W}})?(w(),l()):D0()}catch{k(q)}}},w=()=>{Y(""),V(""),n0(void 0),P("")},{stakeProtocolName:_0}=Re(J.current?i==null?void 0:i.coin_type:s==null?void 0:s.coin_type),F0=o.useMemo(()=>{if(a!=="both"&&s&&i){const W=J.current?r:g,q=J.current?s:i,G=J.current?i:s;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:381 ~ showOnlySideTips ~ calculateResult:",Q),Q&&Q.swap_result){const p0=t0(Q.swap_result.swap_in_amount,q.decimals),m0=t0(f(Q.swap_result.swap_out_amount).mul(1-Number(T)).toString(),G.decimals);return q0.isSuiCoin(q.coin_type)?`By depositing ${E0(h0(W,9).toString(),9)} SUI, ${E0(h0(p0,9).toString(),9)} SUI will be converted to ${G==null?void 0:G.symbol} via ${_0} liquid staking and added to the pool together.`:`By depositing ${E0(h0(W,9).toString(),9)} ${q==null?void 0:q.symbol}, ${E0(h0(p0,9).toString(),9)} ${q==null?void 0:q.symbol} will be traded for ${E0(h0(m0,9).toString(),9)} ${G==null?void 0:G.symbol} and then added to the pool together.`}}},[a,Q,r,g]),L0=o.useMemo(()=>(console.log("ðŸš€ðŸš€ðŸš€ ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",j,t),j&&t?f(j).gt(0)&&f(j).lt(1e-4):!1),[t,j]);return{handleAmountInputChange:R0,fixAmountA:Z,amountInputA:r,amountInputB:g,balanceInfoA:a0,balanceInfoB:i0,amountValueA:$,amountValueB:H,preCalculateLoading:o0,inputTotalValue:j,calculateResult:Q,showOnlySideTips:F0,doAddAction:l0,reCalculateResult:D0,overHardtop:e0,zapNumError:v0,calculateLpLoading:d0,inputTotalValueError:L0}}function qe(a,l,e,s,i){const{fetchTokenPrices:y,getTokenAmountValue:t}=N0(),{setDetailRefreshCount:u}=H0(),{vaultsSdk:n}=z0(),{vaultsSlippage:T,mevProtect:A,maxCapForGas:s0,transactionMode:b,customGasPrice:F}=k0(),[_,M]=o.useState(""),[c,p]=o.useState(""),[r,Y]=o.useState(!0),[g,V]=o.useState(""),Z=o.useRef(""),v=o.useRef(!0),C=o.useRef(""),P=o.useRef("");o.useEffect(()=>{Z.current=g},[g]),o.useEffect(()=>{v.current=r},[r]),o.useEffect(()=>{C.current=_},[_]),o.useEffect(()=>{P.current=c},[c]),o.useEffect(()=>{const z=[];s&&i&&(z.push(s.coin_type),z.push(i.coin_type)),z.length>0&&y(z)},[s==null?void 0:s.coin_type,i==null?void 0:i.coin_type]);const{balanceInfo:B}=X0(s),{balanceInfo:J}=X0(i),L=t(s==null?void 0:s.coin_type,_),O=t(i==null?void 0:i.coin_type,c),a0=o.useMemo(()=>f(L||"0").add(O||"0").toString(),[L,O]),[i0,$]=o.useState(!1),[H,j]=o.useState(void 0),e0=B0(async(z,m,h)=>{if(s&&i&&e)try{$(!0),u(0);const k=U0(z,(m?s:i).decimals).toFixed(0),l0={vault_id:e,fix_amount_a:m,input_amount:k,slippage:Number(T),request_id:h,side:a==="both"?$0.Both:$0.OneSide};console.log("ðŸš€ ~ preCalculate ~ params:",l0,h);const w=await n.Vaults.calculateDepositAmount(l0,!1,!0);console.log("ðŸš€ ~ preCalculate ~ res:",{...w,uuid:h,assetAction:a,"+amountInputARef.current":+C.current}),Z.current===h&&(a==="both"&&(m?+C.current?(p(t0(w.amount_b.toString(),i.decimals).toString()),j(w)):p(""):+P.current?(M(t0(w.amount_a.toString(),s.decimals).toString()),j(w)):M("")),a!=="both"&&j(w))}catch(E){console.log("ðŸš€ ~ preCalculate ~ error:",E),j(void 0)}finally{$(!1)}},500),o0=(z,m,h=!0)=>{if(Y(m),m?(M(z),h&&p("")):(p(z),h&&M("")),+z){const E=q0.isSuiCoin(a);if(E&&f(z).lt(3)){V(""),j(void 0),$(!1);return}if(!E){const l0=t(a,z);if(f(l0).gt(1e4)){V(""),j(void 0),$(!1);return}}const k=O0();V(k),a==="both"&&$(!0),e0(z,m,k)}else x0()},u0=()=>{const z=v.current?C.current:P.current;if(+z){const m=O0();V(m),e0(z,v.current,m)}};o.useEffect(()=>{x0()},[a]);const[d0,w0]=o.useState(!1),{signAndExecuteTransaction:Q,transactionRejected:n0}=ae(),f0=async()=>{if(e){w0(!0);const z=U0(r?_:c,9),m={vault_id:e,side:a==="both"?$0.Both:$0.OneSide,fix_amount_a:r,input_amount:z.toString(),slippage:Number(T)};console.log("ðŸš€ ~ doAddAction ~ params:",m);const h={getShowInfo:(E,k)=>{const l0="Deposit "+[S0(_,s==null?void 0:s.symbol),S0(c,i==null?void 0:i.symbol)].filter(Boolean).join(" and "),w={modalDescriptionText:l0,toastTitleText:l0};if(E==="success"){let _0=_,F0=c;k&&(_0=f(_).gt(0)?G0(k,s)||_:"",F0=f(c).gt(0)?G0(k,i)||c:"");const L0="Deposit "+[S0(_0,s==null?void 0:s.symbol),S0(F0,i==null?void 0:i.symbol)].filter(Boolean).join(" and ");w.toastDescriptionContent=L0,w.modalDescriptionText=L0,w.toastTitleText="Deposit successful"}return w}};try{await Q(async()=>await n.Vaults.deposit(m),h,{useMev:A,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:s0,customGasPrice:F,msafeParams:{action:ee.AddVaultsPosition,txbParams:m}})?(x0(),l()):u0()}catch(E){console.log("ðŸš€ ~ doAddAction ~ error:",E),n0(h)}}},x0=()=>{M(""),p(""),$(!1),j(void 0),V("")},{stakeProtocolName:R0}=Me(v.current?i==null?void 0:i.coin_type:s==null?void 0:s.coin_type),D0=o.useMemo(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",a),a!=="both"&&s&&i){const z=v.current?_:c,m=v.current?s:i,h=v.current?i:s;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",H),H&&H.swap_result){const E=t0(H.swap_result.swap_in_amount,m.decimals),k=t0(f(H.swap_result.swap_out_amount).mul(1-Number(T)).toString(),h.decimals);return q0.isSuiCoin(m.coin_type)?`By depositing ${E0(h0(z,9).toString(),9)} SUI, ${E0(h0(E,9).toString(),9)} SUI will be converted to ${h==null?void 0:h.symbol} via ${R0} liquid staking and added to the pool together.`:`By depositing ${E0(h0(z,9).toString(),9)} ${m==null?void 0:m.symbol}, ${E0(h0(E,9).toString(),9)} ${m==null?void 0:m.symbol} will be traded for ${E0(h0(k,9).toString(),9)} ${h==null?void 0:h.symbol} and then added to the pool together.`}else if(!q0.isSuiCoin(a)){const E=t(a,z);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",E),f(E).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[a,H,_,c]);return{handleAmountInputChange:o0,fixAmountA:r,amountInputA:_,amountInputB:c,balanceInfoA:B,balanceInfoB:J,amountValueA:L,amountValueB:O,preCalculateLoading:i0,inputTotalValue:a0,calculateResult:H,showOnlySideTips:D0,doAddAction:f0,reCalculateResult:u0}}function Ge(a,l,e,s,i,y,t,u,n,T,A,s0,b,F,_){const{currentAccount:M}=Z0(),c=o.useMemo(()=>{const p={text:void 0,disabled:!1};if(!(M!=null&&M.address))return p.text="Connect Wallet",p.disabled=!1,p;if(!n||!T)return p.disabled=!0,p;if(l==="both"&&(!+s&&!+i||a&&(!+s||!+i)))return p.text="Enter an amount",p.disabled=!0,p;if(l!=="both"){if(!(+s||+i))return p.text="Enter an amount",p.disabled=!0,p;if(e&&!A){const r=q0.isSuiCoin(l);if(r&&l===(n==null?void 0:n.coin_type)&&f(s).lt(3)||r&&l===(T==null?void 0:T.coin_type)&&f(i).lt(3))return p.text="Minimum deposit 3 SUI",p.disabled=!0,p}}if(e&&s0&&!F||!e&&F||e&&a&&_)return p.text="Enter an amount",p.disabled=!0,p;if(l==="both"){if(f(s).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(f(i).gt(u||"0"))return p.disabled=!0,p.text=e?`Insufficient ${T==null?void 0:T.symbol} Balance`:"Invalid Amount",p}if(l!=="both"){if(y&&f(s).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(!y&&f(i).gt(u||"0"))return p.disabled=!0,p.text=e?`Insufficient ${T==null?void 0:T.symbol} Balance`:"Invalid Amount",p}return(b&&b.ft_amount=="0"||b&&b.burn_ft_amount=="0"||!b)&&(p.disabled=!0,p.text="Enter an amount"),p},[M==null?void 0:M.address,l,s,i,t,u,b,e,s0]);return{btnText:c.text,btnDisabled:c.disabled}}function ze(a,l,e,s,i,y,t,u,n,T){const{currentAccount:A}=Z0(),s0=o.useMemo(()=>{const b={text:void 0,disabled:!1};if(!(A!=null&&A.address))return b.text="Connect Wallet",b.disabled=!1,b;if(!n||!T)return b.disabled=!0,b;if(l==="both"&&!+s&&!+i)return b.text="Enter an amount",b.disabled=!0,b;if(l!=="both"){if(!(+s||+i))return b.text="Enter an amount",b.disabled=!0,b;if(e){const F=q0.isSuiCoin(l);if(F&&l===(n==null?void 0:n.coin_type)&&f(s).lt(3)||F&&l===(T==null?void 0:T.coin_type)&&f(i).lt(3))return b.text="Minimum deposit 3 SUI",b.disabled=!0,b}}if(l==="both"){if(f(s).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(f(i).gt(u||"0"))return b.disabled=!0,b.text=e?`Insufficient ${T==null?void 0:T.symbol} Balance`:"Invalid Amount",b}if(l!=="both"){if(y&&f(s).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(!y&&f(i).gt(u||"0"))return b.disabled=!0,b.text=e?`Insufficient ${T==null?void 0:T.symbol} Balance`:"Invalid Amount",b}return a&&l!=="both"?(b.text=e?"Zap In":"Zap Out",b):(console.log("ðŸš€ðŸš€ðŸš€ ~ submitBtnInfo ~ btnInfo:",b),b)},[A==null?void 0:A.address,l,s,i,t,u]);return{btnText:s0.text,btnDisabled:s0.disabled}}function Ne(a,l,e,s,i,y,t,u,n,T,A,s0,b){const{vaultsSlippage:F,mevProtect:_,maxCapForGas:M,transactionMode:c,customGasPrice:p}=k0(),{currentAccount:r}=Z0(),{setDetailRefreshCount:Y}=K0(),{fetchTokenPrices:g,getTokenAmountValue:V}=N0(),{volatileVaultsSdk:Z}=z0(),[v,C]=o.useState(""),[P,B]=o.useState(""),[J,L]=o.useState(!0),[O,a0]=o.useState(""),[i0,$]=o.useState(!1),[H,j]=o.useState(0),v0=o.useRef(O),e0=o.useRef(J),o0=o.useRef(v),u0=o.useRef(P),d0=o.useRef(i0),w0=o.useRef(H);o.useEffect(()=>{w0.current=H},[H]),o.useEffect(()=>{d0.current=i0},[i0]),o.useEffect(()=>{v0.current=O},[O]),o.useEffect(()=>{e0.current=J},[J]),o.useEffect(()=>{o0.current=v},[v,n,P]),o.useEffect(()=>{u0.current=P},[P,n,v]),o.useEffect(()=>{const d=[];t&&u&&(d.push(t.coin_type),d.push(u.coin_type)),d.length>0&&g(d)},[t==null?void 0:t.coin_type,u==null?void 0:u.coin_type]);const[Q,n0]=o.useState("0"),[f0,x0]=o.useState("0"),[R0,D0]=o.useState(!1);o.useEffect(()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:103 ~ holdCoinAmounts:",e),e&&(e!=null&&e.coinAmountA)&&(e!=null&&e.coinAmountB)&&z()},[e==null?void 0:e.coinAmountA,e==null?void 0:e.coinAmountB]),o.useEffect(()=>{G()},[b==null?void 0:b.current_sqrt_price]);const z=async()=>{console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:d,coinAmountB:D}=e;if(D0(!1),a==="both"||T||A){n0(n?D:d),x0(n?d:D);return}const S=a===(t==null?void 0:t.coin_type),X=S?D:d;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:121 ~ calculateAvailableAmount ~ fromAmount:",X);const r0=S?d:D;if(f(X).gt(0)){D0(!0);const K=O0();a0(K);const b0=a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",a);const g0={pool_id:y,mode:b0,burn_lp_amount:i,available_lp_amount:i};console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",g0);try{const T0=await Z.Vaults.preCalculateWithdrawAmount(g0);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",T0),b0=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const c0=t0(T0.receive_amount_a,t==null?void 0:t.decimals);n?x0(c0):n0(c0)}else{if((u==null?void 0:u.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const c0=t0(T0.receive_amount_b,u==null?void 0:u.decimals);console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",c0),n?n0(c0):x0(c0)}D0(!1)}catch(T0){console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",T0)}}else S?n0(r0):x0(r0)},m=V(n?u==null?void 0:u.coin_type:t==null?void 0:t.coin_type,v),h=V(n?t==null?void 0:t.coin_type:u==null?void 0:u.coin_type,P),E=o.useMemo(()=>f(m||"0").add(h||"0").toString(),[m,h]);console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",h),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",m);const[k,l0]=o.useState(!1),[w,_0]=o.useState(void 0),L0=B0(async(d,D,S,X,r0,K)=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:210 ~ removePercent:",r0),f(r0).gt(100)){a0(""),_0(void 0),l0(!1);return}if(t&&u&&y&&i){if(!r0){if(S){if(f(d).gt(n?f0:Q)){a0(""),_0(void 0),l0(!1);return}}else if(f(d).gt(n?Q:f0)){a0(""),_0(void 0),l0(!1);return}}Y(0),(+o0.current||+u0.current||r0)&&l0(!0);const g0=D?W0(d,0,!0):U0(d,(S?t:u).decimals).toFixed(0);let T0;if(a=="both")T0={pool_id:y,mode:"FixedOneSide",burn_lp_amount:String(g0)};else{const c0=a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";T0={pool_id:y,mode:c0,burn_lp_amount:String(g0)}}console.log("ðŸš€ ~ preCalculate ~ params:",T0,X,r0);try{const c0=await Z.Vaults.preCalculateWithdrawAmount(T0);console.log("ðŸš€ ~ preCalculate ~ res:",{...c0,uuid:X,assetAction:a});const C0={amount_a:n?c0.receive_amount_b:c0.receive_amount_a,amount_b:n?c0.receive_amount_a:c0.receive_amount_b,burn_ft_amount:c0.burn_lp_amount,swap:c0.swap};if(C0.burn_ft_amount=="0"){l0(!1),_0(void 0);return}const fe=t0(C0.amount_a.toString(),n?u.decimals:t.decimals).toString();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const le=t0(C0.amount_b.toString(),n?t.decimals:u.decimals).toString();if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",fe,t.decimals,le,u==null?void 0:u.decimals),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",le),a==="both"&&(D&&!K?(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",D),(n?!S:S)?(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+o0.current),+o0.current?(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),B(t0(C0.amount_b.toString(),n?t==null?void 0:t.decimals:u==null?void 0:u.decimals).toString()),_0(C0)):B("")):+u0.current?(C(t0(C0.amount_a.toString(),n?u==null?void 0:u.decimals:t==null?void 0:t.decimals).toString()),_0(C0)):C("")):_0(C0)),a!=="both"){if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",r0),r0){const ie=t0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?u.decimals:t.decimals).toString();if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",ie),n?!S:S)r0===100&&(C0.burn_ft_amount=i);else{const Qe=t0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?t.decimals:u.decimals).toString();r0===100&&(C0.burn_ft_amount=i)}}_0(C0)}}catch(c0){console.log("ðŸš€ ~ preCalculate ~ error:",c0),_0(void 0)}finally{l0(!1)}}},500),W=(d,D,S=!1,X=!1,r0=!0)=>{if(S){q(100);return}if(X){q(50);return}L(D),$(!1),(n?!D:D)?(C(d),r0?B(""):G()):(B(d),r0?C(""):G());let K,b0;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:462 ~ availableAmountA:",Q),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:466 ~ availableAmountB:",f0),(n?!D:D)?(b0=f(d).div(Q),K=W0(f(i).mul(b0).toString(),0,!0)):(b0=f(d).div(f0),K=W0(f(i).mul(b0).toString(),0,!0)),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:466 ~ removeLpAmount:",K),+K){const g0=O0();a0(g0),L0(String(K),!0,D,g0,b0.mul(100).toNumber(),b0.gte(100))}else N()},q=d=>{if($(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",d),j(d),i&&+i){if(d===0)N();else{const D=a===(t==null?void 0:t.coin_type);if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",D),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",f0),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",Q),L(D),a=="both"?(C(f(Q).mul(f(d).div(100)).toString()),B(f(f0).mul(f(d).div(100)).toString())):a===(t==null?void 0:t.coin_type)?n?B(f(f0).mul(f(d).div(100)).toString()):C(f(Q).mul(f(d).div(100)).toString()):n?C(f(Q).mul(f(d).div(100)).toString()):B(f(f0).mul(f(d).div(100)).toString()),d===100||a==="both"){const S=O0();a0(S);const X=d===100?i:f(i).mul(d).div(100).toFixed(0);console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",X),L0(X,!0,D,S,d,!0)}else{L(D),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",a),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const S=f(i).mul(d).div(100).toFixed();console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",S),L0(S,!0,D,O,d,!0)}}console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",Q)}},G=()=>{if(console.log("ðŸš€ ~ reCalculateResult ~ isPercentInput:",{isPercentInput:i0,removePercent:H}),i0)q(H);else{const d=e0.current?n?u0.current:o0.current:n?o0.current:u0.current;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",d),W(d,e0.current)}};o.useEffect(()=>{if(!i0)if(w&&i&&+i){let d=Number(f(w.burn_ft_amount).div(i).mul(100));d>100&&(d=100),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",d),j(d)}else j(0)},[w==null?void 0:w.burn_ft_amount,i0]);const[p0,m0]=o.useState(!1),{signAndExecuteTransaction:P0,transactionConfirmation:x,transactionRejected:R}=ae(),U=async()=>{if(y&&w&&i){m0(!0);let d;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",w),a==="both"?d={pool_id:y,burn_lp_amount:w.burn_ft_amount,mode:"FixedOneSide",slippage:Number(F)}:(t==null||t.coin_type,H===100?d={pool_id:y,burn_lp_amount:i,mode:a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(F)}:d={pool_id:y,burn_lp_amount:w.burn_ft_amount,mode:a==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(F)}),console.log("ðŸš€ ~ doRemoveAction ~ params:",JSON.stringify(d));const D={getShowInfo:(S,X)=>{const r0="Withdraw "+[S0(v,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(P,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean).join(" and "),K={modalDescriptionText:r0,toastDescriptionContent:r0};if(S==="success"){let b0=v,g0=P;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",X),X&&(b0=f(v).gt(0)?G0(X,n?u:t)||v:"",g0=f(P).gt(0)?G0(X,n?t:u)||P:""),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",b0,g0);const T0=[S0(n?g0:b0,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(n?b0:g0,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean),c0=(T0&&T0.length>1?"Removed ":"Withdraw ")+[S0(b0,n?u==null?void 0:u.symbol:t==null?void 0:t.symbol),S0(g0,n?t==null?void 0:t.symbol:u==null?void 0:u.symbol)].filter(Boolean).join(" and ");K.toastDescriptionContent=c0,K.modalDescriptionText=c0}return K}};x(D);try{const S=await Z.Vaults.buildWithdrawPayload(d);await P0(S,D,{useMev:_,txAction:"signTransactionBlock",useFastMode:c==="Fast Mode",maxCapForGas:M,customGasPrice:p,msafeParams:{action:ee.AddVaultsPosition,txbParams:d}})?(N(),l()):G(),m0(!1)}catch(S){console.log("ðŸš€ ~ doAddAction ~ error:",S),m0(!1),R(D)}}},N=()=>{C(""),B(""),o0.current="",u0.current="",j(0),l0(!1),_0(void 0),a0(""),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},I=o.useMemo(()=>{var d;if(console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",w),w&&(w!=null&&w.swap)&&a!=="both"&&t&&u){const D=J?n?P:v:n?v:P;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",D);const S=e0.current?t:u;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",S);const X=e0.current?u:t;console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",X);const r0=t0((d=w==null?void 0:w.swap)==null?void 0:d.swap_amount_in,X.decimals),K=h0(t0(f(w.swap.swap_amount_out).mul(1-Number(F)).toString(),S.decimals),S.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:F,calculateResult:w,swapOutAmount:K}),console.log("ðŸš€ðŸš€ðŸš€ ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${D} ${S==null?void 0:S.symbol}, ${r0} ${X==null?void 0:X.symbol} in the pool will be traded for ${K} ${S==null?void 0:S.symbol}`),`To withdraw ${h0(D)} ${S==null?void 0:S.symbol}, ${h0(r0)} ${X==null?void 0:X.symbol} in the pool will be traded for ${K} ${S==null?void 0:S.symbol}`}},[a,w,v,P]);return o.useEffect(()=>{G()},[Q,f0]),o.useEffect(()=>{N(),setTimeout(()=>{z()},200)},[s0,a,r==null?void 0:r.address]),{handleAmountInputChange:W,fixAmountA:J,amountInputA:v,amountInputB:P,availableAmountA:Q,availableAmountB:f0,amountValueA:m,amountValueB:h,preCalculateLoading:k,inputTotalValue:E,calculateResult:w,showOnlySideTips:I,doRemoveAction:U,handlePercentInputChange:q,isPercentInput:i0,removePercent:H,reCalculateResult:G,calculateAvailableLoading:R0,submitLoading:p0}}function He(a,l,e,s,i,y,t,u){const{setDetailRefreshCount:n}=H0(),{fetchTokenPrices:T,getTokenAmountValue:A}=N0(),{vaultsSdk:s0}=z0(),{vaultsSlippage:b,mevProtect:F,maxCapForGas:_,transactionMode:M,customGasPrice:c}=k0(),{findBestRouters:p}=Te(),[r,Y]=o.useState(""),[g,V]=o.useState(""),[Z,v]=o.useState(!0),[C,P]=o.useState(""),[B,J]=o.useState(!1),[L,O]=o.useState(0),a0=o.useRef(C),i0=o.useRef(Z),$=o.useRef(r),H=o.useRef(g),j=o.useRef(B),v0=o.useRef(L);o.useEffect(()=>{v0.current=L},[L]),o.useEffect(()=>{j.current=B},[B]),o.useEffect(()=>{a0.current=C},[C]),o.useEffect(()=>{i0.current=Z},[Z]),o.useEffect(()=>{$.current=r},[r]),o.useEffect(()=>{H.current=g},[g]),o.useEffect(()=>{const x=[];t&&u&&(x.push(t.coin_type),x.push(u.coin_type)),x.length>0&&T(x)},[t==null?void 0:t.coin_type,u==null?void 0:u.coin_type]);const[e0,o0]=o.useState("0"),[u0,d0]=o.useState("0"),[w0,Q]=o.useState(!1);o.useEffect(()=>{m0(),n0()},[a]),o.useEffect(()=>{n0()},[e.coinAmountA]);const n0=()=>{const{coinAmountA:x,coinAmountB:R}=e;if(console.log("ðŸš€ ~ useEffect ~ holdCoinAmounts:",e),Q(!1),a==="both"){o0(x),d0(R);return}const U=a===(t==null?void 0:t.coin_type),N=U?R:x;let I=U?x:R;const d=U?u:t,D=U?t:u;f(N).gt(0)?(Q(!0),o0("0"),d0("0"),p({fromToken:d,toToken:D,amount:U0(N,d.decimals).toString(),providersKeys:s0.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:C}).then(S=>{console.log("ðŸš€ ~ calculateAvailableAmount ~ uuid:",{result:S}),S.toAmountUi&&(I=f(I).add(S.toAmountUi).toString()),U?o0(I):d0(I)}).finally(()=>{Q(!1)})):U?o0(I):d0(I)},f0=A(t==null?void 0:t.coin_type,r),x0=A(u==null?void 0:u.coin_type,g),R0=o.useMemo(()=>f(f0||"0").add(x0||"0").toString(),[f0,x0]),[D0,z]=o.useState(!1),[m,h]=o.useState(void 0),k=B0(async(x,R,U,N,I)=>{var d,D;if(t&&u&&y&&i){if(!I){if(U){if(f(x).gt(e0)){P(""),h(void 0),z(!1);return}}else if(f(x).gt(u0)){P(""),h(void 0),z(!1);return}}n(0),(+$.current||+H.current||I)&&z(!0);const X=R?x:U0(x,(U?t:u).decimals).toFixed(0),r0={vault_id:y,fix_amount_a:U,input_amount:X,slippage:Number(b),request_id:N,side:a==="both"?$0.Both:$0.OneSide,is_ft_input:R,max_ft_amount:i};console.log("ðŸš€ ~ preCalculate ~ params:",r0,N,I);try{const K=await s0.Vaults.calculateWithdrawAmount(r0);if(console.log("ðŸš€ ~ preCalculate ~ res:",{...K,uuid:N,assetAction:a}),a0.current===N){const b0=t0(K.amount_a.toString(),t.decimals).toString(),g0=t0(K.amount_b.toString(),u.decimals).toString();if(a==="both"&&(R?(V(g0),Y(b0),I===100&&(o0(b0),d0(g0)),h(K)):U?+$.current?(V(g0),h(K)):V(""):+H.current?(Y(b0),h(K)):Y("")),a!=="both"){if(I){const T0=t0(f(K.amount_a).add(((d=K.swap_result)==null?void 0:d.swap_out_amount)||"0").toString(),t.decimals).toString();if(U)Y(T0),V(""),I===100&&(K.burn_ft_amount=i,o0(T0));else{const c0=t0(f(K.amount_b).add(((D=K.swap_result)==null?void 0:D.swap_out_amount)||"0").toString(),u.decimals).toString();Y(""),V(c0),I===100&&(K.burn_ft_amount=i,d0(c0))}}h(K)}}}catch(K){console.log("ðŸš€ ~ preCalculate ~ error:",K),h(void 0)}finally{z(!1)}}},500),l0=(x,R,U=!1,N=!1,I=!0)=>{if(U){w(100);return}if(N){w(50);return}if(v(R),J(!1),R?(Y(x),I&&V("")):(V(x),I&&Y("")),+x){const d=O0();P(d),k(x,!1,R,d)}else m0()},w=x=>{if(J(!0),O(x),i&&+i)if(x===0)m0();else{const R=a===(t==null?void 0:t.coin_type);if(v(R),x===100||a==="both"){const U=O0();P(U);const N=x===100?i:f(i).mul(x).div(100).toFixed(0);k(N,!0,R,U,x)}else{v(R);const U=f(a===(t==null?void 0:t.coin_type)?e0:u0).mul(x).div(100).toFixed();k(U,!1,R,C,x)}}},_0=()=>{if(console.log("ðŸš€ ~ reCalculateResult ~ isPercentInput:",{isPercentInput:B,removePercent:L}),B)w(L);else{const x=i0.current?$.current:H.current;l0(x,i0.current)}};o.useEffect(()=>{if(!B)if(m&&i&&+i){let x=Number(f(m.burn_ft_amount).div(i).mul(100));x>100&&(x=100),O(x)}else O(0)},[m==null?void 0:m.burn_ft_amount]);const[F0,L0]=o.useState(!1),{signAndExecuteTransaction:W,transactionConfirmation:q,transactionRejected:G}=ae(),p0=async()=>{if(y&&m&&i){L0(!0);let x;if(a==="both")x={vault_id:y,ft_amount:m==null?void 0:m.burn_ft_amount,slippage:Number(b)};else{const U=a===(t==null?void 0:t.coin_type);if(L===100)x={vault_id:y,is_ft_input:!0,input_amount:i,slippage:Number(b),max_ft_amount:i,fix_amount_a:U};else{const N=U0(Z?r:g,9);x={vault_id:y,is_ft_input:!1,input_amount:N.toString(),slippage:Number(b),max_ft_amount:i,fix_amount_a:U}}}console.log("ðŸš€ ~ doRemoveAction ~ params:",x);const R={getShowInfo:(U,N)=>{const I="Withdraw "+[S0(r,t==null?void 0:t.symbol),S0(g,u==null?void 0:u.symbol)].filter(Boolean).join(" and "),d={modalDescriptionText:I,toastDescriptionContent:I};if(U==="success"){let D=r,S=g;N&&(D=f(r).gt(0)?G0(N,t)||r:"",S=f(g).gt(0)?G0(N,u)||g:"");const X="Removed "+[S0(D,t==null?void 0:t.symbol),S0(S,u==null?void 0:u.symbol)].filter(Boolean).join(" and ");d.toastDescriptionContent=X,d.modalDescriptionText=X}return d}};q(R);try{const U=await s0.Vaults.withdraw(x);await W(U,R,{useMev:F,txAction:"signTransactionBlock",useFastMode:M==="Fast Mode",maxCapForGas:_,customGasPrice:c,msafeParams:{action:ee.RemoveVaultsPosition,txbParams:x}})?m0():_0(),l()}catch(U){console.log("ðŸš€ ~ doAddAction ~ error:",U),G(R)}}},m0=()=>{Y(""),V(""),O(0),z(!1),h(void 0),P("")},P0=o.useMemo(()=>{if(m&&m.swap_result&&a!=="both"&&t&&u){const x=Z?r:g,R=i0.current?t:u,U=i0.current?u:t,N=t0(m.swap_result.swap_in_amount,R.decimals),I=t0(f(m.swap_result.swap_out_amount).mul(1-Number(b)).toString(),U.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:b,calculateResult:m,swapOutAmount:I}),`To withdraw ${h0(x)} ${R==null?void 0:R.symbol}, ${h0(N)} ${U==null?void 0:U.symbol} in the pool will be traded for ${I} ${R==null?void 0:R.symbol}`}},[a,m,r,g]);return{handleAmountInputChange:l0,fixAmountA:Z,amountInputA:r,amountInputB:g,availableAmountA:e0,availableAmountB:u0,amountValueA:f0,amountValueB:x0,preCalculateLoading:D0,inputTotalValue:R0,calculateResult:m,showOnlySideTips:P0,doRemoveAction:p0,handlePercentInputChange:w,isPercentInput:B,removePercent:L,reCalculateResult:_0,calculateAvailableAmount:n0,calculateAvailableLoading:w0}}const We=a=>a?je:Ie,Xe=a=>a?$e:qe,Ke=a=>a?Ge:ze,Ye=a=>a?Ne:He,fa={useGetApiVaultInfo:Pe,useGetContractVaultInfo:We,useVaultsAdd:Xe,useAddButtonStatus:Ke,useVaultsRemove:Ye};function pa({vaultsLstApyDisplay:a,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:s,vaultsAprDisplay:i}){return V0.jsx(ve,{tooltip:V0.jsx(Je,{vaultsApyDisplay:l,vaultsLstApyDisplay:a,vaultsTotalApyDisplay:e,vaultsAprDisplay:i,category:s}),children:V0.jsx(xe,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:s=="cetus"?e:l})})}const Je=({vaultsLstApyDisplay:a,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:s,vaultsAprDisplay:i})=>V0.jsx(se,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:s=="cetus"?V0.jsxs(se,{children:[V0.jsx(M0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),V0.jsx(re,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:a,valueStyle:{fontSize:"12px"}})]}):V0.jsxs(se,{children:[V0.jsx(M0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:i}),V0.jsx(re,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function ma({coinType:a}){const{tokenInfo:l}=A0(a);return V0.jsx(_e,{children:V0.jsx(Se,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"})})}export{ma as C,Je as V,De as a,Re as b,Pe as c,pa as d,da as e,ua as f,Me as g,ca as h,na as i,K0 as j,H0 as u,fa as v};
