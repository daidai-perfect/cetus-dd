import{u as me}from"./swapWidget-BX_OS0Vd.js";import{k as ue,aU as ne,u as be,V as K0,aV as oe,a2 as y0,s as de,m as h0,z as re,j as z0,r as G0,n as Z0,aW as ge,ac as R0,aS as J0,au as I0,P as t0,w as te,A as W0,d as f,aA as ye,aX as _e,am as Se,x as B0,aY as $0,ao as L0,y as U0,aZ as Q0,a_ as ve,a6 as q0,W as xe,c as he,H as Te}from"./index-ptnn7YYs.js";import{a as o,j as V0,V as se,H as ce,C as Ve,T as Ce}from"./vendor-DsVemle5.js";import{a as Y0}from"./useWrapPoolData-Dtc_nARB.js";import{a as we}from"./useFavoritePool-BRmN064e.js";import{c as fe}from"./useGetPoolList-BWUJTUb5.js";import{u as A0}from"./useToken-D0Y8EMfE.js";import{u as H0}from"./useTokenBalance-BmzoUDH9.js";import{u as k0}from"./useTransaction-_40Gj-Xj.js";import{u as ee}from"./global-XGPon1rE.js";import{M as ae}from"./msafe-oYBkW7LJ.js";import{f as S0}from"./index-Cr9gqCFC.js";import{v as j0}from"./v4-C6aID195.js";import{u as De}from"./useFindBestRouting-DsIA0n5P.js";import{H as M0}from"./HTextLabelBox-BSdt2JjM.js";const Pe=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:e=>{s(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{s(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{s(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{s(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const a=l().contractVaultObj;a[e.id]=e,s(()=>({contractVaultObj:{...a}}))},setContractVaultObjLoading:e=>{s(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{s(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const a=l().contractClmmPoolObj;a[e.poolAddress]=e,s(()=>({contractClmmPoolObj:{...a}}))},setHoldTotalValue:(e,a)=>{const i=l().holdTotalValue;i[e]=a,s(()=>({holdTotalValue:{...i}}))},setDetailRefreshCount:e=>{s(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{s(()=>({lpTokenInfo:{...l().lpTokenInfo,...e}}))}}),N0=ue(ne(Pe,{name:"useVaultsStore2",partialize:s=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:i,lpTokenInfo:y}=s;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:i,lpTokenInfo:y}}}));function Ue(s,l){return{...s,vaultsTvl:(l==null?void 0:l.vaultsTvl)||"--",vaultsTvlDisplay:(l==null?void 0:l.vaultsTvlDisplay)||"--",vaultsApy:(l==null?void 0:l.vaultsApy)||"--",vaultsApyDisplay:(l==null?void 0:l.vaultsApyDisplay)||"--",vaultsTotalApy:(l==null?void 0:l.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(l==null?void 0:l.vaultsTotalApyDisplay)||"--",vaultsLstApy:(l==null?void 0:l.vaultsLstApy)||"--",vaultsLstApyDisplay:(l==null?void 0:l.vaultsLstApyDisplay)||"--",vaultsApr:(l==null?void 0:l.vaultsApr)||"--",vaultsAprDisplay:(l==null?void 0:l.vaultsAprDisplay)||"--",vaultsId:(l==null?void 0:l.vaultsId)||"",clmmPoolAddress:(l==null?void 0:l.clmmPoolAddress)||"",amountPerLpA:(l==null?void 0:l.amountPerLpA)||"0",amountPerLpB:(l==null?void 0:l.amountPerLpB)||"0",category:(l==null?void 0:l.category)||"",hardCapUSD:(l==null?void 0:l.hardCapUSD)||"--",depositRatioDisplay:(l==null?void 0:l.depositRatioDisplay)||"--",depositRatio:(l==null?void 0:l.depositRatio)||0,lpTokentype:(l==null?void 0:l.lpTokentype)||""}}const ba={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},Le=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_verified:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_verified:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_verified:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_verified:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_verified:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_verified:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_verified:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_verified:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_verified:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function Ee(){const{fetchByApi:s}=be(),{getFavoritePoolList:l}=we(),{setVaultStatsObj:e,setVaultBaseList:a,vaultBaseList:i,vaultStatsObj:y,setVaultStatsLoading:t,setVaultBaseListLoading:c}=N0(),n=async(M=!0,_,U)=>{try{M&&c(!0);const u=await l({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:_});console.log("🚀🚀🚀 ~ useGetVaultList.ts:35 ~ getVaultBaseList ~ res:",u);const p=u==null?void 0:u.list.map(r=>{var V,w,B,Q,L;const J=[K0((V=r==null?void 0:r.tokenA)==null?void 0:V.coin_type),K0((w=r==null?void 0:r.tokenB)==null?void 0:w.coin_type)],g=r.isReverse?J.reverse():J,T=(B=r==null?void 0:r.miningRewardList)==null?void 0:B.map(F=>K0(F==null?void 0:F.coinType)),Z=(Q=r==null?void 0:r.miningRewardList)==null?void 0:Q.map(F=>K0(F==null?void 0:F.coinType)),v=Array.from(new Set([...g,...T,...Z]));return{...r,vaultsRewards:v,category:(L=U[r.poolAddress])==null?void 0:L.category}});return console.log("🚀 ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",p),p.length>0&&a(p),p}catch(u){console.log("getVaultBaseList Error:",u)}finally{c(!1)}return[]},P=async()=>{var M;try{t(!0);const _=await s("/v3/sui/vaults/pools","GET"),U={};if(_!=null&&_.list)return(M=_==null?void 0:_.list)==null||M.forEach(u=>{var p,r;if(u.display||!oe){const J=u==null?void 0:u.clmm_pool,g=u==null?void 0:u.id,T=u.category=="cetus"?y0(u==null?void 0:u.apy).add(y0(u.lst_apy)).toString():y0(u.apr).add(y0(u.apy)).toString(),Z=Y0(T,!0,!0),v=u==null?void 0:u.apy,V=Y0(v,!0),w=u==null?void 0:u.lst_apy,B=Y0(w,!0),Q=u==null?void 0:u.tvl,L=de(Q,"$"),F=u==null?void 0:u.apr,a0=Y0(F,!0),i0=u==null?void 0:u.hard_cap_usd,q=y0(Q).div(y0(i0)).mul(100),N=h0(q,2);U[J]={vaultsApy:v,vaultsApyDisplay:V,vaultsTotalApy:T,vaultsTotalApyDisplay:Z,vaultsLstApy:w,vaultsLstApyDisplay:B,vaultsApr:F,vaultsAprDisplay:a0,clmmPoolAddress:J,vaultsId:g,vaultsTvl:Q,vaultsTvlDisplay:L,amountPerLpA:(p=u==null?void 0:u.reward_per_lp)==null?void 0:p.amount_a_per_lp,amountPerLpB:(r=u==null?void 0:u.reward_per_lp)==null?void 0:r.amount_b_per_lp,category:u.category,hardCapUSD:i0,depositRatio:q,depositRatioDisplay:N,lpTokentype:u==null?void 0:u.lp_type}}}),console.log("🚀🚀🚀 ~ useGetVaultList.ts:228 ~ getVaultsStats ~ vaultsStatsObj:",U),e(U),{vaultsStatsObj:U,vaultsList:_==null?void 0:_.list.filter(u=>u.display||!oe)}}catch(_){return console.log("🚀🚀🚀 ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",_),y}finally{t(!1)}return{}},l0=async M=>{try{const{vaultsStatsObj:_,vaultsList:U}=await P(),u=U.map(r=>r.clmm_pool);console.log("🚀🚀🚀 ~ useGetVaultList.ts:139 ~ getVaultList ~ statsObj:",_);const p=await n(!0,u,_);return console.log("🚀 ~ getVaultList ~ baseList:",p),b(M,p,_)}catch(_){return console.error("getVaultList Error:",_),k(M)}},k=M=>{try{const _=i,U=y;if(_&&_.length>0)return b(M,_,U);throw Error("Cache is null")}catch(_){return console.error("getVaultListFromCache Error:",_),Le}},b=(M,_,U)=>{const{sortRule:u,sortType:p}=M,r=_==null?void 0:_.map(g=>{const T=U==null?void 0:U[g.poolAddress];return Ue(g,T)}),J=r==null?void 0:r.sort((g,T)=>{var Z,v,V,w;return p==="apr"?u==="desc"?((Z=T.vaultsTotalApy)==null?void 0:Z.replace("%",""))-((v=g.vaultsTotalApy)==null?void 0:v.replace("%","")):((V=g.vaultsTotalApy)==null?void 0:V.replace("%",""))-((w=T.vaultsTotalApy)==null?void 0:w.replace("%","")):u==="desc"?T.vaultsTvl-g.vaultsTvl:g.vaultsTvl-T.vaultsTvl});return console.log("🚀🚀🚀 ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",JSON.stringify(J)),J};return{getVaultBaseList:n,getVaultsStats:P,getVaultListFromCache:k,getVaultList:l0}}function Re(s){const{getVaultList:l,getVaultListFromCache:e}=Ee(),[a,i]=o.useState(void 0),[y,t]=o.useState(!1),{setFromCoin:c,setToCoin:n}=me(),P=async(k,b)=>{var U;(a===void 0||b)&&t(!0);const M=await l({sortRule:"desc",sortType:"apr"}),_=((U=M==null?void 0:M.filter(u=>u.vaultsId===k))==null?void 0:U[0])||null;return t(!0),_&&i(_),_},l0=k=>{var _;const b=e({sortRule:"desc",sortType:"apr"});return((_=b==null?void 0:b.filter(U=>U.vaultsId===k))==null?void 0:_[0])||null};return o.useEffect(()=>{if(s){const k=l0(s);k&&i(k),P(s,!1)}},[s]),o.useEffect(()=>(a&&(c(a==null?void 0:a.displayTokenA),n(a==null?void 0:a.displayTokenB)),()=>{c(re.clmm_swap.from_coin),n(re.clmm_swap.to_coin)}),[a==null?void 0:a.vaultsId]),{vaultInfoLoading:y,apiVaultInfo:a,getApiVaultInfo:P}}const je=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},setVaultStatsObj:e=>{s(()=>({vaultStatsObj:e}))},vaultBaseList:[],setVaultBaseList:e=>{s(()=>({vaultBaseList:e}))},setVaultBaseListLoading:e=>{s(()=>({vaultBaseListLoading:e}))},setVaultStatsLoading:e=>{s(()=>({vaultStatsLoading:e}))},setContractVaultObj:e=>{const a=l().contractVaultObj;a[e.id]=e,s(()=>({contractVaultObj:{...a}}))},setContractVaultObjLoading:e=>{s(()=>({contractVaultObjLoading:e}))},setContractClmmPoolObjLoading:e=>{s(()=>({contractClmmPoolObjLoading:e}))},setContractClmmPoolObj:e=>{const a=l().contractClmmPoolObj;a[e.poolAddress]=e,s(()=>({contractClmmPoolObj:{...a}}))},setHoldTotalValue:(e,a)=>{const i=l().holdTotalValue;i[e]=a,s(()=>({holdTotalValue:{...i}}))},setDetailRefreshCount:e=>{s(()=>({detailRefreshCount:e}))},lpTokenInfo:{},setLpTokenInfo:e=>{const a=l().lpTokenInfo;s(()=>({lpTokenInfo:{...a,[e.coin_type]:e}}))}}),X0=ue(ne(je,{name:"useUnstableVaultsListStore",partialize:s=>{const{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:i}=s;return{vaultBaseList:l,vaultStatsObj:e,contractVaultObj:a,contractClmmPoolObj:i}}}));function Oe(s){const{contractVaultObj:l}=X0();return{contractVault:o.useMemo(()=>{if(s)return l[s]},[l,s])}}function Fe(s){const{contractClmmPoolObj:l}=X0();return{contractClmmInfo:o.useMemo(()=>{if(s)return l[s]},[l,s])}}function Me(s){return{stakeProtocolName:o.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function Ie(s,l,e,a,i=!1){var I;const{volatileVaultsSdk:y}=z0(),{getTokenAmountValue:t}=G0(),{currentAccount:c}=Z0(),{tokenInfo:n}=A0("0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"),{setContractVaultObjLoading:P,setContractVaultObj:l0,setContractClmmPoolObj:k,setContractClmmPoolObjLoading:b,setHoldTotalValue:M,holdTotalValue:_,setLpTokenInfo:U}=X0(),u=async(m,x=!1)=>{P(!0);try{const R=await y.Vaults.getPool(m,x);R&&l0(R)}catch(R){console.error("fetchVaultInfoFromContract error:",R)}finally{P(!1)}},p=async(m,x=!1)=>{b(!0);try{const R=await y.CetusClmmSDK.Pool.getPool(m,x);R&&k(R)}catch(R){console.error("fetchClmmPoolFromContract error:",R)}finally{b(!1)}},{contractVault:r}=Oe(s),{tokenInfo:J}=A0(r==null?void 0:r.lp_token_type),[g,T]=o.useState(),[Z,v]=o.useState(!1),[V,w]=o.useState(),B=async(m,x,R)=>{v(!0);try{const H=await y.Vaults.getOwnerVaultsBalance(m,x);if(H){const s0=t0(H.lp_token_balance,R).toString();T({balance:H.lp_token_balance,balanceFormat:s0,balanceDisplay:h0(s0,void 0,void 0,te.ROUND_DOWN).toString()}),console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:98 ~ fetchVaultBalance ~ res:",H),w(H)}}catch(H){console.error("fetchVaultBalance error:",H)}finally{v(!1)}},Q=o.useMemo(()=>r&&g&&y0(g.balance).gt(0)?y0(g.balance).div(r.lp_token_treasury).mul(100).toString():"0",[r,g]),{contractClmmInfo:L}=Fe(l),F=m=>{if(console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:119 ~ getHoldCoinAmounts ~ accountBalanceInfo:",m),m&&e&&a&&i!==void 0){const x=I0(m.amount_a.toString(),e.decimals).toString(),R=I0(m.amount_b.toString(),a.decimals).toString(),H=i?R:x,s0=i?x:R;return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:131 ~ getHoldCoinAmounts ~ coinAmountA",x,R,H,s0),{coinAmountA:x,coinAmountB:R,displayCoinA:H,displayCoinB:s0}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[a0,i0]=o.useState();o.useEffect(()=>{V&&i0(F(V))},[V==null?void 0:V.amount_a,V==null?void 0:V.amount_b,e==null?void 0:e.decimals,a==null?void 0:a.decimals,i]);const q=o.useMemo(()=>{if(r&&L&&e&&a){const m=ge("",r.lp_token_treasury,r,L);return F(m)}},[r,L,e,a,i]),N=o.useMemo(()=>{if(L&&e&&a)return R0.sqrtPriceX64ToPrice(new J0(L.current_sqrt_price),e.decimals,a.decimals).toString()},[L==null?void 0:L.current_sqrt_price,e==null?void 0:e.decimals]),O=o.useMemo(()=>{if(r&&e&&a)return R0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_lower_index,e.decimals,a.decimals).toString()},[(I=r==null?void 0:r.clmm_vault)==null?void 0:I.wrapped_position.tick_lower_index,e==null?void 0:e.decimals]),v0=o.useMemo(()=>{if(r&&e&&a)return R0.tickIndexToPrice(r.clmm_vault.wrapped_position.tick_upper_index,e.decimals,a.decimals).toString()},[r==null?void 0:r.clmm_vault.wrapped_position.tick_upper_index,e==null?void 0:e.decimals]),e0=t(e==null?void 0:e.coin_type,a0==null?void 0:a0.coinAmountA),o0=t(a==null?void 0:a.coin_type,a0==null?void 0:a0.coinAmountB),c0=t(e==null?void 0:e.coin_type,q==null?void 0:q.coinAmountA),d0=t(a==null?void 0:a.coin_type,q==null?void 0:q.coinAmountB),w0=o.useMemo(()=>{if(N&&q)return fe(q.coinAmountA,q.coinAmountB,N,!1)},[N,q]),A=o.useMemo(()=>y0(c0).add(d0).toString(),[c0,d0]);o.useEffect(()=>{s&&e0&&o0&&M(s,y0(e0).add(o0).toString())},[e0,o0,s]);const n0=o.useMemo(()=>{if(s)return _[s]},[_,s]),f0=o.useMemo(()=>{if(r&&r.hard_cap&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&a){let m;r.quote_type?m=r.quote_type==(e==null?void 0:e.address)?e:a:m=n;const x=I0(r.hard_cap,m.decimals).toString();return t(m==null?void 0:m.coin_type,x)}return""},[r==null?void 0:r.hard_cap,e,a]),x0=o.useMemo(()=>{if(c0&&d0&&(r!=null&&r.hard_cap)&&y0(r==null?void 0:r.hard_cap).gt(0)&&e&&a){const m=r.quote_type==(e==null?void 0:e.address)?e:a,x=I0(r.hard_cap,m.decimals).toString(),R=t(m==null?void 0:m.coin_type,x);if(y0(c0).add(d0).gt(R))return!0}return!1},[c0,d0,r==null?void 0:r.hard_cap,e,a]);o.useEffect(()=>{c!=null&&c.address||(T(void 0),w(void 0))},[c]);const E0=o.useMemo(()=>{if(f0&&A)return y0(A).div(f0).mul(100).toString()},[f0,A]),D0=o.useMemo(()=>r&&y0(r.protocol_fee_rate).gt(0)?y0(r.protocol_fee_rate).div(1e4).mul(100).toString():"0",[r]);return{fetchVaultInfoFromContract:u,contractVault:r,lpTokenInfo:J,balanceInfo:g,sharePoolRate:Q,fetchClmmPoolFromContract:p,holdCoinAmounts:a0,totalValue:n0,maxPrice:v0,currPrice:N,minPrice:O,vaultCoinAmounts:q,vaultsCoinAValue:c0,vaultsCoinBValue:d0,vaultsCoinPercent:w0,holdCoinAValue:e0,holdCoinBValue:o0,fetchVaultBalance:B,isBalanceLoading:Z,vaultTvl:A,hardCapUSD:f0,gtAumLimit:x0,depositRatio:E0,performanceFee:D0}}function ga(s,l){return{lpRate:o.useMemo(()=>s&&l?f(l).eq(0)?"100%":`${ye(f(s).div(f(s).add(l)).mul(100).toString(),2,6)}%`:"0%",[s,l])}}function ya(s,l,e=!1){return{amountLimit:o.useMemo(()=>{if(l)return f(l).mul(e?1+s:1-s).toString()},[l,s,e])}}function $e(s){const{contractVaultObj:l}=N0();return{contractVault:o.useMemo(()=>{if(s)return l[s]},[l,s])}}function qe(s){const{contractClmmPoolObj:l}=N0();return{contractClmmInfo:o.useMemo(()=>{if(s)return l[s]},[l,s])}}function ze(s){return{stakeProtocolName:o.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function _a(s,l){const e=o.useMemo(()=>{if(l&&s)return`${W0(f(l.amountPerLpA).mul(s).toFixed(18,te.ROUND_DOWN),l.displayTokenA.decimals)}  ${l==null?void 0:l.displayTokenA.symbol}`},[l==null?void 0:l.amountPerLpA,s]),a=o.useMemo(()=>{if(l&&s)return`${W0(f(l.amountPerLpB).mul(s).toFixed(18,te.ROUND_DOWN),l.displayTokenB.decimals)}  ${l==null?void 0:l.displayTokenB.symbol}`},[l==null?void 0:l.amountPerLpB,s]);return{rewardPerA:e,rewardPerB:a}}function Ge(s,l,e,a,i=!1){const{vaultsSdk:y}=z0(),{getTokenAmountValue:t}=G0(),{setContractVaultObjLoading:c,setContractVaultObj:n,setContractClmmPoolObj:P,setContractClmmPoolObjLoading:l0,setHoldTotalValue:k,holdTotalValue:b,setLpTokenInfo:M}=N0(),_=async(O,v0=!1)=>{c(!0);const e0=await y.Vaults.getVault(O,v0);console.log("🚀 ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",e0),e0&&n(e0),c(!1)},U=async(O,v0=!1)=>{l0(!0);const e0=await y.Pool.getPool(O,v0);console.log("🚀 ~ file: useGetVaultInfo.ts:33 ~ fetchClmmPoolFromContract ~ info:",e0),e0&&P(e0),l0(!1)},{contractVault:u}=$e(s);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:71 ~ contractVault:",u);const{tokenInfo:p}=A0(u==null?void 0:u.lp_token_type),{balanceInfo:r}=H0(p),J=o.useMemo(()=>u&&r?y0(r.balance).div(u.total_supply).mul(100).toString():"0",[u,r]),{contractClmmInfo:g}=qe(l),T=O=>{if(u&&g&&e&&a&&i!==void 0){const v0=new J0(g.current_sqrt_price),e0=R0.tickIndexToSqrtPriceX64(u.position.tick_lower_index),o0=R0.tickIndexToSqrtPriceX64(u.position.tick_upper_index),c0=Se.getCoinAmountFromLiquidity(new J0(O),v0,e0,o0,!1),d0=t0(c0.coinA.toString(),e.decimals).toString(),w0=t0(c0.coinB.toString(),a.decimals).toString();return{coinAmountA:d0,coinAmountB:w0,displayCoinA:i?w0:d0,displayCoinB:i?d0:w0}}},Z=o.useMemo(()=>{if(u&&r&&g){const O=_e.get_share_liquidity_by_amount(u,r.balance),v0=T(O);if(v0)return v0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[r==null?void 0:r.balance,g==null?void 0:g.current_sqrt_price]),v=o.useMemo(()=>{if(u&&g){const O=T(u.liquidity);if(O)return O}},[u==null?void 0:u.liquidity,g==null?void 0:g.current_sqrt_price]),V=o.useMemo(()=>{if(g&&e&&a)return R0.sqrtPriceX64ToPrice(new J0(g.current_sqrt_price),e.decimals,a.decimals).toString()},[g==null?void 0:g.current_sqrt_price,e==null?void 0:e.decimals]),w=o.useMemo(()=>{if(u&&e&&a)return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",R0.tickIndexToPrice(u.position.tick_lower_index,e.decimals,a.decimals).toString()),R0.tickIndexToPrice(u.position.tick_lower_index,e.decimals,a.decimals).toString()},[u==null?void 0:u.position.tick_lower_index,e==null?void 0:e.decimals]),B=o.useMemo(()=>{if(u&&e&&a)return R0.tickIndexToPrice(u.position.tick_upper_index,e.decimals,a.decimals).toString()},[u==null?void 0:u.position.tick_upper_index,e==null?void 0:e.decimals]),Q=t(e==null?void 0:e.coin_type,Z.coinAmountA),L=t(a==null?void 0:a.coin_type,Z.coinAmountB),F=t(e==null?void 0:e.coin_type,v==null?void 0:v.coinAmountA),a0=t(a==null?void 0:a.coin_type,v==null?void 0:v.coinAmountB),i0=o.useMemo(()=>{if(V&&v)return fe(v.coinAmountA,v.coinAmountB,V,!1)},[V,v]),q=o.useMemo(()=>de(y0(F).add(a0).toString(),"$"),[F,a0]);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",q),o.useEffect(()=>{s&&k(s,y0(Q).add(L).toString())},[Q,L,s]);const N=o.useMemo(()=>{if(s)return b[s]},[b,s]);return{fetchVaultInfoFromContract:_,contractVault:u,lpTokenInfo:p,balanceInfo:r,sharePoolRate:J,fetchClmmPoolFromContract:U,holdCoinAmounts:Z,totalValue:N,maxPrice:B,currPrice:V,minPrice:w,vaultCoinAmounts:v,vaultsCoinAValue:F,vaultsCoinBValue:a0,vaultsCoinPercent:i0,holdCoinAValue:Q,holdCoinBValue:L,calculateCoinAmounts:T,vaultTvl:q}}function Ne(s,l,e,a,i,y,t,c,n){const{vaultsSlippage:P,mevProtect:l0,maxCapForGas:k,transactionMode:b,customGasPrice:M}=ee(),{fetchTokenPrices:_,getTokenAmountValue:U}=G0(),{setDetailRefreshCount:u}=X0(),{volatileVaultsSdk:p}=z0(),[r,J]=o.useState(""),[g,T]=o.useState(""),[Z,v]=o.useState(!0),[V,w]=o.useState(""),B=o.useRef(""),Q=o.useRef(!0),L=o.useRef(""),F=o.useRef("");o.useEffect(()=>{B.current=V},[V]),o.useEffect(()=>{Q.current=Z},[Z]),o.useEffect(()=>{L.current=r},[r,y,g]),o.useEffect(()=>{F.current=g},[g,y,r]),o.useEffect(()=>{E()},[t]),o.useEffect(()=>{const X=[];a&&i&&(X.push(a.coin_type),X.push(i.coin_type)),X.length>0&&_(X)},[a==null?void 0:a.coin_type,i==null?void 0:i.coin_type]);const{balanceInfo:a0}=H0(y?i:a),{balanceInfo:i0}=H0(y?a:i),q=U(y?i==null?void 0:i.coin_type:a==null?void 0:a.coin_type,r),N=U(y?a==null?void 0:a.coin_type:i==null?void 0:i.coin_type,g),O=o.useMemo(()=>f(q||"0").add(N||"0").toString(),[q,N]),v0=o.useMemo(()=>{if(t)return f(O).gt(f(1e4))},[O,t]),e0=o.useMemo(()=>!!(c&&O&&f(c).gt(0)&&f(O).add(f(n)).gt(c)),[c,O,n]),[o0,c0]=o.useState(!1),[d0,w0]=o.useState(!1),[A,n0]=o.useState(void 0),x0=B0(async(X,z,G,p0=!1,m0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",G),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",X,m0),a&&i&&e)try{w0(!0),u(0);const P0=z?a:i,h=z?i:a,j=U0(X,P0.decimals).toFixed(0),D=U0(m0||0,h.decimals).toFixed(0);let W;t?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:107 ~ preCalculate ~ assetAction:",s),W=s=="both"?"FlexibleBoth":s==(a==null?void 0:a.coin_type)?"OnlyCoinA":"OnlyCoinB"):W="FixedOneSide";let $={uuid:G,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:e};t?(W==="OnlyCoinB"&&($={uuid:G,mode:"OnlyCoinB",pool_id:e,coin_amount_b:j}),W==="OnlyCoinA"&&($={uuid:G,mode:"OnlyCoinA",pool_id:e,coin_amount_a:j}),W=="FlexibleBoth"&&($={uuid:G,mode:"FlexibleBoth",pool_id:e,coin_amount_a:z?j:D,coin_amount_b:z?D:j})):$={uuid:G,mode:"FixedOneSide",fixed_amount:j,fixed_coin_a:z,pool_id:e};const d=await p.Vaults.preCalculateDepositAmount($,{onSuccess:(S,K)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:171 ~ onSuccess ~ receive_lp_amount, uuid:",S),K==$.uuid&&(n0({amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:S}),w0(!1))},onError:(S,K)=>{console.log("🚀 ~ preCalculate ~ error:",S)}});console.log("🚀 ~ preCalculate ~ res:",{...d,uuid:G,assetAction:s,"+amountInputARef.current":+L.current});const C={amount_a:p0?d.deposit_amount_b:d.deposit_amount_a,amount_b:p0?d.deposit_amount_a:d.deposit_amount_b,ft_amount:d.receive_lp_amount};if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:204 ~ preCalculate ~ wrapRes:",C),C.ft_amount=="0"){n0(void 0);return}if(B.current!==G)return;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:162 ~ preCalculate ~ assetAction:",s),t){n0(C);return}if(s==="both"){const S=p0?!z:z;console.log("🚀🚀🚀 ~ useVaultsAdd.ts:164 ~ preCalculate ~ fix_amount_a_page:",S),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:168 ~ preCalculate ~ +amountInputARef.current:",+L.current),S?+L.current?(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:173 ~ preCalculate ~ setAmountInputB:",T),T(t0(C.amount_b.toString(),p0?a==null?void 0:a.decimals:i==null?void 0:i.decimals).toString())):T(""):+F.current?J(t0(C.amount_a.toString(),p0?i==null?void 0:i.decimals:a==null?void 0:a.decimals).toString()):J("")}(s!=="both"||!t)&&n0(C)}catch(P0){console.log("🚀🚀🚀 ~ useVaultsAdd.ts:202 ~ preCalculate ~ error:",P0),String(P0).indexOf("has reached hardCap")>-1,console.log("🚀 ~ preCalculate ~ error:",P0),n0(void 0)}finally{}},500),E0=(X,z,G=!0,p0)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:210 ~ handleAmountInputChange ~ amount:",X,p0),v(z),!X&&!p0){n0(void 0),J(""),T("");return}if((y?!z:z)?(J(X),G&&!t&&T("")):(T(X),G&&!t&&J("")),+X){if(t&&s=="both"&&(!X||!p0)){n0(void 0);return}const m0=j0();console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ amount:",X),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:300 ~ handleAmountInputChange ~ other_amount:",p0),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:255 ~ handleAmountInputChange ~ uuid:",m0),w(m0),x0(X,z,m0,y,p0)}else t?s=="both"?n0(void 0):(s==(a==null?void 0:a.coin_type)||s==(i==null?void 0:i.coin_type))&&E():E()},D0=()=>{const X=Q.current?y?F.current:L.current:y?L.current:F.current,z=Q.current?y?L.current:F.current:y?F.current:L.current;if(!(t&&s=="both"&&(!X||!z))){if(+X){const G=j0();w(G),x0(X,Q.current,G,y,z)}console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",z),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",X)}};o.useEffect(()=>{E()},[s]);const[I,m]=o.useState(!1),{signAndExecuteTransaction:x,transactionConfirmation:R,transactionRejected:H}=k0(),s0=async()=>{if(e){m(!0);const X={pool_id:e,amount_a:String(y?U0(g||0,String(a==null?void 0:a.decimals)):U0(r||0,String(a==null?void 0:a.decimals))),amount_b:String(y?U0(r||0,String(i==null?void 0:i.decimals)):U0(g||0,String(i==null?void 0:i.decimals)))};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",X);const z={getShowInfo:(G,p0,m0)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",m0);const P0="Deposit "+[S0(r,y?i==null?void 0:i.symbol:a==null?void 0:a.symbol),S0(g,y?a==null?void 0:a.symbol:i==null?void 0:i.symbol)].filter(Boolean).join(" and "),h={modalDescriptionText:P0,toastTitleText:P0};if(G==="success"){let j=r,D=g;m0&&m0.events.forEach($=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",$),$.type.indexOf("::pool::DepositEvent")>-1&&a&&i&&(j=String(I0($.parsedJson.amount_a,a.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",j),D=String(I0($.parsedJson.amount_b,i.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",D))});const W="Deposit "+[S0(y?D:j,y?i==null?void 0:i.symbol:a==null?void 0:a.symbol),S0(y?j:D,y?a==null?void 0:a.symbol:i==null?void 0:i.symbol)].filter(Boolean).join(" and ");h.toastDescriptionContent=W,h.modalDescriptionText=W,h.toastTitleText="Deposit successful"}return h}};R(z);try{const G=await p.Vaults.buildDepositPayload(X);await x(G,z,{useMev:l0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:M,msafeParams:{action:ae.AddVaultsPosition,txbParams:X}})?(E(),l()):D0()}catch{H(z)}}},E=()=>{J(""),T(""),n0(void 0),w("")},{stakeProtocolName:_0}=Me(Q.current?i==null?void 0:i.coin_type:a==null?void 0:a.coin_type),F0=o.useMemo(()=>{if(s!=="both"&&a&&i){const X=Q.current?r:g,z=Q.current?a:i,G=Q.current?i:a;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:381 ~ showOnlySideTips ~ calculateResult:",A),A&&A.swap_result){const p0=t0(A.swap_result.swap_in_amount,z.decimals),m0=t0(f(A.swap_result.swap_out_amount).mul(1-Number(P)).toString(),G.decimals);return $0.isSuiCoin(z.coin_type)?`By depositing ${L0(h0(X,9).toString(),9)} SUI, ${L0(h0(p0,9).toString(),9)} SUI will be converted to ${G==null?void 0:G.symbol} via ${_0} liquid staking and added to the pool together.`:`By depositing ${L0(h0(X,9).toString(),9)} ${z==null?void 0:z.symbol}, ${L0(h0(p0,9).toString(),9)} ${z==null?void 0:z.symbol} will be traded for ${L0(h0(m0,9).toString(),9)} ${G==null?void 0:G.symbol} and then added to the pool together.`}}},[s,A,r,g]),O0=o.useMemo(()=>(console.log("🚀🚀🚀 ~ VaultsRemove.tsx:178 ~ inputTotalValueError ~ inputTotalValue:",O,t),O&&t?f(O).gt(0)&&f(O).lt(1e-4):!1),[t,O]);return{handleAmountInputChange:E0,fixAmountA:Z,amountInputA:r,amountInputB:g,balanceInfoA:a0,balanceInfoB:i0,amountValueA:q,amountValueB:N,preCalculateLoading:o0,inputTotalValue:O,calculateResult:A,showOnlySideTips:F0,doAddAction:s0,reCalculateResult:D0,overHardtop:e0,zapNumError:v0,calculateLpLoading:d0,inputTotalValueError:O0}}function We(s,l,e,a,i){const{fetchTokenPrices:y,getTokenAmountValue:t}=G0(),{setDetailRefreshCount:c}=N0(),{vaultsSdk:n}=z0(),{vaultsSlippage:P,mevProtect:l0,maxCapForGas:k,transactionMode:b,customGasPrice:M}=ee(),[_,U]=o.useState(""),[u,p]=o.useState(""),[r,J]=o.useState(!0),[g,T]=o.useState(""),Z=o.useRef(""),v=o.useRef(!0),V=o.useRef(""),w=o.useRef("");o.useEffect(()=>{Z.current=g},[g]),o.useEffect(()=>{v.current=r},[r]),o.useEffect(()=>{V.current=_},[_]),o.useEffect(()=>{w.current=u},[u]),o.useEffect(()=>{const I=[];a&&i&&(I.push(a.coin_type),I.push(i.coin_type)),I.length>0&&y(I)},[a==null?void 0:a.coin_type,i==null?void 0:i.coin_type]);const{balanceInfo:B}=H0(a),{balanceInfo:Q}=H0(i),L=t(a==null?void 0:a.coin_type,_),F=t(i==null?void 0:i.coin_type,u),a0=o.useMemo(()=>f(L||"0").add(F||"0").toString(),[L,F]),[i0,q]=o.useState(!1),[N,O]=o.useState(void 0),e0=B0(async(I,m,x)=>{if(a&&i&&e)try{q(!0),c(0);const H=U0(I,(m?a:i).decimals).toFixed(0),s0={vault_id:e,fix_amount_a:m,input_amount:H,slippage:Number(P),request_id:x,side:s==="both"?Q0.Both:Q0.OneSide};console.log("🚀 ~ preCalculate ~ params:",s0,x);const E=await n.Vaults.calculateDepositAmount(s0,!0,!0);console.log("🚀 ~ preCalculate ~ res:",{...E,uuid:x,assetAction:s,"+amountInputARef.current":+V.current}),Z.current===x&&(s==="both"&&(m?+V.current?(p(t0(E.amount_b.toString(),i.decimals).toString()),O(E)):p(""):+w.current?(U(t0(E.amount_a.toString(),a.decimals).toString()),O(E)):U("")),s!=="both"&&O(E))}catch(R){console.log("🚀 ~ preCalculate ~ error:",R),O(void 0)}finally{q(!1)}},500),o0=(I,m,x=!0)=>{if(J(m),m?(U(I),x&&p("")):(p(I),x&&U("")),+I){const R=$0.isSuiCoin(s);if(R&&f(I).lt(3)){T(""),O(void 0),q(!1);return}if(!R){const s0=t(s,I);if(f(s0).gt(1e4)){T(""),O(void 0),q(!1);return}}const H=j0();T(H),s==="both"&&q(!0),e0(I,m,H)}else x0()},c0=()=>{const I=v.current?V.current:w.current;if(+I){const m=j0();T(m),e0(I,v.current,m)}};o.useEffect(()=>{x0()},[s]);const[d0,w0]=o.useState(!1),{signAndExecuteTransaction:A,transactionRejected:n0}=k0(),f0=async()=>{if(e&&N){w0(!0),U0(r?_:u,9);const I={vault_id:e,slippage:Number(P),deposit_result:N},m={getShowInfo:(x,R)=>{const H="Deposit "+[S0(_,a==null?void 0:a.symbol),S0(u,i==null?void 0:i.symbol)].filter(Boolean).join(" and "),s0={modalDescriptionText:H,toastTitleText:H};if(x==="success"){let E=_,_0=u;R&&(E=f(_).gt(0)?q0(R,a)||_:"",_0=f(u).gt(0)?q0(R,i)||u:"");const F0="Deposit "+[S0(E,a==null?void 0:a.symbol),S0(_0,i==null?void 0:i.symbol)].filter(Boolean).join(" and ");s0.toastDescriptionContent=F0,s0.modalDescriptionText=F0,s0.toastTitleText="Deposit successful"}return s0}};try{await A(async()=>{const H=new ve;return H.setSender(n.senderAddress),await n.Vaults.deposit(I,H),console.log("🚀 ~ doAddAction ~ params:",{params:I,tx:H}),H},m,{useMev:l0,txAction:"signTransactionBlock",useFastMode:b==="Fast Mode",maxCapForGas:k,customGasPrice:M,msafeParams:{action:ae.AddVaultsPosition,txbParams:I}})?(x0(),l()):c0()}catch(x){console.log("🚀 ~ doAddAction ~ error:",x),n0(m)}}},x0=()=>{U(""),p(""),q(!1),O(void 0),T("")},{stakeProtocolName:E0}=ze(v.current?i==null?void 0:i.coin_type:a==null?void 0:a.coin_type),D0=o.useMemo(()=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",s),s!=="both"&&a&&i){const I=v.current?_:u,m=v.current?a:i,x=v.current?i:a;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",N),N&&N.swap_result){const R=t0(N.swap_result.swap_in_amount,m.decimals),H=t0(f(N.swap_result.swap_out_amount).mul(1-Number(P)).toString(),x.decimals);return $0.isSuiCoin(m.coin_type)?`By depositing ${L0(h0(I,9).toString(),9)} SUI, ${L0(h0(R,9).toString(),9)} SUI will be converted to ${x==null?void 0:x.symbol} via ${E0} liquid staking and added to the pool together.`:`By depositing ${L0(h0(I,9).toString(),9)} ${m==null?void 0:m.symbol}, ${L0(h0(R,9).toString(),9)} ${m==null?void 0:m.symbol} will be traded for ${L0(h0(H,9).toString(),9)} ${x==null?void 0:x.symbol} and then added to the pool together.`}else if(!$0.isSuiCoin(s)){const R=t(s,I);if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",R),f(R).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[s,N,_,u]);return{handleAmountInputChange:o0,fixAmountA:r,amountInputA:_,amountInputB:u,balanceInfoA:B,balanceInfoB:Q,amountValueA:L,amountValueB:F,preCalculateLoading:i0,inputTotalValue:a0,calculateResult:N,showOnlySideTips:D0,doAddAction:f0,reCalculateResult:c0}}function He(s,l,e,a,i,y,t,c,n,P,l0,k,b,M,_){const{currentAccount:U}=Z0(),u=o.useMemo(()=>{const p={text:void 0,disabled:!1};if(!(U!=null&&U.address))return p.text="Connect Wallet",p.disabled=!1,p;if(!n||!P)return p.disabled=!0,p;if(l==="both"&&(!+a&&!+i||s&&(!+a||!+i)))return p.text="Enter an amount",p.disabled=!0,p;if(l!=="both"){if(!(+a||+i))return p.text="Enter an amount",p.disabled=!0,p;if(e&&!l0){const r=$0.isSuiCoin(l);if(r&&l===(n==null?void 0:n.coin_type)&&f(a).lt(3)||r&&l===(P==null?void 0:P.coin_type)&&f(i).lt(3))return p.text="Minimum deposit 3 SUI",p.disabled=!0,p}}if(e&&k&&!M||!e&&M||e&&s&&_)return p.text="Enter an amount",p.disabled=!0,p;if(l==="both"){if(f(a).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(f(i).gt(c||"0"))return p.disabled=!0,p.text=e?`Insufficient ${P==null?void 0:P.symbol} Balance`:"Invalid Amount",p}if(l!=="both"){if(y&&f(a).gt(t||"0"))return p.disabled=!0,p.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",p;if(!y&&f(i).gt(c||"0"))return p.disabled=!0,p.text=e?`Insufficient ${P==null?void 0:P.symbol} Balance`:"Invalid Amount",p}return(b&&b.ft_amount=="0"||b&&b.burn_ft_amount=="0"||!b)&&(p.disabled=!0,p.text="Enter an amount"),p},[U==null?void 0:U.address,l,a,i,t,c,b,e,k]);return{btnText:u.text,btnDisabled:u.disabled}}function Xe(s,l,e,a,i,y,t,c,n,P){const{currentAccount:l0}=Z0(),k=o.useMemo(()=>{const b={text:void 0,disabled:!1};if(!(l0!=null&&l0.address))return b.text="Connect Wallet",b.disabled=!1,b;if(!n||!P)return b.disabled=!0,b;if(l==="both"&&!+a&&!+i)return b.text="Enter an amount",b.disabled=!0,b;if(l!=="both"){if(!(+a||+i))return b.text="Enter an amount",b.disabled=!0,b;if(e){const M=$0.isSuiCoin(l);if(M&&l===(n==null?void 0:n.coin_type)&&f(a).lt(3)||M&&l===(P==null?void 0:P.coin_type)&&f(i).lt(3))return b.text="Minimum deposit 3 SUI",b.disabled=!0,b}}if(l==="both"){if(f(a).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(f(i).gt(c||"0"))return b.disabled=!0,b.text=e?`Insufficient ${P==null?void 0:P.symbol} Balance`:"Invalid Amount",b}if(l!=="both"){if(y&&f(a).gt(t||"0"))return b.disabled=!0,b.text=e?`Insufficient ${n==null?void 0:n.symbol} Balance`:"Invalid Amount",b;if(!y&&f(i).gt(c||"0"))return b.disabled=!0,b.text=e?`Insufficient ${P==null?void 0:P.symbol} Balance`:"Invalid Amount",b}return s&&l!=="both"?(b.text=e?"Zap In":"Zap Out",b):(console.log("🚀🚀🚀 ~ submitBtnInfo ~ btnInfo:",b),b)},[l0==null?void 0:l0.address,l,a,i,t,c]);return{btnText:k.text,btnDisabled:k.disabled}}function Ke(s,l,e,a,i,y,t,c,n,P,l0,k,b){const{vaultsSlippage:M,mevProtect:_,maxCapForGas:U,transactionMode:u,customGasPrice:p}=ee(),{currentAccount:r}=Z0(),{setDetailRefreshCount:J}=X0(),{fetchTokenPrices:g,getTokenAmountValue:T}=G0(),{volatileVaultsSdk:Z}=z0(),[v,V]=o.useState(""),[w,B]=o.useState(""),[Q,L]=o.useState(!0),[F,a0]=o.useState(""),[i0,q]=o.useState(!1),[N,O]=o.useState(0),v0=o.useRef(F),e0=o.useRef(Q),o0=o.useRef(v),c0=o.useRef(w),d0=o.useRef(i0),w0=o.useRef(N);o.useEffect(()=>{w0.current=N},[N]),o.useEffect(()=>{d0.current=i0},[i0]),o.useEffect(()=>{v0.current=F},[F]),o.useEffect(()=>{e0.current=Q},[Q]),o.useEffect(()=>{o0.current=v},[v,n,w]),o.useEffect(()=>{c0.current=w},[w,n,v]),o.useEffect(()=>{const d=[];t&&c&&(d.push(t.coin_type),d.push(c.coin_type)),d.length>0&&g(d)},[t==null?void 0:t.coin_type,c==null?void 0:c.coin_type]);const[A,n0]=o.useState("0"),[f0,x0]=o.useState("0"),[E0,D0]=o.useState(!1);o.useEffect(()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ holdCoinAmounts:",e),e&&(e!=null&&e.coinAmountA)&&(e!=null&&e.coinAmountB)&&I()},[e==null?void 0:e.coinAmountA,e==null?void 0:e.coinAmountB]),o.useEffect(()=>{G()},[b==null?void 0:b.current_sqrt_price]);const I=async()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:d,coinAmountB:C}=e;if(D0(!1),s==="both"||P||l0){n0(n?C:d),x0(n?d:C);return}const S=s===(t==null?void 0:t.coin_type),K=S?C:d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:121 ~ calculateAvailableAmount ~ fromAmount:",K);const r0=S?d:C;if(f(K).gt(0)){D0(!0);const Y=j0();a0(Y);const b0=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",s);const g0={pool_id:y,mode:b0,burn_lp_amount:i,available_lp_amount:i};console.log("🚀🚀🚀 ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",g0);try{const T0=await Z.Vaults.preCalculateWithdrawAmount(g0);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",T0),b0=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const u0=t0(T0.receive_amount_a,t==null?void 0:t.decimals);n?x0(u0):n0(u0)}else{if((c==null?void 0:c.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const u0=t0(T0.receive_amount_b,c==null?void 0:c.decimals);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",u0),n?n0(u0):x0(u0)}D0(!1)}catch(T0){console.log("🚀🚀🚀 ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",T0)}}else S?n0(r0):x0(r0)},m=T(n?c==null?void 0:c.coin_type:t==null?void 0:t.coin_type,v),x=T(n?t==null?void 0:t.coin_type:c==null?void 0:c.coin_type,w),R=o.useMemo(()=>f(m||"0").add(x||"0").toString(),[m,x]);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",x),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",m);const[H,s0]=o.useState(!1),[E,_0]=o.useState(void 0),O0=B0(async(d,C,S,K,r0,Y)=>{if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:210 ~ removePercent:",r0),f(r0).gt(100)){a0(""),_0(void 0),s0(!1);return}if(t&&c&&y&&i){if(!r0){if(S){if(f(d).gt(n?f0:A)){a0(""),_0(void 0),s0(!1);return}}else if(f(d).gt(n?A:f0)){a0(""),_0(void 0),s0(!1);return}}J(0),(+o0.current||+c0.current||r0)&&s0(!0);const g0=C?W0(d,0,!0):U0(d,(S?t:c).decimals).toFixed(0);let T0;if(s=="both")T0={pool_id:y,mode:"FixedOneSide",burn_lp_amount:String(g0)};else{const u0=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";T0={pool_id:y,mode:u0,burn_lp_amount:String(g0)}}console.log("🚀 ~ preCalculate ~ params:",T0,K,r0);try{const u0=await Z.Vaults.preCalculateWithdrawAmount(T0);console.log("🚀 ~ preCalculate ~ res:",{...u0,uuid:K,assetAction:s});const C0={amount_a:n?u0.receive_amount_b:u0.receive_amount_a,amount_b:n?u0.receive_amount_a:u0.receive_amount_b,burn_ft_amount:u0.burn_lp_amount,swap:u0.swap};if(C0.burn_ft_amount=="0"){s0(!1),_0(void 0);return}const pe=t0(C0.amount_a.toString(),n?c.decimals:t.decimals).toString();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const le=t0(C0.amount_b.toString(),n?t.decimals:c.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",pe,t.decimals,le,c==null?void 0:c.decimals),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",le),s==="both"&&(C&&!Y?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",C),(n?!S:S)?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+o0.current),+o0.current?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),B(t0(C0.amount_b.toString(),n?t==null?void 0:t.decimals:c==null?void 0:c.decimals).toString()),_0(C0)):B("")):+c0.current?(V(t0(C0.amount_a.toString(),n?c==null?void 0:c.decimals:t==null?void 0:t.decimals).toString()),_0(C0)):V("")):_0(C0)),s!=="both"){if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",r0),r0){const ie=t0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?c.decimals:t.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",ie),n?!S:S)r0===100&&(C0.burn_ft_amount=i);else{const ke=t0(f(C0.amount_a).add(C0.amount_b||"0").toString(),n?t.decimals:c.decimals).toString();r0===100&&(C0.burn_ft_amount=i)}}_0(C0)}}catch(u0){console.log("🚀 ~ preCalculate ~ error:",u0),_0(void 0)}finally{s0(!1)}}},500),X=(d,C,S=!1,K=!1,r0=!0)=>{if(S){z(100);return}if(K){z(50);return}L(C),q(!1),(n?!C:C)?(V(d),r0?B(""):G()):(B(d),r0?V(""):G());let Y,b0;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:462 ~ availableAmountA:",A),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ availableAmountB:",f0),(n?!C:C)?(b0=f(d).div(A),Y=W0(f(i).mul(b0).toString(),0,!0)):(b0=f(d).div(f0),Y=W0(f(i).mul(b0).toString(),0,!0)),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ removeLpAmount:",Y),+Y){const g0=j0();a0(g0),O0(String(Y),!0,C,g0,b0.mul(100).toNumber(),b0.gte(100))}else W()},z=d=>{if(q(!0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",d),O(d),i&&+i){if(d===0)W();else{const C=s===(t==null?void 0:t.coin_type);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",f0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",A),L(C),s=="both"?(V(f(A).mul(f(d).div(100)).toString()),B(f(f0).mul(f(d).div(100)).toString())):s===(t==null?void 0:t.coin_type)?n?B(f(f0).mul(f(d).div(100)).toString()):V(f(A).mul(f(d).div(100)).toString()):n?V(f(A).mul(f(d).div(100)).toString()):B(f(f0).mul(f(d).div(100)).toString()),d===100||s==="both"){const S=j0();a0(S);const K=d===100?i:f(i).mul(d).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",K),O0(K,!0,C,S,d,!0)}else{L(C),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",s),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const S=f(i).mul(d).div(100).toFixed();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",S),O0(S,!0,C,F,d,!0)}}console.log("🚀🚀🚀 ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",A)}},G=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:i0,removePercent:N}),i0)z(N);else{const d=e0.current?n?c0.current:o0.current:n?o0.current:c0.current;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",d),X(d,e0.current)}};o.useEffect(()=>{if(!i0)if(E&&i&&+i){let d=Number(f(E.burn_ft_amount).div(i).mul(100));d>100&&(d=100),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",d),O(d)}else O(0)},[E==null?void 0:E.burn_ft_amount,i0]);const[p0,m0]=o.useState(!1),{signAndExecuteTransaction:P0,transactionConfirmation:h,transactionRejected:j}=k0(),D=async()=>{if(y&&E&&i){m0(!0);let d;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",E),s==="both"?d={pool_id:y,burn_lp_amount:E.burn_ft_amount,mode:"FixedOneSide",slippage:Number(M)}:(t==null||t.coin_type,N===100?d={pool_id:y,burn_lp_amount:i,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(M)}:d={pool_id:y,burn_lp_amount:E.burn_ft_amount,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(M)}),console.log("🚀 ~ doRemoveAction ~ params:",JSON.stringify(d));const C={getShowInfo:(S,K)=>{const r0="Withdraw "+[S0(v,n?c==null?void 0:c.symbol:t==null?void 0:t.symbol),S0(w,n?t==null?void 0:t.symbol:c==null?void 0:c.symbol)].filter(Boolean).join(" and "),Y={modalDescriptionText:r0,toastDescriptionContent:r0};if(S==="success"){let b0=v,g0=w;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",K),K&&(b0=f(v).gt(0)?q0(K,n?c:t)||v:"",g0=f(w).gt(0)?q0(K,n?t:c)||w:""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",b0,g0);const T0=[S0(n?g0:b0,n?c==null?void 0:c.symbol:t==null?void 0:t.symbol),S0(n?b0:g0,n?t==null?void 0:t.symbol:c==null?void 0:c.symbol)].filter(Boolean),u0=(T0&&T0.length>1?"Removed ":"Withdraw ")+[S0(b0,n?c==null?void 0:c.symbol:t==null?void 0:t.symbol),S0(g0,n?t==null?void 0:t.symbol:c==null?void 0:c.symbol)].filter(Boolean).join(" and ");Y.toastDescriptionContent=u0,Y.modalDescriptionText=u0}return Y}};h(C);try{const S=await Z.Vaults.buildWithdrawPayload(d);await P0(S,C,{useMev:_,txAction:"signTransactionBlock",useFastMode:u==="Fast Mode",maxCapForGas:U,customGasPrice:p,msafeParams:{action:ae.AddVaultsPosition,txbParams:d}})?(W(),l()):G(),m0(!1)}catch(S){console.log("🚀 ~ doAddAction ~ error:",S),m0(!1),j(C)}}},W=()=>{V(""),B(""),o0.current="",c0.current="",O(0),s0(!1),_0(void 0),a0(""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},$=o.useMemo(()=>{var d;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",E),E&&(E!=null&&E.swap)&&s!=="both"&&t&&c){const C=Q?n?w:v:n?v:w;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",C);const S=e0.current?t:c;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",S);const K=e0.current?c:t;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",K);const r0=t0((d=E==null?void 0:E.swap)==null?void 0:d.swap_amount_in,K.decimals),Y=h0(t0(f(E.swap.swap_amount_out).mul(1-Number(M)).toString(),S.decimals),S.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:M,calculateResult:E,swapOutAmount:Y}),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${C} ${S==null?void 0:S.symbol}, ${r0} ${K==null?void 0:K.symbol} in the pool will be traded for ${Y} ${S==null?void 0:S.symbol}`),`To withdraw ${h0(C)} ${S==null?void 0:S.symbol}, ${h0(r0)} ${K==null?void 0:K.symbol} in the pool will be traded for ${Y} ${S==null?void 0:S.symbol}`}},[s,E,v,w]);return o.useEffect(()=>{G()},[A,f0]),o.useEffect(()=>{W(),setTimeout(()=>{I()},200)},[k,s,r==null?void 0:r.address]),{handleAmountInputChange:X,fixAmountA:Q,amountInputA:v,amountInputB:w,availableAmountA:A,availableAmountB:f0,amountValueA:m,amountValueB:x,preCalculateLoading:H,inputTotalValue:R,calculateResult:E,showOnlySideTips:$,doRemoveAction:D,handlePercentInputChange:z,isPercentInput:i0,removePercent:N,reCalculateResult:G,calculateAvailableLoading:E0,submitLoading:p0}}function Ye(s,l,e,a,i,y,t,c){const{setDetailRefreshCount:n}=N0(),{fetchTokenPrices:P,getTokenAmountValue:l0}=G0(),{vaultsSdk:k}=z0(),{vaultsSlippage:b,mevProtect:M,maxCapForGas:_,transactionMode:U,customGasPrice:u}=ee(),{findBestRouters:p}=De(),[r,J]=o.useState(""),[g,T]=o.useState(""),[Z,v]=o.useState(!0),[V,w]=o.useState(""),[B,Q]=o.useState(!1),[L,F]=o.useState(0),a0=o.useRef(V),i0=o.useRef(Z),q=o.useRef(r),N=o.useRef(g),O=o.useRef(B),v0=o.useRef(L);o.useEffect(()=>{v0.current=L},[L]),o.useEffect(()=>{O.current=B},[B]),o.useEffect(()=>{a0.current=V},[V]),o.useEffect(()=>{i0.current=Z},[Z]),o.useEffect(()=>{q.current=r},[r]),o.useEffect(()=>{N.current=g},[g]),o.useEffect(()=>{const h=[];t&&c&&(h.push(t.coin_type),h.push(c.coin_type)),h.length>0&&P(h)},[t==null?void 0:t.coin_type,c==null?void 0:c.coin_type]);const[e0,o0]=o.useState("0"),[c0,d0]=o.useState("0"),[w0,A]=o.useState(!1);o.useEffect(()=>{m0(),n0()},[s]),o.useEffect(()=>{n0()},[e.coinAmountA]);const n0=()=>{const{coinAmountA:h,coinAmountB:j}=e;if(console.log("🚀 ~ useEffect ~ holdCoinAmounts:",e),A(!1),s==="both"){o0(h),d0(j);return}const D=s===(t==null?void 0:t.coin_type),W=D?j:h;let $=D?h:j;const d=D?c:t,C=D?t:c;f(W).gt(0)?(A(!0),o0("0"),d0("0"),p({fromToken:d,toToken:C,amount:U0(W,d.decimals).toString(),providersKeys:k.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:V}).then(S=>{console.log("🚀 ~ calculateAvailableAmount ~ uuid:",{result:S}),S.toAmountUi&&($=f($).add(S.toAmountUi).toString()),D?o0($):d0($)}).finally(()=>{A(!1)})):D?o0($):d0($)},f0=l0(t==null?void 0:t.coin_type,r),x0=l0(c==null?void 0:c.coin_type,g),E0=o.useMemo(()=>f(f0||"0").add(x0||"0").toString(),[f0,x0]),[D0,I]=o.useState(!1),[m,x]=o.useState(void 0),H=B0(async(h,j,D,W,$)=>{var d,C;if(t&&c&&y&&i){if(!$){if(D){if(f(h).gt(e0)){w(""),x(void 0),I(!1);return}}else if(f(h).gt(c0)){w(""),x(void 0),I(!1);return}}n(0),(+q.current||+N.current||$)&&I(!0);const K=j?h:U0(h,(D?t:c).decimals).toFixed(0),r0={vault_id:y,fix_amount_a:D,input_amount:K,slippage:Number(b),request_id:W,side:s==="both"?Q0.Both:Q0.OneSide,is_ft_input:j,max_ft_amount:i};console.log("🚀 ~ preCalculate ~ params:",r0,W,$);try{const Y=await k.Vaults.calculateWithdrawAmount(r0);if(console.log("🚀 ~ preCalculate ~ res:",{...Y,uuid:W,assetAction:s}),a0.current===W){const b0=t0(Y.amount_a.toString(),t.decimals).toString(),g0=t0(Y.amount_b.toString(),c.decimals).toString();if(s==="both"&&(j?(T(g0),J(b0),$===100&&(o0(b0),d0(g0)),x(Y)):D?+q.current?(T(g0),x(Y)):T(""):+N.current?(J(b0),x(Y)):J("")),s!=="both"){if($){const T0=t0(f(Y.amount_a).add(((d=Y.swap_result)==null?void 0:d.swap_out_amount)||"0").toString(),t.decimals).toString();if(D)J(T0),T(""),$===100&&(Y.burn_ft_amount=i,o0(T0));else{const u0=t0(f(Y.amount_b).add(((C=Y.swap_result)==null?void 0:C.swap_out_amount)||"0").toString(),c.decimals).toString();J(""),T(u0),$===100&&(Y.burn_ft_amount=i,d0(u0))}}x(Y)}}}catch(Y){console.log("🚀 ~ preCalculate ~ error:",Y),x(void 0)}finally{I(!1)}}},500),s0=(h,j,D=!1,W=!1,$=!0)=>{if(D){E(100);return}if(W){E(50);return}if(v(j),Q(!1),j?(J(h),$&&T("")):(T(h),$&&J("")),+h){const d=j0();w(d),H(h,!1,j,d)}else m0()},E=h=>{if(Q(!0),F(h),i&&+i)if(h===0)m0();else{const j=s===(t==null?void 0:t.coin_type);if(v(j),h===100||s==="both"){const D=j0();w(D);const W=h===100?i:f(i).mul(h).div(100).toFixed(0);H(W,!0,j,D,h)}else{v(j);const D=f(s===(t==null?void 0:t.coin_type)?e0:c0).mul(h).div(100).toFixed();H(D,!1,j,V,h)}}},_0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:B,removePercent:L}),B)E(L);else{const h=i0.current?q.current:N.current;s0(h,i0.current)}};o.useEffect(()=>{if(!B)if(m&&i&&+i){let h=Number(f(m.burn_ft_amount).div(i).mul(100));h>100&&(h=100),F(h)}else F(0)},[m==null?void 0:m.burn_ft_amount]);const[F0,O0]=o.useState(!1),{signAndExecuteTransaction:X,transactionConfirmation:z,transactionRejected:G}=k0(),p0=async()=>{if(y&&m&&i){O0(!0);let h;if(s==="both")h={vault_id:y,ft_amount:m==null?void 0:m.burn_ft_amount,slippage:Number(b)};else{const D=s===(t==null?void 0:t.coin_type);if(L===100)h={vault_id:y,is_ft_input:!0,input_amount:i,slippage:Number(b),max_ft_amount:i,fix_amount_a:D};else{const W=U0(Z?r:g,9);h={vault_id:y,is_ft_input:!1,input_amount:W.toString(),slippage:Number(b),max_ft_amount:i,fix_amount_a:D}}}console.log("🚀 ~ doRemoveAction ~ params:",h);const j={getShowInfo:(D,W)=>{const $="Withdraw "+[S0(r,t==null?void 0:t.symbol),S0(g,c==null?void 0:c.symbol)].filter(Boolean).join(" and "),d={modalDescriptionText:$,toastDescriptionContent:$};if(D==="success"){let C=r,S=g;W&&(C=f(r).gt(0)?q0(W,t)||r:"",S=f(g).gt(0)?q0(W,c)||g:"");const K="Removed "+[S0(C,t==null?void 0:t.symbol),S0(S,c==null?void 0:c.symbol)].filter(Boolean).join(" and ");d.toastDescriptionContent=K,d.modalDescriptionText=K}return d}};z(j);try{const D=await k.Vaults.withdraw(h);await X(D,j,{useMev:M,txAction:"signTransactionBlock",useFastMode:U==="Fast Mode",maxCapForGas:_,customGasPrice:u,msafeParams:{action:ae.RemoveVaultsPosition,txbParams:h}})?m0():_0(),l()}catch(D){console.log("🚀 ~ doAddAction ~ error:",D),G(j)}}},m0=()=>{J(""),T(""),F(0),I(!1),x(void 0),w("")},P0=o.useMemo(()=>{if(m&&m.swap_result&&s!=="both"&&t&&c){const h=Z?r:g,j=i0.current?t:c,D=i0.current?c:t,W=t0(m.swap_result.swap_in_amount,j.decimals),$=t0(f(m.swap_result.swap_out_amount).mul(1-Number(b)).toString(),D.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:b,calculateResult:m,swapOutAmount:$}),`To withdraw ${h0(h)} ${j==null?void 0:j.symbol}, ${h0(W)} ${D==null?void 0:D.symbol} in the pool will be traded for ${$} ${j==null?void 0:j.symbol}`}},[s,m,r,g]);return{handleAmountInputChange:s0,fixAmountA:Z,amountInputA:r,amountInputB:g,availableAmountA:e0,availableAmountB:c0,amountValueA:f0,amountValueB:x0,preCalculateLoading:D0,inputTotalValue:E0,calculateResult:m,showOnlySideTips:P0,doRemoveAction:p0,handlePercentInputChange:E,isPercentInput:B,removePercent:L,reCalculateResult:_0,calculateAvailableAmount:n0,calculateAvailableLoading:w0}}const Je=s=>s?Ie:Ge,Qe=s=>s?Ne:We,Ae=s=>s?He:Xe,Ze=s=>s?Ke:Ye,Sa={useGetApiVaultInfo:Re,useGetContractVaultInfo:Je,useVaultsAdd:Qe,useAddButtonStatus:Ae,useVaultsRemove:Ze};function va({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:a,vaultsAprDisplay:i}){return V0.jsx(Te,{tooltip:V0.jsx(Be,{vaultsApyDisplay:l,vaultsLstApyDisplay:s,vaultsTotalApyDisplay:e,vaultsAprDisplay:i,category:a}),children:V0.jsx(Ce,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:a=="cetus"?e:l})})}const Be=({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:e,category:a,vaultsAprDisplay:i})=>V0.jsx(se,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:a=="cetus"?V0.jsxs(se,{children:[V0.jsx(M0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:e}),V0.jsx(ce,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:s,valueStyle:{fontSize:"12px"}})]}):V0.jsxs(se,{children:[V0.jsx(M0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:i}),V0.jsx(ce,{h:"1px",w:"100%",backgroundColor:"border"}),V0.jsx(M0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),V0.jsx(M0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function xa({coinType:s}){var e;const{tokenInfo:l}=A0((e=xe(s))==null?void 0:e.full_address);return V0.jsx(Ve,{children:V0.jsx(he,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"})})}export{xa as C,Be as V,Ee as a,Me as b,Re as c,va as d,_a as e,X0 as f,ba as g,ze as h,ga as i,ya as j,N0 as u,Sa as v};
//# sourceMappingURL=VaultsAprBlock-DYqDOull.js.map
