import{a as u,j as e,V as J,W as gt,X as _t,Y as St,Z as Ct,a7 as Yt,$ as wt,a0 as jt,H as be,T as Y,f as vt,q as ke,p as ot,I as qt,a1 as Qt,aA as ft,a2 as Jt,a3 as Kt,a4 as Pt,P as Xt,h as Zt,aq as Tt,m as kt,n as es}from"./vendor-BowHGuwE.js";import{v as Me,S as ts}from"./usePriceImpact-BGVkF8Rs.js";import{l as yt,aG as ut,k as it,r as ct,n as We,a2 as Rt,G as Ye,ak as Ne,f as xe,ar as qe,C as ss,B as Re,s as lt,d as ie,aH as as,$ as y,x as Pe,Q as Le,aI as rt,E as _e,aJ as Xe,aK as Vt,aL as os,a as dt,J as ns,aa as ls,j as It,a8 as rs,z as nt,a3 as xt,R as us}from"./index-CHh_ib_A.js";import{c as Ot,f as is,u as Dt,i as cs,e as ds,h as ps,b as ms,g as fs,j as pt,k as Lt,a as Mt}from"./VaultsAprBlock-CvyN05r0.js";import{R as xs}from"./RefreshButton-DIrOjA_Q.js";import{T as bs}from"./TradeConfirmAmountInfo-7uRFZTh0.js";import{T as hs}from"./TotalAmount-inLvFspw.js";import{H as Ze}from"./HTextLabelBox-DQVZn89I.js";import{u as Te}from"./global-jBtCojdm.js";import{M as Wt}from"./msafe-oYBkW7LJ.js";import{f as we}from"./index-DLt-hnln.js";import{u as $t}from"./useAccountBalance-kA9PTpYg.js";import{u as bt}from"./useTokenBalance-ixOuC4qY.js";import{u as zt}from"./useTransaction-CWfVBXqS.js";import{T as Et}from"./TradeInputGroup-USnUgl_n.js";import{C as ht}from"./CheckBox-Cs6Rhs4Q.js";import{P as gs}from"./RemoveBlock-BOkeSWoc.js";import{u as _s}from"./useFindBestRouting-ZbQl-N9z.js";const Ss=(l,a)=>({amountInputA:"",amountInputB:"",setAmountInputA:t=>{l(()=>({amountInputA:t}))},setAmountInputB:t=>{l(()=>({amountInputB:t}))},fromToken:{},toToken:{},setFromToken:t=>l({fromToken:t}),setToToken:t=>l({toToken:t}),calculateResult:{amount_a:"",amount_b:"",ft_amount:""},setCalculateResult:t=>l({calculateResult:t}),clearVaultsActionData:()=>l({amountInputA:"",amountInputB:"",calculateResult:{amount_a:"",amount_b:"",ft_amount:""}})}),$e=yt(Ss);function At(){const{setCurrentVaultPosition:l,vaultsPositionObj:a,setCurrentVaultPositionLoading:t,setVaultsPositionObj:d}=Ot(),{vaultClmmPoolContractInfoObj:o,setLstVaultContractInfoObj:i,setHaedalVaultContractInfoObj:g}=is(),{volatileVaultsSdk:s}=ut(),c=it("vaults"),{vaultsList:R}=Dt(),{getVaultPoolList:C}=cs(),{getVaultPosition:A}=ds(),{getVaultsContractInfo:b}=ps(),{getPythLastPrice:v}=ms(),{fetchTokenPrices:V}=ct(),{setFromToken:f,setToToken:j}=$e(),{getVaultsLpTokenList:M}=fs(),{currentAccount:W}=We(),$=u.useRef(W==null?void 0:W.address);u.useEffect(()=>{$.current=W==null?void 0:W.address},[W==null?void 0:W.address]);const te=(X,O=!1)=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:61 ~ getCurrentVaultDetail ~ getCurrentVaultDetail:"),console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:44 ~ getCurrentVaultDetail ~ vaultsPositionObj:",a,$.current),Rt(a)&&a[X]&&!O){const z=a[X];if(console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:46 ~ getCurrentVaultDetail ~ currentVaultPositionData:",z),z.ownerAddress==$.current&&$.current){const{displayTokenA:L,displayTokenB:E}=z;f(L),j(E),l(z),t(!1)}else G(X,O)}else G(X,O)},I=async X=>{const O=await C();console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:66 ~ getCurrentVaultContractInfo ~ list:",O);const z=await M(O),L=O.filter(T=>T.vaultId==X)[0],{displayTokenA:E,displayTokenB:he}=L;f(E),j(he),L.category=="haedal"?v([Ye(L.displayTokenA.coin_type,!1),Ye(L.displayTokenB.coin_type,!1)]):V([Ye(L.displayTokenA.coin_type,!1),Ye(L.displayTokenB.coin_type,!1)]);const{lstVaultContractInfoObj:oe,haedalVaultContractInfoObj:ce,allClmmPoolContractInfoObj:me}=await b([L]),N=me[L.clmmPoolAddress];return{vaultContractInfo:L.category=="cetus"?oe[L.vaultId]:ce[L.vaultId],clmmContractInfo:N,vault:L,lpTokenInfoObj:z}},G=async(X,O=!1)=>{try{console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:87 ~ getCurrentVaultByVaultId ~ getCurrentVaultByVaultId:"),$.current&&!O&&t(!0);const{vaultContractInfo:z,clmmContractInfo:L,vault:E,lpTokenInfoObj:he}=await I(X);console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:92 ~ getCurrentVaultByVaultId ~ vaultContractInfo:",z),console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:93 ~ getCurrentVaultByVaultId ~ clmmContractInfo:",L),console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:99 ~ getCurrentVaultByVaultId ~ currentAcc.current:",$.current);let oe={};L&&z&&$.current?(oe=await A(E,L,z,$.current,he),console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:101 ~ getCurrentVaultByVaultId ~ currentVaultPosition:",oe,$.current),oe[E.vaultId].ownerAddress==$.current&&$.current&&(l(oe[E.vaultId]),t(!1))):t(!1)}catch{t(!1)}};return{getCurrentVaultDetail:te,getCurrentVaultContractInfo:I,getCurrentVaultByVaultId:G,updateCurrentVaultById:async X=>{const O=R.filter(E=>E.vaultId==X)[0],z=o[O.clmmPoolAddress],L=O.category=="cetus"?await c.Vaults.getVault(O.vaultId):await s.Vaults.getPool(O.vaultId);if(O.category=="cetus"?i({[O.vaultId]:L}):g({[O.vaultId]:L}),z&&L){const E=await A(O,z,L);console.log("ğŸš€ğŸš€ğŸš€ ~ useCurrentVaultDetail.ts:100 ~ updateCurrentVaultById ~ currentVaultPosition:",E),E[O.vaultId].ownerAddress==$.current&&$.current&&(l(E[O.vaultId]),d(E))}}}}function Nt(l){const{poolName:a,amountLimit:t,lpRate:d,inputTotalValue:o,preCalculateLoading:i,labelColor:g,lpDecimals:s,calculateLpLoading:c}=l;return e.jsxs(J,{w:"100%",gap:"20px",children:[e.jsx(hs,{totalAmount:o,loading:i}),e.jsx(Ze,{label:"Share of Pool",labelStyle:{fontSize:"14px",color:g},value:d,isLoading:c,valueStyle:{fontSize:"14px",h:"14px"}}),e.jsx(Ze,{label:"Est. Received LP",labelStyle:{fontSize:"14px",color:g},value:`${Ne(xe(qe(t||"0",s||9)).toString(),9)} ${a}`,valueStyle:{fontSize:"14px",h:"14px"},isLoading:c})]})}function Cs(l){const{isOpen:a,onClose:t,data:d,onSubmitClick:o,calculateLpLoading:i}=l,{feeTier:g,displayTokenA:s,displayTokenB:c,displayAmountA:R,displayAmountB:C,totalAmountValue:A,sharePool:b,lpAmountLimit:v,lpDecimals:V}=d;return e.jsxs(gt,{autoFocus:!1,returnFocusOnClose:!1,isOpen:a,onClose:t,isCentered:!0,children:[e.jsx(_t,{}),e.jsxs(St,{children:[e.jsx(Ct,{children:e.jsx(Yt,{fontWeight:"500",fontSize:"16px",children:"Deposit"})}),e.jsx(wt,{}),e.jsx(jt,{textAlign:"center",p:"0px",children:e.jsxs(J,{w:"100%",gap:"20px",p:"16px",pb:"0px",pos:"relative",children:[e.jsxs(be,{w:"100%",justifyContent:"space-between",children:[e.jsxs(be,{children:[e.jsx(ss,{coinAIconUrl:s==null?void 0:s.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(Y,{fontSize:"16px",color:"text_caption",children:`${s==null?void 0:s.symbol} - ${c==null?void 0:c.symbol}`})]}),e.jsx(Re,{w:"unset",p:"6px 8px",borderRadius:"12px",ml:"4px",children:e.jsxs(be,{children:[e.jsx(Y,{children:"Fee Tier"}),e.jsx(Y,{color:"primary",children:g})]})})]}),e.jsx(bs,{coinA:{amount:R,...s},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},coinB:{amount:C,...c}}),e.jsx(Nt,{amountLimit:v,inputTotalValue:A,preCalculateLoading:!1,calculateLpLoading:i,lpRate:b,lpDecimals:V,poolName:`${s==null?void 0:s.symbol} - ${c==null?void 0:c.symbol}`}),e.jsx(vt,{h:"52px"}),e.jsx(ke,{pos:"absolute",bottom:"0px",mt:"4px",w:"100%",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:()=>{o()},children:"Deposit"})]})})]})]})}function ws(l){const{getTokenAmountValueByPyth:a,getTokenPriceByPyth:t}=pt();if(l){const{hardCap:d,quoteCoinType:o,displayCoinTypeA:i,displayCoinTypeB:g,displayAmountA:s,displayAmountB:c,quoteCoin:R,baseCoin:C,baseCoinType:A}=l,b=a(o,d);if(!b)return{};const v=lt(b),V=a(i,s),f=a(g,c),j=ie(V).add(ie(f)).toString(),M=ie(j).div(ie(b)).mul(100).toString(),W=lt(M,"%"),$=t(o),te=t(A),I=ie(b).sub(ie(j)).gt(0)?ie(b).sub(ie(j)).toString():"0";let G,U;return I!=="0"?(G=ie(I).div($||"0").toString(),U=ie(I).div(te||"0").toString()):(G="0",U="0"),{hardCap:d,hardCapUSD:b,vaultTvl:j,displayHardCapUSD:v,depositRatio:M,displayDepositRatio:W,baseCoin:C,quoteCoin:R,availableCapacityWithQuoteCoin:G,availableCapacityWithBaseCoin:U,availableCapacityUSD:I}}return{}}function js(l,a){return{lpRate:u.useMemo(()=>l&&a?ie(a).eq(0)?"100%":`${as(ie(l).div(ie(l).add(a)).mul(100).toString(),2,6)}%`:"0%",[l,a])}}function Ht(l,a,t=!1){return{amountLimit:u.useMemo(()=>{if(a)return ie(a).mul(t?1+l:1-l).toString()},[a,l,t])}}function Ft(l){return{stakeProtocolName:u.useMemo(()=>{if(l){if(l.includes("HASUI"))return"Haedal";if(l.includes("AFSUI"))return"Aftermath";if(l.includes("CERT"))return"Volo"}},[l])}}function vs(l,a,t,d,o,i,g,s,c,R){const{balanceInfo:C}=bt(t),{balanceInfo:A}=bt(d),{amountInputA:b,amountInputB:v,setAmountInputA:V,setAmountInputB:f,setCalculateResult:j,calculateResult:M}=$e(),{getTokenAmountValueByPyth:W}=pt(),{getTokenAmountValue:$}=ct(),{volatileVaultsSdk:te}=ut(),I=it("vaults"),{vaultsSlippage:G}=Te(),{updateCurrentVaultById:U}=At(),{fetchAccountBalance:X}=$t(),[O,z]=u.useState(!1),{currentAccount:L}=We(),{pythPriceMap:E}=Lt(),{mevProtect:he,transactionMode:oe,maxCapForGas:ce,customGasPrice:me}=Te(),[N,Z]=u.useState(0),T=u.useRef(0);u.useEffect(()=>{T.current=N},[N]);const fe=u.useMemo(()=>a=="cetus"?$(t==null?void 0:t.coin_type,b):g&&O&&i==(t==null?void 0:t.coin_type)?y(c||"0").mul(N).div(100).toString():W(t==null?void 0:t.coin_type,b),[t==null?void 0:t.coin_type,b,E,a,g,O,N]),ee=u.useMemo(()=>a=="cetus"?$(d==null?void 0:d.coin_type,v):g&&O&&i==(d==null?void 0:d.coin_type)?y(c||"0").mul(N).div(100).toString():W(d==null?void 0:d.coin_type,v),[t==null?void 0:t.coin_type,v,E,a,g,O,N]),S=u.useMemo(()=>o?d:t,[o,t,d]),h=u.useMemo(()=>o?t:d,[o,t,d]),[k,ne]=u.useState(""),K=u.useRef("");u.useEffect(()=>{K.current=k},[k]);const[se,de]=u.useState(!1),ae=u.useRef(!1);u.useEffect(()=>{ae.current=se},[se]);const[F,je]=u.useState(!1),[le,ze]=u.useState(!1),[He,q]=u.useState(!1),P=u.useRef(""),re=u.useRef("");u.useEffect(()=>{P.current=b},[b]),u.useEffect(()=>{re.current=v},[v]);const B=u.useMemo(()=>g?i=="both"?"FlexibleBoth":i==(S==null?void 0:S.coin_type)?"OnlyCoinA":"OnlyCoinB":"FixedOneSide",[g,i,S]),pe=(r,n,p=!1)=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:141 ~ wrapRes ~ res:",r),r)if(a=="haedal"){const m=y(r.deposit_amount_a).div(10**S.decimals).toString(),x=y(r.deposit_amount_b).div(10**h.decimals).toString();console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:150 ~ wrapRes ~ isSlider:",p),p?((i=="both"||i==(t==null?void 0:t.coin_type))&&(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:154 ~ wrapRes ~ setAmountInputA:",V),V(o?x:m)),(i=="both"||i==(d==null?void 0:d.coin_type))&&(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:154 ~ wrapRes ~ setAmountInputA:",f),f(o?m:x))):n?f(o?m:x):V(o?x:m)}else{const m=y(r.amount_a).div(10**S.decimals).toString(),x=y(r.amount_b).div(10**h.decimals).toString();n?f(o?m:x):V(o?x:m)}},ge=async(r,n,p,m)=>{try{q(!0);const x=(o?!n:n)?S:h,w=(o?!n:n)?h:S,D=_e(r,x.decimals).toFixed(0),H=_e(p||0,w.decimals).toFixed(0),Q=o?!n:n;je(Q),a=="haedal"?Se(D,n,H,Q,m):Ve(D,n,Q,m)}catch{}},Se=async(r,n,p,m,x)=>{let w={uuid:x,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:m,pool_id:l};g?(B==="OnlyCoinA"&&(w={uuid:x,mode:B,pool_id:l,coin_amount_a:r}),B==="OnlyCoinB"&&(w={uuid:x,mode:B,pool_id:l,coin_amount_b:r}),B=="FlexibleBoth"&&(w={uuid:x,mode:B,pool_id:l,coin_amount_a:m?r:p,coin_amount_b:m?p:r})):w={uuid:x,mode:"FixedOneSide",fixed_amount:r,fixed_coin_a:m,pool_id:l},console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:257 ~ params:",w);const D=await te.Vaults.preCalculateDepositAmount(w,{onSuccess:H=>{console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:185 ~ uuid:",x,K.current),x==K.current&&(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?P.current||re.current:P.current&&re.current)?(j({amount_a:o?D.deposit_amount_b:D.deposit_amount_a,amount_b:o?D.deposit_amount_a:D.deposit_amount_b,ft_amount:H}),q(!1)):(q(!1),j(void 0))},onError:(H,Q)=>{q(!1)}});console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:279 ~ res:",D),K.current===x&&(B=="FixedOneSide"&&(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:179 ~ haedalPreCalculate ~ res:",D),pe(D,n)),(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?P.current||re.current:P.current&&re.current)&&at(D))},Ve=async(r,n,p,m)=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:214 ~ lstPreCalculate ~ uuid:",m),S&&h&&l)try{q(!0);const x={vault_id:l,fix_amount_a:p,input_amount:r,slippage:Number(G),request_id:m,side:i==="both"?Xe.Both:Xe.OneSide};console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:279 ~ lstPreCalculate ~ params:",x);const w=await I.Vaults.calculateDepositAmount(x,!0,!0);console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:204 ~ lstPreCalculate ~ res:",w),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:221 ~ lstPreCalculate ~ uuidRef.current1:",K.current===m,K.current,"-----",m),K.current===m&&(g||pe(w,n),j(w),q(!1))}catch{j(void 0)}finally{q(!1)}},Ee=Pe(ge,500),ue=async(r,n,p)=>{if(n?V(r):f(r),c=="0"&&a=="haedal")return;if(de(n),!r&&!p){Ce();return}if(i=="both"&&g&&(!+r||!+p)){q(!1),j(void 0),Z(0);return}const m=a=="haedal"?W(n?t.coin_type:d.coin_type,r):$(n?t.coin_type:d.coin_type,r),x=a=="haedal"?W(n?d.coin_type:t.coin_type,p):$(n?d.coin_type:t.coin_type,p),w=y(m).add(y(x));if(g&&(w.gt(1e4)||w.gt(0)&&w.lt(1e-4))){Z(0);return}const D=Me();ne(D),+r?Ee(r,n,p,D):g||Ce()},Ce=()=>{V(""),f(""),Z(0),ne(""),j(void 0),q(!1)},Ie=u.useMemo(()=>(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:386 ~ inputTotalValue ~ amountValueA:",fe),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:387 ~ inputTotalValue ~ amountValueB:",ee),y(fe||"0").add(ee||"0").toString()),[fe,ee]),Fe=u.useMemo(()=>g?y(Ie).gt(y(1e4)):!1,[Ie,g]),Ae=u.useMemo(()=>g?y(Ie).gt(0)&&y(Ie).lt(y(1e-4)):!1,[Ie,g]),{stakeProtocolName:Qe}=Ft(F?h==null?void 0:h.coin_type:S==null?void 0:S.coin_type),Ge=u.useMemo(()=>{if(a!="haedal"&&i!=="both"&&S&&h&&(+b||+v)){const r=F?b:v,n=F?S:h,p=F?h:S;if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:424 ~ showOnlySideTips ~ calculateResult:",M),M&&M.swap_result){const m=Le(M.swap_result.swap_in_amount,n.decimals),x=Le(y(M.swap_result.swap_out_amount).mul(1-Number(G)).toString(),p.decimals);return rt.isSuiCoin(n.coin_type)?`By depositing ${Ne(xe(r,9).toString(),9)} SUI, ${Ne(xe(m,9).toString(),9)} SUI will be converted to ${p==null?void 0:p.symbol} via ${Qe} liquid staking and added to the pool together.`:`By depositing ${Ne(xe(r,9).toString(),9)} ${n==null?void 0:n.symbol}, ${Ne(xe(m,9).toString(),9)} ${n==null?void 0:n.symbol} will be traded for ${Ne(xe(x,9).toString(),9)} ${p==null?void 0:p.symbol} and then added to the pool together.`}else if(!rt.isSuiCoin(i)){const m=$(i,r);if(y(m).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[i,M,b,v,a]),{signAndExecuteTransaction:Ue,transactionConfirmation:et,transactionRejected:tt}=zt(),Je=()=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:474 ~ reCalculateResult ~ reCalculateResult:"),c=="0"&&a=="haedal"){V(""),f(""),Z(0),q(!1),j(void 0);return}if(i=="both"&&(!+b||!+v))return;const r=Me();if(ne(r),O)De(T.current,R,s,r);else{const n=ae.current?P.current:re.current,p=se?re.current:P.current;+n&&Ee(n,se,p,r)}},De=Pe(async(r,n,p,m)=>{var w;console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:470 ~ preCalculateDepositValue ~ percent:",r),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:431 ~ preCalculateDepositValue ~ coin:",p),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:432 ~ preCalculateDepositValue ~ pythPriceMap:",E);const x=(w=E[Ye(p==null?void 0:p.coin_type,!1)])==null?void 0:w.price;if(S&&h&&l){const D=y(n).mul(r).div(100).mul(x).toString();if(D=="0"){j(void 0),V(""),f(""),Z(0),q(!1);return}console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ coin:",p),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ coinPrice:",x),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ percent:",r),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:464 ~ preCalculateDepositValue ~ availableCapacityWithCoin:",n),y(n).mul(r).div(100).toString(),q(!0);const H={mode:B,pool_id:l,amount_usd:D,uuid:m};console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:472 ~ preCalculateDepositValue ~ params:",H);const Q=await te.Vaults.preCalculateDepositValue(H,{onSuccess:(ve,ye)=>{ye==K.current&&(B=="FixedOneSide"||B=="OnlyCoinA"||B=="OnlyCoinB"?P.current||re.current:P.current&&re.current)?(j({amount_a:o?Q.deposit_amount_b:Q.deposit_amount_a,amount_b:o?Q.deposit_amount_a:Q.deposit_amount_b,ft_amount:ve}),q(!1)):(q(!1),j(void 0))},onError:(ve,ye)=>{console.log("ğŸš€ ~ preCalculate ~ error:",ve)}});if(m!==K.current)return;console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:492 ~ preCalculateDepositValue ~ res:",Q),pe(Q,!0,!0)}},500),st=(r,n,p,m)=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:536 ~ handlePercentInputChange ~ percent:",r),y(r).lte(0)){console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:538 ~ handlePercentInputChange ~ percent11111:"),j(void 0),V(""),f(""),q(!1);return}De(r,n,p,m)},at=async r=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:503 ~ calculateDepositRatioWithAvailableCapacity ~ wrapRes:",r),S&&h){const n=qe(r.deposit_amount_a,S==null?void 0:S.decimals),p=qe(r.deposit_amount_b,h==null?void 0:h.decimals),m=W(S==null?void 0:S.coin_type,String(n)),x=W(h==null?void 0:h.coin_type,String(p)),w=y(m).add(y(x)).toString(),D=y(w).div(y(c)).mul(100);if(c=="0"){Z(0),V(""),f(""),j(void 0),q(!1);return}if(D.gt(100)){const H=Me();ne(H),Z(100),De(100,R,s,H)}else if(P.current||re.current){const H=xe(D.toString(),2);Z(Number(H))}}},Be=async()=>{if(l){let r;a=="haedal"?r={pool_id:l,amount_a:String(o?_e(v||0,String(S==null?void 0:S.decimals)):_e(b||0,String(S==null?void 0:S.decimals))),amount_b:String(o?_e(b||0,String(h==null?void 0:h.decimals)):_e(v||0,String(h==null?void 0:h.decimals)))}:r={vault_id:l,slippage:Number(G),deposit_result:M},console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",r);const n={getShowInfo:(p,m,x)=>{console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",x);const w="Deposit "+[we(b,o?h==null?void 0:h.symbol:S==null?void 0:S.symbol),we(v,o?S==null?void 0:S.symbol:h==null?void 0:h.symbol)].filter(Boolean).join(" and "),D={modalDescriptionText:w,toastTitleText:w};if(p==="success"){let H=b,Q=v;x&&x.events.forEach(ye=>{ye.type.indexOf("::pool::DepositEvent")>-1&&S&&h&&(H=String(qe(ye.parsedJson.amount_a,S.decimals)),Q=String(qe(ye.parsedJson.amount_b,h.decimals)))});const ve="Deposit "+[we(o?Q:H,o?h==null?void 0:h.symbol:S==null?void 0:S.symbol),we(o?H:Q,o?S==null?void 0:S.symbol:h==null?void 0:h.symbol)].filter(Boolean).join(" and ");D.toastDescriptionContent=ve,D.modalDescriptionText=ve,D.toastTitleText="Deposit successful"}return D}};et(n);try{const p=new Vt;p.setSender(L.address),a=="haedal"?await te.Vaults.buildDepositPayload(r,p):(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:447 ~ doAddAction ~ vaultsSdk:",I,r),await I.Vaults.deposit(r,p)),await Ue(p,n,{useMev:he,txAction:"signTransactionBlock",useFastMode:oe==="Fast Mode",maxCapForGas:ce,customGasPrice:me,msafeParams:{action:Wt.AddVaultsPosition,txbParams:r}})?(Ce(),setTimeout(()=>{X(),U(l)},2e3)):Je()}catch(p){console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsAdd.ts:418 ~ doAddAction ~ error:",p),tt(n)}}},_=u.useMemo(()=>i==(s==null?void 0:s.coin_type)||i=="both",[i,s]);return u.useEffect(()=>()=>{K.current=""},[]),{balanceInfoA:C,balanceInfoB:A,amountValueA:fe,amountValueB:ee,handleAmountInputChange:ue,amountInputA:b,amountInputB:v,setAmountInputA:V,setAmountInputB:f,resetInputAmount:Ce,preCalculateLoading:le,isFixedDisplayTokenA:se,zapNumGtError:Fe,zapNumLtError:Ae,calculateLpLoading:He,inputTotalValue:Ie,showOnlySideTips:Ge,doAddAction:Be,reCalculateResult:Je,percentage:N,setPercentage:Z,isSlider:O,setIsSlider:z,handlePercentInputChange:st,isQuoteCoin:_,setUuid:ne,uuidRef:K}}function Gt(l,a,t,d,o,i,g,s,c,R,C,A){const{currentAccount:b}=We(),{calculateResult:v}=$e();console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsButtonStatus.ts:23 ~ calculateResult:",v);const V=u.useMemo(()=>{const f={text:void 0,disabled:!1};if(!(b!=null&&b.address))return f.text="Connect Wallet",f.disabled=!1,f;if(!o||!i)return f.disabled=!0,f;if(g==="both"){if(!+l&&!+a||A&&(!+l||!+a))return f.text="Enter an amount",f.disabled=!0,f}else{if(g==(o==null?void 0:o.coin_type)&&!+l||g==(i==null?void 0:i.coin_type)&&!+a)return f.text="Enter an amount",f.disabled=!0,f;if(C=="cetus"&&s){const j=rt.isSuiCoin(g);if(j&&g===(o==null?void 0:o.coin_type)&&y(l).lt(3)||j&&g===(i==null?void 0:i.coin_type)&&y(a).lt(3))return f.text="Minimum deposit 3 SUI",f.disabled=!0,f}}if(g=="both"){if(y(l||"0").gt(t||"0"))return f.disabled=!0,f.text=s?`Insufficient ${o==null?void 0:o.symbol} Balance`:"Invalid Amount",f;if(y(a||"0").gt(d||"0"))return f.disabled=!0,f.text=s?`Insufficient ${i==null?void 0:i.symbol} Balance`:"Invalid Amount",f}if(g!=="both"){if(y(l||"0").gt(t||"0"))return f.disabled=!0,f.text=s?`Insufficient ${o==null?void 0:o.symbol} Balance`:"Invalid Amount",f;if(y(a||"0").gt(d||"0"))return f.disabled=!0,f.text=s?`Insufficient ${i==null?void 0:i.symbol} Balance`:"Invalid Amount",f}return console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsButtonStatus.ts:111 ~ submitBtnInfo ~ zapNumGtError:",c,R),s&&c||s&&R?(f.text="Enter an amount",f.disabled=!0,f):(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsButtonStatus.ts:133 ~ submitBtnInfo ~ calculateResult:",v),(v&&v.ft_amount=="0"||v&&v.burn_ft_amount=="0"||!v)&&(f.disabled=!0,f.text="Enter an amount"),f)},[l,a,t,d,o,i,g,c,R,C,b==null?void 0:b.address,v]);return{btnText:V.text,btnDisabled:V.disabled}}const ys=(l,a)=>({isCheckedAcceptWalletObj:{},setIsCheckedAcceptWalletObj:t=>l(()=>({isCheckedAcceptWalletObj:{...a().isCheckedAcceptWalletObj,...t}})),isCheckedDontRemindWalletObj:{},setIsCheckedDontRemindWalletObj:t=>l(()=>({isCheckedDontRemindWalletObj:{...a().isCheckedDontRemindWalletObj,...t}}))}),Ut=yt(os(ys,{name:"useVaultsRiskStore",partialize:l=>{const{isCheckedAcceptWalletObj:a,isCheckedDontRemindWalletObj:t}=l;return{isCheckedAcceptWalletObj:a,isCheckedDontRemindWalletObj:t}}})),Ke=({children:l})=>e.jsx(Y,{lineHeight:"20px",color:"text_caption",fontSize:"12px",position:"relative",pl:"10px",_before:{content:'""',display:"inline-block",w:"4px",h:"4px",borderRadius:"50%",bg:"primary",position:"absolute",left:"0",top:"8px"},children:l});function Rs(l){const{isOpen:a,setIsOpen:t,continueFunc:d}=l,[o,i]=u.useState(!1),[g,s]=u.useState(!1),{setIsCheckedAcceptWalletObj:c,setIsCheckedDontRemindWalletObj:R}=Ut(),{currentAccount:C}=We(),A=()=>{const v={[C==null?void 0:C.address]:o};c(v);const V={[C==null?void 0:C.address]:g};R(V),d()},{isApp:b}=dt();return e.jsxs(gt,{isCentered:!0,isOpen:a,onClose:()=>{t(!1)},children:[e.jsx(_t,{}),e.jsxs(St,{width:{base:"100%",lg:"480px"},children:[e.jsx(Ct,{children:e.jsx(Y,{fontSize:b?"14px":"16px",fontWeight:"500",color:"caption",lineHeight:b?"20px":"40px",children:"Risk Acknowledgement"})}),e.jsx(wt,{m:b?"":"12px 2px 0 0"}),e.jsxs(jt,{p:"0 16px",children:[e.jsxs(J,{bg:"menu_item_bg",borderRadius:"8px",border:"1px solid",borderColor:"border",p:"16px 12px",gap:b?"12px":"16px",children:[e.jsx(Y,{w:"100%",textAlign:"left",fontSize:"12px",children:"Before you provide liquidity via this vault:"}),e.jsxs(J,{gap:b?"12px":"16px",children:[e.jsx(Ke,{children:"You acknowledge that this vault strategy is provided by a third party. Cetus integrates it at the UI level for user convenience but does not operate this product or take responsibility for third-party risks."}),e.jsx(Ke,{children:"You acknowledge that the displayed APR and APY are based on historical data and not a guaranteed return."}),e.jsx(Ke,{children:"You understand that APR and APY figures reflect past trading fees and rewards only, excluding impermanent loss and price volatility."}),e.jsx(Ke,{children:"You recognize the risks associated with automated liquidity strategies, including market fluctuations and third-party operational risks."}),e.jsx(Y,{fontSize:"12px",color:"text_paragraph",lineHeight:"20px",children:"Please assess these risks carefully and proceed only if you fully understand and accept them."})]})]}),e.jsxs(J,{bg:"menu_item_bg",borderRadius:"8px",border:"1px solid",borderColor:"border",p:b?"12px 16px":"16px",justifyContent:"flex-start",alignItems:"flex-start",m:"16px 0",userSelect:"none",gap:b?"8px":"12px",children:[e.jsxs(be,{children:[e.jsx(ht,{checked:o,onClick:()=>i(!o)}),e.jsx(Y,{fontWeight:"500",color:"text_caption",children:"I acknowledge and accept all the risks."})]}),e.jsxs(be,{children:[e.jsx(ht,{checked:g,onClick:()=>s(!g)}),e.jsx(Y,{fontSize:"12px",color:"text_paragraph",children:"Don't remind me again."})]})]}),e.jsx(ke,{w:"calc(100% + 32px)",h:"52px",bg:"primary",borderRadius:"12px",fontWeight:"600",ml:"-16px",disabled:!o,onClick:A,children:"Continue"})]})]})]})}function Vs({percentage:l,onChange:a,quoteCoin:t,availableCapacityWithQuoteCoin:d,availableCapacityUSD:o}){const i=u.useMemo(()=>!o,[o]),g={fontSize:"sm",position:"absolute",ml:"-5px",top:"50%",transform:"translateY(-50%)",zIndex:"100",borderRadius:"50%"},s=[0,25,50,75,100];return e.jsx(e.Fragment,{children:i?e.jsxs(J,{width:"100%",maxHeight:"164px",justifyContent:"space-between",children:[e.jsx(ot,{width:"100%"}),e.jsx(ot,{width:"100%"}),e.jsx(ot,{width:"100%"})]}):e.jsxs(J,{width:"100%",alignItems:"start",gap:"14px",children:[e.jsx(Y,{color:"text_paragraph",textAlign:"left",children:"Available Capacity"}),e.jsxs(be,{w:"100%",alignItems:"center",justifyContent:"space-between",mt:"12px",children:[e.jsx(ns,{tooltip:e.jsxs(be,{children:[e.jsx(qt,{src:t==null?void 0:t.logo_url,w:"20px",h:"20px"},t==null?void 0:t.coin_type),e.jsx(Y,{color:"text_caption",children:xe(d,2)}),e.jsx(Y,{color:"text_caption",children:t==null?void 0:t.symbol})]}),children:e.jsx(be,{w:"100%",alignItems:"center",justifyContent:"space-between",children:e.jsx(Y,{color:"text_caption",height:"14px",textAlign:"left",fontSize:"16px",textDecoration:"underline dotted",children:lt(o,"$")})})}),e.jsxs(Qt,{"aria-label":"slider-ex-6",min:0,max:100,focusThumbOnChange:!1,value:l=="--"?0:Number(l),onChange:c=>a(c),w:"242px",isDisabled:Number(o)<=0,children:[s.filter(c=>c!==Number(l)).map((c,R)=>e.jsx(ft,{...g,value:c,w:"8px",h:"8px",bg:Number(l)>=c?"primary":"#2b2e32",onClick:()=>a(c)},R)),e.jsx(ft,{value:Number(l),textAlign:"center",bg:"#1B2E3B",p:"2px 4px",borderRadius:"4px",fontSize:"12px",color:"primary",mt:"-28px",ml:"-15px",children:ls(l,2)}),e.jsx(Jt,{bg:"#2b2e32",height:"2px",borderRadius:"4px",children:e.jsx(Kt,{height:"2px",bg:"primary",borderRadius:"2px"})}),e.jsx(Pt,{p:"1px",w:"10px",h:"10px",border:"1px solid primary",position:"relative",zIndex:"100",borderRadius:"50%",_before:{content:'""',w:"6px",h:"6px",borderRadius:"50%",bg:[0,25,50,75,100].includes(Number(l))?"primary":"bg_secondary",border:"1px solid #2b2e32"}})]})]}),!i&&o==0?e.jsx(J,{w:"100%",alignItems:"start",children:e.jsx(Y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The vault has reached its current capacity. New deposits are not accepted at this time."})}):null]})})}const Is={customDeposit:"Through Zap-In, you can deposit your liquidity in single token or with customized token ratio. Tokens will be auto converted to match the required ratio. ",deposit:"Through Zap-In, you can deposit your liquidity in single token. Tokens will be auto converted to match the required ratio.",withdraw:"Through Zap-Out, you can withdraw your liquidity in one token. The liquidity will be auto converted to one token you selected."};function Os(l){const{isCheckedZAP:a,zapText:t,tooltipType:d,zapSwitchChange:o}=l,{isApp:i}=dt();return e.jsx(Re,{padding:"6px 8px",borderRadius:"8px",width:"unset",children:e.jsxs(Xt,{isLazy:!0,trigger:i?"click":"hover",placement:"top",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx(Zt,{children:e.jsxs(be,{h:"14px",cursor:"pointer",as:"button",children:[e.jsx(Y,{fontSize:"14px",color:a?"primary":"",fontWeight:"500",children:t}),e.jsx(Tt,{isChecked:a,onChange:()=>o(!a)})]})}),e.jsx(kt,{minW:"fit-content",w:"fit-content",children:e.jsx(es,{p:"12px",lineHeight:"20px",fontSize:"12px",maxWidth:"320px",children:Is[d]})})]})})}const Ds="You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you.",Ls=(l,a)=>`When you deposit in only SUI tokens, a part of your SUI amount will be converted to ${a} via ${l} liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved.`,Oe={Deposit:"Deposit"};function Bt(l){const{displayTokenA:a,displayTokenB:t,onSelectAssetTab:d,label:o="Deposit Amounts",isCheckedZAP:i,setIsCheckedZAP:g,assetAction:s,setAssetAction:c,category:R,currentActionTab:C}=l,{stakeProtocolName:A}=Ft(a==null?void 0:a.coin_type),b=u.useMemo(()=>R==="haedal",[R]),v=()=>{if(!a||!t)return[];const M=[{label:`${a.symbol} only`,action:a.coin_type,afterIcon:i&&C===Oe.Deposit&&!b?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:b?C===Oe.Deposit?`You can add liquidity in this pool with only ${a.symbol}.`:"":Ds},{label:`${t.symbol} only`,action:t.coin_type,afterIcon:i&&C===Oe.Deposit&&!b?{xlinkHref:"#icon-icon_tips"}:void 0,tooltip:b?C===Oe.Deposit?`You can add liquidity in this pool with only ${t.symbol}.`:"":Ls(A,a==null?void 0:a.symbol)}];return b&&C===Oe.Deposit&&M.splice(1,0,{label:`${a.symbol}+${t.symbol}`,action:"both",tooltip:"You can add any value you want from both assets."}),M},V=u.useMemo(v,[a,t,i,A,b,C]),f=u.useMemo(()=>{var M,W,$;if(V.length!==0)return s===(a==null?void 0:a.coin_type)?V[0].label:s===(t==null?void 0:t.coin_type)?b&&C===Oe.Deposit?(M=V[2])==null?void 0:M.label:(W=V[1])==null?void 0:W.label:($=V[1])==null?void 0:$.label},[s,V,b,C,a==null?void 0:a.coin_type,t==null?void 0:t.coin_type]),j=u.useMemo(()=>C===Oe.Deposit?b?"customDeposit":"deposit":"withdraw",[C,b]);return e.jsxs(J,{w:"100%",gap:"16px",children:[e.jsxs(be,{w:"100%",justifyContent:"space-between",children:[e.jsx(Y,{fontWeight:"500",children:o}),e.jsx(Os,{isCheckedZAP:i,zapText:C===Oe.Deposit?"Zap In":"Zap Out",tooltipType:j,zapSwitchChange:M=>{g(!i),c(M?(a==null?void 0:a.coin_type)??"":"both")}})]}),i&&V.length>0&&e.jsx(It,{wrapStyle:{w:"100%",h:"48px",borderRadius:"8px",p:"3px"},itemStyle:{w:"50%",fontSize:"14px",borderRadius:"6px",fontWeight:"500"},type:"outlineTab",currentTab:f,tabList:V,handleChangeTab:M=>{c(M.action),d(M.action)}})]})}function Ms(l){const{currentAccount:a,onWalletModal:t}=We(),[d,o]=u.useState("both"),[i,g]=u.useState(!1),{category:s,isReverse:c,vaultId:R,currentActionTab:C,totalSupply:A,lpTokenInfo:b,feeTier:v,isModal:V,isAutoRefresh:f}=l,{fromToken:j,toToken:M,calculateResult:W}=$e(),{vaultsPoolObj:$}=Mt(),te=u.useMemo(()=>$[R],[$,R]),I=ws(te),{balanceInfoA:G,balanceInfoB:U,amountValueA:X,amountValueB:O,handleAmountInputChange:z,amountInputA:L,amountInputB:E,resetInputAmount:he,preCalculateLoading:oe,zapNumGtError:ce,zapNumLtError:me,calculateLpLoading:N,inputTotalValue:Z,showOnlySideTips:T,doAddAction:fe,reCalculateResult:ee,percentage:S,setPercentage:h,setIsSlider:k,handlePercentInputChange:ne,isQuoteCoin:K,setUuid:se,uuidRef:de}=vs(R,s,j,M,c,d,i,I==null?void 0:I.quoteCoin,I==null?void 0:I.availableCapacityUSD,I==null?void 0:I.availableCapacityWithQuoteCoin);console.log("ğŸš€ğŸš€ğŸš€ ~ vaultsAdd.tsx:74 ~ VaultsAdd ~ calculateLpLoading:",N),u.useEffect(()=>{he()},[i,d]);const[ae,F]=u.useState(!1),{isApp:je}=dt(),{btnText:le,btnDisabled:ze}=Gt(L,E,(G==null?void 0:G.balanceFormat)||"",(U==null?void 0:U.balanceFormat)||"",j,M,d,!0,ce,me,s,i),{vaultsSlippage:He}=Te(),{lpRate:q}=js(W==null?void 0:W.ft_amount,A),{amountLimit:P}=Ht(Number(He),W==null?void 0:W.ft_amount,!1),re=()=>({feeTier:v||"",displayTokenA:j,displayTokenB:M,displayAmountA:L,displayAmountB:E,totalAmountValue:Z,sharePool:q,lpAmountLimit:P||"0",lpDecimals:b==null?void 0:b.decimals}),{pythPriceMap:B}=Lt(),pe=u.useRef(!1);u.useEffect(()=>{pe.current=!0},[]),u.useEffect(()=>{pe.current&&ee(),pe.current=!0},[B]),u.useEffect(()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsAdd.tsx:151 ~ VaultsAdd ~ isAutoRefresh:",f),pe.current&&ee()},[f]);const{isCheckedDontRemindWalletObj:ge}=Ut(),[Se,Ve]=u.useState(!1),Ee=u.useMemo(()=>!ge[a==null?void 0:a.address],[ge,a==null?void 0:a.address]);return u.useEffect(()=>()=>{de.current=""},[]),e.jsxs(J,{gap:V?"8px":"12px",w:"100%",align:"flex-start",children:[e.jsxs(Re,{bg:V?"transparent":"bg_six",borderColor:V?"transparent":"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:V?"0":"16px"},w:"100%",children:[e.jsx(Bt,{displayTokenA:j,displayTokenB:M,onSelectAssetTab:ue=>{o(ue)},setIsCheckedZAP:()=>g(!i),setAssetAction:o,assetAction:d,isCheckedZAP:i,category:s,currentActionTab:C,handleRefreshClick:()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ vaultsAdd.tsx:174 ~ VaultsAdd ~ handleRefreshClick:"),ee()}}),e.jsx(J,{mt:V?"8px":"16px",position:"relative",children:e.jsx(Et,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:d!=="both"&&d!==(j==null?void 0:j.coin_type),balance:(G==null?void 0:G.balanceFormat)||"",value:L,amountValue:L&&X,loading:!1,onChange:ue=>{s=="haedal"&&k(!1),z(ue,!0,E)},selectable:!1,placeholder:"0.0",token:j},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},hideSelf:d!=="both"&&d!==(M==null?void 0:M.coin_type),balance:(U==null?void 0:U.balanceFormat)||"",value:E,amountValue:E&&O,loading:!1,onChange:ue=>{s=="haedal"&&k(!1),z(ue,!1,L)},selectable:!1,placeholder:"0.0",token:M},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),s=="haedal"&&Rt(B)&&e.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"16px",children:e.jsx(Vs,{depositRatio:I.depositRatio||"",percentage:S,hardCapUSD:I.hardCapUSD||"",vaultTvl:I.vaultTvl||"",availableCapacityUSD:I.availableCapacityUSD||"",quoteCoin:I.quoteCoin,maxCapNum:I.hardCap||"",availableCapacityWithQuoteCoin:I.availableCapacityWithQuoteCoin||"",onChange:ue=>{k(!0),h(ue);const Ce=Me();se(Ce),ne(ue,K?I==null?void 0:I.availableCapacityWithQuoteCoin:I==null?void 0:I.availableCapacityWithBaseCoin,K?I.quoteCoin:I.baseCoin,Ce)}})},R),e.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(J,{w:"100%",gap:"20px",children:[e.jsx(ke,{m:"-1px",isLoading:N||ae,w:"100%",borderRadius:"12px",h:"52px",fontSize:je?"14px":"18px",fontWeight:"500",disabled:ze||ae||N,onClick:()=>{a?Ee&&s=="haedal"?Ve(!0):F(!0):t(!0)},children:le||(i?"Zap In":"Deposit")}),ce&&(L||E)&&e.jsx(J,{w:"100%",pl:"16px",pr:"16px",pb:W||T?"0px":"20px",alignItems:"start",gap:"20px",children:e.jsx(Y,{color:"primary_yellow",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_yellow_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset deposit can't be higher than $10,000 at a time."})}),me&&(L||E)&&e.jsx(J,{w:"100%",pl:"16px",pb:W||T?"0px":"20px",pr:"16px",alignItems:"start",children:e.jsx(Y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"The input is too small. Zap mode is not available."})}),(W||T)&&(L||E)&&e.jsxs(J,{w:"100%",pb:"20px",pl:"16px",pr:"16px",alignItems:"start",gap:"0",children:[d!=="both"&&T&&e.jsx(Y,{color:"text_paragraph",fontSize:"12px",lineHeight:"1.8",pb:W?"20px":"0",children:T}),W&&e.jsx(Nt,{amountLimit:P,inputTotalValue:Z,preCalculateLoading:oe,calculateLpLoading:N,lpRate:q,lpDecimals:b==null?void 0:b.decimals,poolName:`${j==null?void 0:j.symbol} - ${M==null?void 0:M.symbol}`,labelColor:"primary_gray"})]})]})}),Se&&e.jsx(Rs,{isOpen:Se,setIsOpen:Ve,continueFunc:()=>{Ve(!1),F(!0)}}),ae&&e.jsx(Cs,{data:re(),isOpen:ae,calculateLpLoading:N,onClose:()=>{F(!1)},onSubmitClick:()=>{F(!1),fe()}})]})}function Ws(l,a,t,d,o,i,g,s){const{amountInputA:c,amountInputB:R,calculateResult:C,setAmountInputA:A,setAmountInputB:b,setCalculateResult:v}=$e(),{findBestRouters:V}=_s(),{vaultsSlippage:f,mevProtect:j,maxCapForGas:M,transactionMode:W,customGasPrice:$}=Te(),{getTokenAmountValue:te}=ct(),{volatileVaultsSdk:I}=ut(),G=it("vaults"),{getTokenAmountValueByPyth:U}=pt(),[X,O]=u.useState(!1),[z,L]=u.useState(!1),{fetchAccountBalance:E}=$t(),{updateCurrentVaultById:he}=At(),{providers:oe}=rs(),ce=u.useRef(z);u.useEffect(()=>{ce.current=z},[z]);const[me,N]=u.useState(!1),[Z,T]=u.useState(""),fe=u.useRef(Z);u.useEffect(()=>{fe.current=Z},[Z]);const ee=u.useRef(c),S=u.useRef(R);u.useEffect(()=>{ee.current=c},[c]),u.useEffect(()=>{S.current=R},[R]);const h=u.useMemo(()=>o?d:t,[o,t,d]),k=u.useMemo(()=>o?t:d,[o,t,d]),ne=a=="haedal"?U(t==null?void 0:t.coin_type,c||"0"):te(t==null?void 0:t.coin_type,c||"0"),K=a=="haedal"?U(d==null?void 0:d.coin_type,R||"0"):te(d==null?void 0:d.coin_type,R||"0"),[se,de]=u.useState(o?s==null?void 0:s.amountB:s==null?void 0:s.amountA),[ae,F]=u.useState(o?s==null?void 0:s.amountA:s==null?void 0:s.amountB),[je,le]=u.useState(!1),ze=async()=>{const{amountA:_,amountB:r}=s;if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:97 ~ calculateAvailableAmount ~ currentVaultPosition:",s),le(!1),i==="both"){de(o?r:_),F(o?_:r);return}const n=i===(h==null?void 0:h.coin_type),p=n?r:_,m=n?_:r;a=="haedal"?He(p,m,n):q(p,m,n)},He=async(_,r,n)=>{if(y(_).gt(0)){le(!0);const p={pool_id:l,mode:Ge,burn_lp_amount:s==null?void 0:s.balance,available_lp_amount:s==null?void 0:s.balance};try{const m=await I.Vaults.preCalculateWithdrawAmount(p);if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:127 ~ haedalCalculateAvailableAmount ~ res:",m),Ge=="OnlyCoinA"){const x=Le(m.receive_amount_a,h==null?void 0:h.decimals);o?F(x):de(x)}else{const x=Le(m.receive_amount_b,k==null?void 0:k.decimals);o?de(x):F(x)}le(!1)}catch(m){console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",m)}}else n?de(r):F(r);le(!1)},q=async(_,r,n)=>{if(y(_).gt(0)){le(!0);const p=n?k:h;V({fromToken:p,toToken:n?h:k,amount:_e(_,p.decimals).toString(),providersKeys:oe,by_amount_in:!0,uuid:Me()}).then(x=>{x.toAmountUi&&(r=y(r).add(x.toAmountUi).toString()),n?de(r):F(r)}).finally(()=>{le(!1)})}else n?de(r):F(r)},P=u.useMemo(()=>y(ne||"0").add(K||"0").toString(),[ne,K]),re=u.useMemo(()=>g?y(P).gt(y(1e4)):!1,[P,g]),B=u.useMemo(()=>g?y(P).gt(0)&&y(P).lt(y(1e-4)):!1,[P,g]),[pe,ge]=u.useState(0),Se=()=>{A(""),b(""),ge(0),O(!1),v(void 0),T("")},Ve=(_,r,n,p)=>{var m;if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:96 ~ wrapRes ~ res:",_,n,p),_){const x=y(a=="haedal"?_.receive_amount_a:_.amount_a).div(10**h.decimals).toString(),w=y(a=="haedal"?_.receive_amount_b:_.amount_b).div(10**k.decimals).toString(),D=y(((m=_.swap_result)==null?void 0:m.swap_out_amount)||"0").div(10**(r?t.decimals:d.decimals)).toString();if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:239 ~ wrapRes ~ swapOutAmount:",D,x,w),p===100&&i=="both"&&(de(o?w:x),F(o?x:w)),n)if(i=="both")A(o?w:x),b(o?x:w);else if(i==(t==null?void 0:t.coin_type)){const H=y(se).mul(p).div(100).toString();console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:264 ~ wrapRes ~ amount:",H),A(H)}else{const H=y(ae).mul(p).div(100).toString();b(H)}else{if(i!=="both")return;r?b(o?x:w):A(o?w:x)}}},Ee=async(_,r,n,p,m)=>{if(h&&k&&l){if(!m){if(n){if(y(_).gt(se)){T(""),b(""),ge(0),v(void 0),O(!1);return}}else if(y(_).gt(ae)){T(""),A(""),v(void 0),O(!1),ge(0);return}}(+ee.current||+S.current||m)&&O(!0);const x=(o?!n:n)?h:k,w=_e(_,x.decimals).toFixed(0),D=n?_e(se,x.decimals).toFixed(0):_e(ae,x.decimals).toFixed(0),H=o?!n:n,Q=y(w).div(y(D)),ve=nt(Q.mul(s==null?void 0:s.balance).toString(),0,!0),ye=Number(nt(Q.mul(100).toString(),2));console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:324 ~ preCalculate ~ fixedCoinA:",H),L(H),a==="haedal"?ue(ve,n,p,ye,!1):Ce(ve,n,H,p,ye,!1)}},ue=async(_,r,n,p,m)=>{let x;if(i=="both")x={pool_id:l,mode:"FixedOneSide",burn_lp_amount:String(_)};else{const w=i==(h==null?void 0:h.coin_type)?"OnlyCoinA":"OnlyCoinB";x={pool_id:l,mode:w,burn_lp_amount:String(_)}}try{const w=await I.Vaults.preCalculateWithdrawAmount(x);if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:386 ~ haedalPreCalculate ~ res:",w,n,fe.current),w.burn_lp_amount=="0"){O(!1),v(void 0);return}Ve(w,r,m,p),v({...w,burn_ft_amount:w.burn_lp_amount}),ge(p)}catch(w){console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:388 ~ haedalPreCalculate ~ error:",w),v(void 0)}finally{O(!1)}},Ce=async(_,r,n,p,m,x)=>{const w={vault_id:l,fix_amount_a:n,input_amount:_,slippage:Number(f),request_id:p,side:i==="both"?Xe.Both:Xe.OneSide,is_ft_input:!0,max_ft_amount:s==null?void 0:s.balance};console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:275 ~ lstPreCalculate ~ params:",w);try{const D=await G.Vaults.calculateWithdrawAmount(w);if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:386 ~ res:",D,m),console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:215 ~ haedalPreCalculate ~ uuidRef.current:",fe.current,p),D.burn_ft_amount=="0"){O(!1),v(void 0);return}Ve(D,r,x,m),v(D),ge(m)}catch{v(void 0)}finally{O(!1)}},Ie=Pe(Ee,500),Fe=Pe(a=="cetus"?Ce:ue,500),Ae=(_,r)=>{if(_==0){Se();return}console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:218 ~ handlePercentInputChange ~ value:",_,a),N(!0),O(!0),ge(_);const n=Me();console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:225 ~ handlePercentInputChange ~ uuid:",n),T(n);const p=nt(y(s==null?void 0:s.balance).mul(_/100).toString(),0,!0);console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:459 ~ handlePercentInputChange ~ removeLpAmount:",p,s==null?void 0:s.balance);const m=o?!r:r;L(m),a==="haedal"?Fe(p,r,n,_,!0):Fe(p,r,m,n,_,!0)},Qe=(_,r,n,p)=>{if((p||n)&&i!=="both"&&(r?A(_):b(_)),n){Ae(100,r);return}if(p){Ae(50,r);return}if(N(!1),r?A(_):b(_),+_){const m=Me();T(m),Ie(_,!1,r,m)}else Se()},Ge=u.useMemo(()=>g?i=="both"?"FixedOneSide":i==(h==null?void 0:h.coin_type)?"OnlyCoinA":"OnlyCoinB":"FixedOneSide",[g,i,h]),Ue=()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:519 ~ reCalculateResult ~ reCalculateResult:");const _=o?!ce.current:ce.current;if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:516 ~ reCalculateResult ~ isDisplayTokenA:",_),me)Ae(pe,_);else{const r=ce.current?o?S.current:ee.current:o?ee.current:S.current;Qe(r,_)}},{signAndExecuteTransaction:et,transactionConfirmation:tt,transactionRejected:Je}=zt(),[mt,De]=u.useState(!1),st=async()=>{if(l&&C&&(s!=null&&s.balance)){De(!0);let _;if(a=="haedal")_={pool_id:l,burn_lp_amount:pe==100?s==null?void 0:s.balance:C.burn_ft_amount,mode:Ge,slippage:Number(f)};else if(i==="both")_={vault_id:l,ft_amount:C==null?void 0:C.burn_ft_amount,slippage:Number(f)};else{const n=i===(h==null?void 0:h.coin_type);if(pe===100)_={vault_id:l,is_ft_input:!0,input_amount:s==null?void 0:s.balance,slippage:Number(f),max_ft_amount:s==null?void 0:s.balance,fix_amount_a:n};else{const p=_e(z?c:R,9);_={vault_id:l,is_ft_input:!1,input_amount:p.toString(),slippage:Number(f),max_ft_amount:s==null?void 0:s.balance,fix_amount_a:n}}}console.log("ğŸš€ ~ doRemoveAction ~ params:",_);const r={getShowInfo:(n,p)=>{const m="Withdraw "+[we(c,t.symbol),we(R,d.symbol)].filter(Boolean).join(" and "),x={modalDescriptionText:m,toastDescriptionContent:m};if(n==="success"){let w=c||"0",D=R||"0";console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",p,c,R),p&&(w=y(c||"0").gt(0)?xt(p,t)||c:"",D=y(R||"0").gt(0)?xt(p,d)||R:"");const H=[we(w,t.symbol),we(D,d.symbol)].filter(Boolean),Q=(H&&H.length>1?"Removed ":"Withdraw ")+[we(w,t==null?void 0:t.symbol),we(D,d==null?void 0:d.symbol)].filter(Boolean).join(" and ");x.toastDescriptionContent=Q,x.modalDescriptionText=Q}return x}};tt(r);try{let n=new Vt;a=="haedal"?n=await I.Vaults.buildWithdrawPayload(_):await G.Vaults.withdraw(_,n),await et(n,r,{useMev:j,txAction:"signTransactionBlock",useFastMode:W==="Fast Mode",maxCapForGas:M,customGasPrice:$,msafeParams:{action:Wt.AddVaultsPosition,txbParams:_}})?(Se(),setTimeout(()=>{E(),he(l)},2e3)):Ue(),De(!1)}catch(n){console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:675 ~ doRemoveAction ~ error:",n),De(!1),Je(r)}}},at=u.useMemo(()=>{if(console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:656 ~ showOnlySideTips ~ calculateResult:",C),C&&(C.swap_result||C.swap)&&i!=="both"&&h&&k){let _=a=="cetus"?C.swap_result.swap_in_amount:C.swap.swap_amount_in,r=a=="cetus"?C.swap_result.swap_out_amount:C.swap.swap_amount_out;const n=a=="cetus"?z:o?!z:z,p=n?c:R;console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:709 ~ showOnlySideTips ~ amount:",p);const m=n?t:d;console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:687 ~ showOnlySideTips ~ fixToken:",m);const x=n?d:t,w=Le(_,x.decimals),D=Le(y(r).mul(1-Number(f)).toString(),m.decimals);return`To withdraw ${xe(p,m==null?void 0:m.decimals)} ${m==null?void 0:m.symbol}, ${xe(w,x==null?void 0:x.decimals)} ${x==null?void 0:x.symbol} in the pool will be traded for ${xe(D,m==null?void 0:m.decimals)} ${m==null?void 0:m.symbol}`}},[i,C,c,R,z,a]);u.useEffect(()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ useVaultsRemove.ts:717 ~ availableAmountA:",se),Ue()},[se,ae]);const{currentAccount:Be}=We();return u.useEffect(()=>{Se(),setTimeout(()=>{s!=null&&s.amountA&&(s!=null&&s.amountB)&&ze()},200)},[g,i,Be==null?void 0:Be.address]),u.useEffect(()=>{ze()},[s==null?void 0:s.amountA,s==null?void 0:s.amountB]),{calculateAvailableLoading:je,availableAmountA:se,availableAmountB:ae,amountInputA:c,amountInputB:R,amountValueA:ne,amountValueB:K,zapNumGtError:re,zapNumLtError:B,handleAmountInputChange:Qe,handlePercentInputChange:Ae,debouncedPercentInputChange:Fe,removePercent:pe,showOnlySideTips:at,preCalculateLoading:X,doRemoveAction:st,inputTotalValue:P,calculateResult:C,setIsSlider:N,resetInputAmount:Se,calculateAvailableAmount:ze,submitLoading:mt,isSlider:me,fixAmountA:z,reCalculateResult:Ue}}function $s(l){const{currentAccount:a,onWalletModal:t}=We(),{fromToken:d,toToken:o,calculateResult:i}=$e();console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsRemove.tsx:27 ~ VaultsRemove ~ calculateResult:",i);const{currentVaultPosition:g}=Ot(),[s,c]=u.useState("both"),[R,C]=u.useState(!1),{category:A,isReverse:b,vaultId:v,currentActionTab:V,lpTokenInfo:f,isModal:j,isAutoRefresh:M}=l,W=u.useMemo(()=>g,[g]),{amountInputA:$,amountInputB:te,amountValueA:I,amountValueB:G,calculateAvailableLoading:U,availableAmountA:X,availableAmountB:O,zapNumGtError:z,zapNumLtError:L,handleAmountInputChange:E,removePercent:he,handlePercentInputChange:oe,doRemoveAction:ce,showOnlySideTips:me,preCalculateLoading:N,inputTotalValue:Z,setIsSlider:T,resetInputAmount:fe,isSlider:ee,fixAmountA:S}=Ws(v,A,d,o,b,s,R,W),{btnText:h,btnDisabled:k}=Gt($,te,X||"",O||"",d,o,s,!1,z,L,A,R);console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsRemove.tsx:72 ~ VaultsRemove ~ btnDisabled:",k,h);const{amountLimit:ne}=Ht(0,i==null?void 0:i.burn_ft_amount,!1),K=u.useMemo(()=>xe(Le(ne||"0",f==null?void 0:f.decimals),f==null?void 0:f.decimals),[ne,f]);u.useEffect(()=>{console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsRemove.tsx:80 ~ VaultsRemove ~ sCheckedZAP, assetAction:",R,s),fe()},[R,s]);const se=u.useMemo(()=>N?ee?!0:b?S:!S:!1,[N,ee]),de=u.useMemo(()=>N?ee?!0:b?!S:S:!1,[N,ee]),ae=u.useRef(!1);return u.useEffect(()=>{ae.current=!0},[]),e.jsxs(J,{gap:j?"8px":"12px",w:"100%",align:"flex-start",children:[e.jsxs(Re,{bg:j?"transparent":"bg_six",borderColor:j?"transparent":"border_secondary",borderRadius:"12px",p:{base:"16px 8px 8px",lg:j?"0":"16px"},w:"100%",children:[e.jsx(Bt,{label:"Remove Amounts",displayTokenA:d,displayTokenB:o,onSelectAssetTab:F=>{c(F)},isCheckedZAP:R,setIsCheckedZAP:C,assetAction:s,setAssetAction:c,currentActionTab:V,category:A}),e.jsx(vt,{w:"100%",position:"relative",mt:j?"8px":"16px",children:e.jsx(Et,{borderRadius:"12px",from:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},calculateAvailableLoading:U,hideSelf:s!=="both"&&s!==(d==null?void 0:d.coin_type),balance:X||"",value:$,amountValue:I,loading:se,onChange:(F,je,le)=>{a!=null&&a.address&&!U&&(T(!1),E(F,!0,je,le))},needRemainBalance:!1,selectable:!1,placeholder:"0.0",token:d,balanceLabel:"Available"},to:{wrapStyle:{borderRadius:"12px",h:"unset",p:{base:"20px 8px",lg:"20px 16px"}},balanceLabel:"Available",calculateAvailableLoading:U,needRemainBalance:!1,hideSelf:s!=="both"&&s!==(o==null?void 0:o.coin_type),balance:O||"",value:te,amountValue:G,loading:de,onChange:(F,je,le)=>{a!=null&&a.address&&!U&&(T(!1),E(F,!1,je,le))},selectable:!1,placeholder:"0.0",token:o},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption",iconCursor:"default"},iconHover:!1})})]}),!j&&e.jsxs(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:{base:"16px 8px",lg:"16px"},children:[e.jsx(Y,{color:"primary_gray",children:"Amount"}),e.jsx(gs,{percentage:he,onChange:F=>{U||(console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsRemove.tsx:213 ~ VaultsRemove ~ assetAction:",s),console.log("ğŸš€ğŸš€ğŸš€ ~ VaultsRemove.tsx:214 ~ VaultsRemove ~ fromToken.address:",d.address),oe(Number(F.toString().replace("%","")),s=="both"?!0:s==d.coin_type))}})]}),e.jsx(Re,{bg:"bg_six",borderColor:"border_secondary",borderRadius:"12px",p:"0px",children:e.jsxs(J,{w:"100%",gap:"20px",children:[e.jsx(ke,{m:"-1px",isLoading:N,w:"100%",borderRadius:"12px",h:"52px",fontSize:"18px",fontWeight:"500",disabled:k||N,onClick:()=>{a?ce():t(!0)},children:h||(R?"Zap Out":"Withdraw")}),z&&e.jsx(J,{w:"100%",pl:"16px",pr:"16px",pb:"20px",alignItems:"start",children:e.jsx(Y,{color:"primary_red",fontSize:"12px",textAlign:"left",w:"100%",bg:"primary_red_opacity.10",p:"12px",borderRadius:"8px",lineHeight:"20px",children:"Single-asset withdraw can't be higher than $10,000 at a time."})}),i&&!z&&($||te)&&e.jsxs(J,{w:"100%",pb:"20px",pl:"16px",pr:"16px",gap:"0px",children:[s!=="both"&&me&&e.jsx(Y,{color:"text_paragraph",width:"100%",fontSize:"12px",lineHeight:"1.8",pb:"20px",children:me}),e.jsxs(J,{w:"100%",gap:"20px",children:[e.jsx(Ze,{label:"Total Withdraw",labelStyle:{fontSize:"14px"},value:us(Z,2),valueStyle:{fontSize:"14px"},skeletonStyle:{valueH:"14px"},isLoading:N}),e.jsx(Ze,{label:"LP Burn Amount",value:`${K} ${`${d==null?void 0:d.symbol} - ${o==null?void 0:o.symbol}`}`,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueH:"14px"},isLoading:N})]})]})]})})]})}const zs=[{label:"Deposit",value:"Deposit"},{label:"Withdraw",value:"Withdraw"}];function ea({vaultId:l,autoRefresh:a,isModal:t}){const{setAmountInputA:d,setAmountInputB:o}=$e(),{vaultListObj:i,lpTokenInfoObj:g}=Dt(),{vaultsPoolObj:s}=Mt(),c=u.useMemo(()=>i[l],[i,l]),R=u.useMemo(()=>s[l],[s]),[C,A]=u.useState("Deposit"),b=u.useMemo(()=>g[c==null?void 0:c.lpTokenType],[g,c==null?void 0:c.lpTokenType]),[v,V]=u.useState(!1),f=()=>{a(),V(j=>!j)};return e.jsxs(J,{w:{base:"100%",lg:"100%"},justifyContent:"start",gap:t?"8px":"12px",children:[e.jsx(Re,{p:"0",borderRadius:"12px",bg:t?"transparent":"bg_six",borderColor:t?"transparent":"border_secondary",children:e.jsxs(be,{w:"100%",p:{base:"0 8px",lg:t?"0":"0 16px"},children:[e.jsx(It,{type:"borderTab",wrapStyle:{w:"100%",h:t?"54px":"60px",border:"none",bg:t?"transparent":"bg_six",borderColor:"border_secondary"},itemStyle:{fontSize:t?"14px":"16px",mr:"28px"},tabList:zs,currentTab:C,handleChangeTab:j=>{d(""),o(""),A(j==null?void 0:j.value)}}),e.jsxs(be,{children:[e.jsx(ts,{slippageType:"vaults",compact:!0}),e.jsx(xs,{handleRefresh:()=>f(),isAutoRefresh:!0,refreshInterval:20,innerStyle:{bg:"bg_secondary"},w:"28px",h:"28px",borderRadius:"8px",bg:"bg_secondary"})]})]})}),C==="Deposit"&&e.jsx(Ms,{category:c==null?void 0:c.category,isReverse:c==null?void 0:c.isReverse,vaultId:c==null?void 0:c.vaultId,currentActionTab:"Deposit",totalSupply:R==null?void 0:R.totalSupply,lpTokenInfo:b,feeTier:c==null?void 0:c.feeDisplay,isModal:t,isAutoRefresh:v}),C==="Withdraw"&&e.jsx($s,{category:c==null?void 0:c.category,isReverse:c==null?void 0:c.isReverse,vaultId:c==null?void 0:c.vaultId,currentActionTab:"Withdraw",lpTokenInfo:b,isModal:t,isAutoRefresh:v})]})}export{ea as V,At as a,ws as b,$e as u};
//# sourceMappingURL=VaultsAction-BvkamZFO.js.map
