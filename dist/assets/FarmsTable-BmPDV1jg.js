import{j as e,V as R,H as V,T as p,Y as J,a1 as B,a4 as z,a3 as H,r as A,d as E,S as M,aA as $,$ as W,c as K,I as L,b as Q,B as U,aa as C,a as Y,aO as F,a$ as q,W as X,C as Z,ar as D}from"./index-D49RffYW.js";import{N}from"./NoData-MWQZy93S.js";import{c as O,d as f}from"./usePositionList-CyCzZNts.js";import{A as I}from"./index-BVFwDyvF.js";import{u as ss,E as es}from"./ExpendItem-Dexzs6Wu.js";import{S as ts}from"./SingleTokenInfo-Cvcahm1q.js";import{u as rs}from"./useToken-BlS8b5ft.js";import{C as ls}from"./CoinPairInfo-DmtDGhhi.js";import{R as os}from"./RangeValue-B6IVaqEN.js";import{a as k,b as g,c as ds,d as xs,e as P,T as ns}from"./tr-ChzXWjY-.js";function is({apiInfo:s}){var l,n;const{getTokenInfo:r}=rs(),o=t=>{if(t)try{return r(t)}catch(d){console.error("Error fetching token info:",d)}};return e.jsx(R,{align:"flex-end",children:s!=null&&s.farmsRewarderList&&((l=s==null?void 0:s.farmsRewarderList)==null?void 0:l.length)>0?(n=s==null?void 0:s.farmsRewarderList)==null?void 0:n.map(t=>{var d;return e.jsxs(V,{gap:"0px",children:[e.jsx(ts,{token:o(t==null?void 0:t.coinType),imgBoxStyle:{w:"20px",h:"20px"},warningIcon:{iconW:"10px",iconH:"10px"},haveName:!1,haveSymbol:!1}),e.jsxs(p,{color:"text_caption",fontWeight:"500",children:[J(t==null?void 0:t.emissionsEveryDay)," ",(d=o(t==null?void 0:t.coinType))==null?void 0:d.symbol]})]},t==null?void 0:t.coinType)}):e.jsx(p,{color:"text_caption",children:"--"})})}function cs({apiInfo:s}){var S;const{currentAccount:r}=B(),{getTokenAmountValue:o}=z(),{coinPriceObj:l}=H(),{posLiquidityData:n,posBaseListLoading:t,posBaseListGroupByPool:d}=O(),u=A.useMemo(()=>{var j,a;if(!(r!=null&&r.address)||!(s!=null&&s.poolAddress))return"--";if(!t)return(((a=(j=d[s.poolAddress])==null?void 0:j.list)==null?void 0:a.filter(x=>(x==null?void 0:x.posType)=="farms"))||[]).reduce((x,i)=>{var y,w;const b=n[i==null?void 0:i.posId],_=o((y=s==null?void 0:s.displayTokenA)==null?void 0:y.coin_type,b==null?void 0:b.displayCoinAmountA,"--"),v=o((w=s==null?void 0:s.displayTokenB)==null?void 0:w.coin_type,b==null?void 0:b.displayCoinAmountB,"--");return x=="--"||_=="--"||v=="--"?"--":E(x).plus(_).plus(v).toString()},"0")},[t,(S=Object.values(n))==null?void 0:S.length,l,r==null?void 0:r.address]),[c,m]=A.useState(""),h=A.useMemo(()=>{var a,T;return((T=(a=d==null?void 0:d[s==null?void 0:s.poolAddress])==null?void 0:a.list)==null?void 0:T.filter(x=>x.posType!=="burn").sort((x,i)=>Number(i.liquidity)-Number(x.liquidity)))||[]},[s==null?void 0:s.poolAddress,d]);return A.useEffect(()=>{const j=h==null?void 0:h.filter(a=>a.posType=="farms");m(j==null?void 0:j.length.toString())},[h]),e.jsx(e.Fragment,{children:r!=null&&r.address?e.jsxs(R,{align:"flex-end",children:[e.jsx(M,{isLoaded:!!u,children:e.jsx(p,{textColor:"text_caption",fontWeight:"500",textAlign:"right",lineHeight:"1",children:$(u,2)})}),Number(c)>0&&e.jsx(M,{isLoaded:!!u,children:e.jsxs(p,{fontWeight:"500",bg:"position_farms_bg",color:"position_farms_color",fontSize:"12px",borderRadius:"8px",padding:"2px 10px",lineHeight:"1",children:[c," ",Number(c)>1?"Positions":"Position"]})})]}):e.jsx(p,{textColor:"text_caption",textAlign:"right",children:"--"})})}function G({apiInfo:s,disabled:r}){const{currentAccount:o}=B(),{posBaseListGroupByPool:l}=O(),{getPositionBaseList:n}=f(),{toClaimAllPos:t,claimLoading:d}=ss(),u=async()=>{await n(o==null?void 0:o.address)},c=()=>{var m;t((m=l[s==null?void 0:s.poolAddress])==null?void 0:m.list,u)};return e.jsx(W,{onClick:m=>{K(m),c()},isLoading:d,disabled:r||d,w:{base:"64px",lg:"100px"},h:{base:"24px",lg:"32px"},borderRadius:"8px",variant:"outline",fontSize:"14px",children:"Claim"})}function as({isOpen:s,apiInfo:r,disabled:o}){return e.jsxs(V,{justify:"flex-end",gap:"20px",children:[e.jsx(G,{apiInfo:r,disabled:o}),e.jsx(W,{w:"32px",h:"90px",borderRadius:"8px",variant:"ghost",p:"0 !important",sx:{_hover:{svg:{fill:"text_caption"}}},children:e.jsx(L,{svgW:"16px",xlinkHref:"#icon-icon_arrow",variant:"gray",transition:"transform 0.5s",transform:s?"rotate(180deg)":"rotate(0deg)"})})]})}function gs({apiInfo:s,disabled:r,totalEarned:o}){const{isApp:l}=Q();return e.jsxs(V,{justify:"flex-end",children:[e.jsx(M,{isLoaded:!!o,children:e.jsx(p,{textColor:"primary_yellow",textAlign:"right",fontWeight:"500",children:$(o,2)})}),l&&e.jsx(G,{apiInfo:s,disabled:r})]})}function hs({apiInfo:s}){const r=A.useMemo(()=>{if((s==null?void 0:s.displayFarmsEffectMaxPrice)!=="âˆž")return E(1).div(s==null?void 0:s.displayFarmsEffectMaxPrice).toString()},[s==null?void 0:s.displayFarmsEffectMaxPrice]),o=A.useMemo(()=>{if(E(s==null?void 0:s.displayFarmsEffectMinPrice).gt(0))return E(1).div(s==null?void 0:s.displayFarmsEffectMinPrice).toString()},[s==null?void 0:s.displayFarmsEffectMinPrice]);return e.jsxs(R,{align:"flex-start",gap:"8px",w:{base:"100%",lg:"unset"},children:[e.jsx(U,{m:"-12px 0",children:e.jsx(ls,{poolInfo:{...s,poolAddress:s==null?void 0:s.farmsPoolAddress},symbolFontSize:"15px"})}),e.jsx(V,{maxW:"100%",display:"inline-block",w:{base:"100%",lg:"unset"},borderRadius:"12px",bg:"position_status_bg",p:"7px 12px",children:e.jsxs(R,{align:"flex-start",gap:"0px",w:{base:"100%",lg:"unset"},children:[e.jsx(p,{fontSize:"12px",color:"primary_gray",children:"Valid Range"}),e.jsx(os,{symbolEllipsesDecimals:10,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB,fontWeight:"500",priceInfo:{minPrice:C(s==null?void 0:s.displayFarmsEffectMinPrice).toString(),maxPrice:C(s==null?void 0:s.displayFarmsEffectMaxPrice).toString(),minPriceResever:C(r).toString(),maxPriceResever:C(o).toString()}})]})})]})}function us({apiInfo:s}){Y();const{getTokenAmountValue:r}=z(),{coinPriceObj:o}=H(),{currentAccount:l,onWalletModal:n}=B(),[t,d]=A.useState({}),{farmsPosRewardsDataLoading:u,farmsPosRewardsData:c,posBaseListLoading:m,posBaseListGroupByPool:h}=O(),S=A.useMemo(()=>{var a;if(!(l!=null&&l.address)||!(s!=null&&s.poolAddress))return"--";if(!m&&!u)return(((a=h[s.poolAddress])==null?void 0:a.list)||[]).reduce((x,i)=>{const _=(c[i==null?void 0:i.id]||[]).reduce((v,y)=>{if(v==="--")return"--";const w=r(y==null?void 0:y.token.coin_type,y==null?void 0:y.display_amount_owed,"--");return w==="--"?"--":F(v).plus(w).toString()},"0");return x==="--"||_==="--"?"--":F(x).plus(_).toString()},"0")},[m,c,u,o,l==null?void 0:l.address]),j=A.useMemo(()=>{var T,x;return((x=(T=h==null?void 0:h[s==null?void 0:s.poolAddress])==null?void 0:T.list)==null?void 0:x.filter(i=>i.posType!=="burn").sort((i,b)=>Number(b.liquidity)-Number(i.liquidity)))||[]},[s==null?void 0:s.poolAddress,h]);return e.jsxs(q.Fragment,{children:[e.jsxs(k,{cursor:"pointer",onClick:()=>{t[s==null?void 0:s.poolAddress]?t[s==null?void 0:s.poolAddress]=!1:t[s==null?void 0:s.poolAddress]=!0,d({...t})},sx:{td:{pb:t[s==null?void 0:s.poolAddress]?"20px !important":"16px !important"}},children:[e.jsx(g,{w:"30%",children:e.jsx(hs,{apiInfo:s})}),e.jsx(g,{textAlign:"right",children:e.jsx(p,{fontWeight:"500",textColor:"text_caption",textAlign:"right",children:s==null?void 0:s.farmsStatedTvlDisplay})}),e.jsx(g,{textAlign:"right",children:e.jsx(I,{poolInfo:s,isPosition:!0})}),e.jsx(g,{textAlign:"right",children:e.jsx(is,{apiInfo:s})}),e.jsx(g,{textAlign:"right",children:e.jsx(cs,{apiInfo:s})}),e.jsx(g,{textAlign:"right",children:e.jsx(gs,{totalEarned:S,apiInfo:s,disabled:S=="--"?!0:F(S).lte(0)})}),e.jsx(g,{textAlign:"right",children:e.jsx(as,{isOpen:t[s==null?void 0:s.poolAddress],apiInfo:s,disabled:S=="--"?!0:F(S).lte(0)})})]}),!t[s==null?void 0:s.poolAddress]&&e.jsx(k,{h:"16px"}),e.jsx(k,{position:"relative",top:"-20px",left:"0px",sx:{td:{p:"0 !important",bg:"transparent !important",border:"none !important",_first:{borderRadius:" 16px !important"},_last:{borderRadius:"0 0 16px 0 !important"}},_hover:{bg:"transparent !important",td:{bg:"transparent !important"}}},children:t[s==null?void 0:s.poolAddress]&&e.jsx(g,{colSpan:7,children:e.jsx(ms,{expendList:j,apiInfo:s})})})]},s==null?void 0:s.poolAddress)}const ms=({expendList:s,apiInfo:r})=>{const o=Y(),{currentAccount:l,onWalletModal:n}=B();return e.jsxs(X,{overflow:"hidden",bg:{base:"bg_fifth",lg:"bg_secondary"},p:{base:"0px",lg:"16px"},borderTop:{lg:"none"},borderRadius:{base:"8px",lg:" 0 0 16px 16px "},children:[e.jsx(R,{overflow:"auto",h:l!=null&&l.address&&s&&(s==null?void 0:s.length)>2?"250px":"unset",children:l!=null&&l.address?(s==null?void 0:s.length)==0?e.jsx(N,{type:"nodata",text:"No Position Found",p:{base:"16px",lg:"20px"},border:{base:"none",lg:"1px solid"},borderColor:"border !important",borderRadius:{base:"8px",lg:"12px"},children:e.jsxs(R,{gap:"4px",mt:"-4px",children:[e.jsx(p,{fontSize:"12px",w:{base:"100%",lg:"380px"},lineHeight:{base:"16px",lg:"unset"},textAlign:"center",children:"Stake liquidity position to earn farming rewards. To get the position for this pool, you should provide liquidity to this pool first."}),e.jsx(W,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"36px",fontSize:"12px",onClick:()=>o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`),children:"Create a Position"})]})}):s==null?void 0:s.map((t,d)=>e.jsx(q.Fragment,{children:e.jsx(es,{positionInfo:t,apiInfo:r})},d)):e.jsx(N,{type:"nowallet",onboard:()=>{n(!0)}})}),(s==null?void 0:s.length)>0&&(l==null?void 0:l.address)&&e.jsx(Z,{pb:{base:"12px",lg:"0"},children:e.jsx(W,{mt:{base:"12px",lg:"16px"},fontSize:"14px",onClick:t=>{o(`/liquidity?poolAddress=${r==null?void 0:r.poolAddress}`)},h:"32px",p:"0 16px",borderRadius:"8px",variant:"outline",children:"+ Create a position"})})]})};function vs({dataList:s,showSkeletonLoading:r,currTabLabel:o}){const{currentAccount:l,onWalletModal:n}=B();return e.jsxs(ds,{variant:"simple_list",w:"100%",children:[e.jsx(xs,{children:e.jsxs(k,{children:[e.jsx(P,{children:"Pools"}),e.jsx(P,{textAlign:"right",children:"Staked TVL"}),e.jsx(P,{textAlign:"right",children:"APR"}),e.jsx(P,{textAlign:"right",children:"Rewards / day"}),e.jsx(P,{textAlign:"right",children:"Your Staked"}),e.jsx(P,{textAlign:"right",children:"Your Earned"}),e.jsx(P,{textAlign:"right",children:"Actions"})]})}),e.jsx(ns,{children:o=="Your Farms"&&!(l!=null&&l.address)?e.jsx(k,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(g,{colSpan:7,w:"100%",children:e.jsx(N,{type:"nowallet",onboard:()=>{n(!0)}})})}):r?e.jsx(js,{itemList:[1,2,3],skeletonNum:7,skeletonW:["200px","110px","100px","100px","100px","100px","100px"]}):s.length===0?e.jsx(k,{sx:{td:{bg:"none !important",p:"0 !important",border:"none !important"}},children:e.jsx(g,{colSpan:7,w:"100%",children:e.jsx(N,{type:"nodata",text:"No farms found"})})}):s.map(t=>e.jsx(us,{apiInfo:t},t.poolAddress))})]})}function js({itemList:s,skeletonNum:r,skeletonW:o,rowStyle:l}){const n=(t,d)=>Array.from({length:t}).map((u,c)=>e.jsx(g,{textAlign:"right",children:e.jsx(D,{justify:c==0?"flex-start":"flex-end",children:e.jsx(M,{w:d?d[c]:"200px"})})},c));return s.map(t=>e.jsxs(q.Fragment,{children:[e.jsx(k,{h:"90px",...l,children:n(r,o)}),e.jsx(k,{h:"16px"})]},t))}export{ms as F,is as R,cs as S,gs as T,hs as V,vs as a,js as b};
