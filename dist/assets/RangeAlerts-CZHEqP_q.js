import{aE as E,a1 as N,r,j as e,H as p,V as C,T as g,$ as H}from"./index-4FRhoTJs.js";import{a as x,u as k}from"./useNotifiSubscription-BO9J8MLy.js";import{c as D}from"./usePositionList-CCf99szq.js";import{S as L}from"./switch-B_2pSL7K.js";const T="/assets/bg_alerts@2x-BsIoiXpE.png";function q({subscriptionSource:o,title:d="Range Alerts",description:S="Receive alerts via Telegram, SMS, or email when this position goes out of range.",wrapStyle:f={}}){const{getPositionNotifiStatus:h}=x(),{isChecked:u,setIsChecked:s,notifiAuthenticated:m,notifiSourceGroups:b,setIsShowNotifi:w,notifiSubscriptionLoading:n,notifiStatus:c}=E(),{currentAccount:a}=N(),{notifiUnSubscription:R,notifiSubscription:j}=k(),{currentPosBaseInfo:i}=D();console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:29 ~ currentPosBaseInfo:",i),r.useEffect(()=>{if(console.log("ðŸš€ðŸš€ðŸš€ ~ file: RangeAlerts.tsx:42 ~ notifiSubscriptionLoading:",n),a!=null&&a.address&&o=="PositionDetail"&&i&&c=="authenticated"&&!n){const{isSubscription:t}=h(i.posId,String(i.index));s(t)}},[a,o,i,m,b,n]);const{createNotifiSubscriptionVerify:A}=x(),y=async t=>{if(s(t),console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:46 ~ changeSwitch ~ checked:",t),t){const l=await A();if(console.log("ðŸš€ðŸš€ðŸš€ ~ RangeAlerts.tsx:49 ~ changeSwitch ~ canSubscription:",l),!l)return s(!1),!1}if(o=="AddLiquidity")s(t);else if(o=="PositionDetail")if(console.log("ðŸš€ðŸš€ðŸš€ ~ changeSwitch ~ checked:",t),t){const l={subscriptionSource:"PositionDetail",position:i==null?void 0:i.posId,pool:i==null?void 0:i.clmmPool,posIndex:String(i==null?void 0:i.index)};j(l)}else R(i==null?void 0:i.posId,i==null?void 0:i.clmmPool,i==null?void 0:i.index)};return r.useEffect(()=>()=>{s(!1)},[]),e.jsx(p,{w:"100%",bgImage:T,bgSize:"100% 100%",p:"16px",borderRadius:"8px",...f,children:e.jsxs(C,{w:"100%",gap:"8px",children:[e.jsxs(p,{w:"100%",justify:"space-between",children:[e.jsx(g,{color:"primary",children:d}),c=="authenticated"?e.jsx(L,{isChecked:u,disabled:n,onChange:t=>y(t.target.checked)}):e.jsx(H,{w:"112px",h:"28px",borderRadius:"8px",fontWeight:"500",fontSize:"14px",onClick:()=>w(!0),children:"Set up"})]}),e.jsx(g,{color:"primary_gray",lineHeight:"20px",textAlign:"left",children:S})]})})}export{q as R};
