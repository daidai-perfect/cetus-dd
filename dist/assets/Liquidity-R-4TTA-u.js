import{a as S,j as e,T as R,H as z,V as E,C as yt,q as je,a9 as Ct,f as se,a6 as be,a7 as Oe,af as xr,p as Re,al as ur,ak as Ze,F as as,W as ls,X as ds,Y as xs,Z as us,$ as or,a0 as os,ae as ps,a5 as pr,aq as ft,o as gr,I as Kt,x as yr}from"./vendor-BowHGuwE.js";import{u as gs,S as ys}from"./usePriceImpact-CkrFlyO7.js";import{k as mr,u as hr,W as br,m as Qt,g as jr,I as Le,a as Te,e as Ve,F as Rt,X as ee,h as Lt,j as qe,c as we,d as W,Y as Yt,l as Sr,Q as vt,f as ms,P as Ar,n as mt,B as ct,U as wt,C as hs,z as at,r as bs,Z as _t,$ as pe,a0 as tt,a1 as dt,a2 as xe,w as fr,a3 as Xt,a4 as vr,K as Tt,J as lt,a5 as wr,a6 as He,v as Ee,a7 as _r,y as kt,a8 as kr}from"./index-e1XEidi2.js";import{u as te}from"./index-CyacFN6I.js";import{u as ye,P as Cr,F as Rr,V as Lr}from"./PositionItem-DwuhOnTP.js";import{u as Ge}from"./index-DoMH3iiU.js";import{H as Tr,T as Br,a as Fr,u as Mr,V as qr}from"./VolumeChart-BxeW5mgu.js";import{N as De}from"./NoData-DwPvHKvw.js";import{A as zr}from"./CopyButton-Crdrb9Q7.js";import{T as Er}from"./TvlChart-DfdF7cix.js";import{u as Wr}from"./useClaimPosition-CSWV6EgR.js";import{H as _e}from"./HTextLabelBox-CvIaVfhD.js";import{T as Hr}from"./TooltipIcon-CI5e9FmO.js";import{A as js}from"./SingleTokenInfo-CNJTTpm6.js";import{u as Ss,b as $r,c as Bt,d as Ur}from"./usePositionList-BSr3H_3U.js";import{u as Nr}from"./useRpcListener-Y0NG3OgV.js";import{A as Dr}from"./index-DbS8Vfja.js";import{S as st,u as Be,a as ht,L as As}from"./LiquidityRangeChart-D8jB3PSw.js";import{u as Fe,d as fs,Z as Ft,R as Or,a as vs,b as ws,c as Vr,e as _s,f as ks,g as Cs}from"./RemoveBlock-DwFmwqhA.js";import{T as Jt}from"./TradeConfirmAmountInfo-DuoopNpF.js";import{D as Mt,W as Rs}from"./DepositRatio-u0zqHxDT.js";import{T as qt}from"./TotalAmount-DVsgoza7.js";import{P as Gr}from"./PositionStatus-CPOe2ttp.js";import{u as Zr,a as Kr}from"./useTransaction-DL_fEFz9.js";import{u as Ls}from"./global-pbKpyHQ5.js";import{f as rt,i as We}from"./index-Bd_wzV_x.js";import{c as Qr,g as xt,a as ut,u as Yr}from"./useGetPoolList-B2ORIZrR.js";import{u as Ts}from"./useAccountBalance-CQ_1E3vK.js";import{u as ot}from"./useTokenBalance-C1ErudLG.js";import{u as Bs,m as St,S as Pt,a as Xr}from"./SelectTokenAndFeeConfirm-DqJdcrEf.js";import{u as Jr}from"./useNotifiSubscription-B7P936L_.js";import{u as Pr}from"./usePosAdd-YlBkUJFr.js";import{P as It}from"./PriceInput-DodkwYMS.js";import{u as Ir}from"./VaultsAction-B3gDe-xN.js";import{u as ei,V as ti}from"./VaultsAprBlock-Bc81YXKl.js";import{E as pt}from"./ErrorTips-wuIlG_Zp.js";import{T as Fs}from"./TradeInputGroup-BtbHDOAk.js";import{g as si}from"./liquidity-D18f_-Tb.js";import{d as es,F as ri}from"./FeeTierSelect-TzvTtFsm.js";import{u as Ms}from"./useToken-BdoGjpkY.js";import{a as ii,u as ni}from"./useFavoritePool-CxL2tEcr.js";import{u as ci}from"./swapWidget-DABP4-ZR.js";import{u as ai}from"./swapWidgetConfig-BuAQA3HH.js";import{B as li}from"./BackButton-BplRXApC.js";import{R as di}from"./RefreshButton-CTjxujAC.js";import{C as xi}from"./CurrentPrice-DkDamvrT.js";import{W as ui}from"./WarningTokenTipModal-BKz04F1q.js";import"./useSwapHelper-DGtv7AcY.js";import"./useInterval-BcJtT0it.js";import"./PoweredByHaedal-uLEk4Xbu.js";import"./VTextLabelBox-BoCr-NCb.js";import"./TableSortTh-DOfNk0r1.js";import"./ExpendItem-8PsxE0uW.js";import"./msafe-oYBkW7LJ.js";import"./RangeValue-B8ewTlpa.js";import"./debounce-0tBm08Ev.js";import"./index-V0MTi46y.js";import"./Pagination-BxqjQM-y.js";import"./useWrapPoolData-LRA5IL-V.js";import"./EmptyTooltip-CFu1wPAJ.js";import"./_getAllKeysIn-Bf-IdNzC.js";import"./YAxis-BS5o0Tew.js";import"./generateCategoricalChart-B9bRpXV3.js";import"./linear-DYpwdEgO.js";import"./usePreviousValue-ChnvxeJQ.js";import"./ActionButton-C5BCNAnJ.js";import"./FreshProgressV2-DW_9q63E.js";import"./useTrack-BvX6_ElJ.js";import"./useSigner-BuuzyvGs.js";import"./index-1bbGZ6Zt.js";import"./CheckBox-1fq3nOvb.js";import"./Loading-9Flk9u0a.js";import"./useNotifiAlerts-Pp7k90wP.js";import"./useXCetusHelper-S_5i1GLx.js";import"./InputBox-DcOfvTu8.js";import"./useFindBestRouting-2W0YsXXg.js";import"./useDocumentSize-BkQqV9EZ.js";var Ce=(t=>(t.add="add_liquidity_event",t.remove="remove_liquidity_event",t.swap="swap_event",t))(Ce||{});function oi(){const t=mr("clmm"),{fetchByApi:s}=hr();return{getTransactionsHistory:async g=>{try{const x=await s(br,"GET",g);if(console.log(x,"getTransactionsHistory"),x)return x;throw new Error("no data")}catch(x){console.error(x,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(g,x)=>{try{const l=await t.Pool.getPoolTransactionList({pool_id:g,pagination_args:x,full_rpc_url:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(l,"getTransactionsHistoryBySDK"),l)return l;throw new Error("no data")}catch(l){console.error(l,"getTransactionsHistoryBySDK ~ error")}}}}function pi(){const{getTransactionsHistoryBySDK:s}=oi(),[r,c]=S.useState(!0),[g,x]=S.useState([]),[l,f]=S.useState(1),[i,u]=S.useState(),[b,a]=S.useState(!0),{apiPoolInfo:o,manualRefresh:p,setManualRefresh:k}=te(),{poolAddress:F}=ye();S.useEffect(()=>{x([]),f(1),u(void 0),a(!0)},[F]),S.useEffect(()=>{p&&(x([]),f(1),u(void 0),a(!0),y({cursor:void 0,limit:10}))},[F,p]);const y=async h=>{var v;try{if(!b)return;if(F){c(!0);const n=await s(F,{...h});if(console.log("ðŸš€ ~ fetchData ~ result:",n),n){const d=(v=n==null?void 0:n.data)==null?void 0:v.map(A=>{var L,T;const j=A==null?void 0:A.parsed_json,_=j!=null&&j.amount_a||j!=null&&j.atob?o==null?void 0:o.tokenA:o==null?void 0:o.tokenB,w=j!=null&&j.amount_b||j!=null&&j.atob?o==null?void 0:o.tokenB:o==null?void 0:o.tokenA;return{...A,type:(L=A.type)!=null&&L.includes("Add")?Ce.add:(T=A.type)!=null&&T.includes("Remove")?Ce.remove:Ce.swap,items:[{amount:Qt(j!=null&&j.amount_a?j==null?void 0:j.amount_a:j==null?void 0:j.amount_in,_==null?void 0:_.decimals).toString(),address:_==null?void 0:_.coin_type,url:_==null?void 0:_.logo_url,symbol:_==null?void 0:_.symbol},{amount:Qt(j!=null&&j.amount_b?j==null?void 0:j.amount_b:j==null?void 0:j.amount_out,w==null?void 0:w.decimals).toString(),address:w==null?void 0:w.coin_type,url:w==null?void 0:w.logo_url,symbol:w==null?void 0:w.symbol}]}});console.log("ðŸš€ ~ const_data=result?.data?.map ~ _data:",d),h!=null&&h.cursor?x(A=>[...A,...d||[]]):x(d||[]),u(n==null?void 0:n.next_cursor),a(n==null?void 0:n.has_next_page),c(!1)}}}catch(n){console.log(n,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ge(()=>{y({cursor:i,limit:10})},[l,F],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:g,apiPoolInfo:o,currentPage:l,onCurrentPageChange:()=>{f(h=>h+1)},hasNextPage:b}}const it={[Ce.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[Ce.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[Ce.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},gi=({type:t})=>{var s,r,c,g;return e.jsxs(z,{children:[e.jsx(Le,{xlinkHref:(s=it[t])==null?void 0:s.icon,svgFill:(r=it[t])==null?void 0:r.color,svgHover:(c=it[t])==null?void 0:c.color}),e.jsx(R,{color:"text_caption",children:(g=it[t])==null?void 0:g.title})]})},yi=({items:t,type:s,isReverse:r})=>{var g,x;const{isApp:c}=Te();return t?s===Ce.swap?c?e.jsxs(E,{align:"flex-end",gap:"8px",children:[e.jsx(ze,{item:t==null?void 0:t[0]}),e.jsxs(z,{justify:"flex-end",children:[e.jsx(Le,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(ze,{item:t==null?void 0:t[1]})]})]}):e.jsxs(z,{justify:"flex-end",gap:"8px",children:[e.jsx(ze,{item:t==null?void 0:t[0]}),e.jsx(Le,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),e.jsx(ze,{item:t==null?void 0:t[1]})]}):c?e.jsx(E,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(g=t==null?void 0:t.filter(l=>!!+l.amount))==null?void 0:g.map(l=>e.jsx(ze,{item:l},l==null?void 0:l.address))}):e.jsx(z,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(x=t==null?void 0:t.filter(l=>!!+l.amount))==null?void 0:x.map(l=>e.jsx(ze,{item:l},l==null?void 0:l.address))}):null},ze=({item:t})=>e.jsxs(z,{gap:"4px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.url,w:"20px",h:"20px"}),e.jsx(R,{color:"text_caption",children:Rt(t==null?void 0:t.amount)}),e.jsx(R,{children:ee(t==null?void 0:t.symbol,10)})]}),ts=(t,s=!1)=>[{title:e.jsx(R,{children:"Event"}),key:"type",render:({type:r})=>e.jsx(gi,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(R,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>e.jsx(yi,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(R,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>e.jsx(zr,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(t(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:e.jsx(R,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>e.jsx(R,{color:"text_caption",children:jr(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function mi(){const{getExplorerUrl:t}=Lt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:g,onCurrentPageChange:x,hasNextPage:l}=pi(),{isApp:f}=Te();return e.jsxs(E,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(R,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?e.jsx(De,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):f?e.jsx(Tr,{columns:ts(t,c==null?void 0:c.isReverse),dataSource:r,loading:s&&g===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(i,u)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")}}):e.jsx(Br,{columns:ts(t,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&g===1,onRowClick:i=>{window.open(t(i==null?void 0:i.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),l&&e.jsx(yt,{mt:{base:"40px",lg:"20px"},children:e.jsx(je,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:x,children:s?e.jsx(Ct,{size:"sm",color:"text_caption"}):"Load More"})})]})}var zt=(t=>(t.volume="Volume",t.tvl="TVL",t.fees="Fees",t))(zt||{}),qs=(t=>(t.volume="vol",t.tvl="tvl",t.fees="fee",t))(qs||{}),zs=(t=>(t.d="D",t.w="W",t.m="M",t))(zs||{}),Es=(t=>(t.d="day",t.w="wek",t.m="mon",t))(Es||{});const hi={D:40,W:30,M:20};function bi(){const[t,s]=S.useState("Volume"),[r,c]=S.useState("D"),[g,x]=S.useState([]),{apiPoolInfo:l}=te(),[f,i]=S.useState(!0),[u,b]=S.useState(null),{getHistogramData:a}=Fr(),{poolAddress:o}=ye(),{getHoverTime:p,time:k}=Mr();S.useLayoutEffect(()=>{x([]),s("Volume"),c("D"),b(null)},[o]);const F=async()=>{if(o)try{i(!0);const d=await a({date_type:Es[r.toLowerCase()],type:qs[t.toLowerCase()],limit:hi[r],address:o});d&&d.length&&x(d)}catch(d){throw console.error(d,"res-fetchAnalyticsData"),d}finally{i(!1)}};S.useEffect(()=>{F()},[o,t,r]),S.useEffect(()=>{u!=null&&u.date&&p(u==null?void 0:u.date,r)},[u==null?void 0:u.date,r]);const y=d=>{s(d.label),d.label!==t&&x([])},m=d=>{c(d.label),d.label!==r&&x([])},h=S.useMemo(()=>{if(t==="Volume")return{value:l==null?void 0:l.volume24Display,title:"Volume (24H)"};if(t==="TVL")return{value:l==null?void 0:l.tvlDisplay,title:"TVL"};if(t==="Fees")return{value:l==null?void 0:l.fees24Display,title:"Fees (24H)"}},[t,l==null?void 0:l.volume24Display,l==null?void 0:l.tvlDisplay,l==null?void 0:l.fees24Display]),v=Object.values(zt).map(d=>({label:d})),n=Object.values(zs).map(d=>({label:d}));return{handleChartTabChange:y,handleDateTabChange:m,defaultDisplay:h,chartsTabs:v,dateTypes:n,chartLoading:f,analyticsData:g,hoverData:u,setHoverData:b,currentChartTab:t,currentDateType:r,time:k}}function ji(){const{isApp:t}=Te(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:g,dateTypes:x,chartLoading:l,analyticsData:f,hoverData:i,setHoverData:u,currentChartTab:b,currentDateType:a,time:o}=bi();return e.jsxs(E,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[e.jsxs(z,{w:"100%",justify:{base:"center",lg:"space-between"},children:[e.jsx(qe,{type:"outlineTab",tabList:g,currentTab:b,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!t&&e.jsx(qe,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsxs(E,{w:"100%",align:"flex-start",children:[e.jsx(R,{color:"text_caption",fontSize:"24px",children:(i==null?void 0:i.num)!==void 0&&i!==null?W(Yt(i.num)).gte("0.01")||W(Yt(i.num)).equals("0")?`$${we(i==null?void 0:i.num,2)}`:"<$0.01":c==null?void 0:c.value}),e.jsx(R,{children:i!=null&&i.date?o:c==null?void 0:c.title}),t&&e.jsx(qe,{type:"outlineTab",tabList:x,currentTab:a,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),e.jsx(se,{w:"100%",h:"340px",mt:"20px",children:e.jsxs(se,{w:"100%",h:"100%",position:"relative",children:[l&&e.jsx(se,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:e.jsx(Ct,{})}),b===zt.tvl?e.jsx(Er,{data:f,onChangeValue:p=>u(p)}):e.jsx(qr,{data:f,onChangeValue:p=>u(p),pageFrom:"pools"})]})})]})}const Si=(t,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{t(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{t(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{t(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{t(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{t(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{t(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{t(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{t(()=>({tvlLoading:r}))},resetTvlInfo:()=>{t(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),bt=Sr(Si);function Ai(){const{getBurnPositionAmountByPool:t}=Wr(),{apiPoolInfo:s,contractPoolInfo:r}=te(),[c,g]=S.useState("0"),[x,l]=S.useState("0"),[f,i]=S.useState("0"),[u,b]=S.useState("0"),[a,o]=S.useState(!1),{poolAddress:p}=ye(),{tokenAPrice:k,tokenBPrice:F}=bt(),y=async(m,h)=>{try{o(!0),console.log("ðŸš€ðŸš€ðŸš€ ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:v,totalB:n}=await t(m,h);g(v),l(n),k&&i(W(v).mul(k==null?void 0:k.price).toString()),F&&b(W(n).mul(F==null?void 0:F.price).toString())}catch(v){console.log("ðŸš€ðŸš€ðŸš€  ~ getBurnAmount ~ error:",v)}finally{o(!1)}};return Ge(()=>{s&&(r!=null&&r.current_sqrt_price)&&y(s,r==null?void 0:r.current_sqrt_price)},[p,r==null?void 0:r.current_sqrt_price,k==null?void 0:k.price,F==null?void 0:F.price],{wait:500}),{burnAmountA:c,burnAmountB:x,burnAmountAUSD:f,burnAmountBUSD:u,loading:a}}function fi(){const{apiPoolInfo:t}=te(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:g,loading:x}=Ai();return W(s).gt(0)||W(r).gt(0)?e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[e.jsxs(z,{children:[e.jsx(R,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),e.jsx(Hr,{tooltipCon:"The following liquidity has been permanently locked in the pool. Please note that LP locking could not eliminate all the risks of a token, especially when the token issuer holds a significant amount of the token."})]}),e.jsxs(be,{gap:"16px",flexDir:{base:t!=null&&t.isReverse?"column-reverse":"column",lg:t!=null&&t.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[e.jsx(ss,{token:t==null?void 0:t.tokenA,amount:s,amountUSD:c,loading:x}),e.jsx(ss,{token:t==null?void 0:t.tokenB,amount:r,amountUSD:g,loading:x})]})]}):null}const ss=({token:t,amount:s,amountUSD:r,loading:c})=>e.jsxs(E,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px"}),e.jsxs(E,{align:"flex-start",gap:"4px",children:[e.jsx(R,{color:"text_caption",fontSize:"16px",children:ee(t==null?void 0:t.symbol,10)}),e.jsx(R,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Rt(vt(s,t==null?void 0:t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:W(r).gt("0")?`$${ms(vt(r,t==null?void 0:t.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function vi(){const{tokenAAmountUSD:t,totalAmountUSD:s}=bt(),r=S.useMemo(()=>{if(t&&s&&t!=="--"&&s!=="--"){const g=Ar(W(t).div(s).mul(100).toString(),2);return g==="NaN"?"--":g}return"--"},[t,s]),c=S.useMemo(()=>r&&r!=="--"?W(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const nt=t=>t==="--"?"--":`${t}%`;function wi(){var a,o,p,k,F,y;const{apiPoolInfo:t,contractPoolInfo:s}=te(),{getExplorerUrl:r}=Lt(),{poolAddress:c}=ye(),{tokenAAmount:g,tokenBAmount:x,tokenAAmountUSD:l,tokenBAmountUSD:f,tvlLoading:i}=bt(),{tokenARatio:u,tokenBRatio:b}=vi();return e.jsxs(E,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[e.jsxs(E,{gap:"20px",w:"100%",children:[e.jsx(z,{w:"100%",justify:"space-between",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),e.jsxs(xr,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[e.jsx(_e,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:e.jsx(js,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(s==null?void 0:s.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||t!=null&&t.index?`#${(s==null?void 0:s.index)||(t==null?void 0:t.index)}`:"--",valueStyle:{fontSize:"14px"}}),e.jsx(_e,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${t==null?void 0:t.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),e.jsxs(E,{gap:"20px",w:"100%",children:[e.jsx(z,{justify:"flex-start",w:"100%",children:e.jsx(Oe,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),e.jsxs(E,{gap:"16px",w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ve,{imageUrl:(a=t==null?void 0:t.displayTokenA)==null?void 0:a.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenA?(o=t==null?void 0:t.displayTokenA)==null?void 0:o.coin_type:""}),e.jsxs(E,{align:"flex-start",gap:"4px",children:[e.jsx(R,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:ee((p=t==null?void 0:t.displayTokenA)==null?void 0:p.symbol,10)}),i?e.jsx(Re,{h:"12px",w:"46px"}):e.jsx(R,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(b):nt(u)})]})]}),e.jsx(se,{w:"200px",children:e.jsx(ur,{value:Number(t!=null&&t.isReverse?b:u),size:"xs",h:"4px",borderRadius:"4px",bg:[u,b].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[u,b].includes("--")?"background":"primary"}}})}),e.jsxs(z,{gap:"12px",children:[e.jsxs(E,{align:"flex-end",gap:"4px",children:[e.jsx(R,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:ee((k=t==null?void 0:t.displayTokenB)==null?void 0:k.symbol,10)}),i?e.jsx(Re,{h:"12px",w:"46px"}):e.jsx(R,{fontSize:"12px",fontWeight:"500",children:t!=null&&t.isReverse?nt(u):nt(b)})]}),e.jsx(Ve,{imageUrl:(F=t==null?void 0:t.displayTokenB)==null?void 0:F.logo_url,w:"28px",h:"28px",coinType:t!=null&&t.displayTokenB?(y=t==null?void 0:t.displayTokenB)==null?void 0:y.coin_type:""})]})]}),e.jsxs(E,{w:"100%",flexDir:t!=null&&t.isReverse?"column-reverse":"column",gap:"16px",children:[e.jsx(rs,{loading:i,token:t==null?void 0:t.tokenA,amount:g,amountUSD:l}),e.jsx(rs,{loading:i,token:t==null?void 0:t.tokenB,amount:x,amountUSD:f})]})]})]})]})}const rs=({token:t,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:g}=Lt();return t?e.jsxs(E,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Ve,{imageUrl:t==null?void 0:t.logo_url,w:"28px",h:"28px",coinType:t?t==null?void 0:t.coin_type:""}),e.jsxs(E,{align:"flex-start",gap:"4px",children:[e.jsx(R,{color:"text_caption",fontSize:"16px",children:ee(t==null?void 0:t.symbol,10)}),e.jsx(R,{fontSize:"12px",children:t==null?void 0:t.name})]})]}),e.jsx(js,{address:(t==null?void 0:t.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(g(t==null?void 0:t.coin_type,"coin"))})]}),e.jsx(_e,{label:"Amount",labelStyle:{fontSize:"14px"},value:Rt(vt(s||"0",t.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),e.jsx(_e,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${we(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function _i(){return e.jsxs(E,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[e.jsx(ji,{}),e.jsx(wi,{})]}),e.jsx(fi,{}),e.jsx(mi,{})]})}function ki(){const{posBaseListLoading:t,posBaseListGroupByPool:s}=Ss(),{manualRefresh:r}=te(),{currentAccount:c,onWalletModal:g}=mt(),{getPositionBaseList:x,getPosRelatedData:l}=$r(),[f,i]=S.useState(""),{poolAddress:u}=ye(),b=async o=>{const p=await x(o);Array.isArray(p)&&l(p),typeof p=="string"&&i(p)};return S.useEffect(()=>{c!=null&&c.address&&b(c==null?void 0:c.address)},[c==null?void 0:c.address]),S.useEffect(()=>{r&&(c!=null&&c.address)&&b(c==null?void 0:c.address)},[r]),Nr({onRpcChange:()=>{c!=null&&c.address&&b(c==null?void 0:c.address)}}),{data:S.useMemo(()=>{if(u){const o=s[u.toLowerCase()||""];return o?o==null?void 0:o.list:[]}return[]},[u,JSON.stringify(s)]),rpcNodeErrorStr:f,posBaseListLoading:t,currentAccount:c,onWalletModal:g}}function Ci({priceDirect:t}){const s=Ze(),{apiPoolInfo:r}=te(),{currentAccount:c,posBaseListLoading:g,data:x,rpcNodeErrorStr:l,onWalletModal:f}=ki();return e.jsx(E,{minW:{base:"100%",lg:"1024px"},children:c!=null&&c.address?g?[{}].map((i,u)=>e.jsxs(ct,{borderRadius:"16px",children:[e.jsx(Re,{height:"4",width:"100%",mb:"16px"}),e.jsx(E,{w:"100%",children:[...Array(2)].map((b,a)=>e.jsx(ct,{bg:"position_bg",borderRadius:"16px",p:"28px 16px",children:e.jsx(as,{w:"100%",justify:"space-between",children:[...Array(5)].map((o,p)=>e.jsx(Re,{height:"4",width:"100px"},p))})},a))})]},u)):x&&(x==null?void 0:x.length)>0?e.jsx(ct,{borderRadius:"16px",children:e.jsx(Cr,{poolInfo:{list:x},priceDirect:t})}):l?e.jsx(De,{type:"nodata",text:l}):e.jsx(De,{type:"nodata",text:"You don't have positions for this pool",children:e.jsx(je,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>s(`/liquidity?tab=deposit&poolAddress=${r==null?void 0:r.poolAddress}`),children:"Create Position"})}):e.jsx(De,{type:"nowallet",onboard:()=>f(!0)})})}function Ri({apiPoolInfo:t,apiPoolInfoLoading:s,tvlLoading:r,totalTvl:c}){return e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[e.jsx(st,{label:"Pool APR",value:e.jsx(Dr,{poolInfo:t,placement:"bottom",children:e.jsxs(z,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[e.jsx(R,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:t!=null&&t.farmingAprDisplay||t!=null&&t.miningAprList&&(t==null?void 0:t.miningAprList.length)>0?"help":"text",children:t==null?void 0:t.feeAndMiningAprDisplay}),(t==null?void 0:t.haveFarming)&&e.jsxs(R,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",t==null?void 0:t.farmingAprDisplay]})]})})}),e.jsx(st,{label:"TVL",value:c&&c!=="--"?`$${we(c,2)}`:"--",loading:s||r}),e.jsx(st,{label:"Volume (24H)",value:(t==null?void 0:t.volume24Display)||"",loading:s}),e.jsx(st,{label:"Fees (24H)",value:(t==null?void 0:t.fees24Display)||"",loading:s})]})}function Li(t){var _;const{onClose:s,onSubmit:r,data:{feeTier:c,zapData:g}}=t,{fromToken:x,toToken:l,fromAmount:f,toAmount:i,totalAmount:u,percentMap:b,fromTokenLock:a,toTokenLock:o}=Fe(),{lowerTickData:p,upperTickData:k}=Be(),{currentPriceData:F,apiPoolInfo:y}=te(),{setIsChecked:m}=wt(),[h,v]=S.useState(!0),n=S.useMemo(()=>{var w;return((w=y==null?void 0:y.tokenA)==null?void 0:w.coin_type)===(x==null?void 0:x.coin_type)?!h:!!h},[y,x,l,h]),d=S.useMemo(()=>h?`${ee(l==null?void 0:l.symbol,10)} per ${ee(x==null?void 0:x.symbol,10)}`:`${ee(x==null?void 0:x.symbol,10)} per ${ee(l==null?void 0:l.symbol)}`,[h,x==null?void 0:x.symbol,l==null?void 0:l.symbol]),A=fs(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:j}=wt();return e.jsxs(ls,{isOpen:!0,onClose:()=>{s(),m(!1)},isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(xs,{children:[e.jsx(us,{children:e.jsx(Oe,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),e.jsx(or,{}),e.jsx(os,{textAlign:"center",p:"0px",children:e.jsxs(E,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[e.jsxs(z,{w:"100%",justifyContent:"space-between",h:"40px",children:[e.jsxs(z,{children:[e.jsx(hs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:l==null?void 0:l.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:l==null?void 0:l.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),e.jsx(R,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${ee(x==null?void 0:x.symbol,10)} - ${ee(l==null?void 0:l.symbol,10)}`})]}),e.jsx(ct,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:e.jsxs(z,{gap:"12px",children:[e.jsx(R,{whiteSpace:"nowrap",children:"Fee Tier"}),e.jsx(R,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),g?e.jsx(Jt,{coinA:{amount:g==null?void 0:g.amount,...g==null?void 0:g.token}}):e.jsx(Jt,{coinA:{amount:f,...x},coinB:{amount:i,...l}}),e.jsxs(se,{w:"100%",children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(R,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),e.jsx(Gr,{isActive:!a&&!o,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),e.jsxs(E,{gap:"0",border:"1px solid",bg:"bg_secondary",borderColor:"border",borderRadius:"12px",mt:"8px",children:[e.jsxs(z,{justify:"center",h:"48px",w:"100%",gap:"4px",children:[e.jsx(R,{children:"Current Price"}),e.jsx(R,{as:"span",color:"text_caption",children:at(n?F.reverseCurrentPrice:F==null?void 0:F.currentPrice,6)}),e.jsx(R,{children:d}),e.jsx(je,{variant:"unstyled",onClick:()=>v(!h),children:e.jsx(Le,{xlinkHref:"#icon-icon_swap1"})})]}),e.jsx(se,{h:"1px",w:"calc(100% - 32px)",p:"0 12px",bg:"border"}),e.jsxs(z,{w:"100%",h:"100px",children:[e.jsx(is,{title:"Min Price",price:at(n?k==null?void 0:k.reversePrice:p==null?void 0:p.price,6),perText:d}),e.jsx(ps,{orientation:"vertical",h:"40px"}),e.jsx(is,{title:"Max Price",price:at(n?p==null?void 0:p.reversePrice:k==null?void 0:k.price,6),perText:d})]})]})]}),g?e.jsx(Ft,{action:"Deposit",inConfirmModal:!0}):e.jsxs(e.Fragment,{children:[e.jsx(Mt,{tokenA:x,tokenB:l,isReverse:(x==null?void 0:x.coin_type)!==((_=y==null?void 0:y.tokenA)==null?void 0:_.coin_type),type:"text",percentMap:b}),e.jsx(qt,{loading:!1,totalAmount:u}),!a&&!o&&!((p==null?void 0:p.price)==="0"&&(k==null?void 0:k.price)==="âˆž")&&j=="authenticated"&&e.jsx(Or,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}})]}),e.jsx(je,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:A,children:"Add Liquidity"})]})})]})]})}const is=({title:t,price:s,perText:r})=>e.jsxs(E,{flex:"1",children:[e.jsx(R,{children:t}),e.jsx(R,{color:"text_caption",children:s}),e.jsx(R,{children:r})]});function Ti(t,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:g}=Pr(),[x,l]=S.useState(!1),{currentPriceData:f,apiPoolInfo:i,contractPoolInfo:u}=te(),{getContractPoolInfo:b}=vs(),{lowerTickData:a,upperTickData:o}=Be(),{signAndExecuteTransaction:p,getTransactionStatus:k,transactionSuccess:F}=Zr(),{mevProtect:y,maxCapForGas:m,transactionMode:h,customGasPrice:v}=Ls(),{transactionConfirmation:n}=Kr(),{getCurrentPrice:d}=ws(),{fromAmount:A,setFromAmount:j,fromAmountValue:_,setFromAmountValue:w,toAmount:L,setToAmount:T,toAmountValue:H,setToAmountValue:q,byAmountIn:$,setByAmountIn:Y,isTokenA:ie,setIsTokenA:I,percentMap:ue,setPercentMap:D,isFullRange:X,setIsFullRange:K,fromToken:C,setFromToken:ne,toToken:M,setToToken:ce,totalAmount:B,setTotalAmount:N,fromTokenLock:U,setFromTokenLock:re,toTokenLock:O,setToTokenLock:Q,setTokenMaxA:J,setTokenMaxB:de,tokenMaxA:Z,tokenMaxB:Ke,autoStakePosition:$e,liquidityAmount:Qe,setLiquidityAmount:Ye,useZapIn:Me,setUseZapIn:jt,confirmModalOpen:Gs,setConfirmModalOpen:Et,nftOpen:Zs,setNftOpen:Wt,relatedPosId:Ks,setRelatedPosId:Ht}=Fe(),{getTokenAmountValue:Xe}=bs(),{getZapDepositTx:Qs,getZapDepositToastInfo:Ys,reCalculateZapData:Xs}=Vr(),{setZapAmount:Js}=_s();_t(()=>{var V,le;i&&I(((V=i==null?void 0:i.displayTokenA)==null?void 0:V.coin_type)===((le=i==null?void 0:i.tokenA)==null?void 0:le.coin_type))},[i]);const{isWhiteQuoteToken:Ps}=Bs(),{notifiSubscription:Is}=Jr(),{isChecked:$t}=wt();Ge(()=>{if(X){D({percentA:"50",percentB:"50"});return}if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&typeof(u==null?void 0:u.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&f.currentSqrtPrice){if(pe(a.tick).lte(u.current_tick_index)&&pe(o.tick).gt(u.current_tick_index)){const V=Ps(i.tokenA.coin_type)?i.tokenA:i.tokenB,le=V.coin_type===i.tokenA.coin_type,ve=r({amount:tt("1",V.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0}),ge=Qr(ve.coinAmountA,ve.coinAmountB,f==null?void 0:f.currentPrice,X);D(ge);return}if(pe(a.tick).gt(u.current_tick_index)){D({percentA:"100",percentB:"0"});return}if(pe(o.tick).lte(u.current_tick_index)){D({percentA:"0",percentB:"100"});return}}},[JSON.stringify(i),f,a==null?void 0:a.tick,o==null?void 0:o.tick,X],{wait:300});const er=({amount:V,isTokenA:le,isFullRange:ve})=>{var ge,me,Se,he;if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&Object.keys(f).length>0&&(a==null?void 0:a.tick)!==void 0&&(o==null?void 0:o.tick)!==void 0&&C&&M){let G;if(typeof(u==null?void 0:u.current_tick_index)=="number"&&pe(a==null?void 0:a.tick).lte(u==null?void 0:u.current_tick_index)&&pe(o==null?void 0:o.tick).gt(u==null?void 0:u.current_tick_index))G=r({amount:tt(V&&+V?V+"":"1",$?C==null?void 0:C.decimals:M==null?void 0:M.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:le,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0});else if(U&&!O){const ae=(M==null?void 0:M.coin_type)===((ge=i==null?void 0:i.tokenA)==null?void 0:ge.coin_type);G=r({amount:tt(V?V+"":"1",M==null?void 0:M.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else if(O&&!U){const ae=(C==null?void 0:C.coin_type)===((me=i==null?void 0:i.tokenA)==null?void 0:me.coin_type);G=r({amount:tt(V?V+"":"1",C==null?void 0:C.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:o==null?void 0:o.tick,curSqrtPrice:f.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else U&&O&&(G=le?{coinAmountA:V?V+"":"1",coinAmountB:"",tokenMaxA:V?V+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:V?V+"":"1",tokenMaxA:"",tokenMaxB:V?V+"":"1"});if(J(G==null?void 0:G.tokenMaxA),de(G==null?void 0:G.tokenMaxB),V)if(pe(V).gt("0"))if($){const ae=(M==null?void 0:M.coin_type)===((Se=i==null?void 0:i.tokenA)==null?void 0:Se.coin_type)?G==null?void 0:G.coinAmountA:G==null?void 0:G.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,V+""),Ae=Xe(M==null?void 0:M.coin_type,ae),fe=pe(oe).plus(Ae).toString();console.log(ae,oe,Ae,fe,"_totalAmountValue"),T(ae||""),w(oe),q(Ae),N(fe)}else{const ae=(C==null?void 0:C.coin_type)===((he=i==null?void 0:i.tokenA)==null?void 0:he.coin_type)?G==null?void 0:G.coinAmountA:G==null?void 0:G.coinAmountB,oe=Xe(C==null?void 0:C.coin_type,ae),Ae=Xe(M==null?void 0:M.coin_type,V+""),fe=pe(oe).plus(Ae).toString();console.log(ae,oe,Ae,fe,"_totalAmountValue"),w(oe),q(Ae),j(ae||""),N(fe)}else $?(T(""),w(""),q(""),N("")):(j(""),w(""),q(""),N(""));else j(""),T(""),w(""),q(""),N("");G&&Ye((G==null?void 0:G.liquidityAmount)||"")}};Ge(()=>{er({amount:$?A:L,isTokenA:ie,isFullRange:X})},[JSON.stringify(i),f,a==null?void 0:a.tick,o==null?void 0:o.tick,A,L,$,ie,U,O,X],{wait:300});const tr=(V,le,ve)=>{Y(le),le?j(V):T(V),I(ve!==void 0?ve:!1)},{balanceInfo:sr}=ot(C),{balanceInfo:rr}=ot(M);_t(()=>{var V,le;I($?(C==null?void 0:C.coin_type)===((V=i==null?void 0:i.tokenA)==null?void 0:V.coin_type):(M==null?void 0:M.coin_type)===((le=i==null?void 0:i.tokenA)==null?void 0:le.coin_type))},[i,$,C,M]),S.useEffect(()=>{(a==null?void 0:a.tick)===dt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(o==null?void 0:o.tick)===dt.getMaxIndex(Number((o==null?void 0:o.tickSpacing)||0))?K(!0):K(!1)},[a==null?void 0:a.tick,o==null?void 0:o.tick]),S.useEffect(()=>{(u==null?void 0:u.current_tick_index)!==void 0&&xe(a)&&xe(o)&&(pe(a==null?void 0:a.tick).gte(pe(o.tick))?(re(!0),Q(!0)):pe(a==null?void 0:a.tick).gt(u==null?void 0:u.current_tick_index)?(re(!s),Q(!!s)):pe(o.tick).lte(u==null?void 0:u.current_tick_index)?(re(!!s),Q(!s)):(re(!1),Q(!1)))},[a==null?void 0:a.tick,o==null?void 0:o.tick,u,s]);const{currentAccount:ir,onWalletModal:nr}=mt(),cr=fs(()=>{ir?Et(!0):nr(!0)},300,{leading:!0,trailing:!1}),Ut=()=>{j(""),T(""),w(""),q(""),N("")},{fetchAccountBalance:ar}=Ts(),lr=async()=>{var V,le,ve;try{let ge,me,Se;if(Me)me=Ys(),n(me),ge=await Qs(a==null?void 0:a.tick,o==null?void 0:o.tick,$e);else{const G=$?A:L,ae=$?C.decimals:M.decimals,oe=pe(G).mul(fr.pow(10,ae)).toString(),Ae=$&&(C==null?void 0:C.coin_type)===((V=i==null?void 0:i.tokenA)==null?void 0:V.coin_type)?!0:(M==null?void 0:M.coin_type)===((le=i==null?void 0:i.tokenA)==null?void 0:le.coin_type)&&!$;let fe,Je;const Pe=a.tick,Ie=o.tick,Ue=u==null?void 0:u.current_tick_index;Pe!==void 0&&Ie!==void 0&&Ue!==void 0&&(Ue>=Pe&&Ue<=Ie?(fe=Ae?oe:Z,Je=Ae?Ke:oe):Ue>Ie?(fe=0,Je=oe):Ue<Pe&&(fe=oe,Je=0));let Nt=[];if(u!=null&&u.index){const{rewarder_infos:P}=u;Nt=(P==null?void 0:P.length)>0&&(P==null?void 0:P.map(Ne=>Ne.coinAddress))||[]}const Dt={poolAddress:u==null?void 0:u.poolAddress,coinTypeA:u==null?void 0:u.coinTypeA,coinTypeB:u==null?void 0:u.coinTypeB,amountA:fe,amountB:Je,fixAmountA:Ae,lowerTick:Pe,upperTick:Ie,currentSqrtPrice:u==null?void 0:u.current_sqrt_price,rewarderCoinTypes:Nt,farmsPoolId:i==null?void 0:i.farmsPoolAddress};if(me={getShowInfo:(P,Ne)=>{const Ot="Add "+[rt(A,C==null?void 0:C.symbol),rt(L,M==null?void 0:M.symbol)].filter(Boolean).join(" and "),et={modalDescriptionText:Ot,toastTitleText:Ot};if(P==="success"){let Vt=A,Gt=L;Ne&&(Vt=Xt(Ne,C)||A,Gt=Xt(Ne,M)||L);const Zt="Add "+[rt(Vt,C==null?void 0:C.symbol),rt(Gt,M==null?void 0:M.symbol)].filter(Boolean).join(" and ");et.toastDescriptionContent=Zt,et.modalDescriptionText=Zt,et.toastTitleText="Supplied Successful"}return et}},n(me),$e){const P=await g(Dt);ge=P==null?void 0:P.tx,Se=P==null?void 0:P.msafeParams}else{const P=await c(Dt);ge=P==null?void 0:P.tx,Se=P==null?void 0:P.msafeParams}}let he=await p(ge,me,{useDevInspect:!0,useMev:y,showSuccessModal:!1,useFastMode:h==="Fast Mode",maxCapForGas:m,customGasPrice:v,msafeParams:Se});if(he){console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",he),console.log("ðŸš€ðŸš€ðŸš€ ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",$t),((ve=he==null?void 0:he.events)==null?void 0:ve.length)===0&&(he=await k(he.digest));const{posId:G,farmsPosId:ae}=vr(he);if(console.log("ðŸš€ ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:G,farmsPosId:ae}),G?(Wt(!0),Ht(ae||G)):F(me),$t){const oe={subscriptionSource:"AddLiquidity",events:he.events};Is(oe)}ar(),Ut(),Js(""),t()}else u&&b(u==null?void 0:u.poolAddress).then(G=>{Xs()})}catch(ge){console.error(ge,"handleSubmit ~ error");const me=String(ge).toLocaleLowerCase();if(me.includes("user")&&me.includes("reject")&&i!=null&&i.poolAddress){const Se=await b(i==null?void 0:i.poolAddress);Se&&d(Se==null?void 0:Se.current_sqrt_price,i)}throw ge}},dr=()=>{jt(!Me)};return S.useEffect(()=>{Ut()},[Me]),{percentMap:ue,handleAmountChange:tr,fromToken:C,setFromToken:ne,toToken:M,setToToken:ce,byAmountIn:$,setByAmountIn:Y,fromAmount:A,fromAmountValue:_,setFromAmount:j,toAmount:L,toAmountValue:H,setToAmount:T,liquidityAmount:Qe,fromBalanceInfo:sr,toBalanceInfo:rr,totalAmount:B,fromTokenLock:U,toTokenLock:O,handleAdd:cr,confirmModalOpen:Gs,setConfirmModalOpen:Et,nftOpen:Zs,setNftOpen:Wt,relatedPosId:Ks,handleSubmit:lr,useZapIn:Me,handleChangeZapIn:dr}}function Bi(){const{fromAmount:t,toAmount:s,fromToken:r,toToken:c,fromTokenLock:g,toTokenLock:x,liquidityAmount:l}=Fe(),{currentAccount:f}=mt(),{balanceInfo:i}=ot(r),{balanceInfo:u}=ot(c),b=S.useMemo(()=>{const a={text:"Add Liquidity",disabled:!1};return f!=null&&f.address?!g&&!x&&(!t||!s||t&&!+t||s&&!+s)||g&&!x&&(!s||s&&!+s)||x&&!g&&(!t||t&&!+t)?(a.text="Enter an amount",a.disabled=!0,a):t&&+t&&W(t).gt((i==null?void 0:i.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${ee(r==null?void 0:r.symbol,10)} Balance`,a):s&&+s&&W(s).gt((u==null?void 0:u.balanceFormat)||0)?(a.disabled=!0,a.text=`Insufficient ${ee(c==null?void 0:c.symbol,10)} Balance`,a):((!g&&!x&&(!t||!s)||W(l).lte("0"))&&(a.disabled=!0),a):(a.text="Connect Wallet",a.disabled=!1,a)},[f==null?void 0:f.address,t,s,i==null?void 0:i.balanceDisplay,u==null?void 0:u.balanceDisplay,r,c,g,x,l]);return{btnText:b.text,btnDisabled:b.disabled}}function Fi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="âˆž"?ms(1/(1-Number(W(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function Mi({rangeTabList:t}){var H;const{apiPoolInfo:s}=te(),{fromToken:r,toToken:c,setFromToken:g,setToToken:x,byAmountIn:l,setByAmountIn:f,setIsFarmRewardsRange:i,setAutoStakePosition:u,fromTokenLock:b,toTokenLock:a,fromAmount:o,toAmount:p,setFromAmount:k,setToAmount:F}=Fe(),{lowerTickData:y,upperTickData:m}=Be(),[h,v]=S.useState(),{handleInitTickData:n}=ht(),{getLeverage:d}=Fi();S.useEffect(()=>{var q;if(s){const $=(q=s==null?void 0:s.displayTokenA)==null?void 0:q.coin_type;v($)}},[s==null?void 0:s.poolAddress]);const A=S.useMemo(()=>{var q;return h===((q=s==null?void 0:s.tokenA)==null?void 0:q.coin_type)},[h,(H=s==null?void 0:s.tokenA)==null?void 0:H.coin_type]),j=S.useMemo(()=>{var q,$,Y,ie;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":A?`${ee((q=s==null?void 0:s.tokenB)==null?void 0:q.symbol,10)} per ${ee(($=s==null?void 0:s.tokenA)==null?void 0:$.symbol,10)}`:`${ee((Y=s==null?void 0:s.tokenA)==null?void 0:Y.symbol,10)} per ${ee((ie=s==null?void 0:s.tokenB)==null?void 0:ie.symbol,10)}`},[A,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),_=S.useMemo(()=>{const q=y==null?void 0:y.price,$=m==null?void 0:m.price;return d(q,$)},[y==null?void 0:y.price,m==null?void 0:m.price]),w=q=>{i(q.target.checked),q.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&n(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};S.useEffect(()=>{W(y==null?void 0:y.tick).eq(W(s==null?void 0:s.farmsEffectiveTickLower))&&W(m==null?void 0:m.tick).eq(W(s==null?void 0:s.farmsEffectiveTickUpper))?i(!0):i(!1)},[y==null?void 0:y.tick,m==null?void 0:m.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const L=S.useMemo(()=>(y==null?void 0:y.price)==="0"&&(m==null?void 0:m.price)==="âˆž",[y==null?void 0:y.price,m==null?void 0:m.price]),T=q=>{var $;q&&(q!=null&&q.coin_type)?v(q==null?void 0:q.coin_type):v(($=t==null?void 0:t.find(Y=>Y.key!==h))==null?void 0:$.key),g(c),x(r),f(!l),l?(F(o),k("")):(k(p),F(""))};return S.useEffect(()=>{s!=null&&s.haveFarming&&u(!(b||a))},[b,a,s==null?void 0:s.haveFarming]),S.useEffect(()=>{l&&b&&!a&&(k(""),F("")),!l&&!b&&a&&(k(""),F("")),l&&!b&&a&&F(""),!l&&b&&!a&&k(""),b&&a&&(k(""),F(""))},[b,a]),{direct:A,perText:j,handleChangeIsFarmRewardsRange:w,onReverseClick:T,leverage:_,currentRangeTab:h,isFullRange:L}}function qi({onClose:t,posId:s,tokenA:r,tokenB:c,fee:g,isReverse:x}){const l=Ze(),[f,i]=S.useState(!0),{lowerTickData:u,upperTickData:b}=Be();return S.useLayoutEffect(()=>{x&&i(!1)},[x]),e.jsxs(ls,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:t,isCentered:!0,children:[e.jsx(ds,{}),e.jsxs(xs,{w:"400px",children:[e.jsx(us,{children:e.jsxs(z,{justify:"space-between",w:"100%",children:[e.jsx(R,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),e.jsx(je,{onClick:t,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:e.jsx(Le,{xlinkHref:"#icon-icon_close"})})]})}),e.jsx(os,{children:e.jsxs(E,{gap:"36px",children:[e.jsxs(E,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[e.jsx(hs,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),e.jsxs(R,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[ee(r==null?void 0:r.symbol,10)," - ",ee(c==null?void 0:c.symbol,10)]}),e.jsxs(z,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[e.jsx(R,{fontSize:"14px",children:"Fee tier"}),e.jsx(R,{fontSize:"14px",color:"text_highlight",children:g})]})]}),e.jsxs(E,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[e.jsxs(R,{color:"text_caption",whiteSpace:"nowrap",children:[f?we(u==null?void 0:u.price,6):we(b==null?void 0:b.reversePrice,6)," -Â ",f?we(b==null?void 0:b.price,6):we(u==null?void 0:u.reversePrice,6)]}),e.jsxs(z,{children:[e.jsxs(z,{gap:"0",children:[e.jsx(R,{color:"primary_gray",children:ee(f?x?r==null?void 0:r.symbol:c==null?void 0:c.symbol:x?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),e.jsx(R,{color:"primary_gray",children:"Â perÂ "}),e.jsx(R,{color:"primary_gray",children:ee(f?x?c==null?void 0:c.symbol:r==null?void 0:r.symbol:x?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),e.jsx(Le,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:a=>{Tt(a),i(!f)}})]})]})]})}),e.jsx(pr,{p:"20px 0 0",children:e.jsx(je,{flex:"1",onClick:()=>l(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function Ws({perText:t,direct:s,minPriceData:r,maxPriceData:c,isFullRange:g=!1}){const{tickDataLoading:x}=Be(),{handleAddPrice:l,handleSubPrice:f,setTickDataBasedOnPrice:i}=ht();return e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[e.jsx(It,{title:"Min Price",perText:t,data:r,direct:s,loading:x,handleAddPrice:l,handleSubPrice:f,setTickDataBasedOnPrice:i,isFullRange:g}),e.jsx(It,{title:"Max Price",perText:t,data:c,direct:s,loading:x,handleAddPrice:l,handleSubPrice:f,setTickDataBasedOnPrice:i,isFullRange:g})]})}const Hs=({minPrice:t,maxPrice:s,perText:r,checked:c,onChange:g,loading:x})=>e.jsxs(z,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},children:[e.jsxs(z,{children:[e.jsx(Rr,{tooltip:e.jsxs(se,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool. Â ",e.jsx(se,{as:"a",color:"primary",onClick:l=>{Tt(l),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),e.jsx(R,{children:"Farm rewards range"})]}),e.jsxs(z,{children:[x?e.jsx(Re,{w:"120px",h:"14px"}):e.jsxs(R,{color:"primary_yellow",children:[t,"Â -Â ",s]}),e.jsx(R,{children:r})]})]}),e.jsx(ft,{isChecked:c,onChange:g})]}),$s=({disabled:t,checked:s,onChange:r})=>e.jsxs(z,{p:{base:"16px 8px",lg:"16px 8px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"12px",lg:"12px"},bg:"bg_eight",gap:"12px",width:"100%",children:[e.jsx(R,{lineHeight:"20px",color:"text_highlight",fontSize:"12px",children:"Automatically stake your position into the farm to enjoy higher yield."}),t?e.jsx(lt,{tooltip:e.jsxs(E,{gap:"4px",align:"flex-start",children:[e.jsx(R,{fontSize:"12px",children:"Farming rewards only available"}),e.jsx(R,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:r})}):e.jsx(ft,{isChecked:s,disabled:t,maxW:"24px",onChange:r})]}),zi=[{label:"24H",key:"day"},{label:"7D",key:"week"},{label:"30D",key:"month"}];function Us({direct:t,wrapStyle:s={}}){const{priceRangeMap:r}=Bt(),[c,g]=S.useState({type:"30D",key:"month"}),{minPriceForDate:x,maxPriceForDate:l,setMinPriceForDate:f,setMaxPriceForDate:i}=te();S.useEffect(()=>{var o,p;let b="",a="";if(xe(r)){const k=(o=r[c==null?void 0:c.key])==null?void 0:o[0],F=t?k:W(1).div(k).toString(),y=(p=r[c==null?void 0:c.key])==null?void 0:p[1],m=t?y:W(1).div(y).toString();b=we(F,6),a=we(m,6)}else b="-",a="-";f(b),i(a)},[t,c.key,r]);const{isApp:u}=Te();return e.jsxs(z,{w:"100%",justify:"space-between",...s,children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{children:[e.jsx(yt,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:e.jsx(ps,{w:"14px",border:"1px dashed"})}),e.jsxs(R,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type,"Â Price Range"]})]}),e.jsxs(R,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[t?x:l,"Â -Â ",t?l:x]})]}),e.jsx(qe,{type:"outlineTab",tabList:zi,currentTab:c,handleChangeTab:b=>{g({type:b.label,key:b.key})},isActive:(b,a)=>b.key===a.key,wrapStyle:{h:u?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:u?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function Ei(){const[t,s]=S.useState(""),r=(l,f)=>({default:{lower:l,upper:f,sort:3}}),c=l=>({"full range":{lower:dt.getMinIndex(l),upper:dt.getMaxIndex(l),sort:2}}),g=(l,f,i)=>{const u=W(i).mul(f==="unstable"?2:3).toNumber(),b=wr(Number(l),Number(i));return{custom:{lower:W(b).sub(u).toNumber(),upper:W(b).add(u).toNumber(),sort:1}}};return{getRecommendRangesList:async l=>{try{const f=l.farmsEffectTickLower&&l.farmsEffectTickUpper?r(l.farmsEffectTickLower,l.farmsEffectTickUpper):null,i=l.farmsEffectTickLower&&l.farmsEffectTickUpper?{ranges:{},type:""}:l==null?void 0:l.recommendRangesInfo;if(console.log(i,"recommendRangesResult"),i){s(i.type);const u=c(l.tickSpacing),b=g(l.currentTick,i.type,l.tickSpacing),a={...f,...i.ranges,...u,...b},o=Object.entries(a).map(([p,k])=>({key:p,...k})).sort((p,k)=>k.sort-p.sort);return xe(i.ranges)||xe(f)?{rangeList:o,error:!1}:{rangeList:o,error:!0}}else return{rangeList:[],error:!0}}catch(f){return console.error("Error in getRecommendRangesList:",f),{rangeList:[],error:!0}}},poolType:t}}const At=(t,s=!1)=>{switch(t){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Wi=t=>{switch(t){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Hi={1:"100%",2:"50%",3:"33.33%",4:"50%"};function Ns(t){const{getRecommendRangesList:s}=Ei(),[r,c]=S.useState(),{poolAddress:g,currentTick:x,tickSpacing:l,farmsEffectTickLower:f,farmsEffectTickUpper:i}=t;Te();const{handleInitTickData:u}=ht(),{apiPoolInfo:b,currentRange:a,setCurrentRange:o}=te(),{lowerTickData:p,upperTickData:k,setLowerTickData:F,setUpperTickData:y,setTickDataLoading:m,tickDataLoading:h}=Be(),{recommendRangesInfo:v}=Bt(),n=S.useMemo(()=>({...b,tickSpacing:l}),[b,l]),d=async()=>{var A,j,_;try{a||m(!0);const{rangeList:w,error:L}=await s({...t,recommendRangesInfo:v});if(c(w),L){if(o("custom"),!a&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)){const T=w.find(H=>H.key==="custom");T&&u(T==null?void 0:T.lower,T==null?void 0:T.upper,n)}}else o((A=w[0])==null?void 0:A.key),!a&&(n!=null&&n.tokenA)&&(n!=null&&n.tokenB)&&u((j=w[0])==null?void 0:j.lower,(_=w[0])==null?void 0:_.upper,n)}catch(w){console.error(w)}finally{m(!1)}};return Ge(()=>{g&&x!==void 0&&l!==void 0&&d()},[g,l,v],{wait:500}),S.useEffect(()=>{if(r&&r.length>0&&xe(p)&&xe(k)){const A=r==null?void 0:r.find(j=>W(j.lower).eq(W(p==null?void 0:p.tick))&&W(j.upper).eq(W(k==null?void 0:k.tick)));A?A.key!==a&&o(A.key):o("custom")}},[p==null?void 0:p.tick,k==null?void 0:k.tick,r]),e.jsx(e.Fragment,{children:e.jsx(as,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((A,j)=>{var _,w;return e.jsx(gr,{label:Wi(A.key),lineHeight:"1.5",placement:"top",gutter:-4,children:e.jsxs(E,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Hi[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{A.key!==a&&(o(A.key),n!=null&&n.tokenA&&(n!=null&&n.tokenB)&&u(A.lower,A.upper,n))},bg:A.key==a?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[e.jsx(Kt,{decoding:"async",display:A.key===a?"block":"none",src:`/images/${(_=At(A.key,!0))==null?void 0:_.image}`,w:"72px",h:A.key===a?"22px":"0px",fallback:e.jsx(se,{bg:"background",w:"72px",h:A.key===a?"22px":"0px",borderRadius:"4px"})}),e.jsx(Kt,{decoding:"async",display:A.key===a?"none":"block",src:`/images/${(w=At(A.key,!1))==null?void 0:w.image}`,w:"72px",h:A.key===a?"0px":"22px",fallback:e.jsx(se,{bg:"background",w:"72px",h:A.key===a?"0px":"22px",borderRadius:"4px"})}),e.jsx(R,{color:A.key==a?"primary":"primary_gray",fontSize:"12px",children:At(A.key).name})]})},A.key)})})})}function Ds(t){const[s,r]=S.useState(!1),{displayTokenA:c,displayTokenB:g,feeDisplay:x,clmmPool:l,vaultId:f,isReverse:i,category:u}=t,{isApp:b}=Te(),{vaultListObj:a}=ei(),{clearVaultsActionData:o}=Ir(),p=S.useMemo(()=>a[f],[a,f]);return S.useEffect(()=>{o()},[s]),e.jsxs(e.Fragment,{children:[e.jsxs(E,{width:b?"100%":"460px",height:"128px",backgroundImage:"/images/bg_autorebalancer@2x.png",backgroundSize:"100% 100%",padding:"12px 16px 20px",flexDirection:"column",justifyContent:"space-between",children:[e.jsxs(z,{width:"100%",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(R,{color:"primary",fontWeight:"500",children:["Join via an Auto Vault"," "]}),e.jsxs(z,{children:[e.jsx(_e,{wrapStyle:{w:"unset",gap:"6px"},label:"APY:",labelStyle:{fontSize:"14px",color:"text_highlight",fontWeight:"500"},rightValueTip:e.jsx(ti,{vaultsLstApyDisplay:p==null?void 0:p.vaultsLstApyDisplay,vaultsApyDisplay:p==null?void 0:p.vaultsApyDisplay,vaultsTotalApyDisplay:p==null?void 0:p.vaultsTotalApyDisplay,vaultsAprDisplay:p==null?void 0:p.vaultsAprDisplay,category:p==null?void 0:p.category}),value:(p==null?void 0:p.category)=="cetus"?p==null?void 0:p.vaultsTotalApyDisplay:(p==null?void 0:p.vaultsApyDisplay)||"-",valueStyle:{color:"text_highlight",h:"20px",lineHeight:"20px",fontSize:"14px",fontWeight:"500"}}),e.jsx(je,{width:"88px",height:"24px",borderRadius:"4px",fontSize:"12px",onClick:()=>r(!0),fontWeight:"500",children:"Deposit"})]})]}),e.jsx(z,{w:"100%",mt:"14px",children:e.jsxs(R,{lineHeight:"20px",maxWidth:"290px",fontSize:"12px",children:["Automate your LPing by selecting a ",u=="haedal"?"3rd party":""," strategy provider and enjoy higher yields powered by experts!"," "]})})]}),e.jsx(Lr,{isOpen:s,setIsOpen:r,displayTokenA:c,displayTokenB:g,feeDisplay:x,clmmPool:l,vaultId:f,isReverse:i,category:u})]})}const Os=({price:t,perText:s,wrapStyle:r,loading:c})=>e.jsxs(be,{flexDir:{base:"column",lg:"row"},align:"flex-start",...r,children:[e.jsx(R,{children:"Current Price"}),e.jsxs(z,{as:"div",h:"14px",children:[c||t==="--"?e.jsx(Re,{w:"66px",h:"14px",display:"inline-block"}):e.jsx(R,{as:"span",color:"text_caption",display:"inline-block",h:"14px",lineHeight:"14px",children:t}),e.jsx(R,{as:"span",display:"inline-block",h:"14px",lineHeight:"14px",children:` ${s}`})]})]});function $i({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:g,direct:x,perText:l,rangeTabList:f,currentRangeTab:i,fromBalanceInfo:u,toBalanceInfo:b,fromAmountValue:a,toAmountValue:o,handleAmountChange:p,handleAdd:k,isFullRange:F,useZapIn:y,handleChangeZapIn:m}){var re,O;const{currentPriceData:h,contractPoolInfo:v,apiPoolInfo:n,resetLiquidity:d,contractPoolInfoLoading:A,apiPoolInfoLoading:j,minPriceForDate:_,maxPriceForDate:w}=te(),{lowerTickData:L,upperTickData:T}=Be(),{autoStakePosition:H,setAutoStakePosition:q,isFarmRewardsRange:$,fromAmount:Y,toAmount:ie,byAmountIn:I,percentMap:ue,fromToken:D,toToken:X,totalAmount:K,fromTokenLock:C,toTokenLock:ne}=Fe(),{poolAddress:M}=ye(),ce=Q=>{q(Q.target.checked)},B=S.useMemo(()=>{if(h!=null&&h.currentPrice&&h.pool===M)return h==null?void 0:h.currentPrice},[h==null?void 0:h.currentPrice]),{priceImpactBasedOnMarket:N}=gs(D,X,x?"1":He(B),x?He(B):"1",!0),U=S.useMemo(()=>{if(N&&W(N).abs().gte(30))return W(N).gte(30)?`+${W(N).toFixed(0)}%`:`${W(N).toFixed(0)}%`},[N]);return S.useMemo(()=>!!(n!=null&&n.haveFarming)&&!!(n!=null&&n.displayFarmsEffectMaxPrice)&&!!(n!=null&&n.displayFarmsEffectMinPrice),[n==null?void 0:n.haveFarming,n==null?void 0:n.displayFarmsEffectMaxPrice,n==null?void 0:n.displayFarmsEffectMinPrice]),e.jsxs(se,{w:"100%",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),e.jsx(Ns,{poolAddress:M,currentTick:v==null?void 0:v.current_tick_index,tickSpacing:v==null?void 0:v.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper}),j?e.jsx(Re,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):e.jsx(qe,{type:"outlineTab",tabList:f,currentTab:i,handleChangeTab:Q=>c(Q),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),e.jsx(Os,{price:He(x?h==null?void 0:h.currentPrice:h.reverseCurrentPrice,6),perText:l,loading:A,wrapStyle:{mt:"28px",gap:"12px"}}),e.jsx(E,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:e.jsx(As,{handleClickRefresh:()=>{},direct:x,minPriceData:x?L:T,maxPriceData:x?T:L,dashedMarkerLine:[_,w]})}),U&&e.jsx(pt,{tips:`The current pool price deviates largely from the real-time market price (${U}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",tipsFontSize:"12px"}),e.jsx(Us,{direct:x,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),e.jsxs(E,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[e.jsx(Ws,{perText:l,direct:x,isFullRange:F,minPriceData:x?L:T,maxPriceData:x?T:L}),C&&ne&&e.jsx(pt,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"})]}),e.jsxs(E,{mb:"20px",gap:"16px",children:[e.jsx(Rs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:e.jsx(R,{color:"text_caption",children:C&&ne?"--":g})}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?xt(n==null?void 0:n.displayFarmsEffectMinPrice):ut(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:x?xt(n==null?void 0:n.displayFarmsEffectMaxPrice):ut(n==null?void 0:n.displayFarmsEffectMinPrice),loading:j,perText:l,checked:$,onChange:r})]}),e.jsx(se,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:n!=null&&n.haveFarming?"1px solid":"none",borderColor:"border",children:e.jsxs(E,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[e.jsxs(z,{w:"100%",justify:"space-between",children:[e.jsx(Oe,{fontSize:"14px",fontWeight:"500",children:"2. Deposit Amounts"}),e.jsxs(z,{children:[e.jsx(ys,{}),(n==null?void 0:n.haveZap)&&e.jsx(ks,{action:"Deposit",value:y,onChange:m})]})]}),e.jsx(E,{w:"100%",gap:"12px",children:e.jsx(se,{w:"100%",position:"relative",children:y&&!(C&&ne)?e.jsx(Cs,{apiPoolInfo:n,action:"Deposit",currentSqrtPrice:h==null?void 0:h.currentSqrtPrice,lowerTick:L==null?void 0:L.tick,upperTick:T==null?void 0:T.tick}):e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:Y+"",amountValue:a,loading:!1,onChange:Q=>{var J;p(Q,!0,(D==null?void 0:D.coin_type)===((J=n==null?void 0:n.tokenA)==null?void 0:J.coin_type))},selectable:!1,placeholder:"0.0",token:D,onFocusChange:Q=>{var J;Q&&+(Y+"")&&!I&&p(Y+"",!0,(D==null?void 0:D.coin_type)===((J=n==null?void 0:n.tokenA)==null?void 0:J.coin_type))},lock:{isLock:C&&!ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(b==null?void 0:b.balanceFormat)||"",value:ie+"",amountValue:o,loading:!1,onFocusChange:Q=>{var J;Q&&+(ie+"")&&I&&p(ie+"",!1,(X==null?void 0:X.coin_type)===((J=n==null?void 0:n.tokenA)==null?void 0:J.coin_type))},onChange:Q=>{var J;p(Q,!1,(X==null?void 0:X.coin_type)===((J=n==null?void 0:n.tokenA)==null?void 0:J.coin_type))},selectable:!1,placeholder:"0.0",token:X,lock:{isLock:!C&&ne,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:C&&ne,style:{h:"224px"}}})})}),!y&&!!(n!=null&&n.poolAddress)&&!(C&&ne)&&e.jsxs(e.Fragment,{children:[e.jsxs(E,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[e.jsx(qt,{totalAmount:K,loading:!1}),e.jsx(Mt,{type:"image",percentMap:ue,lockRatio:C&&ne,tokenA:D,tokenB:X,isReverse:(D==null?void 0:D.coin_type)!==((re=n==null?void 0:n.tokenA)==null?void 0:re.coin_type)})]}),e.jsx(je,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:k,children:t})]}),y&&e.jsx(Ft,{action:"Deposit",isReverse:(D==null?void 0:D.coin_type)!==((O=n==null?void 0:n.tokenA)==null?void 0:O.coin_type)}),(n==null?void 0:n.haveFarming)&&e.jsx($s,{disabled:C||ne,checked:H,onChange:ce})]})}),n!=null&&n.vaultCategory?e.jsx(E,{mt:"16px",children:e.jsx(Ds,{displayTokenA:n==null?void 0:n.displayTokenA,displayTokenB:n==null?void 0:n.displayTokenB,feeDisplay:n==null?void 0:n.feeDisplay,clmmPool:n==null?void 0:n.poolAddress,vaultId:n==null?void 0:n.vaultId,isReverse:n==null?void 0:n.isReverse,category:n==null?void 0:n.vaultCategory})}):null]})}function ns({children:t,title:s,wrapStyle:r={}}){return e.jsxs(E,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[e.jsxs(z,{w:"100%",justify:"space-between",h:"32px",children:[e.jsx(R,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),t==null?void 0:t[0]]}),t==null?void 0:t[1]]})}function Ui({btnText:t,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:g,direct:x,perText:l,rangeTabList:f,currentRangeTab:i,fromBalanceInfo:u,toBalanceInfo:b,fromAmountValue:a,toAmountValue:o,handleAmountChange:p,handleAdd:k,isFullRange:F,useZapIn:y,handleChangeZapIn:m,handleSubmit:h}){var Q,J;const{currentPriceData:v,contractPoolInfo:n,apiPoolInfo:d,resetLiquidity:A,contractPoolInfoLoading:j,apiPoolInfoLoading:_,minPriceForDate:w,maxPriceForDate:L,currentRange:T}=te();console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ apiPoolInfo:",d),console.log("ðŸš€ðŸš€ðŸš€ ~ PC.tsx:53 ~ contractPoolInfo:",n);const{lowerTickData:H,upperTickData:q}=Be(),{autoStakePosition:$,setAutoStakePosition:Y,isFarmRewardsRange:ie,fromAmount:I,toAmount:ue,byAmountIn:D,percentMap:X,fromToken:K,toToken:C,totalAmount:ne,fromTokenLock:M,toTokenLock:ce}=Fe(),{poolAddress:B}=ye(),N=de=>{Y(de.target.checked)},U=S.useMemo(()=>{if(v!=null&&v.currentPrice&&v.pool===B)return v==null?void 0:v.currentPrice},[v==null?void 0:v.currentPrice]),{priceImpactBasedOnMarket:re}=gs(K,C,x?"1":He(U),x?He(U):"1",!0),O=S.useMemo(()=>{if(re&&W(re).abs().gte(30))return W(re).gte(30)?`+${W(re).toFixed(0)}%`:`${W(re).toFixed(0)}%`},[re]);return e.jsx(e.Fragment,{children:e.jsxs(z,{gap:"12px",align:"flex-start",children:[e.jsxs(ns,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!f||!f.length?e.jsx(Re,{h:"32px",borderRadius:"8px",w:"180px"}):e.jsx(qe,{type:"outlineTab",tabList:f,currentTab:i,handleChangeTab:de=>c(de),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),e.jsxs(E,{w:"100%",gap:"12px",children:[e.jsx(z,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:e.jsxs(E,{flex:"1",pos:"relative",gap:"0px",children:[e.jsx(z,{w:"100%",h:"24px",justify:"flex-start",children:e.jsx(Os,{loading:_,price:xe(v)?He(x?v==null?void 0:v.currentPrice:v.reverseCurrentPrice,6):"--",perText:l,wrapStyle:{ml:"156px",zIndex:99}})}),e.jsxs(z,{w:"100%",gap:"32px",alignItems:"start",children:[e.jsxs(E,{gap:"20px",children:[e.jsx(yt,{h:"226px",mt:"10px",children:e.jsx(Ns,{poolAddress:B,currentTick:n==null?void 0:n.current_tick_index,tickSpacing:n==null?void 0:n.tickSpacing,farmsEffectTickLower:d==null?void 0:d.farmsEffectiveTickLower,farmsEffectTickUpper:d==null?void 0:d.farmsEffectiveTickUpper})}),xe(H)&&xe(q)&&e.jsx(e.Fragment,{children:e.jsx(Rs,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:e.jsx(R,{color:"text_caption",children:M&&ce?"--":g})})})]}),e.jsxs(E,{w:"100%",gap:"32px",children:[e.jsx(se,{w:"100%",h:"230px",children:e.jsx(As,{handleClickRefresh:()=>{},direct:x,minPriceData:x?H:q,maxPriceData:x?q:H,dashedMarkerLine:[w,L],currentRange:T})}),O&&e.jsx(pt,{tips:`The current pool price deviates largely from the real-time market price (${O}). Please be careful with your price range setting to avoid large impermanent loss.`,borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",tipsFontSize:"12px"}),xe(H)&&xe(q)&&e.jsx(Us,{direct:x,wrapStyle:{w:"100%"}})]})]})]})}),e.jsx(Ws,{perText:l,direct:x,isFullRange:F,minPriceData:x?H:q,maxPriceData:x?q:H}),M&&ce&&e.jsx(pt,{isShowIcon:!1,tipsFontSize:"12px",justifyContent:"center",tips:"The max price should be higher than min price.",h:"32px",borderRadius:"8px"}),(d==null?void 0:d.haveFarming)&&(d==null?void 0:d.displayFarmsEffectMaxPrice)&&(d==null?void 0:d.displayFarmsEffectMinPrice)&&e.jsx(Hs,{minPrice:x?xt(d==null?void 0:d.displayFarmsEffectMinPrice):ut(d==null?void 0:d.displayFarmsEffectMaxPrice),maxPrice:x?xt(d==null?void 0:d.displayFarmsEffectMaxPrice):ut(d==null?void 0:d.displayFarmsEffectMinPrice),loading:_,perText:l,checked:ie,onChange:r})]})]}),e.jsxs(E,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[e.jsxs(ns,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[e.jsx(z,{children:(d==null?void 0:d.haveZap)&&e.jsx(ks,{action:"Deposit",value:y,onChange:m})}),e.jsx(se,{w:"100%",position:"relative",children:y&&!(M&&ce)?e.jsx(Cs,{apiPoolInfo:d,action:"Deposit",currentSqrtPrice:v==null?void 0:v.currentSqrtPrice,lowerTick:H==null?void 0:H.tick,upperTick:q==null?void 0:q.tick}):e.jsx(e.Fragment,{children:e.jsx(Fs,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(u==null?void 0:u.balanceFormat)||"",value:I,amountValue:a,loading:!1,onChange:de=>{var Z;p(de,!0,(K==null?void 0:K.coin_type)===((Z=d==null?void 0:d.tokenA)==null?void 0:Z.coin_type))},selectable:!1,placeholder:"0.0",token:K,onFocusChange:de=>{var Z;de&&+(I+"")&&!D&&p(I+"",!0,(K==null?void 0:K.coin_type)===((Z=d==null?void 0:d.tokenA)==null?void 0:Z.coin_type))},lock:{isLock:M&&!ce,text:"The market price is outside your specified price range. Single-asset deposit only."}},to:{wrapStyle:{h:"108px"},balance:(b==null?void 0:b.balanceFormat)||"",value:ue,amountValue:o,loading:!1,onFocusChange:de=>{var Z;de&&+(ue+"")&&D&&p(ue+"",!1,(C==null?void 0:C.coin_type)===((Z=d==null?void 0:d.tokenA)==null?void 0:Z.coin_type))},onChange:de=>{var Z;p(de,!1,(C==null?void 0:C.coin_type)===((Z=d==null?void 0:d.tokenA)==null?void 0:Z.coin_type))},selectable:!1,placeholder:"0.0",token:C,lock:{isLock:!M&&ce,text:"The market price is outside your specified price range. Single-asset deposit only."}},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"},lock:{isLock:M&&ce,style:{h:"224px"}}})})})]}),e.jsxs(e.Fragment,{children:[e.jsxs(E,{w:"100%",gap:"8px",children:[!y&&!!(d!=null&&d.poolAddress)&&!(M&&ce)&&e.jsxs(E,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:d!=null&&d.displayTokenA&&(d!=null&&d.displayTokenB)?"0 8px 16px":"0 16px",children:[e.jsx(je,{w:"calc(100% + 18px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"12px",isDisabled:s,isLoading:!1,onClick:k,children:t}),(d==null?void 0:d.displayTokenA)&&(d==null?void 0:d.displayTokenB)&&e.jsxs(e.Fragment,{children:[e.jsx(qt,{totalAmount:ne,loading:!1,valueStyle:{h:"20px",lineHeight:"20px"}}),e.jsx(Mt,{type:"image",percentMap:X,lockRatio:M&&ce,tokenA:K,tokenB:C,isReverse:(K==null?void 0:K.coin_type)!==((Q=d==null?void 0:d.tokenA)==null?void 0:Q.coin_type)})]})]}),y&&e.jsx(Ft,{action:"Deposit",isReverse:(K==null?void 0:K.coin_type)!==((J=d==null?void 0:d.tokenA)==null?void 0:J.coin_type)}),(d==null?void 0:d.haveFarming)&&e.jsx($s,{disabled:M||ce,checked:$,onChange:N})]}),(d==null?void 0:d.vaultCategory)&&e.jsx(Ds,{displayTokenA:d==null?void 0:d.displayTokenA,displayTokenB:d==null?void 0:d.displayTokenB,feeDisplay:d==null?void 0:d.feeDisplay,clmmPool:d==null?void 0:d.poolAddress,vaultId:d==null?void 0:d.vaultId,isReverse:d==null?void 0:d.isReverse,category:d==null?void 0:d.vaultCategory})]})]})]})})}function Ni({rangeTabList:t,currentFeeTier:s,getList:r,getPrice:c}){const{apiPoolInfo:g}=te(),{zapAmount:x,currentZapToken:l}=_s(),{direct:f,perText:i,handleChangeIsFarmRewardsRange:u,onReverseClick:b,leverage:a,currentRangeTab:o,isFullRange:p}=Mi({rangeTabList:t}),{handleAmountChange:k,fromAmountValue:F,toAmountValue:y,fromBalanceInfo:m,toBalanceInfo:h,relatedPosId:v,nftOpen:n,setNftOpen:d,handleAdd:A,handleSubmit:j,useZapIn:_,handleChangeZapIn:w,confirmModalOpen:L,setConfirmModalOpen:T}=Ti(r,f),{btnText:H,btnDisabled:q}=Bi(),{isApp:$}=Te(),Y={btnText:H,btnDisabled:q,handleChangeIsFarmRewardsRange:u,onReverseClick:b,leverage:a,direct:f,perText:i,rangeTabList:t,currentRangeTab:o,fromBalanceInfo:m,toBalanceInfo:h,fromAmountValue:F,toAmountValue:y,handleAmountChange:k,handleAdd:A,isFullRange:p,useZapIn:_,handleChangeZapIn:w,handleSubmit:j};return e.jsxs(e.Fragment,{children:[$?e.jsx($i,{...Y}):e.jsx(Ui,{...Y}),L&&e.jsx(Li,{onClose:()=>T(!1),data:{feeTier:s,zapData:_?{amount:x,token:l}:void 0},onSubmit:j}),n&&v&&xe(g)&&e.jsx(qi,{onClose:()=>d(!1),tokenA:g==null?void 0:g.displayTokenA,tokenB:g==null?void 0:g.displayTokenB,posId:v,fee:g==null?void 0:g.feeDisplay,isReverse:g==null?void 0:g.isReverse})]})}const cs=(t,s,r)=>t&&s&&r?W(t).mul(s).div(W(10).pow(r)).toString():"--";function Vs(){var A,j;const{tokenAPrice:t,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:g,setTokenAAmount:x,tokenBAmount:l,setTokenBAmount:f,tokenAAmountUSD:i,setTokenAAmountUSD:u,tokenBAmountUSD:b,setTokenBAmountUSD:a,totalAmountUSD:o,setTotalAmountUSD:p,resetTvlInfo:k,tvlLoading:F,setTvlLoading:y}=bt(),{apiPoolInfo:m,contractPoolInfo:h}=te(),v=async _=>{var w,L;try{const T=(w=Ee(_))==null?void 0:w.full_address,H=T=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":T,{prices:q}=await _r(`${(L=kt)==null?void 0:L.cetus_api}/v3/sui/market_price?base_symbol_address=${H}`);return q==null?void 0:q[0]}catch(T){return console.log("ðŸš€ðŸš€ðŸš€ ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",T),"--"}},{poolAddress:n}=ye(),d=async()=>{var _,w,L,T;y(!0);try{if((_=m==null?void 0:m.tokenA)!=null&&_.coin_type){const H=await v((w=m==null?void 0:m.tokenA)==null?void 0:w.coin_type);H&&s(H)}if((L=m==null?void 0:m.tokenB)!=null&&L.coin_type){const H=await v((T=m==null?void 0:m.tokenB)==null?void 0:T.coin_type);H&&c(H)}}catch(H){console.log("ðŸš€ ~ PoolInfo ~ handleRefresh:",H)}finally{y(!1)}};return S.useEffect(()=>{k()},[n]),S.useEffect(()=>()=>{k()},[]),S.useEffect(()=>{d()},[m==null?void 0:m.tvl,(A=m==null?void 0:m.tokenA)==null?void 0:A.coin_type,(j=m==null?void 0:m.tokenB)==null?void 0:j.coin_type]),S.useEffect(()=>{h!=null&&h.coinAmountA&&x(W(h==null?void 0:h.coinAmountA).sub((h==null?void 0:h.fee_protocol_coin_a)||"0").toString())},[h==null?void 0:h.coinAmountA,h==null?void 0:h.fee_protocol_coin_a,n]),S.useEffect(()=>{h!=null&&h.coinAmountB&&f(W(h==null?void 0:h.coinAmountB).sub((h==null?void 0:h.fee_protocol_coin_b)||"0").toString())},[h==null?void 0:h.coinAmountB,h==null?void 0:h.fee_protocol_coin_b,n]),S.useEffect(()=>{g&&(t!=null&&t.price)&&(m!=null&&m.tokenA.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenA.decimals))&&u(cs(g,t==null?void 0:t.price,m==null?void 0:m.tokenA.decimals))},[g,t]),S.useEffect(()=>{l&&(r!=null&&r.price)&&(m!=null&&m.tokenB.decimals)&&!Number.isNaN(Number(m==null?void 0:m.tokenB.decimals))&&a(cs(l,r==null?void 0:r.price,m==null?void 0:m.tokenB.decimals))},[l,r]),S.useEffect(()=>{p((i||b)&&i!=="--"&&b!=="--"?W(i||0).plus(b||0).toString():"--")},[i,b]),{tokenAPrice:t,tokenBPrice:r,tokenAAmount:g,tokenBAmount:l,tokenAAmountUSD:i,tokenBAmountUSD:b,totalAmountUSD:o,setTotalAmountUSD:p,tvlLoading:F}}function Di(){const{tab:t,poolAddress:s,from:r,to:c,fee:g}=ye(),{getPoolList:x}=Yr(),[l,f]=S.useState([]),{apiPoolInfo:i,setApiPoolInfo:u,setApiPoolInfoLoading:b,setNetError:a}=te(),o=Ze(),{fetchTokenInfo:p}=Ms(),k=async({poolAddress:F,from:y,to:m})=>{var h,v,n,d;console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:148 ~ getList ~ getList:");try{b(!0);let A,j;if(F&&F!=="undefined"){console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:32 ~ getList ~ poolAddress:",F);const _=await x({pools:[F],display_all_pools:!0});console.log("ðŸš€ðŸš€ðŸš€ ~ useGetRelatedPools.ts:52 ~ getList ~ _res:",_),_&&_.list&&_.list.length?(j=_.list[0],A=await x({coin_type:`${(h=j==null?void 0:j.displayTokenA)==null?void 0:h.coin_type},${(v=j==null?void 0:j.displayTokenB)==null?void 0:v.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):i&&xe(i)?(j=i,A={list:l}):(j={poolAddress:F,displayTokenA:void 0,displayTokenB:void 0},A={list:[]}),b(!1)}else if(y&&m&&y!=="undefined"&&m!=="undefined"&&y!==m){const _=await x({coin_type:`${y},${m}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(_,"res_getPoolList"),_&&_.list&&_.list.length)if(g&&g!=="undefined"){const w=(n=_==null?void 0:_.list)==null?void 0:n.find(L=>W(L==null?void 0:L.feeRate).eq(g));if(w)o(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`);else{const L=St(_==null?void 0:_.list,T=>Number((T==null?void 0:T.tvl)||"0"));o(t?`/liquidity?tab=${t}&poolAddress=${L==null?void 0:L.poolAddress}`:`/liquidity?poolAddress=${L==null?void 0:L.poolAddress}`)}}else{let w=St(_==null?void 0:_.list,L=>Number((L==null?void 0:L.tvl)||"0"));w||(w=St(_==null?void 0:_.list,L=>{var T;return Number(((T=L==null?void 0:L.object)==null?void 0:T.liquidity)||"0")}),w||(w=_==null?void 0:_.list[0])),o(t?`/liquidity?tab=${t}&poolAddress=${w==null?void 0:w.poolAddress}`:`/liquidity?poolAddress=${w==null?void 0:w.poolAddress}`)}else{const w=await p([y,m].filter(Boolean)),L=w==null?void 0:w.get(y),T=w==null?void 0:w.get(m);j={poolAddress:void 0,displayTokenA:L,displayTokenB:T},A={list:[]},b(!1)}}else(!y||y==="undefined")&&m&&m!=="undefined"&&(j={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await p(m)}),(!m||m==="undefined")&&y&&y!=="undefined"&&(j={poolAddress:void 0,displayTokenA:await p(y),displayTokenB:void 0}),A={list:[]},b(!1);A&&(a(!1),f(A==null?void 0:A.list),console.log(j,"setApiPoolInfo"),j&&(j!=null&&j.poolAddress&&F?(j==null?void 0:j.poolAddress)===F&&u(j):u(j))),b(!1)}catch(A){if(A!=null&&A.list&&((d=A==null?void 0:A.list)==null?void 0:d.length)===1){a(!0);const j=A==null?void 0:A.list[0];console.log(A==null?void 0:A.list,"setApiPoolInfo"),u(j),f([]),b(!1)}}};return S.useEffect(()=>{s&&s==="undefined"||!s&&s===void 0&&!r&&!c||k({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:k,relatedPoolList:l}}function Oi(){var o,p,k,F;const{poolAddress:t}=ye(),{apiPoolInfo:s,apiPoolInfoLoading:r}=te(),{quoteWhiteTokenList:c}=Bs(),{getList:g,relatedPoolList:x}=Di(),l=S.useMemo(()=>{var m,h;const y=si(x);return y?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(m=es)==null?void 0:m.map(v=>{var d,A;const n=((d=y.find(j=>j.feeRate===v.feeRate))==null?void 0:d.title)||v.title;return{...v,title:n,poolAddress:(A=y.find(j=>j.feeRate===v.feeRate))==null?void 0:A.poolAddress,disabled:n==="Not Created"&&!We(s==null?void 0:s.tokenA,c)&&!We(s==null?void 0:s.tokenB,c)}}):(h=es)==null?void 0:h.map(v=>{var d,A;const n=((d=y.find(j=>j.feeRate===v.feeRate))==null?void 0:d.title)||v.title;return{...v,title:n,poolAddress:(A=y.find(j=>j.feeRate===v.feeRate))==null?void 0:A.poolAddress,disabled:!We(s==null?void 0:s.displayTokenA,c)&&!We(s==null?void 0:s.displayTokenB,c)}}):[]},[JSON.stringify(x),JSON.stringify(c),(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type,(p=s==null?void 0:s.displayTokenB)==null?void 0:p.coin_type]),f=S.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(y=>({label:y==null?void 0:y.symbol,key:y==null?void 0:y.coin_type,isToken:!0,imgInfo:{src:y==null?void 0:y.logo_url,w:"16px",h:"16px",coinType:y?y==null?void 0:y.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(k=s==null?void 0:s.displayTokenA)==null?void 0:k.symbol,(F=s==null?void 0:s.displayTokenB)==null?void 0:F.symbol]),i=S.useMemo(()=>{const y=l==null?void 0:l.find(m=>m.poolAddress===t);return y||s},[JSON.stringify(l),t,JSON.stringify(s)]),{fetchPriceRange:u}=Ur(),b=async y=>{console.log("ðŸš€ ~ setPriceRangeMap ~ this.addressHistTokens:ðŸš€ ~ getContractPrices ~ address:",y),await u(y,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB)};_t(()=>{t&&t===(s==null?void 0:s.poolAddress)&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)&&b(t)},[t,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]);const a=S.useMemo(()=>{const y=[];return s!=null&&s.displayTokenA&&y.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&y.push(s==null?void 0:s.displayTokenB),y},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:g,feeTierList:l,apiPoolInfo:s,rangeTabList:f,currentFeeTier:i,apiPoolInfoLoading:r,quoteWhiteTokenList:c,warningTokenList:a}}var gt=(t=>(t.deposit="Provide Liquidity",t.positions="My Positions",t.analytics="Analytics",t))(gt||{});const ke=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function Vi({apiPoolInfo:t}){var ne,M,ce;const{tab:s,poolAddress:r}=ye(),c=Ze(),[g,x]=S.useState(),[l,f]=S.useState(ke),[i,u]=S.useState(((ne=ke==null?void 0:ke.find(B=>B.key===s))==null?void 0:ne.key)||ke[0].key),[b,a]=S.useState(),[o,p]=S.useState(),{posBaseListGroupByPool:k}=Ss(),{addFavorites:F,removeFavorites:y}=ii(),{poolFavoriteIds:m}=ni(),{fromToken:h,toToken:v}=Fe(),{fetchTokenPrices:n}=bs(),{setFromCoin:d,setToCoin:A}=ci(),{setIsOpen:j}=ai(),{isSwapWidgetDisplay:_}=kr(),w=()=>{var B,N;_?j(!0):c(`/swap/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(N=t==null?void 0:t.displayTokenB)==null?void 0:N.coin_type}`)};S.useEffect(()=>(h&&v&&(d(h),A(v)),()=>{d(kt.clmm_swap.from_coin),A(kt.clmm_swap.to_coin)}),[h,v]);const L=S.useMemo(()=>{if(r&&r!=="undefined"){const B=k[r.toLowerCase()||""];return B&&(B!=null&&B.list)&&(B==null?void 0:B.list.length)>0?B==null?void 0:B.list.length:void 0}},[JSON.stringify(k),r]);S.useEffect(()=>{f(ke==null?void 0:ke.map(B=>({...B,num:B.label==="My Positions"&&i==="positions"?L:void 0})))},[L,i]),S.useLayoutEffect(()=>{s&&s!==i&&u(s)},[s]);const T=S.useMemo(()=>m==null?void 0:m.includes(r||""),[JSON.stringify(m),r]),H=B=>{Tt(B),r&&(T?y(r):F(r))},q=S.useMemo(()=>T?{tooltip:"Remove from Watchlist",xlinkHref:"#icon-icon_star_sel",svgFill:"primary_blue",svgHover:"primary"}:{tooltip:"Add to Watchlist",xlinkHref:"#icon-icon_star",svgFill:"text_paragraph",svgHover:"text_caption"},[T]);S.useEffect(()=>{a(t==null?void 0:t.displayTokenA),p(t==null?void 0:t.displayTokenB)},[(M=t==null?void 0:t.displayTokenA)==null?void 0:M.coin_type,(ce=t==null?void 0:t.displayTokenB)==null?void 0:ce.coin_type]);const $=()=>{var B,N;c(`/create-pool/${(B=t==null?void 0:t.displayTokenA)==null?void 0:B.coin_type}/${(N=t==null?void 0:t.displayTokenB)==null?void 0:N.coin_type}/${g==null?void 0:g.feeRate}`)},Y=()=>{var N;const B=[];h&&B.push(h.coin_type),v&&B.push(v.coin_type),t!=null&&t.miningRewardList&&((N=t==null?void 0:t.miningRewardList)==null||N.forEach(U=>{B.push(Ee(U==null?void 0:U.coinType).full_address)})),B.length>0&&n(Array.from(new Set(B.filter(U=>U&&U!=="undefined"))))};S.useEffect(()=>{Y()},[h==null?void 0:h.coin_type,v==null?void 0:v.coin_type]);const{fetchTokenInfo:ie}=Ms(),{setApiPoolInfo:I,apiPoolInfoLoading:ue,netError:D}=te(),{setTotalAmountUSD:X}=Vs(),K=S.useCallback(async(B,N,U,re,O,Q)=>{var Ke,$e,Qe,Ye,Me;const J=Object.keys(gt).find(jt=>jt===i),de=[re,O].filter(Boolean),Z=await ie(de);if(U!=null&&U.coin_type||(Ke=Z==null?void 0:Z.get(O||""))!=null&&Ke.coin_type)if(Ee(B==null?void 0:B.coin_type).full_address===Ee((U==null?void 0:U.coin_type)||(($e=Z==null?void 0:Z.get(O||""))==null?void 0:$e.coin_type)||"").full_address)a(o),p(b);else{if(Ee(B==null?void 0:B.coin_type).full_address===Ee((N==null?void 0:N.coin_type)||((Qe=Z==null?void 0:Z.get(re||""))==null?void 0:Qe.coin_type)||"").full_address)return;c(Q?`/liquidity?tab=${J}&from=${B==null?void 0:B.coin_type}&to=${(U==null?void 0:U.coin_type)||((Ye=Z==null?void 0:Z.get(O||""))==null?void 0:Ye.coin_type)}`:`/liquidity?tab=${J}&from=${(U==null?void 0:U.coin_type)||((Me=Z==null?void 0:Z.get(O||""))==null?void 0:Me.coin_type)}&to=${B==null?void 0:B.coin_type}`),I(null),X("")}else c(Q?`/liquidity?tab=${J}&from=${B==null?void 0:B.coin_type}`:`/liquidity?tab=${J}&to=${B==null?void 0:B.coin_type}`),I(null),X("")},[b,o,i]),C=S.useCallback(async(B,N)=>{const U=await ie(B||"");return{value:N||(B?U:void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:D,tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!N&&ue}},[D,ue]);return{currentTab:i,setCurrentTab:u,tabList:l,favoriteStyle:q,onChangeFavorites:H,selectedTokenA:b,selectedTokenB:o,setSelectedTokenA:a,setSelectedTokenB:p,onConfirm:$,feeTier:g,setFeeTier:x,refreshMarketPrice:Y,onJump2Swap:w,handleSelectToken:K,getSelectTokenProps:C}}function Gi(){const{currentAccount:t}=mt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c,setCurrentPriceData:g}=te(),{feeTierList:x,currentFeeTier:l,rangeTabList:f,getList:i,quoteWhiteTokenList:u,warningTokenList:b}=Oi(),{poolAddress:a}=ye(),{handleResetRange:o}=ht(),{resetAddLiquidity:p,setFromToken:k,setToToken:F}=Fe(),{resetDeposit:y}=Bt(),{fetchAccountBalance:m}=Ts(),{getContractPoolInfo:h}=vs(),{getCurrentPrice:v}=ws(),{currentTab:n,setCurrentTab:d,tabList:A,favoriteStyle:j,onChangeFavorites:_,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:T,setSelectedTokenB:H,onConfirm:q,setFeeTier:$,refreshMarketPrice:Y,onJump2Swap:ie,handleSelectToken:I,getSelectTokenProps:ue}=Vi({apiPoolInfo:s});S.useEffect(()=>{xe(s)&&(k(s==null?void 0:s.displayTokenA),F(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const D=async()=>{if(a&&s&&a===(s==null?void 0:s.poolAddress)){const C=await h(a);C&&v(C==null?void 0:C.current_sqrt_price,s)}},X=()=>{Y==null||Y(),D==null||D()},K=async C=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh111:"),C&&c(!0),a&&a!=="undefined"&&await i({poolAddress:a}),t!=null&&t.address&&await m(),X(),c(!1)};return S.useEffect(()=>(t!=null&&t.address&&m(),g({}),()=>{o(),p(),r(),y()}),[]),S.useEffect(()=>{a&&(s==null?void 0:s.poolAddress)!==a&&(o(),p(),r(),y()),a&&a===(s==null?void 0:s.poolAddress)&&D()},[a,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:l,rangeTabList:f,quoteWhiteTokenList:u,warningTokenList:b,currentTab:n,setCurrentTab:d,tabList:A,favoriteStyle:j,onChangeFavorites:_,selectedTokenA:w,selectedTokenB:L,setSelectedTokenA:T,setSelectedTokenB:H,onConfirm:q,setFeeTier:$,handleRefresh:K,handleGetPrice:D,onJump2Swap:ie,handleSelectToken:I,getSelectTokenProps:ue}}function mc(){const t=Ze(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,netError:g}=te(),{poolAddress:x,from:l,to:f}=ye(),{feeTierList:i,currentFeeTier:u,rangeTabList:b,quoteWhiteTokenList:a,warningTokenList:o,currentTab:p,setCurrentTab:k,tabList:F,favoriteStyle:y,onChangeFavorites:m,selectedTokenA:h,selectedTokenB:v,onConfirm:n,setFeeTier:d,handleRefresh:A,handleGetPrice:j,onJump2Swap:_,handleSelectToken:w,getSelectTokenProps:L}=Gi(),{isApp:T}=Te(),{isOpen:H,onOpen:q,onClose:$}=yr(),{totalAmountUSD:Y,tvlLoading:ie}=Vs(),I=x&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB),{tooltip:ue,xlinkHref:D,svgFill:X,svgHover:K}=y,[C,ne]=S.useState({}),[M,ce]=S.useState({}),B=async()=>{const O=await L(l,h),Q=await L(f,v);ne(O),ce(Q)};S.useEffect(()=>{B()},[l,f,h,v]);const{backUrl:N}=Ls(),[U,re]=S.useState(!0);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{w:"100%",mt:"20px",children:[e.jsxs(z,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[e.jsx(li,{text:"Back",onClick:()=>t(N||"/pools")}),I&&e.jsxs(z,{gap:"8px",children:[e.jsx(lt,{placement:"top",tooltip:ue,children:e.jsx(je,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:m,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:K}}},children:e.jsx(Le,{xlinkHref:D,svgFill:X,svgHover:K,fontSize:"18px"})})}),e.jsx(lt,{placement:"top",tooltip:"Trade",children:e.jsx(je,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:_,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:e.jsx(Le,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),e.jsx(lt,{placement:"top",tooltip:"Refresh",children:e.jsx(se,{children:e.jsx(di,{handleRefresh:A,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},x)})})]})]}),e.jsxs(be,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[e.jsxs(be,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[e.jsxs(z,{gap:"12px",children:[e.jsx(Pt,{onChange:O=>{w(O,h,v,l,f,!0)},...C}),e.jsx(Pt,{onChange:O=>{w(O,v,h,f,l,!1)},...M})]}),e.jsx(ri,{value:u,loading:!u&&r,feeTierList:i,disabled:g,onChange:O=>{O!=null&&O.poolAddress?t(`/liquidity?poolAddress=${O==null?void 0:O.poolAddress}`):(d(O),q())}})]}),I&&e.jsx(Ri,{apiPoolInfo:s,totalTvl:Y,apiPoolInfoLoading:r,tvlLoading:ie})]}),I?e.jsxs(e.Fragment,{children:[e.jsxs(be,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[e.jsx(qe,{type:"borderTab",tabList:F,currentTab:p,handleChangeTab:O=>{const Q=Object.keys(gt).find(J=>gt[J]===O.label);x&&t(`/liquidity?tab=${Q}&poolAddress=${x}`),k(Q)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:T?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:T?"14px":"16px",fontWeight:"500"}}),p==="deposit"&&!T&&e.jsx(se,{mt:"24px",children:e.jsx(ys,{})}),p!=="deposit"&&s&&e.jsxs(be,{w:T?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[e.jsx(R,{children:"Current Price"}),e.jsx(xi,{noCenter:!!T,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:at(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:T?{w:"100%"}:{},handlePageToggleDirect:()=>re(!U)})]})]}),e.jsx(se,{h:{base:"20px",lg:"8px"}}),p==="deposit"&&e.jsx(Ni,{rangeTabList:b,getList:A,getPrice:j,currentFeeTier:u}),p==="positions"&&e.jsx(Ci,{priceDirect:U}),p==="analytics"&&e.jsx(_i,{})]}):e.jsx(se,{mt:"20px",children:!s&&r?e.jsx(yt,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:e.jsx(Ct,{})}):e.jsx(De,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:e.jsx(E,{children:h&&v?We(h,a)||We(v,a)?e.jsxs(e.Fragment,{children:[e.jsx(R,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),e.jsx(R,{fontSize:"14px",children:"Do you want to initialize it?"}),e.jsx(je,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{$(),n()},children:"Initialized Pool"})]}):e.jsx(R,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):e.jsx(R,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&e.jsx(ui,{tokensInfo:o,waringModalCancel:O=>{t("/pools")}}),e.jsx(Xr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:H,onClose:$,onConfirm:n})]})}export{mc as default};
//# sourceMappingURL=Liquidity-R-4TTA-u.js.map
