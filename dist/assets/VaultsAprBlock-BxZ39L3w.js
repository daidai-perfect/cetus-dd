import{u as fe}from"./swapWidget-BCFJQoyC.js";import{h as se,aB as te,u as pe,L as S0,aC as re,R as u0,s as ue,j as h0,q as ce,e as I0,m as $0,k as Z0,aD as me,a2 as R0,aE as Y0,ai as O0,G as t0,D as ae,r as N0,d,an as be,aF as ye,aa as _e,o as H0,p as D0,aG as ne,aH as J0,ac as G0,aI as Q0,X as M0,S as ge,y as Se}from"./index-DZworFuu.js";import{a as i,j as g0,V as ee,H as oe,C as ve,T as xe}from"./vendor-_1sPVx0S.js";import{a as K0}from"./useWrapPoolData-CDrg47b6.js";import{a as he}from"./useFavoritePool-C-y3K2CF.js";import{c as de}from"./useGetPoolList-CsB88aY2.js";import{u as le}from"./useToken-BWHB2fhl.js";import{u as W0}from"./useTokenBalance-Bm-sJqFs.js";import{u as A0}from"./useTransaction-DopuwF40.js";import{u as B0}from"./global-CG4XJcf0.js";import{M as k0}from"./msafe-oYBkW7LJ.js";import{f as _0}from"./index-B0fjcXro.js";import{v as E0}from"./v4-C6aID195.js";import{u as Te}from"./useFindBestRouting-Lj4RLbMT.js";import{H as F0}from"./HTextLabelBox-DBHn66eq.js";const Ve=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,vaultBaseListLoading:!1,vaultStatsLoading:!1,holdVaultsObj:{},holdTotalValue:{},vaultStatsObj:{},contractClmmPoolObj:{},contractVaultObj:{},isYourHoldings:!1,setVaultStatsObj:a=>{s(()=>({vaultStatsObj:a}))},vaultBaseList:[],setVaultBaseList:a=>{s(()=>({vaultBaseList:a}))},setVaultBaseListLoading:a=>{s(()=>({vaultBaseListLoading:a}))},setVaultStatsLoading:a=>{s(()=>({vaultStatsLoading:a}))},setContractVaultObj:a=>{const e=l().contractVaultObj;e[a.id]=a,s(()=>({contractVaultObj:{...e}}))},setContractVaultObjLoading:a=>{s(()=>({contractVaultObjLoading:a}))},setContractClmmPoolObjLoading:a=>{s(()=>({contractClmmPoolObjLoading:a}))},setContractClmmPoolObj:a=>{const e=l().contractClmmPoolObj;e[a.poolAddress]=a,s(()=>({contractClmmPoolObj:{...e}}))},setHoldTotalValue:(a,e)=>{const r=l().holdTotalValue;r[a]=e,s(()=>({holdTotalValue:{...r}}))},setDetailRefreshCount:a=>{s(()=>({detailRefreshCount:a}))},lpTokenInfo:{},setLpTokenInfo:a=>{s(()=>({lpTokenInfo:{...l().lpTokenInfo,...a}}))}}),q0=se(te(Ve,{name:"useVaultsStore2",partialize:s=>{const{vaultBaseList:l,vaultStatsObj:a,contractVaultObj:e,contractClmmPoolObj:r,lpTokenInfo:t}=s;return{vaultBaseList:l,vaultStatsObj:a,contractVaultObj:e,contractClmmPoolObj:r,lpTokenInfo:t}}}));function Ce(s,l){return{...s,vaultsTvl:(l==null?void 0:l.vaultsTvl)||"--",vaultsTvlDisplay:(l==null?void 0:l.vaultsTvlDisplay)||"--",vaultsApy:(l==null?void 0:l.vaultsApy)||"--",vaultsApyDisplay:(l==null?void 0:l.vaultsApyDisplay)||"--",vaultsTotalApy:(l==null?void 0:l.vaultsTotalApy)||"--",vaultsTotalApyDisplay:(l==null?void 0:l.vaultsTotalApyDisplay)||"--",vaultsLstApy:(l==null?void 0:l.vaultsLstApy)||"--",vaultsLstApyDisplay:(l==null?void 0:l.vaultsLstApyDisplay)||"--",vaultsApr:(l==null?void 0:l.vaultsApr)||"--",vaultsAprDisplay:(l==null?void 0:l.vaultsAprDisplay)||"--",vaultsId:(l==null?void 0:l.vaultsId)||"",clmmPoolAddress:(l==null?void 0:l.clmmPoolAddress)||"",amountPerLpA:(l==null?void 0:l.amountPerLpA)||"0",amountPerLpB:(l==null?void 0:l.amountPerLpB)||"0",category:(l==null?void 0:l.category)||"",hardCapUSD:(l==null?void 0:l.hardCapUSD)||"--",depositRatioDisplay:(l==null?void 0:l.depositRatioDisplay)||"--",depositRatio:(l==null?void 0:l.depositRatio)||0,lpTokentype:(l==null?void 0:l.lpTokentype)||""}}const fa={"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50":{vaults_id:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmm_pool:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",lpToken:{coin_type:"0x0c8a5fcbe32b9fc88fe1d758d33dd32586143998f68656f43f3a6ced95ea4dc3::lp_token::LP_TOKEN",decimals:9,description:"",logo_url:"https://j5w37hib4ojxo6bymogsbg5r5qkkdhuvfprizrw4kxakm3jxz24q.arweave.net/T22_nQHjk3d4OGONIJux7BShnpUr4ozG3FXApm03zrk",name:"",symbol:""}},"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535":{vaults_id:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmm_pool:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",lpToken:{coin_type:"0xb490d6fa9ead588a9d72da07a02914da42f6b5b1339b8118a90011a42b67a44f::lp_token::LP_TOKEN",decimals:9,logo_url:"https://tke7enjn3akurmshmxw2yr2yo4ru6joi6sxpnbsyk452k36vfdoa.arweave.net/monyNS3YFUiyR2XtrEdYdyNPJcj0rvaGWFc7pW_VKNw",description:"",name:"",symbol:""}},"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc":{vaults_id:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmm_pool:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",lpToken:{coin_type:"0x828b452d2aa239d48e4120c24f4a59f451b8cd8ac76706129f4ac3bd78ac8809::lp_token::LP_TOKEN",decimals:9,logo_url:"https://dzuxtnuvuq7xqcurpbk4udj74zm2h5c52ftpaxsmgvxdt3fxtgva.arweave.net/Hml5tpWkP3gKkXhVyg0_5lmj9F3RZvBeTDVuOey3mao",description:"",name:"",symbol:""}}},De=[{poolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",name:"haSUI - SUI",isReverse:!1,tokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Haedal staked SUI",symbol:"haSUI",decimals:9,address:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI",balance:"9808420.561870547",logo_url:"https://archive.cetus.zone/assets/image/sui/hasui.png",coingecko_id:"haedal-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0xbde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"4906526.459378922",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"1660"}],farmsApr:"0.0518854671450343098098316019470933000166085972573126523381066642",farmingAprDisplay:"5.18%",feeApr:"0.0024026852043393462354559911502367355412380011356114481601412655",feeAprDisplay:"0.24%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.24%",totalAprDisplay:"5.42%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$34,493,018.28",tvl:"34493018.281195",volume24Display:"$2,280,261.01",fees24Display:"$228.02",isVaults:!0,farmsStatedTvl:"26486362.741908405324614107895615170922538233",farmsStatedTvlDisplay:"$26,486,362.74",feeAndFarmsApr:"0.0542881523493736560452875930973300355578465983929241004982479297",feeAndFarmsAprDisplay:"5.42%",farmsEffectiveTickLower:458,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.04686261985650299343324213325963175512302823358939922365776382",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0x9f5fd63b2a2fd8f698ff6b7b9720dbb2aa14bedb9fc4fd6411f20e5b531a4b89",tickSpacing:"2",index:171,object:{coin_a:9808458908401888,coin_b:4906587775647608,tick_spacing:2,fee_rate:100,liquidity:"4518573584291114825",current_sqrt_price:"18904297306631983245",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1257881454428453"}}],points_released:"891294616929869525730459648000000",points_growth_global:"21523796564358466",last_updated_time:1742298390}},is_pause:!1,index:171},isUnstableVault:!1,vaultId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",vaultsRewards:["bde4ba4c2e274a60ce15c1cfff9e5c42e41654ac8b6d906a57efa4bd3c29f47d::hasui::HASUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xde97452e63505df696440f86f0b805263d8659b77b8c316739106009d514c270",clmmPoolAddress:"0x871d8a227114f375170f149f7e9d45be822dd003eba225e83c05ac80828596bc",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",name:"afSUI - SUI",isReverse:!1,tokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Aftermath Staked SUI",symbol:"afSUI",decimals:9,address:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI",balance:"658417.270250603",logo_url:"https://aftermath.finance/coins/afsui.svg",coingecko_id:"",project_url:"",labels:[],is_trusted:!0,coin_type:"0xf325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"728051.794256833",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"179"}],farmsApr:"0.0464023636393077740203769764174118048604573922372862799918758555",farmingAprDisplay:"4.64%",feeApr:"0.0033899366954780440962433422983686951853302867916998498680873725",feeAprDisplay:"0.33%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.33%",totalAprDisplay:"4.97%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$3,208,847.14",tvl:"3208847.148567",volume24Display:"$299,303.7",fees24Display:"$29.93",isVaults:!0,farmsStatedTvl:"3193543.9222334375613019913559132207271233416",farmsStatedTvlDisplay:"$3,193,543.92",feeAndFarmsApr:"0.049792300334785818116620318715780500045787679028986129859963228",feeAndFarmsAprDisplay:"4.97%",farmsEffectiveTickLower:246,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.024903815942060126071216020214630750602010709809178108739814341",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xa67a2c2ea1bfad784e44eaf079fbf4523f549dcbe2e1c838989aef9383e372da",tickSpacing:"2",index:177,object:{coin_a:658460129348399,coin_b:728098232825595,tick_spacing:2,fee_rate:100,liquidity:"118870647915638752",current_sqrt_price:"18838643734050246682",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"116212414799563023"}}],points_released:"807216091435844318162583552000000",points_growth_global:"16349896683785349254",last_updated_time:1742298232}},is_pause:!1,index:177},isUnstableVault:!1,vaultId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",vaultsRewards:["f325ce1300e8dac124071d3152c5c5ee6174914f8bc2161e88329cf579246efc::afsui::AFSUI","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xff4cc0af0ad9d50d4a3264dfaafd534437d8b66c8ebe9f92b4c39d898d6870a3",clmmPoolAddress:"0xa528b26eae41bcfca488a9feaa3dca614b2a1d9b9b5c78c256918ced051d4c50",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",name:"vSUI - SUI",isReverse:!1,tokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"Volo Staked SUI",symbol:"vSUI",decimals:9,address:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT",balance:"486628.267188103",logo_url:"https://archive.cetus.zone/assets/image/sui/vsui.png",coingecko_id:"volo-staked-sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"600110.710175814",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!1,miningRewardList:[],miningAprList:[],haveFarming:!0,farmsRewarderList:[{coinType:"0x2::sui::SUI",emissionsEveryDay:"185"}],farmsApr:"0.0620621744498103516020273711367605077176330280935694176694522726",farmingAprDisplay:"6.2%",feeApr:"0.002839603128562170485549675399055637257215998153216582864163728",feeAprDisplay:"0.28%",miningAprTotal:"0",feeAndMiningAprDisplay:"0.28%",totalAprDisplay:"6.49%",fee:"0.0001",feeRate:"1",feeDisplay:"0.01%",tvlDisplay:"$2,510,926.42",tvl:"2510926.429555",volume24Display:"$196,180.07",fees24Display:"$19.61",isVaults:!0,farmsStatedTvl:"2467770.1483943725745405060221935259780125246",farmsStatedTvlDisplay:"$2,467,770.14",feeAndFarmsApr:"0.0649017775783725220875770465358161449748490262467860005336160006",feeAndFarmsAprDisplay:"6.49%",farmsEffectiveTickLower:198,farmsEffectiveTickUpper:630,displayFarmsEffectMinPrice:"1.019996310431884656665875778090597179747899267937297195270940555",displayFarmsEffectMaxPrice:"1.065023484625683903423611073362171479042941553679249804326112882",farmsPoolAddress:"0xf47709fd3cfb41252cda363f32dc29f34a6eaaf3729927753e75d73abc5f5181",tickSpacing:"2",index:175,object:{coin_a:486658132530526,coin_b:600167780501069,tick_spacing:2,fee_rate:100,liquidity:"2321413517446008068",current_sqrt_price:"18827542383370490467",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"1622087936923460"}}],points_released:"798552762549067364341645312000000",points_growth_global:"31233269161567778",last_updated_time:1742298387}},is_pause:!1,index:175},isUnstableVault:!1,vaultId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",vaultsRewards:["549e8b69270defbfafd4f94e17ec44cdbdd99820b33bda2278dea3b9a32d3f55::cert::CERT","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"cetus",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x5732b81e659bd2db47a5b55755743dde15be99490a39717abc80d62ec812bcb6",clmmPoolAddress:"0x6c545e78638c8c1db7a48b282bb8ca79da107993fcb185f75cedc1f5adb2f535",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",name:"SUI - USDC",isReverse:!0,tokenA:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"6470393.713602128",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenB:{name:"Native USDC",symbol:"USDC",decimals:6,address:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",balance:"6994556.776019",logo_url:"https://gateway.irys.xyz/EGpc2cG886CrWwLMneF2RyVpZ7D33a6znz6XE8n8nU7h",coingecko_id:"usd-coin",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"2936000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.0502302597554847335728918598923420349382548448020840644503019149",aprDisplay:"5.02%"},{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1121697952437793563166939156096767251552891223880879922231831828",aprDisplay:"11.21%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"1.039543323716705126378191733239089190848621545971870975717999998",feeAprDisplay:"103.95%",miningAprTotal:"0.1624000549992640898895857755020187600935439671901720566734850977",feeAndMiningAprDisplay:"120.19%",totalAprDisplay:"120.19%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$21,669,273.38",tvl:"21669273.389889",volume24Display:"$25,196,763.83",fees24Display:"$62,991.9",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.201943378715969216267777508741107950942165513162043032391485095",feeAndFarmsAprDisplay:"103.95%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:3137,object:{coin_a:7019812001233,coin_b:6481948428081738,tick_spacing:60,fee_rate:2500,liquidity:"7919792326420544",current_sqrt_price:"387301868084602258960",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"26676127812826120527"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"626847692134389392877037038",growth_global:"5045177556068499952"}}],points_released:"256416604813358187415601152000000",points_growth_global:"270015129121818228",last_updated_time:1742298325}},is_pause:!1,index:3137},isUnstableVault:!0,vaultId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",vaultsRewards:["0000000000000000000000000000000000000000000000000000000000000002::sui::SUI","dba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC","06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0x41a4ab1e82f90f5965bbcd828b8ffa13bab7560bd2e352ab067e343db552f527",clmmPoolAddress:"0xb8d7d9e66a60c239e7a60110efcf8de6c705580ed924d0dde141f4a0e2c90105",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",name:"DEEP - SUI",isReverse:!1,tokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"DeepBook Token",symbol:"DEEP",decimals:6,address:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",balance:"38148087.736923",logo_url:"https://gateway.irys.xyz/5LqWyWG5EU9wPknvW5rY6qSQPtnNAfP27X1PnAiesyFG",coingecko_id:"deep",project_url:"",labels:[],is_trusted:!0,coin_type:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"768472.179325603",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",emissionsEveryDay:"1165000000000"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",emissionsEveryDay:"127192000000"}],miningAprList:[{coinType:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",apr:"0.1993884036768800515130263443019041050862350874457143530980956206",aprDisplay:"19.93%"},{coinType:"0xdeeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP",apr:"0.7784493692315403527120642020519074423562040785734131037470931738",aprDisplay:"77.84%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.8393072486102057420293966869313929233028266682099922267918123755",feeAprDisplay:"83.93%",miningAprTotal:"0.9778377729084204042250905463538115474424391660191274568451887944",feeAndMiningAprDisplay:"181.71%",totalAprDisplay:"181.71%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$4,837,157.78",tvl:"4837157.781696",volume24Display:"$4,467,927.46",fees24Display:"$11,169.81",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"1.817145021518626146254487233285204470745265834229119683637001169",feeAndFarmsAprDisplay:"83.93%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:5056,object:{coin_a:38251906126071,coin_b:772407575970606,tick_spacing:60,fee_rate:2500,liquidity:"8295811276552121",current_sqrt_price:"110310797447865996218",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"248732139419810505007407408",growth_global:"1792995150775002027"}},{fields:{reward_coin:{fields:{name:"deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP"}},emissions_per_second:"27155998521102607513220741",growth_global:"449363617848666723"}}],points_released:"247161190782047378116444160000000",points_growth_global:"95762577535111090",last_updated_time:1742298343}},is_pause:!1,index:5056},isUnstableVault:!0,vaultId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",vaultsRewards:["deeb7a4662eec9f2f3def03fb937a663dddaa2e215b8078a284d026b7946c270::deep::DEEP","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"-",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xed754b6a3a6c7549c3d734cb7b464bccf9c805814b9e47b0cb99f43b4efcb4a6",clmmPoolAddress:"0xe01243f37f712ef87e556afb9b1d03d0fae13f96d324ec912daffc339dfdcbd2",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null},{poolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",name:"CETUS - SUI",isReverse:!1,tokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},tokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},displayTokenA:{name:"CETUS Token",symbol:"CETUS",decimals:9,address:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",balance:"18358179.80898744",logo_url:"https://archive.cetus.zone/assets/image/sui/cetus.png",coingecko_id:"cetus-protocol",project_url:"",labels:[],is_trusted:!0,coin_type:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"},displayTokenB:{name:"SUI Token",symbol:"SUI",decimals:9,address:"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",balance:"690115.203159796",logo_url:"https://archive.cetus.zone/assets/image/sui/sui.png",coingecko_id:"sui",project_url:"",labels:[],is_trusted:!0,coin_type:"0x2::sui::SUI"},haveMining:!0,miningRewardList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",emissionsEveryDay:"30000000000000"}],miningAprList:[{coinType:"0x06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS",apr:"0.3210654055390594303577545548609292263307138720994575650218205418",aprDisplay:"32.1%"}],haveFarming:!1,farmsRewarderList:[],farmsApr:"0",farmingAprDisplay:"",feeApr:"0.590449737261882520842413517032433640716917602858166433470039506",feeAprDisplay:"59.04%",miningAprTotal:"0.3210654055390594303577545548609292263307138720994575650218205418",feeAndMiningAprDisplay:"91.15%",totalAprDisplay:"91.15%",fee:"0.0025",feeRate:"25",feeDisplay:"0.25%",tvlDisplay:"$3,390,129.27",tvl:"3390129.276803",volume24Display:"$2,082,915.62",fees24Display:"$5,207.28",isVaults:!1,farmsStatedTvl:"",farmsStatedTvlDisplay:"",feeAndFarmsApr:"0.9115151428009419512001680718933628670476314749576239984918600478",feeAndFarmsAprDisplay:"59.04%",farmsEffectiveTickLower:0,farmsEffectiveTickUpper:0,displayFarmsEffectMinPrice:"",displayFarmsEffectMaxPrice:"",farmsPoolAddress:"",tickSpacing:"60",index:17,object:{coin_a:0x4146aa709cb218,coin_b:690940315126143,tick_spacing:60,fee_rate:2500,liquidity:"263293665799460652",current_sqrt_price:"3861763937780779107",rewarder_manager:{fields:{rewarders:[{fields:{reward_coin:{fields:{name:"06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS"}},emissions_per_second:"6405119470038038755555555556",growth_global:"15090167137337694524"}},{fields:{reward_coin:{fields:{name:"0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"}},emissions_per_second:"0",growth_global:"111871157481137955"}}],points_released:"1080698092786440464840523776000000",points_growth_global:"59477561914930359",last_updated_time:1742298373}},is_pause:!1,index:17},isUnstableVault:!0,vaultId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",vaultsRewards:["06864a6f921804860930db6ddbe2e16acdf8504495ea7481637a1c8b9a8fe54b::cetus::CETUS","0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"],category:"haedal",vaultsTvl:"--",vaultsTvlDisplay:"--",vaultsApy:"--",vaultsApyDisplay:"--",vaultsTotalApy:"--",vaultsTotalApyDisplay:"--",vaultsLstApy:"--",vaultsLstApyDisplay:"--",vaultsApr:"--",vaultsAprDisplay:"--",vaultsId:"0xbbd2d4850e4f238d39c3aa24957d2dfbb5787fa43d6c7de306bf15abe27f29f2",clmmPoolAddress:"0x2e041f3fd93646dcc877f783c1f2b7fa62d30271bdef1f21ef002cebf857bded",amountPerLpA:"0",amountPerLpB:"0",hardCapUSD:"0",depositRatioDisplay:"--",depositRatio:null}];function we(){const{fetchByApi:s}=pe(),{getFavoritePoolList:l}=he(),{setVaultStatsObj:a,setVaultBaseList:e,vaultBaseList:r,vaultStatsObj:t,setVaultStatsLoading:o,setVaultBaseListLoading:p}=q0(),C=async(Q=!0,g,O)=>{try{Q&&p(!0);const c=await l({is_vaults:!1,display_all_pools:!1,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",limit:100,offset:0,pools:g}),F=c==null?void 0:c.list.map(v=>{var M,I,n0,K,X;const n=[S0((M=v==null?void 0:v.tokenA)==null?void 0:M.coin_type),S0((I=v==null?void 0:v.tokenB)==null?void 0:I.coin_type)],S=v.isReverse?n.reverse():n,h=(n0=v==null?void 0:v.miningRewardList)==null?void 0:n0.map($=>S0($==null?void 0:$.coinType)),U=(K=v==null?void 0:v.miningRewardList)==null?void 0:K.map($=>S0($==null?void 0:$.coinType)),D=Array.from(new Set([...S,...h,...U]));return{...v,vaultsRewards:D,category:(X=O[v.poolAddress])==null?void 0:X.category}});return console.log("🚀 ~ file: useGetVaultList.ts:42 ~ getVaultBaseList ~ list:",F),F.length>0&&e(F),F}catch(c){console.log("getVaultBaseList Error:",c)}finally{p(!1)}return[]},j=async()=>{var Q;try{o(!0);const g=await s("/v3/sui/vaults/pools","GET"),O={};if(g!=null&&g.list)return(Q=g==null?void 0:g.list)==null||Q.forEach(c=>{var F,v;if(c.display||!re){const n=c==null?void 0:c.clmm_pool,S=c==null?void 0:c.id,h=c.category=="cetus"?u0(c==null?void 0:c.apy).add(u0(c.lst_apy)).toString():u0(c.apr).add(u0(c.apy)).toString(),U=K0(h,!0,!0),D=c==null?void 0:c.apy,M=K0(D,!0),I=c==null?void 0:c.lst_apy,n0=K0(I,!0),K=c==null?void 0:c.tvl,X=ue(K,"$"),$=c==null?void 0:c.apr,a0=K0($,!0),q=c==null?void 0:c.hard_cap_usd,H=u0(K).div(u0(q)).mul(100),x=h0(H,2);O[n]={vaultsApy:D,vaultsApyDisplay:M,vaultsTotalApy:h,vaultsTotalApyDisplay:U,vaultsLstApy:I,vaultsLstApyDisplay:n0,vaultsApr:$,vaultsAprDisplay:a0,clmmPoolAddress:n,vaultsId:S,vaultsTvl:K,vaultsTvlDisplay:X,amountPerLpA:(F=c==null?void 0:c.reward_per_lp)==null?void 0:F.amount_a_per_lp,amountPerLpB:(v=c==null?void 0:c.reward_per_lp)==null?void 0:v.amount_b_per_lp,category:c.category,hardCapUSD:q,depositRatio:H,depositRatioDisplay:x,lpTokentype:c==null?void 0:c.lp_type}}}),a(O),{vaultsStatsObj:O,vaultsList:g==null?void 0:g.list.filter(c=>c.display||!re)}}catch(g){return console.log("🚀🚀🚀 ~ useGetVaultList.ts:129 ~ getVaultsStats ~ error:",g),t}finally{o(!1)}return{}},B=async Q=>{try{const{vaultsStatsObj:g,vaultsList:O}=await j(),c=O.map(v=>v.clmm_pool),F=await C(!0,c,g);return T(Q,F,g)}catch(g){return console.error("getVaultList Error:",g),N(Q)}},N=Q=>{try{const g=r,O=t;if(g&&g.length>0)return T(Q,g,O);throw Error("Cache is null")}catch(g){return console.error("getVaultListFromCache Error:",g),De}},T=(Q,g,O)=>{const{sortRule:c,sortType:F}=Q,v=g==null?void 0:g.map(S=>{const h=O==null?void 0:O[S.poolAddress];return Ce(S,h)}),n=v==null?void 0:v.sort((S,h)=>{var U,D,M,I;return F==="apr"?c==="desc"?((U=h.vaultsTotalApy)==null?void 0:U.replace("%",""))-((D=S.vaultsTotalApy)==null?void 0:D.replace("%","")):((M=S.vaultsTotalApy)==null?void 0:M.replace("%",""))-((I=h.vaultsTotalApy)==null?void 0:I.replace("%","")):c==="desc"?h.vaultsTvl-S.vaultsTvl:S.vaultsTvl-h.vaultsTvl});return console.log("🚀🚀🚀 ~ useGetVaultList.ts:187 ~ sortVaultApiInfoList ~ result:",n),n};return{getVaultBaseList:C,getVaultsStats:j,getVaultListFromCache:N,getVaultList:B}}function Pe(s){const{getVaultList:l,getVaultListFromCache:a}=we(),[e,r]=i.useState(void 0),[t,o]=i.useState(!1),{setFromCoin:p,setToCoin:C}=fe(),j=async(N,T)=>{var O;(e===void 0||T)&&o(!0);const Q=await l({sortRule:"desc",sortType:"apr"}),g=((O=Q==null?void 0:Q.filter(c=>c.vaultsId===N))==null?void 0:O[0])||null;return o(!0),g&&r(g),g},B=N=>{var g;const T=a({sortRule:"desc",sortType:"apr"});return((g=T==null?void 0:T.filter(O=>O.vaultsId===N))==null?void 0:g[0])||null};return i.useEffect(()=>{if(s){const N=B(s);N&&r(N),j(s,!1)}},[s]),i.useEffect(()=>(e&&(p(e==null?void 0:e.displayTokenA),C(e==null?void 0:e.displayTokenB)),()=>{p(ce.clmm_swap.from_coin),C(ce.clmm_swap.to_coin)}),[e]),{vaultInfoLoading:t,apiVaultInfo:e,getApiVaultInfo:j}}const Ue=(s,l)=>({detailRefreshCount:0,contractClmmPoolObjLoading:!1,contractVaultObjLoading:!1,holdVaultsObj:{},holdTotalValue:{},contractClmmPoolObj:{},contractVaultObj:{},setContractVaultObj:a=>{const e=l().contractVaultObj;e[a.id]=a,s(()=>({contractVaultObj:{...e}}))},setContractVaultObjLoading:a=>{s(()=>({contractVaultObjLoading:a}))},setContractClmmPoolObjLoading:a=>{s(()=>({contractClmmPoolObjLoading:a}))},setContractClmmPoolObj:a=>{const e=l().contractClmmPoolObj;e[a.poolAddress]=a,s(()=>({contractClmmPoolObj:{...e}}))},setHoldTotalValue:(a,e)=>{const r=l().holdTotalValue;r[a]=e,s(()=>({holdTotalValue:{...r}}))},setDetailRefreshCount:a=>{s(()=>({detailRefreshCount:a}))},lpTokenInfo:{},setLpTokenInfo:a=>{const e=l().lpTokenInfo;s(()=>({lpTokenInfo:{...e,[a.coin_type]:a}}))}}),X0=se(te(Ue,{name:"useUnstableVaultsListStore",partialize:s=>{const{contractVaultObj:l,contractClmmPoolObj:a}=s;return{contractVaultObj:l,contractClmmPoolObj:a}}}));function Ee(s){const{contractVaultObj:l}=X0();return{contractVault:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function Le(s){const{contractClmmPoolObj:l}=X0();return{contractClmmInfo:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function pa(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function je(s,l,a,e,r=!1,t){var C0;const{volatileVaultsSdk:o}=I0(),{getTokenAmountValue:p}=$0(),{currentAccount:C}=Z0(),{setContractVaultObjLoading:j,setContractVaultObj:B,setContractClmmPoolObj:N,setContractClmmPoolObjLoading:T,setHoldTotalValue:Q,holdTotalValue:g,contractClmmPoolObjLoading:O,contractVaultObjLoading:c}=X0(),F=async(e0,o0=!1)=>{j(!0);try{const b=await o.Vaults.getPool(e0,o0);b&&B(b)}catch(b){console.error("fetchVaultInfoFromContract error:",b)}finally{j(!1)}},v=async(e0,o0=!1)=>{T(!0);try{const b=await o.CetusClmmSDK.Pool.getPool(e0,o0);b&&N(b)}catch(b){console.error("fetchClmmPoolFromContract error:",b)}finally{T(!1)}},{contractVault:n}=Ee(s),{tokenInfo:S}=le(n==null?void 0:n.lp_token_type),[h,U]=i.useState(),[D,M]=i.useState(!1),[I,n0]=i.useState(),K=async(e0,o0,b)=>{M(!0);try{const m=await o.Vaults.getOwnerVaultsBalance(e0,o0);if(m){const y=t0(m.lp_token_balance,b).toString();U({balance:m.lp_token_balance,balanceFormat:y,balanceDisplay:h0(y,void 0,void 0,ae.ROUND_DOWN).toString()}),n0(m)}}catch(m){console.error("fetchVaultBalance error:",m)}finally{M(!1)}},X=i.useMemo(()=>n&&h&&u0(h.balance).gt(0)?u0(h.balance).div(n.lp_token_treasury).mul(100).toString():"0",[n,h]),{contractClmmInfo:$}=Le(l),a0=e0=>{if(e0&&a&&e&&r!==void 0){const o0=O0(e0.amount_a.toString(),a.decimals).toString(),b=O0(e0.amount_b.toString(),e.decimals).toString();return{coinAmountA:o0,coinAmountB:b,displayCoinA:r?b:o0,displayCoinB:r?o0:b}}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[q,H]=i.useState();i.useEffect(()=>{I&&(C!=null&&C.address)?H(a0(I)):H({coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"})},[I==null?void 0:I.amount_a,I==null?void 0:I.amount_b,a==null?void 0:a.decimals,e==null?void 0:e.decimals,r,C==null?void 0:C.address]);const x=i.useMemo(()=>{if(n&&$&&!c&&!O){const e0=me("",n.lp_token_treasury,n,$);return a0(e0)}},[n==null?void 0:n.lp_token_treasury,$==null?void 0:$.current_sqrt_price,O,c]),W=i.useMemo(()=>{if($&&a&&e)return R0.sqrtPriceX64ToPrice(new Y0($.current_sqrt_price),a.decimals,e.decimals).toString()},[$==null?void 0:$.current_sqrt_price,a==null?void 0:a.decimals]),l0=i.useMemo(()=>{if(n&&a&&e)return R0.tickIndexToPrice(n.clmm_vault.wrapped_position.tick_lower_index,a.decimals,e.decimals).toString()},[(C0=n==null?void 0:n.clmm_vault)==null?void 0:C0.wrapped_position.tick_lower_index,a==null?void 0:a.decimals]),s0=i.useMemo(()=>{if(n&&a&&e)return R0.tickIndexToPrice(n.clmm_vault.wrapped_position.tick_upper_index,a.decimals,e.decimals).toString()},[n==null?void 0:n.clmm_vault.wrapped_position.tick_upper_index,a==null?void 0:a.decimals]),y0=p(a==null?void 0:a.coin_type,q==null?void 0:q.coinAmountA),k=p(e==null?void 0:e.coin_type,q==null?void 0:q.coinAmountB),[r0,c0]=i.useState(!0),[d0,T0]=i.useState("0"),[p0,w0]=i.useState("0"),v0=async(e0,o0)=>{if(a&&e){const b=await o.PythPrice.getLatestPrice([S0(a==null?void 0:a.coin_type),S0(e==null?void 0:e.coin_type)],!0);if(b){const m=b[S0(a==null?void 0:a.coin_type)],y=b[S0(e==null?void 0:e.coin_type)];if(m&&y){const u=u0(e0).mul(m.price).toString(),f=u0(o0).mul(y.price).toString();T0(u),w0(f),c0(!1)}}}};i.useEffect(()=>{x!=null&&x.coinAmountA&&(x!=null&&x.coinAmountB)&&t&&v0(x==null?void 0:x.coinAmountA,x==null?void 0:x.coinAmountB)},[x==null?void 0:x.coinAmountA,x==null?void 0:x.coinAmountB]);const m0=i.useMemo(()=>{if(W&&x)return de(x.coinAmountA,x.coinAmountB,W,!1)},[W,x]),[w,E]=i.useState("");i.useEffect(()=>{d0&&p0&&E(u0(d0).add(p0).toString())},[d0,p0]),i.useEffect(()=>{s&&y0&&k&&Q(s,u0(y0).add(k).toString())},[y0,k,s]);const Z=i.useMemo(()=>{if(s)return g[s]},[g,s]),[P,A]=i.useState(""),f0=async()=>{if(n&&n.hard_cap&&u0(n==null?void 0:n.hard_cap).gt(0)&&a&&e){const e0=n.quote_type==(a==null?void 0:a.address)?a:e,o0=await o.PythPrice.getLatestPrice([S0(e0.coin_type)],!0);if(o0){const b=o0[S0(e0.coin_type)];if(b){const m=u0(n.hard_cap).div(10**e0.decimals).mul(b.price).toString();console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:251 ~ getHardCapUSD ~ hardCapUSD:",m),A(m)}}}};i.useEffect(()=>{console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:272 ~ useEffect ~ contractVault:",n),n!=null&&n.hard_cap&&t&&f0()},[n==null?void 0:n.hard_cap,t]);const b0=i.useMemo(()=>{if(d0&&p0&&(n!=null&&n.hard_cap)&&u0(n==null?void 0:n.hard_cap).gt(0)&&a&&e){const e0=n.quote_type==(a==null?void 0:a.address)?a:e,o0=O0(n.hard_cap,e0.decimals).toString(),b=p(e0==null?void 0:e0.coin_type,o0);if(u0(d0).add(p0).gt(b))return!0}return!1},[d0,p0,n==null?void 0:n.hard_cap,a,e]);i.useEffect(()=>{C!=null&&C.address||(U(void 0),n0(void 0))},[C]);const P0=i.useMemo(()=>{if(P&&w)return u0(w).div(P).mul(100).toString()},[P,w]),x0=i.useMemo(()=>n&&u0(n.protocol_fee_rate).gt(0)?u0(n.protocol_fee_rate).div(1e4).mul(100).toString():"0",[n]),V0=async()=>{a&&e&&await o.PythPrice.getLatestPrice([S0(a==null?void 0:a.coin_type),S0(e==null?void 0:e.coin_type)],!0),x!=null&&x.coinAmountA&&(x!=null&&x.coinAmountB)&&await v0(x==null?void 0:x.coinAmountA,x==null?void 0:x.coinAmountB),await f0()},U0=i.useMemo(()=>{if(n&&a&&e)return n.quote_type==(a==null?void 0:a.address)?a:e},[n,a,e]),L0=i.useMemo(()=>n!=null&&n.hard_cap&&U0?u0(n==null?void 0:n.hard_cap).div(10**U0.decimals).toString():"0",[n==null?void 0:n.hard_cap,U0]);return{fetchVaultInfoFromContract:F,contractVault:n,lpTokenInfo:S,balanceInfo:h,sharePoolRate:X,fetchClmmPoolFromContract:v,holdCoinAmounts:q,totalValue:Z,maxPrice:s0,currPrice:W,minPrice:l0,vaultCoinAmounts:x,vaultsCoinAValue:d0,vaultsCoinBValue:p0,vaultsCoinPercent:m0,holdCoinAValue:y0,holdCoinBValue:k,fetchVaultBalance:K,isBalanceLoading:D,vaultTvl:w,hardCapUSD:P,gtAumLimit:b0,depositRatio:P0,performanceFee:x0,refreshPythPrice:V0,calculateVaultTvlLoading:r0,maxCapNum:L0,quoteCoin:U0,holdLpAmount:h==null?void 0:h.balance}}function ma(s,l){return{lpRate:i.useMemo(()=>s&&l?d(l).eq(0)?"100%":`${be(d(s).div(d(s).add(l)).mul(100).toString(),2,6)}%`:"0%",[s,l])}}function ba(s,l,a=!1){return{amountLimit:i.useMemo(()=>{if(l)return d(l).mul(a?1+s:1-s).toString()},[l,s,a])}}function Re(s){const{contractVaultObj:l}=q0();return{contractVault:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function Oe(s){const{contractClmmPoolObj:l}=q0();return{contractClmmInfo:i.useMemo(()=>{if(s)return l[s]},[l,s])}}function Fe(s){return{stakeProtocolName:i.useMemo(()=>{if(s){if(s.includes("HASUI"))return"Haedal";if(s.includes("AFSUI"))return"Aftermath";if(s.includes("CERT"))return"Volo"}},[s])}}function ya(s,l){const a=i.useMemo(()=>{if(l&&s)return`${N0(d(l.amountPerLpA).mul(s).toFixed(18,ae.ROUND_DOWN),l.displayTokenA.decimals)}  ${l==null?void 0:l.displayTokenA.symbol}`},[l==null?void 0:l.amountPerLpA,s]),e=i.useMemo(()=>{if(l&&s)return`${N0(d(l.amountPerLpB).mul(s).toFixed(18,ae.ROUND_DOWN),l.displayTokenB.decimals)}  ${l==null?void 0:l.displayTokenB.symbol}`},[l==null?void 0:l.amountPerLpB,s]);return{rewardPerA:a,rewardPerB:e}}function Me(s,l,a,e,r=!1){const{vaultsSdk:t}=I0(),{getTokenAmountValue:o}=$0(),{setContractVaultObjLoading:p,setContractVaultObj:C,setContractClmmPoolObj:j,setContractClmmPoolObjLoading:B,setHoldTotalValue:N,holdTotalValue:T,setLpTokenInfo:Q}=q0(),g=async(W,l0=!1)=>{p(!0);const s0=await t.Vaults.getVault(W,l0);console.log("🚀 ~ file: useGetVaultInfo.ts:13 ~ fetchVaultInfoFromContract ~ info:",s0),s0&&C(s0),p(!1)},O=async(W,l0=!1)=>{B(!0);const s0=await t.Pool.getPool(W,l0);console.log("🚀 ~ file: useGetVaultInfo.ts:33 ~ fetchClmmPoolFromContract ~ info:",s0),s0&&j(s0),B(!1)},{contractVault:c}=Re(s);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:71 ~ contractVault:",c);const{tokenInfo:F}=le(c==null?void 0:c.lp_token_type),{balanceInfo:v}=W0(F),n=i.useMemo(()=>c&&v?u0(v.balance).div(c.total_supply).mul(100).toString():"0",[c,v]),{contractClmmInfo:S}=Oe(l),h=W=>{if(c&&S&&a&&e&&r!==void 0){const l0=new Y0(S.current_sqrt_price),s0=R0.tickIndexToSqrtPriceX64(c.position.tick_lower_index),y0=R0.tickIndexToSqrtPriceX64(c.position.tick_upper_index),k=_e.getCoinAmountFromLiquidity(new Y0(W),l0,s0,y0,!1),r0=t0(k.coinA.toString(),a.decimals).toString(),c0=t0(k.coinB.toString(),e.decimals).toString();return{coinAmountA:r0,coinAmountB:c0,displayCoinA:r?c0:r0,displayCoinB:r?r0:c0}}},U=i.useMemo(()=>{if(c&&v&&S){const W=ye.get_share_liquidity_by_amount(c,v.balance),l0=h(W);if(l0)return l0}return{coinAmountA:"0",coinAmountB:"0",displayCoinA:"0",displayCoinB:"0"}},[v==null?void 0:v.balance,S==null?void 0:S.current_sqrt_price]),D=i.useMemo(()=>{if(c&&S){const W=h(c.liquidity);if(W)return W}},[c==null?void 0:c.liquidity,S==null?void 0:S.current_sqrt_price]),M=i.useMemo(()=>{if(S&&a&&e)return R0.sqrtPriceX64ToPrice(new Y0(S.current_sqrt_price),a.decimals,e.decimals).toString()},[S==null?void 0:S.current_sqrt_price,a==null?void 0:a.decimals]),I=i.useMemo(()=>{if(c&&a&&e)return console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:156 ~ minPrice ~ TickMath.tickIndexToPrice(contractVault.position.tick_lower_index, tokenA.decimals, tokenB.decimals).toString():",R0.tickIndexToPrice(c.position.tick_lower_index,a.decimals,e.decimals).toString()),R0.tickIndexToPrice(c.position.tick_lower_index,a.decimals,e.decimals).toString()},[c==null?void 0:c.position.tick_lower_index,a==null?void 0:a.decimals]),n0=i.useMemo(()=>{if(c&&a&&e)return R0.tickIndexToPrice(c.position.tick_upper_index,a.decimals,e.decimals).toString()},[c==null?void 0:c.position.tick_upper_index,a==null?void 0:a.decimals]),K=o(a==null?void 0:a.coin_type,U.coinAmountA),X=o(e==null?void 0:e.coin_type,U.coinAmountB),$=o(a==null?void 0:a.coin_type,D==null?void 0:D.coinAmountA),a0=o(e==null?void 0:e.coin_type,D==null?void 0:D.coinAmountB),q=i.useMemo(()=>{if(M&&D)return de(D.coinAmountA,D.coinAmountB,M,!1)},[M,D]),H=i.useMemo(()=>ue(u0($).add(a0).toString(),"$"),[$,a0]);console.log("🚀🚀🚀 ~ useGetContractVaultInfo.ts:263 ~ vaultTvl ~ vaultTvl:",H),i.useEffect(()=>{s&&N(s,u0(K).add(X).toString())},[K,X,s]);const x=i.useMemo(()=>{if(s)return T[s]},[T,s]);return{fetchVaultInfoFromContract:g,contractVault:c,lpTokenInfo:F,balanceInfo:v,sharePoolRate:n,fetchClmmPoolFromContract:O,holdCoinAmounts:U,totalValue:x,maxPrice:n0,currPrice:M,minPrice:I,vaultCoinAmounts:D,vaultsCoinAValue:$,vaultsCoinBValue:a0,vaultsCoinPercent:q,holdCoinAValue:K,holdCoinBValue:X,calculateCoinAmounts:h,vaultTvl:H,holdLpAmount:v==null?void 0:v.balance}}const Ie=(s,l)=>({amountInputA:"",amountInputB:"",setAmountInputA:a=>s(()=>({amountInputA:a})),setAmountInputB:a=>s(()=>({amountInputB:a}))}),$e=se(te(Ie,{name:"useVaultsAddStore"}));function qe(s,l,a,e,r,t,o,p,C,j){const{vaultsSlippage:B,mevProtect:N,maxCapForGas:T,transactionMode:Q,customGasPrice:g}=B0(),{fetchTokenPrices:O,getTokenAmountValue:c}=$0(),{setDetailRefreshCount:F}=X0(),{volatileVaultsSdk:v}=I0(),[n,S]=i.useState(0),{amountInputA:h,amountInputB:U,setAmountInputA:D,setAmountInputB:M}=$e(),[I,n0]=i.useState(!0),[K,X]=i.useState(""),$=i.useRef(""),a0=i.useRef(!0),q=i.useRef(""),H=i.useRef("");i.useEffect(()=>{$.current=K},[K]),i.useEffect(()=>{a0.current=I},[I]),i.useEffect(()=>{q.current=h},[h,t,U]),i.useEffect(()=>{H.current=U},[U,t,h]),i.useEffect(()=>{C0()},[o,s]),i.useEffect(()=>{const m=[];e&&r&&(m.push(e.coin_type),m.push(r.coin_type)),m.length>0&&O(m)},[e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]);const{balanceInfo:x}=W0(t?r:e),{balanceInfo:W}=W0(t?e:r),l0=c(t?r==null?void 0:r.coin_type:e==null?void 0:e.coin_type,h),s0=c(t?e==null?void 0:e.coin_type:r==null?void 0:r.coin_type,U),[y0,k]=i.useState(!1),r0=i.useMemo(()=>y0&&n==100?d(p).sub(d(C)).toString():d(l0||"0").add(s0||"0").toString(),[l0,s0,y0,n,p,C]),c0=i.useMemo(()=>{if(o)return d(r0).gt(d(1e4))},[r0,o]),d0=i.useMemo(()=>r0&&o?d(r0).gt(0)&&d(r0).lt(1e-4):!1,[o,r0]),T0=i.useMemo(()=>!!(p&&r0&&d(p).gt(0)&&d(r0).add(d(C)).gt(p)),[p,r0,C]),[p0,w0]=i.useState(!1),[v0,m0]=i.useState(!1),[w,E]=i.useState(void 0),P=H0(async(m,y,u,f=!1,_)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ uuid:",u),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:102 ~ preCalculate ~ amount:",m,_),e&&r&&a)try{m0(!0),F(0);const V=y?e:r,L=y?r:e,z=D0(m,V.decimals).toFixed(0),Y=D0(_||0,L.decimals).toFixed(0);let R;o?R=s=="both"?"FlexibleBoth":s==(e==null?void 0:e.coin_type)?"OnlyCoinA":"OnlyCoinB":R="FixedOneSide";let J={uuid:u,mode:"FixedOneSide",fixed_amount:"0",fixed_coin_a:!0,pool_id:a};o?(R==="OnlyCoinB"&&(J={uuid:u,mode:"OnlyCoinB",pool_id:a,coin_amount_b:z}),R==="OnlyCoinA"&&(J={uuid:u,mode:"OnlyCoinA",pool_id:a,coin_amount_a:z}),R=="FlexibleBoth"&&(J={uuid:u,mode:"FlexibleBoth",pool_id:a,coin_amount_a:y?z:Y,coin_amount_b:y?Y:z})):J={uuid:u,mode:"FixedOneSide",fixed_amount:z,fixed_coin_a:y,pool_id:a};const G=await v.Vaults.preCalculateDepositAmount(J,{onSuccess:(j0,z0)=>{z0==J.uuid&&(R=="FixedOneSide"?q.current||H.current:q.current&&H.current)&&(E({amount_a:f?G.deposit_amount_b:G.deposit_amount_a,amount_b:f?G.deposit_amount_a:G.deposit_amount_b,ft_amount:j0}),m0(!1))},onError:(j0,z0)=>{console.log("🚀 ~ preCalculate ~ error:",j0)}});if(console.log("🚀 ~ preCalculate ~ res:",{...G,uuid:u,assetAction:s,"+amountInputARef.current":+q.current}),$.current!==u)return;const i0={amount_a:f?G.deposit_amount_b:G.deposit_amount_a,amount_b:f?G.deposit_amount_a:G.deposit_amount_b};if((s=="both"&&o?q.current&&H.current:q.current||H.current)&&b(i0),i0.ft_amount=="0"){E(void 0);return}if(o){E(i0);return}s==="both"&&((f?!y:y)?+q.current?M(t0(i0.amount_b.toString(),f?e==null?void 0:e.decimals:r==null?void 0:r.decimals).toString()):M(""):+H.current?D(t0(i0.amount_a.toString(),f?r==null?void 0:r.decimals:e==null?void 0:e.decimals).toString()):D("")),(s!=="both"||!o)&&E(i0)}catch(V){String(V).indexOf("has reached hardCap")>-1,console.log("🚀 ~ preCalculate ~ error:",V),E(void 0)}finally{}},500),A=(m,y,u=!0,f)=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:294 ~ handleAmountInputChange ~ amount:",m),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:294 ~ handleAmountInputChange ~ other_amount:",f),k(!1),n0(y),!m&&!f){console.log("🚀🚀🚀 ~ useVaultsAdd.ts:296 ~ handleAmountInputChange ~ resetInputAmount:"),C0();return}if((t?!y:y)?(D(m),u&&!o&&M("")):(M(m),u&&!o&&D("")),!j)if(+m){if(o&&s=="both"&&(!m||!f)){S(0),E(void 0);return}const _=E0();X(_),P(m,y,_,t,f)}else o?s=="both"?(E(void 0),S(0)):(s==(e==null?void 0:e.coin_type)||s==(r==null?void 0:r.coin_type))&&C0():C0()},f0=()=>{const m=a0.current?t?H.current:q.current:t?q.current:H.current,y=a0.current?t?q.current:H.current:t?H.current:q.current;if(!(o&&s=="both"&&(!m||!y))){if(+m){const u=E0();X(u),P(m,a0.current,u,t,y)}console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ other_amount:",y),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:329 ~ reCalculateResult ~ amount:",m)}},[b0,P0]=i.useState(!1),{signAndExecuteTransaction:x0,transactionConfirmation:V0,transactionRejected:U0}=A0(),L0=async()=>{if(a){P0(!0);const m={pool_id:a,amount_a:String(t?D0(U||0,String(e==null?void 0:e.decimals)):D0(h||0,String(e==null?void 0:e.decimals))),amount_b:String(t?D0(h||0,String(r==null?void 0:r.decimals)):D0(U||0,String(r==null?void 0:r.decimals)))};console.log("🚀🚀🚀 ~ useVaultsAdd.ts:261 ~ doAddAction ~ depositParams:",m);const y={getShowInfo:(u,f,_)=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:306 ~ doAddAction ~ res:",_);const V="Deposit "+[_0(h,t?r==null?void 0:r.symbol:e==null?void 0:e.symbol),_0(U,t?e==null?void 0:e.symbol:r==null?void 0:r.symbol)].filter(Boolean).join(" and "),L={modalDescriptionText:V,toastTitleText:V};if(u==="success"){let z=h,Y=U;_&&_.events.forEach(J=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:367 ~ doAddAction ~ event:",J),J.type.indexOf("::pool::DepositEvent")>-1&&e&&r&&(z=String(O0(J.parsedJson.amount_a,e.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:361 ~ doAddAction ~ amountA:",z),Y=String(O0(J.parsedJson.amount_b,r.decimals)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:363 ~ doAddAction ~ amountB:",Y))});const R="Deposit "+[_0(t?Y:z,t?r==null?void 0:r.symbol:e==null?void 0:e.symbol),_0(t?z:Y,t?e==null?void 0:e.symbol:r==null?void 0:r.symbol)].filter(Boolean).join(" and ");L.toastDescriptionContent=R,L.modalDescriptionText=R,L.toastTitleText="Deposit successful"}return L}};V0(y);try{const u=new ne;await v.Vaults.buildDepositPayload(m,u),await x0(u,y,{useMev:N,txAction:"signTransactionBlock",useFastMode:Q==="Fast Mode",maxCapForGas:T,customGasPrice:g,msafeParams:{action:k0.AddVaultsPosition,txbParams:m}})?(C0(),l()):f0()}catch{U0(y)}}},C0=()=>{console.log("🚀🚀🚀 ~ useVaultsAdd.ts:487 ~ resetInputAmount ~ resetInputAmount:"),S(0),D(""),M(""),E(void 0),X("")},o0=H0(async(m,y)=>{if(d(m).lte(0)){E(void 0),D(""),M("");return}if(m0(!0),F(0),e&&r&&a){const u=d(p).sub(d(C)).mul(m).div(100).toString();let f;o?f=s=="both"?"FlexibleBoth":s==(e==null?void 0:e.coin_type)?"OnlyCoinA":"OnlyCoinB":f="FixedOneSide";const _={mode:f,pool_id:a,amount_usd:u,uuid:y},V=await v.Vaults.preCalculateDepositValue(_,{onSuccess:(z,Y)=>{Y==_.uuid&&(f=="FixedOneSide"?q.current||H.current:q.current&&H.current)&&(E({amount_a:t?V.deposit_amount_b:V.deposit_amount_a,amount_b:t?V.deposit_amount_a:V.deposit_amount_b,ft_amount:z}),m0(!1))},onError:(z,Y)=>{console.log("🚀 ~ preCalculate ~ error:",z)}});if($.current!==y)return;const L={amount_a:t?V.deposit_amount_b:V.deposit_amount_a,amount_b:t?V.deposit_amount_a:V.deposit_amount_b};E(L),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:524 ~ handlePercentInputChange ~ wrapRes:",L,e,r),V&&(D(t0(L.amount_a.toString(),t?r==null?void 0:r.decimals:e==null?void 0:e.decimals).toString()),M(t0(L.amount_b.toString(),t?e==null?void 0:e.decimals:r==null?void 0:r.decimals).toString())),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:520 ~ handlePercentInputChange ~ res:",V)}},500),b=async m=>{var y,u;if(!j&&e&&r){const f=await v.PythPrice.getLatestPrice([S0(e==null?void 0:e.coin_type),S0(r==null?void 0:r.coin_type)],!0),_=(y=f==null?void 0:f[S0(t?r==null?void 0:r.coin_type:e==null?void 0:e.coin_type)])==null?void 0:y.price,V=(u=f==null?void 0:f[S0(t?e==null?void 0:e.coin_type:r==null?void 0:r.coin_type)])==null?void 0:u.price,L=O0(m.amount_a,t?r==null?void 0:r.decimals:e==null?void 0:e.decimals),z=O0(m.amount_b,t?e==null?void 0:e.decimals:r==null?void 0:r.decimals),Y=d(L).mul(_).add(d(z).mul(V)).toString(),R=d(p).sub(d(C)).toString(),J=d(Y).div(d(R)).mul(100),G=E0();X(G),J.gt(100)?(S(100),o0(100,G)):(q.current||H.current)&&S(h0(J.toString(),2)),console.log("🚀🚀🚀 ~ useVaultsAdd.ts:211 ~ calculateDepositRatioWithAvailableCapacity ~ ratio:",J.toString())}};return{handleAmountInputChange:A,fixAmountA:I,amountInputA:h,amountInputB:U,balanceInfoA:x,balanceInfoB:W,amountValueA:l0,amountValueB:s0,preCalculateLoading:p0,inputTotalValue:r0,calculateResult:w,doAddAction:L0,reCalculateResult:f0,overHardtop:T0,zapNumError:c0,calculateLpLoading:v0,inputTotalValueError:d0,debouncedPreCalculateDepositValue:o0,percentage:n,setPercentage:S,setIsSlider:k,isSlider:y0,setUuid:X}}function ze(s,l,a,e,r){const{fetchTokenPrices:t,getTokenAmountValue:o}=$0(),{setDetailRefreshCount:p}=q0(),{vaultsSdk:C}=I0(),{vaultsSlippage:j,mevProtect:B,maxCapForGas:N,transactionMode:T,customGasPrice:Q}=B0(),[g,O]=i.useState(""),[c,F]=i.useState(""),[v,n]=i.useState(!0),[S,h]=i.useState(""),U=i.useRef(""),D=i.useRef(!0),M=i.useRef(""),I=i.useRef("");i.useEffect(()=>{U.current=S},[S]),i.useEffect(()=>{D.current=v},[v]),i.useEffect(()=>{M.current=g},[g]),i.useEffect(()=>{I.current=c},[c]),i.useEffect(()=>{const w=[];e&&r&&(w.push(e.coin_type),w.push(r.coin_type)),w.length>0&&t(w)},[e==null?void 0:e.coin_type,r==null?void 0:r.coin_type]);const{balanceInfo:n0}=W0(e),{balanceInfo:K}=W0(r),X=o(e==null?void 0:e.coin_type,g),$=o(r==null?void 0:r.coin_type,c),a0=i.useMemo(()=>d(X||"0").add($||"0").toString(),[X,$]),[q,H]=i.useState(!1),[x,W]=i.useState(void 0),s0=H0(async(w,E,Z)=>{if(e&&r&&a)try{H(!0),p(0);const A=D0(w,(E?e:r).decimals).toFixed(0),f0={vault_id:a,fix_amount_a:E,input_amount:A,slippage:Number(j),request_id:Z,side:s==="both"?Q0.Both:Q0.OneSide};console.log("🚀 ~ preCalculate ~ params:",f0,Z);const b0=await C.Vaults.calculateDepositAmount(f0,!0,!0);console.log("🚀 ~ preCalculate ~ res:",{...b0,uuid:Z,assetAction:s,"+amountInputARef.current":+M.current}),U.current===Z&&(s==="both"&&(E?+M.current?(F(t0(b0.amount_b.toString(),r.decimals).toString()),W(b0)):F(""):+I.current?(O(t0(b0.amount_a.toString(),e.decimals).toString()),W(b0)):O("")),s!=="both"&&W(b0))}catch(P){console.log("🚀 ~ preCalculate ~ error:",P),W(void 0)}finally{H(!1)}},500),y0=(w,E,Z=!0)=>{if(n(E),E?(O(w),Z&&F("")):(F(w),Z&&O("")),+w){const P=J0.isSuiCoin(s);if(P&&d(w).lt(3)){h(""),W(void 0),H(!1);return}if(!P){const f0=o(s,w);if(d(f0).gt(1e4)){h(""),W(void 0),H(!1);return}}const A=E0();h(A),s==="both"&&H(!0),s0(w,E,A)}else w0()},k=()=>{const w=D.current?M.current:I.current;if(+w){const E=E0();h(E),s0(w,D.current,E)}};i.useEffect(()=>{w0()},[s]);const[r0,c0]=i.useState(!1),{signAndExecuteTransaction:d0,transactionRejected:T0}=A0(),p0=async()=>{if(a&&x){c0(!0),D0(v?g:c,9);const w={vault_id:a,slippage:Number(j),deposit_result:x},E={getShowInfo:(Z,P)=>{const A="Deposit "+[_0(g,e==null?void 0:e.symbol),_0(c,r==null?void 0:r.symbol)].filter(Boolean).join(" and "),f0={modalDescriptionText:A,toastTitleText:A};if(Z==="success"){let b0=g,P0=c;P&&(b0=d(g).gt(0)?M0(P,e)||g:"",P0=d(c).gt(0)?M0(P,r)||c:"");const x0="Deposit "+[_0(b0,e==null?void 0:e.symbol),_0(P0,r==null?void 0:r.symbol)].filter(Boolean).join(" and ");f0.toastDescriptionContent=x0,f0.modalDescriptionText=x0,f0.toastTitleText="Deposit successful"}return f0}};try{await d0(async()=>{const A=new ne;return A.setSender(C.senderAddress),await C.Vaults.deposit(w,A),console.log("🚀 ~ doAddAction ~ params:",{params:w,tx:A}),A},E,{useMev:B,txAction:"signTransactionBlock",useFastMode:T==="Fast Mode",maxCapForGas:N,customGasPrice:Q,msafeParams:{action:k0.AddVaultsPosition,txbParams:w}})?(w0(),l()):k()}catch(Z){console.log("🚀 ~ doAddAction ~ error:",Z),T0(E)}}},w0=()=>{O(""),F(""),H(!1),W(void 0),h("")},{stakeProtocolName:v0}=Fe(D.current?r==null?void 0:r.coin_type:e==null?void 0:e.coin_type),m0=i.useMemo(()=>{if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:291 ~ showOnlySideTips ~ assetAction:",s),s!=="both"&&e&&r){const w=D.current?g:c,E=D.current?e:r,Z=D.current?r:e;if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:290 ~ showOnlySideTips ~ calculateResult:",x),x&&x.swap_result){const P=t0(x.swap_result.swap_in_amount,E.decimals),A=t0(d(x.swap_result.swap_out_amount).mul(1-Number(j)).toString(),Z.decimals);return J0.isSuiCoin(E.coin_type)?`By depositing ${G0(h0(w,9).toString(),9)} SUI, ${G0(h0(P,9).toString(),9)} SUI will be converted to ${Z==null?void 0:Z.symbol} via ${v0} liquid staking and added to the pool together.`:`By depositing ${G0(h0(w,9).toString(),9)} ${E==null?void 0:E.symbol}, ${G0(h0(P,9).toString(),9)} ${E==null?void 0:E.symbol} will be traded for ${G0(h0(A,9).toString(),9)} ${Z==null?void 0:Z.symbol} and then added to the pool together.`}else if(!J0.isSuiCoin(s)){const P=o(s,w);if(console.log("🚀🚀🚀 ~ useVaultsAdd.ts:313 ~ showOnlySideTips ~ amountValue:",P),d(P).gt(1e4))return"Single-asset deposit can't be higher than $10,000 at a time."}}},[s,x,g,c]);return{handleAmountInputChange:y0,fixAmountA:v,amountInputA:g,amountInputB:c,balanceInfoA:n0,balanceInfoB:K,amountValueA:X,amountValueB:$,preCalculateLoading:q,inputTotalValue:a0,calculateResult:x,showOnlySideTips:m0,doAddAction:p0,reCalculateResult:k}}function Ge(s,l,a,e,r,t,o,p,C,j,B,N,T,Q){const{currentAccount:g}=Z0(),O=i.useMemo(()=>{const c={text:void 0,disabled:!1};if(!(g!=null&&g.address))return c.text="Connect Wallet",c.disabled=!1,c;if(!C||!j)return c.disabled=!0,c;if(l==="both"&&(!+e&&!+r||s&&(!+e||!+r))||l!=="both"&&!(+e||+r))return c.text="Enter an amount",c.disabled=!0,c;if(l==="both"){if(d(e).gt(o||"0"))return c.disabled=!0,c.text=a?`Insufficient ${C==null?void 0:C.symbol} Balance`:"Invalid Amount",c;if(d(r).gt(p||"0"))return c.disabled=!0,c.text=a?`Insufficient ${j==null?void 0:j.symbol} Balance`:"Invalid Amount",c}if(l!=="both"){if(d(e).gt(o||"0"))return c.disabled=!0,c.text=a?`Insufficient ${C==null?void 0:C.symbol} Balance`:"Invalid Amount",c;if(d(r).gt(p||"0"))return c.disabled=!0,c.text=a?`Insufficient ${j==null?void 0:j.symbol} Balance`:"Invalid Amount",c}return a&&B&&!T||a&&s&&Q?(c.text="Enter an amount",c.disabled=!0,c):((N&&N.ft_amount=="0"||N&&N.burn_ft_amount=="0"||!N)&&(c.disabled=!0,c.text="Enter an amount"),c)},[g==null?void 0:g.address,l,e,r,o,p,N,a,B]);return{btnText:O.text,btnDisabled:O.disabled}}function Ne(s,l,a,e,r,t,o,p,C,j){const{currentAccount:B}=Z0(),N=i.useMemo(()=>{const T={text:void 0,disabled:!1};if(!(B!=null&&B.address))return T.text="Connect Wallet",T.disabled=!1,T;if(!C||!j)return T.disabled=!0,T;if(l==="both"&&!+e&&!+r)return T.text="Enter an amount",T.disabled=!0,T;if(l!=="both"){if(!(+e||+r))return T.text="Enter an amount",T.disabled=!0,T;if(a){const Q=J0.isSuiCoin(l);if(Q&&l===(C==null?void 0:C.coin_type)&&d(e).lt(3)||Q&&l===(j==null?void 0:j.coin_type)&&d(r).lt(3))return T.text="Minimum deposit 3 SUI",T.disabled=!0,T}}if(l==="both"){if(d(e).gt(o||"0"))return T.disabled=!0,T.text=a?`Insufficient ${C==null?void 0:C.symbol} Balance`:"Invalid Amount",T;if(d(r).gt(p||"0"))return T.disabled=!0,T.text=a?`Insufficient ${j==null?void 0:j.symbol} Balance`:"Invalid Amount",T}if(l!=="both"){if(t&&d(e).gt(o||"0"))return T.disabled=!0,T.text=a?`Insufficient ${C==null?void 0:C.symbol} Balance`:"Invalid Amount",T;if(!t&&d(r).gt(p||"0"))return T.disabled=!0,T.text=a?`Insufficient ${j==null?void 0:j.symbol} Balance`:"Invalid Amount",T}return s&&l!=="both"?(T.text=a?"Zap In":"Zap Out",T):(console.log("🚀🚀🚀 ~ submitBtnInfo ~ btnInfo:",T),T)},[B==null?void 0:B.address,l,e,r,o,p]);return{btnText:N.text,btnDisabled:N.disabled}}function He(s,l,a,e,r,t,o,p,C,j){const{vaultsSlippage:B,mevProtect:N,maxCapForGas:T,transactionMode:Q,customGasPrice:g}=B0(),{currentAccount:O}=Z0(),{setDetailRefreshCount:c}=X0(),{fetchTokenPrices:F,getTokenAmountValue:v}=$0(),{volatileVaultsSdk:n}=I0(),[S,h]=i.useState(""),[U,D]=i.useState(""),[M,I]=i.useState(!0),[n0,K]=i.useState(""),[X,$]=i.useState(!1),[a0,q]=i.useState(0),H=i.useRef(n0),x=i.useRef(M),W=i.useRef(S),l0=i.useRef(U),s0=i.useRef(X),y0=i.useRef(a0);i.useEffect(()=>{y0.current=a0},[a0]),i.useEffect(()=>{s0.current=X},[X]),i.useEffect(()=>{H.current=n0},[n0]),i.useEffect(()=>{x.current=M},[M]),i.useEffect(()=>{W.current=S},[S,p,U]),i.useEffect(()=>{l0.current=U},[U,p,S]),i.useEffect(()=>{const u=[];t&&o&&(u.push(t.coin_type),u.push(o.coin_type)),u.length>0&&F(u)},[t==null?void 0:t.coin_type,o==null?void 0:o.coin_type]);const[k,r0]=i.useState("0"),[c0,d0]=i.useState("0"),[T0,p0]=i.useState(!1);i.useEffect(()=>{a&&(a!=null&&a.coinAmountA)&&(a!=null&&a.coinAmountB)&&w0()},[a==null?void 0:a.coinAmountA,a==null?void 0:a.coinAmountB]),i.useEffect(()=>{V0()},[j==null?void 0:j.current_sqrt_price]);const w0=async()=>{console.log("🚀🚀🚀 ~ useVaultsRemove.ts:103 ~ calculateAvailableAmount ~ calculateAvailableAmount:");const{coinAmountA:u,coinAmountB:f}=a;if(p0(!1),s==="both"){r0(p?f:u),d0(p?u:f);return}const _=s===(t==null?void 0:t.coin_type),V=_?f:u,L=_?u:f;if(d(V).gt(0)){p0(!0);const z=E0();K(z);const Y=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ tokenA?.coin_type :",t==null?void 0:t.coin_type),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:127 ~ calculateAvailableAmount ~ assetAction:",s);const R={pool_id:r,mode:Y,burn_lp_amount:e,available_lp_amount:e};console.log("🚀🚀🚀 ~ useVaultsRemove.ts:131 ~ calculateAvailableAmount ~ params:",R);try{const J=await n.Vaults.preCalculateWithdrawAmount(R);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:138 ~ calculateAvailableAmount ~ res:",J),Y=="OnlyCoinA"){if((t==null?void 0:t.decimals)===void 0)throw new Error("tokenA.decimals is undefined");const G=t0(J.receive_amount_a,t==null?void 0:t.decimals);p?d0(G):r0(G)}else{if((o==null?void 0:o.decimals)===void 0)throw new Error("tokenB.decimals is undefined");const G=t0(J.receive_amount_b,o==null?void 0:o.decimals);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:148 ~ calculateAvailableAmount ~ amount:",G),p?r0(G):d0(G)}p0(!1)}catch(J){console.log("🚀🚀🚀 ~ useVaultsRemove.ts:145 ~ calculateAvailableAmount ~ error:",J)}}else _?r0(L):d0(L)},v0=v(p?o==null?void 0:o.coin_type:t==null?void 0:t.coin_type,S),m0=v(p?t==null?void 0:t.coin_type:o==null?void 0:o.coin_type,U),w=i.useMemo(()=>d(v0||"0").add(m0||"0").toString(),[v0,m0]);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueB:",m0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:170 ~ inputTotalValue ~ amountValueA:",v0);const[E,Z]=i.useState(!1),[P,A]=i.useState(void 0),b0=H0(async(u,f,_,V,L,z)=>{if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:210 ~ removePercent:",L),d(L).gt(100)){K(""),A(void 0),Z(!1);return}if(t&&o&&r&&e){if(!L){if(_){if(d(u).gt(p?c0:k)){K(""),A(void 0),Z(!1);return}}else if(d(u).gt(p?k:c0)){K(""),A(void 0),Z(!1);return}}c(0),(+W.current||+l0.current||L)&&Z(!0);const R=f?N0(u,0,!0):D0(u,(_?t:o).decimals).toFixed(0);let J;if(s=="both")J={pool_id:r,mode:"FixedOneSide",burn_lp_amount:String(R)};else{const G=s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB";J={pool_id:r,mode:G,burn_lp_amount:String(R)}}console.log("🚀 ~ preCalculate ~ params:",J,V,L);try{const G=await n.Vaults.preCalculateWithdrawAmount(J);console.log("🚀 ~ preCalculate ~ res:",{...G,uuid:V,assetAction:s});const i0={amount_a:p?G.receive_amount_b:G.receive_amount_a,amount_b:p?G.receive_amount_a:G.receive_amount_b,burn_ft_amount:G.burn_lp_amount,swap:G.swap};if(i0.burn_ft_amount=="0"){Z(!1),A(void 0);return}const j0=t0(i0.amount_a.toString(),p?o.decimals:t.decimals).toString();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:271 ~ preCalculate ~ tokenA:",t);const z0=t0(i0.amount_b.toString(),p?t.decimals:o.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:256 ~ preCalculate ~ amountA:",j0,t.decimals,z0,o==null?void 0:o.decimals),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:258 ~ preCalculate ~ amountB:",z0),s==="both"&&(f&&!z?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:284 ~ preCalculate ~ is_ft_input:",f),(p?!_:_)?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:289 ~ preCalculate ~ +amountInputARef.current:",+W.current),+W.current?(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:293 ~ preCalculate ~ setAmountInputB:"),D(t0(i0.amount_b.toString(),p?t==null?void 0:t.decimals:o==null?void 0:o.decimals).toString()),A(i0)):D("")):+l0.current?(h(t0(i0.amount_a.toString(),p?o==null?void 0:o.decimals:t==null?void 0:t.decimals).toString()),A(i0)):h("")):A(i0)),s!=="both"){if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:336 ~ preCalculate ~ removePercent:",L),L){const ie=t0(d(i0.amount_a).add(i0.amount_b||"0").toString(),p?o.decimals:t.decimals).toString();if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:344 ~ preCalculate ~ amountA:",ie),p?!_:_)L===100&&(i0.burn_ft_amount=e);else{const Ze=t0(d(i0.amount_a).add(i0.amount_b||"0").toString(),p?t.decimals:o.decimals).toString();L===100&&(i0.burn_ft_amount=e)}}A(i0)}}catch(G){console.log("🚀 ~ preCalculate ~ error:",G),A(void 0)}finally{Z(!1)}}},500),P0=(u,f,_=!1,V=!1,L=!0)=>{if(_){x0(100);return}if(V){x0(50);return}I(f),$(!1),(p?!f:f)?(h(u),L?D(""):V0()):(D(u),L?h(""):V0());let z,Y;if((p?!f:f)?(Y=d(u).div(k),z=N0(d(e).mul(Y).toString(),0,!0)):(Y=d(u).div(c0),z=N0(d(e).mul(Y).toString(),0,!0)),+z){const R=E0();K(R),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ removeLpAmount:",z),b0(String(z),!0,f,R,Y.mul(100).toNumber(),Y.gte(100))}else m()},x0=u=>{if($(!0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:474 ~ handlePercentInputChange ~ percent:",u),q(u),e&&+e){if(u===0)m();else{const f=s===(t==null?void 0:t.coin_type);if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:415 ~ handlePercentInputChange ~ fix_amount_a:",f),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountB:",c0),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:515 ~ handlePercentInputChange ~ availableAmountA:",k),I(f),s=="both"?(h(d(k).mul(d(u).div(100)).toString()),D(d(c0).mul(d(u).div(100)).toString())):s===(t==null?void 0:t.coin_type)?p?D(d(c0).mul(d(u).div(100)).toString()):h(d(k).mul(d(u).div(100)).toString()):p?h(d(k).mul(d(u).div(100)).toString()):D(d(c0).mul(d(u).div(100)).toString()),u===100||s==="both"){const _=E0();K(_);const V=u===100?e:d(e).mul(u).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:521 ~ handlePercentInputChange ~ removeLpAmount:",V),b0(V,!0,f,_,u,!0)}else{I(f),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:466 ~ handlePercentInputChange ~ assetAction:",s),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:467 ~ handlePercentInputChange ~ tokenA?.coin_type:",t==null?void 0:t.coin_type);const _=d(e).mul(u).div(100).toFixed();console.log("🚀🚀🚀 ~ useVaultsRemove.ts:455 ~ handlePercentInputChange ~ getAmount:",_),b0(_,!0,f,n0,u,!0)}}console.log("🚀🚀🚀 ~ useVaultsRemove.ts:520 ~ handlePercentInputChange ~ availableAmountA:",k)}},V0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:X,removePercent:a0}),X)x0(a0);else{const u=x.current?p?l0.current:W.current:p?W.current:l0.current;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:510 ~ reCalculateResult ~ amount:",u),P0(u,x.current)}};i.useEffect(()=>{if(!X)if(P&&e&&+e){let u=Number(d(P.burn_ft_amount).div(e).mul(100));u>100&&(u=100),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:502 ~ useEffect ~ percent:",u),q(u)}else q(0)},[P==null?void 0:P.burn_ft_amount,X]);const[U0,L0]=i.useState(!1),{signAndExecuteTransaction:C0,transactionConfirmation:e0,transactionRejected:o0}=A0(),b=async()=>{if(r&&P&&e){L0(!0);let u;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:567 ~ doRemoveAction ~ calculateResult:",P),s==="both"?u={pool_id:r,burn_lp_amount:P.burn_ft_amount,mode:"FixedOneSide",slippage:Number(B)}:(t==null||t.coin_type,a0===100?u={pool_id:r,burn_lp_amount:e,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(B)}:u={pool_id:r,burn_lp_amount:P.burn_ft_amount,mode:s==(t==null?void 0:t.coin_type)?"OnlyCoinA":"OnlyCoinB",slippage:Number(B)}),console.log("🚀 ~ doRemoveAction ~ params:",JSON.stringify(u));const f={getShowInfo:(_,V)=>{const L="Withdraw "+[_0(S,p?o==null?void 0:o.symbol:t==null?void 0:t.symbol),_0(U,p?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and "),z={modalDescriptionText:L,toastDescriptionContent:L};if(_==="success"){let Y=S,R=U;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:582 ~ doRemoveAction ~ balanceChanges:",V),V&&(Y=d(S).gt(0)?M0(V,p?o:t)||S:"",R=d(U).gt(0)?M0(V,p?t:o)||U:""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:584 ~ doRemoveAction ~ amount:",Y,R);const J=[_0(p?R:Y,p?o==null?void 0:o.symbol:t==null?void 0:t.symbol),_0(p?Y:R,p?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean),G=(J&&J.length>1?"Removed ":"Withdraw ")+[_0(Y,p?o==null?void 0:o.symbol:t==null?void 0:t.symbol),_0(R,p?t==null?void 0:t.symbol:o==null?void 0:o.symbol)].filter(Boolean).join(" and ");z.toastDescriptionContent=G,z.modalDescriptionText=G}return z}};e0(f);try{const _=await n.Vaults.buildWithdrawPayload(u);await C0(_,f,{useMev:N,txAction:"signTransactionBlock",useFastMode:Q==="Fast Mode",maxCapForGas:T,customGasPrice:g,msafeParams:{action:k0.AddVaultsPosition,txbParams:u}})?(m(),l()):V0(),L0(!1)}catch(_){console.log("🚀 ~ doAddAction ~ error:",_),L0(!1),o0(f)}}},m=()=>{h(""),D(""),W.current="",l0.current="",q(0),Z(!1),A(void 0),K(""),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:697 ~ resetInputAmount ~ resetInputAmount:")},y=i.useMemo(()=>{var u;if(console.log("🚀🚀🚀 ~ useVaultsRemove.ts:622 ~ showOnlySideTips ~ calculateResult:",P),P&&(P!=null&&P.swap)&&s!=="both"&&t&&o){const f=M?p?U:S:p?S:U;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:653 ~ showOnlySideTips ~ amount:",f);const _=x.current?t:o;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:651 ~ showOnlySideTips ~ fixToken:",_);const V=x.current?o:t;console.log("🚀🚀🚀 ~ useVaultsRemove.ts:652 ~ showOnlySideTips ~ targetToken:",V);const L=t0((u=P==null?void 0:P.swap)==null?void 0:u.swap_amount_in,V.decimals),z=h0(t0(d(P.swap.swap_amount_out).mul(1-Number(B)).toString(),_.decimals),_.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:B,calculateResult:P,swapOutAmount:z}),console.log("🚀🚀🚀 ~ useVaultsRemove.ts:644 ~ showOnlySideTips ~ ",`To withdraw ${f} ${_==null?void 0:_.symbol}, ${L} ${V==null?void 0:V.symbol} in the pool will be traded for ${z} ${_==null?void 0:_.symbol}`),`To withdraw ${h0(f)} ${_==null?void 0:_.symbol}, ${h0(L)} ${V==null?void 0:V.symbol} in the pool will be traded for ${z} ${_==null?void 0:_.symbol}`}},[s,P,S,U]);return i.useEffect(()=>{V0()},[k,c0]),i.useEffect(()=>{m(),setTimeout(()=>{a!=null&&a.coinAmountA&&(a!=null&&a.coinAmountB)&&w0()},200)},[C,s,O==null?void 0:O.address]),{handleAmountInputChange:P0,fixAmountA:M,amountInputA:S,amountInputB:U,availableAmountA:k,availableAmountB:c0,amountValueA:v0,amountValueB:m0,preCalculateLoading:E,inputTotalValue:w,calculateResult:P,showOnlySideTips:y,doRemoveAction:b,handlePercentInputChange:x0,isPercentInput:X,removePercent:a0,reCalculateResult:V0,calculateAvailableLoading:T0,submitLoading:U0}}function We(s,l,a,e,r,t,o){const{setDetailRefreshCount:p}=q0(),{fetchTokenPrices:C,getTokenAmountValue:j}=$0(),{vaultsSdk:B}=I0(),{vaultsSlippage:N,mevProtect:T,maxCapForGas:Q,transactionMode:g,customGasPrice:O}=B0(),{findBestRouters:c}=Te(),[F,v]=i.useState(""),[n,S]=i.useState(""),[h,U]=i.useState(!0),[D,M]=i.useState(""),[I,n0]=i.useState(!1),[K,X]=i.useState(0),$=i.useRef(D),a0=i.useRef(h),q=i.useRef(F),H=i.useRef(n),x=i.useRef(I),W=i.useRef(K);i.useEffect(()=>{W.current=K},[K]),i.useEffect(()=>{x.current=I},[I]),i.useEffect(()=>{$.current=D},[D]),i.useEffect(()=>{a0.current=h},[h]),i.useEffect(()=>{q.current=F},[F]),i.useEffect(()=>{H.current=n},[n]),i.useEffect(()=>{const b=[];t&&o&&(b.push(t.coin_type),b.push(o.coin_type)),b.length>0&&C(b)},[t==null?void 0:t.coin_type,o==null?void 0:o.coin_type]);const[l0,s0]=i.useState("0"),[y0,k]=i.useState("0"),[r0,c0]=i.useState(!1);i.useEffect(()=>{e0(),d0()},[s]),i.useEffect(()=>{d0()},[a.coinAmountA]);const d0=()=>{const{coinAmountA:b,coinAmountB:m}=a;if(console.log("🚀 ~ useEffect ~ holdCoinAmounts:",a),c0(!1),s==="both"){s0(b),k(m);return}const y=s===(t==null?void 0:t.coin_type),u=y?m:b;let f=y?b:m;const _=y?o:t,V=y?t:o;d(u).gt(0)?(c0(!0),s0("0"),k("0"),c({fromToken:_,toToken:V,amount:D0(u,_.decimals).toString(),providersKeys:B.sdkOptions.aggregator.providers,by_amount_in:!0,uuid:D}).then(L=>{console.log("🚀 ~ calculateAvailableAmount ~ uuid:",{result:L}),L.toAmountUi&&(f=d(f).add(L.toAmountUi).toString()),y?s0(f):k(f)}).finally(()=>{c0(!1)})):y?s0(f):k(f)},T0=j(t==null?void 0:t.coin_type,F),p0=j(o==null?void 0:o.coin_type,n),w0=i.useMemo(()=>d(T0||"0").add(p0||"0").toString(),[T0,p0]),[v0,m0]=i.useState(!1),[w,E]=i.useState(void 0),P=H0(async(b,m,y,u,f)=>{var _,V;if(t&&o&&r&&e){if(!f){if(y){if(d(b).gt(l0)){M(""),E(void 0),m0(!1);return}}else if(d(b).gt(y0)){M(""),E(void 0),m0(!1);return}}p(0),(+q.current||+H.current||f)&&m0(!0);const z=m?b:D0(b,(y?t:o).decimals).toFixed(0),Y={vault_id:r,fix_amount_a:y,input_amount:z,slippage:Number(N),request_id:u,side:s==="both"?Q0.Both:Q0.OneSide,is_ft_input:m,max_ft_amount:e};console.log("🚀 ~ preCalculate ~ params:",Y,u,f);try{const R=await B.Vaults.calculateWithdrawAmount(Y);if(console.log("🚀 ~ preCalculate ~ res:",{...R,uuid:u,assetAction:s}),$.current===u){const J=t0(R.amount_a.toString(),t.decimals).toString(),G=t0(R.amount_b.toString(),o.decimals).toString();if(s==="both"&&(m?(S(G),v(J),f===100&&(s0(J),k(G)),E(R)):y?+q.current?(S(G),E(R)):S(""):+H.current?(v(J),E(R)):v("")),s!=="both"){if(f){const i0=t0(d(R.amount_a).add(((_=R.swap_result)==null?void 0:_.swap_out_amount)||"0").toString(),t.decimals).toString();if(y)v(i0),S(""),f===100&&(R.burn_ft_amount=e,s0(i0));else{const j0=t0(d(R.amount_b).add(((V=R.swap_result)==null?void 0:V.swap_out_amount)||"0").toString(),o.decimals).toString();v(""),S(j0),f===100&&(R.burn_ft_amount=e,k(j0))}}E(R)}}}catch(R){console.log("🚀 ~ preCalculate ~ error:",R),E(void 0)}finally{m0(!1)}}},500),A=(b,m,y=!1,u=!1,f=!0)=>{if(y){f0(100);return}if(u){f0(50);return}if(U(m),n0(!1),m?(v(b),f&&S("")):(S(b),f&&v("")),+b){const _=E0();M(_),P(b,!1,m,_)}else e0()},f0=b=>{if(n0(!0),X(b),e&&+e)if(b===0)e0();else{const m=s===(t==null?void 0:t.coin_type);if(U(m),b===100||s==="both"){const y=E0();M(y);const u=b===100?e:d(e).mul(b).div(100).toFixed(0);console.log("🚀🚀🚀 ~ useVaultsRemove.ts:351 ~ handlePercentInputChange ~ removeLpAmount:",u),P(u,!0,m,y,b)}else{U(m);const y=d(s===(t==null?void 0:t.coin_type)?l0:y0).mul(b).div(100).toFixed();P(y,!1,m,D,b)}}},b0=()=>{if(console.log("🚀 ~ reCalculateResult ~ isPercentInput:",{isPercentInput:I,removePercent:K}),I)f0(K);else{const b=a0.current?q.current:H.current;A(b,a0.current)}};i.useEffect(()=>{if(!I)if(w&&e&&+e){let b=Number(d(w.burn_ft_amount).div(e).mul(100));b>100&&(b=100),X(b)}else X(0)},[w==null?void 0:w.burn_ft_amount]);const[P0,x0]=i.useState(!1),{signAndExecuteTransaction:V0,transactionConfirmation:U0,transactionRejected:L0}=A0(),C0=async()=>{if(r&&w&&e){x0(!0);let b;if(s==="both")b={vault_id:r,ft_amount:w==null?void 0:w.burn_ft_amount,slippage:Number(N)};else{const y=s===(t==null?void 0:t.coin_type);if(K===100)b={vault_id:r,is_ft_input:!0,input_amount:e,slippage:Number(N),max_ft_amount:e,fix_amount_a:y};else{const u=D0(h?F:n,9);b={vault_id:r,is_ft_input:!1,input_amount:u.toString(),slippage:Number(N),max_ft_amount:e,fix_amount_a:y}}}console.log("🚀 ~ doRemoveAction ~ params:",b);const m={getShowInfo:(y,u)=>{const f="Withdraw "+[_0(F,t==null?void 0:t.symbol),_0(n,o==null?void 0:o.symbol)].filter(Boolean).join(" and "),_={modalDescriptionText:f,toastDescriptionContent:f};if(y==="success"){let V=F,L=n;u&&(V=d(F).gt(0)?M0(u,t)||F:"",L=d(n).gt(0)?M0(u,o)||n:"");const z="Removed "+[_0(V,t==null?void 0:t.symbol),_0(L,o==null?void 0:o.symbol)].filter(Boolean).join(" and ");_.toastDescriptionContent=z,_.modalDescriptionText=z}return _}};U0(m);try{const y=await B.Vaults.withdraw(b);await V0(y,m,{useMev:T,txAction:"signTransactionBlock",useFastMode:g==="Fast Mode",maxCapForGas:Q,customGasPrice:O,msafeParams:{action:k0.RemoveVaultsPosition,txbParams:b}})?e0():b0(),l()}catch(y){console.log("🚀 ~ doAddAction ~ error:",y),L0(m)}}},e0=()=>{v(""),S(""),X(0),m0(!1),E(void 0),M("")},o0=i.useMemo(()=>{if(w&&w.swap_result&&s!=="both"&&t&&o){const b=h?F:n,m=a0.current?t:o,y=a0.current?o:t,u=t0(w.swap_result.swap_in_amount,m.decimals),f=t0(d(w.swap_result.swap_out_amount).mul(1-Number(N)).toString(),y.decimals);return console.log("vaultsSlippage: ",{vaultsSlippage:N,calculateResult:w,swapOutAmount:f}),`To withdraw ${h0(b)} ${m==null?void 0:m.symbol}, ${h0(u)} ${y==null?void 0:y.symbol} in the pool will be traded for ${f} ${m==null?void 0:m.symbol}`}},[s,w,F,n]);return{handleAmountInputChange:A,fixAmountA:h,amountInputA:F,amountInputB:n,availableAmountA:l0,availableAmountB:y0,amountValueA:T0,amountValueB:p0,preCalculateLoading:v0,inputTotalValue:w0,calculateResult:w,showOnlySideTips:o0,doRemoveAction:C0,handlePercentInputChange:f0,isPercentInput:I,removePercent:K,reCalculateResult:b0,calculateAvailableAmount:d0,calculateAvailableLoading:r0}}const Xe=s=>s?je:Me,Ke=s=>s?qe:ze,Ye=s=>s?Ge:Ne,Je=s=>s?He:We,_a={useGetApiVaultInfo:Pe,useGetContractVaultInfo:Xe,useVaultsAdd:Ke,useAddButtonStatus:Ye,useVaultsRemove:Je};function ga({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:a,category:e,vaultsAprDisplay:r}){return g0.jsx(Se,{tooltip:g0.jsx(Qe,{vaultsApyDisplay:l,vaultsLstApyDisplay:s,vaultsTotalApyDisplay:a,vaultsAprDisplay:r,category:e}),children:g0.jsx(xe,{textColor:"text_caption",textAlign:"right",fontWeight:"500",textDecoration:"underline dotted",color:"primary",children:e=="cetus"?a:l})})}const Qe=({vaultsLstApyDisplay:s,vaultsApyDisplay:l,vaultsTotalApyDisplay:a,category:e,vaultsAprDisplay:r})=>g0.jsx(ee,{gap:"12px",w:"100%",pt:"8px",pb:"8px",children:e=="cetus"?g0.jsxs(ee,{children:[g0.jsx(F0,{label:"Total APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:a}),g0.jsx(oe,{h:"1px",w:"100%",backgroundColor:"border"}),g0.jsx(F0,{label:"Fees and Rewards",labelStyle:{fontSize:"12px"},valueStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:l}),g0.jsx(F0,{label:"LST",labelStyle:{fontSize:"12px"},wrapStyle:{gap:"16px"},value:s,valueStyle:{fontSize:"12px"}})]}):g0.jsxs(ee,{children:[g0.jsx(F0,{label:"Cetus LP APR",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:r}),g0.jsx(oe,{h:"1px",w:"100%",backgroundColor:"border"}),g0.jsx(F0,{label:"Vault APY",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},wrapStyle:{gap:"16px"},value:l}),g0.jsx(F0,{label:"(Compounding Cetus LP APR Multiple Times a Day)",labelStyle:{fontSize:"12px",lineHeight:"16px",maxW:"200px"},wrapStyle:{gap:"16px"},value:"",valueStyle:{fontSize:"12px"}})]})});function Sa({coinType:s}){const{tokenInfo:l}=le(s);return g0.jsx(ve,{children:g0.jsx(ge,{imageUrl:l==null?void 0:l.logo_url,w:"20px",h:"20px"})})}export{Sa as C,Qe as V,we as a,pa as b,$e as c,Pe as d,ga as e,ya as f,fa as g,Fe as h,ma as i,ba as j,X0 as k,q0 as u,_a as v};
//# sourceMappingURL=VaultsAprBlock-BxZ39L3w.js.map
