import{b as ue,j as e,H as j,U as Z,I as re,ao as Ze,T as x,ap as Xe,aq as Oe,C as ye,am as Ke,ar as be,as as Es,aa as Fs,r as p,at as Hs,a as Ye,V as b,Z as Q,au as Je,av as $e,aw as Ie,ax as es,ay as ss,B as K,c as Ue,X as Se,az as ps,aA as Ns,al as Ws,aB as us,k as Vs,aC as I,a0 as Te,a3 as qe,aj as hs,a1 as cs,S as _e,ac as js,ad as fs,ae as ys,af as bs,ag as ws,ah as Ss,ai as vs,i as Us,aD as Ms,a2 as Cs,d as $,aE as Qe,l as ks,aF as Os,aG as ge}from"./index-BMYxc9Od.js";import{u as De,a as As}from"./useFavoritePool-CFeoAJA1.js";import{R as xs}from"./RefreshButton-BJxOoBp4.js";import{S as Ys}from"./SearchInputBlock-DTXrU6wD.js";import{u as ns,a as _s,b as qs,i as Ds,V as Ls}from"./useStatistics-DV08BN5P.js";import{u as Qs}from"./useGetPoolList-DKPSLTZh.js";import{H as Gs,T as Xs}from"./VolumeChart-D7cJeP67.js";import{N as ve}from"./NoData-CQ4OWoZo.js";import{S as Zs}from"./SortDropBlock-CJ8gPqbU.js";import{T as Ve}from"./TableSortTh-9fMbVXPU.js";import{u as Ks}from"./index-gP6hSW7e.js";import{A as Js}from"./index-Dbc2tu1I.js";import{C as $s,P as Ts}from"./CoinPairInfo-B6xbyLw9.js";import{V as Is,F as en,u as ms,P as sn,a as nn}from"./PositionListLoading-DiuavR6-.js";import{u as tn}from"./useToken-Bvs0Ung1.js";import{u as on,a as pe,b as ts}from"./usePositionList-CqhidtZG.js";import{V as ds}from"./VTextLabelBox-C4n_Ly5H.js";import{u as ln}from"./useBurn-BFQu7S5q.js";import{u as Ps}from"./useTransaction-CfK3pLEn.js";import{S as Me}from"./SingleTokenInfo-YXdPNl3G.js";import{L as an}from"./PriceRange-BiZddocv.js";import{u as rn}from"./useNotifiSubscription-D71-OFDa.js";import{u as pn}from"./useRpcListener-BR_hP-SR.js";import{u as cn,a as zs,P as xn}from"./PositionCurrentPrice-Dfxi9Q7k.js";import{u as dn}from"./useAccountBalance-7Ju_sYta.js";import"./api-data-utils-Ddy-a3WS.js";import"./index-6ljNv2-7.js";import"./Loading-BtyFSDLH.js";import"./TooltipIcon-ByUA4JrQ.js";import"./index-CbiH6bwv.js";import"./Pagination-C3G2xW7V.js";import"./tr-8Zgrglrc.js";import"./EmptyTooltip-RkHwJCCH.js";import"./_getAllKeysIn-DYEwfs_x.js";import"./YAxis-CElZgsg8.js";import"./throttle-C4s_nYWa.js";import"./debounce-0HI4Y71Y.js";import"./generateCategoricalChart-B6wlJUW7.js";import"./linear-DYpwdEgO.js";import"./index-BhzVy6K4.js";import"./PoweredByHaedal-B3ifw1QO.js";import"./VaultsAprBlock-CyoX36Fk.js";import"./useTokenBalance-Cj_lT5nh.js";import"./global-VD-aBjBV.js";import"./msafe-oYBkW7LJ.js";import"./index-CJXWYa_3.js";import"./useFindBestRouting-C22H3oMB.js";import"./HTextLabelBox-DAS3uNTR.js";import"./Slippage-BHfkGKpx.js";import"./useDisplayTickPrice-GFwlUd_W.js";import"./useCurrentPos-BnGJCwf6.js";import"./AddressUnderline-Bhd4IXQA.js";import"./PositionStatus-BWThaEyG.js";import"./RangeValue-Cv8ui1Wd.js";import"./useXCetusHelper-D802DwcO.js";import"./usePreviousValue-B64GMDoH.js";function Bs({handleIsWatchList:s=()=>{},handleIsDisplayChecked:t=()=>{},onClickIncentiveTypes:d,handleRefresh:l,selectCoinList:i,onClickSelectCoinList:n,onDeleteSelectCoinList:a,isPools:o=!0,isRefreshed:g}){const{isWatchList:u,isAllPools:A,isIncentivizedOnly:C}=De(),{isApp:f,windowWidth:y}=ue();return e.jsxs(j,{w:"100%",justify:"space-between",flexDirection:{base:"column",lg:"row"},children:[e.jsxs(j,{w:{base:"100%",lg:o?"unset":"100%"},justify:"space-between",children:[e.jsx(Ys,{selectCoinList:i,onClickSelectCoinList:n,onDeleteSelectCoinList:a}),(f||!o)&&e.jsx(xs,{handleRefresh:l,isRefreshed:o?g:void 0})]}),o&&e.jsxs(j,{w:{base:"100%",lg:"unset"},justify:"space-between",gap:"8px",children:[e.jsx(Z,{w:{base:y<=350?"48px":"36%",lg:"unset"},borderRadius:"12px",p:{base:"0px 8px",lg:"0 12px"},h:"40px",onClick:s,children:y<=350?e.jsx(j,{h:"38px",justify:"center",align:"center",children:e.jsx(re,{xlinkHref:"#icon-icon_star",svgFill:u?"primary":"text_paragraph"})}):e.jsxs(j,{h:"100%",justify:"space-between",gap:{base:"6px",lg:"8px"},children:[e.jsx(Ze,{checked:u,onClick:()=>{}}),e.jsx(x,{color:u?"text_caption":"text_paragraph",children:"Watchlist"})]})}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[e.jsx(Z,{w:{base:"65%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(j,{h:"100%",justify:"space-between",gap:f?"4px":"8px",children:[e.jsx(x,{color:C?"text_caption":"text_paragraph",children:f?"Incentivized":"Incentivized Only"}),e.jsx(Xe,{isChecked:C,onChange:d})]})}),e.jsx(Z,{w:{base:"35%",lg:"unset"},borderRadius:"12px",p:f?"0 6px 0 8px":"0px 12px",h:"40px",children:e.jsxs(j,{h:"100%",justify:"space-between",children:[e.jsxs(x,{color:A?"text_caption":"text_paragraph",children:[" ",f?"All":"All pools"]}),e.jsx(Xe,{isChecked:A,onChange:t})]})})]}),!f&&e.jsx(xs,{handleRefresh:l,isRefreshed:g})]})]})}const gn=()=>e.jsx(j,{w:"18px",h:"18px",onClick:s=>{be(s)},children:e.jsx(Oe,{placement:"top",tooltip:e.jsx(x,{fontSize:"12px",children:"Mining rewards available"}),children:e.jsx(ye,{children:e.jsx(Ke,{w:"100%",h:"100%",minW:"100%",src:"/images/icon_mining.png"})})})}),un=({coinTypeA:s,coinTypeB:t})=>{const{getShowCoinTag:d}=Es(),{trustedTokenList:l,importTokenList:i}=Fs(),n=p.useMemo(()=>(s||t)&&(l==null?void 0:l.length)>0?d(s)||d(t):!1,[s,t,l,i]);return e.jsx(e.Fragment,{children:n&&e.jsx(j,{w:"20px",h:"20px",onClick:a=>{be(a)},children:e.jsx(Oe,{placement:"top",tooltip:e.jsx(x,{lineHeight:"20px",fontSize:"12px",w:"240px",children:"This pool contains tokens that are not on the Frequently Traded List. Please check the Coin Type of these coins before interacting with this pool!"}),children:e.jsx(ye,{children:e.jsx(Ke,{w:"100%",h:"100%",src:Hs})})})})})};function hn({poolInfo:s}){const t=Ye(),{addFavorites:d,removeFavorites:l}=As(),{poolFavoriteIds:i}=De(),{goLiquidity:n}=ns(),a=p.useMemo(()=>i==null?void 0:i.includes((s==null?void 0:s.poolAddress)||""),[JSON.stringify(i),s==null?void 0:s.poolAddress]);return e.jsxs(b,{align:"flex-start",padding:"8px",children:[e.jsx(Ge,{text:"Analytics",xlinkHref:"#icon-icon_kline",onClick:()=>{n(`/liquidity?tab=analytics&poolAddress=${s==null?void 0:s.poolAddress}`,s)}}),e.jsx(Ge,{text:"Swap",xlinkHref:"#icon-icon_swap1",onClick:()=>{var o,g;t(`/swap/${(o=s==null?void 0:s.displayTokenA)==null?void 0:o.coin_type}/${(g=s==null?void 0:s.displayTokenB)==null?void 0:g.coin_type}`)}}),e.jsx(Ge,{text:"Add to Watchlist",xlinkHref:a?"#icon-icon_star_sel":"#icon-icon_star",svgFill:a?"primary":"text_paragraph",onClick:()=>{a?l(s==null?void 0:s.poolAddress):d(s==null?void 0:s.poolAddress)}})]})}const Ge=({text:s,xlinkHref:t,svgFill:d="text_paragraph",onClick:l})=>e.jsxs(j,{w:"100%",cursor:"pointer",bg:"menu_item_bg",borderRadius:"8px",padding:"11px",_hover:{svg:{fill:"primary"},p:{color:"primary"}},onClick:i=>{be(i),l()},children:[e.jsx(re,{svgFill:d,xlinkHref:t,svgHover:"primary",svgW:s=="Add to Watchlist"?"22px":"20px",svgH:s=="Add to Watchlist"?"22px":"20px",minW:s=="Add to Watchlist"?"22px":"20px",minH:s=="Add to Watchlist"?"22px":"20px",ml:s=="Add to Watchlist"?"-2px":"0px"}),e.jsx(x,{fontSize:"13px",children:s})]});function jn({poolInfo:s}){const{isApp:t}=ue(),{goLiquidity:d}=ns(),[l,i]=p.useState(!1),[n,a]=p.useState(!1);return e.jsxs(j,{w:{base:"calc(100vw - 8px)",lg:"unset"},pr:{base:"16px",lg:"unset"},justify:t?"space-between":"flex-end",gap:"8px",children:[s.isVaults||s.isUnstableVault?e.jsx(Oe,{placement:"bottom-end",tooltip:e.jsx(x,{_hover:{color:"primary"},cursor:"pointer",color:t?"primary":"text_paragraph",children:"Auto"}),showTooltip:n,children:e.jsx(ye,{w:t?"calc(100%)":"unset",children:e.jsxs(Q,{p:"0",variant:"ghost",w:{base:"100%",lg:"32px"},padding:t?"0 12px":"",h:"32px",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},onClick:o=>{o.stopPropagation(),i(!l)},onMouseMove:()=>{a(!0)},onMouseLeave:()=>{a(!1)},children:[e.jsx(re,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_auto",svgW:"20px",svgH:"20px"}),t&&e.jsx(x,{color:t?"primary":"text_paragraph",marginLeft:"4px",children:"Auto"})]})})}):null,e.jsx(Q,{w:{base:"calc(100% - 32px)",lg:"unset"},p:"8px",h:"32px",fontSize:{base:"14px",lg:"12px"},borderRadius:"8px",fontWeight:"500",onClick:()=>{d(`/liquidity?poolAddress=${s==null?void 0:s.poolAddress}`,s)},children:"Deposit"}),e.jsxs(Je,{isLazy:!0,trigger:t?"click":"hover",placement:t?"top-start":"bottom-end",autoFocus:!1,returnFocusOnClose:!1,children:[e.jsx($e,{children:e.jsx(ye,{onClick:o=>{be(o)},children:e.jsx(Q,{variant:"ghost",w:"32px",h:"32px",p:"0",borderRadius:"8px",sx:{_hover:{svg:{fill:"primary"}}},children:e.jsx(re,{svgFill:t?"primary":"text_paragraph",xlinkHref:"#icon-icon_more",svgW:"16px",svgH:"16px"})})})}),e.jsx(Ie,{children:e.jsx(es,{borderRadius:"12px",w:"fit-content",children:e.jsx(ss,{p:"0",fontSize:"12px",w:"fit-content",children:e.jsx(hn,{poolInfo:s})})})})]}),l?e.jsx(Is,{isOpen:l,setIsOpen:i,displayTokenA:s.displayTokenA,displayTokenB:s.displayTokenB,feeDisplay:s.feeDisplay,clmmPool:s.poolAddress,isUnstableVault:s.isUnstableVault,vaultId:s.vaultId,isReverse:s.isReverse}):null]})}function fn({miningRewardList:s,farmsRewarderList:t}){const{getTokenInfo:d}=tn(),[l,i]=p.useState([]);return p.useEffect(()=>{(async()=>{if((s==null?void 0:s.length)>0||(t==null?void 0:t.length)>0)try{let a=[],o=[];(s==null?void 0:s.length)>0&&(a=await Promise.all(s.map(async g=>{const u=await d(g==null?void 0:g.coinType);return{...g,tokenInfo:u,isMining:!0}}))),(t==null?void 0:t.length)>0&&(o=await Promise.all(t.map(async g=>{const u=await d(g==null?void 0:g.coinType);return{...g,tokenInfo:u,isFarming:!0}}))),i(a.concat(o))}catch(a){console.error("Error processing list:",a)}})()},[s,t]),e.jsx(j,{w:"100%",justify:"flex-end",children:l.map(n=>{var a,o,g,u,A;return e.jsx(K,{onClick:C=>C.stopPropagation(),children:e.jsx(Oe,{placement:"top",tooltip:e.jsxs(j,{gap:"4px",children:[e.jsx(K,{children:e.jsx(Ue,{imageUrl:(a=n==null?void 0:n.tokenInfo)==null?void 0:a.logo_url,w:"24px",h:"24px"})}),(n==null?void 0:n.isMining)&&e.jsxs(x,{color:"primary",display:"inline-block",children:[Se(ps(Ns(n==null?void 0:n.emissionsEveryDay,(o=n==null?void 0:n.tokenInfo)==null?void 0:o.decimals),2))," ",(g=n==null?void 0:n.tokenInfo)==null?void 0:g.symbol," per day in Mining"]}),(n==null?void 0:n.isFarming)&&e.jsxs(x,{color:"primary",display:"inline-block",children:[Se(ps(n==null?void 0:n.emissionsEveryDay,2))," ",(u=n==null?void 0:n.tokenInfo)==null?void 0:u.symbol," per day in Farming"]})]},n==null?void 0:n.coinType),children:e.jsx(ye,{as:"button",children:e.jsx(Ue,{imageUrl:(A=n==null?void 0:n.tokenInfo)==null?void 0:A.logo_url,w:"24px",h:"24px"})})})},n==null?void 0:n.coinType)})})}function yn({isRefreshed:s,handleIsRefreshed:t}){var xe;const{getStatistics:d}=_s(),{poolRefreshStatus:l,setPoolRefreshStatus:i,setPoolListLength:n,poolFavoriteIds:a,isWatchList:o,setIsWatchList:g,isIncentivizedOnly:u,setIsIncentivizedOnly:A,isAllPools:C,setIsAllPools:f,poolFavoriteIdsChange:y,setPoolFavoriteIdsChange:U}=De(),{getPoolList:R}=Qs(),{getFavoritePoolList:G}=As(),{goLiquidity:se}=ns(),[F,J]=p.useState(["mining","farming","noIncentives"]),ee=()=>{A(!u),f(!1)},oe=()=>{f(!C),g(!1),A(!1)};p.useEffect(()=>{J(u?["mining","farming"]:["mining","farming","noIncentives"])},[u]);const z=()=>{f(!1),g(!o),U(!1)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ poolFavoriteIds:",y,a),o&&y&&(U(!1),console.log("ðŸš€ ~ useEffect ~ isWatchList:",o),le({offset:0,isWatchList:o}))},[o,a==null?void 0:a.length,y]);const W=p.useRef(null),M=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),i("pending"),ke(1),ne(!0),le({offset:0,isListLoading:!1}),W.current=setTimeout(()=>{console.log("ðŸš€ ~ timer.current=setTimeout ~ poolRefreshStatus:",l),l=="pending"&&i("timeout")},1e4),d()},[v,H]=p.useState([]),h=r=>{console.log("ðŸš€ ~ onClickSelectCoinList ~ tokenInfo:",r),H(B=>[...B,r])},_=r=>{H(B=>B.filter(D=>(D==null?void 0:D.coin_type)!==(r==null?void 0:r.coin_type)))};p.useEffect(()=>{console.log("ðŸš€ ~ PoolsContent ~ selectCoinList:",o,F,v),typeof o=="boolean"&&le({offset:0})},[o,F,v,C]);const S=20,[Y,E]=p.useState(!0),[L,ne]=p.useState(!0),[X,O]=p.useState("desc"),[m,me]=p.useState({label:"Volume (24H)",value:"vol"}),[q,Ce]=p.useState([]),[Pe,ze]=p.useState(0),[we,ke]=p.useState(1),le=async r=>{var os,ls,as,rs;const B=(r==null?void 0:r.isListLoading)??!0,D=(r==null?void 0:r.isWatchList)??o;console.log("ðŸš€ ~  ~ params:",r,D);const Ae=v.length==2?`${(os=v[0])==null?void 0:os.coin_type},${(ls=v[1])==null?void 0:ls.coin_type}`:v.length==1?`${(as=v[0])==null?void 0:as.coin_type}`:"",{is_vaults:je=!1,display_all_pools:Re=D?!0:C??!0,has_mining:Ee=F.includes("mining"),has_farming:Fe=F.includes("farming"),no_incentives:He=F.includes("noIncentives"),order_by:Ne=X=="desc"?`-${m==null?void 0:m.value}`:`${m==null?void 0:m.value}`,limit:We=S,offset:P=0,coin_type:N=Ae,pool:de=""}=r;P==0&&ke(1),Number(P)>=S?E(!0):ne(B);const fe={is_vaults:je,display_all_pools:Re,has_mining:Ee,has_farming:Fe,no_incentives:He,order_by:Ne,limit:We,offset:P,coin_type:N,pool:de};let ce;try{D?(fe.pools=a,ce=await G(fe)):ce=await R(fe),console.log("ðŸš€ ~  ~ result:",ce),ce&&(console.log("ðŸš€ ~ fetchDatafetchPoolsData ~ result:",ce),Number(P)>=S?Ce(ie=>ie.concat(ce.list)):Ce(ce.list),ze(ce.total),n((ce.total||0).toString()),ne(!1),i("success"))}catch(ie){console.log("ðŸš€ ~  ~ error:",ie),ie!=null&&ie.list&&((rs=ie==null?void 0:ie.list)==null?void 0:rs.length)>0&&(i("error"),Ce(ie.list),ze(ie.total),n(""),ne(!1))}};p.useEffect(()=>{Y&&E(!1)},[q.length]);const{failedTsToast:Le}=Ws();p.useEffect(()=>{if(console.log("ðŸš€ ~ PoolsContent ~ poolRefreshStatus:",l),l!=="pending"){const r={linkLabel:"",getShowInfo:()=>({toastTitleText:l=="error"?"Request Error":l=="timeout"?"Please check the network status.":""})};(l=="success"||l=="error")&&clearTimeout(W.current),(l=="error"||l=="timeout")&&Le(r),t(!0)}},[l]);const{isApp:c}=ue(),k=r=>{if(console.log("ðŸš€ ~ clickSort ~ item:",r),c)(r==null?void 0:r.value)!==(m==null?void 0:m.value)&&(le({offset:0,order_by:`-${r==null?void 0:r.value}`}),O("desc"),me(r));else if((r==null?void 0:r.value)==(m==null?void 0:m.value)){le({offset:0,order_by:X=="desc"?`${r==null?void 0:r.value}`:`-${r==null?void 0:r.value}`});const B=X=="desc"?"asc":"desc";O(B)}else le({offset:0,order_by:`-${r==null?void 0:r.value}`}),O("desc"),me(r)},T=[{label:"Liquidity",value:"tvl"},{label:"Volume (24H)",value:"vol"},{label:"Fees (24H)",value:"fees"},{label:"APR",value:"totalApr"}],V=T.reduce((r,B)=>(r[B.value]=B,r),{}),te=r=>{const B=r*S;le({offset:B}),ke(D=>D+1)};Ye();const w=p.useMemo(()=>{const r=(we-1)*S+(q==null?void 0:q.length);return l!=="error"&&Number(Pe)>r},[Pe,we,S,l,q==null?void 0:q.length]);p.useEffect(()=>(d(),W.current&&(clearTimeout(W.current),W.current=null),()=>{n(""),W.current&&(clearTimeout(W.current),W.current=null)}),[]);const Be=Ks({count:q.length,getScrollElement:()=>document.querySelector(".scroll-container"),estimateSize:()=>80,overscan:10}),he=p.useRef(null);p.useEffect(()=>{let r=null;return!L&&he.current&&(r=new IntersectionObserver(B=>{const D=B[0];D&&D.isIntersecting&&w&&!Y&&(console.log("ðŸš€ ~ useEffect ~ entry:",D),te(we))},{threshold:.5,rootMargin:"100px"}),r.observe(he.current)),()=>{r&&r.disconnect()}},[L,we,w,Y]);const ae=bn(X,m,k,V,c);return e.jsxs(b,{gap:"20px",w:"100%",background:"bg_primary",children:[e.jsx(Bs,{handleIsDisplayChecked:oe,handleIsWatchList:z,onClickIncentiveTypes:ee,handleRefresh:M,selectCoinList:v,onClickSelectCoinList:h,onDeleteSelectCoinList:_,isRefreshed:s}),e.jsx(K,{h:"1px",w:"100%",bg:"border"}),e.jsxs(b,{w:"100%",position:"relative",gap:"20px",children:[!L&&(q==null?void 0:q.length)==0?e.jsx(ve,{type:"nodata",text:"No pools found",children:e.jsx(x,{mt:"4px",textAlign:"center",children:"Try adjusting your search or filter settings."})}):c?e.jsxs(b,{w:"100%",gap:"4px",children:[e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsx(x,{fontSize:"24px",color:"text_caption",children:"Pools"}),e.jsx(Zs,{sortText:"Sort by",minW:"180px",currentSort:m,sortByList:T,onSortByChange:k,xlinkHref:X=="desc"?"#icon-icon_sort2":"#icon-icon_sort_asc1",iconOnClick:()=>{le({offset:0,order_by:X=="desc"?`${m==null?void 0:m.value}`:`-${m==null?void 0:m.value}`});const r=X=="desc"?"asc":"desc";O(r)}})]}),e.jsx(Gs,{rowKey:"poolAddress",dataSource:q,columns:ae,loading:L,itemSkeletonLength:7,itemHeight:"30px",rowStyle:(r,B)=>({w:"100%",p:"0px",mt:"0px"}),onRowClick:r=>{se(`/liquidity?poolAddress=${r.poolAddress}`,r)}})]}):L?e.jsx(Xs,{rowKey:"poolAddress",columns:ae,dataSource:q,skeletonLength:10,loading:!0,rowStyle:{h:"80px",cursor:"pointer"}}):e.jsxs(b,{w:"100%",gap:"0",children:[e.jsx(K,{as:"div",display:"grid",w:"1160px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",h:"36px",columnGap:"12px",p:"0 16px",children:ae==null?void 0:ae.map((r,B)=>e.jsx(us,{as:"div",align:"center",justify:B===0?"flex-start":"flex-end",children:r.title},r.key))}),e.jsx(K,{w:"100%",h:`${q.length*80}px`,pos:"relative",children:(xe=Be.getVirtualItems())==null?void 0:xe.map(r=>{const B=q[r.index];return e.jsx(wn,{item:B,columns:ae,virtualRow:r,goLiquidity:se},B==null?void 0:B.poolAddress)})})]}),e.jsx(K,{ref:he,children:Y?e.jsx(Vs,{size:"sm",color:"text_caption"}):""})]})]})}const bn=(s,t,d,l,i)=>[{title:e.jsx(x,{fontSize:"14px",children:"Pools"}),key:"pool",thConfig:{w:"30%"},showLabel:!1,render:n=>{var a,o;return e.jsxs(j,{children:[e.jsx($s,{poolInfo:n,symbolEllipsesDecimals:10}),(n==null?void 0:n.haveFarming)&&e.jsx(en,{}),(n==null?void 0:n.haveMining)&&e.jsx(gn,{}),e.jsx(un,{coinTypeA:(a=n==null?void 0:n.tokenA)==null?void 0:a.coin_type,coinTypeB:(o=n==null?void 0:n.tokenB)==null?void 0:o.coin_type})]})}},{title:e.jsx(Ve,{labelInfo:l.tvl,sortRule:s,sortBy:t,clickSort:n=>d(n)}),key:"tvlDisplay"},{title:e.jsx(Ve,{labelInfo:l.vol,sortRule:s,sortBy:t,clickSort:n=>d(n)}),key:"volume24Display"},{title:e.jsx(Ve,{labelInfo:l.fees,sortRule:s,sortBy:t,clickSort:n=>d(n)}),key:"fees24Display"},{title:e.jsx(x,{textAlign:"right",children:"Rewards"}),key:"rewards",hidden:({miningRewardList:n,farmsRewarderList:a})=>n&&(n==null?void 0:n.length)<=0&&a&&(a==null?void 0:a.length)<=0,render:({miningRewardList:n,farmsRewarderList:a})=>e.jsx(fn,{miningRewardList:n,farmsRewarderList:a})},{title:e.jsx(Ve,{labelInfo:l.totalApr,sortRule:s,sortBy:t,tooltip:{type:"apr24"},clickSort:n=>d(n),justifyContent:"flex-end"}),key:"apr24h",render:n=>e.jsx(Js,{poolInfo:n,placement:i?"auto-start":"top"})},{title:e.jsx(x,{textAlign:"right",children:"Actions"}),showLabel:!1,key:"actions",render:n=>e.jsx(jn,{poolInfo:n})}],wn=({item:s,columns:t,virtualRow:d,goLiquidity:l})=>e.jsx(K,{as:"div",pos:"absolute",top:`${d.start}px`,left:"0",display:"grid",w:"100%",h:"80px",p:"0 16px",borderRadius:"12px",onClick:()=>l(`/liquidity?poolAddress=${s.poolAddress}`,s),cursor:"pointer",columnGap:"12px",gridTemplateColumns:"minmax(0px, 3.48fr) minmax(0px, 1.5fr) minmax(0px, 1.5fr) minmax(0px, 1.3fr) minmax(90px, 1fr) minmax(90px, 1fr) minmax(142px, 1.72fr)",_hover:{bg:"primary_opacity.10"},children:t==null?void 0:t.map((i,n)=>e.jsx(us,{align:"center",justify:n===0?"flex-start":"flex-end",children:i!=null&&i.render?i==null?void 0:i.render(s):e.jsx(x,{fontSize:"14px",fontWeight:"500",color:"text_caption",children:s==null?void 0:s[i==null?void 0:i.key]})},i.key))}),Sn="data:image/png;base64,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",vn="/assets/pool_bg-DIChGQZi.png",Cn=({posInfo:s})=>{var l,i,n,a;const[t,d]=p.useState(!1);return e.jsx(K,{p:"12px 0",onClick:o=>be(o),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs(Je,{isLazy:!0,isOpen:t,children:[e.jsx($e,{children:e.jsx(ye,{as:"button",cursor:Number(s==null?void 0:s.totalRewardUsd)==0?"text":"help",children:e.jsx(x,{color:"primary",fontSize:"14px",textDecoration:Number(s==null?void 0:s.totalRewardUsd)==0?"none":"underline dotted",textUnderlineOffset:"3px",children:I(s==null?void 0:s.totalRewardUsd,2)})})}),t&&Number(s==null?void 0:s.totalRewardUsd)!==0&&e.jsx(Ie,{children:e.jsx(es,{zIndex:"2",w:"fit-content",children:e.jsx(ss,{children:e.jsxs(b,{align:"flex-start",minW:"300px",children:[((l=s==null?void 0:s.pendingFeesList)==null?void 0:l.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(j,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"12px",p:"16px",children:[e.jsx(x,{fontSize:"12px",children:"Fees"}),e.jsxs(x,{color:"primary",children:[" ",I(s==null?void 0:s.feeOwedUsd,2)]})]}),(i=s==null?void 0:s.pendingFeesList)==null?void 0:i.map(o=>(console.log("ðŸš€ ~ {posInfo?.pendingFeesList?.map ~ item:",o),e.jsxs(j,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Me,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:Se(o==null?void 0:o.amount,6)}),e.jsx(x,{fontSize:"12px",children:I(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address)))]}),((n=s==null?void 0:s.pendingRewarderList)==null?void 0:n.length)>0&&e.jsxs(b,{align:"flex-start",minW:"100%",children:[e.jsxs(j,{w:"100%",justify:"space-between",bg:"bg_third",borderRadius:"6px",p:"16px",children:[e.jsx(x,{fontSize:"12px",children:"Mining rewards"}),e.jsxs(x,{color:"primary",children:[" ",I(s==null?void 0:s.rewarderUsd,2)]})]}),(a=s==null?void 0:s.pendingRewarderList)==null?void 0:a.map(o=>e.jsxs(j,{w:"100%",justify:"space-between",p:"0 16px 8px",children:[e.jsx(Me,{token:o.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:Se(o==null?void 0:o.amount,6)}),e.jsx(x,{fontSize:"12px",children:I(o==null?void 0:o.amountUSD,2)})]})]},o==null?void 0:o.coin_address))]})]})})})})]})})};function is({posInfo:s,onClickCheckBox:t,checked:d,pageFrom:l,cursor:i="pointer"}){var A;const{getClmmPosName:n}=on(),{posPoolsOriginalData:a}=pe(),o=p.useMemo(()=>{var C;if(s!=null&&s.tokenName)return s==null?void 0:s.tokenName;{const f=(C=a==null?void 0:a[s==null?void 0:s.clmmPool])==null?void 0:C.index;return n(s==null?void 0:s.index,f)}},[s==null?void 0:s.tokenName,s==null?void 0:s.index,s==null?void 0:s.clmmPool,a]),{posPoolsRelatedData:g}=pe(),u=((A=g[s==null?void 0:s.posId])==null?void 0:A.displayFee)+"%";return e.jsxs(Z,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsxs(j,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"16px",children:[e.jsx(Ts,{poolInfo:{...s,feeDisplay:u},symbolEllipsesDecimals:10}),e.jsx(x,{fontSize:"12px",color:"primary_gray",children:o})]}),t&&e.jsx(Ze,{cursor:i,checked:d||!1,onClick:()=>t(s)})]}),l=="pendingYieldModal"?e.jsxs(j,{p:"0px 16px",w:"100%",justify:"space-between",gap:"4px",align:"flex-start",children:[e.jsx(x,{color:"primary_gray",mb:"-12px",mt:"12px",children:"Pending yield"}),e.jsx(Cn,{posInfo:s})]}):e.jsxs(j,{justify:"space-between",p:"0 16px",children:[e.jsx(x,{color:"primary_gray",children:"Liquidity"}),e.jsx(an,{positionInfo:s,color:"primary",fontSize:"14px",haveTooltip:l!="lpBurnNext"})]})]})}function kn({onClose:s,currentLockItem:t}){var J,ee,oe,z,W,M,v,H;const{currentAccount:d}=Te(),{signAndExecuteTransaction:l}=Ps(),{getBurnTxPayload:i}=ln(),{getPositionBaseList:n}=ts(),{posLiquidityData:a}=pe(),[o,g]=p.useState(!1),[u,A]=p.useState(""),[C,f]=p.useState(!1),y=h=>{const S=h.target.value.replace(/[^a-zA-Z0-9\s]+/g,"");A(S),console.log("ðŸš€ ~ inputChange ~ e:",h.target.value,h.target.value.toLowerCase()),h.target.value.toLowerCase()=="lock my liquidity forever"?f(!0):f(!1)},{getTokenAmountValue:U}=qe(),R=a[t==null?void 0:t.posId],G=U((J=t==null?void 0:t.displayTokenA)==null?void 0:J.coin_type,R==null?void 0:R.displayCoinAmountA,"--"),se=U((ee=t==null?void 0:t.displayTokenB)==null?void 0:ee.coin_type,R==null?void 0:R.displayCoinAmountB,"--"),F=async()=>{console.log("ðŸš€ ~ currentLockItem:",t),g(!0);try{const h=i(t);console.log("ðŸš€ ~ toBurn ~ tx:",h);const _=await l(h,{getShowInfo:S=>{var E,L;const Y={modalDescriptionText:`${(E=t==null?void 0:t.displayTokenA)==null?void 0:E.symbol} - ${(L=t==null?void 0:t.displayTokenB)==null?void 0:L.symbol} Position Locked`,toastTitleText:"LP Locked"};return console.log("ðŸš€ ~ toBurn ~ status:",S),Y}});console.log("ðŸš€ ~ toBurn ~ res:",_),_&&(await n(d==null?void 0:d.address),s()),g(!1)}catch(h){g(!1),console.log("ðŸš€ ~ claimYieldAction ~ error:",h)}};return e.jsxs(b,{w:"100%",gap:"12px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(x,{w:"100%",color:"text_caption",fontSize:"16px",textAlign:"center",fontWeight:"500",children:"Lock Liquidity Permanently?"}),e.jsx(x,{color:"text_caption",textAlign:"left",lineHeight:"20px",children:"Are you sure you want to permanently lock/burn liquidity? You will be unable to access or withdraw underlying position assets, only trading fees and mining rewards earned will remain claimable."})]}),e.jsxs(b,{w:"100%",children:[e.jsx(is,{posInfo:t,pageFrom:"lpBurnNext"}),e.jsx(Z,{w:"100%",borderRadius:"0 0 8px 8px",p:"16px 12px 12px",mt:"-20px",borderTop:"none",bg:"bg_primary",children:e.jsx(Z,{p:"16px 12px",borderRadius:"12px",children:e.jsxs(b,{gap:"16px",children:[e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsxs(j,{children:[e.jsx(Ue,{imageUrl:(oe=t==null?void 0:t.displayTokenA)==null?void 0:oe.logo_url,w:"20px",h:"20px",coinType:(z=t==null?void 0:t.displayTokenA)==null?void 0:z.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(x,{color:"text_caption",children:[R==null?void 0:R.displayCoinAmountA," ",(W=t==null?void 0:t.displayTokenA)==null?void 0:W.symbol]})]}),e.jsx(x,{color:"text_caption",children:I(G,2)})]}),e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsxs(j,{children:[e.jsx(Ue,{imageUrl:(M=t==null?void 0:t.displayTokenB)==null?void 0:M.logo_url,w:"20px",h:"20px",coinType:(v=t==null?void 0:t.displayTokenB)==null?void 0:v.coin_type,showTagHeight:"10px",showTagWidth:"10px"}),e.jsxs(x,{color:"text_caption",children:[R==null?void 0:R.displayCoinAmountB," ",(H=t==null?void 0:t.displayTokenB)==null?void 0:H.symbol]})]}),e.jsx(x,{color:"text_caption",children:I(se,2)})]})]})})})]}),e.jsxs(j,{gap:"12px",bg:"primary_yellow_opacity.10",p:"16px 12px",borderRadius:"12px",children:[e.jsx(re,{xlinkHref:"#icon-icon_priceupdated",variant:"warning"}),e.jsx(x,{color:"primary_yellow",lineHeight:"20px",textAlign:"left",fontSize:"12px",children:"By confirming below, l agree to permanently lock liquidity. l understand access to the underlying assets will be lost forever."})]}),e.jsxs(Z,{borderRadius:"12px",p:"16px",bg:"bg_four",children:[e.jsx(x,{color:"primary_gray",textAlign:"center",children:"To confirm, type the following:"}),e.jsx(x,{color:"text_caption",textAlign:"center",fontWeight:"900",mt:"12px",children:"Lock my liquidity forever"}),e.jsx(Z,{borderRadius:"16px",w:"100%",h:"56px",p:"0",lineHeight:"52px",mt:"12px",children:e.jsx(hs,{placeholder:"Type confirmation text here",fontWeight:"500",textAlign:"center",fontSize:"14px",p:"0px",value:u,onChange:y})})]}),e.jsxs(b,{w:"100%",gap:"8px",pb:"16px",children:[e.jsx(Q,{isLoading:o,w:"100%",mt:"8px",h:"52px",fontWeight:"500",disabled:!C||o,onClick:F,children:"Confirm"}),e.jsx(Q,{fontWeight:"500",variant:"outline",w:"100%",p:"20px",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}function An({onClose:s,onClickLock:t,currentLockItem:d,onClickCheckBox:l}){const{currentAccount:i,onWalletModal:n}=Te(),{fullRangePosBaseList:a,fullRangePosBaseListLoading:o}=pe();return e.jsxs(b,{w:"100%",gap:"20px",children:[e.jsxs(b,{w:"100%",align:"flex-start",gap:"20px",children:[e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Token teams can permanently lock liquidity. The NFT representing your position is sent to a locked token account. Trading fees and mining rewards earned will still be claimable."}),e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"To start, select a liquidity position below to lock. Ensure that position value and NFT mint match the position you want to lock!"}),e.jsx(x,{color:"primary_gray",textAlign:"left",lineHeight:"20px",children:"Note: Technically, your NFT is not burned but permanently locked."})]}),e.jsx(b,{w:"100%",gap:"16px",maxH:"320px",overflow:"auto",children:i!=null&&i.address?o?[{},{}].map((g,u)=>e.jsx(Rs,{},u)):(a==null?void 0:a.length)>0?a==null?void 0:a.map(g=>e.jsx(is,{posInfo:g,checked:(g==null?void 0:g.posId)==(d==null?void 0:d.posId),onClickCheckBox:u=>l(u),pageFrom:"lpBurnPrev"},g==null?void 0:g.posId)):e.jsxs(Z,{pb:"30px",borderRadius:"12px",bg:"none",border:"none",pt:"0",children:[e.jsx(ve,{h:"240px",type:"nodata",pb:"0px",text:"No Available Liquidity",bg:"none",noBorder:!0}),e.jsx(x,{color:"primary_gray",children:"Burn/Lock Liquidity only available for Full-range position"})]}):e.jsx(ve,{type:"nowallet",onboard:()=>n(!0),bg:"none",border:"none"})}),e.jsxs(b,{gap:"8px",w:"100%",p:"20px 0",mt:"-20px",children:[e.jsx(Q,{disabled:Object.values(d).length<=0,w:"100%",h:"52px",fontWeight:"500",onClick:t,children:"Lock Liquidity"}),e.jsx(Q,{w:"100%",p:"20px",variant:"outline",onClick:s,cursor:"pointer",h:"52px",children:"Cancel"})]})]})}const Rs=()=>e.jsxs(Z,{w:"100%",borderRadius:"8px",p:"0",bg:"bg_primary",children:[e.jsx(j,{w:"100%",bg:"bg_third",p:"12px 16px",borderRadius:"8px",children:e.jsxs(j,{gap:"0",children:[e.jsx(cs,{size:"9"}),e.jsx(cs,{size:"9"}),e.jsx(b,{gap:"4px",ml:"4px",align:"flex-start",children:e.jsx(_e,{height:"4",width:"100px"})})]})}),e.jsx(K,{w:"100%",p:"16px",children:e.jsx(_e,{height:"5",width:"250px"})})]});function _n({isOpen:s,onClose:t}){const[d,l]=p.useState(!1),[i,n]=p.useState({});p.useEffect(()=>{n({}),l(!1)},[s]);const a=g=>{(g==null?void 0:g.posId)==(i==null?void 0:i.posId)?n({}):n(g)},{isApp:o}=ue();return e.jsxs(js,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:t,isCentered:!0,children:[e.jsx(fs,{}),e.jsxs(ys,{minWidth:o?"300px":"482px",children:[e.jsx(bs,{children:e.jsx(ws,{fontWeight:"500",fontSize:"16px",children:"Burn/Lock Liquidity"})}),e.jsx(Ss,{}),e.jsxs(vs,{p:"16px 16px 0",textAlign:"center",children:[!d&&e.jsx(An,{onClose:t,currentLockItem:i,onClickCheckBox:g=>a(g),onClickLock:()=>l(!0)}),d&&e.jsx(kn,{onClose:t,currentLockItem:i})]})]})]})}function Tn({isRefreshed:s}){var f;const{tab:t}=ms(),d=Ye(),[l,i]=p.useState(!1),{statisticsData:n}=qs(),{poolListLength:a}=De(),{showPosListLength:o}=pe(),g=p.useMemo(()=>(console.log("ðŸš€ ~ PoolsTopData ~ poolListLength:",a),[{label:"Pools",value:"pools",num:a,imgInfo:{src:Ds,w:"22px",h:"22px"}},{label:"Positions",value:"positions",num:o,imgInfo:{src:Sn,w:"22px",h:"22px"}}]),[a,o]),{isApp:u}=ue(),[A,C]=p.useState(!1);return e.jsxs(b,{w:"100%",children:[e.jsxs(j,{w:"100%",gap:{base:"12px",lg:"32px"},flexDirection:{base:"column",lg:"row"},children:[e.jsxs(b,{w:{base:"100%",lg:"395px"},justify:"space-between",align:"flex-start",gap:{base:"12px",lg:"40px"},children:[e.jsx(x,{fontSize:"24px",fontWeight:"500",color:"text_caption",children:"Liquidity Pools"}),e.jsxs(b,{gap:"68px",p:"32px 40px",align:{base:"center",lg:"flex-start"},borderRadius:"16px",bgImage:vn,bgPosition:"center",w:"100%",h:"240px",backgroundSize:"100% 100%",children:[e.jsx(ds,{wrapStyle:{alignItems:u?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Total Value Locked",value:(n==null?void 0:n.totalValueLocked)||"",isLoading:!n}),e.jsx(ds,{wrapStyle:{alignItems:u?"center":"flex-start",gap:"12px"},titleStyle:{fontSize:"16px"},valueStyle:{fontSize:"20px",fontWeight:"600"},title:"Cumulative Volume",value:(n==null?void 0:n.cumulativeVolume)||"",isLoading:!n})]})]}),e.jsx(K,{h:"100%",mb:"-4px",w:{base:"100%",lg:"calc(100% - 395px - 32px)"},children:e.jsx(Ls,{statisticsData:n,pageFrom:"pools",isRefresh:!s})})]}),e.jsxs(j,{w:"100%",mt:"32px",justify:"space-between",flexDirection:{base:"column-reverse",lg:"row"},children:[e.jsx(Us,{type:"borderTab",wrapStyle:{w:{base:"100%",lg:"540px"},h:"60px"},itemStyle:{w:"50%",fontSize:"16px"},tabList:g,currentTab:((f=g==null?void 0:g.find(y=>(y==null?void 0:y.value)===t))==null?void 0:f.label)||"Pools",handleChangeTab:y=>{d(`/pools?tab=${y.value}`)}}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[t=="positions"?e.jsx(Ms,{isOpen:A,label:e.jsx(x,{fontSize:"12px",lineHeight:"20px",children:"Permanently burn/lock liquidity for an existing position. Trading fees and mining rewards earned remain claimable."}),"aria-label":"Yield",placement:"top",children:e.jsx(Q,{w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",as:"div",borderRadius:"8px",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),onClick:()=>{C(!1),i(!0)},children:"LP Burn"})}):e.jsx(Q,{borderRadius:"8px",w:{base:"50%",lg:"168px"},fontWeight:"500",variant:"outline",onClick:()=>d("/create-pool"),children:"Create a new pool"}),e.jsx(Q,{borderRadius:"8px",fontWeight:"500",w:{base:"50%",lg:"168px"},onClick:()=>d("/select-pool"),children:"Add Liquidity"})]})]}),l&&e.jsx(_n,{isOpen:l,onClose:()=>i(!1)})]})}const mn="/assets/tvl_bg-D80TUrdU.png",Pn="/assets/yield_bg-CcCC1tTK.png";function zn({isOpen:s,claimLoading:t,onClose:d,changeClaimLoading:l}){const[i,n]=p.useState(!1),{coinPriceObj:a}=Cs(),{getPositionBaseList:o}=ts(),{signAndExecuteTransaction:g}=Ps(),{currentAccount:u}=Te(),{getBatchHarvestFeeAndRewardsTxPayload:A}=cn(),{getTokenAmountValue:C}=qe(),[f,y]=p.useState([]),[U,R]=p.useState(!0),[G,se]=p.useState(!0),[F,J]=p.useState(.01),[ee,oe]=p.useState([]),[z,W]=p.useState([]),[M,v]=p.useState(""),[H,h]=p.useState(""),[_,S]=p.useState([]),{myPosYieldValue:Y,posBaseList:E,posBaseListLoading:L,posFeeDataLoading:ne,posRewardsDataLoading:X,posFeeData:O,posRewardsData:m}=pe(),me=c=>{const k=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,4})?).*$");c.target.value=c.target.value.replace(k,"$1"),J(c.target.value)},q=()=>{(!F||F<.01)&&J(.01)},Ce=L||ne||X;p.useEffect(()=>{const c=[];let k="0";const T=[];if((E==null?void 0:E.length)>0&&!L&&!ne&&!X){E.forEach((w,Be)=>{var Re,Ee,Fe,He,Ne,We;let he="0",ae="0",xe="0",r="0";const B=[],D=[];if(((Re=Object.values(O))==null?void 0:Re.length)>0){const P=O[w==null?void 0:w.posId],N=C((Ee=w==null?void 0:w.displayTokenA)==null?void 0:Ee.coin_type,P==null?void 0:P.displayFeeOwedA,"--"),de=C((Fe=w==null?void 0:w.displayTokenB)==null?void 0:Fe.coin_type,P==null?void 0:P.displayFeeOwedB,"--");he=$(he).plus((P==null?void 0:P.displayFeeOwedA)||0).plus((P==null?void 0:P.displayFeeOwedB)||0).toString(),N!=="--"&&de!=="--"&&(xe=$(N).plus(de).toString()),D.push({coin_address:Qe((He=w==null?void 0:w.displayTokenA)==null?void 0:He.coin_type,!1),amount:P==null?void 0:P.displayFeeOwedA,amountUSD:N,token:w==null?void 0:w.displayTokenA},{coin_address:Qe((Ne=w==null?void 0:w.displayTokenB)==null?void 0:Ne.coin_type,!1),amount:P==null?void 0:P.displayFeeOwedB,amountUSD:de,token:w==null?void 0:w.displayTokenB})}if(((We=Object.values(m))==null?void 0:We.length)>0){const P=m[w==null?void 0:w.posId];(P==null?void 0:P.length)>0&&P.forEach(N=>{var de;if(console.log("ðŸš€ ~ currentPosRewardsData.forEach ~ reward:",N),ae=$(ae).plus(N.display_amount_owed||0).toString(),Number(N==null?void 0:N.display_amount_owed)>0){const fe=C(N==null?void 0:N.token.coin_type,N.display_amount_owed);fe!=="--"&&(r=$(r).plus(fe).toString()),B.push({coin_address:Qe((de=N==null?void 0:N.token)==null?void 0:de.coin_type,!1),amount:N.display_amount_owed,amountUSD:fe,token:N==null?void 0:N.token})}})}const Ae=$(r).plus(xe).toString(),je=($(he).gt(0)||$(ae).gt(0))&&Number(Ae)==0?"--":Ae;console.log("ðŸš€ ~ posBaseList.forEach ~ totalRewardUsd:",Ae,je),k=$(k).plus(r).plus(xe).toString(),Number(je)!==0&&T.push(w),G&&Number(je)>Number(F)&&c.push({...w,totalRewardUsd:je,pendingRewarderList:B,pendingFeesList:D,rewarderUsd:r,feeOwedUsd:xe}),G||c.push({...w,totalRewardUsd:je,pendingRewarderList:B,pendingFeesList:D,rewarderUsd:r,feeOwedUsd:xe})}),oe(T);const V=c.filter(w=>Number(w.totalRewardUsd)!==0);W(V),console.log("ðŸš€ ~ constshowListposBaseList:any=useMemo ~ selectList:",V,z),G?(V==null?void 0:V.length)!==c.length?v(""):v("all"):(V==null?void 0:V.length)!==T.length?v(""):v("all");const te=c.sort((w,Be)=>Be.totalRewardUsd-w.totalRewardUsd);y(te),R(!1)}},[F,E,G,L,ne,X,a]);const{calculatePendingYield:Pe}=zs();p.useEffect(()=>{if(console.log("ðŸš€ ~ useEffect ~ selectList: ~ clickSelectAll ~ updatedList:",z),(z==null?void 0:z.length)>0){const{total:c,rewardAndFeeList:k}=Pe(z,O,m);console.log("ðŸš€ ~ useEffect ~ total:",z,c,k),h(c),S(k)}else h(""),S([])},[z==null?void 0:z.length,O,m]);const ze=c=>{if(console.log("ðŸš€ ~ selectItem ~ item:",c),Number(c==null?void 0:c.totalRewardUsd)<=0)return;const k=z,T=(k==null?void 0:k.filter(V=>(V==null?void 0:V.posId)!==(c==null?void 0:c.posId)))||[];k!=null&&k.some(V=>(V==null?void 0:V.posId)===(c==null?void 0:c.posId))||T.push(c),console.log("ðŸš€ ~ selectItem ~ updatedList:",T),W(T),G?(T==null?void 0:T.length)!==(f==null?void 0:f.length)?v(""):v("all"):(T==null?void 0:T.length)!==(ee==null?void 0:ee.length)?v(""):v("all")};p.useEffect(()=>{J(.01),n(!1),se(!0)},[s]);const we=()=>{if(M=="all")v(""),W([]);else{v("all");const c=z,k=Object.fromEntries(z.map(T=>[T==null?void 0:T.posId,T]));f.forEach(T=>{!k[T==null?void 0:T.posId]&&Number(T.totalRewardUsd)!==0&&c.push(T)}),console.log("ðŸš€ ~ clickSelectAll ~ updatedList:",k,c),W(c)}},{fetchAccountBalance:ke}=dn(),le=async()=>{l(!0);try{const c=Object.fromEntries(z.map(te=>[te==null?void 0:te.posId,te==null?void 0:te.pendingRewarderList])),{tx:k,txb:T}=await A(z,c,u==null?void 0:u.address);console.log("ðŸš€ ~ toClaimYield ~ tx:",k);const V=await g(T,{getShowInfo:()=>({modalDescriptionText:"Claim Yield",toastTitleText:"Claim"})});console.log("ðŸš€ ~ toClaimYield ~ res:",V),V&&(ke(),await o(u==null?void 0:u.address)),l(!1)}catch(c){l(!1),console.log("ðŸš€ ~ toClaimYield ~ error:",c)}finally{d()}},{isApp:Le}=ue();return e.jsxs(js,{autoFocus:!1,returnFocusOnClose:!1,isOpen:s,onClose:d,isCentered:!0,children:[e.jsx(fs,{}),e.jsxs(ys,{minWidth:Le?"300px":"446px",children:[e.jsx(bs,{children:e.jsx(ws,{fontWeight:"500",fontSize:"16px",children:i?"Claim Yield":"Details"})}),e.jsx(Ss,{}),e.jsx(vs,{p:"16px 0px 0",textAlign:"center",children:e.jsxs(K,{children:[e.jsxs(b,{w:"100%",children:[e.jsx(K,{w:"100%",p:"0 16px",children:e.jsx(b,{justify:"center",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",children:e.jsx(_e,{isLoaded:!Ce,children:e.jsxs(b,{gap:"4px",align:"center",children:[e.jsx(x,{color:"primary_gray",children:i?"Total Claim":"Pending Yield"}),e.jsx(x,{color:"primary",fontSize:"20px",fontWeight:"500",children:I(i?H:Y,2)})]})})})}),!i&&e.jsxs(j,{w:"100%",p:"0 16px",justify:"space-between",mt:"12px",children:[e.jsx(x,{color:"text_caption",children:"Position"}),e.jsxs(j,{w:"calc(100% - 50px)",justify:"flex-end",children:[e.jsx(Xe,{isChecked:G,onChange:()=>se(!G)}),e.jsx(x,{color:"text_caption",fontSize:"12px",children:"Hide yield <"}),e.jsx(Z,{borderRadius:"8px",w:"72px",h:"24px",p:"0",lineHeight:"20px",children:e.jsx(hs,{textAlign:"center",fontSize:"12px",p:"0px 12px",value:`$${F}`,onChange:me,onBlur:q})})]})]}),e.jsx(b,{w:"100%",p:"0 16px 16px",maxH:"370px",overflow:"auto",pr:(f==null?void 0:f.length)>2?"16px":"20px",mr:"-4px",children:i?_==null?void 0:_.map(c=>(console.log("ðŸš€ ~ :[yieldList]?.map ~ item:",c),e.jsx(Z,{w:"100%",p:"16px",borderRadius:"12px",sx:{_first:{mt:"12px"}},children:e.jsxs(j,{w:"100%",justify:"space-between",children:[e.jsx(Me,{token:c==null?void 0:c.token,imgBoxStyle:{w:"32px",h:"32px"},haveName:!1,symbolFontSize:"14px",warningIcon:{iconW:"16px",iconH:"16px"}}),e.jsxs(b,{align:"flex-end",gap:"4px",children:[e.jsx(x,{color:"text_caption",children:Se(c==null?void 0:c.amount,6)}),e.jsxs(x,{children:["(",I(c==null?void 0:c.amountUSD,2),")"]})]})]})},c==null?void 0:c.coin_address))):(f==null?void 0:f.length)>0?f==null?void 0:f.map(c=>e.jsx(is,{posInfo:c,onClickCheckBox:k=>ze(k),pageFrom:"pendingYieldModal",cursor:Number(c==null?void 0:c.totalRewardUsd)<=0?"not-allowed":"pointer",checked:z.some(k=>(k==null?void 0:k.posId)===(c==null?void 0:c.posId))},c==null?void 0:c.posId)):U?[{},{}].map((c,k)=>e.jsx(Rs,{},k)):e.jsx(ve,{type:"nodata"})}),i?e.jsx(j,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",justify:"center",mt:"-8px",children:e.jsx(Z,{cursor:"pointer",w:"168px",h:"36px",lineHeight:"34px",mt:"12px",p:"0",borderRadius:"8px",onClick:()=>n(!1),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:e.jsxs(j,{justify:"center",gap:"4px",children:[e.jsx(re,{xlinkHref:"#icon-icon_ascending_nor",transform:"rotate(-90deg)"}),e.jsx(x,{children:"Back"})]})})}):e.jsx(K,{w:"100%",p:"12px 16px 20px",bg:"bg_secondary",mt:"-8px",children:e.jsxs(j,{justify:"space-between",w:"100%",h:"90px",borderRadius:"16px",bg:"pending_yield_bg",p:"20px 16px",children:[e.jsxs(b,{gap:"4px",align:"flex-start",children:[e.jsx(x,{color:"primary_gray",children:"Amount selected"}),e.jsx(x,{color:"primary",fontSize:"18px",fontWeight:"500",children:I(H,2)})]}),e.jsxs(j,{children:[e.jsx(x,{color:"text_caption",children:"Select All"}),e.jsx(Ze,{checked:M=="all",onClick:we})]})]})})]}),i?e.jsx(Q,{isLoading:t,disabled:(_==null?void 0:_.length)==0||t,w:"100%",h:"52px",fontWeight:"500",onClick:le,children:"Confirm"}):e.jsx(Q,{disabled:Number(H)<=0,w:"100%",h:"52px",fontWeight:"500",onClick:()=>n(!0),children:"Claim Yield"})]})})]})]})}const gs=({yieldList:s})=>{const[t,d]=p.useState(!1),{myPosYieldValue:l}=pe(),{isApp:i}=ue();return e.jsx(b,{gap:"4px",p:{base:"0",lg:"12px 0"},align:"flex-start",onClick:i?()=>d(!t):()=>d(!1),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:e.jsxs(Je,{isLazy:!0,isOpen:t,placement:"bottom-end",children:[e.jsx($e,{children:e.jsx(ye,{as:"button",children:e.jsx(x,{cursor:Number(l)<=0?"text":"help",fontSize:"20px",color:"primary_green",textDecoration:Number(l)<=0?"none":"underline dotted",textUnderlineOffset:"2px",children:I(l,2)})})}),t&&Number(l)>0&&(s==null?void 0:s.length)>0&&e.jsx(Ie,{children:e.jsx(es,{zIndex:"2",w:"fit-content",maxH:"200px",overflow:"auto",p:"4px 0",children:e.jsx(ss,{p:"0px",children:e.jsx(b,{w:"100%",align:"flex-start",bg:"bg_secondary",gap:"0px",children:s==null?void 0:s.map(n=>{var a;return console.log("ðŸš€ ~ {yieldList?.map ~ item:",n),e.jsxs(j,{w:"100%",p:"10px 12px",minW:"300px",justify:"space-between",children:[e.jsx(Me,{token:n==null?void 0:n.token,imgBoxStyle:{w:"20px",h:"20px"},haveName:!1,symbolFontSize:"12px",warningIcon:{iconW:"10px",iconH:"10px"}}),e.jsxs(j,{gap:"4px",children:[e.jsx(x,{fontSize:"12px",color:"text_caption",children:Se(n==null?void 0:n.amount,6)}),e.jsxs(x,{fontSize:"12px",children:["(",I(n==null?void 0:n.amountUSD,2),")"]})]})]},(a=n==null?void 0:n.token)==null?void 0:a.coin_type)})})})})})]})})};function Bn(){const{currentAccount:s}=Te(),[t,d]=p.useState(!1),[l,i]=p.useState(!1),[n,a]=p.useState([]),{getTokenAmountValue:o}=qe(),{coinPriceObj:g}=Cs(),{myPosYieldValue:u,setMyPosYieldValue:A,posFeeDataLoading:C,posRewardsDataLoading:f,posBaseList:y,posLiquidityData:U,posBaseListLoading:R,posLiquidityDataLoading:G,posFeeData:se,posRewardsData:F}=pe(),J=p.useMemo(()=>{let M=0,v=0;return(y==null?void 0:y.length)>0&&(s!=null&&s.address)?(y.forEach(H=>{var Y,E;const h=U[H==null?void 0:H.posId];console.log("ðŸš€ ~ posBaseList.forEach ~ currentPosData:",h);const _=o((Y=H==null?void 0:H.displayTokenA)==null?void 0:Y.coin_type,h==null?void 0:h.displayCoinAmountA),S=o((E=H==null?void 0:H.displayTokenB)==null?void 0:E.coin_type,h==null?void 0:h.displayCoinAmountB);M=$(M).plus(_).plus(S).toString(),v=$(v).plus((h==null?void 0:h.displayCoinAmountA)||0).plus((h==null?void 0:h.displayCoinAmountB)||0).toString()}),$(M).lte(0)&&$(v).gt(0)?"$--":I(M,2)):"$0"},[y,U,s,g]),ee=s!=null&&s.address?R:!1,{calculatePendingYield:oe}=zs();p.useEffect(()=>{if(!(s!=null&&s.address))A(""),a([]);else if(!R&&(y==null?void 0:y.length)<=0&&(A("0"),a([])),(y==null?void 0:y.length)>0&&(s!=null&&s.address)&&!R&&!C&&!f){const{total:M,rewardAndFeeList:v}=oe(y,se,F);A(M),a(v)}},[y,R,C,f,s,g]);const z=s!=null&&s.address?!u:!1,{isApp:W}=ue();return e.jsxs(ks,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"20px",children:[e.jsxs(j,{justifyContent:"space-between",w:{base:"100%",lg:"50%"},p:"0 20px",h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:mn,backgroundSize:"100% 100%",children:[e.jsx(x,{fontSize:"16px",color:"primary_gray",children:"Total Liquidity"}),e.jsx(_e,{isLoaded:!ee,children:e.jsx(x,{fontSize:"20px",color:"primary",children:J})})]}),e.jsxs(j,{justifyContent:"space-between",p:"0 20px",w:{base:"100%",lg:"50%"},h:"80px",borderRadius:"14px",bgColor:"card_bg",bgImage:Pn,backgroundSize:"100% 100%",children:[e.jsx(x,{fontSize:"16px",color:"primary_gray",children:"Pending Yield"}),e.jsx(_e,{isLoaded:!z,children:W?e.jsxs(j,{gap:"20px",children:[e.jsxs(b,{align:"flex-end",children:[e.jsx(gs,{yieldList:n}),e.jsx(Q,{isLoading:t,disabled:Number(u)<=0||t,w:"100px",h:"24px",onClick:()=>i(!0),borderRadius:"8px",fontSize:"12px",fontWeight:"500",children:"Claim All"})]}),Number(u)>0&&e.jsx(re,{xlinkHref:"#icon-icon_spread",onClick:()=>i(!0)})]}):e.jsxs(j,{onClick:()=>i(!0),children:[e.jsx(gs,{yieldList:n}),Number(u)>0&&e.jsx(re,{xlinkHref:"#icon-icon_spread"}),e.jsx(Q,{isLoading:t,disabled:Number(u)<=0||t,w:"112px",h:"32px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",children:"Claim All"})]})})]}),e.jsx(zn,{isOpen:l,claimLoading:t,onClose:()=>i(!1),changeClaimLoading:M=>d(M)})]})}function Rn({poolInfo:s}){var g,u,A,C,f,y;const t=Ye(),{posPoolsRelatedData:d,posApiPoolData:l}=pe(),i=(g=l[s==null?void 0:s.clmmPoolAddress])==null?void 0:g.haveFarming,n=(((A=d[(u=s==null?void 0:s.list[0])==null?void 0:u.posId])==null?void 0:A.displayFee)||"--")+"%",[a,o]=p.useState(!0);return e.jsxs(b,{w:"100%",bg:"card_bg",p:"12px",borderRadius:"16px",gap:{base:"12px",lg:"16px"},children:[e.jsxs(ks,{flexDir:{base:"column",lg:"row"},w:"100%",justify:"space-between",gap:{base:"12px",lg:"8px"},onClick:()=>o(!a),children:[e.jsx(Ts,{symbolFontWeight:"500",symbolFontSize:"16px",symbolEllipsesDecimals:10,nameEllipsesDecimals:20,poolInfo:{feeDisplay:n,...s},haveName:!0}),e.jsxs(j,{flexDirection:{base:"column",lg:"row"},gap:{base:"12px",lg:"8px"},children:[e.jsxs(j,{w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"flex-start"},flexWrap:{base:"wrap",lg:"nowrap"},children:[e.jsx(x,{color:"primary_gray",children:"Current Price"}),e.jsx(xn,{symbolEllipsesDecimals:10,posId:(C=s==null?void 0:s.list[0])==null?void 0:C.posId,displayTokenA:s==null?void 0:s.displayTokenA,displayTokenB:s==null?void 0:s.displayTokenB})]}),i&&e.jsxs(j,{bg:"primary_yellow_opacity.10",h:"32px",w:{base:"100%",lg:"unset"},justify:"center",p:"0px 12px",borderRadius:"8px",onClick:U=>{be(U),t("/farms")},border:"1px solid",borderColor:"transparent",cursor:"pointer",sx:{_hover:{border:"1px solid",borderColor:"primary_yellow"}},children:[e.jsx(Ke,{src:"/images/icon_farms.png",w:"20px",h:"20px"}),e.jsx(x,{color:"primary_yellow",mr:"-4px",children:"Farm"}),e.jsx(re,{xlinkHref:"#icon-icon_list_token",w:"16px",h:"16px",svgFill:"primary_yellow",svgHover:"primary_yellow"})]}),e.jsxs(j,{w:{base:"100%",lg:"unset"},children:[e.jsx(Q,{onClick:U=>{be(U),t(`/liquidity?poolAddress=${s==null?void 0:s.clmmPoolAddress}`)},borderRadius:"8px",w:{base:"50%",lg:"148px"},h:"32px",fontSize:"12px",fontWeight:"500",variant:"outline",children:"Create new position"}),e.jsx(Z,{cursor:"pointer",w:{base:"50%",lg:"unset"},p:"4px 16px",h:"32px",borderRadius:"8px",bg:"none",_hover:{svg:{fill:"text_caption"}},children:e.jsxs(j,{justify:"center",w:"100%",h:"100%",gap:"4px",children:[e.jsxs(x,{fontSize:"12px",color:"primary",children:[(f=s==null?void 0:s.list)==null?void 0:f.length," ",((y=s==null?void 0:s.list)==null?void 0:y.length)>1?"Positions":"Position"]}),e.jsx(re,{svgW:"14px",svgH:"14px",w:"14px",h:"14px",xlinkHref:"#icon-icon_arrow",fontSize:"12px",transition:"transform 0.5s",transform:a?"rotate(180deg)":"rotate(0deg)"})]})})]})]})]}),a&&e.jsx(b,{w:"100%",maxH:"680px",overflow:"auto",children:s==null?void 0:s.list.map((U,R)=>e.jsx(sn,{positionInfo:U},R))})]})}function En({isRefreshed:s,handleIsRefreshed:t}){var H;const{getStatistics:d}=_s(),{fetchTokenPrices:l}=qe(),{currentAccount:i,onWalletModal:n}=Te(),{getPositionBaseList:a,getPosRelatedData:o}=ts(),{posRewardsData:g,posBaseList:u,setShowPosListLength:A,setMyPosYieldValue:C,posBaseListLoading:f,posBaseListGroupByPool:y}=pe(),[U,R]=p.useState([]),{getNotifiPositionTransfer:G}=rn(),se=()=>{console.log("ðŸš€ ~ handleRefresh ~ handleRefresh:"),t(!1),C(""),d(),v(),i!=null&&i.address&&z(i==null?void 0:i.address),setTimeout(()=>{t(!0)},1e3)};pn({onRpcChange:()=>{i!=null&&i.address&&z(i==null?void 0:i.address)}});const[F,J]=p.useState([]),ee=h=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",h),J(_=>[..._,h])},oe=h=>{console.log("ðŸš€ ~ onClickIncentiveTypes ~ tokenInfo:",h),J(_=>_.filter(S=>(S==null?void 0:S.coin_type)!==(h==null?void 0:h.coin_type)))};p.useEffect(()=>{C(""),i!=null&&i.address?z(i==null?void 0:i.address):A("")},[i==null?void 0:i.address]);const z=async h=>{await a(h)};p.useEffect(()=>{console.log("ðŸš€ ~ useEffect ~ posBaseList:",u),(u==null?void 0:u.length)>0&&o(u)},[u]);const{notifiClient:W,notifiSources:M}=Os();p.useEffect(()=>{G(u,W,M)},[u,W,M]),p.useEffect(()=>{var E,L,ne,X;const h=(E=F[0])!=null&&E.coin_type?ge((L=F[0])==null?void 0:L.coin_type):void 0,_=(ne=F[1])!=null&&ne.coin_type?ge((X=F[1])==null?void 0:X.coin_type):void 0,S=Object.values(y).filter(O=>h&&_?ge(O.tokenA.coin_type)==h&&ge(O.tokenB.coin_type)==_||ge(O.tokenA.coin_type)==_&&ge(O.tokenB.coin_type)==h:h?ge(O.tokenA.coin_type)==h||ge(O.tokenB.coin_type)==h:O);console.log("ðŸš€ ~ useEffect ~ filterArr:",Object.values(y),S),R(S);const Y=S.reduce((O,m)=>O+(m.list?m.list.length:0),0);i!=null&&i.address&&A(Y.toString())},[F,y]);const v=()=>{const h=[];if((u==null?void 0:u.length)>0){u.map(S=>{h.push(S==null?void 0:S.coinTypeA),h.push(S==null?void 0:S.coinTypeB);const Y=g[S==null?void 0:S.posId];Y==null||Y.map(E=>{$(E==null?void 0:E.display_amount_owed).gt(0)&&h.push(E==null?void 0:E.coin_address)})});const _=Array.from(new Set(h));console.log("ðŸš€ ~ refreshTokenPrice ~ list:",u,h,_),l(_)}};return p.useEffect(()=>{v()},[u==null?void 0:u.length,g]),p.useEffect(()=>(d(),()=>{A("")}),[]),p.useEffect(()=>{f&&A("")},[f]),e.jsxs(b,{gap:"20px",w:"100%",children:[e.jsx(Bs,{isPools:!1,handleRefresh:se,selectCoinList:F,onClickSelectCoinList:ee,onDeleteSelectCoinList:oe}),e.jsx(K,{h:"1px",w:"100%",bg:"border"}),e.jsx(Bn,{}),i!=null&&i.address?f?[{},{},{},{}].map((h,_)=>e.jsx(nn,{},_)):((H=Object.values(U))==null?void 0:H.length)>0?Object.values(U).map((h,_)=>e.jsx(Rn,{poolInfo:h},_)):e.jsx(ve,{type:"nodata",text:"No liquidity positions"}):e.jsx(ve,{type:"nowallet",onboard:()=>n(!0)})]})}function Nt(){const{tab:s}=ms(),[t,d]=p.useState(!0),l=i=>{d(i)};return e.jsxs(b,{gap:"20px",w:"100%",pt:"40px",children:[e.jsx(Tn,{isRefreshed:t}),(s=="pools"||s===void 0)&&e.jsx(yn,{isRefreshed:t,handleIsRefreshed:l}),s=="positions"&&e.jsx(En,{isRefreshed:t,handleIsRefreshed:l})]})}export{Nt as default};
