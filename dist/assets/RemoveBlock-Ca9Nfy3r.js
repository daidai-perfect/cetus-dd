import{a as p,ab as De,j as t,V as Ne,H as ae,I as hi,T as K,R as bi,v as be,f as ve,a2 as ki,a3 as Ai,a4 as Si,a5 as wi}from"./vendor-DsVemle5.js";import{e as Pe,f as _i,c as vi,a as Ri,g as Ci,Z as ji,R as Li}from"./ZapSwitch-CQHx5PCq.js";import{a as qi,u as Fi}from"./useTransaction-CjlygSkT.js";import{u as Be}from"./global-CXwwb5OW.js";import{u as Ee,g as fi,a as Ie,f as zi}from"./usePositionList-DMAeOMoO.js";import{a as Re,b as ei}from"./useNotifiSubscription-rM7Fm_-w.js";import{f as $e}from"./index-D6pLRAs4.js";import{u as Mi}from"./useAccountBalance-CBRzIpkZ.js";import{a as Ni,n as ii,a2 as he,I as Ei,B as ti,J as Vi,Y as Wi,j as Zi,d as a,az as le,r as Ui,A as _e,x as Gi,a3 as Hi,m as Je,l as Ke,a5 as Xi,w as we,a6 as Ye,i as $i}from"./index-DIvDX_Yh.js";import{u as Ji}from"./usePosAdd-BOdxQXZJ.js";import{M as Me}from"./msafe-oYBkW7LJ.js";import{v as Oe}from"./v4-C6aID195.js";import{T as Ki}from"./TradeInputGroup-CW7tw1iX.js";import{A as Yi}from"./index-Cy9bHcqq.js";import{u as Oi,R as Qe}from"./ExpendItem-n-_qpxU7.js";function Qi(i,m){return{currentApiPoolInfo:p.useMemo(()=>{if(i!=null&&i.clmmPool)return m==null?void 0:m[i==null?void 0:i.clmmPool]},[i==null?void 0:i.clmmPool,m])}}const Di="/assets/img_farming@2x-CwRUS-3E.png";function Pi(){Ni();const{currentPosBaseInfo:i,farmsPosRewardsData:m,posPoolsRelatedData:b,posBaseListLoading:e,posPoolsOriginalData:C}=Ee(),{currentPosPoolInfo:n}=Re(),{currentAccount:x}=ii(),{getCurrentPosBaseInfo:j}=ei(),{getFarmsRewardsData:_}=fi(),{getClmmPosName:H}=Ie(),Y=p.useMemo(()=>{var l;if(i!=null&&i.tokenName)return i==null?void 0:i.tokenName;{const d=(l=C==null?void 0:C[i==null?void 0:i.clmmPool])==null?void 0:l.index;return H(i==null?void 0:i.index,d)||""}},[i==null?void 0:i.tokenName,i==null?void 0:i.index,i==null?void 0:i.clmmPool,C]),X=b[i==null?void 0:i.posId],$=(X==null?void 0:X.currentStatus)=="Active",T=m[i==null?void 0:i.id],E=(n==null?void 0:n.farmsRewarderList)||[],O=T==null?void 0:T.reduce((l,d)=>l+d.display_amount_owed,0),{toStakePos:w,toUnStakePos:F,toClaimPos:Q,unstakeLoading:c,claimLoading:g}=Oi(),u=De(),k=l=>{u(`/position-detail/${l[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{j(x==null?void 0:x.address,l[0].parsedJson.wrapped_position_id,!0)},2e3)},A=async()=>{w(i==null?void 0:i.id,n==null?void 0:n.farmsPoolAddress,Y,k)},U=()=>{u(`/position-detail/${i==null?void 0:i.posId}`,{replace:!0}),setTimeout(()=>{j(x==null?void 0:x.address,i==null?void 0:i.posId,!0)},2e3)},V=async()=>{F(i==null?void 0:i.id,i==null?void 0:i.farmsPool,Y,U)},ge=()=>{setTimeout(()=>{_([i])},2e3)},ue=async()=>{Q(i==null?void 0:i.id,i==null?void 0:i.farmsPool,ge)},I=p.useMemo(()=>(T==null?void 0:T.length)>0?T.reduce((l,d)=>he(l).plus(d==null?void 0:d.display_amount_owed).toString(),"0"):"0",[T,x==null?void 0:x.address,g,c]);return t.jsx(t.Fragment,{children:((n==null?void 0:n.farmsPoolAddress)||he(I).gt(0))&&t.jsxs(Ne,{w:"100%",children:[t.jsxs(ae,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Di,bgSize:"100% 100%",justify:"space-between",children:[t.jsxs(Ne,{align:"flex-start",children:[t.jsxs(ae,{children:[t.jsx(hi,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),t.jsx(K,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),t.jsx(K,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),t.jsxs(ae,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:t.jsx(Yi,{poolInfo:n,isPosition:!0,showAprSize:"12px"})}),t.jsxs(ae,{gap:"4px",cursor:"pointer",onClick:()=>u("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[t.jsx(K,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),t.jsx(Ei,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),t.jsxs(ti,{mt:"-20px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:"0 0 12px 12px",borderTop:"none",children:[t.jsx(K,{children:"Farming Rewards"}),t.jsx(ae,{w:"100%",flexWrap:"wrap",children:(T==null?void 0:T.length)>0&&he(I).gt(0)?T==null?void 0:T.map(l=>{var d;return t.jsx(bi.Fragment,{children:he(l==null?void 0:l.display_amount_owed).gt(0)&&t.jsx(Qe,{coinType:(d=l==null?void 0:l.token)==null?void 0:d.coin_type,amount:l==null?void 0:l.display_amount_owed,tokenInfo:l==null?void 0:l.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)},l==null?void 0:l.rewarder_type)}):(E==null?void 0:E.length)>0?E==null?void 0:E.map(l=>t.jsx(Qe,{coinType:l==null?void 0:l.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)):t.jsx(K,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),t.jsxs(ae,{w:"100%",justify:"space-between",mt:"16px",children:[(i==null?void 0:i.posType)=="farms"&&t.jsx(be,{disabled:g||c,isLoading:c,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:V,children:"Unstake"}),(i==null?void 0:i.posType)=="clmm"&&!$&&t.jsx(ve,{w:"50%",sx:{">button":{w:"100%"}},children:t.jsx(Vi,{placement:"top",tooltip:t.jsx(K,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:t.jsx(ve,{w:"100%",children:t.jsx(be,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),(i==null?void 0:i.posType)=="clmm"&&$&&t.jsx(be,{disabled:g||c,isLoading:c,h:"40px",w:"50%",fontSize:"14px",onClick:A,children:"Stake"}),t.jsx(be,{disabled:g||c||he(O).eq(0),isLoading:g,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:ue,children:"Claim rewards"})]})]})]})})}function Bi({action:i,haveZap:m,resetInputAmount:b}){const{useZapIn:e,setUseZapIn:C}=Re(),{setZapAmount:n,setPreDepositeData:x}=Pe(),j=()=>{b==null||b(),C(!e),n("")};return p.useEffect(()=>{C(!1),x(void 0)},[i]),t.jsxs(ae,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[t.jsx(K,{color:"primary_gray",fontSize:"14px",children:i==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),t.jsx(_i,{action:i,value:e,onChange:j})]})}function Ii(){const{clmmSdk:i}=Wi(),{peripherySdk:m}=Zi(),{slippage:b}=Be();return{getRemoveTsPayload:async n=>{const{posId:x,poolAddress:j,coinTypeA:_,coinTypeB:H,amountA:Y,amountB:X,liquidity:$,lowerTick:T,upperTick:E,posType:O,rewarderCoinTypes:w,farmsPoolId:F,farmsPosId:Q}=n,c=a(Y).mul(a(1).sub(a(b))),g=a(X.toString()).mul(a(1).sub(a(b)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",c,g),O==="clmm"){const u={coinTypeA:_,coinTypeB:H,pool_id:j,pos_id:x,delta_liquidity:$,min_amount_a:le(c.toString(),0)||"",min_amount_b:le(g.toString(),0)||"",collect_fee:!0,rewarder_coin_types:w};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",u);const k=await i.Position.removeLiquidityTransactionPayload(u),A={action:Me.DecreaseLiquidity,txbParams:u};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",k,A),{tx:k,msafeParams:A}}else{const u={pool_id:F||"",coinTypeA:_,coinTypeB:H,position_nft_id:Q||"",clmm_pool_id:j,min_amount_a:le(c.toString(),0)||"",min_amount_b:le(g.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:w,delta_liquidity:$,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",u);const k=await m.Farms.removeLiquidityPayload(u),A={action:"FarmingDecreaseLiquidity",txbParams:u};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",A,k),{tx:k,msafeParams:A}}},getCloseTsPayload:async n=>{const{posId:x,poolAddress:j,coinTypeA:_,coinTypeB:H,amountA:Y,amountB:X,liquidity:$,lowerTick:T,upperTick:E,posType:O,rewarderCoinTypes:w,farmsPoolId:F,farmsPosId:Q}=n,c=a(Y).mul(a(1).sub(a(b))),g=a(X.toString()).mul(a(1).sub(a(b)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",n,c.toString(),g.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",w),O==="clmm"){const u={coinTypeA:_,coinTypeB:H,pool_id:j,pos_id:x||"",min_amount_a:le(c.toString(),0)||"",min_amount_b:le(g.toString(),0)||"",rewarder_coin_types:w,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",u);const k=await i.Position.closePositionTransactionPayload(u),A={action:Me.RemoveLiquidity,txbParams:u};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",k,A),{tx:k,msafeParams:A}}else{const u={pool_id:F||"",coinTypeA:_,coinTypeB:H,position_nft_id:Q||"",clmm_pool_id:j,min_amount_a:le(c.toString(),0)||"",min_amount_b:le(g.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:w,delta_liquidity:$,unstake:!0,close_position:!0,clmm_position_id:x};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",u);const k=await m.Farms.removeLiquidityPayload(u),A={action:Me.FarmingRemoveLiquidity,txbParams:u};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",A,k),{tx:k,msafeParams:A}}}}}function et(){const{transactionConfirmation:i}=qi(),{getTokenAmountValue:m}=Ui(),{getCoinAmountFromLiquidity:b}=zi(),{currentPosBaseInfo:e,posLiquidityData:C,posRewardsData:n,setPosBaseList:x,posApiPoolData:j}=Ee(),{getCurrentPosBaseInfo:_}=ei(),{preAdd:H}=Ji(),{getRemoveTsPayload:Y,getCloseTsPayload:X}=Ii(),{getTokenALock:$,getTokenBLock:T}=Ie(),{setTokenAmountAfterA:E,setTokenAmountAfterB:O,currentPosPoolInfo:w,currentPoolSqrtPrice:F,setIsFixedDisplayTokenA:Q,slideValue:c,setSlideValue:g,isFixedDisplayTokenA:u,isPosDetailRefresh:k,currentPosDetailTab:A,useZapIn:U,curPosContractPoolInfo:V}=Re(),{getZapWithdrawToastInfo:ge,getZapWithdrawTx:ue,reCalculateZapData:I}=vi("Withdraw"),{getContractPoolInfo:l}=Ri(),{preDepositeData:d,currentZapToken:ee,setZapAmount:J,zapAmount:de}=Pe(),{currentApiPoolInfo:S}=Qi(e,j),te=n[e==null?void 0:e.posId],{mevProtect:oi,maxCapForGas:li,transactionMode:ai,customGasPrice:si}=Be(),[v,W]=p.useState(""),[R,Z]=p.useState(""),[ni,pe]=p.useState(!1),[Ce,je]=p.useState(""),D=e==null?void 0:e.displayTokenA,P=e==null?void 0:e.displayTokenB,f=C[e==null?void 0:e.posId],z=_e(f==null?void 0:f.displayCoinAmountA,void 0,!0),M=_e(f==null?void 0:f.displayCoinAmountB,void 0,!0),di=m(D==null?void 0:D.coin_type,v),pi=m(P==null?void 0:P.coin_type,R);p.useEffect(()=>{if(+v||+R){const o=+v,s=+R,r=a(+z).sub(o),h=a(M).sub(s);console.log("ðŸš€ ~ useEffect ~ numA.gt(0):",r.toString(),h.toString()),E(r.gt(0)?r.toString():"0"),O(h.gt(0)?h.toString():"0")}else E(""),O("")},[v,R]);const[Le,re]=p.useState(""),Ve=p.useRef("");p.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",Le),Ve.current=Le},[Le]);const xe=()=>{W(""),Z(""),pe(!1),re(""),g("--")},We=p.useMemo(()=>$(e,V),[V==null?void 0:V.current_tick_index,e]),Ze=p.useMemo(()=>T(e,V),[V==null?void 0:V.current_tick_index,e]),ke=e!=null&&e.isReverse?Ze:We,Ae=e!=null&&e.isReverse?We:Ze;p.useEffect(()=>{xe()},[ke,Ae]);const Ue=Gi((o,s,r)=>{var ye,ne;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",o);const h=s?(ye=e==null?void 0:e.displayTokenA)==null?void 0:ye.decimals:(ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.decimals,L=Hi(o,h),y=e==null?void 0:e.tokenA,q=e==null?void 0:e.tokenB,B=e==null?void 0:e.lowerTick,me=e==null?void 0:e.upperTick,N=e==null?void 0:e.isReverse,G={amount:L,tokenA:y,tokenB:q,isTokenA:N?!s:s,lowerTick:B,upperTick:me,curSqrtPrice:F,isReverse:N,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",G);const{displayCoinAmountA:oe,displayCoinAmountB:Se,liquidityAmount:se}=H(G);if(console.log("ðŸš€ ~ debouncedPreCalculate:",oe,Se,G,s,r),Ve.current===r){je(se),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",Ce,se);const Te=Je(a(se).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);a(Te).gt(100)||a(Te).eq(100)?(g(100),W(z),Z(M)):(g(Te),s?Z(Se||""):W(oe||""))}else xe();pe(!1)},500),[Ge,He]=p.useState(!1),qe=()=>{if((v||R)&&Xi(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",Ge,c),c==="--")return;if(Ge||Number(c)==100)Xe(Number(c));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const o=u?v:R;if(+o){const s=Oe();re(s),Ue(o,u,s)}}}};p.useEffect(()=>{A=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",k,z,M),qe())},[z,M]);const mi=(o,s)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",o),He(!1),je(""),!o){xe();return}if(pe(!0),Q(s),s){if(W(o),a(o).eq(z)){Z(M),g(100),re(""),pe(!1);return}}else if(Z(o),a(o).eq(M)){W(z),g(100),re(""),pe(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",o,+o),+o){const r=Oe();re(r),console.log("ðŸš€ ~ handleAmountChange ~ params:",o),Ue(o,s,r)}else pe(!1),s?Z(""):W("")},Xe=o=>{var s;if(He(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",z,M,o),U){const h=((s=S==null?void 0:S.tokenA)==null?void 0:s.coin_type)===(ee==null?void 0:ee.coin_type)?fe:ze;if(o===100)J(h);else{const L=a(h).mul(a(o).div(100)).toString();J(L)}}else if(o==100)W(z),Z(M);else{const r=e==null?void 0:e.tokenA,h=e==null?void 0:e.tokenB,L=_e(a(e==null?void 0:e.liquidity).mul(o).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,L);const y=e==null?void 0:e.lowerTick,q=e==null?void 0:e.upperTick,B=e==null?void 0:e.isReverse,me={tokenA:r,tokenB:h,liquidity:L,currentSqrtPrice:F,lowerTick:y,upperTick:q,roundUp:!1};try{const{amountA:N,amountB:ce}=b(me);je(L);const G=B?ce:N,oe=B?N:ce;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",N,ce),W(a(G).gt(0)?G:""),Z(a(oe).gt(0)?oe:"")}catch(N){console.log("ðŸš€ ~ changeSlideFun ~ error:",N),W(""),Z("")}}},{currentAccount:ie}=ii(),ci=p.useMemo(()=>{const o={text:"Remove",disabled:!1};return ie!=null&&ie.address?!+v&&!+R?(o.text="Enter an amount",o.disabled=!0,o):!ke&&v&&a(v).gt(z||0)||!Ae&&R&&a(R).gt(M||0)?(o.disabled=!0,o.text="Invalid Amount",o):((e==null?void 0:e.posType)=="burn"&&(o.disabled=!0),o):(o.text="Connect Wallet",o.disabled=!1,o)},[v,R,z,M,ie==null?void 0:ie.address]),{signAndExecuteTransaction:gi}=Fi(),{fetchAccountBalance:ui}=Mi(),[ri,Fe]=p.useState(!1),xi=De(),yi=async()=>{var r,h,L;Fe(!0);const o=c==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",te),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",w==null?void 0:w.miningRewardList);const s=o?!te||(te==null?void 0:te.length)==0?(r=(w==null?void 0:w.miningRewardList)||[])==null?void 0:r.reduce((y,q)=>(y.push(q.coinType),y),[]):(h=te||[])==null?void 0:h.reduce((y,q)=>(y.push(q.coin_address),y),[]):(L=te||[])==null?void 0:L.reduce((y,q)=>(a(q==null?void 0:q.amount_owed).gt(0)&&y.push(q.coin_address),y),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",s);try{let y,q,B;if(U){const N=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;B=ge(ke,Ae),i(B),y=await ue(N,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,s,(e==null?void 0:e.posType)=="farms")}else{const N=e!=null&&e.isReverse?a(R).mul(we.pow(10,P.decimals)).toString():a(v).mul(we.pow(10,D.decimals)).toString(),ce=e!=null&&e.isReverse?a(v).mul(we.pow(10,D.decimals)).toString():a(R).mul(we.pow(10,P.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",w,te,s);const G={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:N,amountB:ce,liquidity:Ce,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:s};(e==null?void 0:e.posType)=="farms"&&(G.farmsPoolId=e==null?void 0:e.farmsPool,G.farmsPosId=e==null?void 0:e.id),B={getShowInfo:(Se,se)=>{const ye="Remove "+[$e(v,D==null?void 0:D.symbol),$e(R,P==null?void 0:P.symbol)].filter(Boolean).join(" and "),ne={modalDescriptionText:ye,toastTitleText:ye};if(Se==="success"){let Te=v,Ti=R;se&&(Te=Ye(se,D)||v,Ti=Ye(se,P)||R),ne.toastDescriptionContent="",ne.modalDescriptionText="",ne.toastTitleText="Remove Liquidity Successful"}return ne}},i(B),console.log("ðŸš€ ~ toAdd ~ params:",Ce,o,c,G);const oe=o?await X(G):await Y(G);y=oe.tx,q=oe.msafeParams}const me=await gi(y,B,{useMev:oi,useFastMode:ai==="Fast Mode",maxCapForGas:li,customGasPrice:si,msafeParams:q});console.log("ðŸš€ ~ toClaim ~ res:",me),me?(ui(),xe(),J(""),o?(x([]),xi("/pools?tab=positions")):_(ie==null?void 0:ie.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&l(e==null?void 0:e.clmmPool).then(N=>{console.log("ðŸš€ ~ toClaim ~ res:",N),U?I():qe()}),Fe(!1)}catch(y){qe(),Fe(!1),console.log("ðŸš€ ~ toClaim ~ error:",y)}};p.useMemo(()=>{if(e!=null&&e.posId){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,r=e==null?void 0:e.liquidity,h=e==null?void 0:e.lowerTick,L=e==null?void 0:e.upperTick;b({tokenA:o,tokenB:s,liquidity:r,currentSqrtPrice:F,lowerTick:h,upperTick:L,roundUp:!1})}},[e==null?void 0:e.posId,F]);const{onlyAmountA:fe,onlyAmountB:ze}=p.useMemo(()=>({onlyAmountA:f==null?void 0:f.onlyAmountA,onlyAmountB:f==null?void 0:f.onlyAmountB}),[f]);return p.useEffect(()=>{var o;if(U)if(de){const r=((o=S==null?void 0:S.tokenA)==null?void 0:o.coin_type)===(ee==null?void 0:ee.coin_type)?fe:ze;if(r){const h=Je(a(de).div(r).mul(100).toString(),2,!0);g(h)}else g("--")}else g("--");else g("--")},[U,de]),p.useEffect(()=>{if(A!=="increase"&&U){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",d),d!=null&&d.amount_a||d!=null&&d.amount_b){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,r=Ke(d==null?void 0:d.amount_a,o==null?void 0:o.decimals),h=Ke(d==null?void 0:d.amount_b,s==null?void 0:s.decimals);if(c==100)W(String(z)),Z(String(M));else{const L=e!=null&&e.isReverse?h:r,y=e!=null&&e.isReverse?r:h;W(a(L).gt(z)?String(z):L),Z(a(y).gt(M)?String(M):y)}return}W(""),Z("")}},[U,d,c]),p.useEffect(()=>{W(""),Z("")},[]),{tokenAmountA:v,tokenAmountB:R,resetInputAmount:xe,showDisplayTokenALock:ke,showDisplayTokenBLock:Ae,currentPosLiquidityData:f,tokenABalance:z,tokenBBalance:M,displayTokenA:D,displayTokenB:P,tokenAmountValueA:di,tokenAmountValueB:pi,preRemoveLoading:ni,handleAmountChange:mi,btnStatusText:ci,changeSlideFun:Xe,toRemove:yi,isRemoveLoading:ri,onlyAmountA:fe,onlyAmountB:ze,currentApiPoolInfo:S,currentPoolSqrtPrice:F}}function Tt(){var de;const{currentPosBaseInfo:i,posPoolsRelatedData:m,posApiPoolData:b}=Ee(),{isFixedDisplayTokenA:e,slideValue:C,setSlideValue:n,curPosContractPoolInfo:x,useZapIn:j,currentPosPoolInfo:_}=Re(),{tokenAmountA:H,tokenAmountB:Y,tokenABalance:X,tokenBBalance:$,displayTokenA:T,displayTokenB:E,tokenAmountValueA:O,tokenAmountValueB:w,preRemoveLoading:F,handleAmountChange:Q,changeSlideFun:c,btnStatusText:g,toRemove:u,isRemoveLoading:k,showDisplayTokenALock:A,showDisplayTokenBLock:U,resetInputAmount:V,onlyAmountA:ge,onlyAmountB:ue,currentApiPoolInfo:I,currentPoolSqrtPrice:l,currentPosLiquidityData:d}=et();p.useEffect(()=>()=>{V()},[]);const ee=S=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",S),S=="MAX"||S==100?(n(100),c(100)):(n(Number((S+"").split("%")[0])),c(Number((S+"").split("%")[0])))};p.useEffect(()=>n("--"),[]);const J=m[i==null?void 0:i.posId];return t.jsxs(Ne,{w:"100%",gap:"8px",children:[t.jsxs(ve,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(I==null?void 0:I.haveZap)&&(i==null?void 0:i.posType)!=="burn"&&!A&&!U&&t.jsx(Bi,{action:"Withdraw",resetInputAmount:V}),j?t.jsx(Ci,{action:"Withdraw",apiPoolInfo:I,currentSqrtPrice:l,onlyAmountA:ge,onlyAmountB:ue,liquidity:i==null?void 0:i.liquidity,lowerTick:i==null?void 0:i.lowerTick,upperTick:i==null?void 0:i.upperTick,slideValue:String(C),currentPosLiquidityData:d,changeSlideValue:ee}):t.jsx(t.Fragment,{children:t.jsx(Ki,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:X||"",value:H,amountValue:O,loading:!e&&F,onChange:S=>{Q(S,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:T,half:!1,lock:{isLock:i&&x&&A,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:$||"",value:Y,amountValue:w,loading:e&&F,onChange:S=>{Q(S,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:E,half:!1,lock:{isLock:i&&x&&U,style:{borderRadius:"12px"}}},lock:{isLock:!i||!x||i&&(i==null?void 0:i.posType)=="burn",text:i&&(i==null?void 0:i.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(i==null?void 0:i.posType)!=="burn"&&t.jsxs(ti,{borderRadius:"12px",p:"16px",mt:"8px",children:[t.jsx(K,{color:"primary_gray",children:"Amount"}),t.jsx(it,{percentage:C,onChange:S=>ee(S)})]})]}),j?t.jsx(ji,{action:"Withdraw",onClick:u,hideDepositRatio:!0,otherLoading:k}):t.jsx(be,{isLoading:k,onClick:u,disabled:g.disabled||k,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:g.text}),(i==null?void 0:i.posType)!=="burn"&&(_==null?void 0:_.farmsRewarderList)&&((de=_==null?void 0:_.farmsRewarderList)==null?void 0:de.length)>0&&t.jsx(Pi,{}),J&&(J==null?void 0:J.minPrice)!=="0"&&(J==null?void 0:J.maxPrice)!=="âˆž"&&t.jsx(Li,{subscriptionSource:"PositionDetail"})]})}function it(i){const{percentage:m,onChange:b}=i,e=p.useMemo(()=>(console.log("ðŸš€ ~ PositionSlider ~ percentage:",m),Number(m)!==100?`${m}%`:"MAX"),[m]),C=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}];return t.jsxs(ve,{children:[t.jsxs(ae,{w:"100%",justifyContent:"space-between",m:"10px 0",children:[t.jsxs(K,{w:"84px",fontSize:"24px",color:"text_caption",children:[m=="--"?"--":a(m).gt(0)&&Number(m)<.01?"<0.01":_e(m,2),"%"]}),t.jsx($i,{type:"outlineTab",tabList:C,currentTab:e,handleChangeTab:n=>{n.label==="MAX"?b(100):b(n.label.replace("%",""))},wrapStyle:{w:{base:"220px",lg:"300px"},h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsxs(ki,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:m=="--"?0:Number(m),onChange:n=>b(n+"%"),children:[t.jsx(Ai,{children:t.jsx(Si,{})}),t.jsx(wi,{})]})]})}export{Pi as F,it as P,Tt as R,Bi as T,Qi as u};
//# sourceMappingURL=RemoveBlock-Ca9Nfy3r.js.map
