import{aE as Ds,aF as ft,aG as Gs,aH as Ks,u as _t,r as j,X as zt,j as t,T as L,h as Qs,H as $,I as be,b as Re,V as W,g as Ee,ac as vt,as as Z,e as wt,C as He,$ as ge,l as Rt,k as ze,d as H,aI as Et,f as Ae,B as te,U as Zt,m as pe,aJ as jt,Y as Jt,aK as Xs,ah as Ve,aL as Ys,S as De,a1 as dt,a as Ke,aD as At,ad as Pt,ae as It,af as es,ag as ts,ai as Zs,aj as ss,a0 as rs,W as Ct,aa as tt,aM as is,aN as kt,a4 as ns,az as $t,aO as ce,aP as Je,aQ as rt,aR as ie,a6 as Js,aS as qt,aT as Ps,c as Lt,aU as Is,aV as er,ar as tr,aB as sr,an as Wt,aW as We,aX as je,aY as rr,a9 as ir,aZ as nr,a_ as ar}from"./index-BHioxihs.js";import{A as cr}from"./index-C8I2j922.js";import{i as lr,R as dr,C as or}from"./api-data-utils-BCUKKSI0.js";import{u as I}from"./index-ef6kLmcE.js";import{u as le,a as ur,P as xr,F as as}from"./PositionListLoading-B2KtPOhM.js";import{u as Ge}from"./useDocumentSize-BYcypMB8.js";import{H as pr,T as gr,a as mr,u as yr,V as hr}from"./VolumeChart-B8bKjTG2.js";import{N as Oe}from"./NoData-CGTwny5r.js";import{A as br}from"./AddressUnderline-DQBj8kxU.js";import{T as fr}from"./TvlChart-DnSfUkgP.js";import{u as jr}from"./useBurn-CemaT5By.js";import{H as oe}from"./HTextLabelBox-Bsxm1-Y-.js";import{T as Ar}from"./TooltipIcon-B9nqzUAW.js";import{A as cs}from"./AddressCopyLink-V33ze5Xu.js";import{P as Sr}from"./progress-PtX1TNGv.js";import{c as ls,d as _r,a as vr,u as wr}from"./usePositionList-BoU0l88X.js";import{u as Rr}from"./useRpcListener-6V6cT5db.js";import{u as Ce,a as ot,L as ds,b as Cr,c as kr,S as Pe}from"./useGetContractPoolInfo-BjXBYB2R.js";import{T as Lr}from"./TradeConfirmAmountInfo-BvV6xzPt.js";import{P as Tr}from"./PositionStatus-CHJ1G87m.js";import{R as Fr}from"./RangeAlerts-B_9VdYvj.js";import{u as Br}from"./global-DSBKxi_f.js";import{c as Mr,g as it,a as nt,u as zr}from"./useGetPoolList-g-UFM5lp.js";import{u as os}from"./useAccountBalance-BkCOmdNG.js";import{u as at}from"./useTokenBalance-BLs9nTNB.js";import{u as Er,a as $r}from"./useTransaction-B_4Jg7f2.js";import{u as us,m as yt,S as Ht,a as qr}from"./SelectTokenAndFeeConfirm-B_codzOX.js";import{u as Wr}from"./useNotifiSubscription-BJ-D_Wkl.js";import{u as Hr}from"./usePosAdd-qk1D_bvw.js";import{L as ct}from"./LockInput-BB5BkeHo.js";import{S as xs}from"./Slippage-CSOPwUTp.js";import{P as Ut,C as ps,I as lt}from"./common-_IjrV_V2.js";import{C as st}from"./CetusTooltip-D74XO5fb.js";import{S as St}from"./switch-CTPaY6an.js";import{u as gs}from"./usePriceImpact-DDSffb27.js";import{T as ms}from"./TradeInputGroup-DHW51PUD.js";import{i as qe}from"./index-XbiT-K8U.js";import{g as Ur}from"./liquidity-C_6QK2Qc.js";import{d as Nt,F as Nr}from"./FeeTierSelect-BzlcFebH.js";import{u as ys}from"./useToken-DZK_dzU3.js";import{u as Or,a as Vr}from"./swapWidget-BIV7naOA.js";import{R as Dr}from"./RefreshButton-CiZJCLSA.js";import{C as Gr}from"./CurrentPrice-DrDGi8VN.js";import{W as Kr}from"./WarningTokenTipModal-0WqsQevr.js";import"./useCurrentPos-rccnNGjZ.js";import"./PriceRange-BMz9svBY.js";import"./SingleTokenInfo-D28cfzld.js";import"./RangeValue-VrD61sZb.js";import"./debounce-Y-z0BKQj.js";import"./index-BUbOgaOa.js";import"./Pagination-BUK82tyz.js";import"./tr-CgVG6u5U.js";import"./_getAllKeysIn-Be6LJ_gF.js";import"./YAxis-B1p3Lqxl.js";import"./throttle-Bv3l8_Th.js";import"./generateCategoricalChart-C3Lrqi61.js";import"./linear-Cl5vGKe1.js";import"./index-BAk4C4IG.js";import"./progress.utils-BgTJxH-s.js";import"./usePreviousValue-qnWj3KZg.js";import"./ActionButton-CnqRq_P_.js";import"./VTextLabelBox-BiDTLKh0.js";import"./index-CbaF6qCz.js";import"./Loading-CfSmXNdE.js";import"./useXCetusHelper-Dkq4MOOs.js";import"./msafe-oYBkW7LJ.js";import"./useInsufficientBalanceToast-9c6kR8yD.js";import"./icon_lock@2x-OdzkPjmc.js";import"./InputBox-Cm2u5Ykw.js";import"./useSwapHelper-B60Pi301.js";var Qr=/\s/;function Xr(e){for(var s=e.length;s--&&Qr.test(e.charAt(s)););return s}var Yr=/^\s+/;function Zr(e){return e&&e.slice(0,Xr(e)+1).replace(Yr,"")}var Ot=NaN,Jr=/^[-+]0x[0-9a-f]+$/i,Pr=/^0b[01]+$/i,Ir=/^0o[0-7]+$/i,ei=parseInt;function Vt(e){if(typeof e=="number")return e;if(Ds(e))return Ot;if(ft(e)){var s=typeof e.valueOf=="function"?e.valueOf():e;e=ft(s)?s+"":s}if(typeof e!="string")return e===0?e:+e;e=Zr(e);var r=Pr.test(e);return r||Ir.test(e)?ei(e.slice(2),r?2:8):Jr.test(e)?Ot:+e}var ht=function(){return Gs.Date.now()},ti="Expected a function",si=Math.max,ri=Math.min;function hs(e,s,r){var c,x,l,i,o,a,d=0,p=!1,g=!1,y=!0;if(typeof e!="function")throw new TypeError(ti);s=Vt(s)||0,ft(r)&&(p=!!r.leading,g="maxWait"in r,l=g?si(Vt(r.maxWait)||0,s):l,y="trailing"in r?!!r.trailing:y);function _(h){var m=c,A=x;return c=x=void 0,d=h,i=e.apply(A,m),i}function R(h){return d=h,o=setTimeout(u,s),p?_(h):i}function v(h){var m=h-a,A=h-d,S=s-m;return g?ri(S,l-A):S}function C(h){var m=h-a,A=h-d;return a===void 0||m>=s||m<0||g&&A>=l}function u(){var h=ht();if(C(h))return b(h);o=setTimeout(u,v(h))}function b(h){return o=void 0,y&&c?_(h):(c=x=void 0,i)}function n(){o!==void 0&&clearTimeout(o),d=0,c=a=x=o=void 0}function f(){return o===void 0?i:b(ht())}function w(){var h=ht(),m=C(h);if(c=arguments,x=this,a=h,m){if(o===void 0)return R(a);if(g)return clearTimeout(o),o=setTimeout(u,s),_(a)}return o===void 0&&(o=setTimeout(u,s)),i}return w.cancel=n,w.flush=f,w}var we=(e=>(e.add="add_liquidity_event",e.remove="remove_liquidity_event",e.swap="swap_event",e))(we||{});function ii(){const{clmmSdk:e}=Ks(),{fetchByApi:s}=_t();return{getTransactionsHistory:async x=>{try{const l=await s(lr,"GET",x);if(console.log(l,"getTransactionsHistory"),l)return l;throw new Error("no data")}catch(l){console.error(l,"getTransactionsHistory ~ error")}},getTransactionsHistoryBySDK:async(x,l)=>{try{const i=await e.Pool.getPoolTransactionList({poolId:x,paginationArgs:l,fullRpcUrl:"https://rpc-mainnet.suiscan.xyz:443"});if(console.log(i,"getTransactionsHistoryBySDK"),i)return i;throw new Error("no data")}catch(i){console.error(i,"getTransactionsHistoryBySDK ~ error")}}}}function ni(){const{getTransactionsHistoryBySDK:s}=ii(),[r,c]=j.useState(!0),[x,l]=j.useState([]),[i,o]=j.useState(1),[a,d]=j.useState(),[p,g]=j.useState(!0),{apiPoolInfo:y,manualRefresh:_,setManualRefresh:R}=I(),{poolAddress:v}=le();j.useEffect(()=>{l([]),o(1),d(void 0),g(!0)},[v]),j.useEffect(()=>{_&&(l([]),o(1),d(void 0),g(!0),C({cursor:void 0,limit:10}))},[v,_]);const C=async b=>{var n;try{if(!p)return;if(v){c(!0);const f=await s(v,{...b});if(f){const w=(n=f==null?void 0:f.data)==null?void 0:n.map(h=>{var k,q;const m=h==null?void 0:h.parsedJson,A=m!=null&&m.amount_a||m!=null&&m.atob?y==null?void 0:y.tokenA:y==null?void 0:y.tokenB,S=m!=null&&m.amount_b||m!=null&&m.atob?y==null?void 0:y.tokenB:y==null?void 0:y.tokenA;return{...h,type:(k=h.type)!=null&&k.includes("Add")?we.add:(q=h.type)!=null&&q.includes("Remove")?we.remove:we.swap,items:[{amount:zt(m!=null&&m.amount_a?m==null?void 0:m.amount_a:m==null?void 0:m.amount_in,A==null?void 0:A.decimals).toString(),address:A==null?void 0:A.coin_type,url:A==null?void 0:A.logo_url,symbol:A==null?void 0:A.symbol},{amount:zt(m!=null&&m.amount_b?m==null?void 0:m.amount_b:m==null?void 0:m.amount_out,S==null?void 0:S.decimals).toString(),address:S==null?void 0:S.coin_type,url:S==null?void 0:S.logo_url,symbol:S==null?void 0:S.symbol}]}});b!=null&&b.cursor?l(h=>[...h,...w||[]]):l(w||[]),d(f==null?void 0:f.nextCursor),g(f==null?void 0:f.hasNextPage),c(!1)}}}catch(f){console.log(f,"getTransactionsHistoryBySDK-error"),c(!1)}finally{c(!1)}};return Ge(()=>{C({cursor:a,limit:10})},[i,v],{wait:500,leading:!0,trailing:!1}),{isLoading:r,list:x,apiPoolInfo:y,currentPage:i,onCurrentPageChange:()=>{o(b=>b+1)},hasNextPage:p}}const Ie={[we.add]:{icon:"#icon-a-icon_add1",color:"primary_green",title:"Add Liquidity"},[we.remove]:{icon:"#icon-tx_remove",color:"light_coral",title:"Remove Liquidity"},[we.swap]:{icon:"#icon-icon_swap",color:"primary",title:"Swap"}},ai=({type:e})=>{var s,r,c,x;return t.jsxs($,{children:[t.jsx(be,{xlinkHref:(s=Ie[e])==null?void 0:s.icon,svgFill:(r=Ie[e])==null?void 0:r.color,svgHover:(c=Ie[e])==null?void 0:c.color}),t.jsx(L,{color:"text_caption",children:(x=Ie[e])==null?void 0:x.title})]})},ci=({items:e,type:s,isReverse:r})=>{var x,l;const{isApp:c}=Re();return e?s===we.swap?c?t.jsxs(W,{align:"flex-end",gap:"8px",children:[t.jsx($e,{item:e==null?void 0:e[0]}),t.jsxs($,{justify:"flex-end",children:[t.jsx(be,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx($e,{item:e==null?void 0:e[1]})]})]}):t.jsxs($,{justify:"flex-end",gap:"8px",children:[t.jsx($e,{item:e==null?void 0:e[0]}),t.jsx(be,{xlinkHref:"#icon-icon_right",svgFill:"text_caption",svgHover:"text_caption"}),t.jsx($e,{item:e==null?void 0:e[1]})]}):c?t.jsx(W,{align:"flex-end",gap:"8px 16px",flexDir:r?"column-reverse":"column",children:(x=e==null?void 0:e.filter(i=>!!+i.amount))==null?void 0:x.map(i=>t.jsx($e,{item:i},i==null?void 0:i.address))}):t.jsx($,{justify:r?"flex-start":"flex-end",gap:"8px 16px",flexDir:r?"row-reverse":"row",children:(l=e==null?void 0:e.filter(i=>!!+i.amount))==null?void 0:l.map(i=>t.jsx($e,{item:i},i==null?void 0:i.address))}):null},$e=({item:e})=>t.jsxs($,{gap:"4px",children:[t.jsx(Ee,{imageUrl:e==null?void 0:e.url,w:"20px",h:"20px"}),t.jsx(L,{color:"text_caption",children:vt(e==null?void 0:e.amount)}),t.jsx(L,{children:Z(e==null?void 0:e.symbol,10)})]}),Dt=(e,s=!1)=>[{title:t.jsx(L,{children:"Event"}),key:"type",render:({type:r})=>t.jsx(ai,{type:r}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Amounts"}),key:"amounts",render:({items:r,type:c})=>t.jsx(ci,{items:r,type:c,isReverse:s}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Transactions"}),key:"tx",render:({tx:r})=>t.jsx(br,{address:r,color:"primary",fontSize:"14px",onClickLink:()=>{window.open(e(r,"tx"),"_blank")}}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}},{title:t.jsx(L,{textAlign:"right",children:"Time"}),key:"block_time",render:({block_time:r})=>t.jsx(L,{color:"text_caption",children:Qs(r)}),thConfig:{h:"52px",p:"0 !important"},tdConfig:{p:"0 !important"}}];function li(){const{getExplorerUrl:e}=wt(),{isLoading:s,list:r,apiPoolInfo:c,currentPage:x,onCurrentPageChange:l,hasNextPage:i}=ni(),{isApp:o}=Re();return t.jsxs(W,{w:"100%",position:"relative",mt:{base:"12px",lg:"24px"},gap:"0px",children:[t.jsx($,{w:"100%",justify:"space-between",children:t.jsx(L,{fontSize:"24px",color:"text_caption",fontWeight:"500",children:"Transactions"})}),!s&&(r==null?void 0:r.length)==0?t.jsx(Oe,{type:"nodata",mt:"16px",text:"No Recent Transactions"}):o?t.jsx(pr,{columns:Dt(e,c==null?void 0:c.isReverse),dataSource:r,loading:s&&x===1,itemSkeletonLength:5,itemHeight:"30px",wrapStyle:{gap:0},rowStyle:(a,d)=>({w:"100%",p:"0px",mt:"20px"}),onRowClick:a=>{window.open(e(a==null?void 0:a.tx,"tx"),"_blank")}}):t.jsx(gr,{columns:Dt(e,c==null?void 0:c.isReverse),dataSource:r,skeletonLength:10,loading:s&&x===1,onRowClick:a=>{window.open(e(a==null?void 0:a.tx,"tx"),"_blank")},rowStyle:{h:"52px",cursor:"pointer"}}),i&&t.jsx(He,{mt:{base:"40px",lg:"20px"},children:t.jsx(ge,{w:"120px",h:"32px",fontSize:"12px",borderRadius:"8px",bg:"button_ghost_bg",color:"primary",borderColor:"border",variant:"outline",onClick:l,children:s?t.jsx(Rt,{size:"sm",color:"text_caption"}):"Load More"})})]})}var Tt=(e=>(e.volume="Volume",e.tvl="TVL",e.fees="Fees",e))(Tt||{}),bs=(e=>(e.volume="vol",e.tvl="pure_tvl",e.fees="fee",e))(bs||{}),fs=(e=>(e.d="D",e.w="W",e.m="M",e))(fs||{}),js=(e=>(e.d="day",e.w="wek",e.m="mon",e))(js||{});const di={D:40,W:30,M:20};function oi(){const[e,s]=j.useState("Volume"),[r,c]=j.useState("D"),[x,l]=j.useState([]),{apiPoolInfo:i}=I(),[o,a]=j.useState(!0),[d,p]=j.useState(null),{getHistogramData:g}=mr(),{poolAddress:y}=le(),{getHoverTime:_,time:R}=yr();j.useLayoutEffect(()=>{l([]),s("Volume"),c("D"),p(null)},[y]);const v=async()=>{if(y)try{a(!0);const w=await g({date_type:js[r.toLowerCase()],type:bs[e.toLowerCase()],limit:di[r],address:y});w&&w.length&&l(w)}catch(w){throw console.error(w,"res-fetchAnalyticsData"),w}finally{a(!1)}};j.useEffect(()=>{v()},[y,e,r]),j.useEffect(()=>{d!=null&&d.date&&_(d==null?void 0:d.date,r)},[d==null?void 0:d.date,r]);const C=w=>{s(w.label),w.label!==e&&l([])},u=w=>{c(w.label),w.label!==r&&l([])},b=j.useMemo(()=>{if(e==="Volume")return{value:i==null?void 0:i.volume24Display,title:"Volume (24H)"};if(e==="TVL")return{value:i==null?void 0:i.tvlDisplay,title:"TVL"};if(e==="Fees")return{value:i==null?void 0:i.fees24Display,title:"Fees (24H)"}},[e,i==null?void 0:i.volume24Display,i==null?void 0:i.tvlDisplay,i==null?void 0:i.fees24Display]),n=Object.values(Tt).map(w=>({label:w})),f=Object.values(fs).map(w=>({label:w}));return{handleChartTabChange:C,handleDateTabChange:u,defaultDisplay:b,chartsTabs:n,dateTypes:f,chartLoading:o,analyticsData:x,hoverData:d,setHoverData:p,currentChartTab:e,currentDateType:r,time:R}}function ui(){const{isApp:e}=Re(),{handleChartTabChange:s,handleDateTabChange:r,defaultDisplay:c,chartsTabs:x,dateTypes:l,chartLoading:i,analyticsData:o,hoverData:a,setHoverData:d,currentChartTab:p,currentDateType:g,time:y}=oi();return t.jsxs(W,{flex:"1",border:"1px solid",borderColor:"border",borderRadius:"16px",p:{base:"8px",lg:"20px"},bg:"bg_secondary",gap:"20px",children:[t.jsxs($,{w:"100%",justify:{base:"center",lg:"space-between"},children:[t.jsx(ze,{type:"outlineTab",tabList:x,currentTab:p,handleChangeTab:s,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:{base:"1",lg:"0 0 308px"}},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}}),!e&&t.jsx(ze,{type:"outlineTab",tabList:l,currentTab:g,handleChangeTab:r,wrapStyle:{h:"32px",p:"3px",borderRadius:"8px",flex:"0 0 128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsxs(W,{w:"100%",align:"flex-start",children:[t.jsx(L,{color:"text_caption",fontSize:"24px",children:(a==null?void 0:a.num)!==void 0&&a!==null?H(Et(a.num)).gte("0.01")||H(Et(a.num)).equals("0")?`$${Ae(a==null?void 0:a.num,2)}`:"<$0.01":c==null?void 0:c.value}),t.jsx(L,{children:a!=null&&a.date?y:c==null?void 0:c.title}),e&&t.jsx(ze,{type:"outlineTab",tabList:l,currentTab:g,handleChangeTab:r,wrapStyle:{mt:"8px",h:"32px",p:"3px",borderRadius:"8px",w:"128px"},itemStyle:{fontSize:"12px",flex:1,borderRadius:"6px"}})]}),t.jsx(te,{w:"100%",h:"340px",mt:"20px",children:t.jsxs(te,{w:"100%",h:"100%",position:"relative",children:[i&&t.jsx(te,{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%,-50%)",children:t.jsx(Rt,{})}),p===Tt.tvl?t.jsx(fr,{data:o,onChangeValue:_=>d(_)}):t.jsx(hr,{data:o,onChangeValue:_=>d(_),pageFrom:"pools"})]})})]})}const xi=(e,s)=>({tokenAPrice:void 0,setTokenAPrice:r=>{e(()=>({tokenAPrice:r}))},tokenBPrice:void 0,setTokenBPrice:r=>{e(()=>({tokenBPrice:r}))},tokenAAmount:"",setTokenAAmount:r=>{e(()=>({tokenAAmount:r}))},tokenBAmount:"",setTokenBAmount:r=>{e(()=>({tokenBAmount:r}))},tokenAAmountUSD:"",setTokenAAmountUSD:r=>{e(()=>({tokenAAmountUSD:r}))},tokenBAmountUSD:"",setTokenBAmountUSD:r=>{e(()=>({tokenBAmountUSD:r}))},totalAmountUSD:"",setTotalAmountUSD:r=>{e(()=>({totalAmountUSD:r}))},tvlLoading:!0,setTvlLoading:r=>{e(()=>({tvlLoading:r}))},resetTvlInfo:()=>{e(()=>({tokenAPrice:void 0,tokenBPrice:void 0,tokenAAmount:"",tokenBAmount:"",tokenAAmountUSD:"",tokenBAmountUSD:"",totalAmountUSD:""}))}}),ut=Zt(xi);function pi(){const{getBurnPositionAmountByPool:e}=jr(),{apiPoolInfo:s,contractPoolInfo:r}=I(),[c,x]=j.useState("0"),[l,i]=j.useState("0"),[o,a]=j.useState("0"),[d,p]=j.useState("0"),[g,y]=j.useState(!1),{poolAddress:_}=le(),{tokenAPrice:R,tokenBPrice:v}=ut(),C=async(u,b)=>{try{y(!0),console.log("🚀🚀🚀 ~ file: burn-position-amount 29 ~ getBurnAmount ~ getBurnAmount:");const{totalA:n,totalB:f}=await e(u,b);x(n),i(f),R&&a(H(n).mul(R==null?void 0:R.price).toString()),v&&p(H(f).mul(v==null?void 0:v.price).toString())}catch(n){console.log("🚀🚀🚀  ~ getBurnAmount ~ error:",n)}finally{y(!1)}};return Ge(()=>{s&&(r!=null&&r.current_sqrt_price)&&C(s,r==null?void 0:r.current_sqrt_price)},[_,r==null?void 0:r.current_sqrt_price,R==null?void 0:R.price,v==null?void 0:v.price],{wait:500}),{burnAmountA:c,burnAmountB:l,burnAmountAUSD:o,burnAmountBUSD:d,loading:g}}function gi(){const{apiPoolInfo:e}=I(),{burnAmountA:s,burnAmountB:r,burnAmountAUSD:c,burnAmountBUSD:x,loading:l}=pi();return H(s).gt(0)||H(r).gt(0)?t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",bg:"bg_secondary",borderRadius:"16px",border:"1px solid",borderColor:"border",justify:"space-between",align:"flex-start",p:{base:"16px 8px 8px",lg:"20px 16px 20px 20px"},children:[t.jsxs($,{children:[t.jsx(L,{fontSize:"16px",color:"text_caption",children:"Burned Liquidity"}),t.jsx(Ar,{type:"burnedLiquidity"})]}),t.jsxs(pe,{gap:"16px",flexDir:{base:e!=null&&e.isReverse?"column-reverse":"column",lg:e!=null&&e.isReverse?"row-reverse":"row"},w:{base:"100%",lg:"822px",xl:"862px"},children:[t.jsx(Gt,{token:e==null?void 0:e.tokenA,amount:s,amountUSD:c,loading:l}),t.jsx(Gt,{token:e==null?void 0:e.tokenB,amount:r,amountUSD:x,loading:l})]})]}):null}const Gt=({token:e,amount:s,amountUSD:r,loading:c})=>t.jsxs(W,{flex:"1",align:"flex-start",gap:"16px",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Ee,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px"}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{color:"text_caption",fontSize:"16px",children:Z(e==null?void 0:e.symbol,10)}),t.jsx(L,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(oe,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(jt(s,e==null?void 0:e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(oe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:H(r).gt("0")?`$${Jt(jt(r,e==null?void 0:e.decimals),2)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]});function mi(){const{tokenAAmountUSD:e,totalAmountUSD:s}=ut(),r=j.useMemo(()=>{if(e&&s&&e!=="--"&&s!=="--"){const x=Xs(H(e).div(s).mul(100).toString(),2);return x==="NaN"?"--":x}return"--"},[e,s]),c=j.useMemo(()=>r&&r!=="--"?H(100).minus(r).toString():"--",[r]);return{tokenARatio:r,tokenBRatio:c}}const et=e=>e==="--"?"--":`${e}%`;function yi(){var g,y,_,R,v,C;const{apiPoolInfo:e,contractPoolInfo:s}=I(),{getExplorerUrl:r}=wt(),{poolAddress:c}=le(),{tokenAAmount:x,tokenBAmount:l,tokenAAmountUSD:i,tokenBAmountUSD:o,tvlLoading:a}=ut(),{tokenARatio:d,tokenBRatio:p}=mi();return t.jsxs(W,{w:{base:"100%",lg:"420px",xl:"440px"},gap:{base:"20px",lg:"40px"},p:{base:"20px 8px 8px",lg:"20px 16px"},borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_secondary",minW:{base:"100%",lg:"420px"},maxW:{base:"100%",lg:"440px"},children:[t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx($,{w:"100%",justify:"space-between",children:t.jsx(Ve,{fontSize:"16px",fontWeight:"400",children:"Pool Info"})}),t.jsxs(Ys,{templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)"},w:"100%",gap:{base:"20px",lg:"20px 36px"},children:[t.jsx(oe,{label:"Pool Address",labelStyle:{fontSize:"14px",whiteSpace:"nowrap"},value:t.jsx(cs,{address:c||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(r(c,"poolAddress"))}),valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Tick Spacing",labelStyle:{whiteSpace:"nowrap",fontSize:"14px"},value:(e==null?void 0:e.tickSpacing)||"",valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Pool ID",labelStyle:{fontSize:"14px"},value:s!=null&&s.index||e!=null&&e.index?`#${(s==null?void 0:s.index)||(e==null?void 0:e.index)}`:"--",valueStyle:{fontSize:"14px"}}),t.jsx(oe,{label:"Fee Tier",labelStyle:{fontSize:"14px"},value:`${e==null?void 0:e.feeDisplay}`||"--",valueStyle:{fontSize:"14px"}})]})]}),t.jsxs(W,{gap:"20px",w:"100%",children:[t.jsx($,{justify:"flex-start",w:"100%",children:t.jsx(Ve,{fontSize:"16px",fontWeight:"400",children:"Pool Composition"})}),t.jsxs(W,{gap:"16px",w:"100%",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Ee,{imageUrl:(g=e==null?void 0:e.displayTokenA)==null?void 0:g.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenA?(y=e==null?void 0:e.displayTokenA)==null?void 0:y.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:Z((_=e==null?void 0:e.displayTokenA)==null?void 0:_.symbol,10)}),a?t.jsx(De,{h:"12px"}):t.jsx(L,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(p):et(d)})]})]}),t.jsx(te,{w:"200px",children:t.jsx(Sr,{value:Number(e!=null&&e.isReverse?p:d),size:"xs",h:"4px",borderRadius:"4px",bg:[d,p].includes("--")?"border":"quote_green",sx:{'div[role="progressbar"]':{bg:[d,p].includes("--")?"background":"primary"}}})}),t.jsxs($,{gap:"12px",children:[t.jsxs(W,{align:"flex-end",gap:"4px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:Z((R=e==null?void 0:e.displayTokenB)==null?void 0:R.symbol,10)}),a?t.jsx(De,{h:"12px"}):t.jsx(L,{fontSize:"12px",fontWeight:"500",children:e!=null&&e.isReverse?et(d):et(p)})]}),t.jsx(Ee,{imageUrl:(v=e==null?void 0:e.displayTokenB)==null?void 0:v.logo_url,w:"28px",h:"28px",coinType:e!=null&&e.displayTokenB?(C=e==null?void 0:e.displayTokenB)==null?void 0:C.coin_type:""})]})]}),t.jsxs(W,{w:"100%",flexDir:e!=null&&e.isReverse?"column-reverse":"column",gap:"16px",children:[t.jsx(Kt,{loading:a,token:e==null?void 0:e.tokenA,amount:x,amountUSD:i}),t.jsx(Kt,{loading:a,token:e==null?void 0:e.tokenB,amount:l,amountUSD:o})]})]})]})]})}const Kt=({token:e,amount:s,amountUSD:r,loading:c})=>{const{getExplorerUrl:x}=wt();return e?t.jsxs(W,{w:"100%",p:{base:"16px 8px",lg:"16px 20px"},borderRadius:"8px",bg:"background",border:"1px solid",borderColor:"border",gap:"16px",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsxs($,{gap:"12px",children:[t.jsx(Ee,{imageUrl:e==null?void 0:e.logo_url,w:"28px",h:"28px",coinType:e?e==null?void 0:e.coin_type:""}),t.jsxs(W,{align:"flex-start",gap:"4px",children:[t.jsx(L,{color:"text_caption",fontSize:"16px",children:Z(e==null?void 0:e.symbol,10)}),t.jsx(L,{fontSize:"12px",children:e==null?void 0:e.name})]})]}),t.jsx(cs,{address:(e==null?void 0:e.coin_type)||"",fontSize:"14px",color:"text_caption",onClickLink:()=>window.open(x(e==null?void 0:e.coin_type,"coin"))})]}),t.jsx(oe,{label:"Amount",labelStyle:{fontSize:"14px"},value:vt(jt(s||"0",e.decimals)),valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}}),t.jsx(oe,{label:"Amount (USD)",labelStyle:{fontSize:"14px"},value:r&&r!=="--"?`$${Ae(r)}`:"--",valueStyle:{fontSize:"14px"},isLoading:c,wrapStyle:{h:"14px"},skeletonStyle:{valueW:"120px"}})]}):null};function hi(){return t.jsxs(W,{w:"100%",gap:"16px",minW:{base:"100%",lg:"1024px"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:"16px",children:[t.jsx(ui,{}),t.jsx(yi,{})]}),t.jsx(gi,{}),t.jsx(li,{})]})}function bi(){const{posBaseListLoading:e,posBaseListGroupByPool:s}=ls(),{manualRefresh:r}=I(),{currentAccount:c,onWalletModal:x}=dt(),{getPositionBaseList:l,getPosRelatedData:i}=_r(),[o,a]=j.useState(""),{poolAddress:d}=le(),p=async y=>{const _=await l(y);Array.isArray(_)&&i(_),typeof _=="string"&&a(_)};return j.useEffect(()=>{c!=null&&c.address&&p(c==null?void 0:c.address)},[c==null?void 0:c.address]),j.useEffect(()=>{r&&(c!=null&&c.address)&&p(c==null?void 0:c.address)},[r]),Rr({onRpcChange:()=>{c!=null&&c.address&&p(c==null?void 0:c.address)}}),{data:j.useMemo(()=>{if(d){const y=s[d.toLowerCase()||""];return y?y==null?void 0:y.list:[]}return[]},[d,JSON.stringify(s)]),rpcNodeErrorStr:o,posBaseListLoading:e,currentAccount:c,onWalletModal:x}}function fi(){const e=Ke(),{apiPoolInfo:s}=I(),{currentAccount:r,posBaseListLoading:c,data:x,rpcNodeErrorStr:l,onWalletModal:i}=bi();return t.jsx(W,{minW:{base:"100%",lg:"1024px"},children:r!=null&&r.address?c?[{},{}].map((o,a)=>t.jsx(ur,{},a)):x&&(x==null?void 0:x.length)>0?x==null?void 0:x.map((o,a)=>t.jsx(xr,{positionInfo:o},o==null?void 0:o.posId)):l?t.jsx(Oe,{type:"nodata",text:l}):t.jsx(Oe,{type:"nodata",text:"You don't have positions for this pool",children:t.jsx(ge,{borderRadius:"8px",mt:"8px",fontWeight:"500",w:"120px",h:"28px",fontSize:"12px",onClick:()=>e(`/liquidity?tab=deposit&poolAddress=${s==null?void 0:s.poolAddress}`),children:"Create Position"})}):t.jsx(Oe,{type:"nowallet",onboard:()=>i(!0)})})}const ji=(e,s)=>({fromAmount:"",setFromAmount:r=>{e(()=>({fromAmount:r}))},fromAmountValue:"",setFromAmountValue:r=>{e(()=>({fromAmountValue:r}))},toAmount:"",setToAmount:r=>{e(()=>({toAmount:r}))},toAmountValue:"",setToAmountValue:r=>{e(()=>({toAmountValue:r}))},liquidityAmount:"",setLiquidityAmount:r=>{e(()=>({liquidityAmount:r}))},tokenMaxA:"",setTokenMaxA:r=>{e(()=>({tokenMaxA:r}))},tokenMaxB:"",setTokenMaxB:r=>{e(()=>({tokenMaxB:r}))},byAmountIn:!0,setByAmountIn:r=>{e(()=>({byAmountIn:r}))},isTokenA:!0,setIsTokenA:r=>{e(()=>({isTokenA:r}))},percentMap:{percentA:"0",percentB:"0"},setPercentMap:r=>{e(()=>({percentMap:r}))},isFullRange:!1,setIsFullRange:r=>{e(()=>({isFullRange:r}))},fromToken:void 0,setFromToken:r=>{e(()=>({fromToken:r}))},fromTokenLock:!1,setFromTokenLock:r=>{e(()=>({fromTokenLock:r}))},toToken:void 0,setToToken:r=>{e(()=>({toToken:r}))},toTokenLock:!1,setToTokenLock:r=>{e(()=>({toTokenLock:r}))},totalAmount:void 0,setTotalAmount:r=>{e(()=>({totalAmount:r}))},autoStakePosition:!1,setAutoStakePosition:r=>{e(()=>({autoStakePosition:r}))},isFarmRewardsRange:!1,setIsFarmRewardsRange:r=>{e(()=>({isFarmRewardsRange:r}))},resetAddLiquidity:()=>{e(()=>({isFarmRewardsRange:!1,autoStakePosition:!1,totalAmount:void 0,fromTokenLock:!1,fromToken:void 0,toTokenLock:!1,toToken:void 0,isFullRange:!1,percentMap:{percentA:"0",percentB:"0"},fromAmount:"",toAmount:"",fromAmountValue:"",toAmountValue:"",liquidityAmount:"",byAmountIn:!0,isTokenA:!0}))}}),ke=Zt(ji);function Ai(e){var m,A;const{onClose:s,onSubmit:r,data:{feeTier:c}}=e,{fromToken:x,toToken:l,fromAmount:i,toAmount:o,totalAmount:a,percentMap:d,fromTokenLock:p,toTokenLock:g}=ke(),{lowerTickData:y,upperTickData:_}=Ce(),{currentPriceData:R,apiPoolInfo:v}=I(),{setIsChecked:C}=At(),[u,b]=j.useState(!0),n=j.useMemo(()=>{var S;return((S=v==null?void 0:v.tokenA)==null?void 0:S.coin_type)===(x==null?void 0:x.coin_type)?!u:!!u},[v,x,l,u]),f=j.useMemo(()=>u?`${Z(l==null?void 0:l.symbol,10)} per ${Z(x==null?void 0:x.symbol,10)}`:`${Z(x==null?void 0:x.symbol,10)} per ${Z(l==null?void 0:l.symbol)}`,[u,x==null?void 0:x.symbol,l==null?void 0:l.symbol]),w=hs(()=>{r(),s()},1e3,{leading:!0,trailing:!1}),{notifiStatus:h}=At();return t.jsxs(Pt,{isOpen:!0,onClose:()=>{s(),C(!1)},isCentered:!0,children:[t.jsx(It,{}),t.jsxs(es,{children:[t.jsx(ts,{children:t.jsx(Ve,{fontWeight:"500",fontSize:"16px",children:"Add Liquidity"})}),t.jsx(Zs,{}),t.jsx(ss,{textAlign:"center",p:"0px",children:t.jsxs(W,{w:"100%",gap:"20px",p:"8px 16px",pb:"0px",children:[t.jsxs($,{w:"100%",justifyContent:"space-between",h:"40px",children:[t.jsxs($,{children:[t.jsx(rs,{coinACoinType:x==null?void 0:x.coin_type,coinBCoinType:l==null?void 0:l.coin_type,coinAIconUrl:x==null?void 0:x.logo_url,coinBIconUrl:l==null?void 0:l.logo_url,imageStyle:{w:"40px",h:"40px"},imgBoxStyle:{w:"40px",h:"40px"}}),t.jsx(L,{fontSize:"16px",color:"text_caption",textAlign:"left",children:`${Z(x==null?void 0:x.symbol,10)} - ${Z(l==null?void 0:l.symbol,10)}`})]}),t.jsx(Ct,{w:"unset",p:"8px 12px",borderRadius:"12px",ml:"4px",children:t.jsxs($,{gap:"12px",children:[t.jsx(L,{whiteSpace:"nowrap",children:"Fee Tier"}),t.jsx(L,{color:"primary",children:c==null?void 0:c.feeDisplay})]})})]}),t.jsx(Lr,{coinA:{amount:i,...x},coinB:{amount:o,...l}}),t.jsxs(te,{w:"100%",children:[t.jsxs($,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Selected Range"}),t.jsx(Tr,{isActive:!p&&!g,isRow:!0,imgStyle:{imgW:"29px",imgH:"16px"},w:"105px",h:"32px"})]}),t.jsxs($,{justify:"center",bg:"bg_secondary",borderRadius:"8px",h:"48px",w:"100%",gap:"4px",mt:"12px",children:[t.jsx(L,{children:"Current Price"}),t.jsx(L,{as:"span",color:"text_caption",children:tt(n?R.reverseCurrentPrice:R==null?void 0:R.currentPrice,6)}),t.jsx(L,{children:f}),t.jsx(ge,{variant:"unstyled",onClick:()=>b(!u),children:t.jsx(be,{xlinkHref:"#icon-icon_swap1"})})]}),t.jsxs($,{w:"100%",h:"100px",bg:"bg_secondary",borderRadius:"12px",mt:"8px",children:[t.jsx(Qt,{title:"Min Price",price:tt(n?_==null?void 0:_.reversePrice:y==null?void 0:y.price,6),perText:f}),t.jsx(is,{orientation:"vertical",h:"40px"}),t.jsx(Qt,{title:"Max Price",price:tt(n?y==null?void 0:y.reversePrice:_==null?void 0:_.price,6),perText:f})]})]}),t.jsx(oe,{isLoading:!1,label:"Deposit Ratio",value:`${d[(x==null?void 0:x.coin_type)===((m=v==null?void 0:v.tokenA)==null?void 0:m.coin_type)?"percentA":"percentB"]}% ${Z(x==null?void 0:x.symbol,10)} / ${d[(l==null?void 0:l.coin_type)===((A=v==null?void 0:v.tokenA)==null?void 0:A.coin_type)?"percentA":"percentB"]}% ${Z(l==null?void 0:l.symbol,10)} `,labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",maxW:"unset"},skeletonStyle:{valueW:"128px"}}),t.jsx(oe,{isLoading:!1,label:"Total Amount",value:a&&+a?kt(a):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px"},skeletonStyle:{valueW:"128px"}}),!p&&!g&&!((y==null?void 0:y.price)==="0"&&(_==null?void 0:_.price)==="∞")&&h=="authenticated"&&t.jsx(Fr,{subscriptionSource:"AddLiquidity",title:"Range alerts for this position",description:"Subscribe to receive alerts on email, SMS, or Telegram when the price for this pool moves out of your selected range.",wrapStyle:{bg:"bg_secondary",borderRadius:"12px"}}),t.jsx(ge,{w:"calc(100% + 32px)",bottom:"0px",mt:"4px",h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",onClick:w,children:"Add Liquidity"})]})})]})]})}const Qt=({title:e,price:s,perText:r})=>t.jsxs(W,{flex:"1",children:[t.jsx(L,{children:e}),t.jsx(L,{color:"text_caption",children:s}),t.jsx(L,{children:r})]});function Si(e,s){const{preAdd:r,getClmmCreateAddData:c,getFarmsCreateAddData:x}=Hr();j.useState(!1);const{currentPriceData:l,apiPoolInfo:i,contractPoolInfo:o}=I(),{lowerTickData:a,upperTickData:d}=Ce(),{signAndExecuteTransaction:p,getTransactionStatus:g,transactionSuccess:y}=Er(),{mevProtect:_,maxCapForGas:R,transactionMode:v,customGasPrice:C}=Br(),[u,b]=j.useState(!1),[n,f]=j.useState(!1),[w,h]=j.useState(""),{transactionConfirmation:m}=$r(),{fromAmount:A,setFromAmount:S,fromAmountValue:k,setFromAmountValue:q,toAmount:N,setToAmount:M,toAmountValue:Q,setToAmountValue:Y,byAmountIn:O,setByAmountIn:ne,isTokenA:J,setIsTokenA:U,percentMap:z,setPercentMap:F,isFullRange:K,setIsFullRange:P,fromToken:B,setFromToken:re,toToken:T,setToToken:ue,totalAmount:D,setTotalAmount:E,fromTokenLock:X,setFromTokenLock:Le,toTokenLock:me,setToTokenLock:Qe,setTokenMaxA:Rs,setTokenMaxB:Cs,tokenMaxA:ks,tokenMaxB:Ls,autoStakePosition:Ts,liquidityAmount:Fs,setLiquidityAmount:Bs}=ke(),{getTokenAmountValue:Xe}=ns();$t(()=>{var V,ae;i&&U(((V=i==null?void 0:i.displayTokenA)==null?void 0:V.coin_type)===((ae=i==null?void 0:i.tokenA)==null?void 0:ae.coin_type))},[i]);const{isWhiteQuoteToken:Ms}=us(),{notifiSubscription:zs}=Wr(),{isChecked:Ft}=At();Ge(()=>{if(K){F({percentA:"50",percentB:"50"});return}if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&typeof(o==null?void 0:o.current_tick_index)=="number"&&(a==null?void 0:a.tick)!==void 0&&(d==null?void 0:d.tick)!==void 0&&l.currentSqrtPrice){if(ce(a.tick).lte(o.current_tick_index)&&ce(d.tick).gt(o.current_tick_index)){const V=Ms(i.tokenA.coin_type)?i.tokenA:i.tokenB,ae=V.coin_type===i.tokenA.coin_type,xe=r({amount:Je("1",V.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0}),Se=Mr(xe.coinAmountA,xe.coinAmountB,l==null?void 0:l.currentPrice,K);F(Se);return}if(ce(a.tick).gt(o.current_tick_index)){F({percentA:"100",percentB:"0"});return}if(ce(d.tick).lte(o.current_tick_index)){F({percentA:"0",percentB:"100"});return}}},[JSON.stringify(i),l,a==null?void 0:a.tick,d==null?void 0:d.tick,K],{wait:300});const Es=({amount:V,isTokenA:ae,isFullRange:xe})=>{var Se,Te,Fe,Be;if(i&&(i!=null&&i.tokenA)&&(i!=null&&i.tokenB)&&Object.keys(l).length>0&&(a==null?void 0:a.tick)!==void 0&&(d==null?void 0:d.tick)!==void 0&&B&&T){let G;if(typeof(o==null?void 0:o.current_tick_index)=="number"&&ce(a==null?void 0:a.tick).lte(o==null?void 0:o.current_tick_index)&&ce(d==null?void 0:d.tick).gt(o==null?void 0:o.current_tick_index))G=r({amount:Je(V&&+V?V+"":"1",O?B==null?void 0:B.decimals:T==null?void 0:T.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:ae,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0});else if(X&&!me){const se=(T==null?void 0:T.coin_type)===((Se=i==null?void 0:i.tokenA)==null?void 0:Se.coin_type);G=r({amount:Je(V?V+"":"1",T==null?void 0:T.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:se,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else if(me&&!X){const se=(B==null?void 0:B.coin_type)===((Te=i==null?void 0:i.tokenA)==null?void 0:Te.coin_type);G=r({amount:Je(V?V+"":"1",B==null?void 0:B.decimals).toString(),tokenA:i==null?void 0:i.tokenA,tokenB:i==null?void 0:i.tokenB,isTokenA:se,lowerTick:a==null?void 0:a.tick,upperTick:d==null?void 0:d.tick,curSqrtPrice:l.currentSqrtPrice,isReverse:i==null?void 0:i.isReverse,roundUp:!0})}else X&&me&&(G=ae?{coinAmountA:V?V+"":"1",coinAmountB:"",tokenMaxA:V?V+"":"1",tokenMaxB:""}:{coinAmountA:"",coinAmountB:V?V+"":"1",tokenMaxA:"",tokenMaxB:V?V+"":"1"});if(Rs(G==null?void 0:G.tokenMaxA),Cs(G==null?void 0:G.tokenMaxB),V)if(ce(V).gt("0"))if(O){const se=(T==null?void 0:T.coin_type)===((Fe=i==null?void 0:i.tokenA)==null?void 0:Fe.coin_type)?G==null?void 0:G.coinAmountA:G==null?void 0:G.coinAmountB,ye=Xe(B==null?void 0:B.coin_type,V+""),he=Xe(T==null?void 0:T.coin_type,se),_e=ce(ye).plus(he).toString();console.log(se,ye,he,_e,"_totalAmountValue"),M(se||""),q(ye),Y(he),E(_e)}else{const se=(B==null?void 0:B.coin_type)===((Be=i==null?void 0:i.tokenA)==null?void 0:Be.coin_type)?G==null?void 0:G.coinAmountA:G==null?void 0:G.coinAmountB,ye=Xe(B==null?void 0:B.coin_type,se),he=Xe(T==null?void 0:T.coin_type,V+""),_e=ce(ye).plus(he).toString();console.log(se,ye,he,_e,"_totalAmountValue"),q(ye),Y(he),S(se||""),E(_e)}else O?(M(""),q(""),Y(""),E("")):(S(""),q(""),Y(""),E(""));else S(""),M(""),q(""),Y(""),E("");G&&Bs((G==null?void 0:G.liquidityAmount)||"")}};Ge(()=>{Es({amount:O?A:N,isTokenA:J,isFullRange:K})},[JSON.stringify(i),l,a==null?void 0:a.tick,d==null?void 0:d.tick,A,N,O,J,X,me,K],{wait:300});const $s=(V,ae,xe)=>{ne(ae),ae?S(V):M(V),U(xe!==void 0?xe:!1)},{balanceInfo:qs}=at(B),{balanceInfo:Ws}=at(T);$t(()=>{var V,ae;U(O?(B==null?void 0:B.coin_type)===((V=i==null?void 0:i.tokenA)==null?void 0:V.coin_type):(T==null?void 0:T.coin_type)===((ae=i==null?void 0:i.tokenA)==null?void 0:ae.coin_type))},[i,O,B,T]),j.useEffect(()=>{(a==null?void 0:a.tick)===rt.getMinIndex(Number((a==null?void 0:a.tickSpacing)||0))&&(d==null?void 0:d.tick)===rt.getMaxIndex(Number((d==null?void 0:d.tickSpacing)||0))?P(!0):P(!1)},[a==null?void 0:a.tick,d==null?void 0:d.tick]),j.useEffect(()=>{(o==null?void 0:o.current_tick_index)!==void 0&&ie(a)&&ie(d)&&(ce(a==null?void 0:a.tick).gte(ce(d.tick))?(Le(!0),Qe(!0)):ce(a==null?void 0:a.tick).gt(o==null?void 0:o.current_tick_index)?(Le(!s),Qe(!!s)):ce(d.tick).lte(o==null?void 0:o.current_tick_index)?(Le(!!s),Qe(!s)):(Le(!1),Qe(!1)))},[a==null?void 0:a.tick,d==null?void 0:d.tick,o,s]);const{currentAccount:Hs,onWalletModal:Us}=dt(),Ns=hs(()=>{Hs?b(!0):Us(!0)},300,{leading:!0,trailing:!1}),Os=()=>{S(""),M(""),q(""),Y(""),E("")},{fetchAccountBalance:Vs}=os();return{percentMap:z,handleAmountChange:$s,fromToken:B,setFromToken:re,toToken:T,setToToken:ue,byAmountIn:O,setByAmountIn:ne,fromAmount:A,fromAmountValue:k,setFromAmount:S,toAmount:N,toAmountValue:Q,setToAmount:M,liquidityAmount:Fs,fromBalanceInfo:qs,toBalanceInfo:Ws,totalAmount:D,fromTokenLock:X,toTokenLock:me,handleAdd:Ns,confirmModalOpen:u,setConfirmModalOpen:b,nftOpen:n,setNftOpen:f,relatedPosId:w,handleSubmit:async()=>{var he,_e,Bt;const V=O?A:N,ae=O?B==null?void 0:B.decimals:T==null?void 0:T.decimals,xe=ce(V).mul(Js.pow(10,ae)).toString(),Se=O&&(B==null?void 0:B.coin_type)===((he=i==null?void 0:i.tokenA)==null?void 0:he.coin_type)?!0:(T==null?void 0:T.coin_type)===((_e=i==null?void 0:i.tokenA)==null?void 0:_e.coin_type)&&!O;let Te,Fe;const Be=a.tick,G=d.tick,se=o==null?void 0:o.current_tick_index;Be!==void 0&&G!==void 0&&se!==void 0&&(se>=Be&&se<=G?(Te=Se?xe:ks,Fe=Se?Ls:xe):se>G?(Te=0,Fe=xe):se<Be&&(Te=xe,Fe=0));let ye=[];if(o!=null&&o.index){const{rewarder_infos:de}=o;ye=(de==null?void 0:de.length)>0&&(de==null?void 0:de.map(Ue=>Ue.coinAddress))||[]}try{const de={poolAddress:o==null?void 0:o.poolAddress,coinTypeA:o==null?void 0:o.coinTypeA,coinTypeB:o==null?void 0:o.coinTypeB,amountA:Te,amountB:Fe,fixAmountA:Se,lowerTick:Be,upperTick:G,currentSqrtPrice:o==null?void 0:o.current_sqrt_price,rewarderCoinTypes:ye,farmsPoolId:i==null?void 0:i.farmsPoolAddress},Ue={getShowInfo:(ee,Me)=>{const Ye=!X&&!me?`Add ${A} ${B==null?void 0:B.symbol} and ${N} ${T==null?void 0:T.symbol}`:me?X?"Add Liquidity":`Add ${A} ${B==null?void 0:B.symbol}`:`Add ${N} ${T==null?void 0:T.symbol}`,Ze={modalDescriptionText:Ye,toastTitleText:Ye};if(ee==="success"){let gt=A,mt=N;Me&&(gt=qt(Me,B)||A,mt=qt(Me,T)||N);const Mt=!X&&!me?`Add ${gt} ${B==null?void 0:B.symbol} and ${mt} ${T==null?void 0:T.symbol}`:!X&&me?`Add ${gt} ${B==null?void 0:B.symbol}`:!me&&X?`Add ${mt} ${T==null?void 0:T.symbol}`:"Add Liquidity";Ze.toastDescriptionContent=Mt,Ze.modalDescriptionText=Mt,Ze.toastTitleText="Supplied Successful"}return Ze}};m(Ue);let xt,pt;if(Ts){const ee=await x(de);xt=ee==null?void 0:ee.tx,pt=ee==null?void 0:ee.msafeParams}else{const ee=await c(de);xt=ee==null?void 0:ee.tx,pt=ee==null?void 0:ee.msafeParams}let fe=await p(xt,Ue,{useDevInspect:!0,useMev:_,showSuccessModal:!1,useFastMode:v==="Fast Mode",maxCapForGas:R,customGasPrice:C,msafeParams:pt});if(fe){console.log("🚀🚀🚀 ~ file: useAddLiquidity.ts:403 ~ handleSubmit ~ res:",fe),console.log("🚀🚀🚀 ~ file: useAddLiquidity.ts:411 ~ handleSubmit ~ isChecked:",Ft),((Bt=fe==null?void 0:fe.events)==null?void 0:Bt.length)===0&&(fe=await g(fe.digest));const{posId:ee,farmsPosId:Me}=Ps(fe);if(console.log("🚀 ~ file: useAddLiquidity.ts:436 ~ handleSubmit ~ posId:",{posId:ee,farmsPosId:Me}),ee?(f(!0),h(Me||ee)):y(Ue),Ft){const Ye={subscriptionSource:"AddLiquidity",events:fe.events};zs(Ye)}Vs(),Os(),e()}}catch(de){throw console.error(de,"handleSubmit ~ error"),new Error(de)}}}}function _i(){const{fromAmount:e,toAmount:s,fromToken:r,toToken:c,fromTokenLock:x,toTokenLock:l,liquidityAmount:i}=ke(),{currentAccount:o}=dt(),{balanceInfo:a}=at(r),{balanceInfo:d}=at(c),p=j.useMemo(()=>{const g={text:"Add Liquidity",disabled:!1};return o!=null&&o.address?!x&&!l&&(!e||!s||e&&!+e||s&&!+s)||x&&!l&&(!s||s&&!+s)||l&&!x&&(!e||e&&!+e)?(g.text="Enter an amount",g.disabled=!0,g):e&&+e&&H(e).gt((a==null?void 0:a.balanceFormat)||0)?(g.disabled=!0,g.text=`Insufficient ${Z(r==null?void 0:r.symbol,10)} Balance`,g):s&&+s&&H(s).gt((d==null?void 0:d.balanceFormat)||0)?(g.disabled=!0,g.text=`Insufficient ${Z(c==null?void 0:c.symbol,10)} Balance`,g):((!x&&!l&&(!e||!s)||H(i).lte("0"))&&(g.disabled=!0),g):(g.text="Connect Wallet",g.disabled=!1,g)},[o==null?void 0:o.address,e,s,a==null?void 0:a.balanceDisplay,d==null?void 0:d.balanceDisplay,r,c,x,l,i]);return{btnText:p.text,btnDisabled:p.disabled}}function vi(){return{getLeverage:(s,r)=>s&&r&&s!=="0"&&r!=="∞"?Jt(1/(1-Number(H(s).div(r).toNumber()**.25)),2)+"x":"1x"}}function wi({rangeTabList:e}){var N;const{apiPoolInfo:s}=I(),{fromToken:r,toToken:c,setFromToken:x,setToToken:l,byAmountIn:i,setByAmountIn:o,setIsFarmRewardsRange:a,setAutoStakePosition:d,fromTokenLock:p,toTokenLock:g,fromAmount:y,toAmount:_,setFromAmount:R,setToAmount:v}=ke(),{lowerTickData:C,upperTickData:u}=Ce(),[b,n]=j.useState(),{handleInitTickData:f}=ot(),{getLeverage:w}=vi();j.useEffect(()=>{var M;s&&n((M=s==null?void 0:s.displayTokenA)==null?void 0:M.coin_type)},[s==null?void 0:s.poolAddress]);const h=j.useMemo(()=>{var M;return b===((M=s==null?void 0:s.tokenA)==null?void 0:M.coin_type)},[b,(N=s==null?void 0:s.tokenA)==null?void 0:N.coin_type]),m=j.useMemo(()=>{var M,Q,Y,O;return!(s!=null&&s.tokenA)||!(s!=null&&s.tokenB)?"":h?`${Z((M=s==null?void 0:s.tokenB)==null?void 0:M.symbol,10)} per ${Z((Q=s==null?void 0:s.tokenA)==null?void 0:Q.symbol,10)}`:`${Z((Y=s==null?void 0:s.tokenA)==null?void 0:Y.symbol,10)} per ${Z((O=s==null?void 0:s.tokenB)==null?void 0:O.symbol,10)}`},[h,s==null?void 0:s.tokenA,s==null?void 0:s.tokenB]),A=j.useMemo(()=>{const M=C==null?void 0:C.price,Q=u==null?void 0:u.price;return w(M,Q)},[C==null?void 0:C.price,u==null?void 0:u.price]),S=M=>{a(M.target.checked),M.target.checked&&(s!=null&&s.farmsEffectiveTickLower)&&(s!=null&&s.farmsEffectiveTickUpper)&&f(s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper,s)};j.useEffect(()=>{H(C==null?void 0:C.tick).eq(H(s==null?void 0:s.farmsEffectiveTickLower))&&H(u==null?void 0:u.tick).eq(H(s==null?void 0:s.farmsEffectiveTickUpper))?a(!0):a(!1)},[C==null?void 0:C.tick,u==null?void 0:u.tick,s==null?void 0:s.farmsEffectiveTickLower,s==null?void 0:s.farmsEffectiveTickUpper]);const k=j.useMemo(()=>(C==null?void 0:C.price)==="0"&&(u==null?void 0:u.price)==="∞",[C==null?void 0:C.price,u==null?void 0:u.price]),q=M=>{var Q;M&&(M!=null&&M.coin_type)?n(M==null?void 0:M.coin_type):n((Q=e==null?void 0:e.find(Y=>Y.key!==b))==null?void 0:Q.key),x(c),l(r),o(!i),i?(v(y),R("")):(R(_),v(""))};return j.useEffect(()=>{s!=null&&s.haveFarming&&d(!(p||g))},[p,g,s==null?void 0:s.haveFarming]),j.useEffect(()=>{i&&p&&!g&&(R(""),v("")),!i&&!p&&g&&(R(""),v("")),i&&!p&&g&&v(""),!i&&p&&!g&&R(""),p&&g&&(R(""),v(""))},[p,g]),{direct:h,perText:m,handleChangeIsFarmRewardsRange:S,onReverseClick:q,leverage:A,currentRangeTab:b,isFullRange:k}}function Ri({onClose:e,posId:s,tokenA:r,tokenB:c,fee:x,isReverse:l}){const i=Ke(),[o,a]=j.useState(!0),{lowerTickData:d,upperTickData:p}=Ce();return j.useLayoutEffect(()=>{l&&a(!1)},[l]),t.jsxs(Pt,{isOpen:!0,autoFocus:!1,returnFocusOnClose:!1,onClose:e,isCentered:!0,children:[t.jsx(It,{}),t.jsxs(es,{w:"400px",children:[t.jsx(ts,{children:t.jsxs($,{justify:"space-between",w:"100%",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:"Open position successful"}),t.jsx(ge,{onClick:e,variant:"unstyled",p:"0",minW:"unset",minH:"unset",w:"20px",h:"20px",children:t.jsx(be,{xlinkHref:"#icon-icon_close"})})]})}),t.jsx(ss,{children:t.jsxs(W,{gap:"36px",children:[t.jsxs(W,{gap:"16px",bg:"center / contain no-repeat url('/images/active-sui.gif') ",w:"240px",h:"240px",justify:"center",border:"1px solid",borderColor:"border",borderRadius:"16px",children:[t.jsx(rs,{coinAIconUrl:r==null?void 0:r.logo_url,coinBIconUrl:c==null?void 0:c.logo_url,coinACoinType:r==null?void 0:r.coin_type,coinBCoinType:c==null?void 0:c.coin_type,w:"48px",h:"48px"}),t.jsxs(L,{fontSize:"20px",fontWeight:"500",color:"text_caption",lineHeight:"28px",children:[Z(r==null?void 0:r.symbol,10)," - ",Z(c==null?void 0:c.symbol,10)]}),t.jsxs($,{bg:"bg_secondary",p:"8px 12px",border:"1px solid",borderColor:"border",borderRadius:"12px",children:[t.jsx(L,{fontSize:"14px",children:"Fee tier"}),t.jsx(L,{fontSize:"14px",color:"text_highlight",children:x})]})]}),t.jsxs(W,{w:"100%",justify:"center",borderRadius:"8px",border:"1px solid",borderColor:"border",bg:"input_bg",p:"16px 8px",children:[t.jsxs(L,{color:"text_caption",whiteSpace:"nowrap",children:[o?Ae(d==null?void 0:d.price,6):Ae(p==null?void 0:p.reversePrice,6)," - ",o?Ae(p==null?void 0:p.price,6):Ae(d==null?void 0:d.reversePrice,6)]}),t.jsxs($,{children:[t.jsxs($,{gap:"0",children:[t.jsx(L,{color:"primary_gray",children:Z(o?l?r==null?void 0:r.symbol:c==null?void 0:c.symbol:l?c==null?void 0:c.symbol:r==null?void 0:r.symbol,10)}),t.jsx(L,{color:"primary_gray",children:" per "}),t.jsx(L,{color:"primary_gray",children:Z(o?l?c==null?void 0:c.symbol:r==null?void 0:r.symbol:l?r==null?void 0:r.symbol:c==null?void 0:c.symbol,10)})]}),t.jsx(be,{xlinkHref:"#icon-icon_swap1",w:"16px",h:"16px",onClick:g=>{Lt(g),a(!o)}})]})]})]})}),t.jsx(Is,{p:"20px 0 0",children:t.jsx(ge,{flex:"1",onClick:()=>i(`/position-detail/${s}`),h:"52px",borderRadius:"12px",fontSize:"16px",fontWeight:"500",children:"View Detail"})})]})]})}function As({perText:e,direct:s,minPriceData:r,maxPriceData:c,isFullRange:x=!1}){const{tickDataLoading:l}=Ce(),{handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a}=ot();return t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",gap:{base:"8px",lg:"16px"},children:[t.jsx(Ut,{title:"Min Price",perText:e,data:r,direct:s,loading:l,handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a,isFullRange:x}),t.jsx(Ut,{title:"Max Price",perText:e,data:c,direct:s,loading:l,handleAddPrice:i,handleSubPrice:o,setTickDataBasedOnPrice:a,isFullRange:x})]})}const Ss=({minPrice:e,maxPrice:s,perText:r,checked:c,onChange:x,loading:l})=>t.jsxs($,{w:"100%",justify:{base:"space-between",lg:"center"},align:{base:"flex-start",lg:"center"},p:{base:"0 12px",lg:"0"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},children:[t.jsxs($,{children:[t.jsx(as,{tooltip:t.jsxs(te,{as:"div",lineHeight:"20px",fontSize:"12px",children:["Farm reward range: Only liquidity within this range is eligible to receive farming rewards of the pool.  ",t.jsx(te,{as:"a",color:"primary",onClick:i=>{Lt(i),window.open("https://medium.com/@CetusProtocol/cetus-new-farms-everything-you-should-know-about-it-c6b60e6a6ae5")},children:"Learn More"})]})}),t.jsx(L,{children:"Farm rewards range"})]}),t.jsxs($,{children:[l?t.jsx(De,{w:"120px",h:"14px"}):t.jsxs(L,{color:"primary_yellow",children:[e," - ",s]}),t.jsx(L,{children:r})]})]}),t.jsx(St,{isChecked:c,onChange:x})]}),_s=({disabled:e,checked:s,onChange:r})=>t.jsxs($,{p:{base:"20px 8px",lg:"24px 24px 24px 16px"},border:{base:"none",lg:"1px solid"},borderColor:{base:"transparent",lg:"border"},borderRadius:{base:"0 0 20px 20px",lg:"20px"},bg:"bg_six",gap:"12px",children:[t.jsx(as,{flex:"0 0 24px",h:"24px"}),t.jsx(L,{lineHeight:"20px",color:"text_caption",children:"Automatically stake your position into the farm to enjoy higher yield."}),e?t.jsx(st,{tooltip:t.jsxs(W,{gap:"4px",align:"flex-start",children:[t.jsx(L,{fontSize:"12px",children:"Farming rewards only available"}),t.jsx(L,{fontSize:"12px",children:"for active positions."})]}),placement:"top",maxW:"198px",children:t.jsx(St,{isChecked:s,disabled:e,onChange:r})}):t.jsx(St,{isChecked:s,disabled:e,onChange:r})]}),Ci=[{label:"24H",key:"24_h"},{label:"7D",key:"7_d"},{label:"30D",key:"30_d"}];function vs({direct:e,rangeMap:s,wrapStyle:r={}}){const[c,x]=j.useState({type:"30D",key:"30_d"}),{minPriceForDate:l,maxPriceForDate:i,setMinPriceForDate:o,setMaxPriceForDate:a}=I();j.useEffect(()=>{let p="";if(ie(s)){const y=s[`before_${c==null?void 0:c.key}_contract_price_lowest`],_=e?y:H(1).div(y).toString();p=Ae(_,6)}else p="-";o(p);let g="";if(ie(s)){const y=s[`before_${c==null?void 0:c.key}_contract_price_highest`],_=e?y:H(1).div(y).toString();g=Ae(_,6)}else g="-";a(g)},[e,c.key,s]);const{isApp:d}=Re();return t.jsxs($,{w:"100%",justify:"space-between",...r,children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},align:{base:"flex-start",lg:"center"},children:[t.jsxs($,{children:[t.jsx(He,{borderRadius:"4px",border:"1px solid",borderColor:"border",w:"20px",h:"20px",color:"text_caption",children:t.jsx(is,{w:"14px",border:"1px dashed"})}),t.jsxs(L,{fontSize:"12px",whiteSpace:"nowrap",children:[c==null?void 0:c.type," Price Range"]})]}),t.jsxs(L,{color:"text_caption",fontSize:"12px",lineHeight:"12px",h:"12px",children:[e?l:i," - ",e?i:l]})]}),t.jsx(ze,{type:"outlineTab",tabList:Ci,currentTab:c,handleChangeTab:p=>{x({type:p.label,key:p.key})},isActive:(p,g)=>p.key===g.key,wrapStyle:{h:d?"28px":"20px",p:"1px",border:"1px solid",borderColor:"border",borderRadius:{base:"8px",lg:"4px"},gap:"0px",w:"auto"},itemStyle:{h:d?"24px":"16px",p:"2px 8px",fontSize:"12px",borderRadius:"4px",flex:1}})]})}function ki(){const{fetchByApi:e}=_t(),[s,r]=j.useState(""),c=async a=>{var d,p,g,y;try{const R=await e(dr,"GET",{pool:a}),v=((p=(d=R==null?void 0:R.list)==null?void 0:d[0])==null?void 0:p.recommend_ranges)||{},C=((y=(g=R==null?void 0:R.list)==null?void 0:g[0])==null?void 0:y.type)||"";console.log("🚀🚀🚀 ~ getRecommendRanges ~ type:",C);const u={};if(v)for(const b in v){const n=v[b];(n!=null&&n.lower||n!=null&&n.upper)&&(u[b]={lower:n.lower,upper:n.upper})}return{ranges:u,type:C}}catch(_){return console.error("Error in getRecommendRanges:",_),{ranges:{},type:""}}},x=(a,d)=>({default:{lower:a,upper:d,sort:3}}),l=a=>({"full range":{lower:rt.getMinIndex(a),upper:rt.getMaxIndex(a),sort:2}}),i=(a,d,p)=>{const g=H(p).mul(d==="unstable"?2:3).toNumber(),y=er(Number(a),Number(p));return{custom:{lower:H(y).sub(g).toNumber(),upper:H(y).add(g).toNumber(),sort:1}}};return{getRecommendRanges:c,getRecommendRangesList:async a=>{try{const d=a.farmsEffectTickLower&&a.farmsEffectTickUpper?x(a.farmsEffectTickLower,a.farmsEffectTickUpper):null,p=a.farmsEffectTickLower&&a.farmsEffectTickUpper?{ranges:{},type:""}:await c(a.poolAddress);r(p.type);const g=l(a.tickSpacing),y=i(a.currentTick,p.type,a.tickSpacing),_={...d,...p.ranges,...g,...y},R=Object.entries(_).map(([v,C])=>({key:v,...C})).sort((v,C)=>C.sort-v.sort);return ie(p.ranges)||ie(d)?{rangeList:R,error:!1}:{rangeList:R,error:!0}}catch(d){return console.error("Error in getRecommendRangesList:",d),{rangeList:[],error:!0}}},poolType:s}}const bt=(e,s=!1)=>{switch(e){case"passive":return{name:"Conservative",image:s?"img_conservative_sel@2x.png":"img_conservative_nor@2x.png"};case"active":return{name:"Active",image:s?"img_active_sel@2x.png":"img_active_nor@2x.png"};case"full range":return{name:"Full Range",image:s?"img_fullrange_sel@2x.png":"img_fullrange_nor@2x.png"};case"custom":return{name:"Custom",image:s?"img_custom_sel@2x.png":"img_custom_nor@2x.png"};case"suggested":return{name:"Stable",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"};default:return{name:"Default",image:s?"img_stable_sel@2x.png":"img_stable_nor@2x.png"}}},Li=e=>{switch(e){case"passive":return"Lower yields and lower impermanent loss. Less frequent rebalancing.";case"active":return"Higher yields but higher impermanent loss potentially. Requires frequent rebalancing.";case"full range":return"Full range positions are active all the time with no need to be rebalanced but may earn less fees than concentrated liquidity.";case"custom":return"Recommended only if you understand how concentrated liquidity works.";case"suggested":return"Stable range according to the price history of last 7 days.";default:return"The default range of this pool is set following the real-time valid range of its farm."}},Ti={1:"100%",2:"50%",3:"33.33%",4:"50%"};function ws(e){const{getRecommendRangesList:s}=ki(),[r,c]=j.useState(),{poolAddress:x,currentTick:l,tickSpacing:i,farmsEffectTickLower:o,farmsEffectTickUpper:a}=e;Re();const{handleInitTickData:d}=ot(),{apiPoolInfo:p,currentRange:g,setCurrentRange:y}=I(),{lowerTickData:_,upperTickData:R,setLowerTickData:v,setUpperTickData:C,setTickDataLoading:u,tickDataLoading:b}=Ce(),n=async()=>{var f,w,h;try{g||u(!0);const{rangeList:m,error:A}=await s(e);if(c(m),A){if(y("custom"),!g&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)){const S=m.find(k=>k.key==="custom");S&&d(S==null?void 0:S.lower,S==null?void 0:S.upper,p)}}else y((f=m[0])==null?void 0:f.key),!g&&(p!=null&&p.tokenA)&&(p!=null&&p.tokenB)&&d((w=m[0])==null?void 0:w.lower,(h=m[0])==null?void 0:h.upper,p)}catch(m){console.error(m)}finally{u(!1)}};return Ge(()=>{x&&l!==void 0&&i!==void 0&&n()},[x,i],{wait:500}),j.useEffect(()=>{if(r&&r.length>0&&ie(_)&&ie(R)){const f=r==null?void 0:r.find(w=>H(w.lower).eq(H(_==null?void 0:_.tick))&&H(w.upper).eq(H(R==null?void 0:R.tick)));f?f.key!==g&&y(f.key):y("custom")}},[_==null?void 0:_.tick,R==null?void 0:R.tick,r]),t.jsx(t.Fragment,{children:t.jsx(tr,{w:{base:"100%",lg:"124px"},flexDirection:{base:"row",lg:"column"},flexWrap:"wrap",border:"1px solid",borderColor:r&&r.length>0?"border":"transparent",borderRadius:"16px",p:"4px",rowGap:{base:"20px",lg:"0"},bg:r&&r.length>0?"background":"transparent",marginTop:"0",minH:"62px",children:r==null?void 0:r.map((f,w)=>{var h,m;return t.jsx(sr,{label:Li(f.key),lineHeight:"1.5",placement:"top",gutter:-4,children:t.jsxs(W,{cursor:"pointer",textAlign:"center",width:{base:r!=null&&r.length?Ti[r.length+""]:"auto",lg:"auto"},p:"8px 20px",gap:"4px",onClick:()=>{f.key!==g&&(y(f.key),p!=null&&p.tokenA&&(p!=null&&p.tokenB)&&d(f.lower,f.upper,p))},bg:f.key==g?"card_bg":"transparent",borderRadius:"12px",sx:{_hover:{p:{color:"primary"}}},children:[t.jsx(Wt,{decoding:"async",display:f.key===g?"block":"none",src:`/images/${(h=bt(f.key,!0))==null?void 0:h.image}`,w:"72px",h:f.key===g?"22px":"0px",fallback:t.jsx(te,{bg:"background",w:"72px",h:f.key===g?"22px":"0px",borderRadius:"4px"})}),t.jsx(Wt,{decoding:"async",display:f.key===g?"none":"block",src:`/images/${(m=bt(f.key,!1))==null?void 0:m.image}`,w:"72px",h:f.key===g?"0px":"22px",fallback:t.jsx(te,{bg:"background",w:"72px",h:f.key===g?"0px":"22px",borderRadius:"4px"})}),t.jsx(L,{color:f.key==g?"primary":"primary_gray",fontSize:"12px",children:bt(f.key).name})]})},f.key)})})})}function Fi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:l,perText:i,rangeTabList:o,currentRangeTab:a,addressHistTokensMap:d,fromBalanceInfo:p,toBalanceInfo:g,fromAmountValue:y,toAmountValue:_,handleAmountChange:R,handleAdd:v,isFullRange:C}){var ue;const{currentPriceData:u,contractPoolInfo:b,apiPoolInfo:n,resetLiquidity:f,contractPoolInfoLoading:w,apiPoolInfoLoading:h,minPriceForDate:m,maxPriceForDate:A}=I(),{lowerTickData:S,upperTickData:k}=Ce(),{autoStakePosition:q,setAutoStakePosition:N,isFarmRewardsRange:M,fromAmount:Q,toAmount:Y,byAmountIn:O,percentMap:ne,fromToken:J,toToken:U,totalAmount:z,fromTokenLock:F,toTokenLock:K}=ke(),{poolAddress:P}=le(),B=D=>{N(D.target.checked)},{priceImpactBasedOnMarket:re}=gs(J,U,l?"1":We(u==null?void 0:u.currentPrice),l?We(u==null?void 0:u.currentPrice):"1"),T=j.useMemo(()=>{if(re&&H(re).abs().gte(30))return H(re).gte(30)?`+${H(re).toFixed(0)}%`:`${H(re).toFixed(0)}%`},[re]);return j.useMemo(()=>!!(n!=null&&n.haveFarming)&&!!(n!=null&&n.displayFarmsEffectMaxPrice)&&!!(n!=null&&n.displayFarmsEffectMinPrice),[n==null?void 0:n.haveFarming,n==null?void 0:n.displayFarmsEffectMaxPrice,n==null?void 0:n.displayFarmsEffectMinPrice]),t.jsxs(te,{w:"100%",children:[t.jsx(Ve,{fontSize:"16px",fontWeight:"500",mb:"16px",children:"1. Select Range"}),t.jsx(ws,{poolAddress:P,currentTick:b==null?void 0:b.current_tick_index,tickSpacing:b==null?void 0:b.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper}),h?t.jsx(De,{mt:"20px",h:"40px",borderRadius:"8px",w:"100%"}):t.jsx(ze,{type:"outlineTab",tabList:o,currentTab:a,handleChangeTab:D=>c(D),wrapStyle:{mt:"20px",h:"40px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"12px"},itemStyle:{flex:1,h:"32px",borderRadius:"4px",gap:"4px"}}),t.jsx(ps,{price:We(l?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6),perText:i,loading:w,wrapStyle:{mt:"28px",gap:"12px"}}),t.jsx(W,{flex:"1",h:"180px",pos:"relative",mt:"20px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:l,minPriceData:l?S:k,maxPriceData:l?k:S,dashedMarkerLine:[m,A]})}),T&&t.jsx(Ct,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mt:"90px",mb:"-70px",children:t.jsxs($,{children:[t.jsx(be,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(L,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${T}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),t.jsx(vs,{direct:l,rangeMap:d,wrapStyle:{mt:"90px",align:"center",gap:"20px"}}),t.jsxs(W,{borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"bg_six",mt:"20px",mb:"20px",p:"8px",gap:"12px",children:[t.jsx(As,{perText:i,direct:l,isFullRange:C,minPriceData:l?S:k,maxPriceData:l?k:S}),F&&K&&t.jsx(He,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."})]}),t.jsxs(W,{mb:"20px",gap:"16px",children:[t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"row",gap:"8px",p:"0 12px 0"},children:t.jsx(L,{color:"text_caption",children:F&&K?"--":x})}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&t.jsx(Ss,{minPrice:l?it(n==null?void 0:n.displayFarmsEffectMinPrice):nt(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:l?it(n==null?void 0:n.displayFarmsEffectMaxPrice):nt(n==null?void 0:n.displayFarmsEffectMinPrice),loading:h,perText:i,checked:M,onChange:r})]}),t.jsxs(te,{w:"100%",bg:"bg_secondary",borderRadius:"20px",border:"1px solid",borderColor:"border",children:[t.jsxs(W,{w:"calc(100% + 2px)",gap:"16px",p:"16px 8px",bg:"bg_six",border:"1px solid",borderColor:"border",borderRadius:"20px",margin:"-1px -1px 0 -1px",children:[t.jsxs($,{w:"100%",justify:"space-between",children:[t.jsx(Ve,{fontSize:"16px",fontWeight:"500",children:"2. Deposit Amounts"}),t.jsx($,{children:t.jsx(xs,{})})]}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsxs(te,{w:"100%",position:"relative",children:[t.jsx(ms,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:Q+"",amountValue:y,loading:!1,onChange:D=>{var E;R(D,!0,(J==null?void 0:J.coin_type)===((E=n==null?void 0:n.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:J,onFocusChange:D=>{var E;D&&+(Q+"")&&!O&&R(Q+"",!0,(J==null?void 0:J.coin_type)===((E=n==null?void 0:n.tokenA)==null?void 0:E.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(g==null?void 0:g.balanceFormat)||"",value:Y+"",amountValue:_,loading:!1,onFocusChange:D=>{var E;D&&+(Y+"")&&O&&R(Y+"",!1,(U==null?void 0:U.coin_type)===((E=n==null?void 0:n.tokenA)==null?void 0:E.coin_type))},onChange:D=>{var E;R(D,!1,(U==null?void 0:U.coin_type)===((E=n==null?void 0:n.tokenA)==null?void 0:E.coin_type))},selectable:!1,placeholder:"0.0",token:U},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),F&&K&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((ue=[F,K].filter(Boolean))==null?void 0:ue.length)===1&&t.jsx(ct,{position:"absolute",top:F?"0px":"116px",h:"108px",left:"0",p:"16px",borderRadius:"16px",text:"The market price is outside your specified price range. Single-asset deposit only."})]}),!!(n!=null&&n.poolAddress)&&t.jsx(t.Fragment,{children:t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"20px",border:"1px solid",borderColor:"border",bg:"background",p:"20px 8px",children:[t.jsx(oe,{isLoading:!1,label:"Total Amount",value:z&&+z?kt(z):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",children:t.jsx(W,{justify:"flex-end",gap:"4px",children:[J,U].filter(Boolean).map((D,E)=>{var X;return t.jsxs($,{gap:"4px",justify:"flex-end",w:"100%",children:[t.jsx(Ee,{imageUrl:D==null?void 0:D.logo_url,coinType:D==null?void 0:D.coin_type,w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(L,{color:E===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[Z(D==null?void 0:D.symbol,10)," ",F&&K?"--":ne[(D==null?void 0:D.coin_type)===((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type)?"percentA":"percentB"],"%"]})]},D==null?void 0:D.coin_type)})})})]})})]}),!!(n!=null&&n.poolAddress)&&t.jsx(ge,{w:"100%",h:"52px",fontSize:"20px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:v,children:e})]}),(n==null?void 0:n.haveFarming)&&t.jsx(_s,{disabled:F||K,checked:q,onChange:B})]})]})}function Xt({children:e,title:s,wrapStyle:r={}}){return t.jsxs(W,{gap:"8px",p:"10px 16px 16px",border:"1px solid",borderColor:"border",borderRadius:"16px",bg:"bg_six",...r,children:[t.jsxs($,{w:"100%",justify:"space-between",h:"32px",children:[t.jsx(L,{fontSize:"16px",fontWeight:"500",color:"text_caption",children:s}),e==null?void 0:e[0]]}),e==null?void 0:e[1]]})}function Bi({btnText:e,btnDisabled:s,handleChangeIsFarmRewardsRange:r,onReverseClick:c,leverage:x,direct:l,perText:i,rangeTabList:o,currentRangeTab:a,addressHistTokensMap:d,fromBalanceInfo:p,toBalanceInfo:g,fromAmountValue:y,toAmountValue:_,handleAmountChange:R,handleAdd:v,isFullRange:C}){var D;const{currentPriceData:u,contractPoolInfo:b,apiPoolInfo:n,resetLiquidity:f,contractPoolInfoLoading:w,apiPoolInfoLoading:h,minPriceForDate:m,maxPriceForDate:A,currentRange:S}=I(),{lowerTickData:k,upperTickData:q}=Ce(),{autoStakePosition:N,setAutoStakePosition:M,isFarmRewardsRange:Q,fromAmount:Y,toAmount:O,byAmountIn:ne,percentMap:J,fromToken:U,toToken:z,totalAmount:F,fromTokenLock:K,toTokenLock:P}=ke(),{poolAddress:B}=le(),re=E=>{M(E.target.checked)},{priceImpactBasedOnMarket:T}=gs(U,z,l?"1":We(u==null?void 0:u.currentPrice),l?We(u==null?void 0:u.currentPrice):"1"),ue=j.useMemo(()=>{if(T&&H(T).abs().gte(30))return H(T).gte(30)?`+${H(T).toFixed(0)}%`:`${H(T).toFixed(0)}%`},[T]);return t.jsx(t.Fragment,{children:t.jsxs($,{gap:"12px",align:"flex-start",children:[t.jsxs(Xt,{title:"1. Select Range",wrapStyle:{flex:1,minW:"588px",gap:"0"},children:[!o||!o.length?t.jsx(De,{h:"32px",borderRadius:"8px",w:"180px"}):t.jsx(ze,{type:"outlineTab",tabList:o,currentTab:a,handleChangeTab:E=>c(E),wrapStyle:{h:"32px",p:"3px",border:"1px solid",borderColor:"border",borderRadius:"8px",gap:"4px",zIndex:"99"},itemStyle:{h:"24px",p:"4px 12px",borderRadius:"4px",gap:"4px"}}),t.jsxs(W,{w:"100%",gap:"12px",children:[t.jsx($,{w:"100%",justify:"space-between",gap:"32px",mt:"16px",children:t.jsxs(W,{flex:"1",pos:"relative",gap:"0px",children:[t.jsx($,{w:"100%",h:"24px",justify:"flex-start",children:t.jsx(ps,{loading:h,price:ie(u)?We(l?u==null?void 0:u.currentPrice:u.reverseCurrentPrice,6):"--",perText:i,wrapStyle:{ml:"156px",zIndex:99}})}),t.jsxs($,{w:"100%",gap:"32px",alignItems:"start",children:[t.jsxs(W,{gap:"20px",children:[t.jsx(He,{h:"226px",mt:"10px",children:t.jsx(ws,{poolAddress:B,currentTick:b==null?void 0:b.current_tick_index,tickSpacing:b==null?void 0:b.tickSpacing,farmsEffectTickLower:n==null?void 0:n.farmsEffectiveTickLower,farmsEffectTickUpper:n==null?void 0:n.farmsEffectiveTickUpper})}),ie(k)&&ie(q)&&t.jsx(t.Fragment,{children:t.jsx(lt,{label:"Leverage",tooltip:"This parameter indicates the concentration rate of your liquidity relative to a full range position.",wrapStyle:{flexDir:"column",align:"center",width:"auto",gap:"2px"},children:t.jsx(L,{color:"text_caption",children:K&&P?"--":x})})})]}),t.jsxs(W,{w:"100%",gap:"32px",children:[t.jsx(te,{w:"100%",h:"230px",children:t.jsx(ds,{handleClickRefresh:()=>{},direct:l,minPriceData:l?k:q,maxPriceData:l?q:k,dashedMarkerLine:[m,A],currentRange:S})}),ue&&t.jsx(Ct,{bg:"primary_red_opacity.10",border:"0px solid",borderRadius:"12px",p:"8px",w:"100%",mb:"-20px",children:t.jsxs($,{children:[t.jsx(be,{svgW:"16px",svgH:"16px",xlinkHref:"#icon-icon-warning",svgFill:"primary_red",variant:"error"}),t.jsx(L,{color:"primary_red",lineHeight:"20px",children:` The current pool price deviates largely from the real-time market price (${ue}). Please be careful with your price range
                        setting to avoid large impermanent loss.`})]})}),ie(k)&&ie(q)&&t.jsx(vs,{direct:l,rangeMap:d,wrapStyle:{w:"100%"}})]})]})]})}),t.jsx(As,{perText:i,direct:l,isFullRange:C,minPriceData:l?k:q,maxPriceData:l?q:k}),K&&P&&t.jsx(He,{w:"100%",fontSize:"12px",color:"primary_red",bg:"primary_red_opacity.10",h:"32px",borderRadius:"8px",children:"The max price should be higher than min price."}),(n==null?void 0:n.haveFarming)&&(n==null?void 0:n.displayFarmsEffectMaxPrice)&&(n==null?void 0:n.displayFarmsEffectMinPrice)&&t.jsx(Ss,{minPrice:l?it(n==null?void 0:n.displayFarmsEffectMinPrice):nt(n==null?void 0:n.displayFarmsEffectMaxPrice),maxPrice:l?it(n==null?void 0:n.displayFarmsEffectMaxPrice):nt(n==null?void 0:n.displayFarmsEffectMinPrice),loading:h,perText:i,checked:Q,onChange:r})]})]}),t.jsxs(W,{gap:"8px",minW:"420px",maxW:"460px",w:"460px",children:[t.jsxs(Xt,{title:"2. Deposit Amounts",wrapStyle:{gap:"16px",w:"100%"},children:[t.jsx($,{children:t.jsx(xs,{})}),t.jsxs(te,{w:"100%",position:"relative",children:[t.jsx(ms,{onClick:c,from:{wrapStyle:{h:"108px"},balance:(p==null?void 0:p.balanceFormat)||"",value:Y,amountValue:y,loading:!1,onChange:E=>{var X;R(E,!0,(U==null?void 0:U.coin_type)===((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type))},selectable:!1,placeholder:"0.0",token:U,onFocusChange:E=>{var X;E&&+(Y+"")&&!ne&&R(Y+"",!0,(U==null?void 0:U.coin_type)===((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type))}},to:{wrapStyle:{h:"108px"},balance:(g==null?void 0:g.balanceFormat)||"",value:O,amountValue:_,loading:!1,onFocusChange:E=>{var X;E&&+(O+"")&&ne&&R(O+"",!1,(z==null?void 0:z.coin_type)===((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type))},onChange:E=>{var X;R(E,!1,(z==null?void 0:z.coin_type)===((X=n==null?void 0:n.tokenA)==null?void 0:X.coin_type))},selectable:!1,placeholder:"0.0",token:z},iconParams:{xlinkHref:"#icon-icon_add",svgFill:"text_caption"}}),K&&P&&t.jsx(ct,{position:"absolute",h:"224px",top:"0px",left:"0",zIndex:9999,borderRadius:"16px"}),((D=[K,P].filter(Boolean))==null?void 0:D.length)===1&&t.jsx(ct,{position:"absolute",top:K?"0px":"116px",h:"108px",left:"0",text:"The market price is outside your specified price range. Single-asset deposit only.",borderRadius:"16px"})]})]}),t.jsxs(t.Fragment,{children:[t.jsx(W,{w:"100%",gap:"8px",children:!!(n!=null&&n.poolAddress)&&(!K||!P)&&t.jsxs(W,{gap:"12px",w:"100%",borderRadius:"16px",border:"1px solid",borderColor:"border",bg:"bg_six",p:n!=null&&n.displayTokenA&&(n!=null&&n.displayTokenB)?"0 16px 16px":"0 16px",children:[t.jsx(ge,{w:"calc(100% + 34px)",h:"52px",margin:"-1px -1px 5px",fontSize:"18px",fontWeight:"500",borderRadius:"16px",isDisabled:s,isLoading:!1,onClick:v,children:e}),(n==null?void 0:n.displayTokenA)&&(n==null?void 0:n.displayTokenB)&&t.jsxs(t.Fragment,{children:[t.jsx(oe,{isLoading:!1,label:"Total Amount",value:F&&+F?kt(F):"--",labelStyle:{fontSize:"14px"},valueStyle:{fontSize:"14px",h:"20px"},skeletonStyle:{valueW:"128px"}}),t.jsx(lt,{label:"Deposit Ratio",tooltip:"The ratio of two assets depends on the range you set and the current price.",wrapStyle:{gap:"0px"},children:t.jsx($,{gap:"12px",children:[U,z].filter(Boolean).map((E,X)=>{var Le;return t.jsxs($,{gap:"4px",children:[t.jsx(Ee,{imageUrl:E==null?void 0:E.logo_url,coinType:E?E==null?void 0:E.coin_type:"",w:"20px",h:"20px",showTagWidth:"10px",showTagHeight:"10px"}),t.jsxs(L,{color:X===0?"primary":"primary_green",fontSize:"14px",whiteSpace:"nowrap",children:[Z(E==null?void 0:E.symbol,10)," ",K&&P?"--":J[(E==null?void 0:E.coin_type)===((Le=n==null?void 0:n.tokenA)==null?void 0:Le.coin_type)?"percentA":"percentB"],"%"]})]},E==null?void 0:E.coin_type)})})})]})]})}),(n==null?void 0:n.haveFarming)&&t.jsx(_s,{disabled:K||P,checked:N,onChange:re})]})]})]})})}function Mi({rangeTabList:e,currentFeeTier:s,addressHistTokensMap:r,getList:c,getPrice:x}){const{apiPoolInfo:l}=I(),{direct:i,perText:o,handleChangeIsFarmRewardsRange:a,onReverseClick:d,leverage:p,currentRangeTab:g,isFullRange:y}=wi({rangeTabList:e}),{handleAmountChange:_,fromAmountValue:R,toAmountValue:v,fromBalanceInfo:C,toBalanceInfo:u,confirmModalOpen:b,setConfirmModalOpen:n,relatedPosId:f,nftOpen:w,setNftOpen:h,handleAdd:m,handleSubmit:A}=Si(c,i),{btnText:S,btnDisabled:k}=_i(),{isApp:q}=Re(),N={btnText:S,btnDisabled:k,handleChangeIsFarmRewardsRange:a,onReverseClick:d,leverage:p,direct:i,perText:o,rangeTabList:e,currentRangeTab:g,addressHistTokensMap:r,fromBalanceInfo:C,toBalanceInfo:u,fromAmountValue:R,toAmountValue:v,handleAmountChange:_,handleAdd:m,isFullRange:y};return t.jsxs(t.Fragment,{children:[q?t.jsx(Fi,{...N}):t.jsx(Bi,{...N}),b&&t.jsx(Ai,{onClose:()=>n(!1),data:{feeTier:s},onSubmit:A}),w&&f&&ie(l)&&t.jsx(Ri,{onClose:()=>h(!1),tokenA:l==null?void 0:l.displayTokenA,tokenB:l==null?void 0:l.displayTokenB,posId:f,fee:l==null?void 0:l.feeDisplay,isReverse:l==null?void 0:l.isReverse})]})}const Yt=(e,s,r)=>e&&s&&r?H(e).mul(s).div(H(10).pow(r)).toString():"--";function zi(){var h,m;const{tokenAPrice:e,setTokenAPrice:s,tokenBPrice:r,setTokenBPrice:c,tokenAAmount:x,setTokenAAmount:l,tokenBAmount:i,setTokenBAmount:o,tokenAAmountUSD:a,setTokenAAmountUSD:d,tokenBAmountUSD:p,setTokenBAmountUSD:g,totalAmountUSD:y,setTotalAmountUSD:_,resetTvlInfo:R,tvlLoading:v,setTvlLoading:C}=ut(),{apiPoolInfo:u,contractPoolInfo:b}=I(),n=async A=>{var S,k;try{const q=(S=je(A))==null?void 0:S.full_address,N=q=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":q,{prices:M}=await rr(`${(k=ir)==null?void 0:k.cetus_api}/v2/sui/price?base_symbol_address=${N}`);return M==null?void 0:M[0]}catch(q){return console.log("🚀🚀🚀 ~ file: useRate.ts:31 ~ getAmountPrice ~ error:",q),"--"}},{poolAddress:f}=le(),w=async()=>{var A,S,k,q;C(!0);try{if((A=u==null?void 0:u.tokenA)!=null&&A.coin_type){const N=await n((S=u==null?void 0:u.tokenA)==null?void 0:S.coin_type);N&&s(N)}if((k=u==null?void 0:u.tokenB)!=null&&k.coin_type){const N=await n((q=u==null?void 0:u.tokenB)==null?void 0:q.coin_type);N&&c(N)}}catch(N){console.log("🚀 ~ PoolInfo ~ handleRefresh:",N)}finally{C(!1)}};return j.useEffect(()=>{R()},[f]),j.useEffect(()=>()=>{R()},[]),j.useEffect(()=>{w()},[u==null?void 0:u.tvl,(h=u==null?void 0:u.tokenA)==null?void 0:h.coin_type,(m=u==null?void 0:u.tokenB)==null?void 0:m.coin_type]),j.useEffect(()=>{b!=null&&b.coinAmountA&&l(H(b==null?void 0:b.coinAmountA).sub((b==null?void 0:b.fee_protocol_coin_a)||"0").toString())},[b==null?void 0:b.coinAmountA,b==null?void 0:b.fee_protocol_coin_a]),j.useEffect(()=>{b!=null&&b.coinAmountB&&o(H(b==null?void 0:b.coinAmountB).sub((b==null?void 0:b.fee_protocol_coin_b)||"0").toString())},[b==null?void 0:b.coinAmountB,b==null?void 0:b.fee_protocol_coin_b]),j.useEffect(()=>{x&&(e!=null&&e.price)&&(u!=null&&u.tokenA.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenA.decimals))&&d(Yt(x,e==null?void 0:e.price,u==null?void 0:u.tokenA.decimals))},[x,e]),j.useEffect(()=>{i&&(r!=null&&r.price)&&(u!=null&&u.tokenB.decimals)&&!Number.isNaN(Number(u==null?void 0:u.tokenB.decimals))&&g(Yt(i,r==null?void 0:r.price,u==null?void 0:u.tokenB.decimals))},[i,r]),j.useEffect(()=>{_(a&&p&&a!=="--"&&p!=="--"?H(a).plus(p).toString():"--")},[a,p]),{tokenAPrice:e,tokenBPrice:r,tokenAAmount:x,tokenBAmount:i,tokenAAmountUSD:a,tokenBAmountUSD:p,totalAmountUSD:y,setTotalAmountUSD:_,tvlLoading:v}}function Ei(){const{tab:e,poolAddress:s,from:r,to:c,fee:x}=le(),{getPoolList:l}=zr(),[i,o]=j.useState([]),{apiPoolInfo:a,setApiPoolInfo:d,setApiPoolInfoLoading:p,setNetError:g}=I(),y=Ke(),{fetchTokenInfo:_}=ys(),R=async({poolAddress:v,from:C,to:u})=>{var b,n,f,w;try{p(!0);let h,m;if(v&&v!=="undefined"){const A=await l({pool:v});A&&A.list&&A.list.length?(m=A.list[0],h=await l({coin_type:`${(b=m==null?void 0:m.displayTokenA)==null?void 0:b.coin_type},${(n=m==null?void 0:m.displayTokenB)==null?void 0:n.coin_type}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0})):a&&ie(a)?(m=a,h={list:i}):(m={poolAddress:v,displayTokenA:void 0,displayTokenB:void 0},h={list:[]}),p(!1)}else if(C&&u&&C!=="undefined"&&u!=="undefined"&&C!==u){const A=await l({coin_type:`${C},${u}`,is_vaults:!1,display_all_pools:!0,has_mining:!0,has_farming:!0,no_incentives:!0,order_by:"-vol",offset:0});if(console.log(A,"res_getPoolList"),A&&A.list&&A.list.length)if(x&&x!=="undefined"){const S=(f=A==null?void 0:A.list)==null?void 0:f.find(k=>H(k==null?void 0:k.feeRate).eq(x));if(S)y(e?`/liquidity?tab=${e}&poolAddress=${S==null?void 0:S.poolAddress}`:`/liquidity?poolAddress=${S==null?void 0:S.poolAddress}`);else{const k=yt(A==null?void 0:A.list,q=>Number((q==null?void 0:q.tvl)||"0"));y(e?`/liquidity?tab=${e}&poolAddress=${k==null?void 0:k.poolAddress}`:`/liquidity?poolAddress=${k==null?void 0:k.poolAddress}`)}}else{let S=yt(A==null?void 0:A.list,k=>Number((k==null?void 0:k.tvl)||"0"));S||(S=yt(A==null?void 0:A.list,k=>{var q;return Number(((q=k==null?void 0:k.object)==null?void 0:q.liquidity)||"0")}),S||(S=A==null?void 0:A.list[0])),y(e?`/liquidity?tab=${e}&poolAddress=${S==null?void 0:S.poolAddress}`:`/liquidity?poolAddress=${S==null?void 0:S.poolAddress}`)}else{const S=await _(C),k=await _(u);m={poolAddress:void 0,displayTokenA:S,displayTokenB:k},h={list:[]},p(!1)}}else(!C||C==="undefined")&&u&&u!=="undefined"&&(m={poolAddress:void 0,displayTokenA:void 0,displayTokenB:await _(u)}),(!u||u==="undefined")&&C&&C!=="undefined"&&(m={poolAddress:void 0,displayTokenA:await _(C),displayTokenB:void 0}),h={list:[]},p(!1);h&&(g(!1),o(h==null?void 0:h.list),console.log(m,"setApiPoolInfo"),m&&(m!=null&&m.poolAddress&&v?(m==null?void 0:m.poolAddress)===v&&d(m):d(m))),p(!1)}catch(h){if(h!=null&&h.list&&((w=h==null?void 0:h.list)==null?void 0:w.length)===1){g(!0);const m=h==null?void 0:h.list[0];console.log(h==null?void 0:h.list,"setApiPoolInfo"),d(m),o([]),p(!1)}}};return j.useEffect(()=>{s&&s==="undefined"||R({poolAddress:s,from:r,to:c})},[s,r,c]),{getList:R,relatedPoolList:i}}function $i(){var v,C,u,b;const{poolAddress:e}=le(),{apiPoolInfo:s,apiPoolInfoLoading:r}=I(),[c,x]=j.useState(),{fetchByApi:l}=_t(),{quoteWhiteTokenList:i}=us(),{getList:o,relatedPoolList:a}=Ei(),d=j.useMemo(()=>{var f,w;const n=Ur(a);return n?s!=null&&s.tokenA&&(s!=null&&s.tokenB)?(f=Nt)==null?void 0:f.map(h=>{var A,S;const m=((A=n.find(k=>k.feeRate===h.feeRate))==null?void 0:A.title)||h.title;return{...h,title:m,poolAddress:(S=n.find(k=>k.feeRate===h.feeRate))==null?void 0:S.poolAddress,disabled:m==="Not Created"&&!qe(s==null?void 0:s.tokenA,i)&&!qe(s==null?void 0:s.tokenB,i)}}):(w=Nt)==null?void 0:w.map(h=>{var A,S;const m=((A=n.find(k=>k.feeRate===h.feeRate))==null?void 0:A.title)||h.title;return{...h,title:m,poolAddress:(S=n.find(k=>k.feeRate===h.feeRate))==null?void 0:S.poolAddress,disabled:!qe(s==null?void 0:s.displayTokenA,i)&&!qe(s==null?void 0:s.displayTokenB,i)}}):[]},[JSON.stringify(a),JSON.stringify(i),(v=s==null?void 0:s.displayTokenA)==null?void 0:v.coin_type,(C=s==null?void 0:s.displayTokenB)==null?void 0:C.coin_type]),p=j.useMemo(()=>s?[s==null?void 0:s.displayTokenA,s==null?void 0:s.displayTokenB].filter(Boolean).map(n=>({label:n==null?void 0:n.symbol,key:n==null?void 0:n.coin_type,isToken:!0,imgInfo:{src:n==null?void 0:n.logo_url,w:"16px",h:"16px",coinType:n?n==null?void 0:n.coin_type:"",showTagWidth:"8px",showTagHeight:"8px"}})):[],[(u=s==null?void 0:s.displayTokenA)==null?void 0:u.symbol,(b=s==null?void 0:s.displayTokenB)==null?void 0:b.symbol]),g=j.useMemo(()=>{const n=d==null?void 0:d.find(f=>f.poolAddress===e);return n||s},[JSON.stringify(d),e,JSON.stringify(s)]),y=async n=>{console.log("🚀 ~ setAddressHistTokens ~ this.addressHistTokens:🚀 ~ getContractPrices ~ address:",n);let f=[];const w=await l(or,"GET",{pool:n});console.log(w,"resVal"),f=Object.fromEntries(w.list.map(h=>[h.swap_account,h])),x(f)};j.useEffect(()=>{e&&y(e)},[e]);const _=j.useMemo(()=>{var n,f,w;return c&&e&&((n=c==null?void 0:c[e])!=null&&n.data)?Object.fromEntries((w=(f=c==null?void 0:c[e])==null?void 0:f.data)==null?void 0:w.map(h=>[h.key,h.value])):{}},[JSON.stringify(c)]),R=j.useMemo(()=>{const n=[];return s!=null&&s.displayTokenA&&n.push(s==null?void 0:s.displayTokenA),s!=null&&s.displayTokenB&&n.push(s==null?void 0:s.displayTokenB),n},[JSON.stringify(s==null?void 0:s.displayTokenA),JSON.stringify(s==null?void 0:s.displayTokenB)]);return{getList:o,feeTierList:d,apiPoolInfo:s,rangeTabList:p,currentFeeTier:g,addressHistTokensMap:_,apiPoolInfoLoading:r,quoteWhiteTokenList:i,warningTokenList:R}}var Ne=(e=>(e.deposit="Provide Liquidity",e.positions="My Positions",e.analytics="Analytics",e))(Ne||{});const ve=[{label:"Provide Liquidity",key:"deposit"},{label:"My Positions",key:"positions"},{label:"Analytics",key:"analytics"}];function qi({apiPoolInfo:e}){var ne,J,U;const{tab:s,poolAddress:r}=le(),c=Ke(),[x,l]=j.useState(),[i,o]=j.useState(ve),[a,d]=j.useState(((ne=ve==null?void 0:ve.find(z=>z.key===s))==null?void 0:ne.key)||ve[0].key),[p,g]=j.useState(),[y,_]=j.useState(),{posBaseListGroupByPool:R}=ls(),{addFavorites:v,removeFavorites:C}=vr(),{poolFavoriteIds:u}=wr(),{fromToken:b,toToken:n}=ke(),{fetchTokenPrices:f}=ns(),{isApp:w}=Re(),{setFromCoin:h,setToCoin:m,fromCoin:A,toCoin:S}=Or(),{setIsOpen:k}=Vr(),q=()=>{var z,F;w?c(`/swap/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}`):k(!0)};j.useEffect(()=>{b&&n&&(h(b),m(n))},[b,n]);const N=j.useMemo(()=>{if(r&&r!=="undefined"){const z=R[r.toLowerCase()||""];return z&&(z!=null&&z.list)&&(z==null?void 0:z.list.length)>0?z==null?void 0:z.list.length:void 0}},[JSON.stringify(R),r]);j.useEffect(()=>{o(ve==null?void 0:ve.map(z=>({...z,num:z.label==="My Positions"&&a==="positions"?N:void 0})))},[N,a]),j.useLayoutEffect(()=>{s&&s!==a&&d(s)},[s]);const M=j.useMemo(()=>u==null?void 0:u.includes(r||""),[JSON.stringify(u),r]),Q=z=>{Lt(z),r&&(M?C(r):v(r))};j.useEffect(()=>{g(e==null?void 0:e.displayTokenA),_(e==null?void 0:e.displayTokenB)},[(J=e==null?void 0:e.displayTokenA)==null?void 0:J.coin_type,(U=e==null?void 0:e.displayTokenB)==null?void 0:U.coin_type]);const Y=()=>{var z,F;c(`/create-pool/${(z=e==null?void 0:e.displayTokenA)==null?void 0:z.coin_type}/${(F=e==null?void 0:e.displayTokenB)==null?void 0:F.coin_type}/${x==null?void 0:x.feeRate}`)},O=()=>{const z=[];b&&z.push(b.coin_type),n&&z.push(n.coin_type),z.length>0&&f(z)};return j.useEffect(()=>{O()},[b==null?void 0:b.coin_type,n==null?void 0:n.coin_type]),{currentTab:a,setCurrentTab:d,tabList:i,isFavoritePool:M,onChangeFavorites:Q,selectedTokenA:p,selectedTokenB:y,setSelectedTokenA:g,setSelectedTokenB:_,onConfirm:Y,feeTier:x,setFeeTier:l,refreshMarketPrice:O,onJump2Swap:q}}function Wi(){const{currentAccount:e}=dt(),{apiPoolInfo:s,resetLiquidity:r,setManualRefresh:c}=I(),{feeTierList:x,currentFeeTier:l,rangeTabList:i,addressHistTokensMap:o,getList:a,quoteWhiteTokenList:d,warningTokenList:p}=$i(),{poolAddress:g}=le(),{handleResetRange:y}=ot(),{resetAddLiquidity:_,setFromToken:R,setToToken:v}=ke(),{fetchAccountBalance:C}=os(),{getContractPoolInfo:u}=Cr(),{getCurrentPrice:b}=kr(),{currentTab:n,setCurrentTab:f,tabList:w,isFavoritePool:h,onChangeFavorites:m,selectedTokenA:A,selectedTokenB:S,setSelectedTokenA:k,setSelectedTokenB:q,onConfirm:N,setFeeTier:M,refreshMarketPrice:Q,onJump2Swap:Y}=qi({apiPoolInfo:s});j.useEffect(()=>{ie(s)&&(R(s==null?void 0:s.displayTokenA),v(s==null?void 0:s.displayTokenB))},[s==null?void 0:s.poolAddress]);const O=async()=>{if(g&&s&&g===(s==null?void 0:s.poolAddress)){const U=await u(g);U&&b(U==null?void 0:U.current_sqrt_price,s)}},ne=()=>{Q==null||Q(),O==null||O()},J=async U=>{console.log("🚀 ~ handleRefresh ~ handleRefresh111:"),U&&c(!0),g&&g!=="undefined"&&await a({poolAddress:g}),e!=null&&e.address&&await C(),ne(),c(!1)};return j.useEffect(()=>(e!=null&&e.address&&C(),()=>{y(),_(),r()}),[]),j.useEffect(()=>{g&&(s==null?void 0:s.poolAddress)!==g&&(y(),_(),r()),g&&g===(s==null?void 0:s.poolAddress)&&O()},[g,s==null?void 0:s.poolAddress]),{feeTierList:x,currentFeeTier:l,rangeTabList:i,addressHistTokensMap:o,quoteWhiteTokenList:d,warningTokenList:p,currentTab:n,setCurrentTab:f,tabList:w,isFavoritePool:h,onChangeFavorites:m,selectedTokenA:A,selectedTokenB:S,setSelectedTokenA:k,setSelectedTokenB:q,onConfirm:N,setFeeTier:M,handleRefresh:J,handleGetPrice:O,onJump2Swap:Y}}function ra(){const e=Ke(),{apiPoolInfo:s,apiPoolInfoLoading:r,currentPriceData:c,setApiPoolInfo:x,netError:l}=I(),{poolAddress:i,from:o,to:a}=le(),{feeTierList:d,currentFeeTier:p,rangeTabList:g,addressHistTokensMap:y,quoteWhiteTokenList:_,warningTokenList:R,currentTab:v,setCurrentTab:C,tabList:u,isFavoritePool:b,onChangeFavorites:n,selectedTokenA:f,selectedTokenB:w,setSelectedTokenA:h,setSelectedTokenB:m,onConfirm:A,setFeeTier:S,handleRefresh:k,handleGetPrice:q,onJump2Swap:N}=Wi(),{getTokenInfo:M}=ys(),{isApp:Q}=Re(),{isOpen:Y,onOpen:O,onClose:ne}=nr(),{totalAmountUSD:J,tvlLoading:U,setTotalAmountUSD:z}=zi();return t.jsxs(t.Fragment,{children:[t.jsxs(te,{w:"100%",mt:"20px",children:[t.jsxs($,{w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",children:[t.jsx(ar,{text:"Pools",onClick:()=>e("/pools")}),i&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs($,{gap:"8px",children:[t.jsx(st,{placement:"top",tooltip:b?"Remove from Watchlist":"Add to Watchlist",children:t.jsx(ge,{variant:"outline",w:"32px",h:"32px",lineHeight:"32px",onClick:n,p:"0 6px",borderRadius:"8px",color:"text_paragraph",bg:"background",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:b?"primary":"text_caption"}}},children:t.jsx(be,{xlinkHref:b?"#icon-icon_star_sel":"#icon-icon_star",svgFill:b?"primary_blue":"text_paragraph",svgHover:b?"primary":"text_caption",fontSize:"18px"})})}),t.jsx(st,{placement:"top",tooltip:"Trade",children:t.jsx(ge,{variant:"outline",bg:"background",h:"32px",w:"32px",onClick:N,borderRadius:"8px",p:"0 6px",color:"text_paragraph",display:"flex",justifyContent:"center",gap:"4px",sx:{_hover:{color:"text_caption",svg:{fill:"text_caption"}}},children:t.jsx(be,{xlinkHref:"#icon-icon_swap1",fontSize:"16px"})})}),t.jsx(st,{placement:"top",tooltip:"Refresh",children:t.jsx(te,{children:t.jsx(Dr,{handleRefresh:k,isAutoRefresh:!0,refreshInterval:60,innerStyle:{bg:"background"},w:"32px",h:"32px",borderRadius:"8px",bg:"background"},i)})})]})]}),t.jsxs(pe,{flexDir:{base:"column",lg:"row"},w:"100%",minW:{base:"100%",lg:"1024px"},justify:"space-between",mt:"20px",gap:{base:"20px",lg:"8px"},children:[t.jsxs(pe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"8px"},align:{base:"flex-start",lg:"center"},children:[t.jsxs($,{gap:"12px",children:[t.jsx(Ht,{value:f||(o?M(o):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:l,onChange:F=>{var P,B,re,T;const K=Object.keys(Ne).find(ue=>ue===v);if(w!=null&&w.coin_type||(P=M(a))!=null&&P.coin_type)if(je(F==null?void 0:F.coin_type).full_address===je((w==null?void 0:w.coin_type)||((B=M(a))==null?void 0:B.coin_type)||"").full_address)h(w),m(f);else{if(je(F==null?void 0:F.coin_type).full_address===je((f==null?void 0:f.coin_type)||((re=M(o))==null?void 0:re.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}&to=${(w==null?void 0:w.coin_type)||((T=M(a))==null?void 0:T.coin_type)}`),x(null),z("")}else e(`/liquidity?tab=${K}&from=${F==null?void 0:F.coin_type}`),x(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!f&&r}),t.jsx(Ht,{value:w||(a?M(a):void 0),isWhiteSelect:!1,whiteTokenList:void 0,disabled:l,onChange:F=>{var P,B,re,T;const K=Object.keys(Ne).find(ue=>ue===v);if(f!=null&&f.coin_type||(P=M(o))!=null&&P.coin_type)if(je(F==null?void 0:F.coin_type).full_address===je((f==null?void 0:f.coin_type)||((B=M(o))==null?void 0:B.coin_type)||"").full_address)h(w),m(f);else{if(je(F==null?void 0:F.coin_type).full_address===je((w==null?void 0:w.coin_type)||((re=M(a))==null?void 0:re.coin_type)||"").full_address)return;e(`/liquidity?tab=${K}&from=${(f==null?void 0:f.coin_type)||((T=M(o))==null?void 0:T.coin_type)}&to=${F==null?void 0:F.coin_type}`),x(null),z("")}else e(`/liquidity?tab=${K}&to=${F==null?void 0:F.coin_type}`),x(null),z("")},tokenStyle:{p:0,border:"none"},tokenSize:"32px",symbolStyle:{fontSize:"20px",fontWeight:"500"},wrapStyle:{h:"32px",border:"none",p:"0",bg:"background"},loading:!w&&r})]}),t.jsx(Nr,{value:p,loading:!p&&r,feeTierList:d,disabled:l,onChange:F=>{F!=null&&F.poolAddress?e(`/liquidity?poolAddress=${F==null?void 0:F.poolAddress}`):(S(F),O())}})]}),i&&(s==null?void 0:s.tokenA)&&(s==null?void 0:s.tokenB)&&t.jsxs(pe,{flexDir:{base:"column",lg:"row"},gap:{base:"20px",lg:"28px"},children:[t.jsx(Pe,{label:"Pool APR",value:t.jsx(cr,{poolInfo:s,placement:"bottom",children:t.jsxs($,{justify:"flex-end",align:"flex-end",gap:"4px",lineHeight:"14px",h:"14px",children:[t.jsx(L,{as:"span",fontSize:"14px",color:"text_caption",fontWeight:"500",cursor:s!=null&&s.farmingAprDisplay||s!=null&&s.miningAprList&&(s==null?void 0:s.miningAprList.length)>0?"help":"text",children:s==null?void 0:s.feeAndMiningAprDisplay}),(s==null?void 0:s.haveFarming)&&t.jsxs(L,{fontSize:"12px",lineHeight:"12px",h:"12px",color:"primary",fontWeight:"500",children:["+",s==null?void 0:s.farmingAprDisplay]})]})})}),t.jsx(Pe,{label:"TVL",value:J&&J!=="--"?`$${Ae(J,2)}`:"--",loading:r||U}),t.jsx(Pe,{label:"Volume (24H)",value:(s==null?void 0:s.volume24Display)||"",loading:r}),t.jsx(Pe,{label:"Fees (24H)",value:(s==null?void 0:s.fees24Display)||"",loading:r})]})]}),i&&(s!=null&&s.tokenA)&&(s!=null&&s.tokenB)?t.jsxs(t.Fragment,{children:[t.jsxs(pe,{w:"100%",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},minW:{base:"100%",lg:"1024px"},children:[t.jsx(ze,{type:"borderTab",tabList:u,currentTab:v,handleChangeTab:F=>{const K=Object.keys(Ne).find(P=>Ne[P]===F.label);i&&e(`/liquidity?tab=${K}&poolAddress=${i}`),C(K)},wrapStyle:{w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"flex-start"},p:{base:"0 12px",lg:"0"},bg:{base:"bg_secondary",lg:"transparent"},h:Q?"60px":"58px",gap:{base:"8px",lg:"45px"},border:{base:"1px solid",lg:"none"},borderColor:{base:"border",lg:"transparent"},borderRadius:{base:"16px",lg:"unset"},mt:{base:"20px",lg:"12px"}},itemStyle:{fontSize:Q?"14px":"16px",fontWeight:"500"}}),v!=="deposit"&&s&&t.jsxs(pe,{w:Q?"100%":"auto",mt:{base:"4px",lg:"12px"},gap:"12px",flexDir:{base:"column",lg:"row"},justify:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},children:[t.jsx(L,{children:"Current Price"}),t.jsx(Gr,{noCenter:!!Q,fromToken:s==null?void 0:s.displayTokenA,toToken:s==null?void 0:s.displayTokenB,fromValue:"1",toValue:tt(s!=null&&s.isReverse?c==null?void 0:c.reverseCurrentPrice:c==null?void 0:c.currentPrice,6,!0).toString(),color:"text_caption",wrapStyle:Q?{w:"100%"}:{}})]})]}),t.jsx(te,{h:{base:"20px",lg:"8px"}}),v==="deposit"&&t.jsx(Mi,{rangeTabList:g,getList:k,getPrice:q,currentFeeTier:p,addressHistTokensMap:y}),v==="positions"&&t.jsx(fi,{}),v==="analytics"&&t.jsx(hi,{})]}):t.jsx(te,{mt:"20px",children:!s&&r?t.jsx(He,{w:"100%",h:"480px",background:"bg_secondary",borderRadius:"12px",border:"1px solid",borderColor:"border",children:t.jsx(Rt,{})}):t.jsx(Oe,{type:"custom",imgUrl:"/images/img_create_pool.png",h:"480px",children:t.jsx(W,{children:f&&w?qe(f,_)||qe(w,_)?t.jsxs(t.Fragment,{children:[t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",fontWeight:"500",children:"This Pool has not been initialized"}),t.jsx(L,{fontSize:"14px",children:"Do you want to initialize it?"}),t.jsx(ge,{mt:"12px",w:"120px",h:"32px",borderRadius:"8px",colorScheme:"blue",fontSize:"14px",fontWeight:"500",onClick:()=>{ne(),A()},children:"Initialized Pool"})]}):t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"No liquidity data"}):t.jsx(L,{h:"20px",lineHeight:"20px",fontSize:"14px",color:"text_caption",children:"Select the token you want to provide liquidity for."})})})})]}),(s==null?void 0:s.displayTokenA)&&(s==null?void 0:s.displayTokenB)&&t.jsx(Kr,{tokensInfo:R,waringModalCancel:F=>{e("/pools")}}),t.jsx(qr,{title:"This Pool has not been initialized",subTitle:"Do you want to initialize it?",btnText:"Initialized Pool",isOpen:Y,onClose:ne,onConfirm:A})]})}export{ra as default};
