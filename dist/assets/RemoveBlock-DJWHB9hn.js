import{a as g,ab as De,j as t,V as Ne,H as ae,I as hi,T as K,R as bi,v as he,f as we,a2 as ki,a3 as Ai,a4 as Si,a5 as wi}from"./vendor-DsVemle5.js";import{e as Pe,f as _i,c as vi,a as Ri,g as Ci,Z as ji,R as Li}from"./ZapSwitch-Dj1I4tYZ.js";import{a as qi,u as Fi}from"./useTransaction-_40Gj-Xj.js";import{u as Be}from"./global-XGPon1rE.js";import{u as Ve,e as zi,a as Ie,f as Mi}from"./usePositionList-DPh0B0ja.js";import{a as _e,b as ei}from"./useNotifiSubscription-DtbsDptI.js";import{f as $e}from"./index-Cr9gqCFC.js";import{u as fi}from"./useAccountBalance-BlkjpDIb.js";import{a as Ni,n as ii,a2 as Te,I as Vi,B as ti,H as Wi,Y as Ei,j as Zi,d as a,az as le,r as Ui,A as Se,x as Gi,a3 as Hi,m as Je,l as Ke,a5 as Xi,w as Ae,a6 as Ye,i as $i}from"./index-ptnn7YYs.js";import{u as Ji}from"./usePosAdd-Xc3N56oJ.js";import{M as fe}from"./msafe-oYBkW7LJ.js";import{v as Oe}from"./v4-C6aID195.js";import{T as Ki}from"./TradeInputGroup-cjeY54io.js";import{A as Yi}from"./index-CI9BE_b8.js";import{u as Oi,R as Qe}from"./ExpendItem-DP88Bi04.js";function Qi(i,p){return{currentApiPoolInfo:g.useMemo(()=>{if(i!=null&&i.clmmPool)return p==null?void 0:p[i==null?void 0:i.clmmPool]},[i==null?void 0:i.clmmPool,p])}}const Di="/assets/img_farming@2x-CwRUS-3E.png";function Pi(){Ni();const{currentPosBaseInfo:i,farmsPosRewardsData:p,posPoolsRelatedData:T,posBaseListLoading:e,posPoolsOriginalData:C}=Ve(),{currentPosPoolInfo:n}=_e(),{currentAccount:u}=ii(),{getCurrentPosBaseInfo:j}=ei(),{getFarmsRewardsData:w}=zi(),{getClmmPosName:H}=Ie(),Y=g.useMemo(()=>{var l;if(i!=null&&i.tokenName)return i==null?void 0:i.tokenName;{const d=(l=C==null?void 0:C[i==null?void 0:i.clmmPool])==null?void 0:l.index;return H(i==null?void 0:i.index,d)||""}},[i==null?void 0:i.tokenName,i==null?void 0:i.index,i==null?void 0:i.clmmPool,C]),X=T[i==null?void 0:i.posId],$=(X==null?void 0:X.currentStatus)=="Active",y=p[i==null?void 0:i.id],V=(n==null?void 0:n.farmsRewarderList)||[],O=y==null?void 0:y.reduce((l,d)=>l+d.display_amount_owed,0),{toStakePos:S,toUnStakePos:F,toClaimPos:Q,unstakeLoading:m,claimLoading:c}=Oi(),r=De(),h=l=>{r(`/position-detail/${l[0].parsedJson.wrapped_position_id}`,{replace:!0}),setTimeout(()=>{j(u==null?void 0:u.address,l[0].parsedJson.wrapped_position_id,!0)},2e3)},b=async()=>{S(i==null?void 0:i.id,n==null?void 0:n.farmsPoolAddress,Y,h)},U=()=>{r(`/position-detail/${i==null?void 0:i.posId}`,{replace:!0}),setTimeout(()=>{j(u==null?void 0:u.address,i==null?void 0:i.posId,!0)},2e3)},W=async()=>{F(i==null?void 0:i.id,i==null?void 0:i.farmsPool,Y,U)},ge=()=>{setTimeout(()=>{w([i])},2e3)},re=async()=>{Q(i==null?void 0:i.id,i==null?void 0:i.farmsPool,ge)},I=g.useMemo(()=>(y==null?void 0:y.length)>0?y.reduce((l,d)=>Te(l).plus(d==null?void 0:d.display_amount_owed).toString(),"0"):"0",[y,u==null?void 0:u.address,c,m]);return t.jsx(t.Fragment,{children:((n==null?void 0:n.farmsPoolAddress)||Te(I).gt(0))&&t.jsxs(Ne,{w:"100%",children:[t.jsxs(ae,{w:"100%",zIndex:"1",p:{base:"12px 8px",lg:"12px 16px"},bgImage:Di,bgSize:"100% 100%",justify:"space-between",children:[t.jsxs(Ne,{align:"flex-start",children:[t.jsxs(ae,{children:[t.jsx(hi,{src:"/images/icon_farms.png",w:"24px",h:"24px"}),t.jsx(K,{color:"primary_yellow",fontSize:"20px",children:"Farming"})]}),t.jsx(K,{color:"primary_yellow",fontSize:"14px",children:"Stake Position to Earn"})]}),t.jsxs(ae,{gap:"4px",bg:"primary_yellow_opacity.10",p:"12px 16px",borderRadius:"100px",children:[t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:"APR"}),t.jsx(K,{color:"primary",fontSize:"12px",fontWeight:"500",children:t.jsx(Yi,{poolInfo:n,isPosition:!0,showAprSize:"12px"})}),t.jsxs(ae,{gap:"4px",cursor:"pointer",onClick:()=>r("/farms"),sx:{_hover:{p:{color:"text_caption"},svg:{fill:"text_caption"}}},children:[t.jsx(K,{fontSize:"12px",ml:"8px",fontWeight:"500",children:"View"}),t.jsx(Vi,{boxW:"14px",boxH:"14px",xlinkHref:"#icon-icon_list_token"})]})]})]}),t.jsxs(ti,{mt:"-20px",bg:"bg_six",p:{base:"28px 8px 12px",lg:"28px 16px 16px"},zIndex:"0",borderRadius:"0 0 12px 12px",borderTop:"none",children:[t.jsx(K,{children:"Farming Rewards"}),t.jsx(ae,{w:"100%",flexWrap:"wrap",children:(y==null?void 0:y.length)>0&&Te(I).gt(0)?y==null?void 0:y.map(l=>{var d;return t.jsx(bi.Fragment,{children:Te(l==null?void 0:l.display_amount_owed).gt(0)&&t.jsx(Qe,{coinType:(d=l==null?void 0:l.token)==null?void 0:d.coin_type,amount:l==null?void 0:l.display_amount_owed,tokenInfo:l==null?void 0:l.token,boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)},l==null?void 0:l.rewarder_type)}):(V==null?void 0:V.length)>0?V==null?void 0:V.map(l=>t.jsx(Qe,{coinType:l==null?void 0:l.coinType,amount:"0",boxStyle:{mt:"16px",w:"calc(50% - 4px) "},textAlign:"left"},l==null?void 0:l.coinType)):t.jsx(K,{textColor:"text_caption",textAlign:"right",mt:"8px",children:"--"})}),t.jsxs(ae,{w:"100%",justify:"space-between",mt:"16px",children:[(i==null?void 0:i.posType)=="farms"&&t.jsx(he,{disabled:c||m,isLoading:m,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:W,children:"Unstake"}),(i==null?void 0:i.posType)=="clmm"&&!$&&t.jsx(we,{w:"50%",sx:{">button":{w:"100%"}},children:t.jsx(Wi,{placement:"top",tooltip:t.jsx(K,{fontSize:"12px",lineHeight:"20px",w:"200px",children:"Farming rewards are only available for active positions."}),children:t.jsx(we,{w:"100%",children:t.jsx(he,{disabled:!0,h:"40px",w:"100%",fontSize:"14px",children:"Stake"})})})}),(i==null?void 0:i.posType)=="clmm"&&$&&t.jsx(he,{disabled:c||m,isLoading:m,h:"40px",w:"50%",fontSize:"14px",onClick:b,children:"Stake"}),t.jsx(he,{disabled:c||m||Te(O).eq(0),isLoading:c,variant:"outline",h:"40px",w:"50%",fontSize:"14px",onClick:re,children:"Claim rewards"})]})]})]})})}function Bi({action:i,haveZap:p,resetInputAmount:T}){const{useZapIn:e,setUseZapIn:C}=_e(),{setZapAmount:n,setPreDepositeData:u}=Pe(),j=()=>{T==null||T(),C(!e),n("")};return g.useEffect(()=>{C(!1),u(void 0)},[i]),t.jsxs(ae,{w:"100%",justify:"space-between",align:"center",mb:"16px",children:[t.jsx(K,{color:"primary_gray",fontSize:"14px",children:i==="Withdraw"?"Remove Amounts":"Deposit Amounts"}),t.jsx(_i,{action:i,value:e,onChange:j})]})}function Ii(){const{clmmSdk:i}=Ei(),{peripherySdk:p}=Zi(),{slippage:T}=Be();return{getRemoveTsPayload:async n=>{const{posId:u,poolAddress:j,coinTypeA:w,coinTypeB:H,amountA:Y,amountB:X,liquidity:$,lowerTick:y,upperTick:V,posType:O,rewarderCoinTypes:S,farmsPoolId:F,farmsPosId:Q}=n,m=a(Y).mul(a(1).sub(a(T))),c=a(X.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getRemoveTsPayload ~ minAmountA:",m,c),O==="clmm"){const r={coinTypeA:w,coinTypeB:H,pool_id:j,pos_id:u,delta_liquidity:$,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_fee:!0,rewarder_coin_types:S};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",r);const h=await i.Position.removeLiquidityTransactionPayload(r),b={action:fe.DecreaseLiquidity,txbParams:r};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",h,b),{tx:h,msafeParams:b}}else{const r={pool_id:F||"",coinTypeA:w,coinTypeB:H,position_nft_id:Q||"",clmm_pool_id:j,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_rewarder:!1,clmm_rewarder_types:S,delta_liquidity:$,unstake:!1,close_position:!1};console.log("ðŸš€ ~ getRemoveTsPayload ~ parameter:",r);const h=await p.Farms.removeLiquidityPayload(r),b={action:"FarmingDecreaseLiquidity",txbParams:r};return console.log("ðŸš€ ~ getRemoveTsPayload ~ msafeParams:",b,h),{tx:h,msafeParams:b}}},getCloseTsPayload:async n=>{const{posId:u,poolAddress:j,coinTypeA:w,coinTypeB:H,amountA:Y,amountB:X,liquidity:$,lowerTick:y,upperTick:V,posType:O,rewarderCoinTypes:S,farmsPoolId:F,farmsPosId:Q}=n,m=a(Y).mul(a(1).sub(a(T))),c=a(X.toString()).mul(a(1).sub(a(T)));if(console.log("ðŸš€ ~ getCloseTsPayload ~ minAmountA:",n,m.toString(),c.toString()),console.log("ðŸš€ ~ getCloseTsPayload ~ parameter.rewarderCoinTypes:",S),O==="clmm"){const r={coinTypeA:w,coinTypeB:H,pool_id:j,pos_id:u||"",min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",rewarder_coin_types:S,collect_fee:!1};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",r);const h=await i.Position.closePositionTransactionPayload(r),b={action:fe.RemoveLiquidity,txbParams:r};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",h,b),{tx:h,msafeParams:b}}else{const r={pool_id:F||"",coinTypeA:w,coinTypeB:H,position_nft_id:Q||"",clmm_pool_id:j,min_amount_a:le(m.toString(),0)||"",min_amount_b:le(c.toString(),0)||"",collect_fee:!0,collect_rewarder:!0,clmm_rewarder_types:S,delta_liquidity:$,unstake:!0,close_position:!0,clmm_position_id:u};console.log("ðŸš€ ~ getCloseTsPayload ~ parameter:",r);const h=await p.Farms.removeLiquidityPayload(r),b={action:fe.FarmingRemoveLiquidity,txbParams:r};return console.log("ðŸš€ ~ getCloseTsPayload ~ msafeParams:",b,h),{tx:h,msafeParams:b}}}}}function et(){const{transactionConfirmation:i}=qi(),{getTokenAmountValue:p}=Ui(),{getCoinAmountFromLiquidity:T}=Mi(),{currentPosBaseInfo:e,posLiquidityData:C,posRewardsData:n,setPosBaseList:u,posApiPoolData:j}=Ve(),{getCurrentPosBaseInfo:w}=ei(),{preAdd:H}=Ji(),{getRemoveTsPayload:Y,getCloseTsPayload:X}=Ii(),{getTokenALock:$,getTokenBLock:y}=Ie(),{setTokenAmountAfterA:V,setTokenAmountAfterB:O,currentPosPoolInfo:S,currentPoolSqrtPrice:F,setIsFixedDisplayTokenA:Q,slideValue:m,setSlideValue:c,isFixedDisplayTokenA:r,isPosDetailRefresh:h,currentPosDetailTab:b,useZapIn:U,curPosContractPoolInfo:W}=_e(),{getZapWithdrawToastInfo:ge,getZapWithdrawTx:re,reCalculateZapData:I}=vi("Withdraw"),{getContractPoolInfo:l}=Ri(),{preDepositeData:d,currentZapToken:ee,setZapAmount:J,zapAmount:de}=Pe(),{currentApiPoolInfo:k}=Qi(e,j),te=n[e==null?void 0:e.posId],{mevProtect:oi,maxCapForGas:li,transactionMode:ai,customGasPrice:si}=Be(),[_,E]=g.useState(""),[v,Z]=g.useState(""),[ni,pe]=g.useState(!1),[ve,Re]=g.useState(""),D=e==null?void 0:e.displayTokenA,P=e==null?void 0:e.displayTokenB,z=C[e==null?void 0:e.posId],M=Se(z==null?void 0:z.displayCoinAmountA,void 0,!0),f=Se(z==null?void 0:z.displayCoinAmountB,void 0,!0),di=p(D==null?void 0:D.coin_type,_),pi=p(P==null?void 0:P.coin_type,v);g.useEffect(()=>{if(+_||+v){const o=+_,s=+v;V(a(+M).sub(o).toString()),O(a(f).sub(s).toString())}else V(""),O("")},[_,v]);const[Ce,ue]=g.useState(""),We=g.useRef("");g.useEffect(()=>{console.log("ðŸš€ ~ usePosRemovePage ~ uuid:",Ce),We.current=Ce},[Ce]);const be=()=>{E(""),Z(""),pe(!1),ue(""),c("--")},Ee=g.useMemo(()=>$(e,W),[W==null?void 0:W.current_tick_index,e]),Ze=g.useMemo(()=>y(e,W),[W==null?void 0:W.current_tick_index,e]),je=e!=null&&e.isReverse?Ze:Ee,Le=e!=null&&e.isReverse?Ee:Ze,Ue=Gi((o,s,A)=>{var xe,ne;console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",o);const R=s?(xe=e==null?void 0:e.displayTokenA)==null?void 0:xe.decimals:(ne=e==null?void 0:e.displayTokenB)==null?void 0:ne.decimals,L=Hi(o,R),x=e==null?void 0:e.tokenA,q=e==null?void 0:e.tokenB,B=e==null?void 0:e.lowerTick,me=e==null?void 0:e.upperTick,N=e==null?void 0:e.isReverse,G={amount:L,tokenA:x,tokenB:q,isTokenA:N?!s:s,lowerTick:B,upperTick:me,curSqrtPrice:F,isReverse:N,roundUp:!1};console.log("ðŸš€ ~ debouncedPreCalculate ~ params:",G);const{displayCoinAmountA:oe,displayCoinAmountB:ke,liquidityAmount:se}=H(G);if(console.log("ðŸš€ ~ debouncedPreCalculate:",oe,ke,G,s,A),We.current===A){Re(se),console.log("ðŸš€ ~ debouncedPreCalculate ~ liquidityAmount:",ve,se);const ye=Je(a(se).div(e==null?void 0:e.liquidity).mul(100).toNumber(),2,!0);a(ye).gt(100)||a(ye).eq(100)?(c(100),E(M),Z(f)):(c(ye),s?Z(ke||""):E(oe||""))}else be();pe(!1)},500),[Ge,He]=g.useState(!1),qe=()=>{if((_||v)&&Xi(e)){if(console.log("ðŸš€ ~ reCalculateResult ~ isFixedDisplayTokenA:",Ge,m),m==="--")return;if(Ge||Number(m)==100)Xe(Number(m));else{console.log("ðŸš€ ~ reCalculateResult ~ currentPosBaseInfo:",e);const o=r?_:v;if(+o){const s=Oe();ue(s),Ue(o,r,s)}}}};g.useEffect(()=>{b=="remove"&&(console.log("ðŸš€ ~ usePosRemovePage ~ tokenABalance, tokenBBalance:",h,M,f),qe())},[M,f]);const mi=(o,s)=>{if(console.log("ðŸš€ ~ h111andleAmountChange ~ amount:",o),He(!1),Re(""),!o){be();return}if(pe(!0),Q(s),s){if(E(o),a(o).eq(M)){Z(f),c(100),ue(""),pe(!1);return}}else if(Z(o),a(o).eq(f)){E(M),c(100),ue(""),pe(!1);return}if(console.log("ðŸš€ ~ handleAmountChange ~ amount:",o,+o),+o){const A=Oe();ue(A),console.log("ðŸš€ ~ handleAmountChange ~ params:",o),Ue(o,s,A)}else pe(!1),s?Z(""):E("")},Xe=o=>{var s;if(He(!0),console.log("ðŸš€ ~ changeSlideFun ~ changeSlideFun:",M,f,o),U){const R=((s=k==null?void 0:k.tokenA)==null?void 0:s.coin_type)===(ee==null?void 0:ee.coin_type)?ze:Me;if(o===100)J(R);else{const L=a(R).mul(a(o).div(100)).toString();J(L)}}else if(o==100)E(M),Z(f);else{const A=e==null?void 0:e.tokenA,R=e==null?void 0:e.tokenB,L=Se(a(e==null?void 0:e.liquidity).mul(o).div(100).toString()||"0",0,!0);console.log("ðŸš€ ~ changeSlideFun ~ liquidity1111111:",e==null?void 0:e.liquidity,L);const x=e==null?void 0:e.lowerTick,q=e==null?void 0:e.upperTick,B=e==null?void 0:e.isReverse,me={tokenA:A,tokenB:R,liquidity:L,currentSqrtPrice:F,lowerTick:x,upperTick:q,roundUp:!1};try{const{amountA:N,amountB:ce}=T(me);Re(L);const G=B?ce:N,oe=B?N:ce;console.log("ðŸš€ ~ changeSlideFun ~  coinAmountA, coinAmountB:",N,ce),E(a(G).gt(0)?G:""),Z(a(oe).gt(0)?oe:"")}catch(N){console.log("ðŸš€ ~ changeSlideFun ~ error:",N),E(""),Z("")}}},{currentAccount:ie}=ii(),ci=g.useMemo(()=>{const o={text:"Remove",disabled:!1};return ie!=null&&ie.address?!+_&&!+v?(o.text="Enter an amount",o.disabled=!0,o):!je&&_&&a(_).gt(M||0)||!Le&&v&&a(v).gt(f||0)?(o.disabled=!0,o.text="Invalid Amount",o):((e==null?void 0:e.posType)=="burn"&&(o.disabled=!0),o):(o.text="Connect Wallet",o.disabled=!1,o)},[_,v,M,f,ie==null?void 0:ie.address]),{signAndExecuteTransaction:gi}=Fi(),{fetchAccountBalance:ri}=fi(),[ui,Fe]=g.useState(!1),xi=De(),yi=async()=>{var A,R,L;Fe(!0);const o=m==100;console.log("ðŸš€ ~ toRemove ~ currentPosRewardsData:",te),console.log("ðŸš€ ~ toRemove ~ currentPosPoolInfo?.miningRewardList:",S==null?void 0:S.miningRewardList);const s=o?!te||(te==null?void 0:te.length)==0?(A=(S==null?void 0:S.miningRewardList)||[])==null?void 0:A.reduce((x,q)=>(x.push(q.coinType),x),[]):(R=te||[])==null?void 0:R.reduce((x,q)=>(x.push(q.coin_address),x),[]):(L=te||[])==null?void 0:L.reduce((x,q)=>(a(q==null?void 0:q.amount_owed).gt(0)&&x.push(q.coin_address),x),[]);console.log("ðŸš€ ~ toRemove ~ rewarderCoinTypes:",s);try{let x,q,B;if(U){const N=(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId;B=ge(je,Le),i(B),x=await re(N,e==null?void 0:e.liquidity,e==null?void 0:e.lowerTick,e==null?void 0:e.upperTick,s,(e==null?void 0:e.posType)=="farms")}else{const N=e!=null&&e.isReverse?a(v).mul(Ae.pow(10,P.decimals)).toString():a(_).mul(Ae.pow(10,D.decimals)).toString(),ce=e!=null&&e.isReverse?a(_).mul(Ae.pow(10,D.decimals)).toString():a(v).mul(Ae.pow(10,P.decimals)).toString();console.log("ðŸš€ ~ toAdd ~ rewarderCoinTypes:",S,te,s);const G={posId:(e==null?void 0:e.posType)=="farms"?e==null?void 0:e.id:e==null?void 0:e.posId,poolAddress:e==null?void 0:e.clmmPool,coinTypeA:e==null?void 0:e.coinTypeA,coinTypeB:e==null?void 0:e.coinTypeB,amountA:N,amountB:ce,liquidity:ve,lowerTick:e==null?void 0:e.lowerTick,upperTick:e==null?void 0:e.upperTick,posType:e==null?void 0:e.posType,rewarderCoinTypes:s};(e==null?void 0:e.posType)=="farms"&&(G.farmsPoolId=e==null?void 0:e.farmsPool,G.farmsPosId=e==null?void 0:e.id),B={getShowInfo:(ke,se)=>{const xe="Remove "+[$e(_,D==null?void 0:D.symbol),$e(v,P==null?void 0:P.symbol)].filter(Boolean).join(" and "),ne={modalDescriptionText:xe,toastTitleText:xe};if(ke==="success"){let ye=_,Ti=v;se&&(ye=Ye(se,D)||_,Ti=Ye(se,P)||v),ne.toastDescriptionContent="",ne.modalDescriptionText="",ne.toastTitleText="Remove Liquidity Successful"}return ne}},i(B),console.log("ðŸš€ ~ toAdd ~ params:",ve,o,m,G);const oe=o?await X(G):await Y(G);x=oe.tx,q=oe.msafeParams}const me=await gi(x,B,{useMev:oi,useFastMode:ai==="Fast Mode",maxCapForGas:li,customGasPrice:si,msafeParams:q});console.log("ðŸš€ ~ toClaim ~ res:",me),me?(ri(),be(),J(""),o?(u([]),xi("/pools?tab=positions")):w(ie==null?void 0:ie.address,e==null?void 0:e.id,!0)):e!=null&&e.clmmPool&&l(e==null?void 0:e.clmmPool).then(N=>{console.log("ðŸš€ ~ toClaim ~ res:",N),U?I():qe()}),Fe(!1)}catch(x){qe(),Fe(!1),console.log("ðŸš€ ~ toClaim ~ error:",x)}};g.useMemo(()=>{if(e!=null&&e.posId){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,A=e==null?void 0:e.liquidity,R=e==null?void 0:e.lowerTick,L=e==null?void 0:e.upperTick;T({tokenA:o,tokenB:s,liquidity:A,currentSqrtPrice:F,lowerTick:R,upperTick:L,roundUp:!1})}},[e==null?void 0:e.posId,F]);const{onlyAmountA:ze,onlyAmountB:Me}=g.useMemo(()=>({onlyAmountA:z==null?void 0:z.onlyAmountA,onlyAmountB:z==null?void 0:z.onlyAmountB}),[z]);return g.useEffect(()=>{var o;if(U)if(de){const A=((o=k==null?void 0:k.tokenA)==null?void 0:o.coin_type)===(ee==null?void 0:ee.coin_type)?ze:Me;if(A){const R=Je(a(de).div(A).mul(100).toString(),2,!0);c(R)}else c("--")}else c("--");else c("--")},[U,de]),g.useEffect(()=>{if(b!=="increase"&&U){if(console.log("ðŸš€ ~ usePosRemovePage111 ~ preDepositeData:",d),d!=null&&d.amount_a||d!=null&&d.amount_b){const o=e==null?void 0:e.tokenA,s=e==null?void 0:e.tokenB,A=Ke(d==null?void 0:d.amount_a,o==null?void 0:o.decimals),R=Ke(d==null?void 0:d.amount_b,s==null?void 0:s.decimals);if(m==100)E(String(M)),Z(String(f));else{const L=e!=null&&e.isReverse?R:A,x=e!=null&&e.isReverse?A:R;E(a(L).gt(M)?String(M):L),Z(a(x).gt(f)?String(f):x)}return}E(""),Z("")}},[U,d,m]),g.useEffect(()=>{E(""),Z("")},[]),{tokenAmountA:_,tokenAmountB:v,resetInputAmount:be,showDisplayTokenALock:je,showDisplayTokenBLock:Le,currentPosLiquidityData:z,tokenABalance:M,tokenBBalance:f,displayTokenA:D,displayTokenB:P,tokenAmountValueA:di,tokenAmountValueB:pi,preRemoveLoading:ni,handleAmountChange:mi,btnStatusText:ci,changeSlideFun:Xe,toRemove:yi,isRemoveLoading:ui,onlyAmountA:ze,onlyAmountB:Me,currentApiPoolInfo:k,currentPoolSqrtPrice:F}}function Tt(){var de;const{currentPosBaseInfo:i,posPoolsRelatedData:p,posApiPoolData:T}=Ve(),{isFixedDisplayTokenA:e,slideValue:C,setSlideValue:n,curPosContractPoolInfo:u,useZapIn:j,currentPosPoolInfo:w}=_e(),{tokenAmountA:H,tokenAmountB:Y,tokenABalance:X,tokenBBalance:$,displayTokenA:y,displayTokenB:V,tokenAmountValueA:O,tokenAmountValueB:S,preRemoveLoading:F,handleAmountChange:Q,changeSlideFun:m,btnStatusText:c,toRemove:r,isRemoveLoading:h,showDisplayTokenALock:b,showDisplayTokenBLock:U,resetInputAmount:W,onlyAmountA:ge,onlyAmountB:re,currentApiPoolInfo:I,currentPoolSqrtPrice:l,currentPosLiquidityData:d}=et();g.useEffect(()=>()=>{W()},[]);const ee=k=>{console.log("ðŸš€ ~ changeSlideValue ~ value:",k),k=="MAX"||k==100?(n(100),m(100)):(n(Number((k+"").split("%")[0])),m(Number((k+"").split("%")[0])))};g.useEffect(()=>n("--"),[]);const J=p[i==null?void 0:i.posId];return t.jsxs(Ne,{w:"100%",gap:"8px",children:[t.jsxs(we,{w:"100%",position:"relative",bg:"bg_six",p:{base:"8px",lg:"16px"},border:"1px solid",borderColor:"border",borderRadius:"16px",children:[(I==null?void 0:I.haveZap)&&(i==null?void 0:i.posType)!=="burn"&&!b&&!U&&t.jsx(Bi,{action:"Withdraw",resetInputAmount:W}),j?t.jsx(Ci,{action:"Withdraw",apiPoolInfo:I,currentSqrtPrice:l,onlyAmountA:ge,onlyAmountB:re,liquidity:i==null?void 0:i.liquidity,lowerTick:i==null?void 0:i.lowerTick,upperTick:i==null?void 0:i.upperTick,slideValue:String(C),currentPosLiquidityData:d,changeSlideValue:ee}):t.jsx(t.Fragment,{children:t.jsx(Ki,{from:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:X||"",value:H,amountValue:O,loading:!e&&F,onChange:k=>{Q(k,!0)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:y,half:!1,lock:{isLock:i&&u&&b,style:{borderRadius:"12px"}}},to:{wrapStyle:{h:"108px",borderRadius:"12px"},balance:$||"",value:Y,amountValue:S,loading:e&&F,onChange:k=>{Q(k,!1)},needRemainBalance:!1,placeholder:"0.0",balanceLabel:"Available",token:V,half:!1,lock:{isLock:i&&u&&U,style:{borderRadius:"12px"}}},lock:{isLock:!i||!u||i&&(i==null?void 0:i.posType)=="burn",text:i&&(i==null?void 0:i.posType)=="burn"?"Your liquidity has been permanently locked":void 0,style:{h:"224px",borderRadius:"12px"}}})}),(i==null?void 0:i.posType)!=="burn"&&t.jsxs(ti,{borderRadius:"12px",p:"16px",mt:"8px",children:[t.jsx(K,{color:"primary_gray",children:"Amount"}),t.jsx(it,{percentage:C,onChange:k=>ee(k)})]})]}),j?t.jsx(ji,{action:"Withdraw",onClick:r,hideDepositRatio:!0,otherLoading:h}):t.jsx(he,{isLoading:h,onClick:r,disabled:c.disabled||h,w:"100%",h:"56px",fontSize:"20px",fontWeight:"500",children:c.text}),(i==null?void 0:i.posType)!=="burn"&&(w==null?void 0:w.farmsRewarderList)&&((de=w==null?void 0:w.farmsRewarderList)==null?void 0:de.length)>0&&t.jsx(Pi,{}),J&&(J==null?void 0:J.minPrice)!=="0"&&(J==null?void 0:J.maxPrice)!=="âˆž"&&t.jsx(Li,{subscriptionSource:"PositionDetail"})]})}function it(i){const{percentage:p,onChange:T}=i,e=g.useMemo(()=>(console.log("ðŸš€ ~ PositionSlider ~ percentage:",p),Number(p)!==100?`${p}%`:"MAX"),[p]),C=[{label:"25%"},{label:"50%"},{label:"75%"},{label:"MAX"}];return t.jsxs(we,{children:[t.jsxs(ae,{w:"100%",justifyContent:"space-between",m:"10px 0",children:[t.jsxs(K,{w:"84px",fontSize:"24px",color:"text_caption",children:[p=="--"?"--":a(p).gt(0)&&Number(p)<.01?"<0.01":Se(p,2),"%"]}),t.jsx($i,{type:"outlineTab",tabList:C,currentTab:e,handleChangeTab:n=>{n.label==="MAX"?T(100):T(n.label.replace("%",""))},wrapStyle:{w:{base:"220px",lg:"300px"},h:"32px",p:"3px",borderRadius:"8px"},itemStyle:{flex:"1",fontSize:"14px",margin:"0px"}})]}),t.jsxs(ki,{"aria-label":"slider-ex-1",min:0,max:100,focusThumbOnChange:!1,value:p=="--"?0:Number(p),onChange:n=>T(n+"%"),children:[t.jsx(Ai,{children:t.jsx(Si,{})}),t.jsx(wi,{})]})]})}export{Pi as F,it as P,Tt as R,Bi as T,Qi as u};
//# sourceMappingURL=RemoveBlock-DJWHB9hn.js.map
