import{bC as ts,s as w,d as e,am as is,i as cs,r as us,a0 as W,D as o,a2 as ss}from"./index-DZworFuu.js";import"./vendor-_1sPVx0S.js";const gs="/v2/sui/stats_pools",_s="/v3/sui/clmm/pool_price_range",vs="/v2/sui/pool/history",hs="/v2/sui/histogram/all",ys="/v2/sui/histogram",As="/v3/sui/clmm/histogram",Ds="/v2/sui/statistics",bs="/v2/sui/statistics_pools",Ps="/market/clmm/prices",Ss="/v2/sui/current_tx",ws="/dca/quote_config",Ts="/dca/quote",Fs="/v2/sui/dca/query_event_list",Es="/v2/sui/limit_order",Ls="/router_v2/status",Ms="/v3/sui/vaults/unstable/tvl/histogram",xs="/v3/sui/vaults/unstable/pricerange/histogram",Rs="/v3/sui/vaults/unstable/LPFee/histogram",O=(t,a)=>{if(!t||(t==null?void 0:t.length)<1)return a?"0%":"0";const A=t.reduce((g,c)=>{const d=c?String(c):"0",_=ts(d);return g.add(_)},e(0));return a?e(A).gt(1e4)?">1,000,000%":w(A.mul(100).toString(),"%"):A.toString()},$=(t,a,A)=>{if(!t)return a?"0%":"0";if(t==="--")return"--";const s=ts(t);return A&&e(s).gt(100)?">10,000%":a?w(e(s).mul(100).toString(),"%"):s},Hs=t=>`${e(t).mul(100).toString()}%`,Us=(t,a)=>{const A=cs(t,a);return us(A.toString(),a)},$s=t=>{const a=new Date(t).getDate();return a<10?`0${a}`:String(a)},fs=t=>{var a;return is((a=e(t))==null?void 0:a.mul(60*60*24).toString(),0)};function ks(){const t=s=>{var v,r,n;const g=s==null?void 0:s.has_mining;let c=e(0);const d=[],_=[];if(g){const i=((n=(r=(v=s==null?void 0:s.object)==null?void 0:v.rewarder_manager)==null?void 0:r.fields)==null?void 0:n.rewarders)||[],m=(s==null?void 0:s.rewarder_apr)||[];i==null||i.forEach((u,D)=>{var b,T,F,E,y;const f=e((b=u==null?void 0:u.fields)==null?void 0:b.emissions_per_second).mul(o.pow(2,-64)).toString();if(s!=null&&s[`rewarder_display${D+1}`]&&e(f).gt(0)){const P=$(m[D]);c=c.add(P);const S=(y=W((E=(F=(T=u==null?void 0:u.fields)==null?void 0:T.reward_coin)==null?void 0:F.fields)==null?void 0:E.name))==null?void 0:y.source_address;d.push({coinType:S,emissionsEveryDay:fs(f)}),_.push({coinType:S,apr:P,aprDisplay:$(P,!0)})}})}return{haveMining:g&&d.length>0,miningRewardList:d,miningAprList:_,miningAprTotal:c.toString()}},a=s=>{var b,T,F,E,y,P,S,k,V,M,x,j,L,q;const g=(s==null?void 0:s.is_forward)===!1,c=!!(s!=null&&s.stable_farming&&((b=s==null?void 0:s.stable_farming)!=null&&b.show_rewarder_1||(T=s==null?void 0:s.stable_farming)!=null&&T.show_rewarder_2||(F=s==null?void 0:s.stable_farming)!=null&&F.show_rewarder_3)&&((E=s==null?void 0:s.stable_farming)!=null&&E.stable_rewarder)),d=[];let _="",v="",r="",n="",i=0,m=0,u="",D="",f=e(0);if(c){_=(y=s==null?void 0:s.stable_farming)==null?void 0:y.stable_farming_pool;const R=(P=s==null?void 0:s.stable_farming)==null?void 0:P.stable_rewarder;R==null||R.forEach((h,N)=>{const U=e(h==null?void 0:h.amount_second);if(s!=null&&s.stable_farming[`show_rewarder_${N+1}`]&&U.gt(0)){const Z=$(h==null?void 0:h.apr);f=f==null?void 0:f.add(Z),d.push({coinType:W(h.coin).source_address,emissionsEveryDay:U.mul(86400).toDP(2,o.ROUND_HALF_UP).toString()})}}),v=(S=s==null?void 0:s.stable_farming)==null?void 0:S.tvl,r=w((k=s==null?void 0:s.stable_farming)==null?void 0:k.tvl,"$"),n=w(e(f).mul(100).toString(),"%",2,!0),i=(V=s==null?void 0:s.stable_farming)==null?void 0:V.effective_tick_lower,m=(M=s==null?void 0:s.stable_farming)==null?void 0:M.effective_tick_upper;const I=ss.tickIndexToPrice(i,(x=s==null?void 0:s.coin_a)==null?void 0:x.decimals,(j=s==null?void 0:s.coin_b)==null?void 0:j.decimals).toString(),H=ss.tickIndexToPrice(m,(L=s==null?void 0:s.coin_a)==null?void 0:L.decimals,(q=s==null?void 0:s.coin_b)==null?void 0:q.decimals).toString();u=g?e(1).div(H).toString():I,D=g?e(1).div(I).toString():H}return{haveFarming:c,farmsRewarderList:d,farmsApr:f.toString(),farmingAprDisplay:n,farmsStatedTvl:v,farmsStatedTvlDisplay:r,farmsEffectiveTickLower:i,farmsEffectiveTickUpper:m,displayFarmsEffectMinPrice:u,displayFarmsEffectMaxPrice:D,farmsPoolAddress:_}};return{wrapPoolData:(s,g=!1)=>{var J,K,X,Y,B,l,p;const c=s==null?void 0:s.object,d=(J=s==null?void 0:s.object)==null?void 0:J.index,_=s.address,v=(s==null?void 0:s.is_forward)===!1,r={...s==null?void 0:s.coin_a,coin_type:(X=W((K=s==null?void 0:s.coin_a)==null?void 0:K.address))==null?void 0:X.source_address},n={...s==null?void 0:s.coin_b,coin_type:(B=W((Y=s==null?void 0:s.coin_b)==null?void 0:Y.address))==null?void 0:B.source_address},i=v?n:r,m=v?r:n,u=`${i==null?void 0:i.symbol} - ${m==null?void 0:m.symbol}`,D=e(s.fee).mul(1e4).toString(),f=e(s.fee).mul(100).toString()+"%",b=s==null?void 0:s.tick_spacing,T=w(s.pure_tvl_in_usd||0),F=w(s.vol_in_usd_24h||0),E=w(s.fee_24_h||0),y=$((l=s==null?void 0:s.apr)==null?void 0:l.fee_apr_24h),P=$((p=s==null?void 0:s.apr)==null?void 0:p.fee_apr_24h,!0),{haveMining:S,miningRewardList:k,miningAprList:V,miningAprTotal:M}=t(s),{haveFarming:x,farmsRewarderList:j,farmsApr:L,farmingAprDisplay:q,farmsStatedTvl:R,farmsStatedTvlDisplay:I,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z}=a(s),C=O([y,M]),as=e(C).gt(1e4)?">1,000,000%":w(e(C).mul(100).toString(),"%"),es=O([C,L]),rs=O([y,L],!0),ns=O([C,L],!0),Q=s.is_vaults,z=!Q&&s.vaults&&s.vaults.length>0,G=s.vaults&&s.vaults.length>0&&s.vaults[s.vaults.length-1];return g?{poolAddress:_,name:u,isReverse:v,tokenA:r,tokenB:n,displayTokenA:i,displayTokenB:m,haveMining:S,miningRewardList:null,miningAprList:null,haveFarming:x,farmsRewarderList:null,farmsApr:"--",farmingAprDisplay:"--",feeApr:"--",feeAprDisplay:"--",miningAprTotal:"--",feeAndMiningAprDisplay:"--",totalAprDisplay:"--",feeRate:D,fee:s.fee,feeDisplay:f,tvlDisplay:"--",tvl:"--",volume24Display:"--",fees24Display:"--",isVaults:Q,isLocalData:g,farmsStatedTvl:"--",farmsStatedTvlDisplay:"--",feeAndFarmsApr:"--",feeAndFarmsAprDisplay:"--",farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z,tickSpacing:b,index:d,object:c,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:z,vaultId:G}:{poolAddress:_,name:u,isReverse:v,tokenA:r,tokenB:n,displayTokenA:i,displayTokenB:m,haveMining:S,miningRewardList:k,miningAprList:V,haveFarming:x,farmsRewarderList:j,farmsApr:L,farmingAprDisplay:q,feeApr:y,feeAprDisplay:P,miningAprTotal:M,feeAndMiningAprDisplay:as,totalAprDisplay:ns,fee:s.fee,feeRate:D,feeDisplay:f,tvlDisplay:T,tvl:s.pure_tvl_in_usd||0,volume24Display:F,fees24Display:E,isVaults:Q,farmsStatedTvl:R,farmsStatedTvlDisplay:I,feeAndFarmsApr:es,feeAndFarmsAprDisplay:rs,farmsEffectiveTickLower:H,farmsEffectiveTickUpper:h,displayFarmsEffectMinPrice:N,displayFarmsEffectMaxPrice:U,farmsPoolAddress:Z,tickSpacing:b,index:d,object:c,haveZap:(r==null?void 0:r.is_trusted)&&(n==null?void 0:n.is_trusted)&&s.pure_tvl_in_usd>1e4,isUnstableVault:z,vaultId:G}}}}export{Fs as D,As as H,Es as L,_s as P,bs as S,Ss as T,xs as V,$ as a,O as b,Ps as c,Us as d,ws as e,Hs as f,Ts as g,Ds as h,vs as i,hs as j,ys as k,$s as l,Ms as m,Rs as n,gs as o,Ls as p,ks as u};
//# sourceMappingURL=useWrapPoolData-CDrg47b6.js.map
