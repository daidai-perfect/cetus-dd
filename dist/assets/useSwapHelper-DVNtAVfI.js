import{u as H}from"./useToken-CSCz_gGn.js";import{$ as i,v as U}from"./index-DkhaBol7.js";import{a as _}from"./vendor-BowHGuwE.js";import{u as G}from"./global-BC-faoA7.js";import{u as N}from"./useGetPoolList-_YHw7VK4.js";var h=(t=>(t.CETUS="CETUS",t.KRIYA="KRIYA",t.KRIYAV3="KRIYAV3",t.FLOWX="FLOWX",t.FLOWXV3="FLOWXV3",t.AFTERMATH="AFTERMATH",t.METASTABLE="METASTABLE",t.HAEDAL="HAEDAL",t.VOLO="VOLO",t.AFSUI="AFSUI",t.DEEPBOOKV3="DEEPBOOKV3",t.SCALLOP="SCALLOP",t.BLUEMOVE="BLUEMOVE",t.TURBOS="TURBOS",t.SPRINGSUI="SPRINGSUI",t.BLUEFIN="BLUEFIN",t.HAEDALPMM="HAEDALPMM",t.ALPHAFI="ALPHAFI",t.STEAMM="STEAMM",t.STEAMM_OMM="STEAMM_OMM",t.STEAMM_OMM_V2="STEAMM_OMM_V2",t.OBRIC="OBRIC",t.HAWAL="HAWAL",t.MOMENTUM="MOMENTUM",t))(h||{}),$=(t=>(t[t.CalculateError=1e4]="CalculateError",t[t.NumberTooLarge=10001]="NumberTooLarge",t[t.NoRouter=10002]="NoRouter",t[t.InsufficientLiquidity=10003]="InsufficientLiquidity",t[t.HoneyPot=10004]="HoneyPot",t))($||{}),K=(t=>(t.TradeInputPage="TradeInput",t.TradeStatus="TradeStatus",t.SelectTokenPage="SelectToken",t.TradeConfirmPage="TradeConfirm",t.RoutePage="Route",t.TradeSetting="TradeSetting",t.SlippageSetting="SlippageSetting",t))(K||{});function r(t=!0){const{poolApiMap:s,setPoolApiMap:a}=G(),{getPoolList:l,getLocalJsonPoolList:m,getLocalJsonPoolAddress:M}=N();return{getPoolListByCoinType:async(u,p)=>{if(u&&p){const L=[u,p].sort(),n=`${L[0]}_${L[1]}`,T=s[n];if(T)return T;const y={coin_type:`${u},${p}`,display_all_pools:!0,offset:0,limit:100,order_by:"-tvl",no_incentives:!0,has_farming:!0,has_mining:!0};let o=t?await m(y):void 0;(o===void 0||o.list.length===0)&&(o=await l(y));const e=o.list;if(e.length>0)return s[n]=e,a(n,e),e}return[]},getPoolAddressByCoinType:async(u,p)=>{if(u&&p){const L=[u,p].sort(),n=`${L[0]}_${L[1]}`;if(t){const o=await M(u,p);if(!o||o.length===0){const e=s[n];if(e)return e.map(c=>c.poolAddress)}else return o}const T={coin_type:`${u},${p}`,display_all_pools:!0,offset:0,limit:100,order_by:"-tvl",no_incentives:!0,has_farming:!0,has_mining:!0},y=await l(T);if(y){const o=y.list;if(o.length>0)return s[n]=o,a(n,o),o.map(e=>e.poolAddress)}}return[]}}}function J(t,s){return{priceAcceptRouterData:_.useMemo(()=>{if(s&&t){if(t.byAmountIn){if(!i(t.toAmountUi).eq(s.toAmountUi||"0"))return s}else if(!i(t.fromAmountUi).eq(s.fromAmountUi||"0"))return s;return}},[s,t])}}function W(t,s){return{amountLimit:_.useMemo(()=>{if(s&&s.routerData){const{byAmountIn:l,fromAmountUi:m,toAmountUi:M}=s;return l?i(M).mul(i(1).sub(i(t))).toString():i(m).mul(i(1).add(i(t))).toString()}},[t,s])}}function j(t){const{fetchTokenInfo:s}=H(),[a,l]=_.useState({}),m=async()=>{var M,I,E;if(t&&t.routerData){const u=[],p=t.byAmountIn?t.routerData.amountIn.toString():t.routerData.amountOut.toString(),L=[],n=[];let T=i(0);const y=((M=t==null?void 0:t.routerData)==null?void 0:M.routes)||[];for(let e=0;e<y.length;e++){const c=y[e],A={},B=t.byAmountIn?c.amountIn.toString():c.amountOut.toString();e===t.routerData.routes.length-1?A.percentage=i(1).sub(T).toFixed(2):A.percentage=i(B).div(p).toFixed(2),T=i(T).add(A.percentage);const F=[];for(let R=0;R<((I=c==null?void 0:c.path)==null?void 0:I.length);R++){const f=(E=c==null?void 0:c.path)==null?void 0:E[R];u.includes(f.provider)||u.push(f.provider);const O=U(f.from).full_address,S=U(f.target).full_address,d=await s([O,S]),V=d==null?void 0:d.get(O),P=d==null?void 0:d.get(S);V||n.includes(O)&&n.push(O),P||n.includes(S)&&n.push(S);const b=f.provider===h.SCALLOP||f.provider===h.FLOWX||f.provider===h.FLOWXV3;F.push({from_type:O,to_type:S,pool_address:b?"":f.id,fee_rate:f.feeRate,provider:f.provider})}A.paths=F,L.push(A)}if(n.length>0){const e=n==null?void 0:n.map(c=>c);await s(e)}const o={router_summery:`${t.routerData.routes.length} Streams`,providers:u,routers:L};l(o);return}l(void 0)};return _.useEffect(()=>{m()},[t]),{formatSwapRouter:a}}function k(){const{getPoolAddressByCoinType:t}=r(!0);return{getSwapPoolAddress:async(a,l)=>{if(a&&l){const m=await t(a.coin_type,l.coin_type);return console.log("ðŸš€ ~ getSwapPoolAddress ~ list:",m),m}return[]}}}function z(t,s){return _.useMemo(()=>t&&s&&+t&&+s?i(s).div(t).toString():"0",[t,s])}export{$ as A,K as S,h as a,W as b,J as c,z as d,k as e,j as u};
//# sourceMappingURL=useSwapHelper-DVNtAVfI.js.map
