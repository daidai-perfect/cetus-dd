{"version":3,"file":"usePositionList-CObkP_cm.js","sources":["../../src/store/position/index.ts","../../src/hooks/position/useGetFarmsPosRewards.ts","../../src/hooks/position/useGetPosApiPoolData.ts","../../src/hooks/position/useGetPosfees.ts","../../src/hooks/position/useGetPosLiquiditys.ts","../../src/hooks/position/useGetPosPools.ts","../../src/hooks/position/useGetPosRewards.ts","../../src/hooks/position/usePosHelper.ts","../../src/hooks/position/useWrapPosData.ts","../../src/hooks/position/usePositionList.ts"],"sourcesContent":["import { PoolApiInfo, PoolContractInfo, PosBaseInfo, PosFee, PosLiquidity, PosPoolsRelated, PosReward } from '@/types'\nimport { create, StateCreator } from 'zustand'\n\ninterface PositionState {\n  myPosYieldValue: string\n  setMyPosYieldValue: (data: string) => void\n\n  showPosListLength: string\n  setShowPosListLength: (data: string) => void\n\n  posBaseList: PosBaseInfo[]\n  setPosBaseList: (data: PosBaseInfo[]) => void\n  posBaseListLoading: boolean\n  setPosBaseListLoading: (value: boolean) => void\n\n  posBaseListGroupByPool: Record<string, PosBaseInfo & { list?: PosBaseInfo[] }>\n\n  posApiPoolData: Record<string, PoolApiInfo>\n  setPosApiPoolData: (data: Record<string, PoolApiInfo>) => void\n\n  fullRangePosBaseList: PosBaseInfo[]\n  setFullRangePosBaseList: (data: PosBaseInfo[]) => void\n  fullRangePosBaseListLoading: boolean\n  setFullRangePosBaseListLoading: (data: boolean) => void\n\n  posPoolsOriginalData: Record<string, PoolContractInfo>\n  setPosPoolOriginalData: (data: Record<string, PoolContractInfo>) => void\n\n  posPoolsRelatedData: Record<string, PosPoolsRelated>\n  setPosPoolsRelatedData: (data: Record<string, PosPoolsRelated>) => void\n  posPoolsRelatedDataLoading: boolean\n  setPosPoolsRelatedDataLoading: (value: boolean) => void\n\n  posPoolsRelatedDataGroupByPool: Record<string, any>\n\n  posLiquidityData: Record<string, any>\n  setPosLiquidityData: (data: Record<string, PosLiquidity>) => void\n  posLiquidityDataLoading: boolean\n  setPosLiquidityDataLoading: (value: boolean) => void\n\n  posRewardsData: Record<string, any>\n  setPosRewardsData: (data: Record<string, PosReward[]>) => void\n  posRewardsDataLoading: boolean\n  setPosRewardsDataLoading: (value: boolean) => void\n\n  farmsPosRewardsData: Record<string, any>\n  setFarmsPosRewardsData: (data: Record<string, PosReward[]>) => void\n  farmsPosRewardsDataLoading: boolean\n  setFarmsPosRewardsDataLoading: (value: boolean) => void\n\n  posFeeData: Record<string, any>\n  setPosFeeData: (data: Record<string, PosFee>) => void\n  posFeeDataLoading: boolean\n  setPosFeeDataLoading: (value: boolean) => void\n\n  currentPosBaseInfo: PosBaseInfo | null\n  setCurrentPosBaseInfo: (data: PosBaseInfo | null) => void\n  currentPosBaseInfoLoading: boolean\n  setCurrentPosBaseInfoLoading: (data: boolean) => void\n}\n\nconst store: StateCreator<PositionState> = (set, get) => ({\n  showPosListLength: '',\n  setShowPosListLength: (data: string) => {\n    set(() => ({\n      showPosListLength: data\n    }))\n  },\n  posApiPoolData: {},\n  setPosApiPoolData: (data: Record<string, PoolApiInfo>) => {\n    const originData = get().posApiPoolData\n    set(() => ({\n      posApiPoolData: { ...originData, ...data }\n    }))\n  },\n  myPosYieldValue: '',\n  setMyPosYieldValue: (data: string) => {\n    set(() => ({\n      myPosYieldValue: data\n    }))\n  },\n  posBaseList: [],\n  posBaseListGroupByPool: {},\n  setPosBaseList: (data: PosBaseInfo[]) => {\n    const groupedByClmmPool = data.reduce((result: any, item: PosBaseInfo) => {\n      if (!result[item.clmmPool]) {\n        result[item.clmmPool] = { list: [] }\n      }\n      if (!result[item.clmmPool]?.tokenA) {\n        result[item.clmmPool]['isReverse'] = item?.isReverse\n        result[item.clmmPool]['tokenA'] = item?.tokenA\n        result[item.clmmPool]['tokenB'] = item?.tokenB\n        result[item.clmmPool]['displayTokenA'] = item?.displayTokenA\n        result[item.clmmPool]['displayTokenB'] = item?.displayTokenB\n        result[item.clmmPool]['clmmPoolAddress'] = item.clmmPool\n      }\n      result[item.clmmPool]?.list?.push(item)\n      return result\n    }, {})\n    console.log('🚀 ~ file: index.ts:43 ~ groupedByClmmPool ~ groupedByClmmPool:', groupedByClmmPool)\n\n    set(() => ({\n      posBaseList: data,\n      posBaseListGroupByPool: groupedByClmmPool,\n      posBaseListIsLoading: false\n    }))\n  },\n  posBaseListLoading: true,\n  setPosBaseListLoading: (value: boolean) => {\n    set(() => ({\n      posBaseListLoading: value\n    }))\n  },\n  setPosBaseListIsLoading: (value: boolean) => {\n    set(() => ({\n      posBaseListLoading: value\n    }))\n  },\n  fullRangePosBaseList: [],\n  setFullRangePosBaseList: (data: PosBaseInfo[]) => {\n    set(() => ({\n      fullRangePosBaseList: data,\n      fullRangePosBaseListLoading: false\n    }))\n  },\n  fullRangePosBaseListLoading: true,\n  setFullRangePosBaseListLoading: (value: boolean) => {\n    set(() => ({\n      fullRangePosBaseListLoading: value\n    }))\n  },\n  posPoolsOriginalData: {},\n  setPosPoolOriginalData: (data: Record<string, PoolContractInfo>) => {\n    set(() => ({\n      posPoolsOriginalData: data\n    }))\n  },\n  posPoolsRelatedData: {},\n  posPoolsRelatedDataGroupByPool: {},\n  setPosPoolsRelatedData: (data: Record<string, PosPoolsRelated>) => {\n    const originData = get().posPoolsRelatedData\n    set(() => ({\n      posPoolsRelatedData: { ...originData, ...data },\n      posPoolsRelatedDataLoading: false\n    }))\n  },\n  posPoolsRelatedDataLoading: true,\n  setPosPoolsRelatedDataLoading: (value: boolean) => {\n    set(() => ({\n      posPoolsRelatedDataLoading: value\n    }))\n  },\n  posLiquidityData: {},\n  setPosLiquidityData: (data: Record<string, PosLiquidity>) => {\n    const originData = get().posLiquidityData\n    set(() => ({\n      posLiquidityData: { ...originData, ...data },\n      posLiquidityDataLoading: false\n    }))\n  },\n  posLiquidityDataLoading: true,\n  setPosLiquidityDataLoading: (value: boolean) => {\n    set(() => ({\n      posLiquidityDataLoading: value\n    }))\n  },\n  posRewardsData: {},\n  setPosRewardsData: (data: Record<string, PosReward[]>) => {\n    const originData = get().posRewardsData\n    set(() => ({\n      posRewardsData: { ...originData, ...data },\n      posRewardsDataLoading: false\n    }))\n  },\n  posRewardsDataLoading: true,\n  setPosRewardsDataLoading: (value: boolean) => {\n    set(() => ({\n      posRewardsDataLoading: value\n    }))\n  },\n  farmsPosRewardsData: {},\n  setFarmsPosRewardsData: (data: Record<string, PosReward[]>) => {\n    set(() => ({\n      farmsPosRewardsData: data,\n      farmsPosRewardsDataLoading: false\n    }))\n  },\n  farmsPosRewardsDataLoading: true,\n  setFarmsPosRewardsDataLoading: (value: boolean) => {\n    set(() => ({\n      farmsPosRewardsDataLoading: value\n    }))\n  },\n  posFeeData: {},\n  setPosFeeData: (data: Record<string, PosFee>) => {\n    const originData = get().posFeeData\n    set(() => ({\n      posFeeData: { ...originData, ...data },\n      posFeeDataLoading: false\n    }))\n  },\n  posFeeDataLoading: true,\n  setPosFeeDataLoading: (value: boolean) => {\n    set(() => ({\n      posFeeDataLoading: value\n    }))\n  },\n  currentPosBaseInfo: null,\n  setCurrentPosBaseInfo: (data: PosBaseInfo | null) => {\n    set(() => ({\n      currentPosBaseInfo: data,\n      currentPosBaseInfoLoading: false\n    }))\n  },\n  currentPosBaseInfoLoading: true,\n  setCurrentPosBaseInfoLoading: (value: boolean) => {\n    set(() => ({\n      currentPosBaseInfoLoading: value\n    }))\n  }\n})\n\nconst usePositionStore = create(store)\nexport default usePositionStore\n","import usePositionStore from '@/store/position'\nimport { PosBaseInfo, PosReward } from '@/types'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport usePeripherySDKStore from '@cetus/stores/src/usePeripherySDKStore'\nimport { bnToAmount } from '@cetus/utils'\nimport { useEffect, useRef } from 'react'\n\nexport default function useGetFarmsPosRewards() {\n  const { peripherySdk } = usePeripherySDKStore()\n  const { getTokenListInfo } = useGetToken()\n  const { setFarmsPosRewardsData, setFarmsPosRewardsDataLoading } = usePositionStore()\n  const peripherySdkRef = useRef(peripherySdk)\n\n  useEffect(() => {\n    peripherySdkRef.current = peripherySdk // 更新 ref 的值\n  }, [peripherySdk.ClmmSDK.senderAddress])\n\n  const getFarmsRewardsData = async (positionBaseList: PosBaseInfo[]) => {\n    console.log('🚀 ~ getFarmsRewardsData ~ positionBaseList:', positionBaseList)\n    setFarmsPosRewardsDataLoading(true)\n    const batchFetchPosRewardersAmountParams = positionBaseList\n      ?.filter((item: any) => item.posType === 'farms')\n      .map((item: any) => {\n        return {\n          pool_id: item.farmsPool,\n          position_nft_id: item.id\n        }\n      })\n    try {\n      let res: any = {}\n      if (batchFetchPosRewardersAmountParams && batchFetchPosRewardersAmountParams.length > 0) {\n        res = await peripherySdkRef.current.Farms.calculateFarmingRewards(batchFetchPosRewardersAmountParams)\n        console.log('🚀 ~ getFarmsRewardsData ~ res:', res)\n      }\n\n      let posFarmsRewardsObj: Record<string, PosReward[]> = await formatFarmsRewardsData(res)\n\n      console.log('getFarmsRewardsData ~ posFarmsRewardsObj:', posFarmsRewardsObj)\n      setFarmsPosRewardsData(posFarmsRewardsObj)\n    } catch (error) {\n      console.log('🚀 ~ getPosFarmsRewards ~ error:', error)\n    }\n  }\n\n  const formatFarmsRewardsData = async (res: any) => {\n    let posFarmsRewardsObj: Record<string, PosReward[]> = {}\n    const resArr = Object.entries(res).map(([id, value]) => ({\n      id,\n      rewarderAmountOwed: value\n    }))\n\n    console.log('🚀 ~ file: useGetFarmsPosRewards.ts:27 ~ resArr ~ resArr:', resArr)\n    const coinTypeList = resArr\n      .map((item: any) => {\n        return item.rewarderAmountOwed.map((rewarder: any) => rewarder.rewarder_type)\n      })\n      .flat()\n    const tokenMap = await getTokenListInfo(coinTypeList)\n    posFarmsRewardsObj = Object.fromEntries(\n      resArr.map((item: any, key) => {\n        for (const rewarder of item.rewarderAmountOwed) {\n          const { rewarder_amount, rewarder_type } = rewarder\n          const token = tokenMap?.get(rewarder_type)\n          rewarder.display_amount_owed = bnToAmount(rewarder_amount.toString(), token?.decimals || 0)\n          rewarder.amount_owed = rewarder_amount.toString()\n          rewarder.token = token\n        }\n        return [item.id, item.rewarderAmountOwed]\n      })\n    )\n    return posFarmsRewardsObj\n  }\n\n  return {\n    getFarmsRewardsData,\n    formatFarmsRewardsData\n  }\n}\n","import usePositionStore from '@/store/position'\nimport { PosBaseInfo } from '@/types'\nimport useFavoritePool from '../pool/useFavoritePool'\n\nexport default function useGetPosApiPoolData() {\n  const { setPosApiPoolData } = usePositionStore()\n  const { getFavoritePoolList } = useFavoritePool()\n\n  const getPosApiPoolData = async (positionBaseList: PosBaseInfo[]) => {\n    try {\n      console.log('🚀 ~ getPosApiPoolData ~ positionBaseList:', positionBaseList)\n      const queryPool = Array.from(new Set(positionBaseList?.map(item => item.clmmPool)))\n      const params = {\n        needLocalData: false,\n        pools: queryPool,\n        display_all_pools: true,\n        no_incentives: true,\n        has_mining: true,\n        has_farming: true\n      }\n      console.log('🚀 ~ getPosApiPoolData ~ params:', params)\n\n      const res = (await getFavoritePoolList(params)) || []\n      console.log('🚀 ~ getPosApiPoolData ~ res:', res)\n      const obj = res?.list.reduce((acc, item) => {\n        acc[item.poolAddress] = item // 假设你想要将整个 item 对象作为值\n        return acc\n      }, {})\n      setPosApiPoolData(obj)\n    } catch (error) {\n      console.log('🚀 ~ getPosApiPoolData ~ error:', error)\n    }\n  }\n\n  return {\n    getPosApiPoolData\n  }\n}\n","import usePositionStore from '@/store/position'\nimport { PosBaseInfo, PosFee } from '@/types'\nimport useClmmSDKStore from '@cetus/stores/src/useClmmSDKStore'\nimport { bnToAmount } from '@cetus/utils'\nimport { CollectFeesQuote } from '@cetusprotocol/cetus-sui-clmm-sdk'\n\nexport default function useGetPosfees() {\n  const { clmmSdk } = useClmmSDKStore()\n  const { setPosFeeData, setPosFeeDataLoading } = usePositionStore()\n\n  const getPosFeeData = async (positionBaseList: PosBaseInfo[]) => {\n    console.log('🚀 ~ file: useGetPosfees.ts:11 ~ getPosFeeData ~ positionBaseList:', positionBaseList)\n    setPosFeeDataLoading(true)\n    const feeParams = positionBaseList?.map((posInfo: any) => {\n      return {\n        poolAddress: posInfo.clmmPool,\n        positionId: posInfo.posId,\n        coinTypeA: posInfo.coinTypeA,\n        coinTypeB: posInfo.coinTypeB\n      }\n    })\n\n    console.log('🚀 ~ file: useGetPosfees.ts:11 ~ feeParams ~ feeParams:', feeParams)\n\n    const res = (await clmmSdk.Position.fetchPosFeeAmount(feeParams)) || []\n    console.log('🚀 ~ file: useGetPosfees.ts:11 ~ getPosFeeData ~ res:', res)\n\n    const posFeesData: Record<string, PosFee> = await formatPosFeeData(res, positionBaseList)\n    console.log('getPosFeeData ~ posFeesData:', posFeesData)\n\n    setPosFeeData(posFeesData)\n  }\n\n  const formatPosFeeData = async (res: CollectFeesQuote[], positionBaseList: PosBaseInfo[]) => {\n    const posFeesData: Record<string, PosFee> = Object.fromEntries(\n      res.map((item: CollectFeesQuote) => {\n        const pos = positionBaseList.find(pos => pos.posId === item.position_id)!\n        const displayFeeOwedA = bnToAmount(!pos.isReverse ? item.feeOwedA.toString() : item.feeOwedB.toString(), pos?.displayTokenA?.decimals || 0)\n        const displayFeeOwedB = bnToAmount(!pos.isReverse ? item.feeOwedB.toString() : item.feeOwedA.toString(), pos?.displayTokenB?.decimals || 0)\n        return [\n          item.position_id,\n          {\n            feeOwedA: item.feeOwedA.toString(),\n            feeOwedB: item.feeOwedB.toString(),\n            displayFeeOwedA,\n            displayFeeOwedB\n          }\n        ]\n      })\n    )\n    return posFeesData\n  }\n\n  return {\n    getPosFeeData,\n    formatPosFeeData\n  }\n}\n","import usePositionStore from '@/store/position'\nimport { PoolContractInfo, PosBaseInfo, PosLiquidity } from '@/types'\nimport { calcCoinProportion, checkFullRange } from '@/utils/pool'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport { CoinType, Token } from '@cetus/types'\nimport { bnToAmount, d } from '@cetus/utils'\nimport { ClmmPoolUtil, TickMath } from '@cetusprotocol/cetus-sui-clmm-sdk'\nimport BN from 'bn.js'\n\nexport default function useGetPosLiquiditys() {\n  const { setPosLiquidityData, setPosLiquidityDataLoading } = usePositionStore()\n  const { getTokenInfo } = useGetToken()\n\n  const getCoinAmountFromLiquidity = ({\n    tokenA,\n    tokenB,\n    liquidity,\n    currentSqrtPrice,\n    lowerTick,\n    upperTick,\n    roundUp\n  }: {\n    tokenA: Token\n    tokenB: Token\n    liquidity: string\n    currentSqrtPrice: string\n    lowerTick: number\n    upperTick: number\n    roundUp: boolean\n  }) => {\n    const lowerSqrtPrice = TickMath.tickIndexToSqrtPriceX64(lowerTick)\n    const upperSqrtPrice = TickMath.tickIndexToSqrtPriceX64(upperTick)\n    const amountInfo = ClmmPoolUtil.getCoinAmountFromLiquidity(new BN(liquidity), new BN(currentSqrtPrice), lowerSqrtPrice, upperSqrtPrice, roundUp)\n\n    const coinAmountA = amountInfo.coinA.toString()\n    const coinAmountB = amountInfo.coinB.toString()\n\n    const decimalsA = tokenA.decimals\n    const decimalsB = tokenB.decimals\n    const amountA = bnToAmount(coinAmountA, decimalsA || 0)\n    const amountB = bnToAmount(coinAmountB, decimalsB || 0)\n\n    return {\n      coinAmountA,\n      coinAmountB,\n      amountA,\n      amountB\n    }\n  }\n\n  const getPosLiquidityData = async (positionBaseList: PosBaseInfo[], posPoolsOriginalData: Record<string, PoolContractInfo>) => {\n    setPosLiquidityDataLoading(true)\n    const posLiquidityData: Record<string, PosLiquidity> = {}\n\n    for (let i = 0; i < positionBaseList.length; i++) {\n      const position = positionBaseList[i]\n      const poolInfo = posPoolsOriginalData?.[position.clmmPool]\n\n      const { coinAmountA, coinAmountB, amountA, amountB } = getCoinAmountFromLiquidity({\n        tokenA: position.tokenA,\n        tokenB: position.tokenB,\n        liquidity: position.liquidity,\n        currentSqrtPrice: poolInfo?.current_sqrt_price,\n        lowerTick: position.lowerTick,\n        upperTick: position.upperTick,\n        // TODO 防止数量过小时展示为0 待定方案\n        roundUp: true\n        // roundUp: false\n      })\n\n      const isFullRange = checkFullRange(position.lowerTick, position.upperTick)\n\n      let decimalsA = position.tokenA.decimals\n      let decimalsB = position.tokenB.decimals\n      if (decimalsA == undefined) {\n        decimalsA = (await getTokenInfo(position.tokenA.coin_type as CoinType))?.decimals\n      }\n      if (decimalsB == undefined) {\n        decimalsB = (await getTokenInfo(position.tokenB.coin_type as CoinType))?.decimals\n      }\n      const currentPrice = TickMath.sqrtPriceX64ToPrice(new BN(poolInfo?.current_sqrt_price), decimalsA, decimalsB).toString()\n      const { percentA, percentB } = calcCoinProportion(amountA, amountB, currentPrice, isFullRange)\n\n      const dAmountA = bnToAmount(coinAmountA, decimalsA)\n      const dAmountB = bnToAmount(coinAmountB, decimalsB)\n      const onlyAmountA = d(dAmountB).div(currentPrice).add(dAmountA).toString()\n\n      const onlyAmountB = d(dAmountA).mul(currentPrice).add(dAmountB).toString()\n\n      posLiquidityData[position.posId] = {\n        coinAmountA,\n        coinAmountB,\n        displayCoinAmountA: !position.isReverse ? amountA : amountB,\n        displayCoinAmountB: !position.isReverse ? amountB : amountA,\n        displayPercentA: !position.isReverse ? percentA : percentB,\n        displayPercentB: !position.isReverse ? percentB : percentA,\n        onlyAmountA,\n        onlyAmountB\n      }\n    }\n\n    console.log('getPosLisuidityData ~ posLiquidityData:', posLiquidityData)\n    setPosLiquidityData(posLiquidityData)\n  }\n\n  return {\n    getPosLiquidityData,\n    getCoinAmountFromLiquidity\n  }\n}\n","/**\n * 获取仓位相关的池子信息s\n */\n\nimport usePositionStore from '@/store/position'\nimport { PoolContractInfo, PosPoolsRelated } from '@/types'\nimport { PosBaseInfo } from '@/types/position'\nimport { checkIsMinOrMaxIndex } from '@/utils/pool'\nimport useClmmSDKStore from '@cetus/stores/src/useClmmSDKStore'\nimport { d, formatNumberWithDown } from '@cetus/utils'\nimport { TickMath } from '@cetusprotocol/cetus-sui-clmm-sdk'\nimport BN from 'bn.js'\n\nexport default function useGetPosPools() {\n  const { clmmSdk } = useClmmSDKStore()\n  const { setPosPoolOriginalData, setPosPoolsRelatedData, setPosPoolsRelatedDataLoading, setFullRangePosBaseList, setFullRangePosBaseListLoading } =\n    usePositionStore()\n\n  const getPosPoolsOriginalObj = async (posBaseList: PosBaseInfo[]): Promise<Record<string, PoolContractInfo>> => {\n    const pools = posBaseList?.map(item => item.clmmPool)\n\n    const poolIds = [...new Set([...pools])]\n\n    let posPoolsOriginalObj: Record<string, PoolContractInfo> = {}\n\n    if (poolIds && poolIds.length > 0) {\n      const posAllPools = await clmmSdk.Pool.getPools(poolIds, 0, 1000)\n      console.log('🚀🚀🚀 ~ getPosPoolsOriginalObj ~ posAllPools:', posAllPools)\n      posPoolsOriginalObj = Object.fromEntries(\n        posAllPools?.map((item: any) => {\n          const info: PosBaseInfo = posBaseList.find(pos => pos.clmmPool === item?.poolAddress)!\n          const decimalsA = info.tokenA.decimals\n          const decimalsB = info.tokenB.decimals\n          const currentPrice = TickMath.sqrtPriceX64ToPrice(new BN(item?.current_sqrt_price), decimalsA, decimalsB).toString()\n          const currentPriceReverse = d(1).div(currentPrice).toString()\n\n          return [\n            item?.poolAddress,\n            {\n              ...item,\n              currentPrice,\n              currentPriceReverse\n            }\n          ]\n        })\n      )\n    }\n\n    setPosPoolOriginalData(posPoolsOriginalObj)\n    return posPoolsOriginalObj\n  }\n\n  // 仓位中和池子信息相关联的数据\n  const getPosPoolsRelatedData = (posBaseList: PosBaseInfo[], posPoolOriginalObjs: Record<string, PoolContractInfo>) => {\n    setPosPoolsRelatedDataLoading(true)\n    setFullRangePosBaseListLoading(true)\n\n    const posPoolsRelatedData: Record<string, PosPoolsRelated> = {}\n    const fullRangePosBaseList: any = []\n\n    posBaseList.forEach((item: any) => {\n      console.log('🚀 ~ posBaseList.forEach ~ item:', item)\n      const poolInfo = posPoolOriginalObjs[item.clmmPool]\n      const decimalsA = item.tokenA.decimals\n      const decimalsB = item.tokenB.decimals\n      const currentPrice = TickMath.sqrtPriceX64ToPrice(new BN(poolInfo?.current_sqrt_price), decimalsA, decimalsB).toString()\n      const currentPriceReverse = d(1).div(currentPrice).toString()\n\n      let minPrice = '0'\n      let maxPrice = '0'\n      if (checkIsMinOrMaxIndex(item.lowerTick, 'min')) {\n        minPrice = '0'\n      } else {\n        minPrice = TickMath.tickIndexToPrice(Number(item.lowerTick), decimalsA, decimalsB).toString()\n      }\n\n      if (checkIsMinOrMaxIndex(item.upperTick, 'max')) {\n        maxPrice = '∞'\n      } else {\n        maxPrice = TickMath.tickIndexToPrice(Number(item.upperTick), decimalsA, decimalsB).toString()\n      }\n\n      let minPriceResever, maxPriceResever\n      if (maxPrice !== '∞') {\n        maxPriceResever = d(1).div(d(maxPrice)).toString()\n      } else {\n        maxPriceResever = '0'\n      }\n      if (minPrice !== '0') {\n        minPriceResever = d(1).div(d(minPrice)).toString()\n      } else {\n        minPriceResever = '∞'\n      }\n\n      let currentStatus = ''\n      if (poolInfo?.is_pause) {\n        currentStatus = 'Closed'\n      } else if (Number(currentPrice) >= Number(minPrice) && (maxPrice === '∞' || Number(currentPrice) <= Number(maxPrice))) {\n        currentStatus = 'Active'\n      } else if (Number(currentPrice) > Number(maxPrice)) {\n        currentStatus = 'Inactive'\n      } else if (Number(currentPrice) < Number(minPrice)) {\n        currentStatus = 'Inactive'\n      }\n\n      if (((minPrice === '0' && maxPrice === '∞') || (minPriceResever === '0' && maxPriceResever === '∞')) && item.posType === 'clmm') {\n        fullRangePosBaseList.push(item)\n      }\n\n      const isReverse = item.isReverse\n\n      posPoolsRelatedData[item.posId] = {\n        currentPrice: !poolInfo ? '' : formatNumberWithDown(!isReverse ? currentPrice : currentPriceReverse).toString(),\n        currentPriceReverse: !poolInfo ? '' : formatNumberWithDown(!isReverse ? currentPriceReverse : currentPrice).toString(),\n        minPrice: formatNumberWithDown(!isReverse ? minPrice : maxPriceResever).toString(),\n        minPriceResever: formatNumberWithDown(!isReverse ? maxPriceResever : minPrice).toString(),\n        maxPrice: formatNumberWithDown(!isReverse ? maxPrice : minPriceResever).toString(),\n        maxPriceResever: formatNumberWithDown(!isReverse ? minPriceResever : maxPrice).toString(),\n        minPriceOrigin: !poolInfo ? '' : !isReverse ? minPrice : maxPriceResever, //用于Leverage值的计算\n        maxPriceOrigin: !poolInfo ? '' : !isReverse ? maxPrice : minPriceResever, //用于Leverage值的计算\n        currentStatus: !poolInfo ? '' : currentStatus,\n        fee: poolInfo?.fee_rate,\n        displayFee: d(poolInfo?.fee_rate).div(Math.pow(10, 6)).mul(100).toString(),\n        tickSpacing: poolInfo?.tickSpacing,\n        currentTickIndex: poolInfo?.current_tick_index,\n        curSqrtPrice: poolInfo?.current_sqrt_price,\n        liquidity: poolInfo?.liquidity\n      }\n    })\n\n    setPosPoolsRelatedData(posPoolsRelatedData)\n    setFullRangePosBaseList(fullRangePosBaseList)\n  }\n\n  return {\n    getPosPoolsOriginalObj,\n    getPosPoolsRelatedData\n  }\n}\n","import usePositionStore from '@/store/position'\nimport { PoolContractInfo, PosBaseInfo, PosReward } from '@/types'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport useClmmSDKStore from '@cetus/stores/src/useClmmSDKStore'\nimport { bnToAmount } from '@cetus/utils'\n\nexport default function useGetPosRewards() {\n  const { clmmSdk } = useClmmSDKStore()\n  const { getTokenListInfo } = useGetToken()\n  const { setPosRewardsData, setPosRewardsDataLoading } = usePositionStore()\n\n  const getPosRewardsData = async (positionBaseList: PosBaseInfo[], posPoolsOriginalData: Record<string, PoolContractInfo>) => {\n    console.log('🚀 ~ getPosRewardsData ~ positionBaseList:', positionBaseList)\n    setPosRewardsDataLoading(true)\n    const batchFetchPosRewardersAmountParams: any = positionBaseList\n      ?.filter((item: PosBaseInfo) => item.posType !== 'farms')\n      .map((item: PosBaseInfo) => {\n        const poolInfo = posPoolsOriginalData[item.clmmPool]\n        return {\n          poolAddress: item.clmmPool,\n          positionId: item.posId,\n          coinTypeA: item.coinTypeA,\n          coinTypeB: item.coinTypeB,\n          rewarderInfo: poolInfo.rewarder_infos\n        }\n      })\n\n    console.log('🚀 ~ file: useGetPosRewards.ts:15 ~ getPosRewardsData ~ batchFetchPosRewardersAmountParams:', batchFetchPosRewardersAmountParams)\n\n    let posRewardsData: Record<string, PosReward[]> = {}\n\n    if (batchFetchPosRewardersAmountParams && batchFetchPosRewardersAmountParams.length > 0) {\n      try {\n        const res = await clmmSdk.Rewarder.fetchPosRewardersAmount(batchFetchPosRewardersAmountParams)\n        posRewardsData = await formatPosRewardsData(res)\n\n        console.log('getPosRewardsData ~ posRewardsData:', posRewardsData)\n      } catch (error) {\n        console.log('getPosRewardsData ~ error:', error)\n      }\n    }\n\n    setPosRewardsData(posRewardsData)\n  }\n\n  const formatPosRewardsData = async (res: any) => {\n    let posRewardsData: Record<string, PosReward[]> = {}\n\n    const coinTypeList = res\n      ?.map((item: any) => {\n        return item.rewarderAmountOwed.map((item: any) => {\n          return item.coin_address\n        })\n      })\n      .flat()\n    const tokenMap = await getTokenListInfo(coinTypeList)\n    posRewardsData = Object.fromEntries(\n      res.map((item: any) => {\n        for (const rewarder of item.rewarderAmountOwed) {\n          const { amount_owed, coin_address } = rewarder\n          const token = tokenMap?.get(coin_address)\n          rewarder.display_amount_owed = bnToAmount(amount_owed.toString(), token?.decimals || 0)\n          rewarder.amount_owed = amount_owed.toString()\n          rewarder.token = token\n        }\n        return [item.positionId, item.rewarderAmountOwed]\n      })\n    )\n\n    return posRewardsData\n  }\n\n  return {\n    formatPosRewardsData,\n    getPosRewardsData\n  }\n}\n","import { PosBaseInfo } from '@/types'\nimport envConfigs from '@cetus/types/src/config/envConfigs'\nimport { isAvailableObject } from '@cetus/utils'\nimport { useMemo } from 'react'\n\nexport default function usePosHelper() {\n  const getClmmPosName = (posIndex: number, position_index: string | number) => {\n    if (position_index || position_index == 0) {\n      return `Cetus LP | Pool${position_index}-${posIndex}`\n    }\n    return undefined\n  }\n\n  const buildPositionType = useMemo(() => {\n    return `${envConfigs.clmm_sdk_options.clmm_pool.package_id}::position::Position`\n  }, [envConfigs])\n\n  const buildFarmsPositionType = useMemo(() => {\n    return `${envConfigs.periphery_sdk_options.frams.package_id}::pool::WrappedPositionNFT`\n  }, [envConfigs])\n\n  const buildBurnPositionType = useMemo(() => {\n    return `${envConfigs.burn_sdk_options.burn.package_id}::lp_burn::CetusLPBurnProof`\n  }, [envConfigs])\n\n  const getTokenALock = (currentPosBaseInfo: PosBaseInfo, curPosContractPoolInfo: any) => {\n    if (isAvailableObject(currentPosBaseInfo) && isAvailableObject(curPosContractPoolInfo)) {\n      const { lowerTick, upperTick } = currentPosBaseInfo\n      const currentTickIndex = curPosContractPoolInfo?.current_tick_index\n      if (currentTickIndex !== undefined && lowerTick !== undefined && upperTick !== undefined) {\n        if (currentTickIndex >= lowerTick && currentTickIndex < upperTick) {\n          return false\n        } else if (currentTickIndex >= upperTick) {\n          return true\n        } else if (currentTickIndex < lowerTick) {\n          return false\n        } else {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  const getTokenBLock = (currentPosBaseInfo: PosBaseInfo, curPosContractPoolInfo: any) => {\n    if (isAvailableObject(currentPosBaseInfo) && isAvailableObject(curPosContractPoolInfo)) {\n      const { lowerTick, upperTick } = currentPosBaseInfo\n      const currentTickIndex = curPosContractPoolInfo?.current_tick_index\n      if (currentTickIndex !== undefined && lowerTick !== undefined && upperTick !== undefined) {\n        if (currentTickIndex >= lowerTick && currentTickIndex < upperTick) {\n          return false\n        } else if (currentTickIndex >= upperTick) {\n          return false\n        } else if (currentTickIndex < lowerTick) {\n          return true\n        } else {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  return {\n    getClmmPosName,\n    buildPositionType,\n    buildFarmsPositionType,\n    buildBurnPositionType,\n    getTokenALock,\n    getTokenBLock\n  }\n}\n","import { PosBaseInfo } from '@/types'\nimport { getPoolDirection } from '@/utils/pool'\nimport { useGetToken } from '@cetus/hooks/src/useToken'\nimport { BurnUtils } from '@cetusprotocol/cetus-burn-sdk'\nimport { FramsUtils } from '@cetusprotocol/cetus-periphery-sdk'\nimport { buildPosition, extractStructTagFromType } from '@cetusprotocol/cetus-sui-clmm-sdk'\nimport usePosHelper from './usePosHelper'\n\nexport default function useWrapPosData() {\n  const { buildPositionType, buildFarmsPositionType, buildBurnPositionType } = usePosHelper()\n  const { getTokenListInfo } = useGetToken()\n\n  const getPosTokenData = async (coinTypeA: string, coinTypeB: string): Promise<any> => {\n    const isReverse = !getPoolDirection(coinTypeA, coinTypeB)\n    const tokenMap = await getTokenListInfo([coinTypeA, coinTypeB])\n    const tokenA = tokenMap?.get(coinTypeA)\n    const tokenB = tokenMap?.get(coinTypeB)\n    const displayTokenA = !isReverse ? tokenA : tokenB\n    const displayTokenB = !isReverse ? tokenB : tokenA\n\n    return {\n      isReverse,\n      tokenA,\n      tokenB,\n      displayTokenA,\n      displayTokenB\n    }\n  }\n\n  // Clmm仓位包装\n  const wrapClmmPosBaseInfo = async (data: any): Promise<PosBaseInfo> => {\n    const pos = buildPosition(data)\n    const coinTypeA = extractStructTagFromType(pos.coin_type_a).full_address\n    const coinTypeB = extractStructTagFromType(pos.coin_type_b).full_address\n    const { isReverse, tokenA, tokenB, displayTokenA, displayTokenB } = await getPosTokenData(coinTypeA, coinTypeB)\n\n    const version = data?.data?.version || '0'\n\n    return {\n      clmmPool: pos.pool,\n      posId: pos.pos_object_id,\n      id: pos.pos_object_id,\n      liquidity: pos.liquidity,\n      index: pos.index,\n      lowerTick: pos.tick_lower_index,\n      upperTick: pos.tick_upper_index,\n      owner: pos.owner,\n      coinTypeA,\n      coinTypeB,\n      posType: 'clmm',\n      tokenName: '',\n      tokenA,\n      tokenB,\n      displayTokenA,\n      displayTokenB,\n      isReverse,\n      version\n    }\n  }\n\n  // Farms仓位包装\n  const wrapFarmsPosBaseInfo = async (data: any): Promise<PosBaseInfo> => {\n    const pos: any = FramsUtils.buildFramsPositionNFT(data)\n\n    const version = data?.data?.version || '0'\n    const coinTypeA = extractStructTagFromType(pos.coinTypeA).full_address\n    const coinTypeB = extractStructTagFromType(pos.coinTypeB).full_address\n\n    const { isReverse, tokenA, tokenB, displayTokenA, displayTokenB } = await getPosTokenData(coinTypeA, coinTypeB)\n\n    return {\n      clmmPool: pos.clmm_pool_id,\n      farmsPool: pos.pool_id,\n      posId: pos.clmm_position_id,\n      id: pos.id,\n      liquidity: pos.liquidity,\n      index: pos.name.split('-')[1],\n      lowerTick: pos.tick_lower_index,\n      upperTick: pos.tick_upper_index,\n      owner: '',\n      coinTypeA,\n      coinTypeB,\n      posType: 'farms',\n      tokenName: pos.name,\n      isReverse,\n      tokenA,\n      tokenB,\n      displayTokenA,\n      displayTokenB,\n      version\n    }\n  }\n\n  // Burn仓位包装\n  const wrapBurnPosBaseInfo = async (data: any): Promise<PosBaseInfo> => {\n    const pos: any = BurnUtils.buildBurnPositionNFT(data?.data?.content?.fields)\n    const version = data?.data?.version || '0'\n    const coinTypeA = extractStructTagFromType(pos.coinTypeA).full_address\n    const coinTypeB = extractStructTagFromType(pos.coinTypeB).full_address\n\n    const { isReverse, tokenA, tokenB, displayTokenA, displayTokenB } = await getPosTokenData(coinTypeA, coinTypeB)\n\n    return {\n      clmmPool: pos.clmm_pool_id,\n      posId: pos.clmm_position_id,\n      liquidity: pos.liquidity,\n      index: pos.index,\n      id: pos.id,\n      lowerTick: pos.tick_lower_index,\n      upperTick: pos.tick_upper_index,\n      owner: '',\n      coinTypeA,\n      coinTypeB,\n      posType: 'burn',\n      tokenName: pos.name,\n      isReverse,\n      tokenA,\n      tokenB,\n      displayTokenA,\n      displayTokenB,\n      version\n    }\n  }\n\n  const buildPosBaseInfo = async (item: any): Promise<PosBaseInfo | null> => {\n    const type = extractStructTagFromType(item.data.type)\n\n    if (type.full_address === buildPositionType) {\n      return await wrapClmmPosBaseInfo(item)\n    }\n\n    if (type.full_address === buildFarmsPositionType) {\n      return await wrapFarmsPosBaseInfo(item)\n    }\n\n    if (type.full_address === buildBurnPositionType) {\n      return await wrapBurnPosBaseInfo(item)\n    }\n\n    return null\n  }\n\n  return {\n    wrapClmmPosBaseInfo,\n    wrapBurnPosBaseInfo,\n    wrapFarmsPosBaseInfo,\n    buildPosBaseInfo\n  }\n}\n","import usePositionStore from '@/store/position'\nimport { PosBaseInfo } from '@/types'\nimport useClmmSDKStore from '@cetus/stores/src/useClmmSDKStore'\nimport envConfigs from '@cetus/types/src/config/envConfigs'\nimport { d } from '@cetus/utils'\nimport { DataPage } from '@cetusprotocol/cetus-sui-clmm-sdk'\nimport useGetFarmsPosRewards from './useGetFarmsPosRewards'\nimport useGetPosApiPoolData from './useGetPosApiPoolData'\nimport useGetPosfees from './useGetPosfees'\nimport useGetPosLiquiditys from './useGetPosLiquiditys'\nimport useGetPosPools from './useGetPosPools'\nimport useGetPosRewards from './useGetPosRewards'\nimport usePosHelper from './usePosHelper'\nimport useWrapPosData from './useWrapPosData'\n\nexport default function usePositionList() {\n  const { clmmSdk } = useClmmSDKStore()\n  const { buildPositionType, buildFarmsPositionType, buildBurnPositionType } = usePosHelper()\n  const { buildPosBaseInfo } = useWrapPosData()\n  const { setPosBaseList, setFullRangePosBaseList, setPosBaseListLoading } = usePositionStore()\n\n  const { getPosPoolsOriginalObj, getPosPoolsRelatedData } = useGetPosPools()\n  const { getPosLiquidityData } = useGetPosLiquiditys()\n  const { getPosFeeData } = useGetPosfees()\n  const { getPosApiPoolData } = useGetPosApiPoolData()\n  const { getPosRewardsData } = useGetPosRewards()\n  const { getFarmsRewardsData } = useGetFarmsPosRewards()\n\n  const getPositionBaseList = async (account: string, clmmPool?: string): Promise<PosBaseInfo[]> => {\n    console.log('🚀 ~ getPositionBaseList ~ clmmPool:', clmmPool)\n    setPosBaseListLoading(true)\n    try {\n      const ownerRes = await clmmSdk.fullClient.getOwnedObjectsByPage(account, {\n        options: { showType: true, showContent: true, showOwner: true },\n        filter: {\n          MatchAny: [\n            {\n              Package: envConfigs.clmm_sdk_options.clmm_pool.package_id\n            },\n            {\n              StructType: buildFarmsPositionType\n            },\n            {\n              StructType: buildBurnPositionType\n            }\n          ]\n        }\n      })\n\n      console.log('🚀 ~ file: usePositionList.ts:25 ~ getPositionList ~ ownerRes:', ownerRes)\n\n      let result: PosBaseInfo[] = await formatPosBaseList(ownerRes, clmmPool)\n\n      setPosBaseList(result)\n      setPosBaseListLoading(false)\n      if (result?.length == 0) {\n        setFullRangePosBaseList([])\n      }\n\n      return result\n    } catch (error) {\n      console.error('🚀 ~ getPositionBaseList ~ 79 ~ error:', error)\n      if (error instanceof TypeError) {\n        setPosBaseListLoading(false)\n        setPosBaseList([])\n        //return 'Something went wrong, please change the rpc node and try again'\n        return []\n      }\n      return []\n    }\n  }\n\n  const formatPosBaseList = async (ownerRes: DataPage<any>, clmmPool?: string) => {\n    const posBaseList: any = []\n\n    for (const item of ownerRes.data as any[]) {\n      const info = await buildPosBaseInfo(item)\n      // console.log('🚀 ~ file: usePositionList.ts:37 ~ getPositionList ~ info:', info)\n      if (d(info?.liquidity).lte(0)) continue\n      if (!info?.displayTokenA || !info?.displayTokenB) continue\n      if (info) {\n        posBaseList.push(info)\n      }\n    }\n\n    console.log('🚀 ~ file: usePositionList.ts:33 ~ getPositionList ~ posBaseList:', posBaseList)\n\n    const sortBaseList = posBaseList.sort((a: any, b: any) => b.version - a.version)\n\n    let result: PosBaseInfo[] = []\n    if (!clmmPool) {\n      result = sortBaseList\n    } else {\n      result = sortBaseList?.filter((item: PosBaseInfo) => item.clmmPool === clmmPool)\n    }\n\n    return result\n  }\n\n  const getPosRelatedData = async (posBaseList: PosBaseInfo[], isFarms: boolean = false) => {\n    console.log('🚀 ~ getPosRelatedData ~ posBaseList:', isFarms, posBaseList)\n    getFarmsRewardsData(posBaseList)\n    if (!isFarms) {\n      console.log('🚀 ~ getPosRelatedData ~ isFarms:', posBaseList)\n      getPosApiPoolData(posBaseList)\n      getPosFeeData(posBaseList)\n    }\n    try {\n      const posPoolsOriginalData = await getPosPoolsOriginalObj(posBaseList)\n      console.log('🚀 ~ getPosRelatedData ~ posPoolsOriginalData:', posPoolsOriginalData)\n      getPosPoolsRelatedData(posBaseList, posPoolsOriginalData) //hook里面关于posPoolsOriginalData数据已经处理\n      if (Object.keys(posPoolsOriginalData)?.length > 0) {\n        getPosLiquidityData(posBaseList, posPoolsOriginalData)\n        if (!isFarms) {\n          getPosRewardsData(posBaseList, posPoolsOriginalData)\n        }\n      }\n    } catch (error) {\n      console.error('🚀 ~ getPosRelatedData ~ error: 96', error)\n    }\n  }\n\n  return {\n    formatPosBaseList,\n    getPositionBaseList,\n    getPosRelatedData\n  }\n}\n"],"names":["store","set","get","data","originData","groupedByClmmPool","result","item","_a","_c","_b","value","usePositionStore","create","useGetFarmsPosRewards","peripherySdk","usePeripherySDKStore","getTokenListInfo","useGetToken","setFarmsPosRewardsData","setFarmsPosRewardsDataLoading","peripherySdkRef","useRef","useEffect","getFarmsRewardsData","positionBaseList","batchFetchPosRewardersAmountParams","res","posFarmsRewardsObj","formatFarmsRewardsData","error","resArr","id","coinTypeList","rewarder","tokenMap","key","rewarder_amount","rewarder_type","token","bnToAmount","useGetPosApiPoolData","setPosApiPoolData","getFavoritePoolList","useFavoritePool","params","obj","acc","useGetPosfees","clmmSdk","useClmmSDKStore","setPosFeeData","setPosFeeDataLoading","getPosFeeData","feeParams","posInfo","posFeesData","formatPosFeeData","pos","displayFeeOwedA","displayFeeOwedB","useGetPosLiquiditys","setPosLiquidityData","setPosLiquidityDataLoading","getTokenInfo","getCoinAmountFromLiquidity","tokenA","tokenB","liquidity","currentSqrtPrice","lowerTick","upperTick","roundUp","lowerSqrtPrice","TickMath","upperSqrtPrice","amountInfo","ClmmPoolUtil","BN","coinAmountA","coinAmountB","decimalsA","decimalsB","amountA","amountB","posPoolsOriginalData","posLiquidityData","i","position","poolInfo","isFullRange","checkFullRange","currentPrice","percentA","percentB","calcCoinProportion","dAmountA","dAmountB","onlyAmountA","d","onlyAmountB","useGetPosPools","setPosPoolOriginalData","setPosPoolsRelatedData","setPosPoolsRelatedDataLoading","setFullRangePosBaseList","setFullRangePosBaseListLoading","posBaseList","pools","poolIds","posPoolsOriginalObj","posAllPools","info","currentPriceReverse","posPoolOriginalObjs","posPoolsRelatedData","fullRangePosBaseList","minPrice","maxPrice","checkIsMinOrMaxIndex","minPriceResever","maxPriceResever","currentStatus","isReverse","formatNumberWithDown","useGetPosRewards","setPosRewardsData","setPosRewardsDataLoading","getPosRewardsData","posRewardsData","formatPosRewardsData","amount_owed","coin_address","usePosHelper","getClmmPosName","posIndex","position_index","buildPositionType","useMemo","envConfigs","buildFarmsPositionType","buildBurnPositionType","currentPosBaseInfo","curPosContractPoolInfo","isAvailableObject","currentTickIndex","useWrapPosData","getPosTokenData","coinTypeA","coinTypeB","getPoolDirection","wrapClmmPosBaseInfo","buildPosition","extractStructTagFromType","displayTokenA","displayTokenB","version","wrapFarmsPosBaseInfo","FramsUtils","wrapBurnPosBaseInfo","BurnUtils","type","usePositionList","buildPosBaseInfo","setPosBaseList","setPosBaseListLoading","getPosPoolsOriginalObj","getPosPoolsRelatedData","getPosLiquidityData","getPosApiPoolData","getPositionBaseList","account","clmmPool","ownerRes","formatPosBaseList","sortBaseList","a","b","isFarms"],"mappings":"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"}