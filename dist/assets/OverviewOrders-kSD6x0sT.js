import{u as V}from"./useAccountBalance-_Hc7hvLr.js";import{k as q,z as M,d as O,v as b,x as Y,p as G,j as f,R as _t,u as ht,a$ as vt,a3 as Q,Z as yt,X,I as F,G as Dt,a as St,e as Ot,i as At,B as wt,q as Z}from"./index-Bs7BAmjF.js";import{a as C,j as s,H as j,T,aq as bt,u as I,V as H,f as tt,C as Pt,v as Ct}from"./vendor-DXHkIl66.js";import{u as et}from"./useTransaction-CNh9Zl5M.js";import{u as jt}from"./RangeValue-CiOizz2w.js";import{u as Tt}from"./activeOrders-Bkvn9OM4.js";import{u as Nt}from"./useToken-DLm1YZe6.js";import{P as Rt}from"./Pagination-Bkb8Zeow.js";import{H as J}from"./HTextLabelBox-C3cJhX9e.js";import{N as $t}from"./NoData-CqJO7NcS.js";import{E as Lt}from"./ErrorTips-B81RPiXh.js";function st(){const{peripherySdk:e}=q();return{dcaCloseOrderPayload:async t=>await e.Dca.dcaCloseOrderPayload(t)}}function at(){const{peripherySdk:e}=q();return{dcaWithdrawPayload:async t=>(console.log("ðŸš€ðŸš€ðŸš€ ~ file: useDcaClaim.ts:12 ~ params:",t),await e.Dca.withdrawAll(t))}}function Et(e){const a=Math.floor(e/2592e3);e%=2592e3;const h=Math.floor(e/604800);e%=604800;const D=Math.floor(e/86400);e%=86400;const m=Math.floor(e/3600);e%=3600;const w=Math.floor(e/60);e%=60;const A=[];return a>0&&A.push(`${a} Month${a>1?"s":""}`),h>0&&A.push(`${h} Week${h>1?"s":""}`),D>0&&A.push(`${D} Day${D>1?"s":""}`),m>0&&A.push(`${m} Hour${m>1?"s":""}`),w>0&&A.push(`${w} Minute${w>1?"s":""}`),A.join(" ")}function it(){const{getTokenListInfo:e}=Nt(),{peripherySdk:l}=q(),{setDcaOrderListLoading:t,setDcaActiveOrderList:o,setDcaPastOrderList:u}=Tt(),i=async(p,x=!0)=>{var v;console.log("ðŸš€ ~ getDcaOrderList ~ walletAddress:",p);try{t(x);const r=await l.Dca.getDcaOrders(p);if(console.log("ðŸš€ ~ getDcaOrderList ~ list:",r),r&&(r!=null&&r.data)&&((v=r==null?void 0:r.data)==null?void 0:v.length)>0){const{activeResult:n,pastResult:_}=await A(r==null?void 0:r.data);console.log("ðŸš€ ~ getDcaOrderList ~ activeResult, pastResult:",{activeResult:n,pastResult:_}),o(n),u(_)}else o([]),u([])}catch(r){console.log("ðŸš€ ~ getDcaOrderList ~ error:",r),o([]),u([])}finally{t(!1)}},a=async p=>{try{const x=await e(p),v=new Map;return x==null||x.forEach((r,n)=>{const _=G.pow(10,r==null?void 0:r.decimals);v.set(n,{token:r,decimalsPow:_})}),v}catch(x){console.log("ðŸš€ ~ getTokenListDetails ~ error:",x)}},h=(p,x,v,r,n)=>{const _=O(p).div(x).div(O(r).div(v)).toString(),E=O(p).div(x).div(O(n).div(v)).toString();return{minPrice:_,maxPrice:E,minPriceResever:O(1).div(O(E)).toString(),maxPriceResever:O(1).div(O(_)).toString()}},D=p=>p.in_withdrawn>0&&p.in_withdrawn==p.in_deposited?"Close":p.in_withdrawn>0&&p.out_withdrawn>0?"PartialDeal":p.amount_left_next_cycle==0&&p.next_cycle_at==0?"AllDeal":"Active",m=(p,x,v,r,n,_,E)=>{const g=c=>c==="--"?"--":O(1).div(c).toString();switch(p){case"Close":return{currentAvgPrice:"--",currentAvgPriceResever:"--",inBalanceRatio:"0",inDepositedOut:"0"};case"PartialDeal":{const c=x.sub(v).div(_).toString(),S=x.sub(v).div(x).mul(100).toDP(2,G.ROUND_HALF_UP).toString();return console.log("ðŸš€ ~ useGetDcaOrderList ~ inDeposited:",v,x),{currentAvgPrice:c,currentAvgPriceResever:g(c),inBalanceRatio:S,inDepositedOut:x.sub(v).toString()}}case"AllDeal":{const c=x.div(_).toString();return{currentAvgPrice:c,currentAvgPriceResever:g(c),inBalanceRatio:"100",inDepositedOut:x.sub(r).toString()}}case"Active":{const c=n.gt(0)||_.gt(0)?x.sub(r).div(n.add(_)).toString():"--",S=x.sub(r).div(x).mul(100).toDP(2,G.ROUND_HALF_UP).toString();return{currentAvgPrice:c,currentAvgPriceResever:g(c),inBalanceRatio:S,inDepositedOut:x.sub(r).toString()}}default:return{currentAvgPrice:"--",currentAvgPriceResever:"--",inBalanceRatio:"0",inDepositedOut:"0"}}},w=(p,x,v,r)=>{const n=Date.now()/1e3,_=O(n).sub(p).div(x),E=v.lte(0)&&O(r).lte(0);return _.gt(3)&&E},A=async p=>{const x=[],v=[],r=new Set;p==null||p.forEach(g=>{r.add(M(g.in_coin_type,!1)),r.add(M(g.out_coin_type,!1))});const n=await a(Array.from(r));if(n)for(const g of p)try{const{token:c,decimalsPow:S}=n.get(M(g.in_coin_type,!1)),{token:B,decimalsPow:L}=n.get(M(g.out_coin_type,!1)),P=O(g.in_deposited).div(S),R=O(g.in_deposited).div(g.in_amount_per_cycle).floor().toString(),y=O(g.in_amount_per_cycle).div(S).toString(),$=O(g.in_balance).div(S),d=O(g.in_withdrawn).div(S),W=O(g.out_balance).gt(0)?O(g.out_balance).div(L):O(0),z=O(g.out_withdrawn).div(L),ct=b(P.div(R).toString()),lt=$.div(y).floor().toNumber(),{minPrice:nt,maxPrice:ut,minPriceResever:xt,maxPriceResever:pt}=h(g.in_amount_per_cycle,S,L,g.max_out_amount_per_cycle,g.min_out_amount_per_cycle),k=D(g),{currentAvgPrice:U,currentAvgPriceResever:rt,inBalanceRatio:gt,inDepositedOut:mt}=m(k,P,d,$,W,z,S),ot=w(g.created_at,g.cycle_frequency,W,z),K={createAt:Y(g.created_at*1e3,"YMDHM"),cycleFrequency:g.cycle_frequency,orderID:g.id,inAmountPerCycle:y,nextCycleAt:Y(g.next_cycle_at*1e3,"YMDHM"),inDeposited:P.toString(),cycleCount:R,inDepositedOut:mt,inBalance:$.toString(),minPrice:b(nt),maxPrice:b(ut),minPriceResever:b(xt),maxPriceResever:b(pt),inCoin:c,outCoin:B,outBalance:W.toString(),inBalanceRatio:gt,outWithdraw:z.toString(),investEvery:Et(g.cycle_frequency),eachOrderSize:ct,currentAvgPrice:U==="--"?"--":b(U,B.decimals),currentAvgPriceResever:U==="--"?"--":b(rt,c.decimals),orderStatus:k,inWithdrawn:d.toString(),ofOrderLeft:lt,isShowTradeTips:ot,nextCycleAtTimeStamp:g.next_cycle_at*1e3,createdAt:g.created_at*1e3,version:g.version};k==="Active"?x.push(K):v.push(K)}catch(c){console.log("ðŸš€ ~ buildDcaOrderList ~ error:",c)}const _=x==null?void 0:x.sort((g,c)=>c.version-g.version),E=v==null?void 0:v.sort((g,c)=>c.version-g.version);return console.log("ðŸš€ ~ buildDcaOrderList ~ activeResult, pastResult:",{activeResult:x,pastResult:v}),{activeResult:_,pastResult:E}};return{getDcaOrderList:i,buildDcaOrderList:A}}function te(){const[e,l]=C.useState(!1),[t,o]=C.useState(!1),{dcaWithdrawPayload:u}=at(),{dcaCloseOrderPayload:i}=st(),{signAndExecuteTransaction:a}=et(),{fetchAccountBalance:h}=V(),{currentAccount:D}=f(),{getDcaOrderList:m}=it();return{closeAll:async p=>{o(!0);try{const x=p==null?void 0:p.map(n=>({order_id:n==null?void 0:n.orderID,in_coin_type:n==null?void 0:n.inCoin.coin_type,out_coin_type:n==null?void 0:n.outCoin.coin_type}));console.log("ðŸš€ ~ const closeOrderParams:any=pageList.map ~ closeOrderParams:",x);const v=await i(x),r=await a(v,{getShowInfo:n=>{const _={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return n==="success"&&(_.modalDescriptionText="DCA Order Closed",_.toastDescriptionContent="",_.toastTitleText="DCA Order Closed"),_}});console.log("ðŸš€ ~ closeAll ~ res:",r),r&&setTimeout(()=>{h(),m(D==null?void 0:D.address,!0)},2e3),o(!1)}catch(x){console.log("ðŸš€ ~ closeAll ~ error:",x),o(!1)}},claimAll:async p=>{l(!0);try{const x=p==null?void 0:p.map(n=>({order_id:n==null?void 0:n.orderID,in_coin_type:n==null?void 0:n.inCoin.coin_type,out_coin_type:n==null?void 0:n.outCoin.coin_type}));console.log("ðŸš€ ~ const claimOrderParams:any=pageList.map ~ claimOrderParams:",x);const v=await u(x),r=await a(v,{getShowInfo:n=>{const _={modalDescriptionText:"DCA Order Claimed",toastTitleText:"DCA Order Claimed"};return n==="success"&&(_.toastDescriptionContent=""),_}});console.log("ðŸš€ ~ claimAll ~ res:",r),r&&setTimeout(()=>{h(),m(D==null?void 0:D.address,!0)},2e3),l(!1)}catch(x){console.log("ðŸš€ ~ claimAll ~ error:",x),l(!1)}},isClaimAllLoading:e,isCloseAllLoading:t}}const dt=(e,l)=>({upperPriceSize:"0%",setUpperPriceSize:t=>{e(()=>({upperPriceSize:t}))},lowerPriceSize:"0%",setLowerPriceSize:t=>{e(()=>({lowerPriceSize:t}))},dcaMode:"total",setDcaMode:t=>{e(()=>({dcaMode:t}))},isDcaRefresh:!1,setIsDcaRefresh:t=>{e(()=>({isDcaRefresh:t}))},pageDirect:!1,setPageDirect:t=>{e(()=>({pageDirect:t}))},sellTotalAmount:"",setSellTotalAmount:t=>{e(()=>({sellTotalAmount:t}))},sellAmount:"",setSellAmount:t=>{e(()=>({sellAmount:t}))},buyAmount:"",setBuyAmount:t=>{e(()=>({buyAmount:t}))},sellCoin:void 0,setSellCoin:t=>{e(()=>({sellCoin:t}))},buyCoin:void 0,setBuyCoin:t=>{e(()=>({buyCoin:t}))},orderNum:"2",setOrderNum:t=>{e(()=>({orderNum:t}))},investNum:"1",setInvestNum:t=>{e(()=>({investNum:t}))},currentCoinKey:"sellCoin",setCurrentCoinKey:t=>{e(()=>({currentCoinKey:t}))},currentInvest:"Hour",setCurrentInvest:t=>{e(()=>({currentInvest:t}))},pageLoading:!0,setPageLoading:t=>{e(()=>({pageLoading:t}))},dcaConfig:{},setDcaConfig:t=>{e(()=>({dcaConfig:t}))},dcaQuote:{},setDcaQuote:t=>{e(()=>({dcaQuote:t}))},orderHistoryObj:{},setOrderHistoryObj:t=>{e(()=>({orderHistoryObj:{...l().orderHistoryObj,...t}}))},inCoinWhiteList:[],setInCoinWhiteList:t=>{e(()=>({inCoinWhiteList:t}))},outCoinWhiteList:[],setOutCoinWhiteList:t=>{e(()=>({outCoinWhiteList:t}))}}),Bt=_t(dt);function Ht(){const{fetchByApi:e}=ht(),{setOrderHistoryObj:l}=Bt();return{getDcaOrderHistory:async({orderId:o,limit:u,offset:i})=>{var h;const a=await e(vt,"GET",{order_id:o,limit:u,offset:i});if(console.log("ðŸš€ ~ file: useGetDcaOrderHistory.ts:16 ~ useGetDcaOrderHistory ~ res:",a),a!=null&&a.list){const D={[o]:{list:((h=a==null?void 0:a.list)==null?void 0:h.map(m=>({inAmount:m==null?void 0:m.in_amount,outAmount:m==null?void 0:m.out_amount,inCoinType:m==null?void 0:m.in_coin,outCoinType:m==null?void 0:m.out_coin,time:m==null?void 0:m.execution_at,tx:m==null?void 0:m.tx})))||[],total:(a==null?void 0:a.total)||0}};return l(D),D}}}}function Wt(){const[e,l]=C.useState(!1),[t,o]=C.useState(!1),[u,i]=C.useState(!1),[a,h]=C.useState([]),[D,m]=C.useState(0),{currentAccount:w}=f(),{dcaWithdrawPayload:A}=at(),{fetchCoinBalance:p}=V(),{signAndExecuteTransaction:x}=et(),{getDcaOrderList:v}=it(),{dcaCloseOrderPayload:r}=st(),{getDcaOrderHistory:n}=Ht();return{toClaim:async c=>{l(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",c);const S=[],B={order_id:c==null?void 0:c.orderID,in_coin_type:c==null?void 0:c.inCoin.coin_type,out_coin_type:c==null?void 0:c.outCoin.coin_type};S.push(B),console.log("ðŸš€ ~ toClaim ~ claimOrderParams:",S);const L=await A(S),P=await x(L,{getShowInfo:R=>{var $,d;const y={modalDescriptionText:`${($=c==null?void 0:c.outCoin)==null?void 0:$.symbol} Claimed`,toastTitleText:`${(d=c==null?void 0:c.outCoin)==null?void 0:d.symbol} Claimed`};return R==="success"&&(y.toastDescriptionContent=""),y}});P&&(console.log("ðŸš€ ~ toClaim ~ res:",P),setTimeout(()=>{p(w==null?void 0:w.address,c==null?void 0:c.outCoin.coin_type),v(w==null?void 0:w.address,!0)},2e3)),l(!1)}catch(S){console.log("ðŸš€ ~ toClaim ~ error:",S),l(!1)}},closeOrderAction:async c=>{o(!0);try{console.log("ðŸš€ ~ closeOrder ~ orderInfo:",c);const S=[{order_id:c==null?void 0:c.orderID,in_coin_type:c==null?void 0:c.inCoin.coin_type,out_coin_type:c==null?void 0:c.outCoin.coin_type}];console.log("ðŸš€ðŸš€ðŸš€ ~ file: dca-order-card.vue:280 ~ closeOrder ~ closeOrderParams:",S);const B=await r(S),L=await x(B,{getShowInfo:P=>{const R={modalDescriptionText:"Closing DCA order",toastTitleText:"Closing DCA order"};return P==="success"&&(R.modalDescriptionText="DCA Order Closed",R.toastDescriptionContent="",R.toastTitleText="DCA Order Closed"),R}});console.log("ðŸš€ ~ closeOrder ~ res:",L),L&&setTimeout(()=>{p(),v(w==null?void 0:w.address,!0)},2e3),o(!1)}catch(S){console.log("ðŸš€ ~ closeOrder ~ error:",S),o(!1)}},isCloseLoading:t,isClaimLoading:e,total:D,orderHistoryList:a,handleGetDcaOrderHistory:async(c,S,B,L=!1)=>{var R,y,$,d;console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ loading:",L),i(L);const P=await n({orderId:c,limit:S,offset:B});console.log("ðŸš€ ~ handleGetDcaOrderHistory ~ res?.list:",P),Q(P)&&((R=P[c])!=null&&R.list)&&h((y=P[c])==null?void 0:y.list),Q(P)&&(($=P[c])!=null&&$.total)&&m((d=P[c])==null?void 0:d.total),i(!1),console.log("ðŸš€ ~ file: TestData.tsx:170 ~ handleGetDcaOrderHistory ~ res:",P)},orderHistoryListLoading:u}}function ee({orderInfo:e}){const{inCoin:l,outCoin:t}=e;return s.jsxs(j,{children:[s.jsx(yt,{coinAIconUrl:l==null?void 0:l.logo_url,coinBIconUrl:t==null?void 0:t.logo_url,coinACoinType:l==null?void 0:l.coin_type,coinBCoinType:t==null?void 0:t.coin_type,w:"28px",h:"28px"}),s.jsxs(T,{color:"text_caption",children:[l==null?void 0:l.symbol," â†’ ",t==null?void 0:t.symbol]})]})}function se({orderInfo:e,isProfile:l}){const{inCoin:t}=e;return s.jsxs(j,{flexDirection:l?"column":"row",align:l?"flex-end":"center",gap:l?"4px":"8px",children:[s.jsxs(j,{children:[s.jsxs(T,{color:"text_caption",fontSize:l?"14px":"12px",children:[b(e==null?void 0:e.inDepositedOut)," ",t==null?void 0:t.symbol]}),s.jsxs(T,{color:l?"text_caption":"primary_gray",fontSize:l?"14px":"12px",children:["/ ",b(e==null?void 0:e.inDeposited)," ",t==null?void 0:t.symbol]})]}),s.jsxs(j,{children:[s.jsxs(T,{color:"primary_gray",fontSize:"12px",children:["(",e==null?void 0:e.inBalanceRatio,"%)"]}),s.jsx(bt,{w:l?"40px":"50px",h:"4px",value:e==null?void 0:e.inBalanceRatio,bg:"#282828",sx:{'div[role="progressbar"]':{bg:"primary"}}})]})]})}function ae({orderInfo:e,isProfile:l=!1,isRank:t=!1}){const o="400",u=C.useMemo(()=>({minPrice:e==null?void 0:e.minPrice,maxPrice:e==null?void 0:e.maxPrice,minPriceResever:e==null?void 0:e.minPriceResever,maxPriceResever:e==null?void 0:e.maxPriceResever}),[e]),i=C.useMemo(()=>e==null?void 0:e.outCoin,[e]),a=C.useMemo(()=>e==null?void 0:e.inCoin,[e]),[h,D]=C.useState(!0),{getTokenRank:m}=jt();C.useEffect(()=>{if(t){const p=m(i,a);console.log("ðŸš€ ~ useEffect ~ direct:",p),D(p)}},[t,i==null?void 0:i.coin_type,a==null?void 0:a.coin_type]);const w=l?"14px":"12px",A=l?"text_paragraph":"primary_gray";return s.jsx(j,{mt:l?"0px":"3px",justify:l?"flex-end":"flex-start",children:s.jsx(I,{isLoaded:!!(u!=null&&u.minPrice)&&!!i&&!!a,children:s.jsxs(j,{flexWrap:"wrap",gap:"4px",justify:"flex-start",align:l?"flex-end":"center",flexDirection:l?"column":"row",children:[s.jsx(T,{lineHeight:"16px",h:"16px",fontSize:w,fontWeight:o,color:"text_caption",whiteSpace:"nowrap",children:h?`${u==null?void 0:u.minPrice} - ${u==null?void 0:u.maxPrice}`:`${u==null?void 0:u.minPriceResever} - ${u==null?void 0:u.maxPriceResever}`}),s.jsxs(j,{gap:"4px",children:[s.jsxs(j,{gap:"0",children:[s.jsx(T,{fontSize:"12px",fontWeight:o,color:A,children:X(h?a==null?void 0:a.symbol:i==null?void 0:i.symbol,10)}),s.jsx(T,{fontSize:"12px",fontWeight:o,color:A,children:"Â perÂ "}),s.jsx(T,{fontSize:"12px",fontWeight:o,color:A,children:X(h?i==null?void 0:i.symbol:a==null?void 0:a.symbol,10)})]}),s.jsx(F,{xlinkHref:"#icon-icon_swap1",w:"14px",h:"14px",onClick:p=>{Dt(p),D(!h)}})]})]})})})}function N({label:e,value:l,direct:t,onChangeDirect:o,textAlign:u="left",showDirectIcon:i=!0,...a}){return s.jsxs(H,{align:"flex-start",flexDirection:{base:"row",lg:"column"},w:{base:"100%",lg:"unset"},justify:{base:"space-between",lg:"unset"},...a,children:[e!==""&&s.jsxs(j,{h:"12px",children:[s.jsx(T,{fontSize:"12px",children:e}),o&&i&&s.jsx(F,{xlinkHref:"#icon-icon_swap1",svgW:"14px",svgH:"14px",ml:"-6px",onClick:o})]}),l!==""&&s.jsx(tt,{fontSize:"12px",color:"text_caption",textAlign:u,children:l})]})}function ie({isDetail:e,currentTabVal:l,orderInfo:t,pageDirect:o}){const{isApp:u}=St(),{inCoin:i,outCoin:a}=t,[h,D]=C.useState(o),[m,w]=C.useState(o),A=10,[p,x]=C.useState(1),{isClaimLoading:v,toClaim:r,total:n,orderHistoryList:_,handleGetDcaOrderHistory:E,orderHistoryListLoading:g}=Wt(),[c,S]=C.useState({label:"Overview",value:"overview"}),B=C.useMemo(()=>[{label:"Overview",value:"overview"},{label:g||Number(n)===0?"Orders":`Orders (${n})`,value:"orders"}],[n]),L=y=>{S(y),t!=null&&t.orderID&&E(t==null?void 0:t.orderID,A,0,!1)};C.useEffect(()=>{e&&(t!=null&&t.orderID)&&E(t==null?void 0:t.orderID,A,0,!1)},[t,e]);const P=y=>{console.log("ðŸš€ ~ handleCurrentPage ~ page:",y);const $=(y-1)*A;E(t==null?void 0:t.orderID,A,$,!1),x(y)},{getExplorerUrl:R}=Ot();return s.jsxs(H,{w:"100%",gap:"20px",children:[s.jsx(At,{type:"outlineTab",wrapStyle:{w:"100%",h:"36px",borderRadius:"8px",p:"4px",mt:"-1px",zIndex:"1"},itemStyle:{w:"50%",fontSize:"12px"},tabList:B,currentTab:c.label,handleChangeTab:L}),s.jsxs(wt,{p:"30px 8px 20px",mt:"-42px",borderRadius:"8px",zIndex:"0",bg:"bg_primary",children:[c.value=="orders"&&(g?s.jsx(I,{height:"4",width:"100%"}):(_==null?void 0:_.length)===0?s.jsx($t,{type:"nodata",text:"No orders",noBorder:!0,p:"12px",bg:"none"}):s.jsxs(H,{w:"100%",align:"flex-start",gap:"16px",mt:"12px",children:[!u&&s.jsxs(j,{w:"100%",flexDirection:{base:"column",lg:"row"},children:[s.jsx(N,{label:"Order info",value:"",w:{base:"100%",lg:"40%"}}),s.jsx(N,{label:"Rate",value:"",w:{base:"100%",lg:"calc(32% - 16px)"},direct:m,onChangeDirect:()=>w(!m)}),s.jsx(N,{label:"Time (UTC)",value:"",w:{base:"100%",lg:"28%"},align:"flex-end",textAlign:"right"})]}),_==null?void 0:_.map(y=>{const $=Z(y.inAmount,i==null?void 0:i.decimals),d=Z(y.outAmount,a==null?void 0:a.decimals),W=O($).div(d).toString(),z=O(1).div(W).toString();return s.jsxs(j,{w:"100%",flexDirection:{base:"column",lg:"row"},borderBottom:u?"1px solid":"none",pb:u?"16px":"0",borderColor:"border",_last:{borderBottom:"none",pb:"0"},children:[s.jsx(N,{label:u?"Order info":"",value:`${b($)} ${i.symbol} â†’ ${b(d)} ${a.symbol}`,w:{base:"100%",lg:"40%"}}),s.jsx(N,{label:u?"Rate":"",value:m?`${b(W)} ${i.symbol} per ${a.symbol}`:`${b(z)} ${a.symbol} per ${i.symbol}`,w:{base:"100%",lg:"calc(32% - 16px)"},direct:m,showDirectIcon:!!u,onChangeDirect:()=>w(!m)}),s.jsx(N,{label:u?"Time (UTC)":"",value:s.jsxs(j,{h:"12px",children:[s.jsx(T,{fontSize:"12px",color:"text_caption",children:Y((y==null?void 0:y.time)*1e3,"YMDHM")}),s.jsx(F,{xlinkHref:"#icon-icon_link1",onClick:()=>{window.open(R(y==null?void 0:y.tx,"tx"))}})]}),w:{base:"100%",lg:"28%"},align:"flex-end",textAlign:"right"})]},y==null?void 0:y.time)}),O(n).gt(A)&&s.jsx(Pt,{w:"100%",children:s.jsx(Rt,{total:n,size:A,currentPage:p,onChange:P})})]})),c.value=="overview"&&s.jsxs(H,{align:"flex-start",gap:"20px",children:[(t==null?void 0:t.isShowTradeTips)&&(t==null?void 0:t.orderStatus)=="Active"&&l=="active"&&s.jsx(Ut,{}),s.jsxs(H,{w:"100%",borderRadius:"8px",p:"12px",bg:"card_bg",gap:"12px",children:[s.jsx(J,{isLoading:!1,label:`DCA  ${i==null?void 0:i.symbol} Balance`,value:`${Mt(t)} ${i==null?void 0:i.symbol}`,skeletonStyle:{valueW:"128px"}}),s.jsxs(j,{w:"100%",justify:"space-between",children:[s.jsxs(T,{fontSize:"12px",children:["DCA ",a==null?void 0:a.symbol," Balance"]}),s.jsxs(j,{children:[s.jsxs(T,{color:"text_caption",fontSize:"12px",children:[kt(t)," ",a==null?void 0:a.symbol]}),l=="active"&&s.jsx(Ct,{isLoading:v,onClick:()=>r(t),disabled:(t==null?void 0:t.outBalance)<=0||v,w:"60px",h:"20px",fontSize:"12px",borderRadius:"4px",variant:"outline",children:"Claim"})]})]}),s.jsx(J,{isLoading:!1,label:"Amount Withdrawn",value:zt(t,l=="active"),skeletonStyle:{valueW:"128px"}})]}),s.jsxs(j,{flexWrap:"wrap",p:{base:"0",lg:"0 12px"},mt:{base:"-12px",lg:"-28px"},sx:{">div":{mt:{base:"12px",lg:"28px"},w:{base:"100%",lg:"calc((100% - 66px)/3)"},"&:nth-child(3n+1)":{mr:{base:"0",lg:"50px"}}}},children:[s.jsx(N,{label:"Invest Every",value:t==null?void 0:t.investEvery}),s.jsx(N,{label:"# of Orders Left",value:t==null?void 0:t.ofOrderLeft}),s.jsx(N,{label:"Each Order Size",value:`${t==null?void 0:t.eachOrderSize} ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right"}),s.jsx(N,{label:"Minimum Price",value:h?`${t==null?void 0:t.minPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.minPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,direct:h,onChangeDirect:()=>D(!h)}),s.jsx(N,{label:"Maximum Price",value:h?`${t==null?void 0:t.maxPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.maxPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,direct:h,onChangeDirect:()=>D(!h)}),l=="active"&&s.jsx(N,{label:"Current Avg. Price",value:h?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right",direct:h,onChangeDirect:()=>D(!h)}),l!=="active"&&(t==null?void 0:t.currentAvgPrice)!=="--"&&s.jsx(N,{label:"Avg. Price",value:h?`${t==null?void 0:t.currentAvgPrice} ${i==null?void 0:i.symbol} per ${a==null?void 0:a.symbol}`:`${t==null?void 0:t.currentAvgPriceResever} ${a==null?void 0:a.symbol} per ${i==null?void 0:i.symbol}`,align:"flex-end",textAlign:"right",direct:h,onChangeDirect:()=>D(!h)}),l=="active"&&s.jsx(N,{label:"Next Order (UTC)",value:t==null?void 0:t.nextCycleAt}),s.jsx(N,{label:"Created (UTC)",value:t==null?void 0:t.createAt,align:l=="active"||l!=="active"&&(t==null?void 0:t.currentAvgPrice)!=="--"?"flex-start":"flex-end"})]})]})]})]})}const zt=(e,l,t=!1)=>{const{inCoin:o,outCoin:u}=e;return l?`${b(e==null?void 0:e.outWithdraw,2)} ${u==null?void 0:u.symbol}`:(e==null?void 0:e.orderStatus)==="PartialDeal"||(e==null?void 0:e.orderStatus)==="Close"?O(e==null?void 0:e.outWithdraw).gt(0)?s.jsxs(s.Fragment,{children:[b(e==null?void 0:e.inWithdrawn)," ",o==null?void 0:o.symbol,t&&s.jsx(tt,{as:"span",display:"inline-block",m:"0 8px",w:"1px",h:"14px",bg:"border"}),b(e==null?void 0:e.outWithdraw)," ",u==null?void 0:u.symbol]}):`${b(e==null?void 0:e.inWithdrawn)} ${o==null?void 0:o.symbol}`:`${b(e==null?void 0:e.outWithdraw)} ${u==null?void 0:u.symbol}`},Mt=e=>b(e==null?void 0:e.inBalance,2)||"0",kt=e=>(e==null?void 0:e.outBalance)>0?b(e==null?void 0:e.outBalance):e==null?void 0:e.outBalance,Ut=()=>s.jsxs(H,{p:"12px 12px 0",align:"flex-start",children:[s.jsx(j,{children:s.jsx(Lt,{tips:"The system tried to execute your order multiple times but did not get it through. This is possibly because:",type:"warning",tipsFontSize:"12px",p:"0",bg:"none",svgW:"20px",svgH:"20px"})}),s.jsx(Gt,{})]});function Gt(){return s.jsxs(H,{align:"flex-start",w:"100%",children:[s.jsx(T,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market price is not in your required price range"}),s.jsx(T,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market no longer exit"}),s.jsx(T,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",children:"- The market is extremely volatile"}),s.jsx(T,{color:"primary_yellow",lineHeight:"20px",fontSize:"12px",textAlign:"left",children:"This DCA will continue to be attempted and the estimated end date may be extended until your order is fully executed."})]})}export{ee as D,ie as O,ae as R,Gt as W,se as a,te as b,Bt as c,it as d,Mt as e,kt as f,zt as g,Wt as u};
//# sourceMappingURL=OverviewOrders-kSD6x0sT.js.map
